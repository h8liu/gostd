<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6265743">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6265799">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6265853">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6265904">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6265963">package</span>&nbsp;<span class="ident" id="6265971">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6265978">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6266030">import</span>&nbsp;<span class="op" id="6266037">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266040">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266049">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266064">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266083">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266090">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6266096">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6266101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6266104">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6266146">type</span>&nbsp;<span class="ident" id="6266151">File</span>&nbsp;<span class="keyword" id="6266156">struct</span>&nbsp;<span class="op" id="6266163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266166">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266178">ByteOrder</span>&nbsp;<span class="ident" id="6266188">binary</span><span class="op" id="6266194">.</span><span class="ident" id="6266195">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266206">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6266216">[</span><span class="op" id="6266217">]</span><span class="ident" id="6266218">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266224">Sections</span>&nbsp;&nbsp;<span class="op" id="6266234">[</span><span class="op" id="6266235">]</span><span class="op" id="6266236">*</span><span class="ident" id="6266237">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266247">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6266256">*</span><span class="ident" id="6266257">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266265">Dysymtab</span>&nbsp;<span class="op" id="6266274">*</span><span class="ident" id="6266275">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266286">closer</span>&nbsp;<span class="ident" id="6266293">io</span><span class="op" id="6266295">.</span><span class="ident" id="6266296">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6266303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6266306">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6266352">type</span>&nbsp;<span class="ident" id="6266357">Load</span>&nbsp;<span class="keyword" id="6266362">interface</span>&nbsp;<span class="op" id="6266372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266375">Raw</span><span class="op" id="6266378">(</span><span class="op" id="6266379">)</span>&nbsp;<span class="op" id="6266381">[</span><span class="op" id="6266382">]</span><span class="builtintype" id="6266383">byte</span><br>
<span class="lineno">35</span><span class="op" id="6266388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6266391">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6266459">type</span>&nbsp;<span class="ident" id="6266464">LoadBytes</span>&nbsp;<span class="op" id="6266474">[</span><span class="op" id="6266475">]</span><span class="builtintype" id="6266476">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6266482">func</span>&nbsp;<span class="op" id="6266487">(</span><span class="ident" id="6266488">b</span>&nbsp;<span class="ident" id="6266490">LoadBytes</span><span class="op" id="6266499">)</span>&nbsp;<span class="ident" id="6266501">Raw</span><span class="op" id="6266504">(</span><span class="op" id="6266505">)</span>&nbsp;<span class="op" id="6266507">[</span><span class="op" id="6266508">]</span><span class="builtintype" id="6266509">byte</span>&nbsp;<span class="op" id="6266514">{</span>&nbsp;<span class="keyword" id="6266516">return</span>&nbsp;<span class="ident" id="6266523">b</span>&nbsp;<span class="op" id="6266525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6266528">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6266613">type</span>&nbsp;<span class="ident" id="6266618">SegmentHeader</span>&nbsp;<span class="keyword" id="6266632">struct</span>&nbsp;<span class="op" id="6266639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266642">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6266650">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266659">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6266667">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266675">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6266683">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266691">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6266699">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266707">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6266715">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266723">Offset</span>&nbsp;&nbsp;<span class="ident" id="6266731">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266739">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6266747">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266755">Maxprot</span>&nbsp;<span class="builtintype" id="6266763">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266771">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6266779">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266787">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6266795">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266803">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6266811">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6266818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6266821">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6266893">type</span>&nbsp;<span class="ident" id="6266898">Segment</span>&nbsp;<span class="keyword" id="6266906">struct</span>&nbsp;<span class="op" id="6266913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266916">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6266927">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6266943">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6266981">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267021">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267056">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267104">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267154">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267178">io</span><span class="op" id="6267180">.</span><span class="ident" id="6267181">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267191">sr</span>&nbsp;<span class="op" id="6267194">*</span><span class="ident" id="6267195">io</span><span class="op" id="6267197">.</span><span class="ident" id="6267198">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6267212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6267215">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6267270">func</span>&nbsp;<span class="op" id="6267275">(</span><span class="ident" id="6267276">s</span>&nbsp;<span class="op" id="6267278">*</span><span class="ident" id="6267279">Segment</span><span class="op" id="6267286">)</span>&nbsp;<span class="ident" id="6267288">Data</span><span class="op" id="6267292">(</span><span class="op" id="6267293">)</span>&nbsp;<span class="op" id="6267295">(</span><span class="op" id="6267296">[</span><span class="op" id="6267297">]</span><span class="builtintype" id="6267298">byte</span><span class="op" id="6267302">,</span>&nbsp;<span class="builtintype" id="6267304">error</span><span class="op" id="6267309">)</span>&nbsp;<span class="op" id="6267311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267314">dat</span>&nbsp;<span class="op" id="6267318">:=</span>&nbsp;<span class="builtinfunc" id="6267321">make</span><span class="op" id="6267325">(</span><span class="op" id="6267326">[</span><span class="op" id="6267327">]</span><span class="builtintype" id="6267328">byte</span><span class="op" id="6267332">,</span>&nbsp;<span class="ident" id="6267334">s</span><span class="op" id="6267335">.</span><span class="ident" id="6267336">sr</span><span class="op" id="6267338">.</span><span class="ident" id="6267339">Size</span><span class="op" id="6267343">(</span><span class="op" id="6267344">)</span><span class="op" id="6267345">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267348">n</span><span class="op" id="6267349">,</span>&nbsp;<span class="ident" id="6267351">err</span>&nbsp;<span class="op" id="6267355">:=</span>&nbsp;<span class="ident" id="6267358">s</span><span class="op" id="6267359">.</span><span class="ident" id="6267360">sr</span><span class="op" id="6267362">.</span><span class="ident" id="6267363">ReadAt</span><span class="op" id="6267369">(</span><span class="ident" id="6267370">dat</span><span class="op" id="6267373">,</span>&nbsp;<span class="num" id="6267375">0</span><span class="op" id="6267376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6267379">if</span>&nbsp;<span class="ident" id="6267382">n</span>&nbsp;<span class="op" id="6267384">==</span>&nbsp;<span class="builtinfunc" id="6267387">len</span><span class="op" id="6267390">(</span><span class="ident" id="6267391">dat</span><span class="op" id="6267394">)</span>&nbsp;<span class="op" id="6267396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267400">err</span>&nbsp;<span class="op" id="6267404">=</span>&nbsp;<span class="ident" id="6267406">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6267411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6267414">return</span>&nbsp;<span class="ident" id="6267421">dat</span><span class="op" id="6267424">[</span><span class="num" id="6267425">0</span><span class="op" id="6267426">:</span><span class="ident" id="6267427">n</span><span class="op" id="6267428">]</span><span class="op" id="6267429">,</span>&nbsp;<span class="ident" id="6267431">err</span><br>
<span class="lineno">80</span><span class="op" id="6267435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6267438">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6267492">func</span>&nbsp;<span class="op" id="6267497">(</span><span class="ident" id="6267498">s</span>&nbsp;<span class="op" id="6267500">*</span><span class="ident" id="6267501">Segment</span><span class="op" id="6267508">)</span>&nbsp;<span class="ident" id="6267510">Open</span><span class="op" id="6267514">(</span><span class="op" id="6267515">)</span>&nbsp;<span class="ident" id="6267517">io</span><span class="op" id="6267519">.</span><span class="ident" id="6267520">ReadSeeker</span>&nbsp;<span class="op" id="6267531">{</span>&nbsp;<span class="keyword" id="6267533">return</span>&nbsp;<span class="ident" id="6267540">io</span><span class="op" id="6267542">.</span><span class="ident" id="6267543">NewSectionReader</span><span class="op" id="6267559">(</span><span class="ident" id="6267560">s</span><span class="op" id="6267561">.</span><span class="ident" id="6267562">sr</span><span class="op" id="6267564">,</span>&nbsp;<span class="num" id="6267566">0</span><span class="op" id="6267567">,</span>&nbsp;<span class="num" id="6267569">1</span><span class="op" id="6267570">&lt;&lt;</span><span class="num" id="6267572">63</span><span class="op" id="6267574">-</span><span class="num" id="6267575">1</span><span class="op" id="6267576">)</span>&nbsp;<span class="op" id="6267578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6267581">type</span>&nbsp;<span class="ident" id="6267586">SectionHeader</span>&nbsp;<span class="keyword" id="6267600">struct</span>&nbsp;<span class="op" id="6267607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267610">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6267617">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267625">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6267632">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267640">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6267647">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267655">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6267662">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267670">Offset</span>&nbsp;<span class="builtintype" id="6267677">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267685">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6267692">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267700">Reloff</span>&nbsp;<span class="builtintype" id="6267707">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267715">Nreloc</span>&nbsp;<span class="builtintype" id="6267722">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267730">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6267737">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6267744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6267747">type</span>&nbsp;<span class="ident" id="6267752">Section</span>&nbsp;<span class="keyword" id="6267760">struct</span>&nbsp;<span class="op" id="6267767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6267770">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267786">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267824">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267864">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267899">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267947">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6267997">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268021">io</span><span class="op" id="6268023">.</span><span class="ident" id="6268024">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268034">sr</span>&nbsp;<span class="op" id="6268037">*</span><span class="ident" id="6268038">io</span><span class="op" id="6268040">.</span><span class="ident" id="6268041">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6268055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6268058">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6268120">func</span>&nbsp;<span class="op" id="6268125">(</span><span class="ident" id="6268126">s</span>&nbsp;<span class="op" id="6268128">*</span><span class="ident" id="6268129">Section</span><span class="op" id="6268136">)</span>&nbsp;<span class="ident" id="6268138">Data</span><span class="op" id="6268142">(</span><span class="op" id="6268143">)</span>&nbsp;<span class="op" id="6268145">(</span><span class="op" id="6268146">[</span><span class="op" id="6268147">]</span><span class="builtintype" id="6268148">byte</span><span class="op" id="6268152">,</span>&nbsp;<span class="builtintype" id="6268154">error</span><span class="op" id="6268159">)</span>&nbsp;<span class="op" id="6268161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268164">dat</span>&nbsp;<span class="op" id="6268168">:=</span>&nbsp;<span class="builtinfunc" id="6268171">make</span><span class="op" id="6268175">(</span><span class="op" id="6268176">[</span><span class="op" id="6268177">]</span><span class="builtintype" id="6268178">byte</span><span class="op" id="6268182">,</span>&nbsp;<span class="ident" id="6268184">s</span><span class="op" id="6268185">.</span><span class="ident" id="6268186">sr</span><span class="op" id="6268188">.</span><span class="ident" id="6268189">Size</span><span class="op" id="6268193">(</span><span class="op" id="6268194">)</span><span class="op" id="6268195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268198">n</span><span class="op" id="6268199">,</span>&nbsp;<span class="ident" id="6268201">err</span>&nbsp;<span class="op" id="6268205">:=</span>&nbsp;<span class="ident" id="6268208">s</span><span class="op" id="6268209">.</span><span class="ident" id="6268210">sr</span><span class="op" id="6268212">.</span><span class="ident" id="6268213">ReadAt</span><span class="op" id="6268219">(</span><span class="ident" id="6268220">dat</span><span class="op" id="6268223">,</span>&nbsp;<span class="num" id="6268225">0</span><span class="op" id="6268226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6268229">if</span>&nbsp;<span class="ident" id="6268232">n</span>&nbsp;<span class="op" id="6268234">==</span>&nbsp;<span class="builtinfunc" id="6268237">len</span><span class="op" id="6268240">(</span><span class="ident" id="6268241">dat</span><span class="op" id="6268244">)</span>&nbsp;<span class="op" id="6268246">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268250">err</span>&nbsp;<span class="op" id="6268254">=</span>&nbsp;<span class="ident" id="6268256">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6268261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6268264">return</span>&nbsp;<span class="ident" id="6268271">dat</span><span class="op" id="6268274">[</span><span class="num" id="6268275">0</span><span class="op" id="6268276">:</span><span class="ident" id="6268277">n</span><span class="op" id="6268278">]</span><span class="op" id="6268279">,</span>&nbsp;<span class="ident" id="6268281">err</span><br>
<span class="lineno"></span><span class="op" id="6268285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6268288">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6268349">func</span>&nbsp;<span class="op" id="6268354">(</span><span class="ident" id="6268355">s</span>&nbsp;<span class="op" id="6268357">*</span><span class="ident" id="6268358">Section</span><span class="op" id="6268365">)</span>&nbsp;<span class="ident" id="6268367">Open</span><span class="op" id="6268371">(</span><span class="op" id="6268372">)</span>&nbsp;<span class="ident" id="6268374">io</span><span class="op" id="6268376">.</span><span class="ident" id="6268377">ReadSeeker</span>&nbsp;<span class="op" id="6268388">{</span>&nbsp;<span class="keyword" id="6268390">return</span>&nbsp;<span class="ident" id="6268397">io</span><span class="op" id="6268399">.</span><span class="ident" id="6268400">NewSectionReader</span><span class="op" id="6268416">(</span><span class="ident" id="6268417">s</span><span class="op" id="6268418">.</span><span class="ident" id="6268419">sr</span><span class="op" id="6268421">,</span>&nbsp;<span class="num" id="6268423">0</span><span class="op" id="6268424">,</span>&nbsp;<span class="num" id="6268426">1</span><span class="op" id="6268427">&lt;&lt;</span><span class="num" id="6268429">63</span><span class="op" id="6268431">-</span><span class="num" id="6268432">1</span><span class="op" id="6268433">)</span>&nbsp;<span class="op" id="6268435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6268438">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6268499">type</span>&nbsp;<span class="ident" id="6268504">Dylib</span>&nbsp;<span class="keyword" id="6268510">struct</span>&nbsp;<span class="op" id="6268517">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268520">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268531">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6268546">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268554">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6268569">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268577">CurrentVersion</span>&nbsp;<span class="builtintype" id="6268592">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268600">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6268615">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6268622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6268625">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6268679">type</span>&nbsp;<span class="ident" id="6268684">Symtab</span>&nbsp;<span class="keyword" id="6268691">struct</span>&nbsp;<span class="op" id="6268698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268701">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268712">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268723">Syms</span>&nbsp;<span class="op" id="6268728">[</span><span class="op" id="6268729">]</span><span class="ident" id="6268730">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6268737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6268740">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6268804">type</span>&nbsp;<span class="ident" id="6268809">Dysymtab</span>&nbsp;<span class="keyword" id="6268818">struct</span>&nbsp;<span class="op" id="6268825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268828">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268839">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6268852">IndirectSyms</span>&nbsp;<span class="op" id="6268865">[</span><span class="op" id="6268866">]</span><span class="builtintype" id="6268867">uint32</span>&nbsp;<span class="comment" id="6268874">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6268902">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6268905">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6268930">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6268993">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6269044">type</span>&nbsp;<span class="ident" id="6269049">FormatError</span>&nbsp;<span class="keyword" id="6269061">struct</span>&nbsp;<span class="op" id="6269068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269071">off</span>&nbsp;<span class="ident" id="6269075">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269082">msg</span>&nbsp;<span class="builtintype" id="6269086">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269094">val</span>&nbsp;<span class="keyword" id="6269098">interface</span><span class="op" id="6269107">{</span><span class="op" id="6269108">}</span><br>
<span class="lineno"></span><span class="op" id="6269110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269113">func</span>&nbsp;<span class="op" id="6269118">(</span><span class="ident" id="6269119">e</span>&nbsp;<span class="op" id="6269121">*</span><span class="ident" id="6269122">FormatError</span><span class="op" id="6269133">)</span>&nbsp;<span class="ident" id="6269135">Error</span><span class="op" id="6269140">(</span><span class="op" id="6269141">)</span>&nbsp;<span class="builtintype" id="6269143">string</span>&nbsp;<span class="op" id="6269150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269153">msg</span>&nbsp;<span class="op" id="6269157">:=</span>&nbsp;<span class="ident" id="6269160">e</span><span class="op" id="6269161">.</span><span class="ident" id="6269162">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269167">if</span>&nbsp;<span class="ident" id="6269170">e</span><span class="op" id="6269171">.</span><span class="ident" id="6269172">val</span>&nbsp;<span class="op" id="6269176">!=</span>&nbsp;<span class="ident" id="6269179">nil</span>&nbsp;<span class="op" id="6269183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269187">msg</span>&nbsp;<span class="op" id="6269191">+=</span>&nbsp;<span class="ident" id="6269194">fmt</span><span class="op" id="6269197">.</span><span class="ident" id="6269198">Sprintf</span><span class="op" id="6269205">(</span><span class="string" id="6269206">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6269213">,</span>&nbsp;<span class="ident" id="6269215">e</span><span class="op" id="6269216">.</span><span class="ident" id="6269217">val</span><span class="op" id="6269220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269226">msg</span>&nbsp;<span class="op" id="6269230">+=</span>&nbsp;<span class="ident" id="6269233">fmt</span><span class="op" id="6269236">.</span><span class="ident" id="6269237">Sprintf</span><span class="op" id="6269244">(</span><span class="string" id="6269245">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6269269">,</span>&nbsp;<span class="ident" id="6269271">e</span><span class="op" id="6269272">.</span><span class="ident" id="6269273">off</span><span class="op" id="6269276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269279">return</span>&nbsp;<span class="ident" id="6269286">msg</span><br>
<span class="lineno">165</span><span class="op" id="6269290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6269293">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6269380">func</span>&nbsp;<span class="ident" id="6269385">Open</span><span class="op" id="6269389">(</span><span class="ident" id="6269390">name</span>&nbsp;<span class="builtintype" id="6269395">string</span><span class="op" id="6269401">)</span>&nbsp;<span class="op" id="6269403">(</span><span class="op" id="6269404">*</span><span class="ident" id="6269405">File</span><span class="op" id="6269409">,</span>&nbsp;<span class="builtintype" id="6269411">error</span><span class="op" id="6269416">)</span>&nbsp;<span class="op" id="6269418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269421">f</span><span class="op" id="6269422">,</span>&nbsp;<span class="ident" id="6269424">err</span>&nbsp;<span class="op" id="6269428">:=</span>&nbsp;<span class="ident" id="6269431">os</span><span class="op" id="6269433">.</span><span class="ident" id="6269434">Open</span><span class="op" id="6269438">(</span><span class="ident" id="6269439">name</span><span class="op" id="6269443">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269446">if</span>&nbsp;<span class="ident" id="6269449">err</span>&nbsp;<span class="op" id="6269453">!=</span>&nbsp;<span class="ident" id="6269456">nil</span>&nbsp;<span class="op" id="6269460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269464">return</span>&nbsp;<span class="ident" id="6269471">nil</span><span class="op" id="6269474">,</span>&nbsp;<span class="ident" id="6269476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269484">ff</span><span class="op" id="6269486">,</span>&nbsp;<span class="ident" id="6269488">err</span>&nbsp;<span class="op" id="6269492">:=</span>&nbsp;<span class="ident" id="6269495">NewFile</span><span class="op" id="6269502">(</span><span class="ident" id="6269503">f</span><span class="op" id="6269504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269507">if</span>&nbsp;<span class="ident" id="6269510">err</span>&nbsp;<span class="op" id="6269514">!=</span>&nbsp;<span class="ident" id="6269517">nil</span>&nbsp;<span class="op" id="6269521">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269525">f</span><span class="op" id="6269526">.</span><span class="ident" id="6269527">Close</span><span class="op" id="6269532">(</span><span class="op" id="6269533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269537">return</span>&nbsp;<span class="ident" id="6269544">nil</span><span class="op" id="6269547">,</span>&nbsp;<span class="ident" id="6269549">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269557">ff</span><span class="op" id="6269559">.</span><span class="ident" id="6269560">closer</span>&nbsp;<span class="op" id="6269567">=</span>&nbsp;<span class="ident" id="6269569">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269572">return</span>&nbsp;<span class="ident" id="6269579">ff</span><span class="op" id="6269581">,</span>&nbsp;<span class="ident" id="6269583">nil</span><br>
<span class="lineno">180</span><span class="op" id="6269587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6269590">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6269616">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6269683">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6269707">func</span>&nbsp;<span class="op" id="6269712">(</span><span class="ident" id="6269713">f</span>&nbsp;<span class="op" id="6269715">*</span><span class="ident" id="6269716">File</span><span class="op" id="6269720">)</span>&nbsp;<span class="ident" id="6269722">Close</span><span class="op" id="6269727">(</span><span class="op" id="6269728">)</span>&nbsp;<span class="builtintype" id="6269730">error</span>&nbsp;<span class="op" id="6269736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269739">var</span>&nbsp;<span class="ident" id="6269743">err</span>&nbsp;<span class="builtintype" id="6269747">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269754">if</span>&nbsp;<span class="ident" id="6269757">f</span><span class="op" id="6269758">.</span><span class="ident" id="6269759">closer</span>&nbsp;<span class="op" id="6269766">!=</span>&nbsp;<span class="ident" id="6269769">nil</span>&nbsp;<span class="op" id="6269773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269777">err</span>&nbsp;<span class="op" id="6269781">=</span>&nbsp;<span class="ident" id="6269783">f</span><span class="op" id="6269784">.</span><span class="ident" id="6269785">closer</span><span class="op" id="6269791">.</span><span class="ident" id="6269792">Close</span><span class="op" id="6269797">(</span><span class="op" id="6269798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269802">f</span><span class="op" id="6269803">.</span><span class="ident" id="6269804">closer</span>&nbsp;<span class="op" id="6269811">=</span>&nbsp;<span class="ident" id="6269813">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269821">return</span>&nbsp;<span class="ident" id="6269828">err</span><br>
<span class="lineno"></span><span class="op" id="6269832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6269835">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6269920">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6269993">func</span>&nbsp;<span class="ident" id="6269998">NewFile</span><span class="op" id="6270005">(</span><span class="ident" id="6270006">r</span>&nbsp;<span class="ident" id="6270008">io</span><span class="op" id="6270010">.</span><span class="ident" id="6270011">ReaderAt</span><span class="op" id="6270019">)</span>&nbsp;<span class="op" id="6270021">(</span><span class="op" id="6270022">*</span><span class="ident" id="6270023">File</span><span class="op" id="6270027">,</span>&nbsp;<span class="builtintype" id="6270029">error</span><span class="op" id="6270034">)</span>&nbsp;<span class="op" id="6270036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270039">f</span>&nbsp;<span class="op" id="6270041">:=</span>&nbsp;<span class="builtinfunc" id="6270044">new</span><span class="op" id="6270047">(</span><span class="ident" id="6270048">File</span><span class="op" id="6270052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270055">sr</span>&nbsp;<span class="op" id="6270058">:=</span>&nbsp;<span class="ident" id="6270061">io</span><span class="op" id="6270063">.</span><span class="ident" id="6270064">NewSectionReader</span><span class="op" id="6270080">(</span><span class="ident" id="6270081">r</span><span class="op" id="6270082">,</span>&nbsp;<span class="num" id="6270084">0</span><span class="op" id="6270085">,</span>&nbsp;<span class="num" id="6270087">1</span><span class="op" id="6270088">&lt;&lt;</span><span class="num" id="6270090">63</span><span class="op" id="6270092">-</span><span class="num" id="6270093">1</span><span class="op" id="6270094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6270098">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6270160">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270215">var</span>&nbsp;<span class="ident" id="6270219">ident</span>&nbsp;<span class="op" id="6270225">[</span><span class="num" id="6270226">4</span><span class="op" id="6270227">]</span><span class="builtintype" id="6270228">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270234">if</span>&nbsp;<span class="ident" id="6270237">_</span><span class="op" id="6270238">,</span>&nbsp;<span class="ident" id="6270240">err</span>&nbsp;<span class="op" id="6270244">:=</span>&nbsp;<span class="ident" id="6270247">r</span><span class="op" id="6270248">.</span><span class="ident" id="6270249">ReadAt</span><span class="op" id="6270255">(</span><span class="ident" id="6270256">ident</span><span class="op" id="6270261">[</span><span class="num" id="6270262">0</span><span class="op" id="6270263">:</span><span class="op" id="6270264">]</span><span class="op" id="6270265">,</span>&nbsp;<span class="num" id="6270267">0</span><span class="op" id="6270268">)</span><span class="op" id="6270269">;</span>&nbsp;<span class="ident" id="6270271">err</span>&nbsp;<span class="op" id="6270275">!=</span>&nbsp;<span class="ident" id="6270278">nil</span>&nbsp;<span class="op" id="6270282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270286">return</span>&nbsp;<span class="ident" id="6270293">nil</span><span class="op" id="6270296">,</span>&nbsp;<span class="ident" id="6270298">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270306">be</span>&nbsp;<span class="op" id="6270309">:=</span>&nbsp;<span class="ident" id="6270312">binary</span><span class="op" id="6270318">.</span><span class="ident" id="6270319">BigEndian</span><span class="op" id="6270328">.</span><span class="ident" id="6270329">Uint32</span><span class="op" id="6270335">(</span><span class="ident" id="6270336">ident</span><span class="op" id="6270341">[</span><span class="num" id="6270342">0</span><span class="op" id="6270343">:</span><span class="op" id="6270344">]</span><span class="op" id="6270345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270348">le</span>&nbsp;<span class="op" id="6270351">:=</span>&nbsp;<span class="ident" id="6270354">binary</span><span class="op" id="6270360">.</span><span class="ident" id="6270361">LittleEndian</span><span class="op" id="6270373">.</span><span class="ident" id="6270374">Uint32</span><span class="op" id="6270380">(</span><span class="ident" id="6270381">ident</span><span class="op" id="6270386">[</span><span class="num" id="6270387">0</span><span class="op" id="6270388">:</span><span class="op" id="6270389">]</span><span class="op" id="6270390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270393">switch</span>&nbsp;<span class="ident" id="6270400">Magic32</span>&nbsp;<span class="op" id="6270408">&amp;^</span>&nbsp;<span class="num" id="6270411">1</span>&nbsp;<span class="op" id="6270413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270416">case</span>&nbsp;<span class="ident" id="6270421">be</span>&nbsp;<span class="op" id="6270424">&amp;^</span>&nbsp;<span class="num" id="6270427">1</span><span class="op" id="6270428">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270432">f</span><span class="op" id="6270433">.</span><span class="ident" id="6270434">ByteOrder</span>&nbsp;<span class="op" id="6270444">=</span>&nbsp;<span class="ident" id="6270446">binary</span><span class="op" id="6270452">.</span><span class="ident" id="6270453">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270465">f</span><span class="op" id="6270466">.</span><span class="ident" id="6270467">Magic</span>&nbsp;<span class="op" id="6270473">=</span>&nbsp;<span class="ident" id="6270475">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270479">case</span>&nbsp;<span class="ident" id="6270484">le</span>&nbsp;<span class="op" id="6270487">&amp;^</span>&nbsp;<span class="num" id="6270490">1</span><span class="op" id="6270491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270495">f</span><span class="op" id="6270496">.</span><span class="ident" id="6270497">ByteOrder</span>&nbsp;<span class="op" id="6270507">=</span>&nbsp;<span class="ident" id="6270509">binary</span><span class="op" id="6270515">.</span><span class="ident" id="6270516">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270531">f</span><span class="op" id="6270532">.</span><span class="ident" id="6270533">Magic</span>&nbsp;<span class="op" id="6270539">=</span>&nbsp;<span class="ident" id="6270541">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270545">default</span><span class="op" id="6270552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270556">return</span>&nbsp;<span class="ident" id="6270563">nil</span><span class="op" id="6270566">,</span>&nbsp;<span class="op" id="6270568">&amp;</span><span class="ident" id="6270569">FormatError</span><span class="op" id="6270580">{</span><span class="num" id="6270581">0</span><span class="op" id="6270582">,</span>&nbsp;<span class="string" id="6270584">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6270606">,</span>&nbsp;<span class="ident" id="6270608">nil</span><span class="op" id="6270611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6270618">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270647">if</span>&nbsp;<span class="ident" id="6270650">err</span>&nbsp;<span class="op" id="6270654">:=</span>&nbsp;<span class="ident" id="6270657">binary</span><span class="op" id="6270663">.</span><span class="ident" id="6270664">Read</span><span class="op" id="6270668">(</span><span class="ident" id="6270669">sr</span><span class="op" id="6270671">,</span>&nbsp;<span class="ident" id="6270673">f</span><span class="op" id="6270674">.</span><span class="ident" id="6270675">ByteOrder</span><span class="op" id="6270684">,</span>&nbsp;<span class="op" id="6270686">&amp;</span><span class="ident" id="6270687">f</span><span class="op" id="6270688">.</span><span class="ident" id="6270689">FileHeader</span><span class="op" id="6270699">)</span><span class="op" id="6270700">;</span>&nbsp;<span class="ident" id="6270702">err</span>&nbsp;<span class="op" id="6270706">!=</span>&nbsp;<span class="ident" id="6270709">nil</span>&nbsp;<span class="op" id="6270713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270717">return</span>&nbsp;<span class="ident" id="6270724">nil</span><span class="op" id="6270727">,</span>&nbsp;<span class="ident" id="6270729">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6270738">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270762">offset</span>&nbsp;<span class="op" id="6270769">:=</span>&nbsp;<span class="ident" id="6270772">int64</span><span class="op" id="6270777">(</span><span class="ident" id="6270778">fileHeaderSize32</span><span class="op" id="6270794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270797">if</span>&nbsp;<span class="ident" id="6270800">f</span><span class="op" id="6270801">.</span><span class="ident" id="6270802">Magic</span>&nbsp;<span class="op" id="6270808">==</span>&nbsp;<span class="ident" id="6270811">Magic64</span>&nbsp;<span class="op" id="6270819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270823">offset</span>&nbsp;<span class="op" id="6270830">=</span>&nbsp;<span class="ident" id="6270832">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270853">dat</span>&nbsp;<span class="op" id="6270857">:=</span>&nbsp;<span class="builtinfunc" id="6270860">make</span><span class="op" id="6270864">(</span><span class="op" id="6270865">[</span><span class="op" id="6270866">]</span><span class="builtintype" id="6270867">byte</span><span class="op" id="6270871">,</span>&nbsp;<span class="ident" id="6270873">f</span><span class="op" id="6270874">.</span><span class="ident" id="6270875">Cmdsz</span><span class="op" id="6270880">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270883">if</span>&nbsp;<span class="ident" id="6270886">_</span><span class="op" id="6270887">,</span>&nbsp;<span class="ident" id="6270889">err</span>&nbsp;<span class="op" id="6270893">:=</span>&nbsp;<span class="ident" id="6270896">r</span><span class="op" id="6270897">.</span><span class="ident" id="6270898">ReadAt</span><span class="op" id="6270904">(</span><span class="ident" id="6270905">dat</span><span class="op" id="6270908">,</span>&nbsp;<span class="ident" id="6270910">offset</span><span class="op" id="6270916">)</span><span class="op" id="6270917">;</span>&nbsp;<span class="ident" id="6270919">err</span>&nbsp;<span class="op" id="6270923">!=</span>&nbsp;<span class="ident" id="6270926">nil</span>&nbsp;<span class="op" id="6270930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270934">return</span>&nbsp;<span class="ident" id="6270941">nil</span><span class="op" id="6270944">,</span>&nbsp;<span class="ident" id="6270946">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270954">f</span><span class="op" id="6270955">.</span><span class="ident" id="6270956">Loads</span>&nbsp;<span class="op" id="6270962">=</span>&nbsp;<span class="builtinfunc" id="6270964">make</span><span class="op" id="6270968">(</span><span class="op" id="6270969">[</span><span class="op" id="6270970">]</span><span class="ident" id="6270971">Load</span><span class="op" id="6270975">,</span>&nbsp;<span class="ident" id="6270977">f</span><span class="op" id="6270978">.</span><span class="ident" id="6270979">Ncmd</span><span class="op" id="6270983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270986">bo</span>&nbsp;<span class="op" id="6270989">:=</span>&nbsp;<span class="ident" id="6270992">f</span><span class="op" id="6270993">.</span><span class="ident" id="6270994">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271005">for</span>&nbsp;<span class="ident" id="6271009">i</span>&nbsp;<span class="op" id="6271011">:=</span>&nbsp;<span class="keyword" id="6271014">range</span>&nbsp;<span class="ident" id="6271020">f</span><span class="op" id="6271021">.</span><span class="ident" id="6271022">Loads</span>&nbsp;<span class="op" id="6271028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271032">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271094">if</span>&nbsp;<span class="builtinfunc" id="6271097">len</span><span class="op" id="6271100">(</span><span class="ident" id="6271101">dat</span><span class="op" id="6271104">)</span>&nbsp;<span class="op" id="6271106">&lt;</span>&nbsp;<span class="num" id="6271108">8</span>&nbsp;<span class="op" id="6271110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271115">return</span>&nbsp;<span class="ident" id="6271122">nil</span><span class="op" id="6271125">,</span>&nbsp;<span class="op" id="6271127">&amp;</span><span class="ident" id="6271128">FormatError</span><span class="op" id="6271139">{</span><span class="ident" id="6271140">offset</span><span class="op" id="6271146">,</span>&nbsp;<span class="string" id="6271148">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6271173">,</span>&nbsp;<span class="ident" id="6271175">nil</span><span class="op" id="6271178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271182">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271186">cmd</span><span class="op" id="6271189">,</span>&nbsp;<span class="ident" id="6271191">siz</span>&nbsp;<span class="op" id="6271195">:=</span>&nbsp;<span class="ident" id="6271198">LoadCmd</span><span class="op" id="6271205">(</span><span class="ident" id="6271206">bo</span><span class="op" id="6271208">.</span><span class="ident" id="6271209">Uint32</span><span class="op" id="6271215">(</span><span class="ident" id="6271216">dat</span><span class="op" id="6271219">[</span><span class="num" id="6271220">0</span><span class="op" id="6271221">:</span><span class="num" id="6271222">4</span><span class="op" id="6271223">]</span><span class="op" id="6271224">)</span><span class="op" id="6271225">)</span><span class="op" id="6271226">,</span>&nbsp;<span class="ident" id="6271228">bo</span><span class="op" id="6271230">.</span><span class="ident" id="6271231">Uint32</span><span class="op" id="6271237">(</span><span class="ident" id="6271238">dat</span><span class="op" id="6271241">[</span><span class="num" id="6271242">4</span><span class="op" id="6271243">:</span><span class="num" id="6271244">8</span><span class="op" id="6271245">]</span><span class="op" id="6271246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271250">if</span>&nbsp;<span class="ident" id="6271253">siz</span>&nbsp;<span class="op" id="6271257">&lt;</span>&nbsp;<span class="num" id="6271259">8</span>&nbsp;<span class="op" id="6271261">||</span>&nbsp;<span class="ident" id="6271264">siz</span>&nbsp;<span class="op" id="6271268">&gt;</span>&nbsp;<span class="builtintype" id="6271270">uint32</span><span class="op" id="6271276">(</span><span class="builtinfunc" id="6271277">len</span><span class="op" id="6271280">(</span><span class="ident" id="6271281">dat</span><span class="op" id="6271284">)</span><span class="op" id="6271285">)</span>&nbsp;<span class="op" id="6271287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271292">return</span>&nbsp;<span class="ident" id="6271299">nil</span><span class="op" id="6271302">,</span>&nbsp;<span class="op" id="6271304">&amp;</span><span class="ident" id="6271305">FormatError</span><span class="op" id="6271316">{</span><span class="ident" id="6271317">offset</span><span class="op" id="6271323">,</span>&nbsp;<span class="string" id="6271325">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6271353">,</span>&nbsp;<span class="ident" id="6271355">nil</span><span class="op" id="6271358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271366">var</span>&nbsp;<span class="ident" id="6271370">cmddat</span>&nbsp;<span class="op" id="6271377">[</span><span class="op" id="6271378">]</span><span class="builtintype" id="6271379">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271386">cmddat</span><span class="op" id="6271392">,</span>&nbsp;<span class="ident" id="6271394">dat</span>&nbsp;<span class="op" id="6271398">=</span>&nbsp;<span class="ident" id="6271400">dat</span><span class="op" id="6271403">[</span><span class="num" id="6271404">0</span><span class="op" id="6271405">:</span><span class="ident" id="6271406">siz</span><span class="op" id="6271409">]</span><span class="op" id="6271410">,</span>&nbsp;<span class="ident" id="6271412">dat</span><span class="op" id="6271415">[</span><span class="ident" id="6271416">siz</span><span class="op" id="6271419">:</span><span class="op" id="6271420">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271424">offset</span>&nbsp;<span class="op" id="6271431">+=</span>&nbsp;<span class="ident" id="6271434">int64</span><span class="op" id="6271439">(</span><span class="ident" id="6271440">siz</span><span class="op" id="6271443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271447">var</span>&nbsp;<span class="ident" id="6271451">s</span>&nbsp;<span class="op" id="6271453">*</span><span class="ident" id="6271454">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271464">switch</span>&nbsp;<span class="ident" id="6271471">cmd</span>&nbsp;<span class="op" id="6271475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271479">default</span><span class="op" id="6271486">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271491">f</span><span class="op" id="6271492">.</span><span class="ident" id="6271493">Loads</span><span class="op" id="6271498">[</span><span class="ident" id="6271499">i</span><span class="op" id="6271500">]</span>&nbsp;<span class="op" id="6271502">=</span>&nbsp;<span class="ident" id="6271504">LoadBytes</span><span class="op" id="6271513">(</span><span class="ident" id="6271514">cmddat</span><span class="op" id="6271520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271525">case</span>&nbsp;<span class="ident" id="6271530">LoadCmdDylib</span><span class="op" id="6271542">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271547">var</span>&nbsp;<span class="ident" id="6271551">hdr</span>&nbsp;<span class="ident" id="6271555">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271567">b</span>&nbsp;<span class="op" id="6271569">:=</span>&nbsp;<span class="ident" id="6271572">bytes</span><span class="op" id="6271577">.</span><span class="ident" id="6271578">NewReader</span><span class="op" id="6271587">(</span><span class="ident" id="6271588">cmddat</span><span class="op" id="6271594">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271599">if</span>&nbsp;<span class="ident" id="6271602">err</span>&nbsp;<span class="op" id="6271606">:=</span>&nbsp;<span class="ident" id="6271609">binary</span><span class="op" id="6271615">.</span><span class="ident" id="6271616">Read</span><span class="op" id="6271620">(</span><span class="ident" id="6271621">b</span><span class="op" id="6271622">,</span>&nbsp;<span class="ident" id="6271624">bo</span><span class="op" id="6271626">,</span>&nbsp;<span class="op" id="6271628">&amp;</span><span class="ident" id="6271629">hdr</span><span class="op" id="6271632">)</span><span class="op" id="6271633">;</span>&nbsp;<span class="ident" id="6271635">err</span>&nbsp;<span class="op" id="6271639">!=</span>&nbsp;<span class="ident" id="6271642">nil</span>&nbsp;<span class="op" id="6271646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271652">return</span>&nbsp;<span class="ident" id="6271659">nil</span><span class="op" id="6271662">,</span>&nbsp;<span class="ident" id="6271664">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271676">l</span>&nbsp;<span class="op" id="6271678">:=</span>&nbsp;<span class="builtinfunc" id="6271681">new</span><span class="op" id="6271684">(</span><span class="ident" id="6271685">Dylib</span><span class="op" id="6271690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271695">if</span>&nbsp;<span class="ident" id="6271698">hdr</span><span class="op" id="6271701">.</span><span class="ident" id="6271702">Name</span>&nbsp;<span class="op" id="6271707">&gt;=</span>&nbsp;<span class="builtintype" id="6271710">uint32</span><span class="op" id="6271716">(</span><span class="builtinfunc" id="6271717">len</span><span class="op" id="6271720">(</span><span class="ident" id="6271721">cmddat</span><span class="op" id="6271727">)</span><span class="op" id="6271728">)</span>&nbsp;<span class="op" id="6271730">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271736">return</span>&nbsp;<span class="ident" id="6271743">nil</span><span class="op" id="6271746">,</span>&nbsp;<span class="op" id="6271748">&amp;</span><span class="ident" id="6271749">FormatError</span><span class="op" id="6271760">{</span><span class="ident" id="6271761">offset</span><span class="op" id="6271767">,</span>&nbsp;<span class="string" id="6271769">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6271810">,</span>&nbsp;<span class="ident" id="6271812">hdr</span><span class="op" id="6271815">.</span><span class="ident" id="6271816">Name</span><span class="op" id="6271820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271830">l</span><span class="op" id="6271831">.</span><span class="ident" id="6271832">Name</span>&nbsp;<span class="op" id="6271837">=</span>&nbsp;<span class="ident" id="6271839">cstring</span><span class="op" id="6271846">(</span><span class="ident" id="6271847">cmddat</span><span class="op" id="6271853">[</span><span class="ident" id="6271854">hdr</span><span class="op" id="6271857">.</span><span class="ident" id="6271858">Name</span><span class="op" id="6271862">:</span><span class="op" id="6271863">]</span><span class="op" id="6271864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271869">l</span><span class="op" id="6271870">.</span><span class="ident" id="6271871">Time</span>&nbsp;<span class="op" id="6271876">=</span>&nbsp;<span class="ident" id="6271878">hdr</span><span class="op" id="6271881">.</span><span class="ident" id="6271882">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271890">l</span><span class="op" id="6271891">.</span><span class="ident" id="6271892">CurrentVersion</span>&nbsp;<span class="op" id="6271907">=</span>&nbsp;<span class="ident" id="6271909">hdr</span><span class="op" id="6271912">.</span><span class="ident" id="6271913">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271931">l</span><span class="op" id="6271932">.</span><span class="ident" id="6271933">CompatVersion</span>&nbsp;<span class="op" id="6271947">=</span>&nbsp;<span class="ident" id="6271949">hdr</span><span class="op" id="6271952">.</span><span class="ident" id="6271953">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271970">l</span><span class="op" id="6271971">.</span><span class="ident" id="6271972">LoadBytes</span>&nbsp;<span class="op" id="6271982">=</span>&nbsp;<span class="ident" id="6271984">LoadBytes</span><span class="op" id="6271993">(</span><span class="ident" id="6271994">cmddat</span><span class="op" id="6272000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272005">f</span><span class="op" id="6272006">.</span><span class="ident" id="6272007">Loads</span><span class="op" id="6272012">[</span><span class="ident" id="6272013">i</span><span class="op" id="6272014">]</span>&nbsp;<span class="op" id="6272016">=</span>&nbsp;<span class="ident" id="6272018">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272023">case</span>&nbsp;<span class="ident" id="6272028">LoadCmdSymtab</span><span class="op" id="6272041">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272046">var</span>&nbsp;<span class="ident" id="6272050">hdr</span>&nbsp;<span class="ident" id="6272054">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272067">b</span>&nbsp;<span class="op" id="6272069">:=</span>&nbsp;<span class="ident" id="6272072">bytes</span><span class="op" id="6272077">.</span><span class="ident" id="6272078">NewReader</span><span class="op" id="6272087">(</span><span class="ident" id="6272088">cmddat</span><span class="op" id="6272094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272099">if</span>&nbsp;<span class="ident" id="6272102">err</span>&nbsp;<span class="op" id="6272106">:=</span>&nbsp;<span class="ident" id="6272109">binary</span><span class="op" id="6272115">.</span><span class="ident" id="6272116">Read</span><span class="op" id="6272120">(</span><span class="ident" id="6272121">b</span><span class="op" id="6272122">,</span>&nbsp;<span class="ident" id="6272124">bo</span><span class="op" id="6272126">,</span>&nbsp;<span class="op" id="6272128">&amp;</span><span class="ident" id="6272129">hdr</span><span class="op" id="6272132">)</span><span class="op" id="6272133">;</span>&nbsp;<span class="ident" id="6272135">err</span>&nbsp;<span class="op" id="6272139">!=</span>&nbsp;<span class="ident" id="6272142">nil</span>&nbsp;<span class="op" id="6272146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272152">return</span>&nbsp;<span class="ident" id="6272159">nil</span><span class="op" id="6272162">,</span>&nbsp;<span class="ident" id="6272164">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272171">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272176">strtab</span>&nbsp;<span class="op" id="6272183">:=</span>&nbsp;<span class="builtinfunc" id="6272186">make</span><span class="op" id="6272190">(</span><span class="op" id="6272191">[</span><span class="op" id="6272192">]</span><span class="builtintype" id="6272193">byte</span><span class="op" id="6272197">,</span>&nbsp;<span class="ident" id="6272199">hdr</span><span class="op" id="6272202">.</span><span class="ident" id="6272203">Strsize</span><span class="op" id="6272210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272215">if</span>&nbsp;<span class="ident" id="6272218">_</span><span class="op" id="6272219">,</span>&nbsp;<span class="ident" id="6272221">err</span>&nbsp;<span class="op" id="6272225">:=</span>&nbsp;<span class="ident" id="6272228">r</span><span class="op" id="6272229">.</span><span class="ident" id="6272230">ReadAt</span><span class="op" id="6272236">(</span><span class="ident" id="6272237">strtab</span><span class="op" id="6272243">,</span>&nbsp;<span class="ident" id="6272245">int64</span><span class="op" id="6272250">(</span><span class="ident" id="6272251">hdr</span><span class="op" id="6272254">.</span><span class="ident" id="6272255">Stroff</span><span class="op" id="6272261">)</span><span class="op" id="6272262">)</span><span class="op" id="6272263">;</span>&nbsp;<span class="ident" id="6272265">err</span>&nbsp;<span class="op" id="6272269">!=</span>&nbsp;<span class="ident" id="6272272">nil</span>&nbsp;<span class="op" id="6272276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272282">return</span>&nbsp;<span class="ident" id="6272289">nil</span><span class="op" id="6272292">,</span>&nbsp;<span class="ident" id="6272294">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272306">var</span>&nbsp;<span class="ident" id="6272310">symsz</span>&nbsp;<span class="builtintype" id="6272316">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272323">if</span>&nbsp;<span class="ident" id="6272326">f</span><span class="op" id="6272327">.</span><span class="ident" id="6272328">Magic</span>&nbsp;<span class="op" id="6272334">==</span>&nbsp;<span class="ident" id="6272337">Magic64</span>&nbsp;<span class="op" id="6272345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272351">symsz</span>&nbsp;<span class="op" id="6272357">=</span>&nbsp;<span class="num" id="6272359">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272365">}</span>&nbsp;<span class="keyword" id="6272367">else</span>&nbsp;<span class="op" id="6272372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272378">symsz</span>&nbsp;<span class="op" id="6272384">=</span>&nbsp;<span class="num" id="6272386">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272392">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272397">symdat</span>&nbsp;<span class="op" id="6272404">:=</span>&nbsp;<span class="builtinfunc" id="6272407">make</span><span class="op" id="6272411">(</span><span class="op" id="6272412">[</span><span class="op" id="6272413">]</span><span class="builtintype" id="6272414">byte</span><span class="op" id="6272418">,</span>&nbsp;<span class="builtintype" id="6272420">int</span><span class="op" id="6272423">(</span><span class="ident" id="6272424">hdr</span><span class="op" id="6272427">.</span><span class="ident" id="6272428">Nsyms</span><span class="op" id="6272433">)</span><span class="op" id="6272434">*</span><span class="ident" id="6272435">symsz</span><span class="op" id="6272440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272445">if</span>&nbsp;<span class="ident" id="6272448">_</span><span class="op" id="6272449">,</span>&nbsp;<span class="ident" id="6272451">err</span>&nbsp;<span class="op" id="6272455">:=</span>&nbsp;<span class="ident" id="6272458">r</span><span class="op" id="6272459">.</span><span class="ident" id="6272460">ReadAt</span><span class="op" id="6272466">(</span><span class="ident" id="6272467">symdat</span><span class="op" id="6272473">,</span>&nbsp;<span class="ident" id="6272475">int64</span><span class="op" id="6272480">(</span><span class="ident" id="6272481">hdr</span><span class="op" id="6272484">.</span><span class="ident" id="6272485">Symoff</span><span class="op" id="6272491">)</span><span class="op" id="6272492">)</span><span class="op" id="6272493">;</span>&nbsp;<span class="ident" id="6272495">err</span>&nbsp;<span class="op" id="6272499">!=</span>&nbsp;<span class="ident" id="6272502">nil</span>&nbsp;<span class="op" id="6272506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272512">return</span>&nbsp;<span class="ident" id="6272519">nil</span><span class="op" id="6272522">,</span>&nbsp;<span class="ident" id="6272524">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272536">st</span><span class="op" id="6272538">,</span>&nbsp;<span class="ident" id="6272540">err</span>&nbsp;<span class="op" id="6272544">:=</span>&nbsp;<span class="ident" id="6272547">f</span><span class="op" id="6272548">.</span><span class="ident" id="6272549">parseSymtab</span><span class="op" id="6272560">(</span><span class="ident" id="6272561">symdat</span><span class="op" id="6272567">,</span>&nbsp;<span class="ident" id="6272569">strtab</span><span class="op" id="6272575">,</span>&nbsp;<span class="ident" id="6272577">cmddat</span><span class="op" id="6272583">,</span>&nbsp;<span class="op" id="6272585">&amp;</span><span class="ident" id="6272586">hdr</span><span class="op" id="6272589">,</span>&nbsp;<span class="ident" id="6272591">offset</span><span class="op" id="6272597">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272602">if</span>&nbsp;<span class="ident" id="6272605">err</span>&nbsp;<span class="op" id="6272609">!=</span>&nbsp;<span class="ident" id="6272612">nil</span>&nbsp;<span class="op" id="6272616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272622">return</span>&nbsp;<span class="ident" id="6272629">nil</span><span class="op" id="6272632">,</span>&nbsp;<span class="ident" id="6272634">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272646">f</span><span class="op" id="6272647">.</span><span class="ident" id="6272648">Loads</span><span class="op" id="6272653">[</span><span class="ident" id="6272654">i</span><span class="op" id="6272655">]</span>&nbsp;<span class="op" id="6272657">=</span>&nbsp;<span class="ident" id="6272659">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272665">f</span><span class="op" id="6272666">.</span><span class="ident" id="6272667">Symtab</span>&nbsp;<span class="op" id="6272674">=</span>&nbsp;<span class="ident" id="6272676">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272682">case</span>&nbsp;<span class="ident" id="6272687">LoadCmdDysymtab</span><span class="op" id="6272702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272707">var</span>&nbsp;<span class="ident" id="6272711">hdr</span>&nbsp;<span class="ident" id="6272715">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272730">b</span>&nbsp;<span class="op" id="6272732">:=</span>&nbsp;<span class="ident" id="6272735">bytes</span><span class="op" id="6272740">.</span><span class="ident" id="6272741">NewReader</span><span class="op" id="6272750">(</span><span class="ident" id="6272751">cmddat</span><span class="op" id="6272757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272762">if</span>&nbsp;<span class="ident" id="6272765">err</span>&nbsp;<span class="op" id="6272769">:=</span>&nbsp;<span class="ident" id="6272772">binary</span><span class="op" id="6272778">.</span><span class="ident" id="6272779">Read</span><span class="op" id="6272783">(</span><span class="ident" id="6272784">b</span><span class="op" id="6272785">,</span>&nbsp;<span class="ident" id="6272787">bo</span><span class="op" id="6272789">,</span>&nbsp;<span class="op" id="6272791">&amp;</span><span class="ident" id="6272792">hdr</span><span class="op" id="6272795">)</span><span class="op" id="6272796">;</span>&nbsp;<span class="ident" id="6272798">err</span>&nbsp;<span class="op" id="6272802">!=</span>&nbsp;<span class="ident" id="6272805">nil</span>&nbsp;<span class="op" id="6272809">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272815">return</span>&nbsp;<span class="ident" id="6272822">nil</span><span class="op" id="6272825">,</span>&nbsp;<span class="ident" id="6272827">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272839">dat</span>&nbsp;<span class="op" id="6272843">:=</span>&nbsp;<span class="builtinfunc" id="6272846">make</span><span class="op" id="6272850">(</span><span class="op" id="6272851">[</span><span class="op" id="6272852">]</span><span class="builtintype" id="6272853">byte</span><span class="op" id="6272857">,</span>&nbsp;<span class="ident" id="6272859">hdr</span><span class="op" id="6272862">.</span><span class="ident" id="6272863">Nindirectsyms</span><span class="op" id="6272876">*</span><span class="num" id="6272877">4</span><span class="op" id="6272878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272883">if</span>&nbsp;<span class="ident" id="6272886">_</span><span class="op" id="6272887">,</span>&nbsp;<span class="ident" id="6272889">err</span>&nbsp;<span class="op" id="6272893">:=</span>&nbsp;<span class="ident" id="6272896">r</span><span class="op" id="6272897">.</span><span class="ident" id="6272898">ReadAt</span><span class="op" id="6272904">(</span><span class="ident" id="6272905">dat</span><span class="op" id="6272908">,</span>&nbsp;<span class="ident" id="6272910">int64</span><span class="op" id="6272915">(</span><span class="ident" id="6272916">hdr</span><span class="op" id="6272919">.</span><span class="ident" id="6272920">Indirectsymoff</span><span class="op" id="6272934">)</span><span class="op" id="6272935">)</span><span class="op" id="6272936">;</span>&nbsp;<span class="ident" id="6272938">err</span>&nbsp;<span class="op" id="6272942">!=</span>&nbsp;<span class="ident" id="6272945">nil</span>&nbsp;<span class="op" id="6272949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272955">return</span>&nbsp;<span class="ident" id="6272962">nil</span><span class="op" id="6272965">,</span>&nbsp;<span class="ident" id="6272967">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272979">x</span>&nbsp;<span class="op" id="6272981">:=</span>&nbsp;<span class="builtinfunc" id="6272984">make</span><span class="op" id="6272988">(</span><span class="op" id="6272989">[</span><span class="op" id="6272990">]</span><span class="builtintype" id="6272991">uint32</span><span class="op" id="6272997">,</span>&nbsp;<span class="ident" id="6272999">hdr</span><span class="op" id="6273002">.</span><span class="ident" id="6273003">Nindirectsyms</span><span class="op" id="6273016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273021">if</span>&nbsp;<span class="ident" id="6273024">err</span>&nbsp;<span class="op" id="6273028">:=</span>&nbsp;<span class="ident" id="6273031">binary</span><span class="op" id="6273037">.</span><span class="ident" id="6273038">Read</span><span class="op" id="6273042">(</span><span class="ident" id="6273043">bytes</span><span class="op" id="6273048">.</span><span class="ident" id="6273049">NewReader</span><span class="op" id="6273058">(</span><span class="ident" id="6273059">dat</span><span class="op" id="6273062">)</span><span class="op" id="6273063">,</span>&nbsp;<span class="ident" id="6273065">bo</span><span class="op" id="6273067">,</span>&nbsp;<span class="ident" id="6273069">x</span><span class="op" id="6273070">)</span><span class="op" id="6273071">;</span>&nbsp;<span class="ident" id="6273073">err</span>&nbsp;<span class="op" id="6273077">!=</span>&nbsp;<span class="ident" id="6273080">nil</span>&nbsp;<span class="op" id="6273084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273090">return</span>&nbsp;<span class="ident" id="6273097">nil</span><span class="op" id="6273100">,</span>&nbsp;<span class="ident" id="6273102">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273109">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273114">st</span>&nbsp;<span class="op" id="6273117">:=</span>&nbsp;<span class="builtinfunc" id="6273120">new</span><span class="op" id="6273123">(</span><span class="ident" id="6273124">Dysymtab</span><span class="op" id="6273132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273137">st</span><span class="op" id="6273139">.</span><span class="ident" id="6273140">LoadBytes</span>&nbsp;<span class="op" id="6273150">=</span>&nbsp;<span class="ident" id="6273152">LoadBytes</span><span class="op" id="6273161">(</span><span class="ident" id="6273162">cmddat</span><span class="op" id="6273168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273173">st</span><span class="op" id="6273175">.</span><span class="ident" id="6273176">DysymtabCmd</span>&nbsp;<span class="op" id="6273188">=</span>&nbsp;<span class="ident" id="6273190">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273197">st</span><span class="op" id="6273199">.</span><span class="ident" id="6273200">IndirectSyms</span>&nbsp;<span class="op" id="6273213">=</span>&nbsp;<span class="ident" id="6273215">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273220">f</span><span class="op" id="6273221">.</span><span class="ident" id="6273222">Loads</span><span class="op" id="6273227">[</span><span class="ident" id="6273228">i</span><span class="op" id="6273229">]</span>&nbsp;<span class="op" id="6273231">=</span>&nbsp;<span class="ident" id="6273233">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273239">f</span><span class="op" id="6273240">.</span><span class="ident" id="6273241">Dysymtab</span>&nbsp;<span class="op" id="6273250">=</span>&nbsp;<span class="ident" id="6273252">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273258">case</span>&nbsp;<span class="ident" id="6273263">LoadCmdSegment</span><span class="op" id="6273277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273282">var</span>&nbsp;<span class="ident" id="6273286">seg32</span>&nbsp;<span class="ident" id="6273292">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273305">b</span>&nbsp;<span class="op" id="6273307">:=</span>&nbsp;<span class="ident" id="6273310">bytes</span><span class="op" id="6273315">.</span><span class="ident" id="6273316">NewReader</span><span class="op" id="6273325">(</span><span class="ident" id="6273326">cmddat</span><span class="op" id="6273332">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273337">if</span>&nbsp;<span class="ident" id="6273340">err</span>&nbsp;<span class="op" id="6273344">:=</span>&nbsp;<span class="ident" id="6273347">binary</span><span class="op" id="6273353">.</span><span class="ident" id="6273354">Read</span><span class="op" id="6273358">(</span><span class="ident" id="6273359">b</span><span class="op" id="6273360">,</span>&nbsp;<span class="ident" id="6273362">bo</span><span class="op" id="6273364">,</span>&nbsp;<span class="op" id="6273366">&amp;</span><span class="ident" id="6273367">seg32</span><span class="op" id="6273372">)</span><span class="op" id="6273373">;</span>&nbsp;<span class="ident" id="6273375">err</span>&nbsp;<span class="op" id="6273379">!=</span>&nbsp;<span class="ident" id="6273382">nil</span>&nbsp;<span class="op" id="6273386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273392">return</span>&nbsp;<span class="ident" id="6273399">nil</span><span class="op" id="6273402">,</span>&nbsp;<span class="ident" id="6273404">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273416">s</span>&nbsp;<span class="op" id="6273418">=</span>&nbsp;<span class="builtinfunc" id="6273420">new</span><span class="op" id="6273423">(</span><span class="ident" id="6273424">Segment</span><span class="op" id="6273431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273436">s</span><span class="op" id="6273437">.</span><span class="ident" id="6273438">LoadBytes</span>&nbsp;<span class="op" id="6273448">=</span>&nbsp;<span class="ident" id="6273450">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273460">s</span><span class="op" id="6273461">.</span><span class="ident" id="6273462">Cmd</span>&nbsp;<span class="op" id="6273466">=</span>&nbsp;<span class="ident" id="6273468">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273475">s</span><span class="op" id="6273476">.</span><span class="ident" id="6273477">Len</span>&nbsp;<span class="op" id="6273481">=</span>&nbsp;<span class="ident" id="6273483">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273490">s</span><span class="op" id="6273491">.</span><span class="ident" id="6273492">Name</span>&nbsp;<span class="op" id="6273497">=</span>&nbsp;<span class="ident" id="6273499">cstring</span><span class="op" id="6273506">(</span><span class="ident" id="6273507">seg32</span><span class="op" id="6273512">.</span><span class="ident" id="6273513">Name</span><span class="op" id="6273517">[</span><span class="num" id="6273518">0</span><span class="op" id="6273519">:</span><span class="op" id="6273520">]</span><span class="op" id="6273521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273526">s</span><span class="op" id="6273527">.</span><span class="ident" id="6273528">Addr</span>&nbsp;<span class="op" id="6273533">=</span>&nbsp;<span class="ident" id="6273535">uint64</span><span class="op" id="6273541">(</span><span class="ident" id="6273542">seg32</span><span class="op" id="6273547">.</span><span class="ident" id="6273548">Addr</span><span class="op" id="6273552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273557">s</span><span class="op" id="6273558">.</span><span class="ident" id="6273559">Memsz</span>&nbsp;<span class="op" id="6273565">=</span>&nbsp;<span class="ident" id="6273567">uint64</span><span class="op" id="6273573">(</span><span class="ident" id="6273574">seg32</span><span class="op" id="6273579">.</span><span class="ident" id="6273580">Memsz</span><span class="op" id="6273585">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273590">s</span><span class="op" id="6273591">.</span><span class="ident" id="6273592">Offset</span>&nbsp;<span class="op" id="6273599">=</span>&nbsp;<span class="ident" id="6273601">uint64</span><span class="op" id="6273607">(</span><span class="ident" id="6273608">seg32</span><span class="op" id="6273613">.</span><span class="ident" id="6273614">Offset</span><span class="op" id="6273620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273625">s</span><span class="op" id="6273626">.</span><span class="ident" id="6273627">Filesz</span>&nbsp;<span class="op" id="6273634">=</span>&nbsp;<span class="ident" id="6273636">uint64</span><span class="op" id="6273642">(</span><span class="ident" id="6273643">seg32</span><span class="op" id="6273648">.</span><span class="ident" id="6273649">Filesz</span><span class="op" id="6273655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273660">s</span><span class="op" id="6273661">.</span><span class="ident" id="6273662">Maxprot</span>&nbsp;<span class="op" id="6273670">=</span>&nbsp;<span class="ident" id="6273672">seg32</span><span class="op" id="6273677">.</span><span class="ident" id="6273678">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273689">s</span><span class="op" id="6273690">.</span><span class="ident" id="6273691">Prot</span>&nbsp;<span class="op" id="6273696">=</span>&nbsp;<span class="ident" id="6273698">seg32</span><span class="op" id="6273703">.</span><span class="ident" id="6273704">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273712">s</span><span class="op" id="6273713">.</span><span class="ident" id="6273714">Nsect</span>&nbsp;<span class="op" id="6273720">=</span>&nbsp;<span class="ident" id="6273722">seg32</span><span class="op" id="6273727">.</span><span class="ident" id="6273728">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273737">s</span><span class="op" id="6273738">.</span><span class="ident" id="6273739">Flag</span>&nbsp;<span class="op" id="6273744">=</span>&nbsp;<span class="ident" id="6273746">seg32</span><span class="op" id="6273751">.</span><span class="ident" id="6273752">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273760">f</span><span class="op" id="6273761">.</span><span class="ident" id="6273762">Loads</span><span class="op" id="6273767">[</span><span class="ident" id="6273768">i</span><span class="op" id="6273769">]</span>&nbsp;<span class="op" id="6273771">=</span>&nbsp;<span class="ident" id="6273773">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273778">for</span>&nbsp;<span class="ident" id="6273782">i</span>&nbsp;<span class="op" id="6273784">:=</span>&nbsp;<span class="num" id="6273787">0</span><span class="op" id="6273788">;</span>&nbsp;<span class="ident" id="6273790">i</span>&nbsp;<span class="op" id="6273792">&lt;</span>&nbsp;<span class="builtintype" id="6273794">int</span><span class="op" id="6273797">(</span><span class="ident" id="6273798">s</span><span class="op" id="6273799">.</span><span class="ident" id="6273800">Nsect</span><span class="op" id="6273805">)</span><span class="op" id="6273806">;</span>&nbsp;<span class="ident" id="6273808">i</span><span class="op" id="6273809">++</span>&nbsp;<span class="op" id="6273812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273818">var</span>&nbsp;<span class="ident" id="6273822">sh32</span>&nbsp;<span class="ident" id="6273827">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273841">if</span>&nbsp;<span class="ident" id="6273844">err</span>&nbsp;<span class="op" id="6273848">:=</span>&nbsp;<span class="ident" id="6273851">binary</span><span class="op" id="6273857">.</span><span class="ident" id="6273858">Read</span><span class="op" id="6273862">(</span><span class="ident" id="6273863">b</span><span class="op" id="6273864">,</span>&nbsp;<span class="ident" id="6273866">bo</span><span class="op" id="6273868">,</span>&nbsp;<span class="op" id="6273870">&amp;</span><span class="ident" id="6273871">sh32</span><span class="op" id="6273875">)</span><span class="op" id="6273876">;</span>&nbsp;<span class="ident" id="6273878">err</span>&nbsp;<span class="op" id="6273882">!=</span>&nbsp;<span class="ident" id="6273885">nil</span>&nbsp;<span class="op" id="6273889">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273896">return</span>&nbsp;<span class="ident" id="6273903">nil</span><span class="op" id="6273906">,</span>&nbsp;<span class="ident" id="6273908">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273922">sh</span>&nbsp;<span class="op" id="6273925">:=</span>&nbsp;<span class="builtinfunc" id="6273928">new</span><span class="op" id="6273931">(</span><span class="ident" id="6273932">Section</span><span class="op" id="6273939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273945">sh</span><span class="op" id="6273947">.</span><span class="ident" id="6273948">Name</span>&nbsp;<span class="op" id="6273953">=</span>&nbsp;<span class="ident" id="6273955">cstring</span><span class="op" id="6273962">(</span><span class="ident" id="6273963">sh32</span><span class="op" id="6273967">.</span><span class="ident" id="6273968">Name</span><span class="op" id="6273972">[</span><span class="num" id="6273973">0</span><span class="op" id="6273974">:</span><span class="op" id="6273975">]</span><span class="op" id="6273976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273982">sh</span><span class="op" id="6273984">.</span><span class="ident" id="6273985">Seg</span>&nbsp;<span class="op" id="6273989">=</span>&nbsp;<span class="ident" id="6273991">cstring</span><span class="op" id="6273998">(</span><span class="ident" id="6273999">sh32</span><span class="op" id="6274003">.</span><span class="ident" id="6274004">Seg</span><span class="op" id="6274007">[</span><span class="num" id="6274008">0</span><span class="op" id="6274009">:</span><span class="op" id="6274010">]</span><span class="op" id="6274011">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274017">sh</span><span class="op" id="6274019">.</span><span class="ident" id="6274020">Addr</span>&nbsp;<span class="op" id="6274025">=</span>&nbsp;<span class="ident" id="6274027">uint64</span><span class="op" id="6274033">(</span><span class="ident" id="6274034">sh32</span><span class="op" id="6274038">.</span><span class="ident" id="6274039">Addr</span><span class="op" id="6274043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274049">sh</span><span class="op" id="6274051">.</span><span class="ident" id="6274052">Size</span>&nbsp;<span class="op" id="6274057">=</span>&nbsp;<span class="ident" id="6274059">uint64</span><span class="op" id="6274065">(</span><span class="ident" id="6274066">sh32</span><span class="op" id="6274070">.</span><span class="ident" id="6274071">Size</span><span class="op" id="6274075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274081">sh</span><span class="op" id="6274083">.</span><span class="ident" id="6274084">Offset</span>&nbsp;<span class="op" id="6274091">=</span>&nbsp;<span class="ident" id="6274093">sh32</span><span class="op" id="6274097">.</span><span class="ident" id="6274098">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274109">sh</span><span class="op" id="6274111">.</span><span class="ident" id="6274112">Align</span>&nbsp;<span class="op" id="6274118">=</span>&nbsp;<span class="ident" id="6274120">sh32</span><span class="op" id="6274124">.</span><span class="ident" id="6274125">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274135">sh</span><span class="op" id="6274137">.</span><span class="ident" id="6274138">Reloff</span>&nbsp;<span class="op" id="6274145">=</span>&nbsp;<span class="ident" id="6274147">sh32</span><span class="op" id="6274151">.</span><span class="ident" id="6274152">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274163">sh</span><span class="op" id="6274165">.</span><span class="ident" id="6274166">Nreloc</span>&nbsp;<span class="op" id="6274173">=</span>&nbsp;<span class="ident" id="6274175">sh32</span><span class="op" id="6274179">.</span><span class="ident" id="6274180">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274191">sh</span><span class="op" id="6274193">.</span><span class="ident" id="6274194">Flags</span>&nbsp;<span class="op" id="6274200">=</span>&nbsp;<span class="ident" id="6274202">sh32</span><span class="op" id="6274206">.</span><span class="ident" id="6274207">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274217">f</span><span class="op" id="6274218">.</span><span class="ident" id="6274219">pushSection</span><span class="op" id="6274230">(</span><span class="ident" id="6274231">sh</span><span class="op" id="6274233">,</span>&nbsp;<span class="ident" id="6274235">r</span><span class="op" id="6274236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274246">case</span>&nbsp;<span class="ident" id="6274251">LoadCmdSegment64</span><span class="op" id="6274267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274272">var</span>&nbsp;<span class="ident" id="6274276">seg64</span>&nbsp;<span class="ident" id="6274282">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274295">b</span>&nbsp;<span class="op" id="6274297">:=</span>&nbsp;<span class="ident" id="6274300">bytes</span><span class="op" id="6274305">.</span><span class="ident" id="6274306">NewReader</span><span class="op" id="6274315">(</span><span class="ident" id="6274316">cmddat</span><span class="op" id="6274322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274327">if</span>&nbsp;<span class="ident" id="6274330">err</span>&nbsp;<span class="op" id="6274334">:=</span>&nbsp;<span class="ident" id="6274337">binary</span><span class="op" id="6274343">.</span><span class="ident" id="6274344">Read</span><span class="op" id="6274348">(</span><span class="ident" id="6274349">b</span><span class="op" id="6274350">,</span>&nbsp;<span class="ident" id="6274352">bo</span><span class="op" id="6274354">,</span>&nbsp;<span class="op" id="6274356">&amp;</span><span class="ident" id="6274357">seg64</span><span class="op" id="6274362">)</span><span class="op" id="6274363">;</span>&nbsp;<span class="ident" id="6274365">err</span>&nbsp;<span class="op" id="6274369">!=</span>&nbsp;<span class="ident" id="6274372">nil</span>&nbsp;<span class="op" id="6274376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274382">return</span>&nbsp;<span class="ident" id="6274389">nil</span><span class="op" id="6274392">,</span>&nbsp;<span class="ident" id="6274394">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274406">s</span>&nbsp;<span class="op" id="6274408">=</span>&nbsp;<span class="builtinfunc" id="6274410">new</span><span class="op" id="6274413">(</span><span class="ident" id="6274414">Segment</span><span class="op" id="6274421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274426">s</span><span class="op" id="6274427">.</span><span class="ident" id="6274428">LoadBytes</span>&nbsp;<span class="op" id="6274438">=</span>&nbsp;<span class="ident" id="6274440">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274450">s</span><span class="op" id="6274451">.</span><span class="ident" id="6274452">Cmd</span>&nbsp;<span class="op" id="6274456">=</span>&nbsp;<span class="ident" id="6274458">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274465">s</span><span class="op" id="6274466">.</span><span class="ident" id="6274467">Len</span>&nbsp;<span class="op" id="6274471">=</span>&nbsp;<span class="ident" id="6274473">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274480">s</span><span class="op" id="6274481">.</span><span class="ident" id="6274482">Name</span>&nbsp;<span class="op" id="6274487">=</span>&nbsp;<span class="ident" id="6274489">cstring</span><span class="op" id="6274496">(</span><span class="ident" id="6274497">seg64</span><span class="op" id="6274502">.</span><span class="ident" id="6274503">Name</span><span class="op" id="6274507">[</span><span class="num" id="6274508">0</span><span class="op" id="6274509">:</span><span class="op" id="6274510">]</span><span class="op" id="6274511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274516">s</span><span class="op" id="6274517">.</span><span class="ident" id="6274518">Addr</span>&nbsp;<span class="op" id="6274523">=</span>&nbsp;<span class="ident" id="6274525">seg64</span><span class="op" id="6274530">.</span><span class="ident" id="6274531">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274539">s</span><span class="op" id="6274540">.</span><span class="ident" id="6274541">Memsz</span>&nbsp;<span class="op" id="6274547">=</span>&nbsp;<span class="ident" id="6274549">seg64</span><span class="op" id="6274554">.</span><span class="ident" id="6274555">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274564">s</span><span class="op" id="6274565">.</span><span class="ident" id="6274566">Offset</span>&nbsp;<span class="op" id="6274573">=</span>&nbsp;<span class="ident" id="6274575">seg64</span><span class="op" id="6274580">.</span><span class="ident" id="6274581">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274591">s</span><span class="op" id="6274592">.</span><span class="ident" id="6274593">Filesz</span>&nbsp;<span class="op" id="6274600">=</span>&nbsp;<span class="ident" id="6274602">seg64</span><span class="op" id="6274607">.</span><span class="ident" id="6274608">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274618">s</span><span class="op" id="6274619">.</span><span class="ident" id="6274620">Maxprot</span>&nbsp;<span class="op" id="6274628">=</span>&nbsp;<span class="ident" id="6274630">seg64</span><span class="op" id="6274635">.</span><span class="ident" id="6274636">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274647">s</span><span class="op" id="6274648">.</span><span class="ident" id="6274649">Prot</span>&nbsp;<span class="op" id="6274654">=</span>&nbsp;<span class="ident" id="6274656">seg64</span><span class="op" id="6274661">.</span><span class="ident" id="6274662">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274670">s</span><span class="op" id="6274671">.</span><span class="ident" id="6274672">Nsect</span>&nbsp;<span class="op" id="6274678">=</span>&nbsp;<span class="ident" id="6274680">seg64</span><span class="op" id="6274685">.</span><span class="ident" id="6274686">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274695">s</span><span class="op" id="6274696">.</span><span class="ident" id="6274697">Flag</span>&nbsp;<span class="op" id="6274702">=</span>&nbsp;<span class="ident" id="6274704">seg64</span><span class="op" id="6274709">.</span><span class="ident" id="6274710">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274718">f</span><span class="op" id="6274719">.</span><span class="ident" id="6274720">Loads</span><span class="op" id="6274725">[</span><span class="ident" id="6274726">i</span><span class="op" id="6274727">]</span>&nbsp;<span class="op" id="6274729">=</span>&nbsp;<span class="ident" id="6274731">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274736">for</span>&nbsp;<span class="ident" id="6274740">i</span>&nbsp;<span class="op" id="6274742">:=</span>&nbsp;<span class="num" id="6274745">0</span><span class="op" id="6274746">;</span>&nbsp;<span class="ident" id="6274748">i</span>&nbsp;<span class="op" id="6274750">&lt;</span>&nbsp;<span class="builtintype" id="6274752">int</span><span class="op" id="6274755">(</span><span class="ident" id="6274756">s</span><span class="op" id="6274757">.</span><span class="ident" id="6274758">Nsect</span><span class="op" id="6274763">)</span><span class="op" id="6274764">;</span>&nbsp;<span class="ident" id="6274766">i</span><span class="op" id="6274767">++</span>&nbsp;<span class="op" id="6274770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274776">var</span>&nbsp;<span class="ident" id="6274780">sh64</span>&nbsp;<span class="ident" id="6274785">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274799">if</span>&nbsp;<span class="ident" id="6274802">err</span>&nbsp;<span class="op" id="6274806">:=</span>&nbsp;<span class="ident" id="6274809">binary</span><span class="op" id="6274815">.</span><span class="ident" id="6274816">Read</span><span class="op" id="6274820">(</span><span class="ident" id="6274821">b</span><span class="op" id="6274822">,</span>&nbsp;<span class="ident" id="6274824">bo</span><span class="op" id="6274826">,</span>&nbsp;<span class="op" id="6274828">&amp;</span><span class="ident" id="6274829">sh64</span><span class="op" id="6274833">)</span><span class="op" id="6274834">;</span>&nbsp;<span class="ident" id="6274836">err</span>&nbsp;<span class="op" id="6274840">!=</span>&nbsp;<span class="ident" id="6274843">nil</span>&nbsp;<span class="op" id="6274847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274854">return</span>&nbsp;<span class="ident" id="6274861">nil</span><span class="op" id="6274864">,</span>&nbsp;<span class="ident" id="6274866">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274874">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274880">sh</span>&nbsp;<span class="op" id="6274883">:=</span>&nbsp;<span class="builtinfunc" id="6274886">new</span><span class="op" id="6274889">(</span><span class="ident" id="6274890">Section</span><span class="op" id="6274897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274903">sh</span><span class="op" id="6274905">.</span><span class="ident" id="6274906">Name</span>&nbsp;<span class="op" id="6274911">=</span>&nbsp;<span class="ident" id="6274913">cstring</span><span class="op" id="6274920">(</span><span class="ident" id="6274921">sh64</span><span class="op" id="6274925">.</span><span class="ident" id="6274926">Name</span><span class="op" id="6274930">[</span><span class="num" id="6274931">0</span><span class="op" id="6274932">:</span><span class="op" id="6274933">]</span><span class="op" id="6274934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274940">sh</span><span class="op" id="6274942">.</span><span class="ident" id="6274943">Seg</span>&nbsp;<span class="op" id="6274947">=</span>&nbsp;<span class="ident" id="6274949">cstring</span><span class="op" id="6274956">(</span><span class="ident" id="6274957">sh64</span><span class="op" id="6274961">.</span><span class="ident" id="6274962">Seg</span><span class="op" id="6274965">[</span><span class="num" id="6274966">0</span><span class="op" id="6274967">:</span><span class="op" id="6274968">]</span><span class="op" id="6274969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274975">sh</span><span class="op" id="6274977">.</span><span class="ident" id="6274978">Addr</span>&nbsp;<span class="op" id="6274983">=</span>&nbsp;<span class="ident" id="6274985">sh64</span><span class="op" id="6274989">.</span><span class="ident" id="6274990">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274999">sh</span><span class="op" id="6275001">.</span><span class="ident" id="6275002">Size</span>&nbsp;<span class="op" id="6275007">=</span>&nbsp;<span class="ident" id="6275009">sh64</span><span class="op" id="6275013">.</span><span class="ident" id="6275014">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275023">sh</span><span class="op" id="6275025">.</span><span class="ident" id="6275026">Offset</span>&nbsp;<span class="op" id="6275033">=</span>&nbsp;<span class="ident" id="6275035">sh64</span><span class="op" id="6275039">.</span><span class="ident" id="6275040">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275051">sh</span><span class="op" id="6275053">.</span><span class="ident" id="6275054">Align</span>&nbsp;<span class="op" id="6275060">=</span>&nbsp;<span class="ident" id="6275062">sh64</span><span class="op" id="6275066">.</span><span class="ident" id="6275067">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275077">sh</span><span class="op" id="6275079">.</span><span class="ident" id="6275080">Reloff</span>&nbsp;<span class="op" id="6275087">=</span>&nbsp;<span class="ident" id="6275089">sh64</span><span class="op" id="6275093">.</span><span class="ident" id="6275094">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275105">sh</span><span class="op" id="6275107">.</span><span class="ident" id="6275108">Nreloc</span>&nbsp;<span class="op" id="6275115">=</span>&nbsp;<span class="ident" id="6275117">sh64</span><span class="op" id="6275121">.</span><span class="ident" id="6275122">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275133">sh</span><span class="op" id="6275135">.</span><span class="ident" id="6275136">Flags</span>&nbsp;<span class="op" id="6275142">=</span>&nbsp;<span class="ident" id="6275144">sh64</span><span class="op" id="6275148">.</span><span class="ident" id="6275149">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275159">f</span><span class="op" id="6275160">.</span><span class="ident" id="6275161">pushSection</span><span class="op" id="6275172">(</span><span class="ident" id="6275173">sh</span><span class="op" id="6275175">,</span>&nbsp;<span class="ident" id="6275177">r</span><span class="op" id="6275178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275191">if</span>&nbsp;<span class="ident" id="6275194">s</span>&nbsp;<span class="op" id="6275196">!=</span>&nbsp;<span class="ident" id="6275199">nil</span>&nbsp;<span class="op" id="6275203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275208">s</span><span class="op" id="6275209">.</span><span class="ident" id="6275210">sr</span>&nbsp;<span class="op" id="6275213">=</span>&nbsp;<span class="ident" id="6275215">io</span><span class="op" id="6275217">.</span><span class="ident" id="6275218">NewSectionReader</span><span class="op" id="6275234">(</span><span class="ident" id="6275235">r</span><span class="op" id="6275236">,</span>&nbsp;<span class="ident" id="6275238">int64</span><span class="op" id="6275243">(</span><span class="ident" id="6275244">s</span><span class="op" id="6275245">.</span><span class="ident" id="6275246">Offset</span><span class="op" id="6275252">)</span><span class="op" id="6275253">,</span>&nbsp;<span class="ident" id="6275255">int64</span><span class="op" id="6275260">(</span><span class="ident" id="6275261">s</span><span class="op" id="6275262">.</span><span class="ident" id="6275263">Filesz</span><span class="op" id="6275269">)</span><span class="op" id="6275270">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275275">s</span><span class="op" id="6275276">.</span><span class="ident" id="6275277">ReaderAt</span>&nbsp;<span class="op" id="6275286">=</span>&nbsp;<span class="ident" id="6275288">s</span><span class="op" id="6275289">.</span><span class="ident" id="6275290">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275301">return</span>&nbsp;<span class="ident" id="6275308">f</span><span class="op" id="6275309">,</span>&nbsp;<span class="ident" id="6275311">nil</span><br>
<span class="lineno"></span><span class="op" id="6275315">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6275318">func</span>&nbsp;<span class="op" id="6275323">(</span><span class="ident" id="6275324">f</span>&nbsp;<span class="op" id="6275326">*</span><span class="ident" id="6275327">File</span><span class="op" id="6275331">)</span>&nbsp;<span class="ident" id="6275333">parseSymtab</span><span class="op" id="6275344">(</span><span class="ident" id="6275345">symdat</span><span class="op" id="6275351">,</span>&nbsp;<span class="ident" id="6275353">strtab</span><span class="op" id="6275359">,</span>&nbsp;<span class="ident" id="6275361">cmddat</span>&nbsp;<span class="op" id="6275368">[</span><span class="op" id="6275369">]</span><span class="builtintype" id="6275370">byte</span><span class="op" id="6275374">,</span>&nbsp;<span class="ident" id="6275376">hdr</span>&nbsp;<span class="op" id="6275380">*</span><span class="ident" id="6275381">SymtabCmd</span><span class="op" id="6275390">,</span>&nbsp;<span class="ident" id="6275392">offset</span>&nbsp;<span class="ident" id="6275399">int64</span><span class="op" id="6275404">)</span>&nbsp;<span class="op" id="6275406">(</span><span class="op" id="6275407">*</span><span class="ident" id="6275408">Symtab</span><span class="op" id="6275414">,</span>&nbsp;<span class="builtintype" id="6275416">error</span><span class="op" id="6275421">)</span>&nbsp;<span class="op" id="6275423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275426">bo</span>&nbsp;<span class="op" id="6275429">:=</span>&nbsp;<span class="ident" id="6275432">f</span><span class="op" id="6275433">.</span><span class="ident" id="6275434">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275445">symtab</span>&nbsp;<span class="op" id="6275452">:=</span>&nbsp;<span class="builtinfunc" id="6275455">make</span><span class="op" id="6275459">(</span><span class="op" id="6275460">[</span><span class="op" id="6275461">]</span><span class="ident" id="6275462">Symbol</span><span class="op" id="6275468">,</span>&nbsp;<span class="ident" id="6275470">hdr</span><span class="op" id="6275473">.</span><span class="ident" id="6275474">Nsyms</span><span class="op" id="6275479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275482">b</span>&nbsp;<span class="op" id="6275484">:=</span>&nbsp;<span class="ident" id="6275487">bytes</span><span class="op" id="6275492">.</span><span class="ident" id="6275493">NewReader</span><span class="op" id="6275502">(</span><span class="ident" id="6275503">symdat</span><span class="op" id="6275509">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275512">for</span>&nbsp;<span class="ident" id="6275516">i</span>&nbsp;<span class="op" id="6275518">:=</span>&nbsp;<span class="keyword" id="6275521">range</span>&nbsp;<span class="ident" id="6275527">symtab</span>&nbsp;<span class="op" id="6275534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275538">var</span>&nbsp;<span class="ident" id="6275542">n</span>&nbsp;<span class="ident" id="6275544">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275554">if</span>&nbsp;<span class="ident" id="6275557">f</span><span class="op" id="6275558">.</span><span class="ident" id="6275559">Magic</span>&nbsp;<span class="op" id="6275565">==</span>&nbsp;<span class="ident" id="6275568">Magic64</span>&nbsp;<span class="op" id="6275576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275581">if</span>&nbsp;<span class="ident" id="6275584">err</span>&nbsp;<span class="op" id="6275588">:=</span>&nbsp;<span class="ident" id="6275591">binary</span><span class="op" id="6275597">.</span><span class="ident" id="6275598">Read</span><span class="op" id="6275602">(</span><span class="ident" id="6275603">b</span><span class="op" id="6275604">,</span>&nbsp;<span class="ident" id="6275606">bo</span><span class="op" id="6275608">,</span>&nbsp;<span class="op" id="6275610">&amp;</span><span class="ident" id="6275611">n</span><span class="op" id="6275612">)</span><span class="op" id="6275613">;</span>&nbsp;<span class="ident" id="6275615">err</span>&nbsp;<span class="op" id="6275619">!=</span>&nbsp;<span class="ident" id="6275622">nil</span>&nbsp;<span class="op" id="6275626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275632">return</span>&nbsp;<span class="ident" id="6275639">nil</span><span class="op" id="6275642">,</span>&nbsp;<span class="ident" id="6275644">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275655">}</span>&nbsp;<span class="keyword" id="6275657">else</span>&nbsp;<span class="op" id="6275662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275667">var</span>&nbsp;<span class="ident" id="6275671">n32</span>&nbsp;<span class="ident" id="6275675">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275686">if</span>&nbsp;<span class="ident" id="6275689">err</span>&nbsp;<span class="op" id="6275693">:=</span>&nbsp;<span class="ident" id="6275696">binary</span><span class="op" id="6275702">.</span><span class="ident" id="6275703">Read</span><span class="op" id="6275707">(</span><span class="ident" id="6275708">b</span><span class="op" id="6275709">,</span>&nbsp;<span class="ident" id="6275711">bo</span><span class="op" id="6275713">,</span>&nbsp;<span class="op" id="6275715">&amp;</span><span class="ident" id="6275716">n32</span><span class="op" id="6275719">)</span><span class="op" id="6275720">;</span>&nbsp;<span class="ident" id="6275722">err</span>&nbsp;<span class="op" id="6275726">!=</span>&nbsp;<span class="ident" id="6275729">nil</span>&nbsp;<span class="op" id="6275733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275739">return</span>&nbsp;<span class="ident" id="6275746">nil</span><span class="op" id="6275749">,</span>&nbsp;<span class="ident" id="6275751">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275763">n</span><span class="op" id="6275764">.</span><span class="ident" id="6275765">Name</span>&nbsp;<span class="op" id="6275770">=</span>&nbsp;<span class="ident" id="6275772">n32</span><span class="op" id="6275775">.</span><span class="ident" id="6275776">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275784">n</span><span class="op" id="6275785">.</span><span class="ident" id="6275786">Type</span>&nbsp;<span class="op" id="6275791">=</span>&nbsp;<span class="ident" id="6275793">n32</span><span class="op" id="6275796">.</span><span class="ident" id="6275797">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275805">n</span><span class="op" id="6275806">.</span><span class="ident" id="6275807">Sect</span>&nbsp;<span class="op" id="6275812">=</span>&nbsp;<span class="ident" id="6275814">n32</span><span class="op" id="6275817">.</span><span class="ident" id="6275818">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275826">n</span><span class="op" id="6275827">.</span><span class="ident" id="6275828">Desc</span>&nbsp;<span class="op" id="6275833">=</span>&nbsp;<span class="ident" id="6275835">n32</span><span class="op" id="6275838">.</span><span class="ident" id="6275839">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275847">n</span><span class="op" id="6275848">.</span><span class="ident" id="6275849">Value</span>&nbsp;<span class="op" id="6275855">=</span>&nbsp;<span class="ident" id="6275857">uint64</span><span class="op" id="6275863">(</span><span class="ident" id="6275864">n32</span><span class="op" id="6275867">.</span><span class="ident" id="6275868">Value</span><span class="op" id="6275873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275881">sym</span>&nbsp;<span class="op" id="6275885">:=</span>&nbsp;<span class="op" id="6275888">&amp;</span><span class="ident" id="6275889">symtab</span><span class="op" id="6275895">[</span><span class="ident" id="6275896">i</span><span class="op" id="6275897">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275901">if</span>&nbsp;<span class="ident" id="6275904">n</span><span class="op" id="6275905">.</span><span class="ident" id="6275906">Name</span>&nbsp;<span class="op" id="6275911">&gt;=</span>&nbsp;<span class="builtintype" id="6275914">uint32</span><span class="op" id="6275920">(</span><span class="builtinfunc" id="6275921">len</span><span class="op" id="6275924">(</span><span class="ident" id="6275925">strtab</span><span class="op" id="6275931">)</span><span class="op" id="6275932">)</span>&nbsp;<span class="op" id="6275934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275939">return</span>&nbsp;<span class="ident" id="6275946">nil</span><span class="op" id="6275949">,</span>&nbsp;<span class="op" id="6275951">&amp;</span><span class="ident" id="6275952">FormatError</span><span class="op" id="6275963">{</span><span class="ident" id="6275964">offset</span><span class="op" id="6275970">,</span>&nbsp;<span class="string" id="6275972">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6276002">,</span>&nbsp;<span class="ident" id="6276004">n</span><span class="op" id="6276005">.</span><span class="ident" id="6276006">Name</span><span class="op" id="6276010">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276018">sym</span><span class="op" id="6276021">.</span><span class="ident" id="6276022">Name</span>&nbsp;<span class="op" id="6276027">=</span>&nbsp;<span class="ident" id="6276029">cstring</span><span class="op" id="6276036">(</span><span class="ident" id="6276037">strtab</span><span class="op" id="6276043">[</span><span class="ident" id="6276044">n</span><span class="op" id="6276045">.</span><span class="ident" id="6276046">Name</span><span class="op" id="6276050">:</span><span class="op" id="6276051">]</span><span class="op" id="6276052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276056">sym</span><span class="op" id="6276059">.</span><span class="ident" id="6276060">Type</span>&nbsp;<span class="op" id="6276065">=</span>&nbsp;<span class="ident" id="6276067">n</span><span class="op" id="6276068">.</span><span class="ident" id="6276069">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276076">sym</span><span class="op" id="6276079">.</span><span class="ident" id="6276080">Sect</span>&nbsp;<span class="op" id="6276085">=</span>&nbsp;<span class="ident" id="6276087">n</span><span class="op" id="6276088">.</span><span class="ident" id="6276089">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276096">sym</span><span class="op" id="6276099">.</span><span class="ident" id="6276100">Desc</span>&nbsp;<span class="op" id="6276105">=</span>&nbsp;<span class="ident" id="6276107">n</span><span class="op" id="6276108">.</span><span class="ident" id="6276109">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276116">sym</span><span class="op" id="6276119">.</span><span class="ident" id="6276120">Value</span>&nbsp;<span class="op" id="6276126">=</span>&nbsp;<span class="ident" id="6276128">n</span><span class="op" id="6276129">.</span><span class="ident" id="6276130">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276140">st</span>&nbsp;<span class="op" id="6276143">:=</span>&nbsp;<span class="builtinfunc" id="6276146">new</span><span class="op" id="6276149">(</span><span class="ident" id="6276150">Symtab</span><span class="op" id="6276156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276159">st</span><span class="op" id="6276161">.</span><span class="ident" id="6276162">LoadBytes</span>&nbsp;<span class="op" id="6276172">=</span>&nbsp;<span class="ident" id="6276174">LoadBytes</span><span class="op" id="6276183">(</span><span class="ident" id="6276184">cmddat</span><span class="op" id="6276190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276193">st</span><span class="op" id="6276195">.</span><span class="ident" id="6276196">Syms</span>&nbsp;<span class="op" id="6276201">=</span>&nbsp;<span class="ident" id="6276203">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276211">return</span>&nbsp;<span class="ident" id="6276218">st</span><span class="op" id="6276220">,</span>&nbsp;<span class="ident" id="6276222">nil</span><br>
<span class="lineno"></span><span class="op" id="6276226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6276229">func</span>&nbsp;<span class="op" id="6276234">(</span><span class="ident" id="6276235">f</span>&nbsp;<span class="op" id="6276237">*</span><span class="ident" id="6276238">File</span><span class="op" id="6276242">)</span>&nbsp;<span class="ident" id="6276244">pushSection</span><span class="op" id="6276255">(</span><span class="ident" id="6276256">sh</span>&nbsp;<span class="op" id="6276259">*</span><span class="ident" id="6276260">Section</span><span class="op" id="6276267">,</span>&nbsp;<span class="ident" id="6276269">r</span>&nbsp;<span class="ident" id="6276271">io</span><span class="op" id="6276273">.</span><span class="ident" id="6276274">ReaderAt</span><span class="op" id="6276282">)</span>&nbsp;<span class="op" id="6276284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276287">f</span><span class="op" id="6276288">.</span><span class="ident" id="6276289">Sections</span>&nbsp;<span class="op" id="6276298">=</span>&nbsp;<span class="builtinfunc" id="6276300">append</span><span class="op" id="6276306">(</span><span class="ident" id="6276307">f</span><span class="op" id="6276308">.</span><span class="ident" id="6276309">Sections</span><span class="op" id="6276317">,</span>&nbsp;<span class="ident" id="6276319">sh</span><span class="op" id="6276321">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276324">sh</span><span class="op" id="6276326">.</span><span class="ident" id="6276327">sr</span>&nbsp;<span class="op" id="6276330">=</span>&nbsp;<span class="ident" id="6276332">io</span><span class="op" id="6276334">.</span><span class="ident" id="6276335">NewSectionReader</span><span class="op" id="6276351">(</span><span class="ident" id="6276352">r</span><span class="op" id="6276353">,</span>&nbsp;<span class="ident" id="6276355">int64</span><span class="op" id="6276360">(</span><span class="ident" id="6276361">sh</span><span class="op" id="6276363">.</span><span class="ident" id="6276364">Offset</span><span class="op" id="6276370">)</span><span class="op" id="6276371">,</span>&nbsp;<span class="ident" id="6276373">int64</span><span class="op" id="6276378">(</span><span class="ident" id="6276379">sh</span><span class="op" id="6276381">.</span><span class="ident" id="6276382">Size</span><span class="op" id="6276386">)</span><span class="op" id="6276387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276390">sh</span><span class="op" id="6276392">.</span><span class="ident" id="6276393">ReaderAt</span>&nbsp;<span class="op" id="6276402">=</span>&nbsp;<span class="ident" id="6276404">sh</span><span class="op" id="6276406">.</span><span class="ident" id="6276407">sr</span><br>
<span class="lineno"></span><span class="op" id="6276410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6276413">func</span>&nbsp;<span class="ident" id="6276418">cstring</span><span class="op" id="6276425">(</span><span class="ident" id="6276426">b</span>&nbsp;<span class="op" id="6276428">[</span><span class="op" id="6276429">]</span><span class="builtintype" id="6276430">byte</span><span class="op" id="6276434">)</span>&nbsp;<span class="builtintype" id="6276436">string</span>&nbsp;<span class="op" id="6276443">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276446">var</span>&nbsp;<span class="ident" id="6276450">i</span>&nbsp;<span class="builtintype" id="6276452">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276457">for</span>&nbsp;<span class="ident" id="6276461">i</span>&nbsp;<span class="op" id="6276463">=</span>&nbsp;<span class="num" id="6276465">0</span><span class="op" id="6276466">;</span>&nbsp;<span class="ident" id="6276468">i</span>&nbsp;<span class="op" id="6276470">&lt;</span>&nbsp;<span class="builtinfunc" id="6276472">len</span><span class="op" id="6276475">(</span><span class="ident" id="6276476">b</span><span class="op" id="6276477">)</span>&nbsp;<span class="op" id="6276479">&amp;&amp;</span>&nbsp;<span class="ident" id="6276482">b</span><span class="op" id="6276483">[</span><span class="ident" id="6276484">i</span><span class="op" id="6276485">]</span>&nbsp;<span class="op" id="6276487">!=</span>&nbsp;<span class="num" id="6276490">0</span><span class="op" id="6276491">;</span>&nbsp;<span class="ident" id="6276493">i</span><span class="op" id="6276494">++</span>&nbsp;<span class="op" id="6276497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276503">return</span>&nbsp;<span class="builtintype" id="6276510">string</span><span class="op" id="6276516">(</span><span class="ident" id="6276517">b</span><span class="op" id="6276518">[</span><span class="num" id="6276519">0</span><span class="op" id="6276520">:</span><span class="ident" id="6276521">i</span><span class="op" id="6276522">]</span><span class="op" id="6276523">)</span><br>
<span class="lineno"></span><span class="op" id="6276525">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6276528">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6276620">func</span>&nbsp;<span class="op" id="6276625">(</span><span class="ident" id="6276626">f</span>&nbsp;<span class="op" id="6276628">*</span><span class="ident" id="6276629">File</span><span class="op" id="6276633">)</span>&nbsp;<span class="ident" id="6276635">Segment</span><span class="op" id="6276642">(</span><span class="ident" id="6276643">name</span>&nbsp;<span class="builtintype" id="6276648">string</span><span class="op" id="6276654">)</span>&nbsp;<span class="op" id="6276656">*</span><span class="ident" id="6276657">Segment</span>&nbsp;<span class="op" id="6276665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276668">for</span>&nbsp;<span class="ident" id="6276672">_</span><span class="op" id="6276673">,</span>&nbsp;<span class="ident" id="6276675">l</span>&nbsp;<span class="op" id="6276677">:=</span>&nbsp;<span class="keyword" id="6276680">range</span>&nbsp;<span class="ident" id="6276686">f</span><span class="op" id="6276687">.</span><span class="ident" id="6276688">Loads</span>&nbsp;<span class="op" id="6276694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276698">if</span>&nbsp;<span class="ident" id="6276701">s</span><span class="op" id="6276702">,</span>&nbsp;<span class="ident" id="6276704">ok</span>&nbsp;<span class="op" id="6276707">:=</span>&nbsp;<span class="ident" id="6276710">l</span><span class="op" id="6276711">.</span><span class="op" id="6276712">(</span><span class="op" id="6276713">*</span><span class="ident" id="6276714">Segment</span><span class="op" id="6276721">)</span><span class="op" id="6276722">;</span>&nbsp;<span class="ident" id="6276724">ok</span>&nbsp;<span class="op" id="6276727">&amp;&amp;</span>&nbsp;<span class="ident" id="6276730">s</span><span class="op" id="6276731">.</span><span class="ident" id="6276732">Name</span>&nbsp;<span class="op" id="6276737">==</span>&nbsp;<span class="ident" id="6276740">name</span>&nbsp;<span class="op" id="6276745">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276750">return</span>&nbsp;<span class="ident" id="6276757">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276767">return</span>&nbsp;<span class="ident" id="6276774">nil</span><br>
<span class="lineno"></span><span class="op" id="6276778">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6276781">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6276857">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6276876">func</span>&nbsp;<span class="op" id="6276881">(</span><span class="ident" id="6276882">f</span>&nbsp;<span class="op" id="6276884">*</span><span class="ident" id="6276885">File</span><span class="op" id="6276889">)</span>&nbsp;<span class="ident" id="6276891">Section</span><span class="op" id="6276898">(</span><span class="ident" id="6276899">name</span>&nbsp;<span class="builtintype" id="6276904">string</span><span class="op" id="6276910">)</span>&nbsp;<span class="op" id="6276912">*</span><span class="ident" id="6276913">Section</span>&nbsp;<span class="op" id="6276921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276924">for</span>&nbsp;<span class="ident" id="6276928">_</span><span class="op" id="6276929">,</span>&nbsp;<span class="ident" id="6276931">s</span>&nbsp;<span class="op" id="6276933">:=</span>&nbsp;<span class="keyword" id="6276936">range</span>&nbsp;<span class="ident" id="6276942">f</span><span class="op" id="6276943">.</span><span class="ident" id="6276944">Sections</span>&nbsp;<span class="op" id="6276953">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276957">if</span>&nbsp;<span class="ident" id="6276960">s</span><span class="op" id="6276961">.</span><span class="ident" id="6276962">Name</span>&nbsp;<span class="op" id="6276967">==</span>&nbsp;<span class="ident" id="6276970">name</span>&nbsp;<span class="op" id="6276975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276980">return</span>&nbsp;<span class="ident" id="6276987">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6276994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6276997">return</span>&nbsp;<span class="ident" id="6277004">nil</span><br>
<span class="lineno">470</span><span class="op" id="6277008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6277011">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6277077">func</span>&nbsp;<span class="op" id="6277082">(</span><span class="ident" id="6277083">f</span>&nbsp;<span class="op" id="6277085">*</span><span class="ident" id="6277086">File</span><span class="op" id="6277090">)</span>&nbsp;<span class="ident" id="6277092">DWARF</span><span class="op" id="6277097">(</span><span class="op" id="6277098">)</span>&nbsp;<span class="op" id="6277100">(</span><span class="op" id="6277101">*</span><span class="ident" id="6277102">dwarf</span><span class="op" id="6277107">.</span><span class="ident" id="6277108">Data</span><span class="op" id="6277112">,</span>&nbsp;<span class="builtintype" id="6277114">error</span><span class="op" id="6277119">)</span>&nbsp;<span class="op" id="6277121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6277124">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6277175">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6277230">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277289">var</span>&nbsp;<span class="ident" id="6277293">names</span>&nbsp;<span class="op" id="6277299">=</span>&nbsp;<span class="op" id="6277301">[</span><span class="op" id="6277302">...</span><span class="op" id="6277305">]</span><span class="builtintype" id="6277306">string</span><span class="op" id="6277312">{</span><span class="string" id="6277313">&#34;abbrev&#34;</span><span class="op" id="6277321">,</span>&nbsp;<span class="string" id="6277323">&#34;info&#34;</span><span class="op" id="6277329">,</span>&nbsp;<span class="string" id="6277331">&#34;str&#34;</span><span class="op" id="6277336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277339">var</span>&nbsp;<span class="ident" id="6277343">dat</span>&nbsp;<span class="op" id="6277347">[</span><span class="builtinfunc" id="6277348">len</span><span class="op" id="6277351">(</span><span class="ident" id="6277352">names</span><span class="op" id="6277357">)</span><span class="op" id="6277358">]</span><span class="op" id="6277359">[</span><span class="op" id="6277360">]</span><span class="builtintype" id="6277361">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277367">for</span>&nbsp;<span class="ident" id="6277371">i</span><span class="op" id="6277372">,</span>&nbsp;<span class="ident" id="6277374">name</span>&nbsp;<span class="op" id="6277379">:=</span>&nbsp;<span class="keyword" id="6277382">range</span>&nbsp;<span class="ident" id="6277388">names</span>&nbsp;<span class="op" id="6277394">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6277398">name</span>&nbsp;<span class="op" id="6277403">=</span>&nbsp;<span class="string" id="6277405">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6277416">+</span>&nbsp;<span class="ident" id="6277418">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6277425">s</span>&nbsp;<span class="op" id="6277427">:=</span>&nbsp;<span class="ident" id="6277430">f</span><span class="op" id="6277431">.</span><span class="ident" id="6277432">Section</span><span class="op" id="6277439">(</span><span class="ident" id="6277440">name</span><span class="op" id="6277444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277448">if</span>&nbsp;<span class="ident" id="6277451">s</span>&nbsp;<span class="op" id="6277453">==</span>&nbsp;<span class="ident" id="6277456">nil</span>&nbsp;<span class="op" id="6277460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277465">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6277476">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6277480">b</span><span class="op" id="6277481">,</span>&nbsp;<span class="ident" id="6277483">err</span>&nbsp;<span class="op" id="6277487">:=</span>&nbsp;<span class="ident" id="6277490">s</span><span class="op" id="6277491">.</span><span class="ident" id="6277492">Data</span><span class="op" id="6277496">(</span><span class="op" id="6277497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277501">if</span>&nbsp;<span class="ident" id="6277504">err</span>&nbsp;<span class="op" id="6277508">!=</span>&nbsp;<span class="ident" id="6277511">nil</span>&nbsp;<span class="op" id="6277515">&amp;&amp;</span>&nbsp;<span class="ident" id="6277518">uint64</span><span class="op" id="6277524">(</span><span class="builtinfunc" id="6277525">len</span><span class="op" id="6277528">(</span><span class="ident" id="6277529">b</span><span class="op" id="6277530">)</span><span class="op" id="6277531">)</span>&nbsp;<span class="op" id="6277533">&lt;</span>&nbsp;<span class="ident" id="6277535">s</span><span class="op" id="6277536">.</span><span class="ident" id="6277537">Size</span>&nbsp;<span class="op" id="6277542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277547">return</span>&nbsp;<span class="ident" id="6277554">nil</span><span class="op" id="6277557">,</span>&nbsp;<span class="ident" id="6277559">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6277565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6277569">dat</span><span class="op" id="6277572">[</span><span class="ident" id="6277573">i</span><span class="op" id="6277574">]</span>&nbsp;<span class="op" id="6277576">=</span>&nbsp;<span class="ident" id="6277578">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6277581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6277585">abbrev</span><span class="op" id="6277591">,</span>&nbsp;<span class="ident" id="6277593">info</span><span class="op" id="6277597">,</span>&nbsp;<span class="ident" id="6277599">str</span>&nbsp;<span class="op" id="6277603">:=</span>&nbsp;<span class="ident" id="6277606">dat</span><span class="op" id="6277609">[</span><span class="num" id="6277610">0</span><span class="op" id="6277611">]</span><span class="op" id="6277612">,</span>&nbsp;<span class="ident" id="6277614">dat</span><span class="op" id="6277617">[</span><span class="num" id="6277618">1</span><span class="op" id="6277619">]</span><span class="op" id="6277620">,</span>&nbsp;<span class="ident" id="6277622">dat</span><span class="op" id="6277625">[</span><span class="num" id="6277626">2</span><span class="op" id="6277627">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277630">return</span>&nbsp;<span class="ident" id="6277637">dwarf</span><span class="op" id="6277642">.</span><span class="ident" id="6277643">New</span><span class="op" id="6277646">(</span><span class="ident" id="6277647">abbrev</span><span class="op" id="6277653">,</span>&nbsp;<span class="ident" id="6277655">nil</span><span class="op" id="6277658">,</span>&nbsp;<span class="ident" id="6277660">nil</span><span class="op" id="6277663">,</span>&nbsp;<span class="ident" id="6277665">info</span><span class="op" id="6277669">,</span>&nbsp;<span class="ident" id="6277671">nil</span><span class="op" id="6277674">,</span>&nbsp;<span class="ident" id="6277676">nil</span><span class="op" id="6277679">,</span>&nbsp;<span class="ident" id="6277681">nil</span><span class="op" id="6277684">,</span>&nbsp;<span class="ident" id="6277686">str</span><span class="op" id="6277689">)</span><br>
<span class="lineno"></span><span class="op" id="6277691">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6277694">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6277746">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6277801">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6277855">func</span>&nbsp;<span class="op" id="6277860">(</span><span class="ident" id="6277861">f</span>&nbsp;<span class="op" id="6277863">*</span><span class="ident" id="6277864">File</span><span class="op" id="6277868">)</span>&nbsp;<span class="ident" id="6277870">ImportedSymbols</span><span class="op" id="6277885">(</span><span class="op" id="6277886">)</span>&nbsp;<span class="op" id="6277888">(</span><span class="op" id="6277889">[</span><span class="op" id="6277890">]</span><span class="builtintype" id="6277891">string</span><span class="op" id="6277897">,</span>&nbsp;<span class="builtintype" id="6277899">error</span><span class="op" id="6277904">)</span>&nbsp;<span class="op" id="6277906">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277909">if</span>&nbsp;<span class="ident" id="6277912">f</span><span class="op" id="6277913">.</span><span class="ident" id="6277914">Dysymtab</span>&nbsp;<span class="op" id="6277923">==</span>&nbsp;<span class="ident" id="6277926">nil</span>&nbsp;<span class="op" id="6277930">||</span>&nbsp;<span class="ident" id="6277933">f</span><span class="op" id="6277934">.</span><span class="ident" id="6277935">Symtab</span>&nbsp;<span class="op" id="6277942">==</span>&nbsp;<span class="ident" id="6277945">nil</span>&nbsp;<span class="op" id="6277949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6277953">return</span>&nbsp;<span class="ident" id="6277960">nil</span><span class="op" id="6277963">,</span>&nbsp;<span class="op" id="6277965">&amp;</span><span class="ident" id="6277966">FormatError</span><span class="op" id="6277977">{</span><span class="num" id="6277978">0</span><span class="op" id="6277979">,</span>&nbsp;<span class="string" id="6277981">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6278003">,</span>&nbsp;<span class="ident" id="6278005">nil</span><span class="op" id="6278008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6278011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6278015">st</span>&nbsp;<span class="op" id="6278018">:=</span>&nbsp;<span class="ident" id="6278021">f</span><span class="op" id="6278022">.</span><span class="ident" id="6278023">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6278031">dt</span>&nbsp;<span class="op" id="6278034">:=</span>&nbsp;<span class="ident" id="6278037">f</span><span class="op" id="6278038">.</span><span class="ident" id="6278039">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278049">var</span>&nbsp;<span class="ident" id="6278053">all</span>&nbsp;<span class="op" id="6278057">[</span><span class="op" id="6278058">]</span><span class="builtintype" id="6278059">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278067">for</span>&nbsp;<span class="ident" id="6278071">_</span><span class="op" id="6278072">,</span>&nbsp;<span class="ident" id="6278074">s</span>&nbsp;<span class="op" id="6278076">:=</span>&nbsp;<span class="keyword" id="6278079">range</span>&nbsp;<span class="ident" id="6278085">st</span><span class="op" id="6278087">.</span><span class="ident" id="6278088">Syms</span><span class="op" id="6278092">[</span><span class="ident" id="6278093">dt</span><span class="op" id="6278095">.</span><span class="ident" id="6278096">Iundefsym</span>&nbsp;<span class="op" id="6278106">:</span>&nbsp;<span class="ident" id="6278108">dt</span><span class="op" id="6278110">.</span><span class="ident" id="6278111">Iundefsym</span><span class="op" id="6278120">+</span><span class="ident" id="6278121">dt</span><span class="op" id="6278123">.</span><span class="ident" id="6278124">Nundefsym</span><span class="op" id="6278133">]</span>&nbsp;<span class="op" id="6278135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6278139">all</span>&nbsp;<span class="op" id="6278143">=</span>&nbsp;<span class="builtinfunc" id="6278145">append</span><span class="op" id="6278151">(</span><span class="ident" id="6278152">all</span><span class="op" id="6278155">,</span>&nbsp;<span class="ident" id="6278157">s</span><span class="op" id="6278158">.</span><span class="ident" id="6278159">Name</span><span class="op" id="6278163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6278166">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278169">return</span>&nbsp;<span class="ident" id="6278176">all</span><span class="op" id="6278179">,</span>&nbsp;<span class="ident" id="6278181">nil</span><br>
<span class="lineno"></span><span class="op" id="6278185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6278188">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6278244">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6278299">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6278347">func</span>&nbsp;<span class="op" id="6278352">(</span><span class="ident" id="6278353">f</span>&nbsp;<span class="op" id="6278355">*</span><span class="ident" id="6278356">File</span><span class="op" id="6278360">)</span>&nbsp;<span class="ident" id="6278362">ImportedLibraries</span><span class="op" id="6278379">(</span><span class="op" id="6278380">)</span>&nbsp;<span class="op" id="6278382">(</span><span class="op" id="6278383">[</span><span class="op" id="6278384">]</span><span class="builtintype" id="6278385">string</span><span class="op" id="6278391">,</span>&nbsp;<span class="builtintype" id="6278393">error</span><span class="op" id="6278398">)</span>&nbsp;<span class="op" id="6278400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278403">var</span>&nbsp;<span class="ident" id="6278407">all</span>&nbsp;<span class="op" id="6278411">[</span><span class="op" id="6278412">]</span><span class="builtintype" id="6278413">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278421">for</span>&nbsp;<span class="ident" id="6278425">_</span><span class="op" id="6278426">,</span>&nbsp;<span class="ident" id="6278428">l</span>&nbsp;<span class="op" id="6278430">:=</span>&nbsp;<span class="keyword" id="6278433">range</span>&nbsp;<span class="ident" id="6278439">f</span><span class="op" id="6278440">.</span><span class="ident" id="6278441">Loads</span>&nbsp;<span class="op" id="6278447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278451">if</span>&nbsp;<span class="ident" id="6278454">lib</span><span class="op" id="6278457">,</span>&nbsp;<span class="ident" id="6278459">ok</span>&nbsp;<span class="op" id="6278462">:=</span>&nbsp;<span class="ident" id="6278465">l</span><span class="op" id="6278466">.</span><span class="op" id="6278467">(</span><span class="op" id="6278468">*</span><span class="ident" id="6278469">Dylib</span><span class="op" id="6278474">)</span><span class="op" id="6278475">;</span>&nbsp;<span class="ident" id="6278477">ok</span>&nbsp;<span class="op" id="6278480">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6278485">all</span>&nbsp;<span class="op" id="6278489">=</span>&nbsp;<span class="builtinfunc" id="6278491">append</span><span class="op" id="6278497">(</span><span class="ident" id="6278498">all</span><span class="op" id="6278501">,</span>&nbsp;<span class="ident" id="6278503">lib</span><span class="op" id="6278506">.</span><span class="ident" id="6278507">Name</span><span class="op" id="6278511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6278515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6278518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6278521">return</span>&nbsp;<span class="ident" id="6278528">all</span><span class="op" id="6278531">,</span>&nbsp;<span class="ident" id="6278533">nil</span><br>
<span class="lineno"></span><span class="op" id="6278537">}</span>
</div>
</body>
</html>
