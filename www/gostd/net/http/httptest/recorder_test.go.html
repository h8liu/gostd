<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httptest</h2>
<ul>
<li><a href="/gostd/net/http/httptest/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/httptest/recorder.go.html">recorder.go</a></li>
<li><a href="/gostd/net/http/httptest/recorder_test.go.html" class="current">recorder_test.go</a></li>
<li><a href="/gostd/net/http/httptest/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/httptest/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8331687">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8331742">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8331796">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8331847">package</span>&nbsp;<span class="ident" id="8331855">httptest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8331865">import</span>&nbsp;<span class="op" id="8331872">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8331875">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8331882">&#34;net/http&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8331894">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8331904">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8331907">func</span>&nbsp;<span class="ident" id="8331912">TestRecorder</span><span class="op" id="8331924">(</span><span class="ident" id="8331925">t</span>&nbsp;<span class="op" id="8331927">*</span><span class="ident" id="8331928"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331894">testing</a></span><span class="op" id="8331935">.</span><span class="ident" id="8331936"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8331937">)</span>&nbsp;<span class="op" id="8331939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331942">type</span>&nbsp;<span class="ident" id="8331947">checkFunc</span>&nbsp;<span class="keyword" id="8331957">func</span><span class="op" id="8331961">(</span><span class="op" id="8331962">*</span><span class="ident" id="8331963"><a href="/gostd/net/http/httptest/recorder.go.html#6132219">ResponseRecorder</a></span><span class="op" id="8331979">)</span>&nbsp;<span class="builtintype" id="8331981">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331988">check</span>&nbsp;<span class="op" id="8331994">:=</span>&nbsp;<span class="keyword" id="8331997">func</span><span class="op" id="8332001">(</span><span class="ident" id="8332002">fns</span>&nbsp;<span class="op" id="8332006">...</span><span class="ident" id="8332009"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span><span class="op" id="8332018">)</span>&nbsp;<span class="op" id="8332020">[</span><span class="op" id="8332021">]</span><span class="ident" id="8332022"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span>&nbsp;<span class="op" id="8332032">{</span>&nbsp;<span class="keyword" id="8332034">return</span>&nbsp;<span class="ident" id="8332041"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332002">fns</a></span>&nbsp;<span class="op" id="8332045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332049">hasStatus</span>&nbsp;<span class="op" id="8332059">:=</span>&nbsp;<span class="keyword" id="8332062">func</span><span class="op" id="8332066">(</span><span class="ident" id="8332067">wantCode</span>&nbsp;<span class="builtintype" id="8332076">int</span><span class="op" id="8332079">)</span>&nbsp;<span class="ident" id="8332081"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span>&nbsp;<span class="op" id="8332091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332095">return</span>&nbsp;<span class="keyword" id="8332102">func</span><span class="op" id="8332106">(</span><span class="ident" id="8332107">rec</span>&nbsp;<span class="op" id="8332111">*</span><span class="ident" id="8332112"><a href="/gostd/net/http/httptest/recorder.go.html#6132219">ResponseRecorder</a></span><span class="op" id="8332128">)</span>&nbsp;<span class="builtintype" id="8332130">error</span>&nbsp;<span class="op" id="8332136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332141">if</span>&nbsp;<span class="ident" id="8332144"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332107">rec</a></span><span class="op" id="8332147">.</span><span class="ident" id="8332148"><a href="/gostd/net/http/httptest/recorder.go.html#6132246">Code</a></span>&nbsp;<span class="op" id="8332153">!=</span>&nbsp;<span class="ident" id="8332156"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332067">wantCode</a></span>&nbsp;<span class="op" id="8332165">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332171">return</span>&nbsp;<span class="ident" id="8332178"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331875">fmt</a></span><span class="op" id="8332181">.</span><span class="ident" id="8332182"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8332188">(</span><span class="string" id="8332189">&#34;Status&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8332211">,</span>&nbsp;<span class="ident" id="8332213"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332107">rec</a></span><span class="op" id="8332216">.</span><span class="ident" id="8332217"><a href="/gostd/net/http/httptest/recorder.go.html#6132246">Code</a></span><span class="op" id="8332221">,</span>&nbsp;<span class="ident" id="8332223"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332067">wantCode</a></span><span class="op" id="8332231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332241">return</span>&nbsp;<span class="builtintype" id="8332248">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332257">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332260">hasContents</span>&nbsp;<span class="op" id="8332272">:=</span>&nbsp;<span class="keyword" id="8332275">func</span><span class="op" id="8332279">(</span><span class="ident" id="8332280">want</span>&nbsp;<span class="builtintype" id="8332285">string</span><span class="op" id="8332291">)</span>&nbsp;<span class="ident" id="8332293"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span>&nbsp;<span class="op" id="8332303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332307">return</span>&nbsp;<span class="keyword" id="8332314">func</span><span class="op" id="8332318">(</span><span class="ident" id="8332319">rec</span>&nbsp;<span class="op" id="8332323">*</span><span class="ident" id="8332324"><a href="/gostd/net/http/httptest/recorder.go.html#6132219">ResponseRecorder</a></span><span class="op" id="8332340">)</span>&nbsp;<span class="builtintype" id="8332342">error</span>&nbsp;<span class="op" id="8332348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332353">if</span>&nbsp;<span class="ident" id="8332356"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332319">rec</a></span><span class="op" id="8332359">.</span><span class="ident" id="8332360"><a href="/gostd/net/http/httptest/recorder.go.html#6132368">Body</a></span><span class="op" id="8332364">.</span><span class="ident" id="8332365"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="8332371">(</span><span class="op" id="8332372">)</span>&nbsp;<span class="op" id="8332374">!=</span>&nbsp;<span class="ident" id="8332377"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332280">want</a></span>&nbsp;<span class="op" id="8332382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332388">return</span>&nbsp;<span class="ident" id="8332395"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331875">fmt</a></span><span class="op" id="8332398">.</span><span class="ident" id="8332399"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8332405">(</span><span class="string" id="8332406">&#34;wrote&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8332427">,</span>&nbsp;<span class="ident" id="8332429"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332319">rec</a></span><span class="op" id="8332432">.</span><span class="ident" id="8332433"><a href="/gostd/net/http/httptest/recorder.go.html#6132368">Body</a></span><span class="op" id="8332437">.</span><span class="ident" id="8332438"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="8332444">(</span><span class="op" id="8332445">)</span><span class="op" id="8332446">,</span>&nbsp;<span class="ident" id="8332448"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332280">want</a></span><span class="op" id="8332452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332457">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332462">return</span>&nbsp;<span class="builtintype" id="8332469">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332481">hasFlush</span>&nbsp;<span class="op" id="8332490">:=</span>&nbsp;<span class="keyword" id="8332493">func</span><span class="op" id="8332497">(</span><span class="ident" id="8332498">want</span>&nbsp;<span class="builtintype" id="8332503">bool</span><span class="op" id="8332507">)</span>&nbsp;<span class="ident" id="8332509"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span>&nbsp;<span class="op" id="8332519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332523">return</span>&nbsp;<span class="keyword" id="8332530">func</span><span class="op" id="8332534">(</span><span class="ident" id="8332535">rec</span>&nbsp;<span class="op" id="8332539">*</span><span class="ident" id="8332540"><a href="/gostd/net/http/httptest/recorder.go.html#6132219">ResponseRecorder</a></span><span class="op" id="8332556">)</span>&nbsp;<span class="builtintype" id="8332558">error</span>&nbsp;<span class="op" id="8332564">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332569">if</span>&nbsp;<span class="ident" id="8332572"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332535">rec</a></span><span class="op" id="8332575">.</span><span class="ident" id="8332576"><a href="/gostd/net/http/httptest/recorder.go.html#6132451">Flushed</a></span>&nbsp;<span class="op" id="8332584">!=</span>&nbsp;<span class="ident" id="8332587"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332498">want</a></span>&nbsp;<span class="op" id="8332592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332598">return</span>&nbsp;<span class="ident" id="8332605"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331875">fmt</a></span><span class="op" id="8332608">.</span><span class="ident" id="8332609"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8332615">(</span><span class="string" id="8332616">&#34;Flushed&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8332639">,</span>&nbsp;<span class="ident" id="8332641"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332535">rec</a></span><span class="op" id="8332644">.</span><span class="ident" id="8332645"><a href="/gostd/net/http/httptest/recorder.go.html#6132451">Flushed</a></span><span class="op" id="8332652">,</span>&nbsp;<span class="ident" id="8332654"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332498">want</a></span><span class="op" id="8332658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332668">return</span>&nbsp;<span class="builtintype" id="8332675">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332681">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332688">tests</span>&nbsp;<span class="op" id="8332694">:=</span>&nbsp;<span class="op" id="8332697">[</span><span class="op" id="8332698">]</span><span class="keyword" id="8332699">struct</span>&nbsp;<span class="op" id="8332706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332710">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8332717">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332726">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332733">func</span><span class="op" id="8332737">(</span><span class="ident" id="8332738">w</span>&nbsp;<span class="ident" id="8332740"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332744">.</span><span class="ident" id="8332745"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="8332759">,</span>&nbsp;<span class="ident" id="8332761">r</span>&nbsp;<span class="op" id="8332763">*</span><span class="ident" id="8332764"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332768">.</span><span class="ident" id="8332769"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="8332776">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332780">checks</span>&nbsp;<span class="op" id="8332787">[</span><span class="op" id="8332788">]</span><span class="ident" id="8332789"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331947">checkFunc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332800">}</span><span class="op" id="8332801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8332810">&#34;200&nbsp;default&#34;</span><span class="op" id="8332823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332828">func</span><span class="op" id="8332832">(</span><span class="ident" id="8332833">w</span>&nbsp;<span class="ident" id="8332835"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332839">.</span><span class="ident" id="8332840"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="8332854">,</span>&nbsp;<span class="ident" id="8332856">r</span>&nbsp;<span class="op" id="8332858">*</span><span class="ident" id="8332859"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332863">.</span><span class="ident" id="8332864"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="8332871">)</span>&nbsp;<span class="op" id="8332873">{</span><span class="op" id="8332874">}</span><span class="op" id="8332875">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332880"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331988">check</a></span><span class="op" id="8332885">(</span><span class="ident" id="8332886"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332049">hasStatus</a></span><span class="op" id="8332895">(</span><span class="num" id="8332896">200</span><span class="op" id="8332899">)</span><span class="op" id="8332900">,</span>&nbsp;<span class="ident" id="8332902"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332260">hasContents</a></span><span class="op" id="8332913">(</span><span class="string" id="8332914">&#34;&#34;</span><span class="op" id="8332916">)</span><span class="op" id="8332917">)</span><span class="op" id="8332918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332922">}</span><span class="op" id="8332923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8332932">&#34;first&nbsp;code&nbsp;only&#34;</span><span class="op" id="8332949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332954">func</span><span class="op" id="8332958">(</span><span class="ident" id="8332959">w</span>&nbsp;<span class="ident" id="8332961"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332965">.</span><span class="ident" id="8332966"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="8332980">,</span>&nbsp;<span class="ident" id="8332982">r</span>&nbsp;<span class="op" id="8332984">*</span><span class="ident" id="8332985"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8332989">.</span><span class="ident" id="8332990"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="8332997">)</span>&nbsp;<span class="op" id="8332999">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333005"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332959">w</a></span><span class="op" id="8333006">.</span><span class="ident" id="8333007"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="8333018">(</span><span class="num" id="8333019">201</span><span class="op" id="8333022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333028"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332959">w</a></span><span class="op" id="8333029">.</span><span class="ident" id="8333030"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="8333041">(</span><span class="num" id="8333042">202</span><span class="op" id="8333045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333051"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332959">w</a></span><span class="op" id="8333052">.</span><span class="ident" id="8333053"><a href="/gostd/net/http/server.go.html#4171123">Write</a></span><span class="op" id="8333058">(</span><span class="op" id="8333059">[</span><span class="op" id="8333060">]</span><span class="builtintype" id="8333061">byte</span><span class="op" id="8333065">(</span><span class="string" id="8333066">&#34;hi&#34;</span><span class="op" id="8333070">)</span><span class="op" id="8333071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333076">}</span><span class="op" id="8333077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333082"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331988">check</a></span><span class="op" id="8333087">(</span><span class="ident" id="8333088"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332049">hasStatus</a></span><span class="op" id="8333097">(</span><span class="num" id="8333098">201</span><span class="op" id="8333101">)</span><span class="op" id="8333102">,</span>&nbsp;<span class="ident" id="8333104"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332260">hasContents</a></span><span class="op" id="8333115">(</span><span class="string" id="8333116">&#34;hi&#34;</span><span class="op" id="8333120">)</span><span class="op" id="8333121">)</span><span class="op" id="8333122">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333126">}</span><span class="op" id="8333127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8333136">&#34;write&nbsp;sends&nbsp;200&#34;</span><span class="op" id="8333153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333158">func</span><span class="op" id="8333162">(</span><span class="ident" id="8333163">w</span>&nbsp;<span class="ident" id="8333165"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333169">.</span><span class="ident" id="8333170"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="8333184">,</span>&nbsp;<span class="ident" id="8333186">r</span>&nbsp;<span class="op" id="8333188">*</span><span class="ident" id="8333189"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333193">.</span><span class="ident" id="8333194"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="8333201">)</span>&nbsp;<span class="op" id="8333203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333209"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333163">w</a></span><span class="op" id="8333210">.</span><span class="ident" id="8333211"><a href="/gostd/net/http/server.go.html#4171123">Write</a></span><span class="op" id="8333216">(</span><span class="op" id="8333217">[</span><span class="op" id="8333218">]</span><span class="builtintype" id="8333219">byte</span><span class="op" id="8333223">(</span><span class="string" id="8333224">&#34;hi&nbsp;first&#34;</span><span class="op" id="8333234">)</span><span class="op" id="8333235">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333241"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333163">w</a></span><span class="op" id="8333242">.</span><span class="ident" id="8333243"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="8333254">(</span><span class="num" id="8333255">201</span><span class="op" id="8333258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333264"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333163">w</a></span><span class="op" id="8333265">.</span><span class="ident" id="8333266"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="8333277">(</span><span class="num" id="8333278">202</span><span class="op" id="8333281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333286">}</span><span class="op" id="8333287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333292"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331988">check</a></span><span class="op" id="8333297">(</span><span class="ident" id="8333298"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332049">hasStatus</a></span><span class="op" id="8333307">(</span><span class="num" id="8333308">200</span><span class="op" id="8333311">)</span><span class="op" id="8333312">,</span>&nbsp;<span class="ident" id="8333314"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332260">hasContents</a></span><span class="op" id="8333325">(</span><span class="string" id="8333326">&#34;hi&nbsp;first&#34;</span><span class="op" id="8333336">)</span><span class="op" id="8333337">,</span>&nbsp;<span class="ident" id="8333339"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332481">hasFlush</a></span><span class="op" id="8333347">(</span><span class="builtintype" id="8333348">false</span><span class="op" id="8333353">)</span><span class="op" id="8333354">)</span><span class="op" id="8333355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333359">}</span><span class="op" id="8333360">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8333369">&#34;flush&#34;</span><span class="op" id="8333376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333381">func</span><span class="op" id="8333385">(</span><span class="ident" id="8333386">w</span>&nbsp;<span class="ident" id="8333388"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333392">.</span><span class="ident" id="8333393"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="8333407">,</span>&nbsp;<span class="ident" id="8333409">r</span>&nbsp;<span class="op" id="8333411">*</span><span class="ident" id="8333412"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333416">.</span><span class="ident" id="8333417"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="8333424">)</span>&nbsp;<span class="op" id="8333426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333432"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333386">w</a></span><span class="op" id="8333433">.</span><span class="op" id="8333434">(</span><span class="ident" id="8333435"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333439">.</span><span class="ident" id="8333440"><a href="/gostd/net/http/server.go.html#4171767">Flusher</a></span><span class="op" id="8333447">)</span><span class="op" id="8333448">.</span><span class="ident" id="8333449"><a href="/gostd/net/http/server.go.html#4171837">Flush</a></span><span class="op" id="8333454">(</span><span class="op" id="8333455">)</span>&nbsp;<span class="comment" id="8333457">//&nbsp;also&nbsp;sends&nbsp;a&nbsp;200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333481"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333386">w</a></span><span class="op" id="8333482">.</span><span class="ident" id="8333483"><a href="/gostd/net/http/server.go.html#4171422">WriteHeader</a></span><span class="op" id="8333494">(</span><span class="num" id="8333495">201</span><span class="op" id="8333498">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333503">}</span><span class="op" id="8333504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333509"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331988">check</a></span><span class="op" id="8333514">(</span><span class="ident" id="8333515"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332049">hasStatus</a></span><span class="op" id="8333524">(</span><span class="num" id="8333525">200</span><span class="op" id="8333528">)</span><span class="op" id="8333529">,</span>&nbsp;<span class="ident" id="8333531"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332481">hasFlush</a></span><span class="op" id="8333539">(</span><span class="builtintype" id="8333540">true</span><span class="op" id="8333544">)</span><span class="op" id="8333545">)</span><span class="op" id="8333546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333550">}</span><span class="op" id="8333551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333557">r</span><span class="op" id="8333558">,</span>&nbsp;<span class="ident" id="8333560">_</span>&nbsp;<span class="op" id="8333562">:=</span>&nbsp;<span class="ident" id="8333565"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333569">.</span><span class="ident" id="8333570"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="8333580">(</span><span class="string" id="8333581">&#34;GET&#34;</span><span class="op" id="8333586">,</span>&nbsp;<span class="string" id="8333588">&#34;http://foo.com/&#34;</span><span class="op" id="8333605">,</span>&nbsp;<span class="builtintype" id="8333607">nil</span><span class="op" id="8333610">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333613">for</span>&nbsp;<span class="ident" id="8333617">_</span><span class="op" id="8333618">,</span>&nbsp;<span class="ident" id="8333620">tt</span>&nbsp;<span class="op" id="8333623">:=</span>&nbsp;<span class="keyword" id="8333626">range</span>&nbsp;<span class="ident" id="8333632"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332688">tests</a></span>&nbsp;<span class="op" id="8333638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333642">h</span>&nbsp;<span class="op" id="8333644">:=</span>&nbsp;<span class="ident" id="8333647"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331882">http</a></span><span class="op" id="8333651">.</span><span class="ident" id="8333652"><a href="/gostd/net/http/server.go.html#4205623">HandlerFunc</a></span><span class="op" id="8333663">(</span><span class="ident" id="8333664"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333620">tt</a></span><span class="op" id="8333666">.</span><span class="ident" id="8333667"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332726">h</a></span><span class="op" id="8333668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333672">rec</span>&nbsp;<span class="op" id="8333676">:=</span>&nbsp;<span class="ident" id="8333679"><a href="/gostd/net/http/httptest/recorder.go.html#6132549">NewRecorder</a></span><span class="op" id="8333690">(</span><span class="op" id="8333691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333695"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333642">h</a></span><span class="op" id="8333696">.</span><span class="ident" id="8333697"><a href="/gostd/net/http/server.go.html#4205716">ServeHTTP</a></span><span class="op" id="8333706">(</span><span class="ident" id="8333707"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333672">rec</a></span><span class="op" id="8333710">,</span>&nbsp;<span class="ident" id="8333712"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333557">r</a></span><span class="op" id="8333713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333717">for</span>&nbsp;<span class="ident" id="8333721">_</span><span class="op" id="8333722">,</span>&nbsp;<span class="ident" id="8333724">check</span>&nbsp;<span class="op" id="8333730">:=</span>&nbsp;<span class="keyword" id="8333733">range</span>&nbsp;<span class="ident" id="8333739"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333620">tt</a></span><span class="op" id="8333741">.</span><span class="ident" id="8333742"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332780">checks</a></span>&nbsp;<span class="op" id="8333749">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333754">if</span>&nbsp;<span class="ident" id="8333757">err</span>&nbsp;<span class="op" id="8333761">:=</span>&nbsp;<span class="ident" id="8333764"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333724">check</a></span><span class="op" id="8333769">(</span><span class="ident" id="8333770"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333672">rec</a></span><span class="op" id="8333773">)</span><span class="op" id="8333774">;</span>&nbsp;<span class="ident" id="8333776"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333757">err</a></span>&nbsp;<span class="op" id="8333780">!=</span>&nbsp;<span class="builtintype" id="8333783">nil</span>&nbsp;<span class="op" id="8333787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333793"><a href="/gostd/net/http/httptest/recorder_test.go.html#8331925">t</a></span><span class="op" id="8333794">.</span><span class="ident" id="8333795"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8333801">(</span><span class="string" id="8333802">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="8333810">,</span>&nbsp;<span class="ident" id="8333812"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333620">tt</a></span><span class="op" id="8333814">.</span><span class="ident" id="8333815"><a href="/gostd/net/http/httptest/recorder_test.go.html#8332710">name</a></span><span class="op" id="8333819">,</span>&nbsp;<span class="ident" id="8333821"><a href="/gostd/net/http/httptest/recorder_test.go.html#8333757">err</a></span><span class="op" id="8333824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333836">}</span><br>
<span class="lineno">90</span><span class="op" id="8333838">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
