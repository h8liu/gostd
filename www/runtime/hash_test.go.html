<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="887750">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="887806">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="887860">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="887911">package</span>&nbsp;<span class="ident" id="887919">runtime_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="887933">import</span>&nbsp;<span class="op" id="887940">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="887943">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="887950">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="887958">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="887971">.</span>&nbsp;<span class="string" id="887973">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="887984">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="887995">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="888005">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="888008">//&nbsp;Smhasher&nbsp;is&nbsp;a&nbsp;torture&nbsp;test&nbsp;for&nbsp;hash&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="888058">//&nbsp;https://code.google.com/p/smhasher/</span><br>
<span class="lineno"></span><span class="comment" id="888097">//&nbsp;This&nbsp;code&nbsp;is&nbsp;a&nbsp;port&nbsp;of&nbsp;some&nbsp;of&nbsp;the&nbsp;Smhasher&nbsp;tests&nbsp;to&nbsp;Go.</span><br>
<span class="lineno"></span><span class="comment" id="888157">//</span><br>
<span class="lineno">20</span><span class="comment" id="888160">//&nbsp;The&nbsp;current&nbsp;AES&nbsp;hash&nbsp;function&nbsp;passes&nbsp;Smhasher.&nbsp;&nbsp;Our&nbsp;fallback</span><br>
<span class="lineno"></span><span class="comment" id="888224">//&nbsp;hash&nbsp;functions&nbsp;don&#39;t,&nbsp;so&nbsp;we&nbsp;only&nbsp;enable&nbsp;the&nbsp;difficult&nbsp;tests&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="888292">//&nbsp;we&nbsp;know&nbsp;the&nbsp;AES&nbsp;implementation&nbsp;is&nbsp;available.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="888341">//&nbsp;Sanity&nbsp;checks.</span><br>
<span class="lineno">25</span><span class="comment" id="888359">//&nbsp;hash&nbsp;should&nbsp;not&nbsp;depend&nbsp;on&nbsp;values&nbsp;outside&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="888408">//&nbsp;hash&nbsp;should&nbsp;not&nbsp;depend&nbsp;on&nbsp;alignment.</span><br>
<span class="lineno"></span><span class="keyword" id="888448">func</span>&nbsp;<span class="ident" id="888453">TestSmhasherSanity</span><span class="op" id="888471">(</span><span class="ident" id="888472">t</span>&nbsp;<span class="op" id="888474">*</span><span class="ident" id="888475"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="888482">.</span><span class="ident" id="888483">T</span><span class="op" id="888484">)</span>&nbsp;<span class="op" id="888486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="888489">r</span>&nbsp;<span class="op" id="888491">:=</span>&nbsp;<span class="ident" id="888494"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="888498">.</span><span class="ident" id="888499">New</span><span class="op" id="888502">(</span><span class="ident" id="888503"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="888507">.</span><span class="ident" id="888508">NewSource</span><span class="op" id="888517">(</span><span class="num" id="888518">1234</span><span class="op" id="888522">)</span><span class="op" id="888523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888526">const</span>&nbsp;<span class="ident" id="888532">REP</span>&nbsp;<span class="op" id="888536">=</span>&nbsp;<span class="num" id="888538">10</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888542">const</span>&nbsp;<span class="ident" id="888548">KEYMAX</span>&nbsp;<span class="op" id="888555">=</span>&nbsp;<span class="num" id="888557">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888562">const</span>&nbsp;<span class="ident" id="888568">PAD</span>&nbsp;<span class="op" id="888572">=</span>&nbsp;<span class="num" id="888574">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888578">const</span>&nbsp;<span class="ident" id="888584">OFFMAX</span>&nbsp;<span class="op" id="888591">=</span>&nbsp;<span class="num" id="888593">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888597">for</span>&nbsp;<span class="ident" id="888601">k</span>&nbsp;<span class="op" id="888603">:=</span>&nbsp;<span class="num" id="888606">0</span><span class="op" id="888607">;</span>&nbsp;<span class="ident" id="888609"><a href="/runtime/hash_test.go.html#888601">k</a></span>&nbsp;<span class="op" id="888611">&lt;</span>&nbsp;<span class="ident" id="888613"><a href="/runtime/hash_test.go.html#888532">REP</a></span><span class="op" id="888616">;</span>&nbsp;<span class="ident" id="888618"><a href="/runtime/hash_test.go.html#888601">k</a></span><span class="op" id="888619">++</span>&nbsp;<span class="op" id="888622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888626">for</span>&nbsp;<span class="ident" id="888630">n</span>&nbsp;<span class="op" id="888632">:=</span>&nbsp;<span class="num" id="888635">0</span><span class="op" id="888636">;</span>&nbsp;<span class="ident" id="888638"><a href="/runtime/hash_test.go.html#888630">n</a></span>&nbsp;<span class="op" id="888640">&lt;</span>&nbsp;<span class="ident" id="888642"><a href="/runtime/hash_test.go.html#888548">KEYMAX</a></span><span class="op" id="888648">;</span>&nbsp;<span class="ident" id="888650"><a href="/runtime/hash_test.go.html#888630">n</a></span><span class="op" id="888651">++</span>&nbsp;<span class="op" id="888654">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888659">for</span>&nbsp;<span class="ident" id="888663">i</span>&nbsp;<span class="op" id="888665">:=</span>&nbsp;<span class="num" id="888668">0</span><span class="op" id="888669">;</span>&nbsp;<span class="ident" id="888671"><a href="/runtime/hash_test.go.html#888663">i</a></span>&nbsp;<span class="op" id="888673">&lt;</span>&nbsp;<span class="ident" id="888675"><a href="/runtime/hash_test.go.html#888584">OFFMAX</a></span><span class="op" id="888681">;</span>&nbsp;<span class="ident" id="888683"><a href="/runtime/hash_test.go.html#888663">i</a></span><span class="op" id="888684">++</span>&nbsp;<span class="op" id="888687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888693">var</span>&nbsp;<span class="ident" id="888697">b</span>&nbsp;<span class="op" id="888699">[</span><span class="ident" id="888700"><a href="/runtime/hash_test.go.html#888548">KEYMAX</a></span>&nbsp;<span class="op" id="888707">+</span>&nbsp;<span class="ident" id="888709"><a href="/runtime/hash_test.go.html#888584">OFFMAX</a></span>&nbsp;<span class="op" id="888716">+</span>&nbsp;<span class="num" id="888718">2</span><span class="op" id="888719">*</span><span class="ident" id="888720"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888723">]</span><span class="builtintype" id="888724">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888733">var</span>&nbsp;<span class="ident" id="888737">c</span>&nbsp;<span class="op" id="888739">[</span><span class="ident" id="888740"><a href="/runtime/hash_test.go.html#888548">KEYMAX</a></span>&nbsp;<span class="op" id="888747">+</span>&nbsp;<span class="ident" id="888749"><a href="/runtime/hash_test.go.html#888584">OFFMAX</a></span>&nbsp;<span class="op" id="888756">+</span>&nbsp;<span class="num" id="888758">2</span><span class="op" id="888759">*</span><span class="ident" id="888760"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888763">]</span><span class="builtintype" id="888764">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="888773"><a href="/runtime/hash_test.go.html#900150">randBytes</a></span><span class="op" id="888782">(</span><span class="ident" id="888783"><a href="/runtime/hash_test.go.html#888489">r</a></span><span class="op" id="888784">,</span>&nbsp;<span class="ident" id="888786"><a href="/runtime/hash_test.go.html#888697">b</a></span><span class="op" id="888787">[</span><span class="op" id="888788">:</span><span class="op" id="888789">]</span><span class="op" id="888790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="888796"><a href="/runtime/hash_test.go.html#900150">randBytes</a></span><span class="op" id="888805">(</span><span class="ident" id="888806"><a href="/runtime/hash_test.go.html#888489">r</a></span><span class="op" id="888807">,</span>&nbsp;<span class="ident" id="888809"><a href="/runtime/hash_test.go.html#888737">c</a></span><span class="op" id="888810">[</span><span class="op" id="888811">:</span><span class="op" id="888812">]</span><span class="op" id="888813">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="888819">copy</span><span class="op" id="888823">(</span><span class="ident" id="888824"><a href="/runtime/hash_test.go.html#888737">c</a></span><span class="op" id="888825">[</span><span class="ident" id="888826"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888829">+</span><span class="ident" id="888830"><a href="/runtime/hash_test.go.html#888663">i</a></span><span class="op" id="888831">:</span><span class="ident" id="888832"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888835">+</span><span class="ident" id="888836"><a href="/runtime/hash_test.go.html#888663">i</a></span><span class="op" id="888837">+</span><span class="ident" id="888838"><a href="/runtime/hash_test.go.html#888630">n</a></span><span class="op" id="888839">]</span><span class="op" id="888840">,</span>&nbsp;<span class="ident" id="888842"><a href="/runtime/hash_test.go.html#888697">b</a></span><span class="op" id="888843">[</span><span class="ident" id="888844"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888847">:</span><span class="ident" id="888848"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888851">+</span><span class="ident" id="888852"><a href="/runtime/hash_test.go.html#888630">n</a></span><span class="op" id="888853">]</span><span class="op" id="888854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="888860">if</span>&nbsp;<span class="ident" id="888863"><a href="/runtime/export_test.go.html#7719362">BytesHash</a></span><span class="op" id="888872">(</span><span class="ident" id="888873"><a href="/runtime/hash_test.go.html#888697">b</a></span><span class="op" id="888874">[</span><span class="ident" id="888875"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888878">:</span><span class="ident" id="888879"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888882">+</span><span class="ident" id="888883"><a href="/runtime/hash_test.go.html#888630">n</a></span><span class="op" id="888884">]</span><span class="op" id="888885">,</span>&nbsp;<span class="num" id="888887">0</span><span class="op" id="888888">)</span>&nbsp;<span class="op" id="888890">!=</span>&nbsp;<span class="ident" id="888893"><a href="/runtime/export_test.go.html#7719362">BytesHash</a></span><span class="op" id="888902">(</span><span class="ident" id="888903"><a href="/runtime/hash_test.go.html#888737">c</a></span><span class="op" id="888904">[</span><span class="ident" id="888905"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888908">+</span><span class="ident" id="888909"><a href="/runtime/hash_test.go.html#888663">i</a></span><span class="op" id="888910">:</span><span class="ident" id="888911"><a href="/runtime/hash_test.go.html#888568">PAD</a></span><span class="op" id="888914">+</span><span class="ident" id="888915"><a href="/runtime/hash_test.go.html#888663">i</a></span><span class="op" id="888916">+</span><span class="ident" id="888917"><a href="/runtime/hash_test.go.html#888630">n</a></span><span class="op" id="888918">]</span><span class="op" id="888919">,</span>&nbsp;<span class="num" id="888921">0</span><span class="op" id="888922">)</span>&nbsp;<span class="op" id="888924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="888931"><a href="/runtime/hash_test.go.html#888472">t</a></span><span class="op" id="888932">.</span><span class="ident" id="888933">Errorf</span><span class="op" id="888939">(</span><span class="string" id="888940">&#34;hash&nbsp;depends&nbsp;on&nbsp;bytes&nbsp;outside&nbsp;key&#34;</span><span class="op" id="888975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="888981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="888986">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="888990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="888993">}</span><br>
<span class="lineno"></span><span class="op" id="888995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="888998">type</span>&nbsp;<span class="ident" id="889003">HashSet</span>&nbsp;<span class="keyword" id="889011">struct</span>&nbsp;<span class="op" id="889018">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889021">m</span>&nbsp;<span class="keyword" id="889023">map</span><span class="op" id="889026">[</span><span class="builtintype" id="889027">uintptr</span><span class="op" id="889034">]</span><span class="keyword" id="889035">struct</span><span class="op" id="889041">{</span><span class="op" id="889042">}</span>&nbsp;<span class="comment" id="889044">//&nbsp;set&nbsp;of&nbsp;hashes&nbsp;added</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889068">n</span>&nbsp;<span class="builtintype" id="889070">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="889091">//&nbsp;number&nbsp;of&nbsp;hashes&nbsp;added</span><br>
<span class="lineno"></span><span class="op" id="889117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="889120">func</span>&nbsp;<span class="ident" id="889125">newHashSet</span><span class="op" id="889135">(</span><span class="op" id="889136">)</span>&nbsp;<span class="op" id="889138">*</span><span class="ident" id="889139"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span>&nbsp;<span class="op" id="889147">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="889150">return</span>&nbsp;<span class="op" id="889157">&amp;</span><span class="ident" id="889158"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889165">{</span><span class="builtinfunc" id="889166">make</span><span class="op" id="889170">(</span><span class="keyword" id="889171">map</span><span class="op" id="889174">[</span><span class="builtintype" id="889175">uintptr</span><span class="op" id="889182">]</span><span class="keyword" id="889183">struct</span><span class="op" id="889189">{</span><span class="op" id="889190">}</span><span class="op" id="889191">)</span><span class="op" id="889192">,</span>&nbsp;<span class="num" id="889194">0</span><span class="op" id="889195">}</span><br>
<span class="lineno"></span><span class="op" id="889197">}</span><br>
<span class="lineno"></span><span class="keyword" id="889199">func</span>&nbsp;<span class="op" id="889204">(</span><span class="ident" id="889205">s</span>&nbsp;<span class="op" id="889207">*</span><span class="ident" id="889208"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889215">)</span>&nbsp;<span class="ident" id="889217">add</span><span class="op" id="889220">(</span><span class="ident" id="889221">h</span>&nbsp;<span class="builtintype" id="889223">uintptr</span><span class="op" id="889230">)</span>&nbsp;<span class="op" id="889232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889235"><a href="/runtime/hash_test.go.html#889205">s</a></span><span class="op" id="889236">.</span><span class="ident" id="889237">m</span><span class="op" id="889238">[</span><span class="ident" id="889239"><a href="/runtime/hash_test.go.html#889221">h</a></span><span class="op" id="889240">]</span>&nbsp;<span class="op" id="889242">=</span>&nbsp;<span class="keyword" id="889244">struct</span><span class="op" id="889250">{</span><span class="op" id="889251">}</span><span class="op" id="889252">{</span><span class="op" id="889253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889256"><a href="/runtime/hash_test.go.html#889205">s</a></span><span class="op" id="889257">.</span><span class="ident" id="889258">n</span><span class="op" id="889259">++</span><br>
<span class="lineno">60</span><span class="op" id="889262">}</span><br>
<span class="lineno"></span><span class="keyword" id="889264">func</span>&nbsp;<span class="op" id="889269">(</span><span class="ident" id="889270">s</span>&nbsp;<span class="op" id="889272">*</span><span class="ident" id="889273"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889280">)</span>&nbsp;<span class="ident" id="889282">addS</span><span class="op" id="889286">(</span><span class="ident" id="889287">x</span>&nbsp;<span class="builtintype" id="889289">string</span><span class="op" id="889295">)</span>&nbsp;<span class="op" id="889297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889300"><a href="/runtime/hash_test.go.html#889270">s</a></span><span class="op" id="889301">.</span><span class="ident" id="889302">add</span><span class="op" id="889305">(</span><span class="ident" id="889306"><a href="/runtime/export_test.go.html#7719334">StringHash</a></span><span class="op" id="889316">(</span><span class="ident" id="889317"><a href="/runtime/hash_test.go.html#889287">x</a></span><span class="op" id="889318">,</span>&nbsp;<span class="num" id="889320">0</span><span class="op" id="889321">)</span><span class="op" id="889322">)</span><br>
<span class="lineno"></span><span class="op" id="889324">}</span><br>
<span class="lineno"></span><span class="keyword" id="889326">func</span>&nbsp;<span class="op" id="889331">(</span><span class="ident" id="889332">s</span>&nbsp;<span class="op" id="889334">*</span><span class="ident" id="889335"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889342">)</span>&nbsp;<span class="ident" id="889344">addB</span><span class="op" id="889348">(</span><span class="ident" id="889349">x</span>&nbsp;<span class="op" id="889351">[</span><span class="op" id="889352">]</span><span class="builtintype" id="889353">byte</span><span class="op" id="889357">)</span>&nbsp;<span class="op" id="889359">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889362"><a href="/runtime/hash_test.go.html#889332">s</a></span><span class="op" id="889363">.</span><span class="ident" id="889364">add</span><span class="op" id="889367">(</span><span class="ident" id="889368"><a href="/runtime/export_test.go.html#7719362">BytesHash</a></span><span class="op" id="889377">(</span><span class="ident" id="889378"><a href="/runtime/hash_test.go.html#889349">x</a></span><span class="op" id="889379">,</span>&nbsp;<span class="num" id="889381">0</span><span class="op" id="889382">)</span><span class="op" id="889383">)</span><br>
<span class="lineno"></span><span class="op" id="889385">}</span><br>
<span class="lineno"></span><span class="keyword" id="889387">func</span>&nbsp;<span class="op" id="889392">(</span><span class="ident" id="889393">s</span>&nbsp;<span class="op" id="889395">*</span><span class="ident" id="889396"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889403">)</span>&nbsp;<span class="ident" id="889405">addS_seed</span><span class="op" id="889414">(</span><span class="ident" id="889415">x</span>&nbsp;<span class="builtintype" id="889417">string</span><span class="op" id="889423">,</span>&nbsp;<span class="ident" id="889425">seed</span>&nbsp;<span class="builtintype" id="889430">uintptr</span><span class="op" id="889437">)</span>&nbsp;<span class="op" id="889439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889442"><a href="/runtime/hash_test.go.html#889393">s</a></span><span class="op" id="889443">.</span><span class="ident" id="889444">add</span><span class="op" id="889447">(</span><span class="ident" id="889448"><a href="/runtime/export_test.go.html#7719334">StringHash</a></span><span class="op" id="889458">(</span><span class="ident" id="889459"><a href="/runtime/hash_test.go.html#889415">x</a></span><span class="op" id="889460">,</span>&nbsp;<span class="ident" id="889462"><a href="/runtime/hash_test.go.html#889425">seed</a></span><span class="op" id="889466">)</span><span class="op" id="889467">)</span><br>
<span class="lineno"></span><span class="op" id="889469">}</span><br>
<span class="lineno">70</span><span class="keyword" id="889471">func</span>&nbsp;<span class="op" id="889476">(</span><span class="ident" id="889477">s</span>&nbsp;<span class="op" id="889479">*</span><span class="ident" id="889480"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="889487">)</span>&nbsp;<span class="ident" id="889489">check</span><span class="op" id="889494">(</span><span class="ident" id="889495">t</span>&nbsp;<span class="op" id="889497">*</span><span class="ident" id="889498"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="889505">.</span><span class="ident" id="889506">T</span><span class="op" id="889507">)</span>&nbsp;<span class="op" id="889509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="889512">const</span>&nbsp;<span class="ident" id="889518">SLOP</span>&nbsp;<span class="op" id="889523">=</span>&nbsp;<span class="num" id="889525">10.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889531">collisions</span>&nbsp;<span class="op" id="889542">:=</span>&nbsp;<span class="ident" id="889545"><a href="/runtime/hash_test.go.html#889477">s</a></span><span class="op" id="889546">.</span><span class="ident" id="889547">n</span>&nbsp;<span class="op" id="889549">-</span>&nbsp;<span class="builtinfunc" id="889551">len</span><span class="op" id="889554">(</span><span class="ident" id="889555"><a href="/runtime/hash_test.go.html#889477">s</a></span><span class="op" id="889556">.</span><span class="ident" id="889557">m</span><span class="op" id="889558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="889561">//fmt.Printf(&#34;%d/%d\n&#34;,&nbsp;len(s.m),&nbsp;s.n)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889601">pairs</span>&nbsp;<span class="op" id="889607">:=</span>&nbsp;<span class="ident" id="889610">int64</span><span class="op" id="889615">(</span><span class="ident" id="889616"><a href="/runtime/hash_test.go.html#889477">s</a></span><span class="op" id="889617">.</span><span class="ident" id="889618">n</span><span class="op" id="889619">)</span>&nbsp;<span class="op" id="889621">*</span>&nbsp;<span class="ident" id="889623">int64</span><span class="op" id="889628">(</span><span class="ident" id="889629"><a href="/runtime/hash_test.go.html#889477">s</a></span><span class="op" id="889630">.</span><span class="ident" id="889631">n</span><span class="op" id="889632">-</span><span class="num" id="889633">1</span><span class="op" id="889634">)</span>&nbsp;<span class="op" id="889636">/</span>&nbsp;<span class="num" id="889638">2</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889641">expected</span>&nbsp;<span class="op" id="889650">:=</span>&nbsp;<span class="builtintype" id="889653">float64</span><span class="op" id="889660">(</span><span class="ident" id="889661"><a href="/runtime/hash_test.go.html#889601">pairs</a></span><span class="op" id="889666">)</span>&nbsp;<span class="op" id="889668">/</span>&nbsp;<span class="ident" id="889670"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="889674">.</span><span class="ident" id="889675">Pow</span><span class="op" id="889678">(</span><span class="num" id="889679">2.0</span><span class="op" id="889682">,</span>&nbsp;<span class="builtintype" id="889684">float64</span><span class="op" id="889691">(</span><span class="ident" id="889692"><a href="/runtime/hash_test.go.html#900104">hashSize</a></span><span class="op" id="889700">)</span><span class="op" id="889701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889704">stddev</span>&nbsp;<span class="op" id="889711">:=</span>&nbsp;<span class="ident" id="889714"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="889718">.</span><span class="ident" id="889719">Sqrt</span><span class="op" id="889723">(</span><span class="ident" id="889724"><a href="/runtime/hash_test.go.html#889641">expected</a></span><span class="op" id="889732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="889735">if</span>&nbsp;<span class="builtintype" id="889738">float64</span><span class="op" id="889745">(</span><span class="ident" id="889746"><a href="/runtime/hash_test.go.html#889531">collisions</a></span><span class="op" id="889756">)</span>&nbsp;<span class="op" id="889758">&gt;</span>&nbsp;<span class="ident" id="889760"><a href="/runtime/hash_test.go.html#889641">expected</a></span><span class="op" id="889768">+</span><span class="ident" id="889769"><a href="/runtime/hash_test.go.html#889518">SLOP</a></span><span class="op" id="889773">*</span><span class="num" id="889774">3</span><span class="op" id="889775">*</span><span class="ident" id="889776"><a href="/runtime/hash_test.go.html#889704">stddev</a></span>&nbsp;<span class="op" id="889783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889787"><a href="/runtime/hash_test.go.html#889495">t</a></span><span class="op" id="889788">.</span><span class="ident" id="889789">Errorf</span><span class="op" id="889795">(</span><span class="string" id="889796">&#34;unexpected&nbsp;number&nbsp;of&nbsp;collisions:&nbsp;got=%d&nbsp;mean=%f&nbsp;stddev=%f&#34;</span><span class="op" id="889855">,</span>&nbsp;<span class="ident" id="889857"><a href="/runtime/hash_test.go.html#889531">collisions</a></span><span class="op" id="889867">,</span>&nbsp;<span class="ident" id="889869"><a href="/runtime/hash_test.go.html#889641">expected</a></span><span class="op" id="889877">,</span>&nbsp;<span class="ident" id="889879"><a href="/runtime/hash_test.go.html#889704">stddev</a></span><span class="op" id="889885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="889888">}</span><br>
<span class="lineno">80</span><span class="op" id="889890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="889893">//&nbsp;a&nbsp;string&nbsp;plus&nbsp;adding&nbsp;zeros&nbsp;must&nbsp;make&nbsp;distinct&nbsp;hashes</span><br>
<span class="lineno"></span><span class="keyword" id="889949">func</span>&nbsp;<span class="ident" id="889954">TestSmhasherAppendedZeros</span><span class="op" id="889979">(</span><span class="ident" id="889980">t</span>&nbsp;<span class="op" id="889982">*</span><span class="ident" id="889983"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="889990">.</span><span class="ident" id="889991">T</span><span class="op" id="889992">)</span>&nbsp;<span class="op" id="889994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="889997">s</span>&nbsp;<span class="op" id="889999">:=</span>&nbsp;<span class="string" id="890002">&#34;hello&#34;</span>&nbsp;<span class="op" id="890010">+</span>&nbsp;<span class="ident" id="890012"><a href="/runtime/hash_test.go.html#887984">strings</a></span><span class="op" id="890019">.</span><span class="ident" id="890020">Repeat</span><span class="op" id="890026">(</span><span class="string" id="890027">&#34;\x00&#34;</span><span class="op" id="890033">,</span>&nbsp;<span class="num" id="890035">256</span><span class="op" id="890038">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890041">h</span>&nbsp;<span class="op" id="890043">:=</span>&nbsp;<span class="ident" id="890046"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="890056">(</span><span class="op" id="890057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890060">for</span>&nbsp;<span class="ident" id="890064">i</span>&nbsp;<span class="op" id="890066">:=</span>&nbsp;<span class="num" id="890069">0</span><span class="op" id="890070">;</span>&nbsp;<span class="ident" id="890072"><a href="/runtime/hash_test.go.html#890064">i</a></span>&nbsp;<span class="op" id="890074">&lt;=</span>&nbsp;<span class="builtinfunc" id="890077">len</span><span class="op" id="890080">(</span><span class="ident" id="890081"><a href="/runtime/hash_test.go.html#889997">s</a></span><span class="op" id="890082">)</span><span class="op" id="890083">;</span>&nbsp;<span class="ident" id="890085"><a href="/runtime/hash_test.go.html#890064">i</a></span><span class="op" id="890086">++</span>&nbsp;<span class="op" id="890089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890093"><a href="/runtime/hash_test.go.html#890041">h</a></span><span class="op" id="890094">.</span><span class="ident" id="890095">addS</span><span class="op" id="890099">(</span><span class="ident" id="890100"><a href="/runtime/hash_test.go.html#889997">s</a></span><span class="op" id="890101">[</span><span class="op" id="890102">:</span><span class="ident" id="890103"><a href="/runtime/hash_test.go.html#890064">i</a></span><span class="op" id="890104">]</span><span class="op" id="890105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890111"><a href="/runtime/hash_test.go.html#890041">h</a></span><span class="op" id="890112">.</span><span class="ident" id="890113">check</span><span class="op" id="890118">(</span><span class="ident" id="890119"><a href="/runtime/hash_test.go.html#889980">t</a></span><span class="op" id="890120">)</span><br>
<span class="lineno">90</span><span class="op" id="890122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="890125">//&nbsp;All&nbsp;0-3&nbsp;byte&nbsp;strings&nbsp;have&nbsp;distinct&nbsp;hashes.</span><br>
<span class="lineno"></span><span class="keyword" id="890171">func</span>&nbsp;<span class="ident" id="890176">TestSmhasherSmallKeys</span><span class="op" id="890197">(</span><span class="ident" id="890198">t</span>&nbsp;<span class="op" id="890200">*</span><span class="ident" id="890201"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890208">.</span><span class="ident" id="890209">T</span><span class="op" id="890210">)</span>&nbsp;<span class="op" id="890212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890215">h</span>&nbsp;<span class="op" id="890217">:=</span>&nbsp;<span class="ident" id="890220"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="890230">(</span><span class="op" id="890231">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890234">var</span>&nbsp;<span class="ident" id="890238">b</span>&nbsp;<span class="op" id="890240">[</span><span class="num" id="890241">3</span><span class="op" id="890242">]</span><span class="builtintype" id="890243">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890249">for</span>&nbsp;<span class="ident" id="890253">i</span>&nbsp;<span class="op" id="890255">:=</span>&nbsp;<span class="num" id="890258">0</span><span class="op" id="890259">;</span>&nbsp;<span class="ident" id="890261"><a href="/runtime/hash_test.go.html#890253">i</a></span>&nbsp;<span class="op" id="890263">&lt;</span>&nbsp;<span class="num" id="890265">256</span><span class="op" id="890268">;</span>&nbsp;<span class="ident" id="890270"><a href="/runtime/hash_test.go.html#890253">i</a></span><span class="op" id="890271">++</span>&nbsp;<span class="op" id="890274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890278"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890279">[</span><span class="num" id="890280">0</span><span class="op" id="890281">]</span>&nbsp;<span class="op" id="890283">=</span>&nbsp;<span class="builtintype" id="890285">byte</span><span class="op" id="890289">(</span><span class="ident" id="890290"><a href="/runtime/hash_test.go.html#890253">i</a></span><span class="op" id="890291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890295"><a href="/runtime/hash_test.go.html#890215">h</a></span><span class="op" id="890296">.</span><span class="ident" id="890297">addB</span><span class="op" id="890301">(</span><span class="ident" id="890302"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890303">[</span><span class="op" id="890304">:</span><span class="num" id="890305">1</span><span class="op" id="890306">]</span><span class="op" id="890307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890311">for</span>&nbsp;<span class="ident" id="890315">j</span>&nbsp;<span class="op" id="890317">:=</span>&nbsp;<span class="num" id="890320">0</span><span class="op" id="890321">;</span>&nbsp;<span class="ident" id="890323"><a href="/runtime/hash_test.go.html#890315">j</a></span>&nbsp;<span class="op" id="890325">&lt;</span>&nbsp;<span class="num" id="890327">256</span><span class="op" id="890330">;</span>&nbsp;<span class="ident" id="890332"><a href="/runtime/hash_test.go.html#890315">j</a></span><span class="op" id="890333">++</span>&nbsp;<span class="op" id="890336">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890341"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890342">[</span><span class="num" id="890343">1</span><span class="op" id="890344">]</span>&nbsp;<span class="op" id="890346">=</span>&nbsp;<span class="builtintype" id="890348">byte</span><span class="op" id="890352">(</span><span class="ident" id="890353"><a href="/runtime/hash_test.go.html#890315">j</a></span><span class="op" id="890354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890359"><a href="/runtime/hash_test.go.html#890215">h</a></span><span class="op" id="890360">.</span><span class="ident" id="890361">addB</span><span class="op" id="890365">(</span><span class="ident" id="890366"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890367">[</span><span class="op" id="890368">:</span><span class="num" id="890369">2</span><span class="op" id="890370">]</span><span class="op" id="890371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890376">if</span>&nbsp;<span class="op" id="890379">!</span><span class="ident" id="890380"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890387">.</span><span class="ident" id="890388">Short</span><span class="op" id="890393">(</span><span class="op" id="890394">)</span>&nbsp;<span class="op" id="890396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890402">for</span>&nbsp;<span class="ident" id="890406">k</span>&nbsp;<span class="op" id="890408">:=</span>&nbsp;<span class="num" id="890411">0</span><span class="op" id="890412">;</span>&nbsp;<span class="ident" id="890414"><a href="/runtime/hash_test.go.html#890406">k</a></span>&nbsp;<span class="op" id="890416">&lt;</span>&nbsp;<span class="num" id="890418">256</span><span class="op" id="890421">;</span>&nbsp;<span class="ident" id="890423"><a href="/runtime/hash_test.go.html#890406">k</a></span><span class="op" id="890424">++</span>&nbsp;<span class="op" id="890427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890434"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890435">[</span><span class="num" id="890436">2</span><span class="op" id="890437">]</span>&nbsp;<span class="op" id="890439">=</span>&nbsp;<span class="builtintype" id="890441">byte</span><span class="op" id="890445">(</span><span class="ident" id="890446"><a href="/runtime/hash_test.go.html#890406">k</a></span><span class="op" id="890447">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890454"><a href="/runtime/hash_test.go.html#890215">h</a></span><span class="op" id="890455">.</span><span class="ident" id="890456">addB</span><span class="op" id="890460">(</span><span class="ident" id="890461"><a href="/runtime/hash_test.go.html#890238">b</a></span><span class="op" id="890462">[</span><span class="op" id="890463">:</span><span class="num" id="890464">3</span><span class="op" id="890465">]</span><span class="op" id="890466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890484">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890487"><a href="/runtime/hash_test.go.html#890215">h</a></span><span class="op" id="890488">.</span><span class="ident" id="890489">check</span><span class="op" id="890494">(</span><span class="ident" id="890495"><a href="/runtime/hash_test.go.html#890198">t</a></span><span class="op" id="890496">)</span><br>
<span class="lineno"></span><span class="op" id="890498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="890501">//&nbsp;Different&nbsp;length&nbsp;strings&nbsp;of&nbsp;all&nbsp;zeros&nbsp;have&nbsp;distinct&nbsp;hashes.</span><br>
<span class="lineno"></span><span class="keyword" id="890564">func</span>&nbsp;<span class="ident" id="890569">TestSmhasherZeros</span><span class="op" id="890586">(</span><span class="ident" id="890587">t</span>&nbsp;<span class="op" id="890589">*</span><span class="ident" id="890590"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890597">.</span><span class="ident" id="890598">T</span><span class="op" id="890599">)</span>&nbsp;<span class="op" id="890601">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890604">N</span>&nbsp;<span class="op" id="890606">:=</span>&nbsp;<span class="num" id="890609">256</span>&nbsp;<span class="op" id="890613">*</span>&nbsp;<span class="num" id="890615">1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890621">if</span>&nbsp;<span class="ident" id="890624"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890631">.</span><span class="ident" id="890632">Short</span><span class="op" id="890637">(</span><span class="op" id="890638">)</span>&nbsp;<span class="op" id="890640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890644"><a href="/runtime/hash_test.go.html#890604">N</a></span>&nbsp;<span class="op" id="890646">=</span>&nbsp;<span class="num" id="890648">1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890657">h</span>&nbsp;<span class="op" id="890659">:=</span>&nbsp;<span class="ident" id="890662"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="890672">(</span><span class="op" id="890673">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890676">b</span>&nbsp;<span class="op" id="890678">:=</span>&nbsp;<span class="builtinfunc" id="890681">make</span><span class="op" id="890685">(</span><span class="op" id="890686">[</span><span class="op" id="890687">]</span><span class="builtintype" id="890688">byte</span><span class="op" id="890692">,</span>&nbsp;<span class="ident" id="890694"><a href="/runtime/hash_test.go.html#890604">N</a></span><span class="op" id="890695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890698">for</span>&nbsp;<span class="ident" id="890702">i</span>&nbsp;<span class="op" id="890704">:=</span>&nbsp;<span class="num" id="890707">0</span><span class="op" id="890708">;</span>&nbsp;<span class="ident" id="890710"><a href="/runtime/hash_test.go.html#890702">i</a></span>&nbsp;<span class="op" id="890712">&lt;=</span>&nbsp;<span class="ident" id="890715"><a href="/runtime/hash_test.go.html#890604">N</a></span><span class="op" id="890716">;</span>&nbsp;<span class="ident" id="890718"><a href="/runtime/hash_test.go.html#890702">i</a></span><span class="op" id="890719">++</span>&nbsp;<span class="op" id="890722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890726"><a href="/runtime/hash_test.go.html#890657">h</a></span><span class="op" id="890727">.</span><span class="ident" id="890728">addB</span><span class="op" id="890732">(</span><span class="ident" id="890733"><a href="/runtime/hash_test.go.html#890676">b</a></span><span class="op" id="890734">[</span><span class="op" id="890735">:</span><span class="ident" id="890736"><a href="/runtime/hash_test.go.html#890702">i</a></span><span class="op" id="890737">]</span><span class="op" id="890738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890744"><a href="/runtime/hash_test.go.html#890657">h</a></span><span class="op" id="890745">.</span><span class="ident" id="890746">check</span><span class="op" id="890751">(</span><span class="ident" id="890752"><a href="/runtime/hash_test.go.html#890587">t</a></span><span class="op" id="890753">)</span><br>
<span class="lineno">125</span><span class="op" id="890755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="890758">//&nbsp;Strings&nbsp;with&nbsp;up&nbsp;to&nbsp;two&nbsp;nonzero&nbsp;bytes&nbsp;all&nbsp;have&nbsp;distinct&nbsp;hashes.</span><br>
<span class="lineno"></span><span class="keyword" id="890824">func</span>&nbsp;<span class="ident" id="890829">TestSmhasherTwoNonzero</span><span class="op" id="890851">(</span><span class="ident" id="890852">t</span>&nbsp;<span class="op" id="890854">*</span><span class="ident" id="890855"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890862">.</span><span class="ident" id="890863">T</span><span class="op" id="890864">)</span>&nbsp;<span class="op" id="890866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890869">if</span>&nbsp;<span class="ident" id="890872"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="890879">.</span><span class="ident" id="890880">Short</span><span class="op" id="890885">(</span><span class="op" id="890886">)</span>&nbsp;<span class="op" id="890888">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890892"><a href="/runtime/hash_test.go.html#890852">t</a></span><span class="op" id="890893">.</span><span class="ident" id="890894">Skip</span><span class="op" id="890898">(</span><span class="string" id="890899">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="890923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890929">h</span>&nbsp;<span class="op" id="890931">:=</span>&nbsp;<span class="ident" id="890934"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="890944">(</span><span class="op" id="890945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="890948">for</span>&nbsp;<span class="ident" id="890952">n</span>&nbsp;<span class="op" id="890954">:=</span>&nbsp;<span class="num" id="890957">2</span><span class="op" id="890958">;</span>&nbsp;<span class="ident" id="890960"><a href="/runtime/hash_test.go.html#890952">n</a></span>&nbsp;<span class="op" id="890962">&lt;=</span>&nbsp;<span class="num" id="890965">16</span><span class="op" id="890967">;</span>&nbsp;<span class="ident" id="890969"><a href="/runtime/hash_test.go.html#890952">n</a></span><span class="op" id="890970">++</span>&nbsp;<span class="op" id="890973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890977"><a href="/runtime/hash_test.go.html#891016">twoNonZero</a></span><span class="op" id="890987">(</span><span class="ident" id="890988"><a href="/runtime/hash_test.go.html#890929">h</a></span><span class="op" id="890989">,</span>&nbsp;<span class="ident" id="890991"><a href="/runtime/hash_test.go.html#890952">n</a></span><span class="op" id="890992">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="890995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="890998"><a href="/runtime/hash_test.go.html#890929">h</a></span><span class="op" id="890999">.</span><span class="ident" id="891000">check</span><span class="op" id="891005">(</span><span class="ident" id="891006"><a href="/runtime/hash_test.go.html#890852">t</a></span><span class="op" id="891007">)</span><br>
<span class="lineno"></span><span class="op" id="891009">}</span><br>
<span class="lineno"></span><span class="keyword" id="891011">func</span>&nbsp;<span class="ident" id="891016">twoNonZero</span><span class="op" id="891026">(</span><span class="ident" id="891027">h</span>&nbsp;<span class="op" id="891029">*</span><span class="ident" id="891030"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="891037">,</span>&nbsp;<span class="ident" id="891039">n</span>&nbsp;<span class="builtintype" id="891041">int</span><span class="op" id="891044">)</span>&nbsp;<span class="op" id="891046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891049">b</span>&nbsp;<span class="op" id="891051">:=</span>&nbsp;<span class="builtinfunc" id="891054">make</span><span class="op" id="891058">(</span><span class="op" id="891059">[</span><span class="op" id="891060">]</span><span class="builtintype" id="891061">byte</span><span class="op" id="891065">,</span>&nbsp;<span class="ident" id="891067"><a href="/runtime/hash_test.go.html#891039">n</a></span><span class="op" id="891068">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="891072">//&nbsp;all&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891085"><a href="/runtime/hash_test.go.html#891027">h</a></span><span class="op" id="891086">.</span><span class="ident" id="891087">addB</span><span class="op" id="891091">(</span><span class="ident" id="891092"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891093">[</span><span class="op" id="891094">:</span><span class="op" id="891095">]</span><span class="op" id="891096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="891100">//&nbsp;one&nbsp;non-zero&nbsp;byte</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891122">for</span>&nbsp;<span class="ident" id="891126">i</span>&nbsp;<span class="op" id="891128">:=</span>&nbsp;<span class="num" id="891131">0</span><span class="op" id="891132">;</span>&nbsp;<span class="ident" id="891134"><a href="/runtime/hash_test.go.html#891126">i</a></span>&nbsp;<span class="op" id="891136">&lt;</span>&nbsp;<span class="ident" id="891138"><a href="/runtime/hash_test.go.html#891039">n</a></span><span class="op" id="891139">;</span>&nbsp;<span class="ident" id="891141"><a href="/runtime/hash_test.go.html#891126">i</a></span><span class="op" id="891142">++</span>&nbsp;<span class="op" id="891145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891149">for</span>&nbsp;<span class="ident" id="891153">x</span>&nbsp;<span class="op" id="891155">:=</span>&nbsp;<span class="num" id="891158">1</span><span class="op" id="891159">;</span>&nbsp;<span class="ident" id="891161"><a href="/runtime/hash_test.go.html#891153">x</a></span>&nbsp;<span class="op" id="891163">&lt;</span>&nbsp;<span class="num" id="891165">256</span><span class="op" id="891168">;</span>&nbsp;<span class="ident" id="891170"><a href="/runtime/hash_test.go.html#891153">x</a></span><span class="op" id="891171">++</span>&nbsp;<span class="op" id="891174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891179"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891180">[</span><span class="ident" id="891181"><a href="/runtime/hash_test.go.html#891126">i</a></span><span class="op" id="891182">]</span>&nbsp;<span class="op" id="891184">=</span>&nbsp;<span class="builtintype" id="891186">byte</span><span class="op" id="891190">(</span><span class="ident" id="891191"><a href="/runtime/hash_test.go.html#891153">x</a></span><span class="op" id="891192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891197"><a href="/runtime/hash_test.go.html#891027">h</a></span><span class="op" id="891198">.</span><span class="ident" id="891199">addB</span><span class="op" id="891203">(</span><span class="ident" id="891204"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891205">[</span><span class="op" id="891206">:</span><span class="op" id="891207">]</span><span class="op" id="891208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891213"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891214">[</span><span class="ident" id="891215"><a href="/runtime/hash_test.go.html#891126">i</a></span><span class="op" id="891216">]</span>&nbsp;<span class="op" id="891218">=</span>&nbsp;<span class="num" id="891220">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="891231">//&nbsp;two&nbsp;non-zero&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891254">for</span>&nbsp;<span class="ident" id="891258">i</span>&nbsp;<span class="op" id="891260">:=</span>&nbsp;<span class="num" id="891263">0</span><span class="op" id="891264">;</span>&nbsp;<span class="ident" id="891266"><a href="/runtime/hash_test.go.html#891258">i</a></span>&nbsp;<span class="op" id="891268">&lt;</span>&nbsp;<span class="ident" id="891270"><a href="/runtime/hash_test.go.html#891039">n</a></span><span class="op" id="891271">;</span>&nbsp;<span class="ident" id="891273"><a href="/runtime/hash_test.go.html#891258">i</a></span><span class="op" id="891274">++</span>&nbsp;<span class="op" id="891277">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891281">for</span>&nbsp;<span class="ident" id="891285">x</span>&nbsp;<span class="op" id="891287">:=</span>&nbsp;<span class="num" id="891290">1</span><span class="op" id="891291">;</span>&nbsp;<span class="ident" id="891293"><a href="/runtime/hash_test.go.html#891285">x</a></span>&nbsp;<span class="op" id="891295">&lt;</span>&nbsp;<span class="num" id="891297">256</span><span class="op" id="891300">;</span>&nbsp;<span class="ident" id="891302"><a href="/runtime/hash_test.go.html#891285">x</a></span><span class="op" id="891303">++</span>&nbsp;<span class="op" id="891306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891311"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891312">[</span><span class="ident" id="891313"><a href="/runtime/hash_test.go.html#891258">i</a></span><span class="op" id="891314">]</span>&nbsp;<span class="op" id="891316">=</span>&nbsp;<span class="builtintype" id="891318">byte</span><span class="op" id="891322">(</span><span class="ident" id="891323"><a href="/runtime/hash_test.go.html#891285">x</a></span><span class="op" id="891324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891329">for</span>&nbsp;<span class="ident" id="891333">j</span>&nbsp;<span class="op" id="891335">:=</span>&nbsp;<span class="ident" id="891338"><a href="/runtime/hash_test.go.html#891258">i</a></span>&nbsp;<span class="op" id="891340">+</span>&nbsp;<span class="num" id="891342">1</span><span class="op" id="891343">;</span>&nbsp;<span class="ident" id="891345"><a href="/runtime/hash_test.go.html#891333">j</a></span>&nbsp;<span class="op" id="891347">&lt;</span>&nbsp;<span class="ident" id="891349"><a href="/runtime/hash_test.go.html#891039">n</a></span><span class="op" id="891350">;</span>&nbsp;<span class="ident" id="891352"><a href="/runtime/hash_test.go.html#891333">j</a></span><span class="op" id="891353">++</span>&nbsp;<span class="op" id="891356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891362">for</span>&nbsp;<span class="ident" id="891366">y</span>&nbsp;<span class="op" id="891368">:=</span>&nbsp;<span class="num" id="891371">1</span><span class="op" id="891372">;</span>&nbsp;<span class="ident" id="891374"><a href="/runtime/hash_test.go.html#891366">y</a></span>&nbsp;<span class="op" id="891376">&lt;</span>&nbsp;<span class="num" id="891378">256</span><span class="op" id="891381">;</span>&nbsp;<span class="ident" id="891383"><a href="/runtime/hash_test.go.html#891366">y</a></span><span class="op" id="891384">++</span>&nbsp;<span class="op" id="891387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891394"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891395">[</span><span class="ident" id="891396"><a href="/runtime/hash_test.go.html#891333">j</a></span><span class="op" id="891397">]</span>&nbsp;<span class="op" id="891399">=</span>&nbsp;<span class="builtintype" id="891401">byte</span><span class="op" id="891405">(</span><span class="ident" id="891406"><a href="/runtime/hash_test.go.html#891366">y</a></span><span class="op" id="891407">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891414"><a href="/runtime/hash_test.go.html#891027">h</a></span><span class="op" id="891415">.</span><span class="ident" id="891416">addB</span><span class="op" id="891420">(</span><span class="ident" id="891421"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891422">[</span><span class="op" id="891423">:</span><span class="op" id="891424">]</span><span class="op" id="891425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891432"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891433">[</span><span class="ident" id="891434"><a href="/runtime/hash_test.go.html#891333">j</a></span><span class="op" id="891435">]</span>&nbsp;<span class="op" id="891437">=</span>&nbsp;<span class="num" id="891439">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891455"><a href="/runtime/hash_test.go.html#891049">b</a></span><span class="op" id="891456">[</span><span class="ident" id="891457"><a href="/runtime/hash_test.go.html#891258">i</a></span><span class="op" id="891458">]</span>&nbsp;<span class="op" id="891460">=</span>&nbsp;<span class="num" id="891462">0</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891469">}</span><br>
<span class="lineno"></span><span class="op" id="891471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="891474">//&nbsp;Test&nbsp;strings&nbsp;with&nbsp;repeats,&nbsp;like&nbsp;&#34;abcdabcdabcdabcd...&#34;</span><br>
<span class="lineno">170</span><span class="keyword" id="891531">func</span>&nbsp;<span class="ident" id="891536">TestSmhasherCyclic</span><span class="op" id="891554">(</span><span class="ident" id="891555">t</span>&nbsp;<span class="op" id="891557">*</span><span class="ident" id="891558"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="891565">.</span><span class="ident" id="891566">T</span><span class="op" id="891567">)</span>&nbsp;<span class="op" id="891569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891572">if</span>&nbsp;<span class="ident" id="891575"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="891582">.</span><span class="ident" id="891583">Short</span><span class="op" id="891588">(</span><span class="op" id="891589">)</span>&nbsp;<span class="op" id="891591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891595"><a href="/runtime/hash_test.go.html#891555">t</a></span><span class="op" id="891596">.</span><span class="ident" id="891597">Skip</span><span class="op" id="891601">(</span><span class="string" id="891602">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="891626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891632">if</span>&nbsp;<span class="op" id="891635">!</span><span class="ident" id="891636"><a href="/runtime/export_test.go.html#7719302">HaveGoodHash</a></span><span class="op" id="891648">(</span><span class="op" id="891649">)</span>&nbsp;<span class="op" id="891651">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891655"><a href="/runtime/hash_test.go.html#891555">t</a></span><span class="op" id="891656">.</span><span class="ident" id="891657">Skip</span><span class="op" id="891661">(</span><span class="string" id="891662">&#34;fallback&nbsp;hash&nbsp;not&nbsp;good&nbsp;enough&nbsp;for&nbsp;this&nbsp;test&#34;</span><span class="op" id="891707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="891710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891713">r</span>&nbsp;<span class="op" id="891715">:=</span>&nbsp;<span class="ident" id="891718"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="891722">.</span><span class="ident" id="891723">New</span><span class="op" id="891726">(</span><span class="ident" id="891727"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="891731">.</span><span class="ident" id="891732">NewSource</span><span class="op" id="891741">(</span><span class="num" id="891742">1234</span><span class="op" id="891746">)</span><span class="op" id="891747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891750">const</span>&nbsp;<span class="ident" id="891756">REPEAT</span>&nbsp;<span class="op" id="891763">=</span>&nbsp;<span class="num" id="891765">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891768">const</span>&nbsp;<span class="ident" id="891774">N</span>&nbsp;<span class="op" id="891776">=</span>&nbsp;<span class="num" id="891778">1000000</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891787">for</span>&nbsp;<span class="ident" id="891791">n</span>&nbsp;<span class="op" id="891793">:=</span>&nbsp;<span class="num" id="891796">4</span><span class="op" id="891797">;</span>&nbsp;<span class="ident" id="891799"><a href="/runtime/hash_test.go.html#891791">n</a></span>&nbsp;<span class="op" id="891801">&lt;=</span>&nbsp;<span class="num" id="891804">12</span><span class="op" id="891806">;</span>&nbsp;<span class="ident" id="891808"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="891809">++</span>&nbsp;<span class="op" id="891812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891816">h</span>&nbsp;<span class="op" id="891818">:=</span>&nbsp;<span class="ident" id="891821"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="891831">(</span><span class="op" id="891832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891836">b</span>&nbsp;<span class="op" id="891838">:=</span>&nbsp;<span class="builtinfunc" id="891841">make</span><span class="op" id="891845">(</span><span class="op" id="891846">[</span><span class="op" id="891847">]</span><span class="builtintype" id="891848">byte</span><span class="op" id="891852">,</span>&nbsp;<span class="ident" id="891854"><a href="/runtime/hash_test.go.html#891756">REPEAT</a></span><span class="op" id="891860">*</span><span class="ident" id="891861"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="891862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="891866">for</span>&nbsp;<span class="ident" id="891870">i</span>&nbsp;<span class="op" id="891872">:=</span>&nbsp;<span class="num" id="891875">0</span><span class="op" id="891876">;</span>&nbsp;<span class="ident" id="891878"><a href="/runtime/hash_test.go.html#891870">i</a></span>&nbsp;<span class="op" id="891880">&lt;</span>&nbsp;<span class="ident" id="891882"><a href="/runtime/hash_test.go.html#891774">N</a></span><span class="op" id="891883">;</span>&nbsp;<span class="ident" id="891885"><a href="/runtime/hash_test.go.html#891870">i</a></span><span class="op" id="891886">++</span>&nbsp;<span class="op" id="891889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891894"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="891895">[</span><span class="num" id="891896">0</span><span class="op" id="891897">]</span>&nbsp;<span class="op" id="891899">=</span>&nbsp;<span class="builtintype" id="891901">byte</span><span class="op" id="891905">(</span><span class="ident" id="891906"><a href="/runtime/hash_test.go.html#891870">i</a></span>&nbsp;<span class="op" id="891908">*</span>&nbsp;<span class="num" id="891910">79</span>&nbsp;<span class="op" id="891913">%</span>&nbsp;<span class="num" id="891915">97</span><span class="op" id="891917">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891922"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="891923">[</span><span class="num" id="891924">1</span><span class="op" id="891925">]</span>&nbsp;<span class="op" id="891927">=</span>&nbsp;<span class="builtintype" id="891929">byte</span><span class="op" id="891933">(</span><span class="ident" id="891934"><a href="/runtime/hash_test.go.html#891870">i</a></span>&nbsp;<span class="op" id="891936">*</span>&nbsp;<span class="num" id="891938">43</span>&nbsp;<span class="op" id="891941">%</span>&nbsp;<span class="num" id="891943">137</span><span class="op" id="891946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891951"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="891952">[</span><span class="num" id="891953">2</span><span class="op" id="891954">]</span>&nbsp;<span class="op" id="891956">=</span>&nbsp;<span class="builtintype" id="891958">byte</span><span class="op" id="891962">(</span><span class="ident" id="891963"><a href="/runtime/hash_test.go.html#891870">i</a></span>&nbsp;<span class="op" id="891965">*</span>&nbsp;<span class="num" id="891967">151</span>&nbsp;<span class="op" id="891971">%</span>&nbsp;<span class="num" id="891973">197</span><span class="op" id="891976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="891981"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="891982">[</span><span class="num" id="891983">3</span><span class="op" id="891984">]</span>&nbsp;<span class="op" id="891986">=</span>&nbsp;<span class="builtintype" id="891988">byte</span><span class="op" id="891992">(</span><span class="ident" id="891993"><a href="/runtime/hash_test.go.html#891870">i</a></span>&nbsp;<span class="op" id="891995">*</span>&nbsp;<span class="num" id="891997">199</span>&nbsp;<span class="op" id="892001">%</span>&nbsp;<span class="num" id="892003">251</span><span class="op" id="892006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892011"><a href="/runtime/hash_test.go.html#900150">randBytes</a></span><span class="op" id="892020">(</span><span class="ident" id="892021"><a href="/runtime/hash_test.go.html#891713">r</a></span><span class="op" id="892022">,</span>&nbsp;<span class="ident" id="892024"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="892025">[</span><span class="num" id="892026">4</span><span class="op" id="892027">:</span><span class="ident" id="892028"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="892029">]</span><span class="op" id="892030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892035">for</span>&nbsp;<span class="ident" id="892039">j</span>&nbsp;<span class="op" id="892041">:=</span>&nbsp;<span class="ident" id="892044"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="892045">;</span>&nbsp;<span class="ident" id="892047"><a href="/runtime/hash_test.go.html#892039">j</a></span>&nbsp;<span class="op" id="892049">&lt;</span>&nbsp;<span class="ident" id="892051"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="892052">*</span><span class="ident" id="892053"><a href="/runtime/hash_test.go.html#891756">REPEAT</a></span><span class="op" id="892059">;</span>&nbsp;<span class="ident" id="892061"><a href="/runtime/hash_test.go.html#892039">j</a></span><span class="op" id="892062">++</span>&nbsp;<span class="op" id="892065">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892071"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="892072">[</span><span class="ident" id="892073"><a href="/runtime/hash_test.go.html#892039">j</a></span><span class="op" id="892074">]</span>&nbsp;<span class="op" id="892076">=</span>&nbsp;<span class="ident" id="892078"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="892079">[</span><span class="ident" id="892080"><a href="/runtime/hash_test.go.html#892039">j</a></span><span class="op" id="892081">-</span><span class="ident" id="892082"><a href="/runtime/hash_test.go.html#891791">n</a></span><span class="op" id="892083">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892093"><a href="/runtime/hash_test.go.html#891816">h</a></span><span class="op" id="892094">.</span><span class="ident" id="892095">addB</span><span class="op" id="892099">(</span><span class="ident" id="892100"><a href="/runtime/hash_test.go.html#891836">b</a></span><span class="op" id="892101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892109"><a href="/runtime/hash_test.go.html#891816">h</a></span><span class="op" id="892110">.</span><span class="ident" id="892111">check</span><span class="op" id="892116">(</span><span class="ident" id="892117"><a href="/runtime/hash_test.go.html#891555">t</a></span><span class="op" id="892118">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892121">}</span><br>
<span class="lineno"></span><span class="op" id="892123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="892126">//&nbsp;Test&nbsp;strings&nbsp;with&nbsp;only&nbsp;a&nbsp;few&nbsp;bits&nbsp;set</span><br>
<span class="lineno"></span><span class="keyword" id="892167">func</span>&nbsp;<span class="ident" id="892172">TestSmhasherSparse</span><span class="op" id="892190">(</span><span class="ident" id="892191">t</span>&nbsp;<span class="op" id="892193">*</span><span class="ident" id="892194"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="892201">.</span><span class="ident" id="892202">T</span><span class="op" id="892203">)</span>&nbsp;<span class="op" id="892205">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892208">if</span>&nbsp;<span class="ident" id="892211"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="892218">.</span><span class="ident" id="892219">Short</span><span class="op" id="892224">(</span><span class="op" id="892225">)</span>&nbsp;<span class="op" id="892227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892231"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892232">.</span><span class="ident" id="892233">Skip</span><span class="op" id="892237">(</span><span class="string" id="892238">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="892262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892268"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892274">(</span><span class="ident" id="892275"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892276">,</span>&nbsp;<span class="num" id="892278">32</span><span class="op" id="892280">,</span>&nbsp;<span class="num" id="892282">6</span><span class="op" id="892283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892286"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892292">(</span><span class="ident" id="892293"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892294">,</span>&nbsp;<span class="num" id="892296">40</span><span class="op" id="892298">,</span>&nbsp;<span class="num" id="892300">6</span><span class="op" id="892301">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892304"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892310">(</span><span class="ident" id="892311"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892312">,</span>&nbsp;<span class="num" id="892314">48</span><span class="op" id="892316">,</span>&nbsp;<span class="num" id="892318">5</span><span class="op" id="892319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892322"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892328">(</span><span class="ident" id="892329"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892330">,</span>&nbsp;<span class="num" id="892332">56</span><span class="op" id="892334">,</span>&nbsp;<span class="num" id="892336">5</span><span class="op" id="892337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892340"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892346">(</span><span class="ident" id="892347"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892348">,</span>&nbsp;<span class="num" id="892350">64</span><span class="op" id="892352">,</span>&nbsp;<span class="num" id="892354">5</span><span class="op" id="892355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892358"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892364">(</span><span class="ident" id="892365"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892366">,</span>&nbsp;<span class="num" id="892368">96</span><span class="op" id="892370">,</span>&nbsp;<span class="num" id="892372">4</span><span class="op" id="892373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892376"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892382">(</span><span class="ident" id="892383"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892384">,</span>&nbsp;<span class="num" id="892386">256</span><span class="op" id="892389">,</span>&nbsp;<span class="num" id="892391">3</span><span class="op" id="892392">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892395"><a href="/runtime/hash_test.go.html#892421">sparse</a></span><span class="op" id="892401">(</span><span class="ident" id="892402"><a href="/runtime/hash_test.go.html#892191">t</a></span><span class="op" id="892403">,</span>&nbsp;<span class="num" id="892405">2048</span><span class="op" id="892409">,</span>&nbsp;<span class="num" id="892411">2</span><span class="op" id="892412">)</span><br>
<span class="lineno"></span><span class="op" id="892414">}</span><br>
<span class="lineno"></span><span class="keyword" id="892416">func</span>&nbsp;<span class="ident" id="892421">sparse</span><span class="op" id="892427">(</span><span class="ident" id="892428">t</span>&nbsp;<span class="op" id="892430">*</span><span class="ident" id="892431"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="892438">.</span><span class="ident" id="892439">T</span><span class="op" id="892440">,</span>&nbsp;<span class="ident" id="892442">n</span>&nbsp;<span class="builtintype" id="892444">int</span><span class="op" id="892447">,</span>&nbsp;<span class="ident" id="892449">k</span>&nbsp;<span class="builtintype" id="892451">int</span><span class="op" id="892454">)</span>&nbsp;<span class="op" id="892456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892459">b</span>&nbsp;<span class="op" id="892461">:=</span>&nbsp;<span class="builtinfunc" id="892464">make</span><span class="op" id="892468">(</span><span class="op" id="892469">[</span><span class="op" id="892470">]</span><span class="builtintype" id="892471">byte</span><span class="op" id="892475">,</span>&nbsp;<span class="ident" id="892477"><a href="/runtime/hash_test.go.html#892442">n</a></span><span class="op" id="892478">/</span><span class="num" id="892479">8</span><span class="op" id="892480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892483">h</span>&nbsp;<span class="op" id="892485">:=</span>&nbsp;<span class="ident" id="892488"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="892498">(</span><span class="op" id="892499">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892502"><a href="/runtime/hash_test.go.html#892585">setbits</a></span><span class="op" id="892509">(</span><span class="ident" id="892510"><a href="/runtime/hash_test.go.html#892483">h</a></span><span class="op" id="892511">,</span>&nbsp;<span class="ident" id="892513"><a href="/runtime/hash_test.go.html#892459">b</a></span><span class="op" id="892514">,</span>&nbsp;<span class="num" id="892516">0</span><span class="op" id="892517">,</span>&nbsp;<span class="ident" id="892519"><a href="/runtime/hash_test.go.html#892449">k</a></span><span class="op" id="892520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892523"><a href="/runtime/hash_test.go.html#892483">h</a></span><span class="op" id="892524">.</span><span class="ident" id="892525">check</span><span class="op" id="892530">(</span><span class="ident" id="892531"><a href="/runtime/hash_test.go.html#892428">t</a></span><span class="op" id="892532">)</span><br>
<span class="lineno"></span><span class="op" id="892534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="892537">//&nbsp;set&nbsp;up&nbsp;to&nbsp;k&nbsp;bits&nbsp;at&nbsp;index&nbsp;i&nbsp;and&nbsp;greater</span><br>
<span class="lineno">220</span><span class="keyword" id="892580">func</span>&nbsp;<span class="ident" id="892585">setbits</span><span class="op" id="892592">(</span><span class="ident" id="892593">h</span>&nbsp;<span class="op" id="892595">*</span><span class="ident" id="892596"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="892603">,</span>&nbsp;<span class="ident" id="892605">b</span>&nbsp;<span class="op" id="892607">[</span><span class="op" id="892608">]</span><span class="builtintype" id="892609">byte</span><span class="op" id="892613">,</span>&nbsp;<span class="ident" id="892615">i</span>&nbsp;<span class="builtintype" id="892617">int</span><span class="op" id="892620">,</span>&nbsp;<span class="ident" id="892622">k</span>&nbsp;<span class="builtintype" id="892624">int</span><span class="op" id="892627">)</span>&nbsp;<span class="op" id="892629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892632"><a href="/runtime/hash_test.go.html#892593">h</a></span><span class="op" id="892633">.</span><span class="ident" id="892634">addB</span><span class="op" id="892638">(</span><span class="ident" id="892639"><a href="/runtime/hash_test.go.html#892605">b</a></span><span class="op" id="892640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892643">if</span>&nbsp;<span class="ident" id="892646"><a href="/runtime/hash_test.go.html#892622">k</a></span>&nbsp;<span class="op" id="892648">==</span>&nbsp;<span class="num" id="892651">0</span>&nbsp;<span class="op" id="892653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892657">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892665">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892668">for</span>&nbsp;<span class="ident" id="892672">j</span>&nbsp;<span class="op" id="892674">:=</span>&nbsp;<span class="ident" id="892677"><a href="/runtime/hash_test.go.html#892615">i</a></span><span class="op" id="892678">;</span>&nbsp;<span class="ident" id="892680"><a href="/runtime/hash_test.go.html#892672">j</a></span>&nbsp;<span class="op" id="892682">&lt;</span>&nbsp;<span class="builtinfunc" id="892684">len</span><span class="op" id="892687">(</span><span class="ident" id="892688"><a href="/runtime/hash_test.go.html#892605">b</a></span><span class="op" id="892689">)</span><span class="op" id="892690">*</span><span class="num" id="892691">8</span><span class="op" id="892692">;</span>&nbsp;<span class="ident" id="892694"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892695">++</span>&nbsp;<span class="op" id="892698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892702"><a href="/runtime/hash_test.go.html#892605">b</a></span><span class="op" id="892703">[</span><span class="ident" id="892704"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892705">/</span><span class="num" id="892706">8</span><span class="op" id="892707">]</span>&nbsp;<span class="op" id="892709">|=</span>&nbsp;<span class="builtintype" id="892712">byte</span><span class="op" id="892716">(</span><span class="num" id="892717">1</span>&nbsp;<span class="op" id="892719">&lt;&lt;</span>&nbsp;<span class="builtintype" id="892722">uint</span><span class="op" id="892726">(</span><span class="ident" id="892727"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892728">&amp;</span><span class="num" id="892729">7</span><span class="op" id="892730">)</span><span class="op" id="892731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892735"><a href="/runtime/hash_test.go.html#892585">setbits</a></span><span class="op" id="892742">(</span><span class="ident" id="892743"><a href="/runtime/hash_test.go.html#892593">h</a></span><span class="op" id="892744">,</span>&nbsp;<span class="ident" id="892746"><a href="/runtime/hash_test.go.html#892605">b</a></span><span class="op" id="892747">,</span>&nbsp;<span class="ident" id="892749"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892750">+</span><span class="num" id="892751">1</span><span class="op" id="892752">,</span>&nbsp;<span class="ident" id="892754"><a href="/runtime/hash_test.go.html#892622">k</a></span><span class="op" id="892755">-</span><span class="num" id="892756">1</span><span class="op" id="892757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892761"><a href="/runtime/hash_test.go.html#892605">b</a></span><span class="op" id="892762">[</span><span class="ident" id="892763"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892764">/</span><span class="num" id="892765">8</span><span class="op" id="892766">]</span>&nbsp;<span class="op" id="892768">&amp;=</span>&nbsp;<span class="builtintype" id="892771">byte</span><span class="op" id="892775">(</span><span class="op" id="892776">^</span><span class="op" id="892777">(</span><span class="num" id="892778">1</span>&nbsp;<span class="op" id="892780">&lt;&lt;</span>&nbsp;<span class="builtintype" id="892783">uint</span><span class="op" id="892787">(</span><span class="ident" id="892788"><a href="/runtime/hash_test.go.html#892672">j</a></span><span class="op" id="892789">&amp;</span><span class="num" id="892790">7</span><span class="op" id="892791">)</span><span class="op" id="892792">)</span><span class="op" id="892793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="892796">}</span><br>
<span class="lineno">230</span><span class="op" id="892798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="892801">//&nbsp;Test&nbsp;all&nbsp;possible&nbsp;combinations&nbsp;of&nbsp;n&nbsp;blocks&nbsp;from&nbsp;the&nbsp;set&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="892863">//&nbsp;&#34;permutation&#34;&nbsp;is&nbsp;a&nbsp;bad&nbsp;name&nbsp;here,&nbsp;but&nbsp;it&nbsp;is&nbsp;what&nbsp;Smhasher&nbsp;uses.</span><br>
<span class="lineno"></span><span class="keyword" id="892930">func</span>&nbsp;<span class="ident" id="892935">TestSmhasherPermutation</span><span class="op" id="892958">(</span><span class="ident" id="892959">t</span>&nbsp;<span class="op" id="892961">*</span><span class="ident" id="892962"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="892969">.</span><span class="ident" id="892970">T</span><span class="op" id="892971">)</span>&nbsp;<span class="op" id="892973">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="892976">if</span>&nbsp;<span class="ident" id="892979"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="892986">.</span><span class="ident" id="892987">Short</span><span class="op" id="892992">(</span><span class="op" id="892993">)</span>&nbsp;<span class="op" id="892995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="892999"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893000">.</span><span class="ident" id="893001">Skip</span><span class="op" id="893005">(</span><span class="string" id="893006">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="893030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="893033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="893036">if</span>&nbsp;<span class="op" id="893039">!</span><span class="ident" id="893040"><a href="/runtime/export_test.go.html#7719302">HaveGoodHash</a></span><span class="op" id="893052">(</span><span class="op" id="893053">)</span>&nbsp;<span class="op" id="893055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893059"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893060">.</span><span class="ident" id="893061">Skip</span><span class="op" id="893065">(</span><span class="string" id="893066">&#34;fallback&nbsp;hash&nbsp;not&nbsp;good&nbsp;enough&nbsp;for&nbsp;this&nbsp;test&#34;</span><span class="op" id="893111">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="893114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893117"><a href="/runtime/hash_test.go.html#893465">permutation</a></span><span class="op" id="893128">(</span><span class="ident" id="893129"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893130">,</span>&nbsp;<span class="op" id="893132">[</span><span class="op" id="893133">]</span><span class="builtintype" id="893134">uint32</span><span class="op" id="893140">{</span><span class="num" id="893141">0</span><span class="op" id="893142">,</span>&nbsp;<span class="num" id="893144">1</span><span class="op" id="893145">,</span>&nbsp;<span class="num" id="893147">2</span><span class="op" id="893148">,</span>&nbsp;<span class="num" id="893150">3</span><span class="op" id="893151">,</span>&nbsp;<span class="num" id="893153">4</span><span class="op" id="893154">,</span>&nbsp;<span class="num" id="893156">5</span><span class="op" id="893157">,</span>&nbsp;<span class="num" id="893159">6</span><span class="op" id="893160">,</span>&nbsp;<span class="num" id="893162">7</span><span class="op" id="893163">}</span><span class="op" id="893164">,</span>&nbsp;<span class="num" id="893166">8</span><span class="op" id="893167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893170"><a href="/runtime/hash_test.go.html#893465">permutation</a></span><span class="op" id="893181">(</span><span class="ident" id="893182"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893183">,</span>&nbsp;<span class="op" id="893185">[</span><span class="op" id="893186">]</span><span class="builtintype" id="893187">uint32</span><span class="op" id="893193">{</span><span class="num" id="893194">0</span><span class="op" id="893195">,</span>&nbsp;<span class="num" id="893197">1</span>&nbsp;<span class="op" id="893199">&lt;&lt;</span>&nbsp;<span class="num" id="893202">29</span><span class="op" id="893204">,</span>&nbsp;<span class="num" id="893206">2</span>&nbsp;<span class="op" id="893208">&lt;&lt;</span>&nbsp;<span class="num" id="893211">29</span><span class="op" id="893213">,</span>&nbsp;<span class="num" id="893215">3</span>&nbsp;<span class="op" id="893217">&lt;&lt;</span>&nbsp;<span class="num" id="893220">29</span><span class="op" id="893222">,</span>&nbsp;<span class="num" id="893224">4</span>&nbsp;<span class="op" id="893226">&lt;&lt;</span>&nbsp;<span class="num" id="893229">29</span><span class="op" id="893231">,</span>&nbsp;<span class="num" id="893233">5</span>&nbsp;<span class="op" id="893235">&lt;&lt;</span>&nbsp;<span class="num" id="893238">29</span><span class="op" id="893240">,</span>&nbsp;<span class="num" id="893242">6</span>&nbsp;<span class="op" id="893244">&lt;&lt;</span>&nbsp;<span class="num" id="893247">29</span><span class="op" id="893249">,</span>&nbsp;<span class="num" id="893251">7</span>&nbsp;<span class="op" id="893253">&lt;&lt;</span>&nbsp;<span class="num" id="893256">29</span><span class="op" id="893258">}</span><span class="op" id="893259">,</span>&nbsp;<span class="num" id="893261">8</span><span class="op" id="893262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893265"><a href="/runtime/hash_test.go.html#893465">permutation</a></span><span class="op" id="893276">(</span><span class="ident" id="893277"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893278">,</span>&nbsp;<span class="op" id="893280">[</span><span class="op" id="893281">]</span><span class="builtintype" id="893282">uint32</span><span class="op" id="893288">{</span><span class="num" id="893289">0</span><span class="op" id="893290">,</span>&nbsp;<span class="num" id="893292">1</span><span class="op" id="893293">}</span><span class="op" id="893294">,</span>&nbsp;<span class="num" id="893296">20</span><span class="op" id="893298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893301"><a href="/runtime/hash_test.go.html#893465">permutation</a></span><span class="op" id="893312">(</span><span class="ident" id="893313"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893314">,</span>&nbsp;<span class="op" id="893316">[</span><span class="op" id="893317">]</span><span class="builtintype" id="893318">uint32</span><span class="op" id="893324">{</span><span class="num" id="893325">0</span><span class="op" id="893326">,</span>&nbsp;<span class="num" id="893328">1</span>&nbsp;<span class="op" id="893330">&lt;&lt;</span>&nbsp;<span class="num" id="893333">31</span><span class="op" id="893335">}</span><span class="op" id="893336">,</span>&nbsp;<span class="num" id="893338">20</span><span class="op" id="893340">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893343"><a href="/runtime/hash_test.go.html#893465">permutation</a></span><span class="op" id="893354">(</span><span class="ident" id="893355"><a href="/runtime/hash_test.go.html#892959">t</a></span><span class="op" id="893356">,</span>&nbsp;<span class="op" id="893358">[</span><span class="op" id="893359">]</span><span class="builtintype" id="893360">uint32</span><span class="op" id="893366">{</span><span class="num" id="893367">0</span><span class="op" id="893368">,</span>&nbsp;<span class="num" id="893370">1</span><span class="op" id="893371">,</span>&nbsp;<span class="num" id="893373">2</span><span class="op" id="893374">,</span>&nbsp;<span class="num" id="893376">3</span><span class="op" id="893377">,</span>&nbsp;<span class="num" id="893379">4</span><span class="op" id="893380">,</span>&nbsp;<span class="num" id="893382">5</span><span class="op" id="893383">,</span>&nbsp;<span class="num" id="893385">6</span><span class="op" id="893386">,</span>&nbsp;<span class="num" id="893388">7</span><span class="op" id="893389">,</span>&nbsp;<span class="num" id="893391">1</span>&nbsp;<span class="op" id="893393">&lt;&lt;</span>&nbsp;<span class="num" id="893396">29</span><span class="op" id="893398">,</span>&nbsp;<span class="num" id="893400">2</span>&nbsp;<span class="op" id="893402">&lt;&lt;</span>&nbsp;<span class="num" id="893405">29</span><span class="op" id="893407">,</span>&nbsp;<span class="num" id="893409">3</span>&nbsp;<span class="op" id="893411">&lt;&lt;</span>&nbsp;<span class="num" id="893414">29</span><span class="op" id="893416">,</span>&nbsp;<span class="num" id="893418">4</span>&nbsp;<span class="op" id="893420">&lt;&lt;</span>&nbsp;<span class="num" id="893423">29</span><span class="op" id="893425">,</span>&nbsp;<span class="num" id="893427">5</span>&nbsp;<span class="op" id="893429">&lt;&lt;</span>&nbsp;<span class="num" id="893432">29</span><span class="op" id="893434">,</span>&nbsp;<span class="num" id="893436">6</span>&nbsp;<span class="op" id="893438">&lt;&lt;</span>&nbsp;<span class="num" id="893441">29</span><span class="op" id="893443">,</span>&nbsp;<span class="num" id="893445">7</span>&nbsp;<span class="op" id="893447">&lt;&lt;</span>&nbsp;<span class="num" id="893450">29</span><span class="op" id="893452">}</span><span class="op" id="893453">,</span>&nbsp;<span class="num" id="893455">6</span><span class="op" id="893456">)</span><br>
<span class="lineno"></span><span class="op" id="893458">}</span><br>
<span class="lineno"></span><span class="keyword" id="893460">func</span>&nbsp;<span class="ident" id="893465">permutation</span><span class="op" id="893476">(</span><span class="ident" id="893477">t</span>&nbsp;<span class="op" id="893479">*</span><span class="ident" id="893480"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="893487">.</span><span class="ident" id="893488">T</span><span class="op" id="893489">,</span>&nbsp;<span class="ident" id="893491">s</span>&nbsp;<span class="op" id="893493">[</span><span class="op" id="893494">]</span><span class="builtintype" id="893495">uint32</span><span class="op" id="893501">,</span>&nbsp;<span class="ident" id="893503">n</span>&nbsp;<span class="builtintype" id="893505">int</span><span class="op" id="893508">)</span>&nbsp;<span class="op" id="893510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893513">b</span>&nbsp;<span class="op" id="893515">:=</span>&nbsp;<span class="builtinfunc" id="893518">make</span><span class="op" id="893522">(</span><span class="op" id="893523">[</span><span class="op" id="893524">]</span><span class="builtintype" id="893525">byte</span><span class="op" id="893529">,</span>&nbsp;<span class="ident" id="893531"><a href="/runtime/hash_test.go.html#893503">n</a></span><span class="op" id="893532">*</span><span class="num" id="893533">4</span><span class="op" id="893534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893537">h</span>&nbsp;<span class="op" id="893539">:=</span>&nbsp;<span class="ident" id="893542"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="893552">(</span><span class="op" id="893553">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893556"><a href="/runtime/hash_test.go.html#893595">genPerm</a></span><span class="op" id="893563">(</span><span class="ident" id="893564"><a href="/runtime/hash_test.go.html#893537">h</a></span><span class="op" id="893565">,</span>&nbsp;<span class="ident" id="893567"><a href="/runtime/hash_test.go.html#893513">b</a></span><span class="op" id="893568">,</span>&nbsp;<span class="ident" id="893570"><a href="/runtime/hash_test.go.html#893491">s</a></span><span class="op" id="893571">,</span>&nbsp;<span class="num" id="893573">0</span><span class="op" id="893574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893577"><a href="/runtime/hash_test.go.html#893537">h</a></span><span class="op" id="893578">.</span><span class="ident" id="893579">check</span><span class="op" id="893584">(</span><span class="ident" id="893585"><a href="/runtime/hash_test.go.html#893477">t</a></span><span class="op" id="893586">)</span><br>
<span class="lineno"></span><span class="op" id="893588">}</span><br>
<span class="lineno"></span><span class="keyword" id="893590">func</span>&nbsp;<span class="ident" id="893595">genPerm</span><span class="op" id="893602">(</span><span class="ident" id="893603">h</span>&nbsp;<span class="op" id="893605">*</span><span class="ident" id="893606"><a href="/runtime/hash_test.go.html#889003">HashSet</a></span><span class="op" id="893613">,</span>&nbsp;<span class="ident" id="893615">b</span>&nbsp;<span class="op" id="893617">[</span><span class="op" id="893618">]</span><span class="builtintype" id="893619">byte</span><span class="op" id="893623">,</span>&nbsp;<span class="ident" id="893625">s</span>&nbsp;<span class="op" id="893627">[</span><span class="op" id="893628">]</span><span class="builtintype" id="893629">uint32</span><span class="op" id="893635">,</span>&nbsp;<span class="ident" id="893637">n</span>&nbsp;<span class="builtintype" id="893639">int</span><span class="op" id="893642">)</span>&nbsp;<span class="op" id="893644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893647"><a href="/runtime/hash_test.go.html#893603">h</a></span><span class="op" id="893648">.</span><span class="ident" id="893649">addB</span><span class="op" id="893653">(</span><span class="ident" id="893654"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893655">[</span><span class="op" id="893656">:</span><span class="ident" id="893657"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893658">]</span><span class="op" id="893659">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="893662">if</span>&nbsp;<span class="ident" id="893665"><a href="/runtime/hash_test.go.html#893637">n</a></span>&nbsp;<span class="op" id="893667">==</span>&nbsp;<span class="builtinfunc" id="893670">len</span><span class="op" id="893673">(</span><span class="ident" id="893674"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893675">)</span>&nbsp;<span class="op" id="893677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="893681">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="893689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="893692">for</span>&nbsp;<span class="ident" id="893696">_</span><span class="op" id="893697">,</span>&nbsp;<span class="ident" id="893699">v</span>&nbsp;<span class="op" id="893701">:=</span>&nbsp;<span class="keyword" id="893704">range</span>&nbsp;<span class="ident" id="893710"><a href="/runtime/hash_test.go.html#893625">s</a></span>&nbsp;<span class="op" id="893712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893716"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893717">[</span><span class="ident" id="893718"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893719">]</span>&nbsp;<span class="op" id="893721">=</span>&nbsp;<span class="builtintype" id="893723">byte</span><span class="op" id="893727">(</span><span class="ident" id="893728"><a href="/runtime/hash_test.go.html#893699">v</a></span><span class="op" id="893729">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893733"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893734">[</span><span class="ident" id="893735"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893736">+</span><span class="num" id="893737">1</span><span class="op" id="893738">]</span>&nbsp;<span class="op" id="893740">=</span>&nbsp;<span class="builtintype" id="893742">byte</span><span class="op" id="893746">(</span><span class="ident" id="893747"><a href="/runtime/hash_test.go.html#893699">v</a></span>&nbsp;<span class="op" id="893749">&gt;&gt;</span>&nbsp;<span class="num" id="893752">8</span><span class="op" id="893753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893757"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893758">[</span><span class="ident" id="893759"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893760">+</span><span class="num" id="893761">2</span><span class="op" id="893762">]</span>&nbsp;<span class="op" id="893764">=</span>&nbsp;<span class="builtintype" id="893766">byte</span><span class="op" id="893770">(</span><span class="ident" id="893771"><a href="/runtime/hash_test.go.html#893699">v</a></span>&nbsp;<span class="op" id="893773">&gt;&gt;</span>&nbsp;<span class="num" id="893776">16</span><span class="op" id="893778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893782"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893783">[</span><span class="ident" id="893784"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893785">+</span><span class="num" id="893786">3</span><span class="op" id="893787">]</span>&nbsp;<span class="op" id="893789">=</span>&nbsp;<span class="builtintype" id="893791">byte</span><span class="op" id="893795">(</span><span class="ident" id="893796"><a href="/runtime/hash_test.go.html#893699">v</a></span>&nbsp;<span class="op" id="893798">&gt;&gt;</span>&nbsp;<span class="num" id="893801">24</span><span class="op" id="893803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893807"><a href="/runtime/hash_test.go.html#893595">genPerm</a></span><span class="op" id="893814">(</span><span class="ident" id="893815"><a href="/runtime/hash_test.go.html#893603">h</a></span><span class="op" id="893816">,</span>&nbsp;<span class="ident" id="893818"><a href="/runtime/hash_test.go.html#893615">b</a></span><span class="op" id="893819">,</span>&nbsp;<span class="ident" id="893821"><a href="/runtime/hash_test.go.html#893625">s</a></span><span class="op" id="893822">,</span>&nbsp;<span class="ident" id="893824"><a href="/runtime/hash_test.go.html#893637">n</a></span><span class="op" id="893825">+</span><span class="num" id="893826">4</span><span class="op" id="893827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="893830">}</span><br>
<span class="lineno">265</span><span class="op" id="893832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="893835">type</span>&nbsp;<span class="ident" id="893840">Key</span>&nbsp;<span class="keyword" id="893844">interface</span>&nbsp;<span class="op" id="893854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893857">clear</span><span class="op" id="893862">(</span><span class="op" id="893863">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="893878">//&nbsp;set&nbsp;bits&nbsp;all&nbsp;to&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893900">random</span><span class="op" id="893906">(</span><span class="ident" id="893907">r</span>&nbsp;<span class="op" id="893909">*</span><span class="ident" id="893910"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="893914">.</span><span class="ident" id="893915">Rand</span><span class="op" id="893919">)</span>&nbsp;<span class="comment" id="893921">//&nbsp;set&nbsp;key&nbsp;to&nbsp;something&nbsp;random</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="893953">bits</span><span class="op" id="893957">(</span><span class="op" id="893958">)</span>&nbsp;<span class="builtintype" id="893960">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="893974">//&nbsp;how&nbsp;many&nbsp;bits&nbsp;key&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894000">flipBit</span><span class="op" id="894007">(</span><span class="ident" id="894008">i</span>&nbsp;<span class="builtintype" id="894010">int</span><span class="op" id="894013">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="894021">//&nbsp;flip&nbsp;bit&nbsp;i&nbsp;of&nbsp;the&nbsp;key</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894047">hash</span><span class="op" id="894051">(</span><span class="op" id="894052">)</span>&nbsp;<span class="builtintype" id="894054">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="894068">//&nbsp;hash&nbsp;the&nbsp;key</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894085">name</span><span class="op" id="894089">(</span><span class="op" id="894090">)</span>&nbsp;<span class="builtintype" id="894092">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="894106">//&nbsp;for&nbsp;error&nbsp;reporting</span><br>
<span class="lineno"></span><span class="op" id="894129">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="894132">type</span>&nbsp;<span class="ident" id="894137">BytesKey</span>&nbsp;<span class="keyword" id="894146">struct</span>&nbsp;<span class="op" id="894153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894156">b</span>&nbsp;<span class="op" id="894158">[</span><span class="op" id="894159">]</span><span class="builtintype" id="894160">byte</span><br>
<span class="lineno"></span><span class="op" id="894165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="894168">func</span>&nbsp;<span class="op" id="894173">(</span><span class="ident" id="894174">k</span>&nbsp;<span class="op" id="894176">*</span><span class="ident" id="894177"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894185">)</span>&nbsp;<span class="ident" id="894187">clear</span><span class="op" id="894192">(</span><span class="op" id="894193">)</span>&nbsp;<span class="op" id="894195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894198">for</span>&nbsp;<span class="ident" id="894202">i</span>&nbsp;<span class="op" id="894204">:=</span>&nbsp;<span class="keyword" id="894207">range</span>&nbsp;<span class="ident" id="894213"><a href="/runtime/hash_test.go.html#894174">k</a></span><span class="op" id="894214">.</span><span class="ident" id="894215">b</span>&nbsp;<span class="op" id="894217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894221"><a href="/runtime/hash_test.go.html#894174">k</a></span><span class="op" id="894222">.</span><span class="ident" id="894223">b</span><span class="op" id="894224">[</span><span class="ident" id="894225"><a href="/runtime/hash_test.go.html#894202">i</a></span><span class="op" id="894226">]</span>&nbsp;<span class="op" id="894228">=</span>&nbsp;<span class="num" id="894230">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="894233">}</span><br>
<span class="lineno"></span><span class="op" id="894235">}</span><br>
<span class="lineno">285</span><span class="keyword" id="894237">func</span>&nbsp;<span class="op" id="894242">(</span><span class="ident" id="894243">k</span>&nbsp;<span class="op" id="894245">*</span><span class="ident" id="894246"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894254">)</span>&nbsp;<span class="ident" id="894256">random</span><span class="op" id="894262">(</span><span class="ident" id="894263">r</span>&nbsp;<span class="op" id="894265">*</span><span class="ident" id="894266"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="894270">.</span><span class="ident" id="894271">Rand</span><span class="op" id="894275">)</span>&nbsp;<span class="op" id="894277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894280"><a href="/runtime/hash_test.go.html#900150">randBytes</a></span><span class="op" id="894289">(</span><span class="ident" id="894290"><a href="/runtime/hash_test.go.html#894263">r</a></span><span class="op" id="894291">,</span>&nbsp;<span class="ident" id="894293"><a href="/runtime/hash_test.go.html#894243">k</a></span><span class="op" id="894294">.</span><span class="ident" id="894295">b</span><span class="op" id="894296">)</span><br>
<span class="lineno"></span><span class="op" id="894298">}</span><br>
<span class="lineno"></span><span class="keyword" id="894300">func</span>&nbsp;<span class="op" id="894305">(</span><span class="ident" id="894306">k</span>&nbsp;<span class="op" id="894308">*</span><span class="ident" id="894309"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894317">)</span>&nbsp;<span class="ident" id="894319">bits</span><span class="op" id="894323">(</span><span class="op" id="894324">)</span>&nbsp;<span class="builtintype" id="894326">int</span>&nbsp;<span class="op" id="894330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894333">return</span>&nbsp;<span class="builtinfunc" id="894340">len</span><span class="op" id="894343">(</span><span class="ident" id="894344"><a href="/runtime/hash_test.go.html#894306">k</a></span><span class="op" id="894345">.</span><span class="ident" id="894346">b</span><span class="op" id="894347">)</span>&nbsp;<span class="op" id="894349">*</span>&nbsp;<span class="num" id="894351">8</span><br>
<span class="lineno">290</span><span class="op" id="894353">}</span><br>
<span class="lineno"></span><span class="keyword" id="894355">func</span>&nbsp;<span class="op" id="894360">(</span><span class="ident" id="894361">k</span>&nbsp;<span class="op" id="894363">*</span><span class="ident" id="894364"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894372">)</span>&nbsp;<span class="ident" id="894374">flipBit</span><span class="op" id="894381">(</span><span class="ident" id="894382">i</span>&nbsp;<span class="builtintype" id="894384">int</span><span class="op" id="894387">)</span>&nbsp;<span class="op" id="894389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894392"><a href="/runtime/hash_test.go.html#894361">k</a></span><span class="op" id="894393">.</span><span class="ident" id="894394">b</span><span class="op" id="894395">[</span><span class="ident" id="894396"><a href="/runtime/hash_test.go.html#894382">i</a></span><span class="op" id="894397">&gt;&gt;</span><span class="num" id="894399">3</span><span class="op" id="894400">]</span>&nbsp;<span class="op" id="894402">^=</span>&nbsp;<span class="builtintype" id="894405">byte</span><span class="op" id="894409">(</span><span class="num" id="894410">1</span>&nbsp;<span class="op" id="894412">&lt;&lt;</span>&nbsp;<span class="builtintype" id="894415">uint</span><span class="op" id="894419">(</span><span class="ident" id="894420"><a href="/runtime/hash_test.go.html#894382">i</a></span><span class="op" id="894421">&amp;</span><span class="num" id="894422">7</span><span class="op" id="894423">)</span><span class="op" id="894424">)</span><br>
<span class="lineno"></span><span class="op" id="894426">}</span><br>
<span class="lineno"></span><span class="keyword" id="894428">func</span>&nbsp;<span class="op" id="894433">(</span><span class="ident" id="894434">k</span>&nbsp;<span class="op" id="894436">*</span><span class="ident" id="894437"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894445">)</span>&nbsp;<span class="ident" id="894447">hash</span><span class="op" id="894451">(</span><span class="op" id="894452">)</span>&nbsp;<span class="builtintype" id="894454">uintptr</span>&nbsp;<span class="op" id="894462">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894465">return</span>&nbsp;<span class="ident" id="894472"><a href="/runtime/export_test.go.html#7719362">BytesHash</a></span><span class="op" id="894481">(</span><span class="ident" id="894482"><a href="/runtime/hash_test.go.html#894434">k</a></span><span class="op" id="894483">.</span><span class="ident" id="894484">b</span><span class="op" id="894485">,</span>&nbsp;<span class="num" id="894487">0</span><span class="op" id="894488">)</span><br>
<span class="lineno"></span><span class="op" id="894490">}</span><br>
<span class="lineno"></span><span class="keyword" id="894492">func</span>&nbsp;<span class="op" id="894497">(</span><span class="ident" id="894498">k</span>&nbsp;<span class="op" id="894500">*</span><span class="ident" id="894501"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="894509">)</span>&nbsp;<span class="ident" id="894511">name</span><span class="op" id="894515">(</span><span class="op" id="894516">)</span>&nbsp;<span class="builtintype" id="894518">string</span>&nbsp;<span class="op" id="894525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894528">return</span>&nbsp;<span class="ident" id="894535"><a href="/runtime/hash_test.go.html#887943">fmt</a></span><span class="op" id="894538">.</span><span class="ident" id="894539">Sprintf</span><span class="op" id="894546">(</span><span class="string" id="894547">&#34;bytes%d&#34;</span><span class="op" id="894556">,</span>&nbsp;<span class="builtinfunc" id="894558">len</span><span class="op" id="894561">(</span><span class="ident" id="894562"><a href="/runtime/hash_test.go.html#894498">k</a></span><span class="op" id="894563">.</span><span class="ident" id="894564">b</span><span class="op" id="894565">)</span><span class="op" id="894566">)</span><br>
<span class="lineno"></span><span class="op" id="894568">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="keyword" id="894571">type</span>&nbsp;<span class="ident" id="894576">Int32Key</span>&nbsp;<span class="keyword" id="894585">struct</span>&nbsp;<span class="op" id="894592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894595">i</span>&nbsp;<span class="builtintype" id="894597">uint32</span><br>
<span class="lineno"></span><span class="op" id="894604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="894607">func</span>&nbsp;<span class="op" id="894612">(</span><span class="ident" id="894613">k</span>&nbsp;<span class="op" id="894615">*</span><span class="ident" id="894616"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894624">)</span>&nbsp;<span class="ident" id="894626">clear</span><span class="op" id="894631">(</span><span class="op" id="894632">)</span>&nbsp;<span class="op" id="894634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894637"><a href="/runtime/hash_test.go.html#894613">k</a></span><span class="op" id="894638">.</span><span class="ident" id="894639">i</span>&nbsp;<span class="op" id="894641">=</span>&nbsp;<span class="num" id="894643">0</span><br>
<span class="lineno"></span><span class="op" id="894645">}</span><br>
<span class="lineno"></span><span class="keyword" id="894647">func</span>&nbsp;<span class="op" id="894652">(</span><span class="ident" id="894653">k</span>&nbsp;<span class="op" id="894655">*</span><span class="ident" id="894656"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894664">)</span>&nbsp;<span class="ident" id="894666">random</span><span class="op" id="894672">(</span><span class="ident" id="894673">r</span>&nbsp;<span class="op" id="894675">*</span><span class="ident" id="894676"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="894680">.</span><span class="ident" id="894681">Rand</span><span class="op" id="894685">)</span>&nbsp;<span class="op" id="894687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894690"><a href="/runtime/hash_test.go.html#894653">k</a></span><span class="op" id="894691">.</span><span class="ident" id="894692">i</span>&nbsp;<span class="op" id="894694">=</span>&nbsp;<span class="ident" id="894696"><a href="/runtime/hash_test.go.html#894673">r</a></span><span class="op" id="894697">.</span><span class="ident" id="894698">Uint32</span><span class="op" id="894704">(</span><span class="op" id="894705">)</span><br>
<span class="lineno">310</span><span class="op" id="894707">}</span><br>
<span class="lineno"></span><span class="keyword" id="894709">func</span>&nbsp;<span class="op" id="894714">(</span><span class="ident" id="894715">k</span>&nbsp;<span class="op" id="894717">*</span><span class="ident" id="894718"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894726">)</span>&nbsp;<span class="ident" id="894728">bits</span><span class="op" id="894732">(</span><span class="op" id="894733">)</span>&nbsp;<span class="builtintype" id="894735">int</span>&nbsp;<span class="op" id="894739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894742">return</span>&nbsp;<span class="num" id="894749">32</span><br>
<span class="lineno"></span><span class="op" id="894752">}</span><br>
<span class="lineno"></span><span class="keyword" id="894754">func</span>&nbsp;<span class="op" id="894759">(</span><span class="ident" id="894760">k</span>&nbsp;<span class="op" id="894762">*</span><span class="ident" id="894763"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894771">)</span>&nbsp;<span class="ident" id="894773">flipBit</span><span class="op" id="894780">(</span><span class="ident" id="894781">i</span>&nbsp;<span class="builtintype" id="894783">int</span><span class="op" id="894786">)</span>&nbsp;<span class="op" id="894788">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894791"><a href="/runtime/hash_test.go.html#894760">k</a></span><span class="op" id="894792">.</span><span class="ident" id="894793">i</span>&nbsp;<span class="op" id="894795">^=</span>&nbsp;<span class="num" id="894798">1</span>&nbsp;<span class="op" id="894800">&lt;&lt;</span>&nbsp;<span class="builtintype" id="894803">uint</span><span class="op" id="894807">(</span><span class="ident" id="894808"><a href="/runtime/hash_test.go.html#894781">i</a></span><span class="op" id="894809">)</span><br>
<span class="lineno"></span><span class="op" id="894811">}</span><br>
<span class="lineno"></span><span class="keyword" id="894813">func</span>&nbsp;<span class="op" id="894818">(</span><span class="ident" id="894819">k</span>&nbsp;<span class="op" id="894821">*</span><span class="ident" id="894822"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894830">)</span>&nbsp;<span class="ident" id="894832">hash</span><span class="op" id="894836">(</span><span class="op" id="894837">)</span>&nbsp;<span class="builtintype" id="894839">uintptr</span>&nbsp;<span class="op" id="894847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894850">return</span>&nbsp;<span class="ident" id="894857"><a href="/runtime/export_test.go.html#7719388">Int32Hash</a></span><span class="op" id="894866">(</span><span class="ident" id="894867"><a href="/runtime/hash_test.go.html#894819">k</a></span><span class="op" id="894868">.</span><span class="ident" id="894869">i</span><span class="op" id="894870">,</span>&nbsp;<span class="num" id="894872">0</span><span class="op" id="894873">)</span><br>
<span class="lineno"></span><span class="op" id="894875">}</span><br>
<span class="lineno">320</span><span class="keyword" id="894877">func</span>&nbsp;<span class="op" id="894882">(</span><span class="ident" id="894883">k</span>&nbsp;<span class="op" id="894885">*</span><span class="ident" id="894886"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="894894">)</span>&nbsp;<span class="ident" id="894896">name</span><span class="op" id="894900">(</span><span class="op" id="894901">)</span>&nbsp;<span class="builtintype" id="894903">string</span>&nbsp;<span class="op" id="894910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="894913">return</span>&nbsp;<span class="string" id="894920">&#34;int32&#34;</span><br>
<span class="lineno"></span><span class="op" id="894928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="894931">type</span>&nbsp;<span class="ident" id="894936">Int64Key</span>&nbsp;<span class="keyword" id="894945">struct</span>&nbsp;<span class="op" id="894952">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894955">i</span>&nbsp;<span class="ident" id="894957">uint64</span><br>
<span class="lineno"></span><span class="op" id="894964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="894967">func</span>&nbsp;<span class="op" id="894972">(</span><span class="ident" id="894973">k</span>&nbsp;<span class="op" id="894975">*</span><span class="ident" id="894976"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="894984">)</span>&nbsp;<span class="ident" id="894986">clear</span><span class="op" id="894991">(</span><span class="op" id="894992">)</span>&nbsp;<span class="op" id="894994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="894997"><a href="/runtime/hash_test.go.html#894973">k</a></span><span class="op" id="894998">.</span><span class="ident" id="894999">i</span>&nbsp;<span class="op" id="895001">=</span>&nbsp;<span class="num" id="895003">0</span><br>
<span class="lineno">330</span><span class="op" id="895005">}</span><br>
<span class="lineno"></span><span class="keyword" id="895007">func</span>&nbsp;<span class="op" id="895012">(</span><span class="ident" id="895013">k</span>&nbsp;<span class="op" id="895015">*</span><span class="ident" id="895016"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="895024">)</span>&nbsp;<span class="ident" id="895026">random</span><span class="op" id="895032">(</span><span class="ident" id="895033">r</span>&nbsp;<span class="op" id="895035">*</span><span class="ident" id="895036"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="895040">.</span><span class="ident" id="895041">Rand</span><span class="op" id="895045">)</span>&nbsp;<span class="op" id="895047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895050"><a href="/runtime/hash_test.go.html#895013">k</a></span><span class="op" id="895051">.</span><span class="ident" id="895052">i</span>&nbsp;<span class="op" id="895054">=</span>&nbsp;<span class="ident" id="895056">uint64</span><span class="op" id="895062">(</span><span class="ident" id="895063"><a href="/runtime/hash_test.go.html#895033">r</a></span><span class="op" id="895064">.</span><span class="ident" id="895065">Uint32</span><span class="op" id="895071">(</span><span class="op" id="895072">)</span><span class="op" id="895073">)</span>&nbsp;<span class="op" id="895075">+</span>&nbsp;<span class="ident" id="895077">uint64</span><span class="op" id="895083">(</span><span class="ident" id="895084"><a href="/runtime/hash_test.go.html#895033">r</a></span><span class="op" id="895085">.</span><span class="ident" id="895086">Uint32</span><span class="op" id="895092">(</span><span class="op" id="895093">)</span><span class="op" id="895094">)</span><span class="op" id="895095">&lt;&lt;</span><span class="num" id="895097">32</span><br>
<span class="lineno"></span><span class="op" id="895100">}</span><br>
<span class="lineno"></span><span class="keyword" id="895102">func</span>&nbsp;<span class="op" id="895107">(</span><span class="ident" id="895108">k</span>&nbsp;<span class="op" id="895110">*</span><span class="ident" id="895111"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="895119">)</span>&nbsp;<span class="ident" id="895121">bits</span><span class="op" id="895125">(</span><span class="op" id="895126">)</span>&nbsp;<span class="builtintype" id="895128">int</span>&nbsp;<span class="op" id="895132">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895135">return</span>&nbsp;<span class="num" id="895142">64</span><br>
<span class="lineno"></span><span class="op" id="895145">}</span><br>
<span class="lineno"></span><span class="keyword" id="895147">func</span>&nbsp;<span class="op" id="895152">(</span><span class="ident" id="895153">k</span>&nbsp;<span class="op" id="895155">*</span><span class="ident" id="895156"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="895164">)</span>&nbsp;<span class="ident" id="895166">flipBit</span><span class="op" id="895173">(</span><span class="ident" id="895174">i</span>&nbsp;<span class="builtintype" id="895176">int</span><span class="op" id="895179">)</span>&nbsp;<span class="op" id="895181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895184"><a href="/runtime/hash_test.go.html#895153">k</a></span><span class="op" id="895185">.</span><span class="ident" id="895186">i</span>&nbsp;<span class="op" id="895188">^=</span>&nbsp;<span class="num" id="895191">1</span>&nbsp;<span class="op" id="895193">&lt;&lt;</span>&nbsp;<span class="builtintype" id="895196">uint</span><span class="op" id="895200">(</span><span class="ident" id="895201"><a href="/runtime/hash_test.go.html#895174">i</a></span><span class="op" id="895202">)</span><br>
<span class="lineno"></span><span class="op" id="895204">}</span><br>
<span class="lineno">340</span><span class="keyword" id="895206">func</span>&nbsp;<span class="op" id="895211">(</span><span class="ident" id="895212">k</span>&nbsp;<span class="op" id="895214">*</span><span class="ident" id="895215"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="895223">)</span>&nbsp;<span class="ident" id="895225">hash</span><span class="op" id="895229">(</span><span class="op" id="895230">)</span>&nbsp;<span class="builtintype" id="895232">uintptr</span>&nbsp;<span class="op" id="895240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895243">return</span>&nbsp;<span class="ident" id="895250"><a href="/runtime/export_test.go.html#7719414">Int64Hash</a></span><span class="op" id="895259">(</span><span class="ident" id="895260"><a href="/runtime/hash_test.go.html#895212">k</a></span><span class="op" id="895261">.</span><span class="ident" id="895262">i</span><span class="op" id="895263">,</span>&nbsp;<span class="num" id="895265">0</span><span class="op" id="895266">)</span><br>
<span class="lineno"></span><span class="op" id="895268">}</span><br>
<span class="lineno"></span><span class="keyword" id="895270">func</span>&nbsp;<span class="op" id="895275">(</span><span class="ident" id="895276">k</span>&nbsp;<span class="op" id="895278">*</span><span class="ident" id="895279"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="895287">)</span>&nbsp;<span class="ident" id="895289">name</span><span class="op" id="895293">(</span><span class="op" id="895294">)</span>&nbsp;<span class="builtintype" id="895296">string</span>&nbsp;<span class="op" id="895303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895306">return</span>&nbsp;<span class="string" id="895313">&#34;int64&#34;</span><br>
<span class="lineno">345</span><span class="op" id="895321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="895324">type</span>&nbsp;<span class="ident" id="895329">EfaceKey</span>&nbsp;<span class="keyword" id="895338">struct</span>&nbsp;<span class="op" id="895345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895348">i</span>&nbsp;<span class="keyword" id="895350">interface</span><span class="op" id="895359">{</span><span class="op" id="895360">}</span><br>
<span class="lineno"></span><span class="op" id="895362">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="895365">func</span>&nbsp;<span class="op" id="895370">(</span><span class="ident" id="895371">k</span>&nbsp;<span class="op" id="895373">*</span><span class="ident" id="895374"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895382">)</span>&nbsp;<span class="ident" id="895384">clear</span><span class="op" id="895389">(</span><span class="op" id="895390">)</span>&nbsp;<span class="op" id="895392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895395"><a href="/runtime/hash_test.go.html#895371">k</a></span><span class="op" id="895396">.</span><span class="ident" id="895397">i</span>&nbsp;<span class="op" id="895399">=</span>&nbsp;<span class="ident" id="895401">nil</span><br>
<span class="lineno"></span><span class="op" id="895405">}</span><br>
<span class="lineno"></span><span class="keyword" id="895407">func</span>&nbsp;<span class="op" id="895412">(</span><span class="ident" id="895413">k</span>&nbsp;<span class="op" id="895415">*</span><span class="ident" id="895416"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895424">)</span>&nbsp;<span class="ident" id="895426">random</span><span class="op" id="895432">(</span><span class="ident" id="895433">r</span>&nbsp;<span class="op" id="895435">*</span><span class="ident" id="895436"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="895440">.</span><span class="ident" id="895441">Rand</span><span class="op" id="895445">)</span>&nbsp;<span class="op" id="895447">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895450"><a href="/runtime/hash_test.go.html#895413">k</a></span><span class="op" id="895451">.</span><span class="ident" id="895452">i</span>&nbsp;<span class="op" id="895454">=</span>&nbsp;<span class="ident" id="895456">uint64</span><span class="op" id="895462">(</span><span class="ident" id="895463"><a href="/runtime/hash_test.go.html#895433">r</a></span><span class="op" id="895464">.</span><span class="ident" id="895465">Int63</span><span class="op" id="895470">(</span><span class="op" id="895471">)</span><span class="op" id="895472">)</span><br>
<span class="lineno"></span><span class="op" id="895474">}</span><br>
<span class="lineno"></span><span class="keyword" id="895476">func</span>&nbsp;<span class="op" id="895481">(</span><span class="ident" id="895482">k</span>&nbsp;<span class="op" id="895484">*</span><span class="ident" id="895485"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895493">)</span>&nbsp;<span class="ident" id="895495">bits</span><span class="op" id="895499">(</span><span class="op" id="895500">)</span>&nbsp;<span class="builtintype" id="895502">int</span>&nbsp;<span class="op" id="895506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="895509">//&nbsp;use&nbsp;64&nbsp;bits.&nbsp;&nbsp;This&nbsp;tests&nbsp;inlined&nbsp;interfaces</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="895557">//&nbsp;on&nbsp;64-bit&nbsp;targets&nbsp;and&nbsp;indirect&nbsp;interfaces&nbsp;on</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="895606">//&nbsp;32-bit&nbsp;targets.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895626">return</span>&nbsp;<span class="num" id="895633">64</span><br>
<span class="lineno"></span><span class="op" id="895636">}</span><br>
<span class="lineno"></span><span class="keyword" id="895638">func</span>&nbsp;<span class="op" id="895643">(</span><span class="ident" id="895644">k</span>&nbsp;<span class="op" id="895646">*</span><span class="ident" id="895647"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895655">)</span>&nbsp;<span class="ident" id="895657">flipBit</span><span class="op" id="895664">(</span><span class="ident" id="895665">i</span>&nbsp;<span class="builtintype" id="895667">int</span><span class="op" id="895670">)</span>&nbsp;<span class="op" id="895672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895675"><a href="/runtime/hash_test.go.html#895644">k</a></span><span class="op" id="895676">.</span><span class="ident" id="895677">i</span>&nbsp;<span class="op" id="895679">=</span>&nbsp;<span class="ident" id="895681"><a href="/runtime/hash_test.go.html#895644">k</a></span><span class="op" id="895682">.</span><span class="ident" id="895683">i</span><span class="op" id="895684">.</span><span class="op" id="895685">(</span><span class="ident" id="895686">uint64</span><span class="op" id="895692">)</span>&nbsp;<span class="op" id="895694">^</span>&nbsp;<span class="ident" id="895696">uint64</span><span class="op" id="895702">(</span><span class="num" id="895703">1</span><span class="op" id="895704">)</span><span class="op" id="895705">&lt;&lt;</span><span class="builtintype" id="895707">uint</span><span class="op" id="895711">(</span><span class="ident" id="895712"><a href="/runtime/hash_test.go.html#895665">i</a></span><span class="op" id="895713">)</span><br>
<span class="lineno">365</span><span class="op" id="895715">}</span><br>
<span class="lineno"></span><span class="keyword" id="895717">func</span>&nbsp;<span class="op" id="895722">(</span><span class="ident" id="895723">k</span>&nbsp;<span class="op" id="895725">*</span><span class="ident" id="895726"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895734">)</span>&nbsp;<span class="ident" id="895736">hash</span><span class="op" id="895740">(</span><span class="op" id="895741">)</span>&nbsp;<span class="builtintype" id="895743">uintptr</span>&nbsp;<span class="op" id="895751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895754">return</span>&nbsp;<span class="ident" id="895761"><a href="/runtime/export_test.go.html#7719440">EfaceHash</a></span><span class="op" id="895770">(</span><span class="ident" id="895771"><a href="/runtime/hash_test.go.html#895723">k</a></span><span class="op" id="895772">.</span><span class="ident" id="895773">i</span><span class="op" id="895774">,</span>&nbsp;<span class="num" id="895776">0</span><span class="op" id="895777">)</span><br>
<span class="lineno"></span><span class="op" id="895779">}</span><br>
<span class="lineno"></span><span class="keyword" id="895781">func</span>&nbsp;<span class="op" id="895786">(</span><span class="ident" id="895787">k</span>&nbsp;<span class="op" id="895789">*</span><span class="ident" id="895790"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="895798">)</span>&nbsp;<span class="ident" id="895800">name</span><span class="op" id="895804">(</span><span class="op" id="895805">)</span>&nbsp;<span class="builtintype" id="895807">string</span>&nbsp;<span class="op" id="895814">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="895817">return</span>&nbsp;<span class="string" id="895824">&#34;Eface&#34;</span><br>
<span class="lineno"></span><span class="op" id="895832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="895835">type</span>&nbsp;<span class="ident" id="895840">IfaceKey</span>&nbsp;<span class="keyword" id="895849">struct</span>&nbsp;<span class="op" id="895856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895859">i</span>&nbsp;<span class="keyword" id="895861">interface</span>&nbsp;<span class="op" id="895871">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895875">F</span><span class="op" id="895876">(</span><span class="op" id="895877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="895880">}</span><br>
<span class="lineno"></span><span class="op" id="895882">}</span><br>
<span class="lineno"></span><span class="keyword" id="895884">type</span>&nbsp;<span class="ident" id="895889">fInter</span>&nbsp;<span class="ident" id="895896">uint64</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="895904">func</span>&nbsp;<span class="op" id="895909">(</span><span class="ident" id="895910">x</span>&nbsp;<span class="ident" id="895912"><a href="/runtime/hash_test.go.html#895889">fInter</a></span><span class="op" id="895918">)</span>&nbsp;<span class="ident" id="895920">F</span><span class="op" id="895921">(</span><span class="op" id="895922">)</span>&nbsp;<span class="op" id="895924">{</span><br>
<span class="lineno"></span><span class="op" id="895926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="895929">func</span>&nbsp;<span class="op" id="895934">(</span><span class="ident" id="895935">k</span>&nbsp;<span class="op" id="895937">*</span><span class="ident" id="895938"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="895946">)</span>&nbsp;<span class="ident" id="895948">clear</span><span class="op" id="895953">(</span><span class="op" id="895954">)</span>&nbsp;<span class="op" id="895956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="895959"><a href="/runtime/hash_test.go.html#895935">k</a></span><span class="op" id="895960">.</span><span class="ident" id="895961">i</span>&nbsp;<span class="op" id="895963">=</span>&nbsp;<span class="ident" id="895965">nil</span><br>
<span class="lineno">385</span><span class="op" id="895969">}</span><br>
<span class="lineno"></span><span class="keyword" id="895971">func</span>&nbsp;<span class="op" id="895976">(</span><span class="ident" id="895977">k</span>&nbsp;<span class="op" id="895979">*</span><span class="ident" id="895980"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="895988">)</span>&nbsp;<span class="ident" id="895990">random</span><span class="op" id="895996">(</span><span class="ident" id="895997">r</span>&nbsp;<span class="op" id="895999">*</span><span class="ident" id="896000"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="896004">.</span><span class="ident" id="896005">Rand</span><span class="op" id="896009">)</span>&nbsp;<span class="op" id="896011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896014"><a href="/runtime/hash_test.go.html#895977">k</a></span><span class="op" id="896015">.</span><span class="ident" id="896016">i</span>&nbsp;<span class="op" id="896018">=</span>&nbsp;<span class="ident" id="896020"><a href="/runtime/hash_test.go.html#895889">fInter</a></span><span class="op" id="896026">(</span><span class="ident" id="896027"><a href="/runtime/hash_test.go.html#895997">r</a></span><span class="op" id="896028">.</span><span class="ident" id="896029">Int63</span><span class="op" id="896034">(</span><span class="op" id="896035">)</span><span class="op" id="896036">)</span><br>
<span class="lineno"></span><span class="op" id="896038">}</span><br>
<span class="lineno"></span><span class="keyword" id="896040">func</span>&nbsp;<span class="op" id="896045">(</span><span class="ident" id="896046">k</span>&nbsp;<span class="op" id="896048">*</span><span class="ident" id="896049"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="896057">)</span>&nbsp;<span class="ident" id="896059">bits</span><span class="op" id="896063">(</span><span class="op" id="896064">)</span>&nbsp;<span class="builtintype" id="896066">int</span>&nbsp;<span class="op" id="896070">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="896073">//&nbsp;use&nbsp;64&nbsp;bits.&nbsp;&nbsp;This&nbsp;tests&nbsp;inlined&nbsp;interfaces</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="896121">//&nbsp;on&nbsp;64-bit&nbsp;targets&nbsp;and&nbsp;indirect&nbsp;interfaces&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="896170">//&nbsp;32-bit&nbsp;targets.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="896190">return</span>&nbsp;<span class="num" id="896197">64</span><br>
<span class="lineno"></span><span class="op" id="896200">}</span><br>
<span class="lineno">395</span><span class="keyword" id="896202">func</span>&nbsp;<span class="op" id="896207">(</span><span class="ident" id="896208">k</span>&nbsp;<span class="op" id="896210">*</span><span class="ident" id="896211"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="896219">)</span>&nbsp;<span class="ident" id="896221">flipBit</span><span class="op" id="896228">(</span><span class="ident" id="896229">i</span>&nbsp;<span class="builtintype" id="896231">int</span><span class="op" id="896234">)</span>&nbsp;<span class="op" id="896236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896239"><a href="/runtime/hash_test.go.html#896208">k</a></span><span class="op" id="896240">.</span><span class="ident" id="896241">i</span>&nbsp;<span class="op" id="896243">=</span>&nbsp;<span class="ident" id="896245"><a href="/runtime/hash_test.go.html#896208">k</a></span><span class="op" id="896246">.</span><span class="ident" id="896247">i</span><span class="op" id="896248">.</span><span class="op" id="896249">(</span><span class="ident" id="896250"><a href="/runtime/hash_test.go.html#895889">fInter</a></span><span class="op" id="896256">)</span>&nbsp;<span class="op" id="896258">^</span>&nbsp;<span class="ident" id="896260"><a href="/runtime/hash_test.go.html#895889">fInter</a></span><span class="op" id="896266">(</span><span class="num" id="896267">1</span><span class="op" id="896268">)</span><span class="op" id="896269">&lt;&lt;</span><span class="builtintype" id="896271">uint</span><span class="op" id="896275">(</span><span class="ident" id="896276"><a href="/runtime/hash_test.go.html#896229">i</a></span><span class="op" id="896277">)</span><br>
<span class="lineno"></span><span class="op" id="896279">}</span><br>
<span class="lineno"></span><span class="keyword" id="896281">func</span>&nbsp;<span class="op" id="896286">(</span><span class="ident" id="896287">k</span>&nbsp;<span class="op" id="896289">*</span><span class="ident" id="896290"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="896298">)</span>&nbsp;<span class="ident" id="896300">hash</span><span class="op" id="896304">(</span><span class="op" id="896305">)</span>&nbsp;<span class="builtintype" id="896307">uintptr</span>&nbsp;<span class="op" id="896315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="896318">return</span>&nbsp;<span class="ident" id="896325"><a href="/runtime/export_test.go.html#7719466">IfaceHash</a></span><span class="op" id="896334">(</span><span class="ident" id="896335"><a href="/runtime/hash_test.go.html#896287">k</a></span><span class="op" id="896336">.</span><span class="ident" id="896337">i</span><span class="op" id="896338">,</span>&nbsp;<span class="num" id="896340">0</span><span class="op" id="896341">)</span><br>
<span class="lineno">400</span><span class="op" id="896343">}</span><br>
<span class="lineno"></span><span class="keyword" id="896345">func</span>&nbsp;<span class="op" id="896350">(</span><span class="ident" id="896351">k</span>&nbsp;<span class="op" id="896353">*</span><span class="ident" id="896354"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="896362">)</span>&nbsp;<span class="ident" id="896364">name</span><span class="op" id="896368">(</span><span class="op" id="896369">)</span>&nbsp;<span class="builtintype" id="896371">string</span>&nbsp;<span class="op" id="896378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="896381">return</span>&nbsp;<span class="string" id="896388">&#34;Iface&#34;</span><br>
<span class="lineno"></span><span class="op" id="896396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span><span class="comment" id="896399">//&nbsp;Flipping&nbsp;a&nbsp;single&nbsp;bit&nbsp;of&nbsp;a&nbsp;key&nbsp;should&nbsp;flip&nbsp;each&nbsp;output&nbsp;bit&nbsp;with&nbsp;50%&nbsp;probability.</span><br>
<span class="lineno"></span><span class="keyword" id="896483">func</span>&nbsp;<span class="ident" id="896488">TestSmhasherAvalanche</span><span class="op" id="896509">(</span><span class="ident" id="896510">t</span>&nbsp;<span class="op" id="896512">*</span><span class="ident" id="896513"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="896520">.</span><span class="ident" id="896521">T</span><span class="op" id="896522">)</span>&nbsp;<span class="op" id="896524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="896527">if</span>&nbsp;<span class="op" id="896530">!</span><span class="ident" id="896531"><a href="/runtime/export_test.go.html#7719302">HaveGoodHash</a></span><span class="op" id="896543">(</span><span class="op" id="896544">)</span>&nbsp;<span class="op" id="896546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896550"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896551">.</span><span class="ident" id="896552">Skip</span><span class="op" id="896556">(</span><span class="string" id="896557">&#34;fallback&nbsp;hash&nbsp;not&nbsp;good&nbsp;enough&nbsp;for&nbsp;this&nbsp;test&#34;</span><span class="op" id="896602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="896605">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="896608">if</span>&nbsp;<span class="ident" id="896611"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="896618">.</span><span class="ident" id="896619">Short</span><span class="op" id="896624">(</span><span class="op" id="896625">)</span>&nbsp;<span class="op" id="896627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896631"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896632">.</span><span class="ident" id="896633">Skip</span><span class="op" id="896637">(</span><span class="string" id="896638">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="896662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="896665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896668"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896682">(</span><span class="ident" id="896683"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896684">,</span>&nbsp;<span class="op" id="896686">&amp;</span><span class="ident" id="896687"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896695">{</span><span class="builtinfunc" id="896696">make</span><span class="op" id="896700">(</span><span class="op" id="896701">[</span><span class="op" id="896702">]</span><span class="builtintype" id="896703">byte</span><span class="op" id="896707">,</span>&nbsp;<span class="num" id="896709">2</span><span class="op" id="896710">)</span><span class="op" id="896711">}</span><span class="op" id="896712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896715"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896729">(</span><span class="ident" id="896730"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896731">,</span>&nbsp;<span class="op" id="896733">&amp;</span><span class="ident" id="896734"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896742">{</span><span class="builtinfunc" id="896743">make</span><span class="op" id="896747">(</span><span class="op" id="896748">[</span><span class="op" id="896749">]</span><span class="builtintype" id="896750">byte</span><span class="op" id="896754">,</span>&nbsp;<span class="num" id="896756">4</span><span class="op" id="896757">)</span><span class="op" id="896758">}</span><span class="op" id="896759">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896762"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896776">(</span><span class="ident" id="896777"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896778">,</span>&nbsp;<span class="op" id="896780">&amp;</span><span class="ident" id="896781"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896789">{</span><span class="builtinfunc" id="896790">make</span><span class="op" id="896794">(</span><span class="op" id="896795">[</span><span class="op" id="896796">]</span><span class="builtintype" id="896797">byte</span><span class="op" id="896801">,</span>&nbsp;<span class="num" id="896803">8</span><span class="op" id="896804">)</span><span class="op" id="896805">}</span><span class="op" id="896806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896809"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896823">(</span><span class="ident" id="896824"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896825">,</span>&nbsp;<span class="op" id="896827">&amp;</span><span class="ident" id="896828"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896836">{</span><span class="builtinfunc" id="896837">make</span><span class="op" id="896841">(</span><span class="op" id="896842">[</span><span class="op" id="896843">]</span><span class="builtintype" id="896844">byte</span><span class="op" id="896848">,</span>&nbsp;<span class="num" id="896850">16</span><span class="op" id="896852">)</span><span class="op" id="896853">}</span><span class="op" id="896854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896857"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896871">(</span><span class="ident" id="896872"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896873">,</span>&nbsp;<span class="op" id="896875">&amp;</span><span class="ident" id="896876"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896884">{</span><span class="builtinfunc" id="896885">make</span><span class="op" id="896889">(</span><span class="op" id="896890">[</span><span class="op" id="896891">]</span><span class="builtintype" id="896892">byte</span><span class="op" id="896896">,</span>&nbsp;<span class="num" id="896898">32</span><span class="op" id="896900">)</span><span class="op" id="896901">}</span><span class="op" id="896902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896905"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896919">(</span><span class="ident" id="896920"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896921">,</span>&nbsp;<span class="op" id="896923">&amp;</span><span class="ident" id="896924"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="896932">{</span><span class="builtinfunc" id="896933">make</span><span class="op" id="896937">(</span><span class="op" id="896938">[</span><span class="op" id="896939">]</span><span class="builtintype" id="896940">byte</span><span class="op" id="896944">,</span>&nbsp;<span class="num" id="896946">200</span><span class="op" id="896949">)</span><span class="op" id="896950">}</span><span class="op" id="896951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896954"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="896968">(</span><span class="ident" id="896969"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="896970">,</span>&nbsp;<span class="op" id="896972">&amp;</span><span class="ident" id="896973"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="896981">{</span><span class="op" id="896982">}</span><span class="op" id="896983">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="896986"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="897000">(</span><span class="ident" id="897001"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="897002">,</span>&nbsp;<span class="op" id="897004">&amp;</span><span class="ident" id="897005"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="897013">{</span><span class="op" id="897014">}</span><span class="op" id="897015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897018"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="897032">(</span><span class="ident" id="897033"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="897034">,</span>&nbsp;<span class="op" id="897036">&amp;</span><span class="ident" id="897037"><a href="/runtime/hash_test.go.html#895329">EfaceKey</a></span><span class="op" id="897045">{</span><span class="op" id="897046">}</span><span class="op" id="897047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897050"><a href="/runtime/hash_test.go.html#897088">avalancheTest1</a></span><span class="op" id="897064">(</span><span class="ident" id="897065"><a href="/runtime/hash_test.go.html#896510">t</a></span><span class="op" id="897066">,</span>&nbsp;<span class="op" id="897068">&amp;</span><span class="ident" id="897069"><a href="/runtime/hash_test.go.html#895840">IfaceKey</a></span><span class="op" id="897077">{</span><span class="op" id="897078">}</span><span class="op" id="897079">)</span><br>
<span class="lineno"></span><span class="op" id="897081">}</span><br>
<span class="lineno"></span><span class="keyword" id="897083">func</span>&nbsp;<span class="ident" id="897088">avalancheTest1</span><span class="op" id="897102">(</span><span class="ident" id="897103">t</span>&nbsp;<span class="op" id="897105">*</span><span class="ident" id="897106"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="897113">.</span><span class="ident" id="897114">T</span><span class="op" id="897115">,</span>&nbsp;<span class="ident" id="897117">k</span>&nbsp;<span class="ident" id="897119"><a href="/runtime/hash_test.go.html#893840">Key</a></span><span class="op" id="897122">)</span>&nbsp;<span class="op" id="897124">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="897127">const</span>&nbsp;<span class="ident" id="897133">REP</span>&nbsp;<span class="op" id="897137">=</span>&nbsp;<span class="num" id="897139">100000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897147">r</span>&nbsp;<span class="op" id="897149">:=</span>&nbsp;<span class="ident" id="897152"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="897156">.</span><span class="ident" id="897157">New</span><span class="op" id="897160">(</span><span class="ident" id="897161"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="897165">.</span><span class="ident" id="897166">NewSource</span><span class="op" id="897175">(</span><span class="num" id="897176">1234</span><span class="op" id="897180">)</span><span class="op" id="897181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897184">n</span>&nbsp;<span class="op" id="897186">:=</span>&nbsp;<span class="ident" id="897189"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897190">.</span><span class="ident" id="897191">bits</span><span class="op" id="897195">(</span><span class="op" id="897196">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897200">//&nbsp;grid[i][j]&nbsp;is&nbsp;a&nbsp;count&nbsp;of&nbsp;whether&nbsp;flipping</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897246">//&nbsp;input&nbsp;bit&nbsp;i&nbsp;affects&nbsp;output&nbsp;bit&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897284">grid</span>&nbsp;<span class="op" id="897289">:=</span>&nbsp;<span class="builtinfunc" id="897292">make</span><span class="op" id="897296">(</span><span class="op" id="897297">[</span><span class="op" id="897298">]</span><span class="op" id="897299">[</span><span class="ident" id="897300"><a href="/runtime/hash_test.go.html#900104">hashSize</a></span><span class="op" id="897308">]</span><span class="builtintype" id="897309">int</span><span class="op" id="897312">,</span>&nbsp;<span class="ident" id="897314"><a href="/runtime/hash_test.go.html#897184">n</a></span><span class="op" id="897315">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="897319">for</span>&nbsp;<span class="ident" id="897323">z</span>&nbsp;<span class="op" id="897325">:=</span>&nbsp;<span class="num" id="897328">0</span><span class="op" id="897329">;</span>&nbsp;<span class="ident" id="897331"><a href="/runtime/hash_test.go.html#897323">z</a></span>&nbsp;<span class="op" id="897333">&lt;</span>&nbsp;<span class="ident" id="897335"><a href="/runtime/hash_test.go.html#897133">REP</a></span><span class="op" id="897338">;</span>&nbsp;<span class="ident" id="897340"><a href="/runtime/hash_test.go.html#897323">z</a></span><span class="op" id="897341">++</span>&nbsp;<span class="op" id="897344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897348">//&nbsp;pick&nbsp;a&nbsp;random&nbsp;key,&nbsp;hash&nbsp;it</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897380"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897381">.</span><span class="ident" id="897382">random</span><span class="op" id="897388">(</span><span class="ident" id="897389"><a href="/runtime/hash_test.go.html#897147">r</a></span><span class="op" id="897390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897394">h</span>&nbsp;<span class="op" id="897396">:=</span>&nbsp;<span class="ident" id="897399"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897400">.</span><span class="ident" id="897401">hash</span><span class="op" id="897405">(</span><span class="op" id="897406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897411">//&nbsp;flip&nbsp;each&nbsp;bit,&nbsp;hash&nbsp;&amp;&nbsp;compare&nbsp;the&nbsp;results</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="897458">for</span>&nbsp;<span class="ident" id="897462">i</span>&nbsp;<span class="op" id="897464">:=</span>&nbsp;<span class="num" id="897467">0</span><span class="op" id="897468">;</span>&nbsp;<span class="ident" id="897470"><a href="/runtime/hash_test.go.html#897462">i</a></span>&nbsp;<span class="op" id="897472">&lt;</span>&nbsp;<span class="ident" id="897474"><a href="/runtime/hash_test.go.html#897184">n</a></span><span class="op" id="897475">;</span>&nbsp;<span class="ident" id="897477"><a href="/runtime/hash_test.go.html#897462">i</a></span><span class="op" id="897478">++</span>&nbsp;<span class="op" id="897481">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897486"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897487">.</span><span class="ident" id="897488">flipBit</span><span class="op" id="897495">(</span><span class="ident" id="897496"><a href="/runtime/hash_test.go.html#897462">i</a></span><span class="op" id="897497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897502">d</span>&nbsp;<span class="op" id="897504">:=</span>&nbsp;<span class="ident" id="897507"><a href="/runtime/hash_test.go.html#897394">h</a></span>&nbsp;<span class="op" id="897509">^</span>&nbsp;<span class="ident" id="897511"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897512">.</span><span class="ident" id="897513">hash</span><span class="op" id="897517">(</span><span class="op" id="897518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897523"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="897524">.</span><span class="ident" id="897525">flipBit</span><span class="op" id="897532">(</span><span class="ident" id="897533"><a href="/runtime/hash_test.go.html#897462">i</a></span><span class="op" id="897534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897540">//&nbsp;record&nbsp;the&nbsp;effects&nbsp;of&nbsp;that&nbsp;bit&nbsp;flip</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897582">g</span>&nbsp;<span class="op" id="897584">:=</span>&nbsp;<span class="op" id="897587">&amp;</span><span class="ident" id="897588"><a href="/runtime/hash_test.go.html#897284">grid</a></span><span class="op" id="897592">[</span><span class="ident" id="897593"><a href="/runtime/hash_test.go.html#897462">i</a></span><span class="op" id="897594">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="897599">for</span>&nbsp;<span class="ident" id="897603">j</span>&nbsp;<span class="op" id="897605">:=</span>&nbsp;<span class="num" id="897608">0</span><span class="op" id="897609">;</span>&nbsp;<span class="ident" id="897611"><a href="/runtime/hash_test.go.html#897603">j</a></span>&nbsp;<span class="op" id="897613">&lt;</span>&nbsp;<span class="ident" id="897615"><a href="/runtime/hash_test.go.html#900104">hashSize</a></span><span class="op" id="897623">;</span>&nbsp;<span class="ident" id="897625"><a href="/runtime/hash_test.go.html#897603">j</a></span><span class="op" id="897626">++</span>&nbsp;<span class="op" id="897629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897635"><a href="/runtime/hash_test.go.html#897582">g</a></span><span class="op" id="897636">[</span><span class="ident" id="897637"><a href="/runtime/hash_test.go.html#897603">j</a></span><span class="op" id="897638">]</span>&nbsp;<span class="op" id="897640">+=</span>&nbsp;<span class="builtintype" id="897643">int</span><span class="op" id="897646">(</span><span class="ident" id="897647"><a href="/runtime/hash_test.go.html#897502">d</a></span>&nbsp;<span class="op" id="897649">&amp;</span>&nbsp;<span class="num" id="897651">1</span><span class="op" id="897652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897658"><a href="/runtime/hash_test.go.html#897502">d</a></span>&nbsp;<span class="op" id="897660">&gt;&gt;=</span>&nbsp;<span class="num" id="897664">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="897669">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="897673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="897676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897680">//&nbsp;Each&nbsp;entry&nbsp;in&nbsp;the&nbsp;grid&nbsp;should&nbsp;be&nbsp;about&nbsp;REP/2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897730">//&nbsp;More&nbsp;precisely,&nbsp;we&nbsp;did&nbsp;N&nbsp;=&nbsp;k.bits()&nbsp;*&nbsp;hashSize&nbsp;experiments&nbsp;where</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897799">//&nbsp;each&nbsp;is&nbsp;the&nbsp;sum&nbsp;of&nbsp;REP&nbsp;coin&nbsp;flips.&nbsp;&nbsp;We&nbsp;want&nbsp;to&nbsp;find&nbsp;bounds&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897869">//&nbsp;sum&nbsp;of&nbsp;coin&nbsp;flips&nbsp;such&nbsp;that&nbsp;a&nbsp;truly&nbsp;random&nbsp;experiment&nbsp;would&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="897938">//&nbsp;all&nbsp;sums&nbsp;inside&nbsp;those&nbsp;bounds&nbsp;with&nbsp;99%&nbsp;probability.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="897993">N</span>&nbsp;<span class="op" id="897995">:=</span>&nbsp;<span class="ident" id="897998"><a href="/runtime/hash_test.go.html#897184">n</a></span>&nbsp;<span class="op" id="898000">*</span>&nbsp;<span class="ident" id="898002"><a href="/runtime/hash_test.go.html#900104">hashSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898012">var</span>&nbsp;<span class="ident" id="898016">c</span>&nbsp;<span class="builtintype" id="898018">float64</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="898027">//&nbsp;find&nbsp;c&nbsp;such&nbsp;that&nbsp;Prob(mean-c*stddev&nbsp;&lt;&nbsp;x&nbsp;&lt;&nbsp;mean+c*stddev)^N&nbsp;&gt;&nbsp;.9999</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898098">for</span>&nbsp;<span class="ident" id="898102"><a href="/runtime/hash_test.go.html#898016">c</a></span>&nbsp;<span class="op" id="898104">=</span>&nbsp;<span class="num" id="898106">0.0</span><span class="op" id="898109">;</span>&nbsp;<span class="ident" id="898111"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="898115">.</span><span class="ident" id="898116">Pow</span><span class="op" id="898119">(</span><span class="ident" id="898120"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="898124">.</span><span class="ident" id="898125">Erf</span><span class="op" id="898128">(</span><span class="ident" id="898129"><a href="/runtime/hash_test.go.html#898016">c</a></span><span class="op" id="898130">/</span><span class="ident" id="898131"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="898135">.</span><span class="ident" id="898136">Sqrt</span><span class="op" id="898140">(</span><span class="num" id="898141">2</span><span class="op" id="898142">)</span><span class="op" id="898143">)</span><span class="op" id="898144">,</span>&nbsp;<span class="builtintype" id="898146">float64</span><span class="op" id="898153">(</span><span class="ident" id="898154"><a href="/runtime/hash_test.go.html#897993">N</a></span><span class="op" id="898155">)</span><span class="op" id="898156">)</span>&nbsp;<span class="op" id="898158">&lt;</span>&nbsp;<span class="num" id="898160">.9999</span><span class="op" id="898165">;</span>&nbsp;<span class="ident" id="898167"><a href="/runtime/hash_test.go.html#898016">c</a></span>&nbsp;<span class="op" id="898169">+=</span>&nbsp;<span class="num" id="898172">.1</span>&nbsp;<span class="op" id="898175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="898178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898181"><a href="/runtime/hash_test.go.html#898016">c</a></span>&nbsp;<span class="op" id="898183">*=</span>&nbsp;<span class="num" id="898186">4.0</span>&nbsp;<span class="comment" id="898190">//&nbsp;allowed&nbsp;slack&nbsp;-&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;perfectly&nbsp;random</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898247">mean</span>&nbsp;<span class="op" id="898252">:=</span>&nbsp;<span class="num" id="898255">.5</span>&nbsp;<span class="op" id="898258">*</span>&nbsp;<span class="ident" id="898260"><a href="/runtime/hash_test.go.html#897133">REP</a></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898265">stddev</span>&nbsp;<span class="op" id="898272">:=</span>&nbsp;<span class="num" id="898275">.5</span>&nbsp;<span class="op" id="898278">*</span>&nbsp;<span class="ident" id="898280"><a href="/runtime/hash_test.go.html#887950">math</a></span><span class="op" id="898284">.</span><span class="ident" id="898285">Sqrt</span><span class="op" id="898289">(</span><span class="ident" id="898290"><a href="/runtime/hash_test.go.html#897133">REP</a></span><span class="op" id="898293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898296">low</span>&nbsp;<span class="op" id="898300">:=</span>&nbsp;<span class="builtintype" id="898303">int</span><span class="op" id="898306">(</span><span class="ident" id="898307"><a href="/runtime/hash_test.go.html#898247">mean</a></span>&nbsp;<span class="op" id="898312">-</span>&nbsp;<span class="ident" id="898314"><a href="/runtime/hash_test.go.html#898016">c</a></span><span class="op" id="898315">*</span><span class="ident" id="898316"><a href="/runtime/hash_test.go.html#898265">stddev</a></span><span class="op" id="898322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898325">high</span>&nbsp;<span class="op" id="898330">:=</span>&nbsp;<span class="builtintype" id="898333">int</span><span class="op" id="898336">(</span><span class="ident" id="898337"><a href="/runtime/hash_test.go.html#898247">mean</a></span>&nbsp;<span class="op" id="898342">+</span>&nbsp;<span class="ident" id="898344"><a href="/runtime/hash_test.go.html#898016">c</a></span><span class="op" id="898345">*</span><span class="ident" id="898346"><a href="/runtime/hash_test.go.html#898265">stddev</a></span><span class="op" id="898352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898355">for</span>&nbsp;<span class="ident" id="898359">i</span>&nbsp;<span class="op" id="898361">:=</span>&nbsp;<span class="num" id="898364">0</span><span class="op" id="898365">;</span>&nbsp;<span class="ident" id="898367"><a href="/runtime/hash_test.go.html#898359">i</a></span>&nbsp;<span class="op" id="898369">&lt;</span>&nbsp;<span class="ident" id="898371"><a href="/runtime/hash_test.go.html#897184">n</a></span><span class="op" id="898372">;</span>&nbsp;<span class="ident" id="898374"><a href="/runtime/hash_test.go.html#898359">i</a></span><span class="op" id="898375">++</span>&nbsp;<span class="op" id="898378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898382">for</span>&nbsp;<span class="ident" id="898386">j</span>&nbsp;<span class="op" id="898388">:=</span>&nbsp;<span class="num" id="898391">0</span><span class="op" id="898392">;</span>&nbsp;<span class="ident" id="898394"><a href="/runtime/hash_test.go.html#898386">j</a></span>&nbsp;<span class="op" id="898396">&lt;</span>&nbsp;<span class="ident" id="898398"><a href="/runtime/hash_test.go.html#900104">hashSize</a></span><span class="op" id="898406">;</span>&nbsp;<span class="ident" id="898408"><a href="/runtime/hash_test.go.html#898386">j</a></span><span class="op" id="898409">++</span>&nbsp;<span class="op" id="898412">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898417">x</span>&nbsp;<span class="op" id="898419">:=</span>&nbsp;<span class="ident" id="898422"><a href="/runtime/hash_test.go.html#897284">grid</a></span><span class="op" id="898426">[</span><span class="ident" id="898427"><a href="/runtime/hash_test.go.html#898359">i</a></span><span class="op" id="898428">]</span><span class="op" id="898429">[</span><span class="ident" id="898430"><a href="/runtime/hash_test.go.html#898386">j</a></span><span class="op" id="898431">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898436">if</span>&nbsp;<span class="ident" id="898439"><a href="/runtime/hash_test.go.html#898417">x</a></span>&nbsp;<span class="op" id="898441">&lt;</span>&nbsp;<span class="ident" id="898443"><a href="/runtime/hash_test.go.html#898296">low</a></span>&nbsp;<span class="op" id="898447">||</span>&nbsp;<span class="ident" id="898450"><a href="/runtime/hash_test.go.html#898417">x</a></span>&nbsp;<span class="op" id="898452">&gt;</span>&nbsp;<span class="ident" id="898454"><a href="/runtime/hash_test.go.html#898325">high</a></span>&nbsp;<span class="op" id="898459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898465"><a href="/runtime/hash_test.go.html#897103">t</a></span><span class="op" id="898466">.</span><span class="ident" id="898467">Errorf</span><span class="op" id="898473">(</span><span class="string" id="898474">&#34;bad&nbsp;bias&nbsp;for&nbsp;%s&nbsp;bit&nbsp;%d&nbsp;-&gt;&nbsp;bit&nbsp;%d:&nbsp;%d/%d\n&#34;</span><span class="op" id="898517">,</span>&nbsp;<span class="ident" id="898519"><a href="/runtime/hash_test.go.html#897117">k</a></span><span class="op" id="898520">.</span><span class="ident" id="898521">name</span><span class="op" id="898525">(</span><span class="op" id="898526">)</span><span class="op" id="898527">,</span>&nbsp;<span class="ident" id="898529"><a href="/runtime/hash_test.go.html#898359">i</a></span><span class="op" id="898530">,</span>&nbsp;<span class="ident" id="898532"><a href="/runtime/hash_test.go.html#898386">j</a></span><span class="op" id="898533">,</span>&nbsp;<span class="ident" id="898535"><a href="/runtime/hash_test.go.html#898417">x</a></span><span class="op" id="898536">,</span>&nbsp;<span class="ident" id="898538"><a href="/runtime/hash_test.go.html#897133">REP</a></span><span class="op" id="898541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="898546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="898550">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="898553">}</span><br>
<span class="lineno"></span><span class="op" id="898555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="898558">//&nbsp;All&nbsp;bit&nbsp;rotations&nbsp;of&nbsp;a&nbsp;set&nbsp;of&nbsp;distinct&nbsp;keys</span><br>
<span class="lineno"></span><span class="keyword" id="898605">func</span>&nbsp;<span class="ident" id="898610">TestSmhasherWindowed</span><span class="op" id="898630">(</span><span class="ident" id="898631">t</span>&nbsp;<span class="op" id="898633">*</span><span class="ident" id="898634"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="898641">.</span><span class="ident" id="898642">T</span><span class="op" id="898643">)</span>&nbsp;<span class="op" id="898645">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898648"><a href="/runtime/hash_test.go.html#898749">windowed</a></span><span class="op" id="898656">(</span><span class="ident" id="898657"><a href="/runtime/hash_test.go.html#898631">t</a></span><span class="op" id="898658">,</span>&nbsp;<span class="op" id="898660">&amp;</span><span class="ident" id="898661"><a href="/runtime/hash_test.go.html#894576">Int32Key</a></span><span class="op" id="898669">{</span><span class="op" id="898670">}</span><span class="op" id="898671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898674"><a href="/runtime/hash_test.go.html#898749">windowed</a></span><span class="op" id="898682">(</span><span class="ident" id="898683"><a href="/runtime/hash_test.go.html#898631">t</a></span><span class="op" id="898684">,</span>&nbsp;<span class="op" id="898686">&amp;</span><span class="ident" id="898687"><a href="/runtime/hash_test.go.html#894936">Int64Key</a></span><span class="op" id="898695">{</span><span class="op" id="898696">}</span><span class="op" id="898697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898700"><a href="/runtime/hash_test.go.html#898749">windowed</a></span><span class="op" id="898708">(</span><span class="ident" id="898709"><a href="/runtime/hash_test.go.html#898631">t</a></span><span class="op" id="898710">,</span>&nbsp;<span class="op" id="898712">&amp;</span><span class="ident" id="898713"><a href="/runtime/hash_test.go.html#894137">BytesKey</a></span><span class="op" id="898721">{</span><span class="builtinfunc" id="898722">make</span><span class="op" id="898726">(</span><span class="op" id="898727">[</span><span class="op" id="898728">]</span><span class="builtintype" id="898729">byte</span><span class="op" id="898733">,</span>&nbsp;<span class="num" id="898735">128</span><span class="op" id="898738">)</span><span class="op" id="898739">}</span><span class="op" id="898740">)</span><br>
<span class="lineno"></span><span class="op" id="898742">}</span><br>
<span class="lineno"></span><span class="keyword" id="898744">func</span>&nbsp;<span class="ident" id="898749">windowed</span><span class="op" id="898757">(</span><span class="ident" id="898758">t</span>&nbsp;<span class="op" id="898760">*</span><span class="ident" id="898761"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="898768">.</span><span class="ident" id="898769">T</span><span class="op" id="898770">,</span>&nbsp;<span class="ident" id="898772">k</span>&nbsp;<span class="ident" id="898774"><a href="/runtime/hash_test.go.html#893840">Key</a></span><span class="op" id="898777">)</span>&nbsp;<span class="op" id="898779">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898782">if</span>&nbsp;<span class="ident" id="898785"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="898792">.</span><span class="ident" id="898793">Short</span><span class="op" id="898798">(</span><span class="op" id="898799">)</span>&nbsp;<span class="op" id="898801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898805"><a href="/runtime/hash_test.go.html#898758">t</a></span><span class="op" id="898806">.</span><span class="ident" id="898807">Skip</span><span class="op" id="898811">(</span><span class="string" id="898812">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="898836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="898839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898842">const</span>&nbsp;<span class="ident" id="898848">BITS</span>&nbsp;<span class="op" id="898853">=</span>&nbsp;<span class="num" id="898855">16</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898860">for</span>&nbsp;<span class="ident" id="898864">r</span>&nbsp;<span class="op" id="898866">:=</span>&nbsp;<span class="num" id="898869">0</span><span class="op" id="898870">;</span>&nbsp;<span class="ident" id="898872"><a href="/runtime/hash_test.go.html#898864">r</a></span>&nbsp;<span class="op" id="898874">&lt;</span>&nbsp;<span class="ident" id="898876"><a href="/runtime/hash_test.go.html#898772">k</a></span><span class="op" id="898877">.</span><span class="ident" id="898878">bits</span><span class="op" id="898882">(</span><span class="op" id="898883">)</span><span class="op" id="898884">;</span>&nbsp;<span class="ident" id="898886"><a href="/runtime/hash_test.go.html#898864">r</a></span><span class="op" id="898887">++</span>&nbsp;<span class="op" id="898890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898894">h</span>&nbsp;<span class="op" id="898896">:=</span>&nbsp;<span class="ident" id="898899"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="898909">(</span><span class="op" id="898910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898914">for</span>&nbsp;<span class="ident" id="898918">i</span>&nbsp;<span class="op" id="898920">:=</span>&nbsp;<span class="num" id="898923">0</span><span class="op" id="898924">;</span>&nbsp;<span class="ident" id="898926"><a href="/runtime/hash_test.go.html#898918">i</a></span>&nbsp;<span class="op" id="898928">&lt;</span>&nbsp;<span class="num" id="898930">1</span><span class="op" id="898931">&lt;&lt;</span><span class="ident" id="898933"><a href="/runtime/hash_test.go.html#898848">BITS</a></span><span class="op" id="898937">;</span>&nbsp;<span class="ident" id="898939"><a href="/runtime/hash_test.go.html#898918">i</a></span><span class="op" id="898940">++</span>&nbsp;<span class="op" id="898943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="898948"><a href="/runtime/hash_test.go.html#898772">k</a></span><span class="op" id="898949">.</span><span class="ident" id="898950">clear</span><span class="op" id="898955">(</span><span class="op" id="898956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898961">for</span>&nbsp;<span class="ident" id="898965">j</span>&nbsp;<span class="op" id="898967">:=</span>&nbsp;<span class="num" id="898970">0</span><span class="op" id="898971">;</span>&nbsp;<span class="ident" id="898973"><a href="/runtime/hash_test.go.html#898965">j</a></span>&nbsp;<span class="op" id="898975">&lt;</span>&nbsp;<span class="ident" id="898977"><a href="/runtime/hash_test.go.html#898848">BITS</a></span><span class="op" id="898981">;</span>&nbsp;<span class="ident" id="898983"><a href="/runtime/hash_test.go.html#898965">j</a></span><span class="op" id="898984">++</span>&nbsp;<span class="op" id="898987">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="898993">if</span>&nbsp;<span class="ident" id="898996"><a href="/runtime/hash_test.go.html#898918">i</a></span><span class="op" id="898997">&gt;&gt;</span><span class="builtintype" id="898999">uint</span><span class="op" id="899003">(</span><span class="ident" id="899004"><a href="/runtime/hash_test.go.html#898965">j</a></span><span class="op" id="899005">)</span><span class="op" id="899006">&amp;</span><span class="num" id="899007">1</span>&nbsp;<span class="op" id="899009">!=</span>&nbsp;<span class="num" id="899012">0</span>&nbsp;<span class="op" id="899014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899021"><a href="/runtime/hash_test.go.html#898772">k</a></span><span class="op" id="899022">.</span><span class="ident" id="899023">flipBit</span><span class="op" id="899030">(</span><span class="op" id="899031">(</span><span class="ident" id="899032"><a href="/runtime/hash_test.go.html#898965">j</a></span>&nbsp;<span class="op" id="899034">+</span>&nbsp;<span class="ident" id="899036"><a href="/runtime/hash_test.go.html#898864">r</a></span><span class="op" id="899037">)</span>&nbsp;<span class="op" id="899039">%</span>&nbsp;<span class="ident" id="899041"><a href="/runtime/hash_test.go.html#898772">k</a></span><span class="op" id="899042">.</span><span class="ident" id="899043">bits</span><span class="op" id="899047">(</span><span class="op" id="899048">)</span><span class="op" id="899049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899065"><a href="/runtime/hash_test.go.html#898894">h</a></span><span class="op" id="899066">.</span><span class="ident" id="899067">add</span><span class="op" id="899070">(</span><span class="ident" id="899071"><a href="/runtime/hash_test.go.html#898772">k</a></span><span class="op" id="899072">.</span><span class="ident" id="899073">hash</span><span class="op" id="899077">(</span><span class="op" id="899078">)</span><span class="op" id="899079">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899087"><a href="/runtime/hash_test.go.html#898894">h</a></span><span class="op" id="899088">.</span><span class="ident" id="899089">check</span><span class="op" id="899094">(</span><span class="ident" id="899095"><a href="/runtime/hash_test.go.html#898758">t</a></span><span class="op" id="899096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899099">}</span><br>
<span class="lineno"></span><span class="op" id="899101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="comment" id="899104">//&nbsp;All&nbsp;keys&nbsp;of&nbsp;the&nbsp;form&nbsp;prefix&nbsp;+&nbsp;[A-Za-z0-9]*N&nbsp;+&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="899161">func</span>&nbsp;<span class="ident" id="899166">TestSmhasherText</span><span class="op" id="899182">(</span><span class="ident" id="899183">t</span>&nbsp;<span class="op" id="899185">*</span><span class="ident" id="899186"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="899193">.</span><span class="ident" id="899194">T</span><span class="op" id="899195">)</span>&nbsp;<span class="op" id="899197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899200">if</span>&nbsp;<span class="ident" id="899203"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="899210">.</span><span class="ident" id="899211">Short</span><span class="op" id="899216">(</span><span class="op" id="899217">)</span>&nbsp;<span class="op" id="899219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899223"><a href="/runtime/hash_test.go.html#899183">t</a></span><span class="op" id="899224">.</span><span class="ident" id="899225">Skip</span><span class="op" id="899229">(</span><span class="string" id="899230">&#34;Skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="899254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899257">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899260"><a href="/runtime/hash_test.go.html#899335">text</a></span><span class="op" id="899264">(</span><span class="ident" id="899265"><a href="/runtime/hash_test.go.html#899183">t</a></span><span class="op" id="899266">,</span>&nbsp;<span class="string" id="899268">&#34;Foo&#34;</span><span class="op" id="899273">,</span>&nbsp;<span class="string" id="899275">&#34;Bar&#34;</span><span class="op" id="899280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899283"><a href="/runtime/hash_test.go.html#899335">text</a></span><span class="op" id="899287">(</span><span class="ident" id="899288"><a href="/runtime/hash_test.go.html#899183">t</a></span><span class="op" id="899289">,</span>&nbsp;<span class="string" id="899291">&#34;FooBar&#34;</span><span class="op" id="899299">,</span>&nbsp;<span class="string" id="899301">&#34;&#34;</span><span class="op" id="899303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899306"><a href="/runtime/hash_test.go.html#899335">text</a></span><span class="op" id="899310">(</span><span class="ident" id="899311"><a href="/runtime/hash_test.go.html#899183">t</a></span><span class="op" id="899312">,</span>&nbsp;<span class="string" id="899314">&#34;&#34;</span><span class="op" id="899316">,</span>&nbsp;<span class="string" id="899318">&#34;FooBar&#34;</span><span class="op" id="899326">)</span><br>
<span class="lineno"></span><span class="op" id="899328">}</span><br>
<span class="lineno"></span><span class="keyword" id="899330">func</span>&nbsp;<span class="ident" id="899335">text</span><span class="op" id="899339">(</span><span class="ident" id="899340">t</span>&nbsp;<span class="op" id="899342">*</span><span class="ident" id="899343"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="899350">.</span><span class="ident" id="899351">T</span><span class="op" id="899352">,</span>&nbsp;<span class="ident" id="899354">prefix</span><span class="op" id="899360">,</span>&nbsp;<span class="ident" id="899362">suffix</span>&nbsp;<span class="builtintype" id="899369">string</span><span class="op" id="899375">)</span>&nbsp;<span class="op" id="899377">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899380">const</span>&nbsp;<span class="ident" id="899386">N</span>&nbsp;<span class="op" id="899388">=</span>&nbsp;<span class="num" id="899390">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899393">const</span>&nbsp;<span class="ident" id="899399">S</span>&nbsp;<span class="op" id="899401">=</span>&nbsp;<span class="string" id="899403">&#34;ABCDEFGHIJKLMNOPQRSTabcdefghijklmnopqrst0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899457">const</span>&nbsp;<span class="ident" id="899463">L</span>&nbsp;<span class="op" id="899465">=</span>&nbsp;<span class="builtinfunc" id="899467">len</span><span class="op" id="899470">(</span><span class="ident" id="899471"><a href="/runtime/hash_test.go.html#899399">S</a></span><span class="op" id="899472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899475">b</span>&nbsp;<span class="op" id="899477">:=</span>&nbsp;<span class="builtinfunc" id="899480">make</span><span class="op" id="899484">(</span><span class="op" id="899485">[</span><span class="op" id="899486">]</span><span class="builtintype" id="899487">byte</span><span class="op" id="899491">,</span>&nbsp;<span class="builtinfunc" id="899493">len</span><span class="op" id="899496">(</span><span class="ident" id="899497"><a href="/runtime/hash_test.go.html#899354">prefix</a></span><span class="op" id="899503">)</span><span class="op" id="899504">+</span><span class="ident" id="899505"><a href="/runtime/hash_test.go.html#899386">N</a></span><span class="op" id="899506">+</span><span class="builtinfunc" id="899507">len</span><span class="op" id="899510">(</span><span class="ident" id="899511"><a href="/runtime/hash_test.go.html#899362">suffix</a></span><span class="op" id="899517">)</span><span class="op" id="899518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="899521">copy</span><span class="op" id="899525">(</span><span class="ident" id="899526"><a href="/runtime/hash_test.go.html#899475">b</a></span><span class="op" id="899527">,</span>&nbsp;<span class="ident" id="899529"><a href="/runtime/hash_test.go.html#899354">prefix</a></span><span class="op" id="899535">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="899538">copy</span><span class="op" id="899542">(</span><span class="ident" id="899543"><a href="/runtime/hash_test.go.html#899475">b</a></span><span class="op" id="899544">[</span><span class="builtinfunc" id="899545">len</span><span class="op" id="899548">(</span><span class="ident" id="899549"><a href="/runtime/hash_test.go.html#899354">prefix</a></span><span class="op" id="899555">)</span><span class="op" id="899556">+</span><span class="ident" id="899557"><a href="/runtime/hash_test.go.html#899386">N</a></span><span class="op" id="899558">:</span><span class="op" id="899559">]</span><span class="op" id="899560">,</span>&nbsp;<span class="ident" id="899562"><a href="/runtime/hash_test.go.html#899362">suffix</a></span><span class="op" id="899568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899571">h</span>&nbsp;<span class="op" id="899573">:=</span>&nbsp;<span class="ident" id="899576"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="899586">(</span><span class="op" id="899587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899590">c</span>&nbsp;<span class="op" id="899592">:=</span>&nbsp;<span class="ident" id="899595"><a href="/runtime/hash_test.go.html#899475">b</a></span><span class="op" id="899596">[</span><span class="builtinfunc" id="899597">len</span><span class="op" id="899600">(</span><span class="ident" id="899601"><a href="/runtime/hash_test.go.html#899354">prefix</a></span><span class="op" id="899607">)</span><span class="op" id="899608">:</span><span class="op" id="899609">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899612">for</span>&nbsp;<span class="ident" id="899616">i</span>&nbsp;<span class="op" id="899618">:=</span>&nbsp;<span class="num" id="899621">0</span><span class="op" id="899622">;</span>&nbsp;<span class="ident" id="899624"><a href="/runtime/hash_test.go.html#899616">i</a></span>&nbsp;<span class="op" id="899626">&lt;</span>&nbsp;<span class="ident" id="899628"><a href="/runtime/hash_test.go.html#899463">L</a></span><span class="op" id="899629">;</span>&nbsp;<span class="ident" id="899631"><a href="/runtime/hash_test.go.html#899616">i</a></span><span class="op" id="899632">++</span>&nbsp;<span class="op" id="899635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899639"><a href="/runtime/hash_test.go.html#899590">c</a></span><span class="op" id="899640">[</span><span class="num" id="899641">0</span><span class="op" id="899642">]</span>&nbsp;<span class="op" id="899644">=</span>&nbsp;<span class="ident" id="899646"><a href="/runtime/hash_test.go.html#899399">S</a></span><span class="op" id="899647">[</span><span class="ident" id="899648"><a href="/runtime/hash_test.go.html#899616">i</a></span><span class="op" id="899649">]</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899653">for</span>&nbsp;<span class="ident" id="899657">j</span>&nbsp;<span class="op" id="899659">:=</span>&nbsp;<span class="num" id="899662">0</span><span class="op" id="899663">;</span>&nbsp;<span class="ident" id="899665"><a href="/runtime/hash_test.go.html#899657">j</a></span>&nbsp;<span class="op" id="899667">&lt;</span>&nbsp;<span class="ident" id="899669"><a href="/runtime/hash_test.go.html#899463">L</a></span><span class="op" id="899670">;</span>&nbsp;<span class="ident" id="899672"><a href="/runtime/hash_test.go.html#899657">j</a></span><span class="op" id="899673">++</span>&nbsp;<span class="op" id="899676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899681"><a href="/runtime/hash_test.go.html#899590">c</a></span><span class="op" id="899682">[</span><span class="num" id="899683">1</span><span class="op" id="899684">]</span>&nbsp;<span class="op" id="899686">=</span>&nbsp;<span class="ident" id="899688"><a href="/runtime/hash_test.go.html#899399">S</a></span><span class="op" id="899689">[</span><span class="ident" id="899690"><a href="/runtime/hash_test.go.html#899657">j</a></span><span class="op" id="899691">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899696">for</span>&nbsp;<span class="ident" id="899700">k</span>&nbsp;<span class="op" id="899702">:=</span>&nbsp;<span class="num" id="899705">0</span><span class="op" id="899706">;</span>&nbsp;<span class="ident" id="899708"><a href="/runtime/hash_test.go.html#899700">k</a></span>&nbsp;<span class="op" id="899710">&lt;</span>&nbsp;<span class="ident" id="899712"><a href="/runtime/hash_test.go.html#899463">L</a></span><span class="op" id="899713">;</span>&nbsp;<span class="ident" id="899715"><a href="/runtime/hash_test.go.html#899700">k</a></span><span class="op" id="899716">++</span>&nbsp;<span class="op" id="899719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899725"><a href="/runtime/hash_test.go.html#899590">c</a></span><span class="op" id="899726">[</span><span class="num" id="899727">2</span><span class="op" id="899728">]</span>&nbsp;<span class="op" id="899730">=</span>&nbsp;<span class="ident" id="899732"><a href="/runtime/hash_test.go.html#899399">S</a></span><span class="op" id="899733">[</span><span class="ident" id="899734"><a href="/runtime/hash_test.go.html#899700">k</a></span><span class="op" id="899735">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899741">for</span>&nbsp;<span class="ident" id="899745">x</span>&nbsp;<span class="op" id="899747">:=</span>&nbsp;<span class="num" id="899750">0</span><span class="op" id="899751">;</span>&nbsp;<span class="ident" id="899753"><a href="/runtime/hash_test.go.html#899745">x</a></span>&nbsp;<span class="op" id="899755">&lt;</span>&nbsp;<span class="ident" id="899757"><a href="/runtime/hash_test.go.html#899463">L</a></span><span class="op" id="899758">;</span>&nbsp;<span class="ident" id="899760"><a href="/runtime/hash_test.go.html#899745">x</a></span><span class="op" id="899761">++</span>&nbsp;<span class="op" id="899764">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899771"><a href="/runtime/hash_test.go.html#899590">c</a></span><span class="op" id="899772">[</span><span class="num" id="899773">3</span><span class="op" id="899774">]</span>&nbsp;<span class="op" id="899776">=</span>&nbsp;<span class="ident" id="899778"><a href="/runtime/hash_test.go.html#899399">S</a></span><span class="op" id="899779">[</span><span class="ident" id="899780"><a href="/runtime/hash_test.go.html#899745">x</a></span><span class="op" id="899781">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899788"><a href="/runtime/hash_test.go.html#899571">h</a></span><span class="op" id="899789">.</span><span class="ident" id="899790">addB</span><span class="op" id="899794">(</span><span class="ident" id="899795"><a href="/runtime/hash_test.go.html#899475">b</a></span><span class="op" id="899796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899811">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="899814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899817"><a href="/runtime/hash_test.go.html#899571">h</a></span><span class="op" id="899818">.</span><span class="ident" id="899819">check</span><span class="op" id="899824">(</span><span class="ident" id="899825"><a href="/runtime/hash_test.go.html#899340">t</a></span><span class="op" id="899826">)</span><br>
<span class="lineno"></span><span class="op" id="899828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="899831">//&nbsp;Make&nbsp;sure&nbsp;different&nbsp;seed&nbsp;values&nbsp;generate&nbsp;different&nbsp;hashes.</span><br>
<span class="lineno">540</span><span class="keyword" id="899893">func</span>&nbsp;<span class="ident" id="899898">TestSmhasherSeed</span><span class="op" id="899914">(</span><span class="ident" id="899915">t</span>&nbsp;<span class="op" id="899917">*</span><span class="ident" id="899918"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="899925">.</span><span class="ident" id="899926">T</span><span class="op" id="899927">)</span>&nbsp;<span class="op" id="899929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899932">h</span>&nbsp;<span class="op" id="899934">:=</span>&nbsp;<span class="ident" id="899937"><a href="/runtime/hash_test.go.html#889125">newHashSet</a></span><span class="op" id="899947">(</span><span class="op" id="899948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899951">const</span>&nbsp;<span class="ident" id="899957">N</span>&nbsp;<span class="op" id="899959">=</span>&nbsp;<span class="num" id="899961">100000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="899969">s</span>&nbsp;<span class="op" id="899971">:=</span>&nbsp;<span class="string" id="899974">&#34;hello&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="899983">for</span>&nbsp;<span class="ident" id="899987">i</span>&nbsp;<span class="op" id="899989">:=</span>&nbsp;<span class="num" id="899992">0</span><span class="op" id="899993">;</span>&nbsp;<span class="ident" id="899995"><a href="/runtime/hash_test.go.html#899987">i</a></span>&nbsp;<span class="op" id="899997">&lt;</span>&nbsp;<span class="ident" id="899999"><a href="/runtime/hash_test.go.html#899957">N</a></span><span class="op" id="900000">;</span>&nbsp;<span class="ident" id="900002"><a href="/runtime/hash_test.go.html#899987">i</a></span><span class="op" id="900003">++</span>&nbsp;<span class="op" id="900006">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900010"><a href="/runtime/hash_test.go.html#899932">h</a></span><span class="op" id="900011">.</span><span class="ident" id="900012">addS_seed</span><span class="op" id="900021">(</span><span class="ident" id="900022"><a href="/runtime/hash_test.go.html#899969">s</a></span><span class="op" id="900023">,</span>&nbsp;<span class="builtintype" id="900025">uintptr</span><span class="op" id="900032">(</span><span class="ident" id="900033"><a href="/runtime/hash_test.go.html#899987">i</a></span><span class="op" id="900034">)</span><span class="op" id="900035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="900038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900041"><a href="/runtime/hash_test.go.html#899932">h</a></span><span class="op" id="900042">.</span><span class="ident" id="900043">check</span><span class="op" id="900048">(</span><span class="ident" id="900049"><a href="/runtime/hash_test.go.html#899915">t</a></span><span class="op" id="900050">)</span><br>
<span class="lineno"></span><span class="op" id="900052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="900055">//&nbsp;size&nbsp;of&nbsp;the&nbsp;hash&nbsp;output&nbsp;(32&nbsp;or&nbsp;64&nbsp;bits)</span><br>
<span class="lineno"></span><span class="keyword" id="900098">const</span>&nbsp;<span class="ident" id="900104">hashSize</span>&nbsp;<span class="op" id="900113">=</span>&nbsp;<span class="num" id="900115">32</span>&nbsp;<span class="op" id="900118">+</span>&nbsp;<span class="builtintype" id="900120">int</span><span class="op" id="900123">(</span><span class="op" id="900124">^</span><span class="builtintype" id="900125">uintptr</span><span class="op" id="900132">(</span><span class="num" id="900133">0</span><span class="op" id="900134">)</span><span class="op" id="900135">&gt;&gt;</span><span class="num" id="900137">63</span><span class="op" id="900139">&lt;&lt;</span><span class="num" id="900141">5</span><span class="op" id="900142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="900145">func</span>&nbsp;<span class="ident" id="900150">randBytes</span><span class="op" id="900159">(</span><span class="ident" id="900160">r</span>&nbsp;<span class="op" id="900162">*</span><span class="ident" id="900163"><a href="/runtime/hash_test.go.html#887958">rand</a></span><span class="op" id="900167">.</span><span class="ident" id="900168">Rand</span><span class="op" id="900172">,</span>&nbsp;<span class="ident" id="900174">b</span>&nbsp;<span class="op" id="900176">[</span><span class="op" id="900177">]</span><span class="builtintype" id="900178">byte</span><span class="op" id="900182">)</span>&nbsp;<span class="op" id="900184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="900187">for</span>&nbsp;<span class="ident" id="900191">i</span>&nbsp;<span class="op" id="900193">:=</span>&nbsp;<span class="keyword" id="900196">range</span>&nbsp;<span class="ident" id="900202"><a href="/runtime/hash_test.go.html#900174">b</a></span>&nbsp;<span class="op" id="900204">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900208"><a href="/runtime/hash_test.go.html#900174">b</a></span><span class="op" id="900209">[</span><span class="ident" id="900210"><a href="/runtime/hash_test.go.html#900191">i</a></span><span class="op" id="900211">]</span>&nbsp;<span class="op" id="900213">=</span>&nbsp;<span class="builtintype" id="900215">byte</span><span class="op" id="900219">(</span><span class="ident" id="900220"><a href="/runtime/hash_test.go.html#900160">r</a></span><span class="op" id="900221">.</span><span class="ident" id="900222">Uint32</span><span class="op" id="900228">(</span><span class="op" id="900229">)</span><span class="op" id="900230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="900233">}</span><br>
<span class="lineno"></span><span class="op" id="900235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="900238">func</span>&nbsp;<span class="ident" id="900243">benchmarkHash</span><span class="op" id="900256">(</span><span class="ident" id="900257">b</span>&nbsp;<span class="op" id="900259">*</span><span class="ident" id="900260"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900267">.</span><span class="ident" id="900268">B</span><span class="op" id="900269">,</span>&nbsp;<span class="ident" id="900271">n</span>&nbsp;<span class="builtintype" id="900273">int</span><span class="op" id="900276">)</span>&nbsp;<span class="op" id="900278">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900281">s</span>&nbsp;<span class="op" id="900283">:=</span>&nbsp;<span class="ident" id="900286"><a href="/runtime/hash_test.go.html#887984">strings</a></span><span class="op" id="900293">.</span><span class="ident" id="900294">Repeat</span><span class="op" id="900300">(</span><span class="string" id="900301">&#34;A&#34;</span><span class="op" id="900304">,</span>&nbsp;<span class="ident" id="900306"><a href="/runtime/hash_test.go.html#900271">n</a></span><span class="op" id="900307">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="900311">for</span>&nbsp;<span class="ident" id="900315">i</span>&nbsp;<span class="op" id="900317">:=</span>&nbsp;<span class="num" id="900320">0</span><span class="op" id="900321">;</span>&nbsp;<span class="ident" id="900323"><a href="/runtime/hash_test.go.html#900315">i</a></span>&nbsp;<span class="op" id="900325">&lt;</span>&nbsp;<span class="ident" id="900327"><a href="/runtime/hash_test.go.html#900257">b</a></span><span class="op" id="900328">.</span><span class="ident" id="900329">N</span><span class="op" id="900330">;</span>&nbsp;<span class="ident" id="900332"><a href="/runtime/hash_test.go.html#900315">i</a></span><span class="op" id="900333">++</span>&nbsp;<span class="op" id="900336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900340"><a href="/runtime/export_test.go.html#7719334">StringHash</a></span><span class="op" id="900350">(</span><span class="ident" id="900351"><a href="/runtime/hash_test.go.html#900281">s</a></span><span class="op" id="900352">,</span>&nbsp;<span class="num" id="900354">0</span><span class="op" id="900355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="900358">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="900361"><a href="/runtime/hash_test.go.html#900257">b</a></span><span class="op" id="900362">.</span><span class="ident" id="900363">SetBytes</span><span class="op" id="900371">(</span><span class="ident" id="900372">int64</span><span class="op" id="900377">(</span><span class="ident" id="900378"><a href="/runtime/hash_test.go.html#900271">n</a></span><span class="op" id="900379">)</span><span class="op" id="900380">)</span><br>
<span class="lineno"></span><span class="op" id="900382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="900385">func</span>&nbsp;<span class="ident" id="900390">BenchmarkHash5</span><span class="op" id="900404">(</span><span class="ident" id="900405">b</span>&nbsp;<span class="op" id="900407">*</span><span class="ident" id="900408"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900415">.</span><span class="ident" id="900416">B</span><span class="op" id="900417">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="900423">{</span>&nbsp;<span class="ident" id="900425"><a href="/runtime/hash_test.go.html#900243">benchmarkHash</a></span><span class="op" id="900438">(</span><span class="ident" id="900439"><a href="/runtime/hash_test.go.html#900405">b</a></span><span class="op" id="900440">,</span>&nbsp;<span class="num" id="900442">5</span><span class="op" id="900443">)</span>&nbsp;<span class="op" id="900445">}</span><br>
<span class="lineno"></span><span class="keyword" id="900447">func</span>&nbsp;<span class="ident" id="900452">BenchmarkHash16</span><span class="op" id="900467">(</span><span class="ident" id="900468">b</span>&nbsp;<span class="op" id="900470">*</span><span class="ident" id="900471"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900478">.</span><span class="ident" id="900479">B</span><span class="op" id="900480">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="900485">{</span>&nbsp;<span class="ident" id="900487"><a href="/runtime/hash_test.go.html#900243">benchmarkHash</a></span><span class="op" id="900500">(</span><span class="ident" id="900501"><a href="/runtime/hash_test.go.html#900468">b</a></span><span class="op" id="900502">,</span>&nbsp;<span class="num" id="900504">16</span><span class="op" id="900506">)</span>&nbsp;<span class="op" id="900508">}</span><br>
<span class="lineno">570</span><span class="keyword" id="900510">func</span>&nbsp;<span class="ident" id="900515">BenchmarkHash64</span><span class="op" id="900530">(</span><span class="ident" id="900531">b</span>&nbsp;<span class="op" id="900533">*</span><span class="ident" id="900534"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900541">.</span><span class="ident" id="900542">B</span><span class="op" id="900543">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="900548">{</span>&nbsp;<span class="ident" id="900550"><a href="/runtime/hash_test.go.html#900243">benchmarkHash</a></span><span class="op" id="900563">(</span><span class="ident" id="900564"><a href="/runtime/hash_test.go.html#900531">b</a></span><span class="op" id="900565">,</span>&nbsp;<span class="num" id="900567">64</span><span class="op" id="900569">)</span>&nbsp;<span class="op" id="900571">}</span><br>
<span class="lineno"></span><span class="keyword" id="900573">func</span>&nbsp;<span class="ident" id="900578">BenchmarkHash1024</span><span class="op" id="900595">(</span><span class="ident" id="900596">b</span>&nbsp;<span class="op" id="900598">*</span><span class="ident" id="900599"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900606">.</span><span class="ident" id="900607">B</span><span class="op" id="900608">)</span>&nbsp;&nbsp;<span class="op" id="900611">{</span>&nbsp;<span class="ident" id="900613"><a href="/runtime/hash_test.go.html#900243">benchmarkHash</a></span><span class="op" id="900626">(</span><span class="ident" id="900627"><a href="/runtime/hash_test.go.html#900596">b</a></span><span class="op" id="900628">,</span>&nbsp;<span class="num" id="900630">1024</span><span class="op" id="900634">)</span>&nbsp;<span class="op" id="900636">}</span><br>
<span class="lineno"></span><span class="keyword" id="900638">func</span>&nbsp;<span class="ident" id="900643">BenchmarkHash65536</span><span class="op" id="900661">(</span><span class="ident" id="900662">b</span>&nbsp;<span class="op" id="900664">*</span><span class="ident" id="900665"><a href="/runtime/hash_test.go.html#887995">testing</a></span><span class="op" id="900672">.</span><span class="ident" id="900673">B</span><span class="op" id="900674">)</span>&nbsp;<span class="op" id="900676">{</span>&nbsp;<span class="ident" id="900678"><a href="/runtime/hash_test.go.html#900243">benchmarkHash</a></span><span class="op" id="900691">(</span><span class="ident" id="900692"><a href="/runtime/hash_test.go.html#900662">b</a></span><span class="op" id="900693">,</span>&nbsp;<span class="num" id="900695">65536</span><span class="op" id="900700">)</span>&nbsp;<span class="op" id="900702">}</span>
</div>
</body>
</html>
