<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4880961">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4881017">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4881071">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4881122">package</span>&nbsp;<span class="ident" id="4881130">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4881136">import</span>&nbsp;<span class="op" id="4881143">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4881146">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4881155">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4881173">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4881176">//&nbsp;The&nbsp;algorithm&nbsp;uses&nbsp;at&nbsp;most&nbsp;sniffLen&nbsp;bytes&nbsp;to&nbsp;make&nbsp;its&nbsp;decision.</span><br>
<span class="lineno"></span><span class="keyword" id="4881243">const</span>&nbsp;<span class="ident" id="4881249">sniffLen</span>&nbsp;<span class="op" id="4881258">=</span>&nbsp;<span class="num" id="4881260">512</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4881265">//&nbsp;DetectContentType&nbsp;implements&nbsp;the&nbsp;algorithm&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="4881321">//&nbsp;at&nbsp;http://mimesniff.spec.whatwg.org/&nbsp;to&nbsp;determine&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4881378">//&nbsp;Content-Type&nbsp;of&nbsp;the&nbsp;given&nbsp;data.&nbsp;&nbsp;It&nbsp;considers&nbsp;at&nbsp;most&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4881439">//&nbsp;first&nbsp;512&nbsp;bytes&nbsp;of&nbsp;data.&nbsp;&nbsp;DetectContentType&nbsp;always&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4881501">//&nbsp;a&nbsp;valid&nbsp;MIME&nbsp;type:&nbsp;if&nbsp;it&nbsp;cannot&nbsp;determine&nbsp;a&nbsp;more&nbsp;specific&nbsp;one,&nbsp;it</span><br>
<span class="lineno">20</span><span class="comment" id="4881570">//&nbsp;returns&nbsp;&#34;application/octet-stream&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4881609">func</span>&nbsp;<span class="ident" id="4881614">DetectContentType</span><span class="op" id="4881631">(</span><span class="ident" id="4881632">data</span>&nbsp;<span class="op" id="4881637">[</span><span class="op" id="4881638">]</span><span class="builtintype" id="4881639">byte</span><span class="op" id="4881643">)</span>&nbsp;<span class="builtintype" id="4881645">string</span>&nbsp;<span class="op" id="4881652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881655">if</span>&nbsp;<span class="builtinfunc" id="4881658">len</span><span class="op" id="4881661">(</span><span class="ident" id="4881662">data</span><span class="op" id="4881666">)</span>&nbsp;<span class="op" id="4881668">&gt;</span>&nbsp;<span class="ident" id="4881670">sniffLen</span>&nbsp;<span class="op" id="4881679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881683">data</span>&nbsp;<span class="op" id="4881688">=</span>&nbsp;<span class="ident" id="4881690">data</span><span class="op" id="4881694">[</span><span class="op" id="4881695">:</span><span class="ident" id="4881696">sniffLen</span><span class="op" id="4881704">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881707">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881711">//&nbsp;Index&nbsp;of&nbsp;the&nbsp;first&nbsp;non-whitespace&nbsp;byte&nbsp;in&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881763">firstNonWS</span>&nbsp;<span class="op" id="4881774">:=</span>&nbsp;<span class="num" id="4881777">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881780">for</span>&nbsp;<span class="op" id="4881784">;</span>&nbsp;<span class="ident" id="4881786">firstNonWS</span>&nbsp;<span class="op" id="4881797">&lt;</span>&nbsp;<span class="builtinfunc" id="4881799">len</span><span class="op" id="4881802">(</span><span class="ident" id="4881803">data</span><span class="op" id="4881807">)</span>&nbsp;<span class="op" id="4881809">&amp;&amp;</span>&nbsp;<span class="ident" id="4881812">isWS</span><span class="op" id="4881816">(</span><span class="ident" id="4881817">data</span><span class="op" id="4881821">[</span><span class="ident" id="4881822">firstNonWS</span><span class="op" id="4881832">]</span><span class="op" id="4881833">)</span><span class="op" id="4881834">;</span>&nbsp;<span class="ident" id="4881836">firstNonWS</span><span class="op" id="4881846">++</span>&nbsp;<span class="op" id="4881849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881852">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881856">for</span>&nbsp;<span class="ident" id="4881860">_</span><span class="op" id="4881861">,</span>&nbsp;<span class="ident" id="4881863">sig</span>&nbsp;<span class="op" id="4881867">:=</span>&nbsp;<span class="keyword" id="4881870">range</span>&nbsp;<span class="ident" id="4881876">sniffSignatures</span>&nbsp;<span class="op" id="4881892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881896">if</span>&nbsp;<span class="ident" id="4881899">ct</span>&nbsp;<span class="op" id="4881902">:=</span>&nbsp;<span class="ident" id="4881905">sig</span><span class="op" id="4881908">.</span><span class="ident" id="4881909">match</span><span class="op" id="4881914">(</span><span class="ident" id="4881915">data</span><span class="op" id="4881919">,</span>&nbsp;<span class="ident" id="4881921">firstNonWS</span><span class="op" id="4881931">)</span><span class="op" id="4881932">;</span>&nbsp;<span class="ident" id="4881934">ct</span>&nbsp;<span class="op" id="4881937">!=</span>&nbsp;<span class="string" id="4881940">&#34;&#34;</span>&nbsp;<span class="op" id="4881943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881948">return</span>&nbsp;<span class="ident" id="4881955">ct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881960">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881967">return</span>&nbsp;<span class="string" id="4881974">&#34;application/octet-stream&#34;</span>&nbsp;<span class="comment" id="4882001">//&nbsp;fallback</span><br>
<span class="lineno"></span><span class="op" id="4882013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="4882016">func</span>&nbsp;<span class="ident" id="4882021">isWS</span><span class="op" id="4882025">(</span><span class="ident" id="4882026">b</span>&nbsp;<span class="builtintype" id="4882028">byte</span><span class="op" id="4882032">)</span>&nbsp;<span class="builtintype" id="4882034">bool</span>&nbsp;<span class="op" id="4882039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882042">return</span>&nbsp;<span class="ident" id="4882049">bytes</span><span class="op" id="4882054">.</span><span class="ident" id="4882055">IndexByte</span><span class="op" id="4882064">(</span><span class="op" id="4882065">[</span><span class="op" id="4882066">]</span><span class="builtintype" id="4882067">byte</span><span class="op" id="4882071">(</span><span class="string" id="4882072">&#34;\t\n\x0C\r&nbsp;&#34;</span><span class="op" id="4882085">)</span><span class="op" id="4882086">,</span>&nbsp;<span class="ident" id="4882088">b</span><span class="op" id="4882089">)</span>&nbsp;<span class="op" id="4882091">!=</span>&nbsp;<span class="op" id="4882094">-</span><span class="num" id="4882095">1</span><br>
<span class="lineno"></span><span class="op" id="4882097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4882100">type</span>&nbsp;<span class="ident" id="4882105">sniffSig</span>&nbsp;<span class="keyword" id="4882114">interface</span>&nbsp;<span class="op" id="4882124">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882127">//&nbsp;match&nbsp;returns&nbsp;the&nbsp;MIME&nbsp;type&nbsp;of&nbsp;the&nbsp;data,&nbsp;or&nbsp;&#34;&#34;&nbsp;if&nbsp;unknown.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882190">match</span><span class="op" id="4882195">(</span><span class="ident" id="4882196">data</span>&nbsp;<span class="op" id="4882201">[</span><span class="op" id="4882202">]</span><span class="builtintype" id="4882203">byte</span><span class="op" id="4882207">,</span>&nbsp;<span class="ident" id="4882209">firstNonWS</span>&nbsp;<span class="builtintype" id="4882220">int</span><span class="op" id="4882223">)</span>&nbsp;<span class="builtintype" id="4882225">string</span><br>
<span class="lineno"></span><span class="op" id="4882232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4882235">//&nbsp;Data&nbsp;matching&nbsp;the&nbsp;table&nbsp;in&nbsp;section&nbsp;6.</span><br>
<span class="lineno">50</span><span class="keyword" id="4882276">var</span>&nbsp;<span class="ident" id="4882280">sniffSignatures</span>&nbsp;<span class="op" id="4882296">=</span>&nbsp;<span class="op" id="4882298">[</span><span class="op" id="4882299">]</span><span class="ident" id="4882300">sniffSig</span><span class="op" id="4882308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882311">htmlSig</span><span class="op" id="4882318">(</span><span class="string" id="4882319">&#34;&lt;!DOCTYPE&nbsp;HTML&#34;</span><span class="op" id="4882335">)</span><span class="op" id="4882336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882339">htmlSig</span><span class="op" id="4882346">(</span><span class="string" id="4882347">&#34;&lt;HTML&#34;</span><span class="op" id="4882354">)</span><span class="op" id="4882355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882358">htmlSig</span><span class="op" id="4882365">(</span><span class="string" id="4882366">&#34;&lt;HEAD&#34;</span><span class="op" id="4882373">)</span><span class="op" id="4882374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882377">htmlSig</span><span class="op" id="4882384">(</span><span class="string" id="4882385">&#34;&lt;SCRIPT&#34;</span><span class="op" id="4882394">)</span><span class="op" id="4882395">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882398">htmlSig</span><span class="op" id="4882405">(</span><span class="string" id="4882406">&#34;&lt;IFRAME&#34;</span><span class="op" id="4882415">)</span><span class="op" id="4882416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882419">htmlSig</span><span class="op" id="4882426">(</span><span class="string" id="4882427">&#34;&lt;H1&#34;</span><span class="op" id="4882432">)</span><span class="op" id="4882433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882436">htmlSig</span><span class="op" id="4882443">(</span><span class="string" id="4882444">&#34;&lt;DIV&#34;</span><span class="op" id="4882450">)</span><span class="op" id="4882451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882454">htmlSig</span><span class="op" id="4882461">(</span><span class="string" id="4882462">&#34;&lt;FONT&#34;</span><span class="op" id="4882469">)</span><span class="op" id="4882470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882473">htmlSig</span><span class="op" id="4882480">(</span><span class="string" id="4882481">&#34;&lt;TABLE&#34;</span><span class="op" id="4882489">)</span><span class="op" id="4882490">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882493">htmlSig</span><span class="op" id="4882500">(</span><span class="string" id="4882501">&#34;&lt;A&#34;</span><span class="op" id="4882505">)</span><span class="op" id="4882506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882509">htmlSig</span><span class="op" id="4882516">(</span><span class="string" id="4882517">&#34;&lt;STYLE&#34;</span><span class="op" id="4882525">)</span><span class="op" id="4882526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882529">htmlSig</span><span class="op" id="4882536">(</span><span class="string" id="4882537">&#34;&lt;TITLE&#34;</span><span class="op" id="4882545">)</span><span class="op" id="4882546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882549">htmlSig</span><span class="op" id="4882556">(</span><span class="string" id="4882557">&#34;&lt;B&#34;</span><span class="op" id="4882561">)</span><span class="op" id="4882562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882565">htmlSig</span><span class="op" id="4882572">(</span><span class="string" id="4882573">&#34;&lt;BODY&#34;</span><span class="op" id="4882580">)</span><span class="op" id="4882581">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882584">htmlSig</span><span class="op" id="4882591">(</span><span class="string" id="4882592">&#34;&lt;BR&#34;</span><span class="op" id="4882597">)</span><span class="op" id="4882598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882601">htmlSig</span><span class="op" id="4882608">(</span><span class="string" id="4882609">&#34;&lt;P&#34;</span><span class="op" id="4882613">)</span><span class="op" id="4882614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882617">htmlSig</span><span class="op" id="4882624">(</span><span class="string" id="4882625">&#34;&lt;!--&#34;</span><span class="op" id="4882631">)</span><span class="op" id="4882632">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882636">&amp;</span><span class="ident" id="4882637">maskedSig</span><span class="op" id="4882646">{</span><span class="ident" id="4882647">mask</span><span class="op" id="4882651">:</span>&nbsp;<span class="op" id="4882653">[</span><span class="op" id="4882654">]</span><span class="builtintype" id="4882655">byte</span><span class="op" id="4882659">(</span><span class="string" id="4882660">&#34;\xFF\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="4882682">)</span><span class="op" id="4882683">,</span>&nbsp;<span class="ident" id="4882685">pat</span><span class="op" id="4882688">:</span>&nbsp;<span class="op" id="4882690">[</span><span class="op" id="4882691">]</span><span class="builtintype" id="4882692">byte</span><span class="op" id="4882696">(</span><span class="string" id="4882697">&#34;&lt;?xml&#34;</span><span class="op" id="4882704">)</span><span class="op" id="4882705">,</span>&nbsp;<span class="ident" id="4882707">skipWS</span><span class="op" id="4882713">:</span>&nbsp;<span class="builtintype" id="4882715">true</span><span class="op" id="4882719">,</span>&nbsp;<span class="ident" id="4882721">ct</span><span class="op" id="4882723">:</span>&nbsp;<span class="string" id="4882725">&#34;text/xml;&nbsp;charset=utf-8&#34;</span><span class="op" id="4882750">}</span><span class="op" id="4882751">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882755">&amp;</span><span class="ident" id="4882756">exactSig</span><span class="op" id="4882764">{</span><span class="op" id="4882765">[</span><span class="op" id="4882766">]</span><span class="builtintype" id="4882767">byte</span><span class="op" id="4882771">(</span><span class="string" id="4882772">&#34;%PDF-&#34;</span><span class="op" id="4882779">)</span><span class="op" id="4882780">,</span>&nbsp;<span class="string" id="4882782">&#34;application/pdf&#34;</span><span class="op" id="4882799">}</span><span class="op" id="4882800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882803">&amp;</span><span class="ident" id="4882804">exactSig</span><span class="op" id="4882812">{</span><span class="op" id="4882813">[</span><span class="op" id="4882814">]</span><span class="builtintype" id="4882815">byte</span><span class="op" id="4882819">(</span><span class="string" id="4882820">&#34;%!PS-Adobe-&#34;</span><span class="op" id="4882833">)</span><span class="op" id="4882834">,</span>&nbsp;<span class="string" id="4882836">&#34;application/postscript&#34;</span><span class="op" id="4882860">}</span><span class="op" id="4882861">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882865">//&nbsp;UTF&nbsp;BOMs.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882879">&amp;</span><span class="ident" id="4882880">maskedSig</span><span class="op" id="4882889">{</span><span class="ident" id="4882890">mask</span><span class="op" id="4882894">:</span>&nbsp;<span class="op" id="4882896">[</span><span class="op" id="4882897">]</span><span class="builtintype" id="4882898">byte</span><span class="op" id="4882902">(</span><span class="string" id="4882903">&#34;\xFF\xFF\x00\x00&#34;</span><span class="op" id="4882921">)</span><span class="op" id="4882922">,</span>&nbsp;<span class="ident" id="4882924">pat</span><span class="op" id="4882927">:</span>&nbsp;<span class="op" id="4882929">[</span><span class="op" id="4882930">]</span><span class="builtintype" id="4882931">byte</span><span class="op" id="4882935">(</span><span class="string" id="4882936">&#34;\xFE\xFF\x00\x00&#34;</span><span class="op" id="4882954">)</span><span class="op" id="4882955">,</span>&nbsp;<span class="ident" id="4882957">ct</span><span class="op" id="4882959">:</span>&nbsp;<span class="string" id="4882961">&#34;text/plain;&nbsp;charset=utf-16be&#34;</span><span class="op" id="4882991">}</span><span class="op" id="4882992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882995">&amp;</span><span class="ident" id="4882996">maskedSig</span><span class="op" id="4883005">{</span><span class="ident" id="4883006">mask</span><span class="op" id="4883010">:</span>&nbsp;<span class="op" id="4883012">[</span><span class="op" id="4883013">]</span><span class="builtintype" id="4883014">byte</span><span class="op" id="4883018">(</span><span class="string" id="4883019">&#34;\xFF\xFF\x00\x00&#34;</span><span class="op" id="4883037">)</span><span class="op" id="4883038">,</span>&nbsp;<span class="ident" id="4883040">pat</span><span class="op" id="4883043">:</span>&nbsp;<span class="op" id="4883045">[</span><span class="op" id="4883046">]</span><span class="builtintype" id="4883047">byte</span><span class="op" id="4883051">(</span><span class="string" id="4883052">&#34;\xFF\xFE\x00\x00&#34;</span><span class="op" id="4883070">)</span><span class="op" id="4883071">,</span>&nbsp;<span class="ident" id="4883073">ct</span><span class="op" id="4883075">:</span>&nbsp;<span class="string" id="4883077">&#34;text/plain;&nbsp;charset=utf-16le&#34;</span><span class="op" id="4883107">}</span><span class="op" id="4883108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883111">&amp;</span><span class="ident" id="4883112">maskedSig</span><span class="op" id="4883121">{</span><span class="ident" id="4883122">mask</span><span class="op" id="4883126">:</span>&nbsp;<span class="op" id="4883128">[</span><span class="op" id="4883129">]</span><span class="builtintype" id="4883130">byte</span><span class="op" id="4883134">(</span><span class="string" id="4883135">&#34;\xFF\xFF\xFF\x00&#34;</span><span class="op" id="4883153">)</span><span class="op" id="4883154">,</span>&nbsp;<span class="ident" id="4883156">pat</span><span class="op" id="4883159">:</span>&nbsp;<span class="op" id="4883161">[</span><span class="op" id="4883162">]</span><span class="builtintype" id="4883163">byte</span><span class="op" id="4883167">(</span><span class="string" id="4883168">&#34;\xEF\xBB\xBF\x00&#34;</span><span class="op" id="4883186">)</span><span class="op" id="4883187">,</span>&nbsp;<span class="ident" id="4883189">ct</span><span class="op" id="4883191">:</span>&nbsp;<span class="string" id="4883193">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="4883220">}</span><span class="op" id="4883221">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883225">&amp;</span><span class="ident" id="4883226">exactSig</span><span class="op" id="4883234">{</span><span class="op" id="4883235">[</span><span class="op" id="4883236">]</span><span class="builtintype" id="4883237">byte</span><span class="op" id="4883241">(</span><span class="string" id="4883242">&#34;GIF87a&#34;</span><span class="op" id="4883250">)</span><span class="op" id="4883251">,</span>&nbsp;<span class="string" id="4883253">&#34;image/gif&#34;</span><span class="op" id="4883264">}</span><span class="op" id="4883265">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883268">&amp;</span><span class="ident" id="4883269">exactSig</span><span class="op" id="4883277">{</span><span class="op" id="4883278">[</span><span class="op" id="4883279">]</span><span class="builtintype" id="4883280">byte</span><span class="op" id="4883284">(</span><span class="string" id="4883285">&#34;GIF89a&#34;</span><span class="op" id="4883293">)</span><span class="op" id="4883294">,</span>&nbsp;<span class="string" id="4883296">&#34;image/gif&#34;</span><span class="op" id="4883307">}</span><span class="op" id="4883308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883311">&amp;</span><span class="ident" id="4883312">exactSig</span><span class="op" id="4883320">{</span><span class="op" id="4883321">[</span><span class="op" id="4883322">]</span><span class="builtintype" id="4883323">byte</span><span class="op" id="4883327">(</span><span class="string" id="4883328">&#34;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&#34;</span><span class="op" id="4883362">)</span><span class="op" id="4883363">,</span>&nbsp;<span class="string" id="4883365">&#34;image/png&#34;</span><span class="op" id="4883376">}</span><span class="op" id="4883377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883380">&amp;</span><span class="ident" id="4883381">exactSig</span><span class="op" id="4883389">{</span><span class="op" id="4883390">[</span><span class="op" id="4883391">]</span><span class="builtintype" id="4883392">byte</span><span class="op" id="4883396">(</span><span class="string" id="4883397">&#34;\xFF\xD8\xFF&#34;</span><span class="op" id="4883411">)</span><span class="op" id="4883412">,</span>&nbsp;<span class="string" id="4883414">&#34;image/jpeg&#34;</span><span class="op" id="4883426">}</span><span class="op" id="4883427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883430">&amp;</span><span class="ident" id="4883431">exactSig</span><span class="op" id="4883439">{</span><span class="op" id="4883440">[</span><span class="op" id="4883441">]</span><span class="builtintype" id="4883442">byte</span><span class="op" id="4883446">(</span><span class="string" id="4883447">&#34;BM&#34;</span><span class="op" id="4883451">)</span><span class="op" id="4883452">,</span>&nbsp;<span class="string" id="4883454">&#34;image/bmp&#34;</span><span class="op" id="4883465">}</span><span class="op" id="4883466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883469">&amp;</span><span class="ident" id="4883470">maskedSig</span><span class="op" id="4883479">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883483">mask</span><span class="op" id="4883487">:</span>&nbsp;<span class="op" id="4883489">[</span><span class="op" id="4883490">]</span><span class="builtintype" id="4883491">byte</span><span class="op" id="4883495">(</span><span class="string" id="4883496">&#34;\xFF\xFF\xFF\xFF\x00\x00\x00\x00\xFF\xFF\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="4883554">)</span><span class="op" id="4883555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883559">pat</span><span class="op" id="4883562">:</span>&nbsp;&nbsp;<span class="op" id="4883565">[</span><span class="op" id="4883566">]</span><span class="builtintype" id="4883567">byte</span><span class="op" id="4883571">(</span><span class="string" id="4883572">&#34;RIFF\x00\x00\x00\x00WEBPVP&#34;</span><span class="op" id="4883600">)</span><span class="op" id="4883601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883605">ct</span><span class="op" id="4883607">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4883611">&#34;image/webp&#34;</span><span class="op" id="4883623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883626">}</span><span class="op" id="4883627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883630">&amp;</span><span class="ident" id="4883631">exactSig</span><span class="op" id="4883639">{</span><span class="op" id="4883640">[</span><span class="op" id="4883641">]</span><span class="builtintype" id="4883642">byte</span><span class="op" id="4883646">(</span><span class="string" id="4883647">&#34;\x00\x00\x01\x00&#34;</span><span class="op" id="4883665">)</span><span class="op" id="4883666">,</span>&nbsp;<span class="string" id="4883668">&#34;image/vnd.microsoft.icon&#34;</span><span class="op" id="4883694">}</span><span class="op" id="4883695">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883698">&amp;</span><span class="ident" id="4883699">exactSig</span><span class="op" id="4883707">{</span><span class="op" id="4883708">[</span><span class="op" id="4883709">]</span><span class="builtintype" id="4883710">byte</span><span class="op" id="4883714">(</span><span class="string" id="4883715">&#34;\x4F\x67\x67\x53\x00&#34;</span><span class="op" id="4883737">)</span><span class="op" id="4883738">,</span>&nbsp;<span class="string" id="4883740">&#34;application/ogg&#34;</span><span class="op" id="4883757">}</span><span class="op" id="4883758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883761">&amp;</span><span class="ident" id="4883762">maskedSig</span><span class="op" id="4883771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883775">mask</span><span class="op" id="4883779">:</span>&nbsp;<span class="op" id="4883781">[</span><span class="op" id="4883782">]</span><span class="builtintype" id="4883783">byte</span><span class="op" id="4883787">(</span><span class="string" id="4883788">&#34;\xFF\xFF\xFF\xFF\x00\x00\x00\x00\xFF\xFF\xFF\xFF&#34;</span><span class="op" id="4883838">)</span><span class="op" id="4883839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883843">pat</span><span class="op" id="4883846">:</span>&nbsp;&nbsp;<span class="op" id="4883849">[</span><span class="op" id="4883850">]</span><span class="builtintype" id="4883851">byte</span><span class="op" id="4883855">(</span><span class="string" id="4883856">&#34;RIFF\x00\x00\x00\x00WAVE&#34;</span><span class="op" id="4883882">)</span><span class="op" id="4883883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883887">ct</span><span class="op" id="4883889">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4883893">&#34;audio/wave&#34;</span><span class="op" id="4883905">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883908">}</span><span class="op" id="4883909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883912">&amp;</span><span class="ident" id="4883913">exactSig</span><span class="op" id="4883921">{</span><span class="op" id="4883922">[</span><span class="op" id="4883923">]</span><span class="builtintype" id="4883924">byte</span><span class="op" id="4883928">(</span><span class="string" id="4883929">&#34;\x1A\x45\xDF\xA3&#34;</span><span class="op" id="4883947">)</span><span class="op" id="4883948">,</span>&nbsp;<span class="string" id="4883950">&#34;video/webm&#34;</span><span class="op" id="4883962">}</span><span class="op" id="4883963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883966">&amp;</span><span class="ident" id="4883967">exactSig</span><span class="op" id="4883975">{</span><span class="op" id="4883976">[</span><span class="op" id="4883977">]</span><span class="builtintype" id="4883978">byte</span><span class="op" id="4883982">(</span><span class="string" id="4883983">&#34;\x52\x61\x72\x20\x1A\x07\x00&#34;</span><span class="op" id="4884013">)</span><span class="op" id="4884014">,</span>&nbsp;<span class="string" id="4884016">&#34;application/x-rar-compressed&#34;</span><span class="op" id="4884046">}</span><span class="op" id="4884047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884050">&amp;</span><span class="ident" id="4884051">exactSig</span><span class="op" id="4884059">{</span><span class="op" id="4884060">[</span><span class="op" id="4884061">]</span><span class="builtintype" id="4884062">byte</span><span class="op" id="4884066">(</span><span class="string" id="4884067">&#34;\x50\x4B\x03\x04&#34;</span><span class="op" id="4884085">)</span><span class="op" id="4884086">,</span>&nbsp;<span class="string" id="4884088">&#34;application/zip&#34;</span><span class="op" id="4884105">}</span><span class="op" id="4884106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884109">&amp;</span><span class="ident" id="4884110">exactSig</span><span class="op" id="4884118">{</span><span class="op" id="4884119">[</span><span class="op" id="4884120">]</span><span class="builtintype" id="4884121">byte</span><span class="op" id="4884125">(</span><span class="string" id="4884126">&#34;\x1F\x8B\x08&#34;</span><span class="op" id="4884140">)</span><span class="op" id="4884141">,</span>&nbsp;<span class="string" id="4884143">&#34;application/x-gzip&#34;</span><span class="op" id="4884163">}</span><span class="op" id="4884164">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4884168">//&nbsp;TODO(dsymonds):&nbsp;Re-enable&nbsp;this&nbsp;when&nbsp;the&nbsp;spec&nbsp;is&nbsp;sorted&nbsp;w.r.t.&nbsp;MP4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4884239">//mp4Sig(0),</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884254">textSig</span><span class="op" id="4884261">(</span><span class="num" id="4884262">0</span><span class="op" id="4884263">)</span><span class="op" id="4884264">,</span>&nbsp;<span class="comment" id="4884266">//&nbsp;should&nbsp;be&nbsp;last</span><br>
<span class="lineno">105</span><span class="op" id="4884284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4884287">type</span>&nbsp;<span class="ident" id="4884292">exactSig</span>&nbsp;<span class="keyword" id="4884301">struct</span>&nbsp;<span class="op" id="4884308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884311">sig</span>&nbsp;<span class="op" id="4884315">[</span><span class="op" id="4884316">]</span><span class="builtintype" id="4884317">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884323">ct</span>&nbsp;&nbsp;<span class="builtintype" id="4884327">string</span><br>
<span class="lineno">110</span><span class="op" id="4884334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4884337">func</span>&nbsp;<span class="op" id="4884342">(</span><span class="ident" id="4884343">e</span>&nbsp;<span class="op" id="4884345">*</span><span class="ident" id="4884346">exactSig</span><span class="op" id="4884354">)</span>&nbsp;<span class="ident" id="4884356">match</span><span class="op" id="4884361">(</span><span class="ident" id="4884362">data</span>&nbsp;<span class="op" id="4884367">[</span><span class="op" id="4884368">]</span><span class="builtintype" id="4884369">byte</span><span class="op" id="4884373">,</span>&nbsp;<span class="ident" id="4884375">firstNonWS</span>&nbsp;<span class="builtintype" id="4884386">int</span><span class="op" id="4884389">)</span>&nbsp;<span class="builtintype" id="4884391">string</span>&nbsp;<span class="op" id="4884398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884401">if</span>&nbsp;<span class="ident" id="4884404">bytes</span><span class="op" id="4884409">.</span><span class="ident" id="4884410">HasPrefix</span><span class="op" id="4884419">(</span><span class="ident" id="4884420">data</span><span class="op" id="4884424">,</span>&nbsp;<span class="ident" id="4884426">e</span><span class="op" id="4884427">.</span><span class="ident" id="4884428">sig</span><span class="op" id="4884431">)</span>&nbsp;<span class="op" id="4884433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884437">return</span>&nbsp;<span class="ident" id="4884444">e</span><span class="op" id="4884445">.</span><span class="ident" id="4884446">ct</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884453">return</span>&nbsp;<span class="string" id="4884460">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4884463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4884466">type</span>&nbsp;<span class="ident" id="4884471">maskedSig</span>&nbsp;<span class="keyword" id="4884481">struct</span>&nbsp;<span class="op" id="4884488">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884491">mask</span><span class="op" id="4884495">,</span>&nbsp;<span class="ident" id="4884497">pat</span>&nbsp;<span class="op" id="4884501">[</span><span class="op" id="4884502">]</span><span class="builtintype" id="4884503">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884509">skipWS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4884519">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884525">ct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4884535">string</span><br>
<span class="lineno"></span><span class="op" id="4884542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="4884545">func</span>&nbsp;<span class="op" id="4884550">(</span><span class="ident" id="4884551">m</span>&nbsp;<span class="op" id="4884553">*</span><span class="ident" id="4884554">maskedSig</span><span class="op" id="4884563">)</span>&nbsp;<span class="ident" id="4884565">match</span><span class="op" id="4884570">(</span><span class="ident" id="4884571">data</span>&nbsp;<span class="op" id="4884576">[</span><span class="op" id="4884577">]</span><span class="builtintype" id="4884578">byte</span><span class="op" id="4884582">,</span>&nbsp;<span class="ident" id="4884584">firstNonWS</span>&nbsp;<span class="builtintype" id="4884595">int</span><span class="op" id="4884598">)</span>&nbsp;<span class="builtintype" id="4884600">string</span>&nbsp;<span class="op" id="4884607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884610">if</span>&nbsp;<span class="ident" id="4884613">m</span><span class="op" id="4884614">.</span><span class="ident" id="4884615">skipWS</span>&nbsp;<span class="op" id="4884622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884626">data</span>&nbsp;<span class="op" id="4884631">=</span>&nbsp;<span class="ident" id="4884633">data</span><span class="op" id="4884637">[</span><span class="ident" id="4884638">firstNonWS</span><span class="op" id="4884648">:</span><span class="op" id="4884649">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884655">if</span>&nbsp;<span class="builtinfunc" id="4884658">len</span><span class="op" id="4884661">(</span><span class="ident" id="4884662">data</span><span class="op" id="4884666">)</span>&nbsp;<span class="op" id="4884668">&lt;</span>&nbsp;<span class="builtinfunc" id="4884670">len</span><span class="op" id="4884673">(</span><span class="ident" id="4884674">m</span><span class="op" id="4884675">.</span><span class="ident" id="4884676">mask</span><span class="op" id="4884680">)</span>&nbsp;<span class="op" id="4884682">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884686">return</span>&nbsp;<span class="string" id="4884693">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884700">for</span>&nbsp;<span class="ident" id="4884704">i</span><span class="op" id="4884705">,</span>&nbsp;<span class="ident" id="4884707">mask</span>&nbsp;<span class="op" id="4884712">:=</span>&nbsp;<span class="keyword" id="4884715">range</span>&nbsp;<span class="ident" id="4884721">m</span><span class="op" id="4884722">.</span><span class="ident" id="4884723">mask</span>&nbsp;<span class="op" id="4884728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884732">db</span>&nbsp;<span class="op" id="4884735">:=</span>&nbsp;<span class="ident" id="4884738">data</span><span class="op" id="4884742">[</span><span class="ident" id="4884743">i</span><span class="op" id="4884744">]</span>&nbsp;<span class="op" id="4884746">&amp;</span>&nbsp;<span class="ident" id="4884748">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884755">if</span>&nbsp;<span class="ident" id="4884758">db</span>&nbsp;<span class="op" id="4884761">!=</span>&nbsp;<span class="ident" id="4884764">m</span><span class="op" id="4884765">.</span><span class="ident" id="4884766">pat</span><span class="op" id="4884769">[</span><span class="ident" id="4884770">i</span><span class="op" id="4884771">]</span>&nbsp;<span class="op" id="4884773">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884778">return</span>&nbsp;<span class="string" id="4884785">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884796">return</span>&nbsp;<span class="ident" id="4884803">m</span><span class="op" id="4884804">.</span><span class="ident" id="4884805">ct</span><br>
<span class="lineno"></span><span class="op" id="4884808">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="4884811">type</span>&nbsp;<span class="ident" id="4884816">htmlSig</span>&nbsp;<span class="op" id="4884824">[</span><span class="op" id="4884825">]</span><span class="builtintype" id="4884826">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4884832">func</span>&nbsp;<span class="op" id="4884837">(</span><span class="ident" id="4884838">h</span>&nbsp;<span class="ident" id="4884840">htmlSig</span><span class="op" id="4884847">)</span>&nbsp;<span class="ident" id="4884849">match</span><span class="op" id="4884854">(</span><span class="ident" id="4884855">data</span>&nbsp;<span class="op" id="4884860">[</span><span class="op" id="4884861">]</span><span class="builtintype" id="4884862">byte</span><span class="op" id="4884866">,</span>&nbsp;<span class="ident" id="4884868">firstNonWS</span>&nbsp;<span class="builtintype" id="4884879">int</span><span class="op" id="4884882">)</span>&nbsp;<span class="builtintype" id="4884884">string</span>&nbsp;<span class="op" id="4884891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884894">data</span>&nbsp;<span class="op" id="4884899">=</span>&nbsp;<span class="ident" id="4884901">data</span><span class="op" id="4884905">[</span><span class="ident" id="4884906">firstNonWS</span><span class="op" id="4884916">:</span><span class="op" id="4884917">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884920">if</span>&nbsp;<span class="builtinfunc" id="4884923">len</span><span class="op" id="4884926">(</span><span class="ident" id="4884927">data</span><span class="op" id="4884931">)</span>&nbsp;<span class="op" id="4884933">&lt;</span>&nbsp;<span class="builtinfunc" id="4884935">len</span><span class="op" id="4884938">(</span><span class="ident" id="4884939">h</span><span class="op" id="4884940">)</span><span class="op" id="4884941">+</span><span class="num" id="4884942">1</span>&nbsp;<span class="op" id="4884944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884948">return</span>&nbsp;<span class="string" id="4884955">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884962">for</span>&nbsp;<span class="ident" id="4884966">i</span><span class="op" id="4884967">,</span>&nbsp;<span class="ident" id="4884969">b</span>&nbsp;<span class="op" id="4884971">:=</span>&nbsp;<span class="keyword" id="4884974">range</span>&nbsp;<span class="ident" id="4884980">h</span>&nbsp;<span class="op" id="4884982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884986">db</span>&nbsp;<span class="op" id="4884989">:=</span>&nbsp;<span class="ident" id="4884992">data</span><span class="op" id="4884996">[</span><span class="ident" id="4884997">i</span><span class="op" id="4884998">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885002">if</span>&nbsp;<span class="string" id="4885005">&#39;A&#39;</span>&nbsp;<span class="op" id="4885009">&lt;=</span>&nbsp;<span class="ident" id="4885012">b</span>&nbsp;<span class="op" id="4885014">&amp;&amp;</span>&nbsp;<span class="ident" id="4885017">b</span>&nbsp;<span class="op" id="4885019">&lt;=</span>&nbsp;<span class="string" id="4885022">&#39;Z&#39;</span>&nbsp;<span class="op" id="4885026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885031">db</span>&nbsp;<span class="op" id="4885034">&amp;=</span>&nbsp;<span class="num" id="4885037">0xDF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885048">if</span>&nbsp;<span class="ident" id="4885051">b</span>&nbsp;<span class="op" id="4885053">!=</span>&nbsp;<span class="ident" id="4885056">db</span>&nbsp;<span class="op" id="4885059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885064">return</span>&nbsp;<span class="string" id="4885071">&#34;&#34;</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885082">//&nbsp;Next&nbsp;byte&nbsp;must&nbsp;be&nbsp;space&nbsp;or&nbsp;right&nbsp;angle&nbsp;bracket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885134">if</span>&nbsp;<span class="ident" id="4885137">db</span>&nbsp;<span class="op" id="4885140">:=</span>&nbsp;<span class="ident" id="4885143">data</span><span class="op" id="4885147">[</span><span class="builtinfunc" id="4885148">len</span><span class="op" id="4885151">(</span><span class="ident" id="4885152">h</span><span class="op" id="4885153">)</span><span class="op" id="4885154">]</span><span class="op" id="4885155">;</span>&nbsp;<span class="ident" id="4885157">db</span>&nbsp;<span class="op" id="4885160">!=</span>&nbsp;<span class="string" id="4885163">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4885167">&amp;&amp;</span>&nbsp;<span class="ident" id="4885170">db</span>&nbsp;<span class="op" id="4885173">!=</span>&nbsp;<span class="string" id="4885176">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4885180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885184">return</span>&nbsp;<span class="string" id="4885191">&#34;&#34;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885198">return</span>&nbsp;<span class="string" id="4885205">&#34;text/html;&nbsp;charset=utf-8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4885232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4885235">type</span>&nbsp;<span class="ident" id="4885240">mp4Sig</span>&nbsp;<span class="builtintype" id="4885247">int</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="4885252">func</span>&nbsp;<span class="op" id="4885257">(</span><span class="ident" id="4885258">mp4Sig</span><span class="op" id="4885264">)</span>&nbsp;<span class="ident" id="4885266">match</span><span class="op" id="4885271">(</span><span class="ident" id="4885272">data</span>&nbsp;<span class="op" id="4885277">[</span><span class="op" id="4885278">]</span><span class="builtintype" id="4885279">byte</span><span class="op" id="4885283">,</span>&nbsp;<span class="ident" id="4885285">firstNonWS</span>&nbsp;<span class="builtintype" id="4885296">int</span><span class="op" id="4885299">)</span>&nbsp;<span class="builtintype" id="4885301">string</span>&nbsp;<span class="op" id="4885308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885311">//&nbsp;c.f.&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885333">if</span>&nbsp;<span class="builtinfunc" id="4885336">len</span><span class="op" id="4885339">(</span><span class="ident" id="4885340">data</span><span class="op" id="4885344">)</span>&nbsp;<span class="op" id="4885346">&lt;</span>&nbsp;<span class="num" id="4885348">8</span>&nbsp;<span class="op" id="4885350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885354">return</span>&nbsp;<span class="string" id="4885361">&#34;&#34;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885368">boxSize</span>&nbsp;<span class="op" id="4885376">:=</span>&nbsp;<span class="builtintype" id="4885379">int</span><span class="op" id="4885382">(</span><span class="ident" id="4885383">binary</span><span class="op" id="4885389">.</span><span class="ident" id="4885390">BigEndian</span><span class="op" id="4885399">.</span><span class="ident" id="4885400">Uint32</span><span class="op" id="4885406">(</span><span class="ident" id="4885407">data</span><span class="op" id="4885411">[</span><span class="op" id="4885412">:</span><span class="num" id="4885413">4</span><span class="op" id="4885414">]</span><span class="op" id="4885415">)</span><span class="op" id="4885416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885419">if</span>&nbsp;<span class="ident" id="4885422">boxSize</span><span class="op" id="4885429">%</span><span class="num" id="4885430">4</span>&nbsp;<span class="op" id="4885432">!=</span>&nbsp;<span class="num" id="4885435">0</span>&nbsp;<span class="op" id="4885437">||</span>&nbsp;<span class="builtinfunc" id="4885440">len</span><span class="op" id="4885443">(</span><span class="ident" id="4885444">data</span><span class="op" id="4885448">)</span>&nbsp;<span class="op" id="4885450">&lt;</span>&nbsp;<span class="ident" id="4885452">boxSize</span>&nbsp;<span class="op" id="4885460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885464">return</span>&nbsp;<span class="string" id="4885471">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885475">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885478">if</span>&nbsp;<span class="op" id="4885481">!</span><span class="ident" id="4885482">bytes</span><span class="op" id="4885487">.</span><span class="ident" id="4885488">Equal</span><span class="op" id="4885493">(</span><span class="ident" id="4885494">data</span><span class="op" id="4885498">[</span><span class="num" id="4885499">4</span><span class="op" id="4885500">:</span><span class="num" id="4885501">8</span><span class="op" id="4885502">]</span><span class="op" id="4885503">,</span>&nbsp;<span class="op" id="4885505">[</span><span class="op" id="4885506">]</span><span class="builtintype" id="4885507">byte</span><span class="op" id="4885511">(</span><span class="string" id="4885512">&#34;ftyp&#34;</span><span class="op" id="4885518">)</span><span class="op" id="4885519">)</span>&nbsp;<span class="op" id="4885521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885525">return</span>&nbsp;<span class="string" id="4885532">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885539">for</span>&nbsp;<span class="ident" id="4885543">st</span>&nbsp;<span class="op" id="4885546">:=</span>&nbsp;<span class="num" id="4885549">8</span><span class="op" id="4885550">;</span>&nbsp;<span class="ident" id="4885552">st</span>&nbsp;<span class="op" id="4885555">&lt;</span>&nbsp;<span class="ident" id="4885557">boxSize</span><span class="op" id="4885564">;</span>&nbsp;<span class="ident" id="4885566">st</span>&nbsp;<span class="op" id="4885569">+=</span>&nbsp;<span class="num" id="4885572">4</span>&nbsp;<span class="op" id="4885574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885578">if</span>&nbsp;<span class="ident" id="4885581">st</span>&nbsp;<span class="op" id="4885584">==</span>&nbsp;<span class="num" id="4885587">12</span>&nbsp;<span class="op" id="4885590">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885595">//&nbsp;minor&nbsp;version&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885622">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885637">seg</span>&nbsp;<span class="op" id="4885641">:=</span>&nbsp;<span class="builtintype" id="4885644">string</span><span class="op" id="4885650">(</span><span class="ident" id="4885651">data</span><span class="op" id="4885655">[</span><span class="ident" id="4885656">st</span>&nbsp;<span class="op" id="4885659">:</span>&nbsp;<span class="ident" id="4885661">st</span><span class="op" id="4885663">+</span><span class="num" id="4885664">3</span><span class="op" id="4885665">]</span><span class="op" id="4885666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885670">switch</span>&nbsp;<span class="ident" id="4885677">seg</span>&nbsp;<span class="op" id="4885681">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885685">case</span>&nbsp;<span class="string" id="4885690">&#34;mp4&#34;</span><span class="op" id="4885695">,</span>&nbsp;<span class="string" id="4885697">&#34;iso&#34;</span><span class="op" id="4885702">,</span>&nbsp;<span class="string" id="4885704">&#34;M4V&#34;</span><span class="op" id="4885709">,</span>&nbsp;<span class="string" id="4885711">&#34;M4P&#34;</span><span class="op" id="4885716">,</span>&nbsp;<span class="string" id="4885718">&#34;M4B&#34;</span><span class="op" id="4885723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885728">return</span>&nbsp;<span class="string" id="4885735">&#34;video/mp4&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885750">/*&nbsp;The&nbsp;remainder&nbsp;are&nbsp;not&nbsp;in&nbsp;the&nbsp;spec.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;M4A&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;audio/mp4&#34;<br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;3gp&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;video/3gpp&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcase&nbsp;&#34;jp2&#34;:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;&#34;image/jp2&#34;&nbsp;//&nbsp;JPEG&nbsp;2000<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885930">return</span>&nbsp;<span class="string" id="4885937">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4885940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="4885943">type</span>&nbsp;<span class="ident" id="4885948">textSig</span>&nbsp;<span class="builtintype" id="4885956">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4885961">func</span>&nbsp;<span class="op" id="4885966">(</span><span class="ident" id="4885967">textSig</span><span class="op" id="4885974">)</span>&nbsp;<span class="ident" id="4885976">match</span><span class="op" id="4885981">(</span><span class="ident" id="4885982">data</span>&nbsp;<span class="op" id="4885987">[</span><span class="op" id="4885988">]</span><span class="builtintype" id="4885989">byte</span><span class="op" id="4885993">,</span>&nbsp;<span class="ident" id="4885995">firstNonWS</span>&nbsp;<span class="builtintype" id="4886006">int</span><span class="op" id="4886009">)</span>&nbsp;<span class="builtintype" id="4886011">string</span>&nbsp;<span class="op" id="4886018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886021">//&nbsp;c.f.&nbsp;section&nbsp;5,&nbsp;step&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886049">for</span>&nbsp;<span class="ident" id="4886053">_</span><span class="op" id="4886054">,</span>&nbsp;<span class="ident" id="4886056">b</span>&nbsp;<span class="op" id="4886058">:=</span>&nbsp;<span class="keyword" id="4886061">range</span>&nbsp;<span class="ident" id="4886067">data</span><span class="op" id="4886071">[</span><span class="ident" id="4886072">firstNonWS</span><span class="op" id="4886082">:</span><span class="op" id="4886083">]</span>&nbsp;<span class="op" id="4886085">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886089">switch</span>&nbsp;<span class="op" id="4886096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886100">case</span>&nbsp;<span class="num" id="4886105">0x00</span>&nbsp;<span class="op" id="4886110">&lt;=</span>&nbsp;<span class="ident" id="4886113">b</span>&nbsp;<span class="op" id="4886115">&amp;&amp;</span>&nbsp;<span class="ident" id="4886118">b</span>&nbsp;<span class="op" id="4886120">&lt;=</span>&nbsp;<span class="num" id="4886123">0x08</span><span class="op" id="4886127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886132">b</span>&nbsp;<span class="op" id="4886134">==</span>&nbsp;<span class="num" id="4886137">0x0B</span><span class="op" id="4886141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4886146">0x0E</span>&nbsp;<span class="op" id="4886151">&lt;=</span>&nbsp;<span class="ident" id="4886154">b</span>&nbsp;<span class="op" id="4886156">&amp;&amp;</span>&nbsp;<span class="ident" id="4886159">b</span>&nbsp;<span class="op" id="4886161">&lt;=</span>&nbsp;<span class="num" id="4886164">0x1A</span><span class="op" id="4886168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4886173">0x1C</span>&nbsp;<span class="op" id="4886178">&lt;=</span>&nbsp;<span class="ident" id="4886181">b</span>&nbsp;<span class="op" id="4886183">&amp;&amp;</span>&nbsp;<span class="ident" id="4886186">b</span>&nbsp;<span class="op" id="4886188">&lt;=</span>&nbsp;<span class="num" id="4886191">0x1F</span><span class="op" id="4886195">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886200">return</span>&nbsp;<span class="string" id="4886207">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886218">return</span>&nbsp;<span class="string" id="4886225">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4886253">}</span>
</div>
</body>
</html>
