<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6875849">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6875904">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6875958">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6876009">package</span>&nbsp;<span class="ident" id="6876017">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6876023">import</span>&nbsp;<span class="op" id="6876030">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6876033">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6876042">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6876057">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6876070">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6876076">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6876086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6876089">func</span>&nbsp;<span class="ident" id="6876094">eq</span><span class="op" id="6876096">(</span><span class="ident" id="6876097">c0</span><span class="op" id="6876099">,</span>&nbsp;<span class="ident" id="6876101">c1</span>&nbsp;<span class="ident" id="6876104">color</span><span class="op" id="6876109">.</span><span class="ident" id="6876110">Color</span><span class="op" id="6876115">)</span>&nbsp;<span class="builtintype" id="6876117">bool</span>&nbsp;<span class="op" id="6876122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876125">r0</span><span class="op" id="6876127">,</span>&nbsp;<span class="ident" id="6876129">g0</span><span class="op" id="6876131">,</span>&nbsp;<span class="ident" id="6876133">b0</span><span class="op" id="6876135">,</span>&nbsp;<span class="ident" id="6876137">a0</span>&nbsp;<span class="op" id="6876140">:=</span>&nbsp;<span class="ident" id="6876143">c0</span><span class="op" id="6876145">.</span><span class="ident" id="6876146">RGBA</span><span class="op" id="6876150">(</span><span class="op" id="6876151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876154">r1</span><span class="op" id="6876156">,</span>&nbsp;<span class="ident" id="6876158">g1</span><span class="op" id="6876160">,</span>&nbsp;<span class="ident" id="6876162">b1</span><span class="op" id="6876164">,</span>&nbsp;<span class="ident" id="6876166">a1</span>&nbsp;<span class="op" id="6876169">:=</span>&nbsp;<span class="ident" id="6876172">c1</span><span class="op" id="6876174">.</span><span class="ident" id="6876175">RGBA</span><span class="op" id="6876179">(</span><span class="op" id="6876180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876183">return</span>&nbsp;<span class="ident" id="6876190">r0</span>&nbsp;<span class="op" id="6876193">==</span>&nbsp;<span class="ident" id="6876196">r1</span>&nbsp;<span class="op" id="6876199">&amp;&amp;</span>&nbsp;<span class="ident" id="6876202">g0</span>&nbsp;<span class="op" id="6876205">==</span>&nbsp;<span class="ident" id="6876208">g1</span>&nbsp;<span class="op" id="6876211">&amp;&amp;</span>&nbsp;<span class="ident" id="6876214">b0</span>&nbsp;<span class="op" id="6876217">==</span>&nbsp;<span class="ident" id="6876220">b1</span>&nbsp;<span class="op" id="6876223">&amp;&amp;</span>&nbsp;<span class="ident" id="6876226">a0</span>&nbsp;<span class="op" id="6876229">==</span>&nbsp;<span class="ident" id="6876232">a1</span><br>
<span class="lineno"></span><span class="op" id="6876235">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6876238">func</span>&nbsp;<span class="ident" id="6876243">fillBlue</span><span class="op" id="6876251">(</span><span class="ident" id="6876252">alpha</span>&nbsp;<span class="builtintype" id="6876258">int</span><span class="op" id="6876261">)</span>&nbsp;<span class="ident" id="6876263">image</span><span class="op" id="6876268">.</span><span class="ident" id="6876269">Image</span>&nbsp;<span class="op" id="6876275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876278">return</span>&nbsp;<span class="ident" id="6876285">image</span><span class="op" id="6876290">.</span><span class="ident" id="6876291">NewUniform</span><span class="op" id="6876301">(</span><span class="ident" id="6876302">color</span><span class="op" id="6876307">.</span><span class="ident" id="6876308">RGBA</span><span class="op" id="6876312">{</span><span class="num" id="6876313">0</span><span class="op" id="6876314">,</span>&nbsp;<span class="num" id="6876316">0</span><span class="op" id="6876317">,</span>&nbsp;<span class="builtintype" id="6876319">uint8</span><span class="op" id="6876324">(</span><span class="ident" id="6876325">alpha</span><span class="op" id="6876330">)</span><span class="op" id="6876331">,</span>&nbsp;<span class="builtintype" id="6876333">uint8</span><span class="op" id="6876338">(</span><span class="ident" id="6876339">alpha</span><span class="op" id="6876344">)</span><span class="op" id="6876345">}</span><span class="op" id="6876346">)</span><br>
<span class="lineno"></span><span class="op" id="6876348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6876351">func</span>&nbsp;<span class="ident" id="6876356">fillAlpha</span><span class="op" id="6876365">(</span><span class="ident" id="6876366">alpha</span>&nbsp;<span class="builtintype" id="6876372">int</span><span class="op" id="6876375">)</span>&nbsp;<span class="ident" id="6876377">image</span><span class="op" id="6876382">.</span><span class="ident" id="6876383">Image</span>&nbsp;<span class="op" id="6876389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876392">return</span>&nbsp;<span class="ident" id="6876399">image</span><span class="op" id="6876404">.</span><span class="ident" id="6876405">NewUniform</span><span class="op" id="6876415">(</span><span class="ident" id="6876416">color</span><span class="op" id="6876421">.</span><span class="ident" id="6876422">Alpha</span><span class="op" id="6876427">{</span><span class="builtintype" id="6876428">uint8</span><span class="op" id="6876433">(</span><span class="ident" id="6876434">alpha</span><span class="op" id="6876439">)</span><span class="op" id="6876440">}</span><span class="op" id="6876441">)</span><br>
<span class="lineno"></span><span class="op" id="6876443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6876446">func</span>&nbsp;<span class="ident" id="6876451">vgradGreen</span><span class="op" id="6876461">(</span><span class="ident" id="6876462">alpha</span>&nbsp;<span class="builtintype" id="6876468">int</span><span class="op" id="6876471">)</span>&nbsp;<span class="ident" id="6876473">image</span><span class="op" id="6876478">.</span><span class="ident" id="6876479">Image</span>&nbsp;<span class="op" id="6876485">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876488">m</span>&nbsp;<span class="op" id="6876490">:=</span>&nbsp;<span class="ident" id="6876493">image</span><span class="op" id="6876498">.</span><span class="ident" id="6876499">NewRGBA</span><span class="op" id="6876506">(</span><span class="ident" id="6876507">image</span><span class="op" id="6876512">.</span><span class="ident" id="6876513">Rect</span><span class="op" id="6876517">(</span><span class="num" id="6876518">0</span><span class="op" id="6876519">,</span>&nbsp;<span class="num" id="6876521">0</span><span class="op" id="6876522">,</span>&nbsp;<span class="num" id="6876524">16</span><span class="op" id="6876526">,</span>&nbsp;<span class="num" id="6876528">16</span><span class="op" id="6876530">)</span><span class="op" id="6876531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876534">for</span>&nbsp;<span class="ident" id="6876538">y</span>&nbsp;<span class="op" id="6876540">:=</span>&nbsp;<span class="num" id="6876543">0</span><span class="op" id="6876544">;</span>&nbsp;<span class="ident" id="6876546">y</span>&nbsp;<span class="op" id="6876548">&lt;</span>&nbsp;<span class="num" id="6876550">16</span><span class="op" id="6876552">;</span>&nbsp;<span class="ident" id="6876554">y</span><span class="op" id="6876555">++</span>&nbsp;<span class="op" id="6876558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876562">for</span>&nbsp;<span class="ident" id="6876566">x</span>&nbsp;<span class="op" id="6876568">:=</span>&nbsp;<span class="num" id="6876571">0</span><span class="op" id="6876572">;</span>&nbsp;<span class="ident" id="6876574">x</span>&nbsp;<span class="op" id="6876576">&lt;</span>&nbsp;<span class="num" id="6876578">16</span><span class="op" id="6876580">;</span>&nbsp;<span class="ident" id="6876582">x</span><span class="op" id="6876583">++</span>&nbsp;<span class="op" id="6876586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876591">m</span><span class="op" id="6876592">.</span><span class="ident" id="6876593">Set</span><span class="op" id="6876596">(</span><span class="ident" id="6876597">x</span><span class="op" id="6876598">,</span>&nbsp;<span class="ident" id="6876600">y</span><span class="op" id="6876601">,</span>&nbsp;<span class="ident" id="6876603">color</span><span class="op" id="6876608">.</span><span class="ident" id="6876609">RGBA</span><span class="op" id="6876613">{</span><span class="num" id="6876614">0</span><span class="op" id="6876615">,</span>&nbsp;<span class="builtintype" id="6876617">uint8</span><span class="op" id="6876622">(</span><span class="ident" id="6876623">y</span>&nbsp;<span class="op" id="6876625">*</span>&nbsp;<span class="ident" id="6876627">alpha</span>&nbsp;<span class="op" id="6876633">/</span>&nbsp;<span class="num" id="6876635">15</span><span class="op" id="6876637">)</span><span class="op" id="6876638">,</span>&nbsp;<span class="num" id="6876640">0</span><span class="op" id="6876641">,</span>&nbsp;<span class="builtintype" id="6876643">uint8</span><span class="op" id="6876648">(</span><span class="ident" id="6876649">alpha</span><span class="op" id="6876654">)</span><span class="op" id="6876655">}</span><span class="op" id="6876656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6876660">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6876663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876666">return</span>&nbsp;<span class="ident" id="6876673">m</span><br>
<span class="lineno"></span><span class="op" id="6876675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6876678">func</span>&nbsp;<span class="ident" id="6876683">vgradAlpha</span><span class="op" id="6876693">(</span><span class="ident" id="6876694">alpha</span>&nbsp;<span class="builtintype" id="6876700">int</span><span class="op" id="6876703">)</span>&nbsp;<span class="ident" id="6876705">image</span><span class="op" id="6876710">.</span><span class="ident" id="6876711">Image</span>&nbsp;<span class="op" id="6876717">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876720">m</span>&nbsp;<span class="op" id="6876722">:=</span>&nbsp;<span class="ident" id="6876725">image</span><span class="op" id="6876730">.</span><span class="ident" id="6876731">NewAlpha</span><span class="op" id="6876739">(</span><span class="ident" id="6876740">image</span><span class="op" id="6876745">.</span><span class="ident" id="6876746">Rect</span><span class="op" id="6876750">(</span><span class="num" id="6876751">0</span><span class="op" id="6876752">,</span>&nbsp;<span class="num" id="6876754">0</span><span class="op" id="6876755">,</span>&nbsp;<span class="num" id="6876757">16</span><span class="op" id="6876759">,</span>&nbsp;<span class="num" id="6876761">16</span><span class="op" id="6876763">)</span><span class="op" id="6876764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876767">for</span>&nbsp;<span class="ident" id="6876771">y</span>&nbsp;<span class="op" id="6876773">:=</span>&nbsp;<span class="num" id="6876776">0</span><span class="op" id="6876777">;</span>&nbsp;<span class="ident" id="6876779">y</span>&nbsp;<span class="op" id="6876781">&lt;</span>&nbsp;<span class="num" id="6876783">16</span><span class="op" id="6876785">;</span>&nbsp;<span class="ident" id="6876787">y</span><span class="op" id="6876788">++</span>&nbsp;<span class="op" id="6876791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876795">for</span>&nbsp;<span class="ident" id="6876799">x</span>&nbsp;<span class="op" id="6876801">:=</span>&nbsp;<span class="num" id="6876804">0</span><span class="op" id="6876805">;</span>&nbsp;<span class="ident" id="6876807">x</span>&nbsp;<span class="op" id="6876809">&lt;</span>&nbsp;<span class="num" id="6876811">16</span><span class="op" id="6876813">;</span>&nbsp;<span class="ident" id="6876815">x</span><span class="op" id="6876816">++</span>&nbsp;<span class="op" id="6876819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876824">m</span><span class="op" id="6876825">.</span><span class="ident" id="6876826">Set</span><span class="op" id="6876829">(</span><span class="ident" id="6876830">x</span><span class="op" id="6876831">,</span>&nbsp;<span class="ident" id="6876833">y</span><span class="op" id="6876834">,</span>&nbsp;<span class="ident" id="6876836">color</span><span class="op" id="6876841">.</span><span class="ident" id="6876842">Alpha</span><span class="op" id="6876847">{</span><span class="builtintype" id="6876848">uint8</span><span class="op" id="6876853">(</span><span class="ident" id="6876854">y</span>&nbsp;<span class="op" id="6876856">*</span>&nbsp;<span class="ident" id="6876858">alpha</span>&nbsp;<span class="op" id="6876864">/</span>&nbsp;<span class="num" id="6876866">15</span><span class="op" id="6876868">)</span><span class="op" id="6876869">}</span><span class="op" id="6876870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6876874">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6876877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876880">return</span>&nbsp;<span class="ident" id="6876887">m</span><br>
<span class="lineno"></span><span class="op" id="6876889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6876892">func</span>&nbsp;<span class="ident" id="6876897">vgradGreenNRGBA</span><span class="op" id="6876912">(</span><span class="ident" id="6876913">alpha</span>&nbsp;<span class="builtintype" id="6876919">int</span><span class="op" id="6876922">)</span>&nbsp;<span class="ident" id="6876924">image</span><span class="op" id="6876929">.</span><span class="ident" id="6876930">Image</span>&nbsp;<span class="op" id="6876936">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6876939">m</span>&nbsp;<span class="op" id="6876941">:=</span>&nbsp;<span class="ident" id="6876944">image</span><span class="op" id="6876949">.</span><span class="ident" id="6876950">NewNRGBA</span><span class="op" id="6876958">(</span><span class="ident" id="6876959">image</span><span class="op" id="6876964">.</span><span class="ident" id="6876965">Rect</span><span class="op" id="6876969">(</span><span class="num" id="6876970">0</span><span class="op" id="6876971">,</span>&nbsp;<span class="num" id="6876973">0</span><span class="op" id="6876974">,</span>&nbsp;<span class="num" id="6876976">16</span><span class="op" id="6876978">,</span>&nbsp;<span class="num" id="6876980">16</span><span class="op" id="6876982">)</span><span class="op" id="6876983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6876986">for</span>&nbsp;<span class="ident" id="6876990">y</span>&nbsp;<span class="op" id="6876992">:=</span>&nbsp;<span class="num" id="6876995">0</span><span class="op" id="6876996">;</span>&nbsp;<span class="ident" id="6876998">y</span>&nbsp;<span class="op" id="6877000">&lt;</span>&nbsp;<span class="num" id="6877002">16</span><span class="op" id="6877004">;</span>&nbsp;<span class="ident" id="6877006">y</span><span class="op" id="6877007">++</span>&nbsp;<span class="op" id="6877010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877014">for</span>&nbsp;<span class="ident" id="6877018">x</span>&nbsp;<span class="op" id="6877020">:=</span>&nbsp;<span class="num" id="6877023">0</span><span class="op" id="6877024">;</span>&nbsp;<span class="ident" id="6877026">x</span>&nbsp;<span class="op" id="6877028">&lt;</span>&nbsp;<span class="num" id="6877030">16</span><span class="op" id="6877032">;</span>&nbsp;<span class="ident" id="6877034">x</span><span class="op" id="6877035">++</span>&nbsp;<span class="op" id="6877038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877043">m</span><span class="op" id="6877044">.</span><span class="ident" id="6877045">Set</span><span class="op" id="6877048">(</span><span class="ident" id="6877049">x</span><span class="op" id="6877050">,</span>&nbsp;<span class="ident" id="6877052">y</span><span class="op" id="6877053">,</span>&nbsp;<span class="ident" id="6877055">color</span><span class="op" id="6877060">.</span><span class="ident" id="6877061">RGBA</span><span class="op" id="6877065">{</span><span class="num" id="6877066">0</span><span class="op" id="6877067">,</span>&nbsp;<span class="builtintype" id="6877069">uint8</span><span class="op" id="6877074">(</span><span class="ident" id="6877075">y</span>&nbsp;<span class="op" id="6877077">*</span>&nbsp;<span class="num" id="6877079">0x11</span><span class="op" id="6877083">)</span><span class="op" id="6877084">,</span>&nbsp;<span class="num" id="6877086">0</span><span class="op" id="6877087">,</span>&nbsp;<span class="builtintype" id="6877089">uint8</span><span class="op" id="6877094">(</span><span class="ident" id="6877095">alpha</span><span class="op" id="6877100">)</span><span class="op" id="6877101">}</span><span class="op" id="6877102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877106">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877112">return</span>&nbsp;<span class="ident" id="6877119">m</span><br>
<span class="lineno"></span><span class="op" id="6877121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6877124">func</span>&nbsp;<span class="ident" id="6877129">vgradCr</span><span class="op" id="6877136">(</span><span class="op" id="6877137">)</span>&nbsp;<span class="ident" id="6877139">image</span><span class="op" id="6877144">.</span><span class="ident" id="6877145">Image</span>&nbsp;<span class="op" id="6877151">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877154">m</span>&nbsp;<span class="op" id="6877156">:=</span>&nbsp;<span class="op" id="6877159">&amp;</span><span class="ident" id="6877160">image</span><span class="op" id="6877165">.</span><span class="ident" id="6877166">YCbCr</span><span class="op" id="6877171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877175">Y</span><span class="op" id="6877176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6877191">make</span><span class="op" id="6877195">(</span><span class="op" id="6877196">[</span><span class="op" id="6877197">]</span><span class="builtintype" id="6877198">byte</span><span class="op" id="6877202">,</span>&nbsp;<span class="num" id="6877204">16</span><span class="op" id="6877206">*</span><span class="num" id="6877207">16</span><span class="op" id="6877209">)</span><span class="op" id="6877210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877214">Cb</span><span class="op" id="6877216">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6877230">make</span><span class="op" id="6877234">(</span><span class="op" id="6877235">[</span><span class="op" id="6877236">]</span><span class="builtintype" id="6877237">byte</span><span class="op" id="6877241">,</span>&nbsp;<span class="num" id="6877243">16</span><span class="op" id="6877245">*</span><span class="num" id="6877246">16</span><span class="op" id="6877248">)</span><span class="op" id="6877249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877253">Cr</span><span class="op" id="6877255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6877269">make</span><span class="op" id="6877273">(</span><span class="op" id="6877274">[</span><span class="op" id="6877275">]</span><span class="builtintype" id="6877276">byte</span><span class="op" id="6877280">,</span>&nbsp;<span class="num" id="6877282">16</span><span class="op" id="6877284">*</span><span class="num" id="6877285">16</span><span class="op" id="6877287">)</span><span class="op" id="6877288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877292">YStride</span><span class="op" id="6877299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6877308">16</span><span class="op" id="6877310">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877314">CStride</span><span class="op" id="6877321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6877330">16</span><span class="op" id="6877332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877336">SubsampleRatio</span><span class="op" id="6877350">:</span>&nbsp;<span class="ident" id="6877352">image</span><span class="op" id="6877357">.</span><span class="ident" id="6877358">YCbCrSubsampleRatio444</span><span class="op" id="6877380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877384">Rect</span><span class="op" id="6877388">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877400">image</span><span class="op" id="6877405">.</span><span class="ident" id="6877406">Rect</span><span class="op" id="6877410">(</span><span class="num" id="6877411">0</span><span class="op" id="6877412">,</span>&nbsp;<span class="num" id="6877414">0</span><span class="op" id="6877415">,</span>&nbsp;<span class="num" id="6877417">16</span><span class="op" id="6877419">,</span>&nbsp;<span class="num" id="6877421">16</span><span class="op" id="6877423">)</span><span class="op" id="6877424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877430">for</span>&nbsp;<span class="ident" id="6877434">y</span>&nbsp;<span class="op" id="6877436">:=</span>&nbsp;<span class="num" id="6877439">0</span><span class="op" id="6877440">;</span>&nbsp;<span class="ident" id="6877442">y</span>&nbsp;<span class="op" id="6877444">&lt;</span>&nbsp;<span class="num" id="6877446">16</span><span class="op" id="6877448">;</span>&nbsp;<span class="ident" id="6877450">y</span><span class="op" id="6877451">++</span>&nbsp;<span class="op" id="6877454">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877458">for</span>&nbsp;<span class="ident" id="6877462">x</span>&nbsp;<span class="op" id="6877464">:=</span>&nbsp;<span class="num" id="6877467">0</span><span class="op" id="6877468">;</span>&nbsp;<span class="ident" id="6877470">x</span>&nbsp;<span class="op" id="6877472">&lt;</span>&nbsp;<span class="num" id="6877474">16</span><span class="op" id="6877476">;</span>&nbsp;<span class="ident" id="6877478">x</span><span class="op" id="6877479">++</span>&nbsp;<span class="op" id="6877482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877487">m</span><span class="op" id="6877488">.</span><span class="ident" id="6877489">Cr</span><span class="op" id="6877491">[</span><span class="ident" id="6877492">y</span><span class="op" id="6877493">*</span><span class="ident" id="6877494">m</span><span class="op" id="6877495">.</span><span class="ident" id="6877496">CStride</span><span class="op" id="6877503">+</span><span class="ident" id="6877504">x</span><span class="op" id="6877505">]</span>&nbsp;<span class="op" id="6877507">=</span>&nbsp;<span class="builtintype" id="6877509">uint8</span><span class="op" id="6877514">(</span><span class="ident" id="6877515">y</span>&nbsp;<span class="op" id="6877517">*</span>&nbsp;<span class="num" id="6877519">0x11</span><span class="op" id="6877523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877533">return</span>&nbsp;<span class="ident" id="6877540">m</span><br>
<span class="lineno">75</span><span class="op" id="6877542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6877545">func</span>&nbsp;<span class="ident" id="6877550">hgradRed</span><span class="op" id="6877558">(</span><span class="ident" id="6877559">alpha</span>&nbsp;<span class="builtintype" id="6877565">int</span><span class="op" id="6877568">)</span>&nbsp;<span class="ident" id="6877570">Image</span>&nbsp;<span class="op" id="6877576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877579">m</span>&nbsp;<span class="op" id="6877581">:=</span>&nbsp;<span class="ident" id="6877584">image</span><span class="op" id="6877589">.</span><span class="ident" id="6877590">NewRGBA</span><span class="op" id="6877597">(</span><span class="ident" id="6877598">image</span><span class="op" id="6877603">.</span><span class="ident" id="6877604">Rect</span><span class="op" id="6877608">(</span><span class="num" id="6877609">0</span><span class="op" id="6877610">,</span>&nbsp;<span class="num" id="6877612">0</span><span class="op" id="6877613">,</span>&nbsp;<span class="num" id="6877615">16</span><span class="op" id="6877617">,</span>&nbsp;<span class="num" id="6877619">16</span><span class="op" id="6877621">)</span><span class="op" id="6877622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877625">for</span>&nbsp;<span class="ident" id="6877629">y</span>&nbsp;<span class="op" id="6877631">:=</span>&nbsp;<span class="num" id="6877634">0</span><span class="op" id="6877635">;</span>&nbsp;<span class="ident" id="6877637">y</span>&nbsp;<span class="op" id="6877639">&lt;</span>&nbsp;<span class="num" id="6877641">16</span><span class="op" id="6877643">;</span>&nbsp;<span class="ident" id="6877645">y</span><span class="op" id="6877646">++</span>&nbsp;<span class="op" id="6877649">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877653">for</span>&nbsp;<span class="ident" id="6877657">x</span>&nbsp;<span class="op" id="6877659">:=</span>&nbsp;<span class="num" id="6877662">0</span><span class="op" id="6877663">;</span>&nbsp;<span class="ident" id="6877665">x</span>&nbsp;<span class="op" id="6877667">&lt;</span>&nbsp;<span class="num" id="6877669">16</span><span class="op" id="6877671">;</span>&nbsp;<span class="ident" id="6877673">x</span><span class="op" id="6877674">++</span>&nbsp;<span class="op" id="6877677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877682">m</span><span class="op" id="6877683">.</span><span class="ident" id="6877684">Set</span><span class="op" id="6877687">(</span><span class="ident" id="6877688">x</span><span class="op" id="6877689">,</span>&nbsp;<span class="ident" id="6877691">y</span><span class="op" id="6877692">,</span>&nbsp;<span class="ident" id="6877694">color</span><span class="op" id="6877699">.</span><span class="ident" id="6877700">RGBA</span><span class="op" id="6877704">{</span><span class="builtintype" id="6877705">uint8</span><span class="op" id="6877710">(</span><span class="ident" id="6877711">x</span>&nbsp;<span class="op" id="6877713">*</span>&nbsp;<span class="ident" id="6877715">alpha</span>&nbsp;<span class="op" id="6877721">/</span>&nbsp;<span class="num" id="6877723">15</span><span class="op" id="6877725">)</span><span class="op" id="6877726">,</span>&nbsp;<span class="num" id="6877728">0</span><span class="op" id="6877729">,</span>&nbsp;<span class="num" id="6877731">0</span><span class="op" id="6877732">,</span>&nbsp;<span class="builtintype" id="6877734">uint8</span><span class="op" id="6877739">(</span><span class="ident" id="6877740">alpha</span><span class="op" id="6877745">)</span><span class="op" id="6877746">}</span><span class="op" id="6877747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877757">return</span>&nbsp;<span class="ident" id="6877764">m</span><br>
<span class="lineno">85</span><span class="op" id="6877766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6877769">func</span>&nbsp;<span class="ident" id="6877774">gradYellow</span><span class="op" id="6877784">(</span><span class="ident" id="6877785">alpha</span>&nbsp;<span class="builtintype" id="6877791">int</span><span class="op" id="6877794">)</span>&nbsp;<span class="ident" id="6877796">Image</span>&nbsp;<span class="op" id="6877802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877805">m</span>&nbsp;<span class="op" id="6877807">:=</span>&nbsp;<span class="ident" id="6877810">image</span><span class="op" id="6877815">.</span><span class="ident" id="6877816">NewRGBA</span><span class="op" id="6877823">(</span><span class="ident" id="6877824">image</span><span class="op" id="6877829">.</span><span class="ident" id="6877830">Rect</span><span class="op" id="6877834">(</span><span class="num" id="6877835">0</span><span class="op" id="6877836">,</span>&nbsp;<span class="num" id="6877838">0</span><span class="op" id="6877839">,</span>&nbsp;<span class="num" id="6877841">16</span><span class="op" id="6877843">,</span>&nbsp;<span class="num" id="6877845">16</span><span class="op" id="6877847">)</span><span class="op" id="6877848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877851">for</span>&nbsp;<span class="ident" id="6877855">y</span>&nbsp;<span class="op" id="6877857">:=</span>&nbsp;<span class="num" id="6877860">0</span><span class="op" id="6877861">;</span>&nbsp;<span class="ident" id="6877863">y</span>&nbsp;<span class="op" id="6877865">&lt;</span>&nbsp;<span class="num" id="6877867">16</span><span class="op" id="6877869">;</span>&nbsp;<span class="ident" id="6877871">y</span><span class="op" id="6877872">++</span>&nbsp;<span class="op" id="6877875">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6877879">for</span>&nbsp;<span class="ident" id="6877883">x</span>&nbsp;<span class="op" id="6877885">:=</span>&nbsp;<span class="num" id="6877888">0</span><span class="op" id="6877889">;</span>&nbsp;<span class="ident" id="6877891">x</span>&nbsp;<span class="op" id="6877893">&lt;</span>&nbsp;<span class="num" id="6877895">16</span><span class="op" id="6877897">;</span>&nbsp;<span class="ident" id="6877899">x</span><span class="op" id="6877900">++</span>&nbsp;<span class="op" id="6877903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6877908">m</span><span class="op" id="6877909">.</span><span class="ident" id="6877910">Set</span><span class="op" id="6877913">(</span><span class="ident" id="6877914">x</span><span class="op" id="6877915">,</span>&nbsp;<span class="ident" id="6877917">y</span><span class="op" id="6877918">,</span>&nbsp;<span class="ident" id="6877920">color</span><span class="op" id="6877925">.</span><span class="ident" id="6877926">RGBA</span><span class="op" id="6877930">{</span><span class="builtintype" id="6877931">uint8</span><span class="op" id="6877936">(</span><span class="ident" id="6877937">x</span>&nbsp;<span class="op" id="6877939">*</span>&nbsp;<span class="ident" id="6877941">alpha</span>&nbsp;<span class="op" id="6877947">/</span>&nbsp;<span class="num" id="6877949">15</span><span class="op" id="6877951">)</span><span class="op" id="6877952">,</span>&nbsp;<span class="builtintype" id="6877954">uint8</span><span class="op" id="6877959">(</span><span class="ident" id="6877960">y</span>&nbsp;<span class="op" id="6877962">*</span>&nbsp;<span class="ident" id="6877964">alpha</span>&nbsp;<span class="op" id="6877970">/</span>&nbsp;<span class="num" id="6877972">15</span><span class="op" id="6877974">)</span><span class="op" id="6877975">,</span>&nbsp;<span class="num" id="6877977">0</span><span class="op" id="6877978">,</span>&nbsp;<span class="builtintype" id="6877980">uint8</span><span class="op" id="6877985">(</span><span class="ident" id="6877986">alpha</span><span class="op" id="6877991">)</span><span class="op" id="6877992">}</span><span class="op" id="6877993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6877997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6878003">return</span>&nbsp;<span class="ident" id="6878010">m</span><br>
<span class="lineno">95</span><span class="op" id="6878012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6878015">type</span>&nbsp;<span class="ident" id="6878020">drawTest</span>&nbsp;<span class="keyword" id="6878029">struct</span>&nbsp;<span class="op" id="6878036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878039">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6878048">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878056">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878065">image</span><span class="op" id="6878070">.</span><span class="ident" id="6878071">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878078">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878087">image</span><span class="op" id="6878092">.</span><span class="ident" id="6878093">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878100">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878109">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6878113">expected</span>&nbsp;<span class="ident" id="6878122">color</span><span class="op" id="6878127">.</span><span class="ident" id="6878128">Color</span><br>
<span class="lineno"></span><span class="op" id="6878134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6878137">var</span>&nbsp;<span class="ident" id="6878141">drawTests</span>&nbsp;<span class="op" id="6878151">=</span>&nbsp;<span class="op" id="6878153">[</span><span class="op" id="6878154">]</span><span class="ident" id="6878155">drawTest</span><span class="op" id="6878163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878166">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878196">{</span><span class="string" id="6878197">&#34;nop&#34;</span><span class="op" id="6878202">,</span>&nbsp;<span class="ident" id="6878204">vgradGreen</span><span class="op" id="6878214">(</span><span class="num" id="6878215">255</span><span class="op" id="6878218">)</span><span class="op" id="6878219">,</span>&nbsp;<span class="ident" id="6878221">fillAlpha</span><span class="op" id="6878230">(</span><span class="num" id="6878231">0</span><span class="op" id="6878232">)</span><span class="op" id="6878233">,</span>&nbsp;<span class="ident" id="6878235">Over</span><span class="op" id="6878239">,</span>&nbsp;<span class="ident" id="6878241">color</span><span class="op" id="6878246">.</span><span class="ident" id="6878247">RGBA</span><span class="op" id="6878251">{</span><span class="num" id="6878252">136</span><span class="op" id="6878255">,</span>&nbsp;<span class="num" id="6878257">0</span><span class="op" id="6878258">,</span>&nbsp;<span class="num" id="6878260">0</span><span class="op" id="6878261">,</span>&nbsp;<span class="num" id="6878263">255</span><span class="op" id="6878266">}</span><span class="op" id="6878267">}</span><span class="op" id="6878268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878271">{</span><span class="string" id="6878272">&#34;clear&#34;</span><span class="op" id="6878279">,</span>&nbsp;<span class="ident" id="6878281">vgradGreen</span><span class="op" id="6878291">(</span><span class="num" id="6878292">255</span><span class="op" id="6878295">)</span><span class="op" id="6878296">,</span>&nbsp;<span class="ident" id="6878298">fillAlpha</span><span class="op" id="6878307">(</span><span class="num" id="6878308">0</span><span class="op" id="6878309">)</span><span class="op" id="6878310">,</span>&nbsp;<span class="ident" id="6878312">Src</span><span class="op" id="6878315">,</span>&nbsp;<span class="ident" id="6878317">color</span><span class="op" id="6878322">.</span><span class="ident" id="6878323">RGBA</span><span class="op" id="6878327">{</span><span class="num" id="6878328">0</span><span class="op" id="6878329">,</span>&nbsp;<span class="num" id="6878331">0</span><span class="op" id="6878332">,</span>&nbsp;<span class="num" id="6878334">0</span><span class="op" id="6878335">,</span>&nbsp;<span class="num" id="6878337">0</span><span class="op" id="6878338">}</span><span class="op" id="6878339">}</span><span class="op" id="6878340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878343">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878397">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878422">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878469">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878509">{</span><span class="string" id="6878510">&#34;fill&#34;</span><span class="op" id="6878516">,</span>&nbsp;<span class="ident" id="6878518">fillBlue</span><span class="op" id="6878526">(</span><span class="num" id="6878527">90</span><span class="op" id="6878529">)</span><span class="op" id="6878530">,</span>&nbsp;<span class="ident" id="6878532">fillAlpha</span><span class="op" id="6878541">(</span><span class="num" id="6878542">255</span><span class="op" id="6878545">)</span><span class="op" id="6878546">,</span>&nbsp;<span class="ident" id="6878548">Over</span><span class="op" id="6878552">,</span>&nbsp;<span class="ident" id="6878554">color</span><span class="op" id="6878559">.</span><span class="ident" id="6878560">RGBA</span><span class="op" id="6878564">{</span><span class="num" id="6878565">88</span><span class="op" id="6878567">,</span>&nbsp;<span class="num" id="6878569">0</span><span class="op" id="6878570">,</span>&nbsp;<span class="num" id="6878572">90</span><span class="op" id="6878574">,</span>&nbsp;<span class="num" id="6878576">255</span><span class="op" id="6878579">}</span><span class="op" id="6878580">}</span><span class="op" id="6878581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878584">{</span><span class="string" id="6878585">&#34;fillSrc&#34;</span><span class="op" id="6878594">,</span>&nbsp;<span class="ident" id="6878596">fillBlue</span><span class="op" id="6878604">(</span><span class="num" id="6878605">90</span><span class="op" id="6878607">)</span><span class="op" id="6878608">,</span>&nbsp;<span class="ident" id="6878610">fillAlpha</span><span class="op" id="6878619">(</span><span class="num" id="6878620">255</span><span class="op" id="6878623">)</span><span class="op" id="6878624">,</span>&nbsp;<span class="ident" id="6878626">Src</span><span class="op" id="6878629">,</span>&nbsp;<span class="ident" id="6878631">color</span><span class="op" id="6878636">.</span><span class="ident" id="6878637">RGBA</span><span class="op" id="6878641">{</span><span class="num" id="6878642">0</span><span class="op" id="6878643">,</span>&nbsp;<span class="num" id="6878645">0</span><span class="op" id="6878646">,</span>&nbsp;<span class="num" id="6878648">90</span><span class="op" id="6878650">,</span>&nbsp;<span class="num" id="6878652">90</span><span class="op" id="6878654">}</span><span class="op" id="6878655">}</span><span class="op" id="6878656">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878659">{</span><span class="string" id="6878660">&#34;fillAlpha&#34;</span><span class="op" id="6878671">,</span>&nbsp;<span class="ident" id="6878673">fillBlue</span><span class="op" id="6878681">(</span><span class="num" id="6878682">90</span><span class="op" id="6878684">)</span><span class="op" id="6878685">,</span>&nbsp;<span class="ident" id="6878687">fillAlpha</span><span class="op" id="6878696">(</span><span class="num" id="6878697">192</span><span class="op" id="6878700">)</span><span class="op" id="6878701">,</span>&nbsp;<span class="ident" id="6878703">Over</span><span class="op" id="6878707">,</span>&nbsp;<span class="ident" id="6878709">color</span><span class="op" id="6878714">.</span><span class="ident" id="6878715">RGBA</span><span class="op" id="6878719">{</span><span class="num" id="6878720">100</span><span class="op" id="6878723">,</span>&nbsp;<span class="num" id="6878725">0</span><span class="op" id="6878726">,</span>&nbsp;<span class="num" id="6878728">68</span><span class="op" id="6878730">,</span>&nbsp;<span class="num" id="6878732">255</span><span class="op" id="6878735">}</span><span class="op" id="6878736">}</span><span class="op" id="6878737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878740">{</span><span class="string" id="6878741">&#34;fillAlphaSrc&#34;</span><span class="op" id="6878755">,</span>&nbsp;<span class="ident" id="6878757">fillBlue</span><span class="op" id="6878765">(</span><span class="num" id="6878766">90</span><span class="op" id="6878768">)</span><span class="op" id="6878769">,</span>&nbsp;<span class="ident" id="6878771">fillAlpha</span><span class="op" id="6878780">(</span><span class="num" id="6878781">192</span><span class="op" id="6878784">)</span><span class="op" id="6878785">,</span>&nbsp;<span class="ident" id="6878787">Src</span><span class="op" id="6878790">,</span>&nbsp;<span class="ident" id="6878792">color</span><span class="op" id="6878797">.</span><span class="ident" id="6878798">RGBA</span><span class="op" id="6878802">{</span><span class="num" id="6878803">0</span><span class="op" id="6878804">,</span>&nbsp;<span class="num" id="6878806">0</span><span class="op" id="6878807">,</span>&nbsp;<span class="num" id="6878809">68</span><span class="op" id="6878811">,</span>&nbsp;<span class="num" id="6878813">68</span><span class="op" id="6878815">}</span><span class="op" id="6878816">}</span><span class="op" id="6878817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878820">{</span><span class="string" id="6878821">&#34;fillNil&#34;</span><span class="op" id="6878830">,</span>&nbsp;<span class="ident" id="6878832">fillBlue</span><span class="op" id="6878840">(</span><span class="num" id="6878841">90</span><span class="op" id="6878843">)</span><span class="op" id="6878844">,</span>&nbsp;<span class="builtintype" id="6878846">nil</span><span class="op" id="6878849">,</span>&nbsp;<span class="ident" id="6878851">Over</span><span class="op" id="6878855">,</span>&nbsp;<span class="ident" id="6878857">color</span><span class="op" id="6878862">.</span><span class="ident" id="6878863">RGBA</span><span class="op" id="6878867">{</span><span class="num" id="6878868">88</span><span class="op" id="6878870">,</span>&nbsp;<span class="num" id="6878872">0</span><span class="op" id="6878873">,</span>&nbsp;<span class="num" id="6878875">90</span><span class="op" id="6878877">,</span>&nbsp;<span class="num" id="6878879">255</span><span class="op" id="6878882">}</span><span class="op" id="6878883">}</span><span class="op" id="6878884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6878887">{</span><span class="string" id="6878888">&#34;fillNilSrc&#34;</span><span class="op" id="6878900">,</span>&nbsp;<span class="ident" id="6878902">fillBlue</span><span class="op" id="6878910">(</span><span class="num" id="6878911">90</span><span class="op" id="6878913">)</span><span class="op" id="6878914">,</span>&nbsp;<span class="builtintype" id="6878916">nil</span><span class="op" id="6878919">,</span>&nbsp;<span class="ident" id="6878921">Src</span><span class="op" id="6878924">,</span>&nbsp;<span class="ident" id="6878926">color</span><span class="op" id="6878931">.</span><span class="ident" id="6878932">RGBA</span><span class="op" id="6878936">{</span><span class="num" id="6878937">0</span><span class="op" id="6878938">,</span>&nbsp;<span class="num" id="6878940">0</span><span class="op" id="6878941">,</span>&nbsp;<span class="num" id="6878943">90</span><span class="op" id="6878945">,</span>&nbsp;<span class="num" id="6878947">90</span><span class="op" id="6878949">}</span><span class="op" id="6878950">}</span><span class="op" id="6878951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6878954">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879009">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879034">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879081">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879121">{</span><span class="string" id="6879122">&#34;copy&#34;</span><span class="op" id="6879128">,</span>&nbsp;<span class="ident" id="6879130">vgradGreen</span><span class="op" id="6879140">(</span><span class="num" id="6879141">90</span><span class="op" id="6879143">)</span><span class="op" id="6879144">,</span>&nbsp;<span class="ident" id="6879146">fillAlpha</span><span class="op" id="6879155">(</span><span class="num" id="6879156">255</span><span class="op" id="6879159">)</span><span class="op" id="6879160">,</span>&nbsp;<span class="ident" id="6879162">Over</span><span class="op" id="6879166">,</span>&nbsp;<span class="ident" id="6879168">color</span><span class="op" id="6879173">.</span><span class="ident" id="6879174">RGBA</span><span class="op" id="6879178">{</span><span class="num" id="6879179">88</span><span class="op" id="6879181">,</span>&nbsp;<span class="num" id="6879183">48</span><span class="op" id="6879185">,</span>&nbsp;<span class="num" id="6879187">0</span><span class="op" id="6879188">,</span>&nbsp;<span class="num" id="6879190">255</span><span class="op" id="6879193">}</span><span class="op" id="6879194">}</span><span class="op" id="6879195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879198">{</span><span class="string" id="6879199">&#34;copySrc&#34;</span><span class="op" id="6879208">,</span>&nbsp;<span class="ident" id="6879210">vgradGreen</span><span class="op" id="6879220">(</span><span class="num" id="6879221">90</span><span class="op" id="6879223">)</span><span class="op" id="6879224">,</span>&nbsp;<span class="ident" id="6879226">fillAlpha</span><span class="op" id="6879235">(</span><span class="num" id="6879236">255</span><span class="op" id="6879239">)</span><span class="op" id="6879240">,</span>&nbsp;<span class="ident" id="6879242">Src</span><span class="op" id="6879245">,</span>&nbsp;<span class="ident" id="6879247">color</span><span class="op" id="6879252">.</span><span class="ident" id="6879253">RGBA</span><span class="op" id="6879257">{</span><span class="num" id="6879258">0</span><span class="op" id="6879259">,</span>&nbsp;<span class="num" id="6879261">48</span><span class="op" id="6879263">,</span>&nbsp;<span class="num" id="6879265">0</span><span class="op" id="6879266">,</span>&nbsp;<span class="num" id="6879268">90</span><span class="op" id="6879270">}</span><span class="op" id="6879271">}</span><span class="op" id="6879272">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879275">{</span><span class="string" id="6879276">&#34;copyAlpha&#34;</span><span class="op" id="6879287">,</span>&nbsp;<span class="ident" id="6879289">vgradGreen</span><span class="op" id="6879299">(</span><span class="num" id="6879300">90</span><span class="op" id="6879302">)</span><span class="op" id="6879303">,</span>&nbsp;<span class="ident" id="6879305">fillAlpha</span><span class="op" id="6879314">(</span><span class="num" id="6879315">192</span><span class="op" id="6879318">)</span><span class="op" id="6879319">,</span>&nbsp;<span class="ident" id="6879321">Over</span><span class="op" id="6879325">,</span>&nbsp;<span class="ident" id="6879327">color</span><span class="op" id="6879332">.</span><span class="ident" id="6879333">RGBA</span><span class="op" id="6879337">{</span><span class="num" id="6879338">100</span><span class="op" id="6879341">,</span>&nbsp;<span class="num" id="6879343">36</span><span class="op" id="6879345">,</span>&nbsp;<span class="num" id="6879347">0</span><span class="op" id="6879348">,</span>&nbsp;<span class="num" id="6879350">255</span><span class="op" id="6879353">}</span><span class="op" id="6879354">}</span><span class="op" id="6879355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879358">{</span><span class="string" id="6879359">&#34;copyAlphaSrc&#34;</span><span class="op" id="6879373">,</span>&nbsp;<span class="ident" id="6879375">vgradGreen</span><span class="op" id="6879385">(</span><span class="num" id="6879386">90</span><span class="op" id="6879388">)</span><span class="op" id="6879389">,</span>&nbsp;<span class="ident" id="6879391">fillAlpha</span><span class="op" id="6879400">(</span><span class="num" id="6879401">192</span><span class="op" id="6879404">)</span><span class="op" id="6879405">,</span>&nbsp;<span class="ident" id="6879407">Src</span><span class="op" id="6879410">,</span>&nbsp;<span class="ident" id="6879412">color</span><span class="op" id="6879417">.</span><span class="ident" id="6879418">RGBA</span><span class="op" id="6879422">{</span><span class="num" id="6879423">0</span><span class="op" id="6879424">,</span>&nbsp;<span class="num" id="6879426">36</span><span class="op" id="6879428">,</span>&nbsp;<span class="num" id="6879430">0</span><span class="op" id="6879431">,</span>&nbsp;<span class="num" id="6879433">68</span><span class="op" id="6879435">}</span><span class="op" id="6879436">}</span><span class="op" id="6879437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879440">{</span><span class="string" id="6879441">&#34;copyNil&#34;</span><span class="op" id="6879450">,</span>&nbsp;<span class="ident" id="6879452">vgradGreen</span><span class="op" id="6879462">(</span><span class="num" id="6879463">90</span><span class="op" id="6879465">)</span><span class="op" id="6879466">,</span>&nbsp;<span class="builtintype" id="6879468">nil</span><span class="op" id="6879471">,</span>&nbsp;<span class="ident" id="6879473">Over</span><span class="op" id="6879477">,</span>&nbsp;<span class="ident" id="6879479">color</span><span class="op" id="6879484">.</span><span class="ident" id="6879485">RGBA</span><span class="op" id="6879489">{</span><span class="num" id="6879490">88</span><span class="op" id="6879492">,</span>&nbsp;<span class="num" id="6879494">48</span><span class="op" id="6879496">,</span>&nbsp;<span class="num" id="6879498">0</span><span class="op" id="6879499">,</span>&nbsp;<span class="num" id="6879501">255</span><span class="op" id="6879504">}</span><span class="op" id="6879505">}</span><span class="op" id="6879506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879509">{</span><span class="string" id="6879510">&#34;copyNilSrc&#34;</span><span class="op" id="6879522">,</span>&nbsp;<span class="ident" id="6879524">vgradGreen</span><span class="op" id="6879534">(</span><span class="num" id="6879535">90</span><span class="op" id="6879537">)</span><span class="op" id="6879538">,</span>&nbsp;<span class="builtintype" id="6879540">nil</span><span class="op" id="6879543">,</span>&nbsp;<span class="ident" id="6879545">Src</span><span class="op" id="6879548">,</span>&nbsp;<span class="ident" id="6879550">color</span><span class="op" id="6879555">.</span><span class="ident" id="6879556">RGBA</span><span class="op" id="6879560">{</span><span class="num" id="6879561">0</span><span class="op" id="6879562">,</span>&nbsp;<span class="num" id="6879564">48</span><span class="op" id="6879566">,</span>&nbsp;<span class="num" id="6879568">0</span><span class="op" id="6879569">,</span>&nbsp;<span class="num" id="6879571">90</span><span class="op" id="6879573">}</span><span class="op" id="6879574">}</span><span class="op" id="6879575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879578">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879639">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879664">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879711">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6879806">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879899">{</span><span class="string" id="6879900">&#34;nrgba&#34;</span><span class="op" id="6879907">,</span>&nbsp;<span class="ident" id="6879909">vgradGreenNRGBA</span><span class="op" id="6879924">(</span><span class="num" id="6879925">90</span><span class="op" id="6879927">)</span><span class="op" id="6879928">,</span>&nbsp;<span class="ident" id="6879930">fillAlpha</span><span class="op" id="6879939">(</span><span class="num" id="6879940">255</span><span class="op" id="6879943">)</span><span class="op" id="6879944">,</span>&nbsp;<span class="ident" id="6879946">Over</span><span class="op" id="6879950">,</span>&nbsp;<span class="ident" id="6879952">color</span><span class="op" id="6879957">.</span><span class="ident" id="6879958">RGBA</span><span class="op" id="6879962">{</span><span class="num" id="6879963">88</span><span class="op" id="6879965">,</span>&nbsp;<span class="num" id="6879967">46</span><span class="op" id="6879969">,</span>&nbsp;<span class="num" id="6879971">0</span><span class="op" id="6879972">,</span>&nbsp;<span class="num" id="6879974">255</span><span class="op" id="6879977">}</span><span class="op" id="6879978">}</span><span class="op" id="6879979">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6879982">{</span><span class="string" id="6879983">&#34;nrgbaSrc&#34;</span><span class="op" id="6879993">,</span>&nbsp;<span class="ident" id="6879995">vgradGreenNRGBA</span><span class="op" id="6880010">(</span><span class="num" id="6880011">90</span><span class="op" id="6880013">)</span><span class="op" id="6880014">,</span>&nbsp;<span class="ident" id="6880016">fillAlpha</span><span class="op" id="6880025">(</span><span class="num" id="6880026">255</span><span class="op" id="6880029">)</span><span class="op" id="6880030">,</span>&nbsp;<span class="ident" id="6880032">Src</span><span class="op" id="6880035">,</span>&nbsp;<span class="ident" id="6880037">color</span><span class="op" id="6880042">.</span><span class="ident" id="6880043">RGBA</span><span class="op" id="6880047">{</span><span class="num" id="6880048">0</span><span class="op" id="6880049">,</span>&nbsp;<span class="num" id="6880051">46</span><span class="op" id="6880053">,</span>&nbsp;<span class="num" id="6880055">0</span><span class="op" id="6880056">,</span>&nbsp;<span class="num" id="6880058">90</span><span class="op" id="6880060">}</span><span class="op" id="6880061">}</span><span class="op" id="6880062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880065">{</span><span class="string" id="6880066">&#34;nrgbaAlpha&#34;</span><span class="op" id="6880078">,</span>&nbsp;<span class="ident" id="6880080">vgradGreenNRGBA</span><span class="op" id="6880095">(</span><span class="num" id="6880096">90</span><span class="op" id="6880098">)</span><span class="op" id="6880099">,</span>&nbsp;<span class="ident" id="6880101">fillAlpha</span><span class="op" id="6880110">(</span><span class="num" id="6880111">192</span><span class="op" id="6880114">)</span><span class="op" id="6880115">,</span>&nbsp;<span class="ident" id="6880117">Over</span><span class="op" id="6880121">,</span>&nbsp;<span class="ident" id="6880123">color</span><span class="op" id="6880128">.</span><span class="ident" id="6880129">RGBA</span><span class="op" id="6880133">{</span><span class="num" id="6880134">100</span><span class="op" id="6880137">,</span>&nbsp;<span class="num" id="6880139">34</span><span class="op" id="6880141">,</span>&nbsp;<span class="num" id="6880143">0</span><span class="op" id="6880144">,</span>&nbsp;<span class="num" id="6880146">255</span><span class="op" id="6880149">}</span><span class="op" id="6880150">}</span><span class="op" id="6880151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880154">{</span><span class="string" id="6880155">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6880170">,</span>&nbsp;<span class="ident" id="6880172">vgradGreenNRGBA</span><span class="op" id="6880187">(</span><span class="num" id="6880188">90</span><span class="op" id="6880190">)</span><span class="op" id="6880191">,</span>&nbsp;<span class="ident" id="6880193">fillAlpha</span><span class="op" id="6880202">(</span><span class="num" id="6880203">192</span><span class="op" id="6880206">)</span><span class="op" id="6880207">,</span>&nbsp;<span class="ident" id="6880209">Src</span><span class="op" id="6880212">,</span>&nbsp;<span class="ident" id="6880214">color</span><span class="op" id="6880219">.</span><span class="ident" id="6880220">RGBA</span><span class="op" id="6880224">{</span><span class="num" id="6880225">0</span><span class="op" id="6880226">,</span>&nbsp;<span class="num" id="6880228">34</span><span class="op" id="6880230">,</span>&nbsp;<span class="num" id="6880232">0</span><span class="op" id="6880233">,</span>&nbsp;<span class="num" id="6880235">68</span><span class="op" id="6880237">}</span><span class="op" id="6880238">}</span><span class="op" id="6880239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880242">{</span><span class="string" id="6880243">&#34;nrgbaNil&#34;</span><span class="op" id="6880253">,</span>&nbsp;<span class="ident" id="6880255">vgradGreenNRGBA</span><span class="op" id="6880270">(</span><span class="num" id="6880271">90</span><span class="op" id="6880273">)</span><span class="op" id="6880274">,</span>&nbsp;<span class="builtintype" id="6880276">nil</span><span class="op" id="6880279">,</span>&nbsp;<span class="ident" id="6880281">Over</span><span class="op" id="6880285">,</span>&nbsp;<span class="ident" id="6880287">color</span><span class="op" id="6880292">.</span><span class="ident" id="6880293">RGBA</span><span class="op" id="6880297">{</span><span class="num" id="6880298">88</span><span class="op" id="6880300">,</span>&nbsp;<span class="num" id="6880302">46</span><span class="op" id="6880304">,</span>&nbsp;<span class="num" id="6880306">0</span><span class="op" id="6880307">,</span>&nbsp;<span class="num" id="6880309">255</span><span class="op" id="6880312">}</span><span class="op" id="6880313">}</span><span class="op" id="6880314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880317">{</span><span class="string" id="6880318">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6880331">,</span>&nbsp;<span class="ident" id="6880333">vgradGreenNRGBA</span><span class="op" id="6880348">(</span><span class="num" id="6880349">90</span><span class="op" id="6880351">)</span><span class="op" id="6880352">,</span>&nbsp;<span class="builtintype" id="6880354">nil</span><span class="op" id="6880357">,</span>&nbsp;<span class="ident" id="6880359">Src</span><span class="op" id="6880362">,</span>&nbsp;<span class="ident" id="6880364">color</span><span class="op" id="6880369">.</span><span class="ident" id="6880370">RGBA</span><span class="op" id="6880374">{</span><span class="num" id="6880375">0</span><span class="op" id="6880376">,</span>&nbsp;<span class="num" id="6880378">46</span><span class="op" id="6880380">,</span>&nbsp;<span class="num" id="6880382">0</span><span class="op" id="6880383">,</span>&nbsp;<span class="num" id="6880385">90</span><span class="op" id="6880387">}</span><span class="op" id="6880388">}</span><span class="op" id="6880389">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880392">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880453">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880478">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6880525">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880617">{</span><span class="string" id="6880618">&#34;ycbcr&#34;</span><span class="op" id="6880625">,</span>&nbsp;<span class="ident" id="6880627">vgradCr</span><span class="op" id="6880634">(</span><span class="op" id="6880635">)</span><span class="op" id="6880636">,</span>&nbsp;<span class="ident" id="6880638">fillAlpha</span><span class="op" id="6880647">(</span><span class="num" id="6880648">255</span><span class="op" id="6880651">)</span><span class="op" id="6880652">,</span>&nbsp;<span class="ident" id="6880654">Over</span><span class="op" id="6880658">,</span>&nbsp;<span class="ident" id="6880660">color</span><span class="op" id="6880665">.</span><span class="ident" id="6880666">RGBA</span><span class="op" id="6880670">{</span><span class="num" id="6880671">11</span><span class="op" id="6880673">,</span>&nbsp;<span class="num" id="6880675">38</span><span class="op" id="6880677">,</span>&nbsp;<span class="num" id="6880679">0</span><span class="op" id="6880680">,</span>&nbsp;<span class="num" id="6880682">255</span><span class="op" id="6880685">}</span><span class="op" id="6880686">}</span><span class="op" id="6880687">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880690">{</span><span class="string" id="6880691">&#34;ycbcrSrc&#34;</span><span class="op" id="6880701">,</span>&nbsp;<span class="ident" id="6880703">vgradCr</span><span class="op" id="6880710">(</span><span class="op" id="6880711">)</span><span class="op" id="6880712">,</span>&nbsp;<span class="ident" id="6880714">fillAlpha</span><span class="op" id="6880723">(</span><span class="num" id="6880724">255</span><span class="op" id="6880727">)</span><span class="op" id="6880728">,</span>&nbsp;<span class="ident" id="6880730">Src</span><span class="op" id="6880733">,</span>&nbsp;<span class="ident" id="6880735">color</span><span class="op" id="6880740">.</span><span class="ident" id="6880741">RGBA</span><span class="op" id="6880745">{</span><span class="num" id="6880746">11</span><span class="op" id="6880748">,</span>&nbsp;<span class="num" id="6880750">38</span><span class="op" id="6880752">,</span>&nbsp;<span class="num" id="6880754">0</span><span class="op" id="6880755">,</span>&nbsp;<span class="num" id="6880757">255</span><span class="op" id="6880760">}</span><span class="op" id="6880761">}</span><span class="op" id="6880762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880765">{</span><span class="string" id="6880766">&#34;ycbcrAlpha&#34;</span><span class="op" id="6880778">,</span>&nbsp;<span class="ident" id="6880780">vgradCr</span><span class="op" id="6880787">(</span><span class="op" id="6880788">)</span><span class="op" id="6880789">,</span>&nbsp;<span class="ident" id="6880791">fillAlpha</span><span class="op" id="6880800">(</span><span class="num" id="6880801">192</span><span class="op" id="6880804">)</span><span class="op" id="6880805">,</span>&nbsp;<span class="ident" id="6880807">Over</span><span class="op" id="6880811">,</span>&nbsp;<span class="ident" id="6880813">color</span><span class="op" id="6880818">.</span><span class="ident" id="6880819">RGBA</span><span class="op" id="6880823">{</span><span class="num" id="6880824">42</span><span class="op" id="6880826">,</span>&nbsp;<span class="num" id="6880828">28</span><span class="op" id="6880830">,</span>&nbsp;<span class="num" id="6880832">0</span><span class="op" id="6880833">,</span>&nbsp;<span class="num" id="6880835">255</span><span class="op" id="6880838">}</span><span class="op" id="6880839">}</span><span class="op" id="6880840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880843">{</span><span class="string" id="6880844">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6880859">,</span>&nbsp;<span class="ident" id="6880861">vgradCr</span><span class="op" id="6880868">(</span><span class="op" id="6880869">)</span><span class="op" id="6880870">,</span>&nbsp;<span class="ident" id="6880872">fillAlpha</span><span class="op" id="6880881">(</span><span class="num" id="6880882">192</span><span class="op" id="6880885">)</span><span class="op" id="6880886">,</span>&nbsp;<span class="ident" id="6880888">Src</span><span class="op" id="6880891">,</span>&nbsp;<span class="ident" id="6880893">color</span><span class="op" id="6880898">.</span><span class="ident" id="6880899">RGBA</span><span class="op" id="6880903">{</span><span class="num" id="6880904">8</span><span class="op" id="6880905">,</span>&nbsp;<span class="num" id="6880907">28</span><span class="op" id="6880909">,</span>&nbsp;<span class="num" id="6880911">0</span><span class="op" id="6880912">,</span>&nbsp;<span class="num" id="6880914">192</span><span class="op" id="6880917">}</span><span class="op" id="6880918">}</span><span class="op" id="6880919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880922">{</span><span class="string" id="6880923">&#34;ycbcrNil&#34;</span><span class="op" id="6880933">,</span>&nbsp;<span class="ident" id="6880935">vgradCr</span><span class="op" id="6880942">(</span><span class="op" id="6880943">)</span><span class="op" id="6880944">,</span>&nbsp;<span class="builtintype" id="6880946">nil</span><span class="op" id="6880949">,</span>&nbsp;<span class="ident" id="6880951">Over</span><span class="op" id="6880955">,</span>&nbsp;<span class="ident" id="6880957">color</span><span class="op" id="6880962">.</span><span class="ident" id="6880963">RGBA</span><span class="op" id="6880967">{</span><span class="num" id="6880968">11</span><span class="op" id="6880970">,</span>&nbsp;<span class="num" id="6880972">38</span><span class="op" id="6880974">,</span>&nbsp;<span class="num" id="6880976">0</span><span class="op" id="6880977">,</span>&nbsp;<span class="num" id="6880979">255</span><span class="op" id="6880982">}</span><span class="op" id="6880983">}</span><span class="op" id="6880984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6880987">{</span><span class="string" id="6880988">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6881001">,</span>&nbsp;<span class="ident" id="6881003">vgradCr</span><span class="op" id="6881010">(</span><span class="op" id="6881011">)</span><span class="op" id="6881012">,</span>&nbsp;<span class="builtintype" id="6881014">nil</span><span class="op" id="6881017">,</span>&nbsp;<span class="ident" id="6881019">Src</span><span class="op" id="6881022">,</span>&nbsp;<span class="ident" id="6881024">color</span><span class="op" id="6881029">.</span><span class="ident" id="6881030">RGBA</span><span class="op" id="6881034">{</span><span class="num" id="6881035">11</span><span class="op" id="6881037">,</span>&nbsp;<span class="num" id="6881039">38</span><span class="op" id="6881041">,</span>&nbsp;<span class="num" id="6881043">0</span><span class="op" id="6881044">,</span>&nbsp;<span class="num" id="6881046">255</span><span class="op" id="6881049">}</span><span class="op" id="6881050">}</span><span class="op" id="6881051">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881054">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881093">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881118">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881165">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881207">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881250">{</span><span class="string" id="6881251">&#34;generic&#34;</span><span class="op" id="6881260">,</span>&nbsp;<span class="ident" id="6881262">fillBlue</span><span class="op" id="6881270">(</span><span class="num" id="6881271">255</span><span class="op" id="6881274">)</span><span class="op" id="6881275">,</span>&nbsp;<span class="ident" id="6881277">vgradAlpha</span><span class="op" id="6881287">(</span><span class="num" id="6881288">192</span><span class="op" id="6881291">)</span><span class="op" id="6881292">,</span>&nbsp;<span class="ident" id="6881294">Over</span><span class="op" id="6881298">,</span>&nbsp;<span class="ident" id="6881300">color</span><span class="op" id="6881305">.</span><span class="ident" id="6881306">RGBA</span><span class="op" id="6881310">{</span><span class="num" id="6881311">81</span><span class="op" id="6881313">,</span>&nbsp;<span class="num" id="6881315">0</span><span class="op" id="6881316">,</span>&nbsp;<span class="num" id="6881318">102</span><span class="op" id="6881321">,</span>&nbsp;<span class="num" id="6881323">255</span><span class="op" id="6881326">}</span><span class="op" id="6881327">}</span><span class="op" id="6881328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881331">{</span><span class="string" id="6881332">&#34;genericSrc&#34;</span><span class="op" id="6881344">,</span>&nbsp;<span class="ident" id="6881346">fillBlue</span><span class="op" id="6881354">(</span><span class="num" id="6881355">255</span><span class="op" id="6881358">)</span><span class="op" id="6881359">,</span>&nbsp;<span class="ident" id="6881361">vgradAlpha</span><span class="op" id="6881371">(</span><span class="num" id="6881372">192</span><span class="op" id="6881375">)</span><span class="op" id="6881376">,</span>&nbsp;<span class="ident" id="6881378">Src</span><span class="op" id="6881381">,</span>&nbsp;<span class="ident" id="6881383">color</span><span class="op" id="6881388">.</span><span class="ident" id="6881389">RGBA</span><span class="op" id="6881393">{</span><span class="num" id="6881394">0</span><span class="op" id="6881395">,</span>&nbsp;<span class="num" id="6881397">0</span><span class="op" id="6881398">,</span>&nbsp;<span class="num" id="6881400">102</span><span class="op" id="6881403">,</span>&nbsp;<span class="num" id="6881405">102</span><span class="op" id="6881408">}</span><span class="op" id="6881409">}</span><span class="op" id="6881410">,</span><br>
<span class="lineno"></span><span class="op" id="6881412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6881415">func</span>&nbsp;<span class="ident" id="6881420">makeGolden</span><span class="op" id="6881430">(</span><span class="ident" id="6881431">dst</span>&nbsp;<span class="ident" id="6881435">image</span><span class="op" id="6881440">.</span><span class="ident" id="6881441">Image</span><span class="op" id="6881446">,</span>&nbsp;<span class="ident" id="6881448">r</span>&nbsp;<span class="ident" id="6881450">image</span><span class="op" id="6881455">.</span><span class="ident" id="6881456">Rectangle</span><span class="op" id="6881465">,</span>&nbsp;<span class="ident" id="6881467">src</span>&nbsp;<span class="ident" id="6881471">image</span><span class="op" id="6881476">.</span><span class="ident" id="6881477">Image</span><span class="op" id="6881482">,</span>&nbsp;<span class="ident" id="6881484">sp</span>&nbsp;<span class="ident" id="6881487">image</span><span class="op" id="6881492">.</span><span class="ident" id="6881493">Point</span><span class="op" id="6881498">,</span>&nbsp;<span class="ident" id="6881500">mask</span>&nbsp;<span class="ident" id="6881505">image</span><span class="op" id="6881510">.</span><span class="ident" id="6881511">Image</span><span class="op" id="6881516">,</span>&nbsp;<span class="ident" id="6881518">mp</span>&nbsp;<span class="ident" id="6881521">image</span><span class="op" id="6881526">.</span><span class="ident" id="6881527">Point</span><span class="op" id="6881532">,</span>&nbsp;<span class="ident" id="6881534">op</span>&nbsp;<span class="ident" id="6881537">Op</span><span class="op" id="6881539">)</span>&nbsp;<span class="ident" id="6881541">image</span><span class="op" id="6881546">.</span><span class="ident" id="6881547">Image</span>&nbsp;<span class="op" id="6881553">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881556">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6881631">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881701">b</span>&nbsp;<span class="op" id="6881703">:=</span>&nbsp;<span class="ident" id="6881706">dst</span><span class="op" id="6881709">.</span><span class="ident" id="6881710">Bounds</span><span class="op" id="6881716">(</span><span class="op" id="6881717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881720">sb</span>&nbsp;<span class="op" id="6881723">:=</span>&nbsp;<span class="ident" id="6881726">src</span><span class="op" id="6881729">.</span><span class="ident" id="6881730">Bounds</span><span class="op" id="6881736">(</span><span class="op" id="6881737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881740">mb</span>&nbsp;<span class="op" id="6881743">:=</span>&nbsp;<span class="ident" id="6881746">image</span><span class="op" id="6881751">.</span><span class="ident" id="6881752">Rect</span><span class="op" id="6881756">(</span><span class="op" id="6881757">-</span><span class="num" id="6881758">1e9</span><span class="op" id="6881761">,</span>&nbsp;<span class="op" id="6881763">-</span><span class="num" id="6881764">1e9</span><span class="op" id="6881767">,</span>&nbsp;<span class="num" id="6881769">1e9</span><span class="op" id="6881772">,</span>&nbsp;<span class="num" id="6881774">1e9</span><span class="op" id="6881777">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881780">if</span>&nbsp;<span class="ident" id="6881783">mask</span>&nbsp;<span class="op" id="6881788">!=</span>&nbsp;<span class="builtintype" id="6881791">nil</span>&nbsp;<span class="op" id="6881795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881799">mb</span>&nbsp;<span class="op" id="6881802">=</span>&nbsp;<span class="ident" id="6881804">mask</span><span class="op" id="6881808">.</span><span class="ident" id="6881809">Bounds</span><span class="op" id="6881815">(</span><span class="op" id="6881816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6881819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881822">golden</span>&nbsp;<span class="op" id="6881829">:=</span>&nbsp;<span class="ident" id="6881832">image</span><span class="op" id="6881837">.</span><span class="ident" id="6881838">NewRGBA</span><span class="op" id="6881845">(</span><span class="ident" id="6881846">image</span><span class="op" id="6881851">.</span><span class="ident" id="6881852">Rect</span><span class="op" id="6881856">(</span><span class="num" id="6881857">0</span><span class="op" id="6881858">,</span>&nbsp;<span class="num" id="6881860">0</span><span class="op" id="6881861">,</span>&nbsp;<span class="ident" id="6881863">b</span><span class="op" id="6881864">.</span><span class="ident" id="6881865">Max</span><span class="op" id="6881868">.</span><span class="ident" id="6881869">X</span><span class="op" id="6881870">,</span>&nbsp;<span class="ident" id="6881872">b</span><span class="op" id="6881873">.</span><span class="ident" id="6881874">Max</span><span class="op" id="6881877">.</span><span class="ident" id="6881878">Y</span><span class="op" id="6881879">)</span><span class="op" id="6881880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881883">for</span>&nbsp;<span class="ident" id="6881887">y</span>&nbsp;<span class="op" id="6881889">:=</span>&nbsp;<span class="ident" id="6881892">r</span><span class="op" id="6881893">.</span><span class="ident" id="6881894">Min</span><span class="op" id="6881897">.</span><span class="ident" id="6881898">Y</span><span class="op" id="6881899">;</span>&nbsp;<span class="ident" id="6881901">y</span>&nbsp;<span class="op" id="6881903">&lt;</span>&nbsp;<span class="ident" id="6881905">r</span><span class="op" id="6881906">.</span><span class="ident" id="6881907">Max</span><span class="op" id="6881910">.</span><span class="ident" id="6881911">Y</span><span class="op" id="6881912">;</span>&nbsp;<span class="ident" id="6881914">y</span><span class="op" id="6881915">++</span>&nbsp;<span class="op" id="6881918">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881922">sy</span>&nbsp;<span class="op" id="6881925">:=</span>&nbsp;<span class="ident" id="6881928">y</span>&nbsp;<span class="op" id="6881930">+</span>&nbsp;<span class="ident" id="6881932">sp</span><span class="op" id="6881934">.</span><span class="ident" id="6881935">Y</span>&nbsp;<span class="op" id="6881937">-</span>&nbsp;<span class="ident" id="6881939">r</span><span class="op" id="6881940">.</span><span class="ident" id="6881941">Min</span><span class="op" id="6881944">.</span><span class="ident" id="6881945">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6881949">my</span>&nbsp;<span class="op" id="6881952">:=</span>&nbsp;<span class="ident" id="6881955">y</span>&nbsp;<span class="op" id="6881957">+</span>&nbsp;<span class="ident" id="6881959">mp</span><span class="op" id="6881961">.</span><span class="ident" id="6881962">Y</span>&nbsp;<span class="op" id="6881964">-</span>&nbsp;<span class="ident" id="6881966">r</span><span class="op" id="6881967">.</span><span class="ident" id="6881968">Min</span><span class="op" id="6881971">.</span><span class="ident" id="6881972">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6881976">for</span>&nbsp;<span class="ident" id="6881980">x</span>&nbsp;<span class="op" id="6881982">:=</span>&nbsp;<span class="ident" id="6881985">r</span><span class="op" id="6881986">.</span><span class="ident" id="6881987">Min</span><span class="op" id="6881990">.</span><span class="ident" id="6881991">X</span><span class="op" id="6881992">;</span>&nbsp;<span class="ident" id="6881994">x</span>&nbsp;<span class="op" id="6881996">&lt;</span>&nbsp;<span class="ident" id="6881998">r</span><span class="op" id="6881999">.</span><span class="ident" id="6882000">Max</span><span class="op" id="6882003">.</span><span class="ident" id="6882004">X</span><span class="op" id="6882005">;</span>&nbsp;<span class="ident" id="6882007">x</span><span class="op" id="6882008">++</span>&nbsp;<span class="op" id="6882011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882016">if</span>&nbsp;<span class="op" id="6882019">!</span><span class="op" id="6882020">(</span><span class="ident" id="6882021">image</span><span class="op" id="6882026">.</span><span class="ident" id="6882027">Pt</span><span class="op" id="6882029">(</span><span class="ident" id="6882030">x</span><span class="op" id="6882031">,</span>&nbsp;<span class="ident" id="6882033">y</span><span class="op" id="6882034">)</span><span class="op" id="6882035">.</span><span class="ident" id="6882036">In</span><span class="op" id="6882038">(</span><span class="ident" id="6882039">b</span><span class="op" id="6882040">)</span><span class="op" id="6882041">)</span>&nbsp;<span class="op" id="6882043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882049">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882066">sx</span>&nbsp;<span class="op" id="6882069">:=</span>&nbsp;<span class="ident" id="6882072">x</span>&nbsp;<span class="op" id="6882074">+</span>&nbsp;<span class="ident" id="6882076">sp</span><span class="op" id="6882078">.</span><span class="ident" id="6882079">X</span>&nbsp;<span class="op" id="6882081">-</span>&nbsp;<span class="ident" id="6882083">r</span><span class="op" id="6882084">.</span><span class="ident" id="6882085">Min</span><span class="op" id="6882088">.</span><span class="ident" id="6882089">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882094">if</span>&nbsp;<span class="op" id="6882097">!</span><span class="op" id="6882098">(</span><span class="ident" id="6882099">image</span><span class="op" id="6882104">.</span><span class="ident" id="6882105">Pt</span><span class="op" id="6882107">(</span><span class="ident" id="6882108">sx</span><span class="op" id="6882110">,</span>&nbsp;<span class="ident" id="6882112">sy</span><span class="op" id="6882114">)</span><span class="op" id="6882115">.</span><span class="ident" id="6882116">In</span><span class="op" id="6882118">(</span><span class="ident" id="6882119">sb</span><span class="op" id="6882121">)</span><span class="op" id="6882122">)</span>&nbsp;<span class="op" id="6882124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882130">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882142">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882147">mx</span>&nbsp;<span class="op" id="6882150">:=</span>&nbsp;<span class="ident" id="6882153">x</span>&nbsp;<span class="op" id="6882155">+</span>&nbsp;<span class="ident" id="6882157">mp</span><span class="op" id="6882159">.</span><span class="ident" id="6882160">X</span>&nbsp;<span class="op" id="6882162">-</span>&nbsp;<span class="ident" id="6882164">r</span><span class="op" id="6882165">.</span><span class="ident" id="6882166">Min</span><span class="op" id="6882169">.</span><span class="ident" id="6882170">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882175">if</span>&nbsp;<span class="op" id="6882178">!</span><span class="op" id="6882179">(</span><span class="ident" id="6882180">image</span><span class="op" id="6882185">.</span><span class="ident" id="6882186">Pt</span><span class="op" id="6882188">(</span><span class="ident" id="6882189">mx</span><span class="op" id="6882191">,</span>&nbsp;<span class="ident" id="6882193">my</span><span class="op" id="6882195">)</span><span class="op" id="6882196">.</span><span class="ident" id="6882197">In</span><span class="op" id="6882199">(</span><span class="ident" id="6882200">mb</span><span class="op" id="6882202">)</span><span class="op" id="6882203">)</span>&nbsp;<span class="op" id="6882205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882211">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882229">const</span>&nbsp;<span class="ident" id="6882235">M</span>&nbsp;<span class="op" id="6882237">=</span>&nbsp;<span class="num" id="6882239">1</span><span class="op" id="6882240">&lt;&lt;</span><span class="num" id="6882242">16</span>&nbsp;<span class="op" id="6882245">-</span>&nbsp;<span class="num" id="6882247">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882252">var</span>&nbsp;<span class="ident" id="6882256">dr</span><span class="op" id="6882258">,</span>&nbsp;<span class="ident" id="6882260">dg</span><span class="op" id="6882262">,</span>&nbsp;<span class="ident" id="6882264">db</span><span class="op" id="6882266">,</span>&nbsp;<span class="ident" id="6882268">da</span>&nbsp;<span class="builtintype" id="6882271">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882281">if</span>&nbsp;<span class="ident" id="6882284">op</span>&nbsp;<span class="op" id="6882287">==</span>&nbsp;<span class="ident" id="6882290">Over</span>&nbsp;<span class="op" id="6882295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882301">dr</span><span class="op" id="6882303">,</span>&nbsp;<span class="ident" id="6882305">dg</span><span class="op" id="6882307">,</span>&nbsp;<span class="ident" id="6882309">db</span><span class="op" id="6882311">,</span>&nbsp;<span class="ident" id="6882313">da</span>&nbsp;<span class="op" id="6882316">=</span>&nbsp;<span class="ident" id="6882318">dst</span><span class="op" id="6882321">.</span><span class="ident" id="6882322">At</span><span class="op" id="6882324">(</span><span class="ident" id="6882325">x</span><span class="op" id="6882326">,</span>&nbsp;<span class="ident" id="6882328">y</span><span class="op" id="6882329">)</span><span class="op" id="6882330">.</span><span class="ident" id="6882331">RGBA</span><span class="op" id="6882335">(</span><span class="op" id="6882336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882341">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882346">sr</span><span class="op" id="6882348">,</span>&nbsp;<span class="ident" id="6882350">sg</span><span class="op" id="6882352">,</span>&nbsp;<span class="ident" id="6882354">sb</span><span class="op" id="6882356">,</span>&nbsp;<span class="ident" id="6882358">sa</span>&nbsp;<span class="op" id="6882361">:=</span>&nbsp;<span class="ident" id="6882364">src</span><span class="op" id="6882367">.</span><span class="ident" id="6882368">At</span><span class="op" id="6882370">(</span><span class="ident" id="6882371">sx</span><span class="op" id="6882373">,</span>&nbsp;<span class="ident" id="6882375">sy</span><span class="op" id="6882377">)</span><span class="op" id="6882378">.</span><span class="ident" id="6882379">RGBA</span><span class="op" id="6882383">(</span><span class="op" id="6882384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882389">ma</span>&nbsp;<span class="op" id="6882392">:=</span>&nbsp;<span class="builtintype" id="6882395">uint32</span><span class="op" id="6882401">(</span><span class="ident" id="6882402">M</span><span class="op" id="6882403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882408">if</span>&nbsp;<span class="ident" id="6882411">mask</span>&nbsp;<span class="op" id="6882416">!=</span>&nbsp;<span class="builtintype" id="6882419">nil</span>&nbsp;<span class="op" id="6882423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882429">_</span><span class="op" id="6882430">,</span>&nbsp;<span class="ident" id="6882432">_</span><span class="op" id="6882433">,</span>&nbsp;<span class="ident" id="6882435">_</span><span class="op" id="6882436">,</span>&nbsp;<span class="ident" id="6882438">ma</span>&nbsp;<span class="op" id="6882441">=</span>&nbsp;<span class="ident" id="6882443">mask</span><span class="op" id="6882447">.</span><span class="ident" id="6882448">At</span><span class="op" id="6882450">(</span><span class="ident" id="6882451">mx</span><span class="op" id="6882453">,</span>&nbsp;<span class="ident" id="6882455">my</span><span class="op" id="6882457">)</span><span class="op" id="6882458">.</span><span class="ident" id="6882459">RGBA</span><span class="op" id="6882463">(</span><span class="op" id="6882464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882469">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882474">a</span>&nbsp;<span class="op" id="6882476">:=</span>&nbsp;<span class="ident" id="6882479">M</span>&nbsp;<span class="op" id="6882481">-</span>&nbsp;<span class="op" id="6882483">(</span><span class="ident" id="6882484">sa</span>&nbsp;<span class="op" id="6882487">*</span>&nbsp;<span class="ident" id="6882489">ma</span>&nbsp;<span class="op" id="6882492">/</span>&nbsp;<span class="ident" id="6882494">M</span><span class="op" id="6882495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882500">golden</span><span class="op" id="6882506">.</span><span class="ident" id="6882507">Set</span><span class="op" id="6882510">(</span><span class="ident" id="6882511">x</span><span class="op" id="6882512">,</span>&nbsp;<span class="ident" id="6882514">y</span><span class="op" id="6882515">,</span>&nbsp;<span class="ident" id="6882517">color</span><span class="op" id="6882522">.</span><span class="ident" id="6882523">RGBA64</span><span class="op" id="6882529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6882535">uint16</span><span class="op" id="6882541">(</span><span class="op" id="6882542">(</span><span class="ident" id="6882543">dr</span><span class="op" id="6882545">*</span><span class="ident" id="6882546">a</span>&nbsp;<span class="op" id="6882548">+</span>&nbsp;<span class="ident" id="6882550">sr</span><span class="op" id="6882552">*</span><span class="ident" id="6882553">ma</span><span class="op" id="6882555">)</span>&nbsp;<span class="op" id="6882557">/</span>&nbsp;<span class="ident" id="6882559">M</span><span class="op" id="6882560">)</span><span class="op" id="6882561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6882567">uint16</span><span class="op" id="6882573">(</span><span class="op" id="6882574">(</span><span class="ident" id="6882575">dg</span><span class="op" id="6882577">*</span><span class="ident" id="6882578">a</span>&nbsp;<span class="op" id="6882580">+</span>&nbsp;<span class="ident" id="6882582">sg</span><span class="op" id="6882584">*</span><span class="ident" id="6882585">ma</span><span class="op" id="6882587">)</span>&nbsp;<span class="op" id="6882589">/</span>&nbsp;<span class="ident" id="6882591">M</span><span class="op" id="6882592">)</span><span class="op" id="6882593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6882599">uint16</span><span class="op" id="6882605">(</span><span class="op" id="6882606">(</span><span class="ident" id="6882607">db</span><span class="op" id="6882609">*</span><span class="ident" id="6882610">a</span>&nbsp;<span class="op" id="6882612">+</span>&nbsp;<span class="ident" id="6882614">sb</span><span class="op" id="6882616">*</span><span class="ident" id="6882617">ma</span><span class="op" id="6882619">)</span>&nbsp;<span class="op" id="6882621">/</span>&nbsp;<span class="ident" id="6882623">M</span><span class="op" id="6882624">)</span><span class="op" id="6882625">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6882631">uint16</span><span class="op" id="6882637">(</span><span class="op" id="6882638">(</span><span class="ident" id="6882639">da</span><span class="op" id="6882641">*</span><span class="ident" id="6882642">a</span>&nbsp;<span class="op" id="6882644">+</span>&nbsp;<span class="ident" id="6882646">sa</span><span class="op" id="6882648">*</span><span class="ident" id="6882649">ma</span><span class="op" id="6882651">)</span>&nbsp;<span class="op" id="6882653">/</span>&nbsp;<span class="ident" id="6882655">M</span><span class="op" id="6882656">)</span><span class="op" id="6882657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882662">}</span><span class="op" id="6882663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6882670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6882673">return</span>&nbsp;<span class="ident" id="6882680">golden</span><span class="op" id="6882686">.</span><span class="ident" id="6882687">SubImage</span><span class="op" id="6882695">(</span><span class="ident" id="6882696">b</span><span class="op" id="6882697">)</span><br>
<span class="lineno">205</span><span class="op" id="6882699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6882702">func</span>&nbsp;<span class="ident" id="6882707">TestDraw</span><span class="op" id="6882715">(</span><span class="ident" id="6882716">t</span>&nbsp;<span class="op" id="6882718">*</span><span class="ident" id="6882719">testing</span><span class="op" id="6882726">.</span><span class="ident" id="6882727">T</span><span class="op" id="6882728">)</span>&nbsp;<span class="op" id="6882730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882733">rr</span>&nbsp;<span class="op" id="6882736">:=</span>&nbsp;<span class="op" id="6882739">[</span><span class="op" id="6882740">]</span><span class="ident" id="6882741">image</span><span class="op" id="6882746">.</span><span class="ident" id="6882747">Rectangle</span><span class="op" id="6882756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882760">image</span><span class="op" id="6882765">.</span><span class="ident" id="6882766">Rect</span><span class="op" id="6882770">(</span><span class="num" id="6882771">0</span><span class="op" id="6882772">,</span>&nbsp;<span class="num" id="6882774">0</span><span class="op" id="6882775">,</span>&nbsp;<span class="num" id="6882777">0</span><span class="op" id="6882778">,</span>&nbsp;<span class="num" id="6882780">0</span><span class="op" id="6882781">)</span><span class="op" id="6882782">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882786">image</span><span class="op" id="6882791">.</span><span class="ident" id="6882792">Rect</span><span class="op" id="6882796">(</span><span class="num" id="6882797">0</span><span class="op" id="6882798">,</span>&nbsp;<span class="num" id="6882800">0</span><span class="op" id="6882801">,</span>&nbsp;<span class="num" id="6882803">16</span><span class="op" id="6882805">,</span>&nbsp;<span class="num" id="6882807">16</span><span class="op" id="6882809">)</span><span class="op" id="6882810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882814">image</span><span class="op" id="6882819">.</span><span class="ident" id="6882820">Rect</span><span class="op" id="6882824">(</span><span class="num" id="6882825">3</span><span class="op" id="6882826">,</span>&nbsp;<span class="num" id="6882828">5</span><span class="op" id="6882829">,</span>&nbsp;<span class="num" id="6882831">12</span><span class="op" id="6882833">,</span>&nbsp;<span class="num" id="6882835">10</span><span class="op" id="6882837">)</span><span class="op" id="6882838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882842">image</span><span class="op" id="6882847">.</span><span class="ident" id="6882848">Rect</span><span class="op" id="6882852">(</span><span class="num" id="6882853">0</span><span class="op" id="6882854">,</span>&nbsp;<span class="num" id="6882856">0</span><span class="op" id="6882857">,</span>&nbsp;<span class="num" id="6882859">9</span><span class="op" id="6882860">,</span>&nbsp;<span class="num" id="6882862">9</span><span class="op" id="6882863">)</span><span class="op" id="6882864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882868">image</span><span class="op" id="6882873">.</span><span class="ident" id="6882874">Rect</span><span class="op" id="6882878">(</span><span class="num" id="6882879">8</span><span class="op" id="6882880">,</span>&nbsp;<span class="num" id="6882882">8</span><span class="op" id="6882883">,</span>&nbsp;<span class="num" id="6882885">16</span><span class="op" id="6882887">,</span>&nbsp;<span class="num" id="6882889">16</span><span class="op" id="6882891">)</span><span class="op" id="6882892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882896">image</span><span class="op" id="6882901">.</span><span class="ident" id="6882902">Rect</span><span class="op" id="6882906">(</span><span class="num" id="6882907">8</span><span class="op" id="6882908">,</span>&nbsp;<span class="num" id="6882910">0</span><span class="op" id="6882911">,</span>&nbsp;<span class="num" id="6882913">9</span><span class="op" id="6882914">,</span>&nbsp;<span class="num" id="6882916">16</span><span class="op" id="6882918">)</span><span class="op" id="6882919">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882923">image</span><span class="op" id="6882928">.</span><span class="ident" id="6882929">Rect</span><span class="op" id="6882933">(</span><span class="num" id="6882934">0</span><span class="op" id="6882935">,</span>&nbsp;<span class="num" id="6882937">8</span><span class="op" id="6882938">,</span>&nbsp;<span class="num" id="6882940">16</span><span class="op" id="6882942">,</span>&nbsp;<span class="num" id="6882944">9</span><span class="op" id="6882945">)</span><span class="op" id="6882946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882950">image</span><span class="op" id="6882955">.</span><span class="ident" id="6882956">Rect</span><span class="op" id="6882960">(</span><span class="num" id="6882961">8</span><span class="op" id="6882962">,</span>&nbsp;<span class="num" id="6882964">8</span><span class="op" id="6882965">,</span>&nbsp;<span class="num" id="6882967">9</span><span class="op" id="6882968">,</span>&nbsp;<span class="num" id="6882970">9</span><span class="op" id="6882971">)</span><span class="op" id="6882972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6882976">image</span><span class="op" id="6882981">.</span><span class="ident" id="6882982">Rect</span><span class="op" id="6882986">(</span><span class="num" id="6882987">8</span><span class="op" id="6882988">,</span>&nbsp;<span class="num" id="6882990">8</span><span class="op" id="6882991">,</span>&nbsp;<span class="num" id="6882993">8</span><span class="op" id="6882994">,</span>&nbsp;<span class="num" id="6882996">8</span><span class="op" id="6882997">)</span><span class="op" id="6882998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6883001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883004">for</span>&nbsp;<span class="ident" id="6883008">_</span><span class="op" id="6883009">,</span>&nbsp;<span class="ident" id="6883011">r</span>&nbsp;<span class="op" id="6883013">:=</span>&nbsp;<span class="keyword" id="6883016">range</span>&nbsp;<span class="ident" id="6883022">rr</span>&nbsp;<span class="op" id="6883025">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883028">loop</span><span class="op" id="6883032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883036">for</span>&nbsp;<span class="ident" id="6883040">_</span><span class="op" id="6883041">,</span>&nbsp;<span class="ident" id="6883043">test</span>&nbsp;<span class="op" id="6883048">:=</span>&nbsp;<span class="keyword" id="6883051">range</span>&nbsp;<span class="ident" id="6883057">drawTests</span>&nbsp;<span class="op" id="6883067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883072">dst</span>&nbsp;<span class="op" id="6883076">:=</span>&nbsp;<span class="ident" id="6883079">hgradRed</span><span class="op" id="6883087">(</span><span class="num" id="6883088">255</span><span class="op" id="6883091">)</span><span class="op" id="6883092">.</span><span class="op" id="6883093">(</span><span class="op" id="6883094">*</span><span class="ident" id="6883095">image</span><span class="op" id="6883100">.</span><span class="ident" id="6883101">RGBA</span><span class="op" id="6883105">)</span><span class="op" id="6883106">.</span><span class="ident" id="6883107">SubImage</span><span class="op" id="6883115">(</span><span class="ident" id="6883116">r</span><span class="op" id="6883117">)</span><span class="op" id="6883118">.</span><span class="op" id="6883119">(</span><span class="ident" id="6883120">Image</span><span class="op" id="6883125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6883130">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883231">golden</span>&nbsp;<span class="op" id="6883238">:=</span>&nbsp;<span class="ident" id="6883241">makeGolden</span><span class="op" id="6883251">(</span><span class="ident" id="6883252">dst</span><span class="op" id="6883255">,</span>&nbsp;<span class="ident" id="6883257">image</span><span class="op" id="6883262">.</span><span class="ident" id="6883263">Rect</span><span class="op" id="6883267">(</span><span class="num" id="6883268">0</span><span class="op" id="6883269">,</span>&nbsp;<span class="num" id="6883271">0</span><span class="op" id="6883272">,</span>&nbsp;<span class="num" id="6883274">16</span><span class="op" id="6883276">,</span>&nbsp;<span class="num" id="6883278">16</span><span class="op" id="6883280">)</span><span class="op" id="6883281">,</span>&nbsp;<span class="ident" id="6883283">test</span><span class="op" id="6883287">.</span><span class="ident" id="6883288">src</span><span class="op" id="6883291">,</span>&nbsp;<span class="ident" id="6883293">image</span><span class="op" id="6883298">.</span><span class="ident" id="6883299">ZP</span><span class="op" id="6883301">,</span>&nbsp;<span class="ident" id="6883303">test</span><span class="op" id="6883307">.</span><span class="ident" id="6883308">mask</span><span class="op" id="6883312">,</span>&nbsp;<span class="ident" id="6883314">image</span><span class="op" id="6883319">.</span><span class="ident" id="6883320">ZP</span><span class="op" id="6883322">,</span>&nbsp;<span class="ident" id="6883324">test</span><span class="op" id="6883328">.</span><span class="ident" id="6883329">op</span><span class="op" id="6883331">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883336">b</span>&nbsp;<span class="op" id="6883338">:=</span>&nbsp;<span class="ident" id="6883341">dst</span><span class="op" id="6883344">.</span><span class="ident" id="6883345">Bounds</span><span class="op" id="6883351">(</span><span class="op" id="6883352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883357">if</span>&nbsp;<span class="op" id="6883360">!</span><span class="ident" id="6883361">b</span><span class="op" id="6883362">.</span><span class="ident" id="6883363">Eq</span><span class="op" id="6883365">(</span><span class="ident" id="6883366">golden</span><span class="op" id="6883372">.</span><span class="ident" id="6883373">Bounds</span><span class="op" id="6883379">(</span><span class="op" id="6883380">)</span><span class="op" id="6883381">)</span>&nbsp;<span class="op" id="6883383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883389">t</span><span class="op" id="6883390">.</span><span class="ident" id="6883391">Errorf</span><span class="op" id="6883397">(</span><span class="string" id="6883398">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6883431">,</span>&nbsp;<span class="ident" id="6883433">r</span><span class="op" id="6883434">,</span>&nbsp;<span class="ident" id="6883436">test</span><span class="op" id="6883440">.</span><span class="ident" id="6883441">desc</span><span class="op" id="6883445">,</span>&nbsp;<span class="ident" id="6883447">dst</span><span class="op" id="6883450">.</span><span class="ident" id="6883451">Bounds</span><span class="op" id="6883457">(</span><span class="op" id="6883458">)</span><span class="op" id="6883459">,</span>&nbsp;<span class="ident" id="6883461">golden</span><span class="op" id="6883467">.</span><span class="ident" id="6883468">Bounds</span><span class="op" id="6883474">(</span><span class="op" id="6883475">)</span><span class="op" id="6883476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883482">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6883494">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6883499">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883596">DrawMask</span><span class="op" id="6883604">(</span><span class="ident" id="6883605">dst</span><span class="op" id="6883608">,</span>&nbsp;<span class="ident" id="6883610">image</span><span class="op" id="6883615">.</span><span class="ident" id="6883616">Rect</span><span class="op" id="6883620">(</span><span class="num" id="6883621">0</span><span class="op" id="6883622">,</span>&nbsp;<span class="num" id="6883624">0</span><span class="op" id="6883625">,</span>&nbsp;<span class="num" id="6883627">16</span><span class="op" id="6883629">,</span>&nbsp;<span class="num" id="6883631">16</span><span class="op" id="6883633">)</span><span class="op" id="6883634">,</span>&nbsp;<span class="ident" id="6883636">test</span><span class="op" id="6883640">.</span><span class="ident" id="6883641">src</span><span class="op" id="6883644">,</span>&nbsp;<span class="ident" id="6883646">image</span><span class="op" id="6883651">.</span><span class="ident" id="6883652">ZP</span><span class="op" id="6883654">,</span>&nbsp;<span class="ident" id="6883656">test</span><span class="op" id="6883660">.</span><span class="ident" id="6883661">mask</span><span class="op" id="6883665">,</span>&nbsp;<span class="ident" id="6883667">image</span><span class="op" id="6883672">.</span><span class="ident" id="6883673">ZP</span><span class="op" id="6883675">,</span>&nbsp;<span class="ident" id="6883677">test</span><span class="op" id="6883681">.</span><span class="ident" id="6883682">op</span><span class="op" id="6883684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883689">if</span>&nbsp;<span class="ident" id="6883692">image</span><span class="op" id="6883697">.</span><span class="ident" id="6883698">Pt</span><span class="op" id="6883700">(</span><span class="num" id="6883701">8</span><span class="op" id="6883702">,</span>&nbsp;<span class="num" id="6883704">8</span><span class="op" id="6883705">)</span><span class="op" id="6883706">.</span><span class="ident" id="6883707">In</span><span class="op" id="6883709">(</span><span class="ident" id="6883710">r</span><span class="op" id="6883711">)</span>&nbsp;<span class="op" id="6883713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6883719">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6883790">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883843">if</span>&nbsp;<span class="op" id="6883846">!</span><span class="ident" id="6883847">eq</span><span class="op" id="6883849">(</span><span class="ident" id="6883850">dst</span><span class="op" id="6883853">.</span><span class="ident" id="6883854">At</span><span class="op" id="6883856">(</span><span class="num" id="6883857">8</span><span class="op" id="6883858">,</span>&nbsp;<span class="num" id="6883860">8</span><span class="op" id="6883861">)</span><span class="op" id="6883862">,</span>&nbsp;<span class="ident" id="6883864">test</span><span class="op" id="6883868">.</span><span class="ident" id="6883869">expected</span><span class="op" id="6883877">)</span>&nbsp;<span class="op" id="6883879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6883886">t</span><span class="op" id="6883887">.</span><span class="ident" id="6883888">Errorf</span><span class="op" id="6883894">(</span><span class="string" id="6883895">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6883931">,</span>&nbsp;<span class="ident" id="6883933">r</span><span class="op" id="6883934">,</span>&nbsp;<span class="ident" id="6883936">test</span><span class="op" id="6883940">.</span><span class="ident" id="6883941">desc</span><span class="op" id="6883945">,</span>&nbsp;<span class="ident" id="6883947">dst</span><span class="op" id="6883950">.</span><span class="ident" id="6883951">At</span><span class="op" id="6883953">(</span><span class="num" id="6883954">8</span><span class="op" id="6883955">,</span>&nbsp;<span class="num" id="6883957">8</span><span class="op" id="6883958">)</span><span class="op" id="6883959">,</span>&nbsp;<span class="ident" id="6883961">test</span><span class="op" id="6883965">.</span><span class="ident" id="6883966">expected</span><span class="op" id="6883974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6883981">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6883994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6883999">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6884004">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884072">for</span>&nbsp;<span class="ident" id="6884076">y</span>&nbsp;<span class="op" id="6884078">:=</span>&nbsp;<span class="ident" id="6884081">b</span><span class="op" id="6884082">.</span><span class="ident" id="6884083">Min</span><span class="op" id="6884086">.</span><span class="ident" id="6884087">Y</span><span class="op" id="6884088">;</span>&nbsp;<span class="ident" id="6884090">y</span>&nbsp;<span class="op" id="6884092">&lt;</span>&nbsp;<span class="ident" id="6884094">b</span><span class="op" id="6884095">.</span><span class="ident" id="6884096">Max</span><span class="op" id="6884099">.</span><span class="ident" id="6884100">Y</span><span class="op" id="6884101">;</span>&nbsp;<span class="ident" id="6884103">y</span><span class="op" id="6884104">++</span>&nbsp;<span class="op" id="6884107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884113">for</span>&nbsp;<span class="ident" id="6884117">x</span>&nbsp;<span class="op" id="6884119">:=</span>&nbsp;<span class="ident" id="6884122">b</span><span class="op" id="6884123">.</span><span class="ident" id="6884124">Min</span><span class="op" id="6884127">.</span><span class="ident" id="6884128">X</span><span class="op" id="6884129">;</span>&nbsp;<span class="ident" id="6884131">x</span>&nbsp;<span class="op" id="6884133">&lt;</span>&nbsp;<span class="ident" id="6884135">b</span><span class="op" id="6884136">.</span><span class="ident" id="6884137">Max</span><span class="op" id="6884140">.</span><span class="ident" id="6884141">X</span><span class="op" id="6884142">;</span>&nbsp;<span class="ident" id="6884144">x</span><span class="op" id="6884145">++</span>&nbsp;<span class="op" id="6884148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884155">if</span>&nbsp;<span class="op" id="6884158">!</span><span class="ident" id="6884159">eq</span><span class="op" id="6884161">(</span><span class="ident" id="6884162">dst</span><span class="op" id="6884165">.</span><span class="ident" id="6884166">At</span><span class="op" id="6884168">(</span><span class="ident" id="6884169">x</span><span class="op" id="6884170">,</span>&nbsp;<span class="ident" id="6884172">y</span><span class="op" id="6884173">)</span><span class="op" id="6884174">,</span>&nbsp;<span class="ident" id="6884176">golden</span><span class="op" id="6884182">.</span><span class="ident" id="6884183">At</span><span class="op" id="6884185">(</span><span class="ident" id="6884186">x</span><span class="op" id="6884187">,</span>&nbsp;<span class="ident" id="6884189">y</span><span class="op" id="6884190">)</span><span class="op" id="6884191">)</span>&nbsp;<span class="op" id="6884193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884201">t</span><span class="op" id="6884202">.</span><span class="ident" id="6884203">Errorf</span><span class="op" id="6884209">(</span><span class="string" id="6884210">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6884256">,</span>&nbsp;<span class="ident" id="6884258">r</span><span class="op" id="6884259">,</span>&nbsp;<span class="ident" id="6884261">test</span><span class="op" id="6884265">.</span><span class="ident" id="6884266">desc</span><span class="op" id="6884270">,</span>&nbsp;<span class="ident" id="6884272">x</span><span class="op" id="6884273">,</span>&nbsp;<span class="ident" id="6884275">y</span><span class="op" id="6884276">,</span>&nbsp;<span class="ident" id="6884278">dst</span><span class="op" id="6884281">.</span><span class="ident" id="6884282">At</span><span class="op" id="6884284">(</span><span class="ident" id="6884285">x</span><span class="op" id="6884286">,</span>&nbsp;<span class="ident" id="6884288">y</span><span class="op" id="6884289">)</span><span class="op" id="6884290">,</span>&nbsp;<span class="ident" id="6884292">golden</span><span class="op" id="6884298">.</span><span class="ident" id="6884299">At</span><span class="op" id="6884301">(</span><span class="ident" id="6884302">x</span><span class="op" id="6884303">,</span>&nbsp;<span class="ident" id="6884305">y</span><span class="op" id="6884306">)</span><span class="op" id="6884307">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884315">continue</span>&nbsp;<span class="ident" id="6884324">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6884334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6884340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6884345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6884349">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6884352">}</span><br>
<span class="lineno"></span><span class="op" id="6884354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6884357">func</span>&nbsp;<span class="ident" id="6884362">TestDrawOverlap</span><span class="op" id="6884377">(</span><span class="ident" id="6884378">t</span>&nbsp;<span class="op" id="6884380">*</span><span class="ident" id="6884381">testing</span><span class="op" id="6884388">.</span><span class="ident" id="6884389">T</span><span class="op" id="6884390">)</span>&nbsp;<span class="op" id="6884392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884395">for</span>&nbsp;<span class="ident" id="6884399">_</span><span class="op" id="6884400">,</span>&nbsp;<span class="ident" id="6884402">op</span>&nbsp;<span class="op" id="6884405">:=</span>&nbsp;<span class="keyword" id="6884408">range</span>&nbsp;<span class="op" id="6884414">[</span><span class="op" id="6884415">]</span><span class="ident" id="6884416">Op</span><span class="op" id="6884418">{</span><span class="ident" id="6884419">Over</span><span class="op" id="6884423">,</span>&nbsp;<span class="ident" id="6884425">Src</span><span class="op" id="6884428">}</span>&nbsp;<span class="op" id="6884430">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884434">for</span>&nbsp;<span class="ident" id="6884438">yoff</span>&nbsp;<span class="op" id="6884443">:=</span>&nbsp;<span class="op" id="6884446">-</span><span class="num" id="6884447">2</span><span class="op" id="6884448">;</span>&nbsp;<span class="ident" id="6884450">yoff</span>&nbsp;<span class="op" id="6884455">&lt;=</span>&nbsp;<span class="num" id="6884458">2</span><span class="op" id="6884459">;</span>&nbsp;<span class="ident" id="6884461">yoff</span><span class="op" id="6884465">++</span>&nbsp;<span class="op" id="6884468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884472">loop</span><span class="op" id="6884476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884481">for</span>&nbsp;<span class="ident" id="6884485">xoff</span>&nbsp;<span class="op" id="6884490">:=</span>&nbsp;<span class="op" id="6884493">-</span><span class="num" id="6884494">2</span><span class="op" id="6884495">;</span>&nbsp;<span class="ident" id="6884497">xoff</span>&nbsp;<span class="op" id="6884502">&lt;=</span>&nbsp;<span class="num" id="6884505">2</span><span class="op" id="6884506">;</span>&nbsp;<span class="ident" id="6884508">xoff</span><span class="op" id="6884512">++</span>&nbsp;<span class="op" id="6884515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884521">m</span>&nbsp;<span class="op" id="6884523">:=</span>&nbsp;<span class="ident" id="6884526">gradYellow</span><span class="op" id="6884536">(</span><span class="num" id="6884537">127</span><span class="op" id="6884540">)</span><span class="op" id="6884541">.</span><span class="op" id="6884542">(</span><span class="op" id="6884543">*</span><span class="ident" id="6884544">image</span><span class="op" id="6884549">.</span><span class="ident" id="6884550">RGBA</span><span class="op" id="6884554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884560">dst</span>&nbsp;<span class="op" id="6884564">:=</span>&nbsp;<span class="ident" id="6884567">m</span><span class="op" id="6884568">.</span><span class="ident" id="6884569">SubImage</span><span class="op" id="6884577">(</span><span class="ident" id="6884578">image</span><span class="op" id="6884583">.</span><span class="ident" id="6884584">Rect</span><span class="op" id="6884588">(</span><span class="num" id="6884589">5</span><span class="op" id="6884590">,</span>&nbsp;<span class="num" id="6884592">5</span><span class="op" id="6884593">,</span>&nbsp;<span class="num" id="6884595">10</span><span class="op" id="6884597">,</span>&nbsp;<span class="num" id="6884599">10</span><span class="op" id="6884601">)</span><span class="op" id="6884602">)</span><span class="op" id="6884603">.</span><span class="op" id="6884604">(</span><span class="op" id="6884605">*</span><span class="ident" id="6884606">image</span><span class="op" id="6884611">.</span><span class="ident" id="6884612">RGBA</span><span class="op" id="6884616">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884622">src</span>&nbsp;<span class="op" id="6884626">:=</span>&nbsp;<span class="ident" id="6884629">m</span><span class="op" id="6884630">.</span><span class="ident" id="6884631">SubImage</span><span class="op" id="6884639">(</span><span class="ident" id="6884640">image</span><span class="op" id="6884645">.</span><span class="ident" id="6884646">Rect</span><span class="op" id="6884650">(</span><span class="num" id="6884651">5</span><span class="op" id="6884652">+</span><span class="ident" id="6884653">xoff</span><span class="op" id="6884657">,</span>&nbsp;<span class="num" id="6884659">5</span><span class="op" id="6884660">+</span><span class="ident" id="6884661">yoff</span><span class="op" id="6884665">,</span>&nbsp;<span class="num" id="6884667">10</span><span class="op" id="6884669">+</span><span class="ident" id="6884670">xoff</span><span class="op" id="6884674">,</span>&nbsp;<span class="num" id="6884676">10</span><span class="op" id="6884678">+</span><span class="ident" id="6884679">yoff</span><span class="op" id="6884683">)</span><span class="op" id="6884684">)</span><span class="op" id="6884685">.</span><span class="op" id="6884686">(</span><span class="op" id="6884687">*</span><span class="ident" id="6884688">image</span><span class="op" id="6884693">.</span><span class="ident" id="6884694">RGBA</span><span class="op" id="6884698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884704">b</span>&nbsp;<span class="op" id="6884706">:=</span>&nbsp;<span class="ident" id="6884709">dst</span><span class="op" id="6884712">.</span><span class="ident" id="6884713">Bounds</span><span class="op" id="6884719">(</span><span class="op" id="6884720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6884726">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884828">golden</span>&nbsp;<span class="op" id="6884835">:=</span>&nbsp;<span class="ident" id="6884838">makeGolden</span><span class="op" id="6884848">(</span><span class="ident" id="6884849">dst</span><span class="op" id="6884852">,</span>&nbsp;<span class="ident" id="6884854">b</span><span class="op" id="6884855">,</span>&nbsp;<span class="ident" id="6884857">src</span><span class="op" id="6884860">,</span>&nbsp;<span class="ident" id="6884862">src</span><span class="op" id="6884865">.</span><span class="ident" id="6884866">Bounds</span><span class="op" id="6884872">(</span><span class="op" id="6884873">)</span><span class="op" id="6884874">.</span><span class="ident" id="6884875">Min</span><span class="op" id="6884878">,</span>&nbsp;<span class="builtintype" id="6884880">nil</span><span class="op" id="6884883">,</span>&nbsp;<span class="ident" id="6884885">image</span><span class="op" id="6884890">.</span><span class="ident" id="6884891">ZP</span><span class="op" id="6884893">,</span>&nbsp;<span class="ident" id="6884895">op</span><span class="op" id="6884897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6884903">if</span>&nbsp;<span class="op" id="6884906">!</span><span class="ident" id="6884907">b</span><span class="op" id="6884908">.</span><span class="ident" id="6884909">Eq</span><span class="op" id="6884911">(</span><span class="ident" id="6884912">golden</span><span class="op" id="6884918">.</span><span class="ident" id="6884919">Bounds</span><span class="op" id="6884925">(</span><span class="op" id="6884926">)</span><span class="op" id="6884927">)</span>&nbsp;<span class="op" id="6884929">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6884936">t</span><span class="op" id="6884937">.</span><span class="ident" id="6884938">Errorf</span><span class="op" id="6884944">(</span><span class="string" id="6884945">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6884995">,</span>&nbsp;<span class="ident" id="6884997">xoff</span><span class="op" id="6885001">,</span>&nbsp;<span class="ident" id="6885003">yoff</span><span class="op" id="6885007">,</span>&nbsp;<span class="ident" id="6885009">dst</span><span class="op" id="6885012">.</span><span class="ident" id="6885013">Bounds</span><span class="op" id="6885019">(</span><span class="op" id="6885020">)</span><span class="op" id="6885021">,</span>&nbsp;<span class="ident" id="6885023">golden</span><span class="op" id="6885029">.</span><span class="ident" id="6885030">Bounds</span><span class="op" id="6885036">(</span><span class="op" id="6885037">)</span><span class="op" id="6885038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6885045">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6885064">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885162">DrawMask</span><span class="op" id="6885170">(</span><span class="ident" id="6885171">dst</span><span class="op" id="6885174">,</span>&nbsp;<span class="ident" id="6885176">b</span><span class="op" id="6885177">,</span>&nbsp;<span class="ident" id="6885179">src</span><span class="op" id="6885182">,</span>&nbsp;<span class="ident" id="6885184">src</span><span class="op" id="6885187">.</span><span class="ident" id="6885188">Bounds</span><span class="op" id="6885194">(</span><span class="op" id="6885195">)</span><span class="op" id="6885196">.</span><span class="ident" id="6885197">Min</span><span class="op" id="6885200">,</span>&nbsp;<span class="builtintype" id="6885202">nil</span><span class="op" id="6885205">,</span>&nbsp;<span class="ident" id="6885207">image</span><span class="op" id="6885212">.</span><span class="ident" id="6885213">ZP</span><span class="op" id="6885215">,</span>&nbsp;<span class="ident" id="6885217">op</span><span class="op" id="6885219">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6885225">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6885294">for</span>&nbsp;<span class="ident" id="6885298">y</span>&nbsp;<span class="op" id="6885300">:=</span>&nbsp;<span class="ident" id="6885303">b</span><span class="op" id="6885304">.</span><span class="ident" id="6885305">Min</span><span class="op" id="6885308">.</span><span class="ident" id="6885309">Y</span><span class="op" id="6885310">;</span>&nbsp;<span class="ident" id="6885312">y</span>&nbsp;<span class="op" id="6885314">&lt;</span>&nbsp;<span class="ident" id="6885316">b</span><span class="op" id="6885317">.</span><span class="ident" id="6885318">Max</span><span class="op" id="6885321">.</span><span class="ident" id="6885322">Y</span><span class="op" id="6885323">;</span>&nbsp;<span class="ident" id="6885325">y</span><span class="op" id="6885326">++</span>&nbsp;<span class="op" id="6885329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6885336">for</span>&nbsp;<span class="ident" id="6885340">x</span>&nbsp;<span class="op" id="6885342">:=</span>&nbsp;<span class="ident" id="6885345">b</span><span class="op" id="6885346">.</span><span class="ident" id="6885347">Min</span><span class="op" id="6885350">.</span><span class="ident" id="6885351">X</span><span class="op" id="6885352">;</span>&nbsp;<span class="ident" id="6885354">x</span>&nbsp;<span class="op" id="6885356">&lt;</span>&nbsp;<span class="ident" id="6885358">b</span><span class="op" id="6885359">.</span><span class="ident" id="6885360">Max</span><span class="op" id="6885363">.</span><span class="ident" id="6885364">X</span><span class="op" id="6885365">;</span>&nbsp;<span class="ident" id="6885367">x</span><span class="op" id="6885368">++</span>&nbsp;<span class="op" id="6885371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6885379">if</span>&nbsp;<span class="op" id="6885382">!</span><span class="ident" id="6885383">eq</span><span class="op" id="6885385">(</span><span class="ident" id="6885386">dst</span><span class="op" id="6885389">.</span><span class="ident" id="6885390">At</span><span class="op" id="6885392">(</span><span class="ident" id="6885393">x</span><span class="op" id="6885394">,</span>&nbsp;<span class="ident" id="6885396">y</span><span class="op" id="6885397">)</span><span class="op" id="6885398">,</span>&nbsp;<span class="ident" id="6885400">golden</span><span class="op" id="6885406">.</span><span class="ident" id="6885407">At</span><span class="op" id="6885409">(</span><span class="ident" id="6885410">x</span><span class="op" id="6885411">,</span>&nbsp;<span class="ident" id="6885413">y</span><span class="op" id="6885414">)</span><span class="op" id="6885415">)</span>&nbsp;<span class="op" id="6885417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885426">t</span><span class="op" id="6885427">.</span><span class="ident" id="6885428">Errorf</span><span class="op" id="6885434">(</span><span class="string" id="6885435">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6885498">,</span>&nbsp;<span class="ident" id="6885500">xoff</span><span class="op" id="6885504">,</span>&nbsp;<span class="ident" id="6885506">yoff</span><span class="op" id="6885510">,</span>&nbsp;<span class="ident" id="6885512">x</span><span class="op" id="6885513">,</span>&nbsp;<span class="ident" id="6885515">y</span><span class="op" id="6885516">,</span>&nbsp;<span class="ident" id="6885518">dst</span><span class="op" id="6885521">.</span><span class="ident" id="6885522">At</span><span class="op" id="6885524">(</span><span class="ident" id="6885525">x</span><span class="op" id="6885526">,</span>&nbsp;<span class="ident" id="6885528">y</span><span class="op" id="6885529">)</span><span class="op" id="6885530">,</span>&nbsp;<span class="ident" id="6885532">golden</span><span class="op" id="6885538">.</span><span class="ident" id="6885539">At</span><span class="op" id="6885541">(</span><span class="ident" id="6885542">x</span><span class="op" id="6885543">,</span>&nbsp;<span class="ident" id="6885545">y</span><span class="op" id="6885546">)</span><span class="op" id="6885547">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6885556">continue</span>&nbsp;<span class="ident" id="6885565">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885594">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6885601">}</span><br>
<span class="lineno"></span><span class="op" id="6885603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6885606">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6885678">func</span>&nbsp;<span class="ident" id="6885683">TestNonZeroSrcPt</span><span class="op" id="6885699">(</span><span class="ident" id="6885700">t</span>&nbsp;<span class="op" id="6885702">*</span><span class="ident" id="6885703">testing</span><span class="op" id="6885710">.</span><span class="ident" id="6885711">T</span><span class="op" id="6885712">)</span>&nbsp;<span class="op" id="6885714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885717">a</span>&nbsp;<span class="op" id="6885719">:=</span>&nbsp;<span class="ident" id="6885722">image</span><span class="op" id="6885727">.</span><span class="ident" id="6885728">NewRGBA</span><span class="op" id="6885735">(</span><span class="ident" id="6885736">image</span><span class="op" id="6885741">.</span><span class="ident" id="6885742">Rect</span><span class="op" id="6885746">(</span><span class="num" id="6885747">0</span><span class="op" id="6885748">,</span>&nbsp;<span class="num" id="6885750">0</span><span class="op" id="6885751">,</span>&nbsp;<span class="num" id="6885753">1</span><span class="op" id="6885754">,</span>&nbsp;<span class="num" id="6885756">1</span><span class="op" id="6885757">)</span><span class="op" id="6885758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885761">b</span>&nbsp;<span class="op" id="6885763">:=</span>&nbsp;<span class="ident" id="6885766">image</span><span class="op" id="6885771">.</span><span class="ident" id="6885772">NewRGBA</span><span class="op" id="6885779">(</span><span class="ident" id="6885780">image</span><span class="op" id="6885785">.</span><span class="ident" id="6885786">Rect</span><span class="op" id="6885790">(</span><span class="num" id="6885791">0</span><span class="op" id="6885792">,</span>&nbsp;<span class="num" id="6885794">0</span><span class="op" id="6885795">,</span>&nbsp;<span class="num" id="6885797">2</span><span class="op" id="6885798">,</span>&nbsp;<span class="num" id="6885800">2</span><span class="op" id="6885801">)</span><span class="op" id="6885802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885805">b</span><span class="op" id="6885806">.</span><span class="ident" id="6885807">Set</span><span class="op" id="6885810">(</span><span class="num" id="6885811">0</span><span class="op" id="6885812">,</span>&nbsp;<span class="num" id="6885814">0</span><span class="op" id="6885815">,</span>&nbsp;<span class="ident" id="6885817">color</span><span class="op" id="6885822">.</span><span class="ident" id="6885823">RGBA</span><span class="op" id="6885827">{</span><span class="num" id="6885828">0</span><span class="op" id="6885829">,</span>&nbsp;<span class="num" id="6885831">0</span><span class="op" id="6885832">,</span>&nbsp;<span class="num" id="6885834">0</span><span class="op" id="6885835">,</span>&nbsp;<span class="num" id="6885837">5</span><span class="op" id="6885838">}</span><span class="op" id="6885839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885842">b</span><span class="op" id="6885843">.</span><span class="ident" id="6885844">Set</span><span class="op" id="6885847">(</span><span class="num" id="6885848">1</span><span class="op" id="6885849">,</span>&nbsp;<span class="num" id="6885851">0</span><span class="op" id="6885852">,</span>&nbsp;<span class="ident" id="6885854">color</span><span class="op" id="6885859">.</span><span class="ident" id="6885860">RGBA</span><span class="op" id="6885864">{</span><span class="num" id="6885865">0</span><span class="op" id="6885866">,</span>&nbsp;<span class="num" id="6885868">0</span><span class="op" id="6885869">,</span>&nbsp;<span class="num" id="6885871">5</span><span class="op" id="6885872">,</span>&nbsp;<span class="num" id="6885874">5</span><span class="op" id="6885875">}</span><span class="op" id="6885876">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885879">b</span><span class="op" id="6885880">.</span><span class="ident" id="6885881">Set</span><span class="op" id="6885884">(</span><span class="num" id="6885885">0</span><span class="op" id="6885886">,</span>&nbsp;<span class="num" id="6885888">1</span><span class="op" id="6885889">,</span>&nbsp;<span class="ident" id="6885891">color</span><span class="op" id="6885896">.</span><span class="ident" id="6885897">RGBA</span><span class="op" id="6885901">{</span><span class="num" id="6885902">0</span><span class="op" id="6885903">,</span>&nbsp;<span class="num" id="6885905">5</span><span class="op" id="6885906">,</span>&nbsp;<span class="num" id="6885908">0</span><span class="op" id="6885909">,</span>&nbsp;<span class="num" id="6885911">5</span><span class="op" id="6885912">}</span><span class="op" id="6885913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885916">b</span><span class="op" id="6885917">.</span><span class="ident" id="6885918">Set</span><span class="op" id="6885921">(</span><span class="num" id="6885922">1</span><span class="op" id="6885923">,</span>&nbsp;<span class="num" id="6885925">1</span><span class="op" id="6885926">,</span>&nbsp;<span class="ident" id="6885928">color</span><span class="op" id="6885933">.</span><span class="ident" id="6885934">RGBA</span><span class="op" id="6885938">{</span><span class="num" id="6885939">5</span><span class="op" id="6885940">,</span>&nbsp;<span class="num" id="6885942">0</span><span class="op" id="6885943">,</span>&nbsp;<span class="num" id="6885945">0</span><span class="op" id="6885946">,</span>&nbsp;<span class="num" id="6885948">5</span><span class="op" id="6885949">}</span><span class="op" id="6885950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6885953">Draw</span><span class="op" id="6885957">(</span><span class="ident" id="6885958">a</span><span class="op" id="6885959">,</span>&nbsp;<span class="ident" id="6885961">image</span><span class="op" id="6885966">.</span><span class="ident" id="6885967">Rect</span><span class="op" id="6885971">(</span><span class="num" id="6885972">0</span><span class="op" id="6885973">,</span>&nbsp;<span class="num" id="6885975">0</span><span class="op" id="6885976">,</span>&nbsp;<span class="num" id="6885978">1</span><span class="op" id="6885979">,</span>&nbsp;<span class="num" id="6885981">1</span><span class="op" id="6885982">)</span><span class="op" id="6885983">,</span>&nbsp;<span class="ident" id="6885985">b</span><span class="op" id="6885986">,</span>&nbsp;<span class="ident" id="6885988">image</span><span class="op" id="6885993">.</span><span class="ident" id="6885994">Pt</span><span class="op" id="6885996">(</span><span class="num" id="6885997">1</span><span class="op" id="6885998">,</span>&nbsp;<span class="num" id="6886000">1</span><span class="op" id="6886001">)</span><span class="op" id="6886002">,</span>&nbsp;<span class="ident" id="6886004">Over</span><span class="op" id="6886008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6886011">if</span>&nbsp;<span class="op" id="6886014">!</span><span class="ident" id="6886015">eq</span><span class="op" id="6886017">(</span><span class="ident" id="6886018">color</span><span class="op" id="6886023">.</span><span class="ident" id="6886024">RGBA</span><span class="op" id="6886028">{</span><span class="num" id="6886029">5</span><span class="op" id="6886030">,</span>&nbsp;<span class="num" id="6886032">0</span><span class="op" id="6886033">,</span>&nbsp;<span class="num" id="6886035">0</span><span class="op" id="6886036">,</span>&nbsp;<span class="num" id="6886038">5</span><span class="op" id="6886039">}</span><span class="op" id="6886040">,</span>&nbsp;<span class="ident" id="6886042">a</span><span class="op" id="6886043">.</span><span class="ident" id="6886044">At</span><span class="op" id="6886046">(</span><span class="num" id="6886047">0</span><span class="op" id="6886048">,</span>&nbsp;<span class="num" id="6886050">0</span><span class="op" id="6886051">)</span><span class="op" id="6886052">)</span>&nbsp;<span class="op" id="6886054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886058">t</span><span class="op" id="6886059">.</span><span class="ident" id="6886060">Errorf</span><span class="op" id="6886066">(</span><span class="string" id="6886067">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6886100">,</span>&nbsp;<span class="ident" id="6886102">color</span><span class="op" id="6886107">.</span><span class="ident" id="6886108">RGBA</span><span class="op" id="6886112">{</span><span class="num" id="6886113">5</span><span class="op" id="6886114">,</span>&nbsp;<span class="num" id="6886116">0</span><span class="op" id="6886117">,</span>&nbsp;<span class="num" id="6886119">0</span><span class="op" id="6886120">,</span>&nbsp;<span class="num" id="6886122">5</span><span class="op" id="6886123">}</span><span class="op" id="6886124">,</span>&nbsp;<span class="ident" id="6886126">a</span><span class="op" id="6886127">.</span><span class="ident" id="6886128">At</span><span class="op" id="6886130">(</span><span class="num" id="6886131">0</span><span class="op" id="6886132">,</span>&nbsp;<span class="num" id="6886134">0</span><span class="op" id="6886135">)</span><span class="op" id="6886136">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6886139">}</span><br>
<span class="lineno"></span><span class="op" id="6886141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6886144">func</span>&nbsp;<span class="ident" id="6886149">TestFill</span><span class="op" id="6886157">(</span><span class="ident" id="6886158">t</span>&nbsp;<span class="op" id="6886160">*</span><span class="ident" id="6886161">testing</span><span class="op" id="6886168">.</span><span class="ident" id="6886169">T</span><span class="op" id="6886170">)</span>&nbsp;<span class="op" id="6886172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886175">rr</span>&nbsp;<span class="op" id="6886178">:=</span>&nbsp;<span class="op" id="6886181">[</span><span class="op" id="6886182">]</span><span class="ident" id="6886183">image</span><span class="op" id="6886188">.</span><span class="ident" id="6886189">Rectangle</span><span class="op" id="6886198">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886202">image</span><span class="op" id="6886207">.</span><span class="ident" id="6886208">Rect</span><span class="op" id="6886212">(</span><span class="num" id="6886213">0</span><span class="op" id="6886214">,</span>&nbsp;<span class="num" id="6886216">0</span><span class="op" id="6886217">,</span>&nbsp;<span class="num" id="6886219">0</span><span class="op" id="6886220">,</span>&nbsp;<span class="num" id="6886222">0</span><span class="op" id="6886223">)</span><span class="op" id="6886224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886228">image</span><span class="op" id="6886233">.</span><span class="ident" id="6886234">Rect</span><span class="op" id="6886238">(</span><span class="num" id="6886239">0</span><span class="op" id="6886240">,</span>&nbsp;<span class="num" id="6886242">0</span><span class="op" id="6886243">,</span>&nbsp;<span class="num" id="6886245">40</span><span class="op" id="6886247">,</span>&nbsp;<span class="num" id="6886249">30</span><span class="op" id="6886251">)</span><span class="op" id="6886252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886256">image</span><span class="op" id="6886261">.</span><span class="ident" id="6886262">Rect</span><span class="op" id="6886266">(</span><span class="num" id="6886267">10</span><span class="op" id="6886269">,</span>&nbsp;<span class="num" id="6886271">0</span><span class="op" id="6886272">,</span>&nbsp;<span class="num" id="6886274">40</span><span class="op" id="6886276">,</span>&nbsp;<span class="num" id="6886278">30</span><span class="op" id="6886280">)</span><span class="op" id="6886281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886285">image</span><span class="op" id="6886290">.</span><span class="ident" id="6886291">Rect</span><span class="op" id="6886295">(</span><span class="num" id="6886296">0</span><span class="op" id="6886297">,</span>&nbsp;<span class="num" id="6886299">20</span><span class="op" id="6886301">,</span>&nbsp;<span class="num" id="6886303">40</span><span class="op" id="6886305">,</span>&nbsp;<span class="num" id="6886307">30</span><span class="op" id="6886309">)</span><span class="op" id="6886310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886314">image</span><span class="op" id="6886319">.</span><span class="ident" id="6886320">Rect</span><span class="op" id="6886324">(</span><span class="num" id="6886325">10</span><span class="op" id="6886327">,</span>&nbsp;<span class="num" id="6886329">20</span><span class="op" id="6886331">,</span>&nbsp;<span class="num" id="6886333">40</span><span class="op" id="6886335">,</span>&nbsp;<span class="num" id="6886337">30</span><span class="op" id="6886339">)</span><span class="op" id="6886340">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886344">image</span><span class="op" id="6886349">.</span><span class="ident" id="6886350">Rect</span><span class="op" id="6886354">(</span><span class="num" id="6886355">10</span><span class="op" id="6886357">,</span>&nbsp;<span class="num" id="6886359">20</span><span class="op" id="6886361">,</span>&nbsp;<span class="num" id="6886363">15</span><span class="op" id="6886365">,</span>&nbsp;<span class="num" id="6886367">25</span><span class="op" id="6886369">)</span><span class="op" id="6886370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886374">image</span><span class="op" id="6886379">.</span><span class="ident" id="6886380">Rect</span><span class="op" id="6886384">(</span><span class="num" id="6886385">10</span><span class="op" id="6886387">,</span>&nbsp;<span class="num" id="6886389">0</span><span class="op" id="6886390">,</span>&nbsp;<span class="num" id="6886392">35</span><span class="op" id="6886394">,</span>&nbsp;<span class="num" id="6886396">30</span><span class="op" id="6886398">)</span><span class="op" id="6886399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886403">image</span><span class="op" id="6886408">.</span><span class="ident" id="6886409">Rect</span><span class="op" id="6886413">(</span><span class="num" id="6886414">0</span><span class="op" id="6886415">,</span>&nbsp;<span class="num" id="6886417">15</span><span class="op" id="6886419">,</span>&nbsp;<span class="num" id="6886421">40</span><span class="op" id="6886423">,</span>&nbsp;<span class="num" id="6886425">16</span><span class="op" id="6886427">)</span><span class="op" id="6886428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886432">image</span><span class="op" id="6886437">.</span><span class="ident" id="6886438">Rect</span><span class="op" id="6886442">(</span><span class="num" id="6886443">24</span><span class="op" id="6886445">,</span>&nbsp;<span class="num" id="6886447">24</span><span class="op" id="6886449">,</span>&nbsp;<span class="num" id="6886451">25</span><span class="op" id="6886453">,</span>&nbsp;<span class="num" id="6886455">25</span><span class="op" id="6886457">)</span><span class="op" id="6886458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886462">image</span><span class="op" id="6886467">.</span><span class="ident" id="6886468">Rect</span><span class="op" id="6886472">(</span><span class="num" id="6886473">23</span><span class="op" id="6886475">,</span>&nbsp;<span class="num" id="6886477">23</span><span class="op" id="6886479">,</span>&nbsp;<span class="num" id="6886481">26</span><span class="op" id="6886483">,</span>&nbsp;<span class="num" id="6886485">26</span><span class="op" id="6886487">)</span><span class="op" id="6886488">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886492">image</span><span class="op" id="6886497">.</span><span class="ident" id="6886498">Rect</span><span class="op" id="6886502">(</span><span class="num" id="6886503">22</span><span class="op" id="6886505">,</span>&nbsp;<span class="num" id="6886507">22</span><span class="op" id="6886509">,</span>&nbsp;<span class="num" id="6886511">27</span><span class="op" id="6886513">,</span>&nbsp;<span class="num" id="6886515">27</span><span class="op" id="6886517">)</span><span class="op" id="6886518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886522">image</span><span class="op" id="6886527">.</span><span class="ident" id="6886528">Rect</span><span class="op" id="6886532">(</span><span class="num" id="6886533">21</span><span class="op" id="6886535">,</span>&nbsp;<span class="num" id="6886537">21</span><span class="op" id="6886539">,</span>&nbsp;<span class="num" id="6886541">28</span><span class="op" id="6886543">,</span>&nbsp;<span class="num" id="6886545">28</span><span class="op" id="6886547">)</span><span class="op" id="6886548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886552">image</span><span class="op" id="6886557">.</span><span class="ident" id="6886558">Rect</span><span class="op" id="6886562">(</span><span class="num" id="6886563">20</span><span class="op" id="6886565">,</span>&nbsp;<span class="num" id="6886567">20</span><span class="op" id="6886569">,</span>&nbsp;<span class="num" id="6886571">29</span><span class="op" id="6886573">,</span>&nbsp;<span class="num" id="6886575">29</span><span class="op" id="6886577">)</span><span class="op" id="6886578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6886581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6886584">for</span>&nbsp;<span class="ident" id="6886588">_</span><span class="op" id="6886589">,</span>&nbsp;<span class="ident" id="6886591">r</span>&nbsp;<span class="op" id="6886593">:=</span>&nbsp;<span class="keyword" id="6886596">range</span>&nbsp;<span class="ident" id="6886602">rr</span>&nbsp;<span class="op" id="6886605">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886609">m</span>&nbsp;<span class="op" id="6886611">:=</span>&nbsp;<span class="ident" id="6886614">image</span><span class="op" id="6886619">.</span><span class="ident" id="6886620">NewRGBA</span><span class="op" id="6886627">(</span><span class="ident" id="6886628">image</span><span class="op" id="6886633">.</span><span class="ident" id="6886634">Rect</span><span class="op" id="6886638">(</span><span class="num" id="6886639">0</span><span class="op" id="6886640">,</span>&nbsp;<span class="num" id="6886642">0</span><span class="op" id="6886643">,</span>&nbsp;<span class="num" id="6886645">40</span><span class="op" id="6886647">,</span>&nbsp;<span class="num" id="6886649">30</span><span class="op" id="6886651">)</span><span class="op" id="6886652">)</span><span class="op" id="6886653">.</span><span class="ident" id="6886654">SubImage</span><span class="op" id="6886662">(</span><span class="ident" id="6886663">r</span><span class="op" id="6886664">)</span><span class="op" id="6886665">.</span><span class="op" id="6886666">(</span><span class="op" id="6886667">*</span><span class="ident" id="6886668">image</span><span class="op" id="6886673">.</span><span class="ident" id="6886674">RGBA</span><span class="op" id="6886678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886682">b</span>&nbsp;<span class="op" id="6886684">:=</span>&nbsp;<span class="ident" id="6886687">m</span><span class="op" id="6886688">.</span><span class="ident" id="6886689">Bounds</span><span class="op" id="6886695">(</span><span class="op" id="6886696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886700">c</span>&nbsp;<span class="op" id="6886702">:=</span>&nbsp;<span class="ident" id="6886705">color</span><span class="op" id="6886710">.</span><span class="ident" id="6886711">RGBA</span><span class="op" id="6886715">{</span><span class="num" id="6886716">11</span><span class="op" id="6886718">,</span>&nbsp;<span class="num" id="6886720">0</span><span class="op" id="6886721">,</span>&nbsp;<span class="num" id="6886723">0</span><span class="op" id="6886724">,</span>&nbsp;<span class="num" id="6886726">255</span><span class="op" id="6886729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886733">src</span>&nbsp;<span class="op" id="6886737">:=</span>&nbsp;<span class="op" id="6886740">&amp;</span><span class="ident" id="6886741">image</span><span class="op" id="6886746">.</span><span class="ident" id="6886747">Uniform</span><span class="op" id="6886754">{</span><span class="ident" id="6886755">C</span><span class="op" id="6886756">:</span>&nbsp;<span class="ident" id="6886758">c</span><span class="op" id="6886759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886763">check</span>&nbsp;<span class="op" id="6886769">:=</span>&nbsp;<span class="keyword" id="6886772">func</span><span class="op" id="6886776">(</span><span class="ident" id="6886777">desc</span>&nbsp;<span class="builtintype" id="6886782">string</span><span class="op" id="6886788">)</span>&nbsp;<span class="op" id="6886790">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6886795">for</span>&nbsp;<span class="ident" id="6886799">y</span>&nbsp;<span class="op" id="6886801">:=</span>&nbsp;<span class="ident" id="6886804">b</span><span class="op" id="6886805">.</span><span class="ident" id="6886806">Min</span><span class="op" id="6886809">.</span><span class="ident" id="6886810">Y</span><span class="op" id="6886811">;</span>&nbsp;<span class="ident" id="6886813">y</span>&nbsp;<span class="op" id="6886815">&lt;</span>&nbsp;<span class="ident" id="6886817">b</span><span class="op" id="6886818">.</span><span class="ident" id="6886819">Max</span><span class="op" id="6886822">.</span><span class="ident" id="6886823">Y</span><span class="op" id="6886824">;</span>&nbsp;<span class="ident" id="6886826">y</span><span class="op" id="6886827">++</span>&nbsp;<span class="op" id="6886830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6886836">for</span>&nbsp;<span class="ident" id="6886840">x</span>&nbsp;<span class="op" id="6886842">:=</span>&nbsp;<span class="ident" id="6886845">b</span><span class="op" id="6886846">.</span><span class="ident" id="6886847">Min</span><span class="op" id="6886850">.</span><span class="ident" id="6886851">X</span><span class="op" id="6886852">;</span>&nbsp;<span class="ident" id="6886854">x</span>&nbsp;<span class="op" id="6886856">&lt;</span>&nbsp;<span class="ident" id="6886858">b</span><span class="op" id="6886859">.</span><span class="ident" id="6886860">Max</span><span class="op" id="6886863">.</span><span class="ident" id="6886864">X</span><span class="op" id="6886865">;</span>&nbsp;<span class="ident" id="6886867">x</span><span class="op" id="6886868">++</span>&nbsp;<span class="op" id="6886871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6886878">if</span>&nbsp;<span class="op" id="6886881">!</span><span class="ident" id="6886882">eq</span><span class="op" id="6886884">(</span><span class="ident" id="6886885">c</span><span class="op" id="6886886">,</span>&nbsp;<span class="ident" id="6886888">m</span><span class="op" id="6886889">.</span><span class="ident" id="6886890">At</span><span class="op" id="6886892">(</span><span class="ident" id="6886893">x</span><span class="op" id="6886894">,</span>&nbsp;<span class="ident" id="6886896">y</span><span class="op" id="6886897">)</span><span class="op" id="6886898">)</span>&nbsp;<span class="op" id="6886900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6886908">t</span><span class="op" id="6886909">.</span><span class="ident" id="6886910">Errorf</span><span class="op" id="6886916">(</span><span class="string" id="6886917">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6886976">,</span>&nbsp;<span class="ident" id="6886978">desc</span><span class="op" id="6886982">,</span>&nbsp;<span class="ident" id="6886984">x</span><span class="op" id="6886985">,</span>&nbsp;<span class="ident" id="6886987">y</span><span class="op" id="6886988">,</span>&nbsp;<span class="ident" id="6886990">r</span><span class="op" id="6886991">,</span>&nbsp;<span class="ident" id="6886993">c</span><span class="op" id="6886994">,</span>&nbsp;<span class="ident" id="6886996">m</span><span class="op" id="6886997">.</span><span class="ident" id="6886998">At</span><span class="op" id="6887000">(</span><span class="ident" id="6887001">x</span><span class="op" id="6887002">,</span>&nbsp;<span class="ident" id="6887004">y</span><span class="op" id="6887005">)</span><span class="op" id="6887006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6887014">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6887045">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6887074">for</span>&nbsp;<span class="ident" id="6887078">y</span>&nbsp;<span class="op" id="6887080">:=</span>&nbsp;<span class="ident" id="6887083">b</span><span class="op" id="6887084">.</span><span class="ident" id="6887085">Min</span><span class="op" id="6887088">.</span><span class="ident" id="6887089">Y</span><span class="op" id="6887090">;</span>&nbsp;<span class="ident" id="6887092">y</span>&nbsp;<span class="op" id="6887094">&lt;</span>&nbsp;<span class="ident" id="6887096">b</span><span class="op" id="6887097">.</span><span class="ident" id="6887098">Max</span><span class="op" id="6887101">.</span><span class="ident" id="6887102">Y</span><span class="op" id="6887103">;</span>&nbsp;<span class="ident" id="6887105">y</span><span class="op" id="6887106">++</span>&nbsp;<span class="op" id="6887109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6887114">for</span>&nbsp;<span class="ident" id="6887118">x</span>&nbsp;<span class="op" id="6887120">:=</span>&nbsp;<span class="ident" id="6887123">b</span><span class="op" id="6887124">.</span><span class="ident" id="6887125">Min</span><span class="op" id="6887128">.</span><span class="ident" id="6887129">X</span><span class="op" id="6887130">;</span>&nbsp;<span class="ident" id="6887132">x</span>&nbsp;<span class="op" id="6887134">&lt;</span>&nbsp;<span class="ident" id="6887136">b</span><span class="op" id="6887137">.</span><span class="ident" id="6887138">Max</span><span class="op" id="6887141">.</span><span class="ident" id="6887142">X</span><span class="op" id="6887143">;</span>&nbsp;<span class="ident" id="6887145">x</span><span class="op" id="6887146">++</span>&nbsp;<span class="op" id="6887149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887155">DrawMask</span><span class="op" id="6887163">(</span><span class="ident" id="6887164">m</span><span class="op" id="6887165">,</span>&nbsp;<span class="ident" id="6887167">image</span><span class="op" id="6887172">.</span><span class="ident" id="6887173">Rect</span><span class="op" id="6887177">(</span><span class="ident" id="6887178">x</span><span class="op" id="6887179">,</span>&nbsp;<span class="ident" id="6887181">y</span><span class="op" id="6887182">,</span>&nbsp;<span class="ident" id="6887184">x</span><span class="op" id="6887185">+</span><span class="num" id="6887186">1</span><span class="op" id="6887187">,</span>&nbsp;<span class="ident" id="6887189">y</span><span class="op" id="6887190">+</span><span class="num" id="6887191">1</span><span class="op" id="6887192">)</span><span class="op" id="6887193">,</span>&nbsp;<span class="ident" id="6887195">src</span><span class="op" id="6887198">,</span>&nbsp;<span class="ident" id="6887200">image</span><span class="op" id="6887205">.</span><span class="ident" id="6887206">ZP</span><span class="op" id="6887208">,</span>&nbsp;<span class="builtintype" id="6887210">nil</span><span class="op" id="6887213">,</span>&nbsp;<span class="ident" id="6887215">image</span><span class="op" id="6887220">.</span><span class="ident" id="6887221">ZP</span><span class="op" id="6887223">,</span>&nbsp;<span class="ident" id="6887225">Src</span><span class="op" id="6887228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887237">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887241">check</span><span class="op" id="6887246">(</span><span class="string" id="6887247">&#34;pixel&#34;</span><span class="op" id="6887254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6887258">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887285">c</span>&nbsp;<span class="op" id="6887287">=</span>&nbsp;<span class="ident" id="6887289">color</span><span class="op" id="6887294">.</span><span class="ident" id="6887295">RGBA</span><span class="op" id="6887299">{</span><span class="num" id="6887300">0</span><span class="op" id="6887301">,</span>&nbsp;<span class="num" id="6887303">22</span><span class="op" id="6887305">,</span>&nbsp;<span class="num" id="6887307">0</span><span class="op" id="6887308">,</span>&nbsp;<span class="num" id="6887310">255</span><span class="op" id="6887313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887317">src</span>&nbsp;<span class="op" id="6887321">=</span>&nbsp;<span class="op" id="6887323">&amp;</span><span class="ident" id="6887324">image</span><span class="op" id="6887329">.</span><span class="ident" id="6887330">Uniform</span><span class="op" id="6887337">{</span><span class="ident" id="6887338">C</span><span class="op" id="6887339">:</span>&nbsp;<span class="ident" id="6887341">c</span><span class="op" id="6887342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6887346">for</span>&nbsp;<span class="ident" id="6887350">y</span>&nbsp;<span class="op" id="6887352">:=</span>&nbsp;<span class="ident" id="6887355">b</span><span class="op" id="6887356">.</span><span class="ident" id="6887357">Min</span><span class="op" id="6887360">.</span><span class="ident" id="6887361">Y</span><span class="op" id="6887362">;</span>&nbsp;<span class="ident" id="6887364">y</span>&nbsp;<span class="op" id="6887366">&lt;</span>&nbsp;<span class="ident" id="6887368">b</span><span class="op" id="6887369">.</span><span class="ident" id="6887370">Max</span><span class="op" id="6887373">.</span><span class="ident" id="6887374">Y</span><span class="op" id="6887375">;</span>&nbsp;<span class="ident" id="6887377">y</span><span class="op" id="6887378">++</span>&nbsp;<span class="op" id="6887381">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887386">DrawMask</span><span class="op" id="6887394">(</span><span class="ident" id="6887395">m</span><span class="op" id="6887396">,</span>&nbsp;<span class="ident" id="6887398">image</span><span class="op" id="6887403">.</span><span class="ident" id="6887404">Rect</span><span class="op" id="6887408">(</span><span class="ident" id="6887409">b</span><span class="op" id="6887410">.</span><span class="ident" id="6887411">Min</span><span class="op" id="6887414">.</span><span class="ident" id="6887415">X</span><span class="op" id="6887416">,</span>&nbsp;<span class="ident" id="6887418">y</span><span class="op" id="6887419">,</span>&nbsp;<span class="ident" id="6887421">b</span><span class="op" id="6887422">.</span><span class="ident" id="6887423">Max</span><span class="op" id="6887426">.</span><span class="ident" id="6887427">X</span><span class="op" id="6887428">,</span>&nbsp;<span class="ident" id="6887430">y</span><span class="op" id="6887431">+</span><span class="num" id="6887432">1</span><span class="op" id="6887433">)</span><span class="op" id="6887434">,</span>&nbsp;<span class="ident" id="6887436">src</span><span class="op" id="6887439">,</span>&nbsp;<span class="ident" id="6887441">image</span><span class="op" id="6887446">.</span><span class="ident" id="6887447">ZP</span><span class="op" id="6887449">,</span>&nbsp;<span class="builtintype" id="6887451">nil</span><span class="op" id="6887454">,</span>&nbsp;<span class="ident" id="6887456">image</span><span class="op" id="6887461">.</span><span class="ident" id="6887462">ZP</span><span class="op" id="6887464">,</span>&nbsp;<span class="ident" id="6887466">Src</span><span class="op" id="6887469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887477">check</span><span class="op" id="6887482">(</span><span class="string" id="6887483">&#34;row&#34;</span><span class="op" id="6887488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6887492">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887522">c</span>&nbsp;<span class="op" id="6887524">=</span>&nbsp;<span class="ident" id="6887526">color</span><span class="op" id="6887531">.</span><span class="ident" id="6887532">RGBA</span><span class="op" id="6887536">{</span><span class="num" id="6887537">0</span><span class="op" id="6887538">,</span>&nbsp;<span class="num" id="6887540">0</span><span class="op" id="6887541">,</span>&nbsp;<span class="num" id="6887543">33</span><span class="op" id="6887545">,</span>&nbsp;<span class="num" id="6887547">255</span><span class="op" id="6887550">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887554">src</span>&nbsp;<span class="op" id="6887558">=</span>&nbsp;<span class="op" id="6887560">&amp;</span><span class="ident" id="6887561">image</span><span class="op" id="6887566">.</span><span class="ident" id="6887567">Uniform</span><span class="op" id="6887574">{</span><span class="ident" id="6887575">C</span><span class="op" id="6887576">:</span>&nbsp;<span class="ident" id="6887578">c</span><span class="op" id="6887579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6887583">for</span>&nbsp;<span class="ident" id="6887587">x</span>&nbsp;<span class="op" id="6887589">:=</span>&nbsp;<span class="ident" id="6887592">b</span><span class="op" id="6887593">.</span><span class="ident" id="6887594">Min</span><span class="op" id="6887597">.</span><span class="ident" id="6887598">X</span><span class="op" id="6887599">;</span>&nbsp;<span class="ident" id="6887601">x</span>&nbsp;<span class="op" id="6887603">&lt;</span>&nbsp;<span class="ident" id="6887605">b</span><span class="op" id="6887606">.</span><span class="ident" id="6887607">Max</span><span class="op" id="6887610">.</span><span class="ident" id="6887611">X</span><span class="op" id="6887612">;</span>&nbsp;<span class="ident" id="6887614">x</span><span class="op" id="6887615">++</span>&nbsp;<span class="op" id="6887618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887623">DrawMask</span><span class="op" id="6887631">(</span><span class="ident" id="6887632">m</span><span class="op" id="6887633">,</span>&nbsp;<span class="ident" id="6887635">image</span><span class="op" id="6887640">.</span><span class="ident" id="6887641">Rect</span><span class="op" id="6887645">(</span><span class="ident" id="6887646">x</span><span class="op" id="6887647">,</span>&nbsp;<span class="ident" id="6887649">b</span><span class="op" id="6887650">.</span><span class="ident" id="6887651">Min</span><span class="op" id="6887654">.</span><span class="ident" id="6887655">Y</span><span class="op" id="6887656">,</span>&nbsp;<span class="ident" id="6887658">x</span><span class="op" id="6887659">+</span><span class="num" id="6887660">1</span><span class="op" id="6887661">,</span>&nbsp;<span class="ident" id="6887663">b</span><span class="op" id="6887664">.</span><span class="ident" id="6887665">Max</span><span class="op" id="6887668">.</span><span class="ident" id="6887669">Y</span><span class="op" id="6887670">)</span><span class="op" id="6887671">,</span>&nbsp;<span class="ident" id="6887673">src</span><span class="op" id="6887676">,</span>&nbsp;<span class="ident" id="6887678">image</span><span class="op" id="6887683">.</span><span class="ident" id="6887684">ZP</span><span class="op" id="6887686">,</span>&nbsp;<span class="builtintype" id="6887688">nil</span><span class="op" id="6887691">,</span>&nbsp;<span class="ident" id="6887693">image</span><span class="op" id="6887698">.</span><span class="ident" id="6887699">ZP</span><span class="op" id="6887701">,</span>&nbsp;<span class="ident" id="6887703">Src</span><span class="op" id="6887706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887714">check</span><span class="op" id="6887719">(</span><span class="string" id="6887720">&#34;column&#34;</span><span class="op" id="6887728">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6887732">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887767">c</span>&nbsp;<span class="op" id="6887769">=</span>&nbsp;<span class="ident" id="6887771">color</span><span class="op" id="6887776">.</span><span class="ident" id="6887777">RGBA</span><span class="op" id="6887781">{</span><span class="num" id="6887782">44</span><span class="op" id="6887784">,</span>&nbsp;<span class="num" id="6887786">55</span><span class="op" id="6887788">,</span>&nbsp;<span class="num" id="6887790">66</span><span class="op" id="6887792">,</span>&nbsp;<span class="num" id="6887794">77</span><span class="op" id="6887796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887800">src</span>&nbsp;<span class="op" id="6887804">=</span>&nbsp;<span class="op" id="6887806">&amp;</span><span class="ident" id="6887807">image</span><span class="op" id="6887812">.</span><span class="ident" id="6887813">Uniform</span><span class="op" id="6887820">{</span><span class="ident" id="6887821">C</span><span class="op" id="6887822">:</span>&nbsp;<span class="ident" id="6887824">c</span><span class="op" id="6887825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887829">DrawMask</span><span class="op" id="6887837">(</span><span class="ident" id="6887838">m</span><span class="op" id="6887839">,</span>&nbsp;<span class="ident" id="6887841">b</span><span class="op" id="6887842">,</span>&nbsp;<span class="ident" id="6887844">src</span><span class="op" id="6887847">,</span>&nbsp;<span class="ident" id="6887849">image</span><span class="op" id="6887854">.</span><span class="ident" id="6887855">ZP</span><span class="op" id="6887857">,</span>&nbsp;<span class="builtintype" id="6887859">nil</span><span class="op" id="6887862">,</span>&nbsp;<span class="ident" id="6887864">image</span><span class="op" id="6887869">.</span><span class="ident" id="6887870">ZP</span><span class="op" id="6887872">,</span>&nbsp;<span class="ident" id="6887874">Src</span><span class="op" id="6887877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6887881">check</span><span class="op" id="6887886">(</span><span class="string" id="6887887">&#34;whole&#34;</span><span class="op" id="6887894">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6887897">}</span><br>
<span class="lineno"></span><span class="op" id="6887899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6887902">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6887977">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6888054">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6888092">func</span>&nbsp;<span class="ident" id="6888097">TestFloydSteinbergCheckerboard</span><span class="op" id="6888127">(</span><span class="ident" id="6888128">t</span>&nbsp;<span class="op" id="6888130">*</span><span class="ident" id="6888131">testing</span><span class="op" id="6888138">.</span><span class="ident" id="6888139">T</span><span class="op" id="6888140">)</span>&nbsp;<span class="op" id="6888142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888145">b</span>&nbsp;<span class="op" id="6888147">:=</span>&nbsp;<span class="ident" id="6888150">image</span><span class="op" id="6888155">.</span><span class="ident" id="6888156">Rect</span><span class="op" id="6888160">(</span><span class="num" id="6888161">0</span><span class="op" id="6888162">,</span>&nbsp;<span class="num" id="6888164">0</span><span class="op" id="6888165">,</span>&nbsp;<span class="num" id="6888167">640</span><span class="op" id="6888170">,</span>&nbsp;<span class="num" id="6888172">480</span><span class="op" id="6888175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6888178">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888251">src</span>&nbsp;<span class="op" id="6888255">:=</span>&nbsp;<span class="op" id="6888258">&amp;</span><span class="ident" id="6888259">image</span><span class="op" id="6888264">.</span><span class="ident" id="6888265">Uniform</span><span class="op" id="6888272">{</span><span class="ident" id="6888273">color</span><span class="op" id="6888278">.</span><span class="ident" id="6888279">Gray16</span><span class="op" id="6888285">{</span><span class="num" id="6888286">0x7fff</span><span class="op" id="6888292">}</span><span class="op" id="6888293">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888296">dst</span>&nbsp;<span class="op" id="6888300">:=</span>&nbsp;<span class="ident" id="6888303">image</span><span class="op" id="6888308">.</span><span class="ident" id="6888309">NewPaletted</span><span class="op" id="6888320">(</span><span class="ident" id="6888321">b</span><span class="op" id="6888322">,</span>&nbsp;<span class="ident" id="6888324">color</span><span class="op" id="6888329">.</span><span class="ident" id="6888330">Palette</span><span class="op" id="6888337">{</span><span class="ident" id="6888338">color</span><span class="op" id="6888343">.</span><span class="ident" id="6888344">Black</span><span class="op" id="6888349">,</span>&nbsp;<span class="ident" id="6888351">color</span><span class="op" id="6888356">.</span><span class="ident" id="6888357">White</span><span class="op" id="6888362">}</span><span class="op" id="6888363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888366">FloydSteinberg</span><span class="op" id="6888380">.</span><span class="ident" id="6888381">Draw</span><span class="op" id="6888385">(</span><span class="ident" id="6888386">dst</span><span class="op" id="6888389">,</span>&nbsp;<span class="ident" id="6888391">b</span><span class="op" id="6888392">,</span>&nbsp;<span class="ident" id="6888394">src</span><span class="op" id="6888397">,</span>&nbsp;<span class="ident" id="6888399">image</span><span class="op" id="6888404">.</span><span class="ident" id="6888405">Point</span><span class="op" id="6888410">{</span><span class="op" id="6888411">}</span><span class="op" id="6888412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888415">nErr</span>&nbsp;<span class="op" id="6888420">:=</span>&nbsp;<span class="num" id="6888423">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6888426">for</span>&nbsp;<span class="ident" id="6888430">y</span>&nbsp;<span class="op" id="6888432">:=</span>&nbsp;<span class="ident" id="6888435">b</span><span class="op" id="6888436">.</span><span class="ident" id="6888437">Min</span><span class="op" id="6888440">.</span><span class="ident" id="6888441">Y</span><span class="op" id="6888442">;</span>&nbsp;<span class="ident" id="6888444">y</span>&nbsp;<span class="op" id="6888446">&lt;</span>&nbsp;<span class="ident" id="6888448">b</span><span class="op" id="6888449">.</span><span class="ident" id="6888450">Max</span><span class="op" id="6888453">.</span><span class="ident" id="6888454">Y</span><span class="op" id="6888455">;</span>&nbsp;<span class="ident" id="6888457">y</span><span class="op" id="6888458">++</span>&nbsp;<span class="op" id="6888461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6888465">for</span>&nbsp;<span class="ident" id="6888469">x</span>&nbsp;<span class="op" id="6888471">:=</span>&nbsp;<span class="ident" id="6888474">b</span><span class="op" id="6888475">.</span><span class="ident" id="6888476">Min</span><span class="op" id="6888479">.</span><span class="ident" id="6888480">X</span><span class="op" id="6888481">;</span>&nbsp;<span class="ident" id="6888483">x</span>&nbsp;<span class="op" id="6888485">&lt;</span>&nbsp;<span class="ident" id="6888487">b</span><span class="op" id="6888488">.</span><span class="ident" id="6888489">Max</span><span class="op" id="6888492">.</span><span class="ident" id="6888493">X</span><span class="op" id="6888494">;</span>&nbsp;<span class="ident" id="6888496">x</span><span class="op" id="6888497">++</span>&nbsp;<span class="op" id="6888500">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888505">got</span>&nbsp;<span class="op" id="6888509">:=</span>&nbsp;<span class="ident" id="6888512">dst</span><span class="op" id="6888515">.</span><span class="ident" id="6888516">Pix</span><span class="op" id="6888519">[</span><span class="ident" id="6888520">dst</span><span class="op" id="6888523">.</span><span class="ident" id="6888524">PixOffset</span><span class="op" id="6888533">(</span><span class="ident" id="6888534">x</span><span class="op" id="6888535">,</span>&nbsp;<span class="ident" id="6888537">y</span><span class="op" id="6888538">)</span><span class="op" id="6888539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888544">want</span>&nbsp;<span class="op" id="6888549">:=</span>&nbsp;<span class="builtintype" id="6888552">uint8</span><span class="op" id="6888557">(</span><span class="ident" id="6888558">x</span><span class="op" id="6888559">+</span><span class="ident" id="6888560">y</span><span class="op" id="6888561">)</span>&nbsp;<span class="op" id="6888563">%</span>&nbsp;<span class="num" id="6888565">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6888570">if</span>&nbsp;<span class="ident" id="6888573">got</span>&nbsp;<span class="op" id="6888577">!=</span>&nbsp;<span class="ident" id="6888580">want</span>&nbsp;<span class="op" id="6888585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888591">t</span><span class="op" id="6888592">.</span><span class="ident" id="6888593">Errorf</span><span class="op" id="6888599">(</span><span class="string" id="6888600">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6888630">,</span>&nbsp;<span class="ident" id="6888632">x</span><span class="op" id="6888633">,</span>&nbsp;<span class="ident" id="6888635">y</span><span class="op" id="6888636">,</span>&nbsp;<span class="ident" id="6888638">got</span><span class="op" id="6888641">,</span>&nbsp;<span class="ident" id="6888643">want</span><span class="op" id="6888647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6888653">if</span>&nbsp;<span class="ident" id="6888656">nErr</span><span class="op" id="6888660">++</span><span class="op" id="6888662">;</span>&nbsp;<span class="ident" id="6888664">nErr</span>&nbsp;<span class="op" id="6888669">==</span>&nbsp;<span class="num" id="6888672">10</span>&nbsp;<span class="op" id="6888675">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888682">t</span><span class="op" id="6888683">.</span><span class="ident" id="6888684">Fatal</span><span class="op" id="6888689">(</span><span class="string" id="6888690">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6888716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888734">}</span><br>
<span class="lineno">380</span><span class="op" id="6888736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6888739">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6888818">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6888850">type</span>&nbsp;<span class="ident" id="6888855">embeddedPaletted</span>&nbsp;<span class="keyword" id="6888872">struct</span>&nbsp;<span class="op" id="6888879">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888882">*</span><span class="ident" id="6888883">image</span><span class="op" id="6888888">.</span><span class="ident" id="6888889">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6888898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6888901">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6888971">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6889023">func</span>&nbsp;<span class="ident" id="6889028">TestPaletted</span><span class="op" id="6889040">(</span><span class="ident" id="6889041">t</span>&nbsp;<span class="op" id="6889043">*</span><span class="ident" id="6889044">testing</span><span class="op" id="6889051">.</span><span class="ident" id="6889052">T</span><span class="op" id="6889053">)</span>&nbsp;<span class="op" id="6889055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889058">f</span><span class="op" id="6889059">,</span>&nbsp;<span class="ident" id="6889061">err</span>&nbsp;<span class="op" id="6889065">:=</span>&nbsp;<span class="ident" id="6889068">os</span><span class="op" id="6889070">.</span><span class="ident" id="6889071">Open</span><span class="op" id="6889075">(</span><span class="string" id="6889076">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6889103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889106">if</span>&nbsp;<span class="ident" id="6889109">err</span>&nbsp;<span class="op" id="6889113">!=</span>&nbsp;<span class="builtintype" id="6889116">nil</span>&nbsp;<span class="op" id="6889120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889124">t</span><span class="op" id="6889125">.</span><span class="ident" id="6889126">Fatalf</span><span class="op" id="6889132">(</span><span class="string" id="6889133">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6889143">,</span>&nbsp;<span class="ident" id="6889145">err</span><span class="op" id="6889148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889151">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889154">defer</span>&nbsp;<span class="ident" id="6889160">f</span><span class="op" id="6889161">.</span><span class="ident" id="6889162">Close</span><span class="op" id="6889167">(</span><span class="op" id="6889168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889171">src</span><span class="op" id="6889174">,</span>&nbsp;<span class="ident" id="6889176">err</span>&nbsp;<span class="op" id="6889180">:=</span>&nbsp;<span class="ident" id="6889183">png</span><span class="op" id="6889186">.</span><span class="ident" id="6889187">Decode</span><span class="op" id="6889193">(</span><span class="ident" id="6889194">f</span><span class="op" id="6889195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889198">if</span>&nbsp;<span class="ident" id="6889201">err</span>&nbsp;<span class="op" id="6889205">!=</span>&nbsp;<span class="builtintype" id="6889208">nil</span>&nbsp;<span class="op" id="6889212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889216">t</span><span class="op" id="6889217">.</span><span class="ident" id="6889218">Fatalf</span><span class="op" id="6889224">(</span><span class="string" id="6889225">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6889237">,</span>&nbsp;<span class="ident" id="6889239">err</span><span class="op" id="6889242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889245">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889248">b</span>&nbsp;<span class="op" id="6889250">:=</span>&nbsp;<span class="ident" id="6889253">src</span><span class="op" id="6889256">.</span><span class="ident" id="6889257">Bounds</span><span class="op" id="6889263">(</span><span class="op" id="6889264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889268">cgaPalette</span>&nbsp;<span class="op" id="6889279">:=</span>&nbsp;<span class="ident" id="6889282">color</span><span class="op" id="6889287">.</span><span class="ident" id="6889288">Palette</span><span class="op" id="6889295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889299">color</span><span class="op" id="6889304">.</span><span class="ident" id="6889305">RGBA</span><span class="op" id="6889309">{</span><span class="num" id="6889310">0x00</span><span class="op" id="6889314">,</span>&nbsp;<span class="num" id="6889316">0x00</span><span class="op" id="6889320">,</span>&nbsp;<span class="num" id="6889322">0x00</span><span class="op" id="6889326">,</span>&nbsp;<span class="num" id="6889328">0xff</span><span class="op" id="6889332">}</span><span class="op" id="6889333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889337">color</span><span class="op" id="6889342">.</span><span class="ident" id="6889343">RGBA</span><span class="op" id="6889347">{</span><span class="num" id="6889348">0x55</span><span class="op" id="6889352">,</span>&nbsp;<span class="num" id="6889354">0xff</span><span class="op" id="6889358">,</span>&nbsp;<span class="num" id="6889360">0xff</span><span class="op" id="6889364">,</span>&nbsp;<span class="num" id="6889366">0xff</span><span class="op" id="6889370">}</span><span class="op" id="6889371">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889375">color</span><span class="op" id="6889380">.</span><span class="ident" id="6889381">RGBA</span><span class="op" id="6889385">{</span><span class="num" id="6889386">0xff</span><span class="op" id="6889390">,</span>&nbsp;<span class="num" id="6889392">0x55</span><span class="op" id="6889396">,</span>&nbsp;<span class="num" id="6889398">0xff</span><span class="op" id="6889402">,</span>&nbsp;<span class="num" id="6889404">0xff</span><span class="op" id="6889408">}</span><span class="op" id="6889409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889413">color</span><span class="op" id="6889418">.</span><span class="ident" id="6889419">RGBA</span><span class="op" id="6889423">{</span><span class="num" id="6889424">0xff</span><span class="op" id="6889428">,</span>&nbsp;<span class="num" id="6889430">0xff</span><span class="op" id="6889434">,</span>&nbsp;<span class="num" id="6889436">0xff</span><span class="op" id="6889440">,</span>&nbsp;<span class="num" id="6889442">0xff</span><span class="op" id="6889446">}</span><span class="op" id="6889447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889453">drawers</span>&nbsp;<span class="op" id="6889461">:=</span>&nbsp;<span class="keyword" id="6889464">map</span><span class="op" id="6889467">[</span><span class="builtintype" id="6889468">string</span><span class="op" id="6889474">]</span><span class="ident" id="6889475">Drawer</span><span class="op" id="6889481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6889485">&#34;src&#34;</span><span class="op" id="6889490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889504">Src</span><span class="op" id="6889507">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6889511">&#34;floyd-steinberg&#34;</span><span class="op" id="6889528">:</span>&nbsp;<span class="ident" id="6889530">FloydSteinberg</span><span class="op" id="6889544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6889550">loop</span><span class="op" id="6889554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889557">for</span>&nbsp;<span class="ident" id="6889561">dName</span><span class="op" id="6889566">,</span>&nbsp;<span class="ident" id="6889568">d</span>&nbsp;<span class="op" id="6889570">:=</span>&nbsp;<span class="keyword" id="6889573">range</span>&nbsp;<span class="ident" id="6889579">drawers</span>&nbsp;<span class="op" id="6889587">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889591">dst0</span>&nbsp;<span class="op" id="6889596">:=</span>&nbsp;<span class="ident" id="6889599">image</span><span class="op" id="6889604">.</span><span class="ident" id="6889605">NewPaletted</span><span class="op" id="6889616">(</span><span class="ident" id="6889617">b</span><span class="op" id="6889618">,</span>&nbsp;<span class="ident" id="6889620">cgaPalette</span><span class="op" id="6889630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889634">dst1</span>&nbsp;<span class="op" id="6889639">:=</span>&nbsp;<span class="ident" id="6889642">image</span><span class="op" id="6889647">.</span><span class="ident" id="6889648">NewPaletted</span><span class="op" id="6889659">(</span><span class="ident" id="6889660">b</span><span class="op" id="6889661">,</span>&nbsp;<span class="ident" id="6889663">cgaPalette</span><span class="op" id="6889673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889677">d</span><span class="op" id="6889678">.</span><span class="ident" id="6889679">Draw</span><span class="op" id="6889683">(</span><span class="ident" id="6889684">dst0</span><span class="op" id="6889688">,</span>&nbsp;<span class="ident" id="6889690">b</span><span class="op" id="6889691">,</span>&nbsp;<span class="ident" id="6889693">src</span><span class="op" id="6889696">,</span>&nbsp;<span class="ident" id="6889698">image</span><span class="op" id="6889703">.</span><span class="ident" id="6889704">Point</span><span class="op" id="6889709">{</span><span class="op" id="6889710">}</span><span class="op" id="6889711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889715">d</span><span class="op" id="6889716">.</span><span class="ident" id="6889717">Draw</span><span class="op" id="6889721">(</span><span class="ident" id="6889722">embeddedPaletted</span><span class="op" id="6889738">{</span><span class="ident" id="6889739">dst1</span><span class="op" id="6889743">}</span><span class="op" id="6889744">,</span>&nbsp;<span class="ident" id="6889746">b</span><span class="op" id="6889747">,</span>&nbsp;<span class="ident" id="6889749">src</span><span class="op" id="6889752">,</span>&nbsp;<span class="ident" id="6889754">image</span><span class="op" id="6889759">.</span><span class="ident" id="6889760">Point</span><span class="op" id="6889765">{</span><span class="op" id="6889766">}</span><span class="op" id="6889767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889771">for</span>&nbsp;<span class="ident" id="6889775">y</span>&nbsp;<span class="op" id="6889777">:=</span>&nbsp;<span class="ident" id="6889780">b</span><span class="op" id="6889781">.</span><span class="ident" id="6889782">Min</span><span class="op" id="6889785">.</span><span class="ident" id="6889786">Y</span><span class="op" id="6889787">;</span>&nbsp;<span class="ident" id="6889789">y</span>&nbsp;<span class="op" id="6889791">&lt;</span>&nbsp;<span class="ident" id="6889793">b</span><span class="op" id="6889794">.</span><span class="ident" id="6889795">Max</span><span class="op" id="6889798">.</span><span class="ident" id="6889799">Y</span><span class="op" id="6889800">;</span>&nbsp;<span class="ident" id="6889802">y</span><span class="op" id="6889803">++</span>&nbsp;<span class="op" id="6889806">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889811">for</span>&nbsp;<span class="ident" id="6889815">x</span>&nbsp;<span class="op" id="6889817">:=</span>&nbsp;<span class="ident" id="6889820">b</span><span class="op" id="6889821">.</span><span class="ident" id="6889822">Min</span><span class="op" id="6889825">.</span><span class="ident" id="6889826">X</span><span class="op" id="6889827">;</span>&nbsp;<span class="ident" id="6889829">x</span>&nbsp;<span class="op" id="6889831">&lt;</span>&nbsp;<span class="ident" id="6889833">b</span><span class="op" id="6889834">.</span><span class="ident" id="6889835">Max</span><span class="op" id="6889838">.</span><span class="ident" id="6889839">X</span><span class="op" id="6889840">;</span>&nbsp;<span class="ident" id="6889842">x</span><span class="op" id="6889843">++</span>&nbsp;<span class="op" id="6889846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889852">if</span>&nbsp;<span class="op" id="6889855">!</span><span class="ident" id="6889856">eq</span><span class="op" id="6889858">(</span><span class="ident" id="6889859">dst0</span><span class="op" id="6889863">.</span><span class="ident" id="6889864">At</span><span class="op" id="6889866">(</span><span class="ident" id="6889867">x</span><span class="op" id="6889868">,</span>&nbsp;<span class="ident" id="6889870">y</span><span class="op" id="6889871">)</span><span class="op" id="6889872">,</span>&nbsp;<span class="ident" id="6889874">dst1</span><span class="op" id="6889878">.</span><span class="ident" id="6889879">At</span><span class="op" id="6889881">(</span><span class="ident" id="6889882">x</span><span class="op" id="6889883">,</span>&nbsp;<span class="ident" id="6889885">y</span><span class="op" id="6889886">)</span><span class="op" id="6889887">)</span>&nbsp;<span class="op" id="6889889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889896">t</span><span class="op" id="6889897">.</span><span class="ident" id="6889898">Errorf</span><span class="op" id="6889904">(</span><span class="string" id="6889905">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6889936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889944">dName</span><span class="op" id="6889949">,</span>&nbsp;<span class="ident" id="6889951">x</span><span class="op" id="6889952">,</span>&nbsp;<span class="ident" id="6889954">y</span><span class="op" id="6889955">,</span>&nbsp;<span class="ident" id="6889957">dst0</span><span class="op" id="6889961">.</span><span class="ident" id="6889962">At</span><span class="op" id="6889964">(</span><span class="ident" id="6889965">x</span><span class="op" id="6889966">,</span>&nbsp;<span class="ident" id="6889968">y</span><span class="op" id="6889969">)</span><span class="op" id="6889970">,</span>&nbsp;<span class="ident" id="6889972">dst1</span><span class="op" id="6889976">.</span><span class="ident" id="6889977">At</span><span class="op" id="6889979">(</span><span class="ident" id="6889980">x</span><span class="op" id="6889981">,</span>&nbsp;<span class="ident" id="6889983">y</span><span class="op" id="6889984">)</span><span class="op" id="6889985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889992">continue</span>&nbsp;<span class="ident" id="6890001">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890022">}</span><br>
<span class="lineno"></span><span class="op" id="6890024">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
