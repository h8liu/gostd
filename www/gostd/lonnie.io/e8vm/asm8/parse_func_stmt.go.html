<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="4881720">package</span>&nbsp;<span class="ident" id="4881728">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4881734">import</span>&nbsp;<span class="op" id="4881741">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4881744">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="4881766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4881769">func</span>&nbsp;<span class="ident" id="4881774">parseOps</span><span class="op" id="4881782">(</span><span class="ident" id="4881783">p</span>&nbsp;<span class="op" id="4881785">*</span><span class="ident" id="4881786">parser</span><span class="op" id="4881792">)</span>&nbsp;<span class="op" id="4881794">(</span><span class="ident" id="4881795">ops</span>&nbsp;<span class="op" id="4881799">[</span><span class="op" id="4881800">]</span><span class="op" id="4881801">*</span><span class="ident" id="4881802">lex8</span><span class="op" id="4881806">.</span><span class="ident" id="4881807">Token</span><span class="op" id="4881812">)</span>&nbsp;<span class="op" id="4881814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881817">for</span>&nbsp;<span class="op" id="4881821">!</span><span class="ident" id="4881822">p</span><span class="op" id="4881823">.</span><span class="ident" id="4881824">acceptType</span><span class="op" id="4881834">(</span><span class="ident" id="4881835">Semi</span><span class="op" id="4881839">)</span>&nbsp;<span class="op" id="4881841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881845">t</span>&nbsp;<span class="op" id="4881847">:=</span>&nbsp;<span class="ident" id="4881850">p</span><span class="op" id="4881851">.</span><span class="ident" id="4881852">expect</span><span class="op" id="4881858">(</span><span class="ident" id="4881859">Operand</span><span class="op" id="4881866">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881870">if</span>&nbsp;<span class="ident" id="4881873">t</span>&nbsp;<span class="op" id="4881875">!=</span>&nbsp;<span class="ident" id="4881878">nil</span>&nbsp;<span class="op" id="4881882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881887">ops</span>&nbsp;<span class="op" id="4881891">=</span>&nbsp;<span class="builtinfunc" id="4881893">append</span><span class="op" id="4881899">(</span><span class="ident" id="4881900">ops</span><span class="op" id="4881903">,</span>&nbsp;<span class="ident" id="4881905">t</span><span class="op" id="4881906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881910">}</span>&nbsp;<span class="keyword" id="4881912">else</span>&nbsp;<span class="op" id="4881917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881922">ops</span>&nbsp;<span class="op" id="4881926">=</span>&nbsp;<span class="ident" id="4881928">nil</span>&nbsp;<span class="comment" id="4881932">//&nbsp;error&nbsp;now</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881948">if</span>&nbsp;<span class="ident" id="4881951">p</span><span class="op" id="4881952">.</span><span class="ident" id="4881953">see</span><span class="op" id="4881956">(</span><span class="ident" id="4881957">lex8</span><span class="op" id="4881961">.</span><span class="ident" id="4881962">EOF</span><span class="op" id="4881965">)</span>&nbsp;<span class="op" id="4881967">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881973">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881987">p</span><span class="op" id="4881988">.</span><span class="ident" id="4881989">next</span><span class="op" id="4881993">(</span><span class="op" id="4881994">)</span>&nbsp;<span class="comment" id="4881996">//&nbsp;proceed&nbsp;anyway&nbsp;for&nbsp;other&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882035">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882039">p</span><span class="op" id="4882040">.</span><span class="ident" id="4882041">clearErr</span><span class="op" id="4882049">(</span><span class="op" id="4882050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882053">return</span>&nbsp;<span class="ident" id="4882060">ops</span><br>
<span class="lineno"></span><span class="op" id="4882064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="4882067">func</span>&nbsp;<span class="ident" id="4882072">parseFuncStmt</span><span class="op" id="4882085">(</span><span class="ident" id="4882086">p</span>&nbsp;<span class="op" id="4882088">*</span><span class="ident" id="4882089">parser</span><span class="op" id="4882095">)</span>&nbsp;<span class="op" id="4882097">*</span><span class="ident" id="4882098">funcStmt</span>&nbsp;<span class="op" id="4882107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882110">ops</span>&nbsp;<span class="op" id="4882114">:=</span>&nbsp;<span class="ident" id="4882117">parseOps</span><span class="op" id="4882125">(</span><span class="ident" id="4882126">p</span><span class="op" id="4882127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882130">if</span>&nbsp;<span class="builtinfunc" id="4882133">len</span><span class="op" id="4882136">(</span><span class="ident" id="4882137">ops</span><span class="op" id="4882140">)</span>&nbsp;<span class="op" id="4882142">==</span>&nbsp;<span class="num" id="4882145">0</span>&nbsp;<span class="op" id="4882147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882151">return</span>&nbsp;<span class="ident" id="4882158">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882163">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882167">op0</span>&nbsp;<span class="op" id="4882171">:=</span>&nbsp;<span class="ident" id="4882174">ops</span><span class="op" id="4882177">[</span><span class="num" id="4882178">0</span><span class="op" id="4882179">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882182">lead</span>&nbsp;<span class="op" id="4882187">:=</span>&nbsp;<span class="ident" id="4882190">op0</span><span class="op" id="4882193">.</span><span class="ident" id="4882194">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882199">if</span>&nbsp;<span class="ident" id="4882202">lead</span>&nbsp;<span class="op" id="4882207">==</span>&nbsp;<span class="string" id="4882210">&#34;&#34;</span>&nbsp;<span class="op" id="4882213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4882217">panic</span><span class="op" id="4882222">(</span><span class="string" id="4882223">&#34;empty&nbsp;operand&#34;</span><span class="op" id="4882238">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882245">if</span>&nbsp;<span class="ident" id="4882248">parseLabel</span><span class="op" id="4882258">(</span><span class="ident" id="4882259">p</span><span class="op" id="4882260">,</span>&nbsp;<span class="ident" id="4882262">op0</span><span class="op" id="4882265">)</span>&nbsp;<span class="op" id="4882267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882271">if</span>&nbsp;<span class="builtinfunc" id="4882274">len</span><span class="op" id="4882277">(</span><span class="ident" id="4882278">ops</span><span class="op" id="4882281">)</span>&nbsp;<span class="op" id="4882283">&gt;</span>&nbsp;<span class="num" id="4882285">1</span>&nbsp;<span class="op" id="4882287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882292">p</span><span class="op" id="4882293">.</span><span class="ident" id="4882294">err</span><span class="op" id="4882297">(</span><span class="ident" id="4882298">op0</span><span class="op" id="4882301">.</span><span class="ident" id="4882302">Pos</span><span class="op" id="4882305">,</span>&nbsp;<span class="string" id="4882307">&#34;label&nbsp;should&nbsp;take&nbsp;the&nbsp;entire&nbsp;line&#34;</span><span class="op" id="4882342">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882347">return</span>&nbsp;<span class="ident" id="4882354">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882364">return</span>&nbsp;<span class="op" id="4882371">&amp;</span><span class="ident" id="4882372">funcStmt</span><span class="op" id="4882380">{</span><span class="ident" id="4882381">label</span><span class="op" id="4882386">:</span>&nbsp;<span class="ident" id="4882388">lead</span><span class="op" id="4882392">,</span>&nbsp;<span class="ident" id="4882394">ops</span><span class="op" id="4882397">:</span>&nbsp;<span class="ident" id="4882399">ops</span><span class="op" id="4882402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882409">return</span>&nbsp;<span class="op" id="4882416">&amp;</span><span class="ident" id="4882417">funcStmt</span><span class="op" id="4882425">{</span><span class="ident" id="4882426">inst</span><span class="op" id="4882430">:</span>&nbsp;<span class="ident" id="4882432">parseInst</span><span class="op" id="4882441">(</span><span class="ident" id="4882442">p</span><span class="op" id="4882443">,</span>&nbsp;<span class="ident" id="4882445">ops</span><span class="op" id="4882448">)</span><span class="op" id="4882449">,</span>&nbsp;<span class="ident" id="4882451">ops</span><span class="op" id="4882454">:</span>&nbsp;<span class="ident" id="4882456">ops</span><span class="op" id="4882459">}</span><br>
<span class="lineno"></span><span class="op" id="4882461">}</span>
</div>
</body>
</html>
