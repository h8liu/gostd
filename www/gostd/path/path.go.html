<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3682949">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3683004">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3683058">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3683109">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3683186">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3683196">package</span>&nbsp;<span class="ident" id="3683204">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3683210">import</span>&nbsp;<span class="op" id="3683217">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3683220">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3683230">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3683233">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3683283">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3683341">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3683407">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3683464">type</span>&nbsp;<span class="ident" id="3683469">lazybuf</span>&nbsp;<span class="keyword" id="3683477">struct</span>&nbsp;<span class="op" id="3683484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683487">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3683491">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683499">buf</span>&nbsp;<span class="op" id="3683503">[</span><span class="op" id="3683504">]</span><span class="builtintype" id="3683505">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683511">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3683515">int</span><br>
<span class="lineno"></span><span class="op" id="3683519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3683522">func</span>&nbsp;<span class="op" id="3683527">(</span><span class="ident" id="3683528">b</span>&nbsp;<span class="op" id="3683530">*</span><span class="ident" id="3683531">lazybuf</span><span class="op" id="3683538">)</span>&nbsp;<span class="ident" id="3683540">index</span><span class="op" id="3683545">(</span><span class="ident" id="3683546">i</span>&nbsp;<span class="builtintype" id="3683548">int</span><span class="op" id="3683551">)</span>&nbsp;<span class="builtintype" id="3683553">byte</span>&nbsp;<span class="op" id="3683558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683561">if</span>&nbsp;<span class="ident" id="3683564">b</span><span class="op" id="3683565">.</span><span class="ident" id="3683566">buf</span>&nbsp;<span class="op" id="3683570">!=</span>&nbsp;<span class="builtintype" id="3683573">nil</span>&nbsp;<span class="op" id="3683577">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683581">return</span>&nbsp;<span class="ident" id="3683588">b</span><span class="op" id="3683589">.</span><span class="ident" id="3683590">buf</span><span class="op" id="3683593">[</span><span class="ident" id="3683594">i</span><span class="op" id="3683595">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3683598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683601">return</span>&nbsp;<span class="ident" id="3683608">b</span><span class="op" id="3683609">.</span><span class="ident" id="3683610">s</span><span class="op" id="3683611">[</span><span class="ident" id="3683612">i</span><span class="op" id="3683613">]</span><br>
<span class="lineno"></span><span class="op" id="3683615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3683618">func</span>&nbsp;<span class="op" id="3683623">(</span><span class="ident" id="3683624">b</span>&nbsp;<span class="op" id="3683626">*</span><span class="ident" id="3683627">lazybuf</span><span class="op" id="3683634">)</span>&nbsp;<span class="builtinfunc" id="3683636">append</span><span class="op" id="3683642">(</span><span class="ident" id="3683643">c</span>&nbsp;<span class="builtintype" id="3683645">byte</span><span class="op" id="3683649">)</span>&nbsp;<span class="op" id="3683651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683654">if</span>&nbsp;<span class="ident" id="3683657">b</span><span class="op" id="3683658">.</span><span class="ident" id="3683659">buf</span>&nbsp;<span class="op" id="3683663">==</span>&nbsp;<span class="builtintype" id="3683666">nil</span>&nbsp;<span class="op" id="3683670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683674">if</span>&nbsp;<span class="ident" id="3683677">b</span><span class="op" id="3683678">.</span><span class="ident" id="3683679">w</span>&nbsp;<span class="op" id="3683681">&lt;</span>&nbsp;<span class="builtinfunc" id="3683683">len</span><span class="op" id="3683686">(</span><span class="ident" id="3683687">b</span><span class="op" id="3683688">.</span><span class="ident" id="3683689">s</span><span class="op" id="3683690">)</span>&nbsp;<span class="op" id="3683692">&amp;&amp;</span>&nbsp;<span class="ident" id="3683695">b</span><span class="op" id="3683696">.</span><span class="ident" id="3683697">s</span><span class="op" id="3683698">[</span><span class="ident" id="3683699">b</span><span class="op" id="3683700">.</span><span class="ident" id="3683701">w</span><span class="op" id="3683702">]</span>&nbsp;<span class="op" id="3683704">==</span>&nbsp;<span class="ident" id="3683707">c</span>&nbsp;<span class="op" id="3683709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683714">b</span><span class="op" id="3683715">.</span><span class="ident" id="3683716">w</span><span class="op" id="3683717">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683723">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3683732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683736">b</span><span class="op" id="3683737">.</span><span class="ident" id="3683738">buf</span>&nbsp;<span class="op" id="3683742">=</span>&nbsp;<span class="builtinfunc" id="3683744">make</span><span class="op" id="3683748">(</span><span class="op" id="3683749">[</span><span class="op" id="3683750">]</span><span class="builtintype" id="3683751">byte</span><span class="op" id="3683755">,</span>&nbsp;<span class="builtinfunc" id="3683757">len</span><span class="op" id="3683760">(</span><span class="ident" id="3683761">b</span><span class="op" id="3683762">.</span><span class="ident" id="3683763">s</span><span class="op" id="3683764">)</span><span class="op" id="3683765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3683769">copy</span><span class="op" id="3683773">(</span><span class="ident" id="3683774">b</span><span class="op" id="3683775">.</span><span class="ident" id="3683776">buf</span><span class="op" id="3683779">,</span>&nbsp;<span class="ident" id="3683781">b</span><span class="op" id="3683782">.</span><span class="ident" id="3683783">s</span><span class="op" id="3683784">[</span><span class="op" id="3683785">:</span><span class="ident" id="3683786">b</span><span class="op" id="3683787">.</span><span class="ident" id="3683788">w</span><span class="op" id="3683789">]</span><span class="op" id="3683790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3683793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683796">b</span><span class="op" id="3683797">.</span><span class="ident" id="3683798">buf</span><span class="op" id="3683801">[</span><span class="ident" id="3683802">b</span><span class="op" id="3683803">.</span><span class="ident" id="3683804">w</span><span class="op" id="3683805">]</span>&nbsp;<span class="op" id="3683807">=</span>&nbsp;<span class="ident" id="3683809">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3683812">b</span><span class="op" id="3683813">.</span><span class="ident" id="3683814">w</span><span class="op" id="3683815">++</span><br>
<span class="lineno"></span><span class="op" id="3683818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3683821">func</span>&nbsp;<span class="op" id="3683826">(</span><span class="ident" id="3683827">b</span>&nbsp;<span class="op" id="3683829">*</span><span class="ident" id="3683830">lazybuf</span><span class="op" id="3683837">)</span>&nbsp;<span class="builtintype" id="3683839">string</span><span class="op" id="3683845">(</span><span class="op" id="3683846">)</span>&nbsp;<span class="builtintype" id="3683848">string</span>&nbsp;<span class="op" id="3683855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683858">if</span>&nbsp;<span class="ident" id="3683861">b</span><span class="op" id="3683862">.</span><span class="ident" id="3683863">buf</span>&nbsp;<span class="op" id="3683867">==</span>&nbsp;<span class="builtintype" id="3683870">nil</span>&nbsp;<span class="op" id="3683874">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683878">return</span>&nbsp;<span class="ident" id="3683885">b</span><span class="op" id="3683886">.</span><span class="ident" id="3683887">s</span><span class="op" id="3683888">[</span><span class="op" id="3683889">:</span><span class="ident" id="3683890">b</span><span class="op" id="3683891">.</span><span class="ident" id="3683892">w</span><span class="op" id="3683893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3683896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3683899">return</span>&nbsp;<span class="builtintype" id="3683906">string</span><span class="op" id="3683912">(</span><span class="ident" id="3683913">b</span><span class="op" id="3683914">.</span><span class="ident" id="3683915">buf</span><span class="op" id="3683918">[</span><span class="op" id="3683919">:</span><span class="ident" id="3683920">b</span><span class="op" id="3683921">.</span><span class="ident" id="3683922">w</span><span class="op" id="3683923">]</span><span class="op" id="3683924">)</span><br>
<span class="lineno"></span><span class="op" id="3683926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3683929">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3683988">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3684053">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3684109">//</span><br>
<span class="lineno"></span><span class="comment" id="3684112">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3684164">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3684230">//&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3684301">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3684355">//&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3684409">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3684473">//</span><br>
<span class="lineno"></span><span class="comment" id="3684476">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3684541">//</span><br>
<span class="lineno"></span><span class="comment" id="3684544">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3684603">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3684630">//</span><br>
<span class="lineno"></span><span class="comment" id="3684633">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3684689">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3684717">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3684769">func</span>&nbsp;<span class="ident" id="3684774">Clean</span><span class="op" id="3684779">(</span><span class="ident" id="3684780">path</span>&nbsp;<span class="builtintype" id="3684785">string</span><span class="op" id="3684791">)</span>&nbsp;<span class="builtintype" id="3684793">string</span>&nbsp;<span class="op" id="3684800">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3684803">if</span>&nbsp;<span class="ident" id="3684806">path</span>&nbsp;<span class="op" id="3684811">==</span>&nbsp;<span class="string" id="3684814">&#34;&#34;</span>&nbsp;<span class="op" id="3684817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3684821">return</span>&nbsp;<span class="string" id="3684828">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3684833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3684837">rooted</span>&nbsp;<span class="op" id="3684844">:=</span>&nbsp;<span class="ident" id="3684847">path</span><span class="op" id="3684851">[</span><span class="num" id="3684852">0</span><span class="op" id="3684853">]</span>&nbsp;<span class="op" id="3684855">==</span>&nbsp;<span class="string" id="3684858">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3684863">n</span>&nbsp;<span class="op" id="3684865">:=</span>&nbsp;<span class="builtinfunc" id="3684868">len</span><span class="op" id="3684871">(</span><span class="ident" id="3684872">path</span><span class="op" id="3684876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3684880">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3684896">//&nbsp;&nbsp;&nbsp;&nbsp;reading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3684955">//&nbsp;&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685009">//&nbsp;&nbsp;&nbsp;&nbsp;dotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685071">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685136">out</span>&nbsp;<span class="op" id="3685140">:=</span>&nbsp;<span class="ident" id="3685143">lazybuf</span><span class="op" id="3685150">{</span><span class="ident" id="3685151">s</span><span class="op" id="3685152">:</span>&nbsp;<span class="ident" id="3685154">path</span><span class="op" id="3685158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685161">r</span><span class="op" id="3685162">,</span>&nbsp;<span class="ident" id="3685164">dotdot</span>&nbsp;<span class="op" id="3685171">:=</span>&nbsp;<span class="num" id="3685174">0</span><span class="op" id="3685175">,</span>&nbsp;<span class="num" id="3685177">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685180">if</span>&nbsp;<span class="ident" id="3685183">rooted</span>&nbsp;<span class="op" id="3685190">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685194">out</span><span class="op" id="3685197">.</span><span class="builtinfunc" id="3685198">append</span><span class="op" id="3685204">(</span><span class="string" id="3685205">&#39;/&#39;</span><span class="op" id="3685208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685212">r</span><span class="op" id="3685213">,</span>&nbsp;<span class="ident" id="3685215">dotdot</span>&nbsp;<span class="op" id="3685222">=</span>&nbsp;<span class="num" id="3685224">1</span><span class="op" id="3685225">,</span>&nbsp;<span class="num" id="3685227">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685234">for</span>&nbsp;<span class="ident" id="3685238">r</span>&nbsp;<span class="op" id="3685240">&lt;</span>&nbsp;<span class="ident" id="3685242">n</span>&nbsp;<span class="op" id="3685244">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685248">switch</span>&nbsp;<span class="op" id="3685255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685259">case</span>&nbsp;<span class="ident" id="3685264">path</span><span class="op" id="3685268">[</span><span class="ident" id="3685269">r</span><span class="op" id="3685270">]</span>&nbsp;<span class="op" id="3685272">==</span>&nbsp;<span class="string" id="3685275">&#39;/&#39;</span><span class="op" id="3685278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685283">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685308">r</span><span class="op" id="3685309">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685314">case</span>&nbsp;<span class="ident" id="3685319">path</span><span class="op" id="3685323">[</span><span class="ident" id="3685324">r</span><span class="op" id="3685325">]</span>&nbsp;<span class="op" id="3685327">==</span>&nbsp;<span class="string" id="3685330">&#39;.&#39;</span>&nbsp;<span class="op" id="3685334">&amp;&amp;</span>&nbsp;<span class="op" id="3685337">(</span><span class="ident" id="3685338">r</span><span class="op" id="3685339">+</span><span class="num" id="3685340">1</span>&nbsp;<span class="op" id="3685342">==</span>&nbsp;<span class="ident" id="3685345">n</span>&nbsp;<span class="op" id="3685347">||</span>&nbsp;<span class="ident" id="3685350">path</span><span class="op" id="3685354">[</span><span class="ident" id="3685355">r</span><span class="op" id="3685356">+</span><span class="num" id="3685357">1</span><span class="op" id="3685358">]</span>&nbsp;<span class="op" id="3685360">==</span>&nbsp;<span class="string" id="3685363">&#39;/&#39;</span><span class="op" id="3685366">)</span><span class="op" id="3685367">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685372">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685388">r</span><span class="op" id="3685389">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685394">case</span>&nbsp;<span class="ident" id="3685399">path</span><span class="op" id="3685403">[</span><span class="ident" id="3685404">r</span><span class="op" id="3685405">]</span>&nbsp;<span class="op" id="3685407">==</span>&nbsp;<span class="string" id="3685410">&#39;.&#39;</span>&nbsp;<span class="op" id="3685414">&amp;&amp;</span>&nbsp;<span class="ident" id="3685417">path</span><span class="op" id="3685421">[</span><span class="ident" id="3685422">r</span><span class="op" id="3685423">+</span><span class="num" id="3685424">1</span><span class="op" id="3685425">]</span>&nbsp;<span class="op" id="3685427">==</span>&nbsp;<span class="string" id="3685430">&#39;.&#39;</span>&nbsp;<span class="op" id="3685434">&amp;&amp;</span>&nbsp;<span class="op" id="3685437">(</span><span class="ident" id="3685438">r</span><span class="op" id="3685439">+</span><span class="num" id="3685440">2</span>&nbsp;<span class="op" id="3685442">==</span>&nbsp;<span class="ident" id="3685445">n</span>&nbsp;<span class="op" id="3685447">||</span>&nbsp;<span class="ident" id="3685450">path</span><span class="op" id="3685454">[</span><span class="ident" id="3685455">r</span><span class="op" id="3685456">+</span><span class="num" id="3685457">2</span><span class="op" id="3685458">]</span>&nbsp;<span class="op" id="3685460">==</span>&nbsp;<span class="string" id="3685463">&#39;/&#39;</span><span class="op" id="3685466">)</span><span class="op" id="3685467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685472">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685507">r</span>&nbsp;<span class="op" id="3685509">+=</span>&nbsp;<span class="num" id="3685512">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685517">switch</span>&nbsp;<span class="op" id="3685524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685529">case</span>&nbsp;<span class="ident" id="3685534">out</span><span class="op" id="3685537">.</span><span class="ident" id="3685538">w</span>&nbsp;<span class="op" id="3685540">&gt;</span>&nbsp;<span class="ident" id="3685542">dotdot</span><span class="op" id="3685548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685554">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685575">out</span><span class="op" id="3685578">.</span><span class="ident" id="3685579">w</span><span class="op" id="3685580">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685587">for</span>&nbsp;<span class="ident" id="3685591">out</span><span class="op" id="3685594">.</span><span class="ident" id="3685595">w</span>&nbsp;<span class="op" id="3685597">&gt;</span>&nbsp;<span class="ident" id="3685599">dotdot</span>&nbsp;<span class="op" id="3685606">&amp;&amp;</span>&nbsp;<span class="ident" id="3685609">out</span><span class="op" id="3685612">.</span><span class="ident" id="3685613">index</span><span class="op" id="3685618">(</span><span class="ident" id="3685619">out</span><span class="op" id="3685622">.</span><span class="ident" id="3685623">w</span><span class="op" id="3685624">)</span>&nbsp;<span class="op" id="3685626">!=</span>&nbsp;<span class="string" id="3685629">&#39;/&#39;</span>&nbsp;<span class="op" id="3685633">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685640">out</span><span class="op" id="3685643">.</span><span class="ident" id="3685644">w</span><span class="op" id="3685645">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685657">case</span>&nbsp;<span class="op" id="3685662">!</span><span class="ident" id="3685663">rooted</span><span class="op" id="3685669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685675">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685738">if</span>&nbsp;<span class="ident" id="3685741">out</span><span class="op" id="3685744">.</span><span class="ident" id="3685745">w</span>&nbsp;<span class="op" id="3685747">&gt;</span>&nbsp;<span class="num" id="3685749">0</span>&nbsp;<span class="op" id="3685751">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685758">out</span><span class="op" id="3685761">.</span><span class="builtinfunc" id="3685762">append</span><span class="op" id="3685768">(</span><span class="string" id="3685769">&#39;/&#39;</span><span class="op" id="3685772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685784">out</span><span class="op" id="3685787">.</span><span class="builtinfunc" id="3685788">append</span><span class="op" id="3685794">(</span><span class="string" id="3685795">&#39;.&#39;</span><span class="op" id="3685798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685804">out</span><span class="op" id="3685807">.</span><span class="builtinfunc" id="3685808">append</span><span class="op" id="3685814">(</span><span class="string" id="3685815">&#39;.&#39;</span><span class="op" id="3685818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685824">dotdot</span>&nbsp;<span class="op" id="3685831">=</span>&nbsp;<span class="ident" id="3685833">out</span><span class="op" id="3685836">.</span><span class="ident" id="3685837">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685846">default</span><span class="op" id="3685853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685858">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685883">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3685909">if</span>&nbsp;<span class="ident" id="3685912">rooted</span>&nbsp;<span class="op" id="3685919">&amp;&amp;</span>&nbsp;<span class="ident" id="3685922">out</span><span class="op" id="3685925">.</span><span class="ident" id="3685926">w</span>&nbsp;<span class="op" id="3685928">!=</span>&nbsp;<span class="num" id="3685931">1</span>&nbsp;<span class="op" id="3685933">||</span>&nbsp;<span class="op" id="3685936">!</span><span class="ident" id="3685937">rooted</span>&nbsp;<span class="op" id="3685944">&amp;&amp;</span>&nbsp;<span class="ident" id="3685947">out</span><span class="op" id="3685950">.</span><span class="ident" id="3685951">w</span>&nbsp;<span class="op" id="3685953">!=</span>&nbsp;<span class="num" id="3685956">0</span>&nbsp;<span class="op" id="3685958">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3685964">out</span><span class="op" id="3685967">.</span><span class="builtinfunc" id="3685968">append</span><span class="op" id="3685974">(</span><span class="string" id="3685975">&#39;/&#39;</span><span class="op" id="3685978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3685983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3685988">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686007">for</span>&nbsp;<span class="op" id="3686011">;</span>&nbsp;<span class="ident" id="3686013">r</span>&nbsp;<span class="op" id="3686015">&lt;</span>&nbsp;<span class="ident" id="3686017">n</span>&nbsp;<span class="op" id="3686019">&amp;&amp;</span>&nbsp;<span class="ident" id="3686022">path</span><span class="op" id="3686026">[</span><span class="ident" id="3686027">r</span><span class="op" id="3686028">]</span>&nbsp;<span class="op" id="3686030">!=</span>&nbsp;<span class="string" id="3686033">&#39;/&#39;</span><span class="op" id="3686036">;</span>&nbsp;<span class="ident" id="3686038">r</span><span class="op" id="3686039">++</span>&nbsp;<span class="op" id="3686042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686048">out</span><span class="op" id="3686051">.</span><span class="builtinfunc" id="3686052">append</span><span class="op" id="3686058">(</span><span class="ident" id="3686059">path</span><span class="op" id="3686063">[</span><span class="ident" id="3686064">r</span><span class="op" id="3686065">]</span><span class="op" id="3686066">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3686082">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686113">if</span>&nbsp;<span class="ident" id="3686116">out</span><span class="op" id="3686119">.</span><span class="ident" id="3686120">w</span>&nbsp;<span class="op" id="3686122">==</span>&nbsp;<span class="num" id="3686125">0</span>&nbsp;<span class="op" id="3686127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686131">return</span>&nbsp;<span class="string" id="3686138">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686147">return</span>&nbsp;<span class="ident" id="3686154">out</span><span class="op" id="3686157">.</span><span class="builtintype" id="3686158">string</span><span class="op" id="3686164">(</span><span class="op" id="3686165">)</span><br>
<span class="lineno">135</span><span class="op" id="3686167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686170">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3686230">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3686289">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3686350">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3686371">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3686434">func</span>&nbsp;<span class="ident" id="3686439">Split</span><span class="op" id="3686444">(</span><span class="ident" id="3686445">path</span>&nbsp;<span class="builtintype" id="3686450">string</span><span class="op" id="3686456">)</span>&nbsp;<span class="op" id="3686458">(</span><span class="ident" id="3686459">dir</span><span class="op" id="3686462">,</span>&nbsp;<span class="ident" id="3686464">file</span>&nbsp;<span class="builtintype" id="3686469">string</span><span class="op" id="3686475">)</span>&nbsp;<span class="op" id="3686477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3686480">i</span>&nbsp;<span class="op" id="3686482">:=</span>&nbsp;<span class="ident" id="3686485">strings</span><span class="op" id="3686492">.</span><span class="ident" id="3686493">LastIndex</span><span class="op" id="3686502">(</span><span class="ident" id="3686503">path</span><span class="op" id="3686507">,</span>&nbsp;<span class="string" id="3686509">&#34;/&#34;</span><span class="op" id="3686512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686515">return</span>&nbsp;<span class="ident" id="3686522">path</span><span class="op" id="3686526">[</span><span class="op" id="3686527">:</span><span class="ident" id="3686528">i</span><span class="op" id="3686529">+</span><span class="num" id="3686530">1</span><span class="op" id="3686531">]</span><span class="op" id="3686532">,</span>&nbsp;<span class="ident" id="3686534">path</span><span class="op" id="3686538">[</span><span class="ident" id="3686539">i</span><span class="op" id="3686540">+</span><span class="num" id="3686541">1</span><span class="op" id="3686542">:</span><span class="op" id="3686543">]</span><br>
<span class="lineno">145</span><span class="op" id="3686545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686548">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3686619">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3686691">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3686725">func</span>&nbsp;<span class="ident" id="3686730">Join</span><span class="op" id="3686734">(</span><span class="ident" id="3686735">elem</span>&nbsp;<span class="op" id="3686740">...</span><span class="builtintype" id="3686743">string</span><span class="op" id="3686749">)</span>&nbsp;<span class="builtintype" id="3686751">string</span>&nbsp;<span class="op" id="3686758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686761">for</span>&nbsp;<span class="ident" id="3686765">i</span><span class="op" id="3686766">,</span>&nbsp;<span class="ident" id="3686768">e</span>&nbsp;<span class="op" id="3686770">:=</span>&nbsp;<span class="keyword" id="3686773">range</span>&nbsp;<span class="ident" id="3686779">elem</span>&nbsp;<span class="op" id="3686784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686788">if</span>&nbsp;<span class="ident" id="3686791">e</span>&nbsp;<span class="op" id="3686793">!=</span>&nbsp;<span class="string" id="3686796">&#34;&#34;</span>&nbsp;<span class="op" id="3686799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686804">return</span>&nbsp;<span class="ident" id="3686811">Clean</span><span class="op" id="3686816">(</span><span class="ident" id="3686817">strings</span><span class="op" id="3686824">.</span><span class="ident" id="3686825">Join</span><span class="op" id="3686829">(</span><span class="ident" id="3686830">elem</span><span class="op" id="3686834">[</span><span class="ident" id="3686835">i</span><span class="op" id="3686836">:</span><span class="op" id="3686837">]</span><span class="op" id="3686838">,</span>&nbsp;<span class="string" id="3686840">&#34;/&#34;</span><span class="op" id="3686843">)</span><span class="op" id="3686844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686848">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3686851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3686854">return</span>&nbsp;<span class="string" id="3686861">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3686864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686867">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3686920">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3686978">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3687027">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3687062">func</span>&nbsp;<span class="ident" id="3687067">Ext</span><span class="op" id="3687070">(</span><span class="ident" id="3687071">path</span>&nbsp;<span class="builtintype" id="3687076">string</span><span class="op" id="3687082">)</span>&nbsp;<span class="builtintype" id="3687084">string</span>&nbsp;<span class="op" id="3687091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687094">for</span>&nbsp;<span class="ident" id="3687098">i</span>&nbsp;<span class="op" id="3687100">:=</span>&nbsp;<span class="builtinfunc" id="3687103">len</span><span class="op" id="3687106">(</span><span class="ident" id="3687107">path</span><span class="op" id="3687111">)</span>&nbsp;<span class="op" id="3687113">-</span>&nbsp;<span class="num" id="3687115">1</span><span class="op" id="3687116">;</span>&nbsp;<span class="ident" id="3687118">i</span>&nbsp;<span class="op" id="3687120">&gt;=</span>&nbsp;<span class="num" id="3687123">0</span>&nbsp;<span class="op" id="3687125">&amp;&amp;</span>&nbsp;<span class="ident" id="3687128">path</span><span class="op" id="3687132">[</span><span class="ident" id="3687133">i</span><span class="op" id="3687134">]</span>&nbsp;<span class="op" id="3687136">!=</span>&nbsp;<span class="string" id="3687139">&#39;/&#39;</span><span class="op" id="3687142">;</span>&nbsp;<span class="ident" id="3687144">i</span><span class="op" id="3687145">--</span>&nbsp;<span class="op" id="3687148">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687152">if</span>&nbsp;<span class="ident" id="3687155">path</span><span class="op" id="3687159">[</span><span class="ident" id="3687160">i</span><span class="op" id="3687161">]</span>&nbsp;<span class="op" id="3687163">==</span>&nbsp;<span class="string" id="3687166">&#39;.&#39;</span>&nbsp;<span class="op" id="3687170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687175">return</span>&nbsp;<span class="ident" id="3687182">path</span><span class="op" id="3687186">[</span><span class="ident" id="3687187">i</span><span class="op" id="3687188">:</span><span class="op" id="3687189">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687199">return</span>&nbsp;<span class="string" id="3687206">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3687209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3687212">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3687254">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3687322">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3687365">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3687428">func</span>&nbsp;<span class="ident" id="3687433">Base</span><span class="op" id="3687437">(</span><span class="ident" id="3687438">path</span>&nbsp;<span class="builtintype" id="3687443">string</span><span class="op" id="3687449">)</span>&nbsp;<span class="builtintype" id="3687451">string</span>&nbsp;<span class="op" id="3687458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687461">if</span>&nbsp;<span class="ident" id="3687464">path</span>&nbsp;<span class="op" id="3687469">==</span>&nbsp;<span class="string" id="3687472">&#34;&#34;</span>&nbsp;<span class="op" id="3687475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687479">return</span>&nbsp;<span class="string" id="3687486">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687491">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687494">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687522">for</span>&nbsp;<span class="builtinfunc" id="3687526">len</span><span class="op" id="3687529">(</span><span class="ident" id="3687530">path</span><span class="op" id="3687534">)</span>&nbsp;<span class="op" id="3687536">&gt;</span>&nbsp;<span class="num" id="3687538">0</span>&nbsp;<span class="op" id="3687540">&amp;&amp;</span>&nbsp;<span class="ident" id="3687543">path</span><span class="op" id="3687547">[</span><span class="builtinfunc" id="3687548">len</span><span class="op" id="3687551">(</span><span class="ident" id="3687552">path</span><span class="op" id="3687556">)</span><span class="op" id="3687557">-</span><span class="num" id="3687558">1</span><span class="op" id="3687559">]</span>&nbsp;<span class="op" id="3687561">==</span>&nbsp;<span class="string" id="3687564">&#39;/&#39;</span>&nbsp;<span class="op" id="3687568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687572">path</span>&nbsp;<span class="op" id="3687577">=</span>&nbsp;<span class="ident" id="3687579">path</span><span class="op" id="3687583">[</span><span class="num" id="3687584">0</span>&nbsp;<span class="op" id="3687586">:</span>&nbsp;<span class="builtinfunc" id="3687588">len</span><span class="op" id="3687591">(</span><span class="ident" id="3687592">path</span><span class="op" id="3687596">)</span><span class="op" id="3687597">-</span><span class="num" id="3687598">1</span><span class="op" id="3687599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687605">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687631">if</span>&nbsp;<span class="ident" id="3687634">i</span>&nbsp;<span class="op" id="3687636">:=</span>&nbsp;<span class="ident" id="3687639">strings</span><span class="op" id="3687646">.</span><span class="ident" id="3687647">LastIndex</span><span class="op" id="3687656">(</span><span class="ident" id="3687657">path</span><span class="op" id="3687661">,</span>&nbsp;<span class="string" id="3687663">&#34;/&#34;</span><span class="op" id="3687666">)</span><span class="op" id="3687667">;</span>&nbsp;<span class="ident" id="3687669">i</span>&nbsp;<span class="op" id="3687671">&gt;=</span>&nbsp;<span class="num" id="3687674">0</span>&nbsp;<span class="op" id="3687676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3687680">path</span>&nbsp;<span class="op" id="3687685">=</span>&nbsp;<span class="ident" id="3687687">path</span><span class="op" id="3687691">[</span><span class="ident" id="3687692">i</span><span class="op" id="3687693">+</span><span class="num" id="3687694">1</span><span class="op" id="3687695">:</span><span class="op" id="3687696">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3687702">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687741">if</span>&nbsp;<span class="ident" id="3687744">path</span>&nbsp;<span class="op" id="3687749">==</span>&nbsp;<span class="string" id="3687752">&#34;&#34;</span>&nbsp;<span class="op" id="3687755">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687759">return</span>&nbsp;<span class="string" id="3687766">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3687771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687774">return</span>&nbsp;<span class="ident" id="3687781">path</span><br>
<span class="lineno"></span><span class="op" id="3687786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3687789">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3687836">func</span>&nbsp;<span class="ident" id="3687841">IsAbs</span><span class="op" id="3687846">(</span><span class="ident" id="3687847">path</span>&nbsp;<span class="builtintype" id="3687852">string</span><span class="op" id="3687858">)</span>&nbsp;<span class="builtintype" id="3687860">bool</span>&nbsp;<span class="op" id="3687865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3687868">return</span>&nbsp;<span class="builtinfunc" id="3687875">len</span><span class="op" id="3687878">(</span><span class="ident" id="3687879">path</span><span class="op" id="3687883">)</span>&nbsp;<span class="op" id="3687885">&gt;</span>&nbsp;<span class="num" id="3687887">0</span>&nbsp;<span class="op" id="3687889">&amp;&amp;</span>&nbsp;<span class="ident" id="3687892">path</span><span class="op" id="3687896">[</span><span class="num" id="3687897">0</span><span class="op" id="3687898">]</span>&nbsp;<span class="op" id="3687900">==</span>&nbsp;<span class="string" id="3687903">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3687907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3687910">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3687991">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3688073">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3688097">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3688139">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3688216">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3688298">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3688308">func</span>&nbsp;<span class="ident" id="3688313">Dir</span><span class="op" id="3688316">(</span><span class="ident" id="3688317">path</span>&nbsp;<span class="builtintype" id="3688322">string</span><span class="op" id="3688328">)</span>&nbsp;<span class="builtintype" id="3688330">string</span>&nbsp;<span class="op" id="3688337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3688340">dir</span><span class="op" id="3688343">,</span>&nbsp;<span class="ident" id="3688345">_</span>&nbsp;<span class="op" id="3688347">:=</span>&nbsp;<span class="ident" id="3688350">Split</span><span class="op" id="3688355">(</span><span class="ident" id="3688356">path</span><span class="op" id="3688360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3688363">return</span>&nbsp;<span class="ident" id="3688370">Clean</span><span class="op" id="3688375">(</span><span class="ident" id="3688376">dir</span><span class="op" id="3688379">)</span><br>
<span class="lineno">210</span><span class="op" id="3688381">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
