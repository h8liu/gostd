<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html" class="current">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8055260">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8055315">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8055369">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8055420">package</span>&nbsp;<span class="ident" id="8055428">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8055435">import</span>&nbsp;<span class="op" id="8055442">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8055445">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8055451">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8055461">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8055464">type</span>&nbsp;<span class="ident" id="8055469">test</span>&nbsp;<span class="keyword" id="8055474">struct</span>&nbsp;<span class="op" id="8055481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055484">ieee</span><span class="op" id="8055488">,</span>&nbsp;<span class="ident" id="8055490">castagnoli</span>&nbsp;<span class="builtintype" id="8055501">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055509">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8055526">string</span><br>
<span class="lineno">15</span><span class="op" id="8055533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8055536">var</span>&nbsp;<span class="ident" id="8055540">golden</span>&nbsp;<span class="op" id="8055547">=</span>&nbsp;<span class="op" id="8055549">[</span><span class="op" id="8055550">]</span><span class="ident" id="8055551">test</span><span class="op" id="8055555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055558">{</span><span class="num" id="8055559">0x0</span><span class="op" id="8055562">,</span>&nbsp;<span class="num" id="8055564">0x0</span><span class="op" id="8055567">,</span>&nbsp;<span class="string" id="8055569">&#34;&#34;</span><span class="op" id="8055571">}</span><span class="op" id="8055572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055575">{</span><span class="num" id="8055576">0xe8b7be43</span><span class="op" id="8055586">,</span>&nbsp;<span class="num" id="8055588">0xc1d04330</span><span class="op" id="8055598">,</span>&nbsp;<span class="string" id="8055600">&#34;a&#34;</span><span class="op" id="8055603">}</span><span class="op" id="8055604">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055607">{</span><span class="num" id="8055608">0x9e83486d</span><span class="op" id="8055618">,</span>&nbsp;<span class="num" id="8055620">0xe2a22936</span><span class="op" id="8055630">,</span>&nbsp;<span class="string" id="8055632">&#34;ab&#34;</span><span class="op" id="8055636">}</span><span class="op" id="8055637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055640">{</span><span class="num" id="8055641">0x352441c2</span><span class="op" id="8055651">,</span>&nbsp;<span class="num" id="8055653">0x364b3fb7</span><span class="op" id="8055663">,</span>&nbsp;<span class="string" id="8055665">&#34;abc&#34;</span><span class="op" id="8055670">}</span><span class="op" id="8055671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055674">{</span><span class="num" id="8055675">0xed82cd11</span><span class="op" id="8055685">,</span>&nbsp;<span class="num" id="8055687">0x92c80a31</span><span class="op" id="8055697">,</span>&nbsp;<span class="string" id="8055699">&#34;abcd&#34;</span><span class="op" id="8055705">}</span><span class="op" id="8055706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055709">{</span><span class="num" id="8055710">0x8587d865</span><span class="op" id="8055720">,</span>&nbsp;<span class="num" id="8055722">0xc450d697</span><span class="op" id="8055732">,</span>&nbsp;<span class="string" id="8055734">&#34;abcde&#34;</span><span class="op" id="8055741">}</span><span class="op" id="8055742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055745">{</span><span class="num" id="8055746">0x4b8e39ef</span><span class="op" id="8055756">,</span>&nbsp;<span class="num" id="8055758">0x53bceff1</span><span class="op" id="8055768">,</span>&nbsp;<span class="string" id="8055770">&#34;abcdef&#34;</span><span class="op" id="8055778">}</span><span class="op" id="8055779">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055782">{</span><span class="num" id="8055783">0x312a6aa6</span><span class="op" id="8055793">,</span>&nbsp;<span class="num" id="8055795">0xe627f441</span><span class="op" id="8055805">,</span>&nbsp;<span class="string" id="8055807">&#34;abcdefg&#34;</span><span class="op" id="8055816">}</span><span class="op" id="8055817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055820">{</span><span class="num" id="8055821">0xaeef2a50</span><span class="op" id="8055831">,</span>&nbsp;<span class="num" id="8055833">0xa9421b7</span><span class="op" id="8055842">,</span>&nbsp;<span class="string" id="8055844">&#34;abcdefgh&#34;</span><span class="op" id="8055854">}</span><span class="op" id="8055855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055858">{</span><span class="num" id="8055859">0x8da988af</span><span class="op" id="8055869">,</span>&nbsp;<span class="num" id="8055871">0x2ddc99fc</span><span class="op" id="8055881">,</span>&nbsp;<span class="string" id="8055883">&#34;abcdefghi&#34;</span><span class="op" id="8055894">}</span><span class="op" id="8055895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055898">{</span><span class="num" id="8055899">0x3981703a</span><span class="op" id="8055909">,</span>&nbsp;<span class="num" id="8055911">0xe6599437</span><span class="op" id="8055921">,</span>&nbsp;<span class="string" id="8055923">&#34;abcdefghij&#34;</span><span class="op" id="8055935">}</span><span class="op" id="8055936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055939">{</span><span class="num" id="8055940">0x6b9cdfe7</span><span class="op" id="8055950">,</span>&nbsp;<span class="num" id="8055952">0xb2cc01fe</span><span class="op" id="8055962">,</span>&nbsp;<span class="string" id="8055964">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="8056007">}</span><span class="op" id="8056008">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056011">{</span><span class="num" id="8056012">0xc90ef73f</span><span class="op" id="8056022">,</span>&nbsp;<span class="num" id="8056024">0xe28207f</span><span class="op" id="8056033">,</span>&nbsp;<span class="string" id="8056035">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="8056094">}</span><span class="op" id="8056095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056098">{</span><span class="num" id="8056099">0xb902341f</span><span class="op" id="8056109">,</span>&nbsp;<span class="num" id="8056111">0xbe93f964</span><span class="op" id="8056121">,</span>&nbsp;<span class="string" id="8056123">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="8056167">}</span><span class="op" id="8056168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056171">{</span><span class="num" id="8056172">0x42080e8</span><span class="op" id="8056181">,</span>&nbsp;<span class="num" id="8056183">0x9e3be0c3</span><span class="op" id="8056193">,</span>&nbsp;<span class="string" id="8056195">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="8056254">}</span><span class="op" id="8056255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056258">{</span><span class="num" id="8056259">0x154c6d11</span><span class="op" id="8056269">,</span>&nbsp;<span class="num" id="8056271">0xf505ef04</span><span class="op" id="8056281">,</span>&nbsp;<span class="string" id="8056283">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="8056343">}</span><span class="op" id="8056344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056347">{</span><span class="num" id="8056348">0x4c418325</span><span class="op" id="8056358">,</span>&nbsp;<span class="num" id="8056360">0x85d3dc82</span><span class="op" id="8056370">,</span>&nbsp;<span class="string" id="8056372">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="8056401">}</span><span class="op" id="8056402">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056405">{</span><span class="num" id="8056406">0x33955150</span><span class="op" id="8056416">,</span>&nbsp;<span class="num" id="8056418">0xc5142380</span><span class="op" id="8056428">,</span>&nbsp;<span class="string" id="8056430">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="8056499">}</span><span class="op" id="8056500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056503">{</span><span class="num" id="8056504">0x26216a4b</span><span class="op" id="8056514">,</span>&nbsp;<span class="num" id="8056516">0x75eb77dd</span><span class="op" id="8056526">,</span>&nbsp;<span class="string" id="8056528">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="8056587">}</span><span class="op" id="8056588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056591">{</span><span class="num" id="8056592">0x1abbe45e</span><span class="op" id="8056602">,</span>&nbsp;<span class="num" id="8056604">0x91ebe9f7</span><span class="op" id="8056614">,</span>&nbsp;<span class="string" id="8056616">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="8056706">}</span><span class="op" id="8056707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056710">{</span><span class="num" id="8056711">0xc89a94f7</span><span class="op" id="8056721">,</span>&nbsp;<span class="num" id="8056723">0xf0b1168e</span><span class="op" id="8056733">,</span>&nbsp;<span class="string" id="8056735">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="8056812">}</span><span class="op" id="8056813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056816">{</span><span class="num" id="8056817">0xab3abe14</span><span class="op" id="8056827">,</span>&nbsp;<span class="num" id="8056829">0x572b74e2</span><span class="op" id="8056839">,</span>&nbsp;<span class="string" id="8056841">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="8056867">}</span><span class="op" id="8056868">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056871">{</span><span class="num" id="8056872">0xbab102b6</span><span class="op" id="8056882">,</span>&nbsp;<span class="num" id="8056884">0x8a58a6d5</span><span class="op" id="8056894">,</span>&nbsp;<span class="string" id="8056896">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="8056947">}</span><span class="op" id="8056948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056951">{</span><span class="num" id="8056952">0x999149d7</span><span class="op" id="8056962">,</span>&nbsp;<span class="num" id="8056964">0x9c426c50</span><span class="op" id="8056974">,</span>&nbsp;<span class="string" id="8056976">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="8057050">}</span><span class="op" id="8057051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057054">{</span><span class="num" id="8057055">0x6d52a33c</span><span class="op" id="8057065">,</span>&nbsp;<span class="num" id="8057067">0x735400a4</span><span class="op" id="8057077">,</span>&nbsp;<span class="string" id="8057079">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="8057127">}</span><span class="op" id="8057128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057131">{</span><span class="num" id="8057132">0x90631e8d</span><span class="op" id="8057142">,</span>&nbsp;<span class="num" id="8057144">0xbec49c95</span><span class="op" id="8057154">,</span>&nbsp;<span class="string" id="8057156">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="8057228">}</span><span class="op" id="8057229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057232">{</span><span class="num" id="8057233">0x78309130</span><span class="op" id="8057243">,</span>&nbsp;<span class="num" id="8057245">0xa95a2079</span><span class="op" id="8057255">,</span>&nbsp;<span class="string" id="8057257">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="8057327">}</span><span class="op" id="8057328">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057331">{</span><span class="num" id="8057332">0x7d0a377f</span><span class="op" id="8057342">,</span>&nbsp;<span class="num" id="8057344">0xde2e65c5</span><span class="op" id="8057354">,</span>&nbsp;<span class="string" id="8057356">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="8057390">}</span><span class="op" id="8057391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057394">{</span><span class="num" id="8057395">0x8c79fd79</span><span class="op" id="8057405">,</span>&nbsp;<span class="num" id="8057407">0x297a88ed</span><span class="op" id="8057417">,</span>&nbsp;<span class="string" id="8057419">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="8057509">}</span><span class="op" id="8057510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057513">{</span><span class="num" id="8057514">0xa20b7167</span><span class="op" id="8057524">,</span>&nbsp;<span class="num" id="8057526">0x66ed1d8b</span><span class="op" id="8057536">,</span>&nbsp;<span class="string" id="8057538">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="8057672">}</span><span class="op" id="8057673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057676">{</span><span class="num" id="8057677">0x8e0bb443</span><span class="op" id="8057687">,</span>&nbsp;<span class="num" id="8057689">0xdcded527</span><span class="op" id="8057699">,</span>&nbsp;<span class="string" id="8057701">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="8057759">}</span><span class="op" id="8057760">,</span><br>
<span class="lineno"></span><span class="op" id="8057762">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8057765">func</span>&nbsp;<span class="ident" id="8057770">TestGolden</span><span class="op" id="8057780">(</span><span class="ident" id="8057781">t</span>&nbsp;<span class="op" id="8057783">*</span><span class="ident" id="8057784">testing</span><span class="op" id="8057791">.</span><span class="ident" id="8057792">T</span><span class="op" id="8057793">)</span>&nbsp;<span class="op" id="8057795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057798">castagnoliTab</span>&nbsp;<span class="op" id="8057812">:=</span>&nbsp;<span class="ident" id="8057815">MakeTable</span><span class="op" id="8057824">(</span><span class="ident" id="8057825">Castagnoli</span><span class="op" id="8057835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8057839">for</span>&nbsp;<span class="ident" id="8057843">_</span><span class="op" id="8057844">,</span>&nbsp;<span class="ident" id="8057846">g</span>&nbsp;<span class="op" id="8057848">:=</span>&nbsp;<span class="keyword" id="8057851">range</span>&nbsp;<span class="ident" id="8057857">golden</span>&nbsp;<span class="op" id="8057864">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057868">ieee</span>&nbsp;<span class="op" id="8057873">:=</span>&nbsp;<span class="ident" id="8057876">NewIEEE</span><span class="op" id="8057883">(</span><span class="op" id="8057884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057888">io</span><span class="op" id="8057890">.</span><span class="ident" id="8057891">WriteString</span><span class="op" id="8057902">(</span><span class="ident" id="8057903">ieee</span><span class="op" id="8057907">,</span>&nbsp;<span class="ident" id="8057909">g</span><span class="op" id="8057910">.</span><span class="ident" id="8057911">in</span><span class="op" id="8057913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057917">s</span>&nbsp;<span class="op" id="8057919">:=</span>&nbsp;<span class="ident" id="8057922">ieee</span><span class="op" id="8057926">.</span><span class="ident" id="8057927">Sum32</span><span class="op" id="8057932">(</span><span class="op" id="8057933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8057937">if</span>&nbsp;<span class="ident" id="8057940">s</span>&nbsp;<span class="op" id="8057942">!=</span>&nbsp;<span class="ident" id="8057945">g</span><span class="op" id="8057946">.</span><span class="ident" id="8057947">ieee</span>&nbsp;<span class="op" id="8057952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057957">t</span><span class="op" id="8057958">.</span><span class="ident" id="8057959">Errorf</span><span class="op" id="8057965">(</span><span class="string" id="8057966">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8057993">,</span>&nbsp;<span class="ident" id="8057995">g</span><span class="op" id="8057996">.</span><span class="ident" id="8057997">in</span><span class="op" id="8057999">,</span>&nbsp;<span class="ident" id="8058001">s</span><span class="op" id="8058002">,</span>&nbsp;<span class="ident" id="8058004">g</span><span class="op" id="8058005">.</span><span class="ident" id="8058006">ieee</span><span class="op" id="8058010">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058019">castagnoli</span>&nbsp;<span class="op" id="8058030">:=</span>&nbsp;<span class="ident" id="8058033">New</span><span class="op" id="8058036">(</span><span class="ident" id="8058037">castagnoliTab</span><span class="op" id="8058050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058054">io</span><span class="op" id="8058056">.</span><span class="ident" id="8058057">WriteString</span><span class="op" id="8058068">(</span><span class="ident" id="8058069">castagnoli</span><span class="op" id="8058079">,</span>&nbsp;<span class="ident" id="8058081">g</span><span class="op" id="8058082">.</span><span class="ident" id="8058083">in</span><span class="op" id="8058085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058089">s</span>&nbsp;<span class="op" id="8058091">=</span>&nbsp;<span class="ident" id="8058093">castagnoli</span><span class="op" id="8058103">.</span><span class="ident" id="8058104">Sum32</span><span class="op" id="8058109">(</span><span class="op" id="8058110">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058114">if</span>&nbsp;<span class="ident" id="8058117">s</span>&nbsp;<span class="op" id="8058119">!=</span>&nbsp;<span class="ident" id="8058122">g</span><span class="op" id="8058123">.</span><span class="ident" id="8058124">castagnoli</span>&nbsp;<span class="op" id="8058135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058140">t</span><span class="op" id="8058141">.</span><span class="ident" id="8058142">Errorf</span><span class="op" id="8058148">(</span><span class="string" id="8058149">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8058182">,</span>&nbsp;<span class="ident" id="8058184">g</span><span class="op" id="8058185">.</span><span class="ident" id="8058186">in</span><span class="op" id="8058188">,</span>&nbsp;<span class="ident" id="8058190">s</span><span class="op" id="8058191">,</span>&nbsp;<span class="ident" id="8058193">g</span><span class="op" id="8058194">.</span><span class="ident" id="8058195">castagnoli</span><span class="op" id="8058205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058214">if</span>&nbsp;<span class="builtinfunc" id="8058217">len</span><span class="op" id="8058220">(</span><span class="ident" id="8058221">g</span><span class="op" id="8058222">.</span><span class="ident" id="8058223">in</span><span class="op" id="8058225">)</span>&nbsp;<span class="op" id="8058227">&gt;</span>&nbsp;<span class="num" id="8058229">0</span>&nbsp;<span class="op" id="8058231">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8058236">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8058293">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8058351">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058362">castagnoli</span>&nbsp;<span class="op" id="8058373">=</span>&nbsp;<span class="ident" id="8058375">New</span><span class="op" id="8058378">(</span><span class="ident" id="8058379">castagnoliTab</span><span class="op" id="8058392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058397">io</span><span class="op" id="8058399">.</span><span class="ident" id="8058400">WriteString</span><span class="op" id="8058411">(</span><span class="ident" id="8058412">castagnoli</span><span class="op" id="8058422">,</span>&nbsp;<span class="ident" id="8058424">g</span><span class="op" id="8058425">.</span><span class="ident" id="8058426">in</span><span class="op" id="8058428">[</span><span class="op" id="8058429">:</span><span class="num" id="8058430">1</span><span class="op" id="8058431">]</span><span class="op" id="8058432">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058437">io</span><span class="op" id="8058439">.</span><span class="ident" id="8058440">WriteString</span><span class="op" id="8058451">(</span><span class="ident" id="8058452">castagnoli</span><span class="op" id="8058462">,</span>&nbsp;<span class="ident" id="8058464">g</span><span class="op" id="8058465">.</span><span class="ident" id="8058466">in</span><span class="op" id="8058468">[</span><span class="num" id="8058469">1</span><span class="op" id="8058470">:</span><span class="op" id="8058471">]</span><span class="op" id="8058472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058477">s</span>&nbsp;<span class="op" id="8058479">=</span>&nbsp;<span class="ident" id="8058481">castagnoli</span><span class="op" id="8058491">.</span><span class="ident" id="8058492">Sum32</span><span class="op" id="8058497">(</span><span class="op" id="8058498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058503">if</span>&nbsp;<span class="ident" id="8058506">s</span>&nbsp;<span class="op" id="8058508">!=</span>&nbsp;<span class="ident" id="8058511">g</span><span class="op" id="8058512">.</span><span class="ident" id="8058513">castagnoli</span>&nbsp;<span class="op" id="8058524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058530">t</span><span class="op" id="8058531">.</span><span class="ident" id="8058532">Errorf</span><span class="op" id="8058538">(</span><span class="string" id="8058539">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8058584">,</span>&nbsp;<span class="ident" id="8058586">g</span><span class="op" id="8058587">.</span><span class="ident" id="8058588">in</span><span class="op" id="8058590">,</span>&nbsp;<span class="ident" id="8058592">s</span><span class="op" id="8058593">,</span>&nbsp;<span class="ident" id="8058595">g</span><span class="op" id="8058596">.</span><span class="ident" id="8058597">castagnoli</span><span class="op" id="8058607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058612">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058619">}</span><br>
<span class="lineno"></span><span class="op" id="8058621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8058624">func</span>&nbsp;<span class="ident" id="8058629">BenchmarkCrc32KB</span><span class="op" id="8058645">(</span><span class="ident" id="8058646">b</span>&nbsp;<span class="op" id="8058648">*</span><span class="ident" id="8058649">testing</span><span class="op" id="8058656">.</span><span class="ident" id="8058657">B</span><span class="op" id="8058658">)</span>&nbsp;<span class="op" id="8058660">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058663">b</span><span class="op" id="8058664">.</span><span class="ident" id="8058665">SetBytes</span><span class="op" id="8058673">(</span><span class="num" id="8058674">1024</span><span class="op" id="8058678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058681">data</span>&nbsp;<span class="op" id="8058686">:=</span>&nbsp;<span class="builtinfunc" id="8058689">make</span><span class="op" id="8058693">(</span><span class="op" id="8058694">[</span><span class="op" id="8058695">]</span><span class="builtintype" id="8058696">byte</span><span class="op" id="8058700">,</span>&nbsp;<span class="num" id="8058702">1024</span><span class="op" id="8058706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058709">for</span>&nbsp;<span class="ident" id="8058713">i</span>&nbsp;<span class="op" id="8058715">:=</span>&nbsp;<span class="keyword" id="8058718">range</span>&nbsp;<span class="ident" id="8058724">data</span>&nbsp;<span class="op" id="8058729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058733">data</span><span class="op" id="8058737">[</span><span class="ident" id="8058738">i</span><span class="op" id="8058739">]</span>&nbsp;<span class="op" id="8058741">=</span>&nbsp;<span class="builtintype" id="8058743">byte</span><span class="op" id="8058747">(</span><span class="ident" id="8058748">i</span><span class="op" id="8058749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058752">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058755">h</span>&nbsp;<span class="op" id="8058757">:=</span>&nbsp;<span class="ident" id="8058760">NewIEEE</span><span class="op" id="8058767">(</span><span class="op" id="8058768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058771">in</span>&nbsp;<span class="op" id="8058774">:=</span>&nbsp;<span class="builtinfunc" id="8058777">make</span><span class="op" id="8058781">(</span><span class="op" id="8058782">[</span><span class="op" id="8058783">]</span><span class="builtintype" id="8058784">byte</span><span class="op" id="8058788">,</span>&nbsp;<span class="num" id="8058790">0</span><span class="op" id="8058791">,</span>&nbsp;<span class="ident" id="8058793">h</span><span class="op" id="8058794">.</span><span class="ident" id="8058795">Size</span><span class="op" id="8058799">(</span><span class="op" id="8058800">)</span><span class="op" id="8058801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058805">b</span><span class="op" id="8058806">.</span><span class="ident" id="8058807">ResetTimer</span><span class="op" id="8058817">(</span><span class="op" id="8058818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058821">for</span>&nbsp;<span class="ident" id="8058825">i</span>&nbsp;<span class="op" id="8058827">:=</span>&nbsp;<span class="num" id="8058830">0</span><span class="op" id="8058831">;</span>&nbsp;<span class="ident" id="8058833">i</span>&nbsp;<span class="op" id="8058835">&lt;</span>&nbsp;<span class="ident" id="8058837">b</span><span class="op" id="8058838">.</span><span class="ident" id="8058839">N</span><span class="op" id="8058840">;</span>&nbsp;<span class="ident" id="8058842">i</span><span class="op" id="8058843">++</span>&nbsp;<span class="op" id="8058846">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058850">h</span><span class="op" id="8058851">.</span><span class="ident" id="8058852">Reset</span><span class="op" id="8058857">(</span><span class="op" id="8058858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058862">h</span><span class="op" id="8058863">.</span><span class="ident" id="8058864">Write</span><span class="op" id="8058869">(</span><span class="ident" id="8058870">data</span><span class="op" id="8058874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058878">h</span><span class="op" id="8058879">.</span><span class="ident" id="8058880">Sum</span><span class="op" id="8058883">(</span><span class="ident" id="8058884">in</span><span class="op" id="8058886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058889">}</span><br>
<span class="lineno"></span><span class="op" id="8058891">}</span>
</div>
</body>
</html>
