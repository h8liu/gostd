<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6240724">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6240779">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6240833">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6240884">package</span>&nbsp;<span class="ident" id="6240892">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6240897">import</span>&nbsp;<span class="op" id="6240904">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6240907">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6240917">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6240929">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6240939">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6240947">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="6240957">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6240960">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6241040">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="6241064">//</span><br>
<span class="lineno"></span><span class="comment" id="6241067">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6241148">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="6241230">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="6241312">//</span><br>
<span class="lineno"></span><span class="keyword" id="6241315">type</span>&nbsp;<span class="ident" id="6241320">methodSet</span>&nbsp;<span class="keyword" id="6241330">map</span><span class="op" id="6241333">[</span><span class="builtintype" id="6241334">string</span><span class="op" id="6241340">]</span><span class="op" id="6241341">*</span><span class="ident" id="6241342">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6241348">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6241409">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="6241474">//</span><br>
<span class="lineno"></span><span class="keyword" id="6241477">func</span>&nbsp;<span class="ident" id="6241482">recvString</span><span class="op" id="6241492">(</span><span class="ident" id="6241493">recv</span>&nbsp;<span class="ident" id="6241498">ast</span><span class="op" id="6241501">.</span><span class="ident" id="6241502">Expr</span><span class="op" id="6241506">)</span>&nbsp;<span class="builtintype" id="6241508">string</span>&nbsp;<span class="op" id="6241515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241518">switch</span>&nbsp;<span class="ident" id="6241525">t</span>&nbsp;<span class="op" id="6241527">:=</span>&nbsp;<span class="ident" id="6241530">recv</span><span class="op" id="6241534">.</span><span class="op" id="6241535">(</span><span class="keyword" id="6241536">type</span><span class="op" id="6241540">)</span>&nbsp;<span class="op" id="6241542">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241545">case</span>&nbsp;<span class="op" id="6241550">*</span><span class="ident" id="6241551">ast</span><span class="op" id="6241554">.</span><span class="ident" id="6241555">Ident</span><span class="op" id="6241560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241564">return</span>&nbsp;<span class="ident" id="6241571">t</span><span class="op" id="6241572">.</span><span class="ident" id="6241573">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241579">case</span>&nbsp;<span class="op" id="6241584">*</span><span class="ident" id="6241585">ast</span><span class="op" id="6241588">.</span><span class="ident" id="6241589">StarExpr</span><span class="op" id="6241597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241601">return</span>&nbsp;<span class="string" id="6241608">&#34;*&#34;</span>&nbsp;<span class="op" id="6241612">+</span>&nbsp;<span class="ident" id="6241614">recvString</span><span class="op" id="6241624">(</span><span class="ident" id="6241625">t</span><span class="op" id="6241626">.</span><span class="ident" id="6241627">X</span><span class="op" id="6241628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6241631">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241634">return</span>&nbsp;<span class="string" id="6241641">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="6241651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6241654">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6241719">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="6241788">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6241838">//</span><br>
<span class="lineno"></span><span class="keyword" id="6241841">func</span>&nbsp;<span class="op" id="6241846">(</span><span class="ident" id="6241847">mset</span>&nbsp;<span class="ident" id="6241852">methodSet</span><span class="op" id="6241861">)</span>&nbsp;<span class="ident" id="6241863">set</span><span class="op" id="6241866">(</span><span class="ident" id="6241867">f</span>&nbsp;<span class="op" id="6241869">*</span><span class="ident" id="6241870">ast</span><span class="op" id="6241873">.</span><span class="ident" id="6241874">FuncDecl</span><span class="op" id="6241882">)</span>&nbsp;<span class="op" id="6241884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6241887">name</span>&nbsp;<span class="op" id="6241892">:=</span>&nbsp;<span class="ident" id="6241895">f</span><span class="op" id="6241896">.</span><span class="ident" id="6241897">Name</span><span class="op" id="6241901">.</span><span class="ident" id="6241902">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6241908">if</span>&nbsp;<span class="ident" id="6241911">g</span>&nbsp;<span class="op" id="6241913">:=</span>&nbsp;<span class="ident" id="6241916">mset</span><span class="op" id="6241920">[</span><span class="ident" id="6241921">name</span><span class="op" id="6241925">]</span><span class="op" id="6241926">;</span>&nbsp;<span class="ident" id="6241928">g</span>&nbsp;<span class="op" id="6241930">!=</span>&nbsp;<span class="ident" id="6241933">nil</span>&nbsp;<span class="op" id="6241937">&amp;&amp;</span>&nbsp;<span class="ident" id="6241940">g</span><span class="op" id="6241941">.</span><span class="ident" id="6241942">Doc</span>&nbsp;<span class="op" id="6241946">!=</span>&nbsp;<span class="string" id="6241949">&#34;&#34;</span>&nbsp;<span class="op" id="6241952">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6241956">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242020">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242080">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242143">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242206">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242241">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6242249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242252">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242310">recv</span>&nbsp;<span class="op" id="6242315">:=</span>&nbsp;<span class="string" id="6242318">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242322">if</span>&nbsp;<span class="ident" id="6242325">f</span><span class="op" id="6242326">.</span><span class="ident" id="6242327">Recv</span>&nbsp;<span class="op" id="6242332">!=</span>&nbsp;<span class="ident" id="6242335">nil</span>&nbsp;<span class="op" id="6242339">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242343">var</span>&nbsp;<span class="ident" id="6242347">typ</span>&nbsp;<span class="ident" id="6242351">ast</span><span class="op" id="6242354">.</span><span class="ident" id="6242355">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242362">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242404">if</span>&nbsp;<span class="ident" id="6242407">list</span>&nbsp;<span class="op" id="6242412">:=</span>&nbsp;<span class="ident" id="6242415">f</span><span class="op" id="6242416">.</span><span class="ident" id="6242417">Recv</span><span class="op" id="6242421">.</span><span class="ident" id="6242422">List</span><span class="op" id="6242426">;</span>&nbsp;<span class="builtinfunc" id="6242428">len</span><span class="op" id="6242431">(</span><span class="ident" id="6242432">list</span><span class="op" id="6242436">)</span>&nbsp;<span class="op" id="6242438">==</span>&nbsp;<span class="num" id="6242441">1</span>&nbsp;<span class="op" id="6242443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242448">typ</span>&nbsp;<span class="op" id="6242452">=</span>&nbsp;<span class="ident" id="6242454">list</span><span class="op" id="6242458">[</span><span class="num" id="6242459">0</span><span class="op" id="6242460">]</span><span class="op" id="6242461">.</span><span class="ident" id="6242462">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6242469">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242473">recv</span>&nbsp;<span class="op" id="6242478">=</span>&nbsp;<span class="ident" id="6242480">recvString</span><span class="op" id="6242490">(</span><span class="ident" id="6242491">typ</span><span class="op" id="6242494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6242497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242500">mset</span><span class="op" id="6242504">[</span><span class="ident" id="6242505">name</span><span class="op" id="6242509">]</span>&nbsp;<span class="op" id="6242511">=</span>&nbsp;<span class="op" id="6242513">&amp;</span><span class="ident" id="6242514">Func</span><span class="op" id="6242518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242522">Doc</span><span class="op" id="6242525">:</span>&nbsp;&nbsp;<span class="ident" id="6242528">f</span><span class="op" id="6242529">.</span><span class="ident" id="6242530">Doc</span><span class="op" id="6242533">.</span><span class="ident" id="6242534">Text</span><span class="op" id="6242538">(</span><span class="op" id="6242539">)</span><span class="op" id="6242540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242544">Name</span><span class="op" id="6242548">:</span>&nbsp;<span class="ident" id="6242550">name</span><span class="op" id="6242554">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242558">Decl</span><span class="op" id="6242562">:</span>&nbsp;<span class="ident" id="6242564">f</span><span class="op" id="6242565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242569">Recv</span><span class="op" id="6242573">:</span>&nbsp;<span class="ident" id="6242575">recv</span><span class="op" id="6242579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242583">Orig</span><span class="op" id="6242587">:</span>&nbsp;<span class="ident" id="6242589">recv</span><span class="op" id="6242593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6242596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242599">f</span><span class="op" id="6242600">.</span><span class="ident" id="6242601">Doc</span>&nbsp;<span class="op" id="6242605">=</span>&nbsp;<span class="ident" id="6242607">nil</span>&nbsp;<span class="comment" id="6242611">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="6242645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6242648">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="6242719">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="6242791">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="6242808">//</span><br>
<span class="lineno"></span><span class="keyword" id="6242811">func</span>&nbsp;<span class="op" id="6242816">(</span><span class="ident" id="6242817">mset</span>&nbsp;<span class="ident" id="6242822">methodSet</span><span class="op" id="6242831">)</span>&nbsp;<span class="ident" id="6242833">add</span><span class="op" id="6242836">(</span><span class="ident" id="6242837">m</span>&nbsp;<span class="op" id="6242839">*</span><span class="ident" id="6242840">Func</span><span class="op" id="6242844">)</span>&nbsp;<span class="op" id="6242846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242849">old</span>&nbsp;<span class="op" id="6242853">:=</span>&nbsp;<span class="ident" id="6242856">mset</span><span class="op" id="6242860">[</span><span class="ident" id="6242861">m</span><span class="op" id="6242862">.</span><span class="ident" id="6242863">Name</span><span class="op" id="6242867">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242870">if</span>&nbsp;<span class="ident" id="6242873">old</span>&nbsp;<span class="op" id="6242877">==</span>&nbsp;<span class="ident" id="6242880">nil</span>&nbsp;<span class="op" id="6242884">||</span>&nbsp;<span class="ident" id="6242887">m</span><span class="op" id="6242888">.</span><span class="ident" id="6242889">Level</span>&nbsp;<span class="op" id="6242895">&lt;</span>&nbsp;<span class="ident" id="6242897">old</span><span class="op" id="6242900">.</span><span class="ident" id="6242901">Level</span>&nbsp;<span class="op" id="6242907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6242911">mset</span><span class="op" id="6242915">[</span><span class="ident" id="6242916">m</span><span class="op" id="6242917">.</span><span class="ident" id="6242918">Name</span><span class="op" id="6242922">]</span>&nbsp;<span class="op" id="6242924">=</span>&nbsp;<span class="ident" id="6242926">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242930">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6242938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6242941">if</span>&nbsp;<span class="ident" id="6242944">old</span>&nbsp;<span class="op" id="6242948">!=</span>&nbsp;<span class="ident" id="6242951">nil</span>&nbsp;<span class="op" id="6242955">&amp;&amp;</span>&nbsp;<span class="ident" id="6242958">m</span><span class="op" id="6242959">.</span><span class="ident" id="6242960">Level</span>&nbsp;<span class="op" id="6242966">==</span>&nbsp;<span class="ident" id="6242969">old</span><span class="op" id="6242972">.</span><span class="ident" id="6242973">Level</span>&nbsp;<span class="op" id="6242979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6242983">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6243036">mset</span><span class="op" id="6243040">[</span><span class="ident" id="6243041">m</span><span class="op" id="6243042">.</span><span class="ident" id="6243043">Name</span><span class="op" id="6243047">]</span>&nbsp;<span class="op" id="6243049">=</span>&nbsp;<span class="op" id="6243051">&amp;</span><span class="ident" id="6243052">Func</span><span class="op" id="6243056">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6243061">Name</span><span class="op" id="6243065">:</span>&nbsp;&nbsp;<span class="ident" id="6243068">m</span><span class="op" id="6243069">.</span><span class="ident" id="6243070">Name</span><span class="op" id="6243074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6243079">Level</span><span class="op" id="6243084">:</span>&nbsp;<span class="ident" id="6243086">m</span><span class="op" id="6243087">.</span><span class="ident" id="6243088">Level</span><span class="op" id="6243093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6243097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6243100">}</span><br>
<span class="lineno"></span><span class="op" id="6243102">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="6243105">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6243185">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6243201">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="6243264">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="6243308">//</span><br>
<span class="lineno"></span><span class="keyword" id="6243311">func</span>&nbsp;<span class="ident" id="6243316">baseTypeName</span><span class="op" id="6243328">(</span><span class="ident" id="6243329">x</span>&nbsp;<span class="ident" id="6243331">ast</span><span class="op" id="6243334">.</span><span class="ident" id="6243335">Expr</span><span class="op" id="6243339">)</span>&nbsp;<span class="op" id="6243341">(</span><span class="ident" id="6243342">name</span>&nbsp;<span class="builtintype" id="6243347">string</span><span class="op" id="6243353">,</span>&nbsp;<span class="ident" id="6243355">imported</span>&nbsp;<span class="builtintype" id="6243364">bool</span><span class="op" id="6243368">)</span>&nbsp;<span class="op" id="6243370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243373">switch</span>&nbsp;<span class="ident" id="6243380">t</span>&nbsp;<span class="op" id="6243382">:=</span>&nbsp;<span class="ident" id="6243385">x</span><span class="op" id="6243386">.</span><span class="op" id="6243387">(</span><span class="keyword" id="6243388">type</span><span class="op" id="6243392">)</span>&nbsp;<span class="op" id="6243394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243397">case</span>&nbsp;<span class="op" id="6243402">*</span><span class="ident" id="6243403">ast</span><span class="op" id="6243406">.</span><span class="ident" id="6243407">Ident</span><span class="op" id="6243412">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243416">return</span>&nbsp;<span class="ident" id="6243423">t</span><span class="op" id="6243424">.</span><span class="ident" id="6243425">Name</span><span class="op" id="6243429">,</span>&nbsp;<span class="ident" id="6243431">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243438">case</span>&nbsp;<span class="op" id="6243443">*</span><span class="ident" id="6243444">ast</span><span class="op" id="6243447">.</span><span class="ident" id="6243448">SelectorExpr</span><span class="op" id="6243460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243464">if</span>&nbsp;<span class="ident" id="6243467">_</span><span class="op" id="6243468">,</span>&nbsp;<span class="ident" id="6243470">ok</span>&nbsp;<span class="op" id="6243473">:=</span>&nbsp;<span class="ident" id="6243476">t</span><span class="op" id="6243477">.</span><span class="ident" id="6243478">X</span><span class="op" id="6243479">.</span><span class="op" id="6243480">(</span><span class="op" id="6243481">*</span><span class="ident" id="6243482">ast</span><span class="op" id="6243485">.</span><span class="ident" id="6243486">Ident</span><span class="op" id="6243491">)</span><span class="op" id="6243492">;</span>&nbsp;<span class="ident" id="6243494">ok</span>&nbsp;<span class="op" id="6243497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6243502">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6243548">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243578">return</span>&nbsp;<span class="ident" id="6243585">t</span><span class="op" id="6243586">.</span><span class="ident" id="6243587">Sel</span><span class="op" id="6243590">.</span><span class="ident" id="6243591">Name</span><span class="op" id="6243595">,</span>&nbsp;<span class="ident" id="6243597">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6243604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243607">case</span>&nbsp;<span class="op" id="6243612">*</span><span class="ident" id="6243613">ast</span><span class="op" id="6243616">.</span><span class="ident" id="6243617">StarExpr</span><span class="op" id="6243625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243629">return</span>&nbsp;<span class="ident" id="6243636">baseTypeName</span><span class="op" id="6243648">(</span><span class="ident" id="6243649">t</span><span class="op" id="6243650">.</span><span class="ident" id="6243651">X</span><span class="op" id="6243652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6243655">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6243658">return</span><br>
<span class="lineno"></span><span class="op" id="6243665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6243668">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="6243721">type</span>&nbsp;<span class="ident" id="6243726">embeddedSet</span>&nbsp;<span class="keyword" id="6243738">map</span><span class="op" id="6243741">[</span><span class="op" id="6243742">*</span><span class="ident" id="6243743">namedType</span><span class="op" id="6243752">]</span><span class="builtintype" id="6243753">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="6243759">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="6243833">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="6243905">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="6243927">//</span><br>
<span class="lineno">120</span><span class="keyword" id="6243930">type</span>&nbsp;<span class="ident" id="6243935">namedType</span>&nbsp;<span class="keyword" id="6243945">struct</span>&nbsp;<span class="op" id="6243952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6243955">doc</span>&nbsp;&nbsp;<span class="builtintype" id="6243960">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6243973">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6243998">name</span>&nbsp;<span class="builtintype" id="6244003">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6244016">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244030">decl</span>&nbsp;<span class="op" id="6244035">*</span><span class="ident" id="6244036">ast</span><span class="op" id="6244039">.</span><span class="ident" id="6244040">GenDecl</span>&nbsp;<span class="comment" id="6244048">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244093">isEmbedded</span>&nbsp;<span class="builtintype" id="6244104">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6244116">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244150">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6244161">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6244173">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244207">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6244218">embeddedSet</span>&nbsp;<span class="comment" id="6244230">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6244274">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244302">values</span>&nbsp;&nbsp;<span class="op" id="6244310">[</span><span class="op" id="6244311">]</span><span class="op" id="6244312">*</span><span class="ident" id="6244313">Value</span>&nbsp;<span class="comment" id="6244319">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244339">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6244347">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244358">methods</span>&nbsp;<span class="ident" id="6244366">methodSet</span><br>
<span class="lineno"></span><span class="op" id="6244376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="6244379">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6244459">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6244474">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="6244532">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="6244593">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="6244650">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="6244710">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6244771">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="6244812">//</span><br>
<span class="lineno">145</span><span class="keyword" id="6244815">type</span>&nbsp;<span class="ident" id="6244820">reader</span>&nbsp;<span class="keyword" id="6244827">struct</span>&nbsp;<span class="op" id="6244834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244837">mode</span>&nbsp;<span class="ident" id="6244842">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6244849">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244872">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6244882">string</span>&nbsp;<span class="comment" id="6244889">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244923">filenames</span>&nbsp;<span class="op" id="6244933">[</span><span class="op" id="6244934">]</span><span class="builtintype" id="6244935">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244943">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6244953">map</span><span class="op" id="6244956">[</span><span class="builtintype" id="6244957">string</span><span class="op" id="6244963">]</span><span class="op" id="6244964">[</span><span class="op" id="6244965">]</span><span class="op" id="6244966">*</span><span class="ident" id="6244967">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6244974">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6244991">imports</span>&nbsp;<span class="keyword" id="6244999">map</span><span class="op" id="6245002">[</span><span class="builtintype" id="6245003">string</span><span class="op" id="6245009">]</span><span class="builtintype" id="6245010">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245015">values</span>&nbsp;&nbsp;<span class="op" id="6245023">[</span><span class="op" id="6245024">]</span><span class="op" id="6245025">*</span><span class="ident" id="6245026">Value</span>&nbsp;<span class="comment" id="6245032">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245052">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6245060">map</span><span class="op" id="6245063">[</span><span class="builtintype" id="6245064">string</span><span class="op" id="6245070">]</span><span class="op" id="6245071">*</span><span class="ident" id="6245072">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245083">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6245091">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6245103">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245157">errorDecl</span>&nbsp;<span class="builtintype" id="6245167">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6245188">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245234">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6245244">[</span><span class="op" id="6245245">]</span><span class="op" id="6245246">*</span><span class="ident" id="6245247">ast</span><span class="op" id="6245250">.</span><span class="ident" id="6245251">InterfaceType</span>&nbsp;<span class="comment" id="6245265">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="6245322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6245325">func</span>&nbsp;<span class="op" id="6245330">(</span><span class="ident" id="6245331">r</span>&nbsp;<span class="op" id="6245333">*</span><span class="ident" id="6245334">reader</span><span class="op" id="6245340">)</span>&nbsp;<span class="ident" id="6245342">isVisible</span><span class="op" id="6245351">(</span><span class="ident" id="6245352">name</span>&nbsp;<span class="builtintype" id="6245357">string</span><span class="op" id="6245363">)</span>&nbsp;<span class="builtintype" id="6245365">bool</span>&nbsp;<span class="op" id="6245370">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6245373">return</span>&nbsp;<span class="ident" id="6245380">r</span><span class="op" id="6245381">.</span><span class="ident" id="6245382">mode</span><span class="op" id="6245386">&amp;</span><span class="ident" id="6245387">AllDecls</span>&nbsp;<span class="op" id="6245396">!=</span>&nbsp;<span class="num" id="6245399">0</span>&nbsp;<span class="op" id="6245401">||</span>&nbsp;<span class="ident" id="6245404">ast</span><span class="op" id="6245407">.</span><span class="ident" id="6245408">IsExported</span><span class="op" id="6245418">(</span><span class="ident" id="6245419">name</span><span class="op" id="6245423">)</span><br>
<span class="lineno"></span><span class="op" id="6245425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6245428">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="6245485">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="6245541">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="6245599">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="6245628">//</span><br>
<span class="lineno"></span><span class="keyword" id="6245631">func</span>&nbsp;<span class="op" id="6245636">(</span><span class="ident" id="6245637">r</span>&nbsp;<span class="op" id="6245639">*</span><span class="ident" id="6245640">reader</span><span class="op" id="6245646">)</span>&nbsp;<span class="ident" id="6245648">lookupType</span><span class="op" id="6245658">(</span><span class="ident" id="6245659">name</span>&nbsp;<span class="builtintype" id="6245664">string</span><span class="op" id="6245670">)</span>&nbsp;<span class="op" id="6245672">*</span><span class="ident" id="6245673">namedType</span>&nbsp;<span class="op" id="6245683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6245686">if</span>&nbsp;<span class="ident" id="6245689">name</span>&nbsp;<span class="op" id="6245694">==</span>&nbsp;<span class="string" id="6245697">&#34;&#34;</span>&nbsp;<span class="op" id="6245700">||</span>&nbsp;<span class="ident" id="6245703">name</span>&nbsp;<span class="op" id="6245708">==</span>&nbsp;<span class="string" id="6245711">&#34;_&#34;</span>&nbsp;<span class="op" id="6245715">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6245719">return</span>&nbsp;<span class="ident" id="6245726">nil</span>&nbsp;<span class="comment" id="6245730">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6245767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6245770">if</span>&nbsp;<span class="ident" id="6245773">typ</span><span class="op" id="6245776">,</span>&nbsp;<span class="ident" id="6245778">found</span>&nbsp;<span class="op" id="6245784">:=</span>&nbsp;<span class="ident" id="6245787">r</span><span class="op" id="6245788">.</span><span class="ident" id="6245789">types</span><span class="op" id="6245794">[</span><span class="ident" id="6245795">name</span><span class="op" id="6245799">]</span><span class="op" id="6245800">;</span>&nbsp;<span class="ident" id="6245802">found</span>&nbsp;<span class="op" id="6245808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6245812">return</span>&nbsp;<span class="ident" id="6245819">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6245824">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6245827">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245876">typ</span>&nbsp;<span class="op" id="6245880">:=</span>&nbsp;<span class="op" id="6245883">&amp;</span><span class="ident" id="6245884">namedType</span><span class="op" id="6245893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245897">name</span><span class="op" id="6245901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6245907">name</span><span class="op" id="6245911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245915">embedded</span><span class="op" id="6245923">:</span>&nbsp;<span class="builtinfunc" id="6245925">make</span><span class="op" id="6245929">(</span><span class="ident" id="6245930">embeddedSet</span><span class="op" id="6245941">)</span><span class="op" id="6245942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245946">funcs</span><span class="op" id="6245951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6245956">make</span><span class="op" id="6245960">(</span><span class="ident" id="6245961">methodSet</span><span class="op" id="6245970">)</span><span class="op" id="6245971">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6245975">methods</span><span class="op" id="6245982">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="6245985">make</span><span class="op" id="6245989">(</span><span class="ident" id="6245990">methodSet</span><span class="op" id="6245999">)</span><span class="op" id="6246000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6246003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246006">r</span><span class="op" id="6246007">.</span><span class="ident" id="6246008">types</span><span class="op" id="6246013">[</span><span class="ident" id="6246014">name</span><span class="op" id="6246018">]</span>&nbsp;<span class="op" id="6246020">=</span>&nbsp;<span class="ident" id="6246022">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246027">return</span>&nbsp;<span class="ident" id="6246034">typ</span><br>
<span class="lineno"></span><span class="op" id="6246038">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6246041">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6246103">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="6246167">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6246231">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="6246271">//</span><br>
<span class="lineno"></span><span class="keyword" id="6246274">func</span>&nbsp;<span class="op" id="6246279">(</span><span class="ident" id="6246280">r</span>&nbsp;<span class="op" id="6246282">*</span><span class="ident" id="6246283">reader</span><span class="op" id="6246289">)</span>&nbsp;<span class="ident" id="6246291">recordAnonymousField</span><span class="op" id="6246311">(</span><span class="ident" id="6246312">parent</span>&nbsp;<span class="op" id="6246319">*</span><span class="ident" id="6246320">namedType</span><span class="op" id="6246329">,</span>&nbsp;<span class="ident" id="6246331">fieldType</span>&nbsp;<span class="ident" id="6246341">ast</span><span class="op" id="6246344">.</span><span class="ident" id="6246345">Expr</span><span class="op" id="6246349">)</span>&nbsp;<span class="op" id="6246351">(</span><span class="ident" id="6246352">fname</span>&nbsp;<span class="builtintype" id="6246358">string</span><span class="op" id="6246364">)</span>&nbsp;<span class="op" id="6246366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246369">fname</span><span class="op" id="6246374">,</span>&nbsp;<span class="ident" id="6246376">imp</span>&nbsp;<span class="op" id="6246380">:=</span>&nbsp;<span class="ident" id="6246383">baseTypeName</span><span class="op" id="6246395">(</span><span class="ident" id="6246396">fieldType</span><span class="op" id="6246405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246408">if</span>&nbsp;<span class="ident" id="6246411">parent</span>&nbsp;<span class="op" id="6246418">==</span>&nbsp;<span class="ident" id="6246421">nil</span>&nbsp;<span class="op" id="6246425">||</span>&nbsp;<span class="ident" id="6246428">imp</span>&nbsp;<span class="op" id="6246432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246436">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6246444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246447">if</span>&nbsp;<span class="ident" id="6246450">ftype</span>&nbsp;<span class="op" id="6246456">:=</span>&nbsp;<span class="ident" id="6246459">r</span><span class="op" id="6246460">.</span><span class="ident" id="6246461">lookupType</span><span class="op" id="6246471">(</span><span class="ident" id="6246472">fname</span><span class="op" id="6246477">)</span><span class="op" id="6246478">;</span>&nbsp;<span class="ident" id="6246480">ftype</span>&nbsp;<span class="op" id="6246486">!=</span>&nbsp;<span class="ident" id="6246489">nil</span>&nbsp;<span class="op" id="6246493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246497">ftype</span><span class="op" id="6246502">.</span><span class="ident" id="6246503">isEmbedded</span>&nbsp;<span class="op" id="6246514">=</span>&nbsp;<span class="ident" id="6246516">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246523">_</span><span class="op" id="6246524">,</span>&nbsp;<span class="ident" id="6246526">ptr</span>&nbsp;<span class="op" id="6246530">:=</span>&nbsp;<span class="ident" id="6246533">fieldType</span><span class="op" id="6246542">.</span><span class="op" id="6246543">(</span><span class="op" id="6246544">*</span><span class="ident" id="6246545">ast</span><span class="op" id="6246548">.</span><span class="ident" id="6246549">StarExpr</span><span class="op" id="6246557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246561">parent</span><span class="op" id="6246567">.</span><span class="ident" id="6246568">embedded</span><span class="op" id="6246576">[</span><span class="ident" id="6246577">ftype</span><span class="op" id="6246582">]</span>&nbsp;<span class="op" id="6246584">=</span>&nbsp;<span class="ident" id="6246586">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6246591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246594">return</span><br>
<span class="lineno"></span><span class="op" id="6246601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6246604">func</span>&nbsp;<span class="op" id="6246609">(</span><span class="ident" id="6246610">r</span>&nbsp;<span class="op" id="6246612">*</span><span class="ident" id="6246613">reader</span><span class="op" id="6246619">)</span>&nbsp;<span class="ident" id="6246621">readDoc</span><span class="op" id="6246628">(</span><span class="ident" id="6246629">comment</span>&nbsp;<span class="op" id="6246637">*</span><span class="ident" id="6246638">ast</span><span class="op" id="6246641">.</span><span class="ident" id="6246642">CommentGroup</span><span class="op" id="6246654">)</span>&nbsp;<span class="op" id="6246656">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6246659">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6246718">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246774">text</span>&nbsp;<span class="op" id="6246779">:=</span>&nbsp;<span class="ident" id="6246782">comment</span><span class="op" id="6246789">.</span><span class="ident" id="6246790">Text</span><span class="op" id="6246794">(</span><span class="op" id="6246795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246798">if</span>&nbsp;<span class="ident" id="6246801">r</span><span class="op" id="6246802">.</span><span class="ident" id="6246803">doc</span>&nbsp;<span class="op" id="6246807">==</span>&nbsp;<span class="string" id="6246810">&#34;&#34;</span>&nbsp;<span class="op" id="6246813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246817">r</span><span class="op" id="6246818">.</span><span class="ident" id="6246819">doc</span>&nbsp;<span class="op" id="6246823">=</span>&nbsp;<span class="ident" id="6246825">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6246832">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6246840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246843">r</span><span class="op" id="6246844">.</span><span class="ident" id="6246845">doc</span>&nbsp;<span class="op" id="6246849">+=</span>&nbsp;<span class="string" id="6246852">&#34;\n&#34;</span>&nbsp;<span class="op" id="6246857">+</span>&nbsp;<span class="ident" id="6246859">text</span><br>
<span class="lineno"></span><span class="op" id="6246864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6246867">func</span>&nbsp;<span class="op" id="6246872">(</span><span class="ident" id="6246873">r</span>&nbsp;<span class="op" id="6246875">*</span><span class="ident" id="6246876">reader</span><span class="op" id="6246882">)</span>&nbsp;<span class="ident" id="6246884">remember</span><span class="op" id="6246892">(</span><span class="ident" id="6246893">typ</span>&nbsp;<span class="op" id="6246897">*</span><span class="ident" id="6246898">ast</span><span class="op" id="6246901">.</span><span class="ident" id="6246902">InterfaceType</span><span class="op" id="6246915">)</span>&nbsp;<span class="op" id="6246917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246920">r</span><span class="op" id="6246921">.</span><span class="ident" id="6246922">fixlist</span>&nbsp;<span class="op" id="6246930">=</span>&nbsp;<span class="builtinfunc" id="6246932">append</span><span class="op" id="6246938">(</span><span class="ident" id="6246939">r</span><span class="op" id="6246940">.</span><span class="ident" id="6246941">fixlist</span><span class="op" id="6246948">,</span>&nbsp;<span class="ident" id="6246950">typ</span><span class="op" id="6246953">)</span><br>
<span class="lineno"></span><span class="op" id="6246955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6246958">func</span>&nbsp;<span class="ident" id="6246963">specNames</span><span class="op" id="6246972">(</span><span class="ident" id="6246973">specs</span>&nbsp;<span class="op" id="6246979">[</span><span class="op" id="6246980">]</span><span class="ident" id="6246981">ast</span><span class="op" id="6246984">.</span><span class="ident" id="6246985">Spec</span><span class="op" id="6246989">)</span>&nbsp;<span class="op" id="6246991">[</span><span class="op" id="6246992">]</span><span class="builtintype" id="6246993">string</span>&nbsp;<span class="op" id="6247000">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247003">names</span>&nbsp;<span class="op" id="6247009">:=</span>&nbsp;<span class="builtinfunc" id="6247012">make</span><span class="op" id="6247016">(</span><span class="op" id="6247017">[</span><span class="op" id="6247018">]</span><span class="builtintype" id="6247019">string</span><span class="op" id="6247025">,</span>&nbsp;<span class="num" id="6247027">0</span><span class="op" id="6247028">,</span>&nbsp;<span class="builtinfunc" id="6247030">len</span><span class="op" id="6247033">(</span><span class="ident" id="6247034">specs</span><span class="op" id="6247039">)</span><span class="op" id="6247040">)</span>&nbsp;<span class="comment" id="6247042">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247066">for</span>&nbsp;<span class="ident" id="6247070">_</span><span class="op" id="6247071">,</span>&nbsp;<span class="ident" id="6247073">s</span>&nbsp;<span class="op" id="6247075">:=</span>&nbsp;<span class="keyword" id="6247078">range</span>&nbsp;<span class="ident" id="6247084">specs</span>&nbsp;<span class="op" id="6247090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247094">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247149">for</span>&nbsp;<span class="ident" id="6247153">_</span><span class="op" id="6247154">,</span>&nbsp;<span class="ident" id="6247156">ident</span>&nbsp;<span class="op" id="6247162">:=</span>&nbsp;<span class="keyword" id="6247165">range</span>&nbsp;<span class="ident" id="6247171">s</span><span class="op" id="6247172">.</span><span class="op" id="6247173">(</span><span class="op" id="6247174">*</span><span class="ident" id="6247175">ast</span><span class="op" id="6247178">.</span><span class="ident" id="6247179">ValueSpec</span><span class="op" id="6247188">)</span><span class="op" id="6247189">.</span><span class="ident" id="6247190">Names</span>&nbsp;<span class="op" id="6247196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247201">names</span>&nbsp;<span class="op" id="6247207">=</span>&nbsp;<span class="builtinfunc" id="6247209">append</span><span class="op" id="6247215">(</span><span class="ident" id="6247216">names</span><span class="op" id="6247221">,</span>&nbsp;<span class="ident" id="6247223">ident</span><span class="op" id="6247228">.</span><span class="ident" id="6247229">Name</span><span class="op" id="6247233">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6247237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6247240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247243">return</span>&nbsp;<span class="ident" id="6247250">names</span><br>
<span class="lineno"></span><span class="op" id="6247256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="6247259">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6247310">//</span><br>
<span class="lineno"></span><span class="keyword" id="6247313">func</span>&nbsp;<span class="op" id="6247318">(</span><span class="ident" id="6247319">r</span>&nbsp;<span class="op" id="6247321">*</span><span class="ident" id="6247322">reader</span><span class="op" id="6247328">)</span>&nbsp;<span class="ident" id="6247330">readValue</span><span class="op" id="6247339">(</span><span class="ident" id="6247340">decl</span>&nbsp;<span class="op" id="6247345">*</span><span class="ident" id="6247346">ast</span><span class="op" id="6247349">.</span><span class="ident" id="6247350">GenDecl</span><span class="op" id="6247357">)</span>&nbsp;<span class="op" id="6247359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247362">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247417">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247487">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247557">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247627">domName</span>&nbsp;<span class="op" id="6247635">:=</span>&nbsp;<span class="string" id="6247638">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247642">domFreq</span>&nbsp;<span class="op" id="6247650">:=</span>&nbsp;<span class="num" id="6247653">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247656">prev</span>&nbsp;<span class="op" id="6247661">:=</span>&nbsp;<span class="string" id="6247664">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247668">n</span>&nbsp;<span class="op" id="6247670">:=</span>&nbsp;<span class="num" id="6247673">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247676">for</span>&nbsp;<span class="ident" id="6247680">_</span><span class="op" id="6247681">,</span>&nbsp;<span class="ident" id="6247683">spec</span>&nbsp;<span class="op" id="6247688">:=</span>&nbsp;<span class="keyword" id="6247691">range</span>&nbsp;<span class="ident" id="6247697">decl</span><span class="op" id="6247701">.</span><span class="ident" id="6247702">Specs</span>&nbsp;<span class="op" id="6247708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247712">s</span><span class="op" id="6247713">,</span>&nbsp;<span class="ident" id="6247715">ok</span>&nbsp;<span class="op" id="6247718">:=</span>&nbsp;<span class="ident" id="6247721">spec</span><span class="op" id="6247725">.</span><span class="op" id="6247726">(</span><span class="op" id="6247727">*</span><span class="ident" id="6247728">ast</span><span class="op" id="6247731">.</span><span class="ident" id="6247732">ValueSpec</span><span class="op" id="6247741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247745">if</span>&nbsp;<span class="op" id="6247748">!</span><span class="ident" id="6247749">ok</span>&nbsp;<span class="op" id="6247752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247757">continue</span>&nbsp;<span class="comment" id="6247766">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6247810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247814">name</span>&nbsp;<span class="op" id="6247819">:=</span>&nbsp;<span class="string" id="6247822">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247827">switch</span>&nbsp;<span class="op" id="6247834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247838">case</span>&nbsp;<span class="ident" id="6247843">s</span><span class="op" id="6247844">.</span><span class="ident" id="6247845">Type</span>&nbsp;<span class="op" id="6247850">!=</span>&nbsp;<span class="ident" id="6247853">nil</span><span class="op" id="6247856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6247861">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247905">if</span>&nbsp;<span class="ident" id="6247908">n</span><span class="op" id="6247909">,</span>&nbsp;<span class="ident" id="6247911">imp</span>&nbsp;<span class="op" id="6247915">:=</span>&nbsp;<span class="ident" id="6247918">baseTypeName</span><span class="op" id="6247930">(</span><span class="ident" id="6247931">s</span><span class="op" id="6247932">.</span><span class="ident" id="6247933">Type</span><span class="op" id="6247937">)</span><span class="op" id="6247938">;</span>&nbsp;<span class="op" id="6247940">!</span><span class="ident" id="6247941">imp</span>&nbsp;<span class="op" id="6247945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6247951">name</span>&nbsp;<span class="op" id="6247956">=</span>&nbsp;<span class="ident" id="6247958">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6247963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6247967">case</span>&nbsp;<span class="ident" id="6247972">decl</span><span class="op" id="6247976">.</span><span class="ident" id="6247977">Tok</span>&nbsp;<span class="op" id="6247981">==</span>&nbsp;<span class="ident" id="6247984">token</span><span class="op" id="6247989">.</span><span class="ident" id="6247990">CONST</span><span class="op" id="6247995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248000">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248061">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248121">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248179">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248240">name</span>&nbsp;<span class="op" id="6248245">=</span>&nbsp;<span class="ident" id="6248247">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248254">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248258">if</span>&nbsp;<span class="ident" id="6248261">name</span>&nbsp;<span class="op" id="6248266">!=</span>&nbsp;<span class="string" id="6248269">&#34;&#34;</span>&nbsp;<span class="op" id="6248272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248277">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248306">if</span>&nbsp;<span class="ident" id="6248309">domName</span>&nbsp;<span class="op" id="6248317">!=</span>&nbsp;<span class="string" id="6248320">&#34;&#34;</span>&nbsp;<span class="op" id="6248323">&amp;&amp;</span>&nbsp;<span class="ident" id="6248326">domName</span>&nbsp;<span class="op" id="6248334">!=</span>&nbsp;<span class="ident" id="6248337">name</span>&nbsp;<span class="op" id="6248342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248348">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248398">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248419">domName</span>&nbsp;<span class="op" id="6248427">=</span>&nbsp;<span class="string" id="6248429">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248436">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248450">domName</span>&nbsp;<span class="op" id="6248458">=</span>&nbsp;<span class="ident" id="6248460">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248468">domFreq</span><span class="op" id="6248475">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248484">prev</span>&nbsp;<span class="op" id="6248489">=</span>&nbsp;<span class="ident" id="6248491">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248498">n</span><span class="op" id="6248499">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248507">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248549">if</span>&nbsp;<span class="ident" id="6248552">n</span>&nbsp;<span class="op" id="6248554">==</span>&nbsp;<span class="num" id="6248557">0</span>&nbsp;<span class="op" id="6248559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248563">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248575">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248649">values</span>&nbsp;<span class="op" id="6248656">:=</span>&nbsp;<span class="op" id="6248659">&amp;</span><span class="ident" id="6248660">r</span><span class="op" id="6248661">.</span><span class="ident" id="6248662">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248670">const</span>&nbsp;<span class="ident" id="6248676">threshold</span>&nbsp;<span class="op" id="6248686">=</span>&nbsp;<span class="num" id="6248688">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248694">if</span>&nbsp;<span class="ident" id="6248697">domName</span>&nbsp;<span class="op" id="6248705">!=</span>&nbsp;<span class="string" id="6248708">&#34;&#34;</span>&nbsp;<span class="op" id="6248711">&amp;&amp;</span>&nbsp;<span class="ident" id="6248714">r</span><span class="op" id="6248715">.</span><span class="ident" id="6248716">isVisible</span><span class="op" id="6248725">(</span><span class="ident" id="6248726">domName</span><span class="op" id="6248733">)</span>&nbsp;<span class="op" id="6248735">&amp;&amp;</span>&nbsp;<span class="ident" id="6248738">domFreq</span>&nbsp;<span class="op" id="6248746">&gt;=</span>&nbsp;<span class="builtintype" id="6248749">int</span><span class="op" id="6248752">(</span><span class="builtintype" id="6248753">float64</span><span class="op" id="6248760">(</span><span class="builtinfunc" id="6248761">len</span><span class="op" id="6248764">(</span><span class="ident" id="6248765">decl</span><span class="op" id="6248769">.</span><span class="ident" id="6248770">Specs</span><span class="op" id="6248775">)</span><span class="op" id="6248776">)</span><span class="op" id="6248777">*</span><span class="ident" id="6248778">threshold</span><span class="op" id="6248787">)</span>&nbsp;<span class="op" id="6248789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6248793">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6248838">if</span>&nbsp;<span class="ident" id="6248841">typ</span>&nbsp;<span class="op" id="6248845">:=</span>&nbsp;<span class="ident" id="6248848">r</span><span class="op" id="6248849">.</span><span class="ident" id="6248850">lookupType</span><span class="op" id="6248860">(</span><span class="ident" id="6248861">domName</span><span class="op" id="6248868">)</span><span class="op" id="6248869">;</span>&nbsp;<span class="ident" id="6248871">typ</span>&nbsp;<span class="op" id="6248875">!=</span>&nbsp;<span class="ident" id="6248878">nil</span>&nbsp;<span class="op" id="6248882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248887">values</span>&nbsp;<span class="op" id="6248894">=</span>&nbsp;<span class="op" id="6248896">&amp;</span><span class="ident" id="6248897">typ</span><span class="op" id="6248900">.</span><span class="ident" id="6248901">values</span>&nbsp;<span class="comment" id="6248908">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6248945">*</span><span class="ident" id="6248946">values</span>&nbsp;<span class="op" id="6248953">=</span>&nbsp;<span class="builtinfunc" id="6248955">append</span><span class="op" id="6248961">(</span><span class="op" id="6248962">*</span><span class="ident" id="6248963">values</span><span class="op" id="6248969">,</span>&nbsp;<span class="op" id="6248971">&amp;</span><span class="ident" id="6248972">Value</span><span class="op" id="6248977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6248981">Doc</span><span class="op" id="6248984">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6248988">decl</span><span class="op" id="6248992">.</span><span class="ident" id="6248993">Doc</span><span class="op" id="6248996">.</span><span class="ident" id="6248997">Text</span><span class="op" id="6249001">(</span><span class="op" id="6249002">)</span><span class="op" id="6249003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249007">Names</span><span class="op" id="6249012">:</span>&nbsp;<span class="ident" id="6249014">specNames</span><span class="op" id="6249023">(</span><span class="ident" id="6249024">decl</span><span class="op" id="6249028">.</span><span class="ident" id="6249029">Specs</span><span class="op" id="6249034">)</span><span class="op" id="6249035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249039">Decl</span><span class="op" id="6249043">:</span>&nbsp;&nbsp;<span class="ident" id="6249046">decl</span><span class="op" id="6249050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249054">order</span><span class="op" id="6249059">:</span>&nbsp;<span class="builtinfunc" id="6249061">len</span><span class="op" id="6249064">(</span><span class="op" id="6249065">*</span><span class="ident" id="6249066">values</span><span class="op" id="6249072">)</span><span class="op" id="6249073">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6249076">}</span><span class="op" id="6249077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249080">decl</span><span class="op" id="6249084">.</span><span class="ident" id="6249085">Doc</span>&nbsp;<span class="op" id="6249089">=</span>&nbsp;<span class="ident" id="6249091">nil</span>&nbsp;<span class="comment" id="6249095">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6249129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6249132">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="6249195">//</span><br>
<span class="lineno"></span><span class="keyword" id="6249198">func</span>&nbsp;<span class="ident" id="6249203">fields</span><span class="op" id="6249209">(</span><span class="ident" id="6249210">typ</span>&nbsp;<span class="ident" id="6249214">ast</span><span class="op" id="6249217">.</span><span class="ident" id="6249218">Expr</span><span class="op" id="6249222">)</span>&nbsp;<span class="op" id="6249224">(</span><span class="ident" id="6249225">list</span>&nbsp;<span class="op" id="6249230">[</span><span class="op" id="6249231">]</span><span class="op" id="6249232">*</span><span class="ident" id="6249233">ast</span><span class="op" id="6249236">.</span><span class="ident" id="6249237">Field</span><span class="op" id="6249242">,</span>&nbsp;<span class="ident" id="6249244">isStruct</span>&nbsp;<span class="builtintype" id="6249253">bool</span><span class="op" id="6249257">)</span>&nbsp;<span class="op" id="6249259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249262">var</span>&nbsp;<span class="ident" id="6249266">fields</span>&nbsp;<span class="op" id="6249273">*</span><span class="ident" id="6249274">ast</span><span class="op" id="6249277">.</span><span class="ident" id="6249278">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249289">switch</span>&nbsp;<span class="ident" id="6249296">t</span>&nbsp;<span class="op" id="6249298">:=</span>&nbsp;<span class="ident" id="6249301">typ</span><span class="op" id="6249304">.</span><span class="op" id="6249305">(</span><span class="keyword" id="6249306">type</span><span class="op" id="6249310">)</span>&nbsp;<span class="op" id="6249312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249315">case</span>&nbsp;<span class="op" id="6249320">*</span><span class="ident" id="6249321">ast</span><span class="op" id="6249324">.</span><span class="ident" id="6249325">StructType</span><span class="op" id="6249335">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249339">fields</span>&nbsp;<span class="op" id="6249346">=</span>&nbsp;<span class="ident" id="6249348">t</span><span class="op" id="6249349">.</span><span class="ident" id="6249350">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249359">isStruct</span>&nbsp;<span class="op" id="6249368">=</span>&nbsp;<span class="ident" id="6249370">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249376">case</span>&nbsp;<span class="op" id="6249381">*</span><span class="ident" id="6249382">ast</span><span class="op" id="6249385">.</span><span class="ident" id="6249386">InterfaceType</span><span class="op" id="6249399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249403">fields</span>&nbsp;<span class="op" id="6249410">=</span>&nbsp;<span class="ident" id="6249412">t</span><span class="op" id="6249413">.</span><span class="ident" id="6249414">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6249423">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249426">if</span>&nbsp;<span class="ident" id="6249429">fields</span>&nbsp;<span class="op" id="6249436">!=</span>&nbsp;<span class="ident" id="6249439">nil</span>&nbsp;<span class="op" id="6249443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249447">list</span>&nbsp;<span class="op" id="6249452">=</span>&nbsp;<span class="ident" id="6249454">fields</span><span class="op" id="6249460">.</span><span class="ident" id="6249461">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6249467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249470">return</span><br>
<span class="lineno"></span><span class="op" id="6249477">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6249480">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6249522">//</span><br>
<span class="lineno"></span><span class="keyword" id="6249525">func</span>&nbsp;<span class="op" id="6249530">(</span><span class="ident" id="6249531">r</span>&nbsp;<span class="op" id="6249533">*</span><span class="ident" id="6249534">reader</span><span class="op" id="6249540">)</span>&nbsp;<span class="ident" id="6249542">readType</span><span class="op" id="6249550">(</span><span class="ident" id="6249551">decl</span>&nbsp;<span class="op" id="6249556">*</span><span class="ident" id="6249557">ast</span><span class="op" id="6249560">.</span><span class="ident" id="6249561">GenDecl</span><span class="op" id="6249568">,</span>&nbsp;<span class="ident" id="6249570">spec</span>&nbsp;<span class="op" id="6249575">*</span><span class="ident" id="6249576">ast</span><span class="op" id="6249579">.</span><span class="ident" id="6249580">TypeSpec</span><span class="op" id="6249588">)</span>&nbsp;<span class="op" id="6249590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249593">typ</span>&nbsp;<span class="op" id="6249597">:=</span>&nbsp;<span class="ident" id="6249600">r</span><span class="op" id="6249601">.</span><span class="ident" id="6249602">lookupType</span><span class="op" id="6249612">(</span><span class="ident" id="6249613">spec</span><span class="op" id="6249617">.</span><span class="ident" id="6249618">Name</span><span class="op" id="6249622">.</span><span class="ident" id="6249623">Name</span><span class="op" id="6249627">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249630">if</span>&nbsp;<span class="ident" id="6249633">typ</span>&nbsp;<span class="op" id="6249637">==</span>&nbsp;<span class="ident" id="6249640">nil</span>&nbsp;<span class="op" id="6249644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249648">return</span>&nbsp;<span class="comment" id="6249655">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6249699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6249703">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6249756">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249811">typ</span><span class="op" id="6249814">.</span><span class="ident" id="6249815">decl</span>&nbsp;<span class="op" id="6249820">=</span>&nbsp;<span class="ident" id="6249822">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6249829">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249855">doc</span>&nbsp;<span class="op" id="6249859">:=</span>&nbsp;<span class="ident" id="6249862">spec</span><span class="op" id="6249866">.</span><span class="ident" id="6249867">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6249872">spec</span><span class="op" id="6249876">.</span><span class="ident" id="6249877">Doc</span>&nbsp;<span class="op" id="6249881">=</span>&nbsp;<span class="ident" id="6249883">nil</span>&nbsp;<span class="comment" id="6249887">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6249922">if</span>&nbsp;<span class="ident" id="6249925">doc</span>&nbsp;<span class="op" id="6249929">==</span>&nbsp;<span class="ident" id="6249932">nil</span>&nbsp;<span class="op" id="6249936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6249940">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250010">doc</span>&nbsp;<span class="op" id="6250014">=</span>&nbsp;<span class="ident" id="6250016">decl</span><span class="op" id="6250020">.</span><span class="ident" id="6250021">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6250026">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250029">decl</span><span class="op" id="6250033">.</span><span class="ident" id="6250034">Doc</span>&nbsp;<span class="op" id="6250038">=</span>&nbsp;<span class="ident" id="6250040">nil</span>&nbsp;<span class="comment" id="6250044">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250079">typ</span><span class="op" id="6250082">.</span><span class="ident" id="6250083">doc</span>&nbsp;<span class="op" id="6250087">=</span>&nbsp;<span class="ident" id="6250089">doc</span><span class="op" id="6250092">.</span><span class="ident" id="6250093">Text</span><span class="op" id="6250097">(</span><span class="op" id="6250098">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250102">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250160">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250223">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250251">var</span>&nbsp;<span class="ident" id="6250255">list</span>&nbsp;<span class="op" id="6250260">[</span><span class="op" id="6250261">]</span><span class="op" id="6250262">*</span><span class="ident" id="6250263">ast</span><span class="op" id="6250266">.</span><span class="ident" id="6250267">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250274">list</span><span class="op" id="6250278">,</span>&nbsp;<span class="ident" id="6250280">typ</span><span class="op" id="6250283">.</span><span class="ident" id="6250284">isStruct</span>&nbsp;<span class="op" id="6250293">=</span>&nbsp;<span class="ident" id="6250295">fields</span><span class="op" id="6250301">(</span><span class="ident" id="6250302">spec</span><span class="op" id="6250306">.</span><span class="ident" id="6250307">Type</span><span class="op" id="6250311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250314">for</span>&nbsp;<span class="ident" id="6250318">_</span><span class="op" id="6250319">,</span>&nbsp;<span class="ident" id="6250321">field</span>&nbsp;<span class="op" id="6250327">:=</span>&nbsp;<span class="keyword" id="6250330">range</span>&nbsp;<span class="ident" id="6250336">list</span>&nbsp;<span class="op" id="6250341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250345">if</span>&nbsp;<span class="builtinfunc" id="6250348">len</span><span class="op" id="6250351">(</span><span class="ident" id="6250352">field</span><span class="op" id="6250357">.</span><span class="ident" id="6250358">Names</span><span class="op" id="6250363">)</span>&nbsp;<span class="op" id="6250365">==</span>&nbsp;<span class="num" id="6250368">0</span>&nbsp;<span class="op" id="6250370">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250375">r</span><span class="op" id="6250376">.</span><span class="ident" id="6250377">recordAnonymousField</span><span class="op" id="6250397">(</span><span class="ident" id="6250398">typ</span><span class="op" id="6250401">,</span>&nbsp;<span class="ident" id="6250403">field</span><span class="op" id="6250408">.</span><span class="ident" id="6250409">Type</span><span class="op" id="6250413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6250417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6250420">}</span><br>
<span class="lineno"></span><span class="op" id="6250422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="6250425">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6250477">//</span><br>
<span class="lineno"></span><span class="keyword" id="6250480">func</span>&nbsp;<span class="op" id="6250485">(</span><span class="ident" id="6250486">r</span>&nbsp;<span class="op" id="6250488">*</span><span class="ident" id="6250489">reader</span><span class="op" id="6250495">)</span>&nbsp;<span class="ident" id="6250497">readFunc</span><span class="op" id="6250505">(</span><span class="ident" id="6250506">fun</span>&nbsp;<span class="op" id="6250510">*</span><span class="ident" id="6250511">ast</span><span class="op" id="6250514">.</span><span class="ident" id="6250515">FuncDecl</span><span class="op" id="6250523">)</span>&nbsp;<span class="op" id="6250525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250528">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250552">fun</span><span class="op" id="6250555">.</span><span class="ident" id="6250556">Body</span>&nbsp;<span class="op" id="6250561">=</span>&nbsp;<span class="ident" id="6250563">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250569">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250622">if</span>&nbsp;<span class="ident" id="6250625">fun</span><span class="op" id="6250628">.</span><span class="ident" id="6250629">Recv</span>&nbsp;<span class="op" id="6250634">!=</span>&nbsp;<span class="ident" id="6250637">nil</span>&nbsp;<span class="op" id="6250641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250645">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250657">recvTypeName</span><span class="op" id="6250669">,</span>&nbsp;<span class="ident" id="6250671">imp</span>&nbsp;<span class="op" id="6250675">:=</span>&nbsp;<span class="ident" id="6250678">baseTypeName</span><span class="op" id="6250690">(</span><span class="ident" id="6250691">fun</span><span class="op" id="6250694">.</span><span class="ident" id="6250695">Recv</span><span class="op" id="6250699">.</span><span class="ident" id="6250700">List</span><span class="op" id="6250704">[</span><span class="num" id="6250705">0</span><span class="op" id="6250706">]</span><span class="op" id="6250707">.</span><span class="ident" id="6250708">Type</span><span class="op" id="6250712">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250716">if</span>&nbsp;<span class="ident" id="6250719">imp</span>&nbsp;<span class="op" id="6250723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250728">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250769">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6250807">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6250811">if</span>&nbsp;<span class="ident" id="6250814">typ</span>&nbsp;<span class="op" id="6250818">:=</span>&nbsp;<span class="ident" id="6250821">r</span><span class="op" id="6250822">.</span><span class="ident" id="6250823">lookupType</span><span class="op" id="6250833">(</span><span class="ident" id="6250834">recvTypeName</span><span class="op" id="6250846">)</span><span class="op" id="6250847">;</span>&nbsp;<span class="ident" id="6250849">typ</span>&nbsp;<span class="op" id="6250853">!=</span>&nbsp;<span class="ident" id="6250856">nil</span>&nbsp;<span class="op" id="6250860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6250865">typ</span><span class="op" id="6250868">.</span><span class="ident" id="6250869">methods</span><span class="op" id="6250876">.</span><span class="ident" id="6250877">set</span><span class="op" id="6250880">(</span><span class="ident" id="6250881">fun</span><span class="op" id="6250884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6250888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250892">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250925">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6250993">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251062">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251130">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251195">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6251203">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251207">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251282">if</span>&nbsp;<span class="ident" id="6251285">fun</span><span class="op" id="6251288">.</span><span class="ident" id="6251289">Type</span><span class="op" id="6251293">.</span><span class="ident" id="6251294">Results</span><span class="op" id="6251301">.</span><span class="ident" id="6251302">NumFields</span><span class="op" id="6251311">(</span><span class="op" id="6251312">)</span>&nbsp;<span class="op" id="6251314">&gt;=</span>&nbsp;<span class="num" id="6251317">1</span>&nbsp;<span class="op" id="6251319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6251323">res</span>&nbsp;<span class="op" id="6251327">:=</span>&nbsp;<span class="ident" id="6251330">fun</span><span class="op" id="6251333">.</span><span class="ident" id="6251334">Type</span><span class="op" id="6251338">.</span><span class="ident" id="6251339">Results</span><span class="op" id="6251346">.</span><span class="ident" id="6251347">List</span><span class="op" id="6251351">[</span><span class="num" id="6251352">0</span><span class="op" id="6251353">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251357">if</span>&nbsp;<span class="builtinfunc" id="6251360">len</span><span class="op" id="6251363">(</span><span class="ident" id="6251364">res</span><span class="op" id="6251367">.</span><span class="ident" id="6251368">Names</span><span class="op" id="6251373">)</span>&nbsp;<span class="op" id="6251375">&lt;=</span>&nbsp;<span class="num" id="6251378">1</span>&nbsp;<span class="op" id="6251380">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251385">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251442">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251499">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251530">if</span>&nbsp;<span class="ident" id="6251533">n</span><span class="op" id="6251534">,</span>&nbsp;<span class="ident" id="6251536">imp</span>&nbsp;<span class="op" id="6251540">:=</span>&nbsp;<span class="ident" id="6251543">baseTypeName</span><span class="op" id="6251555">(</span><span class="ident" id="6251556">res</span><span class="op" id="6251559">.</span><span class="ident" id="6251560">Type</span><span class="op" id="6251564">)</span><span class="op" id="6251565">;</span>&nbsp;<span class="op" id="6251567">!</span><span class="ident" id="6251568">imp</span>&nbsp;<span class="op" id="6251572">&amp;&amp;</span>&nbsp;<span class="ident" id="6251575">r</span><span class="op" id="6251576">.</span><span class="ident" id="6251577">isVisible</span><span class="op" id="6251586">(</span><span class="ident" id="6251587">n</span><span class="op" id="6251588">)</span>&nbsp;<span class="op" id="6251590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251596">if</span>&nbsp;<span class="ident" id="6251599">typ</span>&nbsp;<span class="op" id="6251603">:=</span>&nbsp;<span class="ident" id="6251606">r</span><span class="op" id="6251607">.</span><span class="ident" id="6251608">lookupType</span><span class="op" id="6251618">(</span><span class="ident" id="6251619">n</span><span class="op" id="6251620">)</span><span class="op" id="6251621">;</span>&nbsp;<span class="ident" id="6251623">typ</span>&nbsp;<span class="op" id="6251627">!=</span>&nbsp;<span class="ident" id="6251630">nil</span>&nbsp;<span class="op" id="6251634">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251641">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6251677">typ</span><span class="op" id="6251680">.</span><span class="ident" id="6251681">funcs</span><span class="op" id="6251686">.</span><span class="ident" id="6251687">set</span><span class="op" id="6251690">(</span><span class="ident" id="6251691">fun</span><span class="op" id="6251694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6251701">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6251712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6251717">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6251721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6251724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6251728">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6251758">r</span><span class="op" id="6251759">.</span><span class="ident" id="6251760">funcs</span><span class="op" id="6251765">.</span><span class="ident" id="6251766">set</span><span class="op" id="6251769">(</span><span class="ident" id="6251770">fun</span><span class="op" id="6251773">)</span><br>
<span class="lineno">400</span><span class="op" id="6251775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6251778">var</span>&nbsp;<span class="op" id="6251782">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6251785">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251799">=</span>&nbsp;<span class="string" id="6251801">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251849">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6251911">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="6251925">=</span>&nbsp;<span class="ident" id="6251927">regexp</span><span class="op" id="6251933">.</span><span class="ident" id="6251934">MustCompile</span><span class="op" id="6251945">(</span><span class="string" id="6251946">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="6251956">+</span>&nbsp;<span class="ident" id="6251958">noteMarker</span><span class="op" id="6251968">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251975">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252005">noteCommentRx</span>&nbsp;<span class="op" id="6252019">=</span>&nbsp;<span class="ident" id="6252021">regexp</span><span class="op" id="6252027">.</span><span class="ident" id="6252028">MustCompile</span><span class="op" id="6252039">(</span><span class="string" id="6252040">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="6252055">+</span>&nbsp;<span class="ident" id="6252057">noteMarker</span><span class="op" id="6252067">)</span>&nbsp;<span class="comment" id="6252069">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="6252101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6252104">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6252168">//</span><br>
<span class="lineno">410</span><span class="keyword" id="6252171">func</span>&nbsp;<span class="op" id="6252176">(</span><span class="ident" id="6252177">r</span>&nbsp;<span class="op" id="6252179">*</span><span class="ident" id="6252180">reader</span><span class="op" id="6252186">)</span>&nbsp;<span class="ident" id="6252188">readNote</span><span class="op" id="6252196">(</span><span class="ident" id="6252197">list</span>&nbsp;<span class="op" id="6252202">[</span><span class="op" id="6252203">]</span><span class="op" id="6252204">*</span><span class="ident" id="6252205">ast</span><span class="op" id="6252208">.</span><span class="ident" id="6252209">Comment</span><span class="op" id="6252216">)</span>&nbsp;<span class="op" id="6252218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252221">text</span>&nbsp;<span class="op" id="6252226">:=</span>&nbsp;<span class="op" id="6252229">(</span><span class="op" id="6252230">&amp;</span><span class="ident" id="6252231">ast</span><span class="op" id="6252234">.</span><span class="ident" id="6252235">CommentGroup</span><span class="op" id="6252247">{</span><span class="ident" id="6252248">List</span><span class="op" id="6252252">:</span>&nbsp;<span class="ident" id="6252254">list</span><span class="op" id="6252258">}</span><span class="op" id="6252259">)</span><span class="op" id="6252260">.</span><span class="ident" id="6252261">Text</span><span class="op" id="6252265">(</span><span class="op" id="6252266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6252269">if</span>&nbsp;<span class="ident" id="6252272">m</span>&nbsp;<span class="op" id="6252274">:=</span>&nbsp;<span class="ident" id="6252277">noteMarkerRx</span><span class="op" id="6252289">.</span><span class="ident" id="6252290">FindStringSubmatchIndex</span><span class="op" id="6252313">(</span><span class="ident" id="6252314">text</span><span class="op" id="6252318">)</span><span class="op" id="6252319">;</span>&nbsp;<span class="ident" id="6252321">m</span>&nbsp;<span class="op" id="6252323">!=</span>&nbsp;<span class="ident" id="6252326">nil</span>&nbsp;<span class="op" id="6252330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6252334">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6252378">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6252425">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6252472">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252500">body</span>&nbsp;<span class="op" id="6252505">:=</span>&nbsp;<span class="ident" id="6252508">clean</span><span class="op" id="6252513">(</span><span class="ident" id="6252514">text</span><span class="op" id="6252518">[</span><span class="ident" id="6252519">m</span><span class="op" id="6252520">[</span><span class="num" id="6252521">1</span><span class="op" id="6252522">]</span><span class="op" id="6252523">:</span><span class="op" id="6252524">]</span><span class="op" id="6252525">,</span>&nbsp;<span class="ident" id="6252527">keepNL</span><span class="op" id="6252533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6252537">if</span>&nbsp;<span class="ident" id="6252540">body</span>&nbsp;<span class="op" id="6252545">!=</span>&nbsp;<span class="string" id="6252548">&#34;&#34;</span>&nbsp;<span class="op" id="6252551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252556">marker</span>&nbsp;<span class="op" id="6252563">:=</span>&nbsp;<span class="ident" id="6252566">text</span><span class="op" id="6252570">[</span><span class="ident" id="6252571">m</span><span class="op" id="6252572">[</span><span class="num" id="6252573">2</span><span class="op" id="6252574">]</span><span class="op" id="6252575">:</span><span class="ident" id="6252576">m</span><span class="op" id="6252577">[</span><span class="num" id="6252578">3</span><span class="op" id="6252579">]</span><span class="op" id="6252580">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252585">r</span><span class="op" id="6252586">.</span><span class="ident" id="6252587">notes</span><span class="op" id="6252592">[</span><span class="ident" id="6252593">marker</span><span class="op" id="6252599">]</span>&nbsp;<span class="op" id="6252601">=</span>&nbsp;<span class="builtinfunc" id="6252603">append</span><span class="op" id="6252609">(</span><span class="ident" id="6252610">r</span><span class="op" id="6252611">.</span><span class="ident" id="6252612">notes</span><span class="op" id="6252617">[</span><span class="ident" id="6252618">marker</span><span class="op" id="6252624">]</span><span class="op" id="6252625">,</span>&nbsp;<span class="op" id="6252627">&amp;</span><span class="ident" id="6252628">Note</span><span class="op" id="6252632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252638">Pos</span><span class="op" id="6252641">:</span>&nbsp;&nbsp;<span class="ident" id="6252644">list</span><span class="op" id="6252648">[</span><span class="num" id="6252649">0</span><span class="op" id="6252650">]</span><span class="op" id="6252651">.</span><span class="ident" id="6252652">Pos</span><span class="op" id="6252655">(</span><span class="op" id="6252656">)</span><span class="op" id="6252657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252663">End</span><span class="op" id="6252666">:</span>&nbsp;&nbsp;<span class="ident" id="6252669">list</span><span class="op" id="6252673">[</span><span class="builtinfunc" id="6252674">len</span><span class="op" id="6252677">(</span><span class="ident" id="6252678">list</span><span class="op" id="6252682">)</span><span class="op" id="6252683">-</span><span class="num" id="6252684">1</span><span class="op" id="6252685">]</span><span class="op" id="6252686">.</span><span class="ident" id="6252687">End</span><span class="op" id="6252690">(</span><span class="op" id="6252691">)</span><span class="op" id="6252692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252698">UID</span><span class="op" id="6252701">:</span>&nbsp;&nbsp;<span class="ident" id="6252704">text</span><span class="op" id="6252708">[</span><span class="ident" id="6252709">m</span><span class="op" id="6252710">[</span><span class="num" id="6252711">4</span><span class="op" id="6252712">]</span><span class="op" id="6252713">:</span><span class="ident" id="6252714">m</span><span class="op" id="6252715">[</span><span class="num" id="6252716">5</span><span class="op" id="6252717">]</span><span class="op" id="6252718">]</span><span class="op" id="6252719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6252725">Body</span><span class="op" id="6252729">:</span>&nbsp;<span class="ident" id="6252731">body</span><span class="op" id="6252735">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6252740">}</span><span class="op" id="6252741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6252745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6252748">}</span><br>
<span class="lineno"></span><span class="op" id="6252750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="6252753">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6252796">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6252867">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="6252936">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6253004">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="6253070">//</span><br>
<span class="lineno"></span><span class="keyword" id="6253073">func</span>&nbsp;<span class="op" id="6253078">(</span><span class="ident" id="6253079">r</span>&nbsp;<span class="op" id="6253081">*</span><span class="ident" id="6253082">reader</span><span class="op" id="6253088">)</span>&nbsp;<span class="ident" id="6253090">readNotes</span><span class="op" id="6253099">(</span><span class="ident" id="6253100">comments</span>&nbsp;<span class="op" id="6253109">[</span><span class="op" id="6253110">]</span><span class="op" id="6253111">*</span><span class="ident" id="6253112">ast</span><span class="op" id="6253115">.</span><span class="ident" id="6253116">CommentGroup</span><span class="op" id="6253128">)</span>&nbsp;<span class="op" id="6253130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253133">for</span>&nbsp;<span class="ident" id="6253137">_</span><span class="op" id="6253138">,</span>&nbsp;<span class="ident" id="6253140">group</span>&nbsp;<span class="op" id="6253146">:=</span>&nbsp;<span class="keyword" id="6253149">range</span>&nbsp;<span class="ident" id="6253155">comments</span>&nbsp;<span class="op" id="6253164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253168">i</span>&nbsp;<span class="op" id="6253170">:=</span>&nbsp;<span class="op" id="6253173">-</span><span class="num" id="6253174">1</span>&nbsp;<span class="comment" id="6253176">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253236">list</span>&nbsp;<span class="op" id="6253241">:=</span>&nbsp;<span class="ident" id="6253244">group</span><span class="op" id="6253249">.</span><span class="ident" id="6253250">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253257">for</span>&nbsp;<span class="ident" id="6253261">j</span><span class="op" id="6253262">,</span>&nbsp;<span class="ident" id="6253264">c</span>&nbsp;<span class="op" id="6253266">:=</span>&nbsp;<span class="keyword" id="6253269">range</span>&nbsp;<span class="ident" id="6253275">list</span>&nbsp;<span class="op" id="6253280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253285">if</span>&nbsp;<span class="ident" id="6253288">noteCommentRx</span><span class="op" id="6253301">.</span><span class="ident" id="6253302">MatchString</span><span class="op" id="6253313">(</span><span class="ident" id="6253314">c</span><span class="op" id="6253315">.</span><span class="ident" id="6253316">Text</span><span class="op" id="6253320">)</span>&nbsp;<span class="op" id="6253322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253328">if</span>&nbsp;<span class="ident" id="6253331">i</span>&nbsp;<span class="op" id="6253333">&gt;=</span>&nbsp;<span class="num" id="6253336">0</span>&nbsp;<span class="op" id="6253338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253345">r</span><span class="op" id="6253346">.</span><span class="ident" id="6253347">readNote</span><span class="op" id="6253355">(</span><span class="ident" id="6253356">list</span><span class="op" id="6253360">[</span><span class="ident" id="6253361">i</span><span class="op" id="6253362">:</span><span class="ident" id="6253363">j</span><span class="op" id="6253364">]</span><span class="op" id="6253365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253371">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253377">i</span>&nbsp;<span class="op" id="6253379">=</span>&nbsp;<span class="ident" id="6253381">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253394">if</span>&nbsp;<span class="ident" id="6253397">i</span>&nbsp;<span class="op" id="6253399">&gt;=</span>&nbsp;<span class="num" id="6253402">0</span>&nbsp;<span class="op" id="6253404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253409">r</span><span class="op" id="6253410">.</span><span class="ident" id="6253411">readNote</span><span class="op" id="6253419">(</span><span class="ident" id="6253420">list</span><span class="op" id="6253424">[</span><span class="ident" id="6253425">i</span><span class="op" id="6253426">:</span><span class="op" id="6253427">]</span><span class="op" id="6253428">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253435">}</span><br>
<span class="lineno"></span><span class="op" id="6253437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6253440">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="6253498">//</span><br>
<span class="lineno"></span><span class="keyword" id="6253501">func</span>&nbsp;<span class="op" id="6253506">(</span><span class="ident" id="6253507">r</span>&nbsp;<span class="op" id="6253509">*</span><span class="ident" id="6253510">reader</span><span class="op" id="6253516">)</span>&nbsp;<span class="ident" id="6253518">readFile</span><span class="op" id="6253526">(</span><span class="ident" id="6253527">src</span>&nbsp;<span class="op" id="6253531">*</span><span class="ident" id="6253532">ast</span><span class="op" id="6253535">.</span><span class="ident" id="6253536">File</span><span class="op" id="6253540">)</span>&nbsp;<span class="op" id="6253542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6253545">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253575">if</span>&nbsp;<span class="ident" id="6253578">src</span><span class="op" id="6253581">.</span><span class="ident" id="6253582">Doc</span>&nbsp;<span class="op" id="6253586">!=</span>&nbsp;<span class="ident" id="6253589">nil</span>&nbsp;<span class="op" id="6253593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253597">r</span><span class="op" id="6253598">.</span><span class="ident" id="6253599">readDoc</span><span class="op" id="6253606">(</span><span class="ident" id="6253607">src</span><span class="op" id="6253610">.</span><span class="ident" id="6253611">Doc</span><span class="op" id="6253614">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6253618">src</span><span class="op" id="6253621">.</span><span class="ident" id="6253622">Doc</span>&nbsp;<span class="op" id="6253626">=</span>&nbsp;<span class="ident" id="6253628">nil</span>&nbsp;<span class="comment" id="6253632">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6253667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6253671">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253696">for</span>&nbsp;<span class="ident" id="6253700">_</span><span class="op" id="6253701">,</span>&nbsp;<span class="ident" id="6253703">decl</span>&nbsp;<span class="op" id="6253708">:=</span>&nbsp;<span class="keyword" id="6253711">range</span>&nbsp;<span class="ident" id="6253717">src</span><span class="op" id="6253720">.</span><span class="ident" id="6253721">Decls</span>&nbsp;<span class="op" id="6253727">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253731">switch</span>&nbsp;<span class="ident" id="6253738">d</span>&nbsp;<span class="op" id="6253740">:=</span>&nbsp;<span class="ident" id="6253743">decl</span><span class="op" id="6253747">.</span><span class="op" id="6253748">(</span><span class="keyword" id="6253749">type</span><span class="op" id="6253753">)</span>&nbsp;<span class="op" id="6253755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253759">case</span>&nbsp;<span class="op" id="6253764">*</span><span class="ident" id="6253765">ast</span><span class="op" id="6253768">.</span><span class="ident" id="6253769">GenDecl</span><span class="op" id="6253776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253781">switch</span>&nbsp;<span class="ident" id="6253788">d</span><span class="op" id="6253789">.</span><span class="ident" id="6253790">Tok</span>&nbsp;<span class="op" id="6253794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253799">case</span>&nbsp;<span class="ident" id="6253804">token</span><span class="op" id="6253809">.</span><span class="ident" id="6253810">IMPORT</span><span class="op" id="6253816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6253822">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253862">for</span>&nbsp;<span class="ident" id="6253866">_</span><span class="op" id="6253867">,</span>&nbsp;<span class="ident" id="6253869">spec</span>&nbsp;<span class="op" id="6253874">:=</span>&nbsp;<span class="keyword" id="6253877">range</span>&nbsp;<span class="ident" id="6253883">d</span><span class="op" id="6253884">.</span><span class="ident" id="6253885">Specs</span>&nbsp;<span class="op" id="6253891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253898">if</span>&nbsp;<span class="ident" id="6253901">s</span><span class="op" id="6253902">,</span>&nbsp;<span class="ident" id="6253904">ok</span>&nbsp;<span class="op" id="6253907">:=</span>&nbsp;<span class="ident" id="6253910">spec</span><span class="op" id="6253914">.</span><span class="op" id="6253915">(</span><span class="op" id="6253916">*</span><span class="ident" id="6253917">ast</span><span class="op" id="6253920">.</span><span class="ident" id="6253921">ImportSpec</span><span class="op" id="6253931">)</span><span class="op" id="6253932">;</span>&nbsp;<span class="ident" id="6253934">ok</span>&nbsp;<span class="op" id="6253937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6253945">if</span>&nbsp;<span class="ident" id="6253948">import_</span><span class="op" id="6253955">,</span>&nbsp;<span class="ident" id="6253957">err</span>&nbsp;<span class="op" id="6253961">:=</span>&nbsp;<span class="ident" id="6253964">strconv</span><span class="op" id="6253971">.</span><span class="ident" id="6253972">Unquote</span><span class="op" id="6253979">(</span><span class="ident" id="6253980">s</span><span class="op" id="6253981">.</span><span class="ident" id="6253982">Path</span><span class="op" id="6253986">.</span><span class="ident" id="6253987">Value</span><span class="op" id="6253992">)</span><span class="op" id="6253993">;</span>&nbsp;<span class="ident" id="6253995">err</span>&nbsp;<span class="op" id="6253999">==</span>&nbsp;<span class="ident" id="6254002">nil</span>&nbsp;<span class="op" id="6254006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6254015">r</span><span class="op" id="6254016">.</span><span class="ident" id="6254017">imports</span><span class="op" id="6254024">[</span><span class="ident" id="6254025">import_</span><span class="op" id="6254032">]</span>&nbsp;<span class="op" id="6254034">=</span>&nbsp;<span class="num" id="6254036">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6254044">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6254051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6254057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254062">case</span>&nbsp;<span class="ident" id="6254067">token</span><span class="op" id="6254072">.</span><span class="ident" id="6254073">CONST</span><span class="op" id="6254078">,</span>&nbsp;<span class="ident" id="6254080">token</span><span class="op" id="6254085">.</span><span class="ident" id="6254086">VAR</span><span class="op" id="6254089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254095">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6254156">r</span><span class="op" id="6254157">.</span><span class="ident" id="6254158">readValue</span><span class="op" id="6254167">(</span><span class="ident" id="6254168">d</span><span class="op" id="6254169">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254174">case</span>&nbsp;<span class="ident" id="6254179">token</span><span class="op" id="6254184">.</span><span class="ident" id="6254185">TYPE</span><span class="op" id="6254189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254195">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254233">if</span>&nbsp;<span class="builtinfunc" id="6254236">len</span><span class="op" id="6254239">(</span><span class="ident" id="6254240">d</span><span class="op" id="6254241">.</span><span class="ident" id="6254242">Specs</span><span class="op" id="6254247">)</span>&nbsp;<span class="op" id="6254249">==</span>&nbsp;<span class="num" id="6254252">1</span>&nbsp;<span class="op" id="6254254">&amp;&amp;</span>&nbsp;<span class="op" id="6254257">!</span><span class="ident" id="6254258">d</span><span class="op" id="6254259">.</span><span class="ident" id="6254260">Lparen</span><span class="op" id="6254266">.</span><span class="ident" id="6254267">IsValid</span><span class="op" id="6254274">(</span><span class="op" id="6254275">)</span>&nbsp;<span class="op" id="6254277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254284">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254340">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254391">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254444">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254495">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254516">if</span>&nbsp;<span class="ident" id="6254519">s</span><span class="op" id="6254520">,</span>&nbsp;<span class="ident" id="6254522">ok</span>&nbsp;<span class="op" id="6254525">:=</span>&nbsp;<span class="ident" id="6254528">d</span><span class="op" id="6254529">.</span><span class="ident" id="6254530">Specs</span><span class="op" id="6254535">[</span><span class="num" id="6254536">0</span><span class="op" id="6254537">]</span><span class="op" id="6254538">.</span><span class="op" id="6254539">(</span><span class="op" id="6254540">*</span><span class="ident" id="6254541">ast</span><span class="op" id="6254544">.</span><span class="ident" id="6254545">TypeSpec</span><span class="op" id="6254553">)</span><span class="op" id="6254554">;</span>&nbsp;<span class="ident" id="6254556">ok</span>&nbsp;<span class="op" id="6254559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6254567">r</span><span class="op" id="6254568">.</span><span class="ident" id="6254569">readType</span><span class="op" id="6254577">(</span><span class="ident" id="6254578">d</span><span class="op" id="6254579">,</span>&nbsp;<span class="ident" id="6254581">s</span><span class="op" id="6254582">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6254589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254596">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6254606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254612">for</span>&nbsp;<span class="ident" id="6254616">_</span><span class="op" id="6254617">,</span>&nbsp;<span class="ident" id="6254619">spec</span>&nbsp;<span class="op" id="6254624">:=</span>&nbsp;<span class="keyword" id="6254627">range</span>&nbsp;<span class="ident" id="6254633">d</span><span class="op" id="6254634">.</span><span class="ident" id="6254635">Specs</span>&nbsp;<span class="op" id="6254641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6254648">if</span>&nbsp;<span class="ident" id="6254651">s</span><span class="op" id="6254652">,</span>&nbsp;<span class="ident" id="6254654">ok</span>&nbsp;<span class="op" id="6254657">:=</span>&nbsp;<span class="ident" id="6254660">spec</span><span class="op" id="6254664">.</span><span class="op" id="6254665">(</span><span class="op" id="6254666">*</span><span class="ident" id="6254667">ast</span><span class="op" id="6254670">.</span><span class="ident" id="6254671">TypeSpec</span><span class="op" id="6254679">)</span><span class="op" id="6254680">;</span>&nbsp;<span class="ident" id="6254682">ok</span>&nbsp;<span class="op" id="6254685">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254693">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254748">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254805">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254861">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6254918">fake</span>&nbsp;<span class="op" id="6254923">:=</span>&nbsp;<span class="op" id="6254926">&amp;</span><span class="ident" id="6254927">ast</span><span class="op" id="6254930">.</span><span class="ident" id="6254931">GenDecl</span><span class="op" id="6254938">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6254947">Doc</span><span class="op" id="6254950">:</span>&nbsp;<span class="ident" id="6254952">d</span><span class="op" id="6254953">.</span><span class="ident" id="6254954">Doc</span><span class="op" id="6254957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6254966">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255017">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255070">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255119">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255170">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255222">TokPos</span><span class="op" id="6255228">:</span>&nbsp;<span class="ident" id="6255230">s</span><span class="op" id="6255231">.</span><span class="ident" id="6255232">Pos</span><span class="op" id="6255235">(</span><span class="op" id="6255236">)</span><span class="op" id="6255237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255246">Tok</span><span class="op" id="6255249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6255254">token</span><span class="op" id="6255259">.</span><span class="ident" id="6255260">TYPE</span><span class="op" id="6255264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255273">Specs</span><span class="op" id="6255278">:</span>&nbsp;&nbsp;<span class="op" id="6255281">[</span><span class="op" id="6255282">]</span><span class="ident" id="6255283">ast</span><span class="op" id="6255286">.</span><span class="ident" id="6255287">Spec</span><span class="op" id="6255291">{</span><span class="ident" id="6255292">s</span><span class="op" id="6255293">}</span><span class="op" id="6255294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255302">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255310">r</span><span class="op" id="6255311">.</span><span class="ident" id="6255312">readType</span><span class="op" id="6255320">(</span><span class="ident" id="6255321">fake</span><span class="op" id="6255325">,</span>&nbsp;<span class="ident" id="6255327">s</span><span class="op" id="6255328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6255350">case</span>&nbsp;<span class="op" id="6255355">*</span><span class="ident" id="6255356">ast</span><span class="op" id="6255359">.</span><span class="ident" id="6255360">FuncDecl</span><span class="op" id="6255368">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255373">r</span><span class="op" id="6255374">.</span><span class="ident" id="6255375">readFunc</span><span class="op" id="6255383">(</span><span class="ident" id="6255384">d</span><span class="op" id="6255385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255396">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255433">r</span><span class="op" id="6255434">.</span><span class="ident" id="6255435">readNotes</span><span class="op" id="6255444">(</span><span class="ident" id="6255445">src</span><span class="op" id="6255448">.</span><span class="ident" id="6255449">Comments</span><span class="op" id="6255457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255460">src</span><span class="op" id="6255463">.</span><span class="ident" id="6255464">Comments</span>&nbsp;<span class="op" id="6255473">=</span>&nbsp;<span class="ident" id="6255475">nil</span>&nbsp;<span class="comment" id="6255479">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6255531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6255534">func</span>&nbsp;<span class="op" id="6255539">(</span><span class="ident" id="6255540">r</span>&nbsp;<span class="op" id="6255542">*</span><span class="ident" id="6255543">reader</span><span class="op" id="6255549">)</span>&nbsp;<span class="ident" id="6255551">readPackage</span><span class="op" id="6255562">(</span><span class="ident" id="6255563">pkg</span>&nbsp;<span class="op" id="6255567">*</span><span class="ident" id="6255568">ast</span><span class="op" id="6255571">.</span><span class="ident" id="6255572">Package</span><span class="op" id="6255579">,</span>&nbsp;<span class="ident" id="6255581">mode</span>&nbsp;<span class="ident" id="6255586">Mode</span><span class="op" id="6255590">)</span>&nbsp;<span class="op" id="6255592">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255595">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255617">r</span><span class="op" id="6255618">.</span><span class="ident" id="6255619">filenames</span>&nbsp;<span class="op" id="6255629">=</span>&nbsp;<span class="builtinfunc" id="6255631">make</span><span class="op" id="6255635">(</span><span class="op" id="6255636">[</span><span class="op" id="6255637">]</span><span class="builtintype" id="6255638">string</span><span class="op" id="6255644">,</span>&nbsp;<span class="builtinfunc" id="6255646">len</span><span class="op" id="6255649">(</span><span class="ident" id="6255650">pkg</span><span class="op" id="6255653">.</span><span class="ident" id="6255654">Files</span><span class="op" id="6255659">)</span><span class="op" id="6255660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255663">r</span><span class="op" id="6255664">.</span><span class="ident" id="6255665">imports</span>&nbsp;<span class="op" id="6255673">=</span>&nbsp;<span class="builtinfunc" id="6255675">make</span><span class="op" id="6255679">(</span><span class="keyword" id="6255680">map</span><span class="op" id="6255683">[</span><span class="builtintype" id="6255684">string</span><span class="op" id="6255690">]</span><span class="builtintype" id="6255691">int</span><span class="op" id="6255694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255697">r</span><span class="op" id="6255698">.</span><span class="ident" id="6255699">mode</span>&nbsp;<span class="op" id="6255704">=</span>&nbsp;<span class="ident" id="6255706">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255712">r</span><span class="op" id="6255713">.</span><span class="ident" id="6255714">types</span>&nbsp;<span class="op" id="6255720">=</span>&nbsp;<span class="builtinfunc" id="6255722">make</span><span class="op" id="6255726">(</span><span class="keyword" id="6255727">map</span><span class="op" id="6255730">[</span><span class="builtintype" id="6255731">string</span><span class="op" id="6255737">]</span><span class="op" id="6255738">*</span><span class="ident" id="6255739">namedType</span><span class="op" id="6255748">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255751">r</span><span class="op" id="6255752">.</span><span class="ident" id="6255753">funcs</span>&nbsp;<span class="op" id="6255759">=</span>&nbsp;<span class="builtinfunc" id="6255761">make</span><span class="op" id="6255765">(</span><span class="ident" id="6255766">methodSet</span><span class="op" id="6255775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255778">r</span><span class="op" id="6255779">.</span><span class="ident" id="6255780">notes</span>&nbsp;<span class="op" id="6255786">=</span>&nbsp;<span class="builtinfunc" id="6255788">make</span><span class="op" id="6255792">(</span><span class="keyword" id="6255793">map</span><span class="op" id="6255796">[</span><span class="builtintype" id="6255797">string</span><span class="op" id="6255803">]</span><span class="op" id="6255804">[</span><span class="op" id="6255805">]</span><span class="op" id="6255806">*</span><span class="ident" id="6255807">Note</span><span class="op" id="6255811">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255815">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6255870">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255920">i</span>&nbsp;<span class="op" id="6255922">:=</span>&nbsp;<span class="num" id="6255925">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6255928">for</span>&nbsp;<span class="ident" id="6255932">filename</span>&nbsp;<span class="op" id="6255941">:=</span>&nbsp;<span class="keyword" id="6255944">range</span>&nbsp;<span class="ident" id="6255950">pkg</span><span class="op" id="6255953">.</span><span class="ident" id="6255954">Files</span>&nbsp;<span class="op" id="6255960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255964">r</span><span class="op" id="6255965">.</span><span class="ident" id="6255966">filenames</span><span class="op" id="6255975">[</span><span class="ident" id="6255976">i</span><span class="op" id="6255977">]</span>&nbsp;<span class="op" id="6255979">=</span>&nbsp;<span class="ident" id="6255981">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6255992">i</span><span class="op" id="6255993">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6255997">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256000">sort</span><span class="op" id="6256004">.</span><span class="ident" id="6256005">Strings</span><span class="op" id="6256012">(</span><span class="ident" id="6256013">r</span><span class="op" id="6256014">.</span><span class="ident" id="6256015">filenames</span><span class="op" id="6256024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6256028">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256062">for</span>&nbsp;<span class="ident" id="6256066">_</span><span class="op" id="6256067">,</span>&nbsp;<span class="ident" id="6256069">filename</span>&nbsp;<span class="op" id="6256078">:=</span>&nbsp;<span class="keyword" id="6256081">range</span>&nbsp;<span class="ident" id="6256087">r</span><span class="op" id="6256088">.</span><span class="ident" id="6256089">filenames</span>&nbsp;<span class="op" id="6256099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256103">f</span>&nbsp;<span class="op" id="6256105">:=</span>&nbsp;<span class="ident" id="6256108">pkg</span><span class="op" id="6256111">.</span><span class="ident" id="6256112">Files</span><span class="op" id="6256117">[</span><span class="ident" id="6256118">filename</span><span class="op" id="6256126">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256130">if</span>&nbsp;<span class="ident" id="6256133">mode</span><span class="op" id="6256137">&amp;</span><span class="ident" id="6256138">AllDecls</span>&nbsp;<span class="op" id="6256147">==</span>&nbsp;<span class="num" id="6256150">0</span>&nbsp;<span class="op" id="6256152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256157">r</span><span class="op" id="6256158">.</span><span class="ident" id="6256159">fileExports</span><span class="op" id="6256170">(</span><span class="ident" id="6256171">f</span><span class="op" id="6256172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6256176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256180">r</span><span class="op" id="6256181">.</span><span class="ident" id="6256182">readFile</span><span class="op" id="6256190">(</span><span class="ident" id="6256191">f</span><span class="op" id="6256192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6256195">}</span><br>
<span class="lineno">550</span><span class="op" id="6256197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6256200">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6256280">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6256290">func</span>&nbsp;<span class="ident" id="6256295">customizeRecv</span><span class="op" id="6256308">(</span><span class="ident" id="6256309">f</span>&nbsp;<span class="op" id="6256311">*</span><span class="ident" id="6256312">Func</span><span class="op" id="6256316">,</span>&nbsp;<span class="ident" id="6256318">recvTypeName</span>&nbsp;<span class="builtintype" id="6256331">string</span><span class="op" id="6256337">,</span>&nbsp;<span class="ident" id="6256339">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6256353">bool</span><span class="op" id="6256357">,</span>&nbsp;<span class="ident" id="6256359">level</span>&nbsp;<span class="builtintype" id="6256365">int</span><span class="op" id="6256368">)</span>&nbsp;<span class="op" id="6256370">*</span><span class="ident" id="6256371">Func</span>&nbsp;<span class="op" id="6256376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256379">if</span>&nbsp;<span class="ident" id="6256382">f</span>&nbsp;<span class="op" id="6256384">==</span>&nbsp;<span class="ident" id="6256387">nil</span>&nbsp;<span class="op" id="6256391">||</span>&nbsp;<span class="ident" id="6256394">f</span><span class="op" id="6256395">.</span><span class="ident" id="6256396">Decl</span>&nbsp;<span class="op" id="6256401">==</span>&nbsp;<span class="ident" id="6256404">nil</span>&nbsp;<span class="op" id="6256408">||</span>&nbsp;<span class="ident" id="6256411">f</span><span class="op" id="6256412">.</span><span class="ident" id="6256413">Decl</span><span class="op" id="6256417">.</span><span class="ident" id="6256418">Recv</span>&nbsp;<span class="op" id="6256423">==</span>&nbsp;<span class="ident" id="6256426">nil</span>&nbsp;<span class="op" id="6256430">||</span>&nbsp;<span class="builtinfunc" id="6256433">len</span><span class="op" id="6256436">(</span><span class="ident" id="6256437">f</span><span class="op" id="6256438">.</span><span class="ident" id="6256439">Decl</span><span class="op" id="6256443">.</span><span class="ident" id="6256444">Recv</span><span class="op" id="6256448">.</span><span class="ident" id="6256449">List</span><span class="op" id="6256453">)</span>&nbsp;<span class="op" id="6256455">!=</span>&nbsp;<span class="num" id="6256458">1</span>&nbsp;<span class="op" id="6256460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256464">return</span>&nbsp;<span class="ident" id="6256471">f</span>&nbsp;<span class="comment" id="6256473">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6256507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6256511">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256561">newField</span>&nbsp;<span class="op" id="6256570">:=</span>&nbsp;<span class="op" id="6256573">*</span><span class="ident" id="6256574">f</span><span class="op" id="6256575">.</span><span class="ident" id="6256576">Decl</span><span class="op" id="6256580">.</span><span class="ident" id="6256581">Recv</span><span class="op" id="6256585">.</span><span class="ident" id="6256586">List</span><span class="op" id="6256590">[</span><span class="num" id="6256591">0</span><span class="op" id="6256592">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256595">origPos</span>&nbsp;<span class="op" id="6256603">:=</span>&nbsp;<span class="ident" id="6256606">newField</span><span class="op" id="6256614">.</span><span class="ident" id="6256615">Type</span><span class="op" id="6256619">.</span><span class="ident" id="6256620">Pos</span><span class="op" id="6256623">(</span><span class="op" id="6256624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256627">_</span><span class="op" id="6256628">,</span>&nbsp;<span class="ident" id="6256630">origRecvIsPtr</span>&nbsp;<span class="op" id="6256644">:=</span>&nbsp;<span class="ident" id="6256647">newField</span><span class="op" id="6256655">.</span><span class="ident" id="6256656">Type</span><span class="op" id="6256660">.</span><span class="op" id="6256661">(</span><span class="op" id="6256662">*</span><span class="ident" id="6256663">ast</span><span class="op" id="6256666">.</span><span class="ident" id="6256667">StarExpr</span><span class="op" id="6256675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256678">newIdent</span>&nbsp;<span class="op" id="6256687">:=</span>&nbsp;<span class="op" id="6256690">&amp;</span><span class="ident" id="6256691">ast</span><span class="op" id="6256694">.</span><span class="ident" id="6256695">Ident</span><span class="op" id="6256700">{</span><span class="ident" id="6256701">NamePos</span><span class="op" id="6256708">:</span>&nbsp;<span class="ident" id="6256710">origPos</span><span class="op" id="6256717">,</span>&nbsp;<span class="ident" id="6256719">Name</span><span class="op" id="6256723">:</span>&nbsp;<span class="ident" id="6256725">recvTypeName</span><span class="op" id="6256737">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256740">var</span>&nbsp;<span class="ident" id="6256744">typ</span>&nbsp;<span class="ident" id="6256748">ast</span><span class="op" id="6256751">.</span><span class="ident" id="6256752">Expr</span>&nbsp;<span class="op" id="6256757">=</span>&nbsp;<span class="ident" id="6256759">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6256769">if</span>&nbsp;<span class="op" id="6256772">!</span><span class="ident" id="6256773">embeddedIsPtr</span>&nbsp;<span class="op" id="6256787">&amp;&amp;</span>&nbsp;<span class="ident" id="6256790">origRecvIsPtr</span>&nbsp;<span class="op" id="6256804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256808">newIdent</span><span class="op" id="6256816">.</span><span class="ident" id="6256817">NamePos</span><span class="op" id="6256824">++</span>&nbsp;<span class="comment" id="6256827">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256853">typ</span>&nbsp;<span class="op" id="6256857">=</span>&nbsp;<span class="op" id="6256859">&amp;</span><span class="ident" id="6256860">ast</span><span class="op" id="6256863">.</span><span class="ident" id="6256864">StarExpr</span><span class="op" id="6256872">{</span><span class="ident" id="6256873">Star</span><span class="op" id="6256877">:</span>&nbsp;<span class="ident" id="6256879">origPos</span><span class="op" id="6256886">,</span>&nbsp;<span class="ident" id="6256888">X</span><span class="op" id="6256889">:</span>&nbsp;<span class="ident" id="6256891">newIdent</span><span class="op" id="6256899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6256902">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256905">newField</span><span class="op" id="6256913">.</span><span class="ident" id="6256914">Type</span>&nbsp;<span class="op" id="6256919">=</span>&nbsp;<span class="ident" id="6256921">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6256927">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6256992">newFieldList</span>&nbsp;<span class="op" id="6257005">:=</span>&nbsp;<span class="op" id="6257008">*</span><span class="ident" id="6257009">f</span><span class="op" id="6257010">.</span><span class="ident" id="6257011">Decl</span><span class="op" id="6257015">.</span><span class="ident" id="6257016">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257022">newFieldList</span><span class="op" id="6257034">.</span><span class="ident" id="6257035">List</span>&nbsp;<span class="op" id="6257040">=</span>&nbsp;<span class="op" id="6257042">[</span><span class="op" id="6257043">]</span><span class="op" id="6257044">*</span><span class="ident" id="6257045">ast</span><span class="op" id="6257048">.</span><span class="ident" id="6257049">Field</span><span class="op" id="6257054">{</span><span class="op" id="6257055">&amp;</span><span class="ident" id="6257056">newField</span><span class="op" id="6257064">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257068">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257139">newFuncDecl</span>&nbsp;<span class="op" id="6257151">:=</span>&nbsp;<span class="op" id="6257154">*</span><span class="ident" id="6257155">f</span><span class="op" id="6257156">.</span><span class="ident" id="6257157">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257163">newFuncDecl</span><span class="op" id="6257174">.</span><span class="ident" id="6257175">Recv</span>&nbsp;<span class="op" id="6257180">=</span>&nbsp;<span class="op" id="6257182">&amp;</span><span class="ident" id="6257183">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257198">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257263">newF</span>&nbsp;<span class="op" id="6257268">:=</span>&nbsp;<span class="op" id="6257271">*</span><span class="ident" id="6257272">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257275">newF</span><span class="op" id="6257279">.</span><span class="ident" id="6257280">Decl</span>&nbsp;<span class="op" id="6257285">=</span>&nbsp;<span class="op" id="6257287">&amp;</span><span class="ident" id="6257288">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257301">newF</span><span class="op" id="6257305">.</span><span class="ident" id="6257306">Recv</span>&nbsp;<span class="op" id="6257311">=</span>&nbsp;<span class="ident" id="6257313">recvString</span><span class="op" id="6257323">(</span><span class="ident" id="6257324">typ</span><span class="op" id="6257327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257330">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257363">newF</span><span class="op" id="6257367">.</span><span class="ident" id="6257368">Level</span>&nbsp;<span class="op" id="6257374">=</span>&nbsp;<span class="ident" id="6257376">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6257384">return</span>&nbsp;<span class="op" id="6257391">&amp;</span><span class="ident" id="6257392">newF</span><br>
<span class="lineno"></span><span class="op" id="6257397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="6257400">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6257472">//</span><br>
<span class="lineno"></span><span class="keyword" id="6257475">func</span>&nbsp;<span class="op" id="6257480">(</span><span class="ident" id="6257481">r</span>&nbsp;<span class="op" id="6257483">*</span><span class="ident" id="6257484">reader</span><span class="op" id="6257490">)</span>&nbsp;<span class="ident" id="6257492">collectEmbeddedMethods</span><span class="op" id="6257514">(</span><span class="ident" id="6257515">mset</span>&nbsp;<span class="ident" id="6257520">methodSet</span><span class="op" id="6257529">,</span>&nbsp;<span class="ident" id="6257531">typ</span>&nbsp;<span class="op" id="6257535">*</span><span class="ident" id="6257536">namedType</span><span class="op" id="6257545">,</span>&nbsp;<span class="ident" id="6257547">recvTypeName</span>&nbsp;<span class="builtintype" id="6257560">string</span><span class="op" id="6257566">,</span>&nbsp;<span class="ident" id="6257568">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6257582">bool</span><span class="op" id="6257586">,</span>&nbsp;<span class="ident" id="6257588">level</span>&nbsp;<span class="builtintype" id="6257594">int</span><span class="op" id="6257597">,</span>&nbsp;<span class="ident" id="6257599">visited</span>&nbsp;<span class="ident" id="6257607">embeddedSet</span><span class="op" id="6257618">)</span>&nbsp;<span class="op" id="6257620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257623">visited</span><span class="op" id="6257630">[</span><span class="ident" id="6257631">typ</span><span class="op" id="6257634">]</span>&nbsp;<span class="op" id="6257636">=</span>&nbsp;<span class="ident" id="6257638">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6257644">for</span>&nbsp;<span class="ident" id="6257648">embedded</span><span class="op" id="6257656">,</span>&nbsp;<span class="ident" id="6257658">isPtr</span>&nbsp;<span class="op" id="6257664">:=</span>&nbsp;<span class="keyword" id="6257667">range</span>&nbsp;<span class="ident" id="6257673">typ</span><span class="op" id="6257676">.</span><span class="ident" id="6257677">embedded</span>&nbsp;<span class="op" id="6257686">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257690">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257747">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257803">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257859">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6257916">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6257942">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="6257960">:=</span>&nbsp;<span class="ident" id="6257963">embeddedIsPtr</span>&nbsp;<span class="op" id="6257977">||</span>&nbsp;<span class="ident" id="6257980">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6257988">for</span>&nbsp;<span class="ident" id="6257992">_</span><span class="op" id="6257993">,</span>&nbsp;<span class="ident" id="6257995">m</span>&nbsp;<span class="op" id="6257997">:=</span>&nbsp;<span class="keyword" id="6258000">range</span>&nbsp;<span class="ident" id="6258006">embedded</span><span class="op" id="6258014">.</span><span class="ident" id="6258015">methods</span>&nbsp;<span class="op" id="6258023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258028">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258070">if</span>&nbsp;<span class="ident" id="6258073">m</span><span class="op" id="6258074">.</span><span class="ident" id="6258075">Level</span>&nbsp;<span class="op" id="6258081">==</span>&nbsp;<span class="num" id="6258084">0</span>&nbsp;<span class="op" id="6258086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6258092">mset</span><span class="op" id="6258096">.</span><span class="ident" id="6258097">add</span><span class="op" id="6258100">(</span><span class="ident" id="6258101">customizeRecv</span><span class="op" id="6258114">(</span><span class="ident" id="6258115">m</span><span class="op" id="6258116">,</span>&nbsp;<span class="ident" id="6258118">recvTypeName</span><span class="op" id="6258130">,</span>&nbsp;<span class="ident" id="6258132">thisEmbeddedIsPtr</span><span class="op" id="6258149">,</span>&nbsp;<span class="ident" id="6258151">level</span><span class="op" id="6258156">)</span><span class="op" id="6258157">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258170">if</span>&nbsp;<span class="op" id="6258173">!</span><span class="ident" id="6258174">visited</span><span class="op" id="6258181">[</span><span class="ident" id="6258182">embedded</span><span class="op" id="6258190">]</span>&nbsp;<span class="op" id="6258192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6258197">r</span><span class="op" id="6258198">.</span><span class="ident" id="6258199">collectEmbeddedMethods</span><span class="op" id="6258221">(</span><span class="ident" id="6258222">mset</span><span class="op" id="6258226">,</span>&nbsp;<span class="ident" id="6258228">embedded</span><span class="op" id="6258236">,</span>&nbsp;<span class="ident" id="6258238">recvTypeName</span><span class="op" id="6258250">,</span>&nbsp;<span class="ident" id="6258252">thisEmbeddedIsPtr</span><span class="op" id="6258269">,</span>&nbsp;<span class="ident" id="6258271">level</span><span class="op" id="6258276">+</span><span class="num" id="6258277">1</span><span class="op" id="6258278">,</span>&nbsp;<span class="ident" id="6258280">visited</span><span class="op" id="6258287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258291">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6258297">delete</span><span class="op" id="6258303">(</span><span class="ident" id="6258304">visited</span><span class="op" id="6258311">,</span>&nbsp;<span class="ident" id="6258313">typ</span><span class="op" id="6258316">)</span><br>
<span class="lineno"></span><span class="op" id="6258318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6258321">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="6258403">//</span><br>
<span class="lineno"></span><span class="keyword" id="6258406">func</span>&nbsp;<span class="op" id="6258411">(</span><span class="ident" id="6258412">r</span>&nbsp;<span class="op" id="6258414">*</span><span class="ident" id="6258415">reader</span><span class="op" id="6258421">)</span>&nbsp;<span class="ident" id="6258423">computeMethodSets</span><span class="op" id="6258440">(</span><span class="op" id="6258441">)</span>&nbsp;<span class="op" id="6258443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258446">for</span>&nbsp;<span class="ident" id="6258450">_</span><span class="op" id="6258451">,</span>&nbsp;<span class="ident" id="6258453">t</span>&nbsp;<span class="op" id="6258455">:=</span>&nbsp;<span class="keyword" id="6258458">range</span>&nbsp;<span class="ident" id="6258464">r</span><span class="op" id="6258465">.</span><span class="ident" id="6258466">types</span>&nbsp;<span class="op" id="6258472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258476">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258512">if</span>&nbsp;<span class="ident" id="6258515">t</span><span class="op" id="6258516">.</span><span class="ident" id="6258517">isStruct</span>&nbsp;<span class="op" id="6258526">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258531">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6258544">r</span><span class="op" id="6258545">.</span><span class="ident" id="6258546">collectEmbeddedMethods</span><span class="op" id="6258568">(</span><span class="ident" id="6258569">t</span><span class="op" id="6258570">.</span><span class="ident" id="6258571">methods</span><span class="op" id="6258578">,</span>&nbsp;<span class="ident" id="6258580">t</span><span class="op" id="6258581">,</span>&nbsp;<span class="ident" id="6258583">t</span><span class="op" id="6258584">.</span><span class="ident" id="6258585">name</span><span class="op" id="6258589">,</span>&nbsp;<span class="ident" id="6258591">false</span><span class="op" id="6258596">,</span>&nbsp;<span class="num" id="6258598">1</span><span class="op" id="6258599">,</span>&nbsp;<span class="builtinfunc" id="6258601">make</span><span class="op" id="6258605">(</span><span class="ident" id="6258606">embeddedSet</span><span class="op" id="6258617">)</span><span class="op" id="6258618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258622">}</span>&nbsp;<span class="keyword" id="6258624">else</span>&nbsp;<span class="op" id="6258629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258634">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258650">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6258681">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258757">if</span>&nbsp;<span class="ident" id="6258760">r</span><span class="op" id="6258761">.</span><span class="ident" id="6258762">errorDecl</span>&nbsp;<span class="op" id="6258772">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6258776">for</span>&nbsp;<span class="ident" id="6258780">_</span><span class="op" id="6258781">,</span>&nbsp;<span class="ident" id="6258783">ityp</span>&nbsp;<span class="op" id="6258788">:=</span>&nbsp;<span class="keyword" id="6258791">range</span>&nbsp;<span class="ident" id="6258797">r</span><span class="op" id="6258798">.</span><span class="ident" id="6258799">fixlist</span>&nbsp;<span class="op" id="6258807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6258812">removeErrorField</span><span class="op" id="6258828">(</span><span class="ident" id="6258829">ityp</span><span class="op" id="6258833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6258840">}</span><br>
<span class="lineno"></span><span class="op" id="6258842">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="6258845">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6258915">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="6258987">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="6259057">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="6259099">//</span><br>
<span class="lineno"></span><span class="keyword" id="6259102">func</span>&nbsp;<span class="op" id="6259107">(</span><span class="ident" id="6259108">r</span>&nbsp;<span class="op" id="6259110">*</span><span class="ident" id="6259111">reader</span><span class="op" id="6259117">)</span>&nbsp;<span class="ident" id="6259119">cleanupTypes</span><span class="op" id="6259131">(</span><span class="op" id="6259132">)</span>&nbsp;<span class="op" id="6259134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6259137">for</span>&nbsp;<span class="ident" id="6259141">_</span><span class="op" id="6259142">,</span>&nbsp;<span class="ident" id="6259144">t</span>&nbsp;<span class="op" id="6259146">:=</span>&nbsp;<span class="keyword" id="6259149">range</span>&nbsp;<span class="ident" id="6259155">r</span><span class="op" id="6259156">.</span><span class="ident" id="6259157">types</span>&nbsp;<span class="op" id="6259163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6259167">visible</span>&nbsp;<span class="op" id="6259175">:=</span>&nbsp;<span class="ident" id="6259178">r</span><span class="op" id="6259179">.</span><span class="ident" id="6259180">isVisible</span><span class="op" id="6259189">(</span><span class="ident" id="6259190">t</span><span class="op" id="6259191">.</span><span class="ident" id="6259192">name</span><span class="op" id="6259196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6259200">if</span>&nbsp;<span class="ident" id="6259203">t</span><span class="op" id="6259204">.</span><span class="ident" id="6259205">decl</span>&nbsp;<span class="op" id="6259210">==</span>&nbsp;<span class="ident" id="6259213">nil</span>&nbsp;<span class="op" id="6259217">&amp;&amp;</span>&nbsp;<span class="op" id="6259220">(</span><span class="ident" id="6259221">predeclaredTypes</span><span class="op" id="6259237">[</span><span class="ident" id="6259238">t</span><span class="op" id="6259239">.</span><span class="ident" id="6259240">name</span><span class="op" id="6259244">]</span>&nbsp;<span class="op" id="6259246">||</span>&nbsp;<span class="ident" id="6259249">t</span><span class="op" id="6259250">.</span><span class="ident" id="6259251">isEmbedded</span>&nbsp;<span class="op" id="6259262">&amp;&amp;</span>&nbsp;<span class="ident" id="6259265">visible</span><span class="op" id="6259272">)</span>&nbsp;<span class="op" id="6259274">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259279">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259356">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259431">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259508">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259563">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6259584">r</span><span class="op" id="6259585">.</span><span class="ident" id="6259586">values</span>&nbsp;<span class="op" id="6259593">=</span>&nbsp;<span class="builtinfunc" id="6259595">append</span><span class="op" id="6259601">(</span><span class="ident" id="6259602">r</span><span class="op" id="6259603">.</span><span class="ident" id="6259604">values</span><span class="op" id="6259610">,</span>&nbsp;<span class="ident" id="6259612">t</span><span class="op" id="6259613">.</span><span class="ident" id="6259614">values</span><span class="op" id="6259620">...</span><span class="op" id="6259623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259628">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6259660">for</span>&nbsp;<span class="ident" id="6259664">name</span><span class="op" id="6259668">,</span>&nbsp;<span class="ident" id="6259670">f</span>&nbsp;<span class="op" id="6259672">:=</span>&nbsp;<span class="keyword" id="6259675">range</span>&nbsp;<span class="ident" id="6259681">t</span><span class="op" id="6259682">.</span><span class="ident" id="6259683">funcs</span>&nbsp;<span class="op" id="6259689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259695">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259749">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6259807">r</span><span class="op" id="6259808">.</span><span class="ident" id="6259809">funcs</span><span class="op" id="6259814">[</span><span class="ident" id="6259815">name</span><span class="op" id="6259819">]</span>&nbsp;<span class="op" id="6259821">=</span>&nbsp;<span class="ident" id="6259823">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6259828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259833">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6259855">for</span>&nbsp;<span class="ident" id="6259859">name</span><span class="op" id="6259863">,</span>&nbsp;<span class="ident" id="6259865">m</span>&nbsp;<span class="op" id="6259867">:=</span>&nbsp;<span class="keyword" id="6259870">range</span>&nbsp;<span class="ident" id="6259876">t</span><span class="op" id="6259877">.</span><span class="ident" id="6259878">methods</span>&nbsp;<span class="op" id="6259886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6259892">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6259956">if</span>&nbsp;<span class="ident" id="6259959">_</span><span class="op" id="6259960">,</span>&nbsp;<span class="ident" id="6259962">found</span>&nbsp;<span class="op" id="6259968">:=</span>&nbsp;<span class="ident" id="6259971">r</span><span class="op" id="6259972">.</span><span class="ident" id="6259973">funcs</span><span class="op" id="6259978">[</span><span class="ident" id="6259979">name</span><span class="op" id="6259983">]</span><span class="op" id="6259984">;</span>&nbsp;<span class="op" id="6259986">!</span><span class="ident" id="6259987">found</span>&nbsp;<span class="op" id="6259993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260000">r</span><span class="op" id="6260001">.</span><span class="ident" id="6260002">funcs</span><span class="op" id="6260007">[</span><span class="ident" id="6260008">name</span><span class="op" id="6260012">]</span>&nbsp;<span class="op" id="6260014">=</span>&nbsp;<span class="ident" id="6260016">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260031">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6260035">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260094">if</span>&nbsp;<span class="ident" id="6260097">t</span><span class="op" id="6260098">.</span><span class="ident" id="6260099">decl</span>&nbsp;<span class="op" id="6260104">==</span>&nbsp;<span class="ident" id="6260107">nil</span>&nbsp;<span class="op" id="6260111">||</span>&nbsp;<span class="op" id="6260114">!</span><span class="ident" id="6260115">visible</span>&nbsp;<span class="op" id="6260123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6260128">delete</span><span class="op" id="6260134">(</span><span class="ident" id="6260135">r</span><span class="op" id="6260136">.</span><span class="ident" id="6260137">types</span><span class="op" id="6260142">,</span>&nbsp;<span class="ident" id="6260144">t</span><span class="op" id="6260145">.</span><span class="ident" id="6260146">name</span><span class="op" id="6260150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260157">}</span><br>
<span class="lineno">670</span><span class="op" id="6260159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6260162">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6260242">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6260254">type</span>&nbsp;<span class="ident" id="6260259">data</span>&nbsp;<span class="keyword" id="6260264">struct</span>&nbsp;<span class="op" id="6260271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260274">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6260279">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260284">swap</span>&nbsp;<span class="keyword" id="6260289">func</span><span class="op" id="6260293">(</span><span class="ident" id="6260294">i</span><span class="op" id="6260295">,</span>&nbsp;<span class="ident" id="6260297">j</span>&nbsp;<span class="builtintype" id="6260299">int</span><span class="op" id="6260302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260305">less</span>&nbsp;<span class="keyword" id="6260310">func</span><span class="op" id="6260314">(</span><span class="ident" id="6260315">i</span><span class="op" id="6260316">,</span>&nbsp;<span class="ident" id="6260318">j</span>&nbsp;<span class="builtintype" id="6260320">int</span><span class="op" id="6260323">)</span>&nbsp;<span class="builtintype" id="6260325">bool</span><br>
<span class="lineno"></span><span class="op" id="6260330">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="6260333">func</span>&nbsp;<span class="op" id="6260338">(</span><span class="ident" id="6260339">d</span>&nbsp;<span class="op" id="6260341">*</span><span class="ident" id="6260342">data</span><span class="op" id="6260346">)</span>&nbsp;<span class="ident" id="6260348">Len</span><span class="op" id="6260351">(</span><span class="op" id="6260352">)</span>&nbsp;<span class="builtintype" id="6260354">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6260368">{</span>&nbsp;<span class="keyword" id="6260370">return</span>&nbsp;<span class="ident" id="6260377">d</span><span class="op" id="6260378">.</span><span class="ident" id="6260379">n</span>&nbsp;<span class="op" id="6260381">}</span><br>
<span class="lineno"></span><span class="keyword" id="6260383">func</span>&nbsp;<span class="op" id="6260388">(</span><span class="ident" id="6260389">d</span>&nbsp;<span class="op" id="6260391">*</span><span class="ident" id="6260392">data</span><span class="op" id="6260396">)</span>&nbsp;<span class="ident" id="6260398">Swap</span><span class="op" id="6260402">(</span><span class="ident" id="6260403">i</span><span class="op" id="6260404">,</span>&nbsp;<span class="ident" id="6260406">j</span>&nbsp;<span class="builtintype" id="6260408">int</span><span class="op" id="6260411">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6260418">{</span>&nbsp;<span class="ident" id="6260420">d</span><span class="op" id="6260421">.</span><span class="ident" id="6260422">swap</span><span class="op" id="6260426">(</span><span class="ident" id="6260427">i</span><span class="op" id="6260428">,</span>&nbsp;<span class="ident" id="6260430">j</span><span class="op" id="6260431">)</span>&nbsp;<span class="op" id="6260433">}</span><br>
<span class="lineno"></span><span class="keyword" id="6260435">func</span>&nbsp;<span class="op" id="6260440">(</span><span class="ident" id="6260441">d</span>&nbsp;<span class="op" id="6260443">*</span><span class="ident" id="6260444">data</span><span class="op" id="6260448">)</span>&nbsp;<span class="ident" id="6260450">Less</span><span class="op" id="6260454">(</span><span class="ident" id="6260455">i</span><span class="op" id="6260456">,</span>&nbsp;<span class="ident" id="6260458">j</span>&nbsp;<span class="builtintype" id="6260460">int</span><span class="op" id="6260463">)</span>&nbsp;<span class="builtintype" id="6260465">bool</span>&nbsp;<span class="op" id="6260470">{</span>&nbsp;<span class="keyword" id="6260472">return</span>&nbsp;<span class="ident" id="6260479">d</span><span class="op" id="6260480">.</span><span class="ident" id="6260481">less</span><span class="op" id="6260485">(</span><span class="ident" id="6260486">i</span><span class="op" id="6260487">,</span>&nbsp;<span class="ident" id="6260489">j</span><span class="op" id="6260490">)</span>&nbsp;<span class="op" id="6260492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="6260495">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="6260538">func</span>&nbsp;<span class="ident" id="6260543">sortBy</span><span class="op" id="6260549">(</span><span class="ident" id="6260550">less</span>&nbsp;<span class="keyword" id="6260555">func</span><span class="op" id="6260559">(</span><span class="ident" id="6260560">i</span><span class="op" id="6260561">,</span>&nbsp;<span class="ident" id="6260563">j</span>&nbsp;<span class="builtintype" id="6260565">int</span><span class="op" id="6260568">)</span>&nbsp;<span class="builtintype" id="6260570">bool</span><span class="op" id="6260574">,</span>&nbsp;<span class="ident" id="6260576">swap</span>&nbsp;<span class="keyword" id="6260581">func</span><span class="op" id="6260585">(</span><span class="ident" id="6260586">i</span><span class="op" id="6260587">,</span>&nbsp;<span class="ident" id="6260589">j</span>&nbsp;<span class="builtintype" id="6260591">int</span><span class="op" id="6260594">)</span><span class="op" id="6260595">,</span>&nbsp;<span class="ident" id="6260597">n</span>&nbsp;<span class="builtintype" id="6260599">int</span><span class="op" id="6260602">)</span>&nbsp;<span class="op" id="6260604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260607">sort</span><span class="op" id="6260611">.</span><span class="ident" id="6260612">Sort</span><span class="op" id="6260616">(</span><span class="op" id="6260617">&amp;</span><span class="ident" id="6260618">data</span><span class="op" id="6260622">{</span><span class="ident" id="6260623">n</span><span class="op" id="6260624">,</span>&nbsp;<span class="ident" id="6260626">swap</span><span class="op" id="6260630">,</span>&nbsp;<span class="ident" id="6260632">less</span><span class="op" id="6260636">}</span><span class="op" id="6260637">)</span><br>
<span class="lineno"></span><span class="op" id="6260639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="6260642">func</span>&nbsp;<span class="ident" id="6260647">sortedKeys</span><span class="op" id="6260657">(</span><span class="ident" id="6260658">m</span>&nbsp;<span class="keyword" id="6260660">map</span><span class="op" id="6260663">[</span><span class="builtintype" id="6260664">string</span><span class="op" id="6260670">]</span><span class="builtintype" id="6260671">int</span><span class="op" id="6260674">)</span>&nbsp;<span class="op" id="6260676">[</span><span class="op" id="6260677">]</span><span class="builtintype" id="6260678">string</span>&nbsp;<span class="op" id="6260685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260688">list</span>&nbsp;<span class="op" id="6260693">:=</span>&nbsp;<span class="builtinfunc" id="6260696">make</span><span class="op" id="6260700">(</span><span class="op" id="6260701">[</span><span class="op" id="6260702">]</span><span class="builtintype" id="6260703">string</span><span class="op" id="6260709">,</span>&nbsp;<span class="builtinfunc" id="6260711">len</span><span class="op" id="6260714">(</span><span class="ident" id="6260715">m</span><span class="op" id="6260716">)</span><span class="op" id="6260717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260720">i</span>&nbsp;<span class="op" id="6260722">:=</span>&nbsp;<span class="num" id="6260725">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260728">for</span>&nbsp;<span class="ident" id="6260732">key</span>&nbsp;<span class="op" id="6260736">:=</span>&nbsp;<span class="keyword" id="6260739">range</span>&nbsp;<span class="ident" id="6260745">m</span>&nbsp;<span class="op" id="6260747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260751">list</span><span class="op" id="6260755">[</span><span class="ident" id="6260756">i</span><span class="op" id="6260757">]</span>&nbsp;<span class="op" id="6260759">=</span>&nbsp;<span class="ident" id="6260761">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260767">i</span><span class="op" id="6260768">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6260772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6260775">sort</span><span class="op" id="6260779">.</span><span class="ident" id="6260780">Strings</span><span class="op" id="6260787">(</span><span class="ident" id="6260788">list</span><span class="op" id="6260792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260795">return</span>&nbsp;<span class="ident" id="6260802">list</span><br>
<span class="lineno"></span><span class="op" id="6260807">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="6260810">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="6260876">//</span><br>
<span class="lineno"></span><span class="keyword" id="6260879">func</span>&nbsp;<span class="ident" id="6260884">sortingName</span><span class="op" id="6260895">(</span><span class="ident" id="6260896">d</span>&nbsp;<span class="op" id="6260898">*</span><span class="ident" id="6260899">ast</span><span class="op" id="6260902">.</span><span class="ident" id="6260903">GenDecl</span><span class="op" id="6260910">)</span>&nbsp;<span class="builtintype" id="6260912">string</span>&nbsp;<span class="op" id="6260919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260922">if</span>&nbsp;<span class="builtinfunc" id="6260925">len</span><span class="op" id="6260928">(</span><span class="ident" id="6260929">d</span><span class="op" id="6260930">.</span><span class="ident" id="6260931">Specs</span><span class="op" id="6260936">)</span>&nbsp;<span class="op" id="6260938">==</span>&nbsp;<span class="num" id="6260941">1</span>&nbsp;<span class="op" id="6260943">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260947">if</span>&nbsp;<span class="ident" id="6260950">s</span><span class="op" id="6260951">,</span>&nbsp;<span class="ident" id="6260953">ok</span>&nbsp;<span class="op" id="6260956">:=</span>&nbsp;<span class="ident" id="6260959">d</span><span class="op" id="6260960">.</span><span class="ident" id="6260961">Specs</span><span class="op" id="6260966">[</span><span class="num" id="6260967">0</span><span class="op" id="6260968">]</span><span class="op" id="6260969">.</span><span class="op" id="6260970">(</span><span class="op" id="6260971">*</span><span class="ident" id="6260972">ast</span><span class="op" id="6260975">.</span><span class="ident" id="6260976">ValueSpec</span><span class="op" id="6260985">)</span><span class="op" id="6260986">;</span>&nbsp;<span class="ident" id="6260988">ok</span>&nbsp;<span class="op" id="6260991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6260996">return</span>&nbsp;<span class="ident" id="6261003">s</span><span class="op" id="6261004">.</span><span class="ident" id="6261005">Names</span><span class="op" id="6261010">[</span><span class="num" id="6261011">0</span><span class="op" id="6261012">]</span><span class="op" id="6261013">.</span><span class="ident" id="6261014">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261027">return</span>&nbsp;<span class="string" id="6261034">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="6261037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6261040">func</span>&nbsp;<span class="ident" id="6261045">sortedValues</span><span class="op" id="6261057">(</span><span class="ident" id="6261058">m</span>&nbsp;<span class="op" id="6261060">[</span><span class="op" id="6261061">]</span><span class="op" id="6261062">*</span><span class="ident" id="6261063">Value</span><span class="op" id="6261068">,</span>&nbsp;<span class="ident" id="6261070">tok</span>&nbsp;<span class="ident" id="6261074">token</span><span class="op" id="6261079">.</span><span class="ident" id="6261080">Token</span><span class="op" id="6261085">)</span>&nbsp;<span class="op" id="6261087">[</span><span class="op" id="6261088">]</span><span class="op" id="6261089">*</span><span class="ident" id="6261090">Value</span>&nbsp;<span class="op" id="6261096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261099">list</span>&nbsp;<span class="op" id="6261104">:=</span>&nbsp;<span class="builtinfunc" id="6261107">make</span><span class="op" id="6261111">(</span><span class="op" id="6261112">[</span><span class="op" id="6261113">]</span><span class="op" id="6261114">*</span><span class="ident" id="6261115">Value</span><span class="op" id="6261120">,</span>&nbsp;<span class="builtinfunc" id="6261122">len</span><span class="op" id="6261125">(</span><span class="ident" id="6261126">m</span><span class="op" id="6261127">)</span><span class="op" id="6261128">)</span>&nbsp;<span class="comment" id="6261130">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261157">i</span>&nbsp;<span class="op" id="6261159">:=</span>&nbsp;<span class="num" id="6261162">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261165">for</span>&nbsp;<span class="ident" id="6261169">_</span><span class="op" id="6261170">,</span>&nbsp;<span class="ident" id="6261172">val</span>&nbsp;<span class="op" id="6261176">:=</span>&nbsp;<span class="keyword" id="6261179">range</span>&nbsp;<span class="ident" id="6261185">m</span>&nbsp;<span class="op" id="6261187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261191">if</span>&nbsp;<span class="ident" id="6261194">val</span><span class="op" id="6261197">.</span><span class="ident" id="6261198">Decl</span><span class="op" id="6261202">.</span><span class="ident" id="6261203">Tok</span>&nbsp;<span class="op" id="6261207">==</span>&nbsp;<span class="ident" id="6261210">tok</span>&nbsp;<span class="op" id="6261214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261219">list</span><span class="op" id="6261223">[</span><span class="ident" id="6261224">i</span><span class="op" id="6261225">]</span>&nbsp;<span class="op" id="6261227">=</span>&nbsp;<span class="ident" id="6261229">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261236">i</span><span class="op" id="6261237">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261242">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261248">list</span>&nbsp;<span class="op" id="6261253">=</span>&nbsp;<span class="ident" id="6261255">list</span><span class="op" id="6261259">[</span><span class="num" id="6261260">0</span><span class="op" id="6261261">:</span><span class="ident" id="6261262">i</span><span class="op" id="6261263">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261267">sortBy</span><span class="op" id="6261273">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261277">func</span><span class="op" id="6261281">(</span><span class="ident" id="6261282">i</span><span class="op" id="6261283">,</span>&nbsp;<span class="ident" id="6261285">j</span>&nbsp;<span class="builtintype" id="6261287">int</span><span class="op" id="6261290">)</span>&nbsp;<span class="builtintype" id="6261292">bool</span>&nbsp;<span class="op" id="6261297">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261302">if</span>&nbsp;<span class="ident" id="6261305">ni</span><span class="op" id="6261307">,</span>&nbsp;<span class="ident" id="6261309">nj</span>&nbsp;<span class="op" id="6261312">:=</span>&nbsp;<span class="ident" id="6261315">sortingName</span><span class="op" id="6261326">(</span><span class="ident" id="6261327">list</span><span class="op" id="6261331">[</span><span class="ident" id="6261332">i</span><span class="op" id="6261333">]</span><span class="op" id="6261334">.</span><span class="ident" id="6261335">Decl</span><span class="op" id="6261339">)</span><span class="op" id="6261340">,</span>&nbsp;<span class="ident" id="6261342">sortingName</span><span class="op" id="6261353">(</span><span class="ident" id="6261354">list</span><span class="op" id="6261358">[</span><span class="ident" id="6261359">j</span><span class="op" id="6261360">]</span><span class="op" id="6261361">.</span><span class="ident" id="6261362">Decl</span><span class="op" id="6261366">)</span><span class="op" id="6261367">;</span>&nbsp;<span class="ident" id="6261369">ni</span>&nbsp;<span class="op" id="6261372">!=</span>&nbsp;<span class="ident" id="6261375">nj</span>&nbsp;<span class="op" id="6261378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261384">return</span>&nbsp;<span class="ident" id="6261391">ni</span>&nbsp;<span class="op" id="6261394">&lt;</span>&nbsp;<span class="ident" id="6261396">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261407">return</span>&nbsp;<span class="ident" id="6261414">list</span><span class="op" id="6261418">[</span><span class="ident" id="6261419">i</span><span class="op" id="6261420">]</span><span class="op" id="6261421">.</span><span class="ident" id="6261422">order</span>&nbsp;<span class="op" id="6261428">&lt;</span>&nbsp;<span class="ident" id="6261430">list</span><span class="op" id="6261434">[</span><span class="ident" id="6261435">j</span><span class="op" id="6261436">]</span><span class="op" id="6261437">.</span><span class="ident" id="6261438">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261446">}</span><span class="op" id="6261447">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261451">func</span><span class="op" id="6261455">(</span><span class="ident" id="6261456">i</span><span class="op" id="6261457">,</span>&nbsp;<span class="ident" id="6261459">j</span>&nbsp;<span class="builtintype" id="6261461">int</span><span class="op" id="6261464">)</span>&nbsp;<span class="op" id="6261466">{</span>&nbsp;<span class="ident" id="6261468">list</span><span class="op" id="6261472">[</span><span class="ident" id="6261473">i</span><span class="op" id="6261474">]</span><span class="op" id="6261475">,</span>&nbsp;<span class="ident" id="6261477">list</span><span class="op" id="6261481">[</span><span class="ident" id="6261482">j</span><span class="op" id="6261483">]</span>&nbsp;<span class="op" id="6261485">=</span>&nbsp;<span class="ident" id="6261487">list</span><span class="op" id="6261491">[</span><span class="ident" id="6261492">j</span><span class="op" id="6261493">]</span><span class="op" id="6261494">,</span>&nbsp;<span class="ident" id="6261496">list</span><span class="op" id="6261500">[</span><span class="ident" id="6261501">i</span><span class="op" id="6261502">]</span>&nbsp;<span class="op" id="6261504">}</span><span class="op" id="6261505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6261509">len</span><span class="op" id="6261512">(</span><span class="ident" id="6261513">list</span><span class="op" id="6261517">)</span><span class="op" id="6261518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261521">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261525">return</span>&nbsp;<span class="ident" id="6261532">list</span><br>
<span class="lineno">735</span><span class="op" id="6261537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6261540">func</span>&nbsp;<span class="ident" id="6261545">sortedTypes</span><span class="op" id="6261556">(</span><span class="ident" id="6261557">m</span>&nbsp;<span class="keyword" id="6261559">map</span><span class="op" id="6261562">[</span><span class="builtintype" id="6261563">string</span><span class="op" id="6261569">]</span><span class="op" id="6261570">*</span><span class="ident" id="6261571">namedType</span><span class="op" id="6261580">,</span>&nbsp;<span class="ident" id="6261582">allMethods</span>&nbsp;<span class="builtintype" id="6261593">bool</span><span class="op" id="6261597">)</span>&nbsp;<span class="op" id="6261599">[</span><span class="op" id="6261600">]</span><span class="op" id="6261601">*</span><span class="ident" id="6261602">Type</span>&nbsp;<span class="op" id="6261607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261610">list</span>&nbsp;<span class="op" id="6261615">:=</span>&nbsp;<span class="builtinfunc" id="6261618">make</span><span class="op" id="6261622">(</span><span class="op" id="6261623">[</span><span class="op" id="6261624">]</span><span class="op" id="6261625">*</span><span class="ident" id="6261626">Type</span><span class="op" id="6261630">,</span>&nbsp;<span class="builtinfunc" id="6261632">len</span><span class="op" id="6261635">(</span><span class="ident" id="6261636">m</span><span class="op" id="6261637">)</span><span class="op" id="6261638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261641">i</span>&nbsp;<span class="op" id="6261643">:=</span>&nbsp;<span class="num" id="6261646">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261649">for</span>&nbsp;<span class="ident" id="6261653">_</span><span class="op" id="6261654">,</span>&nbsp;<span class="ident" id="6261656">t</span>&nbsp;<span class="op" id="6261658">:=</span>&nbsp;<span class="keyword" id="6261661">range</span>&nbsp;<span class="ident" id="6261667">m</span>&nbsp;<span class="op" id="6261669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261673">list</span><span class="op" id="6261677">[</span><span class="ident" id="6261678">i</span><span class="op" id="6261679">]</span>&nbsp;<span class="op" id="6261681">=</span>&nbsp;<span class="op" id="6261683">&amp;</span><span class="ident" id="6261684">Type</span><span class="op" id="6261688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261693">Doc</span><span class="op" id="6261696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6261702">t</span><span class="op" id="6261703">.</span><span class="ident" id="6261704">doc</span><span class="op" id="6261707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261712">Name</span><span class="op" id="6261716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6261721">t</span><span class="op" id="6261722">.</span><span class="ident" id="6261723">name</span><span class="op" id="6261727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261732">Decl</span><span class="op" id="6261736">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6261741">t</span><span class="op" id="6261742">.</span><span class="ident" id="6261743">decl</span><span class="op" id="6261747">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261752">Consts</span><span class="op" id="6261758">:</span>&nbsp;&nbsp;<span class="ident" id="6261761">sortedValues</span><span class="op" id="6261773">(</span><span class="ident" id="6261774">t</span><span class="op" id="6261775">.</span><span class="ident" id="6261776">values</span><span class="op" id="6261782">,</span>&nbsp;<span class="ident" id="6261784">token</span><span class="op" id="6261789">.</span><span class="ident" id="6261790">CONST</span><span class="op" id="6261795">)</span><span class="op" id="6261796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261801">Vars</span><span class="op" id="6261805">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6261810">sortedValues</span><span class="op" id="6261822">(</span><span class="ident" id="6261823">t</span><span class="op" id="6261824">.</span><span class="ident" id="6261825">values</span><span class="op" id="6261831">,</span>&nbsp;<span class="ident" id="6261833">token</span><span class="op" id="6261838">.</span><span class="ident" id="6261839">VAR</span><span class="op" id="6261842">)</span><span class="op" id="6261843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261848">Funcs</span><span class="op" id="6261853">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6261857">sortedFuncs</span><span class="op" id="6261868">(</span><span class="ident" id="6261869">t</span><span class="op" id="6261870">.</span><span class="ident" id="6261871">funcs</span><span class="op" id="6261876">,</span>&nbsp;<span class="ident" id="6261878">true</span><span class="op" id="6261882">)</span><span class="op" id="6261883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261888">Methods</span><span class="op" id="6261895">:</span>&nbsp;<span class="ident" id="6261897">sortedFuncs</span><span class="op" id="6261908">(</span><span class="ident" id="6261909">t</span><span class="op" id="6261910">.</span><span class="ident" id="6261911">methods</span><span class="op" id="6261918">,</span>&nbsp;<span class="ident" id="6261920">allMethods</span><span class="op" id="6261930">)</span><span class="op" id="6261931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261935">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261939">i</span><span class="op" id="6261940">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261948">sortBy</span><span class="op" id="6261954">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261958">func</span><span class="op" id="6261962">(</span><span class="ident" id="6261963">i</span><span class="op" id="6261964">,</span>&nbsp;<span class="ident" id="6261966">j</span>&nbsp;<span class="builtintype" id="6261968">int</span><span class="op" id="6261971">)</span>&nbsp;<span class="builtintype" id="6261973">bool</span>&nbsp;<span class="op" id="6261978">{</span>&nbsp;<span class="keyword" id="6261980">return</span>&nbsp;<span class="ident" id="6261987">list</span><span class="op" id="6261991">[</span><span class="ident" id="6261992">i</span><span class="op" id="6261993">]</span><span class="op" id="6261994">.</span><span class="ident" id="6261995">Name</span>&nbsp;<span class="op" id="6262000">&lt;</span>&nbsp;<span class="ident" id="6262002">list</span><span class="op" id="6262006">[</span><span class="ident" id="6262007">j</span><span class="op" id="6262008">]</span><span class="op" id="6262009">.</span><span class="ident" id="6262010">Name</span>&nbsp;<span class="op" id="6262015">}</span><span class="op" id="6262016">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262020">func</span><span class="op" id="6262024">(</span><span class="ident" id="6262025">i</span><span class="op" id="6262026">,</span>&nbsp;<span class="ident" id="6262028">j</span>&nbsp;<span class="builtintype" id="6262030">int</span><span class="op" id="6262033">)</span>&nbsp;<span class="op" id="6262035">{</span>&nbsp;<span class="ident" id="6262037">list</span><span class="op" id="6262041">[</span><span class="ident" id="6262042">i</span><span class="op" id="6262043">]</span><span class="op" id="6262044">,</span>&nbsp;<span class="ident" id="6262046">list</span><span class="op" id="6262050">[</span><span class="ident" id="6262051">j</span><span class="op" id="6262052">]</span>&nbsp;<span class="op" id="6262054">=</span>&nbsp;<span class="ident" id="6262056">list</span><span class="op" id="6262060">[</span><span class="ident" id="6262061">j</span><span class="op" id="6262062">]</span><span class="op" id="6262063">,</span>&nbsp;<span class="ident" id="6262065">list</span><span class="op" id="6262069">[</span><span class="ident" id="6262070">i</span><span class="op" id="6262071">]</span>&nbsp;<span class="op" id="6262073">}</span><span class="op" id="6262074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6262078">len</span><span class="op" id="6262081">(</span><span class="ident" id="6262082">list</span><span class="op" id="6262086">)</span><span class="op" id="6262087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6262090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262094">return</span>&nbsp;<span class="ident" id="6262101">list</span><br>
<span class="lineno">760</span><span class="op" id="6262106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6262109">func</span>&nbsp;<span class="ident" id="6262114">removeStar</span><span class="op" id="6262124">(</span><span class="ident" id="6262125">s</span>&nbsp;<span class="builtintype" id="6262127">string</span><span class="op" id="6262133">)</span>&nbsp;<span class="builtintype" id="6262135">string</span>&nbsp;<span class="op" id="6262142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262145">if</span>&nbsp;<span class="builtinfunc" id="6262148">len</span><span class="op" id="6262151">(</span><span class="ident" id="6262152">s</span><span class="op" id="6262153">)</span>&nbsp;<span class="op" id="6262155">&gt;</span>&nbsp;<span class="num" id="6262157">0</span>&nbsp;<span class="op" id="6262159">&amp;&amp;</span>&nbsp;<span class="ident" id="6262162">s</span><span class="op" id="6262163">[</span><span class="num" id="6262164">0</span><span class="op" id="6262165">]</span>&nbsp;<span class="op" id="6262167">==</span>&nbsp;<span class="string" id="6262170">&#39;*&#39;</span>&nbsp;<span class="op" id="6262174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262178">return</span>&nbsp;<span class="ident" id="6262185">s</span><span class="op" id="6262186">[</span><span class="num" id="6262187">1</span><span class="op" id="6262188">:</span><span class="op" id="6262189">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6262192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262195">return</span>&nbsp;<span class="ident" id="6262202">s</span><br>
<span class="lineno"></span><span class="op" id="6262204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6262207">func</span>&nbsp;<span class="ident" id="6262212">sortedFuncs</span><span class="op" id="6262223">(</span><span class="ident" id="6262224">m</span>&nbsp;<span class="ident" id="6262226">methodSet</span><span class="op" id="6262235">,</span>&nbsp;<span class="ident" id="6262237">allMethods</span>&nbsp;<span class="builtintype" id="6262248">bool</span><span class="op" id="6262252">)</span>&nbsp;<span class="op" id="6262254">[</span><span class="op" id="6262255">]</span><span class="op" id="6262256">*</span><span class="ident" id="6262257">Func</span>&nbsp;<span class="op" id="6262262">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262265">list</span>&nbsp;<span class="op" id="6262270">:=</span>&nbsp;<span class="builtinfunc" id="6262273">make</span><span class="op" id="6262277">(</span><span class="op" id="6262278">[</span><span class="op" id="6262279">]</span><span class="op" id="6262280">*</span><span class="ident" id="6262281">Func</span><span class="op" id="6262285">,</span>&nbsp;<span class="builtinfunc" id="6262287">len</span><span class="op" id="6262290">(</span><span class="ident" id="6262291">m</span><span class="op" id="6262292">)</span><span class="op" id="6262293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262296">i</span>&nbsp;<span class="op" id="6262298">:=</span>&nbsp;<span class="num" id="6262301">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262304">for</span>&nbsp;<span class="ident" id="6262308">_</span><span class="op" id="6262309">,</span>&nbsp;<span class="ident" id="6262311">m</span>&nbsp;<span class="op" id="6262313">:=</span>&nbsp;<span class="keyword" id="6262316">range</span>&nbsp;<span class="ident" id="6262322">m</span>&nbsp;<span class="op" id="6262324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6262328">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262368">switch</span>&nbsp;<span class="op" id="6262375">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262379">case</span>&nbsp;<span class="ident" id="6262384">m</span><span class="op" id="6262385">.</span><span class="ident" id="6262386">Decl</span>&nbsp;<span class="op" id="6262391">==</span>&nbsp;<span class="ident" id="6262394">nil</span><span class="op" id="6262397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6262402">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262430">case</span>&nbsp;<span class="ident" id="6262435">allMethods</span><span class="op" id="6262445">,</span>&nbsp;<span class="ident" id="6262447">m</span><span class="op" id="6262448">.</span><span class="ident" id="6262449">Level</span>&nbsp;<span class="op" id="6262455">==</span>&nbsp;<span class="num" id="6262458">0</span><span class="op" id="6262459">,</span>&nbsp;<span class="op" id="6262461">!</span><span class="ident" id="6262462">ast</span><span class="op" id="6262465">.</span><span class="ident" id="6262466">IsExported</span><span class="op" id="6262476">(</span><span class="ident" id="6262477">removeStar</span><span class="op" id="6262487">(</span><span class="ident" id="6262488">m</span><span class="op" id="6262489">.</span><span class="ident" id="6262490">Orig</span><span class="op" id="6262494">)</span><span class="op" id="6262495">)</span><span class="op" id="6262496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6262501">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6262556">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262611">list</span><span class="op" id="6262615">[</span><span class="ident" id="6262616">i</span><span class="op" id="6262617">]</span>&nbsp;<span class="op" id="6262619">=</span>&nbsp;<span class="ident" id="6262621">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262626">i</span><span class="op" id="6262627">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6262632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6262635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262638">list</span>&nbsp;<span class="op" id="6262643">=</span>&nbsp;<span class="ident" id="6262645">list</span><span class="op" id="6262649">[</span><span class="num" id="6262650">0</span><span class="op" id="6262651">:</span><span class="ident" id="6262652">i</span><span class="op" id="6262653">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6262656">sortBy</span><span class="op" id="6262662">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262666">func</span><span class="op" id="6262670">(</span><span class="ident" id="6262671">i</span><span class="op" id="6262672">,</span>&nbsp;<span class="ident" id="6262674">j</span>&nbsp;<span class="builtintype" id="6262676">int</span><span class="op" id="6262679">)</span>&nbsp;<span class="builtintype" id="6262681">bool</span>&nbsp;<span class="op" id="6262686">{</span>&nbsp;<span class="keyword" id="6262688">return</span>&nbsp;<span class="ident" id="6262695">list</span><span class="op" id="6262699">[</span><span class="ident" id="6262700">i</span><span class="op" id="6262701">]</span><span class="op" id="6262702">.</span><span class="ident" id="6262703">Name</span>&nbsp;<span class="op" id="6262708">&lt;</span>&nbsp;<span class="ident" id="6262710">list</span><span class="op" id="6262714">[</span><span class="ident" id="6262715">j</span><span class="op" id="6262716">]</span><span class="op" id="6262717">.</span><span class="ident" id="6262718">Name</span>&nbsp;<span class="op" id="6262723">}</span><span class="op" id="6262724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262728">func</span><span class="op" id="6262732">(</span><span class="ident" id="6262733">i</span><span class="op" id="6262734">,</span>&nbsp;<span class="ident" id="6262736">j</span>&nbsp;<span class="builtintype" id="6262738">int</span><span class="op" id="6262741">)</span>&nbsp;<span class="op" id="6262743">{</span>&nbsp;<span class="ident" id="6262745">list</span><span class="op" id="6262749">[</span><span class="ident" id="6262750">i</span><span class="op" id="6262751">]</span><span class="op" id="6262752">,</span>&nbsp;<span class="ident" id="6262754">list</span><span class="op" id="6262758">[</span><span class="ident" id="6262759">j</span><span class="op" id="6262760">]</span>&nbsp;<span class="op" id="6262762">=</span>&nbsp;<span class="ident" id="6262764">list</span><span class="op" id="6262768">[</span><span class="ident" id="6262769">j</span><span class="op" id="6262770">]</span><span class="op" id="6262771">,</span>&nbsp;<span class="ident" id="6262773">list</span><span class="op" id="6262777">[</span><span class="ident" id="6262778">i</span><span class="op" id="6262779">]</span>&nbsp;<span class="op" id="6262781">}</span><span class="op" id="6262782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6262786">len</span><span class="op" id="6262789">(</span><span class="ident" id="6262790">list</span><span class="op" id="6262794">)</span><span class="op" id="6262795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6262798">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6262801">return</span>&nbsp;<span class="ident" id="6262808">list</span><br>
<span class="lineno"></span><span class="op" id="6262813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6262816">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="6262889">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="6262957">//</span><br>
<span class="lineno"></span><span class="keyword" id="6262960">func</span>&nbsp;<span class="ident" id="6262965">noteBodies</span><span class="op" id="6262975">(</span><span class="ident" id="6262976">notes</span>&nbsp;<span class="op" id="6262982">[</span><span class="op" id="6262983">]</span><span class="op" id="6262984">*</span><span class="ident" id="6262985">Note</span><span class="op" id="6262989">)</span>&nbsp;<span class="op" id="6262991">[</span><span class="op" id="6262992">]</span><span class="builtintype" id="6262993">string</span>&nbsp;<span class="op" id="6263000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6263003">var</span>&nbsp;<span class="ident" id="6263007">list</span>&nbsp;<span class="op" id="6263012">[</span><span class="op" id="6263013">]</span><span class="builtintype" id="6263014">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6263022">for</span>&nbsp;<span class="ident" id="6263026">_</span><span class="op" id="6263027">,</span>&nbsp;<span class="ident" id="6263029">n</span>&nbsp;<span class="op" id="6263031">:=</span>&nbsp;<span class="keyword" id="6263034">range</span>&nbsp;<span class="ident" id="6263040">notes</span>&nbsp;<span class="op" id="6263046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6263050">list</span>&nbsp;<span class="op" id="6263055">=</span>&nbsp;<span class="builtinfunc" id="6263057">append</span><span class="op" id="6263063">(</span><span class="ident" id="6263064">list</span><span class="op" id="6263068">,</span>&nbsp;<span class="ident" id="6263070">n</span><span class="op" id="6263071">.</span><span class="ident" id="6263072">Body</span><span class="op" id="6263076">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6263079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6263082">return</span>&nbsp;<span class="ident" id="6263089">list</span><br>
<span class="lineno"></span><span class="op" id="6263094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6263097">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="6263177">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6263205">var</span>&nbsp;<span class="ident" id="6263209">predeclaredTypes</span>&nbsp;<span class="op" id="6263226">=</span>&nbsp;<span class="keyword" id="6263228">map</span><span class="op" id="6263231">[</span><span class="builtintype" id="6263232">string</span><span class="op" id="6263238">]</span><span class="builtintype" id="6263239">bool</span><span class="op" id="6263243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263246">&#34;bool&#34;</span><span class="op" id="6263252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263260">true</span><span class="op" id="6263264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263267">&#34;byte&#34;</span><span class="op" id="6263273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263281">true</span><span class="op" id="6263285">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263288">&#34;complex64&#34;</span><span class="op" id="6263299">:</span>&nbsp;&nbsp;<span class="ident" id="6263302">true</span><span class="op" id="6263306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263309">&#34;complex128&#34;</span><span class="op" id="6263321">:</span>&nbsp;<span class="ident" id="6263323">true</span><span class="op" id="6263327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263330">&#34;error&#34;</span><span class="op" id="6263337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263344">true</span><span class="op" id="6263348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263351">&#34;float32&#34;</span><span class="op" id="6263360">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263365">true</span><span class="op" id="6263369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263372">&#34;float64&#34;</span><span class="op" id="6263381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263386">true</span><span class="op" id="6263390">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263393">&#34;int&#34;</span><span class="op" id="6263398">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263407">true</span><span class="op" id="6263411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263414">&#34;int8&#34;</span><span class="op" id="6263420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263428">true</span><span class="op" id="6263432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263435">&#34;int16&#34;</span><span class="op" id="6263442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263449">true</span><span class="op" id="6263453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263456">&#34;int32&#34;</span><span class="op" id="6263463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263470">true</span><span class="op" id="6263474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263477">&#34;int64&#34;</span><span class="op" id="6263484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263491">true</span><span class="op" id="6263495">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263498">&#34;rune&#34;</span><span class="op" id="6263504">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263512">true</span><span class="op" id="6263516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263519">&#34;string&#34;</span><span class="op" id="6263527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263533">true</span><span class="op" id="6263537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263540">&#34;uint&#34;</span><span class="op" id="6263546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263554">true</span><span class="op" id="6263558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263561">&#34;uint8&#34;</span><span class="op" id="6263568">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263575">true</span><span class="op" id="6263579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263582">&#34;uint16&#34;</span><span class="op" id="6263590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263596">true</span><span class="op" id="6263600">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263603">&#34;uint32&#34;</span><span class="op" id="6263611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263617">true</span><span class="op" id="6263621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263624">&#34;uint64&#34;</span><span class="op" id="6263632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263638">true</span><span class="op" id="6263642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263645">&#34;uintptr&#34;</span><span class="op" id="6263654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263659">true</span><span class="op" id="6263663">,</span><br>
<span class="lineno"></span><span class="op" id="6263665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="6263668">var</span>&nbsp;<span class="ident" id="6263672">predeclaredFuncs</span>&nbsp;<span class="op" id="6263689">=</span>&nbsp;<span class="keyword" id="6263691">map</span><span class="op" id="6263694">[</span><span class="builtintype" id="6263695">string</span><span class="op" id="6263701">]</span><span class="builtintype" id="6263702">bool</span><span class="op" id="6263706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263709">&#34;append&#34;</span><span class="op" id="6263717">:</span>&nbsp;&nbsp;<span class="ident" id="6263720">true</span><span class="op" id="6263724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263727">&#34;cap&#34;</span><span class="op" id="6263732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263738">true</span><span class="op" id="6263742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263745">&#34;close&#34;</span><span class="op" id="6263752">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6263756">true</span><span class="op" id="6263760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263763">&#34;complex&#34;</span><span class="op" id="6263772">:</span>&nbsp;<span class="ident" id="6263774">true</span><span class="op" id="6263778">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263781">&#34;copy&#34;</span><span class="op" id="6263787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263792">true</span><span class="op" id="6263796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263799">&#34;delete&#34;</span><span class="op" id="6263807">:</span>&nbsp;&nbsp;<span class="ident" id="6263810">true</span><span class="op" id="6263814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263817">&#34;imag&#34;</span><span class="op" id="6263823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263828">true</span><span class="op" id="6263832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263835">&#34;len&#34;</span><span class="op" id="6263840">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263846">true</span><span class="op" id="6263850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263853">&#34;make&#34;</span><span class="op" id="6263859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263864">true</span><span class="op" id="6263868">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263871">&#34;new&#34;</span><span class="op" id="6263876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263882">true</span><span class="op" id="6263886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263889">&#34;panic&#34;</span><span class="op" id="6263896">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6263900">true</span><span class="op" id="6263904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263907">&#34;print&#34;</span><span class="op" id="6263914">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6263918">true</span><span class="op" id="6263922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263925">&#34;println&#34;</span><span class="op" id="6263934">:</span>&nbsp;<span class="ident" id="6263936">true</span><span class="op" id="6263940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263943">&#34;real&#34;</span><span class="op" id="6263949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6263954">true</span><span class="op" id="6263958">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6263961">&#34;recover&#34;</span><span class="op" id="6263970">:</span>&nbsp;<span class="ident" id="6263972">true</span><span class="op" id="6263976">,</span><br>
<span class="lineno"></span><span class="op" id="6263978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6263981">var</span>&nbsp;<span class="ident" id="6263985">predeclaredConstants</span>&nbsp;<span class="op" id="6264006">=</span>&nbsp;<span class="keyword" id="6264008">map</span><span class="op" id="6264011">[</span><span class="builtintype" id="6264012">string</span><span class="op" id="6264018">]</span><span class="builtintype" id="6264019">bool</span><span class="op" id="6264023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6264026">&#34;false&#34;</span><span class="op" id="6264033">:</span>&nbsp;<span class="ident" id="6264035">true</span><span class="op" id="6264039">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6264042">&#34;iota&#34;</span><span class="op" id="6264048">:</span>&nbsp;&nbsp;<span class="ident" id="6264051">true</span><span class="op" id="6264055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6264058">&#34;nil&#34;</span><span class="op" id="6264063">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6264067">true</span><span class="op" id="6264071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6264074">&#34;true&#34;</span><span class="op" id="6264080">:</span>&nbsp;&nbsp;<span class="ident" id="6264083">true</span><span class="op" id="6264087">,</span><br>
<span class="lineno"></span><span class="op" id="6264089">}</span>
</div>
</body>
</html>
