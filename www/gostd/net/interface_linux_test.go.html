<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html" class="current">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6665134">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6665190">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6665244">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6665295">package</span>&nbsp;<span class="ident" id="6665303">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6665308">import</span>&nbsp;<span class="op" id="6665315">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6665318">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6665325">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6665336">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6665346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6665349">func</span>&nbsp;<span class="op" id="6665354">(</span><span class="ident" id="6665355">ti</span>&nbsp;<span class="op" id="6665358">*</span><span class="ident" id="6665359">testInterface</span><span class="op" id="6665372">)</span>&nbsp;<span class="ident" id="6665374">setBroadcast</span><span class="op" id="6665386">(</span><span class="ident" id="6665387">suffix</span>&nbsp;<span class="builtintype" id="6665394">int</span><span class="op" id="6665397">)</span>&nbsp;<span class="builtintype" id="6665399">error</span>&nbsp;<span class="op" id="6665405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665408">ti</span><span class="op" id="6665410">.</span><span class="ident" id="6665411">name</span>&nbsp;<span class="op" id="6665416">=</span>&nbsp;<span class="ident" id="6665418">fmt</span><span class="op" id="6665421">.</span><span class="ident" id="6665422">Sprintf</span><span class="op" id="6665429">(</span><span class="string" id="6665430">&#34;gotest%d&#34;</span><span class="op" id="6665440">,</span>&nbsp;<span class="ident" id="6665442">suffix</span><span class="op" id="6665448">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665451">xname</span><span class="op" id="6665456">,</span>&nbsp;<span class="ident" id="6665458">err</span>&nbsp;<span class="op" id="6665462">:=</span>&nbsp;<span class="ident" id="6665465">exec</span><span class="op" id="6665469">.</span><span class="ident" id="6665470">LookPath</span><span class="op" id="6665478">(</span><span class="string" id="6665479">&#34;ip&#34;</span><span class="op" id="6665483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6665486">if</span>&nbsp;<span class="ident" id="6665489">err</span>&nbsp;<span class="op" id="6665493">!=</span>&nbsp;<span class="builtintype" id="6665496">nil</span>&nbsp;<span class="op" id="6665500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6665504">return</span>&nbsp;<span class="ident" id="6665511">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6665516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665519">ti</span><span class="op" id="6665521">.</span><span class="ident" id="6665522">setupCmds</span>&nbsp;<span class="op" id="6665532">=</span>&nbsp;<span class="builtinfunc" id="6665534">append</span><span class="op" id="6665540">(</span><span class="ident" id="6665541">ti</span><span class="op" id="6665543">.</span><span class="ident" id="6665544">setupCmds</span><span class="op" id="6665553">,</span>&nbsp;<span class="op" id="6665555">&amp;</span><span class="ident" id="6665556">exec</span><span class="op" id="6665560">.</span><span class="ident" id="6665561">Cmd</span><span class="op" id="6665564">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665568">Path</span><span class="op" id="6665572">:</span>&nbsp;<span class="ident" id="6665574">xname</span><span class="op" id="6665579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665583">Args</span><span class="op" id="6665587">:</span>&nbsp;<span class="op" id="6665589">[</span><span class="op" id="6665590">]</span><span class="builtintype" id="6665591">string</span><span class="op" id="6665597">{</span><span class="string" id="6665598">&#34;ip&#34;</span><span class="op" id="6665602">,</span>&nbsp;<span class="string" id="6665604">&#34;link&#34;</span><span class="op" id="6665610">,</span>&nbsp;<span class="string" id="6665612">&#34;add&#34;</span><span class="op" id="6665617">,</span>&nbsp;<span class="ident" id="6665619">ti</span><span class="op" id="6665621">.</span><span class="ident" id="6665622">name</span><span class="op" id="6665626">,</span>&nbsp;<span class="string" id="6665628">&#34;type&#34;</span><span class="op" id="6665634">,</span>&nbsp;<span class="string" id="6665636">&#34;dummy&#34;</span><span class="op" id="6665643">}</span><span class="op" id="6665644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6665647">}</span><span class="op" id="6665648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665651">ti</span><span class="op" id="6665653">.</span><span class="ident" id="6665654">teardownCmds</span>&nbsp;<span class="op" id="6665667">=</span>&nbsp;<span class="builtinfunc" id="6665669">append</span><span class="op" id="6665675">(</span><span class="ident" id="6665676">ti</span><span class="op" id="6665678">.</span><span class="ident" id="6665679">teardownCmds</span><span class="op" id="6665691">,</span>&nbsp;<span class="op" id="6665693">&amp;</span><span class="ident" id="6665694">exec</span><span class="op" id="6665698">.</span><span class="ident" id="6665699">Cmd</span><span class="op" id="6665702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665706">Path</span><span class="op" id="6665710">:</span>&nbsp;<span class="ident" id="6665712">xname</span><span class="op" id="6665717">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665721">Args</span><span class="op" id="6665725">:</span>&nbsp;<span class="op" id="6665727">[</span><span class="op" id="6665728">]</span><span class="builtintype" id="6665729">string</span><span class="op" id="6665735">{</span><span class="string" id="6665736">&#34;ip&#34;</span><span class="op" id="6665740">,</span>&nbsp;<span class="string" id="6665742">&#34;link&#34;</span><span class="op" id="6665748">,</span>&nbsp;<span class="string" id="6665750">&#34;delete&#34;</span><span class="op" id="6665758">,</span>&nbsp;<span class="ident" id="6665760">ti</span><span class="op" id="6665762">.</span><span class="ident" id="6665763">name</span><span class="op" id="6665767">,</span>&nbsp;<span class="string" id="6665769">&#34;type&#34;</span><span class="op" id="6665775">,</span>&nbsp;<span class="string" id="6665777">&#34;dummy&#34;</span><span class="op" id="6665784">}</span><span class="op" id="6665785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6665788">}</span><span class="op" id="6665789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6665792">return</span>&nbsp;<span class="builtintype" id="6665799">nil</span><br>
<span class="lineno"></span><span class="op" id="6665803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6665806">func</span>&nbsp;<span class="op" id="6665811">(</span><span class="ident" id="6665812">ti</span>&nbsp;<span class="op" id="6665815">*</span><span class="ident" id="6665816">testInterface</span><span class="op" id="6665829">)</span>&nbsp;<span class="ident" id="6665831">setPointToPoint</span><span class="op" id="6665846">(</span><span class="ident" id="6665847">suffix</span>&nbsp;<span class="builtintype" id="6665854">int</span><span class="op" id="6665857">,</span>&nbsp;<span class="ident" id="6665859">local</span><span class="op" id="6665864">,</span>&nbsp;<span class="ident" id="6665866">remote</span>&nbsp;<span class="builtintype" id="6665873">string</span><span class="op" id="6665879">)</span>&nbsp;<span class="builtintype" id="6665881">error</span>&nbsp;<span class="op" id="6665887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665890">ti</span><span class="op" id="6665892">.</span><span class="ident" id="6665893">name</span>&nbsp;<span class="op" id="6665898">=</span>&nbsp;<span class="ident" id="6665900">fmt</span><span class="op" id="6665903">.</span><span class="ident" id="6665904">Sprintf</span><span class="op" id="6665911">(</span><span class="string" id="6665912">&#34;gotest%d&#34;</span><span class="op" id="6665922">,</span>&nbsp;<span class="ident" id="6665924">suffix</span><span class="op" id="6665930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665933">ti</span><span class="op" id="6665935">.</span><span class="ident" id="6665936">local</span>&nbsp;<span class="op" id="6665942">=</span>&nbsp;<span class="ident" id="6665944">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665951">ti</span><span class="op" id="6665953">.</span><span class="ident" id="6665954">remote</span>&nbsp;<span class="op" id="6665961">=</span>&nbsp;<span class="ident" id="6665963">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665971">xname</span><span class="op" id="6665976">,</span>&nbsp;<span class="ident" id="6665978">err</span>&nbsp;<span class="op" id="6665982">:=</span>&nbsp;<span class="ident" id="6665985">exec</span><span class="op" id="6665989">.</span><span class="ident" id="6665990">LookPath</span><span class="op" id="6665998">(</span><span class="string" id="6665999">&#34;ip&#34;</span><span class="op" id="6666003">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6666006">if</span>&nbsp;<span class="ident" id="6666009">err</span>&nbsp;<span class="op" id="6666013">!=</span>&nbsp;<span class="builtintype" id="6666016">nil</span>&nbsp;<span class="op" id="6666020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6666024">return</span>&nbsp;<span class="ident" id="6666031">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666039">ti</span><span class="op" id="6666041">.</span><span class="ident" id="6666042">setupCmds</span>&nbsp;<span class="op" id="6666052">=</span>&nbsp;<span class="builtinfunc" id="6666054">append</span><span class="op" id="6666060">(</span><span class="ident" id="6666061">ti</span><span class="op" id="6666063">.</span><span class="ident" id="6666064">setupCmds</span><span class="op" id="6666073">,</span>&nbsp;<span class="op" id="6666075">&amp;</span><span class="ident" id="6666076">exec</span><span class="op" id="6666080">.</span><span class="ident" id="6666081">Cmd</span><span class="op" id="6666084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666088">Path</span><span class="op" id="6666092">:</span>&nbsp;<span class="ident" id="6666094">xname</span><span class="op" id="6666099">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666103">Args</span><span class="op" id="6666107">:</span>&nbsp;<span class="op" id="6666109">[</span><span class="op" id="6666110">]</span><span class="builtintype" id="6666111">string</span><span class="op" id="6666117">{</span><span class="string" id="6666118">&#34;ip&#34;</span><span class="op" id="6666122">,</span>&nbsp;<span class="string" id="6666124">&#34;tunnel&#34;</span><span class="op" id="6666132">,</span>&nbsp;<span class="string" id="6666134">&#34;add&#34;</span><span class="op" id="6666139">,</span>&nbsp;<span class="ident" id="6666141">ti</span><span class="op" id="6666143">.</span><span class="ident" id="6666144">name</span><span class="op" id="6666148">,</span>&nbsp;<span class="string" id="6666150">&#34;mode&#34;</span><span class="op" id="6666156">,</span>&nbsp;<span class="string" id="6666158">&#34;gre&#34;</span><span class="op" id="6666163">,</span>&nbsp;<span class="string" id="6666165">&#34;local&#34;</span><span class="op" id="6666172">,</span>&nbsp;<span class="ident" id="6666174">local</span><span class="op" id="6666179">,</span>&nbsp;<span class="string" id="6666181">&#34;remote&#34;</span><span class="op" id="6666189">,</span>&nbsp;<span class="ident" id="6666191">remote</span><span class="op" id="6666197">}</span><span class="op" id="6666198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666201">}</span><span class="op" id="6666202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666205">ti</span><span class="op" id="6666207">.</span><span class="ident" id="6666208">teardownCmds</span>&nbsp;<span class="op" id="6666221">=</span>&nbsp;<span class="builtinfunc" id="6666223">append</span><span class="op" id="6666229">(</span><span class="ident" id="6666230">ti</span><span class="op" id="6666232">.</span><span class="ident" id="6666233">teardownCmds</span><span class="op" id="6666245">,</span>&nbsp;<span class="op" id="6666247">&amp;</span><span class="ident" id="6666248">exec</span><span class="op" id="6666252">.</span><span class="ident" id="6666253">Cmd</span><span class="op" id="6666256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666260">Path</span><span class="op" id="6666264">:</span>&nbsp;<span class="ident" id="6666266">xname</span><span class="op" id="6666271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666275">Args</span><span class="op" id="6666279">:</span>&nbsp;<span class="op" id="6666281">[</span><span class="op" id="6666282">]</span><span class="builtintype" id="6666283">string</span><span class="op" id="6666289">{</span><span class="string" id="6666290">&#34;ip&#34;</span><span class="op" id="6666294">,</span>&nbsp;<span class="string" id="6666296">&#34;tunnel&#34;</span><span class="op" id="6666304">,</span>&nbsp;<span class="string" id="6666306">&#34;del&#34;</span><span class="op" id="6666311">,</span>&nbsp;<span class="ident" id="6666313">ti</span><span class="op" id="6666315">.</span><span class="ident" id="6666316">name</span><span class="op" id="6666320">,</span>&nbsp;<span class="string" id="6666322">&#34;mode&#34;</span><span class="op" id="6666328">,</span>&nbsp;<span class="string" id="6666330">&#34;gre&#34;</span><span class="op" id="6666335">,</span>&nbsp;<span class="string" id="6666337">&#34;local&#34;</span><span class="op" id="6666344">,</span>&nbsp;<span class="ident" id="6666346">local</span><span class="op" id="6666351">,</span>&nbsp;<span class="string" id="6666353">&#34;remote&#34;</span><span class="op" id="6666361">,</span>&nbsp;<span class="ident" id="6666363">remote</span><span class="op" id="6666369">}</span><span class="op" id="6666370">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666373">}</span><span class="op" id="6666374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666377">xname</span><span class="op" id="6666382">,</span>&nbsp;<span class="ident" id="6666384">err</span>&nbsp;<span class="op" id="6666388">=</span>&nbsp;<span class="ident" id="6666390">exec</span><span class="op" id="6666394">.</span><span class="ident" id="6666395">LookPath</span><span class="op" id="6666403">(</span><span class="string" id="6666404">&#34;ifconfig&#34;</span><span class="op" id="6666414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6666417">if</span>&nbsp;<span class="ident" id="6666420">err</span>&nbsp;<span class="op" id="6666424">!=</span>&nbsp;<span class="builtintype" id="6666427">nil</span>&nbsp;<span class="op" id="6666431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6666435">return</span>&nbsp;<span class="ident" id="6666442">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666447">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666450">ti</span><span class="op" id="6666452">.</span><span class="ident" id="6666453">setupCmds</span>&nbsp;<span class="op" id="6666463">=</span>&nbsp;<span class="builtinfunc" id="6666465">append</span><span class="op" id="6666471">(</span><span class="ident" id="6666472">ti</span><span class="op" id="6666474">.</span><span class="ident" id="6666475">setupCmds</span><span class="op" id="6666484">,</span>&nbsp;<span class="op" id="6666486">&amp;</span><span class="ident" id="6666487">exec</span><span class="op" id="6666491">.</span><span class="ident" id="6666492">Cmd</span><span class="op" id="6666495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666499">Path</span><span class="op" id="6666503">:</span>&nbsp;<span class="ident" id="6666505">xname</span><span class="op" id="6666510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666514">Args</span><span class="op" id="6666518">:</span>&nbsp;<span class="op" id="6666520">[</span><span class="op" id="6666521">]</span><span class="builtintype" id="6666522">string</span><span class="op" id="6666528">{</span><span class="string" id="6666529">&#34;ifconfig&#34;</span><span class="op" id="6666539">,</span>&nbsp;<span class="ident" id="6666541">ti</span><span class="op" id="6666543">.</span><span class="ident" id="6666544">name</span><span class="op" id="6666548">,</span>&nbsp;<span class="string" id="6666550">&#34;inet&#34;</span><span class="op" id="6666556">,</span>&nbsp;<span class="ident" id="6666558">local</span><span class="op" id="6666563">,</span>&nbsp;<span class="string" id="6666565">&#34;dstaddr&#34;</span><span class="op" id="6666574">,</span>&nbsp;<span class="ident" id="6666576">remote</span><span class="op" id="6666582">}</span><span class="op" id="6666583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666586">}</span><span class="op" id="6666587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6666590">return</span>&nbsp;<span class="builtintype" id="6666597">nil</span><br>
<span class="lineno">55</span><span class="op" id="6666601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6666604">const</span>&nbsp;<span class="op" id="6666610">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666613">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6666634">=</span>&nbsp;<span class="num" id="6666636">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666640">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6666661">=</span>&nbsp;<span class="num" id="6666663">18</span><br>
<span class="lineno">60</span><span class="op" id="6666666">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6666669">var</span>&nbsp;<span class="op" id="6666673">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666676">igmpInterfaceTable</span>&nbsp;<span class="op" id="6666695">=</span>&nbsp;<span class="op" id="6666697">[</span><span class="op" id="6666698">]</span><span class="ident" id="6666699">Interface</span><span class="op" id="6666708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666712">{</span><span class="ident" id="6666713">Name</span><span class="op" id="6666717">:</span>&nbsp;<span class="string" id="6666719">&#34;lo&#34;</span><span class="op" id="6666723">}</span><span class="op" id="6666724">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666728">{</span><span class="ident" id="6666729">Name</span><span class="op" id="6666733">:</span>&nbsp;<span class="string" id="6666735">&#34;eth0&#34;</span><span class="op" id="6666741">}</span><span class="op" id="6666742">,</span>&nbsp;<span class="op" id="6666744">{</span><span class="ident" id="6666745">Name</span><span class="op" id="6666749">:</span>&nbsp;<span class="string" id="6666751">&#34;eth1&#34;</span><span class="op" id="6666757">}</span><span class="op" id="6666758">,</span>&nbsp;<span class="op" id="6666760">{</span><span class="ident" id="6666761">Name</span><span class="op" id="6666765">:</span>&nbsp;<span class="string" id="6666767">&#34;eth2&#34;</span><span class="op" id="6666773">}</span><span class="op" id="6666774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666778">{</span><span class="ident" id="6666779">Name</span><span class="op" id="6666783">:</span>&nbsp;<span class="string" id="6666785">&#34;eth0.100&#34;</span><span class="op" id="6666795">}</span><span class="op" id="6666796">,</span>&nbsp;<span class="op" id="6666798">{</span><span class="ident" id="6666799">Name</span><span class="op" id="6666803">:</span>&nbsp;<span class="string" id="6666805">&#34;eth0.101&#34;</span><span class="op" id="6666815">}</span><span class="op" id="6666816">,</span>&nbsp;<span class="op" id="6666818">{</span><span class="ident" id="6666819">Name</span><span class="op" id="6666823">:</span>&nbsp;<span class="string" id="6666825">&#34;eth0.102&#34;</span><span class="op" id="6666835">}</span><span class="op" id="6666836">,</span>&nbsp;<span class="op" id="6666838">{</span><span class="ident" id="6666839">Name</span><span class="op" id="6666843">:</span>&nbsp;<span class="string" id="6666845">&#34;eth0.103&#34;</span><span class="op" id="6666855">}</span><span class="op" id="6666856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666860">{</span><span class="ident" id="6666861">Name</span><span class="op" id="6666865">:</span>&nbsp;<span class="string" id="6666867">&#34;device1tap2&#34;</span><span class="op" id="6666880">}</span><span class="op" id="6666881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6666887">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6666907">=</span>&nbsp;<span class="op" id="6666909">[</span><span class="op" id="6666910">]</span><span class="ident" id="6666911">Interface</span><span class="op" id="6666920">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666924">{</span><span class="ident" id="6666925">Name</span><span class="op" id="6666929">:</span>&nbsp;<span class="string" id="6666931">&#34;lo&#34;</span><span class="op" id="6666935">}</span><span class="op" id="6666936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666940">{</span><span class="ident" id="6666941">Name</span><span class="op" id="6666945">:</span>&nbsp;<span class="string" id="6666947">&#34;eth0&#34;</span><span class="op" id="6666953">}</span><span class="op" id="6666954">,</span>&nbsp;<span class="op" id="6666956">{</span><span class="ident" id="6666957">Name</span><span class="op" id="6666961">:</span>&nbsp;<span class="string" id="6666963">&#34;eth1&#34;</span><span class="op" id="6666969">}</span><span class="op" id="6666970">,</span>&nbsp;<span class="op" id="6666972">{</span><span class="ident" id="6666973">Name</span><span class="op" id="6666977">:</span>&nbsp;<span class="string" id="6666979">&#34;eth2&#34;</span><span class="op" id="6666985">}</span><span class="op" id="6666986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6666990">{</span><span class="ident" id="6666991">Name</span><span class="op" id="6666995">:</span>&nbsp;<span class="string" id="6666997">&#34;eth0.100&#34;</span><span class="op" id="6667007">}</span><span class="op" id="6667008">,</span>&nbsp;<span class="op" id="6667010">{</span><span class="ident" id="6667011">Name</span><span class="op" id="6667015">:</span>&nbsp;<span class="string" id="6667017">&#34;eth0.101&#34;</span><span class="op" id="6667027">}</span><span class="op" id="6667028">,</span>&nbsp;<span class="op" id="6667030">{</span><span class="ident" id="6667031">Name</span><span class="op" id="6667035">:</span>&nbsp;<span class="string" id="6667037">&#34;eth0.102&#34;</span><span class="op" id="6667047">}</span><span class="op" id="6667048">,</span>&nbsp;<span class="op" id="6667050">{</span><span class="ident" id="6667051">Name</span><span class="op" id="6667055">:</span>&nbsp;<span class="string" id="6667057">&#34;eth0.103&#34;</span><span class="op" id="6667067">}</span><span class="op" id="6667068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667072">{</span><span class="ident" id="6667073">Name</span><span class="op" id="6667077">:</span>&nbsp;<span class="string" id="6667079">&#34;device1tap2&#34;</span><span class="op" id="6667092">}</span><span class="op" id="6667093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667097">{</span><span class="ident" id="6667098">Name</span><span class="op" id="6667102">:</span>&nbsp;<span class="string" id="6667104">&#34;pan0&#34;</span><span class="op" id="6667110">}</span><span class="op" id="6667111">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667114">}</span><br>
<span class="lineno"></span><span class="op" id="6667116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6667119">func</span>&nbsp;<span class="ident" id="6667124">TestParseProcNet</span><span class="op" id="6667140">(</span><span class="ident" id="6667141">t</span>&nbsp;<span class="op" id="6667143">*</span><span class="ident" id="6667144">testing</span><span class="op" id="6667151">.</span><span class="ident" id="6667152">T</span><span class="op" id="6667153">)</span>&nbsp;<span class="op" id="6667155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667158">defer</span>&nbsp;<span class="keyword" id="6667164">func</span><span class="op" id="6667168">(</span><span class="op" id="6667169">)</span>&nbsp;<span class="op" id="6667171">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667175">if</span>&nbsp;<span class="ident" id="6667178">p</span>&nbsp;<span class="op" id="6667180">:=</span>&nbsp;<span class="builtinfunc" id="6667183">recover</span><span class="op" id="6667190">(</span><span class="op" id="6667191">)</span><span class="op" id="6667192">;</span>&nbsp;<span class="ident" id="6667194">p</span>&nbsp;<span class="op" id="6667196">!=</span>&nbsp;<span class="builtintype" id="6667199">nil</span>&nbsp;<span class="op" id="6667203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667208">t</span><span class="op" id="6667209">.</span><span class="ident" id="6667210">Fatalf</span><span class="op" id="6667216">(</span><span class="string" id="6667217">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6667269">,</span>&nbsp;<span class="ident" id="6667271">p</span><span class="op" id="6667272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667279">}</span><span class="op" id="6667280">(</span><span class="op" id="6667281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667285">var</span>&nbsp;<span class="ident" id="6667289">ifmat4</span>&nbsp;<span class="op" id="6667296">[</span><span class="op" id="6667297">]</span><span class="ident" id="6667298">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667304">for</span>&nbsp;<span class="ident" id="6667308">_</span><span class="op" id="6667309">,</span>&nbsp;<span class="ident" id="6667311">ifi</span>&nbsp;<span class="op" id="6667315">:=</span>&nbsp;<span class="keyword" id="6667318">range</span>&nbsp;<span class="ident" id="6667324">igmpInterfaceTable</span>&nbsp;<span class="op" id="6667343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667347">ifmat</span>&nbsp;<span class="op" id="6667353">:=</span>&nbsp;<span class="ident" id="6667356">parseProcNetIGMP</span><span class="op" id="6667372">(</span><span class="string" id="6667373">&#34;testdata/igmp&#34;</span><span class="op" id="6667388">,</span>&nbsp;<span class="op" id="6667390">&amp;</span><span class="ident" id="6667391">ifi</span><span class="op" id="6667394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667398">ifmat4</span>&nbsp;<span class="op" id="6667405">=</span>&nbsp;<span class="builtinfunc" id="6667407">append</span><span class="op" id="6667413">(</span><span class="ident" id="6667414">ifmat4</span><span class="op" id="6667420">,</span>&nbsp;<span class="ident" id="6667422">ifmat</span><span class="op" id="6667427">...</span><span class="op" id="6667430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667433">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667436">if</span>&nbsp;<span class="builtinfunc" id="6667439">len</span><span class="op" id="6667442">(</span><span class="ident" id="6667443">ifmat4</span><span class="op" id="6667449">)</span>&nbsp;<span class="op" id="6667451">!=</span>&nbsp;<span class="ident" id="6667454">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="6667475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667479">t</span><span class="op" id="6667480">.</span><span class="ident" id="6667481">Fatalf</span><span class="op" id="6667487">(</span><span class="string" id="6667488">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6667540">,</span>&nbsp;<span class="builtinfunc" id="6667542">len</span><span class="op" id="6667545">(</span><span class="ident" id="6667546">ifmat4</span><span class="op" id="6667552">)</span><span class="op" id="6667553">,</span>&nbsp;<span class="ident" id="6667555">numOfTestIPv4MCAddrs</span><span class="op" id="6667575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667582">var</span>&nbsp;<span class="ident" id="6667586">ifmat6</span>&nbsp;<span class="op" id="6667593">[</span><span class="op" id="6667594">]</span><span class="ident" id="6667595">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667601">for</span>&nbsp;<span class="ident" id="6667605">_</span><span class="op" id="6667606">,</span>&nbsp;<span class="ident" id="6667608">ifi</span>&nbsp;<span class="op" id="6667612">:=</span>&nbsp;<span class="keyword" id="6667615">range</span>&nbsp;<span class="ident" id="6667621">igmp6InterfaceTable</span>&nbsp;<span class="op" id="6667641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667645">ifmat</span>&nbsp;<span class="op" id="6667651">:=</span>&nbsp;<span class="ident" id="6667654">parseProcNetIGMP6</span><span class="op" id="6667671">(</span><span class="string" id="6667672">&#34;testdata/igmp6&#34;</span><span class="op" id="6667688">,</span>&nbsp;<span class="op" id="6667690">&amp;</span><span class="ident" id="6667691">ifi</span><span class="op" id="6667694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667698">ifmat6</span>&nbsp;<span class="op" id="6667705">=</span>&nbsp;<span class="builtinfunc" id="6667707">append</span><span class="op" id="6667713">(</span><span class="ident" id="6667714">ifmat6</span><span class="op" id="6667720">,</span>&nbsp;<span class="ident" id="6667722">ifmat</span><span class="op" id="6667727">...</span><span class="op" id="6667730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6667736">if</span>&nbsp;<span class="builtinfunc" id="6667739">len</span><span class="op" id="6667742">(</span><span class="ident" id="6667743">ifmat6</span><span class="op" id="6667749">)</span>&nbsp;<span class="op" id="6667751">!=</span>&nbsp;<span class="ident" id="6667754">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="6667775">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6667779">t</span><span class="op" id="6667780">.</span><span class="ident" id="6667781">Fatalf</span><span class="op" id="6667787">(</span><span class="string" id="6667788">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6667841">,</span>&nbsp;<span class="builtinfunc" id="6667843">len</span><span class="op" id="6667846">(</span><span class="ident" id="6667847">ifmat6</span><span class="op" id="6667853">)</span><span class="op" id="6667854">,</span>&nbsp;<span class="ident" id="6667856">numOfTestIPv6MCAddrs</span><span class="op" id="6667876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6667879">}</span><br>
<span class="lineno"></span><span class="op" id="6667881">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
