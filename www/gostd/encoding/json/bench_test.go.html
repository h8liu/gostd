<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8583156">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8583212">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8583266">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8583317">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="8583342">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8583396">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="8583446">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="8583495">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8583530">package</span>&nbsp;<span class="ident" id="8583538">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8583544">import</span>&nbsp;<span class="op" id="8583551">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8583554">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8583563">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8583580">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8583593">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8583599">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8583609">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8583612">type</span>&nbsp;<span class="ident" id="8583617">codeResponse</span>&nbsp;<span class="keyword" id="8583630">struct</span>&nbsp;<span class="op" id="8583637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583640">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8583649">*</span><span class="ident" id="8583650">codeNode</span>&nbsp;<span class="string" id="8583659">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583674">Username</span>&nbsp;<span class="builtintype" id="8583683">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583693">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8583711">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8583714">type</span>&nbsp;<span class="ident" id="8583719">codeNode</span>&nbsp;<span class="keyword" id="8583728">struct</span>&nbsp;<span class="op" id="8583735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583738">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8583747">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583759">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583774">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8583783">[</span><span class="op" id="8583784">]</span><span class="op" id="8583785">*</span><span class="ident" id="8583786">codeNode</span>&nbsp;<span class="string" id="8583795">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583810">CLWeight</span>&nbsp;<span class="builtintype" id="8583819">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583831">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583851">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="8583860">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583872">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583890">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8583899">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583911">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583927">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8583936">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583948">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8583964">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8583973">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8583985">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8584001">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8584004">var</span>&nbsp;<span class="ident" id="8584008">codeJSON</span>&nbsp;<span class="op" id="8584017">[</span><span class="op" id="8584018">]</span><span class="builtintype" id="8584019">byte</span><br>
<span class="lineno"></span><span class="keyword" id="8584024">var</span>&nbsp;<span class="ident" id="8584028">codeStruct</span>&nbsp;<span class="ident" id="8584039">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8584053">func</span>&nbsp;<span class="ident" id="8584058">codeInit</span><span class="op" id="8584066">(</span><span class="op" id="8584067">)</span>&nbsp;<span class="op" id="8584069">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8584072">f</span><span class="op" id="8584073">,</span>&nbsp;<span class="ident" id="8584075">err</span>&nbsp;<span class="op" id="8584079">:=</span>&nbsp;<span class="ident" id="8584082">os</span><span class="op" id="8584084">.</span><span class="ident" id="8584085">Open</span><span class="op" id="8584089">(</span><span class="string" id="8584090">&#34;testdata/code.json.gz&#34;</span><span class="op" id="8584113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584116">if</span>&nbsp;<span class="ident" id="8584119">err</span>&nbsp;<span class="op" id="8584123">!=</span>&nbsp;<span class="ident" id="8584126">nil</span>&nbsp;<span class="op" id="8584130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584134">panic</span><span class="op" id="8584139">(</span><span class="ident" id="8584140">err</span><span class="op" id="8584143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584149">defer</span>&nbsp;<span class="ident" id="8584155">f</span><span class="op" id="8584156">.</span><span class="ident" id="8584157">Close</span><span class="op" id="8584162">(</span><span class="op" id="8584163">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8584166">gz</span><span class="op" id="8584168">,</span>&nbsp;<span class="ident" id="8584170">err</span>&nbsp;<span class="op" id="8584174">:=</span>&nbsp;<span class="ident" id="8584177">gzip</span><span class="op" id="8584181">.</span><span class="ident" id="8584182">NewReader</span><span class="op" id="8584191">(</span><span class="ident" id="8584192">f</span><span class="op" id="8584193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584196">if</span>&nbsp;<span class="ident" id="8584199">err</span>&nbsp;<span class="op" id="8584203">!=</span>&nbsp;<span class="ident" id="8584206">nil</span>&nbsp;<span class="op" id="8584210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584214">panic</span><span class="op" id="8584219">(</span><span class="ident" id="8584220">err</span><span class="op" id="8584223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8584229">data</span><span class="op" id="8584233">,</span>&nbsp;<span class="ident" id="8584235">err</span>&nbsp;<span class="op" id="8584239">:=</span>&nbsp;<span class="ident" id="8584242">ioutil</span><span class="op" id="8584248">.</span><span class="ident" id="8584249">ReadAll</span><span class="op" id="8584256">(</span><span class="ident" id="8584257">gz</span><span class="op" id="8584259">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584262">if</span>&nbsp;<span class="ident" id="8584265">err</span>&nbsp;<span class="op" id="8584269">!=</span>&nbsp;<span class="ident" id="8584272">nil</span>&nbsp;<span class="op" id="8584276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584280">panic</span><span class="op" id="8584285">(</span><span class="ident" id="8584286">err</span><span class="op" id="8584289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8584296">codeJSON</span>&nbsp;<span class="op" id="8584305">=</span>&nbsp;<span class="ident" id="8584307">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584314">if</span>&nbsp;<span class="ident" id="8584317">err</span>&nbsp;<span class="op" id="8584321">:=</span>&nbsp;<span class="ident" id="8584324">Unmarshal</span><span class="op" id="8584333">(</span><span class="ident" id="8584334">codeJSON</span><span class="op" id="8584342">,</span>&nbsp;<span class="op" id="8584344">&amp;</span><span class="ident" id="8584345">codeStruct</span><span class="op" id="8584355">)</span><span class="op" id="8584356">;</span>&nbsp;<span class="ident" id="8584358">err</span>&nbsp;<span class="op" id="8584362">!=</span>&nbsp;<span class="ident" id="8584365">nil</span>&nbsp;<span class="op" id="8584369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584373">panic</span><span class="op" id="8584378">(</span><span class="string" id="8584379">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8584403">+</span>&nbsp;<span class="ident" id="8584405">err</span><span class="op" id="8584408">.</span><span class="ident" id="8584409">Error</span><span class="op" id="8584414">(</span><span class="op" id="8584415">)</span><span class="op" id="8584416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584423">if</span>&nbsp;<span class="ident" id="8584426">data</span><span class="op" id="8584430">,</span>&nbsp;<span class="ident" id="8584432">err</span>&nbsp;<span class="op" id="8584436">=</span>&nbsp;<span class="ident" id="8584438">Marshal</span><span class="op" id="8584445">(</span><span class="op" id="8584446">&amp;</span><span class="ident" id="8584447">codeStruct</span><span class="op" id="8584457">)</span><span class="op" id="8584458">;</span>&nbsp;<span class="ident" id="8584460">err</span>&nbsp;<span class="op" id="8584464">!=</span>&nbsp;<span class="ident" id="8584467">nil</span>&nbsp;<span class="op" id="8584471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584475">panic</span><span class="op" id="8584480">(</span><span class="string" id="8584481">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8584503">+</span>&nbsp;<span class="ident" id="8584505">err</span><span class="op" id="8584508">.</span><span class="ident" id="8584509">Error</span><span class="op" id="8584514">(</span><span class="op" id="8584515">)</span><span class="op" id="8584516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584523">if</span>&nbsp;<span class="op" id="8584526">!</span><span class="ident" id="8584527">bytes</span><span class="op" id="8584532">.</span><span class="ident" id="8584533">Equal</span><span class="op" id="8584538">(</span><span class="ident" id="8584539">data</span><span class="op" id="8584543">,</span>&nbsp;<span class="ident" id="8584545">codeJSON</span><span class="op" id="8584553">)</span>&nbsp;<span class="op" id="8584555">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584559">println</span><span class="op" id="8584566">(</span><span class="string" id="8584567">&#34;different&nbsp;lengths&#34;</span><span class="op" id="8584586">,</span>&nbsp;<span class="builtinfunc" id="8584588">len</span><span class="op" id="8584591">(</span><span class="ident" id="8584592">data</span><span class="op" id="8584596">)</span><span class="op" id="8584597">,</span>&nbsp;<span class="builtinfunc" id="8584599">len</span><span class="op" id="8584602">(</span><span class="ident" id="8584603">codeJSON</span><span class="op" id="8584611">)</span><span class="op" id="8584612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584616">for</span>&nbsp;<span class="ident" id="8584620">i</span>&nbsp;<span class="op" id="8584622">:=</span>&nbsp;<span class="num" id="8584625">0</span><span class="op" id="8584626">;</span>&nbsp;<span class="ident" id="8584628">i</span>&nbsp;<span class="op" id="8584630">&lt;</span>&nbsp;<span class="builtinfunc" id="8584632">len</span><span class="op" id="8584635">(</span><span class="ident" id="8584636">data</span><span class="op" id="8584640">)</span>&nbsp;<span class="op" id="8584642">&amp;&amp;</span>&nbsp;<span class="ident" id="8584645">i</span>&nbsp;<span class="op" id="8584647">&lt;</span>&nbsp;<span class="builtinfunc" id="8584649">len</span><span class="op" id="8584652">(</span><span class="ident" id="8584653">codeJSON</span><span class="op" id="8584661">)</span><span class="op" id="8584662">;</span>&nbsp;<span class="ident" id="8584664">i</span><span class="op" id="8584665">++</span>&nbsp;<span class="op" id="8584668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584673">if</span>&nbsp;<span class="ident" id="8584676">data</span><span class="op" id="8584680">[</span><span class="ident" id="8584681">i</span><span class="op" id="8584682">]</span>&nbsp;<span class="op" id="8584684">!=</span>&nbsp;<span class="ident" id="8584687">codeJSON</span><span class="op" id="8584695">[</span><span class="ident" id="8584696">i</span><span class="op" id="8584697">]</span>&nbsp;<span class="op" id="8584699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584705">println</span><span class="op" id="8584712">(</span><span class="string" id="8584713">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="8584742">,</span>&nbsp;<span class="ident" id="8584744">i</span><span class="op" id="8584745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584751">println</span><span class="op" id="8584758">(</span><span class="string" id="8584759">&#34;orig:&nbsp;&#34;</span><span class="op" id="8584767">,</span>&nbsp;<span class="builtintype" id="8584769">string</span><span class="op" id="8584775">(</span><span class="ident" id="8584776">codeJSON</span><span class="op" id="8584784">[</span><span class="ident" id="8584785">i</span><span class="op" id="8584786">-</span><span class="num" id="8584787">10</span><span class="op" id="8584789">:</span><span class="ident" id="8584790">i</span><span class="op" id="8584791">+</span><span class="num" id="8584792">10</span><span class="op" id="8584794">]</span><span class="op" id="8584795">)</span><span class="op" id="8584796">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584802">println</span><span class="op" id="8584809">(</span><span class="string" id="8584810">&#34;new:&nbsp;&#34;</span><span class="op" id="8584817">,</span>&nbsp;<span class="builtintype" id="8584819">string</span><span class="op" id="8584825">(</span><span class="ident" id="8584826">data</span><span class="op" id="8584830">[</span><span class="ident" id="8584831">i</span><span class="op" id="8584832">-</span><span class="num" id="8584833">10</span><span class="op" id="8584835">:</span><span class="ident" id="8584836">i</span><span class="op" id="8584837">+</span><span class="num" id="8584838">10</span><span class="op" id="8584840">]</span><span class="op" id="8584841">)</span><span class="op" id="8584842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584848">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8584865">panic</span><span class="op" id="8584870">(</span><span class="string" id="8584871">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="8584911">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8584914">}</span><br>
<span class="lineno"></span><span class="op" id="8584916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8584919">func</span>&nbsp;<span class="ident" id="8584924">BenchmarkCodeEncoder</span><span class="op" id="8584944">(</span><span class="ident" id="8584945">b</span>&nbsp;<span class="op" id="8584947">*</span><span class="ident" id="8584948">testing</span><span class="op" id="8584955">.</span><span class="ident" id="8584956">B</span><span class="op" id="8584957">)</span>&nbsp;<span class="op" id="8584959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584962">if</span>&nbsp;<span class="ident" id="8584965">codeJSON</span>&nbsp;<span class="op" id="8584974">==</span>&nbsp;<span class="ident" id="8584977">nil</span>&nbsp;<span class="op" id="8584981">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8584985">b</span><span class="op" id="8584986">.</span><span class="ident" id="8584987">StopTimer</span><span class="op" id="8584996">(</span><span class="op" id="8584997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585001">codeInit</span><span class="op" id="8585009">(</span><span class="op" id="8585010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585014">b</span><span class="op" id="8585015">.</span><span class="ident" id="8585016">StartTimer</span><span class="op" id="8585026">(</span><span class="op" id="8585027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585033">enc</span>&nbsp;<span class="op" id="8585037">:=</span>&nbsp;<span class="ident" id="8585040">NewEncoder</span><span class="op" id="8585050">(</span><span class="ident" id="8585051">ioutil</span><span class="op" id="8585057">.</span><span class="ident" id="8585058">Discard</span><span class="op" id="8585065">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585068">for</span>&nbsp;<span class="ident" id="8585072">i</span>&nbsp;<span class="op" id="8585074">:=</span>&nbsp;<span class="num" id="8585077">0</span><span class="op" id="8585078">;</span>&nbsp;<span class="ident" id="8585080">i</span>&nbsp;<span class="op" id="8585082">&lt;</span>&nbsp;<span class="ident" id="8585084">b</span><span class="op" id="8585085">.</span><span class="ident" id="8585086">N</span><span class="op" id="8585087">;</span>&nbsp;<span class="ident" id="8585089">i</span><span class="op" id="8585090">++</span>&nbsp;<span class="op" id="8585093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585097">if</span>&nbsp;<span class="ident" id="8585100">err</span>&nbsp;<span class="op" id="8585104">:=</span>&nbsp;<span class="ident" id="8585107">enc</span><span class="op" id="8585110">.</span><span class="ident" id="8585111">Encode</span><span class="op" id="8585117">(</span><span class="op" id="8585118">&amp;</span><span class="ident" id="8585119">codeStruct</span><span class="op" id="8585129">)</span><span class="op" id="8585130">;</span>&nbsp;<span class="ident" id="8585132">err</span>&nbsp;<span class="op" id="8585136">!=</span>&nbsp;<span class="ident" id="8585139">nil</span>&nbsp;<span class="op" id="8585143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585148">b</span><span class="op" id="8585149">.</span><span class="ident" id="8585150">Fatal</span><span class="op" id="8585155">(</span><span class="string" id="8585156">&#34;Encode:&#34;</span><span class="op" id="8585165">,</span>&nbsp;<span class="ident" id="8585167">err</span><span class="op" id="8585170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585177">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585180">b</span><span class="op" id="8585181">.</span><span class="ident" id="8585182">SetBytes</span><span class="op" id="8585190">(</span><span class="ident" id="8585191">int64</span><span class="op" id="8585196">(</span><span class="builtinfunc" id="8585197">len</span><span class="op" id="8585200">(</span><span class="ident" id="8585201">codeJSON</span><span class="op" id="8585209">)</span><span class="op" id="8585210">)</span><span class="op" id="8585211">)</span><br>
<span class="lineno"></span><span class="op" id="8585213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8585216">func</span>&nbsp;<span class="ident" id="8585221">BenchmarkCodeMarshal</span><span class="op" id="8585241">(</span><span class="ident" id="8585242">b</span>&nbsp;<span class="op" id="8585244">*</span><span class="ident" id="8585245">testing</span><span class="op" id="8585252">.</span><span class="ident" id="8585253">B</span><span class="op" id="8585254">)</span>&nbsp;<span class="op" id="8585256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585259">if</span>&nbsp;<span class="ident" id="8585262">codeJSON</span>&nbsp;<span class="op" id="8585271">==</span>&nbsp;<span class="ident" id="8585274">nil</span>&nbsp;<span class="op" id="8585278">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585282">b</span><span class="op" id="8585283">.</span><span class="ident" id="8585284">StopTimer</span><span class="op" id="8585293">(</span><span class="op" id="8585294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585298">codeInit</span><span class="op" id="8585306">(</span><span class="op" id="8585307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585311">b</span><span class="op" id="8585312">.</span><span class="ident" id="8585313">StartTimer</span><span class="op" id="8585323">(</span><span class="op" id="8585324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585330">for</span>&nbsp;<span class="ident" id="8585334">i</span>&nbsp;<span class="op" id="8585336">:=</span>&nbsp;<span class="num" id="8585339">0</span><span class="op" id="8585340">;</span>&nbsp;<span class="ident" id="8585342">i</span>&nbsp;<span class="op" id="8585344">&lt;</span>&nbsp;<span class="ident" id="8585346">b</span><span class="op" id="8585347">.</span><span class="ident" id="8585348">N</span><span class="op" id="8585349">;</span>&nbsp;<span class="ident" id="8585351">i</span><span class="op" id="8585352">++</span>&nbsp;<span class="op" id="8585355">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585359">if</span>&nbsp;<span class="ident" id="8585362">_</span><span class="op" id="8585363">,</span>&nbsp;<span class="ident" id="8585365">err</span>&nbsp;<span class="op" id="8585369">:=</span>&nbsp;<span class="ident" id="8585372">Marshal</span><span class="op" id="8585379">(</span><span class="op" id="8585380">&amp;</span><span class="ident" id="8585381">codeStruct</span><span class="op" id="8585391">)</span><span class="op" id="8585392">;</span>&nbsp;<span class="ident" id="8585394">err</span>&nbsp;<span class="op" id="8585398">!=</span>&nbsp;<span class="ident" id="8585401">nil</span>&nbsp;<span class="op" id="8585405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585410">b</span><span class="op" id="8585411">.</span><span class="ident" id="8585412">Fatal</span><span class="op" id="8585417">(</span><span class="string" id="8585418">&#34;Marshal:&#34;</span><span class="op" id="8585428">,</span>&nbsp;<span class="ident" id="8585430">err</span><span class="op" id="8585433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585443">b</span><span class="op" id="8585444">.</span><span class="ident" id="8585445">SetBytes</span><span class="op" id="8585453">(</span><span class="ident" id="8585454">int64</span><span class="op" id="8585459">(</span><span class="builtinfunc" id="8585460">len</span><span class="op" id="8585463">(</span><span class="ident" id="8585464">codeJSON</span><span class="op" id="8585472">)</span><span class="op" id="8585473">)</span><span class="op" id="8585474">)</span><br>
<span class="lineno">105</span><span class="op" id="8585476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8585479">func</span>&nbsp;<span class="ident" id="8585484">BenchmarkCodeDecoder</span><span class="op" id="8585504">(</span><span class="ident" id="8585505">b</span>&nbsp;<span class="op" id="8585507">*</span><span class="ident" id="8585508">testing</span><span class="op" id="8585515">.</span><span class="ident" id="8585516">B</span><span class="op" id="8585517">)</span>&nbsp;<span class="op" id="8585519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585522">if</span>&nbsp;<span class="ident" id="8585525">codeJSON</span>&nbsp;<span class="op" id="8585534">==</span>&nbsp;<span class="ident" id="8585537">nil</span>&nbsp;<span class="op" id="8585541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585545">b</span><span class="op" id="8585546">.</span><span class="ident" id="8585547">StopTimer</span><span class="op" id="8585556">(</span><span class="op" id="8585557">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585561">codeInit</span><span class="op" id="8585569">(</span><span class="op" id="8585570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585574">b</span><span class="op" id="8585575">.</span><span class="ident" id="8585576">StartTimer</span><span class="op" id="8585586">(</span><span class="op" id="8585587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585593">var</span>&nbsp;<span class="ident" id="8585597">buf</span>&nbsp;<span class="ident" id="8585601">bytes</span><span class="op" id="8585606">.</span><span class="ident" id="8585607">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585615">dec</span>&nbsp;<span class="op" id="8585619">:=</span>&nbsp;<span class="ident" id="8585622">NewDecoder</span><span class="op" id="8585632">(</span><span class="op" id="8585633">&amp;</span><span class="ident" id="8585634">buf</span><span class="op" id="8585637">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585640">var</span>&nbsp;<span class="ident" id="8585644">r</span>&nbsp;<span class="ident" id="8585646">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585660">for</span>&nbsp;<span class="ident" id="8585664">i</span>&nbsp;<span class="op" id="8585666">:=</span>&nbsp;<span class="num" id="8585669">0</span><span class="op" id="8585670">;</span>&nbsp;<span class="ident" id="8585672">i</span>&nbsp;<span class="op" id="8585674">&lt;</span>&nbsp;<span class="ident" id="8585676">b</span><span class="op" id="8585677">.</span><span class="ident" id="8585678">N</span><span class="op" id="8585679">;</span>&nbsp;<span class="ident" id="8585681">i</span><span class="op" id="8585682">++</span>&nbsp;<span class="op" id="8585685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585689">buf</span><span class="op" id="8585692">.</span><span class="ident" id="8585693">Write</span><span class="op" id="8585698">(</span><span class="ident" id="8585699">codeJSON</span><span class="op" id="8585707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8585711">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585725">buf</span><span class="op" id="8585728">.</span><span class="ident" id="8585729">WriteByte</span><span class="op" id="8585738">(</span><span class="string" id="8585739">&#39;\n&#39;</span><span class="op" id="8585743">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585747">buf</span><span class="op" id="8585750">.</span><span class="ident" id="8585751">WriteByte</span><span class="op" id="8585760">(</span><span class="string" id="8585761">&#39;\n&#39;</span><span class="op" id="8585765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585769">buf</span><span class="op" id="8585772">.</span><span class="ident" id="8585773">WriteByte</span><span class="op" id="8585782">(</span><span class="string" id="8585783">&#39;\n&#39;</span><span class="op" id="8585787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585791">if</span>&nbsp;<span class="ident" id="8585794">err</span>&nbsp;<span class="op" id="8585798">:=</span>&nbsp;<span class="ident" id="8585801">dec</span><span class="op" id="8585804">.</span><span class="ident" id="8585805">Decode</span><span class="op" id="8585811">(</span><span class="op" id="8585812">&amp;</span><span class="ident" id="8585813">r</span><span class="op" id="8585814">)</span><span class="op" id="8585815">;</span>&nbsp;<span class="ident" id="8585817">err</span>&nbsp;<span class="op" id="8585821">!=</span>&nbsp;<span class="ident" id="8585824">nil</span>&nbsp;<span class="op" id="8585828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585833">b</span><span class="op" id="8585834">.</span><span class="ident" id="8585835">Fatal</span><span class="op" id="8585840">(</span><span class="string" id="8585841">&#34;Decode:&#34;</span><span class="op" id="8585850">,</span>&nbsp;<span class="ident" id="8585852">err</span><span class="op" id="8585855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585859">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8585862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585865">b</span><span class="op" id="8585866">.</span><span class="ident" id="8585867">SetBytes</span><span class="op" id="8585875">(</span><span class="ident" id="8585876">int64</span><span class="op" id="8585881">(</span><span class="builtinfunc" id="8585882">len</span><span class="op" id="8585885">(</span><span class="ident" id="8585886">codeJSON</span><span class="op" id="8585894">)</span><span class="op" id="8585895">)</span><span class="op" id="8585896">)</span><br>
<span class="lineno"></span><span class="op" id="8585898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8585901">func</span>&nbsp;<span class="ident" id="8585906">BenchmarkCodeUnmarshal</span><span class="op" id="8585928">(</span><span class="ident" id="8585929">b</span>&nbsp;<span class="op" id="8585931">*</span><span class="ident" id="8585932">testing</span><span class="op" id="8585939">.</span><span class="ident" id="8585940">B</span><span class="op" id="8585941">)</span>&nbsp;<span class="op" id="8585943">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8585946">if</span>&nbsp;<span class="ident" id="8585949">codeJSON</span>&nbsp;<span class="op" id="8585958">==</span>&nbsp;<span class="ident" id="8585961">nil</span>&nbsp;<span class="op" id="8585965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585969">b</span><span class="op" id="8585970">.</span><span class="ident" id="8585971">StopTimer</span><span class="op" id="8585980">(</span><span class="op" id="8585981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585985">codeInit</span><span class="op" id="8585993">(</span><span class="op" id="8585994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8585998">b</span><span class="op" id="8585999">.</span><span class="ident" id="8586000">StartTimer</span><span class="op" id="8586010">(</span><span class="op" id="8586011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586014">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586017">for</span>&nbsp;<span class="ident" id="8586021">i</span>&nbsp;<span class="op" id="8586023">:=</span>&nbsp;<span class="num" id="8586026">0</span><span class="op" id="8586027">;</span>&nbsp;<span class="ident" id="8586029">i</span>&nbsp;<span class="op" id="8586031">&lt;</span>&nbsp;<span class="ident" id="8586033">b</span><span class="op" id="8586034">.</span><span class="ident" id="8586035">N</span><span class="op" id="8586036">;</span>&nbsp;<span class="ident" id="8586038">i</span><span class="op" id="8586039">++</span>&nbsp;<span class="op" id="8586042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586046">var</span>&nbsp;<span class="ident" id="8586050">r</span>&nbsp;<span class="ident" id="8586052">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586067">if</span>&nbsp;<span class="ident" id="8586070">err</span>&nbsp;<span class="op" id="8586074">:=</span>&nbsp;<span class="ident" id="8586077">Unmarshal</span><span class="op" id="8586086">(</span><span class="ident" id="8586087">codeJSON</span><span class="op" id="8586095">,</span>&nbsp;<span class="op" id="8586097">&amp;</span><span class="ident" id="8586098">r</span><span class="op" id="8586099">)</span><span class="op" id="8586100">;</span>&nbsp;<span class="ident" id="8586102">err</span>&nbsp;<span class="op" id="8586106">!=</span>&nbsp;<span class="ident" id="8586109">nil</span>&nbsp;<span class="op" id="8586113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586118">b</span><span class="op" id="8586119">.</span><span class="ident" id="8586120">Fatal</span><span class="op" id="8586125">(</span><span class="string" id="8586126">&#34;Unmmarshal:&#34;</span><span class="op" id="8586139">,</span>&nbsp;<span class="ident" id="8586141">err</span><span class="op" id="8586144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586148">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586154">b</span><span class="op" id="8586155">.</span><span class="ident" id="8586156">SetBytes</span><span class="op" id="8586164">(</span><span class="ident" id="8586165">int64</span><span class="op" id="8586170">(</span><span class="builtinfunc" id="8586171">len</span><span class="op" id="8586174">(</span><span class="ident" id="8586175">codeJSON</span><span class="op" id="8586183">)</span><span class="op" id="8586184">)</span><span class="op" id="8586185">)</span><br>
<span class="lineno"></span><span class="op" id="8586187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8586190">func</span>&nbsp;<span class="ident" id="8586195">BenchmarkCodeUnmarshalReuse</span><span class="op" id="8586222">(</span><span class="ident" id="8586223">b</span>&nbsp;<span class="op" id="8586225">*</span><span class="ident" id="8586226">testing</span><span class="op" id="8586233">.</span><span class="ident" id="8586234">B</span><span class="op" id="8586235">)</span>&nbsp;<span class="op" id="8586237">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586240">if</span>&nbsp;<span class="ident" id="8586243">codeJSON</span>&nbsp;<span class="op" id="8586252">==</span>&nbsp;<span class="ident" id="8586255">nil</span>&nbsp;<span class="op" id="8586259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586263">b</span><span class="op" id="8586264">.</span><span class="ident" id="8586265">StopTimer</span><span class="op" id="8586274">(</span><span class="op" id="8586275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586279">codeInit</span><span class="op" id="8586287">(</span><span class="op" id="8586288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586292">b</span><span class="op" id="8586293">.</span><span class="ident" id="8586294">StartTimer</span><span class="op" id="8586304">(</span><span class="op" id="8586305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586308">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586311">var</span>&nbsp;<span class="ident" id="8586315">r</span>&nbsp;<span class="ident" id="8586317">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586331">for</span>&nbsp;<span class="ident" id="8586335">i</span>&nbsp;<span class="op" id="8586337">:=</span>&nbsp;<span class="num" id="8586340">0</span><span class="op" id="8586341">;</span>&nbsp;<span class="ident" id="8586343">i</span>&nbsp;<span class="op" id="8586345">&lt;</span>&nbsp;<span class="ident" id="8586347">b</span><span class="op" id="8586348">.</span><span class="ident" id="8586349">N</span><span class="op" id="8586350">;</span>&nbsp;<span class="ident" id="8586352">i</span><span class="op" id="8586353">++</span>&nbsp;<span class="op" id="8586356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586360">if</span>&nbsp;<span class="ident" id="8586363">err</span>&nbsp;<span class="op" id="8586367">:=</span>&nbsp;<span class="ident" id="8586370">Unmarshal</span><span class="op" id="8586379">(</span><span class="ident" id="8586380">codeJSON</span><span class="op" id="8586388">,</span>&nbsp;<span class="op" id="8586390">&amp;</span><span class="ident" id="8586391">r</span><span class="op" id="8586392">)</span><span class="op" id="8586393">;</span>&nbsp;<span class="ident" id="8586395">err</span>&nbsp;<span class="op" id="8586399">!=</span>&nbsp;<span class="ident" id="8586402">nil</span>&nbsp;<span class="op" id="8586406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586411">b</span><span class="op" id="8586412">.</span><span class="ident" id="8586413">Fatal</span><span class="op" id="8586418">(</span><span class="string" id="8586419">&#34;Unmmarshal:&#34;</span><span class="op" id="8586432">,</span>&nbsp;<span class="ident" id="8586434">err</span><span class="op" id="8586437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586441">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586444">}</span><br>
<span class="lineno"></span><span class="op" id="8586446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8586449">func</span>&nbsp;<span class="ident" id="8586454">BenchmarkUnmarshalString</span><span class="op" id="8586478">(</span><span class="ident" id="8586479">b</span>&nbsp;<span class="op" id="8586481">*</span><span class="ident" id="8586482">testing</span><span class="op" id="8586489">.</span><span class="ident" id="8586490">B</span><span class="op" id="8586491">)</span>&nbsp;<span class="op" id="8586493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586496">data</span>&nbsp;<span class="op" id="8586501">:=</span>&nbsp;<span class="op" id="8586504">[</span><span class="op" id="8586505">]</span><span class="builtintype" id="8586506">byte</span><span class="op" id="8586510">(</span><span class="string" id="8586511">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="8586527">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586530">var</span>&nbsp;<span class="ident" id="8586534">s</span>&nbsp;<span class="builtintype" id="8586536">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586545">for</span>&nbsp;<span class="ident" id="8586549">i</span>&nbsp;<span class="op" id="8586551">:=</span>&nbsp;<span class="num" id="8586554">0</span><span class="op" id="8586555">;</span>&nbsp;<span class="ident" id="8586557">i</span>&nbsp;<span class="op" id="8586559">&lt;</span>&nbsp;<span class="ident" id="8586561">b</span><span class="op" id="8586562">.</span><span class="ident" id="8586563">N</span><span class="op" id="8586564">;</span>&nbsp;<span class="ident" id="8586566">i</span><span class="op" id="8586567">++</span>&nbsp;<span class="op" id="8586570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586574">if</span>&nbsp;<span class="ident" id="8586577">err</span>&nbsp;<span class="op" id="8586581">:=</span>&nbsp;<span class="ident" id="8586584">Unmarshal</span><span class="op" id="8586593">(</span><span class="ident" id="8586594">data</span><span class="op" id="8586598">,</span>&nbsp;<span class="op" id="8586600">&amp;</span><span class="ident" id="8586601">s</span><span class="op" id="8586602">)</span><span class="op" id="8586603">;</span>&nbsp;<span class="ident" id="8586605">err</span>&nbsp;<span class="op" id="8586609">!=</span>&nbsp;<span class="ident" id="8586612">nil</span>&nbsp;<span class="op" id="8586616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586621">b</span><span class="op" id="8586622">.</span><span class="ident" id="8586623">Fatal</span><span class="op" id="8586628">(</span><span class="string" id="8586629">&#34;Unmarshal:&#34;</span><span class="op" id="8586641">,</span>&nbsp;<span class="ident" id="8586643">err</span><span class="op" id="8586646">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586653">}</span><br>
<span class="lineno"></span><span class="op" id="8586655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8586658">func</span>&nbsp;<span class="ident" id="8586663">BenchmarkUnmarshalFloat64</span><span class="op" id="8586688">(</span><span class="ident" id="8586689">b</span>&nbsp;<span class="op" id="8586691">*</span><span class="ident" id="8586692">testing</span><span class="op" id="8586699">.</span><span class="ident" id="8586700">B</span><span class="op" id="8586701">)</span>&nbsp;<span class="op" id="8586703">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586706">var</span>&nbsp;<span class="ident" id="8586710">f</span>&nbsp;<span class="builtintype" id="8586712">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586721">data</span>&nbsp;<span class="op" id="8586726">:=</span>&nbsp;<span class="op" id="8586729">[</span><span class="op" id="8586730">]</span><span class="builtintype" id="8586731">byte</span><span class="op" id="8586735">(</span><span class="string" id="8586736">`3.14`</span><span class="op" id="8586742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586746">for</span>&nbsp;<span class="ident" id="8586750">i</span>&nbsp;<span class="op" id="8586752">:=</span>&nbsp;<span class="num" id="8586755">0</span><span class="op" id="8586756">;</span>&nbsp;<span class="ident" id="8586758">i</span>&nbsp;<span class="op" id="8586760">&lt;</span>&nbsp;<span class="ident" id="8586762">b</span><span class="op" id="8586763">.</span><span class="ident" id="8586764">N</span><span class="op" id="8586765">;</span>&nbsp;<span class="ident" id="8586767">i</span><span class="op" id="8586768">++</span>&nbsp;<span class="op" id="8586771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586775">if</span>&nbsp;<span class="ident" id="8586778">err</span>&nbsp;<span class="op" id="8586782">:=</span>&nbsp;<span class="ident" id="8586785">Unmarshal</span><span class="op" id="8586794">(</span><span class="ident" id="8586795">data</span><span class="op" id="8586799">,</span>&nbsp;<span class="op" id="8586801">&amp;</span><span class="ident" id="8586802">f</span><span class="op" id="8586803">)</span><span class="op" id="8586804">;</span>&nbsp;<span class="ident" id="8586806">err</span>&nbsp;<span class="op" id="8586810">!=</span>&nbsp;<span class="ident" id="8586813">nil</span>&nbsp;<span class="op" id="8586817">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586822">b</span><span class="op" id="8586823">.</span><span class="ident" id="8586824">Fatal</span><span class="op" id="8586829">(</span><span class="string" id="8586830">&#34;Unmarshal:&#34;</span><span class="op" id="8586842">,</span>&nbsp;<span class="ident" id="8586844">err</span><span class="op" id="8586847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586854">}</span><br>
<span class="lineno"></span><span class="op" id="8586856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="8586859">func</span>&nbsp;<span class="ident" id="8586864">BenchmarkUnmarshalInt64</span><span class="op" id="8586887">(</span><span class="ident" id="8586888">b</span>&nbsp;<span class="op" id="8586890">*</span><span class="ident" id="8586891">testing</span><span class="op" id="8586898">.</span><span class="ident" id="8586899">B</span><span class="op" id="8586900">)</span>&nbsp;<span class="op" id="8586902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586905">var</span>&nbsp;<span class="ident" id="8586909">x</span>&nbsp;<span class="ident" id="8586911">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586918">data</span>&nbsp;<span class="op" id="8586923">:=</span>&nbsp;<span class="op" id="8586926">[</span><span class="op" id="8586927">]</span><span class="builtintype" id="8586928">byte</span><span class="op" id="8586932">(</span><span class="string" id="8586933">`3`</span><span class="op" id="8586936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586940">for</span>&nbsp;<span class="ident" id="8586944">i</span>&nbsp;<span class="op" id="8586946">:=</span>&nbsp;<span class="num" id="8586949">0</span><span class="op" id="8586950">;</span>&nbsp;<span class="ident" id="8586952">i</span>&nbsp;<span class="op" id="8586954">&lt;</span>&nbsp;<span class="ident" id="8586956">b</span><span class="op" id="8586957">.</span><span class="ident" id="8586958">N</span><span class="op" id="8586959">;</span>&nbsp;<span class="ident" id="8586961">i</span><span class="op" id="8586962">++</span>&nbsp;<span class="op" id="8586965">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8586969">if</span>&nbsp;<span class="ident" id="8586972">err</span>&nbsp;<span class="op" id="8586976">:=</span>&nbsp;<span class="ident" id="8586979">Unmarshal</span><span class="op" id="8586988">(</span><span class="ident" id="8586989">data</span><span class="op" id="8586993">,</span>&nbsp;<span class="op" id="8586995">&amp;</span><span class="ident" id="8586996">x</span><span class="op" id="8586997">)</span><span class="op" id="8586998">;</span>&nbsp;<span class="ident" id="8587000">err</span>&nbsp;<span class="op" id="8587004">!=</span>&nbsp;<span class="ident" id="8587007">nil</span>&nbsp;<span class="op" id="8587011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8587016">b</span><span class="op" id="8587017">.</span><span class="ident" id="8587018">Fatal</span><span class="op" id="8587023">(</span><span class="string" id="8587024">&#34;Unmarshal:&#34;</span><span class="op" id="8587036">,</span>&nbsp;<span class="ident" id="8587038">err</span><span class="op" id="8587041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587048">}</span><br>
<span class="lineno"></span><span class="op" id="8587050">}</span>
</div>
</body>
</html>
