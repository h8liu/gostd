<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2333706">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2333761">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2333815">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2333866">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2333942">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2334016">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2334097">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2334168">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2334243">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2334314">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2334373">//</span><br>
<span class="lineno"></span><span class="comment" id="2334376">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2334452">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2334535">//</span><br>
<span class="lineno"></span><span class="comment" id="2334538">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2334606">//</span><br>
<span class="lineno"></span><span class="comment" id="2334609">//&nbsp;&nbsp;&nbsp;&nbsp;file,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2334664">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2334683">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2334702">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2334707">//</span><br>
<span class="lineno"></span><span class="comment" id="2334710">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2334780">//</span><br>
<span class="lineno">25</span><span class="comment" id="2334783">//&nbsp;&nbsp;&nbsp;&nbsp;open&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2334826">//</span><br>
<span class="lineno"></span><span class="comment" id="2334829">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2334897">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2334968">//</span><br>
<span class="lineno">30</span><span class="comment" id="2334971">//&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2335000">//&nbsp;&nbsp;&nbsp;&nbsp;count,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2335033">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2335052">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2335071">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">35</span><span class="comment" id="2335076">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2335134">//</span><br>
<span class="lineno"></span><span class="keyword" id="2335137">package</span>&nbsp;<span class="ident" id="2335145">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2335149">import</span>&nbsp;<span class="op" id="2335156">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2335159">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2335165">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2335175">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335178">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2335237">func</span>&nbsp;<span class="op" id="2335242">(</span><span class="ident" id="2335243">f</span>&nbsp;<span class="op" id="2335245">*</span><span class="ident" id="2335246">File</span><span class="op" id="2335250">)</span>&nbsp;<span class="ident" id="2335252">Name</span><span class="op" id="2335256">(</span><span class="op" id="2335257">)</span>&nbsp;<span class="builtintype" id="2335259">string</span>&nbsp;<span class="op" id="2335266">{</span>&nbsp;<span class="keyword" id="2335268">return</span>&nbsp;<span class="ident" id="2335275">f</span><span class="op" id="2335276">.</span><span class="ident" id="2335277">name</span>&nbsp;<span class="op" id="2335282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335285">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2335361">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2335418">var</span>&nbsp;<span class="op" id="2335422">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335425">Stdin</span>&nbsp;&nbsp;<span class="op" id="2335432">=</span>&nbsp;<span class="ident" id="2335434">NewFile</span><span class="op" id="2335441">(</span><span class="builtintype" id="2335442">uintptr</span><span class="op" id="2335449">(</span><span class="ident" id="2335450">syscall</span><span class="op" id="2335457">.</span><span class="ident" id="2335458">Stdin</span><span class="op" id="2335463">)</span><span class="op" id="2335464">,</span>&nbsp;<span class="string" id="2335466">&#34;/dev/stdin&#34;</span><span class="op" id="2335478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335481">Stdout</span>&nbsp;<span class="op" id="2335488">=</span>&nbsp;<span class="ident" id="2335490">NewFile</span><span class="op" id="2335497">(</span><span class="builtintype" id="2335498">uintptr</span><span class="op" id="2335505">(</span><span class="ident" id="2335506">syscall</span><span class="op" id="2335513">.</span><span class="ident" id="2335514">Stdout</span><span class="op" id="2335520">)</span><span class="op" id="2335521">,</span>&nbsp;<span class="string" id="2335523">&#34;/dev/stdout&#34;</span><span class="op" id="2335536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335539">Stderr</span>&nbsp;<span class="op" id="2335546">=</span>&nbsp;<span class="ident" id="2335548">NewFile</span><span class="op" id="2335555">(</span><span class="builtintype" id="2335556">uintptr</span><span class="op" id="2335563">(</span><span class="ident" id="2335564">syscall</span><span class="op" id="2335571">.</span><span class="ident" id="2335572">Stderr</span><span class="op" id="2335578">)</span><span class="op" id="2335579">,</span>&nbsp;<span class="string" id="2335581">&#34;/dev/stderr&#34;</span><span class="op" id="2335594">)</span><br>
<span class="lineno"></span><span class="op" id="2335596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2335599">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2335671">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2335712">const</span>&nbsp;<span class="op" id="2335718">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335721">O_RDONLY</span>&nbsp;<span class="builtintype" id="2335730">int</span>&nbsp;<span class="op" id="2335734">=</span>&nbsp;<span class="ident" id="2335736">syscall</span><span class="op" id="2335743">.</span><span class="ident" id="2335744">O_RDONLY</span>&nbsp;<span class="comment" id="2335753">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335782">O_WRONLY</span>&nbsp;<span class="builtintype" id="2335791">int</span>&nbsp;<span class="op" id="2335795">=</span>&nbsp;<span class="ident" id="2335797">syscall</span><span class="op" id="2335804">.</span><span class="ident" id="2335805">O_WRONLY</span>&nbsp;<span class="comment" id="2335814">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335844">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2335853">int</span>&nbsp;<span class="op" id="2335857">=</span>&nbsp;<span class="ident" id="2335859">syscall</span><span class="op" id="2335866">.</span><span class="ident" id="2335867">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2335876">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335906">O_APPEND</span>&nbsp;<span class="builtintype" id="2335915">int</span>&nbsp;<span class="op" id="2335919">=</span>&nbsp;<span class="ident" id="2335921">syscall</span><span class="op" id="2335928">.</span><span class="ident" id="2335929">O_APPEND</span>&nbsp;<span class="comment" id="2335938">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335980">O_CREATE</span>&nbsp;<span class="builtintype" id="2335989">int</span>&nbsp;<span class="op" id="2335993">=</span>&nbsp;<span class="ident" id="2335995">syscall</span><span class="op" id="2336002">.</span><span class="ident" id="2336003">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2336012">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336050">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2336059">int</span>&nbsp;<span class="op" id="2336063">=</span>&nbsp;<span class="ident" id="2336065">syscall</span><span class="op" id="2336072">.</span><span class="ident" id="2336073">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2336082">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336126">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2336135">int</span>&nbsp;<span class="op" id="2336139">=</span>&nbsp;<span class="ident" id="2336141">syscall</span><span class="op" id="2336148">.</span><span class="ident" id="2336149">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2336158">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336188">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2336197">int</span>&nbsp;<span class="op" id="2336201">=</span>&nbsp;<span class="ident" id="2336203">syscall</span><span class="op" id="2336210">.</span><span class="ident" id="2336211">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2336220">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2336263">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2336266">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2336289">const</span>&nbsp;<span class="op" id="2336295">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336298">SEEK_SET</span>&nbsp;<span class="builtintype" id="2336307">int</span>&nbsp;<span class="op" id="2336311">=</span>&nbsp;<span class="num" id="2336313">0</span>&nbsp;<span class="comment" id="2336315">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336359">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2336368">int</span>&nbsp;<span class="op" id="2336372">=</span>&nbsp;<span class="num" id="2336374">1</span>&nbsp;<span class="comment" id="2336376">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336416">SEEK_END</span>&nbsp;<span class="builtintype" id="2336425">int</span>&nbsp;<span class="op" id="2336429">=</span>&nbsp;<span class="num" id="2336431">2</span>&nbsp;<span class="comment" id="2336433">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2336461">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2336464">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2336529">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2336574">type</span>&nbsp;<span class="ident" id="2336579">LinkError</span>&nbsp;<span class="keyword" id="2336589">struct</span>&nbsp;<span class="op" id="2336596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336599">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2336603">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336611">Old</span>&nbsp;<span class="builtintype" id="2336615">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336623">New</span>&nbsp;<span class="builtintype" id="2336627">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336635">Err</span>&nbsp;<span class="builtintype" id="2336639">error</span><br>
<span class="lineno"></span><span class="op" id="2336645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2336648">func</span>&nbsp;<span class="op" id="2336653">(</span><span class="ident" id="2336654">e</span>&nbsp;<span class="op" id="2336656">*</span><span class="ident" id="2336657">LinkError</span><span class="op" id="2336666">)</span>&nbsp;<span class="ident" id="2336668">Error</span><span class="op" id="2336673">(</span><span class="op" id="2336674">)</span>&nbsp;<span class="builtintype" id="2336676">string</span>&nbsp;<span class="op" id="2336683">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336686">return</span>&nbsp;<span class="ident" id="2336693">e</span><span class="op" id="2336694">.</span><span class="ident" id="2336695">Op</span>&nbsp;<span class="op" id="2336698">+</span>&nbsp;<span class="string" id="2336700">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2336704">+</span>&nbsp;<span class="ident" id="2336706">e</span><span class="op" id="2336707">.</span><span class="ident" id="2336708">Old</span>&nbsp;<span class="op" id="2336712">+</span>&nbsp;<span class="string" id="2336714">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2336718">+</span>&nbsp;<span class="ident" id="2336720">e</span><span class="op" id="2336721">.</span><span class="ident" id="2336722">New</span>&nbsp;<span class="op" id="2336726">+</span>&nbsp;<span class="string" id="2336728">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2336733">+</span>&nbsp;<span class="ident" id="2336735">e</span><span class="op" id="2336736">.</span><span class="ident" id="2336737">Err</span><span class="op" id="2336740">.</span><span class="ident" id="2336741">Error</span><span class="op" id="2336746">(</span><span class="op" id="2336747">)</span><br>
<span class="lineno"></span><span class="op" id="2336749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2336752">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2336800">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2336861">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2336920">func</span>&nbsp;<span class="op" id="2336925">(</span><span class="ident" id="2336926">f</span>&nbsp;<span class="op" id="2336928">*</span><span class="ident" id="2336929">File</span><span class="op" id="2336933">)</span>&nbsp;<span class="ident" id="2336935">Read</span><span class="op" id="2336939">(</span><span class="ident" id="2336940">b</span>&nbsp;<span class="op" id="2336942">[</span><span class="op" id="2336943">]</span><span class="builtintype" id="2336944">byte</span><span class="op" id="2336948">)</span>&nbsp;<span class="op" id="2336950">(</span><span class="ident" id="2336951">n</span>&nbsp;<span class="builtintype" id="2336953">int</span><span class="op" id="2336956">,</span>&nbsp;<span class="ident" id="2336958">err</span>&nbsp;<span class="builtintype" id="2336962">error</span><span class="op" id="2336967">)</span>&nbsp;<span class="op" id="2336969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336972">if</span>&nbsp;<span class="ident" id="2336975">f</span>&nbsp;<span class="op" id="2336977">==</span>&nbsp;<span class="builtintype" id="2336980">nil</span>&nbsp;<span class="op" id="2336984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336988">return</span>&nbsp;<span class="num" id="2336995">0</span><span class="op" id="2336996">,</span>&nbsp;<span class="ident" id="2336998">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337010">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337013">n</span><span class="op" id="2337014">,</span>&nbsp;<span class="ident" id="2337016">e</span>&nbsp;<span class="op" id="2337018">:=</span>&nbsp;<span class="ident" id="2337021">f</span><span class="op" id="2337022">.</span><span class="ident" id="2337023">read</span><span class="op" id="2337027">(</span><span class="ident" id="2337028">b</span><span class="op" id="2337029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337032">if</span>&nbsp;<span class="ident" id="2337035">n</span>&nbsp;<span class="op" id="2337037">&lt;</span>&nbsp;<span class="num" id="2337039">0</span>&nbsp;<span class="op" id="2337041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337045">n</span>&nbsp;<span class="op" id="2337047">=</span>&nbsp;<span class="num" id="2337049">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337055">if</span>&nbsp;<span class="ident" id="2337058">n</span>&nbsp;<span class="op" id="2337060">==</span>&nbsp;<span class="num" id="2337063">0</span>&nbsp;<span class="op" id="2337065">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2337068">len</span><span class="op" id="2337071">(</span><span class="ident" id="2337072">b</span><span class="op" id="2337073">)</span>&nbsp;<span class="op" id="2337075">&gt;</span>&nbsp;<span class="num" id="2337077">0</span>&nbsp;<span class="op" id="2337079">&amp;&amp;</span>&nbsp;<span class="ident" id="2337082">e</span>&nbsp;<span class="op" id="2337084">==</span>&nbsp;<span class="builtintype" id="2337087">nil</span>&nbsp;<span class="op" id="2337091">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337095">return</span>&nbsp;<span class="num" id="2337102">0</span><span class="op" id="2337103">,</span>&nbsp;<span class="ident" id="2337105">io</span><span class="op" id="2337107">.</span><span class="ident" id="2337108">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337116">if</span>&nbsp;<span class="ident" id="2337119">e</span>&nbsp;<span class="op" id="2337121">!=</span>&nbsp;<span class="builtintype" id="2337124">nil</span>&nbsp;<span class="op" id="2337128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337132">err</span>&nbsp;<span class="op" id="2337136">=</span>&nbsp;<span class="op" id="2337138">&amp;</span><span class="ident" id="2337139">PathError</span><span class="op" id="2337148">{</span><span class="string" id="2337149">&#34;read&#34;</span><span class="op" id="2337155">,</span>&nbsp;<span class="ident" id="2337157">f</span><span class="op" id="2337158">.</span><span class="ident" id="2337159">name</span><span class="op" id="2337163">,</span>&nbsp;<span class="ident" id="2337165">e</span><span class="op" id="2337166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337169">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337172">return</span>&nbsp;<span class="ident" id="2337179">n</span><span class="op" id="2337180">,</span>&nbsp;<span class="ident" id="2337182">err</span><br>
<span class="lineno"></span><span class="op" id="2337186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2337189">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2337261">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2337323">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2337381">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2337422">func</span>&nbsp;<span class="op" id="2337427">(</span><span class="ident" id="2337428">f</span>&nbsp;<span class="op" id="2337430">*</span><span class="ident" id="2337431">File</span><span class="op" id="2337435">)</span>&nbsp;<span class="ident" id="2337437">ReadAt</span><span class="op" id="2337443">(</span><span class="ident" id="2337444">b</span>&nbsp;<span class="op" id="2337446">[</span><span class="op" id="2337447">]</span><span class="builtintype" id="2337448">byte</span><span class="op" id="2337452">,</span>&nbsp;<span class="ident" id="2337454">off</span>&nbsp;<span class="ident" id="2337458">int64</span><span class="op" id="2337463">)</span>&nbsp;<span class="op" id="2337465">(</span><span class="ident" id="2337466">n</span>&nbsp;<span class="builtintype" id="2337468">int</span><span class="op" id="2337471">,</span>&nbsp;<span class="ident" id="2337473">err</span>&nbsp;<span class="builtintype" id="2337477">error</span><span class="op" id="2337482">)</span>&nbsp;<span class="op" id="2337484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337487">if</span>&nbsp;<span class="ident" id="2337490">f</span>&nbsp;<span class="op" id="2337492">==</span>&nbsp;<span class="builtintype" id="2337495">nil</span>&nbsp;<span class="op" id="2337499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337503">return</span>&nbsp;<span class="num" id="2337510">0</span><span class="op" id="2337511">,</span>&nbsp;<span class="ident" id="2337513">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337528">for</span>&nbsp;<span class="builtinfunc" id="2337532">len</span><span class="op" id="2337535">(</span><span class="ident" id="2337536">b</span><span class="op" id="2337537">)</span>&nbsp;<span class="op" id="2337539">&gt;</span>&nbsp;<span class="num" id="2337541">0</span>&nbsp;<span class="op" id="2337543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337547">m</span><span class="op" id="2337548">,</span>&nbsp;<span class="ident" id="2337550">e</span>&nbsp;<span class="op" id="2337552">:=</span>&nbsp;<span class="ident" id="2337555">f</span><span class="op" id="2337556">.</span><span class="ident" id="2337557">pread</span><span class="op" id="2337562">(</span><span class="ident" id="2337563">b</span><span class="op" id="2337564">,</span>&nbsp;<span class="ident" id="2337566">off</span><span class="op" id="2337569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337573">if</span>&nbsp;<span class="ident" id="2337576">m</span>&nbsp;<span class="op" id="2337578">==</span>&nbsp;<span class="num" id="2337581">0</span>&nbsp;<span class="op" id="2337583">&amp;&amp;</span>&nbsp;<span class="ident" id="2337586">e</span>&nbsp;<span class="op" id="2337588">==</span>&nbsp;<span class="builtintype" id="2337591">nil</span>&nbsp;<span class="op" id="2337595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337600">return</span>&nbsp;<span class="ident" id="2337607">n</span><span class="op" id="2337608">,</span>&nbsp;<span class="ident" id="2337610">io</span><span class="op" id="2337612">.</span><span class="ident" id="2337613">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337623">if</span>&nbsp;<span class="ident" id="2337626">e</span>&nbsp;<span class="op" id="2337628">!=</span>&nbsp;<span class="builtintype" id="2337631">nil</span>&nbsp;<span class="op" id="2337635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337640">err</span>&nbsp;<span class="op" id="2337644">=</span>&nbsp;<span class="op" id="2337646">&amp;</span><span class="ident" id="2337647">PathError</span><span class="op" id="2337656">{</span><span class="string" id="2337657">&#34;read&#34;</span><span class="op" id="2337663">,</span>&nbsp;<span class="ident" id="2337665">f</span><span class="op" id="2337666">.</span><span class="ident" id="2337667">name</span><span class="op" id="2337671">,</span>&nbsp;<span class="ident" id="2337673">e</span><span class="op" id="2337674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337679">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337687">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337691">n</span>&nbsp;<span class="op" id="2337693">+=</span>&nbsp;<span class="ident" id="2337696">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337700">b</span>&nbsp;<span class="op" id="2337702">=</span>&nbsp;<span class="ident" id="2337704">b</span><span class="op" id="2337705">[</span><span class="ident" id="2337706">m</span><span class="op" id="2337707">:</span><span class="op" id="2337708">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337712">off</span>&nbsp;<span class="op" id="2337716">+=</span>&nbsp;<span class="ident" id="2337719">int64</span><span class="op" id="2337724">(</span><span class="ident" id="2337725">m</span><span class="op" id="2337726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337732">return</span><br>
<span class="lineno">130</span><span class="op" id="2337739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2337742">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2337784">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2337848">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2337899">func</span>&nbsp;<span class="op" id="2337904">(</span><span class="ident" id="2337905">f</span>&nbsp;<span class="op" id="2337907">*</span><span class="ident" id="2337908">File</span><span class="op" id="2337912">)</span>&nbsp;<span class="ident" id="2337914">Write</span><span class="op" id="2337919">(</span><span class="ident" id="2337920">b</span>&nbsp;<span class="op" id="2337922">[</span><span class="op" id="2337923">]</span><span class="builtintype" id="2337924">byte</span><span class="op" id="2337928">)</span>&nbsp;<span class="op" id="2337930">(</span><span class="ident" id="2337931">n</span>&nbsp;<span class="builtintype" id="2337933">int</span><span class="op" id="2337936">,</span>&nbsp;<span class="ident" id="2337938">err</span>&nbsp;<span class="builtintype" id="2337942">error</span><span class="op" id="2337947">)</span>&nbsp;<span class="op" id="2337949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337952">if</span>&nbsp;<span class="ident" id="2337955">f</span>&nbsp;<span class="op" id="2337957">==</span>&nbsp;<span class="builtintype" id="2337960">nil</span>&nbsp;<span class="op" id="2337964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2337968">return</span>&nbsp;<span class="num" id="2337975">0</span><span class="op" id="2337976">,</span>&nbsp;<span class="ident" id="2337978">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2337990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2337993">n</span><span class="op" id="2337994">,</span>&nbsp;<span class="ident" id="2337996">e</span>&nbsp;<span class="op" id="2337998">:=</span>&nbsp;<span class="ident" id="2338001">f</span><span class="op" id="2338002">.</span><span class="ident" id="2338003">write</span><span class="op" id="2338008">(</span><span class="ident" id="2338009">b</span><span class="op" id="2338010">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338013">if</span>&nbsp;<span class="ident" id="2338016">n</span>&nbsp;<span class="op" id="2338018">&lt;</span>&nbsp;<span class="num" id="2338020">0</span>&nbsp;<span class="op" id="2338022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338026">n</span>&nbsp;<span class="op" id="2338028">=</span>&nbsp;<span class="num" id="2338030">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338036">if</span>&nbsp;<span class="ident" id="2338039">n</span>&nbsp;<span class="op" id="2338041">!=</span>&nbsp;<span class="builtinfunc" id="2338044">len</span><span class="op" id="2338047">(</span><span class="ident" id="2338048">b</span><span class="op" id="2338049">)</span>&nbsp;<span class="op" id="2338051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338055">err</span>&nbsp;<span class="op" id="2338059">=</span>&nbsp;<span class="ident" id="2338061">io</span><span class="op" id="2338063">.</span><span class="ident" id="2338064">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338083">epipecheck</span><span class="op" id="2338093">(</span><span class="ident" id="2338094">f</span><span class="op" id="2338095">,</span>&nbsp;<span class="ident" id="2338097">e</span><span class="op" id="2338098">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338102">if</span>&nbsp;<span class="ident" id="2338105">e</span>&nbsp;<span class="op" id="2338107">!=</span>&nbsp;<span class="builtintype" id="2338110">nil</span>&nbsp;<span class="op" id="2338114">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338118">err</span>&nbsp;<span class="op" id="2338122">=</span>&nbsp;<span class="op" id="2338124">&amp;</span><span class="ident" id="2338125">PathError</span><span class="op" id="2338134">{</span><span class="string" id="2338135">&#34;write&#34;</span><span class="op" id="2338142">,</span>&nbsp;<span class="ident" id="2338144">f</span><span class="op" id="2338145">.</span><span class="ident" id="2338146">name</span><span class="op" id="2338150">,</span>&nbsp;<span class="ident" id="2338152">e</span><span class="op" id="2338153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338159">return</span>&nbsp;<span class="ident" id="2338166">n</span><span class="op" id="2338167">,</span>&nbsp;<span class="ident" id="2338169">err</span><br>
<span class="lineno"></span><span class="op" id="2338173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2338176">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2338248">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2338312">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2338365">func</span>&nbsp;<span class="op" id="2338370">(</span><span class="ident" id="2338371">f</span>&nbsp;<span class="op" id="2338373">*</span><span class="ident" id="2338374">File</span><span class="op" id="2338378">)</span>&nbsp;<span class="ident" id="2338380">WriteAt</span><span class="op" id="2338387">(</span><span class="ident" id="2338388">b</span>&nbsp;<span class="op" id="2338390">[</span><span class="op" id="2338391">]</span><span class="builtintype" id="2338392">byte</span><span class="op" id="2338396">,</span>&nbsp;<span class="ident" id="2338398">off</span>&nbsp;<span class="ident" id="2338402">int64</span><span class="op" id="2338407">)</span>&nbsp;<span class="op" id="2338409">(</span><span class="ident" id="2338410">n</span>&nbsp;<span class="builtintype" id="2338412">int</span><span class="op" id="2338415">,</span>&nbsp;<span class="ident" id="2338417">err</span>&nbsp;<span class="builtintype" id="2338421">error</span><span class="op" id="2338426">)</span>&nbsp;<span class="op" id="2338428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338431">if</span>&nbsp;<span class="ident" id="2338434">f</span>&nbsp;<span class="op" id="2338436">==</span>&nbsp;<span class="builtintype" id="2338439">nil</span>&nbsp;<span class="op" id="2338443">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338447">return</span>&nbsp;<span class="num" id="2338454">0</span><span class="op" id="2338455">,</span>&nbsp;<span class="ident" id="2338457">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338472">for</span>&nbsp;<span class="builtinfunc" id="2338476">len</span><span class="op" id="2338479">(</span><span class="ident" id="2338480">b</span><span class="op" id="2338481">)</span>&nbsp;<span class="op" id="2338483">&gt;</span>&nbsp;<span class="num" id="2338485">0</span>&nbsp;<span class="op" id="2338487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338491">m</span><span class="op" id="2338492">,</span>&nbsp;<span class="ident" id="2338494">e</span>&nbsp;<span class="op" id="2338496">:=</span>&nbsp;<span class="ident" id="2338499">f</span><span class="op" id="2338500">.</span><span class="ident" id="2338501">pwrite</span><span class="op" id="2338507">(</span><span class="ident" id="2338508">b</span><span class="op" id="2338509">,</span>&nbsp;<span class="ident" id="2338511">off</span><span class="op" id="2338514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338518">if</span>&nbsp;<span class="ident" id="2338521">e</span>&nbsp;<span class="op" id="2338523">!=</span>&nbsp;<span class="builtintype" id="2338526">nil</span>&nbsp;<span class="op" id="2338530">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338535">err</span>&nbsp;<span class="op" id="2338539">=</span>&nbsp;<span class="op" id="2338541">&amp;</span><span class="ident" id="2338542">PathError</span><span class="op" id="2338551">{</span><span class="string" id="2338552">&#34;write&#34;</span><span class="op" id="2338559">,</span>&nbsp;<span class="ident" id="2338561">f</span><span class="op" id="2338562">.</span><span class="ident" id="2338563">name</span><span class="op" id="2338567">,</span>&nbsp;<span class="ident" id="2338569">e</span><span class="op" id="2338570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338575">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338587">n</span>&nbsp;<span class="op" id="2338589">+=</span>&nbsp;<span class="ident" id="2338592">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338596">b</span>&nbsp;<span class="op" id="2338598">=</span>&nbsp;<span class="ident" id="2338600">b</span><span class="op" id="2338601">[</span><span class="ident" id="2338602">m</span><span class="op" id="2338603">:</span><span class="op" id="2338604">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2338608">off</span>&nbsp;<span class="op" id="2338612">+=</span>&nbsp;<span class="ident" id="2338615">int64</span><span class="op" id="2338620">(</span><span class="ident" id="2338621">m</span><span class="op" id="2338622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2338625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338628">return</span><br>
<span class="lineno"></span><span class="op" id="2338635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2338638">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2338720">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2338796">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2338864">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2338915">func</span>&nbsp;<span class="op" id="2338920">(</span><span class="ident" id="2338921">f</span>&nbsp;<span class="op" id="2338923">*</span><span class="ident" id="2338924">File</span><span class="op" id="2338928">)</span>&nbsp;<span class="ident" id="2338930">Seek</span><span class="op" id="2338934">(</span><span class="ident" id="2338935">offset</span>&nbsp;<span class="ident" id="2338942">int64</span><span class="op" id="2338947">,</span>&nbsp;<span class="ident" id="2338949">whence</span>&nbsp;<span class="builtintype" id="2338956">int</span><span class="op" id="2338959">)</span>&nbsp;<span class="op" id="2338961">(</span><span class="ident" id="2338962">ret</span>&nbsp;<span class="ident" id="2338966">int64</span><span class="op" id="2338971">,</span>&nbsp;<span class="ident" id="2338973">err</span>&nbsp;<span class="builtintype" id="2338977">error</span><span class="op" id="2338982">)</span>&nbsp;<span class="op" id="2338984">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2338987">if</span>&nbsp;<span class="ident" id="2338990">f</span>&nbsp;<span class="op" id="2338992">==</span>&nbsp;<span class="builtintype" id="2338995">nil</span>&nbsp;<span class="op" id="2338999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339003">return</span>&nbsp;<span class="num" id="2339010">0</span><span class="op" id="2339011">,</span>&nbsp;<span class="ident" id="2339013">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2339028">r</span><span class="op" id="2339029">,</span>&nbsp;<span class="ident" id="2339031">e</span>&nbsp;<span class="op" id="2339033">:=</span>&nbsp;<span class="ident" id="2339036">f</span><span class="op" id="2339037">.</span><span class="ident" id="2339038">seek</span><span class="op" id="2339042">(</span><span class="ident" id="2339043">offset</span><span class="op" id="2339049">,</span>&nbsp;<span class="ident" id="2339051">whence</span><span class="op" id="2339057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339060">if</span>&nbsp;<span class="ident" id="2339063">e</span>&nbsp;<span class="op" id="2339065">==</span>&nbsp;<span class="builtintype" id="2339068">nil</span>&nbsp;<span class="op" id="2339072">&amp;&amp;</span>&nbsp;<span class="ident" id="2339075">f</span><span class="op" id="2339076">.</span><span class="ident" id="2339077">dirinfo</span>&nbsp;<span class="op" id="2339085">!=</span>&nbsp;<span class="builtintype" id="2339088">nil</span>&nbsp;<span class="op" id="2339092">&amp;&amp;</span>&nbsp;<span class="ident" id="2339095">r</span>&nbsp;<span class="op" id="2339097">!=</span>&nbsp;<span class="num" id="2339100">0</span>&nbsp;<span class="op" id="2339102">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2339106">e</span>&nbsp;<span class="op" id="2339108">=</span>&nbsp;<span class="ident" id="2339110">syscall</span><span class="op" id="2339117">.</span><span class="ident" id="2339118">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339129">if</span>&nbsp;<span class="ident" id="2339132">e</span>&nbsp;<span class="op" id="2339134">!=</span>&nbsp;<span class="builtintype" id="2339137">nil</span>&nbsp;<span class="op" id="2339141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339145">return</span>&nbsp;<span class="num" id="2339152">0</span><span class="op" id="2339153">,</span>&nbsp;<span class="op" id="2339155">&amp;</span><span class="ident" id="2339156">PathError</span><span class="op" id="2339165">{</span><span class="string" id="2339166">&#34;seek&#34;</span><span class="op" id="2339172">,</span>&nbsp;<span class="ident" id="2339174">f</span><span class="op" id="2339175">.</span><span class="ident" id="2339176">name</span><span class="op" id="2339180">,</span>&nbsp;<span class="ident" id="2339182">e</span><span class="op" id="2339183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339186">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339189">return</span>&nbsp;<span class="ident" id="2339196">r</span><span class="op" id="2339197">,</span>&nbsp;<span class="builtintype" id="2339199">nil</span><br>
<span class="lineno"></span><span class="op" id="2339203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2339206">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2339284">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2339305">func</span>&nbsp;<span class="op" id="2339310">(</span><span class="ident" id="2339311">f</span>&nbsp;<span class="op" id="2339313">*</span><span class="ident" id="2339314">File</span><span class="op" id="2339318">)</span>&nbsp;<span class="ident" id="2339320">WriteString</span><span class="op" id="2339331">(</span><span class="ident" id="2339332">s</span>&nbsp;<span class="builtintype" id="2339334">string</span><span class="op" id="2339340">)</span>&nbsp;<span class="op" id="2339342">(</span><span class="ident" id="2339343">ret</span>&nbsp;<span class="builtintype" id="2339347">int</span><span class="op" id="2339350">,</span>&nbsp;<span class="ident" id="2339352">err</span>&nbsp;<span class="builtintype" id="2339356">error</span><span class="op" id="2339361">)</span>&nbsp;<span class="op" id="2339363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339366">if</span>&nbsp;<span class="ident" id="2339369">f</span>&nbsp;<span class="op" id="2339371">==</span>&nbsp;<span class="builtintype" id="2339374">nil</span>&nbsp;<span class="op" id="2339378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339382">return</span>&nbsp;<span class="num" id="2339389">0</span><span class="op" id="2339390">,</span>&nbsp;<span class="ident" id="2339392">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339407">return</span>&nbsp;<span class="ident" id="2339414">f</span><span class="op" id="2339415">.</span><span class="ident" id="2339416">Write</span><span class="op" id="2339421">(</span><span class="op" id="2339422">[</span><span class="op" id="2339423">]</span><span class="builtintype" id="2339424">byte</span><span class="op" id="2339428">(</span><span class="ident" id="2339429">s</span><span class="op" id="2339430">)</span><span class="op" id="2339431">)</span><br>
<span class="lineno">200</span><span class="op" id="2339433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2339436">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2339514">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2339570">func</span>&nbsp;<span class="ident" id="2339575">Mkdir</span><span class="op" id="2339580">(</span><span class="ident" id="2339581">name</span>&nbsp;<span class="builtintype" id="2339586">string</span><span class="op" id="2339592">,</span>&nbsp;<span class="ident" id="2339594">perm</span>&nbsp;<span class="ident" id="2339599">FileMode</span><span class="op" id="2339607">)</span>&nbsp;<span class="builtintype" id="2339609">error</span>&nbsp;<span class="op" id="2339615">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2339618">e</span>&nbsp;<span class="op" id="2339620">:=</span>&nbsp;<span class="ident" id="2339623">syscall</span><span class="op" id="2339630">.</span><span class="ident" id="2339631">Mkdir</span><span class="op" id="2339636">(</span><span class="ident" id="2339637">name</span><span class="op" id="2339641">,</span>&nbsp;<span class="ident" id="2339643">syscallMode</span><span class="op" id="2339654">(</span><span class="ident" id="2339655">perm</span><span class="op" id="2339659">)</span><span class="op" id="2339660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339663">if</span>&nbsp;<span class="ident" id="2339666">e</span>&nbsp;<span class="op" id="2339668">!=</span>&nbsp;<span class="builtintype" id="2339671">nil</span>&nbsp;<span class="op" id="2339675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339679">return</span>&nbsp;<span class="op" id="2339686">&amp;</span><span class="ident" id="2339687">PathError</span><span class="op" id="2339696">{</span><span class="string" id="2339697">&#34;mkdir&#34;</span><span class="op" id="2339704">,</span>&nbsp;<span class="ident" id="2339706">name</span><span class="op" id="2339710">,</span>&nbsp;<span class="ident" id="2339712">e</span><span class="op" id="2339713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339719">return</span>&nbsp;<span class="builtintype" id="2339726">nil</span><br>
<span class="lineno">210</span><span class="op" id="2339730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2339733">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2339804">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2339860">func</span>&nbsp;<span class="ident" id="2339865">Chdir</span><span class="op" id="2339870">(</span><span class="ident" id="2339871">dir</span>&nbsp;<span class="builtintype" id="2339875">string</span><span class="op" id="2339881">)</span>&nbsp;<span class="builtintype" id="2339883">error</span>&nbsp;<span class="op" id="2339889">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339892">if</span>&nbsp;<span class="ident" id="2339895">e</span>&nbsp;<span class="op" id="2339897">:=</span>&nbsp;<span class="ident" id="2339900">syscall</span><span class="op" id="2339907">.</span><span class="ident" id="2339908">Chdir</span><span class="op" id="2339913">(</span><span class="ident" id="2339914">dir</span><span class="op" id="2339917">)</span><span class="op" id="2339918">;</span>&nbsp;<span class="ident" id="2339920">e</span>&nbsp;<span class="op" id="2339922">!=</span>&nbsp;<span class="builtintype" id="2339925">nil</span>&nbsp;<span class="op" id="2339929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339933">return</span>&nbsp;<span class="op" id="2339940">&amp;</span><span class="ident" id="2339941">PathError</span><span class="op" id="2339950">{</span><span class="string" id="2339951">&#34;chdir&#34;</span><span class="op" id="2339958">,</span>&nbsp;<span class="ident" id="2339960">dir</span><span class="op" id="2339963">,</span>&nbsp;<span class="ident" id="2339965">e</span><span class="op" id="2339966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2339969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2339972">return</span>&nbsp;<span class="builtintype" id="2339979">nil</span><br>
<span class="lineno"></span><span class="op" id="2339983">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2339986">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2340046">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2340076">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2340132">func</span>&nbsp;<span class="op" id="2340137">(</span><span class="ident" id="2340138">f</span>&nbsp;<span class="op" id="2340140">*</span><span class="ident" id="2340141">File</span><span class="op" id="2340145">)</span>&nbsp;<span class="ident" id="2340147">Chdir</span><span class="op" id="2340152">(</span><span class="op" id="2340153">)</span>&nbsp;<span class="builtintype" id="2340155">error</span>&nbsp;<span class="op" id="2340161">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340164">if</span>&nbsp;<span class="ident" id="2340167">f</span>&nbsp;<span class="op" id="2340169">==</span>&nbsp;<span class="builtintype" id="2340172">nil</span>&nbsp;<span class="op" id="2340176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340180">return</span>&nbsp;<span class="ident" id="2340187">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2340199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340202">if</span>&nbsp;<span class="ident" id="2340205">e</span>&nbsp;<span class="op" id="2340207">:=</span>&nbsp;<span class="ident" id="2340210">syscall</span><span class="op" id="2340217">.</span><span class="ident" id="2340218">Fchdir</span><span class="op" id="2340224">(</span><span class="ident" id="2340225">f</span><span class="op" id="2340226">.</span><span class="ident" id="2340227">fd</span><span class="op" id="2340229">)</span><span class="op" id="2340230">;</span>&nbsp;<span class="ident" id="2340232">e</span>&nbsp;<span class="op" id="2340234">!=</span>&nbsp;<span class="builtintype" id="2340237">nil</span>&nbsp;<span class="op" id="2340241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340245">return</span>&nbsp;<span class="op" id="2340252">&amp;</span><span class="ident" id="2340253">PathError</span><span class="op" id="2340262">{</span><span class="string" id="2340263">&#34;chdir&#34;</span><span class="op" id="2340270">,</span>&nbsp;<span class="ident" id="2340272">f</span><span class="op" id="2340273">.</span><span class="ident" id="2340274">name</span><span class="op" id="2340278">,</span>&nbsp;<span class="ident" id="2340280">e</span><span class="op" id="2340281">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2340284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340287">return</span>&nbsp;<span class="builtintype" id="2340294">nil</span><br>
<span class="lineno"></span><span class="op" id="2340298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2340301">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2340370">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2340436">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2340469">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2340525">func</span>&nbsp;<span class="ident" id="2340530">Open</span><span class="op" id="2340534">(</span><span class="ident" id="2340535">name</span>&nbsp;<span class="builtintype" id="2340540">string</span><span class="op" id="2340546">)</span>&nbsp;<span class="op" id="2340548">(</span><span class="ident" id="2340549">file</span>&nbsp;<span class="op" id="2340554">*</span><span class="ident" id="2340555">File</span><span class="op" id="2340559">,</span>&nbsp;<span class="ident" id="2340561">err</span>&nbsp;<span class="builtintype" id="2340565">error</span><span class="op" id="2340570">)</span>&nbsp;<span class="op" id="2340572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340575">return</span>&nbsp;<span class="ident" id="2340582">OpenFile</span><span class="op" id="2340590">(</span><span class="ident" id="2340591">name</span><span class="op" id="2340595">,</span>&nbsp;<span class="ident" id="2340597">O_RDONLY</span><span class="op" id="2340605">,</span>&nbsp;<span class="num" id="2340607">0</span><span class="op" id="2340608">)</span><br>
<span class="lineno">240</span><span class="op" id="2340610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2340613">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2340683">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2340751">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2340820">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2340831">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2340887">func</span>&nbsp;<span class="ident" id="2340892">Create</span><span class="op" id="2340898">(</span><span class="ident" id="2340899">name</span>&nbsp;<span class="builtintype" id="2340904">string</span><span class="op" id="2340910">)</span>&nbsp;<span class="op" id="2340912">(</span><span class="ident" id="2340913">file</span>&nbsp;<span class="op" id="2340918">*</span><span class="ident" id="2340919">File</span><span class="op" id="2340923">,</span>&nbsp;<span class="ident" id="2340925">err</span>&nbsp;<span class="builtintype" id="2340929">error</span><span class="op" id="2340934">)</span>&nbsp;<span class="op" id="2340936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2340939">return</span>&nbsp;<span class="ident" id="2340946">OpenFile</span><span class="op" id="2340954">(</span><span class="ident" id="2340955">name</span><span class="op" id="2340959">,</span>&nbsp;<span class="ident" id="2340961">O_RDWR</span><span class="op" id="2340967">|</span><span class="ident" id="2340968">O_CREATE</span><span class="op" id="2340976">|</span><span class="ident" id="2340977">O_TRUNC</span><span class="op" id="2340984">,</span>&nbsp;<span class="num" id="2340986">0666</span><span class="op" id="2340990">)</span><br>
<span class="lineno"></span><span class="op" id="2340992">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2340995">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2341028">var</span>&nbsp;<span class="ident" id="2341032">lstat</span>&nbsp;<span class="op" id="2341038">=</span>&nbsp;<span class="ident" id="2341040">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2341047">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2341119">func</span>&nbsp;<span class="ident" id="2341124">Rename</span><span class="op" id="2341130">(</span><span class="ident" id="2341131">oldpath</span><span class="op" id="2341138">,</span>&nbsp;<span class="ident" id="2341140">newpath</span>&nbsp;<span class="builtintype" id="2341148">string</span><span class="op" id="2341154">)</span>&nbsp;<span class="builtintype" id="2341156">error</span>&nbsp;<span class="op" id="2341162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2341165">return</span>&nbsp;<span class="ident" id="2341172">rename</span><span class="op" id="2341178">(</span><span class="ident" id="2341179">oldpath</span><span class="op" id="2341186">,</span>&nbsp;<span class="ident" id="2341188">newpath</span><span class="op" id="2341195">)</span><br>
<span class="lineno"></span><span class="op" id="2341197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2341200">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2341272">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2341336">func</span>&nbsp;<span class="ident" id="2341341">fixCount</span><span class="op" id="2341349">(</span><span class="ident" id="2341350">n</span>&nbsp;<span class="builtintype" id="2341352">int</span><span class="op" id="2341355">,</span>&nbsp;<span class="ident" id="2341357">err</span>&nbsp;<span class="builtintype" id="2341361">error</span><span class="op" id="2341366">)</span>&nbsp;<span class="op" id="2341368">(</span><span class="builtintype" id="2341369">int</span><span class="op" id="2341372">,</span>&nbsp;<span class="builtintype" id="2341374">error</span><span class="op" id="2341379">)</span>&nbsp;<span class="op" id="2341381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2341384">if</span>&nbsp;<span class="ident" id="2341387">n</span>&nbsp;<span class="op" id="2341389">&lt;</span>&nbsp;<span class="num" id="2341391">0</span>&nbsp;<span class="op" id="2341393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2341397">n</span>&nbsp;<span class="op" id="2341399">=</span>&nbsp;<span class="num" id="2341401">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2341404">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2341407">return</span>&nbsp;<span class="ident" id="2341414">n</span><span class="op" id="2341415">,</span>&nbsp;<span class="ident" id="2341417">err</span><br>
<span class="lineno"></span><span class="op" id="2341421">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
