<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html" class="current">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1663542">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1663598">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1663652">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1663703">//&nbsp;Software&nbsp;IEEE754&nbsp;64-bit&nbsp;floating&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="1663746">//&nbsp;Only&nbsp;referred&nbsp;to&nbsp;(and&nbsp;thus&nbsp;linked&nbsp;in)&nbsp;by&nbsp;arm&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="1663799">//&nbsp;and&nbsp;by&nbsp;tests&nbsp;in&nbsp;this&nbsp;directory.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1663835">package</span>&nbsp;<span class="ident" id="1663843">runtime</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1663852">const</span>&nbsp;<span class="op" id="1663858">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663861">mantbits64</span>&nbsp;<span class="builtintype" id="1663872">uint</span>&nbsp;<span class="op" id="1663877">=</span>&nbsp;<span class="num" id="1663879">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663883">expbits64</span>&nbsp;&nbsp;<span class="builtintype" id="1663894">uint</span>&nbsp;<span class="op" id="1663899">=</span>&nbsp;<span class="num" id="1663901">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663905">bias64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1663921">=</span>&nbsp;<span class="op" id="1663923">-</span><span class="num" id="1663924">1</span><span class="op" id="1663925">&lt;&lt;</span><span class="op" id="1663927">(</span><span class="ident" id="1663928">expbits64</span><span class="op" id="1663937">-</span><span class="num" id="1663938">1</span><span class="op" id="1663939">)</span>&nbsp;<span class="op" id="1663941">+</span>&nbsp;<span class="num" id="1663943">1</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663947">nan64</span>&nbsp;<span class="ident" id="1663953">uint64</span>&nbsp;<span class="op" id="1663960">=</span>&nbsp;<span class="op" id="1663962">(</span><span class="num" id="1663963">1</span><span class="op" id="1663964">&lt;&lt;</span><span class="ident" id="1663966">expbits64</span><span class="op" id="1663975">-</span><span class="num" id="1663976">1</span><span class="op" id="1663977">)</span><span class="op" id="1663978">&lt;&lt;</span><span class="ident" id="1663980">mantbits64</span>&nbsp;<span class="op" id="1663991">+</span>&nbsp;<span class="num" id="1663993">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1663996">inf64</span>&nbsp;<span class="ident" id="1664002">uint64</span>&nbsp;<span class="op" id="1664009">=</span>&nbsp;<span class="op" id="1664011">(</span><span class="num" id="1664012">1</span><span class="op" id="1664013">&lt;&lt;</span><span class="ident" id="1664015">expbits64</span>&nbsp;<span class="op" id="1664025">-</span>&nbsp;<span class="num" id="1664027">1</span><span class="op" id="1664028">)</span>&nbsp;<span class="op" id="1664030">&lt;&lt;</span>&nbsp;<span class="ident" id="1664033">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664045">neg64</span>&nbsp;<span class="ident" id="1664051">uint64</span>&nbsp;<span class="op" id="1664058">=</span>&nbsp;<span class="num" id="1664060">1</span>&nbsp;<span class="op" id="1664062">&lt;&lt;</span>&nbsp;<span class="op" id="1664065">(</span><span class="ident" id="1664066">expbits64</span>&nbsp;<span class="op" id="1664076">+</span>&nbsp;<span class="ident" id="1664078">mantbits64</span><span class="op" id="1664088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664092">mantbits32</span>&nbsp;<span class="builtintype" id="1664103">uint</span>&nbsp;<span class="op" id="1664108">=</span>&nbsp;<span class="num" id="1664110">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664114">expbits32</span>&nbsp;&nbsp;<span class="builtintype" id="1664125">uint</span>&nbsp;<span class="op" id="1664130">=</span>&nbsp;<span class="num" id="1664132">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664135">bias32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664151">=</span>&nbsp;<span class="op" id="1664153">-</span><span class="num" id="1664154">1</span><span class="op" id="1664155">&lt;&lt;</span><span class="op" id="1664157">(</span><span class="ident" id="1664158">expbits32</span><span class="op" id="1664167">-</span><span class="num" id="1664168">1</span><span class="op" id="1664169">)</span>&nbsp;<span class="op" id="1664171">+</span>&nbsp;<span class="num" id="1664173">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664177">nan32</span>&nbsp;<span class="builtintype" id="1664183">uint32</span>&nbsp;<span class="op" id="1664190">=</span>&nbsp;<span class="op" id="1664192">(</span><span class="num" id="1664193">1</span><span class="op" id="1664194">&lt;&lt;</span><span class="ident" id="1664196">expbits32</span><span class="op" id="1664205">-</span><span class="num" id="1664206">1</span><span class="op" id="1664207">)</span><span class="op" id="1664208">&lt;&lt;</span><span class="ident" id="1664210">mantbits32</span>&nbsp;<span class="op" id="1664221">+</span>&nbsp;<span class="num" id="1664223">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664226">inf32</span>&nbsp;<span class="builtintype" id="1664232">uint32</span>&nbsp;<span class="op" id="1664239">=</span>&nbsp;<span class="op" id="1664241">(</span><span class="num" id="1664242">1</span><span class="op" id="1664243">&lt;&lt;</span><span class="ident" id="1664245">expbits32</span>&nbsp;<span class="op" id="1664255">-</span>&nbsp;<span class="num" id="1664257">1</span><span class="op" id="1664258">)</span>&nbsp;<span class="op" id="1664260">&lt;&lt;</span>&nbsp;<span class="ident" id="1664263">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664275">neg32</span>&nbsp;<span class="builtintype" id="1664281">uint32</span>&nbsp;<span class="op" id="1664288">=</span>&nbsp;<span class="num" id="1664290">1</span>&nbsp;<span class="op" id="1664292">&lt;&lt;</span>&nbsp;<span class="op" id="1664295">(</span><span class="ident" id="1664296">expbits32</span>&nbsp;<span class="op" id="1664306">+</span>&nbsp;<span class="ident" id="1664308">mantbits32</span><span class="op" id="1664318">)</span><br>
<span class="lineno"></span><span class="op" id="1664320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1664323">func</span>&nbsp;<span class="ident" id="1664328">funpack64</span><span class="op" id="1664337">(</span><span class="ident" id="1664338">f</span>&nbsp;<span class="ident" id="1664340">uint64</span><span class="op" id="1664346">)</span>&nbsp;<span class="op" id="1664348">(</span><span class="ident" id="1664349">sign</span><span class="op" id="1664353">,</span>&nbsp;<span class="ident" id="1664355">mant</span>&nbsp;<span class="ident" id="1664360">uint64</span><span class="op" id="1664366">,</span>&nbsp;<span class="ident" id="1664368">exp</span>&nbsp;<span class="builtintype" id="1664372">int</span><span class="op" id="1664375">,</span>&nbsp;<span class="ident" id="1664377">inf</span><span class="op" id="1664380">,</span>&nbsp;<span class="ident" id="1664382">nan</span>&nbsp;<span class="builtintype" id="1664386">bool</span><span class="op" id="1664390">)</span>&nbsp;<span class="op" id="1664392">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664395">sign</span>&nbsp;<span class="op" id="1664400">=</span>&nbsp;<span class="ident" id="1664402">f</span>&nbsp;<span class="op" id="1664404">&amp;</span>&nbsp;<span class="op" id="1664406">(</span><span class="num" id="1664407">1</span>&nbsp;<span class="op" id="1664409">&lt;&lt;</span>&nbsp;<span class="op" id="1664412">(</span><span class="ident" id="1664413">mantbits64</span>&nbsp;<span class="op" id="1664424">+</span>&nbsp;<span class="ident" id="1664426">expbits64</span><span class="op" id="1664435">)</span><span class="op" id="1664436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664439">mant</span>&nbsp;<span class="op" id="1664444">=</span>&nbsp;<span class="ident" id="1664446">f</span>&nbsp;<span class="op" id="1664448">&amp;</span>&nbsp;<span class="op" id="1664450">(</span><span class="num" id="1664451">1</span><span class="op" id="1664452">&lt;&lt;</span><span class="ident" id="1664454">mantbits64</span>&nbsp;<span class="op" id="1664465">-</span>&nbsp;<span class="num" id="1664467">1</span><span class="op" id="1664468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664471">exp</span>&nbsp;<span class="op" id="1664475">=</span>&nbsp;<span class="builtintype" id="1664477">int</span><span class="op" id="1664480">(</span><span class="ident" id="1664481">f</span><span class="op" id="1664482">&gt;&gt;</span><span class="ident" id="1664484">mantbits64</span><span class="op" id="1664494">)</span>&nbsp;<span class="op" id="1664496">&amp;</span>&nbsp;<span class="op" id="1664498">(</span><span class="num" id="1664499">1</span><span class="op" id="1664500">&lt;&lt;</span><span class="ident" id="1664502">expbits64</span>&nbsp;<span class="op" id="1664512">-</span>&nbsp;<span class="num" id="1664514">1</span><span class="op" id="1664515">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664519">switch</span>&nbsp;<span class="ident" id="1664526">exp</span>&nbsp;<span class="op" id="1664530">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664533">case</span>&nbsp;<span class="num" id="1664538">1</span><span class="op" id="1664539">&lt;&lt;</span><span class="ident" id="1664541">expbits64</span>&nbsp;<span class="op" id="1664551">-</span>&nbsp;<span class="num" id="1664553">1</span><span class="op" id="1664554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664558">if</span>&nbsp;<span class="ident" id="1664561">mant</span>&nbsp;<span class="op" id="1664566">!=</span>&nbsp;<span class="num" id="1664569">0</span>&nbsp;<span class="op" id="1664571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664576">nan</span>&nbsp;<span class="op" id="1664580">=</span>&nbsp;<span class="builtintype" id="1664582">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664590">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664599">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664603">inf</span>&nbsp;<span class="op" id="1664607">=</span>&nbsp;<span class="builtintype" id="1664609">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664616">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664625">case</span>&nbsp;<span class="num" id="1664630">0</span><span class="op" id="1664631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1664635">//&nbsp;denormalized</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664653">if</span>&nbsp;<span class="ident" id="1664656">mant</span>&nbsp;<span class="op" id="1664661">!=</span>&nbsp;<span class="num" id="1664664">0</span>&nbsp;<span class="op" id="1664666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664671">exp</span>&nbsp;<span class="op" id="1664675">+=</span>&nbsp;<span class="ident" id="1664678">bias64</span>&nbsp;<span class="op" id="1664685">+</span>&nbsp;<span class="num" id="1664687">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664692">for</span>&nbsp;<span class="ident" id="1664696">mant</span>&nbsp;<span class="op" id="1664701">&lt;</span>&nbsp;<span class="num" id="1664703">1</span><span class="op" id="1664704">&lt;&lt;</span><span class="ident" id="1664706">mantbits64</span>&nbsp;<span class="op" id="1664717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664723">mant</span>&nbsp;<span class="op" id="1664728">&lt;&lt;=</span>&nbsp;<span class="num" id="1664732">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664738">exp</span><span class="op" id="1664741">--</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664755">default</span><span class="op" id="1664762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1664766">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664792">mant</span>&nbsp;<span class="op" id="1664797">|=</span>&nbsp;<span class="num" id="1664800">1</span>&nbsp;<span class="op" id="1664802">&lt;&lt;</span>&nbsp;<span class="ident" id="1664805">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664818">exp</span>&nbsp;<span class="op" id="1664822">+=</span>&nbsp;<span class="ident" id="1664825">bias64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1664833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1664836">return</span><br>
<span class="lineno"></span><span class="op" id="1664843">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1664846">func</span>&nbsp;<span class="ident" id="1664851">funpack32</span><span class="op" id="1664860">(</span><span class="ident" id="1664861">f</span>&nbsp;<span class="builtintype" id="1664863">uint32</span><span class="op" id="1664869">)</span>&nbsp;<span class="op" id="1664871">(</span><span class="ident" id="1664872">sign</span><span class="op" id="1664876">,</span>&nbsp;<span class="ident" id="1664878">mant</span>&nbsp;<span class="builtintype" id="1664883">uint32</span><span class="op" id="1664889">,</span>&nbsp;<span class="ident" id="1664891">exp</span>&nbsp;<span class="builtintype" id="1664895">int</span><span class="op" id="1664898">,</span>&nbsp;<span class="ident" id="1664900">inf</span><span class="op" id="1664903">,</span>&nbsp;<span class="ident" id="1664905">nan</span>&nbsp;<span class="builtintype" id="1664909">bool</span><span class="op" id="1664913">)</span>&nbsp;<span class="op" id="1664915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664918">sign</span>&nbsp;<span class="op" id="1664923">=</span>&nbsp;<span class="ident" id="1664925">f</span>&nbsp;<span class="op" id="1664927">&amp;</span>&nbsp;<span class="op" id="1664929">(</span><span class="num" id="1664930">1</span>&nbsp;<span class="op" id="1664932">&lt;&lt;</span>&nbsp;<span class="op" id="1664935">(</span><span class="ident" id="1664936">mantbits32</span>&nbsp;<span class="op" id="1664947">+</span>&nbsp;<span class="ident" id="1664949">expbits32</span><span class="op" id="1664958">)</span><span class="op" id="1664959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664962">mant</span>&nbsp;<span class="op" id="1664967">=</span>&nbsp;<span class="ident" id="1664969">f</span>&nbsp;<span class="op" id="1664971">&amp;</span>&nbsp;<span class="op" id="1664973">(</span><span class="num" id="1664974">1</span><span class="op" id="1664975">&lt;&lt;</span><span class="ident" id="1664977">mantbits32</span>&nbsp;<span class="op" id="1664988">-</span>&nbsp;<span class="num" id="1664990">1</span><span class="op" id="1664991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1664994">exp</span>&nbsp;<span class="op" id="1664998">=</span>&nbsp;<span class="builtintype" id="1665000">int</span><span class="op" id="1665003">(</span><span class="ident" id="1665004">f</span><span class="op" id="1665005">&gt;&gt;</span><span class="ident" id="1665007">mantbits32</span><span class="op" id="1665017">)</span>&nbsp;<span class="op" id="1665019">&amp;</span>&nbsp;<span class="op" id="1665021">(</span><span class="num" id="1665022">1</span><span class="op" id="1665023">&lt;&lt;</span><span class="ident" id="1665025">expbits32</span>&nbsp;<span class="op" id="1665035">-</span>&nbsp;<span class="num" id="1665037">1</span><span class="op" id="1665038">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665042">switch</span>&nbsp;<span class="ident" id="1665049">exp</span>&nbsp;<span class="op" id="1665053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665056">case</span>&nbsp;<span class="num" id="1665061">1</span><span class="op" id="1665062">&lt;&lt;</span><span class="ident" id="1665064">expbits32</span>&nbsp;<span class="op" id="1665074">-</span>&nbsp;<span class="num" id="1665076">1</span><span class="op" id="1665077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665081">if</span>&nbsp;<span class="ident" id="1665084">mant</span>&nbsp;<span class="op" id="1665089">!=</span>&nbsp;<span class="num" id="1665092">0</span>&nbsp;<span class="op" id="1665094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665099">nan</span>&nbsp;<span class="op" id="1665103">=</span>&nbsp;<span class="builtintype" id="1665105">true</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665113">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665126">inf</span>&nbsp;<span class="op" id="1665130">=</span>&nbsp;<span class="builtintype" id="1665132">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665139">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665148">case</span>&nbsp;<span class="num" id="1665153">0</span><span class="op" id="1665154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1665158">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665176">if</span>&nbsp;<span class="ident" id="1665179">mant</span>&nbsp;<span class="op" id="1665184">!=</span>&nbsp;<span class="num" id="1665187">0</span>&nbsp;<span class="op" id="1665189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665194">exp</span>&nbsp;<span class="op" id="1665198">+=</span>&nbsp;<span class="ident" id="1665201">bias32</span>&nbsp;<span class="op" id="1665208">+</span>&nbsp;<span class="num" id="1665210">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665215">for</span>&nbsp;<span class="ident" id="1665219">mant</span>&nbsp;<span class="op" id="1665224">&lt;</span>&nbsp;<span class="num" id="1665226">1</span><span class="op" id="1665227">&lt;&lt;</span><span class="ident" id="1665229">mantbits32</span>&nbsp;<span class="op" id="1665240">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665246">mant</span>&nbsp;<span class="op" id="1665251">&lt;&lt;=</span>&nbsp;<span class="num" id="1665255">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665261">exp</span><span class="op" id="1665264">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665278">default</span><span class="op" id="1665285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1665289">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665315">mant</span>&nbsp;<span class="op" id="1665320">|=</span>&nbsp;<span class="num" id="1665323">1</span>&nbsp;<span class="op" id="1665325">&lt;&lt;</span>&nbsp;<span class="ident" id="1665328">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665341">exp</span>&nbsp;<span class="op" id="1665345">+=</span>&nbsp;<span class="ident" id="1665348">bias32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665356">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665359">return</span><br>
<span class="lineno"></span><span class="op" id="1665366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1665369">func</span>&nbsp;<span class="ident" id="1665374">fpack64</span><span class="op" id="1665381">(</span><span class="ident" id="1665382">sign</span><span class="op" id="1665386">,</span>&nbsp;<span class="ident" id="1665388">mant</span>&nbsp;<span class="ident" id="1665393">uint64</span><span class="op" id="1665399">,</span>&nbsp;<span class="ident" id="1665401">exp</span>&nbsp;<span class="builtintype" id="1665405">int</span><span class="op" id="1665408">,</span>&nbsp;<span class="ident" id="1665410">trunc</span>&nbsp;<span class="ident" id="1665416">uint64</span><span class="op" id="1665422">)</span>&nbsp;<span class="ident" id="1665424">uint64</span>&nbsp;<span class="op" id="1665431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665434">mant0</span><span class="op" id="1665439">,</span>&nbsp;<span class="ident" id="1665441">exp0</span><span class="op" id="1665445">,</span>&nbsp;<span class="ident" id="1665447">trunc0</span>&nbsp;<span class="op" id="1665454">:=</span>&nbsp;<span class="ident" id="1665457">mant</span><span class="op" id="1665461">,</span>&nbsp;<span class="ident" id="1665463">exp</span><span class="op" id="1665466">,</span>&nbsp;<span class="ident" id="1665468">trunc</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665475">if</span>&nbsp;<span class="ident" id="1665478">mant</span>&nbsp;<span class="op" id="1665483">==</span>&nbsp;<span class="num" id="1665486">0</span>&nbsp;<span class="op" id="1665488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665492">return</span>&nbsp;<span class="ident" id="1665499">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665508">for</span>&nbsp;<span class="ident" id="1665512">mant</span>&nbsp;<span class="op" id="1665517">&lt;</span>&nbsp;<span class="num" id="1665519">1</span><span class="op" id="1665520">&lt;&lt;</span><span class="ident" id="1665522">mantbits64</span>&nbsp;<span class="op" id="1665533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665537">mant</span>&nbsp;<span class="op" id="1665542">&lt;&lt;=</span>&nbsp;<span class="num" id="1665546">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665550">exp</span><span class="op" id="1665553">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665560">for</span>&nbsp;<span class="ident" id="1665564">mant</span>&nbsp;<span class="op" id="1665569">&gt;=</span>&nbsp;<span class="num" id="1665572">4</span><span class="op" id="1665573">&lt;&lt;</span><span class="ident" id="1665575">mantbits64</span>&nbsp;<span class="op" id="1665586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665590">trunc</span>&nbsp;<span class="op" id="1665596">|=</span>&nbsp;<span class="ident" id="1665599">mant</span>&nbsp;<span class="op" id="1665604">&amp;</span>&nbsp;<span class="num" id="1665606">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665610">mant</span>&nbsp;<span class="op" id="1665615">&gt;&gt;=</span>&nbsp;<span class="num" id="1665619">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665623">exp</span><span class="op" id="1665626">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665633">if</span>&nbsp;<span class="ident" id="1665636">mant</span>&nbsp;<span class="op" id="1665641">&gt;=</span>&nbsp;<span class="num" id="1665644">2</span><span class="op" id="1665645">&lt;&lt;</span><span class="ident" id="1665647">mantbits64</span>&nbsp;<span class="op" id="1665658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665662">if</span>&nbsp;<span class="ident" id="1665665">mant</span><span class="op" id="1665669">&amp;</span><span class="num" id="1665670">1</span>&nbsp;<span class="op" id="1665672">!=</span>&nbsp;<span class="num" id="1665675">0</span>&nbsp;<span class="op" id="1665677">&amp;&amp;</span>&nbsp;<span class="op" id="1665680">(</span><span class="ident" id="1665681">trunc</span>&nbsp;<span class="op" id="1665687">!=</span>&nbsp;<span class="num" id="1665690">0</span>&nbsp;<span class="op" id="1665692">||</span>&nbsp;<span class="ident" id="1665695">mant</span><span class="op" id="1665699">&amp;</span><span class="num" id="1665700">2</span>&nbsp;<span class="op" id="1665702">!=</span>&nbsp;<span class="num" id="1665705">0</span><span class="op" id="1665706">)</span>&nbsp;<span class="op" id="1665708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665713">mant</span><span class="op" id="1665717">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665723">if</span>&nbsp;<span class="ident" id="1665726">mant</span>&nbsp;<span class="op" id="1665731">&gt;=</span>&nbsp;<span class="num" id="1665734">4</span><span class="op" id="1665735">&lt;&lt;</span><span class="ident" id="1665737">mantbits64</span>&nbsp;<span class="op" id="1665748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665754">mant</span>&nbsp;<span class="op" id="1665759">&gt;&gt;=</span>&nbsp;<span class="num" id="1665763">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665769">exp</span><span class="op" id="1665772">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665782">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665786">mant</span>&nbsp;<span class="op" id="1665791">&gt;&gt;=</span>&nbsp;<span class="num" id="1665795">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665799">exp</span><span class="op" id="1665802">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665809">if</span>&nbsp;<span class="ident" id="1665812">exp</span>&nbsp;<span class="op" id="1665816">&gt;=</span>&nbsp;<span class="num" id="1665819">1</span><span class="op" id="1665820">&lt;&lt;</span><span class="ident" id="1665822">expbits64</span><span class="op" id="1665831">-</span><span class="num" id="1665832">1</span><span class="op" id="1665833">+</span><span class="ident" id="1665834">bias64</span>&nbsp;<span class="op" id="1665841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665845">return</span>&nbsp;<span class="ident" id="1665852">sign</span>&nbsp;<span class="op" id="1665857">^</span>&nbsp;<span class="ident" id="1665859">inf64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665869">if</span>&nbsp;<span class="ident" id="1665872">exp</span>&nbsp;<span class="op" id="1665876">&lt;</span>&nbsp;<span class="ident" id="1665878">bias64</span><span class="op" id="1665884">+</span><span class="num" id="1665885">1</span>&nbsp;<span class="op" id="1665887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665891">if</span>&nbsp;<span class="ident" id="1665894">exp</span>&nbsp;<span class="op" id="1665898">&lt;</span>&nbsp;<span class="ident" id="1665900">bias64</span><span class="op" id="1665906">-</span><span class="builtintype" id="1665907">int</span><span class="op" id="1665910">(</span><span class="ident" id="1665911">mantbits64</span><span class="op" id="1665921">)</span>&nbsp;<span class="op" id="1665923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1665928">return</span>&nbsp;<span class="ident" id="1665935">sign</span>&nbsp;<span class="op" id="1665940">|</span>&nbsp;<span class="num" id="1665942">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1665946">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1665950">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1665981">mant</span><span class="op" id="1665985">,</span>&nbsp;<span class="ident" id="1665987">exp</span><span class="op" id="1665990">,</span>&nbsp;<span class="ident" id="1665992">trunc</span>&nbsp;<span class="op" id="1665998">=</span>&nbsp;<span class="ident" id="1666000">mant0</span><span class="op" id="1666005">,</span>&nbsp;<span class="ident" id="1666007">exp0</span><span class="op" id="1666011">,</span>&nbsp;<span class="ident" id="1666013">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666022">for</span>&nbsp;<span class="ident" id="1666026">exp</span>&nbsp;<span class="op" id="1666030">&lt;</span>&nbsp;<span class="ident" id="1666032">bias64</span>&nbsp;<span class="op" id="1666039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666044">trunc</span>&nbsp;<span class="op" id="1666050">|=</span>&nbsp;<span class="ident" id="1666053">mant</span>&nbsp;<span class="op" id="1666058">&amp;</span>&nbsp;<span class="num" id="1666060">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666065">mant</span>&nbsp;<span class="op" id="1666070">&gt;&gt;=</span>&nbsp;<span class="num" id="1666074">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666079">exp</span><span class="op" id="1666082">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666091">if</span>&nbsp;<span class="ident" id="1666094">mant</span><span class="op" id="1666098">&amp;</span><span class="num" id="1666099">1</span>&nbsp;<span class="op" id="1666101">!=</span>&nbsp;<span class="num" id="1666104">0</span>&nbsp;<span class="op" id="1666106">&amp;&amp;</span>&nbsp;<span class="op" id="1666109">(</span><span class="ident" id="1666110">trunc</span>&nbsp;<span class="op" id="1666116">!=</span>&nbsp;<span class="num" id="1666119">0</span>&nbsp;<span class="op" id="1666121">||</span>&nbsp;<span class="ident" id="1666124">mant</span><span class="op" id="1666128">&amp;</span><span class="num" id="1666129">2</span>&nbsp;<span class="op" id="1666131">!=</span>&nbsp;<span class="num" id="1666134">0</span><span class="op" id="1666135">)</span>&nbsp;<span class="op" id="1666137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666142">mant</span><span class="op" id="1666146">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666151">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666155">mant</span>&nbsp;<span class="op" id="1666160">&gt;&gt;=</span>&nbsp;<span class="num" id="1666164">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666168">exp</span><span class="op" id="1666171">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666176">if</span>&nbsp;<span class="ident" id="1666179">mant</span>&nbsp;<span class="op" id="1666184">&lt;</span>&nbsp;<span class="num" id="1666186">1</span><span class="op" id="1666187">&lt;&lt;</span><span class="ident" id="1666189">mantbits64</span>&nbsp;<span class="op" id="1666200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666205">return</span>&nbsp;<span class="ident" id="1666212">sign</span>&nbsp;<span class="op" id="1666217">|</span>&nbsp;<span class="ident" id="1666219">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666226">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666232">return</span>&nbsp;<span class="ident" id="1666239">sign</span>&nbsp;<span class="op" id="1666244">|</span>&nbsp;<span class="ident" id="1666246">uint64</span><span class="op" id="1666252">(</span><span class="ident" id="1666253">exp</span><span class="op" id="1666256">-</span><span class="ident" id="1666257">bias64</span><span class="op" id="1666263">)</span><span class="op" id="1666264">&lt;&lt;</span><span class="ident" id="1666266">mantbits64</span>&nbsp;<span class="op" id="1666277">|</span>&nbsp;<span class="ident" id="1666279">mant</span><span class="op" id="1666283">&amp;</span><span class="op" id="1666284">(</span><span class="num" id="1666285">1</span><span class="op" id="1666286">&lt;&lt;</span><span class="ident" id="1666288">mantbits64</span><span class="op" id="1666298">-</span><span class="num" id="1666299">1</span><span class="op" id="1666300">)</span><br>
<span class="lineno"></span><span class="op" id="1666302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1666305">func</span>&nbsp;<span class="ident" id="1666310">fpack32</span><span class="op" id="1666317">(</span><span class="ident" id="1666318">sign</span><span class="op" id="1666322">,</span>&nbsp;<span class="ident" id="1666324">mant</span>&nbsp;<span class="builtintype" id="1666329">uint32</span><span class="op" id="1666335">,</span>&nbsp;<span class="ident" id="1666337">exp</span>&nbsp;<span class="builtintype" id="1666341">int</span><span class="op" id="1666344">,</span>&nbsp;<span class="ident" id="1666346">trunc</span>&nbsp;<span class="builtintype" id="1666352">uint32</span><span class="op" id="1666358">)</span>&nbsp;<span class="builtintype" id="1666360">uint32</span>&nbsp;<span class="op" id="1666367">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666370">mant0</span><span class="op" id="1666375">,</span>&nbsp;<span class="ident" id="1666377">exp0</span><span class="op" id="1666381">,</span>&nbsp;<span class="ident" id="1666383">trunc0</span>&nbsp;<span class="op" id="1666390">:=</span>&nbsp;<span class="ident" id="1666393">mant</span><span class="op" id="1666397">,</span>&nbsp;<span class="ident" id="1666399">exp</span><span class="op" id="1666402">,</span>&nbsp;<span class="ident" id="1666404">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666411">if</span>&nbsp;<span class="ident" id="1666414">mant</span>&nbsp;<span class="op" id="1666419">==</span>&nbsp;<span class="num" id="1666422">0</span>&nbsp;<span class="op" id="1666424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666428">return</span>&nbsp;<span class="ident" id="1666435">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666444">for</span>&nbsp;<span class="ident" id="1666448">mant</span>&nbsp;<span class="op" id="1666453">&lt;</span>&nbsp;<span class="num" id="1666455">1</span><span class="op" id="1666456">&lt;&lt;</span><span class="ident" id="1666458">mantbits32</span>&nbsp;<span class="op" id="1666469">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666473">mant</span>&nbsp;<span class="op" id="1666478">&lt;&lt;=</span>&nbsp;<span class="num" id="1666482">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666486">exp</span><span class="op" id="1666489">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666496">for</span>&nbsp;<span class="ident" id="1666500">mant</span>&nbsp;<span class="op" id="1666505">&gt;=</span>&nbsp;<span class="num" id="1666508">4</span><span class="op" id="1666509">&lt;&lt;</span><span class="ident" id="1666511">mantbits32</span>&nbsp;<span class="op" id="1666522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666526">trunc</span>&nbsp;<span class="op" id="1666532">|=</span>&nbsp;<span class="ident" id="1666535">mant</span>&nbsp;<span class="op" id="1666540">&amp;</span>&nbsp;<span class="num" id="1666542">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666546">mant</span>&nbsp;<span class="op" id="1666551">&gt;&gt;=</span>&nbsp;<span class="num" id="1666555">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666559">exp</span><span class="op" id="1666562">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666569">if</span>&nbsp;<span class="ident" id="1666572">mant</span>&nbsp;<span class="op" id="1666577">&gt;=</span>&nbsp;<span class="num" id="1666580">2</span><span class="op" id="1666581">&lt;&lt;</span><span class="ident" id="1666583">mantbits32</span>&nbsp;<span class="op" id="1666594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666598">if</span>&nbsp;<span class="ident" id="1666601">mant</span><span class="op" id="1666605">&amp;</span><span class="num" id="1666606">1</span>&nbsp;<span class="op" id="1666608">!=</span>&nbsp;<span class="num" id="1666611">0</span>&nbsp;<span class="op" id="1666613">&amp;&amp;</span>&nbsp;<span class="op" id="1666616">(</span><span class="ident" id="1666617">trunc</span>&nbsp;<span class="op" id="1666623">!=</span>&nbsp;<span class="num" id="1666626">0</span>&nbsp;<span class="op" id="1666628">||</span>&nbsp;<span class="ident" id="1666631">mant</span><span class="op" id="1666635">&amp;</span><span class="num" id="1666636">2</span>&nbsp;<span class="op" id="1666638">!=</span>&nbsp;<span class="num" id="1666641">0</span><span class="op" id="1666642">)</span>&nbsp;<span class="op" id="1666644">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666649">mant</span><span class="op" id="1666653">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666659">if</span>&nbsp;<span class="ident" id="1666662">mant</span>&nbsp;<span class="op" id="1666667">&gt;=</span>&nbsp;<span class="num" id="1666670">4</span><span class="op" id="1666671">&lt;&lt;</span><span class="ident" id="1666673">mantbits32</span>&nbsp;<span class="op" id="1666684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666690">mant</span>&nbsp;<span class="op" id="1666695">&gt;&gt;=</span>&nbsp;<span class="num" id="1666699">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666705">exp</span><span class="op" id="1666708">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666714">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666722">mant</span>&nbsp;<span class="op" id="1666727">&gt;&gt;=</span>&nbsp;<span class="num" id="1666731">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666735">exp</span><span class="op" id="1666738">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666745">if</span>&nbsp;<span class="ident" id="1666748">exp</span>&nbsp;<span class="op" id="1666752">&gt;=</span>&nbsp;<span class="num" id="1666755">1</span><span class="op" id="1666756">&lt;&lt;</span><span class="ident" id="1666758">expbits32</span><span class="op" id="1666767">-</span><span class="num" id="1666768">1</span><span class="op" id="1666769">+</span><span class="ident" id="1666770">bias32</span>&nbsp;<span class="op" id="1666777">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666781">return</span>&nbsp;<span class="ident" id="1666788">sign</span>&nbsp;<span class="op" id="1666793">^</span>&nbsp;<span class="ident" id="1666795">inf32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666805">if</span>&nbsp;<span class="ident" id="1666808">exp</span>&nbsp;<span class="op" id="1666812">&lt;</span>&nbsp;<span class="ident" id="1666814">bias32</span><span class="op" id="1666820">+</span><span class="num" id="1666821">1</span>&nbsp;<span class="op" id="1666823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666827">if</span>&nbsp;<span class="ident" id="1666830">exp</span>&nbsp;<span class="op" id="1666834">&lt;</span>&nbsp;<span class="ident" id="1666836">bias32</span><span class="op" id="1666842">-</span><span class="builtintype" id="1666843">int</span><span class="op" id="1666846">(</span><span class="ident" id="1666847">mantbits32</span><span class="op" id="1666857">)</span>&nbsp;<span class="op" id="1666859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666864">return</span>&nbsp;<span class="ident" id="1666871">sign</span>&nbsp;<span class="op" id="1666876">|</span>&nbsp;<span class="num" id="1666878">0</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1666882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1666886">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666917">mant</span><span class="op" id="1666921">,</span>&nbsp;<span class="ident" id="1666923">exp</span><span class="op" id="1666926">,</span>&nbsp;<span class="ident" id="1666928">trunc</span>&nbsp;<span class="op" id="1666934">=</span>&nbsp;<span class="ident" id="1666936">mant0</span><span class="op" id="1666941">,</span>&nbsp;<span class="ident" id="1666943">exp0</span><span class="op" id="1666947">,</span>&nbsp;<span class="ident" id="1666949">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1666958">for</span>&nbsp;<span class="ident" id="1666962">exp</span>&nbsp;<span class="op" id="1666966">&lt;</span>&nbsp;<span class="ident" id="1666968">bias32</span>&nbsp;<span class="op" id="1666975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1666980">trunc</span>&nbsp;<span class="op" id="1666986">|=</span>&nbsp;<span class="ident" id="1666989">mant</span>&nbsp;<span class="op" id="1666994">&amp;</span>&nbsp;<span class="num" id="1666996">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667001">mant</span>&nbsp;<span class="op" id="1667006">&gt;&gt;=</span>&nbsp;<span class="num" id="1667010">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667015">exp</span><span class="op" id="1667018">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667027">if</span>&nbsp;<span class="ident" id="1667030">mant</span><span class="op" id="1667034">&amp;</span><span class="num" id="1667035">1</span>&nbsp;<span class="op" id="1667037">!=</span>&nbsp;<span class="num" id="1667040">0</span>&nbsp;<span class="op" id="1667042">&amp;&amp;</span>&nbsp;<span class="op" id="1667045">(</span><span class="ident" id="1667046">trunc</span>&nbsp;<span class="op" id="1667052">!=</span>&nbsp;<span class="num" id="1667055">0</span>&nbsp;<span class="op" id="1667057">||</span>&nbsp;<span class="ident" id="1667060">mant</span><span class="op" id="1667064">&amp;</span><span class="num" id="1667065">2</span>&nbsp;<span class="op" id="1667067">!=</span>&nbsp;<span class="num" id="1667070">0</span><span class="op" id="1667071">)</span>&nbsp;<span class="op" id="1667073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667078">mant</span><span class="op" id="1667082">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667091">mant</span>&nbsp;<span class="op" id="1667096">&gt;&gt;=</span>&nbsp;<span class="num" id="1667100">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667104">exp</span><span class="op" id="1667107">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667112">if</span>&nbsp;<span class="ident" id="1667115">mant</span>&nbsp;<span class="op" id="1667120">&lt;</span>&nbsp;<span class="num" id="1667122">1</span><span class="op" id="1667123">&lt;&lt;</span><span class="ident" id="1667125">mantbits32</span>&nbsp;<span class="op" id="1667136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667141">return</span>&nbsp;<span class="ident" id="1667148">sign</span>&nbsp;<span class="op" id="1667153">|</span>&nbsp;<span class="ident" id="1667155">mant</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667168">return</span>&nbsp;<span class="ident" id="1667175">sign</span>&nbsp;<span class="op" id="1667180">|</span>&nbsp;<span class="builtintype" id="1667182">uint32</span><span class="op" id="1667188">(</span><span class="ident" id="1667189">exp</span><span class="op" id="1667192">-</span><span class="ident" id="1667193">bias32</span><span class="op" id="1667199">)</span><span class="op" id="1667200">&lt;&lt;</span><span class="ident" id="1667202">mantbits32</span>&nbsp;<span class="op" id="1667213">|</span>&nbsp;<span class="ident" id="1667215">mant</span><span class="op" id="1667219">&amp;</span><span class="op" id="1667220">(</span><span class="num" id="1667221">1</span><span class="op" id="1667222">&lt;&lt;</span><span class="ident" id="1667224">mantbits32</span><span class="op" id="1667234">-</span><span class="num" id="1667235">1</span><span class="op" id="1667236">)</span><br>
<span class="lineno"></span><span class="op" id="1667238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="1667241">func</span>&nbsp;<span class="ident" id="1667246">fadd64</span><span class="op" id="1667252">(</span><span class="ident" id="1667253">f</span><span class="op" id="1667254">,</span>&nbsp;<span class="ident" id="1667256">g</span>&nbsp;<span class="ident" id="1667258">uint64</span><span class="op" id="1667264">)</span>&nbsp;<span class="ident" id="1667266">uint64</span>&nbsp;<span class="op" id="1667273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667276">fs</span><span class="op" id="1667278">,</span>&nbsp;<span class="ident" id="1667280">fm</span><span class="op" id="1667282">,</span>&nbsp;<span class="ident" id="1667284">fe</span><span class="op" id="1667286">,</span>&nbsp;<span class="ident" id="1667288">fi</span><span class="op" id="1667290">,</span>&nbsp;<span class="ident" id="1667292">fn</span>&nbsp;<span class="op" id="1667295">:=</span>&nbsp;<span class="ident" id="1667298">funpack64</span><span class="op" id="1667307">(</span><span class="ident" id="1667308">f</span><span class="op" id="1667309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667312">gs</span><span class="op" id="1667314">,</span>&nbsp;<span class="ident" id="1667316">gm</span><span class="op" id="1667318">,</span>&nbsp;<span class="ident" id="1667320">ge</span><span class="op" id="1667322">,</span>&nbsp;<span class="ident" id="1667324">gi</span><span class="op" id="1667326">,</span>&nbsp;<span class="ident" id="1667328">gn</span>&nbsp;<span class="op" id="1667331">:=</span>&nbsp;<span class="ident" id="1667334">funpack64</span><span class="op" id="1667343">(</span><span class="ident" id="1667344">g</span><span class="op" id="1667345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1667349">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667368">switch</span>&nbsp;<span class="op" id="1667375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667378">case</span>&nbsp;<span class="ident" id="1667383">fn</span>&nbsp;<span class="op" id="1667386">||</span>&nbsp;<span class="ident" id="1667389">gn</span><span class="op" id="1667391">:</span>&nbsp;<span class="comment" id="1667393">//&nbsp;NaN&nbsp;+&nbsp;x&nbsp;or&nbsp;x&nbsp;+&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667423">return</span>&nbsp;<span class="ident" id="1667430">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667438">case</span>&nbsp;<span class="ident" id="1667443">fi</span>&nbsp;<span class="op" id="1667446">&amp;&amp;</span>&nbsp;<span class="ident" id="1667449">gi</span>&nbsp;<span class="op" id="1667452">&amp;&amp;</span>&nbsp;<span class="ident" id="1667455">fs</span>&nbsp;<span class="op" id="1667458">!=</span>&nbsp;<span class="ident" id="1667461">gs</span><span class="op" id="1667463">:</span>&nbsp;<span class="comment" id="1667465">//&nbsp;+Inf&nbsp;+&nbsp;-Inf&nbsp;or&nbsp;-Inf&nbsp;+&nbsp;+Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667503">return</span>&nbsp;<span class="ident" id="1667510">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667518">case</span>&nbsp;<span class="ident" id="1667523">fi</span><span class="op" id="1667525">:</span>&nbsp;<span class="comment" id="1667527">//&nbsp;Inf&nbsp;+&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667550">return</span>&nbsp;<span class="ident" id="1667557">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667561">case</span>&nbsp;<span class="ident" id="1667566">gi</span><span class="op" id="1667568">:</span>&nbsp;<span class="comment" id="1667570">//&nbsp;f&nbsp;+&nbsp;Inf&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667593">return</span>&nbsp;<span class="ident" id="1667600">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667604">case</span>&nbsp;<span class="ident" id="1667609">fm</span>&nbsp;<span class="op" id="1667612">==</span>&nbsp;<span class="num" id="1667615">0</span>&nbsp;<span class="op" id="1667617">&amp;&amp;</span>&nbsp;<span class="ident" id="1667620">gm</span>&nbsp;<span class="op" id="1667623">==</span>&nbsp;<span class="num" id="1667626">0</span>&nbsp;<span class="op" id="1667628">&amp;&amp;</span>&nbsp;<span class="ident" id="1667631">fs</span>&nbsp;<span class="op" id="1667634">!=</span>&nbsp;<span class="num" id="1667637">0</span>&nbsp;<span class="op" id="1667639">&amp;&amp;</span>&nbsp;<span class="ident" id="1667642">gs</span>&nbsp;<span class="op" id="1667645">!=</span>&nbsp;<span class="num" id="1667648">0</span><span class="op" id="1667649">:</span>&nbsp;<span class="comment" id="1667651">//&nbsp;-0&nbsp;+&nbsp;-0&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667669">return</span>&nbsp;<span class="ident" id="1667676">f</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667680">case</span>&nbsp;<span class="ident" id="1667685">fm</span>&nbsp;<span class="op" id="1667688">==</span>&nbsp;<span class="num" id="1667691">0</span><span class="op" id="1667692">:</span>&nbsp;<span class="comment" id="1667694">//&nbsp;0&nbsp;+&nbsp;g&nbsp;=&nbsp;g&nbsp;but&nbsp;0&nbsp;+&nbsp;-0&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667725">if</span>&nbsp;<span class="ident" id="1667728">gm</span>&nbsp;<span class="op" id="1667731">==</span>&nbsp;<span class="num" id="1667734">0</span>&nbsp;<span class="op" id="1667736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667741">g</span>&nbsp;<span class="op" id="1667743">^=</span>&nbsp;<span class="ident" id="1667746">gs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667751">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667755">return</span>&nbsp;<span class="ident" id="1667762">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667766">case</span>&nbsp;<span class="ident" id="1667771">gm</span>&nbsp;<span class="op" id="1667774">==</span>&nbsp;<span class="num" id="1667777">0</span><span class="op" id="1667778">:</span>&nbsp;<span class="comment" id="1667780">//&nbsp;f&nbsp;+&nbsp;0&nbsp;=&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667795">return</span>&nbsp;<span class="ident" id="1667802">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1667810">if</span>&nbsp;<span class="ident" id="1667813">fe</span>&nbsp;<span class="op" id="1667816">&lt;</span>&nbsp;<span class="ident" id="1667818">ge</span>&nbsp;<span class="op" id="1667821">||</span>&nbsp;<span class="ident" id="1667824">fe</span>&nbsp;<span class="op" id="1667827">==</span>&nbsp;<span class="ident" id="1667830">ge</span>&nbsp;<span class="op" id="1667833">&amp;&amp;</span>&nbsp;<span class="ident" id="1667836">fm</span>&nbsp;<span class="op" id="1667839">&lt;</span>&nbsp;<span class="ident" id="1667841">gm</span>&nbsp;<span class="op" id="1667844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667848">f</span><span class="op" id="1667849">,</span>&nbsp;<span class="ident" id="1667851">g</span><span class="op" id="1667852">,</span>&nbsp;<span class="ident" id="1667854">fs</span><span class="op" id="1667856">,</span>&nbsp;<span class="ident" id="1667858">fm</span><span class="op" id="1667860">,</span>&nbsp;<span class="ident" id="1667862">fe</span><span class="op" id="1667864">,</span>&nbsp;<span class="ident" id="1667866">gs</span><span class="op" id="1667868">,</span>&nbsp;<span class="ident" id="1667870">gm</span><span class="op" id="1667872">,</span>&nbsp;<span class="ident" id="1667874">ge</span>&nbsp;<span class="op" id="1667877">=</span>&nbsp;<span class="ident" id="1667879">g</span><span class="op" id="1667880">,</span>&nbsp;<span class="ident" id="1667882">f</span><span class="op" id="1667883">,</span>&nbsp;<span class="ident" id="1667885">gs</span><span class="op" id="1667887">,</span>&nbsp;<span class="ident" id="1667889">gm</span><span class="op" id="1667891">,</span>&nbsp;<span class="ident" id="1667893">ge</span><span class="op" id="1667895">,</span>&nbsp;<span class="ident" id="1667897">fs</span><span class="op" id="1667899">,</span>&nbsp;<span class="ident" id="1667901">fm</span><span class="op" id="1667903">,</span>&nbsp;<span class="ident" id="1667905">fe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1667909">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667913">shift</span>&nbsp;<span class="op" id="1667919">:=</span>&nbsp;<span class="builtintype" id="1667922">uint</span><span class="op" id="1667926">(</span><span class="ident" id="1667927">fe</span>&nbsp;<span class="op" id="1667930">-</span>&nbsp;<span class="ident" id="1667932">ge</span><span class="op" id="1667934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667937">fm</span>&nbsp;<span class="op" id="1667940">&lt;&lt;=</span>&nbsp;<span class="num" id="1667944">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667947">gm</span>&nbsp;<span class="op" id="1667950">&lt;&lt;=</span>&nbsp;<span class="num" id="1667954">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667957">trunc</span>&nbsp;<span class="op" id="1667963">:=</span>&nbsp;<span class="ident" id="1667966">gm</span>&nbsp;<span class="op" id="1667969">&amp;</span>&nbsp;<span class="op" id="1667971">(</span><span class="num" id="1667972">1</span><span class="op" id="1667973">&lt;&lt;</span><span class="ident" id="1667975">shift</span>&nbsp;<span class="op" id="1667981">-</span>&nbsp;<span class="num" id="1667983">1</span><span class="op" id="1667984">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1667987">gm</span>&nbsp;<span class="op" id="1667990">&gt;&gt;=</span>&nbsp;<span class="ident" id="1667994">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668001">if</span>&nbsp;<span class="ident" id="1668004">fs</span>&nbsp;<span class="op" id="1668007">==</span>&nbsp;<span class="ident" id="1668010">gs</span>&nbsp;<span class="op" id="1668013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668017">fm</span>&nbsp;<span class="op" id="1668020">+=</span>&nbsp;<span class="ident" id="1668023">gm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1668027">}</span>&nbsp;<span class="keyword" id="1668029">else</span>&nbsp;<span class="op" id="1668034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668038">fm</span>&nbsp;<span class="op" id="1668041">-=</span>&nbsp;<span class="ident" id="1668044">gm</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668049">if</span>&nbsp;<span class="ident" id="1668052">trunc</span>&nbsp;<span class="op" id="1668058">!=</span>&nbsp;<span class="num" id="1668061">0</span>&nbsp;<span class="op" id="1668063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668068">fm</span><span class="op" id="1668070">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1668075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1668078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668081">if</span>&nbsp;<span class="ident" id="1668084">fm</span>&nbsp;<span class="op" id="1668087">==</span>&nbsp;<span class="num" id="1668090">0</span>&nbsp;<span class="op" id="1668092">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668096">fs</span>&nbsp;<span class="op" id="1668099">=</span>&nbsp;<span class="num" id="1668101">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1668104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668107">return</span>&nbsp;<span class="ident" id="1668114">fpack64</span><span class="op" id="1668121">(</span><span class="ident" id="1668122">fs</span><span class="op" id="1668124">,</span>&nbsp;<span class="ident" id="1668126">fm</span><span class="op" id="1668128">,</span>&nbsp;<span class="ident" id="1668130">fe</span><span class="op" id="1668132">-</span><span class="num" id="1668133">2</span><span class="op" id="1668134">,</span>&nbsp;<span class="ident" id="1668136">trunc</span><span class="op" id="1668141">)</span><br>
<span class="lineno"></span><span class="op" id="1668143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="1668146">func</span>&nbsp;<span class="ident" id="1668151">fsub64</span><span class="op" id="1668157">(</span><span class="ident" id="1668158">f</span><span class="op" id="1668159">,</span>&nbsp;<span class="ident" id="1668161">g</span>&nbsp;<span class="ident" id="1668163">uint64</span><span class="op" id="1668169">)</span>&nbsp;<span class="ident" id="1668171">uint64</span>&nbsp;<span class="op" id="1668178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668181">return</span>&nbsp;<span class="ident" id="1668188">fadd64</span><span class="op" id="1668194">(</span><span class="ident" id="1668195">f</span><span class="op" id="1668196">,</span>&nbsp;<span class="ident" id="1668198">fneg64</span><span class="op" id="1668204">(</span><span class="ident" id="1668205">g</span><span class="op" id="1668206">)</span><span class="op" id="1668207">)</span><br>
<span class="lineno"></span><span class="op" id="1668209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1668212">func</span>&nbsp;<span class="ident" id="1668217">fneg64</span><span class="op" id="1668223">(</span><span class="ident" id="1668224">f</span>&nbsp;<span class="ident" id="1668226">uint64</span><span class="op" id="1668232">)</span>&nbsp;<span class="ident" id="1668234">uint64</span>&nbsp;<span class="op" id="1668241">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668244">return</span>&nbsp;<span class="ident" id="1668251">f</span>&nbsp;<span class="op" id="1668253">^</span>&nbsp;<span class="op" id="1668255">(</span><span class="num" id="1668256">1</span>&nbsp;<span class="op" id="1668258">&lt;&lt;</span>&nbsp;<span class="op" id="1668261">(</span><span class="ident" id="1668262">mantbits64</span>&nbsp;<span class="op" id="1668273">+</span>&nbsp;<span class="ident" id="1668275">expbits64</span><span class="op" id="1668284">)</span><span class="op" id="1668285">)</span><br>
<span class="lineno"></span><span class="op" id="1668287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1668290">func</span>&nbsp;<span class="ident" id="1668295">fmul64</span><span class="op" id="1668301">(</span><span class="ident" id="1668302">f</span><span class="op" id="1668303">,</span>&nbsp;<span class="ident" id="1668305">g</span>&nbsp;<span class="ident" id="1668307">uint64</span><span class="op" id="1668313">)</span>&nbsp;<span class="ident" id="1668315">uint64</span>&nbsp;<span class="op" id="1668322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668325">fs</span><span class="op" id="1668327">,</span>&nbsp;<span class="ident" id="1668329">fm</span><span class="op" id="1668331">,</span>&nbsp;<span class="ident" id="1668333">fe</span><span class="op" id="1668335">,</span>&nbsp;<span class="ident" id="1668337">fi</span><span class="op" id="1668339">,</span>&nbsp;<span class="ident" id="1668341">fn</span>&nbsp;<span class="op" id="1668344">:=</span>&nbsp;<span class="ident" id="1668347">funpack64</span><span class="op" id="1668356">(</span><span class="ident" id="1668357">f</span><span class="op" id="1668358">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668361">gs</span><span class="op" id="1668363">,</span>&nbsp;<span class="ident" id="1668365">gm</span><span class="op" id="1668367">,</span>&nbsp;<span class="ident" id="1668369">ge</span><span class="op" id="1668371">,</span>&nbsp;<span class="ident" id="1668373">gi</span><span class="op" id="1668375">,</span>&nbsp;<span class="ident" id="1668377">gn</span>&nbsp;<span class="op" id="1668380">:=</span>&nbsp;<span class="ident" id="1668383">funpack64</span><span class="op" id="1668392">(</span><span class="ident" id="1668393">g</span><span class="op" id="1668394">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1668398">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668417">switch</span>&nbsp;<span class="op" id="1668424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668427">case</span>&nbsp;<span class="ident" id="1668432">fn</span>&nbsp;<span class="op" id="1668435">||</span>&nbsp;<span class="ident" id="1668438">gn</span><span class="op" id="1668440">:</span>&nbsp;<span class="comment" id="1668442">//&nbsp;NaN&nbsp;*&nbsp;g&nbsp;or&nbsp;f&nbsp;*&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668472">return</span>&nbsp;<span class="ident" id="1668479">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668487">case</span>&nbsp;<span class="ident" id="1668492">fi</span>&nbsp;<span class="op" id="1668495">&amp;&amp;</span>&nbsp;<span class="ident" id="1668498">gi</span><span class="op" id="1668500">:</span>&nbsp;<span class="comment" id="1668502">//&nbsp;Inf&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668544">return</span>&nbsp;<span class="ident" id="1668551">f</span>&nbsp;<span class="op" id="1668553">^</span>&nbsp;<span class="ident" id="1668555">gs</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668560">case</span>&nbsp;<span class="ident" id="1668565">fi</span>&nbsp;<span class="op" id="1668568">&amp;&amp;</span>&nbsp;<span class="ident" id="1668571">gm</span>&nbsp;<span class="op" id="1668574">==</span>&nbsp;<span class="num" id="1668577">0</span><span class="op" id="1668578">,</span>&nbsp;<span class="ident" id="1668580">fm</span>&nbsp;<span class="op" id="1668583">==</span>&nbsp;<span class="num" id="1668586">0</span>&nbsp;<span class="op" id="1668588">&amp;&amp;</span>&nbsp;<span class="ident" id="1668591">gi</span><span class="op" id="1668593">:</span>&nbsp;<span class="comment" id="1668595">//&nbsp;0&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;*&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668624">return</span>&nbsp;<span class="ident" id="1668631">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668639">case</span>&nbsp;<span class="ident" id="1668644">fm</span>&nbsp;<span class="op" id="1668647">==</span>&nbsp;<span class="num" id="1668650">0</span><span class="op" id="1668651">:</span>&nbsp;<span class="comment" id="1668653">//&nbsp;0&nbsp;*&nbsp;x&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668689">return</span>&nbsp;<span class="ident" id="1668696">f</span>&nbsp;<span class="op" id="1668698">^</span>&nbsp;<span class="ident" id="1668700">gs</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668705">case</span>&nbsp;<span class="ident" id="1668710">gm</span>&nbsp;<span class="op" id="1668713">==</span>&nbsp;<span class="num" id="1668716">0</span><span class="op" id="1668717">:</span>&nbsp;<span class="comment" id="1668719">//&nbsp;x&nbsp;*&nbsp;0&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668755">return</span>&nbsp;<span class="ident" id="1668762">g</span>&nbsp;<span class="op" id="1668764">^</span>&nbsp;<span class="ident" id="1668766">fs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1668770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1668774">//&nbsp;53-bit&nbsp;*&nbsp;53-bit&nbsp;=&nbsp;107-&nbsp;or&nbsp;108-bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668812">lo</span><span class="op" id="1668814">,</span>&nbsp;<span class="ident" id="1668816">hi</span>&nbsp;<span class="op" id="1668819">:=</span>&nbsp;<span class="ident" id="1668822">mullu</span><span class="op" id="1668827">(</span><span class="ident" id="1668828">fm</span><span class="op" id="1668830">,</span>&nbsp;<span class="ident" id="1668832">gm</span><span class="op" id="1668834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668837">shift</span>&nbsp;<span class="op" id="1668843">:=</span>&nbsp;<span class="ident" id="1668846">mantbits64</span>&nbsp;<span class="op" id="1668857">-</span>&nbsp;<span class="num" id="1668859">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668862">trunc</span>&nbsp;<span class="op" id="1668868">:=</span>&nbsp;<span class="ident" id="1668871">lo</span>&nbsp;<span class="op" id="1668874">&amp;</span>&nbsp;<span class="op" id="1668876">(</span><span class="num" id="1668877">1</span><span class="op" id="1668878">&lt;&lt;</span><span class="ident" id="1668880">shift</span>&nbsp;<span class="op" id="1668886">-</span>&nbsp;<span class="num" id="1668888">1</span><span class="op" id="1668889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1668892">mant</span>&nbsp;<span class="op" id="1668897">:=</span>&nbsp;<span class="ident" id="1668900">hi</span><span class="op" id="1668902">&lt;&lt;</span><span class="op" id="1668904">(</span><span class="num" id="1668905">64</span><span class="op" id="1668907">-</span><span class="ident" id="1668908">shift</span><span class="op" id="1668913">)</span>&nbsp;<span class="op" id="1668915">|</span>&nbsp;<span class="ident" id="1668917">lo</span><span class="op" id="1668919">&gt;&gt;</span><span class="ident" id="1668921">shift</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1668928">return</span>&nbsp;<span class="ident" id="1668935">fpack64</span><span class="op" id="1668942">(</span><span class="ident" id="1668943">fs</span><span class="op" id="1668945">^</span><span class="ident" id="1668946">gs</span><span class="op" id="1668948">,</span>&nbsp;<span class="ident" id="1668950">mant</span><span class="op" id="1668954">,</span>&nbsp;<span class="ident" id="1668956">fe</span><span class="op" id="1668958">+</span><span class="ident" id="1668959">ge</span><span class="op" id="1668961">-</span><span class="num" id="1668962">1</span><span class="op" id="1668963">,</span>&nbsp;<span class="ident" id="1668965">trunc</span><span class="op" id="1668970">)</span><br>
<span class="lineno"></span><span class="op" id="1668972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1668975">func</span>&nbsp;<span class="ident" id="1668980">fdiv64</span><span class="op" id="1668986">(</span><span class="ident" id="1668987">f</span><span class="op" id="1668988">,</span>&nbsp;<span class="ident" id="1668990">g</span>&nbsp;<span class="ident" id="1668992">uint64</span><span class="op" id="1668998">)</span>&nbsp;<span class="ident" id="1669000">uint64</span>&nbsp;<span class="op" id="1669007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669010">fs</span><span class="op" id="1669012">,</span>&nbsp;<span class="ident" id="1669014">fm</span><span class="op" id="1669016">,</span>&nbsp;<span class="ident" id="1669018">fe</span><span class="op" id="1669020">,</span>&nbsp;<span class="ident" id="1669022">fi</span><span class="op" id="1669024">,</span>&nbsp;<span class="ident" id="1669026">fn</span>&nbsp;<span class="op" id="1669029">:=</span>&nbsp;<span class="ident" id="1669032">funpack64</span><span class="op" id="1669041">(</span><span class="ident" id="1669042">f</span><span class="op" id="1669043">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669046">gs</span><span class="op" id="1669048">,</span>&nbsp;<span class="ident" id="1669050">gm</span><span class="op" id="1669052">,</span>&nbsp;<span class="ident" id="1669054">ge</span><span class="op" id="1669056">,</span>&nbsp;<span class="ident" id="1669058">gi</span><span class="op" id="1669060">,</span>&nbsp;<span class="ident" id="1669062">gn</span>&nbsp;<span class="op" id="1669065">:=</span>&nbsp;<span class="ident" id="1669068">funpack64</span><span class="op" id="1669077">(</span><span class="ident" id="1669078">g</span><span class="op" id="1669079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1669083">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669102">switch</span>&nbsp;<span class="op" id="1669109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669112">case</span>&nbsp;<span class="ident" id="1669117">fn</span>&nbsp;<span class="op" id="1669120">||</span>&nbsp;<span class="ident" id="1669123">gn</span><span class="op" id="1669125">:</span>&nbsp;<span class="comment" id="1669127">//&nbsp;NaN&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669156">return</span>&nbsp;<span class="ident" id="1669163">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669171">case</span>&nbsp;<span class="ident" id="1669176">fi</span>&nbsp;<span class="op" id="1669179">&amp;&amp;</span>&nbsp;<span class="ident" id="1669182">gi</span><span class="op" id="1669184">:</span>&nbsp;<span class="comment" id="1669186">//&nbsp;Inf&nbsp;/&nbsp;Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669211">return</span>&nbsp;<span class="ident" id="1669218">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669226">case</span>&nbsp;<span class="op" id="1669231">!</span><span class="ident" id="1669232">fi</span>&nbsp;<span class="op" id="1669235">&amp;&amp;</span>&nbsp;<span class="op" id="1669238">!</span><span class="ident" id="1669239">gi</span>&nbsp;<span class="op" id="1669242">&amp;&amp;</span>&nbsp;<span class="ident" id="1669245">fm</span>&nbsp;<span class="op" id="1669248">==</span>&nbsp;<span class="num" id="1669251">0</span>&nbsp;<span class="op" id="1669253">&amp;&amp;</span>&nbsp;<span class="ident" id="1669256">gm</span>&nbsp;<span class="op" id="1669259">==</span>&nbsp;<span class="num" id="1669262">0</span><span class="op" id="1669263">:</span>&nbsp;<span class="comment" id="1669265">//&nbsp;0&nbsp;/&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669282">return</span>&nbsp;<span class="ident" id="1669289">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669297">case</span>&nbsp;<span class="ident" id="1669302">fi</span><span class="op" id="1669304">,</span>&nbsp;<span class="op" id="1669306">!</span><span class="ident" id="1669307">gi</span>&nbsp;<span class="op" id="1669310">&amp;&amp;</span>&nbsp;<span class="ident" id="1669313">gm</span>&nbsp;<span class="op" id="1669316">==</span>&nbsp;<span class="num" id="1669319">0</span><span class="op" id="1669320">:</span>&nbsp;<span class="comment" id="1669322">//&nbsp;Inf&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;0&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669349">return</span>&nbsp;<span class="ident" id="1669356">fs</span>&nbsp;<span class="op" id="1669359">^</span>&nbsp;<span class="ident" id="1669361">gs</span>&nbsp;<span class="op" id="1669364">^</span>&nbsp;<span class="ident" id="1669366">inf64</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669374">case</span>&nbsp;<span class="ident" id="1669379">gi</span><span class="op" id="1669381">,</span>&nbsp;<span class="ident" id="1669383">fm</span>&nbsp;<span class="op" id="1669386">==</span>&nbsp;<span class="num" id="1669389">0</span><span class="op" id="1669390">:</span>&nbsp;<span class="comment" id="1669392">//&nbsp;f&nbsp;/&nbsp;Inf&nbsp;=&nbsp;0&nbsp;/&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669419">return</span>&nbsp;<span class="ident" id="1669426">fs</span>&nbsp;<span class="op" id="1669429">^</span>&nbsp;<span class="ident" id="1669431">gs</span>&nbsp;<span class="op" id="1669434">^</span>&nbsp;<span class="num" id="1669436">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1669439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669442">_</span><span class="op" id="1669443">,</span>&nbsp;<span class="ident" id="1669445">_</span><span class="op" id="1669446">,</span>&nbsp;<span class="ident" id="1669448">_</span><span class="op" id="1669449">,</span>&nbsp;<span class="ident" id="1669451">_</span>&nbsp;<span class="op" id="1669453">=</span>&nbsp;<span class="ident" id="1669455">fi</span><span class="op" id="1669457">,</span>&nbsp;<span class="ident" id="1669459">fn</span><span class="op" id="1669461">,</span>&nbsp;<span class="ident" id="1669463">gi</span><span class="op" id="1669465">,</span>&nbsp;<span class="ident" id="1669467">gn</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1669472">//&nbsp;53-bit&lt;&lt;54&nbsp;/&nbsp;53-bit&nbsp;=&nbsp;53-&nbsp;or&nbsp;54-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669513">shift</span>&nbsp;<span class="op" id="1669519">:=</span>&nbsp;<span class="ident" id="1669522">mantbits64</span>&nbsp;<span class="op" id="1669533">+</span>&nbsp;<span class="num" id="1669535">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669538">q</span><span class="op" id="1669539">,</span>&nbsp;<span class="ident" id="1669541">r</span>&nbsp;<span class="op" id="1669543">:=</span>&nbsp;<span class="ident" id="1669546">divlu</span><span class="op" id="1669551">(</span><span class="ident" id="1669552">fm</span><span class="op" id="1669554">&gt;&gt;</span><span class="op" id="1669556">(</span><span class="num" id="1669557">64</span><span class="op" id="1669559">-</span><span class="ident" id="1669560">shift</span><span class="op" id="1669565">)</span><span class="op" id="1669566">,</span>&nbsp;<span class="ident" id="1669568">fm</span><span class="op" id="1669570">&lt;&lt;</span><span class="ident" id="1669572">shift</span><span class="op" id="1669577">,</span>&nbsp;<span class="ident" id="1669579">gm</span><span class="op" id="1669581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669584">return</span>&nbsp;<span class="ident" id="1669591">fpack64</span><span class="op" id="1669598">(</span><span class="ident" id="1669599">fs</span><span class="op" id="1669601">^</span><span class="ident" id="1669602">gs</span><span class="op" id="1669604">,</span>&nbsp;<span class="ident" id="1669606">q</span><span class="op" id="1669607">,</span>&nbsp;<span class="ident" id="1669609">fe</span><span class="op" id="1669611">-</span><span class="ident" id="1669612">ge</span><span class="op" id="1669614">-</span><span class="num" id="1669615">2</span><span class="op" id="1669616">,</span>&nbsp;<span class="ident" id="1669618">r</span><span class="op" id="1669619">)</span><br>
<span class="lineno">315</span><span class="op" id="1669621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1669624">func</span>&nbsp;<span class="ident" id="1669629">f64to32</span><span class="op" id="1669636">(</span><span class="ident" id="1669637">f</span>&nbsp;<span class="ident" id="1669639">uint64</span><span class="op" id="1669645">)</span>&nbsp;<span class="builtintype" id="1669647">uint32</span>&nbsp;<span class="op" id="1669654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669657">fs</span><span class="op" id="1669659">,</span>&nbsp;<span class="ident" id="1669661">fm</span><span class="op" id="1669663">,</span>&nbsp;<span class="ident" id="1669665">fe</span><span class="op" id="1669667">,</span>&nbsp;<span class="ident" id="1669669">fi</span><span class="op" id="1669671">,</span>&nbsp;<span class="ident" id="1669673">fn</span>&nbsp;<span class="op" id="1669676">:=</span>&nbsp;<span class="ident" id="1669679">funpack64</span><span class="op" id="1669688">(</span><span class="ident" id="1669689">f</span><span class="op" id="1669690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669693">if</span>&nbsp;<span class="ident" id="1669696">fn</span>&nbsp;<span class="op" id="1669699">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669703">return</span>&nbsp;<span class="ident" id="1669710">nan32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1669717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669720">fs32</span>&nbsp;<span class="op" id="1669725">:=</span>&nbsp;<span class="builtintype" id="1669728">uint32</span><span class="op" id="1669734">(</span><span class="ident" id="1669735">fs</span>&nbsp;<span class="op" id="1669738">&gt;&gt;</span>&nbsp;<span class="num" id="1669741">32</span><span class="op" id="1669743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669746">if</span>&nbsp;<span class="ident" id="1669749">fi</span>&nbsp;<span class="op" id="1669752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669756">return</span>&nbsp;<span class="ident" id="1669763">fs32</span>&nbsp;<span class="op" id="1669768">^</span>&nbsp;<span class="ident" id="1669770">inf32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1669777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669780">const</span>&nbsp;<span class="ident" id="1669786">d</span>&nbsp;<span class="op" id="1669788">=</span>&nbsp;<span class="ident" id="1669790">mantbits64</span>&nbsp;<span class="op" id="1669801">-</span>&nbsp;<span class="ident" id="1669803">mantbits32</span>&nbsp;<span class="op" id="1669814">-</span>&nbsp;<span class="num" id="1669816">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669819">return</span>&nbsp;<span class="ident" id="1669826">fpack32</span><span class="op" id="1669833">(</span><span class="ident" id="1669834">fs32</span><span class="op" id="1669838">,</span>&nbsp;<span class="builtintype" id="1669840">uint32</span><span class="op" id="1669846">(</span><span class="ident" id="1669847">fm</span><span class="op" id="1669849">&gt;&gt;</span><span class="ident" id="1669851">d</span><span class="op" id="1669852">)</span><span class="op" id="1669853">,</span>&nbsp;<span class="ident" id="1669855">fe</span><span class="op" id="1669857">-</span><span class="num" id="1669858">1</span><span class="op" id="1669859">,</span>&nbsp;<span class="builtintype" id="1669861">uint32</span><span class="op" id="1669867">(</span><span class="ident" id="1669868">fm</span><span class="op" id="1669870">&amp;</span><span class="op" id="1669871">(</span><span class="num" id="1669872">1</span><span class="op" id="1669873">&lt;&lt;</span><span class="ident" id="1669875">d</span><span class="op" id="1669876">-</span><span class="num" id="1669877">1</span><span class="op" id="1669878">)</span><span class="op" id="1669879">)</span><span class="op" id="1669880">)</span><br>
<span class="lineno"></span><span class="op" id="1669882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="1669885">func</span>&nbsp;<span class="ident" id="1669890">f32to64</span><span class="op" id="1669897">(</span><span class="ident" id="1669898">f</span>&nbsp;<span class="builtintype" id="1669900">uint32</span><span class="op" id="1669906">)</span>&nbsp;<span class="ident" id="1669908">uint64</span>&nbsp;<span class="op" id="1669915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669918">const</span>&nbsp;<span class="ident" id="1669924">d</span>&nbsp;<span class="op" id="1669926">=</span>&nbsp;<span class="ident" id="1669928">mantbits64</span>&nbsp;<span class="op" id="1669939">-</span>&nbsp;<span class="ident" id="1669941">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1669953">fs</span><span class="op" id="1669955">,</span>&nbsp;<span class="ident" id="1669957">fm</span><span class="op" id="1669959">,</span>&nbsp;<span class="ident" id="1669961">fe</span><span class="op" id="1669963">,</span>&nbsp;<span class="ident" id="1669965">fi</span><span class="op" id="1669967">,</span>&nbsp;<span class="ident" id="1669969">fn</span>&nbsp;<span class="op" id="1669972">:=</span>&nbsp;<span class="ident" id="1669975">funpack32</span><span class="op" id="1669984">(</span><span class="ident" id="1669985">f</span><span class="op" id="1669986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669989">if</span>&nbsp;<span class="ident" id="1669992">fn</span>&nbsp;<span class="op" id="1669995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1669999">return</span>&nbsp;<span class="ident" id="1670006">nan64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1670013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1670016">fs64</span>&nbsp;<span class="op" id="1670021">:=</span>&nbsp;<span class="ident" id="1670024">uint64</span><span class="op" id="1670030">(</span><span class="ident" id="1670031">fs</span><span class="op" id="1670033">)</span>&nbsp;<span class="op" id="1670035">&lt;&lt;</span>&nbsp;<span class="num" id="1670038">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670042">if</span>&nbsp;<span class="ident" id="1670045">fi</span>&nbsp;<span class="op" id="1670048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670052">return</span>&nbsp;<span class="ident" id="1670059">fs64</span>&nbsp;<span class="op" id="1670064">^</span>&nbsp;<span class="ident" id="1670066">inf64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1670073">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670076">return</span>&nbsp;<span class="ident" id="1670083">fpack64</span><span class="op" id="1670090">(</span><span class="ident" id="1670091">fs64</span><span class="op" id="1670095">,</span>&nbsp;<span class="ident" id="1670097">uint64</span><span class="op" id="1670103">(</span><span class="ident" id="1670104">fm</span><span class="op" id="1670106">)</span><span class="op" id="1670107">&lt;&lt;</span><span class="ident" id="1670109">d</span><span class="op" id="1670110">,</span>&nbsp;<span class="ident" id="1670112">fe</span><span class="op" id="1670114">,</span>&nbsp;<span class="num" id="1670116">0</span><span class="op" id="1670117">)</span><br>
<span class="lineno"></span><span class="op" id="1670119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1670122">func</span>&nbsp;<span class="ident" id="1670127">fcmp64</span><span class="op" id="1670133">(</span><span class="ident" id="1670134">f</span><span class="op" id="1670135">,</span>&nbsp;<span class="ident" id="1670137">g</span>&nbsp;<span class="ident" id="1670139">uint64</span><span class="op" id="1670145">)</span>&nbsp;<span class="op" id="1670147">(</span><span class="ident" id="1670148">cmp</span>&nbsp;<span class="builtintype" id="1670152">int</span><span class="op" id="1670155">,</span>&nbsp;<span class="ident" id="1670157">isnan</span>&nbsp;<span class="builtintype" id="1670163">bool</span><span class="op" id="1670167">)</span>&nbsp;<span class="op" id="1670169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1670172">fs</span><span class="op" id="1670174">,</span>&nbsp;<span class="ident" id="1670176">fm</span><span class="op" id="1670178">,</span>&nbsp;<span class="ident" id="1670180">_</span><span class="op" id="1670181">,</span>&nbsp;<span class="ident" id="1670183">fi</span><span class="op" id="1670185">,</span>&nbsp;<span class="ident" id="1670187">fn</span>&nbsp;<span class="op" id="1670190">:=</span>&nbsp;<span class="ident" id="1670193">funpack64</span><span class="op" id="1670202">(</span><span class="ident" id="1670203">f</span><span class="op" id="1670204">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1670207">gs</span><span class="op" id="1670209">,</span>&nbsp;<span class="ident" id="1670211">gm</span><span class="op" id="1670213">,</span>&nbsp;<span class="ident" id="1670215">_</span><span class="op" id="1670216">,</span>&nbsp;<span class="ident" id="1670218">gi</span><span class="op" id="1670220">,</span>&nbsp;<span class="ident" id="1670222">gn</span>&nbsp;<span class="op" id="1670225">:=</span>&nbsp;<span class="ident" id="1670228">funpack64</span><span class="op" id="1670237">(</span><span class="ident" id="1670238">g</span><span class="op" id="1670239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670243">switch</span>&nbsp;<span class="op" id="1670250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670253">case</span>&nbsp;<span class="ident" id="1670258">fn</span><span class="op" id="1670260">,</span>&nbsp;<span class="ident" id="1670262">gn</span><span class="op" id="1670264">:</span>&nbsp;<span class="comment" id="1670266">//&nbsp;flag&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670280">return</span>&nbsp;<span class="num" id="1670287">0</span><span class="op" id="1670288">,</span>&nbsp;<span class="builtintype" id="1670290">true</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670297">case</span>&nbsp;<span class="op" id="1670302">!</span><span class="ident" id="1670303">fi</span>&nbsp;<span class="op" id="1670306">&amp;&amp;</span>&nbsp;<span class="op" id="1670309">!</span><span class="ident" id="1670310">gi</span>&nbsp;<span class="op" id="1670313">&amp;&amp;</span>&nbsp;<span class="ident" id="1670316">fm</span>&nbsp;<span class="op" id="1670319">==</span>&nbsp;<span class="num" id="1670322">0</span>&nbsp;<span class="op" id="1670324">&amp;&amp;</span>&nbsp;<span class="ident" id="1670327">gm</span>&nbsp;<span class="op" id="1670330">==</span>&nbsp;<span class="num" id="1670333">0</span><span class="op" id="1670334">:</span>&nbsp;<span class="comment" id="1670336">//&nbsp;0&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670352">return</span>&nbsp;<span class="num" id="1670359">0</span><span class="op" id="1670360">,</span>&nbsp;<span class="builtintype" id="1670362">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670370">case</span>&nbsp;<span class="ident" id="1670375">fs</span>&nbsp;<span class="op" id="1670378">&gt;</span>&nbsp;<span class="ident" id="1670380">gs</span><span class="op" id="1670382">:</span>&nbsp;<span class="comment" id="1670384">//&nbsp;f&nbsp;&lt;&nbsp;0,&nbsp;g&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670402">return</span>&nbsp;<span class="op" id="1670409">-</span><span class="num" id="1670410">1</span><span class="op" id="1670411">,</span>&nbsp;<span class="builtintype" id="1670413">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670421">case</span>&nbsp;<span class="ident" id="1670426">fs</span>&nbsp;<span class="op" id="1670429">&lt;</span>&nbsp;<span class="ident" id="1670431">gs</span><span class="op" id="1670433">:</span>&nbsp;<span class="comment" id="1670435">//&nbsp;f&nbsp;&gt;&nbsp;0,&nbsp;g&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670453">return</span>&nbsp;<span class="op" id="1670460">+</span><span class="num" id="1670461">1</span><span class="op" id="1670462">,</span>&nbsp;<span class="builtintype" id="1670464">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1670472">//&nbsp;Same&nbsp;sign,&nbsp;not&nbsp;NaN.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1670496">//&nbsp;Can&nbsp;compare&nbsp;encodings&nbsp;directly&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1670536">//&nbsp;Reverse&nbsp;for&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670558">case</span>&nbsp;<span class="ident" id="1670563">fs</span>&nbsp;<span class="op" id="1670566">==</span>&nbsp;<span class="num" id="1670569">0</span>&nbsp;<span class="op" id="1670571">&amp;&amp;</span>&nbsp;<span class="ident" id="1670574">f</span>&nbsp;<span class="op" id="1670576">&lt;</span>&nbsp;<span class="ident" id="1670578">g</span><span class="op" id="1670579">,</span>&nbsp;<span class="ident" id="1670581">fs</span>&nbsp;<span class="op" id="1670584">!=</span>&nbsp;<span class="num" id="1670587">0</span>&nbsp;<span class="op" id="1670589">&amp;&amp;</span>&nbsp;<span class="ident" id="1670592">f</span>&nbsp;<span class="op" id="1670594">&gt;</span>&nbsp;<span class="ident" id="1670596">g</span><span class="op" id="1670597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670601">return</span>&nbsp;<span class="op" id="1670608">-</span><span class="num" id="1670609">1</span><span class="op" id="1670610">,</span>&nbsp;<span class="builtintype" id="1670612">false</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670620">case</span>&nbsp;<span class="ident" id="1670625">fs</span>&nbsp;<span class="op" id="1670628">==</span>&nbsp;<span class="num" id="1670631">0</span>&nbsp;<span class="op" id="1670633">&amp;&amp;</span>&nbsp;<span class="ident" id="1670636">f</span>&nbsp;<span class="op" id="1670638">&gt;</span>&nbsp;<span class="ident" id="1670640">g</span><span class="op" id="1670641">,</span>&nbsp;<span class="ident" id="1670643">fs</span>&nbsp;<span class="op" id="1670646">!=</span>&nbsp;<span class="num" id="1670649">0</span>&nbsp;<span class="op" id="1670651">&amp;&amp;</span>&nbsp;<span class="ident" id="1670654">f</span>&nbsp;<span class="op" id="1670656">&lt;</span>&nbsp;<span class="ident" id="1670658">g</span><span class="op" id="1670659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670663">return</span>&nbsp;<span class="op" id="1670670">+</span><span class="num" id="1670671">1</span><span class="op" id="1670672">,</span>&nbsp;<span class="builtintype" id="1670674">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1670681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1670685">//&nbsp;f&nbsp;==&nbsp;g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670696">return</span>&nbsp;<span class="num" id="1670703">0</span><span class="op" id="1670704">,</span>&nbsp;<span class="builtintype" id="1670706">false</span><br>
<span class="lineno"></span><span class="op" id="1670712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1670715">func</span>&nbsp;<span class="ident" id="1670720">f64toint</span><span class="op" id="1670728">(</span><span class="ident" id="1670729">f</span>&nbsp;<span class="ident" id="1670731">uint64</span><span class="op" id="1670737">)</span>&nbsp;<span class="op" id="1670739">(</span><span class="ident" id="1670740">val</span>&nbsp;<span class="ident" id="1670744">int64</span><span class="op" id="1670749">,</span>&nbsp;<span class="ident" id="1670751">ok</span>&nbsp;<span class="builtintype" id="1670754">bool</span><span class="op" id="1670758">)</span>&nbsp;<span class="op" id="1670760">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1670763">fs</span><span class="op" id="1670765">,</span>&nbsp;<span class="ident" id="1670767">fm</span><span class="op" id="1670769">,</span>&nbsp;<span class="ident" id="1670771">fe</span><span class="op" id="1670773">,</span>&nbsp;<span class="ident" id="1670775">fi</span><span class="op" id="1670777">,</span>&nbsp;<span class="ident" id="1670779">fn</span>&nbsp;<span class="op" id="1670782">:=</span>&nbsp;<span class="ident" id="1670785">funpack64</span><span class="op" id="1670794">(</span><span class="ident" id="1670795">f</span><span class="op" id="1670796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670800">switch</span>&nbsp;<span class="op" id="1670807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670810">case</span>&nbsp;<span class="ident" id="1670815">fi</span><span class="op" id="1670817">,</span>&nbsp;<span class="ident" id="1670819">fn</span><span class="op" id="1670821">:</span>&nbsp;<span class="comment" id="1670823">//&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670832">return</span>&nbsp;<span class="num" id="1670839">0</span><span class="op" id="1670840">,</span>&nbsp;<span class="builtintype" id="1670842">false</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670850">case</span>&nbsp;<span class="ident" id="1670855">fe</span>&nbsp;<span class="op" id="1670858">&lt;</span>&nbsp;<span class="op" id="1670860">-</span><span class="num" id="1670861">1</span><span class="op" id="1670862">:</span>&nbsp;<span class="comment" id="1670864">//&nbsp;f&nbsp;&lt;&nbsp;0.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670877">return</span>&nbsp;<span class="num" id="1670884">0</span><span class="op" id="1670885">,</span>&nbsp;<span class="builtintype" id="1670887">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670895">case</span>&nbsp;<span class="ident" id="1670900">fe</span>&nbsp;<span class="op" id="1670903">&gt;</span>&nbsp;<span class="num" id="1670905">63</span><span class="op" id="1670907">:</span>&nbsp;<span class="comment" id="1670909">//&nbsp;f&nbsp;&gt;=&nbsp;2^63</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670924">if</span>&nbsp;<span class="ident" id="1670927">fs</span>&nbsp;<span class="op" id="1670930">!=</span>&nbsp;<span class="num" id="1670933">0</span>&nbsp;<span class="op" id="1670935">&amp;&amp;</span>&nbsp;<span class="ident" id="1670938">fm</span>&nbsp;<span class="op" id="1670941">==</span>&nbsp;<span class="num" id="1670944">0</span>&nbsp;<span class="op" id="1670946">{</span>&nbsp;<span class="comment" id="1670948">//&nbsp;f&nbsp;==&nbsp;-2^63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670965">return</span>&nbsp;<span class="op" id="1670972">-</span><span class="num" id="1670973">1</span>&nbsp;<span class="op" id="1670975">&lt;&lt;</span>&nbsp;<span class="num" id="1670978">63</span><span class="op" id="1670980">,</span>&nbsp;<span class="builtintype" id="1670982">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1670989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1670993">if</span>&nbsp;<span class="ident" id="1670996">fs</span>&nbsp;<span class="op" id="1670999">!=</span>&nbsp;<span class="num" id="1671002">0</span>&nbsp;<span class="op" id="1671004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671009">return</span>&nbsp;<span class="num" id="1671016">0</span><span class="op" id="1671017">,</span>&nbsp;<span class="builtintype" id="1671019">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671031">return</span>&nbsp;<span class="num" id="1671038">0</span><span class="op" id="1671039">,</span>&nbsp;<span class="builtintype" id="1671041">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671052">for</span>&nbsp;<span class="ident" id="1671056">fe</span>&nbsp;<span class="op" id="1671059">&gt;</span>&nbsp;<span class="builtintype" id="1671061">int</span><span class="op" id="1671064">(</span><span class="ident" id="1671065">mantbits64</span><span class="op" id="1671075">)</span>&nbsp;<span class="op" id="1671077">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671081">fe</span><span class="op" id="1671083">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671088">fm</span>&nbsp;<span class="op" id="1671091">&lt;&lt;=</span>&nbsp;<span class="num" id="1671095">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671101">for</span>&nbsp;<span class="ident" id="1671105">fe</span>&nbsp;<span class="op" id="1671108">&lt;</span>&nbsp;<span class="builtintype" id="1671110">int</span><span class="op" id="1671113">(</span><span class="ident" id="1671114">mantbits64</span><span class="op" id="1671124">)</span>&nbsp;<span class="op" id="1671126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671130">fe</span><span class="op" id="1671132">++</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671137">fm</span>&nbsp;<span class="op" id="1671140">&gt;&gt;=</span>&nbsp;<span class="num" id="1671144">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671150">val</span>&nbsp;<span class="op" id="1671154">=</span>&nbsp;<span class="ident" id="1671156">int64</span><span class="op" id="1671161">(</span><span class="ident" id="1671162">fm</span><span class="op" id="1671164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671167">if</span>&nbsp;<span class="ident" id="1671170">fs</span>&nbsp;<span class="op" id="1671173">!=</span>&nbsp;<span class="num" id="1671176">0</span>&nbsp;<span class="op" id="1671178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671182">val</span>&nbsp;<span class="op" id="1671186">=</span>&nbsp;<span class="op" id="1671188">-</span><span class="ident" id="1671189">val</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671197">return</span>&nbsp;<span class="ident" id="1671204">val</span><span class="op" id="1671207">,</span>&nbsp;<span class="builtintype" id="1671209">true</span><br>
<span class="lineno"></span><span class="op" id="1671214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1671217">func</span>&nbsp;<span class="ident" id="1671222">fintto64</span><span class="op" id="1671230">(</span><span class="ident" id="1671231">val</span>&nbsp;<span class="ident" id="1671235">int64</span><span class="op" id="1671240">)</span>&nbsp;<span class="op" id="1671242">(</span><span class="ident" id="1671243">f</span>&nbsp;<span class="ident" id="1671245">uint64</span><span class="op" id="1671251">)</span>&nbsp;<span class="op" id="1671253">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671256">fs</span>&nbsp;<span class="op" id="1671259">:=</span>&nbsp;<span class="ident" id="1671262">uint64</span><span class="op" id="1671268">(</span><span class="ident" id="1671269">val</span><span class="op" id="1671272">)</span>&nbsp;<span class="op" id="1671274">&amp;</span>&nbsp;<span class="op" id="1671276">(</span><span class="num" id="1671277">1</span>&nbsp;<span class="op" id="1671279">&lt;&lt;</span>&nbsp;<span class="num" id="1671282">63</span><span class="op" id="1671284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671287">mant</span>&nbsp;<span class="op" id="1671292">:=</span>&nbsp;<span class="ident" id="1671295">uint64</span><span class="op" id="1671301">(</span><span class="ident" id="1671302">val</span><span class="op" id="1671305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671308">if</span>&nbsp;<span class="ident" id="1671311">fs</span>&nbsp;<span class="op" id="1671314">!=</span>&nbsp;<span class="num" id="1671317">0</span>&nbsp;<span class="op" id="1671319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671323">mant</span>&nbsp;<span class="op" id="1671328">=</span>&nbsp;<span class="op" id="1671330">-</span><span class="ident" id="1671331">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671337">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671340">return</span>&nbsp;<span class="ident" id="1671347">fpack64</span><span class="op" id="1671354">(</span><span class="ident" id="1671355">fs</span><span class="op" id="1671357">,</span>&nbsp;<span class="ident" id="1671359">mant</span><span class="op" id="1671363">,</span>&nbsp;<span class="builtintype" id="1671365">int</span><span class="op" id="1671368">(</span><span class="ident" id="1671369">mantbits64</span><span class="op" id="1671379">)</span><span class="op" id="1671380">,</span>&nbsp;<span class="num" id="1671382">0</span><span class="op" id="1671383">)</span><br>
<span class="lineno"></span><span class="op" id="1671385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1671388">//&nbsp;64x64&nbsp;-&gt;&nbsp;128&nbsp;multiply.</span><br>
<span class="lineno"></span><span class="comment" id="1671414">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight.</span><br>
<span class="lineno">420</span><span class="keyword" id="1671448">func</span>&nbsp;<span class="ident" id="1671453">mullu</span><span class="op" id="1671458">(</span><span class="ident" id="1671459">u</span><span class="op" id="1671460">,</span>&nbsp;<span class="ident" id="1671462">v</span>&nbsp;<span class="ident" id="1671464">uint64</span><span class="op" id="1671470">)</span>&nbsp;<span class="op" id="1671472">(</span><span class="ident" id="1671473">lo</span><span class="op" id="1671475">,</span>&nbsp;<span class="ident" id="1671477">hi</span>&nbsp;<span class="ident" id="1671480">uint64</span><span class="op" id="1671486">)</span>&nbsp;<span class="op" id="1671488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671491">const</span>&nbsp;<span class="op" id="1671497">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671501">s</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671506">=</span>&nbsp;<span class="num" id="1671508">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671513">mask</span>&nbsp;<span class="op" id="1671518">=</span>&nbsp;<span class="num" id="1671520">1</span><span class="op" id="1671521">&lt;&lt;</span><span class="ident" id="1671523">s</span>&nbsp;<span class="op" id="1671525">-</span>&nbsp;<span class="num" id="1671527">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671530">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671533">u0</span>&nbsp;<span class="op" id="1671536">:=</span>&nbsp;<span class="ident" id="1671539">u</span>&nbsp;<span class="op" id="1671541">&amp;</span>&nbsp;<span class="ident" id="1671543">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671549">u1</span>&nbsp;<span class="op" id="1671552">:=</span>&nbsp;<span class="ident" id="1671555">u</span>&nbsp;<span class="op" id="1671557">&gt;&gt;</span>&nbsp;<span class="ident" id="1671560">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671563">v0</span>&nbsp;<span class="op" id="1671566">:=</span>&nbsp;<span class="ident" id="1671569">v</span>&nbsp;<span class="op" id="1671571">&amp;</span>&nbsp;<span class="ident" id="1671573">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671579">v1</span>&nbsp;<span class="op" id="1671582">:=</span>&nbsp;<span class="ident" id="1671585">v</span>&nbsp;<span class="op" id="1671587">&gt;&gt;</span>&nbsp;<span class="ident" id="1671590">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671593">w0</span>&nbsp;<span class="op" id="1671596">:=</span>&nbsp;<span class="ident" id="1671599">u0</span>&nbsp;<span class="op" id="1671602">*</span>&nbsp;<span class="ident" id="1671604">v0</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671608">t</span>&nbsp;<span class="op" id="1671610">:=</span>&nbsp;<span class="ident" id="1671613">u1</span><span class="op" id="1671615">*</span><span class="ident" id="1671616">v0</span>&nbsp;<span class="op" id="1671619">+</span>&nbsp;<span class="ident" id="1671621">w0</span><span class="op" id="1671623">&gt;&gt;</span><span class="ident" id="1671625">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671628">w1</span>&nbsp;<span class="op" id="1671631">:=</span>&nbsp;<span class="ident" id="1671634">t</span>&nbsp;<span class="op" id="1671636">&amp;</span>&nbsp;<span class="ident" id="1671638">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671644">w2</span>&nbsp;<span class="op" id="1671647">:=</span>&nbsp;<span class="ident" id="1671650">t</span>&nbsp;<span class="op" id="1671652">&gt;&gt;</span>&nbsp;<span class="ident" id="1671655">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671658">w1</span>&nbsp;<span class="op" id="1671661">+=</span>&nbsp;<span class="ident" id="1671664">u0</span>&nbsp;<span class="op" id="1671667">*</span>&nbsp;<span class="ident" id="1671669">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671673">return</span>&nbsp;<span class="ident" id="1671680">u</span>&nbsp;<span class="op" id="1671682">*</span>&nbsp;<span class="ident" id="1671684">v</span><span class="op" id="1671685">,</span>&nbsp;<span class="ident" id="1671687">u1</span><span class="op" id="1671689">*</span><span class="ident" id="1671690">v1</span>&nbsp;<span class="op" id="1671693">+</span>&nbsp;<span class="ident" id="1671695">w2</span>&nbsp;<span class="op" id="1671698">+</span>&nbsp;<span class="ident" id="1671700">w1</span><span class="op" id="1671702">&gt;&gt;</span><span class="ident" id="1671704">s</span><br>
<span class="lineno">435</span><span class="op" id="1671706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1671709">//&nbsp;128/64&nbsp;-&gt;&nbsp;64&nbsp;quotient,&nbsp;64&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1671749">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight</span><br>
<span class="lineno"></span><span class="keyword" id="1671782">func</span>&nbsp;<span class="ident" id="1671787">divlu</span><span class="op" id="1671792">(</span><span class="ident" id="1671793">u1</span><span class="op" id="1671795">,</span>&nbsp;<span class="ident" id="1671797">u0</span><span class="op" id="1671799">,</span>&nbsp;<span class="ident" id="1671801">v</span>&nbsp;<span class="ident" id="1671803">uint64</span><span class="op" id="1671809">)</span>&nbsp;<span class="op" id="1671811">(</span><span class="ident" id="1671812">q</span><span class="op" id="1671813">,</span>&nbsp;<span class="ident" id="1671815">r</span>&nbsp;<span class="ident" id="1671817">uint64</span><span class="op" id="1671823">)</span>&nbsp;<span class="op" id="1671825">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671828">const</span>&nbsp;<span class="ident" id="1671834">b</span>&nbsp;<span class="op" id="1671836">=</span>&nbsp;<span class="num" id="1671838">1</span>&nbsp;<span class="op" id="1671840">&lt;&lt;</span>&nbsp;<span class="num" id="1671843">32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671848">if</span>&nbsp;<span class="ident" id="1671851">u1</span>&nbsp;<span class="op" id="1671854">&gt;=</span>&nbsp;<span class="ident" id="1671857">v</span>&nbsp;<span class="op" id="1671859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671863">return</span>&nbsp;<span class="num" id="1671870">1</span><span class="op" id="1671871">&lt;&lt;</span><span class="num" id="1671873">64</span>&nbsp;<span class="op" id="1671876">-</span>&nbsp;<span class="num" id="1671878">1</span><span class="op" id="1671879">,</span>&nbsp;<span class="num" id="1671881">1</span><span class="op" id="1671882">&lt;&lt;</span><span class="num" id="1671884">64</span>&nbsp;<span class="op" id="1671887">-</span>&nbsp;<span class="num" id="1671889">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671892">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671896">//&nbsp;s&nbsp;=&nbsp;nlz(v);&nbsp;v&nbsp;&lt;&lt;=&nbsp;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671920">s</span>&nbsp;<span class="op" id="1671922">:=</span>&nbsp;<span class="builtintype" id="1671925">uint</span><span class="op" id="1671929">(</span><span class="num" id="1671930">0</span><span class="op" id="1671931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671934">for</span>&nbsp;<span class="ident" id="1671938">v</span><span class="op" id="1671939">&amp;</span><span class="op" id="1671940">(</span><span class="num" id="1671941">1</span><span class="op" id="1671942">&lt;&lt;</span><span class="num" id="1671944">63</span><span class="op" id="1671946">)</span>&nbsp;<span class="op" id="1671948">==</span>&nbsp;<span class="num" id="1671951">0</span>&nbsp;<span class="op" id="1671953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671957">s</span><span class="op" id="1671958">++</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671963">v</span>&nbsp;<span class="op" id="1671965">&lt;&lt;=</span>&nbsp;<span class="num" id="1671969">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671976">vn1</span>&nbsp;<span class="op" id="1671980">:=</span>&nbsp;<span class="ident" id="1671983">v</span>&nbsp;<span class="op" id="1671985">&gt;&gt;</span>&nbsp;<span class="num" id="1671988">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671992">vn0</span>&nbsp;<span class="op" id="1671996">:=</span>&nbsp;<span class="ident" id="1671999">v</span>&nbsp;<span class="op" id="1672001">&amp;</span>&nbsp;<span class="op" id="1672003">(</span><span class="num" id="1672004">1</span><span class="op" id="1672005">&lt;&lt;</span><span class="num" id="1672007">32</span>&nbsp;<span class="op" id="1672010">-</span>&nbsp;<span class="num" id="1672012">1</span><span class="op" id="1672013">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672016">un32</span>&nbsp;<span class="op" id="1672021">:=</span>&nbsp;<span class="ident" id="1672024">u1</span><span class="op" id="1672026">&lt;&lt;</span><span class="ident" id="1672028">s</span>&nbsp;<span class="op" id="1672030">|</span>&nbsp;<span class="ident" id="1672032">u0</span><span class="op" id="1672034">&gt;&gt;</span><span class="op" id="1672036">(</span><span class="num" id="1672037">64</span><span class="op" id="1672039">-</span><span class="ident" id="1672040">s</span><span class="op" id="1672041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672044">un10</span>&nbsp;<span class="op" id="1672049">:=</span>&nbsp;<span class="ident" id="1672052">u0</span>&nbsp;<span class="op" id="1672055">&lt;&lt;</span>&nbsp;<span class="ident" id="1672058">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672061">un1</span>&nbsp;<span class="op" id="1672065">:=</span>&nbsp;<span class="ident" id="1672068">un10</span>&nbsp;<span class="op" id="1672073">&gt;&gt;</span>&nbsp;<span class="num" id="1672076">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672080">un0</span>&nbsp;<span class="op" id="1672084">:=</span>&nbsp;<span class="ident" id="1672087">un10</span>&nbsp;<span class="op" id="1672092">&amp;</span>&nbsp;<span class="op" id="1672094">(</span><span class="num" id="1672095">1</span><span class="op" id="1672096">&lt;&lt;</span><span class="num" id="1672098">32</span>&nbsp;<span class="op" id="1672101">-</span>&nbsp;<span class="num" id="1672103">1</span><span class="op" id="1672104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672107">q1</span>&nbsp;<span class="op" id="1672110">:=</span>&nbsp;<span class="ident" id="1672113">un32</span>&nbsp;<span class="op" id="1672118">/</span>&nbsp;<span class="ident" id="1672120">vn1</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672125">rhat</span>&nbsp;<span class="op" id="1672130">:=</span>&nbsp;<span class="ident" id="1672133">un32</span>&nbsp;<span class="op" id="1672138">-</span>&nbsp;<span class="ident" id="1672140">q1</span><span class="op" id="1672142">*</span><span class="ident" id="1672143">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1672148">again1</span><span class="op" id="1672154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672157">if</span>&nbsp;<span class="ident" id="1672160">q1</span>&nbsp;<span class="op" id="1672163">&gt;=</span>&nbsp;<span class="ident" id="1672166">b</span>&nbsp;<span class="op" id="1672168">||</span>&nbsp;<span class="ident" id="1672171">q1</span><span class="op" id="1672173">*</span><span class="ident" id="1672174">vn0</span>&nbsp;<span class="op" id="1672178">&gt;</span>&nbsp;<span class="ident" id="1672180">b</span><span class="op" id="1672181">*</span><span class="ident" id="1672182">rhat</span><span class="op" id="1672186">+</span><span class="ident" id="1672187">un1</span>&nbsp;<span class="op" id="1672191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672195">q1</span><span class="op" id="1672197">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672202">rhat</span>&nbsp;<span class="op" id="1672207">+=</span>&nbsp;<span class="ident" id="1672210">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672216">if</span>&nbsp;<span class="ident" id="1672219">rhat</span>&nbsp;<span class="op" id="1672224">&lt;</span>&nbsp;<span class="ident" id="1672226">b</span>&nbsp;<span class="op" id="1672228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672233">goto</span>&nbsp;<span class="ident" id="1672238">again1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672250">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672254">un21</span>&nbsp;<span class="op" id="1672259">:=</span>&nbsp;<span class="ident" id="1672262">un32</span><span class="op" id="1672266">*</span><span class="ident" id="1672267">b</span>&nbsp;<span class="op" id="1672269">+</span>&nbsp;<span class="ident" id="1672271">un1</span>&nbsp;<span class="op" id="1672275">-</span>&nbsp;<span class="ident" id="1672277">q1</span><span class="op" id="1672279">*</span><span class="ident" id="1672280">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672283">q0</span>&nbsp;<span class="op" id="1672286">:=</span>&nbsp;<span class="ident" id="1672289">un21</span>&nbsp;<span class="op" id="1672294">/</span>&nbsp;<span class="ident" id="1672296">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672301">rhat</span>&nbsp;<span class="op" id="1672306">=</span>&nbsp;<span class="ident" id="1672308">un21</span>&nbsp;<span class="op" id="1672313">-</span>&nbsp;<span class="ident" id="1672315">q0</span><span class="op" id="1672317">*</span><span class="ident" id="1672318">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="ident" id="1672323">again2</span><span class="op" id="1672329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672332">if</span>&nbsp;<span class="ident" id="1672335">q0</span>&nbsp;<span class="op" id="1672338">&gt;=</span>&nbsp;<span class="ident" id="1672341">b</span>&nbsp;<span class="op" id="1672343">||</span>&nbsp;<span class="ident" id="1672346">q0</span><span class="op" id="1672348">*</span><span class="ident" id="1672349">vn0</span>&nbsp;<span class="op" id="1672353">&gt;</span>&nbsp;<span class="ident" id="1672355">b</span><span class="op" id="1672356">*</span><span class="ident" id="1672357">rhat</span><span class="op" id="1672361">+</span><span class="ident" id="1672362">un0</span>&nbsp;<span class="op" id="1672366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672370">q0</span><span class="op" id="1672372">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672377">rhat</span>&nbsp;<span class="op" id="1672382">+=</span>&nbsp;<span class="ident" id="1672385">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672391">if</span>&nbsp;<span class="ident" id="1672394">rhat</span>&nbsp;<span class="op" id="1672399">&lt;</span>&nbsp;<span class="ident" id="1672401">b</span>&nbsp;<span class="op" id="1672403">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672408">goto</span>&nbsp;<span class="ident" id="1672413">again2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672429">return</span>&nbsp;<span class="ident" id="1672436">q1</span><span class="op" id="1672438">*</span><span class="ident" id="1672439">b</span>&nbsp;<span class="op" id="1672441">+</span>&nbsp;<span class="ident" id="1672443">q0</span><span class="op" id="1672445">,</span>&nbsp;<span class="op" id="1672447">(</span><span class="ident" id="1672448">un21</span><span class="op" id="1672452">*</span><span class="ident" id="1672453">b</span>&nbsp;<span class="op" id="1672455">+</span>&nbsp;<span class="ident" id="1672457">un0</span>&nbsp;<span class="op" id="1672461">-</span>&nbsp;<span class="ident" id="1672463">q0</span><span class="op" id="1672465">*</span><span class="ident" id="1672466">v</span><span class="op" id="1672467">)</span>&nbsp;<span class="op" id="1672469">&gt;&gt;</span>&nbsp;<span class="ident" id="1672472">s</span><br>
<span class="lineno">485</span><span class="op" id="1672474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1672477">//&nbsp;callable&nbsp;from&nbsp;C</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1672497">func</span>&nbsp;<span class="ident" id="1672502">fadd64c</span><span class="op" id="1672509">(</span><span class="ident" id="1672510">f</span><span class="op" id="1672511">,</span>&nbsp;<span class="ident" id="1672513">g</span>&nbsp;<span class="ident" id="1672515">uint64</span><span class="op" id="1672521">,</span>&nbsp;<span class="ident" id="1672523">ret</span>&nbsp;<span class="op" id="1672527">*</span><span class="ident" id="1672528">uint64</span><span class="op" id="1672534">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672547">{</span>&nbsp;<span class="op" id="1672549">*</span><span class="ident" id="1672550">ret</span>&nbsp;<span class="op" id="1672554">=</span>&nbsp;<span class="ident" id="1672556">fadd64</span><span class="op" id="1672562">(</span><span class="ident" id="1672563">f</span><span class="op" id="1672564">,</span>&nbsp;<span class="ident" id="1672566">g</span><span class="op" id="1672567">)</span>&nbsp;<span class="op" id="1672569">}</span><br>
<span class="lineno">490</span><span class="keyword" id="1672571">func</span>&nbsp;<span class="ident" id="1672576">fsub64c</span><span class="op" id="1672583">(</span><span class="ident" id="1672584">f</span><span class="op" id="1672585">,</span>&nbsp;<span class="ident" id="1672587">g</span>&nbsp;<span class="ident" id="1672589">uint64</span><span class="op" id="1672595">,</span>&nbsp;<span class="ident" id="1672597">ret</span>&nbsp;<span class="op" id="1672601">*</span><span class="ident" id="1672602">uint64</span><span class="op" id="1672608">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672621">{</span>&nbsp;<span class="op" id="1672623">*</span><span class="ident" id="1672624">ret</span>&nbsp;<span class="op" id="1672628">=</span>&nbsp;<span class="ident" id="1672630">fsub64</span><span class="op" id="1672636">(</span><span class="ident" id="1672637">f</span><span class="op" id="1672638">,</span>&nbsp;<span class="ident" id="1672640">g</span><span class="op" id="1672641">)</span>&nbsp;<span class="op" id="1672643">}</span><br>
<span class="lineno"></span><span class="keyword" id="1672645">func</span>&nbsp;<span class="ident" id="1672650">fmul64c</span><span class="op" id="1672657">(</span><span class="ident" id="1672658">f</span><span class="op" id="1672659">,</span>&nbsp;<span class="ident" id="1672661">g</span>&nbsp;<span class="ident" id="1672663">uint64</span><span class="op" id="1672669">,</span>&nbsp;<span class="ident" id="1672671">ret</span>&nbsp;<span class="op" id="1672675">*</span><span class="ident" id="1672676">uint64</span><span class="op" id="1672682">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672695">{</span>&nbsp;<span class="op" id="1672697">*</span><span class="ident" id="1672698">ret</span>&nbsp;<span class="op" id="1672702">=</span>&nbsp;<span class="ident" id="1672704">fmul64</span><span class="op" id="1672710">(</span><span class="ident" id="1672711">f</span><span class="op" id="1672712">,</span>&nbsp;<span class="ident" id="1672714">g</span><span class="op" id="1672715">)</span>&nbsp;<span class="op" id="1672717">}</span><br>
<span class="lineno"></span><span class="keyword" id="1672719">func</span>&nbsp;<span class="ident" id="1672724">fdiv64c</span><span class="op" id="1672731">(</span><span class="ident" id="1672732">f</span><span class="op" id="1672733">,</span>&nbsp;<span class="ident" id="1672735">g</span>&nbsp;<span class="ident" id="1672737">uint64</span><span class="op" id="1672743">,</span>&nbsp;<span class="ident" id="1672745">ret</span>&nbsp;<span class="op" id="1672749">*</span><span class="ident" id="1672750">uint64</span><span class="op" id="1672756">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672769">{</span>&nbsp;<span class="op" id="1672771">*</span><span class="ident" id="1672772">ret</span>&nbsp;<span class="op" id="1672776">=</span>&nbsp;<span class="ident" id="1672778">fdiv64</span><span class="op" id="1672784">(</span><span class="ident" id="1672785">f</span><span class="op" id="1672786">,</span>&nbsp;<span class="ident" id="1672788">g</span><span class="op" id="1672789">)</span>&nbsp;<span class="op" id="1672791">}</span><br>
<span class="lineno"></span><span class="keyword" id="1672793">func</span>&nbsp;<span class="ident" id="1672798">fneg64c</span><span class="op" id="1672805">(</span><span class="ident" id="1672806">f</span>&nbsp;<span class="ident" id="1672808">uint64</span><span class="op" id="1672814">,</span>&nbsp;<span class="ident" id="1672816">ret</span>&nbsp;<span class="op" id="1672820">*</span><span class="ident" id="1672821">uint64</span><span class="op" id="1672827">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672843">{</span>&nbsp;<span class="op" id="1672845">*</span><span class="ident" id="1672846">ret</span>&nbsp;<span class="op" id="1672850">=</span>&nbsp;<span class="ident" id="1672852">fneg64</span><span class="op" id="1672858">(</span><span class="ident" id="1672859">f</span><span class="op" id="1672860">)</span>&nbsp;<span class="op" id="1672862">}</span><br>
<span class="lineno"></span><span class="keyword" id="1672864">func</span>&nbsp;<span class="ident" id="1672869">f32to64c</span><span class="op" id="1672877">(</span><span class="ident" id="1672878">f</span>&nbsp;<span class="builtintype" id="1672880">uint32</span><span class="op" id="1672886">,</span>&nbsp;<span class="ident" id="1672888">ret</span>&nbsp;<span class="op" id="1672892">*</span><span class="ident" id="1672893">uint64</span><span class="op" id="1672899">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672914">{</span>&nbsp;<span class="op" id="1672916">*</span><span class="ident" id="1672917">ret</span>&nbsp;<span class="op" id="1672921">=</span>&nbsp;<span class="ident" id="1672923">f32to64</span><span class="op" id="1672930">(</span><span class="ident" id="1672931">f</span><span class="op" id="1672932">)</span>&nbsp;<span class="op" id="1672934">}</span><br>
<span class="lineno">495</span><span class="keyword" id="1672936">func</span>&nbsp;<span class="ident" id="1672941">f64to32c</span><span class="op" id="1672949">(</span><span class="ident" id="1672950">f</span>&nbsp;<span class="ident" id="1672952">uint64</span><span class="op" id="1672958">,</span>&nbsp;<span class="ident" id="1672960">ret</span>&nbsp;<span class="op" id="1672964">*</span><span class="builtintype" id="1672965">uint32</span><span class="op" id="1672971">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672986">{</span>&nbsp;<span class="op" id="1672988">*</span><span class="ident" id="1672989">ret</span>&nbsp;<span class="op" id="1672993">=</span>&nbsp;<span class="ident" id="1672995">f64to32</span><span class="op" id="1673002">(</span><span class="ident" id="1673003">f</span><span class="op" id="1673004">)</span>&nbsp;<span class="op" id="1673006">}</span><br>
<span class="lineno"></span><span class="keyword" id="1673008">func</span>&nbsp;<span class="ident" id="1673013">fcmp64c</span><span class="op" id="1673020">(</span><span class="ident" id="1673021">f</span><span class="op" id="1673022">,</span>&nbsp;<span class="ident" id="1673024">g</span>&nbsp;<span class="ident" id="1673026">uint64</span><span class="op" id="1673032">,</span>&nbsp;<span class="ident" id="1673034">ret</span>&nbsp;<span class="op" id="1673038">*</span><span class="builtintype" id="1673039">int</span><span class="op" id="1673042">,</span>&nbsp;<span class="ident" id="1673044">retnan</span>&nbsp;<span class="op" id="1673051">*</span><span class="builtintype" id="1673052">bool</span><span class="op" id="1673056">)</span>&nbsp;<span class="op" id="1673058">{</span>&nbsp;<span class="op" id="1673060">*</span><span class="ident" id="1673061">ret</span><span class="op" id="1673064">,</span>&nbsp;<span class="op" id="1673066">*</span><span class="ident" id="1673067">retnan</span>&nbsp;<span class="op" id="1673074">=</span>&nbsp;<span class="ident" id="1673076">fcmp64</span><span class="op" id="1673082">(</span><span class="ident" id="1673083">f</span><span class="op" id="1673084">,</span>&nbsp;<span class="ident" id="1673086">g</span><span class="op" id="1673087">)</span>&nbsp;<span class="op" id="1673089">}</span><br>
<span class="lineno"></span><span class="keyword" id="1673091">func</span>&nbsp;<span class="ident" id="1673096">fintto64c</span><span class="op" id="1673105">(</span><span class="ident" id="1673106">val</span>&nbsp;<span class="ident" id="1673110">int64</span><span class="op" id="1673115">,</span>&nbsp;<span class="ident" id="1673117">ret</span>&nbsp;<span class="op" id="1673121">*</span><span class="ident" id="1673122">uint64</span><span class="op" id="1673128">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1673141">{</span>&nbsp;<span class="op" id="1673143">*</span><span class="ident" id="1673144">ret</span>&nbsp;<span class="op" id="1673148">=</span>&nbsp;<span class="ident" id="1673150">fintto64</span><span class="op" id="1673158">(</span><span class="ident" id="1673159">val</span><span class="op" id="1673162">)</span>&nbsp;<span class="op" id="1673164">}</span><br>
<span class="lineno"></span><span class="keyword" id="1673166">func</span>&nbsp;<span class="ident" id="1673171">f64tointc</span><span class="op" id="1673180">(</span><span class="ident" id="1673181">f</span>&nbsp;<span class="ident" id="1673183">uint64</span><span class="op" id="1673189">,</span>&nbsp;<span class="ident" id="1673191">ret</span>&nbsp;<span class="op" id="1673195">*</span><span class="ident" id="1673196">int64</span><span class="op" id="1673201">,</span>&nbsp;<span class="ident" id="1673203">retok</span>&nbsp;<span class="op" id="1673209">*</span><span class="builtintype" id="1673210">bool</span><span class="op" id="1673214">)</span>&nbsp;<span class="op" id="1673216">{</span>&nbsp;<span class="op" id="1673218">*</span><span class="ident" id="1673219">ret</span><span class="op" id="1673222">,</span>&nbsp;<span class="op" id="1673224">*</span><span class="ident" id="1673225">retok</span>&nbsp;<span class="op" id="1673231">=</span>&nbsp;<span class="ident" id="1673233">f64toint</span><span class="op" id="1673241">(</span><span class="ident" id="1673242">f</span><span class="op" id="1673243">)</span>&nbsp;<span class="op" id="1673245">}</span>
</div>
</body>
</html>
