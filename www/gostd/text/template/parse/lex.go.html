<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3250658">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3250713">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3250767">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3250818">package</span>&nbsp;<span class="ident" id="3250826">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3250833">import</span>&nbsp;<span class="op" id="3250840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3250843">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3250850">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3250861">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3250872">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3250887">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3250890">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="3250959">type</span>&nbsp;<span class="ident" id="3250964">item</span>&nbsp;<span class="keyword" id="3250969">struct</span>&nbsp;<span class="op" id="3250976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250979">typ</span>&nbsp;<span class="ident" id="3250983">itemType</span>&nbsp;<span class="comment" id="3250992">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251019">pos</span>&nbsp;<span class="ident" id="3251023">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251032">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251103">val</span>&nbsp;<span class="builtintype" id="3251107">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3251116">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="3251143">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3251146">func</span>&nbsp;<span class="op" id="3251151">(</span><span class="ident" id="3251152">i</span>&nbsp;<span class="ident" id="3251154">item</span><span class="op" id="3251158">)</span>&nbsp;<span class="ident" id="3251160">String</span><span class="op" id="3251166">(</span><span class="op" id="3251167">)</span>&nbsp;<span class="builtintype" id="3251169">string</span>&nbsp;<span class="op" id="3251176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251179">switch</span>&nbsp;<span class="op" id="3251186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251189">case</span>&nbsp;<span class="ident" id="3251194">i</span><span class="op" id="3251195">.</span><span class="ident" id="3251196">typ</span>&nbsp;<span class="op" id="3251200">==</span>&nbsp;<span class="ident" id="3251203">itemEOF</span><span class="op" id="3251210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251214">return</span>&nbsp;<span class="string" id="3251221">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251228">case</span>&nbsp;<span class="ident" id="3251233">i</span><span class="op" id="3251234">.</span><span class="ident" id="3251235">typ</span>&nbsp;<span class="op" id="3251239">==</span>&nbsp;<span class="ident" id="3251242">itemError</span><span class="op" id="3251251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251255">return</span>&nbsp;<span class="ident" id="3251262">i</span><span class="op" id="3251263">.</span><span class="ident" id="3251264">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251269">case</span>&nbsp;<span class="ident" id="3251274">i</span><span class="op" id="3251275">.</span><span class="ident" id="3251276">typ</span>&nbsp;<span class="op" id="3251280">&gt;</span>&nbsp;<span class="ident" id="3251282">itemKeyword</span><span class="op" id="3251293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251297">return</span>&nbsp;<span class="ident" id="3251304">fmt</span><span class="op" id="3251307">.</span><span class="ident" id="3251308">Sprintf</span><span class="op" id="3251315">(</span><span class="string" id="3251316">&#34;&lt;%s&gt;&#34;</span><span class="op" id="3251322">,</span>&nbsp;<span class="ident" id="3251324">i</span><span class="op" id="3251325">.</span><span class="ident" id="3251326">val</span><span class="op" id="3251329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251332">case</span>&nbsp;<span class="builtinfunc" id="3251337">len</span><span class="op" id="3251340">(</span><span class="ident" id="3251341">i</span><span class="op" id="3251342">.</span><span class="ident" id="3251343">val</span><span class="op" id="3251346">)</span>&nbsp;<span class="op" id="3251348">&gt;</span>&nbsp;<span class="num" id="3251350">10</span><span class="op" id="3251352">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251356">return</span>&nbsp;<span class="ident" id="3251363">fmt</span><span class="op" id="3251366">.</span><span class="ident" id="3251367">Sprintf</span><span class="op" id="3251374">(</span><span class="string" id="3251375">&#34;%.10q...&#34;</span><span class="op" id="3251385">,</span>&nbsp;<span class="ident" id="3251387">i</span><span class="op" id="3251388">.</span><span class="ident" id="3251389">val</span><span class="op" id="3251392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251398">return</span>&nbsp;<span class="ident" id="3251405">fmt</span><span class="op" id="3251408">.</span><span class="ident" id="3251409">Sprintf</span><span class="op" id="3251416">(</span><span class="string" id="3251417">&#34;%q&#34;</span><span class="op" id="3251421">,</span>&nbsp;<span class="ident" id="3251423">i</span><span class="op" id="3251424">.</span><span class="ident" id="3251425">val</span><span class="op" id="3251428">)</span><br>
<span class="lineno"></span><span class="op" id="3251430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3251433">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="3251479">type</span>&nbsp;<span class="ident" id="3251484">itemType</span>&nbsp;<span class="builtintype" id="3251493">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3251498">const</span>&nbsp;<span class="op" id="3251504">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251507">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251524">itemType</span>&nbsp;<span class="op" id="3251533">=</span>&nbsp;<span class="ident" id="3251535">iota</span>&nbsp;<span class="comment" id="3251540">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251583">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251616">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251637">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251670">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251725">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251758">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251781">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251814">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251870">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251903">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251953">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251962">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3251977">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252023">itemIdentifier</span>&nbsp;<span class="comment" id="3252038">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252088">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="3252103">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252129">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="3252144">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252166">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252181">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252220">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252235">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252251">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="3252266">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252306">itemRightDelim</span>&nbsp;<span class="comment" id="3252321">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252348">itemRightParen</span>&nbsp;<span class="comment" id="3252363">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252385">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252400">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252439">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252454">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252490">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252505">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252520">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3252535">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3252600">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252640">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="3252653">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252691">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252704">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252732">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3252745">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252764">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252777">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252794">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252807">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252823">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252836">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252851">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252864">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252924">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3252937">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252955">itemTemplate</span>&nbsp;<span class="comment" id="3252968">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252989">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253002">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="3253018">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3253021">var</span>&nbsp;<span class="ident" id="3253025">key</span>&nbsp;<span class="op" id="3253029">=</span>&nbsp;<span class="keyword" id="3253031">map</span><span class="op" id="3253034">[</span><span class="builtintype" id="3253035">string</span><span class="op" id="3253041">]</span><span class="ident" id="3253042">itemType</span><span class="op" id="3253050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253053">&#34;.&#34;</span><span class="op" id="3253056">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253065">itemDot</span><span class="op" id="3253072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253075">&#34;define&#34;</span><span class="op" id="3253083">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3253087">itemDefine</span><span class="op" id="3253097">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253100">&#34;else&#34;</span><span class="op" id="3253106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253112">itemElse</span><span class="op" id="3253120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253123">&#34;end&#34;</span><span class="op" id="3253128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253135">itemEnd</span><span class="op" id="3253142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253145">&#34;if&#34;</span><span class="op" id="3253149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253157">itemIf</span><span class="op" id="3253163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253166">&#34;range&#34;</span><span class="op" id="3253173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253178">itemRange</span><span class="op" id="3253187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253190">&#34;nil&#34;</span><span class="op" id="3253195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253202">itemNil</span><span class="op" id="3253209">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253212">&#34;template&#34;</span><span class="op" id="3253222">:</span>&nbsp;<span class="ident" id="3253224">itemTemplate</span><span class="op" id="3253236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3253239">&#34;with&#34;</span><span class="op" id="3253245">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253251">itemWith</span><span class="op" id="3253259">,</span><br>
<span class="lineno"></span><span class="op" id="3253261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3253264">const</span>&nbsp;<span class="ident" id="3253270">eof</span>&nbsp;<span class="op" id="3253274">=</span>&nbsp;<span class="op" id="3253276">-</span><span class="num" id="3253277">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="3253280">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="3253370">type</span>&nbsp;<span class="ident" id="3253375">stateFn</span>&nbsp;<span class="keyword" id="3253383">func</span><span class="op" id="3253387">(</span><span class="op" id="3253388">*</span><span class="ident" id="3253389">lexer</span><span class="op" id="3253394">)</span>&nbsp;<span class="ident" id="3253396">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3253405">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="3253446">type</span>&nbsp;<span class="ident" id="3253451">lexer</span>&nbsp;<span class="keyword" id="3253457">struct</span>&nbsp;<span class="op" id="3253464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253467">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3253478">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253488">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253543">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3253554">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253564">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253593">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="3253604">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253614">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253634">rightDelim</span>&nbsp;<span class="builtintype" id="3253645">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253655">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253673">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253684">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3253694">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253732">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253743">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253753">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253787">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253798">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253808">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253840">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253851">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253861">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253900">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253911">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3253921">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253975">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253986">chan</span>&nbsp;<span class="ident" id="3253991">item</span>&nbsp;<span class="comment" id="3253996">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254025">parenDepth</span>&nbsp;<span class="builtintype" id="3254036">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3254046">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="3254076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254079">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="3254123">func</span>&nbsp;<span class="op" id="3254128">(</span><span class="ident" id="3254129">l</span>&nbsp;<span class="op" id="3254131">*</span><span class="ident" id="3254132">lexer</span><span class="op" id="3254137">)</span>&nbsp;<span class="ident" id="3254139">next</span><span class="op" id="3254143">(</span><span class="op" id="3254144">)</span>&nbsp;<span class="builtintype" id="3254146">rune</span>&nbsp;<span class="op" id="3254151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254154">if</span>&nbsp;<span class="builtintype" id="3254157">int</span><span class="op" id="3254160">(</span><span class="ident" id="3254161">l</span><span class="op" id="3254162">.</span><span class="ident" id="3254163">pos</span><span class="op" id="3254166">)</span>&nbsp;<span class="op" id="3254168">&gt;=</span>&nbsp;<span class="builtinfunc" id="3254171">len</span><span class="op" id="3254174">(</span><span class="ident" id="3254175">l</span><span class="op" id="3254176">.</span><span class="ident" id="3254177">input</span><span class="op" id="3254182">)</span>&nbsp;<span class="op" id="3254184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254188">l</span><span class="op" id="3254189">.</span><span class="ident" id="3254190">width</span>&nbsp;<span class="op" id="3254196">=</span>&nbsp;<span class="num" id="3254198">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254202">return</span>&nbsp;<span class="ident" id="3254209">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254214">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254217">r</span><span class="op" id="3254218">,</span>&nbsp;<span class="ident" id="3254220">w</span>&nbsp;<span class="op" id="3254222">:=</span>&nbsp;<span class="ident" id="3254225">utf8</span><span class="op" id="3254229">.</span><span class="ident" id="3254230">DecodeRuneInString</span><span class="op" id="3254248">(</span><span class="ident" id="3254249">l</span><span class="op" id="3254250">.</span><span class="ident" id="3254251">input</span><span class="op" id="3254256">[</span><span class="ident" id="3254257">l</span><span class="op" id="3254258">.</span><span class="ident" id="3254259">pos</span><span class="op" id="3254262">:</span><span class="op" id="3254263">]</span><span class="op" id="3254264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254267">l</span><span class="op" id="3254268">.</span><span class="ident" id="3254269">width</span>&nbsp;<span class="op" id="3254275">=</span>&nbsp;<span class="ident" id="3254277">Pos</span><span class="op" id="3254280">(</span><span class="ident" id="3254281">w</span><span class="op" id="3254282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254285">l</span><span class="op" id="3254286">.</span><span class="ident" id="3254287">pos</span>&nbsp;<span class="op" id="3254291">+=</span>&nbsp;<span class="ident" id="3254294">l</span><span class="op" id="3254295">.</span><span class="ident" id="3254296">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254303">return</span>&nbsp;<span class="ident" id="3254310">r</span><br>
<span class="lineno"></span><span class="op" id="3254312">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3254315">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="3254380">func</span>&nbsp;<span class="op" id="3254385">(</span><span class="ident" id="3254386">l</span>&nbsp;<span class="op" id="3254388">*</span><span class="ident" id="3254389">lexer</span><span class="op" id="3254394">)</span>&nbsp;<span class="ident" id="3254396">peek</span><span class="op" id="3254400">(</span><span class="op" id="3254401">)</span>&nbsp;<span class="builtintype" id="3254403">rune</span>&nbsp;<span class="op" id="3254408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254411">r</span>&nbsp;<span class="op" id="3254413">:=</span>&nbsp;<span class="ident" id="3254416">l</span><span class="op" id="3254417">.</span><span class="ident" id="3254418">next</span><span class="op" id="3254422">(</span><span class="op" id="3254423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254426">l</span><span class="op" id="3254427">.</span><span class="ident" id="3254428">backup</span><span class="op" id="3254434">(</span><span class="op" id="3254435">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254438">return</span>&nbsp;<span class="ident" id="3254445">r</span><br>
<span class="lineno"></span><span class="op" id="3254447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254450">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3254523">func</span>&nbsp;<span class="op" id="3254528">(</span><span class="ident" id="3254529">l</span>&nbsp;<span class="op" id="3254531">*</span><span class="ident" id="3254532">lexer</span><span class="op" id="3254537">)</span>&nbsp;<span class="ident" id="3254539">backup</span><span class="op" id="3254545">(</span><span class="op" id="3254546">)</span>&nbsp;<span class="op" id="3254548">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254551">l</span><span class="op" id="3254552">.</span><span class="ident" id="3254553">pos</span>&nbsp;<span class="op" id="3254557">-=</span>&nbsp;<span class="ident" id="3254560">l</span><span class="op" id="3254561">.</span><span class="ident" id="3254562">width</span><br>
<span class="lineno"></span><span class="op" id="3254568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254571">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="3254614">func</span>&nbsp;<span class="op" id="3254619">(</span><span class="ident" id="3254620">l</span>&nbsp;<span class="op" id="3254622">*</span><span class="ident" id="3254623">lexer</span><span class="op" id="3254628">)</span>&nbsp;<span class="ident" id="3254630">emit</span><span class="op" id="3254634">(</span><span class="ident" id="3254635">t</span>&nbsp;<span class="ident" id="3254637">itemType</span><span class="op" id="3254645">)</span>&nbsp;<span class="op" id="3254647">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254650">l</span><span class="op" id="3254651">.</span><span class="ident" id="3254652">items</span>&nbsp;<span class="op" id="3254658">&lt;-</span>&nbsp;<span class="ident" id="3254661">item</span><span class="op" id="3254665">{</span><span class="ident" id="3254666">t</span><span class="op" id="3254667">,</span>&nbsp;<span class="ident" id="3254669">l</span><span class="op" id="3254670">.</span><span class="ident" id="3254671">start</span><span class="op" id="3254676">,</span>&nbsp;<span class="ident" id="3254678">l</span><span class="op" id="3254679">.</span><span class="ident" id="3254680">input</span><span class="op" id="3254685">[</span><span class="ident" id="3254686">l</span><span class="op" id="3254687">.</span><span class="ident" id="3254688">start</span><span class="op" id="3254693">:</span><span class="ident" id="3254694">l</span><span class="op" id="3254695">.</span><span class="ident" id="3254696">pos</span><span class="op" id="3254699">]</span><span class="op" id="3254700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254703">l</span><span class="op" id="3254704">.</span><span class="ident" id="3254705">start</span>&nbsp;<span class="op" id="3254711">=</span>&nbsp;<span class="ident" id="3254713">l</span><span class="op" id="3254714">.</span><span class="ident" id="3254715">pos</span><br>
<span class="lineno"></span><span class="op" id="3254719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254722">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="3254780">func</span>&nbsp;<span class="op" id="3254785">(</span><span class="ident" id="3254786">l</span>&nbsp;<span class="op" id="3254788">*</span><span class="ident" id="3254789">lexer</span><span class="op" id="3254794">)</span>&nbsp;<span class="ident" id="3254796">ignore</span><span class="op" id="3254802">(</span><span class="op" id="3254803">)</span>&nbsp;<span class="op" id="3254805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254808">l</span><span class="op" id="3254809">.</span><span class="ident" id="3254810">start</span>&nbsp;<span class="op" id="3254816">=</span>&nbsp;<span class="ident" id="3254818">l</span><span class="op" id="3254819">.</span><span class="ident" id="3254820">pos</span><br>
<span class="lineno"></span><span class="op" id="3254824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254827">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="3254888">func</span>&nbsp;<span class="op" id="3254893">(</span><span class="ident" id="3254894">l</span>&nbsp;<span class="op" id="3254896">*</span><span class="ident" id="3254897">lexer</span><span class="op" id="3254902">)</span>&nbsp;<span class="ident" id="3254904">accept</span><span class="op" id="3254910">(</span><span class="ident" id="3254911">valid</span>&nbsp;<span class="builtintype" id="3254917">string</span><span class="op" id="3254923">)</span>&nbsp;<span class="builtintype" id="3254925">bool</span>&nbsp;<span class="op" id="3254930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254933">if</span>&nbsp;<span class="ident" id="3254936">strings</span><span class="op" id="3254943">.</span><span class="ident" id="3254944">IndexRune</span><span class="op" id="3254953">(</span><span class="ident" id="3254954">valid</span><span class="op" id="3254959">,</span>&nbsp;<span class="ident" id="3254961">l</span><span class="op" id="3254962">.</span><span class="ident" id="3254963">next</span><span class="op" id="3254967">(</span><span class="op" id="3254968">)</span><span class="op" id="3254969">)</span>&nbsp;<span class="op" id="3254971">&gt;=</span>&nbsp;<span class="num" id="3254974">0</span>&nbsp;<span class="op" id="3254976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254980">return</span>&nbsp;<span class="builtintype" id="3254987">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254996">l</span><span class="op" id="3254997">.</span><span class="ident" id="3254998">backup</span><span class="op" id="3255004">(</span><span class="op" id="3255005">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255008">return</span>&nbsp;<span class="builtintype" id="3255015">false</span><br>
<span class="lineno"></span><span class="op" id="3255021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255024">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3255081">func</span>&nbsp;<span class="op" id="3255086">(</span><span class="ident" id="3255087">l</span>&nbsp;<span class="op" id="3255089">*</span><span class="ident" id="3255090">lexer</span><span class="op" id="3255095">)</span>&nbsp;<span class="ident" id="3255097">acceptRun</span><span class="op" id="3255106">(</span><span class="ident" id="3255107">valid</span>&nbsp;<span class="builtintype" id="3255113">string</span><span class="op" id="3255119">)</span>&nbsp;<span class="op" id="3255121">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255124">for</span>&nbsp;<span class="ident" id="3255128">strings</span><span class="op" id="3255135">.</span><span class="ident" id="3255136">IndexRune</span><span class="op" id="3255145">(</span><span class="ident" id="3255146">valid</span><span class="op" id="3255151">,</span>&nbsp;<span class="ident" id="3255153">l</span><span class="op" id="3255154">.</span><span class="ident" id="3255155">next</span><span class="op" id="3255159">(</span><span class="op" id="3255160">)</span><span class="op" id="3255161">)</span>&nbsp;<span class="op" id="3255163">&gt;=</span>&nbsp;<span class="num" id="3255166">0</span>&nbsp;<span class="op" id="3255168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255174">l</span><span class="op" id="3255175">.</span><span class="ident" id="3255176">backup</span><span class="op" id="3255182">(</span><span class="op" id="3255183">)</span><br>
<span class="lineno"></span><span class="op" id="3255185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3255188">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3255256">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="3255317">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="3255377">func</span>&nbsp;<span class="op" id="3255382">(</span><span class="ident" id="3255383">l</span>&nbsp;<span class="op" id="3255385">*</span><span class="ident" id="3255386">lexer</span><span class="op" id="3255391">)</span>&nbsp;<span class="ident" id="3255393">lineNumber</span><span class="op" id="3255403">(</span><span class="op" id="3255404">)</span>&nbsp;<span class="builtintype" id="3255406">int</span>&nbsp;<span class="op" id="3255410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255413">return</span>&nbsp;<span class="num" id="3255420">1</span>&nbsp;<span class="op" id="3255422">+</span>&nbsp;<span class="ident" id="3255424">strings</span><span class="op" id="3255431">.</span><span class="ident" id="3255432">Count</span><span class="op" id="3255437">(</span><span class="ident" id="3255438">l</span><span class="op" id="3255439">.</span><span class="ident" id="3255440">input</span><span class="op" id="3255445">[</span><span class="op" id="3255446">:</span><span class="ident" id="3255447">l</span><span class="op" id="3255448">.</span><span class="ident" id="3255449">lastPos</span><span class="op" id="3255456">]</span><span class="op" id="3255457">,</span>&nbsp;<span class="string" id="3255459">&#34;\n&#34;</span><span class="op" id="3255463">)</span><br>
<span class="lineno">160</span><span class="op" id="3255465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255468">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="3255536">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="3255611">func</span>&nbsp;<span class="op" id="3255616">(</span><span class="ident" id="3255617">l</span>&nbsp;<span class="op" id="3255619">*</span><span class="ident" id="3255620">lexer</span><span class="op" id="3255625">)</span>&nbsp;<span class="ident" id="3255627">errorf</span><span class="op" id="3255633">(</span><span class="ident" id="3255634">format</span>&nbsp;<span class="builtintype" id="3255641">string</span><span class="op" id="3255647">,</span>&nbsp;<span class="ident" id="3255649">args</span>&nbsp;<span class="op" id="3255654">...</span><span class="keyword" id="3255657">interface</span><span class="op" id="3255666">{</span><span class="op" id="3255667">}</span><span class="op" id="3255668">)</span>&nbsp;<span class="ident" id="3255670">stateFn</span>&nbsp;<span class="op" id="3255678">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255681">l</span><span class="op" id="3255682">.</span><span class="ident" id="3255683">items</span>&nbsp;<span class="op" id="3255689">&lt;-</span>&nbsp;<span class="ident" id="3255692">item</span><span class="op" id="3255696">{</span><span class="ident" id="3255697">itemError</span><span class="op" id="3255706">,</span>&nbsp;<span class="ident" id="3255708">l</span><span class="op" id="3255709">.</span><span class="ident" id="3255710">start</span><span class="op" id="3255715">,</span>&nbsp;<span class="ident" id="3255717">fmt</span><span class="op" id="3255720">.</span><span class="ident" id="3255721">Sprintf</span><span class="op" id="3255728">(</span><span class="ident" id="3255729">format</span><span class="op" id="3255735">,</span>&nbsp;<span class="ident" id="3255737">args</span><span class="op" id="3255741">...</span><span class="op" id="3255744">)</span><span class="op" id="3255745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255748">return</span>&nbsp;<span class="ident" id="3255755">nil</span><br>
<span class="lineno"></span><span class="op" id="3255759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255762">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="3255812">func</span>&nbsp;<span class="op" id="3255817">(</span><span class="ident" id="3255818">l</span>&nbsp;<span class="op" id="3255820">*</span><span class="ident" id="3255821">lexer</span><span class="op" id="3255826">)</span>&nbsp;<span class="ident" id="3255828">nextItem</span><span class="op" id="3255836">(</span><span class="op" id="3255837">)</span>&nbsp;<span class="ident" id="3255839">item</span>&nbsp;<span class="op" id="3255844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255847">item</span>&nbsp;<span class="op" id="3255852">:=</span>&nbsp;<span class="op" id="3255855">&lt;-</span><span class="ident" id="3255857">l</span><span class="op" id="3255858">.</span><span class="ident" id="3255859">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255866">l</span><span class="op" id="3255867">.</span><span class="ident" id="3255868">lastPos</span>&nbsp;<span class="op" id="3255876">=</span>&nbsp;<span class="ident" id="3255878">item</span><span class="op" id="3255882">.</span><span class="ident" id="3255883">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255888">return</span>&nbsp;<span class="ident" id="3255895">item</span><br>
<span class="lineno"></span><span class="op" id="3255900">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="3255903">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3255954">func</span>&nbsp;<span class="ident" id="3255959">lex</span><span class="op" id="3255962">(</span><span class="ident" id="3255963">name</span><span class="op" id="3255967">,</span>&nbsp;<span class="ident" id="3255969">input</span><span class="op" id="3255974">,</span>&nbsp;<span class="ident" id="3255976">left</span><span class="op" id="3255980">,</span>&nbsp;<span class="ident" id="3255982">right</span>&nbsp;<span class="builtintype" id="3255988">string</span><span class="op" id="3255994">)</span>&nbsp;<span class="op" id="3255996">*</span><span class="ident" id="3255997">lexer</span>&nbsp;<span class="op" id="3256003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256006">if</span>&nbsp;<span class="ident" id="3256009">left</span>&nbsp;<span class="op" id="3256014">==</span>&nbsp;<span class="string" id="3256017">&#34;&#34;</span>&nbsp;<span class="op" id="3256020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256024">left</span>&nbsp;<span class="op" id="3256029">=</span>&nbsp;<span class="ident" id="3256031">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256045">if</span>&nbsp;<span class="ident" id="3256048">right</span>&nbsp;<span class="op" id="3256054">==</span>&nbsp;<span class="string" id="3256057">&#34;&#34;</span>&nbsp;<span class="op" id="3256060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256064">right</span>&nbsp;<span class="op" id="3256070">=</span>&nbsp;<span class="ident" id="3256072">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256087">l</span>&nbsp;<span class="op" id="3256089">:=</span>&nbsp;<span class="op" id="3256092">&amp;</span><span class="ident" id="3256093">lexer</span><span class="op" id="3256098">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256102">name</span><span class="op" id="3256106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256114">name</span><span class="op" id="3256118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256122">input</span><span class="op" id="3256127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256134">input</span><span class="op" id="3256139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256143">leftDelim</span><span class="op" id="3256152">:</span>&nbsp;&nbsp;<span class="ident" id="3256155">left</span><span class="op" id="3256159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256163">rightDelim</span><span class="op" id="3256173">:</span>&nbsp;<span class="ident" id="3256175">right</span><span class="op" id="3256180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256184">items</span><span class="op" id="3256189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3256196">make</span><span class="op" id="3256200">(</span><span class="keyword" id="3256201">chan</span>&nbsp;<span class="ident" id="3256206">item</span><span class="op" id="3256210">)</span><span class="op" id="3256211">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256217">go</span>&nbsp;<span class="ident" id="3256220">l</span><span class="op" id="3256221">.</span><span class="ident" id="3256222">run</span><span class="op" id="3256225">(</span><span class="op" id="3256226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256229">return</span>&nbsp;<span class="ident" id="3256236">l</span><br>
<span class="lineno"></span><span class="op" id="3256238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3256241">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="3256286">func</span>&nbsp;<span class="op" id="3256291">(</span><span class="ident" id="3256292">l</span>&nbsp;<span class="op" id="3256294">*</span><span class="ident" id="3256295">lexer</span><span class="op" id="3256300">)</span>&nbsp;<span class="ident" id="3256302">run</span><span class="op" id="3256305">(</span><span class="op" id="3256306">)</span>&nbsp;<span class="op" id="3256308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256311">for</span>&nbsp;<span class="ident" id="3256315">l</span><span class="op" id="3256316">.</span><span class="ident" id="3256317">state</span>&nbsp;<span class="op" id="3256323">=</span>&nbsp;<span class="ident" id="3256325">lexText</span><span class="op" id="3256332">;</span>&nbsp;<span class="ident" id="3256334">l</span><span class="op" id="3256335">.</span><span class="ident" id="3256336">state</span>&nbsp;<span class="op" id="3256342">!=</span>&nbsp;<span class="ident" id="3256345">nil</span><span class="op" id="3256348">;</span>&nbsp;<span class="op" id="3256350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256354">l</span><span class="op" id="3256355">.</span><span class="ident" id="3256356">state</span>&nbsp;<span class="op" id="3256362">=</span>&nbsp;<span class="ident" id="3256364">l</span><span class="op" id="3256365">.</span><span class="ident" id="3256366">state</span><span class="op" id="3256371">(</span><span class="ident" id="3256372">l</span><span class="op" id="3256373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256376">}</span><br>
<span class="lineno">200</span><span class="op" id="3256378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256381">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3256401">const</span>&nbsp;<span class="op" id="3256407">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256410">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256423">=</span>&nbsp;<span class="string" id="3256425">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256431">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3256444">=</span>&nbsp;<span class="string" id="3256446">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256452">leftComment</span>&nbsp;&nbsp;<span class="op" id="3256465">=</span>&nbsp;<span class="string" id="3256467">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256473">rightComment</span>&nbsp;<span class="op" id="3256486">=</span>&nbsp;<span class="string" id="3256488">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="3256493">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="3256496">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3256554">func</span>&nbsp;<span class="ident" id="3256559">lexText</span><span class="op" id="3256566">(</span><span class="ident" id="3256567">l</span>&nbsp;<span class="op" id="3256569">*</span><span class="ident" id="3256570">lexer</span><span class="op" id="3256575">)</span>&nbsp;<span class="ident" id="3256577">stateFn</span>&nbsp;<span class="op" id="3256585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256588">for</span>&nbsp;<span class="op" id="3256592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256596">if</span>&nbsp;<span class="ident" id="3256599">strings</span><span class="op" id="3256606">.</span><span class="ident" id="3256607">HasPrefix</span><span class="op" id="3256616">(</span><span class="ident" id="3256617">l</span><span class="op" id="3256618">.</span><span class="ident" id="3256619">input</span><span class="op" id="3256624">[</span><span class="ident" id="3256625">l</span><span class="op" id="3256626">.</span><span class="ident" id="3256627">pos</span><span class="op" id="3256630">:</span><span class="op" id="3256631">]</span><span class="op" id="3256632">,</span>&nbsp;<span class="ident" id="3256634">l</span><span class="op" id="3256635">.</span><span class="ident" id="3256636">leftDelim</span><span class="op" id="3256645">)</span>&nbsp;<span class="op" id="3256647">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256652">if</span>&nbsp;<span class="ident" id="3256655">l</span><span class="op" id="3256656">.</span><span class="ident" id="3256657">pos</span>&nbsp;<span class="op" id="3256661">&gt;</span>&nbsp;<span class="ident" id="3256663">l</span><span class="op" id="3256664">.</span><span class="ident" id="3256665">start</span>&nbsp;<span class="op" id="3256671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256677">l</span><span class="op" id="3256678">.</span><span class="ident" id="3256679">emit</span><span class="op" id="3256683">(</span><span class="ident" id="3256684">itemText</span><span class="op" id="3256692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256702">return</span>&nbsp;<span class="ident" id="3256709">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256724">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256728">if</span>&nbsp;<span class="ident" id="3256731">l</span><span class="op" id="3256732">.</span><span class="ident" id="3256733">next</span><span class="op" id="3256737">(</span><span class="op" id="3256738">)</span>&nbsp;<span class="op" id="3256740">==</span>&nbsp;<span class="ident" id="3256743">eof</span>&nbsp;<span class="op" id="3256747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256752">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3256766">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256793">if</span>&nbsp;<span class="ident" id="3256796">l</span><span class="op" id="3256797">.</span><span class="ident" id="3256798">pos</span>&nbsp;<span class="op" id="3256802">&gt;</span>&nbsp;<span class="ident" id="3256804">l</span><span class="op" id="3256805">.</span><span class="ident" id="3256806">start</span>&nbsp;<span class="op" id="3256812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256816">l</span><span class="op" id="3256817">.</span><span class="ident" id="3256818">emit</span><span class="op" id="3256822">(</span><span class="ident" id="3256823">itemText</span><span class="op" id="3256831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256837">l</span><span class="op" id="3256838">.</span><span class="ident" id="3256839">emit</span><span class="op" id="3256843">(</span><span class="ident" id="3256844">itemEOF</span><span class="op" id="3256851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256854">return</span>&nbsp;<span class="ident" id="3256861">nil</span><br>
<span class="lineno">230</span><span class="op" id="3256865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256868">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3256940">func</span>&nbsp;<span class="ident" id="3256945">lexLeftDelim</span><span class="op" id="3256957">(</span><span class="ident" id="3256958">l</span>&nbsp;<span class="op" id="3256960">*</span><span class="ident" id="3256961">lexer</span><span class="op" id="3256966">)</span>&nbsp;<span class="ident" id="3256968">stateFn</span>&nbsp;<span class="op" id="3256976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256979">l</span><span class="op" id="3256980">.</span><span class="ident" id="3256981">pos</span>&nbsp;<span class="op" id="3256985">+=</span>&nbsp;<span class="ident" id="3256988">Pos</span><span class="op" id="3256991">(</span><span class="builtinfunc" id="3256992">len</span><span class="op" id="3256995">(</span><span class="ident" id="3256996">l</span><span class="op" id="3256997">.</span><span class="ident" id="3256998">leftDelim</span><span class="op" id="3257007">)</span><span class="op" id="3257008">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257011">if</span>&nbsp;<span class="ident" id="3257014">strings</span><span class="op" id="3257021">.</span><span class="ident" id="3257022">HasPrefix</span><span class="op" id="3257031">(</span><span class="ident" id="3257032">l</span><span class="op" id="3257033">.</span><span class="ident" id="3257034">input</span><span class="op" id="3257039">[</span><span class="ident" id="3257040">l</span><span class="op" id="3257041">.</span><span class="ident" id="3257042">pos</span><span class="op" id="3257045">:</span><span class="op" id="3257046">]</span><span class="op" id="3257047">,</span>&nbsp;<span class="ident" id="3257049">leftComment</span><span class="op" id="3257060">)</span>&nbsp;<span class="op" id="3257062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257066">return</span>&nbsp;<span class="ident" id="3257073">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257088">l</span><span class="op" id="3257089">.</span><span class="ident" id="3257090">emit</span><span class="op" id="3257094">(</span><span class="ident" id="3257095">itemLeftDelim</span><span class="op" id="3257108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257111">l</span><span class="op" id="3257112">.</span><span class="ident" id="3257113">parenDepth</span>&nbsp;<span class="op" id="3257124">=</span>&nbsp;<span class="num" id="3257126">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257129">return</span>&nbsp;<span class="ident" id="3257136">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3257152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257155">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3257234">func</span>&nbsp;<span class="ident" id="3257239">lexComment</span><span class="op" id="3257249">(</span><span class="ident" id="3257250">l</span>&nbsp;<span class="op" id="3257252">*</span><span class="ident" id="3257253">lexer</span><span class="op" id="3257258">)</span>&nbsp;<span class="ident" id="3257260">stateFn</span>&nbsp;<span class="op" id="3257268">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257271">l</span><span class="op" id="3257272">.</span><span class="ident" id="3257273">pos</span>&nbsp;<span class="op" id="3257277">+=</span>&nbsp;<span class="ident" id="3257280">Pos</span><span class="op" id="3257283">(</span><span class="builtinfunc" id="3257284">len</span><span class="op" id="3257287">(</span><span class="ident" id="3257288">leftComment</span><span class="op" id="3257299">)</span><span class="op" id="3257300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257303">i</span>&nbsp;<span class="op" id="3257305">:=</span>&nbsp;<span class="ident" id="3257308">strings</span><span class="op" id="3257315">.</span><span class="ident" id="3257316">Index</span><span class="op" id="3257321">(</span><span class="ident" id="3257322">l</span><span class="op" id="3257323">.</span><span class="ident" id="3257324">input</span><span class="op" id="3257329">[</span><span class="ident" id="3257330">l</span><span class="op" id="3257331">.</span><span class="ident" id="3257332">pos</span><span class="op" id="3257335">:</span><span class="op" id="3257336">]</span><span class="op" id="3257337">,</span>&nbsp;<span class="ident" id="3257339">rightComment</span><span class="op" id="3257351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257354">if</span>&nbsp;<span class="ident" id="3257357">i</span>&nbsp;<span class="op" id="3257359">&lt;</span>&nbsp;<span class="num" id="3257361">0</span>&nbsp;<span class="op" id="3257363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257367">return</span>&nbsp;<span class="ident" id="3257374">l</span><span class="op" id="3257375">.</span><span class="ident" id="3257376">errorf</span><span class="op" id="3257382">(</span><span class="string" id="3257383">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="3257401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257404">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257407">l</span><span class="op" id="3257408">.</span><span class="ident" id="3257409">pos</span>&nbsp;<span class="op" id="3257413">+=</span>&nbsp;<span class="ident" id="3257416">Pos</span><span class="op" id="3257419">(</span><span class="ident" id="3257420">i</span>&nbsp;<span class="op" id="3257422">+</span>&nbsp;<span class="builtinfunc" id="3257424">len</span><span class="op" id="3257427">(</span><span class="ident" id="3257428">rightComment</span><span class="op" id="3257440">)</span><span class="op" id="3257441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257444">if</span>&nbsp;<span class="op" id="3257447">!</span><span class="ident" id="3257448">strings</span><span class="op" id="3257455">.</span><span class="ident" id="3257456">HasPrefix</span><span class="op" id="3257465">(</span><span class="ident" id="3257466">l</span><span class="op" id="3257467">.</span><span class="ident" id="3257468">input</span><span class="op" id="3257473">[</span><span class="ident" id="3257474">l</span><span class="op" id="3257475">.</span><span class="ident" id="3257476">pos</span><span class="op" id="3257479">:</span><span class="op" id="3257480">]</span><span class="op" id="3257481">,</span>&nbsp;<span class="ident" id="3257483">l</span><span class="op" id="3257484">.</span><span class="ident" id="3257485">rightDelim</span><span class="op" id="3257495">)</span>&nbsp;<span class="op" id="3257497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257501">return</span>&nbsp;<span class="ident" id="3257508">l</span><span class="op" id="3257509">.</span><span class="ident" id="3257510">errorf</span><span class="op" id="3257516">(</span><span class="string" id="3257517">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="3257556">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257560">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257563">l</span><span class="op" id="3257564">.</span><span class="ident" id="3257565">pos</span>&nbsp;<span class="op" id="3257569">+=</span>&nbsp;<span class="ident" id="3257572">Pos</span><span class="op" id="3257575">(</span><span class="builtinfunc" id="3257576">len</span><span class="op" id="3257579">(</span><span class="ident" id="3257580">l</span><span class="op" id="3257581">.</span><span class="ident" id="3257582">rightDelim</span><span class="op" id="3257592">)</span><span class="op" id="3257593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257596">l</span><span class="op" id="3257597">.</span><span class="ident" id="3257598">ignore</span><span class="op" id="3257604">(</span><span class="op" id="3257605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257608">return</span>&nbsp;<span class="ident" id="3257615">lexText</span><br>
<span class="lineno"></span><span class="op" id="3257623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3257626">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3257700">func</span>&nbsp;<span class="ident" id="3257705">lexRightDelim</span><span class="op" id="3257718">(</span><span class="ident" id="3257719">l</span>&nbsp;<span class="op" id="3257721">*</span><span class="ident" id="3257722">lexer</span><span class="op" id="3257727">)</span>&nbsp;<span class="ident" id="3257729">stateFn</span>&nbsp;<span class="op" id="3257737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257740">l</span><span class="op" id="3257741">.</span><span class="ident" id="3257742">pos</span>&nbsp;<span class="op" id="3257746">+=</span>&nbsp;<span class="ident" id="3257749">Pos</span><span class="op" id="3257752">(</span><span class="builtinfunc" id="3257753">len</span><span class="op" id="3257756">(</span><span class="ident" id="3257757">l</span><span class="op" id="3257758">.</span><span class="ident" id="3257759">rightDelim</span><span class="op" id="3257769">)</span><span class="op" id="3257770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257773">l</span><span class="op" id="3257774">.</span><span class="ident" id="3257775">emit</span><span class="op" id="3257779">(</span><span class="ident" id="3257780">itemRightDelim</span><span class="op" id="3257794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257797">return</span>&nbsp;<span class="ident" id="3257804">lexText</span><br>
<span class="lineno">265</span><span class="op" id="3257812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257815">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="3257879">func</span>&nbsp;<span class="ident" id="3257884">lexInsideAction</span><span class="op" id="3257899">(</span><span class="ident" id="3257900">l</span>&nbsp;<span class="op" id="3257902">*</span><span class="ident" id="3257903">lexer</span><span class="op" id="3257908">)</span>&nbsp;<span class="ident" id="3257910">stateFn</span>&nbsp;<span class="op" id="3257918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257921">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257970">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258037">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258080">if</span>&nbsp;<span class="ident" id="3258083">strings</span><span class="op" id="3258090">.</span><span class="ident" id="3258091">HasPrefix</span><span class="op" id="3258100">(</span><span class="ident" id="3258101">l</span><span class="op" id="3258102">.</span><span class="ident" id="3258103">input</span><span class="op" id="3258108">[</span><span class="ident" id="3258109">l</span><span class="op" id="3258110">.</span><span class="ident" id="3258111">pos</span><span class="op" id="3258114">:</span><span class="op" id="3258115">]</span><span class="op" id="3258116">,</span>&nbsp;<span class="ident" id="3258118">l</span><span class="op" id="3258119">.</span><span class="ident" id="3258120">rightDelim</span><span class="op" id="3258130">)</span>&nbsp;<span class="op" id="3258132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258136">if</span>&nbsp;<span class="ident" id="3258139">l</span><span class="op" id="3258140">.</span><span class="ident" id="3258141">parenDepth</span>&nbsp;<span class="op" id="3258152">==</span>&nbsp;<span class="num" id="3258155">0</span>&nbsp;<span class="op" id="3258157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258162">return</span>&nbsp;<span class="ident" id="3258169">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258189">return</span>&nbsp;<span class="ident" id="3258196">l</span><span class="op" id="3258197">.</span><span class="ident" id="3258198">errorf</span><span class="op" id="3258204">(</span><span class="string" id="3258205">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="3258226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258232">switch</span>&nbsp;<span class="ident" id="3258239">r</span>&nbsp;<span class="op" id="3258241">:=</span>&nbsp;<span class="ident" id="3258244">l</span><span class="op" id="3258245">.</span><span class="ident" id="3258246">next</span><span class="op" id="3258250">(</span><span class="op" id="3258251">)</span><span class="op" id="3258252">;</span>&nbsp;<span class="op" id="3258254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258257">case</span>&nbsp;<span class="ident" id="3258262">r</span>&nbsp;<span class="op" id="3258264">==</span>&nbsp;<span class="ident" id="3258267">eof</span>&nbsp;<span class="op" id="3258271">||</span>&nbsp;<span class="ident" id="3258274">isEndOfLine</span><span class="op" id="3258285">(</span><span class="ident" id="3258286">r</span><span class="op" id="3258287">)</span><span class="op" id="3258288">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258292">return</span>&nbsp;<span class="ident" id="3258299">l</span><span class="op" id="3258300">.</span><span class="ident" id="3258301">errorf</span><span class="op" id="3258307">(</span><span class="string" id="3258308">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="3258325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258328">case</span>&nbsp;<span class="ident" id="3258333">isSpace</span><span class="op" id="3258340">(</span><span class="ident" id="3258341">r</span><span class="op" id="3258342">)</span><span class="op" id="3258343">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258347">return</span>&nbsp;<span class="ident" id="3258354">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258364">case</span>&nbsp;<span class="ident" id="3258369">r</span>&nbsp;<span class="op" id="3258371">==</span>&nbsp;<span class="string" id="3258374">&#39;:&#39;</span><span class="op" id="3258377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258381">if</span>&nbsp;<span class="ident" id="3258384">l</span><span class="op" id="3258385">.</span><span class="ident" id="3258386">next</span><span class="op" id="3258390">(</span><span class="op" id="3258391">)</span>&nbsp;<span class="op" id="3258393">!=</span>&nbsp;<span class="string" id="3258396">&#39;=&#39;</span>&nbsp;<span class="op" id="3258400">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258405">return</span>&nbsp;<span class="ident" id="3258412">l</span><span class="op" id="3258413">.</span><span class="ident" id="3258414">errorf</span><span class="op" id="3258420">(</span><span class="string" id="3258421">&#34;expected&nbsp;:=&#34;</span><span class="op" id="3258434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258442">l</span><span class="op" id="3258443">.</span><span class="ident" id="3258444">emit</span><span class="op" id="3258448">(</span><span class="ident" id="3258449">itemColonEquals</span><span class="op" id="3258464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258467">case</span>&nbsp;<span class="ident" id="3258472">r</span>&nbsp;<span class="op" id="3258474">==</span>&nbsp;<span class="string" id="3258477">&#39;|&#39;</span><span class="op" id="3258480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258484">l</span><span class="op" id="3258485">.</span><span class="ident" id="3258486">emit</span><span class="op" id="3258490">(</span><span class="ident" id="3258491">itemPipe</span><span class="op" id="3258499">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258502">case</span>&nbsp;<span class="ident" id="3258507">r</span>&nbsp;<span class="op" id="3258509">==</span>&nbsp;<span class="string" id="3258512">&#39;&#34;&#39;</span><span class="op" id="3258515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258519">return</span>&nbsp;<span class="ident" id="3258526">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258536">case</span>&nbsp;<span class="ident" id="3258541">r</span>&nbsp;<span class="op" id="3258543">==</span>&nbsp;<span class="string" id="3258546">&#39;`&#39;</span><span class="op" id="3258549">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258553">return</span>&nbsp;<span class="ident" id="3258560">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258573">case</span>&nbsp;<span class="ident" id="3258578">r</span>&nbsp;<span class="op" id="3258580">==</span>&nbsp;<span class="string" id="3258583">&#39;$&#39;</span><span class="op" id="3258586">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258590">return</span>&nbsp;<span class="ident" id="3258597">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258610">case</span>&nbsp;<span class="ident" id="3258615">r</span>&nbsp;<span class="op" id="3258617">==</span>&nbsp;<span class="string" id="3258620">&#39;\&#39;&#39;</span><span class="op" id="3258624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258628">return</span>&nbsp;<span class="ident" id="3258635">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258644">case</span>&nbsp;<span class="ident" id="3258649">r</span>&nbsp;<span class="op" id="3258651">==</span>&nbsp;<span class="string" id="3258654">&#39;.&#39;</span><span class="op" id="3258657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258661">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258728">if</span>&nbsp;<span class="ident" id="3258731">l</span><span class="op" id="3258732">.</span><span class="ident" id="3258733">pos</span>&nbsp;<span class="op" id="3258737">&lt;</span>&nbsp;<span class="ident" id="3258739">Pos</span><span class="op" id="3258742">(</span><span class="builtinfunc" id="3258743">len</span><span class="op" id="3258746">(</span><span class="ident" id="3258747">l</span><span class="op" id="3258748">.</span><span class="ident" id="3258749">input</span><span class="op" id="3258754">)</span><span class="op" id="3258755">)</span>&nbsp;<span class="op" id="3258757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258762">r</span>&nbsp;<span class="op" id="3258764">:=</span>&nbsp;<span class="ident" id="3258767">l</span><span class="op" id="3258768">.</span><span class="ident" id="3258769">input</span><span class="op" id="3258774">[</span><span class="ident" id="3258775">l</span><span class="op" id="3258776">.</span><span class="ident" id="3258777">pos</span><span class="op" id="3258780">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258785">if</span>&nbsp;<span class="ident" id="3258788">r</span>&nbsp;<span class="op" id="3258790">&lt;</span>&nbsp;<span class="string" id="3258792">&#39;0&#39;</span>&nbsp;<span class="op" id="3258796">||</span>&nbsp;<span class="string" id="3258799">&#39;9&#39;</span>&nbsp;<span class="op" id="3258803">&lt;</span>&nbsp;<span class="ident" id="3258805">r</span>&nbsp;<span class="op" id="3258807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258813">return</span>&nbsp;<span class="ident" id="3258820">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258832">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258840">fallthrough</span>&nbsp;<span class="comment" id="3258852">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258880">case</span>&nbsp;<span class="ident" id="3258885">r</span>&nbsp;<span class="op" id="3258887">==</span>&nbsp;<span class="string" id="3258890">&#39;+&#39;</span>&nbsp;<span class="op" id="3258894">||</span>&nbsp;<span class="ident" id="3258897">r</span>&nbsp;<span class="op" id="3258899">==</span>&nbsp;<span class="string" id="3258902">&#39;-&#39;</span>&nbsp;<span class="op" id="3258906">||</span>&nbsp;<span class="op" id="3258909">(</span><span class="string" id="3258910">&#39;0&#39;</span>&nbsp;<span class="op" id="3258914">&lt;=</span>&nbsp;<span class="ident" id="3258917">r</span>&nbsp;<span class="op" id="3258919">&amp;&amp;</span>&nbsp;<span class="ident" id="3258922">r</span>&nbsp;<span class="op" id="3258924">&lt;=</span>&nbsp;<span class="string" id="3258927">&#39;9&#39;</span><span class="op" id="3258930">)</span><span class="op" id="3258931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258935">l</span><span class="op" id="3258936">.</span><span class="ident" id="3258937">backup</span><span class="op" id="3258943">(</span><span class="op" id="3258944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258948">return</span>&nbsp;<span class="ident" id="3258955">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258966">case</span>&nbsp;<span class="ident" id="3258971">isAlphaNumeric</span><span class="op" id="3258985">(</span><span class="ident" id="3258986">r</span><span class="op" id="3258987">)</span><span class="op" id="3258988">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258992">l</span><span class="op" id="3258993">.</span><span class="ident" id="3258994">backup</span><span class="op" id="3259000">(</span><span class="op" id="3259001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259005">return</span>&nbsp;<span class="ident" id="3259012">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259027">case</span>&nbsp;<span class="ident" id="3259032">r</span>&nbsp;<span class="op" id="3259034">==</span>&nbsp;<span class="string" id="3259037">&#39;(&#39;</span><span class="op" id="3259040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259044">l</span><span class="op" id="3259045">.</span><span class="ident" id="3259046">emit</span><span class="op" id="3259050">(</span><span class="ident" id="3259051">itemLeftParen</span><span class="op" id="3259064">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259068">l</span><span class="op" id="3259069">.</span><span class="ident" id="3259070">parenDepth</span><span class="op" id="3259080">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259085">return</span>&nbsp;<span class="ident" id="3259092">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259109">case</span>&nbsp;<span class="ident" id="3259114">r</span>&nbsp;<span class="op" id="3259116">==</span>&nbsp;<span class="string" id="3259119">&#39;)&#39;</span><span class="op" id="3259122">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259126">l</span><span class="op" id="3259127">.</span><span class="ident" id="3259128">emit</span><span class="op" id="3259132">(</span><span class="ident" id="3259133">itemRightParen</span><span class="op" id="3259147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259151">l</span><span class="op" id="3259152">.</span><span class="ident" id="3259153">parenDepth</span><span class="op" id="3259163">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259168">if</span>&nbsp;<span class="ident" id="3259171">l</span><span class="op" id="3259172">.</span><span class="ident" id="3259173">parenDepth</span>&nbsp;<span class="op" id="3259184">&lt;</span>&nbsp;<span class="num" id="3259186">0</span>&nbsp;<span class="op" id="3259188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259193">return</span>&nbsp;<span class="ident" id="3259200">l</span><span class="op" id="3259201">.</span><span class="ident" id="3259202">errorf</span><span class="op" id="3259208">(</span><span class="string" id="3259209">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="3259237">,</span>&nbsp;<span class="ident" id="3259239">r</span><span class="op" id="3259240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259248">return</span>&nbsp;<span class="ident" id="3259255">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259272">case</span>&nbsp;<span class="ident" id="3259277">r</span>&nbsp;<span class="op" id="3259279">&lt;=</span>&nbsp;<span class="ident" id="3259282">unicode</span><span class="op" id="3259289">.</span><span class="ident" id="3259290">MaxASCII</span>&nbsp;<span class="op" id="3259299">&amp;&amp;</span>&nbsp;<span class="ident" id="3259302">unicode</span><span class="op" id="3259309">.</span><span class="ident" id="3259310">IsPrint</span><span class="op" id="3259317">(</span><span class="ident" id="3259318">r</span><span class="op" id="3259319">)</span><span class="op" id="3259320">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259324">l</span><span class="op" id="3259325">.</span><span class="ident" id="3259326">emit</span><span class="op" id="3259330">(</span><span class="ident" id="3259331">itemChar</span><span class="op" id="3259339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259343">return</span>&nbsp;<span class="ident" id="3259350">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259367">default</span><span class="op" id="3259374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259378">return</span>&nbsp;<span class="ident" id="3259385">l</span><span class="op" id="3259386">.</span><span class="ident" id="3259387">errorf</span><span class="op" id="3259393">(</span><span class="string" id="3259394">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="3259433">,</span>&nbsp;<span class="ident" id="3259435">r</span><span class="op" id="3259436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259439">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259442">return</span>&nbsp;<span class="ident" id="3259449">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3259465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259468">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="3259513">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="3259549">func</span>&nbsp;<span class="ident" id="3259554">lexSpace</span><span class="op" id="3259562">(</span><span class="ident" id="3259563">l</span>&nbsp;<span class="op" id="3259565">*</span><span class="ident" id="3259566">lexer</span><span class="op" id="3259571">)</span>&nbsp;<span class="ident" id="3259573">stateFn</span>&nbsp;<span class="op" id="3259581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259584">for</span>&nbsp;<span class="ident" id="3259588">isSpace</span><span class="op" id="3259595">(</span><span class="ident" id="3259596">l</span><span class="op" id="3259597">.</span><span class="ident" id="3259598">peek</span><span class="op" id="3259602">(</span><span class="op" id="3259603">)</span><span class="op" id="3259604">)</span>&nbsp;<span class="op" id="3259606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259610">l</span><span class="op" id="3259611">.</span><span class="ident" id="3259612">next</span><span class="op" id="3259616">(</span><span class="op" id="3259617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259623">l</span><span class="op" id="3259624">.</span><span class="ident" id="3259625">emit</span><span class="op" id="3259629">(</span><span class="ident" id="3259630">itemSpace</span><span class="op" id="3259639">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259642">return</span>&nbsp;<span class="ident" id="3259649">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3259665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259668">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="3259708">func</span>&nbsp;<span class="ident" id="3259713">lexIdentifier</span><span class="op" id="3259726">(</span><span class="ident" id="3259727">l</span>&nbsp;<span class="op" id="3259729">*</span><span class="ident" id="3259730">lexer</span><span class="op" id="3259735">)</span>&nbsp;<span class="ident" id="3259737">stateFn</span>&nbsp;<span class="op" id="3259745">{</span><br>
<span class="lineno">345</span><span class="ident" id="3259747">Loop</span><span class="op" id="3259751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259754">for</span>&nbsp;<span class="op" id="3259758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259762">switch</span>&nbsp;<span class="ident" id="3259769">r</span>&nbsp;<span class="op" id="3259771">:=</span>&nbsp;<span class="ident" id="3259774">l</span><span class="op" id="3259775">.</span><span class="ident" id="3259776">next</span><span class="op" id="3259780">(</span><span class="op" id="3259781">)</span><span class="op" id="3259782">;</span>&nbsp;<span class="op" id="3259784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259788">case</span>&nbsp;<span class="ident" id="3259793">isAlphaNumeric</span><span class="op" id="3259807">(</span><span class="ident" id="3259808">r</span><span class="op" id="3259809">)</span><span class="op" id="3259810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259815">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259828">default</span><span class="op" id="3259835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259840">l</span><span class="op" id="3259841">.</span><span class="ident" id="3259842">backup</span><span class="op" id="3259848">(</span><span class="op" id="3259849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259854">word</span>&nbsp;<span class="op" id="3259859">:=</span>&nbsp;<span class="ident" id="3259862">l</span><span class="op" id="3259863">.</span><span class="ident" id="3259864">input</span><span class="op" id="3259869">[</span><span class="ident" id="3259870">l</span><span class="op" id="3259871">.</span><span class="ident" id="3259872">start</span><span class="op" id="3259877">:</span><span class="ident" id="3259878">l</span><span class="op" id="3259879">.</span><span class="ident" id="3259880">pos</span><span class="op" id="3259883">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259888">if</span>&nbsp;<span class="op" id="3259891">!</span><span class="ident" id="3259892">l</span><span class="op" id="3259893">.</span><span class="ident" id="3259894">atTerminator</span><span class="op" id="3259906">(</span><span class="op" id="3259907">)</span>&nbsp;<span class="op" id="3259909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259915">return</span>&nbsp;<span class="ident" id="3259922">l</span><span class="op" id="3259923">.</span><span class="ident" id="3259924">errorf</span><span class="op" id="3259930">(</span><span class="string" id="3259931">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3259950">,</span>&nbsp;<span class="ident" id="3259952">r</span><span class="op" id="3259953">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259963">switch</span>&nbsp;<span class="op" id="3259970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259975">case</span>&nbsp;<span class="ident" id="3259980">key</span><span class="op" id="3259983">[</span><span class="ident" id="3259984">word</span><span class="op" id="3259988">]</span>&nbsp;<span class="op" id="3259990">&gt;</span>&nbsp;<span class="ident" id="3259992">itemKeyword</span><span class="op" id="3260003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260009">l</span><span class="op" id="3260010">.</span><span class="ident" id="3260011">emit</span><span class="op" id="3260015">(</span><span class="ident" id="3260016">key</span><span class="op" id="3260019">[</span><span class="ident" id="3260020">word</span><span class="op" id="3260024">]</span><span class="op" id="3260025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260030">case</span>&nbsp;<span class="ident" id="3260035">word</span><span class="op" id="3260039">[</span><span class="num" id="3260040">0</span><span class="op" id="3260041">]</span>&nbsp;<span class="op" id="3260043">==</span>&nbsp;<span class="string" id="3260046">&#39;.&#39;</span><span class="op" id="3260049">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260055">l</span><span class="op" id="3260056">.</span><span class="ident" id="3260057">emit</span><span class="op" id="3260061">(</span><span class="ident" id="3260062">itemField</span><span class="op" id="3260071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260076">case</span>&nbsp;<span class="ident" id="3260081">word</span>&nbsp;<span class="op" id="3260086">==</span>&nbsp;<span class="string" id="3260089">&#34;true&#34;</span><span class="op" id="3260095">,</span>&nbsp;<span class="ident" id="3260097">word</span>&nbsp;<span class="op" id="3260102">==</span>&nbsp;<span class="string" id="3260105">&#34;false&#34;</span><span class="op" id="3260112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260118">l</span><span class="op" id="3260119">.</span><span class="ident" id="3260120">emit</span><span class="op" id="3260124">(</span><span class="ident" id="3260125">itemBool</span><span class="op" id="3260133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260138">default</span><span class="op" id="3260145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260151">l</span><span class="op" id="3260152">.</span><span class="ident" id="3260153">emit</span><span class="op" id="3260157">(</span><span class="ident" id="3260158">itemIdentifier</span><span class="op" id="3260172">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260182">break</span>&nbsp;<span class="ident" id="3260188">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260201">return</span>&nbsp;<span class="ident" id="3260208">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="3260224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260227">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3260269">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="3260296">func</span>&nbsp;<span class="ident" id="3260301">lexField</span><span class="op" id="3260309">(</span><span class="ident" id="3260310">l</span>&nbsp;<span class="op" id="3260312">*</span><span class="ident" id="3260313">lexer</span><span class="op" id="3260318">)</span>&nbsp;<span class="ident" id="3260320">stateFn</span>&nbsp;<span class="op" id="3260328">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260331">return</span>&nbsp;<span class="ident" id="3260338">lexFieldOrVariable</span><span class="op" id="3260356">(</span><span class="ident" id="3260357">l</span><span class="op" id="3260358">,</span>&nbsp;<span class="ident" id="3260360">itemField</span><span class="op" id="3260369">)</span><br>
<span class="lineno"></span><span class="op" id="3260371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260374">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3260422">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="3260449">func</span>&nbsp;<span class="ident" id="3260454">lexVariable</span><span class="op" id="3260465">(</span><span class="ident" id="3260466">l</span>&nbsp;<span class="op" id="3260468">*</span><span class="ident" id="3260469">lexer</span><span class="op" id="3260474">)</span>&nbsp;<span class="ident" id="3260476">stateFn</span>&nbsp;<span class="op" id="3260484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260487">if</span>&nbsp;<span class="ident" id="3260490">l</span><span class="op" id="3260491">.</span><span class="ident" id="3260492">atTerminator</span><span class="op" id="3260504">(</span><span class="op" id="3260505">)</span>&nbsp;<span class="op" id="3260507">{</span>&nbsp;<span class="comment" id="3260509">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260550">l</span><span class="op" id="3260551">.</span><span class="ident" id="3260552">emit</span><span class="op" id="3260556">(</span><span class="ident" id="3260557">itemVariable</span><span class="op" id="3260569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260573">return</span>&nbsp;<span class="ident" id="3260580">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260597">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260600">return</span>&nbsp;<span class="ident" id="3260607">lexFieldOrVariable</span><span class="op" id="3260625">(</span><span class="ident" id="3260626">l</span><span class="op" id="3260627">,</span>&nbsp;<span class="ident" id="3260629">itemVariable</span><span class="op" id="3260641">)</span><br>
<span class="lineno"></span><span class="op" id="3260643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260646">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3260706">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="3260738">func</span>&nbsp;<span class="ident" id="3260743">lexFieldOrVariable</span><span class="op" id="3260761">(</span><span class="ident" id="3260762">l</span>&nbsp;<span class="op" id="3260764">*</span><span class="ident" id="3260765">lexer</span><span class="op" id="3260770">,</span>&nbsp;<span class="ident" id="3260772">typ</span>&nbsp;<span class="ident" id="3260776">itemType</span><span class="op" id="3260784">)</span>&nbsp;<span class="ident" id="3260786">stateFn</span>&nbsp;<span class="op" id="3260794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260797">if</span>&nbsp;<span class="ident" id="3260800">l</span><span class="op" id="3260801">.</span><span class="ident" id="3260802">atTerminator</span><span class="op" id="3260814">(</span><span class="op" id="3260815">)</span>&nbsp;<span class="op" id="3260817">{</span>&nbsp;<span class="comment" id="3260819">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260867">if</span>&nbsp;<span class="ident" id="3260870">typ</span>&nbsp;<span class="op" id="3260874">==</span>&nbsp;<span class="ident" id="3260877">itemVariable</span>&nbsp;<span class="op" id="3260890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260895">l</span><span class="op" id="3260896">.</span><span class="ident" id="3260897">emit</span><span class="op" id="3260901">(</span><span class="ident" id="3260902">itemVariable</span><span class="op" id="3260914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260918">}</span>&nbsp;<span class="keyword" id="3260920">else</span>&nbsp;<span class="op" id="3260925">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260930">l</span><span class="op" id="3260931">.</span><span class="ident" id="3260932">emit</span><span class="op" id="3260936">(</span><span class="ident" id="3260937">itemDot</span><span class="op" id="3260944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260952">return</span>&nbsp;<span class="ident" id="3260959">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260979">var</span>&nbsp;<span class="ident" id="3260983">r</span>&nbsp;<span class="builtintype" id="3260985">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260991">for</span>&nbsp;<span class="op" id="3260995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260999">r</span>&nbsp;<span class="op" id="3261001">=</span>&nbsp;<span class="ident" id="3261003">l</span><span class="op" id="3261004">.</span><span class="ident" id="3261005">next</span><span class="op" id="3261009">(</span><span class="op" id="3261010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261014">if</span>&nbsp;<span class="op" id="3261017">!</span><span class="ident" id="3261018">isAlphaNumeric</span><span class="op" id="3261032">(</span><span class="ident" id="3261033">r</span><span class="op" id="3261034">)</span>&nbsp;<span class="op" id="3261036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261041">l</span><span class="op" id="3261042">.</span><span class="ident" id="3261043">backup</span><span class="op" id="3261049">(</span><span class="op" id="3261050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261055">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261069">if</span>&nbsp;<span class="op" id="3261072">!</span><span class="ident" id="3261073">l</span><span class="op" id="3261074">.</span><span class="ident" id="3261075">atTerminator</span><span class="op" id="3261087">(</span><span class="op" id="3261088">)</span>&nbsp;<span class="op" id="3261090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261094">return</span>&nbsp;<span class="ident" id="3261101">l</span><span class="op" id="3261102">.</span><span class="ident" id="3261103">errorf</span><span class="op" id="3261109">(</span><span class="string" id="3261110">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3261129">,</span>&nbsp;<span class="ident" id="3261131">r</span><span class="op" id="3261132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261135">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261138">l</span><span class="op" id="3261139">.</span><span class="ident" id="3261140">emit</span><span class="op" id="3261144">(</span><span class="ident" id="3261145">typ</span><span class="op" id="3261148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261151">return</span>&nbsp;<span class="ident" id="3261158">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3261174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3261177">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="3261256">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="3261335">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3261410">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="3261442">func</span>&nbsp;<span class="op" id="3261447">(</span><span class="ident" id="3261448">l</span>&nbsp;<span class="op" id="3261450">*</span><span class="ident" id="3261451">lexer</span><span class="op" id="3261456">)</span>&nbsp;<span class="ident" id="3261458">atTerminator</span><span class="op" id="3261470">(</span><span class="op" id="3261471">)</span>&nbsp;<span class="builtintype" id="3261473">bool</span>&nbsp;<span class="op" id="3261478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261481">r</span>&nbsp;<span class="op" id="3261483">:=</span>&nbsp;<span class="ident" id="3261486">l</span><span class="op" id="3261487">.</span><span class="ident" id="3261488">peek</span><span class="op" id="3261492">(</span><span class="op" id="3261493">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261496">if</span>&nbsp;<span class="ident" id="3261499">isSpace</span><span class="op" id="3261506">(</span><span class="ident" id="3261507">r</span><span class="op" id="3261508">)</span>&nbsp;<span class="op" id="3261510">||</span>&nbsp;<span class="ident" id="3261513">isEndOfLine</span><span class="op" id="3261524">(</span><span class="ident" id="3261525">r</span><span class="op" id="3261526">)</span>&nbsp;<span class="op" id="3261528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261532">return</span>&nbsp;<span class="builtintype" id="3261539">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261548">switch</span>&nbsp;<span class="ident" id="3261555">r</span>&nbsp;<span class="op" id="3261557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261560">case</span>&nbsp;<span class="ident" id="3261565">eof</span><span class="op" id="3261568">,</span>&nbsp;<span class="string" id="3261570">&#39;.&#39;</span><span class="op" id="3261573">,</span>&nbsp;<span class="string" id="3261575">&#39;,&#39;</span><span class="op" id="3261578">,</span>&nbsp;<span class="string" id="3261580">&#39;|&#39;</span><span class="op" id="3261583">,</span>&nbsp;<span class="string" id="3261585">&#39;:&#39;</span><span class="op" id="3261588">,</span>&nbsp;<span class="string" id="3261590">&#39;)&#39;</span><span class="op" id="3261593">,</span>&nbsp;<span class="string" id="3261595">&#39;(&#39;</span><span class="op" id="3261598">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261602">return</span>&nbsp;<span class="builtintype" id="3261609">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261618">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261701">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261783">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261812">if</span>&nbsp;<span class="ident" id="3261815">rd</span><span class="op" id="3261817">,</span>&nbsp;<span class="ident" id="3261819">_</span>&nbsp;<span class="op" id="3261821">:=</span>&nbsp;<span class="ident" id="3261824">utf8</span><span class="op" id="3261828">.</span><span class="ident" id="3261829">DecodeRuneInString</span><span class="op" id="3261847">(</span><span class="ident" id="3261848">l</span><span class="op" id="3261849">.</span><span class="ident" id="3261850">rightDelim</span><span class="op" id="3261860">)</span><span class="op" id="3261861">;</span>&nbsp;<span class="ident" id="3261863">rd</span>&nbsp;<span class="op" id="3261866">==</span>&nbsp;<span class="ident" id="3261869">r</span>&nbsp;<span class="op" id="3261871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261875">return</span>&nbsp;<span class="builtintype" id="3261882">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261891">return</span>&nbsp;<span class="builtintype" id="3261898">false</span><br>
<span class="lineno"></span><span class="op" id="3261904">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="3261907">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="3261975">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="3262026">func</span>&nbsp;<span class="ident" id="3262031">lexChar</span><span class="op" id="3262038">(</span><span class="ident" id="3262039">l</span>&nbsp;<span class="op" id="3262041">*</span><span class="ident" id="3262042">lexer</span><span class="op" id="3262047">)</span>&nbsp;<span class="ident" id="3262049">stateFn</span>&nbsp;<span class="op" id="3262057">{</span><br>
<span class="lineno"></span><span class="ident" id="3262059">Loop</span><span class="op" id="3262063">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262066">for</span>&nbsp;<span class="op" id="3262070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262074">switch</span>&nbsp;<span class="ident" id="3262081">l</span><span class="op" id="3262082">.</span><span class="ident" id="3262083">next</span><span class="op" id="3262087">(</span><span class="op" id="3262088">)</span>&nbsp;<span class="op" id="3262090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262094">case</span>&nbsp;<span class="string" id="3262099">&#39;\\&#39;</span><span class="op" id="3262103">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262108">if</span>&nbsp;<span class="ident" id="3262111">r</span>&nbsp;<span class="op" id="3262113">:=</span>&nbsp;<span class="ident" id="3262116">l</span><span class="op" id="3262117">.</span><span class="ident" id="3262118">next</span><span class="op" id="3262122">(</span><span class="op" id="3262123">)</span><span class="op" id="3262124">;</span>&nbsp;<span class="ident" id="3262126">r</span>&nbsp;<span class="op" id="3262128">!=</span>&nbsp;<span class="ident" id="3262131">eof</span>&nbsp;<span class="op" id="3262135">&amp;&amp;</span>&nbsp;<span class="ident" id="3262138">r</span>&nbsp;<span class="op" id="3262140">!=</span>&nbsp;<span class="string" id="3262143">&#39;\n&#39;</span>&nbsp;<span class="op" id="3262148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262154">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262168">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262182">case</span>&nbsp;<span class="ident" id="3262187">eof</span><span class="op" id="3262190">,</span>&nbsp;<span class="string" id="3262192">&#39;\n&#39;</span><span class="op" id="3262196">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262201">return</span>&nbsp;<span class="ident" id="3262208">l</span><span class="op" id="3262209">.</span><span class="ident" id="3262210">errorf</span><span class="op" id="3262216">(</span><span class="string" id="3262217">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="3262250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262254">case</span>&nbsp;<span class="string" id="3262259">&#39;\&#39;&#39;</span><span class="op" id="3262263">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262268">break</span>&nbsp;<span class="ident" id="3262274">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262287">l</span><span class="op" id="3262288">.</span><span class="ident" id="3262289">emit</span><span class="op" id="3262293">(</span><span class="ident" id="3262294">itemCharConstant</span><span class="op" id="3262310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262313">return</span>&nbsp;<span class="ident" id="3262320">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="3262336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262339">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="3262415">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3262491">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="3262567">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="3262592">func</span>&nbsp;<span class="ident" id="3262597">lexNumber</span><span class="op" id="3262606">(</span><span class="ident" id="3262607">l</span>&nbsp;<span class="op" id="3262609">*</span><span class="ident" id="3262610">lexer</span><span class="op" id="3262615">)</span>&nbsp;<span class="ident" id="3262617">stateFn</span>&nbsp;<span class="op" id="3262625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262628">if</span>&nbsp;<span class="op" id="3262631">!</span><span class="ident" id="3262632">l</span><span class="op" id="3262633">.</span><span class="ident" id="3262634">scanNumber</span><span class="op" id="3262644">(</span><span class="op" id="3262645">)</span>&nbsp;<span class="op" id="3262647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262651">return</span>&nbsp;<span class="ident" id="3262658">l</span><span class="op" id="3262659">.</span><span class="ident" id="3262660">errorf</span><span class="op" id="3262666">(</span><span class="string" id="3262667">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="3262690">,</span>&nbsp;<span class="ident" id="3262692">l</span><span class="op" id="3262693">.</span><span class="ident" id="3262694">input</span><span class="op" id="3262699">[</span><span class="ident" id="3262700">l</span><span class="op" id="3262701">.</span><span class="ident" id="3262702">start</span><span class="op" id="3262707">:</span><span class="ident" id="3262708">l</span><span class="op" id="3262709">.</span><span class="ident" id="3262710">pos</span><span class="op" id="3262713">]</span><span class="op" id="3262714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262717">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262720">if</span>&nbsp;<span class="ident" id="3262723">sign</span>&nbsp;<span class="op" id="3262728">:=</span>&nbsp;<span class="ident" id="3262731">l</span><span class="op" id="3262732">.</span><span class="ident" id="3262733">peek</span><span class="op" id="3262737">(</span><span class="op" id="3262738">)</span><span class="op" id="3262739">;</span>&nbsp;<span class="ident" id="3262741">sign</span>&nbsp;<span class="op" id="3262746">==</span>&nbsp;<span class="string" id="3262749">&#39;+&#39;</span>&nbsp;<span class="op" id="3262753">||</span>&nbsp;<span class="ident" id="3262756">sign</span>&nbsp;<span class="op" id="3262761">==</span>&nbsp;<span class="string" id="3262764">&#39;-&#39;</span>&nbsp;<span class="op" id="3262768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262772">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262820">if</span>&nbsp;<span class="op" id="3262823">!</span><span class="ident" id="3262824">l</span><span class="op" id="3262825">.</span><span class="ident" id="3262826">scanNumber</span><span class="op" id="3262836">(</span><span class="op" id="3262837">)</span>&nbsp;<span class="op" id="3262839">||</span>&nbsp;<span class="ident" id="3262842">l</span><span class="op" id="3262843">.</span><span class="ident" id="3262844">input</span><span class="op" id="3262849">[</span><span class="ident" id="3262850">l</span><span class="op" id="3262851">.</span><span class="ident" id="3262852">pos</span><span class="op" id="3262855">-</span><span class="num" id="3262856">1</span><span class="op" id="3262857">]</span>&nbsp;<span class="op" id="3262859">!=</span>&nbsp;<span class="string" id="3262862">&#39;i&#39;</span>&nbsp;<span class="op" id="3262866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262871">return</span>&nbsp;<span class="ident" id="3262878">l</span><span class="op" id="3262879">.</span><span class="ident" id="3262880">errorf</span><span class="op" id="3262886">(</span><span class="string" id="3262887">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="3262910">,</span>&nbsp;<span class="ident" id="3262912">l</span><span class="op" id="3262913">.</span><span class="ident" id="3262914">input</span><span class="op" id="3262919">[</span><span class="ident" id="3262920">l</span><span class="op" id="3262921">.</span><span class="ident" id="3262922">start</span><span class="op" id="3262927">:</span><span class="ident" id="3262928">l</span><span class="op" id="3262929">.</span><span class="ident" id="3262930">pos</span><span class="op" id="3262933">]</span><span class="op" id="3262934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262938">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262942">l</span><span class="op" id="3262943">.</span><span class="ident" id="3262944">emit</span><span class="op" id="3262948">(</span><span class="ident" id="3262949">itemComplex</span><span class="op" id="3262960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262963">}</span>&nbsp;<span class="keyword" id="3262965">else</span>&nbsp;<span class="op" id="3262970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262974">l</span><span class="op" id="3262975">.</span><span class="ident" id="3262976">emit</span><span class="op" id="3262980">(</span><span class="ident" id="3262981">itemNumber</span><span class="op" id="3262991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262997">return</span>&nbsp;<span class="ident" id="3263004">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="3263020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263023">func</span>&nbsp;<span class="op" id="3263028">(</span><span class="ident" id="3263029">l</span>&nbsp;<span class="op" id="3263031">*</span><span class="ident" id="3263032">lexer</span><span class="op" id="3263037">)</span>&nbsp;<span class="ident" id="3263039">scanNumber</span><span class="op" id="3263049">(</span><span class="op" id="3263050">)</span>&nbsp;<span class="builtintype" id="3263052">bool</span>&nbsp;<span class="op" id="3263057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263060">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263087">l</span><span class="op" id="3263088">.</span><span class="ident" id="3263089">accept</span><span class="op" id="3263095">(</span><span class="string" id="3263096">&#34;+-&#34;</span><span class="op" id="3263100">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263103">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263118">digits</span>&nbsp;<span class="op" id="3263125">:=</span>&nbsp;<span class="string" id="3263128">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263142">if</span>&nbsp;<span class="ident" id="3263145">l</span><span class="op" id="3263146">.</span><span class="ident" id="3263147">accept</span><span class="op" id="3263153">(</span><span class="string" id="3263154">&#34;0&#34;</span><span class="op" id="3263157">)</span>&nbsp;<span class="op" id="3263159">&amp;&amp;</span>&nbsp;<span class="ident" id="3263162">l</span><span class="op" id="3263163">.</span><span class="ident" id="3263164">accept</span><span class="op" id="3263170">(</span><span class="string" id="3263171">&#34;xX&#34;</span><span class="op" id="3263175">)</span>&nbsp;<span class="op" id="3263177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263181">digits</span>&nbsp;<span class="op" id="3263188">=</span>&nbsp;<span class="string" id="3263190">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263216">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263219">l</span><span class="op" id="3263220">.</span><span class="ident" id="3263221">acceptRun</span><span class="op" id="3263230">(</span><span class="ident" id="3263231">digits</span><span class="op" id="3263237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263240">if</span>&nbsp;<span class="ident" id="3263243">l</span><span class="op" id="3263244">.</span><span class="ident" id="3263245">accept</span><span class="op" id="3263251">(</span><span class="string" id="3263252">&#34;.&#34;</span><span class="op" id="3263255">)</span>&nbsp;<span class="op" id="3263257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263261">l</span><span class="op" id="3263262">.</span><span class="ident" id="3263263">acceptRun</span><span class="op" id="3263272">(</span><span class="ident" id="3263273">digits</span><span class="op" id="3263279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263285">if</span>&nbsp;<span class="ident" id="3263288">l</span><span class="op" id="3263289">.</span><span class="ident" id="3263290">accept</span><span class="op" id="3263296">(</span><span class="string" id="3263297">&#34;eE&#34;</span><span class="op" id="3263301">)</span>&nbsp;<span class="op" id="3263303">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263307">l</span><span class="op" id="3263308">.</span><span class="ident" id="3263309">accept</span><span class="op" id="3263315">(</span><span class="string" id="3263316">&#34;+-&#34;</span><span class="op" id="3263320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263324">l</span><span class="op" id="3263325">.</span><span class="ident" id="3263326">acceptRun</span><span class="op" id="3263335">(</span><span class="string" id="3263336">&#34;0123456789&#34;</span><span class="op" id="3263348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263354">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263375">l</span><span class="op" id="3263376">.</span><span class="ident" id="3263377">accept</span><span class="op" id="3263383">(</span><span class="string" id="3263384">&#34;i&#34;</span><span class="op" id="3263387">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263390">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263430">if</span>&nbsp;<span class="ident" id="3263433">isAlphaNumeric</span><span class="op" id="3263447">(</span><span class="ident" id="3263448">l</span><span class="op" id="3263449">.</span><span class="ident" id="3263450">peek</span><span class="op" id="3263454">(</span><span class="op" id="3263455">)</span><span class="op" id="3263456">)</span>&nbsp;<span class="op" id="3263458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263462">l</span><span class="op" id="3263463">.</span><span class="ident" id="3263464">next</span><span class="op" id="3263468">(</span><span class="op" id="3263469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263473">return</span>&nbsp;<span class="builtintype" id="3263480">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263487">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263490">return</span>&nbsp;<span class="builtintype" id="3263497">true</span><br>
<span class="lineno"></span><span class="op" id="3263502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3263505">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3263540">func</span>&nbsp;<span class="ident" id="3263545">lexQuote</span><span class="op" id="3263553">(</span><span class="ident" id="3263554">l</span>&nbsp;<span class="op" id="3263556">*</span><span class="ident" id="3263557">lexer</span><span class="op" id="3263562">)</span>&nbsp;<span class="ident" id="3263564">stateFn</span>&nbsp;<span class="op" id="3263572">{</span><br>
<span class="lineno">505</span><span class="ident" id="3263574">Loop</span><span class="op" id="3263578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263581">for</span>&nbsp;<span class="op" id="3263585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263589">switch</span>&nbsp;<span class="ident" id="3263596">l</span><span class="op" id="3263597">.</span><span class="ident" id="3263598">next</span><span class="op" id="3263602">(</span><span class="op" id="3263603">)</span>&nbsp;<span class="op" id="3263605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263609">case</span>&nbsp;<span class="string" id="3263614">&#39;\\&#39;</span><span class="op" id="3263618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263623">if</span>&nbsp;<span class="ident" id="3263626">r</span>&nbsp;<span class="op" id="3263628">:=</span>&nbsp;<span class="ident" id="3263631">l</span><span class="op" id="3263632">.</span><span class="ident" id="3263633">next</span><span class="op" id="3263637">(</span><span class="op" id="3263638">)</span><span class="op" id="3263639">;</span>&nbsp;<span class="ident" id="3263641">r</span>&nbsp;<span class="op" id="3263643">!=</span>&nbsp;<span class="ident" id="3263646">eof</span>&nbsp;<span class="op" id="3263650">&amp;&amp;</span>&nbsp;<span class="ident" id="3263653">r</span>&nbsp;<span class="op" id="3263655">!=</span>&nbsp;<span class="string" id="3263658">&#39;\n&#39;</span>&nbsp;<span class="op" id="3263663">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263669">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263683">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263697">case</span>&nbsp;<span class="ident" id="3263702">eof</span><span class="op" id="3263705">,</span>&nbsp;<span class="string" id="3263707">&#39;\n&#39;</span><span class="op" id="3263711">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263716">return</span>&nbsp;<span class="ident" id="3263723">l</span><span class="op" id="3263724">.</span><span class="ident" id="3263725">errorf</span><span class="op" id="3263731">(</span><span class="string" id="3263732">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="3263760">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263764">case</span>&nbsp;<span class="string" id="3263769">&#39;&#34;&#39;</span><span class="op" id="3263772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263777">break</span>&nbsp;<span class="ident" id="3263783">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263796">l</span><span class="op" id="3263797">.</span><span class="ident" id="3263798">emit</span><span class="op" id="3263802">(</span><span class="ident" id="3263803">itemString</span><span class="op" id="3263813">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263816">return</span>&nbsp;<span class="ident" id="3263823">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3263839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3263842">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3263884">func</span>&nbsp;<span class="ident" id="3263889">lexRawQuote</span><span class="op" id="3263900">(</span><span class="ident" id="3263901">l</span>&nbsp;<span class="op" id="3263903">*</span><span class="ident" id="3263904">lexer</span><span class="op" id="3263909">)</span>&nbsp;<span class="ident" id="3263911">stateFn</span>&nbsp;<span class="op" id="3263919">{</span><br>
<span class="lineno">525</span><span class="ident" id="3263921">Loop</span><span class="op" id="3263925">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263928">for</span>&nbsp;<span class="op" id="3263932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263936">switch</span>&nbsp;<span class="ident" id="3263943">l</span><span class="op" id="3263944">.</span><span class="ident" id="3263945">next</span><span class="op" id="3263949">(</span><span class="op" id="3263950">)</span>&nbsp;<span class="op" id="3263952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263956">case</span>&nbsp;<span class="ident" id="3263961">eof</span><span class="op" id="3263964">,</span>&nbsp;<span class="string" id="3263966">&#39;\n&#39;</span><span class="op" id="3263970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263975">return</span>&nbsp;<span class="ident" id="3263982">l</span><span class="op" id="3263983">.</span><span class="ident" id="3263984">errorf</span><span class="op" id="3263990">(</span><span class="string" id="3263991">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="3264023">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264027">case</span>&nbsp;<span class="string" id="3264032">&#39;`&#39;</span><span class="op" id="3264035">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264040">break</span>&nbsp;<span class="ident" id="3264046">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264059">l</span><span class="op" id="3264060">.</span><span class="ident" id="3264061">emit</span><span class="op" id="3264065">(</span><span class="ident" id="3264066">itemRawString</span><span class="op" id="3264079">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264082">return</span>&nbsp;<span class="ident" id="3264089">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3264105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264108">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="3264159">func</span>&nbsp;<span class="ident" id="3264164">isSpace</span><span class="op" id="3264171">(</span><span class="ident" id="3264172">r</span>&nbsp;<span class="builtintype" id="3264174">rune</span><span class="op" id="3264178">)</span>&nbsp;<span class="builtintype" id="3264180">bool</span>&nbsp;<span class="op" id="3264185">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264188">return</span>&nbsp;<span class="ident" id="3264195">r</span>&nbsp;<span class="op" id="3264197">==</span>&nbsp;<span class="string" id="3264200">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3264204">||</span>&nbsp;<span class="ident" id="3264207">r</span>&nbsp;<span class="op" id="3264209">==</span>&nbsp;<span class="string" id="3264212">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="3264217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264220">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="3264282">func</span>&nbsp;<span class="ident" id="3264287">isEndOfLine</span><span class="op" id="3264298">(</span><span class="ident" id="3264299">r</span>&nbsp;<span class="builtintype" id="3264301">rune</span><span class="op" id="3264305">)</span>&nbsp;<span class="builtintype" id="3264307">bool</span>&nbsp;<span class="op" id="3264312">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264315">return</span>&nbsp;<span class="ident" id="3264322">r</span>&nbsp;<span class="op" id="3264324">==</span>&nbsp;<span class="string" id="3264327">&#39;\r&#39;</span>&nbsp;<span class="op" id="3264332">||</span>&nbsp;<span class="ident" id="3264335">r</span>&nbsp;<span class="op" id="3264337">==</span>&nbsp;<span class="string" id="3264340">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="3264345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264348">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="3264424">func</span>&nbsp;<span class="ident" id="3264429">isAlphaNumeric</span><span class="op" id="3264443">(</span><span class="ident" id="3264444">r</span>&nbsp;<span class="builtintype" id="3264446">rune</span><span class="op" id="3264450">)</span>&nbsp;<span class="builtintype" id="3264452">bool</span>&nbsp;<span class="op" id="3264457">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264460">return</span>&nbsp;<span class="ident" id="3264467">r</span>&nbsp;<span class="op" id="3264469">==</span>&nbsp;<span class="string" id="3264472">&#39;_&#39;</span>&nbsp;<span class="op" id="3264476">||</span>&nbsp;<span class="ident" id="3264479">unicode</span><span class="op" id="3264486">.</span><span class="ident" id="3264487">IsLetter</span><span class="op" id="3264495">(</span><span class="ident" id="3264496">r</span><span class="op" id="3264497">)</span>&nbsp;<span class="op" id="3264499">||</span>&nbsp;<span class="ident" id="3264502">unicode</span><span class="op" id="3264509">.</span><span class="ident" id="3264510">IsDigit</span><span class="op" id="3264517">(</span><span class="ident" id="3264518">r</span><span class="op" id="3264519">)</span><br>
<span class="lineno"></span><span class="op" id="3264521">}</span>
</div>
</body>
</html>
