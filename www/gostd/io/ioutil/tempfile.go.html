<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html" class="current">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3325577">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3325633">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3325687">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3325738">package</span>&nbsp;<span class="ident" id="3325746">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3325754">import</span>&nbsp;<span class="op" id="3325761">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3325764">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3325770">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3325787">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3325798">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3325806">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3325813">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3325816">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3325840">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3325906">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3325974">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3326000">var</span>&nbsp;<span class="ident" id="3326004">rand</span>&nbsp;<span class="builtintype" id="3326009">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3326016">var</span>&nbsp;<span class="ident" id="3326020">randmu</span>&nbsp;<span class="ident" id="3326027">sync</span><span class="op" id="3326031">.</span><span class="ident" id="3326032">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3326039">func</span>&nbsp;<span class="ident" id="3326044">reseed</span><span class="op" id="3326050">(</span><span class="op" id="3326051">)</span>&nbsp;<span class="builtintype" id="3326053">uint32</span>&nbsp;<span class="op" id="3326060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3326063">return</span>&nbsp;<span class="builtintype" id="3326070">uint32</span><span class="op" id="3326076">(</span><span class="ident" id="3326077">time</span><span class="op" id="3326081">.</span><span class="ident" id="3326082">Now</span><span class="op" id="3326085">(</span><span class="op" id="3326086">)</span><span class="op" id="3326087">.</span><span class="ident" id="3326088">UnixNano</span><span class="op" id="3326096">(</span><span class="op" id="3326097">)</span>&nbsp;<span class="op" id="3326099">+</span>&nbsp;<span class="builtintype" id="3326101">int64</span><span class="op" id="3326106">(</span><span class="ident" id="3326107">os</span><span class="op" id="3326109">.</span><span class="ident" id="3326110">Getpid</span><span class="op" id="3326116">(</span><span class="op" id="3326117">)</span><span class="op" id="3326118">)</span><span class="op" id="3326119">)</span><br>
<span class="lineno"></span><span class="op" id="3326121">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3326124">func</span>&nbsp;<span class="ident" id="3326129">nextSuffix</span><span class="op" id="3326139">(</span><span class="op" id="3326140">)</span>&nbsp;<span class="builtintype" id="3326142">string</span>&nbsp;<span class="op" id="3326149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326152">randmu</span><span class="op" id="3326158">.</span><span class="ident" id="3326159">Lock</span><span class="op" id="3326163">(</span><span class="op" id="3326164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326167">r</span>&nbsp;<span class="op" id="3326169">:=</span>&nbsp;<span class="ident" id="3326172">rand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3326178">if</span>&nbsp;<span class="ident" id="3326181">r</span>&nbsp;<span class="op" id="3326183">==</span>&nbsp;<span class="num" id="3326186">0</span>&nbsp;<span class="op" id="3326188">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326192">r</span>&nbsp;<span class="op" id="3326194">=</span>&nbsp;<span class="ident" id="3326196">reseed</span><span class="op" id="3326202">(</span><span class="op" id="3326203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3326206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326209">r</span>&nbsp;<span class="op" id="3326211">=</span>&nbsp;<span class="ident" id="3326213">r</span><span class="op" id="3326214">*</span><span class="num" id="3326215">1664525</span>&nbsp;<span class="op" id="3326223">+</span>&nbsp;<span class="num" id="3326225">1013904223</span>&nbsp;<span class="comment" id="3326236">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326273">rand</span>&nbsp;<span class="op" id="3326278">=</span>&nbsp;<span class="ident" id="3326280">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326283">randmu</span><span class="op" id="3326289">.</span><span class="ident" id="3326290">Unlock</span><span class="op" id="3326296">(</span><span class="op" id="3326297">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3326300">return</span>&nbsp;<span class="ident" id="3326307">strconv</span><span class="op" id="3326314">.</span><span class="ident" id="3326315">Itoa</span><span class="op" id="3326319">(</span><span class="builtintype" id="3326320">int</span><span class="op" id="3326323">(</span><span class="num" id="3326324">1e9</span>&nbsp;<span class="op" id="3326328">+</span>&nbsp;<span class="ident" id="3326330">r</span><span class="op" id="3326331">%</span><span class="num" id="3326332">1e9</span><span class="op" id="3326335">)</span><span class="op" id="3326336">)</span><span class="op" id="3326337">[</span><span class="num" id="3326338">1</span><span class="op" id="3326339">:</span><span class="op" id="3326340">]</span><br>
<span class="lineno"></span><span class="op" id="3326342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3326345">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3326407">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3326472">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3326524">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3326591">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3326632">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3326685">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3326748">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3326820">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3326865">func</span>&nbsp;<span class="ident" id="3326870">TempFile</span><span class="op" id="3326878">(</span><span class="ident" id="3326879">dir</span><span class="op" id="3326882">,</span>&nbsp;<span class="ident" id="3326884">prefix</span>&nbsp;<span class="builtintype" id="3326891">string</span><span class="op" id="3326897">)</span>&nbsp;<span class="op" id="3326899">(</span><span class="ident" id="3326900">f</span>&nbsp;<span class="op" id="3326902">*</span><span class="ident" id="3326903">os</span><span class="op" id="3326905">.</span><span class="ident" id="3326906">File</span><span class="op" id="3326910">,</span>&nbsp;<span class="ident" id="3326912">err</span>&nbsp;<span class="builtintype" id="3326916">error</span><span class="op" id="3326921">)</span>&nbsp;<span class="op" id="3326923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3326926">if</span>&nbsp;<span class="ident" id="3326929">dir</span>&nbsp;<span class="op" id="3326933">==</span>&nbsp;<span class="string" id="3326936">&#34;&#34;</span>&nbsp;<span class="op" id="3326939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326943">dir</span>&nbsp;<span class="op" id="3326947">=</span>&nbsp;<span class="ident" id="3326949">os</span><span class="op" id="3326951">.</span><span class="ident" id="3326952">TempDir</span><span class="op" id="3326959">(</span><span class="op" id="3326960">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3326963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326967">nconflict</span>&nbsp;<span class="op" id="3326977">:=</span>&nbsp;<span class="num" id="3326980">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3326983">for</span>&nbsp;<span class="ident" id="3326987">i</span>&nbsp;<span class="op" id="3326989">:=</span>&nbsp;<span class="num" id="3326992">0</span><span class="op" id="3326993">;</span>&nbsp;<span class="ident" id="3326995">i</span>&nbsp;<span class="op" id="3326997">&lt;</span>&nbsp;<span class="num" id="3326999">10000</span><span class="op" id="3327004">;</span>&nbsp;<span class="ident" id="3327006">i</span><span class="op" id="3327007">++</span>&nbsp;<span class="op" id="3327010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327014">name</span>&nbsp;<span class="op" id="3327019">:=</span>&nbsp;<span class="ident" id="3327022">filepath</span><span class="op" id="3327030">.</span><span class="ident" id="3327031">Join</span><span class="op" id="3327035">(</span><span class="ident" id="3327036">dir</span><span class="op" id="3327039">,</span>&nbsp;<span class="ident" id="3327041">prefix</span><span class="op" id="3327047">+</span><span class="ident" id="3327048">nextSuffix</span><span class="op" id="3327058">(</span><span class="op" id="3327059">)</span><span class="op" id="3327060">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327064">f</span><span class="op" id="3327065">,</span>&nbsp;<span class="ident" id="3327067">err</span>&nbsp;<span class="op" id="3327071">=</span>&nbsp;<span class="ident" id="3327073">os</span><span class="op" id="3327075">.</span><span class="ident" id="3327076">OpenFile</span><span class="op" id="3327084">(</span><span class="ident" id="3327085">name</span><span class="op" id="3327089">,</span>&nbsp;<span class="ident" id="3327091">os</span><span class="op" id="3327093">.</span><span class="ident" id="3327094">O_RDWR</span><span class="op" id="3327100">|</span><span class="ident" id="3327101">os</span><span class="op" id="3327103">.</span><span class="ident" id="3327104">O_CREATE</span><span class="op" id="3327112">|</span><span class="ident" id="3327113">os</span><span class="op" id="3327115">.</span><span class="ident" id="3327116">O_EXCL</span><span class="op" id="3327122">,</span>&nbsp;<span class="num" id="3327124">0600</span><span class="op" id="3327128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327132">if</span>&nbsp;<span class="ident" id="3327135">os</span><span class="op" id="3327137">.</span><span class="ident" id="3327138">IsExist</span><span class="op" id="3327145">(</span><span class="ident" id="3327146">err</span><span class="op" id="3327149">)</span>&nbsp;<span class="op" id="3327151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327156">if</span>&nbsp;<span class="ident" id="3327159">nconflict</span><span class="op" id="3327168">++</span><span class="op" id="3327170">;</span>&nbsp;<span class="ident" id="3327172">nconflict</span>&nbsp;<span class="op" id="3327182">&gt;</span>&nbsp;<span class="num" id="3327184">10</span>&nbsp;<span class="op" id="3327187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327193">rand</span>&nbsp;<span class="op" id="3327198">=</span>&nbsp;<span class="ident" id="3327200">reseed</span><span class="op" id="3327206">(</span><span class="op" id="3327207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3327212">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327217">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3327228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327232">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3327239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327242">return</span><br>
<span class="lineno">65</span><span class="op" id="3327249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3327252">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3327318">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3327383">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3327447">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3327506">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3327558">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3327632">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3327682">func</span>&nbsp;<span class="ident" id="3327687">TempDir</span><span class="op" id="3327694">(</span><span class="ident" id="3327695">dir</span><span class="op" id="3327698">,</span>&nbsp;<span class="ident" id="3327700">prefix</span>&nbsp;<span class="builtintype" id="3327707">string</span><span class="op" id="3327713">)</span>&nbsp;<span class="op" id="3327715">(</span><span class="ident" id="3327716">name</span>&nbsp;<span class="builtintype" id="3327721">string</span><span class="op" id="3327727">,</span>&nbsp;<span class="ident" id="3327729">err</span>&nbsp;<span class="builtintype" id="3327733">error</span><span class="op" id="3327738">)</span>&nbsp;<span class="op" id="3327740">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327743">if</span>&nbsp;<span class="ident" id="3327746">dir</span>&nbsp;<span class="op" id="3327750">==</span>&nbsp;<span class="string" id="3327753">&#34;&#34;</span>&nbsp;<span class="op" id="3327756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327760">dir</span>&nbsp;<span class="op" id="3327764">=</span>&nbsp;<span class="ident" id="3327766">os</span><span class="op" id="3327768">.</span><span class="ident" id="3327769">TempDir</span><span class="op" id="3327776">(</span><span class="op" id="3327777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3327780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327784">nconflict</span>&nbsp;<span class="op" id="3327794">:=</span>&nbsp;<span class="num" id="3327797">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327800">for</span>&nbsp;<span class="ident" id="3327804">i</span>&nbsp;<span class="op" id="3327806">:=</span>&nbsp;<span class="num" id="3327809">0</span><span class="op" id="3327810">;</span>&nbsp;<span class="ident" id="3327812">i</span>&nbsp;<span class="op" id="3327814">&lt;</span>&nbsp;<span class="num" id="3327816">10000</span><span class="op" id="3327821">;</span>&nbsp;<span class="ident" id="3327823">i</span><span class="op" id="3327824">++</span>&nbsp;<span class="op" id="3327827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327831">try</span>&nbsp;<span class="op" id="3327835">:=</span>&nbsp;<span class="ident" id="3327838">filepath</span><span class="op" id="3327846">.</span><span class="ident" id="3327847">Join</span><span class="op" id="3327851">(</span><span class="ident" id="3327852">dir</span><span class="op" id="3327855">,</span>&nbsp;<span class="ident" id="3327857">prefix</span><span class="op" id="3327863">+</span><span class="ident" id="3327864">nextSuffix</span><span class="op" id="3327874">(</span><span class="op" id="3327875">)</span><span class="op" id="3327876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327880">err</span>&nbsp;<span class="op" id="3327884">=</span>&nbsp;<span class="ident" id="3327886">os</span><span class="op" id="3327888">.</span><span class="ident" id="3327889">Mkdir</span><span class="op" id="3327894">(</span><span class="ident" id="3327895">try</span><span class="op" id="3327898">,</span>&nbsp;<span class="num" id="3327900">0700</span><span class="op" id="3327904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327908">if</span>&nbsp;<span class="ident" id="3327911">os</span><span class="op" id="3327913">.</span><span class="ident" id="3327914">IsExist</span><span class="op" id="3327921">(</span><span class="ident" id="3327922">err</span><span class="op" id="3327925">)</span>&nbsp;<span class="op" id="3327927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327932">if</span>&nbsp;<span class="ident" id="3327935">nconflict</span><span class="op" id="3327944">++</span><span class="op" id="3327946">;</span>&nbsp;<span class="ident" id="3327948">nconflict</span>&nbsp;<span class="op" id="3327958">&gt;</span>&nbsp;<span class="num" id="3327960">10</span>&nbsp;<span class="op" id="3327963">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327969">rand</span>&nbsp;<span class="op" id="3327974">=</span>&nbsp;<span class="ident" id="3327976">reseed</span><span class="op" id="3327982">(</span><span class="op" id="3327983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3327988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3327993">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3328004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3328008">if</span>&nbsp;<span class="ident" id="3328011">err</span>&nbsp;<span class="op" id="3328015">==</span>&nbsp;<span class="builtintype" id="3328018">nil</span>&nbsp;<span class="op" id="3328022">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328027">name</span>&nbsp;<span class="op" id="3328032">=</span>&nbsp;<span class="ident" id="3328034">try</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3328040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3328044">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3328051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3328054">return</span><br>
<span class="lineno">95</span><span class="op" id="3328061">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
