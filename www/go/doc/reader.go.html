<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6006210">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6006265">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6006319">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6006370">package</span>&nbsp;<span class="ident" id="6006378">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6006383">import</span>&nbsp;<span class="op" id="6006390">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6006393">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6006403">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6006415">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6006425">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6006433">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="6006443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6006446">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6006526">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="6006550">//</span><br>
<span class="lineno"></span><span class="comment" id="6006553">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6006634">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="6006716">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="6006798">//</span><br>
<span class="lineno"></span><span class="keyword" id="6006801">type</span>&nbsp;<span class="ident" id="6006806">methodSet</span>&nbsp;<span class="keyword" id="6006816">map</span><span class="op" id="6006819">[</span><span class="builtintype" id="6006820">string</span><span class="op" id="6006826">]</span><span class="op" id="6006827">*</span><span class="ident" id="6006828"><a href="/go/doc/doc.go.html#5986489">Func</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6006834">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6006895">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="6006960">//</span><br>
<span class="lineno"></span><span class="keyword" id="6006963">func</span>&nbsp;<span class="ident" id="6006968">recvString</span><span class="op" id="6006978">(</span><span class="ident" id="6006979">recv</span>&nbsp;<span class="ident" id="6006984"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6006987">.</span><span class="ident" id="6006988">Expr</span><span class="op" id="6006992">)</span>&nbsp;<span class="builtintype" id="6006994">string</span>&nbsp;<span class="op" id="6007001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007004">switch</span>&nbsp;<span class="ident" id="6007011">t</span>&nbsp;<span class="op" id="6007013">:=</span>&nbsp;<span class="ident" id="6007016"><a href="/go/doc/reader.go.html#6006979">recv</a></span><span class="op" id="6007020">.</span><span class="op" id="6007021">(</span><span class="keyword" id="6007022">type</span><span class="op" id="6007026">)</span>&nbsp;<span class="op" id="6007028">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007031">case</span>&nbsp;<span class="op" id="6007036">*</span><span class="ident" id="6007037"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6007040">.</span><span class="ident" id="6007041">Ident</span><span class="op" id="6007046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007050">return</span>&nbsp;<span class="ident" id="6007057"><a href="/go/doc/reader.go.html#6007011">t</a></span><span class="op" id="6007058">.</span><span class="ident" id="6007059">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007065">case</span>&nbsp;<span class="op" id="6007070">*</span><span class="ident" id="6007071"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6007074">.</span><span class="ident" id="6007075">StarExpr</span><span class="op" id="6007083">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007087">return</span>&nbsp;<span class="string" id="6007094">&#34;*&#34;</span>&nbsp;<span class="op" id="6007098">+</span>&nbsp;<span class="ident" id="6007100"><a href="/go/doc/reader.go.html#6006968">recvString</a></span><span class="op" id="6007110">(</span><span class="ident" id="6007111"><a href="/go/doc/reader.go.html#6007011">t</a></span><span class="op" id="6007112">.</span><span class="ident" id="6007113">X</span><span class="op" id="6007114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6007117">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007120">return</span>&nbsp;<span class="string" id="6007127">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="6007137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6007140">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6007205">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="6007274">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6007324">//</span><br>
<span class="lineno"></span><span class="keyword" id="6007327">func</span>&nbsp;<span class="op" id="6007332">(</span><span class="ident" id="6007333">mset</span>&nbsp;<span class="ident" id="6007338"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6007347">)</span>&nbsp;<span class="ident" id="6007349">set</span><span class="op" id="6007352">(</span><span class="ident" id="6007353">f</span>&nbsp;<span class="op" id="6007355">*</span><span class="ident" id="6007356"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6007359">.</span><span class="ident" id="6007360">FuncDecl</span><span class="op" id="6007368">)</span>&nbsp;<span class="op" id="6007370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6007373">name</span>&nbsp;<span class="op" id="6007378">:=</span>&nbsp;<span class="ident" id="6007381"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6007382">.</span><span class="ident" id="6007383">Name</span><span class="op" id="6007387">.</span><span class="ident" id="6007388">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007394">if</span>&nbsp;<span class="ident" id="6007397">g</span>&nbsp;<span class="op" id="6007399">:=</span>&nbsp;<span class="ident" id="6007402"><a href="/go/doc/reader.go.html#6007333">mset</a></span><span class="op" id="6007406">[</span><span class="ident" id="6007407"><a href="/go/doc/reader.go.html#6007373">name</a></span><span class="op" id="6007411">]</span><span class="op" id="6007412">;</span>&nbsp;<span class="ident" id="6007414"><a href="/go/doc/reader.go.html#6007397">g</a></span>&nbsp;<span class="op" id="6007416">!=</span>&nbsp;<span class="ident" id="6007419">nil</span>&nbsp;<span class="op" id="6007423">&amp;&amp;</span>&nbsp;<span class="ident" id="6007426"><a href="/go/doc/reader.go.html#6007397">g</a></span><span class="op" id="6007427">.</span><span class="ident" id="6007428">Doc</span>&nbsp;<span class="op" id="6007432">!=</span>&nbsp;<span class="string" id="6007435">&#34;&#34;</span>&nbsp;<span class="op" id="6007438">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007442">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007506">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007566">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007629">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007692">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007727">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6007735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007738">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6007796">recv</span>&nbsp;<span class="op" id="6007801">:=</span>&nbsp;<span class="string" id="6007804">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007808">if</span>&nbsp;<span class="ident" id="6007811"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6007812">.</span><span class="ident" id="6007813">Recv</span>&nbsp;<span class="op" id="6007818">!=</span>&nbsp;<span class="ident" id="6007821">nil</span>&nbsp;<span class="op" id="6007825">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007829">var</span>&nbsp;<span class="ident" id="6007833">typ</span>&nbsp;<span class="ident" id="6007837"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6007840">.</span><span class="ident" id="6007841">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6007848">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6007890">if</span>&nbsp;<span class="ident" id="6007893">list</span>&nbsp;<span class="op" id="6007898">:=</span>&nbsp;<span class="ident" id="6007901"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6007902">.</span><span class="ident" id="6007903">Recv</span><span class="op" id="6007907">.</span><span class="ident" id="6007908">List</span><span class="op" id="6007912">;</span>&nbsp;<span class="builtinfunc" id="6007914">len</span><span class="op" id="6007917">(</span><span class="ident" id="6007918"><a href="/go/doc/reader.go.html#6007893">list</a></span><span class="op" id="6007922">)</span>&nbsp;<span class="op" id="6007924">==</span>&nbsp;<span class="num" id="6007927">1</span>&nbsp;<span class="op" id="6007929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6007934"><a href="/go/doc/reader.go.html#6007833">typ</a></span>&nbsp;<span class="op" id="6007938">=</span>&nbsp;<span class="ident" id="6007940"><a href="/go/doc/reader.go.html#6007893">list</a></span><span class="op" id="6007944">[</span><span class="num" id="6007945">0</span><span class="op" id="6007946">]</span><span class="op" id="6007947">.</span><span class="ident" id="6007948">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6007955">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6007959"><a href="/go/doc/reader.go.html#6007796">recv</a></span>&nbsp;<span class="op" id="6007964">=</span>&nbsp;<span class="ident" id="6007966"><a href="/go/doc/reader.go.html#6006968">recvString</a></span><span class="op" id="6007976">(</span><span class="ident" id="6007977"><a href="/go/doc/reader.go.html#6007833">typ</a></span><span class="op" id="6007980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6007983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6007986"><a href="/go/doc/reader.go.html#6007333">mset</a></span><span class="op" id="6007990">[</span><span class="ident" id="6007991"><a href="/go/doc/reader.go.html#6007373">name</a></span><span class="op" id="6007995">]</span>&nbsp;<span class="op" id="6007997">=</span>&nbsp;<span class="op" id="6007999">&amp;</span><span class="ident" id="6008000"><a href="/go/doc/doc.go.html#5986489">Func</a></span><span class="op" id="6008004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008008">Doc</span><span class="op" id="6008011">:</span>&nbsp;&nbsp;<span class="ident" id="6008014"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6008015">.</span><span class="ident" id="6008016">Doc</span><span class="op" id="6008019">.</span><span class="ident" id="6008020">Text</span><span class="op" id="6008024">(</span><span class="op" id="6008025">)</span><span class="op" id="6008026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008030">Name</span><span class="op" id="6008034">:</span>&nbsp;<span class="ident" id="6008036"><a href="/go/doc/reader.go.html#6007373">name</a></span><span class="op" id="6008040">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008044">Decl</span><span class="op" id="6008048">:</span>&nbsp;<span class="ident" id="6008050"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6008051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008055">Recv</span><span class="op" id="6008059">:</span>&nbsp;<span class="ident" id="6008061"><a href="/go/doc/reader.go.html#6007796">recv</a></span><span class="op" id="6008065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008069">Orig</span><span class="op" id="6008073">:</span>&nbsp;<span class="ident" id="6008075"><a href="/go/doc/reader.go.html#6007796">recv</a></span><span class="op" id="6008079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6008082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008085"><a href="/go/doc/reader.go.html#6007353">f</a></span><span class="op" id="6008086">.</span><span class="ident" id="6008087">Doc</span>&nbsp;<span class="op" id="6008091">=</span>&nbsp;<span class="ident" id="6008093">nil</span>&nbsp;<span class="comment" id="6008097">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="6008131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6008134">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="6008205">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="6008277">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="6008294">//</span><br>
<span class="lineno"></span><span class="keyword" id="6008297">func</span>&nbsp;<span class="op" id="6008302">(</span><span class="ident" id="6008303">mset</span>&nbsp;<span class="ident" id="6008308"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6008317">)</span>&nbsp;<span class="ident" id="6008319">add</span><span class="op" id="6008322">(</span><span class="ident" id="6008323">m</span>&nbsp;<span class="op" id="6008325">*</span><span class="ident" id="6008326"><a href="/go/doc/doc.go.html#5986489">Func</a></span><span class="op" id="6008330">)</span>&nbsp;<span class="op" id="6008332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008335">old</span>&nbsp;<span class="op" id="6008339">:=</span>&nbsp;<span class="ident" id="6008342"><a href="/go/doc/reader.go.html#6008303">mset</a></span><span class="op" id="6008346">[</span><span class="ident" id="6008347"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008348">.</span><span class="ident" id="6008349">Name</span><span class="op" id="6008353">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008356">if</span>&nbsp;<span class="ident" id="6008359"><a href="/go/doc/reader.go.html#6008335">old</a></span>&nbsp;<span class="op" id="6008363">==</span>&nbsp;<span class="ident" id="6008366">nil</span>&nbsp;<span class="op" id="6008370">||</span>&nbsp;<span class="ident" id="6008373"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008374">.</span><span class="ident" id="6008375">Level</span>&nbsp;<span class="op" id="6008381">&lt;</span>&nbsp;<span class="ident" id="6008383"><a href="/go/doc/reader.go.html#6008335">old</a></span><span class="op" id="6008386">.</span><span class="ident" id="6008387">Level</span>&nbsp;<span class="op" id="6008393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008397"><a href="/go/doc/reader.go.html#6008303">mset</a></span><span class="op" id="6008401">[</span><span class="ident" id="6008402"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008403">.</span><span class="ident" id="6008404">Name</span><span class="op" id="6008408">]</span>&nbsp;<span class="op" id="6008410">=</span>&nbsp;<span class="ident" id="6008412"><a href="/go/doc/reader.go.html#6008323">m</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008416">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6008424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008427">if</span>&nbsp;<span class="ident" id="6008430"><a href="/go/doc/reader.go.html#6008335">old</a></span>&nbsp;<span class="op" id="6008434">!=</span>&nbsp;<span class="ident" id="6008437">nil</span>&nbsp;<span class="op" id="6008441">&amp;&amp;</span>&nbsp;<span class="ident" id="6008444"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008445">.</span><span class="ident" id="6008446">Level</span>&nbsp;<span class="op" id="6008452">==</span>&nbsp;<span class="ident" id="6008455"><a href="/go/doc/reader.go.html#6008335">old</a></span><span class="op" id="6008458">.</span><span class="ident" id="6008459">Level</span>&nbsp;<span class="op" id="6008465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6008469">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008522"><a href="/go/doc/reader.go.html#6008303">mset</a></span><span class="op" id="6008526">[</span><span class="ident" id="6008527"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008528">.</span><span class="ident" id="6008529">Name</span><span class="op" id="6008533">]</span>&nbsp;<span class="op" id="6008535">=</span>&nbsp;<span class="op" id="6008537">&amp;</span><span class="ident" id="6008538"><a href="/go/doc/doc.go.html#5986489">Func</a></span><span class="op" id="6008542">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008547">Name</span><span class="op" id="6008551">:</span>&nbsp;&nbsp;<span class="ident" id="6008554"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008555">.</span><span class="ident" id="6008556">Name</span><span class="op" id="6008560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6008565">Level</span><span class="op" id="6008570">:</span>&nbsp;<span class="ident" id="6008572"><a href="/go/doc/reader.go.html#6008323">m</a></span><span class="op" id="6008573">.</span><span class="ident" id="6008574">Level</span><span class="op" id="6008579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6008583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6008586">}</span><br>
<span class="lineno"></span><span class="op" id="6008588">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="6008591">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6008671">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6008687">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="6008750">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="6008794">//</span><br>
<span class="lineno"></span><span class="keyword" id="6008797">func</span>&nbsp;<span class="ident" id="6008802">baseTypeName</span><span class="op" id="6008814">(</span><span class="ident" id="6008815">x</span>&nbsp;<span class="ident" id="6008817"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6008820">.</span><span class="ident" id="6008821">Expr</span><span class="op" id="6008825">)</span>&nbsp;<span class="op" id="6008827">(</span><span class="ident" id="6008828">name</span>&nbsp;<span class="builtintype" id="6008833">string</span><span class="op" id="6008839">,</span>&nbsp;<span class="ident" id="6008841">imported</span>&nbsp;<span class="builtintype" id="6008850">bool</span><span class="op" id="6008854">)</span>&nbsp;<span class="op" id="6008856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008859">switch</span>&nbsp;<span class="ident" id="6008866">t</span>&nbsp;<span class="op" id="6008868">:=</span>&nbsp;<span class="ident" id="6008871"><a href="/go/doc/reader.go.html#6008815">x</a></span><span class="op" id="6008872">.</span><span class="op" id="6008873">(</span><span class="keyword" id="6008874">type</span><span class="op" id="6008878">)</span>&nbsp;<span class="op" id="6008880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008883">case</span>&nbsp;<span class="op" id="6008888">*</span><span class="ident" id="6008889"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6008892">.</span><span class="ident" id="6008893">Ident</span><span class="op" id="6008898">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008902">return</span>&nbsp;<span class="ident" id="6008909"><a href="/go/doc/reader.go.html#6008866">t</a></span><span class="op" id="6008910">.</span><span class="ident" id="6008911">Name</span><span class="op" id="6008915">,</span>&nbsp;<span class="ident" id="6008917">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008924">case</span>&nbsp;<span class="op" id="6008929">*</span><span class="ident" id="6008930"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6008933">.</span><span class="ident" id="6008934">SelectorExpr</span><span class="op" id="6008946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6008950">if</span>&nbsp;<span class="ident" id="6008953">_</span><span class="op" id="6008954">,</span>&nbsp;<span class="ident" id="6008956">ok</span>&nbsp;<span class="op" id="6008959">:=</span>&nbsp;<span class="ident" id="6008962"><a href="/go/doc/reader.go.html#6008866">t</a></span><span class="op" id="6008963">.</span><span class="ident" id="6008964">X</span><span class="op" id="6008965">.</span><span class="op" id="6008966">(</span><span class="op" id="6008967">*</span><span class="ident" id="6008968"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6008971">.</span><span class="ident" id="6008972">Ident</span><span class="op" id="6008977">)</span><span class="op" id="6008978">;</span>&nbsp;<span class="ident" id="6008980"><a href="/go/doc/reader.go.html#6008956">ok</a></span>&nbsp;<span class="op" id="6008983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6008988">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6009034">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6009064">return</span>&nbsp;<span class="ident" id="6009071"><a href="/go/doc/reader.go.html#6008866">t</a></span><span class="op" id="6009072">.</span><span class="ident" id="6009073">Sel</span><span class="op" id="6009076">.</span><span class="ident" id="6009077">Name</span><span class="op" id="6009081">,</span>&nbsp;<span class="ident" id="6009083">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6009090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6009093">case</span>&nbsp;<span class="op" id="6009098">*</span><span class="ident" id="6009099"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6009102">.</span><span class="ident" id="6009103">StarExpr</span><span class="op" id="6009111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6009115">return</span>&nbsp;<span class="ident" id="6009122"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="6009134">(</span><span class="ident" id="6009135"><a href="/go/doc/reader.go.html#6008866">t</a></span><span class="op" id="6009136">.</span><span class="ident" id="6009137">X</span><span class="op" id="6009138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6009141">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6009144">return</span><br>
<span class="lineno"></span><span class="op" id="6009151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6009154">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="6009207">type</span>&nbsp;<span class="ident" id="6009212">embeddedSet</span>&nbsp;<span class="keyword" id="6009224">map</span><span class="op" id="6009227">[</span><span class="op" id="6009228">*</span><span class="ident" id="6009229"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6009238">]</span><span class="builtintype" id="6009239">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="6009245">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="6009319">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="6009391">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="6009413">//</span><br>
<span class="lineno">120</span><span class="keyword" id="6009416">type</span>&nbsp;<span class="ident" id="6009421">namedType</span>&nbsp;<span class="keyword" id="6009431">struct</span>&nbsp;<span class="op" id="6009438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009441">doc</span>&nbsp;&nbsp;<span class="builtintype" id="6009446">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009459">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009484">name</span>&nbsp;<span class="builtintype" id="6009489">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009502">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009516">decl</span>&nbsp;<span class="op" id="6009521">*</span><span class="ident" id="6009522"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6009525">.</span><span class="ident" id="6009526">GenDecl</span>&nbsp;<span class="comment" id="6009534">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009579">isEmbedded</span>&nbsp;<span class="builtintype" id="6009590">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009602">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009636">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6009647">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009659">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009693">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6009704"><a href="/go/doc/reader.go.html#6009212">embeddedSet</a></span>&nbsp;<span class="comment" id="6009716">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6009760">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009788">values</span>&nbsp;&nbsp;<span class="op" id="6009796">[</span><span class="op" id="6009797">]</span><span class="op" id="6009798">*</span><span class="ident" id="6009799"><a href="/go/doc/doc.go.html#5985874">Value</a></span>&nbsp;<span class="comment" id="6009805">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009825">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6009833"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6009844">methods</span>&nbsp;<span class="ident" id="6009852"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><br>
<span class="lineno"></span><span class="op" id="6009862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="6009865">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6009945">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6009960">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="6010018">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="6010079">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="6010136">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="6010196">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6010257">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="6010298">//</span><br>
<span class="lineno">145</span><span class="keyword" id="6010301">type</span>&nbsp;<span class="ident" id="6010306">reader</span>&nbsp;<span class="keyword" id="6010313">struct</span>&nbsp;<span class="op" id="6010320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010323">mode</span>&nbsp;<span class="ident" id="6010328"><a href="/go/doc/doc.go.html#5987325">Mode</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6010335">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010358">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6010368">string</span>&nbsp;<span class="comment" id="6010375">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010409">filenames</span>&nbsp;<span class="op" id="6010419">[</span><span class="op" id="6010420">]</span><span class="builtintype" id="6010421">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010429">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010439">map</span><span class="op" id="6010442">[</span><span class="builtintype" id="6010443">string</span><span class="op" id="6010449">]</span><span class="op" id="6010450">[</span><span class="op" id="6010451">]</span><span class="op" id="6010452">*</span><span class="ident" id="6010453"><a href="/go/doc/doc.go.html#5987096">Note</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6010460">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010477">imports</span>&nbsp;<span class="keyword" id="6010485">map</span><span class="op" id="6010488">[</span><span class="builtintype" id="6010489">string</span><span class="op" id="6010495">]</span><span class="builtintype" id="6010496">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010501">values</span>&nbsp;&nbsp;<span class="op" id="6010509">[</span><span class="op" id="6010510">]</span><span class="op" id="6010511">*</span><span class="ident" id="6010512"><a href="/go/doc/doc.go.html#5985874">Value</a></span>&nbsp;<span class="comment" id="6010518">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010538">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010546">map</span><span class="op" id="6010549">[</span><span class="builtintype" id="6010550">string</span><span class="op" id="6010556">]</span><span class="op" id="6010557">*</span><span class="ident" id="6010558"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010569">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6010577"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6010589">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010643">errorDecl</span>&nbsp;<span class="builtintype" id="6010653">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6010674">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6010720">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6010730">[</span><span class="op" id="6010731">]</span><span class="op" id="6010732">*</span><span class="ident" id="6010733"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6010736">.</span><span class="ident" id="6010737">InterfaceType</span>&nbsp;<span class="comment" id="6010751">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="6010808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6010811">func</span>&nbsp;<span class="op" id="6010816">(</span><span class="ident" id="6010817">r</span>&nbsp;<span class="op" id="6010819">*</span><span class="ident" id="6010820"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6010826">)</span>&nbsp;<span class="ident" id="6010828">isVisible</span><span class="op" id="6010837">(</span><span class="ident" id="6010838">name</span>&nbsp;<span class="builtintype" id="6010843">string</span><span class="op" id="6010849">)</span>&nbsp;<span class="builtintype" id="6010851">bool</span>&nbsp;<span class="op" id="6010856">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6010859">return</span>&nbsp;<span class="ident" id="6010866"><a href="/go/doc/reader.go.html#6010817">r</a></span><span class="op" id="6010867">.</span><span class="ident" id="6010868">mode</span><span class="op" id="6010872">&amp;</span><span class="ident" id="6010873"><a href="/go/doc/doc.go.html#5987433">AllDecls</a></span>&nbsp;<span class="op" id="6010882">!=</span>&nbsp;<span class="num" id="6010885">0</span>&nbsp;<span class="op" id="6010887">||</span>&nbsp;<span class="ident" id="6010890"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6010893">.</span><span class="ident" id="6010894">IsExported</span><span class="op" id="6010904">(</span><span class="ident" id="6010905"><a href="/go/doc/reader.go.html#6010838">name</a></span><span class="op" id="6010909">)</span><br>
<span class="lineno"></span><span class="op" id="6010911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6010914">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="6010971">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="6011027">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="6011085">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="6011114">//</span><br>
<span class="lineno"></span><span class="keyword" id="6011117">func</span>&nbsp;<span class="op" id="6011122">(</span><span class="ident" id="6011123">r</span>&nbsp;<span class="op" id="6011125">*</span><span class="ident" id="6011126"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6011132">)</span>&nbsp;<span class="ident" id="6011134">lookupType</span><span class="op" id="6011144">(</span><span class="ident" id="6011145">name</span>&nbsp;<span class="builtintype" id="6011150">string</span><span class="op" id="6011156">)</span>&nbsp;<span class="op" id="6011158">*</span><span class="ident" id="6011159"><a href="/go/doc/reader.go.html#6009421">namedType</a></span>&nbsp;<span class="op" id="6011169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011172">if</span>&nbsp;<span class="ident" id="6011175"><a href="/go/doc/reader.go.html#6011145">name</a></span>&nbsp;<span class="op" id="6011180">==</span>&nbsp;<span class="string" id="6011183">&#34;&#34;</span>&nbsp;<span class="op" id="6011186">||</span>&nbsp;<span class="ident" id="6011189"><a href="/go/doc/reader.go.html#6011145">name</a></span>&nbsp;<span class="op" id="6011194">==</span>&nbsp;<span class="string" id="6011197">&#34;_&#34;</span>&nbsp;<span class="op" id="6011201">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011205">return</span>&nbsp;<span class="ident" id="6011212">nil</span>&nbsp;<span class="comment" id="6011216">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6011253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011256">if</span>&nbsp;<span class="ident" id="6011259">typ</span><span class="op" id="6011262">,</span>&nbsp;<span class="ident" id="6011264">found</span>&nbsp;<span class="op" id="6011270">:=</span>&nbsp;<span class="ident" id="6011273"><a href="/go/doc/reader.go.html#6011123">r</a></span><span class="op" id="6011274">.</span><span class="ident" id="6011275">types</span><span class="op" id="6011280">[</span><span class="ident" id="6011281"><a href="/go/doc/reader.go.html#6011145">name</a></span><span class="op" id="6011285">]</span><span class="op" id="6011286">;</span>&nbsp;<span class="ident" id="6011288"><a href="/go/doc/reader.go.html#6011264">found</a></span>&nbsp;<span class="op" id="6011294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011298">return</span>&nbsp;<span class="ident" id="6011305"><a href="/go/doc/reader.go.html#6011259">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6011310">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6011313">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011362">typ</span>&nbsp;<span class="op" id="6011366">:=</span>&nbsp;<span class="op" id="6011369">&amp;</span><span class="ident" id="6011370"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6011379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011383">name</span><span class="op" id="6011387">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011393"><a href="/go/doc/reader.go.html#6011145">name</a></span><span class="op" id="6011397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011401">embedded</span><span class="op" id="6011409">:</span>&nbsp;<span class="builtinfunc" id="6011411">make</span><span class="op" id="6011415">(</span><span class="ident" id="6011416"><a href="/go/doc/reader.go.html#6009212">embeddedSet</a></span><span class="op" id="6011427">)</span><span class="op" id="6011428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011432">funcs</span><span class="op" id="6011437">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6011442">make</span><span class="op" id="6011446">(</span><span class="ident" id="6011447"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6011456">)</span><span class="op" id="6011457">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011461">methods</span><span class="op" id="6011468">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="6011471">make</span><span class="op" id="6011475">(</span><span class="ident" id="6011476"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6011485">)</span><span class="op" id="6011486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6011489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011492"><a href="/go/doc/reader.go.html#6011123">r</a></span><span class="op" id="6011493">.</span><span class="ident" id="6011494">types</span><span class="op" id="6011499">[</span><span class="ident" id="6011500"><a href="/go/doc/reader.go.html#6011145">name</a></span><span class="op" id="6011504">]</span>&nbsp;<span class="op" id="6011506">=</span>&nbsp;<span class="ident" id="6011508"><a href="/go/doc/reader.go.html#6011362">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011513">return</span>&nbsp;<span class="ident" id="6011520"><a href="/go/doc/reader.go.html#6011362">typ</a></span><br>
<span class="lineno"></span><span class="op" id="6011524">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6011527">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6011589">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="6011653">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6011717">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="6011757">//</span><br>
<span class="lineno"></span><span class="keyword" id="6011760">func</span>&nbsp;<span class="op" id="6011765">(</span><span class="ident" id="6011766">r</span>&nbsp;<span class="op" id="6011768">*</span><span class="ident" id="6011769"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6011775">)</span>&nbsp;<span class="ident" id="6011777">recordAnonymousField</span><span class="op" id="6011797">(</span><span class="ident" id="6011798">parent</span>&nbsp;<span class="op" id="6011805">*</span><span class="ident" id="6011806"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6011815">,</span>&nbsp;<span class="ident" id="6011817">fieldType</span>&nbsp;<span class="ident" id="6011827"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6011830">.</span><span class="ident" id="6011831">Expr</span><span class="op" id="6011835">)</span>&nbsp;<span class="op" id="6011837">(</span><span class="ident" id="6011838">fname</span>&nbsp;<span class="builtintype" id="6011844">string</span><span class="op" id="6011850">)</span>&nbsp;<span class="op" id="6011852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011855"><a href="/go/doc/reader.go.html#6011838">fname</a></span><span class="op" id="6011860">,</span>&nbsp;<span class="ident" id="6011862">imp</span>&nbsp;<span class="op" id="6011866">:=</span>&nbsp;<span class="ident" id="6011869"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="6011881">(</span><span class="ident" id="6011882"><a href="/go/doc/reader.go.html#6011817">fieldType</a></span><span class="op" id="6011891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011894">if</span>&nbsp;<span class="ident" id="6011897"><a href="/go/doc/reader.go.html#6011798">parent</a></span>&nbsp;<span class="op" id="6011904">==</span>&nbsp;<span class="ident" id="6011907">nil</span>&nbsp;<span class="op" id="6011911">||</span>&nbsp;<span class="ident" id="6011914"><a href="/go/doc/reader.go.html#6011862">imp</a></span>&nbsp;<span class="op" id="6011918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011922">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6011930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6011933">if</span>&nbsp;<span class="ident" id="6011936">ftype</span>&nbsp;<span class="op" id="6011942">:=</span>&nbsp;<span class="ident" id="6011945"><a href="/go/doc/reader.go.html#6011766">r</a></span><span class="op" id="6011946">.</span><span class="ident" id="6011947">lookupType</span><span class="op" id="6011957">(</span><span class="ident" id="6011958"><a href="/go/doc/reader.go.html#6011838">fname</a></span><span class="op" id="6011963">)</span><span class="op" id="6011964">;</span>&nbsp;<span class="ident" id="6011966"><a href="/go/doc/reader.go.html#6011936">ftype</a></span>&nbsp;<span class="op" id="6011972">!=</span>&nbsp;<span class="ident" id="6011975">nil</span>&nbsp;<span class="op" id="6011979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6011983"><a href="/go/doc/reader.go.html#6011936">ftype</a></span><span class="op" id="6011988">.</span><span class="ident" id="6011989">isEmbedded</span>&nbsp;<span class="op" id="6012000">=</span>&nbsp;<span class="ident" id="6012002">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012009">_</span><span class="op" id="6012010">,</span>&nbsp;<span class="ident" id="6012012">ptr</span>&nbsp;<span class="op" id="6012016">:=</span>&nbsp;<span class="ident" id="6012019"><a href="/go/doc/reader.go.html#6011817">fieldType</a></span><span class="op" id="6012028">.</span><span class="op" id="6012029">(</span><span class="op" id="6012030">*</span><span class="ident" id="6012031"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012034">.</span><span class="ident" id="6012035">StarExpr</span><span class="op" id="6012043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012047"><a href="/go/doc/reader.go.html#6011798">parent</a></span><span class="op" id="6012053">.</span><span class="ident" id="6012054">embedded</span><span class="op" id="6012062">[</span><span class="ident" id="6012063"><a href="/go/doc/reader.go.html#6011936">ftype</a></span><span class="op" id="6012068">]</span>&nbsp;<span class="op" id="6012070">=</span>&nbsp;<span class="ident" id="6012072"><a href="/go/doc/reader.go.html#6012012">ptr</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6012077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012080">return</span><br>
<span class="lineno"></span><span class="op" id="6012087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6012090">func</span>&nbsp;<span class="op" id="6012095">(</span><span class="ident" id="6012096">r</span>&nbsp;<span class="op" id="6012098">*</span><span class="ident" id="6012099"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6012105">)</span>&nbsp;<span class="ident" id="6012107">readDoc</span><span class="op" id="6012114">(</span><span class="ident" id="6012115">comment</span>&nbsp;<span class="op" id="6012123">*</span><span class="ident" id="6012124"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012127">.</span><span class="ident" id="6012128">CommentGroup</span><span class="op" id="6012140">)</span>&nbsp;<span class="op" id="6012142">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012145">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012204">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012260">text</span>&nbsp;<span class="op" id="6012265">:=</span>&nbsp;<span class="ident" id="6012268"><a href="/go/doc/reader.go.html#6012115">comment</a></span><span class="op" id="6012275">.</span><span class="ident" id="6012276">Text</span><span class="op" id="6012280">(</span><span class="op" id="6012281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012284">if</span>&nbsp;<span class="ident" id="6012287"><a href="/go/doc/reader.go.html#6012096">r</a></span><span class="op" id="6012288">.</span><span class="ident" id="6012289">doc</span>&nbsp;<span class="op" id="6012293">==</span>&nbsp;<span class="string" id="6012296">&#34;&#34;</span>&nbsp;<span class="op" id="6012299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012303"><a href="/go/doc/reader.go.html#6012096">r</a></span><span class="op" id="6012304">.</span><span class="ident" id="6012305">doc</span>&nbsp;<span class="op" id="6012309">=</span>&nbsp;<span class="ident" id="6012311"><a href="/go/doc/reader.go.html#6012260">text</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012318">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6012326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012329"><a href="/go/doc/reader.go.html#6012096">r</a></span><span class="op" id="6012330">.</span><span class="ident" id="6012331">doc</span>&nbsp;<span class="op" id="6012335">+=</span>&nbsp;<span class="string" id="6012338">&#34;\n&#34;</span>&nbsp;<span class="op" id="6012343">+</span>&nbsp;<span class="ident" id="6012345"><a href="/go/doc/reader.go.html#6012260">text</a></span><br>
<span class="lineno"></span><span class="op" id="6012350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6012353">func</span>&nbsp;<span class="op" id="6012358">(</span><span class="ident" id="6012359">r</span>&nbsp;<span class="op" id="6012361">*</span><span class="ident" id="6012362"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6012368">)</span>&nbsp;<span class="ident" id="6012370">remember</span><span class="op" id="6012378">(</span><span class="ident" id="6012379">typ</span>&nbsp;<span class="op" id="6012383">*</span><span class="ident" id="6012384"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012387">.</span><span class="ident" id="6012388">InterfaceType</span><span class="op" id="6012401">)</span>&nbsp;<span class="op" id="6012403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012406"><a href="/go/doc/reader.go.html#6012359">r</a></span><span class="op" id="6012407">.</span><span class="ident" id="6012408">fixlist</span>&nbsp;<span class="op" id="6012416">=</span>&nbsp;<span class="builtinfunc" id="6012418">append</span><span class="op" id="6012424">(</span><span class="ident" id="6012425"><a href="/go/doc/reader.go.html#6012359">r</a></span><span class="op" id="6012426">.</span><span class="ident" id="6012427">fixlist</span><span class="op" id="6012434">,</span>&nbsp;<span class="ident" id="6012436"><a href="/go/doc/reader.go.html#6012379">typ</a></span><span class="op" id="6012439">)</span><br>
<span class="lineno"></span><span class="op" id="6012441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6012444">func</span>&nbsp;<span class="ident" id="6012449">specNames</span><span class="op" id="6012458">(</span><span class="ident" id="6012459">specs</span>&nbsp;<span class="op" id="6012465">[</span><span class="op" id="6012466">]</span><span class="ident" id="6012467"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012470">.</span><span class="ident" id="6012471">Spec</span><span class="op" id="6012475">)</span>&nbsp;<span class="op" id="6012477">[</span><span class="op" id="6012478">]</span><span class="builtintype" id="6012479">string</span>&nbsp;<span class="op" id="6012486">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012489">names</span>&nbsp;<span class="op" id="6012495">:=</span>&nbsp;<span class="builtinfunc" id="6012498">make</span><span class="op" id="6012502">(</span><span class="op" id="6012503">[</span><span class="op" id="6012504">]</span><span class="builtintype" id="6012505">string</span><span class="op" id="6012511">,</span>&nbsp;<span class="num" id="6012513">0</span><span class="op" id="6012514">,</span>&nbsp;<span class="builtinfunc" id="6012516">len</span><span class="op" id="6012519">(</span><span class="ident" id="6012520"><a href="/go/doc/reader.go.html#6012459">specs</a></span><span class="op" id="6012525">)</span><span class="op" id="6012526">)</span>&nbsp;<span class="comment" id="6012528">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012552">for</span>&nbsp;<span class="ident" id="6012556">_</span><span class="op" id="6012557">,</span>&nbsp;<span class="ident" id="6012559">s</span>&nbsp;<span class="op" id="6012561">:=</span>&nbsp;<span class="keyword" id="6012564">range</span>&nbsp;<span class="ident" id="6012570"><a href="/go/doc/reader.go.html#6012459">specs</a></span>&nbsp;<span class="op" id="6012576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012580">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012635">for</span>&nbsp;<span class="ident" id="6012639">_</span><span class="op" id="6012640">,</span>&nbsp;<span class="ident" id="6012642">ident</span>&nbsp;<span class="op" id="6012648">:=</span>&nbsp;<span class="keyword" id="6012651">range</span>&nbsp;<span class="ident" id="6012657"><a href="/go/doc/reader.go.html#6012559">s</a></span><span class="op" id="6012658">.</span><span class="op" id="6012659">(</span><span class="op" id="6012660">*</span><span class="ident" id="6012661"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012664">.</span><span class="ident" id="6012665">ValueSpec</span><span class="op" id="6012674">)</span><span class="op" id="6012675">.</span><span class="ident" id="6012676">Names</span>&nbsp;<span class="op" id="6012682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6012687"><a href="/go/doc/reader.go.html#6012489">names</a></span>&nbsp;<span class="op" id="6012693">=</span>&nbsp;<span class="builtinfunc" id="6012695">append</span><span class="op" id="6012701">(</span><span class="ident" id="6012702"><a href="/go/doc/reader.go.html#6012489">names</a></span><span class="op" id="6012707">,</span>&nbsp;<span class="ident" id="6012709"><a href="/go/doc/reader.go.html#6012642">ident</a></span><span class="op" id="6012714">.</span><span class="ident" id="6012715">Name</span><span class="op" id="6012719">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6012723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6012726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6012729">return</span>&nbsp;<span class="ident" id="6012736"><a href="/go/doc/reader.go.html#6012489">names</a></span><br>
<span class="lineno"></span><span class="op" id="6012742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="6012745">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6012796">//</span><br>
<span class="lineno"></span><span class="keyword" id="6012799">func</span>&nbsp;<span class="op" id="6012804">(</span><span class="ident" id="6012805">r</span>&nbsp;<span class="op" id="6012807">*</span><span class="ident" id="6012808"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6012814">)</span>&nbsp;<span class="ident" id="6012816">readValue</span><span class="op" id="6012825">(</span><span class="ident" id="6012826">decl</span>&nbsp;<span class="op" id="6012831">*</span><span class="ident" id="6012832"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6012835">.</span><span class="ident" id="6012836">GenDecl</span><span class="op" id="6012843">)</span>&nbsp;<span class="op" id="6012845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012848">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012903">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6012973">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013043">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013113">domName</span>&nbsp;<span class="op" id="6013121">:=</span>&nbsp;<span class="string" id="6013124">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013128">domFreq</span>&nbsp;<span class="op" id="6013136">:=</span>&nbsp;<span class="num" id="6013139">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013142">prev</span>&nbsp;<span class="op" id="6013147">:=</span>&nbsp;<span class="string" id="6013150">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013154">n</span>&nbsp;<span class="op" id="6013156">:=</span>&nbsp;<span class="num" id="6013159">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013162">for</span>&nbsp;<span class="ident" id="6013166">_</span><span class="op" id="6013167">,</span>&nbsp;<span class="ident" id="6013169">spec</span>&nbsp;<span class="op" id="6013174">:=</span>&nbsp;<span class="keyword" id="6013177">range</span>&nbsp;<span class="ident" id="6013183"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6013187">.</span><span class="ident" id="6013188">Specs</span>&nbsp;<span class="op" id="6013194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013198">s</span><span class="op" id="6013199">,</span>&nbsp;<span class="ident" id="6013201">ok</span>&nbsp;<span class="op" id="6013204">:=</span>&nbsp;<span class="ident" id="6013207"><a href="/go/doc/reader.go.html#6013169">spec</a></span><span class="op" id="6013211">.</span><span class="op" id="6013212">(</span><span class="op" id="6013213">*</span><span class="ident" id="6013214"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6013217">.</span><span class="ident" id="6013218">ValueSpec</span><span class="op" id="6013227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013231">if</span>&nbsp;<span class="op" id="6013234">!</span><span class="ident" id="6013235"><a href="/go/doc/reader.go.html#6013201">ok</a></span>&nbsp;<span class="op" id="6013238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013243">continue</span>&nbsp;<span class="comment" id="6013252">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013300">name</span>&nbsp;<span class="op" id="6013305">:=</span>&nbsp;<span class="string" id="6013308">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013313">switch</span>&nbsp;<span class="op" id="6013320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013324">case</span>&nbsp;<span class="ident" id="6013329"><a href="/go/doc/reader.go.html#6013198">s</a></span><span class="op" id="6013330">.</span><span class="ident" id="6013331">Type</span>&nbsp;<span class="op" id="6013336">!=</span>&nbsp;<span class="ident" id="6013339">nil</span><span class="op" id="6013342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013347">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013391">if</span>&nbsp;<span class="ident" id="6013394">n</span><span class="op" id="6013395">,</span>&nbsp;<span class="ident" id="6013397">imp</span>&nbsp;<span class="op" id="6013401">:=</span>&nbsp;<span class="ident" id="6013404"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="6013416">(</span><span class="ident" id="6013417"><a href="/go/doc/reader.go.html#6013198">s</a></span><span class="op" id="6013418">.</span><span class="ident" id="6013419">Type</span><span class="op" id="6013423">)</span><span class="op" id="6013424">;</span>&nbsp;<span class="op" id="6013426">!</span><span class="ident" id="6013427"><a href="/go/doc/reader.go.html#6013397">imp</a></span>&nbsp;<span class="op" id="6013431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013437"><a href="/go/doc/reader.go.html#6013300">name</a></span>&nbsp;<span class="op" id="6013442">=</span>&nbsp;<span class="ident" id="6013444"><a href="/go/doc/reader.go.html#6013394">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013453">case</span>&nbsp;<span class="ident" id="6013458"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6013462">.</span><span class="ident" id="6013463">Tok</span>&nbsp;<span class="op" id="6013467">==</span>&nbsp;<span class="ident" id="6013470"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6013475">.</span><span class="ident" id="6013476">CONST</span><span class="op" id="6013481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013486">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013547">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013607">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013665">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013726"><a href="/go/doc/reader.go.html#6013300">name</a></span>&nbsp;<span class="op" id="6013731">=</span>&nbsp;<span class="ident" id="6013733"><a href="/go/doc/reader.go.html#6013142">prev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013740">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013744">if</span>&nbsp;<span class="ident" id="6013747"><a href="/go/doc/reader.go.html#6013300">name</a></span>&nbsp;<span class="op" id="6013752">!=</span>&nbsp;<span class="string" id="6013755">&#34;&#34;</span>&nbsp;<span class="op" id="6013758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013763">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013792">if</span>&nbsp;<span class="ident" id="6013795"><a href="/go/doc/reader.go.html#6013113">domName</a></span>&nbsp;<span class="op" id="6013803">!=</span>&nbsp;<span class="string" id="6013806">&#34;&#34;</span>&nbsp;<span class="op" id="6013809">&amp;&amp;</span>&nbsp;<span class="ident" id="6013812"><a href="/go/doc/reader.go.html#6013113">domName</a></span>&nbsp;<span class="op" id="6013820">!=</span>&nbsp;<span class="ident" id="6013823"><a href="/go/doc/reader.go.html#6013300">name</a></span>&nbsp;<span class="op" id="6013828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013834">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013884">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013905"><a href="/go/doc/reader.go.html#6013113">domName</a></span>&nbsp;<span class="op" id="6013913">=</span>&nbsp;<span class="string" id="6013915">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6013922">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013936"><a href="/go/doc/reader.go.html#6013113">domName</a></span>&nbsp;<span class="op" id="6013944">=</span>&nbsp;<span class="ident" id="6013946"><a href="/go/doc/reader.go.html#6013300">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013954"><a href="/go/doc/reader.go.html#6013128">domFreq</a></span><span class="op" id="6013961">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013970"><a href="/go/doc/reader.go.html#6013142">prev</a></span>&nbsp;<span class="op" id="6013975">=</span>&nbsp;<span class="ident" id="6013977"><a href="/go/doc/reader.go.html#6013300">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6013984"><a href="/go/doc/reader.go.html#6013154">n</a></span><span class="op" id="6013985">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6013989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6013993">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014035">if</span>&nbsp;<span class="ident" id="6014038"><a href="/go/doc/reader.go.html#6013154">n</a></span>&nbsp;<span class="op" id="6014040">==</span>&nbsp;<span class="num" id="6014043">0</span>&nbsp;<span class="op" id="6014045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014049">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6014061">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014135">values</span>&nbsp;<span class="op" id="6014142">:=</span>&nbsp;<span class="op" id="6014145">&amp;</span><span class="ident" id="6014146"><a href="/go/doc/reader.go.html#6012805">r</a></span><span class="op" id="6014147">.</span><span class="ident" id="6014148">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014156">const</span>&nbsp;<span class="ident" id="6014162">threshold</span>&nbsp;<span class="op" id="6014172">=</span>&nbsp;<span class="num" id="6014174">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014180">if</span>&nbsp;<span class="ident" id="6014183"><a href="/go/doc/reader.go.html#6013113">domName</a></span>&nbsp;<span class="op" id="6014191">!=</span>&nbsp;<span class="string" id="6014194">&#34;&#34;</span>&nbsp;<span class="op" id="6014197">&amp;&amp;</span>&nbsp;<span class="ident" id="6014200"><a href="/go/doc/reader.go.html#6012805">r</a></span><span class="op" id="6014201">.</span><span class="ident" id="6014202">isVisible</span><span class="op" id="6014211">(</span><span class="ident" id="6014212"><a href="/go/doc/reader.go.html#6013113">domName</a></span><span class="op" id="6014219">)</span>&nbsp;<span class="op" id="6014221">&amp;&amp;</span>&nbsp;<span class="ident" id="6014224"><a href="/go/doc/reader.go.html#6013128">domFreq</a></span>&nbsp;<span class="op" id="6014232">&gt;=</span>&nbsp;<span class="builtintype" id="6014235">int</span><span class="op" id="6014238">(</span><span class="builtintype" id="6014239">float64</span><span class="op" id="6014246">(</span><span class="builtinfunc" id="6014247">len</span><span class="op" id="6014250">(</span><span class="ident" id="6014251"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6014255">.</span><span class="ident" id="6014256">Specs</span><span class="op" id="6014261">)</span><span class="op" id="6014262">)</span><span class="op" id="6014263">*</span><span class="ident" id="6014264"><a href="/go/doc/reader.go.html#6014162">threshold</a></span><span class="op" id="6014273">)</span>&nbsp;<span class="op" id="6014275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6014279">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014324">if</span>&nbsp;<span class="ident" id="6014327">typ</span>&nbsp;<span class="op" id="6014331">:=</span>&nbsp;<span class="ident" id="6014334"><a href="/go/doc/reader.go.html#6012805">r</a></span><span class="op" id="6014335">.</span><span class="ident" id="6014336">lookupType</span><span class="op" id="6014346">(</span><span class="ident" id="6014347"><a href="/go/doc/reader.go.html#6013113">domName</a></span><span class="op" id="6014354">)</span><span class="op" id="6014355">;</span>&nbsp;<span class="ident" id="6014357"><a href="/go/doc/reader.go.html#6014327">typ</a></span>&nbsp;<span class="op" id="6014361">!=</span>&nbsp;<span class="ident" id="6014364">nil</span>&nbsp;<span class="op" id="6014368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014373"><a href="/go/doc/reader.go.html#6014135">values</a></span>&nbsp;<span class="op" id="6014380">=</span>&nbsp;<span class="op" id="6014382">&amp;</span><span class="ident" id="6014383"><a href="/go/doc/reader.go.html#6014327">typ</a></span><span class="op" id="6014386">.</span><span class="ident" id="6014387">values</span>&nbsp;<span class="comment" id="6014394">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014431">*</span><span class="ident" id="6014432"><a href="/go/doc/reader.go.html#6014135">values</a></span>&nbsp;<span class="op" id="6014439">=</span>&nbsp;<span class="builtinfunc" id="6014441">append</span><span class="op" id="6014447">(</span><span class="op" id="6014448">*</span><span class="ident" id="6014449"><a href="/go/doc/reader.go.html#6014135">values</a></span><span class="op" id="6014455">,</span>&nbsp;<span class="op" id="6014457">&amp;</span><span class="ident" id="6014458"><a href="/go/doc/doc.go.html#5985874">Value</a></span><span class="op" id="6014463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014467">Doc</span><span class="op" id="6014470">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6014474"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6014478">.</span><span class="ident" id="6014479">Doc</span><span class="op" id="6014482">.</span><span class="ident" id="6014483">Text</span><span class="op" id="6014487">(</span><span class="op" id="6014488">)</span><span class="op" id="6014489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014493">Names</span><span class="op" id="6014498">:</span>&nbsp;<span class="ident" id="6014500"><a href="/go/doc/reader.go.html#6012449">specNames</a></span><span class="op" id="6014509">(</span><span class="ident" id="6014510"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6014514">.</span><span class="ident" id="6014515">Specs</span><span class="op" id="6014520">)</span><span class="op" id="6014521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014525">Decl</span><span class="op" id="6014529">:</span>&nbsp;&nbsp;<span class="ident" id="6014532"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6014536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014540">order</span><span class="op" id="6014545">:</span>&nbsp;<span class="builtinfunc" id="6014547">len</span><span class="op" id="6014550">(</span><span class="op" id="6014551">*</span><span class="ident" id="6014552"><a href="/go/doc/reader.go.html#6014135">values</a></span><span class="op" id="6014558">)</span><span class="op" id="6014559">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014562">}</span><span class="op" id="6014563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014566"><a href="/go/doc/reader.go.html#6012826">decl</a></span><span class="op" id="6014570">.</span><span class="ident" id="6014571">Doc</span>&nbsp;<span class="op" id="6014575">=</span>&nbsp;<span class="ident" id="6014577">nil</span>&nbsp;<span class="comment" id="6014581">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6014615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6014618">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="6014681">//</span><br>
<span class="lineno"></span><span class="keyword" id="6014684">func</span>&nbsp;<span class="ident" id="6014689">fields</span><span class="op" id="6014695">(</span><span class="ident" id="6014696">typ</span>&nbsp;<span class="ident" id="6014700"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6014703">.</span><span class="ident" id="6014704">Expr</span><span class="op" id="6014708">)</span>&nbsp;<span class="op" id="6014710">(</span><span class="ident" id="6014711">list</span>&nbsp;<span class="op" id="6014716">[</span><span class="op" id="6014717">]</span><span class="op" id="6014718">*</span><span class="ident" id="6014719"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6014722">.</span><span class="ident" id="6014723">Field</span><span class="op" id="6014728">,</span>&nbsp;<span class="ident" id="6014730">isStruct</span>&nbsp;<span class="builtintype" id="6014739">bool</span><span class="op" id="6014743">)</span>&nbsp;<span class="op" id="6014745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014748">var</span>&nbsp;<span class="ident" id="6014752">fields</span>&nbsp;<span class="op" id="6014759">*</span><span class="ident" id="6014760"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6014763">.</span><span class="ident" id="6014764">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014775">switch</span>&nbsp;<span class="ident" id="6014782">t</span>&nbsp;<span class="op" id="6014784">:=</span>&nbsp;<span class="ident" id="6014787"><a href="/go/doc/reader.go.html#6014696">typ</a></span><span class="op" id="6014790">.</span><span class="op" id="6014791">(</span><span class="keyword" id="6014792">type</span><span class="op" id="6014796">)</span>&nbsp;<span class="op" id="6014798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014801">case</span>&nbsp;<span class="op" id="6014806">*</span><span class="ident" id="6014807"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6014810">.</span><span class="ident" id="6014811">StructType</span><span class="op" id="6014821">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014825"><a href="/go/doc/reader.go.html#6014752">fields</a></span>&nbsp;<span class="op" id="6014832">=</span>&nbsp;<span class="ident" id="6014834"><a href="/go/doc/reader.go.html#6014782">t</a></span><span class="op" id="6014835">.</span><span class="ident" id="6014836">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014845"><a href="/go/doc/reader.go.html#6014730">isStruct</a></span>&nbsp;<span class="op" id="6014854">=</span>&nbsp;<span class="ident" id="6014856">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014862">case</span>&nbsp;<span class="op" id="6014867">*</span><span class="ident" id="6014868"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6014871">.</span><span class="ident" id="6014872">InterfaceType</span><span class="op" id="6014885">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014889"><a href="/go/doc/reader.go.html#6014752">fields</a></span>&nbsp;<span class="op" id="6014896">=</span>&nbsp;<span class="ident" id="6014898"><a href="/go/doc/reader.go.html#6014782">t</a></span><span class="op" id="6014899">.</span><span class="ident" id="6014900">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014909">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014912">if</span>&nbsp;<span class="ident" id="6014915"><a href="/go/doc/reader.go.html#6014752">fields</a></span>&nbsp;<span class="op" id="6014922">!=</span>&nbsp;<span class="ident" id="6014925">nil</span>&nbsp;<span class="op" id="6014929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6014933"><a href="/go/doc/reader.go.html#6014711">list</a></span>&nbsp;<span class="op" id="6014938">=</span>&nbsp;<span class="ident" id="6014940"><a href="/go/doc/reader.go.html#6014752">fields</a></span><span class="op" id="6014946">.</span><span class="ident" id="6014947">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6014953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6014956">return</span><br>
<span class="lineno"></span><span class="op" id="6014963">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6014966">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6015008">//</span><br>
<span class="lineno"></span><span class="keyword" id="6015011">func</span>&nbsp;<span class="op" id="6015016">(</span><span class="ident" id="6015017">r</span>&nbsp;<span class="op" id="6015019">*</span><span class="ident" id="6015020"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6015026">)</span>&nbsp;<span class="ident" id="6015028">readType</span><span class="op" id="6015036">(</span><span class="ident" id="6015037">decl</span>&nbsp;<span class="op" id="6015042">*</span><span class="ident" id="6015043"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6015046">.</span><span class="ident" id="6015047">GenDecl</span><span class="op" id="6015054">,</span>&nbsp;<span class="ident" id="6015056">spec</span>&nbsp;<span class="op" id="6015061">*</span><span class="ident" id="6015062"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6015065">.</span><span class="ident" id="6015066">TypeSpec</span><span class="op" id="6015074">)</span>&nbsp;<span class="op" id="6015076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015079">typ</span>&nbsp;<span class="op" id="6015083">:=</span>&nbsp;<span class="ident" id="6015086"><a href="/go/doc/reader.go.html#6015017">r</a></span><span class="op" id="6015087">.</span><span class="ident" id="6015088">lookupType</span><span class="op" id="6015098">(</span><span class="ident" id="6015099"><a href="/go/doc/reader.go.html#6015056">spec</a></span><span class="op" id="6015103">.</span><span class="ident" id="6015104">Name</span><span class="op" id="6015108">.</span><span class="ident" id="6015109">Name</span><span class="op" id="6015113">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015116">if</span>&nbsp;<span class="ident" id="6015119"><a href="/go/doc/reader.go.html#6015079">typ</a></span>&nbsp;<span class="op" id="6015123">==</span>&nbsp;<span class="ident" id="6015126">nil</span>&nbsp;<span class="op" id="6015130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015134">return</span>&nbsp;<span class="comment" id="6015141">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6015185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015189">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015242">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015297"><a href="/go/doc/reader.go.html#6015079">typ</a></span><span class="op" id="6015300">.</span><span class="ident" id="6015301">decl</span>&nbsp;<span class="op" id="6015306">=</span>&nbsp;<span class="ident" id="6015308"><a href="/go/doc/reader.go.html#6015037">decl</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015315">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015341">doc</span>&nbsp;<span class="op" id="6015345">:=</span>&nbsp;<span class="ident" id="6015348"><a href="/go/doc/reader.go.html#6015056">spec</a></span><span class="op" id="6015352">.</span><span class="ident" id="6015353">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015358"><a href="/go/doc/reader.go.html#6015056">spec</a></span><span class="op" id="6015362">.</span><span class="ident" id="6015363">Doc</span>&nbsp;<span class="op" id="6015367">=</span>&nbsp;<span class="ident" id="6015369">nil</span>&nbsp;<span class="comment" id="6015373">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015408">if</span>&nbsp;<span class="ident" id="6015411"><a href="/go/doc/reader.go.html#6015341">doc</a></span>&nbsp;<span class="op" id="6015415">==</span>&nbsp;<span class="ident" id="6015418">nil</span>&nbsp;<span class="op" id="6015422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015426">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015496"><a href="/go/doc/reader.go.html#6015341">doc</a></span>&nbsp;<span class="op" id="6015500">=</span>&nbsp;<span class="ident" id="6015502"><a href="/go/doc/reader.go.html#6015037">decl</a></span><span class="op" id="6015506">.</span><span class="ident" id="6015507">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6015512">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015515"><a href="/go/doc/reader.go.html#6015037">decl</a></span><span class="op" id="6015519">.</span><span class="ident" id="6015520">Doc</span>&nbsp;<span class="op" id="6015524">=</span>&nbsp;<span class="ident" id="6015526">nil</span>&nbsp;<span class="comment" id="6015530">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015565"><a href="/go/doc/reader.go.html#6015079">typ</a></span><span class="op" id="6015568">.</span><span class="ident" id="6015569">doc</span>&nbsp;<span class="op" id="6015573">=</span>&nbsp;<span class="ident" id="6015575"><a href="/go/doc/reader.go.html#6015341">doc</a></span><span class="op" id="6015578">.</span><span class="ident" id="6015579">Text</span><span class="op" id="6015583">(</span><span class="op" id="6015584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015588">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015646">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6015709">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015737">var</span>&nbsp;<span class="ident" id="6015741">list</span>&nbsp;<span class="op" id="6015746">[</span><span class="op" id="6015747">]</span><span class="op" id="6015748">*</span><span class="ident" id="6015749"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6015752">.</span><span class="ident" id="6015753">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015760"><a href="/go/doc/reader.go.html#6015741">list</a></span><span class="op" id="6015764">,</span>&nbsp;<span class="ident" id="6015766"><a href="/go/doc/reader.go.html#6015079">typ</a></span><span class="op" id="6015769">.</span><span class="ident" id="6015770">isStruct</span>&nbsp;<span class="op" id="6015779">=</span>&nbsp;<span class="ident" id="6015781"><a href="/go/doc/reader.go.html#6014689">fields</a></span><span class="op" id="6015787">(</span><span class="ident" id="6015788"><a href="/go/doc/reader.go.html#6015056">spec</a></span><span class="op" id="6015792">.</span><span class="ident" id="6015793">Type</span><span class="op" id="6015797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015800">for</span>&nbsp;<span class="ident" id="6015804">_</span><span class="op" id="6015805">,</span>&nbsp;<span class="ident" id="6015807">field</span>&nbsp;<span class="op" id="6015813">:=</span>&nbsp;<span class="keyword" id="6015816">range</span>&nbsp;<span class="ident" id="6015822"><a href="/go/doc/reader.go.html#6015741">list</a></span>&nbsp;<span class="op" id="6015827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015831">if</span>&nbsp;<span class="builtinfunc" id="6015834">len</span><span class="op" id="6015837">(</span><span class="ident" id="6015838"><a href="/go/doc/reader.go.html#6015807">field</a></span><span class="op" id="6015843">.</span><span class="ident" id="6015844">Names</span><span class="op" id="6015849">)</span>&nbsp;<span class="op" id="6015851">==</span>&nbsp;<span class="num" id="6015854">0</span>&nbsp;<span class="op" id="6015856">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015861"><a href="/go/doc/reader.go.html#6015017">r</a></span><span class="op" id="6015862">.</span><span class="ident" id="6015863">recordAnonymousField</span><span class="op" id="6015883">(</span><span class="ident" id="6015884"><a href="/go/doc/reader.go.html#6015079">typ</a></span><span class="op" id="6015887">,</span>&nbsp;<span class="ident" id="6015889"><a href="/go/doc/reader.go.html#6015807">field</a></span><span class="op" id="6015894">.</span><span class="ident" id="6015895">Type</span><span class="op" id="6015899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6015903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6015906">}</span><br>
<span class="lineno"></span><span class="op" id="6015908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="6015911">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6015963">//</span><br>
<span class="lineno"></span><span class="keyword" id="6015966">func</span>&nbsp;<span class="op" id="6015971">(</span><span class="ident" id="6015972">r</span>&nbsp;<span class="op" id="6015974">*</span><span class="ident" id="6015975"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6015981">)</span>&nbsp;<span class="ident" id="6015983">readFunc</span><span class="op" id="6015991">(</span><span class="ident" id="6015992">fun</span>&nbsp;<span class="op" id="6015996">*</span><span class="ident" id="6015997"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6016000">.</span><span class="ident" id="6016001">FuncDecl</span><span class="op" id="6016009">)</span>&nbsp;<span class="op" id="6016011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016014">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6016038"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016041">.</span><span class="ident" id="6016042">Body</span>&nbsp;<span class="op" id="6016047">=</span>&nbsp;<span class="ident" id="6016049">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016055">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016108">if</span>&nbsp;<span class="ident" id="6016111"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016114">.</span><span class="ident" id="6016115">Recv</span>&nbsp;<span class="op" id="6016120">!=</span>&nbsp;<span class="ident" id="6016123">nil</span>&nbsp;<span class="op" id="6016127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016131">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6016143">recvTypeName</span><span class="op" id="6016155">,</span>&nbsp;<span class="ident" id="6016157">imp</span>&nbsp;<span class="op" id="6016161">:=</span>&nbsp;<span class="ident" id="6016164"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="6016176">(</span><span class="ident" id="6016177"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016180">.</span><span class="ident" id="6016181">Recv</span><span class="op" id="6016185">.</span><span class="ident" id="6016186">List</span><span class="op" id="6016190">[</span><span class="num" id="6016191">0</span><span class="op" id="6016192">]</span><span class="op" id="6016193">.</span><span class="ident" id="6016194">Type</span><span class="op" id="6016198">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016202">if</span>&nbsp;<span class="ident" id="6016205"><a href="/go/doc/reader.go.html#6016157">imp</a></span>&nbsp;<span class="op" id="6016209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016214">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016255">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016284">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016293">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016297">if</span>&nbsp;<span class="ident" id="6016300">typ</span>&nbsp;<span class="op" id="6016304">:=</span>&nbsp;<span class="ident" id="6016307"><a href="/go/doc/reader.go.html#6015972">r</a></span><span class="op" id="6016308">.</span><span class="ident" id="6016309">lookupType</span><span class="op" id="6016319">(</span><span class="ident" id="6016320"><a href="/go/doc/reader.go.html#6016143">recvTypeName</a></span><span class="op" id="6016332">)</span><span class="op" id="6016333">;</span>&nbsp;<span class="ident" id="6016335"><a href="/go/doc/reader.go.html#6016300">typ</a></span>&nbsp;<span class="op" id="6016339">!=</span>&nbsp;<span class="ident" id="6016342">nil</span>&nbsp;<span class="op" id="6016346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6016351"><a href="/go/doc/reader.go.html#6016300">typ</a></span><span class="op" id="6016354">.</span><span class="ident" id="6016355">methods</span><span class="op" id="6016362">.</span><span class="ident" id="6016363">set</span><span class="op" id="6016366">(</span><span class="ident" id="6016367"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016378">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016411">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016479">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016548">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016616">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016681">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016689">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016693">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016768">if</span>&nbsp;<span class="ident" id="6016771"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016774">.</span><span class="ident" id="6016775">Type</span><span class="op" id="6016779">.</span><span class="ident" id="6016780">Results</span><span class="op" id="6016787">.</span><span class="ident" id="6016788">NumFields</span><span class="op" id="6016797">(</span><span class="op" id="6016798">)</span>&nbsp;<span class="op" id="6016800">&gt;=</span>&nbsp;<span class="num" id="6016803">1</span>&nbsp;<span class="op" id="6016805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6016809">res</span>&nbsp;<span class="op" id="6016813">:=</span>&nbsp;<span class="ident" id="6016816"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6016819">.</span><span class="ident" id="6016820">Type</span><span class="op" id="6016824">.</span><span class="ident" id="6016825">Results</span><span class="op" id="6016832">.</span><span class="ident" id="6016833">List</span><span class="op" id="6016837">[</span><span class="num" id="6016838">0</span><span class="op" id="6016839">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016843">if</span>&nbsp;<span class="builtinfunc" id="6016846">len</span><span class="op" id="6016849">(</span><span class="ident" id="6016850"><a href="/go/doc/reader.go.html#6016809">res</a></span><span class="op" id="6016853">.</span><span class="ident" id="6016854">Names</span><span class="op" id="6016859">)</span>&nbsp;<span class="op" id="6016861">&lt;=</span>&nbsp;<span class="num" id="6016864">1</span>&nbsp;<span class="op" id="6016866">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016871">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016928">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6016985">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6017016">if</span>&nbsp;<span class="ident" id="6017019">n</span><span class="op" id="6017020">,</span>&nbsp;<span class="ident" id="6017022">imp</span>&nbsp;<span class="op" id="6017026">:=</span>&nbsp;<span class="ident" id="6017029"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="6017041">(</span><span class="ident" id="6017042"><a href="/go/doc/reader.go.html#6016809">res</a></span><span class="op" id="6017045">.</span><span class="ident" id="6017046">Type</span><span class="op" id="6017050">)</span><span class="op" id="6017051">;</span>&nbsp;<span class="op" id="6017053">!</span><span class="ident" id="6017054"><a href="/go/doc/reader.go.html#6017022">imp</a></span>&nbsp;<span class="op" id="6017058">&amp;&amp;</span>&nbsp;<span class="ident" id="6017061"><a href="/go/doc/reader.go.html#6015972">r</a></span><span class="op" id="6017062">.</span><span class="ident" id="6017063">isVisible</span><span class="op" id="6017072">(</span><span class="ident" id="6017073"><a href="/go/doc/reader.go.html#6017019">n</a></span><span class="op" id="6017074">)</span>&nbsp;<span class="op" id="6017076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6017082">if</span>&nbsp;<span class="ident" id="6017085">typ</span>&nbsp;<span class="op" id="6017089">:=</span>&nbsp;<span class="ident" id="6017092"><a href="/go/doc/reader.go.html#6015972">r</a></span><span class="op" id="6017093">.</span><span class="ident" id="6017094">lookupType</span><span class="op" id="6017104">(</span><span class="ident" id="6017105"><a href="/go/doc/reader.go.html#6017019">n</a></span><span class="op" id="6017106">)</span><span class="op" id="6017107">;</span>&nbsp;<span class="ident" id="6017109"><a href="/go/doc/reader.go.html#6017085">typ</a></span>&nbsp;<span class="op" id="6017113">!=</span>&nbsp;<span class="ident" id="6017116">nil</span>&nbsp;<span class="op" id="6017120">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017127">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017163"><a href="/go/doc/reader.go.html#6017085">typ</a></span><span class="op" id="6017166">.</span><span class="ident" id="6017167">funcs</span><span class="op" id="6017172">.</span><span class="ident" id="6017173">set</span><span class="op" id="6017176">(</span><span class="ident" id="6017177"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6017180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6017187">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6017198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6017203">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6017207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6017210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017214">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017244"><a href="/go/doc/reader.go.html#6015972">r</a></span><span class="op" id="6017245">.</span><span class="ident" id="6017246">funcs</span><span class="op" id="6017251">.</span><span class="ident" id="6017252">set</span><span class="op" id="6017255">(</span><span class="ident" id="6017256"><a href="/go/doc/reader.go.html#6015992">fun</a></span><span class="op" id="6017259">)</span><br>
<span class="lineno">400</span><span class="op" id="6017261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6017264">var</span>&nbsp;<span class="op" id="6017268">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017271">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6017285">=</span>&nbsp;<span class="string" id="6017287">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6017335">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017397">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="6017411">=</span>&nbsp;<span class="ident" id="6017413"><a href="/go/doc/reader.go.html#6006415">regexp</a></span><span class="op" id="6017419">.</span><span class="ident" id="6017420">MustCompile</span><span class="op" id="6017431">(</span><span class="string" id="6017432">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="6017442">+</span>&nbsp;<span class="ident" id="6017444"><a href="/go/doc/reader.go.html#6017271">noteMarker</a></span><span class="op" id="6017454">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6017461">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017491">noteCommentRx</span>&nbsp;<span class="op" id="6017505">=</span>&nbsp;<span class="ident" id="6017507"><a href="/go/doc/reader.go.html#6006415">regexp</a></span><span class="op" id="6017513">.</span><span class="ident" id="6017514">MustCompile</span><span class="op" id="6017525">(</span><span class="string" id="6017526">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="6017541">+</span>&nbsp;<span class="ident" id="6017543"><a href="/go/doc/reader.go.html#6017271">noteMarker</a></span><span class="op" id="6017553">)</span>&nbsp;<span class="comment" id="6017555">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="6017587">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6017590">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6017654">//</span><br>
<span class="lineno">410</span><span class="keyword" id="6017657">func</span>&nbsp;<span class="op" id="6017662">(</span><span class="ident" id="6017663">r</span>&nbsp;<span class="op" id="6017665">*</span><span class="ident" id="6017666"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6017672">)</span>&nbsp;<span class="ident" id="6017674">readNote</span><span class="op" id="6017682">(</span><span class="ident" id="6017683">list</span>&nbsp;<span class="op" id="6017688">[</span><span class="op" id="6017689">]</span><span class="op" id="6017690">*</span><span class="ident" id="6017691"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6017694">.</span><span class="ident" id="6017695">Comment</span><span class="op" id="6017702">)</span>&nbsp;<span class="op" id="6017704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017707">text</span>&nbsp;<span class="op" id="6017712">:=</span>&nbsp;<span class="op" id="6017715">(</span><span class="op" id="6017716">&amp;</span><span class="ident" id="6017717"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6017720">.</span><span class="ident" id="6017721">CommentGroup</span><span class="op" id="6017733">{</span><span class="ident" id="6017734">List</span><span class="op" id="6017738">:</span>&nbsp;<span class="ident" id="6017740"><a href="/go/doc/reader.go.html#6017683">list</a></span><span class="op" id="6017744">}</span><span class="op" id="6017745">)</span><span class="op" id="6017746">.</span><span class="ident" id="6017747">Text</span><span class="op" id="6017751">(</span><span class="op" id="6017752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6017755">if</span>&nbsp;<span class="ident" id="6017758">m</span>&nbsp;<span class="op" id="6017760">:=</span>&nbsp;<span class="ident" id="6017763"><a href="/go/doc/reader.go.html#6017397">noteMarkerRx</a></span><span class="op" id="6017775">.</span><span class="ident" id="6017776">FindStringSubmatchIndex</span><span class="op" id="6017799">(</span><span class="ident" id="6017800"><a href="/go/doc/reader.go.html#6017707">text</a></span><span class="op" id="6017804">)</span><span class="op" id="6017805">;</span>&nbsp;<span class="ident" id="6017807"><a href="/go/doc/reader.go.html#6017758">m</a></span>&nbsp;<span class="op" id="6017809">!=</span>&nbsp;<span class="ident" id="6017812">nil</span>&nbsp;<span class="op" id="6017816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017820">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017864">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017911">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6017958">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6017986">body</span>&nbsp;<span class="op" id="6017991">:=</span>&nbsp;<span class="ident" id="6017994"><a href="/go/doc/synopsis.go.html#6030574">clean</a></span><span class="op" id="6017999">(</span><span class="ident" id="6018000"><a href="/go/doc/reader.go.html#6017707">text</a></span><span class="op" id="6018004">[</span><span class="ident" id="6018005"><a href="/go/doc/reader.go.html#6017758">m</a></span><span class="op" id="6018006">[</span><span class="num" id="6018007">1</span><span class="op" id="6018008">]</span><span class="op" id="6018009">:</span><span class="op" id="6018010">]</span><span class="op" id="6018011">,</span>&nbsp;<span class="ident" id="6018013"><a href="/go/doc/synopsis.go.html#6030306">keepNL</a></span><span class="op" id="6018019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018023">if</span>&nbsp;<span class="ident" id="6018026"><a href="/go/doc/reader.go.html#6017986">body</a></span>&nbsp;<span class="op" id="6018031">!=</span>&nbsp;<span class="string" id="6018034">&#34;&#34;</span>&nbsp;<span class="op" id="6018037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018042">marker</span>&nbsp;<span class="op" id="6018049">:=</span>&nbsp;<span class="ident" id="6018052"><a href="/go/doc/reader.go.html#6017707">text</a></span><span class="op" id="6018056">[</span><span class="ident" id="6018057"><a href="/go/doc/reader.go.html#6017758">m</a></span><span class="op" id="6018058">[</span><span class="num" id="6018059">2</span><span class="op" id="6018060">]</span><span class="op" id="6018061">:</span><span class="ident" id="6018062"><a href="/go/doc/reader.go.html#6017758">m</a></span><span class="op" id="6018063">[</span><span class="num" id="6018064">3</span><span class="op" id="6018065">]</span><span class="op" id="6018066">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018071"><a href="/go/doc/reader.go.html#6017663">r</a></span><span class="op" id="6018072">.</span><span class="ident" id="6018073">notes</span><span class="op" id="6018078">[</span><span class="ident" id="6018079"><a href="/go/doc/reader.go.html#6018042">marker</a></span><span class="op" id="6018085">]</span>&nbsp;<span class="op" id="6018087">=</span>&nbsp;<span class="builtinfunc" id="6018089">append</span><span class="op" id="6018095">(</span><span class="ident" id="6018096"><a href="/go/doc/reader.go.html#6017663">r</a></span><span class="op" id="6018097">.</span><span class="ident" id="6018098">notes</span><span class="op" id="6018103">[</span><span class="ident" id="6018104"><a href="/go/doc/reader.go.html#6018042">marker</a></span><span class="op" id="6018110">]</span><span class="op" id="6018111">,</span>&nbsp;<span class="op" id="6018113">&amp;</span><span class="ident" id="6018114"><a href="/go/doc/doc.go.html#5987096">Note</a></span><span class="op" id="6018118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018124">Pos</span><span class="op" id="6018127">:</span>&nbsp;&nbsp;<span class="ident" id="6018130"><a href="/go/doc/reader.go.html#6017683">list</a></span><span class="op" id="6018134">[</span><span class="num" id="6018135">0</span><span class="op" id="6018136">]</span><span class="op" id="6018137">.</span><span class="ident" id="6018138">Pos</span><span class="op" id="6018141">(</span><span class="op" id="6018142">)</span><span class="op" id="6018143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018149">End</span><span class="op" id="6018152">:</span>&nbsp;&nbsp;<span class="ident" id="6018155"><a href="/go/doc/reader.go.html#6017683">list</a></span><span class="op" id="6018159">[</span><span class="builtinfunc" id="6018160">len</span><span class="op" id="6018163">(</span><span class="ident" id="6018164"><a href="/go/doc/reader.go.html#6017683">list</a></span><span class="op" id="6018168">)</span><span class="op" id="6018169">-</span><span class="num" id="6018170">1</span><span class="op" id="6018171">]</span><span class="op" id="6018172">.</span><span class="ident" id="6018173">End</span><span class="op" id="6018176">(</span><span class="op" id="6018177">)</span><span class="op" id="6018178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018184">UID</span><span class="op" id="6018187">:</span>&nbsp;&nbsp;<span class="ident" id="6018190"><a href="/go/doc/reader.go.html#6017707">text</a></span><span class="op" id="6018194">[</span><span class="ident" id="6018195"><a href="/go/doc/reader.go.html#6017758">m</a></span><span class="op" id="6018196">[</span><span class="num" id="6018197">4</span><span class="op" id="6018198">]</span><span class="op" id="6018199">:</span><span class="ident" id="6018200"><a href="/go/doc/reader.go.html#6017758">m</a></span><span class="op" id="6018201">[</span><span class="num" id="6018202">5</span><span class="op" id="6018203">]</span><span class="op" id="6018204">]</span><span class="op" id="6018205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018211">Body</span><span class="op" id="6018215">:</span>&nbsp;<span class="ident" id="6018217"><a href="/go/doc/reader.go.html#6017986">body</a></span><span class="op" id="6018221">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018226">}</span><span class="op" id="6018227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018234">}</span><br>
<span class="lineno"></span><span class="op" id="6018236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="6018239">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6018282">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6018353">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="6018422">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6018490">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="6018556">//</span><br>
<span class="lineno"></span><span class="keyword" id="6018559">func</span>&nbsp;<span class="op" id="6018564">(</span><span class="ident" id="6018565">r</span>&nbsp;<span class="op" id="6018567">*</span><span class="ident" id="6018568"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6018574">)</span>&nbsp;<span class="ident" id="6018576">readNotes</span><span class="op" id="6018585">(</span><span class="ident" id="6018586">comments</span>&nbsp;<span class="op" id="6018595">[</span><span class="op" id="6018596">]</span><span class="op" id="6018597">*</span><span class="ident" id="6018598"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6018601">.</span><span class="ident" id="6018602">CommentGroup</span><span class="op" id="6018614">)</span>&nbsp;<span class="op" id="6018616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018619">for</span>&nbsp;<span class="ident" id="6018623">_</span><span class="op" id="6018624">,</span>&nbsp;<span class="ident" id="6018626">group</span>&nbsp;<span class="op" id="6018632">:=</span>&nbsp;<span class="keyword" id="6018635">range</span>&nbsp;<span class="ident" id="6018641"><a href="/go/doc/reader.go.html#6018586">comments</a></span>&nbsp;<span class="op" id="6018650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018654">i</span>&nbsp;<span class="op" id="6018656">:=</span>&nbsp;<span class="op" id="6018659">-</span><span class="num" id="6018660">1</span>&nbsp;<span class="comment" id="6018662">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018722">list</span>&nbsp;<span class="op" id="6018727">:=</span>&nbsp;<span class="ident" id="6018730"><a href="/go/doc/reader.go.html#6018626">group</a></span><span class="op" id="6018735">.</span><span class="ident" id="6018736">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018743">for</span>&nbsp;<span class="ident" id="6018747">j</span><span class="op" id="6018748">,</span>&nbsp;<span class="ident" id="6018750">c</span>&nbsp;<span class="op" id="6018752">:=</span>&nbsp;<span class="keyword" id="6018755">range</span>&nbsp;<span class="ident" id="6018761"><a href="/go/doc/reader.go.html#6018722">list</a></span>&nbsp;<span class="op" id="6018766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018771">if</span>&nbsp;<span class="ident" id="6018774"><a href="/go/doc/reader.go.html#6017491">noteCommentRx</a></span><span class="op" id="6018787">.</span><span class="ident" id="6018788">MatchString</span><span class="op" id="6018799">(</span><span class="ident" id="6018800"><a href="/go/doc/reader.go.html#6018750">c</a></span><span class="op" id="6018801">.</span><span class="ident" id="6018802">Text</span><span class="op" id="6018806">)</span>&nbsp;<span class="op" id="6018808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018814">if</span>&nbsp;<span class="ident" id="6018817"><a href="/go/doc/reader.go.html#6018654">i</a></span>&nbsp;<span class="op" id="6018819">&gt;=</span>&nbsp;<span class="num" id="6018822">0</span>&nbsp;<span class="op" id="6018824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018831"><a href="/go/doc/reader.go.html#6018565">r</a></span><span class="op" id="6018832">.</span><span class="ident" id="6018833">readNote</span><span class="op" id="6018841">(</span><span class="ident" id="6018842"><a href="/go/doc/reader.go.html#6018722">list</a></span><span class="op" id="6018846">[</span><span class="ident" id="6018847"><a href="/go/doc/reader.go.html#6018654">i</a></span><span class="op" id="6018848">:</span><span class="ident" id="6018849"><a href="/go/doc/reader.go.html#6018747">j</a></span><span class="op" id="6018850">]</span><span class="op" id="6018851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018857">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018863"><a href="/go/doc/reader.go.html#6018654">i</a></span>&nbsp;<span class="op" id="6018865">=</span>&nbsp;<span class="ident" id="6018867"><a href="/go/doc/reader.go.html#6018747">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6018880">if</span>&nbsp;<span class="ident" id="6018883"><a href="/go/doc/reader.go.html#6018654">i</a></span>&nbsp;<span class="op" id="6018885">&gt;=</span>&nbsp;<span class="num" id="6018888">0</span>&nbsp;<span class="op" id="6018890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6018895"><a href="/go/doc/reader.go.html#6018565">r</a></span><span class="op" id="6018896">.</span><span class="ident" id="6018897">readNote</span><span class="op" id="6018905">(</span><span class="ident" id="6018906"><a href="/go/doc/reader.go.html#6018722">list</a></span><span class="op" id="6018910">[</span><span class="ident" id="6018911"><a href="/go/doc/reader.go.html#6018654">i</a></span><span class="op" id="6018912">:</span><span class="op" id="6018913">]</span><span class="op" id="6018914">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6018921">}</span><br>
<span class="lineno"></span><span class="op" id="6018923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6018926">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="6018984">//</span><br>
<span class="lineno"></span><span class="keyword" id="6018987">func</span>&nbsp;<span class="op" id="6018992">(</span><span class="ident" id="6018993">r</span>&nbsp;<span class="op" id="6018995">*</span><span class="ident" id="6018996"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6019002">)</span>&nbsp;<span class="ident" id="6019004">readFile</span><span class="op" id="6019012">(</span><span class="ident" id="6019013">src</span>&nbsp;<span class="op" id="6019017">*</span><span class="ident" id="6019018"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6019021">.</span><span class="ident" id="6019022">File</span><span class="op" id="6019026">)</span>&nbsp;<span class="op" id="6019028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019031">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019061">if</span>&nbsp;<span class="ident" id="6019064"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6019067">.</span><span class="ident" id="6019068">Doc</span>&nbsp;<span class="op" id="6019072">!=</span>&nbsp;<span class="ident" id="6019075">nil</span>&nbsp;<span class="op" id="6019079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6019083"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6019084">.</span><span class="ident" id="6019085">readDoc</span><span class="op" id="6019092">(</span><span class="ident" id="6019093"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6019096">.</span><span class="ident" id="6019097">Doc</span><span class="op" id="6019100">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6019104"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6019107">.</span><span class="ident" id="6019108">Doc</span>&nbsp;<span class="op" id="6019112">=</span>&nbsp;<span class="ident" id="6019114">nil</span>&nbsp;<span class="comment" id="6019118">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6019153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019157">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019182">for</span>&nbsp;<span class="ident" id="6019186">_</span><span class="op" id="6019187">,</span>&nbsp;<span class="ident" id="6019189">decl</span>&nbsp;<span class="op" id="6019194">:=</span>&nbsp;<span class="keyword" id="6019197">range</span>&nbsp;<span class="ident" id="6019203"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6019206">.</span><span class="ident" id="6019207">Decls</span>&nbsp;<span class="op" id="6019213">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019217">switch</span>&nbsp;<span class="ident" id="6019224">d</span>&nbsp;<span class="op" id="6019226">:=</span>&nbsp;<span class="ident" id="6019229"><a href="/go/doc/reader.go.html#6019189">decl</a></span><span class="op" id="6019233">.</span><span class="op" id="6019234">(</span><span class="keyword" id="6019235">type</span><span class="op" id="6019239">)</span>&nbsp;<span class="op" id="6019241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019245">case</span>&nbsp;<span class="op" id="6019250">*</span><span class="ident" id="6019251"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6019254">.</span><span class="ident" id="6019255">GenDecl</span><span class="op" id="6019262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019267">switch</span>&nbsp;<span class="ident" id="6019274"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6019275">.</span><span class="ident" id="6019276">Tok</span>&nbsp;<span class="op" id="6019280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019285">case</span>&nbsp;<span class="ident" id="6019290"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6019295">.</span><span class="ident" id="6019296">IMPORT</span><span class="op" id="6019302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019308">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019348">for</span>&nbsp;<span class="ident" id="6019352">_</span><span class="op" id="6019353">,</span>&nbsp;<span class="ident" id="6019355">spec</span>&nbsp;<span class="op" id="6019360">:=</span>&nbsp;<span class="keyword" id="6019363">range</span>&nbsp;<span class="ident" id="6019369"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6019370">.</span><span class="ident" id="6019371">Specs</span>&nbsp;<span class="op" id="6019377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019384">if</span>&nbsp;<span class="ident" id="6019387">s</span><span class="op" id="6019388">,</span>&nbsp;<span class="ident" id="6019390">ok</span>&nbsp;<span class="op" id="6019393">:=</span>&nbsp;<span class="ident" id="6019396"><a href="/go/doc/reader.go.html#6019355">spec</a></span><span class="op" id="6019400">.</span><span class="op" id="6019401">(</span><span class="op" id="6019402">*</span><span class="ident" id="6019403"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6019406">.</span><span class="ident" id="6019407">ImportSpec</span><span class="op" id="6019417">)</span><span class="op" id="6019418">;</span>&nbsp;<span class="ident" id="6019420"><a href="/go/doc/reader.go.html#6019390">ok</a></span>&nbsp;<span class="op" id="6019423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019431">if</span>&nbsp;<span class="ident" id="6019434">import_</span><span class="op" id="6019441">,</span>&nbsp;<span class="ident" id="6019443">err</span>&nbsp;<span class="op" id="6019447">:=</span>&nbsp;<span class="ident" id="6019450"><a href="/go/doc/reader.go.html#6006433">strconv</a></span><span class="op" id="6019457">.</span><span class="ident" id="6019458">Unquote</span><span class="op" id="6019465">(</span><span class="ident" id="6019466"><a href="/go/doc/reader.go.html#6019387">s</a></span><span class="op" id="6019467">.</span><span class="ident" id="6019468">Path</span><span class="op" id="6019472">.</span><span class="ident" id="6019473">Value</span><span class="op" id="6019478">)</span><span class="op" id="6019479">;</span>&nbsp;<span class="ident" id="6019481"><a href="/go/doc/reader.go.html#6019443">err</a></span>&nbsp;<span class="op" id="6019485">==</span>&nbsp;<span class="ident" id="6019488">nil</span>&nbsp;<span class="op" id="6019492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6019501"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6019502">.</span><span class="ident" id="6019503">imports</span><span class="op" id="6019510">[</span><span class="ident" id="6019511"><a href="/go/doc/reader.go.html#6019434">import_</a></span><span class="op" id="6019518">]</span>&nbsp;<span class="op" id="6019520">=</span>&nbsp;<span class="num" id="6019522">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6019530">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6019537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6019543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019548">case</span>&nbsp;<span class="ident" id="6019553"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6019558">.</span><span class="ident" id="6019559">CONST</span><span class="op" id="6019564">,</span>&nbsp;<span class="ident" id="6019566"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6019571">.</span><span class="ident" id="6019572">VAR</span><span class="op" id="6019575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019581">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6019642"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6019643">.</span><span class="ident" id="6019644">readValue</span><span class="op" id="6019653">(</span><span class="ident" id="6019654"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6019655">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019660">case</span>&nbsp;<span class="ident" id="6019665"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6019670">.</span><span class="ident" id="6019671">TYPE</span><span class="op" id="6019675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019681">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6019719">if</span>&nbsp;<span class="builtinfunc" id="6019722">len</span><span class="op" id="6019725">(</span><span class="ident" id="6019726"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6019727">.</span><span class="ident" id="6019728">Specs</span><span class="op" id="6019733">)</span>&nbsp;<span class="op" id="6019735">==</span>&nbsp;<span class="num" id="6019738">1</span>&nbsp;<span class="op" id="6019740">&amp;&amp;</span>&nbsp;<span class="op" id="6019743">!</span><span class="ident" id="6019744"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6019745">.</span><span class="ident" id="6019746">Lparen</span><span class="op" id="6019752">.</span><span class="ident" id="6019753">IsValid</span><span class="op" id="6019760">(</span><span class="op" id="6019761">)</span>&nbsp;<span class="op" id="6019763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019770">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019826">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019877">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019930">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6019981">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6020002">if</span>&nbsp;<span class="ident" id="6020005">s</span><span class="op" id="6020006">,</span>&nbsp;<span class="ident" id="6020008">ok</span>&nbsp;<span class="op" id="6020011">:=</span>&nbsp;<span class="ident" id="6020014"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6020015">.</span><span class="ident" id="6020016">Specs</span><span class="op" id="6020021">[</span><span class="num" id="6020022">0</span><span class="op" id="6020023">]</span><span class="op" id="6020024">.</span><span class="op" id="6020025">(</span><span class="op" id="6020026">*</span><span class="ident" id="6020027"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6020030">.</span><span class="ident" id="6020031">TypeSpec</span><span class="op" id="6020039">)</span><span class="op" id="6020040">;</span>&nbsp;<span class="ident" id="6020042"><a href="/go/doc/reader.go.html#6020008">ok</a></span>&nbsp;<span class="op" id="6020045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020053"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6020054">.</span><span class="ident" id="6020055">readType</span><span class="op" id="6020063">(</span><span class="ident" id="6020064"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6020065">,</span>&nbsp;<span class="ident" id="6020067"><a href="/go/doc/reader.go.html#6020005">s</a></span><span class="op" id="6020068">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6020082">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6020098">for</span>&nbsp;<span class="ident" id="6020102">_</span><span class="op" id="6020103">,</span>&nbsp;<span class="ident" id="6020105">spec</span>&nbsp;<span class="op" id="6020110">:=</span>&nbsp;<span class="keyword" id="6020113">range</span>&nbsp;<span class="ident" id="6020119"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6020120">.</span><span class="ident" id="6020121">Specs</span>&nbsp;<span class="op" id="6020127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6020134">if</span>&nbsp;<span class="ident" id="6020137">s</span><span class="op" id="6020138">,</span>&nbsp;<span class="ident" id="6020140">ok</span>&nbsp;<span class="op" id="6020143">:=</span>&nbsp;<span class="ident" id="6020146"><a href="/go/doc/reader.go.html#6020105">spec</a></span><span class="op" id="6020150">.</span><span class="op" id="6020151">(</span><span class="op" id="6020152">*</span><span class="ident" id="6020153"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6020156">.</span><span class="ident" id="6020157">TypeSpec</span><span class="op" id="6020165">)</span><span class="op" id="6020166">;</span>&nbsp;<span class="ident" id="6020168"><a href="/go/doc/reader.go.html#6020140">ok</a></span>&nbsp;<span class="op" id="6020171">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020179">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020234">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020291">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020347">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020404">fake</span>&nbsp;<span class="op" id="6020409">:=</span>&nbsp;<span class="op" id="6020412">&amp;</span><span class="ident" id="6020413"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6020416">.</span><span class="ident" id="6020417">GenDecl</span><span class="op" id="6020424">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020433">Doc</span><span class="op" id="6020436">:</span>&nbsp;<span class="ident" id="6020438"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6020439">.</span><span class="ident" id="6020440">Doc</span><span class="op" id="6020443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020452">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020503">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020556">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020605">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020656">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020708">TokPos</span><span class="op" id="6020714">:</span>&nbsp;<span class="ident" id="6020716"><a href="/go/doc/reader.go.html#6020137">s</a></span><span class="op" id="6020717">.</span><span class="ident" id="6020718">Pos</span><span class="op" id="6020721">(</span><span class="op" id="6020722">)</span><span class="op" id="6020723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020732">Tok</span><span class="op" id="6020735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6020740"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6020745">.</span><span class="ident" id="6020746">TYPE</span><span class="op" id="6020750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020759">Specs</span><span class="op" id="6020764">:</span>&nbsp;&nbsp;<span class="op" id="6020767">[</span><span class="op" id="6020768">]</span><span class="ident" id="6020769"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6020772">.</span><span class="ident" id="6020773">Spec</span><span class="op" id="6020777">{</span><span class="ident" id="6020778"><a href="/go/doc/reader.go.html#6020137">s</a></span><span class="op" id="6020779">}</span><span class="op" id="6020780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020788">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020796"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6020797">.</span><span class="ident" id="6020798">readType</span><span class="op" id="6020806">(</span><span class="ident" id="6020807"><a href="/go/doc/reader.go.html#6020404">fake</a></span><span class="op" id="6020811">,</span>&nbsp;<span class="ident" id="6020813"><a href="/go/doc/reader.go.html#6020137">s</a></span><span class="op" id="6020814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6020836">case</span>&nbsp;<span class="op" id="6020841">*</span><span class="ident" id="6020842"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6020845">.</span><span class="ident" id="6020846">FuncDecl</span><span class="op" id="6020854">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020859"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6020860">.</span><span class="ident" id="6020861">readFunc</span><span class="op" id="6020869">(</span><span class="ident" id="6020870"><a href="/go/doc/reader.go.html#6019224">d</a></span><span class="op" id="6020871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6020878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6020882">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020919"><a href="/go/doc/reader.go.html#6018993">r</a></span><span class="op" id="6020920">.</span><span class="ident" id="6020921">readNotes</span><span class="op" id="6020930">(</span><span class="ident" id="6020931"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6020934">.</span><span class="ident" id="6020935">Comments</span><span class="op" id="6020943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6020946"><a href="/go/doc/reader.go.html#6019013">src</a></span><span class="op" id="6020949">.</span><span class="ident" id="6020950">Comments</span>&nbsp;<span class="op" id="6020959">=</span>&nbsp;<span class="ident" id="6020961">nil</span>&nbsp;<span class="comment" id="6020965">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6021017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6021020">func</span>&nbsp;<span class="op" id="6021025">(</span><span class="ident" id="6021026">r</span>&nbsp;<span class="op" id="6021028">*</span><span class="ident" id="6021029"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6021035">)</span>&nbsp;<span class="ident" id="6021037">readPackage</span><span class="op" id="6021048">(</span><span class="ident" id="6021049">pkg</span>&nbsp;<span class="op" id="6021053">*</span><span class="ident" id="6021054"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6021057">.</span><span class="ident" id="6021058">Package</span><span class="op" id="6021065">,</span>&nbsp;<span class="ident" id="6021067">mode</span>&nbsp;<span class="ident" id="6021072"><a href="/go/doc/doc.go.html#5987325">Mode</a></span><span class="op" id="6021076">)</span>&nbsp;<span class="op" id="6021078">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6021081">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021103"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021104">.</span><span class="ident" id="6021105">filenames</span>&nbsp;<span class="op" id="6021115">=</span>&nbsp;<span class="builtinfunc" id="6021117">make</span><span class="op" id="6021121">(</span><span class="op" id="6021122">[</span><span class="op" id="6021123">]</span><span class="builtintype" id="6021124">string</span><span class="op" id="6021130">,</span>&nbsp;<span class="builtinfunc" id="6021132">len</span><span class="op" id="6021135">(</span><span class="ident" id="6021136"><a href="/go/doc/reader.go.html#6021049">pkg</a></span><span class="op" id="6021139">.</span><span class="ident" id="6021140">Files</span><span class="op" id="6021145">)</span><span class="op" id="6021146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021149"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021150">.</span><span class="ident" id="6021151">imports</span>&nbsp;<span class="op" id="6021159">=</span>&nbsp;<span class="builtinfunc" id="6021161">make</span><span class="op" id="6021165">(</span><span class="keyword" id="6021166">map</span><span class="op" id="6021169">[</span><span class="builtintype" id="6021170">string</span><span class="op" id="6021176">]</span><span class="builtintype" id="6021177">int</span><span class="op" id="6021180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021183"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021184">.</span><span class="ident" id="6021185">mode</span>&nbsp;<span class="op" id="6021190">=</span>&nbsp;<span class="ident" id="6021192"><a href="/go/doc/reader.go.html#6021067">mode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021198"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021199">.</span><span class="ident" id="6021200">types</span>&nbsp;<span class="op" id="6021206">=</span>&nbsp;<span class="builtinfunc" id="6021208">make</span><span class="op" id="6021212">(</span><span class="keyword" id="6021213">map</span><span class="op" id="6021216">[</span><span class="builtintype" id="6021217">string</span><span class="op" id="6021223">]</span><span class="op" id="6021224">*</span><span class="ident" id="6021225"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6021234">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021237"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021238">.</span><span class="ident" id="6021239">funcs</span>&nbsp;<span class="op" id="6021245">=</span>&nbsp;<span class="builtinfunc" id="6021247">make</span><span class="op" id="6021251">(</span><span class="ident" id="6021252"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6021261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021264"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021265">.</span><span class="ident" id="6021266">notes</span>&nbsp;<span class="op" id="6021272">=</span>&nbsp;<span class="builtinfunc" id="6021274">make</span><span class="op" id="6021278">(</span><span class="keyword" id="6021279">map</span><span class="op" id="6021282">[</span><span class="builtintype" id="6021283">string</span><span class="op" id="6021289">]</span><span class="op" id="6021290">[</span><span class="op" id="6021291">]</span><span class="op" id="6021292">*</span><span class="ident" id="6021293"><a href="/go/doc/doc.go.html#5987096">Note</a></span><span class="op" id="6021297">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6021301">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6021356">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021406">i</span>&nbsp;<span class="op" id="6021408">:=</span>&nbsp;<span class="num" id="6021411">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6021414">for</span>&nbsp;<span class="ident" id="6021418">filename</span>&nbsp;<span class="op" id="6021427">:=</span>&nbsp;<span class="keyword" id="6021430">range</span>&nbsp;<span class="ident" id="6021436"><a href="/go/doc/reader.go.html#6021049">pkg</a></span><span class="op" id="6021439">.</span><span class="ident" id="6021440">Files</span>&nbsp;<span class="op" id="6021446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021450"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021451">.</span><span class="ident" id="6021452">filenames</span><span class="op" id="6021461">[</span><span class="ident" id="6021462"><a href="/go/doc/reader.go.html#6021406">i</a></span><span class="op" id="6021463">]</span>&nbsp;<span class="op" id="6021465">=</span>&nbsp;<span class="ident" id="6021467"><a href="/go/doc/reader.go.html#6021418">filename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021478"><a href="/go/doc/reader.go.html#6021406">i</a></span><span class="op" id="6021479">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6021483">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021486"><a href="/go/doc/reader.go.html#6006425">sort</a></span><span class="op" id="6021490">.</span><span class="ident" id="6021491">Strings</span><span class="op" id="6021498">(</span><span class="ident" id="6021499"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021500">.</span><span class="ident" id="6021501">filenames</span><span class="op" id="6021510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6021514">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6021548">for</span>&nbsp;<span class="ident" id="6021552">_</span><span class="op" id="6021553">,</span>&nbsp;<span class="ident" id="6021555">filename</span>&nbsp;<span class="op" id="6021564">:=</span>&nbsp;<span class="keyword" id="6021567">range</span>&nbsp;<span class="ident" id="6021573"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021574">.</span><span class="ident" id="6021575">filenames</span>&nbsp;<span class="op" id="6021585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021589">f</span>&nbsp;<span class="op" id="6021591">:=</span>&nbsp;<span class="ident" id="6021594"><a href="/go/doc/reader.go.html#6021049">pkg</a></span><span class="op" id="6021597">.</span><span class="ident" id="6021598">Files</span><span class="op" id="6021603">[</span><span class="ident" id="6021604"><a href="/go/doc/reader.go.html#6021555">filename</a></span><span class="op" id="6021612">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6021616">if</span>&nbsp;<span class="ident" id="6021619"><a href="/go/doc/reader.go.html#6021067">mode</a></span><span class="op" id="6021623">&amp;</span><span class="ident" id="6021624"><a href="/go/doc/doc.go.html#5987433">AllDecls</a></span>&nbsp;<span class="op" id="6021633">==</span>&nbsp;<span class="num" id="6021636">0</span>&nbsp;<span class="op" id="6021638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021643"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021644">.</span><span class="ident" id="6021645">fileExports</span><span class="op" id="6021656">(</span><span class="ident" id="6021657"><a href="/go/doc/reader.go.html#6021589">f</a></span><span class="op" id="6021658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6021662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6021666"><a href="/go/doc/reader.go.html#6021026">r</a></span><span class="op" id="6021667">.</span><span class="ident" id="6021668">readFile</span><span class="op" id="6021676">(</span><span class="ident" id="6021677"><a href="/go/doc/reader.go.html#6021589">f</a></span><span class="op" id="6021678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6021681">}</span><br>
<span class="lineno">550</span><span class="op" id="6021683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6021686">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6021766">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6021776">func</span>&nbsp;<span class="ident" id="6021781">customizeRecv</span><span class="op" id="6021794">(</span><span class="ident" id="6021795">f</span>&nbsp;<span class="op" id="6021797">*</span><span class="ident" id="6021798"><a href="/go/doc/doc.go.html#5986489">Func</a></span><span class="op" id="6021802">,</span>&nbsp;<span class="ident" id="6021804">recvTypeName</span>&nbsp;<span class="builtintype" id="6021817">string</span><span class="op" id="6021823">,</span>&nbsp;<span class="ident" id="6021825">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6021839">bool</span><span class="op" id="6021843">,</span>&nbsp;<span class="ident" id="6021845">level</span>&nbsp;<span class="builtintype" id="6021851">int</span><span class="op" id="6021854">)</span>&nbsp;<span class="op" id="6021856">*</span><span class="ident" id="6021857"><a href="/go/doc/doc.go.html#5986489">Func</a></span>&nbsp;<span class="op" id="6021862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6021865">if</span>&nbsp;<span class="ident" id="6021868"><a href="/go/doc/reader.go.html#6021795">f</a></span>&nbsp;<span class="op" id="6021870">==</span>&nbsp;<span class="ident" id="6021873">nil</span>&nbsp;<span class="op" id="6021877">||</span>&nbsp;<span class="ident" id="6021880"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6021881">.</span><span class="ident" id="6021882">Decl</span>&nbsp;<span class="op" id="6021887">==</span>&nbsp;<span class="ident" id="6021890">nil</span>&nbsp;<span class="op" id="6021894">||</span>&nbsp;<span class="ident" id="6021897"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6021898">.</span><span class="ident" id="6021899">Decl</span><span class="op" id="6021903">.</span><span class="ident" id="6021904">Recv</span>&nbsp;<span class="op" id="6021909">==</span>&nbsp;<span class="ident" id="6021912">nil</span>&nbsp;<span class="op" id="6021916">||</span>&nbsp;<span class="builtinfunc" id="6021919">len</span><span class="op" id="6021922">(</span><span class="ident" id="6021923"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6021924">.</span><span class="ident" id="6021925">Decl</span><span class="op" id="6021929">.</span><span class="ident" id="6021930">Recv</span><span class="op" id="6021934">.</span><span class="ident" id="6021935">List</span><span class="op" id="6021939">)</span>&nbsp;<span class="op" id="6021941">!=</span>&nbsp;<span class="num" id="6021944">1</span>&nbsp;<span class="op" id="6021946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6021950">return</span>&nbsp;<span class="ident" id="6021957"><a href="/go/doc/reader.go.html#6021795">f</a></span>&nbsp;<span class="comment" id="6021959">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6021993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6021997">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022047">newField</span>&nbsp;<span class="op" id="6022056">:=</span>&nbsp;<span class="op" id="6022059">*</span><span class="ident" id="6022060"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6022061">.</span><span class="ident" id="6022062">Decl</span><span class="op" id="6022066">.</span><span class="ident" id="6022067">Recv</span><span class="op" id="6022071">.</span><span class="ident" id="6022072">List</span><span class="op" id="6022076">[</span><span class="num" id="6022077">0</span><span class="op" id="6022078">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022081">origPos</span>&nbsp;<span class="op" id="6022089">:=</span>&nbsp;<span class="ident" id="6022092"><a href="/go/doc/reader.go.html#6022047">newField</a></span><span class="op" id="6022100">.</span><span class="ident" id="6022101">Type</span><span class="op" id="6022105">.</span><span class="ident" id="6022106">Pos</span><span class="op" id="6022109">(</span><span class="op" id="6022110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022113">_</span><span class="op" id="6022114">,</span>&nbsp;<span class="ident" id="6022116">origRecvIsPtr</span>&nbsp;<span class="op" id="6022130">:=</span>&nbsp;<span class="ident" id="6022133"><a href="/go/doc/reader.go.html#6022047">newField</a></span><span class="op" id="6022141">.</span><span class="ident" id="6022142">Type</span><span class="op" id="6022146">.</span><span class="op" id="6022147">(</span><span class="op" id="6022148">*</span><span class="ident" id="6022149"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6022152">.</span><span class="ident" id="6022153">StarExpr</span><span class="op" id="6022161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022164">newIdent</span>&nbsp;<span class="op" id="6022173">:=</span>&nbsp;<span class="op" id="6022176">&amp;</span><span class="ident" id="6022177"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6022180">.</span><span class="ident" id="6022181">Ident</span><span class="op" id="6022186">{</span><span class="ident" id="6022187">NamePos</span><span class="op" id="6022194">:</span>&nbsp;<span class="ident" id="6022196"><a href="/go/doc/reader.go.html#6022081">origPos</a></span><span class="op" id="6022203">,</span>&nbsp;<span class="ident" id="6022205">Name</span><span class="op" id="6022209">:</span>&nbsp;<span class="ident" id="6022211"><a href="/go/doc/reader.go.html#6021804">recvTypeName</a></span><span class="op" id="6022223">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6022226">var</span>&nbsp;<span class="ident" id="6022230">typ</span>&nbsp;<span class="ident" id="6022234"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6022237">.</span><span class="ident" id="6022238">Expr</span>&nbsp;<span class="op" id="6022243">=</span>&nbsp;<span class="ident" id="6022245"><a href="/go/doc/reader.go.html#6022164">newIdent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6022255">if</span>&nbsp;<span class="op" id="6022258">!</span><span class="ident" id="6022259"><a href="/go/doc/reader.go.html#6021825">embeddedIsPtr</a></span>&nbsp;<span class="op" id="6022273">&amp;&amp;</span>&nbsp;<span class="ident" id="6022276"><a href="/go/doc/reader.go.html#6022116">origRecvIsPtr</a></span>&nbsp;<span class="op" id="6022290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022294"><a href="/go/doc/reader.go.html#6022164">newIdent</a></span><span class="op" id="6022302">.</span><span class="ident" id="6022303">NamePos</span><span class="op" id="6022310">++</span>&nbsp;<span class="comment" id="6022313">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022339"><a href="/go/doc/reader.go.html#6022230">typ</a></span>&nbsp;<span class="op" id="6022343">=</span>&nbsp;<span class="op" id="6022345">&amp;</span><span class="ident" id="6022346"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6022349">.</span><span class="ident" id="6022350">StarExpr</span><span class="op" id="6022358">{</span><span class="ident" id="6022359">Star</span><span class="op" id="6022363">:</span>&nbsp;<span class="ident" id="6022365"><a href="/go/doc/reader.go.html#6022081">origPos</a></span><span class="op" id="6022372">,</span>&nbsp;<span class="ident" id="6022374">X</span><span class="op" id="6022375">:</span>&nbsp;<span class="ident" id="6022377"><a href="/go/doc/reader.go.html#6022164">newIdent</a></span><span class="op" id="6022385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6022388">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022391"><a href="/go/doc/reader.go.html#6022047">newField</a></span><span class="op" id="6022399">.</span><span class="ident" id="6022400">Type</span>&nbsp;<span class="op" id="6022405">=</span>&nbsp;<span class="ident" id="6022407"><a href="/go/doc/reader.go.html#6022230">typ</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6022413">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022478">newFieldList</span>&nbsp;<span class="op" id="6022491">:=</span>&nbsp;<span class="op" id="6022494">*</span><span class="ident" id="6022495"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6022496">.</span><span class="ident" id="6022497">Decl</span><span class="op" id="6022501">.</span><span class="ident" id="6022502">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022508"><a href="/go/doc/reader.go.html#6022478">newFieldList</a></span><span class="op" id="6022520">.</span><span class="ident" id="6022521">List</span>&nbsp;<span class="op" id="6022526">=</span>&nbsp;<span class="op" id="6022528">[</span><span class="op" id="6022529">]</span><span class="op" id="6022530">*</span><span class="ident" id="6022531"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6022534">.</span><span class="ident" id="6022535">Field</span><span class="op" id="6022540">{</span><span class="op" id="6022541">&amp;</span><span class="ident" id="6022542"><a href="/go/doc/reader.go.html#6022047">newField</a></span><span class="op" id="6022550">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6022554">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022625">newFuncDecl</span>&nbsp;<span class="op" id="6022637">:=</span>&nbsp;<span class="op" id="6022640">*</span><span class="ident" id="6022641"><a href="/go/doc/reader.go.html#6021795">f</a></span><span class="op" id="6022642">.</span><span class="ident" id="6022643">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022649"><a href="/go/doc/reader.go.html#6022625">newFuncDecl</a></span><span class="op" id="6022660">.</span><span class="ident" id="6022661">Recv</span>&nbsp;<span class="op" id="6022666">=</span>&nbsp;<span class="op" id="6022668">&amp;</span><span class="ident" id="6022669"><a href="/go/doc/reader.go.html#6022478">newFieldList</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6022684">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022749">newF</span>&nbsp;<span class="op" id="6022754">:=</span>&nbsp;<span class="op" id="6022757">*</span><span class="ident" id="6022758"><a href="/go/doc/reader.go.html#6021795">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022761"><a href="/go/doc/reader.go.html#6022749">newF</a></span><span class="op" id="6022765">.</span><span class="ident" id="6022766">Decl</span>&nbsp;<span class="op" id="6022771">=</span>&nbsp;<span class="op" id="6022773">&amp;</span><span class="ident" id="6022774"><a href="/go/doc/reader.go.html#6022625">newFuncDecl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022787"><a href="/go/doc/reader.go.html#6022749">newF</a></span><span class="op" id="6022791">.</span><span class="ident" id="6022792">Recv</span>&nbsp;<span class="op" id="6022797">=</span>&nbsp;<span class="ident" id="6022799"><a href="/go/doc/reader.go.html#6006968">recvString</a></span><span class="op" id="6022809">(</span><span class="ident" id="6022810"><a href="/go/doc/reader.go.html#6022230">typ</a></span><span class="op" id="6022813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6022816">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6022849"><a href="/go/doc/reader.go.html#6022749">newF</a></span><span class="op" id="6022853">.</span><span class="ident" id="6022854">Level</span>&nbsp;<span class="op" id="6022860">=</span>&nbsp;<span class="ident" id="6022862"><a href="/go/doc/reader.go.html#6021845">level</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6022870">return</span>&nbsp;<span class="op" id="6022877">&amp;</span><span class="ident" id="6022878"><a href="/go/doc/reader.go.html#6022749">newF</a></span><br>
<span class="lineno"></span><span class="op" id="6022883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="6022886">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6022958">//</span><br>
<span class="lineno"></span><span class="keyword" id="6022961">func</span>&nbsp;<span class="op" id="6022966">(</span><span class="ident" id="6022967">r</span>&nbsp;<span class="op" id="6022969">*</span><span class="ident" id="6022970"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6022976">)</span>&nbsp;<span class="ident" id="6022978">collectEmbeddedMethods</span><span class="op" id="6023000">(</span><span class="ident" id="6023001">mset</span>&nbsp;<span class="ident" id="6023006"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6023015">,</span>&nbsp;<span class="ident" id="6023017">typ</span>&nbsp;<span class="op" id="6023021">*</span><span class="ident" id="6023022"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6023031">,</span>&nbsp;<span class="ident" id="6023033">recvTypeName</span>&nbsp;<span class="builtintype" id="6023046">string</span><span class="op" id="6023052">,</span>&nbsp;<span class="ident" id="6023054">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6023068">bool</span><span class="op" id="6023072">,</span>&nbsp;<span class="ident" id="6023074">level</span>&nbsp;<span class="builtintype" id="6023080">int</span><span class="op" id="6023083">,</span>&nbsp;<span class="ident" id="6023085">visited</span>&nbsp;<span class="ident" id="6023093"><a href="/go/doc/reader.go.html#6009212">embeddedSet</a></span><span class="op" id="6023104">)</span>&nbsp;<span class="op" id="6023106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6023109"><a href="/go/doc/reader.go.html#6023085">visited</a></span><span class="op" id="6023116">[</span><span class="ident" id="6023117"><a href="/go/doc/reader.go.html#6023017">typ</a></span><span class="op" id="6023120">]</span>&nbsp;<span class="op" id="6023122">=</span>&nbsp;<span class="ident" id="6023124">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023130">for</span>&nbsp;<span class="ident" id="6023134">embedded</span><span class="op" id="6023142">,</span>&nbsp;<span class="ident" id="6023144">isPtr</span>&nbsp;<span class="op" id="6023150">:=</span>&nbsp;<span class="keyword" id="6023153">range</span>&nbsp;<span class="ident" id="6023159"><a href="/go/doc/reader.go.html#6023017">typ</a></span><span class="op" id="6023162">.</span><span class="ident" id="6023163">embedded</span>&nbsp;<span class="op" id="6023172">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023176">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023233">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023289">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023345">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023402">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6023428">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="6023446">:=</span>&nbsp;<span class="ident" id="6023449"><a href="/go/doc/reader.go.html#6023054">embeddedIsPtr</a></span>&nbsp;<span class="op" id="6023463">||</span>&nbsp;<span class="ident" id="6023466"><a href="/go/doc/reader.go.html#6023144">isPtr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023474">for</span>&nbsp;<span class="ident" id="6023478">_</span><span class="op" id="6023479">,</span>&nbsp;<span class="ident" id="6023481">m</span>&nbsp;<span class="op" id="6023483">:=</span>&nbsp;<span class="keyword" id="6023486">range</span>&nbsp;<span class="ident" id="6023492"><a href="/go/doc/reader.go.html#6023134">embedded</a></span><span class="op" id="6023500">.</span><span class="ident" id="6023501">methods</span>&nbsp;<span class="op" id="6023509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023514">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023556">if</span>&nbsp;<span class="ident" id="6023559"><a href="/go/doc/reader.go.html#6023481">m</a></span><span class="op" id="6023560">.</span><span class="ident" id="6023561">Level</span>&nbsp;<span class="op" id="6023567">==</span>&nbsp;<span class="num" id="6023570">0</span>&nbsp;<span class="op" id="6023572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6023578"><a href="/go/doc/reader.go.html#6023001">mset</a></span><span class="op" id="6023582">.</span><span class="ident" id="6023583">add</span><span class="op" id="6023586">(</span><span class="ident" id="6023587"><a href="/go/doc/reader.go.html#6021781">customizeRecv</a></span><span class="op" id="6023600">(</span><span class="ident" id="6023601"><a href="/go/doc/reader.go.html#6023481">m</a></span><span class="op" id="6023602">,</span>&nbsp;<span class="ident" id="6023604"><a href="/go/doc/reader.go.html#6023033">recvTypeName</a></span><span class="op" id="6023616">,</span>&nbsp;<span class="ident" id="6023618"><a href="/go/doc/reader.go.html#6023428">thisEmbeddedIsPtr</a></span><span class="op" id="6023635">,</span>&nbsp;<span class="ident" id="6023637"><a href="/go/doc/reader.go.html#6023074">level</a></span><span class="op" id="6023642">)</span><span class="op" id="6023643">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6023648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6023652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023656">if</span>&nbsp;<span class="op" id="6023659">!</span><span class="ident" id="6023660"><a href="/go/doc/reader.go.html#6023085">visited</a></span><span class="op" id="6023667">[</span><span class="ident" id="6023668"><a href="/go/doc/reader.go.html#6023134">embedded</a></span><span class="op" id="6023676">]</span>&nbsp;<span class="op" id="6023678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6023683"><a href="/go/doc/reader.go.html#6022967">r</a></span><span class="op" id="6023684">.</span><span class="ident" id="6023685">collectEmbeddedMethods</span><span class="op" id="6023707">(</span><span class="ident" id="6023708"><a href="/go/doc/reader.go.html#6023001">mset</a></span><span class="op" id="6023712">,</span>&nbsp;<span class="ident" id="6023714"><a href="/go/doc/reader.go.html#6023134">embedded</a></span><span class="op" id="6023722">,</span>&nbsp;<span class="ident" id="6023724"><a href="/go/doc/reader.go.html#6023033">recvTypeName</a></span><span class="op" id="6023736">,</span>&nbsp;<span class="ident" id="6023738"><a href="/go/doc/reader.go.html#6023428">thisEmbeddedIsPtr</a></span><span class="op" id="6023755">,</span>&nbsp;<span class="ident" id="6023757"><a href="/go/doc/reader.go.html#6023074">level</a></span><span class="op" id="6023762">+</span><span class="num" id="6023763">1</span><span class="op" id="6023764">,</span>&nbsp;<span class="ident" id="6023766"><a href="/go/doc/reader.go.html#6023085">visited</a></span><span class="op" id="6023773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6023777">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6023780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6023783">delete</span><span class="op" id="6023789">(</span><span class="ident" id="6023790"><a href="/go/doc/reader.go.html#6023085">visited</a></span><span class="op" id="6023797">,</span>&nbsp;<span class="ident" id="6023799"><a href="/go/doc/reader.go.html#6023017">typ</a></span><span class="op" id="6023802">)</span><br>
<span class="lineno"></span><span class="op" id="6023804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6023807">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="6023889">//</span><br>
<span class="lineno"></span><span class="keyword" id="6023892">func</span>&nbsp;<span class="op" id="6023897">(</span><span class="ident" id="6023898">r</span>&nbsp;<span class="op" id="6023900">*</span><span class="ident" id="6023901"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6023907">)</span>&nbsp;<span class="ident" id="6023909">computeMethodSets</span><span class="op" id="6023926">(</span><span class="op" id="6023927">)</span>&nbsp;<span class="op" id="6023929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023932">for</span>&nbsp;<span class="ident" id="6023936">_</span><span class="op" id="6023937">,</span>&nbsp;<span class="ident" id="6023939">t</span>&nbsp;<span class="op" id="6023941">:=</span>&nbsp;<span class="keyword" id="6023944">range</span>&nbsp;<span class="ident" id="6023950"><a href="/go/doc/reader.go.html#6023898">r</a></span><span class="op" id="6023951">.</span><span class="ident" id="6023952">types</span>&nbsp;<span class="op" id="6023958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6023962">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6023998">if</span>&nbsp;<span class="ident" id="6024001"><a href="/go/doc/reader.go.html#6023939">t</a></span><span class="op" id="6024002">.</span><span class="ident" id="6024003">isStruct</span>&nbsp;<span class="op" id="6024012">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024017">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6024030"><a href="/go/doc/reader.go.html#6023898">r</a></span><span class="op" id="6024031">.</span><span class="ident" id="6024032">collectEmbeddedMethods</span><span class="op" id="6024054">(</span><span class="ident" id="6024055"><a href="/go/doc/reader.go.html#6023939">t</a></span><span class="op" id="6024056">.</span><span class="ident" id="6024057">methods</span><span class="op" id="6024064">,</span>&nbsp;<span class="ident" id="6024066"><a href="/go/doc/reader.go.html#6023939">t</a></span><span class="op" id="6024067">,</span>&nbsp;<span class="ident" id="6024069"><a href="/go/doc/reader.go.html#6023939">t</a></span><span class="op" id="6024070">.</span><span class="ident" id="6024071">name</span><span class="op" id="6024075">,</span>&nbsp;<span class="ident" id="6024077">false</span><span class="op" id="6024082">,</span>&nbsp;<span class="num" id="6024084">1</span><span class="op" id="6024085">,</span>&nbsp;<span class="builtinfunc" id="6024087">make</span><span class="op" id="6024091">(</span><span class="ident" id="6024092"><a href="/go/doc/reader.go.html#6009212">embeddedSet</a></span><span class="op" id="6024103">)</span><span class="op" id="6024104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6024108">}</span>&nbsp;<span class="keyword" id="6024110">else</span>&nbsp;<span class="op" id="6024115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024120">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024136">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6024160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6024163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024167">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6024243">if</span>&nbsp;<span class="ident" id="6024246"><a href="/go/doc/reader.go.html#6023898">r</a></span><span class="op" id="6024247">.</span><span class="ident" id="6024248">errorDecl</span>&nbsp;<span class="op" id="6024258">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6024262">for</span>&nbsp;<span class="ident" id="6024266">_</span><span class="op" id="6024267">,</span>&nbsp;<span class="ident" id="6024269">ityp</span>&nbsp;<span class="op" id="6024274">:=</span>&nbsp;<span class="keyword" id="6024277">range</span>&nbsp;<span class="ident" id="6024283"><a href="/go/doc/reader.go.html#6023898">r</a></span><span class="op" id="6024284">.</span><span class="ident" id="6024285">fixlist</span>&nbsp;<span class="op" id="6024293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6024298"><a href="/go/doc/exports.go.html#5999686">removeErrorField</a></span><span class="op" id="6024314">(</span><span class="ident" id="6024315"><a href="/go/doc/reader.go.html#6024269">ityp</a></span><span class="op" id="6024319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6024323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6024326">}</span><br>
<span class="lineno"></span><span class="op" id="6024328">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="6024331">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6024401">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="6024473">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="6024543">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="6024585">//</span><br>
<span class="lineno"></span><span class="keyword" id="6024588">func</span>&nbsp;<span class="op" id="6024593">(</span><span class="ident" id="6024594">r</span>&nbsp;<span class="op" id="6024596">*</span><span class="ident" id="6024597"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6024603">)</span>&nbsp;<span class="ident" id="6024605">cleanupTypes</span><span class="op" id="6024617">(</span><span class="op" id="6024618">)</span>&nbsp;<span class="op" id="6024620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6024623">for</span>&nbsp;<span class="ident" id="6024627">_</span><span class="op" id="6024628">,</span>&nbsp;<span class="ident" id="6024630">t</span>&nbsp;<span class="op" id="6024632">:=</span>&nbsp;<span class="keyword" id="6024635">range</span>&nbsp;<span class="ident" id="6024641"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6024642">.</span><span class="ident" id="6024643">types</span>&nbsp;<span class="op" id="6024649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6024653">visible</span>&nbsp;<span class="op" id="6024661">:=</span>&nbsp;<span class="ident" id="6024664"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6024665">.</span><span class="ident" id="6024666">isVisible</span><span class="op" id="6024675">(</span><span class="ident" id="6024676"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6024677">.</span><span class="ident" id="6024678">name</span><span class="op" id="6024682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6024686">if</span>&nbsp;<span class="ident" id="6024689"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6024690">.</span><span class="ident" id="6024691">decl</span>&nbsp;<span class="op" id="6024696">==</span>&nbsp;<span class="ident" id="6024699">nil</span>&nbsp;<span class="op" id="6024703">&amp;&amp;</span>&nbsp;<span class="op" id="6024706">(</span><span class="ident" id="6024707"><a href="/go/doc/reader.go.html#6028695">predeclaredTypes</a></span><span class="op" id="6024723">[</span><span class="ident" id="6024724"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6024725">.</span><span class="ident" id="6024726">name</span><span class="op" id="6024730">]</span>&nbsp;<span class="op" id="6024732">||</span>&nbsp;<span class="ident" id="6024735"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6024736">.</span><span class="ident" id="6024737">isEmbedded</span>&nbsp;<span class="op" id="6024748">&amp;&amp;</span>&nbsp;<span class="ident" id="6024751"><a href="/go/doc/reader.go.html#6024653">visible</a></span><span class="op" id="6024758">)</span>&nbsp;<span class="op" id="6024760">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024765">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024842">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024917">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6024994">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025049">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025070"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025071">.</span><span class="ident" id="6025072">values</span>&nbsp;<span class="op" id="6025079">=</span>&nbsp;<span class="builtinfunc" id="6025081">append</span><span class="op" id="6025087">(</span><span class="ident" id="6025088"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025089">.</span><span class="ident" id="6025090">values</span><span class="op" id="6025096">,</span>&nbsp;<span class="ident" id="6025098"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6025099">.</span><span class="ident" id="6025100">values</span><span class="op" id="6025106">...</span><span class="op" id="6025109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025114">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6025146">for</span>&nbsp;<span class="ident" id="6025150">name</span><span class="op" id="6025154">,</span>&nbsp;<span class="ident" id="6025156">f</span>&nbsp;<span class="op" id="6025158">:=</span>&nbsp;<span class="keyword" id="6025161">range</span>&nbsp;<span class="ident" id="6025167"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6025168">.</span><span class="ident" id="6025169">funcs</span>&nbsp;<span class="op" id="6025175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025181">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025235">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025293"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025294">.</span><span class="ident" id="6025295">funcs</span><span class="op" id="6025300">[</span><span class="ident" id="6025301"><a href="/go/doc/reader.go.html#6025150">name</a></span><span class="op" id="6025305">]</span>&nbsp;<span class="op" id="6025307">=</span>&nbsp;<span class="ident" id="6025309"><a href="/go/doc/reader.go.html#6025156">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025319">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6025341">for</span>&nbsp;<span class="ident" id="6025345">name</span><span class="op" id="6025349">,</span>&nbsp;<span class="ident" id="6025351">m</span>&nbsp;<span class="op" id="6025353">:=</span>&nbsp;<span class="keyword" id="6025356">range</span>&nbsp;<span class="ident" id="6025362"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6025363">.</span><span class="ident" id="6025364">methods</span>&nbsp;<span class="op" id="6025372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025378">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6025442">if</span>&nbsp;<span class="ident" id="6025445">_</span><span class="op" id="6025446">,</span>&nbsp;<span class="ident" id="6025448">found</span>&nbsp;<span class="op" id="6025454">:=</span>&nbsp;<span class="ident" id="6025457"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025458">.</span><span class="ident" id="6025459">funcs</span><span class="op" id="6025464">[</span><span class="ident" id="6025465"><a href="/go/doc/reader.go.html#6025345">name</a></span><span class="op" id="6025469">]</span><span class="op" id="6025470">;</span>&nbsp;<span class="op" id="6025472">!</span><span class="ident" id="6025473"><a href="/go/doc/reader.go.html#6025448">found</a></span>&nbsp;<span class="op" id="6025479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025486"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025487">.</span><span class="ident" id="6025488">funcs</span><span class="op" id="6025493">[</span><span class="ident" id="6025494"><a href="/go/doc/reader.go.html#6025345">name</a></span><span class="op" id="6025498">]</span>&nbsp;<span class="op" id="6025500">=</span>&nbsp;<span class="ident" id="6025502"><a href="/go/doc/reader.go.html#6025351">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025517">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6025521">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6025580">if</span>&nbsp;<span class="ident" id="6025583"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6025584">.</span><span class="ident" id="6025585">decl</span>&nbsp;<span class="op" id="6025590">==</span>&nbsp;<span class="ident" id="6025593">nil</span>&nbsp;<span class="op" id="6025597">||</span>&nbsp;<span class="op" id="6025600">!</span><span class="ident" id="6025601"><a href="/go/doc/reader.go.html#6024653">visible</a></span>&nbsp;<span class="op" id="6025609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6025614">delete</span><span class="op" id="6025620">(</span><span class="ident" id="6025621"><a href="/go/doc/reader.go.html#6024594">r</a></span><span class="op" id="6025622">.</span><span class="ident" id="6025623">types</span><span class="op" id="6025628">,</span>&nbsp;<span class="ident" id="6025630"><a href="/go/doc/reader.go.html#6024630">t</a></span><span class="op" id="6025631">.</span><span class="ident" id="6025632">name</span><span class="op" id="6025636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6025643">}</span><br>
<span class="lineno">670</span><span class="op" id="6025645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6025648">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6025728">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6025740">type</span>&nbsp;<span class="ident" id="6025745">data</span>&nbsp;<span class="keyword" id="6025750">struct</span>&nbsp;<span class="op" id="6025757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025760">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6025765">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025770">swap</span>&nbsp;<span class="keyword" id="6025775">func</span><span class="op" id="6025779">(</span><span class="ident" id="6025780">i</span><span class="op" id="6025781">,</span>&nbsp;<span class="ident" id="6025783">j</span>&nbsp;<span class="builtintype" id="6025785">int</span><span class="op" id="6025788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6025791">less</span>&nbsp;<span class="keyword" id="6025796">func</span><span class="op" id="6025800">(</span><span class="ident" id="6025801">i</span><span class="op" id="6025802">,</span>&nbsp;<span class="ident" id="6025804">j</span>&nbsp;<span class="builtintype" id="6025806">int</span><span class="op" id="6025809">)</span>&nbsp;<span class="builtintype" id="6025811">bool</span><br>
<span class="lineno"></span><span class="op" id="6025816">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="6025819">func</span>&nbsp;<span class="op" id="6025824">(</span><span class="ident" id="6025825">d</span>&nbsp;<span class="op" id="6025827">*</span><span class="ident" id="6025828"><a href="/go/doc/reader.go.html#6025745">data</a></span><span class="op" id="6025832">)</span>&nbsp;<span class="ident" id="6025834">Len</span><span class="op" id="6025837">(</span><span class="op" id="6025838">)</span>&nbsp;<span class="builtintype" id="6025840">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025854">{</span>&nbsp;<span class="keyword" id="6025856">return</span>&nbsp;<span class="ident" id="6025863"><a href="/go/doc/reader.go.html#6025825">d</a></span><span class="op" id="6025864">.</span><span class="ident" id="6025865">n</span>&nbsp;<span class="op" id="6025867">}</span><br>
<span class="lineno"></span><span class="keyword" id="6025869">func</span>&nbsp;<span class="op" id="6025874">(</span><span class="ident" id="6025875">d</span>&nbsp;<span class="op" id="6025877">*</span><span class="ident" id="6025878"><a href="/go/doc/reader.go.html#6025745">data</a></span><span class="op" id="6025882">)</span>&nbsp;<span class="ident" id="6025884">Swap</span><span class="op" id="6025888">(</span><span class="ident" id="6025889">i</span><span class="op" id="6025890">,</span>&nbsp;<span class="ident" id="6025892">j</span>&nbsp;<span class="builtintype" id="6025894">int</span><span class="op" id="6025897">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025904">{</span>&nbsp;<span class="ident" id="6025906"><a href="/go/doc/reader.go.html#6025875">d</a></span><span class="op" id="6025907">.</span><span class="ident" id="6025908">swap</span><span class="op" id="6025912">(</span><span class="ident" id="6025913"><a href="/go/doc/reader.go.html#6025889">i</a></span><span class="op" id="6025914">,</span>&nbsp;<span class="ident" id="6025916"><a href="/go/doc/reader.go.html#6025892">j</a></span><span class="op" id="6025917">)</span>&nbsp;<span class="op" id="6025919">}</span><br>
<span class="lineno"></span><span class="keyword" id="6025921">func</span>&nbsp;<span class="op" id="6025926">(</span><span class="ident" id="6025927">d</span>&nbsp;<span class="op" id="6025929">*</span><span class="ident" id="6025930"><a href="/go/doc/reader.go.html#6025745">data</a></span><span class="op" id="6025934">)</span>&nbsp;<span class="ident" id="6025936">Less</span><span class="op" id="6025940">(</span><span class="ident" id="6025941">i</span><span class="op" id="6025942">,</span>&nbsp;<span class="ident" id="6025944">j</span>&nbsp;<span class="builtintype" id="6025946">int</span><span class="op" id="6025949">)</span>&nbsp;<span class="builtintype" id="6025951">bool</span>&nbsp;<span class="op" id="6025956">{</span>&nbsp;<span class="keyword" id="6025958">return</span>&nbsp;<span class="ident" id="6025965"><a href="/go/doc/reader.go.html#6025927">d</a></span><span class="op" id="6025966">.</span><span class="ident" id="6025967">less</span><span class="op" id="6025971">(</span><span class="ident" id="6025972"><a href="/go/doc/reader.go.html#6025941">i</a></span><span class="op" id="6025973">,</span>&nbsp;<span class="ident" id="6025975"><a href="/go/doc/reader.go.html#6025944">j</a></span><span class="op" id="6025976">)</span>&nbsp;<span class="op" id="6025978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="6025981">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="6026024">func</span>&nbsp;<span class="ident" id="6026029">sortBy</span><span class="op" id="6026035">(</span><span class="ident" id="6026036">less</span>&nbsp;<span class="keyword" id="6026041">func</span><span class="op" id="6026045">(</span><span class="ident" id="6026046">i</span><span class="op" id="6026047">,</span>&nbsp;<span class="ident" id="6026049">j</span>&nbsp;<span class="builtintype" id="6026051">int</span><span class="op" id="6026054">)</span>&nbsp;<span class="builtintype" id="6026056">bool</span><span class="op" id="6026060">,</span>&nbsp;<span class="ident" id="6026062">swap</span>&nbsp;<span class="keyword" id="6026067">func</span><span class="op" id="6026071">(</span><span class="ident" id="6026072">i</span><span class="op" id="6026073">,</span>&nbsp;<span class="ident" id="6026075">j</span>&nbsp;<span class="builtintype" id="6026077">int</span><span class="op" id="6026080">)</span><span class="op" id="6026081">,</span>&nbsp;<span class="ident" id="6026083">n</span>&nbsp;<span class="builtintype" id="6026085">int</span><span class="op" id="6026088">)</span>&nbsp;<span class="op" id="6026090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026093"><a href="/go/doc/reader.go.html#6006425">sort</a></span><span class="op" id="6026097">.</span><span class="ident" id="6026098">Sort</span><span class="op" id="6026102">(</span><span class="op" id="6026103">&amp;</span><span class="ident" id="6026104"><a href="/go/doc/reader.go.html#6025745">data</a></span><span class="op" id="6026108">{</span><span class="ident" id="6026109"><a href="/go/doc/reader.go.html#6026083">n</a></span><span class="op" id="6026110">,</span>&nbsp;<span class="ident" id="6026112"><a href="/go/doc/reader.go.html#6026062">swap</a></span><span class="op" id="6026116">,</span>&nbsp;<span class="ident" id="6026118"><a href="/go/doc/reader.go.html#6026036">less</a></span><span class="op" id="6026122">}</span><span class="op" id="6026123">)</span><br>
<span class="lineno"></span><span class="op" id="6026125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="6026128">func</span>&nbsp;<span class="ident" id="6026133">sortedKeys</span><span class="op" id="6026143">(</span><span class="ident" id="6026144">m</span>&nbsp;<span class="keyword" id="6026146">map</span><span class="op" id="6026149">[</span><span class="builtintype" id="6026150">string</span><span class="op" id="6026156">]</span><span class="builtintype" id="6026157">int</span><span class="op" id="6026160">)</span>&nbsp;<span class="op" id="6026162">[</span><span class="op" id="6026163">]</span><span class="builtintype" id="6026164">string</span>&nbsp;<span class="op" id="6026171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026174">list</span>&nbsp;<span class="op" id="6026179">:=</span>&nbsp;<span class="builtinfunc" id="6026182">make</span><span class="op" id="6026186">(</span><span class="op" id="6026187">[</span><span class="op" id="6026188">]</span><span class="builtintype" id="6026189">string</span><span class="op" id="6026195">,</span>&nbsp;<span class="builtinfunc" id="6026197">len</span><span class="op" id="6026200">(</span><span class="ident" id="6026201"><a href="/go/doc/reader.go.html#6026144">m</a></span><span class="op" id="6026202">)</span><span class="op" id="6026203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026206">i</span>&nbsp;<span class="op" id="6026208">:=</span>&nbsp;<span class="num" id="6026211">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026214">for</span>&nbsp;<span class="ident" id="6026218">key</span>&nbsp;<span class="op" id="6026222">:=</span>&nbsp;<span class="keyword" id="6026225">range</span>&nbsp;<span class="ident" id="6026231"><a href="/go/doc/reader.go.html#6026144">m</a></span>&nbsp;<span class="op" id="6026233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026237"><a href="/go/doc/reader.go.html#6026174">list</a></span><span class="op" id="6026241">[</span><span class="ident" id="6026242"><a href="/go/doc/reader.go.html#6026206">i</a></span><span class="op" id="6026243">]</span>&nbsp;<span class="op" id="6026245">=</span>&nbsp;<span class="ident" id="6026247"><a href="/go/doc/reader.go.html#6026218">key</a></span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026253"><a href="/go/doc/reader.go.html#6026206">i</a></span><span class="op" id="6026254">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026261"><a href="/go/doc/reader.go.html#6006425">sort</a></span><span class="op" id="6026265">.</span><span class="ident" id="6026266">Strings</span><span class="op" id="6026273">(</span><span class="ident" id="6026274"><a href="/go/doc/reader.go.html#6026174">list</a></span><span class="op" id="6026278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026281">return</span>&nbsp;<span class="ident" id="6026288"><a href="/go/doc/reader.go.html#6026174">list</a></span><br>
<span class="lineno"></span><span class="op" id="6026293">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="6026296">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="6026362">//</span><br>
<span class="lineno"></span><span class="keyword" id="6026365">func</span>&nbsp;<span class="ident" id="6026370">sortingName</span><span class="op" id="6026381">(</span><span class="ident" id="6026382">d</span>&nbsp;<span class="op" id="6026384">*</span><span class="ident" id="6026385"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6026388">.</span><span class="ident" id="6026389">GenDecl</span><span class="op" id="6026396">)</span>&nbsp;<span class="builtintype" id="6026398">string</span>&nbsp;<span class="op" id="6026405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026408">if</span>&nbsp;<span class="builtinfunc" id="6026411">len</span><span class="op" id="6026414">(</span><span class="ident" id="6026415"><a href="/go/doc/reader.go.html#6026382">d</a></span><span class="op" id="6026416">.</span><span class="ident" id="6026417">Specs</span><span class="op" id="6026422">)</span>&nbsp;<span class="op" id="6026424">==</span>&nbsp;<span class="num" id="6026427">1</span>&nbsp;<span class="op" id="6026429">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026433">if</span>&nbsp;<span class="ident" id="6026436">s</span><span class="op" id="6026437">,</span>&nbsp;<span class="ident" id="6026439">ok</span>&nbsp;<span class="op" id="6026442">:=</span>&nbsp;<span class="ident" id="6026445"><a href="/go/doc/reader.go.html#6026382">d</a></span><span class="op" id="6026446">.</span><span class="ident" id="6026447">Specs</span><span class="op" id="6026452">[</span><span class="num" id="6026453">0</span><span class="op" id="6026454">]</span><span class="op" id="6026455">.</span><span class="op" id="6026456">(</span><span class="op" id="6026457">*</span><span class="ident" id="6026458"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6026461">.</span><span class="ident" id="6026462">ValueSpec</span><span class="op" id="6026471">)</span><span class="op" id="6026472">;</span>&nbsp;<span class="ident" id="6026474"><a href="/go/doc/reader.go.html#6026439">ok</a></span>&nbsp;<span class="op" id="6026477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026482">return</span>&nbsp;<span class="ident" id="6026489"><a href="/go/doc/reader.go.html#6026436">s</a></span><span class="op" id="6026490">.</span><span class="ident" id="6026491">Names</span><span class="op" id="6026496">[</span><span class="num" id="6026497">0</span><span class="op" id="6026498">]</span><span class="op" id="6026499">.</span><span class="ident" id="6026500">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026513">return</span>&nbsp;<span class="string" id="6026520">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="6026523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6026526">func</span>&nbsp;<span class="ident" id="6026531">sortedValues</span><span class="op" id="6026543">(</span><span class="ident" id="6026544">m</span>&nbsp;<span class="op" id="6026546">[</span><span class="op" id="6026547">]</span><span class="op" id="6026548">*</span><span class="ident" id="6026549"><a href="/go/doc/doc.go.html#5985874">Value</a></span><span class="op" id="6026554">,</span>&nbsp;<span class="ident" id="6026556">tok</span>&nbsp;<span class="ident" id="6026560"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6026565">.</span><span class="ident" id="6026566">Token</span><span class="op" id="6026571">)</span>&nbsp;<span class="op" id="6026573">[</span><span class="op" id="6026574">]</span><span class="op" id="6026575">*</span><span class="ident" id="6026576"><a href="/go/doc/doc.go.html#5985874">Value</a></span>&nbsp;<span class="op" id="6026582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026585">list</span>&nbsp;<span class="op" id="6026590">:=</span>&nbsp;<span class="builtinfunc" id="6026593">make</span><span class="op" id="6026597">(</span><span class="op" id="6026598">[</span><span class="op" id="6026599">]</span><span class="op" id="6026600">*</span><span class="ident" id="6026601"><a href="/go/doc/doc.go.html#5985874">Value</a></span><span class="op" id="6026606">,</span>&nbsp;<span class="builtinfunc" id="6026608">len</span><span class="op" id="6026611">(</span><span class="ident" id="6026612"><a href="/go/doc/reader.go.html#6026544">m</a></span><span class="op" id="6026613">)</span><span class="op" id="6026614">)</span>&nbsp;<span class="comment" id="6026616">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026643">i</span>&nbsp;<span class="op" id="6026645">:=</span>&nbsp;<span class="num" id="6026648">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026651">for</span>&nbsp;<span class="ident" id="6026655">_</span><span class="op" id="6026656">,</span>&nbsp;<span class="ident" id="6026658">val</span>&nbsp;<span class="op" id="6026662">:=</span>&nbsp;<span class="keyword" id="6026665">range</span>&nbsp;<span class="ident" id="6026671"><a href="/go/doc/reader.go.html#6026544">m</a></span>&nbsp;<span class="op" id="6026673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026677">if</span>&nbsp;<span class="ident" id="6026680"><a href="/go/doc/reader.go.html#6026658">val</a></span><span class="op" id="6026683">.</span><span class="ident" id="6026684">Decl</span><span class="op" id="6026688">.</span><span class="ident" id="6026689">Tok</span>&nbsp;<span class="op" id="6026693">==</span>&nbsp;<span class="ident" id="6026696"><a href="/go/doc/reader.go.html#6026556">tok</a></span>&nbsp;<span class="op" id="6026700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026705"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026709">[</span><span class="ident" id="6026710"><a href="/go/doc/reader.go.html#6026643">i</a></span><span class="op" id="6026711">]</span>&nbsp;<span class="op" id="6026713">=</span>&nbsp;<span class="ident" id="6026715"><a href="/go/doc/reader.go.html#6026658">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026722"><a href="/go/doc/reader.go.html#6026643">i</a></span><span class="op" id="6026723">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026728">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026734"><a href="/go/doc/reader.go.html#6026585">list</a></span>&nbsp;<span class="op" id="6026739">=</span>&nbsp;<span class="ident" id="6026741"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026745">[</span><span class="num" id="6026746">0</span><span class="op" id="6026747">:</span><span class="ident" id="6026748"><a href="/go/doc/reader.go.html#6026643">i</a></span><span class="op" id="6026749">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6026753"><a href="/go/doc/reader.go.html#6026029">sortBy</a></span><span class="op" id="6026759">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026763">func</span><span class="op" id="6026767">(</span><span class="ident" id="6026768">i</span><span class="op" id="6026769">,</span>&nbsp;<span class="ident" id="6026771">j</span>&nbsp;<span class="builtintype" id="6026773">int</span><span class="op" id="6026776">)</span>&nbsp;<span class="builtintype" id="6026778">bool</span>&nbsp;<span class="op" id="6026783">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026788">if</span>&nbsp;<span class="ident" id="6026791">ni</span><span class="op" id="6026793">,</span>&nbsp;<span class="ident" id="6026795">nj</span>&nbsp;<span class="op" id="6026798">:=</span>&nbsp;<span class="ident" id="6026801"><a href="/go/doc/reader.go.html#6026370">sortingName</a></span><span class="op" id="6026812">(</span><span class="ident" id="6026813"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026817">[</span><span class="ident" id="6026818"><a href="/go/doc/reader.go.html#6026768">i</a></span><span class="op" id="6026819">]</span><span class="op" id="6026820">.</span><span class="ident" id="6026821">Decl</span><span class="op" id="6026825">)</span><span class="op" id="6026826">,</span>&nbsp;<span class="ident" id="6026828"><a href="/go/doc/reader.go.html#6026370">sortingName</a></span><span class="op" id="6026839">(</span><span class="ident" id="6026840"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026844">[</span><span class="ident" id="6026845"><a href="/go/doc/reader.go.html#6026771">j</a></span><span class="op" id="6026846">]</span><span class="op" id="6026847">.</span><span class="ident" id="6026848">Decl</span><span class="op" id="6026852">)</span><span class="op" id="6026853">;</span>&nbsp;<span class="ident" id="6026855"><a href="/go/doc/reader.go.html#6026791">ni</a></span>&nbsp;<span class="op" id="6026858">!=</span>&nbsp;<span class="ident" id="6026861"><a href="/go/doc/reader.go.html#6026795">nj</a></span>&nbsp;<span class="op" id="6026864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026870">return</span>&nbsp;<span class="ident" id="6026877"><a href="/go/doc/reader.go.html#6026791">ni</a></span>&nbsp;<span class="op" id="6026880">&lt;</span>&nbsp;<span class="ident" id="6026882"><a href="/go/doc/reader.go.html#6026795">nj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026893">return</span>&nbsp;<span class="ident" id="6026900"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026904">[</span><span class="ident" id="6026905"><a href="/go/doc/reader.go.html#6026768">i</a></span><span class="op" id="6026906">]</span><span class="op" id="6026907">.</span><span class="ident" id="6026908">order</span>&nbsp;<span class="op" id="6026914">&lt;</span>&nbsp;<span class="ident" id="6026916"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026920">[</span><span class="ident" id="6026921"><a href="/go/doc/reader.go.html#6026771">j</a></span><span class="op" id="6026922">]</span><span class="op" id="6026923">.</span><span class="ident" id="6026924">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6026932">}</span><span class="op" id="6026933">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6026937">func</span><span class="op" id="6026941">(</span><span class="ident" id="6026942">i</span><span class="op" id="6026943">,</span>&nbsp;<span class="ident" id="6026945">j</span>&nbsp;<span class="builtintype" id="6026947">int</span><span class="op" id="6026950">)</span>&nbsp;<span class="op" id="6026952">{</span>&nbsp;<span class="ident" id="6026954"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026958">[</span><span class="ident" id="6026959"><a href="/go/doc/reader.go.html#6026942">i</a></span><span class="op" id="6026960">]</span><span class="op" id="6026961">,</span>&nbsp;<span class="ident" id="6026963"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026967">[</span><span class="ident" id="6026968"><a href="/go/doc/reader.go.html#6026945">j</a></span><span class="op" id="6026969">]</span>&nbsp;<span class="op" id="6026971">=</span>&nbsp;<span class="ident" id="6026973"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026977">[</span><span class="ident" id="6026978"><a href="/go/doc/reader.go.html#6026945">j</a></span><span class="op" id="6026979">]</span><span class="op" id="6026980">,</span>&nbsp;<span class="ident" id="6026982"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6026986">[</span><span class="ident" id="6026987"><a href="/go/doc/reader.go.html#6026942">i</a></span><span class="op" id="6026988">]</span>&nbsp;<span class="op" id="6026990">}</span><span class="op" id="6026991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6026995">len</span><span class="op" id="6026998">(</span><span class="ident" id="6026999"><a href="/go/doc/reader.go.html#6026585">list</a></span><span class="op" id="6027003">)</span><span class="op" id="6027004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6027007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027011">return</span>&nbsp;<span class="ident" id="6027018"><a href="/go/doc/reader.go.html#6026585">list</a></span><br>
<span class="lineno">735</span><span class="op" id="6027023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6027026">func</span>&nbsp;<span class="ident" id="6027031">sortedTypes</span><span class="op" id="6027042">(</span><span class="ident" id="6027043">m</span>&nbsp;<span class="keyword" id="6027045">map</span><span class="op" id="6027048">[</span><span class="builtintype" id="6027049">string</span><span class="op" id="6027055">]</span><span class="op" id="6027056">*</span><span class="ident" id="6027057"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6027066">,</span>&nbsp;<span class="ident" id="6027068">allMethods</span>&nbsp;<span class="builtintype" id="6027079">bool</span><span class="op" id="6027083">)</span>&nbsp;<span class="op" id="6027085">[</span><span class="op" id="6027086">]</span><span class="op" id="6027087">*</span><span class="ident" id="6027088"><a href="/go/doc/doc.go.html#5986055">Type</a></span>&nbsp;<span class="op" id="6027093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027096">list</span>&nbsp;<span class="op" id="6027101">:=</span>&nbsp;<span class="builtinfunc" id="6027104">make</span><span class="op" id="6027108">(</span><span class="op" id="6027109">[</span><span class="op" id="6027110">]</span><span class="op" id="6027111">*</span><span class="ident" id="6027112"><a href="/go/doc/doc.go.html#5986055">Type</a></span><span class="op" id="6027116">,</span>&nbsp;<span class="builtinfunc" id="6027118">len</span><span class="op" id="6027121">(</span><span class="ident" id="6027122"><a href="/go/doc/reader.go.html#6027043">m</a></span><span class="op" id="6027123">)</span><span class="op" id="6027124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027127">i</span>&nbsp;<span class="op" id="6027129">:=</span>&nbsp;<span class="num" id="6027132">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027135">for</span>&nbsp;<span class="ident" id="6027139">_</span><span class="op" id="6027140">,</span>&nbsp;<span class="ident" id="6027142">t</span>&nbsp;<span class="op" id="6027144">:=</span>&nbsp;<span class="keyword" id="6027147">range</span>&nbsp;<span class="ident" id="6027153"><a href="/go/doc/reader.go.html#6027043">m</a></span>&nbsp;<span class="op" id="6027155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027159"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027163">[</span><span class="ident" id="6027164"><a href="/go/doc/reader.go.html#6027127">i</a></span><span class="op" id="6027165">]</span>&nbsp;<span class="op" id="6027167">=</span>&nbsp;<span class="op" id="6027169">&amp;</span><span class="ident" id="6027170"><a href="/go/doc/doc.go.html#5986055">Type</a></span><span class="op" id="6027174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027179">Doc</span><span class="op" id="6027182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027188"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027189">.</span><span class="ident" id="6027190">doc</span><span class="op" id="6027193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027198">Name</span><span class="op" id="6027202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027207"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027208">.</span><span class="ident" id="6027209">name</span><span class="op" id="6027213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027218">Decl</span><span class="op" id="6027222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027227"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027228">.</span><span class="ident" id="6027229">decl</span><span class="op" id="6027233">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027238">Consts</span><span class="op" id="6027244">:</span>&nbsp;&nbsp;<span class="ident" id="6027247"><a href="/go/doc/reader.go.html#6026531">sortedValues</a></span><span class="op" id="6027259">(</span><span class="ident" id="6027260"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027261">.</span><span class="ident" id="6027262">values</span><span class="op" id="6027268">,</span>&nbsp;<span class="ident" id="6027270"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6027275">.</span><span class="ident" id="6027276">CONST</span><span class="op" id="6027281">)</span><span class="op" id="6027282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027287">Vars</span><span class="op" id="6027291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027296"><a href="/go/doc/reader.go.html#6026531">sortedValues</a></span><span class="op" id="6027308">(</span><span class="ident" id="6027309"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027310">.</span><span class="ident" id="6027311">values</span><span class="op" id="6027317">,</span>&nbsp;<span class="ident" id="6027319"><a href="/go/doc/reader.go.html#6006403">token</a></span><span class="op" id="6027324">.</span><span class="ident" id="6027325">VAR</span><span class="op" id="6027328">)</span><span class="op" id="6027329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027334">Funcs</span><span class="op" id="6027339">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6027343"><a href="/go/doc/reader.go.html#6027698">sortedFuncs</a></span><span class="op" id="6027354">(</span><span class="ident" id="6027355"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027356">.</span><span class="ident" id="6027357">funcs</span><span class="op" id="6027362">,</span>&nbsp;<span class="ident" id="6027364">true</span><span class="op" id="6027368">)</span><span class="op" id="6027369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027374">Methods</span><span class="op" id="6027381">:</span>&nbsp;<span class="ident" id="6027383"><a href="/go/doc/reader.go.html#6027698">sortedFuncs</a></span><span class="op" id="6027394">(</span><span class="ident" id="6027395"><a href="/go/doc/reader.go.html#6027142">t</a></span><span class="op" id="6027396">.</span><span class="ident" id="6027397">methods</span><span class="op" id="6027404">,</span>&nbsp;<span class="ident" id="6027406"><a href="/go/doc/reader.go.html#6027068">allMethods</a></span><span class="op" id="6027416">)</span><span class="op" id="6027417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6027421">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027425"><a href="/go/doc/reader.go.html#6027127">i</a></span><span class="op" id="6027426">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6027430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027434"><a href="/go/doc/reader.go.html#6026029">sortBy</a></span><span class="op" id="6027440">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027444">func</span><span class="op" id="6027448">(</span><span class="ident" id="6027449">i</span><span class="op" id="6027450">,</span>&nbsp;<span class="ident" id="6027452">j</span>&nbsp;<span class="builtintype" id="6027454">int</span><span class="op" id="6027457">)</span>&nbsp;<span class="builtintype" id="6027459">bool</span>&nbsp;<span class="op" id="6027464">{</span>&nbsp;<span class="keyword" id="6027466">return</span>&nbsp;<span class="ident" id="6027473"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027477">[</span><span class="ident" id="6027478"><a href="/go/doc/reader.go.html#6027449">i</a></span><span class="op" id="6027479">]</span><span class="op" id="6027480">.</span><span class="ident" id="6027481">Name</span>&nbsp;<span class="op" id="6027486">&lt;</span>&nbsp;<span class="ident" id="6027488"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027492">[</span><span class="ident" id="6027493"><a href="/go/doc/reader.go.html#6027452">j</a></span><span class="op" id="6027494">]</span><span class="op" id="6027495">.</span><span class="ident" id="6027496">Name</span>&nbsp;<span class="op" id="6027501">}</span><span class="op" id="6027502">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027506">func</span><span class="op" id="6027510">(</span><span class="ident" id="6027511">i</span><span class="op" id="6027512">,</span>&nbsp;<span class="ident" id="6027514">j</span>&nbsp;<span class="builtintype" id="6027516">int</span><span class="op" id="6027519">)</span>&nbsp;<span class="op" id="6027521">{</span>&nbsp;<span class="ident" id="6027523"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027527">[</span><span class="ident" id="6027528"><a href="/go/doc/reader.go.html#6027511">i</a></span><span class="op" id="6027529">]</span><span class="op" id="6027530">,</span>&nbsp;<span class="ident" id="6027532"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027536">[</span><span class="ident" id="6027537"><a href="/go/doc/reader.go.html#6027514">j</a></span><span class="op" id="6027538">]</span>&nbsp;<span class="op" id="6027540">=</span>&nbsp;<span class="ident" id="6027542"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027546">[</span><span class="ident" id="6027547"><a href="/go/doc/reader.go.html#6027514">j</a></span><span class="op" id="6027548">]</span><span class="op" id="6027549">,</span>&nbsp;<span class="ident" id="6027551"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027555">[</span><span class="ident" id="6027556"><a href="/go/doc/reader.go.html#6027511">i</a></span><span class="op" id="6027557">]</span>&nbsp;<span class="op" id="6027559">}</span><span class="op" id="6027560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6027564">len</span><span class="op" id="6027567">(</span><span class="ident" id="6027568"><a href="/go/doc/reader.go.html#6027096">list</a></span><span class="op" id="6027572">)</span><span class="op" id="6027573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6027576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027580">return</span>&nbsp;<span class="ident" id="6027587"><a href="/go/doc/reader.go.html#6027096">list</a></span><br>
<span class="lineno">760</span><span class="op" id="6027592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6027595">func</span>&nbsp;<span class="ident" id="6027600">removeStar</span><span class="op" id="6027610">(</span><span class="ident" id="6027611">s</span>&nbsp;<span class="builtintype" id="6027613">string</span><span class="op" id="6027619">)</span>&nbsp;<span class="builtintype" id="6027621">string</span>&nbsp;<span class="op" id="6027628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027631">if</span>&nbsp;<span class="builtinfunc" id="6027634">len</span><span class="op" id="6027637">(</span><span class="ident" id="6027638"><a href="/go/doc/reader.go.html#6027611">s</a></span><span class="op" id="6027639">)</span>&nbsp;<span class="op" id="6027641">&gt;</span>&nbsp;<span class="num" id="6027643">0</span>&nbsp;<span class="op" id="6027645">&amp;&amp;</span>&nbsp;<span class="ident" id="6027648"><a href="/go/doc/reader.go.html#6027611">s</a></span><span class="op" id="6027649">[</span><span class="num" id="6027650">0</span><span class="op" id="6027651">]</span>&nbsp;<span class="op" id="6027653">==</span>&nbsp;<span class="string" id="6027656">&#39;*&#39;</span>&nbsp;<span class="op" id="6027660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027664">return</span>&nbsp;<span class="ident" id="6027671"><a href="/go/doc/reader.go.html#6027611">s</a></span><span class="op" id="6027672">[</span><span class="num" id="6027673">1</span><span class="op" id="6027674">:</span><span class="op" id="6027675">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6027678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027681">return</span>&nbsp;<span class="ident" id="6027688"><a href="/go/doc/reader.go.html#6027611">s</a></span><br>
<span class="lineno"></span><span class="op" id="6027690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6027693">func</span>&nbsp;<span class="ident" id="6027698">sortedFuncs</span><span class="op" id="6027709">(</span><span class="ident" id="6027710">m</span>&nbsp;<span class="ident" id="6027712"><a href="/go/doc/reader.go.html#6006806">methodSet</a></span><span class="op" id="6027721">,</span>&nbsp;<span class="ident" id="6027723">allMethods</span>&nbsp;<span class="builtintype" id="6027734">bool</span><span class="op" id="6027738">)</span>&nbsp;<span class="op" id="6027740">[</span><span class="op" id="6027741">]</span><span class="op" id="6027742">*</span><span class="ident" id="6027743"><a href="/go/doc/doc.go.html#5986489">Func</a></span>&nbsp;<span class="op" id="6027748">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027751">list</span>&nbsp;<span class="op" id="6027756">:=</span>&nbsp;<span class="builtinfunc" id="6027759">make</span><span class="op" id="6027763">(</span><span class="op" id="6027764">[</span><span class="op" id="6027765">]</span><span class="op" id="6027766">*</span><span class="ident" id="6027767"><a href="/go/doc/doc.go.html#5986489">Func</a></span><span class="op" id="6027771">,</span>&nbsp;<span class="builtinfunc" id="6027773">len</span><span class="op" id="6027776">(</span><span class="ident" id="6027777"><a href="/go/doc/reader.go.html#6027710">m</a></span><span class="op" id="6027778">)</span><span class="op" id="6027779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6027782">i</span>&nbsp;<span class="op" id="6027784">:=</span>&nbsp;<span class="num" id="6027787">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027790">for</span>&nbsp;<span class="ident" id="6027794">_</span><span class="op" id="6027795">,</span>&nbsp;<span class="ident" id="6027797">m</span>&nbsp;<span class="op" id="6027799">:=</span>&nbsp;<span class="keyword" id="6027802">range</span>&nbsp;<span class="ident" id="6027808"><a href="/go/doc/reader.go.html#6027710">m</a></span>&nbsp;<span class="op" id="6027810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6027814">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027854">switch</span>&nbsp;<span class="op" id="6027861">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027865">case</span>&nbsp;<span class="ident" id="6027870"><a href="/go/doc/reader.go.html#6027797">m</a></span><span class="op" id="6027871">.</span><span class="ident" id="6027872">Decl</span>&nbsp;<span class="op" id="6027877">==</span>&nbsp;<span class="ident" id="6027880">nil</span><span class="op" id="6027883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6027888">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6027916">case</span>&nbsp;<span class="ident" id="6027921"><a href="/go/doc/reader.go.html#6027723">allMethods</a></span><span class="op" id="6027931">,</span>&nbsp;<span class="ident" id="6027933"><a href="/go/doc/reader.go.html#6027797">m</a></span><span class="op" id="6027934">.</span><span class="ident" id="6027935">Level</span>&nbsp;<span class="op" id="6027941">==</span>&nbsp;<span class="num" id="6027944">0</span><span class="op" id="6027945">,</span>&nbsp;<span class="op" id="6027947">!</span><span class="ident" id="6027948"><a href="/go/doc/reader.go.html#6006393">ast</a></span><span class="op" id="6027951">.</span><span class="ident" id="6027952">IsExported</span><span class="op" id="6027962">(</span><span class="ident" id="6027963"><a href="/go/doc/reader.go.html#6027600">removeStar</a></span><span class="op" id="6027973">(</span><span class="ident" id="6027974"><a href="/go/doc/reader.go.html#6027797">m</a></span><span class="op" id="6027975">.</span><span class="ident" id="6027976">Orig</span><span class="op" id="6027980">)</span><span class="op" id="6027981">)</span><span class="op" id="6027982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6027987">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6028042">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6028097"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028101">[</span><span class="ident" id="6028102"><a href="/go/doc/reader.go.html#6027782">i</a></span><span class="op" id="6028103">]</span>&nbsp;<span class="op" id="6028105">=</span>&nbsp;<span class="ident" id="6028107"><a href="/go/doc/reader.go.html#6027797">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6028112"><a href="/go/doc/reader.go.html#6027782">i</a></span><span class="op" id="6028113">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6028118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6028121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6028124"><a href="/go/doc/reader.go.html#6027751">list</a></span>&nbsp;<span class="op" id="6028129">=</span>&nbsp;<span class="ident" id="6028131"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028135">[</span><span class="num" id="6028136">0</span><span class="op" id="6028137">:</span><span class="ident" id="6028138"><a href="/go/doc/reader.go.html#6027782">i</a></span><span class="op" id="6028139">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6028142"><a href="/go/doc/reader.go.html#6026029">sortBy</a></span><span class="op" id="6028148">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028152">func</span><span class="op" id="6028156">(</span><span class="ident" id="6028157">i</span><span class="op" id="6028158">,</span>&nbsp;<span class="ident" id="6028160">j</span>&nbsp;<span class="builtintype" id="6028162">int</span><span class="op" id="6028165">)</span>&nbsp;<span class="builtintype" id="6028167">bool</span>&nbsp;<span class="op" id="6028172">{</span>&nbsp;<span class="keyword" id="6028174">return</span>&nbsp;<span class="ident" id="6028181"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028185">[</span><span class="ident" id="6028186"><a href="/go/doc/reader.go.html#6028157">i</a></span><span class="op" id="6028187">]</span><span class="op" id="6028188">.</span><span class="ident" id="6028189">Name</span>&nbsp;<span class="op" id="6028194">&lt;</span>&nbsp;<span class="ident" id="6028196"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028200">[</span><span class="ident" id="6028201"><a href="/go/doc/reader.go.html#6028160">j</a></span><span class="op" id="6028202">]</span><span class="op" id="6028203">.</span><span class="ident" id="6028204">Name</span>&nbsp;<span class="op" id="6028209">}</span><span class="op" id="6028210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028214">func</span><span class="op" id="6028218">(</span><span class="ident" id="6028219">i</span><span class="op" id="6028220">,</span>&nbsp;<span class="ident" id="6028222">j</span>&nbsp;<span class="builtintype" id="6028224">int</span><span class="op" id="6028227">)</span>&nbsp;<span class="op" id="6028229">{</span>&nbsp;<span class="ident" id="6028231"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028235">[</span><span class="ident" id="6028236"><a href="/go/doc/reader.go.html#6028219">i</a></span><span class="op" id="6028237">]</span><span class="op" id="6028238">,</span>&nbsp;<span class="ident" id="6028240"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028244">[</span><span class="ident" id="6028245"><a href="/go/doc/reader.go.html#6028222">j</a></span><span class="op" id="6028246">]</span>&nbsp;<span class="op" id="6028248">=</span>&nbsp;<span class="ident" id="6028250"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028254">[</span><span class="ident" id="6028255"><a href="/go/doc/reader.go.html#6028222">j</a></span><span class="op" id="6028256">]</span><span class="op" id="6028257">,</span>&nbsp;<span class="ident" id="6028259"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028263">[</span><span class="ident" id="6028264"><a href="/go/doc/reader.go.html#6028219">i</a></span><span class="op" id="6028265">]</span>&nbsp;<span class="op" id="6028267">}</span><span class="op" id="6028268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6028272">len</span><span class="op" id="6028275">(</span><span class="ident" id="6028276"><a href="/go/doc/reader.go.html#6027751">list</a></span><span class="op" id="6028280">)</span><span class="op" id="6028281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6028284">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028287">return</span>&nbsp;<span class="ident" id="6028294"><a href="/go/doc/reader.go.html#6027751">list</a></span><br>
<span class="lineno"></span><span class="op" id="6028299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6028302">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="6028375">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="6028443">//</span><br>
<span class="lineno"></span><span class="keyword" id="6028446">func</span>&nbsp;<span class="ident" id="6028451">noteBodies</span><span class="op" id="6028461">(</span><span class="ident" id="6028462">notes</span>&nbsp;<span class="op" id="6028468">[</span><span class="op" id="6028469">]</span><span class="op" id="6028470">*</span><span class="ident" id="6028471"><a href="/go/doc/doc.go.html#5987096">Note</a></span><span class="op" id="6028475">)</span>&nbsp;<span class="op" id="6028477">[</span><span class="op" id="6028478">]</span><span class="builtintype" id="6028479">string</span>&nbsp;<span class="op" id="6028486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028489">var</span>&nbsp;<span class="ident" id="6028493">list</span>&nbsp;<span class="op" id="6028498">[</span><span class="op" id="6028499">]</span><span class="builtintype" id="6028500">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028508">for</span>&nbsp;<span class="ident" id="6028512">_</span><span class="op" id="6028513">,</span>&nbsp;<span class="ident" id="6028515">n</span>&nbsp;<span class="op" id="6028517">:=</span>&nbsp;<span class="keyword" id="6028520">range</span>&nbsp;<span class="ident" id="6028526"><a href="/go/doc/reader.go.html#6028462">notes</a></span>&nbsp;<span class="op" id="6028532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6028536"><a href="/go/doc/reader.go.html#6028493">list</a></span>&nbsp;<span class="op" id="6028541">=</span>&nbsp;<span class="builtinfunc" id="6028543">append</span><span class="op" id="6028549">(</span><span class="ident" id="6028550"><a href="/go/doc/reader.go.html#6028493">list</a></span><span class="op" id="6028554">,</span>&nbsp;<span class="ident" id="6028556"><a href="/go/doc/reader.go.html#6028515">n</a></span><span class="op" id="6028557">.</span><span class="ident" id="6028558">Body</span><span class="op" id="6028562">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6028565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6028568">return</span>&nbsp;<span class="ident" id="6028575"><a href="/go/doc/reader.go.html#6028493">list</a></span><br>
<span class="lineno"></span><span class="op" id="6028580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6028583">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="6028663">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6028691">var</span>&nbsp;<span class="ident" id="6028695">predeclaredTypes</span>&nbsp;<span class="op" id="6028712">=</span>&nbsp;<span class="keyword" id="6028714">map</span><span class="op" id="6028717">[</span><span class="builtintype" id="6028718">string</span><span class="op" id="6028724">]</span><span class="builtintype" id="6028725">bool</span><span class="op" id="6028729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028732">&#34;bool&#34;</span><span class="op" id="6028738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028746">true</span><span class="op" id="6028750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028753">&#34;byte&#34;</span><span class="op" id="6028759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028767">true</span><span class="op" id="6028771">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028774">&#34;complex64&#34;</span><span class="op" id="6028785">:</span>&nbsp;&nbsp;<span class="ident" id="6028788">true</span><span class="op" id="6028792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028795">&#34;complex128&#34;</span><span class="op" id="6028807">:</span>&nbsp;<span class="ident" id="6028809">true</span><span class="op" id="6028813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028816">&#34;error&#34;</span><span class="op" id="6028823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028830">true</span><span class="op" id="6028834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028837">&#34;float32&#34;</span><span class="op" id="6028846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028851">true</span><span class="op" id="6028855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028858">&#34;float64&#34;</span><span class="op" id="6028867">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028872">true</span><span class="op" id="6028876">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028879">&#34;int&#34;</span><span class="op" id="6028884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028893">true</span><span class="op" id="6028897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028900">&#34;int8&#34;</span><span class="op" id="6028906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028914">true</span><span class="op" id="6028918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028921">&#34;int16&#34;</span><span class="op" id="6028928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028935">true</span><span class="op" id="6028939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028942">&#34;int32&#34;</span><span class="op" id="6028949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028956">true</span><span class="op" id="6028960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028963">&#34;int64&#34;</span><span class="op" id="6028970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028977">true</span><span class="op" id="6028981">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6028984">&#34;rune&#34;</span><span class="op" id="6028990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028998">true</span><span class="op" id="6029002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029005">&#34;string&#34;</span><span class="op" id="6029013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029019">true</span><span class="op" id="6029023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029026">&#34;uint&#34;</span><span class="op" id="6029032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029040">true</span><span class="op" id="6029044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029047">&#34;uint8&#34;</span><span class="op" id="6029054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029061">true</span><span class="op" id="6029065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029068">&#34;uint16&#34;</span><span class="op" id="6029076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029082">true</span><span class="op" id="6029086">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029089">&#34;uint32&#34;</span><span class="op" id="6029097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029103">true</span><span class="op" id="6029107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029110">&#34;uint64&#34;</span><span class="op" id="6029118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029124">true</span><span class="op" id="6029128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029131">&#34;uintptr&#34;</span><span class="op" id="6029140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029145">true</span><span class="op" id="6029149">,</span><br>
<span class="lineno"></span><span class="op" id="6029151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="6029154">var</span>&nbsp;<span class="ident" id="6029158">predeclaredFuncs</span>&nbsp;<span class="op" id="6029175">=</span>&nbsp;<span class="keyword" id="6029177">map</span><span class="op" id="6029180">[</span><span class="builtintype" id="6029181">string</span><span class="op" id="6029187">]</span><span class="builtintype" id="6029188">bool</span><span class="op" id="6029192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029195">&#34;append&#34;</span><span class="op" id="6029203">:</span>&nbsp;&nbsp;<span class="ident" id="6029206">true</span><span class="op" id="6029210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029213">&#34;cap&#34;</span><span class="op" id="6029218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029224">true</span><span class="op" id="6029228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029231">&#34;close&#34;</span><span class="op" id="6029238">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6029242">true</span><span class="op" id="6029246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029249">&#34;complex&#34;</span><span class="op" id="6029258">:</span>&nbsp;<span class="ident" id="6029260">true</span><span class="op" id="6029264">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029267">&#34;copy&#34;</span><span class="op" id="6029273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029278">true</span><span class="op" id="6029282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029285">&#34;delete&#34;</span><span class="op" id="6029293">:</span>&nbsp;&nbsp;<span class="ident" id="6029296">true</span><span class="op" id="6029300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029303">&#34;imag&#34;</span><span class="op" id="6029309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029314">true</span><span class="op" id="6029318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029321">&#34;len&#34;</span><span class="op" id="6029326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029332">true</span><span class="op" id="6029336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029339">&#34;make&#34;</span><span class="op" id="6029345">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029350">true</span><span class="op" id="6029354">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029357">&#34;new&#34;</span><span class="op" id="6029362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029368">true</span><span class="op" id="6029372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029375">&#34;panic&#34;</span><span class="op" id="6029382">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6029386">true</span><span class="op" id="6029390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029393">&#34;print&#34;</span><span class="op" id="6029400">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6029404">true</span><span class="op" id="6029408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029411">&#34;println&#34;</span><span class="op" id="6029420">:</span>&nbsp;<span class="ident" id="6029422">true</span><span class="op" id="6029426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029429">&#34;real&#34;</span><span class="op" id="6029435">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029440">true</span><span class="op" id="6029444">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029447">&#34;recover&#34;</span><span class="op" id="6029456">:</span>&nbsp;<span class="ident" id="6029458">true</span><span class="op" id="6029462">,</span><br>
<span class="lineno"></span><span class="op" id="6029464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6029467">var</span>&nbsp;<span class="ident" id="6029471">predeclaredConstants</span>&nbsp;<span class="op" id="6029492">=</span>&nbsp;<span class="keyword" id="6029494">map</span><span class="op" id="6029497">[</span><span class="builtintype" id="6029498">string</span><span class="op" id="6029504">]</span><span class="builtintype" id="6029505">bool</span><span class="op" id="6029509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029512">&#34;false&#34;</span><span class="op" id="6029519">:</span>&nbsp;<span class="ident" id="6029521">true</span><span class="op" id="6029525">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029528">&#34;iota&#34;</span><span class="op" id="6029534">:</span>&nbsp;&nbsp;<span class="ident" id="6029537">true</span><span class="op" id="6029541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029544">&#34;nil&#34;</span><span class="op" id="6029549">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6029553">true</span><span class="op" id="6029557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6029560">&#34;true&#34;</span><span class="op" id="6029566">:</span>&nbsp;&nbsp;<span class="ident" id="6029569">true</span><span class="op" id="6029573">,</span><br>
<span class="lineno"></span><span class="op" id="6029575">}</span>
</div>
</body>
</html>
