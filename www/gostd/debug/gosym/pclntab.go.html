<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5752510">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5752566">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5752620">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5752671">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5752694">package</span>&nbsp;<span class="ident" id="5752702">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5752709">import</span>&nbsp;<span class="op" id="5752716">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5752719">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5752738">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5752745">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5752748">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5752825">//</span><br>
<span class="lineno"></span><span class="comment" id="5752828">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5752915">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5752993">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5753071">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5753143">//</span><br>
<span class="lineno"></span><span class="comment" id="5753146">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5753227">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5753306">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5753359">//</span><br>
<span class="lineno"></span><span class="comment" id="5753362">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5753437">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5753512">type</span>&nbsp;<span class="ident" id="5753517">LineTable</span>&nbsp;<span class="keyword" id="5753527">struct</span>&nbsp;<span class="op" id="5753534">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753537">Data</span>&nbsp;<span class="op" id="5753542">[</span><span class="op" id="5753543">]</span><span class="builtintype" id="5753544">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753550">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5753555">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753563">Line</span>&nbsp;<span class="builtintype" id="5753568">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5753574">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753591">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753600">sync</span><span class="op" id="5753604">.</span><span class="ident" id="5753605">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753612">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5753621">int</span>&nbsp;<span class="comment" id="5753625">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753679">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5753688">binary</span><span class="op" id="5753694">.</span><span class="ident" id="5753695">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753706">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5753715">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753723">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5753732">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753740">functab</span>&nbsp;&nbsp;<span class="op" id="5753749">[</span><span class="op" id="5753750">]</span><span class="builtintype" id="5753751">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753757">nfunctab</span>&nbsp;<span class="builtintype" id="5753766">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753774">filetab</span>&nbsp;&nbsp;<span class="op" id="5753783">[</span><span class="op" id="5753784">]</span><span class="builtintype" id="5753785">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753791">nfiletab</span>&nbsp;<span class="builtintype" id="5753800">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5753808">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5753817">map</span><span class="op" id="5753820">[</span><span class="builtintype" id="5753821">string</span><span class="op" id="5753827">]</span><span class="builtintype" id="5753828">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5753835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5753838">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5753909">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5753974">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5754048">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5754059">const</span>&nbsp;<span class="ident" id="5754065">oldQuantum</span>&nbsp;<span class="op" id="5754076">=</span>&nbsp;<span class="num" id="5754078">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5754081">func</span>&nbsp;<span class="op" id="5754086">(</span><span class="ident" id="5754087">t</span>&nbsp;<span class="op" id="5754089">*</span><span class="ident" id="5754090">LineTable</span><span class="op" id="5754099">)</span>&nbsp;<span class="ident" id="5754101">parse</span><span class="op" id="5754106">(</span><span class="ident" id="5754107">targetPC</span>&nbsp;<span class="ident" id="5754116">uint64</span><span class="op" id="5754122">,</span>&nbsp;<span class="ident" id="5754124">targetLine</span>&nbsp;<span class="builtintype" id="5754135">int</span><span class="op" id="5754138">)</span>&nbsp;<span class="op" id="5754140">(</span><span class="ident" id="5754141">b</span>&nbsp;<span class="op" id="5754143">[</span><span class="op" id="5754144">]</span><span class="builtintype" id="5754145">byte</span><span class="op" id="5754149">,</span>&nbsp;<span class="ident" id="5754151">pc</span>&nbsp;<span class="ident" id="5754154">uint64</span><span class="op" id="5754160">,</span>&nbsp;<span class="ident" id="5754162">line</span>&nbsp;<span class="builtintype" id="5754167">int</span><span class="op" id="5754170">)</span>&nbsp;<span class="op" id="5754172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754175">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754232">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754264">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754326">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754383">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754422">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754426">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5754489">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754546">b</span><span class="op" id="5754547">,</span>&nbsp;<span class="ident" id="5754549">pc</span><span class="op" id="5754551">,</span>&nbsp;<span class="ident" id="5754553">line</span>&nbsp;<span class="op" id="5754558">=</span>&nbsp;<span class="ident" id="5754560">t</span><span class="op" id="5754561">.</span><span class="ident" id="5754562">Data</span><span class="op" id="5754566">,</span>&nbsp;<span class="ident" id="5754568">t</span><span class="op" id="5754569">.</span><span class="ident" id="5754570">PC</span><span class="op" id="5754572">,</span>&nbsp;<span class="ident" id="5754574">t</span><span class="op" id="5754575">.</span><span class="ident" id="5754576">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754582">for</span>&nbsp;<span class="ident" id="5754586">pc</span>&nbsp;<span class="op" id="5754589">&lt;=</span>&nbsp;<span class="ident" id="5754592">targetPC</span>&nbsp;<span class="op" id="5754601">&amp;&amp;</span>&nbsp;<span class="ident" id="5754604">line</span>&nbsp;<span class="op" id="5754609">!=</span>&nbsp;<span class="ident" id="5754612">targetLine</span>&nbsp;<span class="op" id="5754623">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5754626">len</span><span class="op" id="5754629">(</span><span class="ident" id="5754630">b</span><span class="op" id="5754631">)</span>&nbsp;<span class="op" id="5754633">&gt;</span>&nbsp;<span class="num" id="5754635">0</span>&nbsp;<span class="op" id="5754637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754641">code</span>&nbsp;<span class="op" id="5754646">:=</span>&nbsp;<span class="ident" id="5754649">b</span><span class="op" id="5754650">[</span><span class="num" id="5754651">0</span><span class="op" id="5754652">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754656">b</span>&nbsp;<span class="op" id="5754658">=</span>&nbsp;<span class="ident" id="5754660">b</span><span class="op" id="5754661">[</span><span class="num" id="5754662">1</span><span class="op" id="5754663">:</span><span class="op" id="5754664">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754668">switch</span>&nbsp;<span class="op" id="5754675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754679">case</span>&nbsp;<span class="ident" id="5754684">code</span>&nbsp;<span class="op" id="5754689">==</span>&nbsp;<span class="num" id="5754692">0</span><span class="op" id="5754693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754698">if</span>&nbsp;<span class="builtinfunc" id="5754701">len</span><span class="op" id="5754704">(</span><span class="ident" id="5754705">b</span><span class="op" id="5754706">)</span>&nbsp;<span class="op" id="5754708">&lt;</span>&nbsp;<span class="num" id="5754710">4</span>&nbsp;<span class="op" id="5754712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754718">b</span>&nbsp;<span class="op" id="5754720">=</span>&nbsp;<span class="ident" id="5754722">b</span><span class="op" id="5754723">[</span><span class="num" id="5754724">0</span><span class="op" id="5754725">:</span><span class="num" id="5754726">0</span><span class="op" id="5754727">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754733">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5754742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754747">val</span>&nbsp;<span class="op" id="5754751">:=</span>&nbsp;<span class="ident" id="5754754">binary</span><span class="op" id="5754760">.</span><span class="ident" id="5754761">BigEndian</span><span class="op" id="5754770">.</span><span class="ident" id="5754771">Uint32</span><span class="op" id="5754777">(</span><span class="ident" id="5754778">b</span><span class="op" id="5754779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754784">b</span>&nbsp;<span class="op" id="5754786">=</span>&nbsp;<span class="ident" id="5754788">b</span><span class="op" id="5754789">[</span><span class="num" id="5754790">4</span><span class="op" id="5754791">:</span><span class="op" id="5754792">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754797">line</span>&nbsp;<span class="op" id="5754802">+=</span>&nbsp;<span class="builtintype" id="5754805">int</span><span class="op" id="5754808">(</span><span class="ident" id="5754809">val</span><span class="op" id="5754812">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754816">case</span>&nbsp;<span class="ident" id="5754821">code</span>&nbsp;<span class="op" id="5754826">&lt;=</span>&nbsp;<span class="num" id="5754829">64</span><span class="op" id="5754831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754836">line</span>&nbsp;<span class="op" id="5754841">+=</span>&nbsp;<span class="builtintype" id="5754844">int</span><span class="op" id="5754847">(</span><span class="ident" id="5754848">code</span><span class="op" id="5754852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754856">case</span>&nbsp;<span class="ident" id="5754861">code</span>&nbsp;<span class="op" id="5754866">&lt;=</span>&nbsp;<span class="num" id="5754869">128</span><span class="op" id="5754872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754877">line</span>&nbsp;<span class="op" id="5754882">-=</span>&nbsp;<span class="builtintype" id="5754885">int</span><span class="op" id="5754888">(</span><span class="ident" id="5754889">code</span>&nbsp;<span class="op" id="5754894">-</span>&nbsp;<span class="num" id="5754896">64</span><span class="op" id="5754898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754902">default</span><span class="op" id="5754909">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754914">pc</span>&nbsp;<span class="op" id="5754917">+=</span>&nbsp;<span class="ident" id="5754920">oldQuantum</span>&nbsp;<span class="op" id="5754931">*</span>&nbsp;<span class="ident" id="5754933">uint64</span><span class="op" id="5754939">(</span><span class="ident" id="5754940">code</span><span class="op" id="5754944">-</span><span class="num" id="5754945">128</span><span class="op" id="5754948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754953">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5754964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5754968">pc</span>&nbsp;<span class="op" id="5754971">+=</span>&nbsp;<span class="ident" id="5754974">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5754986">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5754989">return</span>&nbsp;<span class="ident" id="5754996">b</span><span class="op" id="5754997">,</span>&nbsp;<span class="ident" id="5754999">pc</span><span class="op" id="5755001">,</span>&nbsp;<span class="ident" id="5755003">line</span><br>
<span class="lineno"></span><span class="op" id="5755008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5755011">func</span>&nbsp;<span class="op" id="5755016">(</span><span class="ident" id="5755017">t</span>&nbsp;<span class="op" id="5755019">*</span><span class="ident" id="5755020">LineTable</span><span class="op" id="5755029">)</span>&nbsp;<span class="ident" id="5755031">slice</span><span class="op" id="5755036">(</span><span class="ident" id="5755037">pc</span>&nbsp;<span class="ident" id="5755040">uint64</span><span class="op" id="5755046">)</span>&nbsp;<span class="op" id="5755048">*</span><span class="ident" id="5755049">LineTable</span>&nbsp;<span class="op" id="5755059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5755062">data</span><span class="op" id="5755066">,</span>&nbsp;<span class="ident" id="5755068">pc</span><span class="op" id="5755070">,</span>&nbsp;<span class="ident" id="5755072">line</span>&nbsp;<span class="op" id="5755077">:=</span>&nbsp;<span class="ident" id="5755080">t</span><span class="op" id="5755081">.</span><span class="ident" id="5755082">parse</span><span class="op" id="5755087">(</span><span class="ident" id="5755088">pc</span><span class="op" id="5755090">,</span>&nbsp;<span class="op" id="5755092">-</span><span class="num" id="5755093">1</span><span class="op" id="5755094">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755097">return</span>&nbsp;<span class="op" id="5755104">&amp;</span><span class="ident" id="5755105">LineTable</span><span class="op" id="5755114">{</span><span class="ident" id="5755115">Data</span><span class="op" id="5755119">:</span>&nbsp;<span class="ident" id="5755121">data</span><span class="op" id="5755125">,</span>&nbsp;<span class="ident" id="5755127">PC</span><span class="op" id="5755129">:</span>&nbsp;<span class="ident" id="5755131">pc</span><span class="op" id="5755133">,</span>&nbsp;<span class="ident" id="5755135">Line</span><span class="op" id="5755139">:</span>&nbsp;<span class="ident" id="5755141">line</span><span class="op" id="5755145">}</span><br>
<span class="lineno"></span><span class="op" id="5755147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5755150">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5755217">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5755272">func</span>&nbsp;<span class="op" id="5755277">(</span><span class="ident" id="5755278">t</span>&nbsp;<span class="op" id="5755280">*</span><span class="ident" id="5755281">LineTable</span><span class="op" id="5755290">)</span>&nbsp;<span class="ident" id="5755292">PCToLine</span><span class="op" id="5755300">(</span><span class="ident" id="5755301">pc</span>&nbsp;<span class="ident" id="5755304">uint64</span><span class="op" id="5755310">)</span>&nbsp;<span class="builtintype" id="5755312">int</span>&nbsp;<span class="op" id="5755316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755319">if</span>&nbsp;<span class="ident" id="5755322">t</span><span class="op" id="5755323">.</span><span class="ident" id="5755324">isGo12</span><span class="op" id="5755330">(</span><span class="op" id="5755331">)</span>&nbsp;<span class="op" id="5755333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755337">return</span>&nbsp;<span class="ident" id="5755344">t</span><span class="op" id="5755345">.</span><span class="ident" id="5755346">go12PCToLine</span><span class="op" id="5755358">(</span><span class="ident" id="5755359">pc</span><span class="op" id="5755361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5755364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5755367">_</span><span class="op" id="5755368">,</span>&nbsp;<span class="ident" id="5755370">_</span><span class="op" id="5755371">,</span>&nbsp;<span class="ident" id="5755373">line</span>&nbsp;<span class="op" id="5755378">:=</span>&nbsp;<span class="ident" id="5755381">t</span><span class="op" id="5755382">.</span><span class="ident" id="5755383">parse</span><span class="op" id="5755388">(</span><span class="ident" id="5755389">pc</span><span class="op" id="5755391">,</span>&nbsp;<span class="op" id="5755393">-</span><span class="num" id="5755394">1</span><span class="op" id="5755395">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755398">return</span>&nbsp;<span class="ident" id="5755405">line</span><br>
<span class="lineno"></span><span class="op" id="5755410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5755413">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5755480">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5755531">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5755586">func</span>&nbsp;<span class="op" id="5755591">(</span><span class="ident" id="5755592">t</span>&nbsp;<span class="op" id="5755594">*</span><span class="ident" id="5755595">LineTable</span><span class="op" id="5755604">)</span>&nbsp;<span class="ident" id="5755606">LineToPC</span><span class="op" id="5755614">(</span><span class="ident" id="5755615">line</span>&nbsp;<span class="builtintype" id="5755620">int</span><span class="op" id="5755623">,</span>&nbsp;<span class="ident" id="5755625">maxpc</span>&nbsp;<span class="ident" id="5755631">uint64</span><span class="op" id="5755637">)</span>&nbsp;<span class="ident" id="5755639">uint64</span>&nbsp;<span class="op" id="5755646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755649">if</span>&nbsp;<span class="ident" id="5755652">t</span><span class="op" id="5755653">.</span><span class="ident" id="5755654">isGo12</span><span class="op" id="5755660">(</span><span class="op" id="5755661">)</span>&nbsp;<span class="op" id="5755663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755667">return</span>&nbsp;<span class="num" id="5755674">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5755677">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5755680">_</span><span class="op" id="5755681">,</span>&nbsp;<span class="ident" id="5755683">pc</span><span class="op" id="5755685">,</span>&nbsp;<span class="ident" id="5755687">line1</span>&nbsp;<span class="op" id="5755693">:=</span>&nbsp;<span class="ident" id="5755696">t</span><span class="op" id="5755697">.</span><span class="ident" id="5755698">parse</span><span class="op" id="5755703">(</span><span class="ident" id="5755704">maxpc</span><span class="op" id="5755709">,</span>&nbsp;<span class="ident" id="5755711">line</span><span class="op" id="5755715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755718">if</span>&nbsp;<span class="ident" id="5755721">line1</span>&nbsp;<span class="op" id="5755727">!=</span>&nbsp;<span class="ident" id="5755730">line</span>&nbsp;<span class="op" id="5755735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755739">return</span>&nbsp;<span class="num" id="5755746">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5755749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5755752">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5755816">return</span>&nbsp;<span class="ident" id="5755823">pc</span>&nbsp;<span class="op" id="5755826">-</span>&nbsp;<span class="ident" id="5755828">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5755839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5755842">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5755886">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5755924">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5755965">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5755996">func</span>&nbsp;<span class="ident" id="5756001">NewLineTable</span><span class="op" id="5756013">(</span><span class="ident" id="5756014">data</span>&nbsp;<span class="op" id="5756019">[</span><span class="op" id="5756020">]</span><span class="builtintype" id="5756021">byte</span><span class="op" id="5756025">,</span>&nbsp;<span class="ident" id="5756027">text</span>&nbsp;<span class="ident" id="5756032">uint64</span><span class="op" id="5756038">)</span>&nbsp;<span class="op" id="5756040">*</span><span class="ident" id="5756041">LineTable</span>&nbsp;<span class="op" id="5756051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5756054">return</span>&nbsp;<span class="op" id="5756061">&amp;</span><span class="ident" id="5756062">LineTable</span><span class="op" id="5756071">{</span><span class="ident" id="5756072">Data</span><span class="op" id="5756076">:</span>&nbsp;<span class="ident" id="5756078">data</span><span class="op" id="5756082">,</span>&nbsp;<span class="ident" id="5756084">PC</span><span class="op" id="5756086">:</span>&nbsp;<span class="ident" id="5756088">text</span><span class="op" id="5756092">,</span>&nbsp;<span class="ident" id="5756094">Line</span><span class="op" id="5756098">:</span>&nbsp;<span class="num" id="5756100">0</span><span class="op" id="5756101">}</span><br>
<span class="lineno"></span><span class="op" id="5756103">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5756106">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5756137">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5756169">//</span><br>
<span class="lineno"></span><span class="comment" id="5756172">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5756239">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5756307">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5756381">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5756405">//</span><br>
<span class="lineno"></span><span class="comment" id="5756408">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5756478">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5756524">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5756592">func</span>&nbsp;<span class="op" id="5756597">(</span><span class="ident" id="5756598">t</span>&nbsp;<span class="op" id="5756600">*</span><span class="ident" id="5756601">LineTable</span><span class="op" id="5756610">)</span>&nbsp;<span class="ident" id="5756612">isGo12</span><span class="op" id="5756618">(</span><span class="op" id="5756619">)</span>&nbsp;<span class="builtintype" id="5756621">bool</span>&nbsp;<span class="op" id="5756626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5756629">t</span><span class="op" id="5756630">.</span><span class="ident" id="5756631">go12Init</span><span class="op" id="5756639">(</span><span class="op" id="5756640">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5756643">return</span>&nbsp;<span class="ident" id="5756650">t</span><span class="op" id="5756651">.</span><span class="ident" id="5756652">go12</span>&nbsp;<span class="op" id="5756657">==</span>&nbsp;<span class="num" id="5756660">1</span><br>
<span class="lineno"></span><span class="op" id="5756662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5756665">const</span>&nbsp;<span class="ident" id="5756671">go12magic</span>&nbsp;<span class="op" id="5756681">=</span>&nbsp;<span class="num" id="5756683">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5756695">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5756752">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5756809">func</span>&nbsp;<span class="op" id="5756814">(</span><span class="ident" id="5756815">t</span>&nbsp;<span class="op" id="5756817">*</span><span class="ident" id="5756818">LineTable</span><span class="op" id="5756827">)</span>&nbsp;<span class="builtintype" id="5756829">uintptr</span><span class="op" id="5756836">(</span><span class="ident" id="5756837">b</span>&nbsp;<span class="op" id="5756839">[</span><span class="op" id="5756840">]</span><span class="builtintype" id="5756841">byte</span><span class="op" id="5756845">)</span>&nbsp;<span class="ident" id="5756847">uint64</span>&nbsp;<span class="op" id="5756854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5756857">if</span>&nbsp;<span class="ident" id="5756860">t</span><span class="op" id="5756861">.</span><span class="ident" id="5756862">ptrsize</span>&nbsp;<span class="op" id="5756870">==</span>&nbsp;<span class="num" id="5756873">4</span>&nbsp;<span class="op" id="5756875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5756879">return</span>&nbsp;<span class="ident" id="5756886">uint64</span><span class="op" id="5756892">(</span><span class="ident" id="5756893">t</span><span class="op" id="5756894">.</span><span class="ident" id="5756895">binary</span><span class="op" id="5756901">.</span><span class="ident" id="5756902">Uint32</span><span class="op" id="5756908">(</span><span class="ident" id="5756909">b</span><span class="op" id="5756910">)</span><span class="op" id="5756911">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5756914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5756917">return</span>&nbsp;<span class="ident" id="5756924">t</span><span class="op" id="5756925">.</span><span class="ident" id="5756926">binary</span><span class="op" id="5756932">.</span><span class="ident" id="5756933">Uint64</span><span class="op" id="5756939">(</span><span class="ident" id="5756940">b</span><span class="op" id="5756941">)</span><br>
<span class="lineno"></span><span class="op" id="5756943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5756946">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5757021">func</span>&nbsp;<span class="op" id="5757026">(</span><span class="ident" id="5757027">t</span>&nbsp;<span class="op" id="5757029">*</span><span class="ident" id="5757030">LineTable</span><span class="op" id="5757039">)</span>&nbsp;<span class="ident" id="5757041">go12Init</span><span class="op" id="5757049">(</span><span class="op" id="5757050">)</span>&nbsp;<span class="op" id="5757052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757055">t</span><span class="op" id="5757056">.</span><span class="ident" id="5757057">mu</span><span class="op" id="5757059">.</span><span class="ident" id="5757060">Lock</span><span class="op" id="5757064">(</span><span class="op" id="5757065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757068">defer</span>&nbsp;<span class="ident" id="5757074">t</span><span class="op" id="5757075">.</span><span class="ident" id="5757076">mu</span><span class="op" id="5757078">.</span><span class="ident" id="5757079">Unlock</span><span class="op" id="5757085">(</span><span class="op" id="5757086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757089">if</span>&nbsp;<span class="ident" id="5757092">t</span><span class="op" id="5757093">.</span><span class="ident" id="5757094">go12</span>&nbsp;<span class="op" id="5757099">!=</span>&nbsp;<span class="num" id="5757102">0</span>&nbsp;<span class="op" id="5757104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757108">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757120">defer</span>&nbsp;<span class="keyword" id="5757126">func</span><span class="op" id="5757130">(</span><span class="op" id="5757131">)</span>&nbsp;<span class="op" id="5757133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5757137">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5757202">recover</span><span class="op" id="5757209">(</span><span class="op" id="5757210">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757213">}</span><span class="op" id="5757214">(</span><span class="op" id="5757215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5757219">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757288">t</span><span class="op" id="5757289">.</span><span class="ident" id="5757290">go12</span>&nbsp;<span class="op" id="5757295">=</span>&nbsp;<span class="op" id="5757297">-</span><span class="num" id="5757298">1</span>&nbsp;<span class="comment" id="5757300">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757338">if</span>&nbsp;<span class="builtinfunc" id="5757341">len</span><span class="op" id="5757344">(</span><span class="ident" id="5757345">t</span><span class="op" id="5757346">.</span><span class="ident" id="5757347">Data</span><span class="op" id="5757351">)</span>&nbsp;<span class="op" id="5757353">&lt;</span>&nbsp;<span class="num" id="5757355">16</span>&nbsp;<span class="op" id="5757358">||</span>&nbsp;<span class="ident" id="5757361">t</span><span class="op" id="5757362">.</span><span class="ident" id="5757363">Data</span><span class="op" id="5757367">[</span><span class="num" id="5757368">4</span><span class="op" id="5757369">]</span>&nbsp;<span class="op" id="5757371">!=</span>&nbsp;<span class="num" id="5757374">0</span>&nbsp;<span class="op" id="5757376">||</span>&nbsp;<span class="ident" id="5757379">t</span><span class="op" id="5757380">.</span><span class="ident" id="5757381">Data</span><span class="op" id="5757385">[</span><span class="num" id="5757386">5</span><span class="op" id="5757387">]</span>&nbsp;<span class="op" id="5757389">!=</span>&nbsp;<span class="num" id="5757392">0</span>&nbsp;<span class="op" id="5757394">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757399">(</span><span class="ident" id="5757400">t</span><span class="op" id="5757401">.</span><span class="ident" id="5757402">Data</span><span class="op" id="5757406">[</span><span class="num" id="5757407">6</span><span class="op" id="5757408">]</span>&nbsp;<span class="op" id="5757410">!=</span>&nbsp;<span class="num" id="5757413">1</span>&nbsp;<span class="op" id="5757415">&amp;&amp;</span>&nbsp;<span class="ident" id="5757418">t</span><span class="op" id="5757419">.</span><span class="ident" id="5757420">Data</span><span class="op" id="5757424">[</span><span class="num" id="5757425">6</span><span class="op" id="5757426">]</span>&nbsp;<span class="op" id="5757428">!=</span>&nbsp;<span class="num" id="5757431">4</span><span class="op" id="5757432">)</span>&nbsp;<span class="op" id="5757434">||</span>&nbsp;<span class="comment" id="5757437">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757453">(</span><span class="ident" id="5757454">t</span><span class="op" id="5757455">.</span><span class="ident" id="5757456">Data</span><span class="op" id="5757460">[</span><span class="num" id="5757461">7</span><span class="op" id="5757462">]</span>&nbsp;<span class="op" id="5757464">!=</span>&nbsp;<span class="num" id="5757467">4</span>&nbsp;<span class="op" id="5757469">&amp;&amp;</span>&nbsp;<span class="ident" id="5757472">t</span><span class="op" id="5757473">.</span><span class="ident" id="5757474">Data</span><span class="op" id="5757478">[</span><span class="num" id="5757479">7</span><span class="op" id="5757480">]</span>&nbsp;<span class="op" id="5757482">!=</span>&nbsp;<span class="num" id="5757485">8</span><span class="op" id="5757486">)</span>&nbsp;<span class="op" id="5757488">{</span>&nbsp;<span class="comment" id="5757490">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757520">switch</span>&nbsp;<span class="builtintype" id="5757527">uint32</span><span class="op" id="5757533">(</span><span class="ident" id="5757534">go12magic</span><span class="op" id="5757543">)</span>&nbsp;<span class="op" id="5757545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757548">case</span>&nbsp;<span class="ident" id="5757553">binary</span><span class="op" id="5757559">.</span><span class="ident" id="5757560">LittleEndian</span><span class="op" id="5757572">.</span><span class="ident" id="5757573">Uint32</span><span class="op" id="5757579">(</span><span class="ident" id="5757580">t</span><span class="op" id="5757581">.</span><span class="ident" id="5757582">Data</span><span class="op" id="5757586">)</span><span class="op" id="5757587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757591">t</span><span class="op" id="5757592">.</span><span class="ident" id="5757593">binary</span>&nbsp;<span class="op" id="5757600">=</span>&nbsp;<span class="ident" id="5757602">binary</span><span class="op" id="5757608">.</span><span class="ident" id="5757609">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757623">case</span>&nbsp;<span class="ident" id="5757628">binary</span><span class="op" id="5757634">.</span><span class="ident" id="5757635">BigEndian</span><span class="op" id="5757644">.</span><span class="ident" id="5757645">Uint32</span><span class="op" id="5757651">(</span><span class="ident" id="5757652">t</span><span class="op" id="5757653">.</span><span class="ident" id="5757654">Data</span><span class="op" id="5757658">)</span><span class="op" id="5757659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757663">t</span><span class="op" id="5757664">.</span><span class="ident" id="5757665">binary</span>&nbsp;<span class="op" id="5757672">=</span>&nbsp;<span class="ident" id="5757674">binary</span><span class="op" id="5757680">.</span><span class="ident" id="5757681">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757692">default</span><span class="op" id="5757699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5757703">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5757711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757715">t</span><span class="op" id="5757716">.</span><span class="ident" id="5757717">quantum</span>&nbsp;<span class="op" id="5757725">=</span>&nbsp;<span class="builtintype" id="5757727">uint32</span><span class="op" id="5757733">(</span><span class="ident" id="5757734">t</span><span class="op" id="5757735">.</span><span class="ident" id="5757736">Data</span><span class="op" id="5757740">[</span><span class="num" id="5757741">6</span><span class="op" id="5757742">]</span><span class="op" id="5757743">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757746">t</span><span class="op" id="5757747">.</span><span class="ident" id="5757748">ptrsize</span>&nbsp;<span class="op" id="5757756">=</span>&nbsp;<span class="builtintype" id="5757758">uint32</span><span class="op" id="5757764">(</span><span class="ident" id="5757765">t</span><span class="op" id="5757766">.</span><span class="ident" id="5757767">Data</span><span class="op" id="5757771">[</span><span class="num" id="5757772">7</span><span class="op" id="5757773">]</span><span class="op" id="5757774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757778">t</span><span class="op" id="5757779">.</span><span class="ident" id="5757780">nfunctab</span>&nbsp;<span class="op" id="5757789">=</span>&nbsp;<span class="builtintype" id="5757791">uint32</span><span class="op" id="5757797">(</span><span class="ident" id="5757798">t</span><span class="op" id="5757799">.</span><span class="builtintype" id="5757800">uintptr</span><span class="op" id="5757807">(</span><span class="ident" id="5757808">t</span><span class="op" id="5757809">.</span><span class="ident" id="5757810">Data</span><span class="op" id="5757814">[</span><span class="num" id="5757815">8</span><span class="op" id="5757816">:</span><span class="op" id="5757817">]</span><span class="op" id="5757818">)</span><span class="op" id="5757819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757822">t</span><span class="op" id="5757823">.</span><span class="ident" id="5757824">functab</span>&nbsp;<span class="op" id="5757832">=</span>&nbsp;<span class="ident" id="5757834">t</span><span class="op" id="5757835">.</span><span class="ident" id="5757836">Data</span><span class="op" id="5757840">[</span><span class="num" id="5757841">8</span><span class="op" id="5757842">+</span><span class="ident" id="5757843">t</span><span class="op" id="5757844">.</span><span class="ident" id="5757845">ptrsize</span><span class="op" id="5757852">:</span><span class="op" id="5757853">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757856">functabsize</span>&nbsp;<span class="op" id="5757868">:=</span>&nbsp;<span class="ident" id="5757871">t</span><span class="op" id="5757872">.</span><span class="ident" id="5757873">nfunctab</span><span class="op" id="5757881">*</span><span class="num" id="5757882">2</span><span class="op" id="5757883">*</span><span class="ident" id="5757884">t</span><span class="op" id="5757885">.</span><span class="ident" id="5757886">ptrsize</span>&nbsp;<span class="op" id="5757894">+</span>&nbsp;<span class="ident" id="5757896">t</span><span class="op" id="5757897">.</span><span class="ident" id="5757898">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757907">fileoff</span>&nbsp;<span class="op" id="5757915">:=</span>&nbsp;<span class="ident" id="5757918">t</span><span class="op" id="5757919">.</span><span class="ident" id="5757920">binary</span><span class="op" id="5757926">.</span><span class="ident" id="5757927">Uint32</span><span class="op" id="5757933">(</span><span class="ident" id="5757934">t</span><span class="op" id="5757935">.</span><span class="ident" id="5757936">functab</span><span class="op" id="5757943">[</span><span class="ident" id="5757944">functabsize</span><span class="op" id="5757955">:</span><span class="op" id="5757956">]</span><span class="op" id="5757957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757960">t</span><span class="op" id="5757961">.</span><span class="ident" id="5757962">functab</span>&nbsp;<span class="op" id="5757970">=</span>&nbsp;<span class="ident" id="5757972">t</span><span class="op" id="5757973">.</span><span class="ident" id="5757974">functab</span><span class="op" id="5757981">[</span><span class="op" id="5757982">:</span><span class="ident" id="5757983">functabsize</span><span class="op" id="5757994">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5757997">t</span><span class="op" id="5757998">.</span><span class="ident" id="5757999">filetab</span>&nbsp;<span class="op" id="5758007">=</span>&nbsp;<span class="ident" id="5758009">t</span><span class="op" id="5758010">.</span><span class="ident" id="5758011">Data</span><span class="op" id="5758015">[</span><span class="ident" id="5758016">fileoff</span><span class="op" id="5758023">:</span><span class="op" id="5758024">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758027">t</span><span class="op" id="5758028">.</span><span class="ident" id="5758029">nfiletab</span>&nbsp;<span class="op" id="5758038">=</span>&nbsp;<span class="ident" id="5758040">t</span><span class="op" id="5758041">.</span><span class="ident" id="5758042">binary</span><span class="op" id="5758048">.</span><span class="ident" id="5758049">Uint32</span><span class="op" id="5758055">(</span><span class="ident" id="5758056">t</span><span class="op" id="5758057">.</span><span class="ident" id="5758058">filetab</span><span class="op" id="5758065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758068">t</span><span class="op" id="5758069">.</span><span class="ident" id="5758070">filetab</span>&nbsp;<span class="op" id="5758078">=</span>&nbsp;<span class="ident" id="5758080">t</span><span class="op" id="5758081">.</span><span class="ident" id="5758082">filetab</span><span class="op" id="5758089">[</span><span class="op" id="5758090">:</span><span class="ident" id="5758091">t</span><span class="op" id="5758092">.</span><span class="ident" id="5758093">nfiletab</span><span class="op" id="5758101">*</span><span class="num" id="5758102">4</span><span class="op" id="5758103">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758107">t</span><span class="op" id="5758108">.</span><span class="ident" id="5758109">go12</span>&nbsp;<span class="op" id="5758114">=</span>&nbsp;<span class="num" id="5758116">1</span>&nbsp;<span class="comment" id="5758118">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5758136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5758139">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5758213">func</span>&nbsp;<span class="op" id="5758218">(</span><span class="ident" id="5758219">t</span>&nbsp;<span class="op" id="5758221">*</span><span class="ident" id="5758222">LineTable</span><span class="op" id="5758231">)</span>&nbsp;<span class="ident" id="5758233">go12Funcs</span><span class="op" id="5758242">(</span><span class="op" id="5758243">)</span>&nbsp;<span class="op" id="5758245">[</span><span class="op" id="5758246">]</span><span class="ident" id="5758247">Func</span>&nbsp;<span class="op" id="5758252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5758255">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5758307">defer</span>&nbsp;<span class="keyword" id="5758313">func</span><span class="op" id="5758317">(</span><span class="op" id="5758318">)</span>&nbsp;<span class="op" id="5758320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5758324">recover</span><span class="op" id="5758331">(</span><span class="op" id="5758332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5758335">}</span><span class="op" id="5758336">(</span><span class="op" id="5758337">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758341">n</span>&nbsp;<span class="op" id="5758343">:=</span>&nbsp;<span class="builtinfunc" id="5758346">len</span><span class="op" id="5758349">(</span><span class="ident" id="5758350">t</span><span class="op" id="5758351">.</span><span class="ident" id="5758352">functab</span><span class="op" id="5758359">)</span>&nbsp;<span class="op" id="5758361">/</span>&nbsp;<span class="builtintype" id="5758363">int</span><span class="op" id="5758366">(</span><span class="ident" id="5758367">t</span><span class="op" id="5758368">.</span><span class="ident" id="5758369">ptrsize</span><span class="op" id="5758376">)</span>&nbsp;<span class="op" id="5758378">/</span>&nbsp;<span class="num" id="5758380">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758383">funcs</span>&nbsp;<span class="op" id="5758389">:=</span>&nbsp;<span class="builtinfunc" id="5758392">make</span><span class="op" id="5758396">(</span><span class="op" id="5758397">[</span><span class="op" id="5758398">]</span><span class="ident" id="5758399">Func</span><span class="op" id="5758403">,</span>&nbsp;<span class="ident" id="5758405">n</span><span class="op" id="5758406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5758409">for</span>&nbsp;<span class="ident" id="5758413">i</span>&nbsp;<span class="op" id="5758415">:=</span>&nbsp;<span class="keyword" id="5758418">range</span>&nbsp;<span class="ident" id="5758424">funcs</span>&nbsp;<span class="op" id="5758430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758434">f</span>&nbsp;<span class="op" id="5758436">:=</span>&nbsp;<span class="op" id="5758439">&amp;</span><span class="ident" id="5758440">funcs</span><span class="op" id="5758445">[</span><span class="ident" id="5758446">i</span><span class="op" id="5758447">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758451">f</span><span class="op" id="5758452">.</span><span class="ident" id="5758453">Entry</span>&nbsp;<span class="op" id="5758459">=</span>&nbsp;<span class="ident" id="5758461">uint64</span><span class="op" id="5758467">(</span><span class="ident" id="5758468">t</span><span class="op" id="5758469">.</span><span class="builtintype" id="5758470">uintptr</span><span class="op" id="5758477">(</span><span class="ident" id="5758478">t</span><span class="op" id="5758479">.</span><span class="ident" id="5758480">functab</span><span class="op" id="5758487">[</span><span class="num" id="5758488">2</span><span class="op" id="5758489">*</span><span class="ident" id="5758490">i</span><span class="op" id="5758491">*</span><span class="builtintype" id="5758492">int</span><span class="op" id="5758495">(</span><span class="ident" id="5758496">t</span><span class="op" id="5758497">.</span><span class="ident" id="5758498">ptrsize</span><span class="op" id="5758505">)</span><span class="op" id="5758506">:</span><span class="op" id="5758507">]</span><span class="op" id="5758508">)</span><span class="op" id="5758509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758513">f</span><span class="op" id="5758514">.</span><span class="ident" id="5758515">End</span>&nbsp;<span class="op" id="5758519">=</span>&nbsp;<span class="ident" id="5758521">uint64</span><span class="op" id="5758527">(</span><span class="ident" id="5758528">t</span><span class="op" id="5758529">.</span><span class="builtintype" id="5758530">uintptr</span><span class="op" id="5758537">(</span><span class="ident" id="5758538">t</span><span class="op" id="5758539">.</span><span class="ident" id="5758540">functab</span><span class="op" id="5758547">[</span><span class="op" id="5758548">(</span><span class="num" id="5758549">2</span><span class="op" id="5758550">*</span><span class="ident" id="5758551">i</span><span class="op" id="5758552">+</span><span class="num" id="5758553">2</span><span class="op" id="5758554">)</span><span class="op" id="5758555">*</span><span class="builtintype" id="5758556">int</span><span class="op" id="5758559">(</span><span class="ident" id="5758560">t</span><span class="op" id="5758561">.</span><span class="ident" id="5758562">ptrsize</span><span class="op" id="5758569">)</span><span class="op" id="5758570">:</span><span class="op" id="5758571">]</span><span class="op" id="5758572">)</span><span class="op" id="5758573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758577">info</span>&nbsp;<span class="op" id="5758582">:=</span>&nbsp;<span class="ident" id="5758585">t</span><span class="op" id="5758586">.</span><span class="ident" id="5758587">Data</span><span class="op" id="5758591">[</span><span class="ident" id="5758592">t</span><span class="op" id="5758593">.</span><span class="builtintype" id="5758594">uintptr</span><span class="op" id="5758601">(</span><span class="ident" id="5758602">t</span><span class="op" id="5758603">.</span><span class="ident" id="5758604">functab</span><span class="op" id="5758611">[</span><span class="op" id="5758612">(</span><span class="num" id="5758613">2</span><span class="op" id="5758614">*</span><span class="ident" id="5758615">i</span><span class="op" id="5758616">+</span><span class="num" id="5758617">1</span><span class="op" id="5758618">)</span><span class="op" id="5758619">*</span><span class="builtintype" id="5758620">int</span><span class="op" id="5758623">(</span><span class="ident" id="5758624">t</span><span class="op" id="5758625">.</span><span class="ident" id="5758626">ptrsize</span><span class="op" id="5758633">)</span><span class="op" id="5758634">:</span><span class="op" id="5758635">]</span><span class="op" id="5758636">)</span><span class="op" id="5758637">:</span><span class="op" id="5758638">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758642">f</span><span class="op" id="5758643">.</span><span class="ident" id="5758644">LineTable</span>&nbsp;<span class="op" id="5758654">=</span>&nbsp;<span class="ident" id="5758656">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758660">f</span><span class="op" id="5758661">.</span><span class="ident" id="5758662">FrameSize</span>&nbsp;<span class="op" id="5758672">=</span>&nbsp;<span class="builtintype" id="5758674">int</span><span class="op" id="5758677">(</span><span class="ident" id="5758678">t</span><span class="op" id="5758679">.</span><span class="ident" id="5758680">binary</span><span class="op" id="5758686">.</span><span class="ident" id="5758687">Uint32</span><span class="op" id="5758693">(</span><span class="ident" id="5758694">info</span><span class="op" id="5758698">[</span><span class="ident" id="5758699">t</span><span class="op" id="5758700">.</span><span class="ident" id="5758701">ptrsize</span><span class="op" id="5758708">+</span><span class="num" id="5758709">2</span><span class="op" id="5758710">*</span><span class="num" id="5758711">4</span><span class="op" id="5758712">:</span><span class="op" id="5758713">]</span><span class="op" id="5758714">)</span><span class="op" id="5758715">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758719">f</span><span class="op" id="5758720">.</span><span class="ident" id="5758721">Sym</span>&nbsp;<span class="op" id="5758725">=</span>&nbsp;<span class="op" id="5758727">&amp;</span><span class="ident" id="5758728">Sym</span><span class="op" id="5758731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758736">Value</span><span class="op" id="5758741">:</span>&nbsp;&nbsp;<span class="ident" id="5758744">f</span><span class="op" id="5758745">.</span><span class="ident" id="5758746">Entry</span><span class="op" id="5758751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758756">Type</span><span class="op" id="5758760">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5758764">&#39;T&#39;</span><span class="op" id="5758767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758772">Name</span><span class="op" id="5758776">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5758780">t</span><span class="op" id="5758781">.</span><span class="builtintype" id="5758782">string</span><span class="op" id="5758788">(</span><span class="ident" id="5758789">t</span><span class="op" id="5758790">.</span><span class="ident" id="5758791">binary</span><span class="op" id="5758797">.</span><span class="ident" id="5758798">Uint32</span><span class="op" id="5758804">(</span><span class="ident" id="5758805">info</span><span class="op" id="5758809">[</span><span class="ident" id="5758810">t</span><span class="op" id="5758811">.</span><span class="ident" id="5758812">ptrsize</span><span class="op" id="5758819">:</span><span class="op" id="5758820">]</span><span class="op" id="5758821">)</span><span class="op" id="5758822">)</span><span class="op" id="5758823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758828">GoType</span><span class="op" id="5758834">:</span>&nbsp;<span class="num" id="5758836">0</span><span class="op" id="5758837">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5758842">Func</span><span class="op" id="5758846">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5758850">f</span><span class="op" id="5758851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5758855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5758858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5758861">return</span>&nbsp;<span class="ident" id="5758868">funcs</span><br>
<span class="lineno"></span><span class="op" id="5758874">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5758877">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5758950">func</span>&nbsp;<span class="op" id="5758955">(</span><span class="ident" id="5758956">t</span>&nbsp;<span class="op" id="5758958">*</span><span class="ident" id="5758959">LineTable</span><span class="op" id="5758968">)</span>&nbsp;<span class="ident" id="5758970">findFunc</span><span class="op" id="5758978">(</span><span class="ident" id="5758979">pc</span>&nbsp;<span class="ident" id="5758982">uint64</span><span class="op" id="5758988">)</span>&nbsp;<span class="op" id="5758990">[</span><span class="op" id="5758991">]</span><span class="builtintype" id="5758992">byte</span>&nbsp;<span class="op" id="5758997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759000">if</span>&nbsp;<span class="ident" id="5759003">pc</span>&nbsp;<span class="op" id="5759006">&lt;</span>&nbsp;<span class="ident" id="5759008">t</span><span class="op" id="5759009">.</span><span class="builtintype" id="5759010">uintptr</span><span class="op" id="5759017">(</span><span class="ident" id="5759018">t</span><span class="op" id="5759019">.</span><span class="ident" id="5759020">functab</span><span class="op" id="5759027">)</span>&nbsp;<span class="op" id="5759029">||</span>&nbsp;<span class="ident" id="5759032">pc</span>&nbsp;<span class="op" id="5759035">&gt;=</span>&nbsp;<span class="ident" id="5759038">t</span><span class="op" id="5759039">.</span><span class="builtintype" id="5759040">uintptr</span><span class="op" id="5759047">(</span><span class="ident" id="5759048">t</span><span class="op" id="5759049">.</span><span class="ident" id="5759050">functab</span><span class="op" id="5759057">[</span><span class="builtinfunc" id="5759058">len</span><span class="op" id="5759061">(</span><span class="ident" id="5759062">t</span><span class="op" id="5759063">.</span><span class="ident" id="5759064">functab</span><span class="op" id="5759071">)</span><span class="op" id="5759072">-</span><span class="builtintype" id="5759073">int</span><span class="op" id="5759076">(</span><span class="ident" id="5759077">t</span><span class="op" id="5759078">.</span><span class="ident" id="5759079">ptrsize</span><span class="op" id="5759086">)</span><span class="op" id="5759087">:</span><span class="op" id="5759088">]</span><span class="op" id="5759089">)</span>&nbsp;<span class="op" id="5759091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759095">return</span>&nbsp;<span class="builtintype" id="5759102">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5759111">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5759170">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759235">f</span>&nbsp;<span class="op" id="5759237">:=</span>&nbsp;<span class="ident" id="5759240">t</span><span class="op" id="5759241">.</span><span class="ident" id="5759242">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759251">nf</span>&nbsp;<span class="op" id="5759254">:=</span>&nbsp;<span class="ident" id="5759257">t</span><span class="op" id="5759258">.</span><span class="ident" id="5759259">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759269">for</span>&nbsp;<span class="ident" id="5759273">nf</span>&nbsp;<span class="op" id="5759276">&gt;</span>&nbsp;<span class="num" id="5759278">0</span>&nbsp;<span class="op" id="5759280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759284">m</span>&nbsp;<span class="op" id="5759286">:=</span>&nbsp;<span class="ident" id="5759289">nf</span>&nbsp;<span class="op" id="5759292">/</span>&nbsp;<span class="num" id="5759294">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759298">fm</span>&nbsp;<span class="op" id="5759301">:=</span>&nbsp;<span class="ident" id="5759304">f</span><span class="op" id="5759305">[</span><span class="num" id="5759306">2</span><span class="op" id="5759307">*</span><span class="ident" id="5759308">t</span><span class="op" id="5759309">.</span><span class="ident" id="5759310">ptrsize</span><span class="op" id="5759317">*</span><span class="ident" id="5759318">m</span><span class="op" id="5759319">:</span><span class="op" id="5759320">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759324">if</span>&nbsp;<span class="ident" id="5759327">t</span><span class="op" id="5759328">.</span><span class="builtintype" id="5759329">uintptr</span><span class="op" id="5759336">(</span><span class="ident" id="5759337">fm</span><span class="op" id="5759339">)</span>&nbsp;<span class="op" id="5759341">&lt;=</span>&nbsp;<span class="ident" id="5759344">pc</span>&nbsp;<span class="op" id="5759347">&amp;&amp;</span>&nbsp;<span class="ident" id="5759350">pc</span>&nbsp;<span class="op" id="5759353">&lt;</span>&nbsp;<span class="ident" id="5759355">t</span><span class="op" id="5759356">.</span><span class="builtintype" id="5759357">uintptr</span><span class="op" id="5759364">(</span><span class="ident" id="5759365">fm</span><span class="op" id="5759367">[</span><span class="num" id="5759368">2</span><span class="op" id="5759369">*</span><span class="ident" id="5759370">t</span><span class="op" id="5759371">.</span><span class="ident" id="5759372">ptrsize</span><span class="op" id="5759379">:</span><span class="op" id="5759380">]</span><span class="op" id="5759381">)</span>&nbsp;<span class="op" id="5759383">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759388">return</span>&nbsp;<span class="ident" id="5759395">t</span><span class="op" id="5759396">.</span><span class="ident" id="5759397">Data</span><span class="op" id="5759401">[</span><span class="ident" id="5759402">t</span><span class="op" id="5759403">.</span><span class="builtintype" id="5759404">uintptr</span><span class="op" id="5759411">(</span><span class="ident" id="5759412">fm</span><span class="op" id="5759414">[</span><span class="ident" id="5759415">t</span><span class="op" id="5759416">.</span><span class="ident" id="5759417">ptrsize</span><span class="op" id="5759424">:</span><span class="op" id="5759425">]</span><span class="op" id="5759426">)</span><span class="op" id="5759427">:</span><span class="op" id="5759428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759432">}</span>&nbsp;<span class="keyword" id="5759434">else</span>&nbsp;<span class="keyword" id="5759439">if</span>&nbsp;<span class="ident" id="5759442">pc</span>&nbsp;<span class="op" id="5759445">&lt;</span>&nbsp;<span class="ident" id="5759447">t</span><span class="op" id="5759448">.</span><span class="builtintype" id="5759449">uintptr</span><span class="op" id="5759456">(</span><span class="ident" id="5759457">fm</span><span class="op" id="5759459">)</span>&nbsp;<span class="op" id="5759461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759466">nf</span>&nbsp;<span class="op" id="5759469">=</span>&nbsp;<span class="ident" id="5759471">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759475">}</span>&nbsp;<span class="keyword" id="5759477">else</span>&nbsp;<span class="op" id="5759482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759487">f</span>&nbsp;<span class="op" id="5759489">=</span>&nbsp;<span class="ident" id="5759491">f</span><span class="op" id="5759492">[</span><span class="op" id="5759493">(</span><span class="ident" id="5759494">m</span><span class="op" id="5759495">+</span><span class="num" id="5759496">1</span><span class="op" id="5759497">)</span><span class="op" id="5759498">*</span><span class="num" id="5759499">2</span><span class="op" id="5759500">*</span><span class="ident" id="5759501">t</span><span class="op" id="5759502">.</span><span class="ident" id="5759503">ptrsize</span><span class="op" id="5759510">:</span><span class="op" id="5759511">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759516">nf</span>&nbsp;<span class="op" id="5759519">-=</span>&nbsp;<span class="ident" id="5759522">m</span>&nbsp;<span class="op" id="5759524">+</span>&nbsp;<span class="num" id="5759526">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759536">return</span>&nbsp;<span class="builtintype" id="5759543">nil</span><br>
<span class="lineno"></span><span class="op" id="5759547">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5759550">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5759611">func</span>&nbsp;<span class="op" id="5759616">(</span><span class="ident" id="5759617">t</span>&nbsp;<span class="op" id="5759619">*</span><span class="ident" id="5759620">LineTable</span><span class="op" id="5759629">)</span>&nbsp;<span class="ident" id="5759631">readvarint</span><span class="op" id="5759641">(</span><span class="ident" id="5759642">pp</span>&nbsp;<span class="op" id="5759645">*</span><span class="op" id="5759646">[</span><span class="op" id="5759647">]</span><span class="builtintype" id="5759648">byte</span><span class="op" id="5759652">)</span>&nbsp;<span class="builtintype" id="5759654">uint32</span>&nbsp;<span class="op" id="5759661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759664">var</span>&nbsp;<span class="ident" id="5759668">v</span><span class="op" id="5759669">,</span>&nbsp;<span class="ident" id="5759671">shift</span>&nbsp;<span class="builtintype" id="5759677">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759685">p</span>&nbsp;<span class="op" id="5759687">:=</span>&nbsp;<span class="op" id="5759690">*</span><span class="ident" id="5759691">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759695">for</span>&nbsp;<span class="ident" id="5759699">shift</span>&nbsp;<span class="op" id="5759705">=</span>&nbsp;<span class="num" id="5759707">0</span><span class="op" id="5759708">;</span>&nbsp;<span class="op" id="5759710">;</span>&nbsp;<span class="ident" id="5759712">shift</span>&nbsp;<span class="op" id="5759718">+=</span>&nbsp;<span class="num" id="5759721">7</span>&nbsp;<span class="op" id="5759723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759727">b</span>&nbsp;<span class="op" id="5759729">:=</span>&nbsp;<span class="ident" id="5759732">p</span><span class="op" id="5759733">[</span><span class="num" id="5759734">0</span><span class="op" id="5759735">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759739">p</span>&nbsp;<span class="op" id="5759741">=</span>&nbsp;<span class="ident" id="5759743">p</span><span class="op" id="5759744">[</span><span class="num" id="5759745">1</span><span class="op" id="5759746">:</span><span class="op" id="5759747">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5759751">v</span>&nbsp;<span class="op" id="5759753">|=</span>&nbsp;<span class="op" id="5759756">(</span><span class="builtintype" id="5759757">uint32</span><span class="op" id="5759763">(</span><span class="ident" id="5759764">b</span><span class="op" id="5759765">)</span>&nbsp;<span class="op" id="5759767">&amp;</span>&nbsp;<span class="num" id="5759769">0x7F</span><span class="op" id="5759773">)</span>&nbsp;<span class="op" id="5759775">&lt;&lt;</span>&nbsp;<span class="ident" id="5759778">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759786">if</span>&nbsp;<span class="ident" id="5759789">b</span><span class="op" id="5759790">&amp;</span><span class="num" id="5759791">0x80</span>&nbsp;<span class="op" id="5759796">==</span>&nbsp;<span class="num" id="5759799">0</span>&nbsp;<span class="op" id="5759801">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759806">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5759820">*</span><span class="ident" id="5759821">pp</span>&nbsp;<span class="op" id="5759824">=</span>&nbsp;<span class="ident" id="5759826">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759829">return</span>&nbsp;<span class="ident" id="5759836">v</span><br>
<span class="lineno">265</span><span class="op" id="5759838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5759841">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5759885">func</span>&nbsp;<span class="op" id="5759890">(</span><span class="ident" id="5759891">t</span>&nbsp;<span class="op" id="5759893">*</span><span class="ident" id="5759894">LineTable</span><span class="op" id="5759903">)</span>&nbsp;<span class="builtintype" id="5759905">string</span><span class="op" id="5759911">(</span><span class="ident" id="5759912">off</span>&nbsp;<span class="builtintype" id="5759916">uint32</span><span class="op" id="5759922">)</span>&nbsp;<span class="builtintype" id="5759924">string</span>&nbsp;<span class="op" id="5759931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759934">for</span>&nbsp;<span class="ident" id="5759938">i</span>&nbsp;<span class="op" id="5759940">:=</span>&nbsp;<span class="ident" id="5759943">off</span><span class="op" id="5759946">;</span>&nbsp;<span class="op" id="5759948">;</span>&nbsp;<span class="ident" id="5759950">i</span><span class="op" id="5759951">++</span>&nbsp;<span class="op" id="5759954">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759958">if</span>&nbsp;<span class="ident" id="5759961">t</span><span class="op" id="5759962">.</span><span class="ident" id="5759963">Data</span><span class="op" id="5759967">[</span><span class="ident" id="5759968">i</span><span class="op" id="5759969">]</span>&nbsp;<span class="op" id="5759971">==</span>&nbsp;<span class="num" id="5759974">0</span>&nbsp;<span class="op" id="5759976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5759981">return</span>&nbsp;<span class="builtintype" id="5759988">string</span><span class="op" id="5759994">(</span><span class="ident" id="5759995">t</span><span class="op" id="5759996">.</span><span class="ident" id="5759997">Data</span><span class="op" id="5760001">[</span><span class="ident" id="5760002">off</span><span class="op" id="5760005">:</span><span class="ident" id="5760006">i</span><span class="op" id="5760007">]</span><span class="op" id="5760008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760015">}</span><br>
<span class="lineno"></span><span class="op" id="5760017">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5760020">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5760086">func</span>&nbsp;<span class="op" id="5760091">(</span><span class="ident" id="5760092">t</span>&nbsp;<span class="op" id="5760094">*</span><span class="ident" id="5760095">LineTable</span><span class="op" id="5760104">)</span>&nbsp;<span class="ident" id="5760106">step</span><span class="op" id="5760110">(</span><span class="ident" id="5760111">p</span>&nbsp;<span class="op" id="5760113">*</span><span class="op" id="5760114">[</span><span class="op" id="5760115">]</span><span class="builtintype" id="5760116">byte</span><span class="op" id="5760120">,</span>&nbsp;<span class="ident" id="5760122">pc</span>&nbsp;<span class="op" id="5760125">*</span><span class="ident" id="5760126">uint64</span><span class="op" id="5760132">,</span>&nbsp;<span class="ident" id="5760134">val</span>&nbsp;<span class="op" id="5760138">*</span><span class="builtintype" id="5760139">int32</span><span class="op" id="5760144">,</span>&nbsp;<span class="ident" id="5760146">first</span>&nbsp;<span class="builtintype" id="5760152">bool</span><span class="op" id="5760156">)</span>&nbsp;<span class="builtintype" id="5760158">bool</span>&nbsp;<span class="op" id="5760163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760166">uvdelta</span>&nbsp;<span class="op" id="5760174">:=</span>&nbsp;<span class="ident" id="5760177">t</span><span class="op" id="5760178">.</span><span class="ident" id="5760179">readvarint</span><span class="op" id="5760189">(</span><span class="ident" id="5760190">p</span><span class="op" id="5760191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760194">if</span>&nbsp;<span class="ident" id="5760197">uvdelta</span>&nbsp;<span class="op" id="5760205">==</span>&nbsp;<span class="num" id="5760208">0</span>&nbsp;<span class="op" id="5760210">&amp;&amp;</span>&nbsp;<span class="op" id="5760213">!</span><span class="ident" id="5760214">first</span>&nbsp;<span class="op" id="5760220">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760224">return</span>&nbsp;<span class="builtintype" id="5760231">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760241">if</span>&nbsp;<span class="ident" id="5760244">uvdelta</span><span class="op" id="5760251">&amp;</span><span class="num" id="5760252">1</span>&nbsp;<span class="op" id="5760254">!=</span>&nbsp;<span class="num" id="5760257">0</span>&nbsp;<span class="op" id="5760259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760263">uvdelta</span>&nbsp;<span class="op" id="5760271">=</span>&nbsp;<span class="op" id="5760273">^</span><span class="op" id="5760274">(</span><span class="ident" id="5760275">uvdelta</span>&nbsp;<span class="op" id="5760283">&gt;&gt;</span>&nbsp;<span class="num" id="5760286">1</span><span class="op" id="5760287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760290">}</span>&nbsp;<span class="keyword" id="5760292">else</span>&nbsp;<span class="op" id="5760297">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760301">uvdelta</span>&nbsp;<span class="op" id="5760309">&gt;&gt;=</span>&nbsp;<span class="num" id="5760313">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760319">vdelta</span>&nbsp;<span class="op" id="5760326">:=</span>&nbsp;<span class="builtintype" id="5760329">int32</span><span class="op" id="5760334">(</span><span class="ident" id="5760335">uvdelta</span><span class="op" id="5760342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760345">pcdelta</span>&nbsp;<span class="op" id="5760353">:=</span>&nbsp;<span class="ident" id="5760356">t</span><span class="op" id="5760357">.</span><span class="ident" id="5760358">readvarint</span><span class="op" id="5760368">(</span><span class="ident" id="5760369">p</span><span class="op" id="5760370">)</span>&nbsp;<span class="op" id="5760372">*</span>&nbsp;<span class="ident" id="5760374">t</span><span class="op" id="5760375">.</span><span class="ident" id="5760376">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760385">*</span><span class="ident" id="5760386">pc</span>&nbsp;<span class="op" id="5760389">+=</span>&nbsp;<span class="ident" id="5760392">uint64</span><span class="op" id="5760398">(</span><span class="ident" id="5760399">pcdelta</span><span class="op" id="5760406">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760409">*</span><span class="ident" id="5760410">val</span>&nbsp;<span class="op" id="5760414">+=</span>&nbsp;<span class="ident" id="5760417">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760425">return</span>&nbsp;<span class="builtintype" id="5760432">true</span><br>
<span class="lineno"></span><span class="op" id="5760437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5760440">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5760500">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5760561">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5760622">func</span>&nbsp;<span class="op" id="5760627">(</span><span class="ident" id="5760628">t</span>&nbsp;<span class="op" id="5760630">*</span><span class="ident" id="5760631">LineTable</span><span class="op" id="5760640">)</span>&nbsp;<span class="ident" id="5760642">pcvalue</span><span class="op" id="5760649">(</span><span class="ident" id="5760650">off</span>&nbsp;<span class="builtintype" id="5760654">uint32</span><span class="op" id="5760660">,</span>&nbsp;<span class="ident" id="5760662">entry</span><span class="op" id="5760667">,</span>&nbsp;<span class="ident" id="5760669">targetpc</span>&nbsp;<span class="ident" id="5760678">uint64</span><span class="op" id="5760684">)</span>&nbsp;<span class="builtintype" id="5760686">int32</span>&nbsp;<span class="op" id="5760692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760695">if</span>&nbsp;<span class="ident" id="5760698">off</span>&nbsp;<span class="op" id="5760702">==</span>&nbsp;<span class="num" id="5760705">0</span>&nbsp;<span class="op" id="5760707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760711">return</span>&nbsp;<span class="op" id="5760718">-</span><span class="num" id="5760719">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760725">p</span>&nbsp;<span class="op" id="5760727">:=</span>&nbsp;<span class="ident" id="5760730">t</span><span class="op" id="5760731">.</span><span class="ident" id="5760732">Data</span><span class="op" id="5760736">[</span><span class="ident" id="5760737">off</span><span class="op" id="5760740">:</span><span class="op" id="5760741">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760745">val</span>&nbsp;<span class="op" id="5760749">:=</span>&nbsp;<span class="builtintype" id="5760752">int32</span><span class="op" id="5760757">(</span><span class="op" id="5760758">-</span><span class="num" id="5760759">1</span><span class="op" id="5760760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5760763">pc</span>&nbsp;<span class="op" id="5760766">:=</span>&nbsp;<span class="ident" id="5760769">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760776">for</span>&nbsp;<span class="ident" id="5760780">t</span><span class="op" id="5760781">.</span><span class="ident" id="5760782">step</span><span class="op" id="5760786">(</span><span class="op" id="5760787">&amp;</span><span class="ident" id="5760788">p</span><span class="op" id="5760789">,</span>&nbsp;<span class="op" id="5760791">&amp;</span><span class="ident" id="5760792">pc</span><span class="op" id="5760794">,</span>&nbsp;<span class="op" id="5760796">&amp;</span><span class="ident" id="5760797">val</span><span class="op" id="5760800">,</span>&nbsp;<span class="ident" id="5760802">pc</span>&nbsp;<span class="op" id="5760805">==</span>&nbsp;<span class="ident" id="5760808">entry</span><span class="op" id="5760813">)</span>&nbsp;<span class="op" id="5760815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760819">if</span>&nbsp;<span class="ident" id="5760822">targetpc</span>&nbsp;<span class="op" id="5760831">&lt;</span>&nbsp;<span class="ident" id="5760833">pc</span>&nbsp;<span class="op" id="5760836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760841">return</span>&nbsp;<span class="ident" id="5760848">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5760857">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5760860">return</span>&nbsp;<span class="op" id="5760867">-</span><span class="num" id="5760868">1</span><br>
<span class="lineno"></span><span class="op" id="5760870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5760873">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5760936">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5760992">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5761061">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5761132">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5761207">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5761284">func</span>&nbsp;<span class="op" id="5761289">(</span><span class="ident" id="5761290">t</span>&nbsp;<span class="op" id="5761292">*</span><span class="ident" id="5761293">LineTable</span><span class="op" id="5761302">)</span>&nbsp;<span class="ident" id="5761304">findFileLine</span><span class="op" id="5761316">(</span><span class="ident" id="5761317">entry</span>&nbsp;<span class="ident" id="5761323">uint64</span><span class="op" id="5761329">,</span>&nbsp;<span class="ident" id="5761331">filetab</span><span class="op" id="5761338">,</span>&nbsp;<span class="ident" id="5761340">linetab</span>&nbsp;<span class="builtintype" id="5761348">uint32</span><span class="op" id="5761354">,</span>&nbsp;<span class="ident" id="5761356">filenum</span><span class="op" id="5761363">,</span>&nbsp;<span class="ident" id="5761365">line</span>&nbsp;<span class="builtintype" id="5761370">int32</span><span class="op" id="5761375">)</span>&nbsp;<span class="ident" id="5761377">uint64</span>&nbsp;<span class="op" id="5761384">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5761387">if</span>&nbsp;<span class="ident" id="5761390">filetab</span>&nbsp;<span class="op" id="5761398">==</span>&nbsp;<span class="num" id="5761401">0</span>&nbsp;<span class="op" id="5761403">||</span>&nbsp;<span class="ident" id="5761406">linetab</span>&nbsp;<span class="op" id="5761414">==</span>&nbsp;<span class="num" id="5761417">0</span>&nbsp;<span class="op" id="5761419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5761423">return</span>&nbsp;<span class="num" id="5761430">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5761433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761437">fp</span>&nbsp;<span class="op" id="5761440">:=</span>&nbsp;<span class="ident" id="5761443">t</span><span class="op" id="5761444">.</span><span class="ident" id="5761445">Data</span><span class="op" id="5761449">[</span><span class="ident" id="5761450">filetab</span><span class="op" id="5761457">:</span><span class="op" id="5761458">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761461">fl</span>&nbsp;<span class="op" id="5761464">:=</span>&nbsp;<span class="ident" id="5761467">t</span><span class="op" id="5761468">.</span><span class="ident" id="5761469">Data</span><span class="op" id="5761473">[</span><span class="ident" id="5761474">linetab</span><span class="op" id="5761481">:</span><span class="op" id="5761482">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761485">fileVal</span>&nbsp;<span class="op" id="5761493">:=</span>&nbsp;<span class="builtintype" id="5761496">int32</span><span class="op" id="5761501">(</span><span class="op" id="5761502">-</span><span class="num" id="5761503">1</span><span class="op" id="5761504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761507">filePC</span>&nbsp;<span class="op" id="5761514">:=</span>&nbsp;<span class="ident" id="5761517">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761524">lineVal</span>&nbsp;<span class="op" id="5761532">:=</span>&nbsp;<span class="builtintype" id="5761535">int32</span><span class="op" id="5761540">(</span><span class="op" id="5761541">-</span><span class="num" id="5761542">1</span><span class="op" id="5761543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761546">linePC</span>&nbsp;<span class="op" id="5761553">:=</span>&nbsp;<span class="ident" id="5761556">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761563">fileStartPC</span>&nbsp;<span class="op" id="5761575">:=</span>&nbsp;<span class="ident" id="5761578">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5761586">for</span>&nbsp;<span class="ident" id="5761590">t</span><span class="op" id="5761591">.</span><span class="ident" id="5761592">step</span><span class="op" id="5761596">(</span><span class="op" id="5761597">&amp;</span><span class="ident" id="5761598">fp</span><span class="op" id="5761600">,</span>&nbsp;<span class="op" id="5761602">&amp;</span><span class="ident" id="5761603">filePC</span><span class="op" id="5761609">,</span>&nbsp;<span class="op" id="5761611">&amp;</span><span class="ident" id="5761612">fileVal</span><span class="op" id="5761619">,</span>&nbsp;<span class="ident" id="5761621">filePC</span>&nbsp;<span class="op" id="5761628">==</span>&nbsp;<span class="ident" id="5761631">entry</span><span class="op" id="5761636">)</span>&nbsp;<span class="op" id="5761638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5761642">if</span>&nbsp;<span class="ident" id="5761645">fileVal</span>&nbsp;<span class="op" id="5761653">==</span>&nbsp;<span class="ident" id="5761656">filenum</span>&nbsp;<span class="op" id="5761664">&amp;&amp;</span>&nbsp;<span class="ident" id="5761667">fileStartPC</span>&nbsp;<span class="op" id="5761679">&lt;</span>&nbsp;<span class="ident" id="5761681">filePC</span>&nbsp;<span class="op" id="5761688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5761693">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5761750">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5761809">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5761867">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5761899">lineStartPC</span>&nbsp;<span class="op" id="5761911">:=</span>&nbsp;<span class="ident" id="5761914">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5761924">for</span>&nbsp;<span class="ident" id="5761928">linePC</span>&nbsp;<span class="op" id="5761935">&lt;</span>&nbsp;<span class="ident" id="5761937">filePC</span>&nbsp;<span class="op" id="5761944">&amp;&amp;</span>&nbsp;<span class="ident" id="5761947">t</span><span class="op" id="5761948">.</span><span class="ident" id="5761949">step</span><span class="op" id="5761953">(</span><span class="op" id="5761954">&amp;</span><span class="ident" id="5761955">fl</span><span class="op" id="5761957">,</span>&nbsp;<span class="op" id="5761959">&amp;</span><span class="ident" id="5761960">linePC</span><span class="op" id="5761966">,</span>&nbsp;<span class="op" id="5761968">&amp;</span><span class="ident" id="5761969">lineVal</span><span class="op" id="5761976">,</span>&nbsp;<span class="ident" id="5761978">linePC</span>&nbsp;<span class="op" id="5761985">==</span>&nbsp;<span class="ident" id="5761988">entry</span><span class="op" id="5761993">)</span>&nbsp;<span class="op" id="5761995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5762001">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762069">if</span>&nbsp;<span class="ident" id="5762072">lineVal</span>&nbsp;<span class="op" id="5762080">==</span>&nbsp;<span class="ident" id="5762083">line</span>&nbsp;<span class="op" id="5762088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762095">if</span>&nbsp;<span class="ident" id="5762098">fileStartPC</span>&nbsp;<span class="op" id="5762110">&lt;=</span>&nbsp;<span class="ident" id="5762113">lineStartPC</span>&nbsp;<span class="op" id="5762125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762133">return</span>&nbsp;<span class="ident" id="5762140">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762164">if</span>&nbsp;<span class="ident" id="5762167">fileStartPC</span>&nbsp;<span class="op" id="5762179">&lt;</span>&nbsp;<span class="ident" id="5762181">linePC</span>&nbsp;<span class="op" id="5762188">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762196">return</span>&nbsp;<span class="ident" id="5762203">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762232">lineStartPC</span>&nbsp;<span class="op" id="5762244">=</span>&nbsp;<span class="ident" id="5762246">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762256">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762264">fileStartPC</span>&nbsp;<span class="op" id="5762276">=</span>&nbsp;<span class="ident" id="5762278">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762289">return</span>&nbsp;<span class="num" id="5762296">0</span><br>
<span class="lineno"></span><span class="op" id="5762298">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5762301">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5762380">func</span>&nbsp;<span class="op" id="5762385">(</span><span class="ident" id="5762386">t</span>&nbsp;<span class="op" id="5762388">*</span><span class="ident" id="5762389">LineTable</span><span class="op" id="5762398">)</span>&nbsp;<span class="ident" id="5762400">go12PCToLine</span><span class="op" id="5762412">(</span><span class="ident" id="5762413">pc</span>&nbsp;<span class="ident" id="5762416">uint64</span><span class="op" id="5762422">)</span>&nbsp;<span class="op" id="5762424">(</span><span class="ident" id="5762425">line</span>&nbsp;<span class="builtintype" id="5762430">int</span><span class="op" id="5762433">)</span>&nbsp;<span class="op" id="5762435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762438">defer</span>&nbsp;<span class="keyword" id="5762444">func</span><span class="op" id="5762448">(</span><span class="op" id="5762449">)</span>&nbsp;<span class="op" id="5762451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762455">if</span>&nbsp;<span class="builtinfunc" id="5762458">recover</span><span class="op" id="5762465">(</span><span class="op" id="5762466">)</span>&nbsp;<span class="op" id="5762468">!=</span>&nbsp;<span class="builtintype" id="5762471">nil</span>&nbsp;<span class="op" id="5762475">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762480">line</span>&nbsp;<span class="op" id="5762485">=</span>&nbsp;<span class="op" id="5762487">-</span><span class="num" id="5762488">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762495">}</span><span class="op" id="5762496">(</span><span class="op" id="5762497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762501">f</span>&nbsp;<span class="op" id="5762503">:=</span>&nbsp;<span class="ident" id="5762506">t</span><span class="op" id="5762507">.</span><span class="ident" id="5762508">findFunc</span><span class="op" id="5762516">(</span><span class="ident" id="5762517">pc</span><span class="op" id="5762519">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762522">if</span>&nbsp;<span class="ident" id="5762525">f</span>&nbsp;<span class="op" id="5762527">==</span>&nbsp;<span class="builtintype" id="5762530">nil</span>&nbsp;<span class="op" id="5762534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762538">return</span>&nbsp;<span class="op" id="5762545">-</span><span class="num" id="5762546">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762552">entry</span>&nbsp;<span class="op" id="5762558">:=</span>&nbsp;<span class="ident" id="5762561">t</span><span class="op" id="5762562">.</span><span class="builtintype" id="5762563">uintptr</span><span class="op" id="5762570">(</span><span class="ident" id="5762571">f</span><span class="op" id="5762572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762575">linetab</span>&nbsp;<span class="op" id="5762583">:=</span>&nbsp;<span class="ident" id="5762586">t</span><span class="op" id="5762587">.</span><span class="ident" id="5762588">binary</span><span class="op" id="5762594">.</span><span class="ident" id="5762595">Uint32</span><span class="op" id="5762601">(</span><span class="ident" id="5762602">f</span><span class="op" id="5762603">[</span><span class="ident" id="5762604">t</span><span class="op" id="5762605">.</span><span class="ident" id="5762606">ptrsize</span><span class="op" id="5762613">+</span><span class="num" id="5762614">5</span><span class="op" id="5762615">*</span><span class="num" id="5762616">4</span><span class="op" id="5762617">:</span><span class="op" id="5762618">]</span><span class="op" id="5762619">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762622">return</span>&nbsp;<span class="builtintype" id="5762629">int</span><span class="op" id="5762632">(</span><span class="ident" id="5762633">t</span><span class="op" id="5762634">.</span><span class="ident" id="5762635">pcvalue</span><span class="op" id="5762642">(</span><span class="ident" id="5762643">linetab</span><span class="op" id="5762650">,</span>&nbsp;<span class="ident" id="5762652">entry</span><span class="op" id="5762657">,</span>&nbsp;<span class="ident" id="5762659">pc</span><span class="op" id="5762661">)</span><span class="op" id="5762662">)</span><br>
<span class="lineno"></span><span class="op" id="5762664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5762667">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5762744">func</span>&nbsp;<span class="op" id="5762749">(</span><span class="ident" id="5762750">t</span>&nbsp;<span class="op" id="5762752">*</span><span class="ident" id="5762753">LineTable</span><span class="op" id="5762762">)</span>&nbsp;<span class="ident" id="5762764">go12PCToFile</span><span class="op" id="5762776">(</span><span class="ident" id="5762777">pc</span>&nbsp;<span class="ident" id="5762780">uint64</span><span class="op" id="5762786">)</span>&nbsp;<span class="op" id="5762788">(</span><span class="ident" id="5762789">file</span>&nbsp;<span class="builtintype" id="5762794">string</span><span class="op" id="5762800">)</span>&nbsp;<span class="op" id="5762802">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762805">defer</span>&nbsp;<span class="keyword" id="5762811">func</span><span class="op" id="5762815">(</span><span class="op" id="5762816">)</span>&nbsp;<span class="op" id="5762818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762822">if</span>&nbsp;<span class="builtinfunc" id="5762825">recover</span><span class="op" id="5762832">(</span><span class="op" id="5762833">)</span>&nbsp;<span class="op" id="5762835">!=</span>&nbsp;<span class="builtintype" id="5762838">nil</span>&nbsp;<span class="op" id="5762842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762847">file</span>&nbsp;<span class="op" id="5762852">=</span>&nbsp;<span class="string" id="5762854">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762862">}</span><span class="op" id="5762863">(</span><span class="op" id="5762864">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762868">f</span>&nbsp;<span class="op" id="5762870">:=</span>&nbsp;<span class="ident" id="5762873">t</span><span class="op" id="5762874">.</span><span class="ident" id="5762875">findFunc</span><span class="op" id="5762883">(</span><span class="ident" id="5762884">pc</span><span class="op" id="5762886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762889">if</span>&nbsp;<span class="ident" id="5762892">f</span>&nbsp;<span class="op" id="5762894">==</span>&nbsp;<span class="builtintype" id="5762897">nil</span>&nbsp;<span class="op" id="5762901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5762905">return</span>&nbsp;<span class="string" id="5762912">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5762916">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762919">entry</span>&nbsp;<span class="op" id="5762925">:=</span>&nbsp;<span class="ident" id="5762928">t</span><span class="op" id="5762929">.</span><span class="builtintype" id="5762930">uintptr</span><span class="op" id="5762937">(</span><span class="ident" id="5762938">f</span><span class="op" id="5762939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762942">filetab</span>&nbsp;<span class="op" id="5762950">:=</span>&nbsp;<span class="ident" id="5762953">t</span><span class="op" id="5762954">.</span><span class="ident" id="5762955">binary</span><span class="op" id="5762961">.</span><span class="ident" id="5762962">Uint32</span><span class="op" id="5762968">(</span><span class="ident" id="5762969">f</span><span class="op" id="5762970">[</span><span class="ident" id="5762971">t</span><span class="op" id="5762972">.</span><span class="ident" id="5762973">ptrsize</span><span class="op" id="5762980">+</span><span class="num" id="5762981">4</span><span class="op" id="5762982">*</span><span class="num" id="5762983">4</span><span class="op" id="5762984">:</span><span class="op" id="5762985">]</span><span class="op" id="5762986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5762989">fno</span>&nbsp;<span class="op" id="5762993">:=</span>&nbsp;<span class="ident" id="5762996">t</span><span class="op" id="5762997">.</span><span class="ident" id="5762998">pcvalue</span><span class="op" id="5763005">(</span><span class="ident" id="5763006">filetab</span><span class="op" id="5763013">,</span>&nbsp;<span class="ident" id="5763015">entry</span><span class="op" id="5763020">,</span>&nbsp;<span class="ident" id="5763022">pc</span><span class="op" id="5763024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763027">if</span>&nbsp;<span class="ident" id="5763030">fno</span>&nbsp;<span class="op" id="5763034">&lt;=</span>&nbsp;<span class="num" id="5763037">0</span>&nbsp;<span class="op" id="5763039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763043">return</span>&nbsp;<span class="string" id="5763050">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763057">return</span>&nbsp;<span class="ident" id="5763064">t</span><span class="op" id="5763065">.</span><span class="builtintype" id="5763066">string</span><span class="op" id="5763072">(</span><span class="ident" id="5763073">t</span><span class="op" id="5763074">.</span><span class="ident" id="5763075">binary</span><span class="op" id="5763081">.</span><span class="ident" id="5763082">Uint32</span><span class="op" id="5763088">(</span><span class="ident" id="5763089">t</span><span class="op" id="5763090">.</span><span class="ident" id="5763091">filetab</span><span class="op" id="5763098">[</span><span class="num" id="5763099">4</span><span class="op" id="5763100">*</span><span class="ident" id="5763101">fno</span><span class="op" id="5763104">:</span><span class="op" id="5763105">]</span><span class="op" id="5763106">)</span><span class="op" id="5763107">)</span><br>
<span class="lineno"></span><span class="op" id="5763109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5763112">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5763201">func</span>&nbsp;<span class="op" id="5763206">(</span><span class="ident" id="5763207">t</span>&nbsp;<span class="op" id="5763209">*</span><span class="ident" id="5763210">LineTable</span><span class="op" id="5763219">)</span>&nbsp;<span class="ident" id="5763221">go12LineToPC</span><span class="op" id="5763233">(</span><span class="ident" id="5763234">file</span>&nbsp;<span class="builtintype" id="5763239">string</span><span class="op" id="5763245">,</span>&nbsp;<span class="ident" id="5763247">line</span>&nbsp;<span class="builtintype" id="5763252">int</span><span class="op" id="5763255">)</span>&nbsp;<span class="op" id="5763257">(</span><span class="ident" id="5763258">pc</span>&nbsp;<span class="ident" id="5763261">uint64</span><span class="op" id="5763267">)</span>&nbsp;<span class="op" id="5763269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763272">defer</span>&nbsp;<span class="keyword" id="5763278">func</span><span class="op" id="5763282">(</span><span class="op" id="5763283">)</span>&nbsp;<span class="op" id="5763285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763289">if</span>&nbsp;<span class="builtinfunc" id="5763292">recover</span><span class="op" id="5763299">(</span><span class="op" id="5763300">)</span>&nbsp;<span class="op" id="5763302">!=</span>&nbsp;<span class="builtintype" id="5763305">nil</span>&nbsp;<span class="op" id="5763309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763314">pc</span>&nbsp;<span class="op" id="5763317">=</span>&nbsp;<span class="num" id="5763319">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763323">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763326">}</span><span class="op" id="5763327">(</span><span class="op" id="5763328">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763332">t</span><span class="op" id="5763333">.</span><span class="ident" id="5763334">initFileMap</span><span class="op" id="5763345">(</span><span class="op" id="5763346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763349">filenum</span>&nbsp;<span class="op" id="5763357">:=</span>&nbsp;<span class="ident" id="5763360">t</span><span class="op" id="5763361">.</span><span class="ident" id="5763362">fileMap</span><span class="op" id="5763369">[</span><span class="ident" id="5763370">file</span><span class="op" id="5763374">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763377">if</span>&nbsp;<span class="ident" id="5763380">filenum</span>&nbsp;<span class="op" id="5763388">==</span>&nbsp;<span class="num" id="5763391">0</span>&nbsp;<span class="op" id="5763393">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763397">return</span>&nbsp;<span class="num" id="5763404">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5763411">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5763435">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5763512">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763585">for</span>&nbsp;<span class="ident" id="5763589">i</span>&nbsp;<span class="op" id="5763591">:=</span>&nbsp;<span class="builtintype" id="5763594">uint32</span><span class="op" id="5763600">(</span><span class="num" id="5763601">0</span><span class="op" id="5763602">)</span><span class="op" id="5763603">;</span>&nbsp;<span class="ident" id="5763605">i</span>&nbsp;<span class="op" id="5763607">&lt;</span>&nbsp;<span class="ident" id="5763609">t</span><span class="op" id="5763610">.</span><span class="ident" id="5763611">nfunctab</span><span class="op" id="5763619">;</span>&nbsp;<span class="ident" id="5763621">i</span><span class="op" id="5763622">++</span>&nbsp;<span class="op" id="5763625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763629">f</span>&nbsp;<span class="op" id="5763631">:=</span>&nbsp;<span class="ident" id="5763634">t</span><span class="op" id="5763635">.</span><span class="ident" id="5763636">Data</span><span class="op" id="5763640">[</span><span class="ident" id="5763641">t</span><span class="op" id="5763642">.</span><span class="builtintype" id="5763643">uintptr</span><span class="op" id="5763650">(</span><span class="ident" id="5763651">t</span><span class="op" id="5763652">.</span><span class="ident" id="5763653">functab</span><span class="op" id="5763660">[</span><span class="num" id="5763661">2</span><span class="op" id="5763662">*</span><span class="ident" id="5763663">t</span><span class="op" id="5763664">.</span><span class="ident" id="5763665">ptrsize</span><span class="op" id="5763672">*</span><span class="ident" id="5763673">i</span><span class="op" id="5763674">+</span><span class="ident" id="5763675">t</span><span class="op" id="5763676">.</span><span class="ident" id="5763677">ptrsize</span><span class="op" id="5763684">:</span><span class="op" id="5763685">]</span><span class="op" id="5763686">)</span><span class="op" id="5763687">:</span><span class="op" id="5763688">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763692">entry</span>&nbsp;<span class="op" id="5763698">:=</span>&nbsp;<span class="ident" id="5763701">t</span><span class="op" id="5763702">.</span><span class="builtintype" id="5763703">uintptr</span><span class="op" id="5763710">(</span><span class="ident" id="5763711">f</span><span class="op" id="5763712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763716">filetab</span>&nbsp;<span class="op" id="5763724">:=</span>&nbsp;<span class="ident" id="5763727">t</span><span class="op" id="5763728">.</span><span class="ident" id="5763729">binary</span><span class="op" id="5763735">.</span><span class="ident" id="5763736">Uint32</span><span class="op" id="5763742">(</span><span class="ident" id="5763743">f</span><span class="op" id="5763744">[</span><span class="ident" id="5763745">t</span><span class="op" id="5763746">.</span><span class="ident" id="5763747">ptrsize</span><span class="op" id="5763754">+</span><span class="num" id="5763755">4</span><span class="op" id="5763756">*</span><span class="num" id="5763757">4</span><span class="op" id="5763758">:</span><span class="op" id="5763759">]</span><span class="op" id="5763760">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763764">linetab</span>&nbsp;<span class="op" id="5763772">:=</span>&nbsp;<span class="ident" id="5763775">t</span><span class="op" id="5763776">.</span><span class="ident" id="5763777">binary</span><span class="op" id="5763783">.</span><span class="ident" id="5763784">Uint32</span><span class="op" id="5763790">(</span><span class="ident" id="5763791">f</span><span class="op" id="5763792">[</span><span class="ident" id="5763793">t</span><span class="op" id="5763794">.</span><span class="ident" id="5763795">ptrsize</span><span class="op" id="5763802">+</span><span class="num" id="5763803">5</span><span class="op" id="5763804">*</span><span class="num" id="5763805">4</span><span class="op" id="5763806">:</span><span class="op" id="5763807">]</span><span class="op" id="5763808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5763812">pc</span>&nbsp;<span class="op" id="5763815">:=</span>&nbsp;<span class="ident" id="5763818">t</span><span class="op" id="5763819">.</span><span class="ident" id="5763820">findFileLine</span><span class="op" id="5763832">(</span><span class="ident" id="5763833">entry</span><span class="op" id="5763838">,</span>&nbsp;<span class="ident" id="5763840">filetab</span><span class="op" id="5763847">,</span>&nbsp;<span class="ident" id="5763849">linetab</span><span class="op" id="5763856">,</span>&nbsp;<span class="builtintype" id="5763858">int32</span><span class="op" id="5763863">(</span><span class="ident" id="5763864">filenum</span><span class="op" id="5763871">)</span><span class="op" id="5763872">,</span>&nbsp;<span class="builtintype" id="5763874">int32</span><span class="op" id="5763879">(</span><span class="ident" id="5763880">line</span><span class="op" id="5763884">)</span><span class="op" id="5763885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763889">if</span>&nbsp;<span class="ident" id="5763892">pc</span>&nbsp;<span class="op" id="5763895">!=</span>&nbsp;<span class="num" id="5763898">0</span>&nbsp;<span class="op" id="5763900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763905">return</span>&nbsp;<span class="ident" id="5763912">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763917">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5763920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5763923">return</span>&nbsp;<span class="num" id="5763930">0</span><br>
<span class="lineno"></span><span class="op" id="5763932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5763935">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5764001">func</span>&nbsp;<span class="op" id="5764006">(</span><span class="ident" id="5764007">t</span>&nbsp;<span class="op" id="5764009">*</span><span class="ident" id="5764010">LineTable</span><span class="op" id="5764019">)</span>&nbsp;<span class="ident" id="5764021">initFileMap</span><span class="op" id="5764032">(</span><span class="op" id="5764033">)</span>&nbsp;<span class="op" id="5764035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764038">t</span><span class="op" id="5764039">.</span><span class="ident" id="5764040">mu</span><span class="op" id="5764042">.</span><span class="ident" id="5764043">Lock</span><span class="op" id="5764047">(</span><span class="op" id="5764048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764051">defer</span>&nbsp;<span class="ident" id="5764057">t</span><span class="op" id="5764058">.</span><span class="ident" id="5764059">mu</span><span class="op" id="5764061">.</span><span class="ident" id="5764062">Unlock</span><span class="op" id="5764068">(</span><span class="op" id="5764069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764073">if</span>&nbsp;<span class="ident" id="5764076">t</span><span class="op" id="5764077">.</span><span class="ident" id="5764078">fileMap</span>&nbsp;<span class="op" id="5764086">!=</span>&nbsp;<span class="builtintype" id="5764089">nil</span>&nbsp;<span class="op" id="5764093">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764097">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5764105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764108">m</span>&nbsp;<span class="op" id="5764110">:=</span>&nbsp;<span class="builtinfunc" id="5764113">make</span><span class="op" id="5764117">(</span><span class="keyword" id="5764118">map</span><span class="op" id="5764121">[</span><span class="builtintype" id="5764122">string</span><span class="op" id="5764128">]</span><span class="builtintype" id="5764129">uint32</span><span class="op" id="5764135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764139">for</span>&nbsp;<span class="ident" id="5764143">i</span>&nbsp;<span class="op" id="5764145">:=</span>&nbsp;<span class="builtintype" id="5764148">uint32</span><span class="op" id="5764154">(</span><span class="num" id="5764155">1</span><span class="op" id="5764156">)</span><span class="op" id="5764157">;</span>&nbsp;<span class="ident" id="5764159">i</span>&nbsp;<span class="op" id="5764161">&lt;</span>&nbsp;<span class="ident" id="5764163">t</span><span class="op" id="5764164">.</span><span class="ident" id="5764165">nfiletab</span><span class="op" id="5764173">;</span>&nbsp;<span class="ident" id="5764175">i</span><span class="op" id="5764176">++</span>&nbsp;<span class="op" id="5764179">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764183">s</span>&nbsp;<span class="op" id="5764185">:=</span>&nbsp;<span class="ident" id="5764188">t</span><span class="op" id="5764189">.</span><span class="builtintype" id="5764190">string</span><span class="op" id="5764196">(</span><span class="ident" id="5764197">t</span><span class="op" id="5764198">.</span><span class="ident" id="5764199">binary</span><span class="op" id="5764205">.</span><span class="ident" id="5764206">Uint32</span><span class="op" id="5764212">(</span><span class="ident" id="5764213">t</span><span class="op" id="5764214">.</span><span class="ident" id="5764215">filetab</span><span class="op" id="5764222">[</span><span class="num" id="5764223">4</span><span class="op" id="5764224">*</span><span class="ident" id="5764225">i</span><span class="op" id="5764226">:</span><span class="op" id="5764227">]</span><span class="op" id="5764228">)</span><span class="op" id="5764229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764233">m</span><span class="op" id="5764234">[</span><span class="ident" id="5764235">s</span><span class="op" id="5764236">]</span>&nbsp;<span class="op" id="5764238">=</span>&nbsp;<span class="ident" id="5764240">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5764243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764246">t</span><span class="op" id="5764247">.</span><span class="ident" id="5764248">fileMap</span>&nbsp;<span class="op" id="5764256">=</span>&nbsp;<span class="ident" id="5764258">m</span><br>
<span class="lineno"></span><span class="op" id="5764260">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5764263">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5764335">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5764412">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5764477">func</span>&nbsp;<span class="op" id="5764482">(</span><span class="ident" id="5764483">t</span>&nbsp;<span class="op" id="5764485">*</span><span class="ident" id="5764486">LineTable</span><span class="op" id="5764495">)</span>&nbsp;<span class="ident" id="5764497">go12MapFiles</span><span class="op" id="5764509">(</span><span class="ident" id="5764510">m</span>&nbsp;<span class="keyword" id="5764512">map</span><span class="op" id="5764515">[</span><span class="builtintype" id="5764516">string</span><span class="op" id="5764522">]</span><span class="op" id="5764523">*</span><span class="ident" id="5764524">Obj</span><span class="op" id="5764527">,</span>&nbsp;<span class="ident" id="5764529">obj</span>&nbsp;<span class="op" id="5764533">*</span><span class="ident" id="5764534">Obj</span><span class="op" id="5764537">)</span>&nbsp;<span class="op" id="5764539">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764542">defer</span>&nbsp;<span class="keyword" id="5764548">func</span><span class="op" id="5764552">(</span><span class="op" id="5764553">)</span>&nbsp;<span class="op" id="5764555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5764559">recover</span><span class="op" id="5764566">(</span><span class="op" id="5764567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5764570">}</span><span class="op" id="5764571">(</span><span class="op" id="5764572">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764576">t</span><span class="op" id="5764577">.</span><span class="ident" id="5764578">initFileMap</span><span class="op" id="5764589">(</span><span class="op" id="5764590">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5764593">for</span>&nbsp;<span class="ident" id="5764597">file</span>&nbsp;<span class="op" id="5764602">:=</span>&nbsp;<span class="keyword" id="5764605">range</span>&nbsp;<span class="ident" id="5764611">t</span><span class="op" id="5764612">.</span><span class="ident" id="5764613">fileMap</span>&nbsp;<span class="op" id="5764621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5764625">m</span><span class="op" id="5764626">[</span><span class="ident" id="5764627">file</span><span class="op" id="5764631">]</span>&nbsp;<span class="op" id="5764633">=</span>&nbsp;<span class="ident" id="5764635">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5764640">}</span><br>
<span class="lineno"></span><span class="op" id="5764642">}</span>
</div>
</body>
</html>
