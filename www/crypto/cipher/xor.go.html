<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3856513">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3856568">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3856622">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3856673">package</span>&nbsp;<span class="ident" id="3856681">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3856689">import</span>&nbsp;<span class="op" id="3856696">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3856699">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3856710">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3856719">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3856722">const</span>&nbsp;<span class="ident" id="3856728">wordSize</span>&nbsp;<span class="op" id="3856737">=</span>&nbsp;<span class="builtintype" id="3856739">int</span><span class="op" id="3856742">(</span><span class="ident" id="3856743">unsafe</span><span class="op" id="3856749">.</span><span class="ident" id="3856750">Sizeof</span><span class="op" id="3856756">(</span><span class="builtintype" id="3856757">uintptr</span><span class="op" id="3856764">(</span><span class="num" id="3856765">0</span><span class="op" id="3856766">)</span><span class="op" id="3856767">)</span><span class="op" id="3856768">)</span><br>
<span class="lineno"></span><span class="keyword" id="3856770">const</span>&nbsp;<span class="ident" id="3856776">supportsUnaligned</span>&nbsp;<span class="op" id="3856794">=</span>&nbsp;<span class="ident" id="3856796">runtime</span><span class="op" id="3856803">.</span><span class="ident" id="3856804">GOARCH</span>&nbsp;<span class="op" id="3856811">==</span>&nbsp;<span class="string" id="3856814">&#34;386&#34;</span>&nbsp;<span class="op" id="3856820">||</span>&nbsp;<span class="ident" id="3856823">runtime</span><span class="op" id="3856830">.</span><span class="ident" id="3856831">GOARCH</span>&nbsp;<span class="op" id="3856838">==</span>&nbsp;<span class="string" id="3856841">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3856850">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3856916">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3856950">func</span>&nbsp;<span class="ident" id="3856955">fastXORBytes</span><span class="op" id="3856967">(</span><span class="ident" id="3856968">dst</span><span class="op" id="3856971">,</span>&nbsp;<span class="ident" id="3856973">a</span><span class="op" id="3856974">,</span>&nbsp;<span class="ident" id="3856976">b</span>&nbsp;<span class="op" id="3856978">[</span><span class="op" id="3856979">]</span><span class="builtintype" id="3856980">byte</span><span class="op" id="3856984">)</span>&nbsp;<span class="builtintype" id="3856986">int</span>&nbsp;<span class="op" id="3856990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3856993">n</span>&nbsp;<span class="op" id="3856995">:=</span>&nbsp;<span class="builtinfunc" id="3856998">len</span><span class="op" id="3857001">(</span><span class="ident" id="3857002">a</span><span class="op" id="3857003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857006">if</span>&nbsp;<span class="builtinfunc" id="3857009">len</span><span class="op" id="3857012">(</span><span class="ident" id="3857013">b</span><span class="op" id="3857014">)</span>&nbsp;<span class="op" id="3857016">&lt;</span>&nbsp;<span class="ident" id="3857018">n</span>&nbsp;<span class="op" id="3857020">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857024">n</span>&nbsp;<span class="op" id="3857026">=</span>&nbsp;<span class="builtinfunc" id="3857028">len</span><span class="op" id="3857031">(</span><span class="ident" id="3857032">b</span><span class="op" id="3857033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857040">w</span>&nbsp;<span class="op" id="3857042">:=</span>&nbsp;<span class="ident" id="3857045">n</span>&nbsp;<span class="op" id="3857047">/</span>&nbsp;<span class="ident" id="3857049">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857059">if</span>&nbsp;<span class="ident" id="3857062">w</span>&nbsp;<span class="op" id="3857064">&gt;</span>&nbsp;<span class="num" id="3857066">0</span>&nbsp;<span class="op" id="3857068">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857072">dw</span>&nbsp;<span class="op" id="3857075">:=</span>&nbsp;<span class="op" id="3857078">*</span><span class="op" id="3857079">(</span><span class="op" id="3857080">*</span><span class="op" id="3857081">[</span><span class="op" id="3857082">]</span><span class="builtintype" id="3857083">uintptr</span><span class="op" id="3857090">)</span><span class="op" id="3857091">(</span><span class="ident" id="3857092">unsafe</span><span class="op" id="3857098">.</span><span class="ident" id="3857099">Pointer</span><span class="op" id="3857106">(</span><span class="op" id="3857107">&amp;</span><span class="ident" id="3857108">dst</span><span class="op" id="3857111">)</span><span class="op" id="3857112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857116">aw</span>&nbsp;<span class="op" id="3857119">:=</span>&nbsp;<span class="op" id="3857122">*</span><span class="op" id="3857123">(</span><span class="op" id="3857124">*</span><span class="op" id="3857125">[</span><span class="op" id="3857126">]</span><span class="builtintype" id="3857127">uintptr</span><span class="op" id="3857134">)</span><span class="op" id="3857135">(</span><span class="ident" id="3857136">unsafe</span><span class="op" id="3857142">.</span><span class="ident" id="3857143">Pointer</span><span class="op" id="3857150">(</span><span class="op" id="3857151">&amp;</span><span class="ident" id="3857152">a</span><span class="op" id="3857153">)</span><span class="op" id="3857154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857158">bw</span>&nbsp;<span class="op" id="3857161">:=</span>&nbsp;<span class="op" id="3857164">*</span><span class="op" id="3857165">(</span><span class="op" id="3857166">*</span><span class="op" id="3857167">[</span><span class="op" id="3857168">]</span><span class="builtintype" id="3857169">uintptr</span><span class="op" id="3857176">)</span><span class="op" id="3857177">(</span><span class="ident" id="3857178">unsafe</span><span class="op" id="3857184">.</span><span class="ident" id="3857185">Pointer</span><span class="op" id="3857192">(</span><span class="op" id="3857193">&amp;</span><span class="ident" id="3857194">b</span><span class="op" id="3857195">)</span><span class="op" id="3857196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857200">for</span>&nbsp;<span class="ident" id="3857204">i</span>&nbsp;<span class="op" id="3857206">:=</span>&nbsp;<span class="num" id="3857209">0</span><span class="op" id="3857210">;</span>&nbsp;<span class="ident" id="3857212">i</span>&nbsp;<span class="op" id="3857214">&lt;</span>&nbsp;<span class="ident" id="3857216">w</span><span class="op" id="3857217">;</span>&nbsp;<span class="ident" id="3857219">i</span><span class="op" id="3857220">++</span>&nbsp;<span class="op" id="3857223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857228">dw</span><span class="op" id="3857230">[</span><span class="ident" id="3857231">i</span><span class="op" id="3857232">]</span>&nbsp;<span class="op" id="3857234">=</span>&nbsp;<span class="ident" id="3857236">aw</span><span class="op" id="3857238">[</span><span class="ident" id="3857239">i</span><span class="op" id="3857240">]</span>&nbsp;<span class="op" id="3857242">^</span>&nbsp;<span class="ident" id="3857244">bw</span><span class="op" id="3857246">[</span><span class="ident" id="3857247">i</span><span class="op" id="3857248">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857259">for</span>&nbsp;<span class="ident" id="3857263">i</span>&nbsp;<span class="op" id="3857265">:=</span>&nbsp;<span class="op" id="3857268">(</span><span class="ident" id="3857269">n</span>&nbsp;<span class="op" id="3857271">-</span>&nbsp;<span class="ident" id="3857273">n</span><span class="op" id="3857274">%</span><span class="ident" id="3857275">wordSize</span><span class="op" id="3857283">)</span><span class="op" id="3857284">;</span>&nbsp;<span class="ident" id="3857286">i</span>&nbsp;<span class="op" id="3857288">&lt;</span>&nbsp;<span class="ident" id="3857290">n</span><span class="op" id="3857291">;</span>&nbsp;<span class="ident" id="3857293">i</span><span class="op" id="3857294">++</span>&nbsp;<span class="op" id="3857297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857301">dst</span><span class="op" id="3857304">[</span><span class="ident" id="3857305">i</span><span class="op" id="3857306">]</span>&nbsp;<span class="op" id="3857308">=</span>&nbsp;<span class="ident" id="3857310">a</span><span class="op" id="3857311">[</span><span class="ident" id="3857312">i</span><span class="op" id="3857313">]</span>&nbsp;<span class="op" id="3857315">^</span>&nbsp;<span class="ident" id="3857317">b</span><span class="op" id="3857318">[</span><span class="ident" id="3857319">i</span><span class="op" id="3857320">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857327">return</span>&nbsp;<span class="ident" id="3857334">n</span><br>
<span class="lineno"></span><span class="op" id="3857336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3857339">func</span>&nbsp;<span class="ident" id="3857344">safeXORBytes</span><span class="op" id="3857356">(</span><span class="ident" id="3857357">dst</span><span class="op" id="3857360">,</span>&nbsp;<span class="ident" id="3857362">a</span><span class="op" id="3857363">,</span>&nbsp;<span class="ident" id="3857365">b</span>&nbsp;<span class="op" id="3857367">[</span><span class="op" id="3857368">]</span><span class="builtintype" id="3857369">byte</span><span class="op" id="3857373">)</span>&nbsp;<span class="builtintype" id="3857375">int</span>&nbsp;<span class="op" id="3857379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857382">n</span>&nbsp;<span class="op" id="3857384">:=</span>&nbsp;<span class="builtinfunc" id="3857387">len</span><span class="op" id="3857390">(</span><span class="ident" id="3857391">a</span><span class="op" id="3857392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857395">if</span>&nbsp;<span class="builtinfunc" id="3857398">len</span><span class="op" id="3857401">(</span><span class="ident" id="3857402">b</span><span class="op" id="3857403">)</span>&nbsp;<span class="op" id="3857405">&lt;</span>&nbsp;<span class="ident" id="3857407">n</span>&nbsp;<span class="op" id="3857409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857413">n</span>&nbsp;<span class="op" id="3857415">=</span>&nbsp;<span class="builtinfunc" id="3857417">len</span><span class="op" id="3857420">(</span><span class="ident" id="3857421">b</span><span class="op" id="3857422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857425">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857428">for</span>&nbsp;<span class="ident" id="3857432">i</span>&nbsp;<span class="op" id="3857434">:=</span>&nbsp;<span class="num" id="3857437">0</span><span class="op" id="3857438">;</span>&nbsp;<span class="ident" id="3857440">i</span>&nbsp;<span class="op" id="3857442">&lt;</span>&nbsp;<span class="ident" id="3857444">n</span><span class="op" id="3857445">;</span>&nbsp;<span class="ident" id="3857447">i</span><span class="op" id="3857448">++</span>&nbsp;<span class="op" id="3857451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3857455">dst</span><span class="op" id="3857458">[</span><span class="ident" id="3857459">i</span><span class="op" id="3857460">]</span>&nbsp;<span class="op" id="3857462">=</span>&nbsp;<span class="ident" id="3857464">a</span><span class="op" id="3857465">[</span><span class="ident" id="3857466">i</span><span class="op" id="3857467">]</span>&nbsp;<span class="op" id="3857469">^</span>&nbsp;<span class="ident" id="3857471">b</span><span class="op" id="3857472">[</span><span class="ident" id="3857473">i</span><span class="op" id="3857474">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857480">return</span>&nbsp;<span class="ident" id="3857487">n</span><br>
<span class="lineno"></span><span class="op" id="3857489">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3857492">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3857573">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3857618">func</span>&nbsp;<span class="ident" id="3857623">xorBytes</span><span class="op" id="3857631">(</span><span class="ident" id="3857632">dst</span><span class="op" id="3857635">,</span>&nbsp;<span class="ident" id="3857637">a</span><span class="op" id="3857638">,</span>&nbsp;<span class="ident" id="3857640">b</span>&nbsp;<span class="op" id="3857642">[</span><span class="op" id="3857643">]</span><span class="builtintype" id="3857644">byte</span><span class="op" id="3857648">)</span>&nbsp;<span class="builtintype" id="3857650">int</span>&nbsp;<span class="op" id="3857654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857657">if</span>&nbsp;<span class="ident" id="3857660">supportsUnaligned</span>&nbsp;<span class="op" id="3857678">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857682">return</span>&nbsp;<span class="ident" id="3857689">fastXORBytes</span><span class="op" id="3857701">(</span><span class="ident" id="3857702">dst</span><span class="op" id="3857705">,</span>&nbsp;<span class="ident" id="3857707">a</span><span class="op" id="3857708">,</span>&nbsp;<span class="ident" id="3857710">b</span><span class="op" id="3857711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857714">}</span>&nbsp;<span class="keyword" id="3857716">else</span>&nbsp;<span class="op" id="3857721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3857725">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3857781">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3857835">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3857890">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3857935">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3857953">return</span>&nbsp;<span class="ident" id="3857960">safeXORBytes</span><span class="op" id="3857972">(</span><span class="ident" id="3857973">dst</span><span class="op" id="3857976">,</span>&nbsp;<span class="ident" id="3857978">a</span><span class="op" id="3857979">,</span>&nbsp;<span class="ident" id="3857981">b</span><span class="op" id="3857982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3857985">}</span><br>
<span class="lineno"></span><span class="op" id="3857987">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3857990">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3858066">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3858118">func</span>&nbsp;<span class="ident" id="3858123">fastXORWords</span><span class="op" id="3858135">(</span><span class="ident" id="3858136">dst</span><span class="op" id="3858139">,</span>&nbsp;<span class="ident" id="3858141">a</span><span class="op" id="3858142">,</span>&nbsp;<span class="ident" id="3858144">b</span>&nbsp;<span class="op" id="3858146">[</span><span class="op" id="3858147">]</span><span class="builtintype" id="3858148">byte</span><span class="op" id="3858152">)</span>&nbsp;<span class="op" id="3858154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858157">dw</span>&nbsp;<span class="op" id="3858160">:=</span>&nbsp;<span class="op" id="3858163">*</span><span class="op" id="3858164">(</span><span class="op" id="3858165">*</span><span class="op" id="3858166">[</span><span class="op" id="3858167">]</span><span class="builtintype" id="3858168">uintptr</span><span class="op" id="3858175">)</span><span class="op" id="3858176">(</span><span class="ident" id="3858177">unsafe</span><span class="op" id="3858183">.</span><span class="ident" id="3858184">Pointer</span><span class="op" id="3858191">(</span><span class="op" id="3858192">&amp;</span><span class="ident" id="3858193">dst</span><span class="op" id="3858196">)</span><span class="op" id="3858197">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858200">aw</span>&nbsp;<span class="op" id="3858203">:=</span>&nbsp;<span class="op" id="3858206">*</span><span class="op" id="3858207">(</span><span class="op" id="3858208">*</span><span class="op" id="3858209">[</span><span class="op" id="3858210">]</span><span class="builtintype" id="3858211">uintptr</span><span class="op" id="3858218">)</span><span class="op" id="3858219">(</span><span class="ident" id="3858220">unsafe</span><span class="op" id="3858226">.</span><span class="ident" id="3858227">Pointer</span><span class="op" id="3858234">(</span><span class="op" id="3858235">&amp;</span><span class="ident" id="3858236">a</span><span class="op" id="3858237">)</span><span class="op" id="3858238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858241">bw</span>&nbsp;<span class="op" id="3858244">:=</span>&nbsp;<span class="op" id="3858247">*</span><span class="op" id="3858248">(</span><span class="op" id="3858249">*</span><span class="op" id="3858250">[</span><span class="op" id="3858251">]</span><span class="builtintype" id="3858252">uintptr</span><span class="op" id="3858259">)</span><span class="op" id="3858260">(</span><span class="ident" id="3858261">unsafe</span><span class="op" id="3858267">.</span><span class="ident" id="3858268">Pointer</span><span class="op" id="3858275">(</span><span class="op" id="3858276">&amp;</span><span class="ident" id="3858277">b</span><span class="op" id="3858278">)</span><span class="op" id="3858279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858282">n</span>&nbsp;<span class="op" id="3858284">:=</span>&nbsp;<span class="builtinfunc" id="3858287">len</span><span class="op" id="3858290">(</span><span class="ident" id="3858291">b</span><span class="op" id="3858292">)</span>&nbsp;<span class="op" id="3858294">/</span>&nbsp;<span class="ident" id="3858296">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3858306">for</span>&nbsp;<span class="ident" id="3858310">i</span>&nbsp;<span class="op" id="3858312">:=</span>&nbsp;<span class="num" id="3858315">0</span><span class="op" id="3858316">;</span>&nbsp;<span class="ident" id="3858318">i</span>&nbsp;<span class="op" id="3858320">&lt;</span>&nbsp;<span class="ident" id="3858322">n</span><span class="op" id="3858323">;</span>&nbsp;<span class="ident" id="3858325">i</span><span class="op" id="3858326">++</span>&nbsp;<span class="op" id="3858329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858333">dw</span><span class="op" id="3858335">[</span><span class="ident" id="3858336">i</span><span class="op" id="3858337">]</span>&nbsp;<span class="op" id="3858339">=</span>&nbsp;<span class="ident" id="3858341">aw</span><span class="op" id="3858343">[</span><span class="ident" id="3858344">i</span><span class="op" id="3858345">]</span>&nbsp;<span class="op" id="3858347">^</span>&nbsp;<span class="ident" id="3858349">bw</span><span class="op" id="3858351">[</span><span class="ident" id="3858352">i</span><span class="op" id="3858353">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3858356">}</span><br>
<span class="lineno"></span><span class="op" id="3858358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3858361">func</span>&nbsp;<span class="ident" id="3858366">xorWords</span><span class="op" id="3858374">(</span><span class="ident" id="3858375">dst</span><span class="op" id="3858378">,</span>&nbsp;<span class="ident" id="3858380">a</span><span class="op" id="3858381">,</span>&nbsp;<span class="ident" id="3858383">b</span>&nbsp;<span class="op" id="3858385">[</span><span class="op" id="3858386">]</span><span class="builtintype" id="3858387">byte</span><span class="op" id="3858391">)</span>&nbsp;<span class="op" id="3858393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3858396">if</span>&nbsp;<span class="ident" id="3858399">supportsUnaligned</span>&nbsp;<span class="op" id="3858417">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858421">fastXORWords</span><span class="op" id="3858433">(</span><span class="ident" id="3858434">dst</span><span class="op" id="3858437">,</span>&nbsp;<span class="ident" id="3858439">a</span><span class="op" id="3858440">,</span>&nbsp;<span class="ident" id="3858442">b</span><span class="op" id="3858443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3858446">}</span>&nbsp;<span class="keyword" id="3858448">else</span>&nbsp;<span class="op" id="3858453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3858457">safeXORBytes</span><span class="op" id="3858469">(</span><span class="ident" id="3858470">dst</span><span class="op" id="3858473">,</span>&nbsp;<span class="ident" id="3858475">a</span><span class="op" id="3858476">,</span>&nbsp;<span class="ident" id="3858478">b</span><span class="op" id="3858479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3858482">}</span><br>
<span class="lineno"></span><span class="op" id="3858484">}</span>
</div>
</body>
</html>
