<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6272224">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6272280">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6272334">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6272385">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6272408">package</span>&nbsp;<span class="ident" id="6272416">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6272423">import</span>&nbsp;<span class="op" id="6272430">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6272433">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6272452">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6272459">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6272462">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6272539">//</span><br>
<span class="lineno"></span><span class="comment" id="6272542">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6272629">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6272707">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6272785">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6272857">//</span><br>
<span class="lineno"></span><span class="comment" id="6272860">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6272941">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6273020">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6273073">//</span><br>
<span class="lineno"></span><span class="comment" id="6273076">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6273151">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6273226">type</span>&nbsp;<span class="ident" id="6273231">LineTable</span>&nbsp;<span class="keyword" id="6273241">struct</span>&nbsp;<span class="op" id="6273248">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273251">Data</span>&nbsp;<span class="op" id="6273256">[</span><span class="op" id="6273257">]</span><span class="builtintype" id="6273258">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273264">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6273269">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273277">Line</span>&nbsp;<span class="builtintype" id="6273282">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6273288">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273305">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273314">sync</span><span class="op" id="6273318">.</span><span class="ident" id="6273319">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273326">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6273335">int</span>&nbsp;<span class="comment" id="6273339">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273393">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6273402">binary</span><span class="op" id="6273408">.</span><span class="ident" id="6273409">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273420">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6273429">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273437">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6273446">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273454">functab</span>&nbsp;&nbsp;<span class="op" id="6273463">[</span><span class="op" id="6273464">]</span><span class="builtintype" id="6273465">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273471">nfunctab</span>&nbsp;<span class="builtintype" id="6273480">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273488">filetab</span>&nbsp;&nbsp;<span class="op" id="6273497">[</span><span class="op" id="6273498">]</span><span class="builtintype" id="6273499">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273505">nfiletab</span>&nbsp;<span class="builtintype" id="6273514">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273522">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6273531">map</span><span class="op" id="6273534">[</span><span class="builtintype" id="6273535">string</span><span class="op" id="6273541">]</span><span class="builtintype" id="6273542">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6273549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6273552">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6273623">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6273688">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6273762">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6273773">const</span>&nbsp;<span class="ident" id="6273779">oldQuantum</span>&nbsp;<span class="op" id="6273790">=</span>&nbsp;<span class="num" id="6273792">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273795">func</span>&nbsp;<span class="op" id="6273800">(</span><span class="ident" id="6273801">t</span>&nbsp;<span class="op" id="6273803">*</span><span class="ident" id="6273804">LineTable</span><span class="op" id="6273813">)</span>&nbsp;<span class="ident" id="6273815">parse</span><span class="op" id="6273820">(</span><span class="ident" id="6273821">targetPC</span>&nbsp;<span class="ident" id="6273830">uint64</span><span class="op" id="6273836">,</span>&nbsp;<span class="ident" id="6273838">targetLine</span>&nbsp;<span class="builtintype" id="6273849">int</span><span class="op" id="6273852">)</span>&nbsp;<span class="op" id="6273854">(</span><span class="ident" id="6273855">b</span>&nbsp;<span class="op" id="6273857">[</span><span class="op" id="6273858">]</span><span class="builtintype" id="6273859">byte</span><span class="op" id="6273863">,</span>&nbsp;<span class="ident" id="6273865">pc</span>&nbsp;<span class="ident" id="6273868">uint64</span><span class="op" id="6273874">,</span>&nbsp;<span class="ident" id="6273876">line</span>&nbsp;<span class="builtintype" id="6273881">int</span><span class="op" id="6273884">)</span>&nbsp;<span class="op" id="6273886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6273889">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6273946">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6273978">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6274040">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6274097">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6274136">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6274140">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6274203">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274260">b</span><span class="op" id="6274261">,</span>&nbsp;<span class="ident" id="6274263">pc</span><span class="op" id="6274265">,</span>&nbsp;<span class="ident" id="6274267">line</span>&nbsp;<span class="op" id="6274272">=</span>&nbsp;<span class="ident" id="6274274">t</span><span class="op" id="6274275">.</span><span class="ident" id="6274276">Data</span><span class="op" id="6274280">,</span>&nbsp;<span class="ident" id="6274282">t</span><span class="op" id="6274283">.</span><span class="ident" id="6274284">PC</span><span class="op" id="6274286">,</span>&nbsp;<span class="ident" id="6274288">t</span><span class="op" id="6274289">.</span><span class="ident" id="6274290">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274296">for</span>&nbsp;<span class="ident" id="6274300">pc</span>&nbsp;<span class="op" id="6274303">&lt;=</span>&nbsp;<span class="ident" id="6274306">targetPC</span>&nbsp;<span class="op" id="6274315">&amp;&amp;</span>&nbsp;<span class="ident" id="6274318">line</span>&nbsp;<span class="op" id="6274323">!=</span>&nbsp;<span class="ident" id="6274326">targetLine</span>&nbsp;<span class="op" id="6274337">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6274340">len</span><span class="op" id="6274343">(</span><span class="ident" id="6274344">b</span><span class="op" id="6274345">)</span>&nbsp;<span class="op" id="6274347">&gt;</span>&nbsp;<span class="num" id="6274349">0</span>&nbsp;<span class="op" id="6274351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274355">code</span>&nbsp;<span class="op" id="6274360">:=</span>&nbsp;<span class="ident" id="6274363">b</span><span class="op" id="6274364">[</span><span class="num" id="6274365">0</span><span class="op" id="6274366">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274370">b</span>&nbsp;<span class="op" id="6274372">=</span>&nbsp;<span class="ident" id="6274374">b</span><span class="op" id="6274375">[</span><span class="num" id="6274376">1</span><span class="op" id="6274377">:</span><span class="op" id="6274378">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274382">switch</span>&nbsp;<span class="op" id="6274389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274393">case</span>&nbsp;<span class="ident" id="6274398">code</span>&nbsp;<span class="op" id="6274403">==</span>&nbsp;<span class="num" id="6274406">0</span><span class="op" id="6274407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274412">if</span>&nbsp;<span class="builtinfunc" id="6274415">len</span><span class="op" id="6274418">(</span><span class="ident" id="6274419">b</span><span class="op" id="6274420">)</span>&nbsp;<span class="op" id="6274422">&lt;</span>&nbsp;<span class="num" id="6274424">4</span>&nbsp;<span class="op" id="6274426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274432">b</span>&nbsp;<span class="op" id="6274434">=</span>&nbsp;<span class="ident" id="6274436">b</span><span class="op" id="6274437">[</span><span class="num" id="6274438">0</span><span class="op" id="6274439">:</span><span class="num" id="6274440">0</span><span class="op" id="6274441">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274447">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274461">val</span>&nbsp;<span class="op" id="6274465">:=</span>&nbsp;<span class="ident" id="6274468">binary</span><span class="op" id="6274474">.</span><span class="ident" id="6274475">BigEndian</span><span class="op" id="6274484">.</span><span class="ident" id="6274485">Uint32</span><span class="op" id="6274491">(</span><span class="ident" id="6274492">b</span><span class="op" id="6274493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274498">b</span>&nbsp;<span class="op" id="6274500">=</span>&nbsp;<span class="ident" id="6274502">b</span><span class="op" id="6274503">[</span><span class="num" id="6274504">4</span><span class="op" id="6274505">:</span><span class="op" id="6274506">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274511">line</span>&nbsp;<span class="op" id="6274516">+=</span>&nbsp;<span class="builtintype" id="6274519">int</span><span class="op" id="6274522">(</span><span class="ident" id="6274523">val</span><span class="op" id="6274526">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274530">case</span>&nbsp;<span class="ident" id="6274535">code</span>&nbsp;<span class="op" id="6274540">&lt;=</span>&nbsp;<span class="num" id="6274543">64</span><span class="op" id="6274545">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274550">line</span>&nbsp;<span class="op" id="6274555">+=</span>&nbsp;<span class="builtintype" id="6274558">int</span><span class="op" id="6274561">(</span><span class="ident" id="6274562">code</span><span class="op" id="6274566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274570">case</span>&nbsp;<span class="ident" id="6274575">code</span>&nbsp;<span class="op" id="6274580">&lt;=</span>&nbsp;<span class="num" id="6274583">128</span><span class="op" id="6274586">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274591">line</span>&nbsp;<span class="op" id="6274596">-=</span>&nbsp;<span class="builtintype" id="6274599">int</span><span class="op" id="6274602">(</span><span class="ident" id="6274603">code</span>&nbsp;<span class="op" id="6274608">-</span>&nbsp;<span class="num" id="6274610">64</span><span class="op" id="6274612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274616">default</span><span class="op" id="6274623">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274628">pc</span>&nbsp;<span class="op" id="6274631">+=</span>&nbsp;<span class="ident" id="6274634">oldQuantum</span>&nbsp;<span class="op" id="6274645">*</span>&nbsp;<span class="ident" id="6274647">uint64</span><span class="op" id="6274653">(</span><span class="ident" id="6274654">code</span><span class="op" id="6274658">-</span><span class="num" id="6274659">128</span><span class="op" id="6274662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274667">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274682">pc</span>&nbsp;<span class="op" id="6274685">+=</span>&nbsp;<span class="ident" id="6274688">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6274700">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274703">return</span>&nbsp;<span class="ident" id="6274710">b</span><span class="op" id="6274711">,</span>&nbsp;<span class="ident" id="6274713">pc</span><span class="op" id="6274715">,</span>&nbsp;<span class="ident" id="6274717">line</span><br>
<span class="lineno"></span><span class="op" id="6274722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6274725">func</span>&nbsp;<span class="op" id="6274730">(</span><span class="ident" id="6274731">t</span>&nbsp;<span class="op" id="6274733">*</span><span class="ident" id="6274734">LineTable</span><span class="op" id="6274743">)</span>&nbsp;<span class="ident" id="6274745">slice</span><span class="op" id="6274750">(</span><span class="ident" id="6274751">pc</span>&nbsp;<span class="ident" id="6274754">uint64</span><span class="op" id="6274760">)</span>&nbsp;<span class="op" id="6274762">*</span><span class="ident" id="6274763">LineTable</span>&nbsp;<span class="op" id="6274773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6274776">data</span><span class="op" id="6274780">,</span>&nbsp;<span class="ident" id="6274782">pc</span><span class="op" id="6274784">,</span>&nbsp;<span class="ident" id="6274786">line</span>&nbsp;<span class="op" id="6274791">:=</span>&nbsp;<span class="ident" id="6274794">t</span><span class="op" id="6274795">.</span><span class="ident" id="6274796">parse</span><span class="op" id="6274801">(</span><span class="ident" id="6274802">pc</span><span class="op" id="6274804">,</span>&nbsp;<span class="op" id="6274806">-</span><span class="num" id="6274807">1</span><span class="op" id="6274808">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6274811">return</span>&nbsp;<span class="op" id="6274818">&amp;</span><span class="ident" id="6274819">LineTable</span><span class="op" id="6274828">{</span><span class="ident" id="6274829">Data</span><span class="op" id="6274833">:</span>&nbsp;<span class="ident" id="6274835">data</span><span class="op" id="6274839">,</span>&nbsp;<span class="ident" id="6274841">PC</span><span class="op" id="6274843">:</span>&nbsp;<span class="ident" id="6274845">pc</span><span class="op" id="6274847">,</span>&nbsp;<span class="ident" id="6274849">Line</span><span class="op" id="6274853">:</span>&nbsp;<span class="ident" id="6274855">line</span><span class="op" id="6274859">}</span><br>
<span class="lineno"></span><span class="op" id="6274861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6274864">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6274931">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6274986">func</span>&nbsp;<span class="op" id="6274991">(</span><span class="ident" id="6274992">t</span>&nbsp;<span class="op" id="6274994">*</span><span class="ident" id="6274995">LineTable</span><span class="op" id="6275004">)</span>&nbsp;<span class="ident" id="6275006">PCToLine</span><span class="op" id="6275014">(</span><span class="ident" id="6275015">pc</span>&nbsp;<span class="ident" id="6275018">uint64</span><span class="op" id="6275024">)</span>&nbsp;<span class="builtintype" id="6275026">int</span>&nbsp;<span class="op" id="6275030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275033">if</span>&nbsp;<span class="ident" id="6275036">t</span><span class="op" id="6275037">.</span><span class="ident" id="6275038">isGo12</span><span class="op" id="6275044">(</span><span class="op" id="6275045">)</span>&nbsp;<span class="op" id="6275047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275051">return</span>&nbsp;<span class="ident" id="6275058">t</span><span class="op" id="6275059">.</span><span class="ident" id="6275060">go12PCToLine</span><span class="op" id="6275072">(</span><span class="ident" id="6275073">pc</span><span class="op" id="6275075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6275078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6275081">_</span><span class="op" id="6275082">,</span>&nbsp;<span class="ident" id="6275084">_</span><span class="op" id="6275085">,</span>&nbsp;<span class="ident" id="6275087">line</span>&nbsp;<span class="op" id="6275092">:=</span>&nbsp;<span class="ident" id="6275095">t</span><span class="op" id="6275096">.</span><span class="ident" id="6275097">parse</span><span class="op" id="6275102">(</span><span class="ident" id="6275103">pc</span><span class="op" id="6275105">,</span>&nbsp;<span class="op" id="6275107">-</span><span class="num" id="6275108">1</span><span class="op" id="6275109">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275112">return</span>&nbsp;<span class="ident" id="6275119">line</span><br>
<span class="lineno"></span><span class="op" id="6275124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6275127">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6275194">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6275245">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6275300">func</span>&nbsp;<span class="op" id="6275305">(</span><span class="ident" id="6275306">t</span>&nbsp;<span class="op" id="6275308">*</span><span class="ident" id="6275309">LineTable</span><span class="op" id="6275318">)</span>&nbsp;<span class="ident" id="6275320">LineToPC</span><span class="op" id="6275328">(</span><span class="ident" id="6275329">line</span>&nbsp;<span class="builtintype" id="6275334">int</span><span class="op" id="6275337">,</span>&nbsp;<span class="ident" id="6275339">maxpc</span>&nbsp;<span class="ident" id="6275345">uint64</span><span class="op" id="6275351">)</span>&nbsp;<span class="ident" id="6275353">uint64</span>&nbsp;<span class="op" id="6275360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275363">if</span>&nbsp;<span class="ident" id="6275366">t</span><span class="op" id="6275367">.</span><span class="ident" id="6275368">isGo12</span><span class="op" id="6275374">(</span><span class="op" id="6275375">)</span>&nbsp;<span class="op" id="6275377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275381">return</span>&nbsp;<span class="num" id="6275388">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6275391">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6275394">_</span><span class="op" id="6275395">,</span>&nbsp;<span class="ident" id="6275397">pc</span><span class="op" id="6275399">,</span>&nbsp;<span class="ident" id="6275401">line1</span>&nbsp;<span class="op" id="6275407">:=</span>&nbsp;<span class="ident" id="6275410">t</span><span class="op" id="6275411">.</span><span class="ident" id="6275412">parse</span><span class="op" id="6275417">(</span><span class="ident" id="6275418">maxpc</span><span class="op" id="6275423">,</span>&nbsp;<span class="ident" id="6275425">line</span><span class="op" id="6275429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275432">if</span>&nbsp;<span class="ident" id="6275435">line1</span>&nbsp;<span class="op" id="6275441">!=</span>&nbsp;<span class="ident" id="6275444">line</span>&nbsp;<span class="op" id="6275449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275453">return</span>&nbsp;<span class="num" id="6275460">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6275463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6275466">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275530">return</span>&nbsp;<span class="ident" id="6275537">pc</span>&nbsp;<span class="op" id="6275540">-</span>&nbsp;<span class="ident" id="6275542">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6275553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6275556">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6275600">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6275638">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6275679">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6275710">func</span>&nbsp;<span class="ident" id="6275715">NewLineTable</span><span class="op" id="6275727">(</span><span class="ident" id="6275728">data</span>&nbsp;<span class="op" id="6275733">[</span><span class="op" id="6275734">]</span><span class="builtintype" id="6275735">byte</span><span class="op" id="6275739">,</span>&nbsp;<span class="ident" id="6275741">text</span>&nbsp;<span class="ident" id="6275746">uint64</span><span class="op" id="6275752">)</span>&nbsp;<span class="op" id="6275754">*</span><span class="ident" id="6275755">LineTable</span>&nbsp;<span class="op" id="6275765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6275768">return</span>&nbsp;<span class="op" id="6275775">&amp;</span><span class="ident" id="6275776">LineTable</span><span class="op" id="6275785">{</span><span class="ident" id="6275786">Data</span><span class="op" id="6275790">:</span>&nbsp;<span class="ident" id="6275792">data</span><span class="op" id="6275796">,</span>&nbsp;<span class="ident" id="6275798">PC</span><span class="op" id="6275800">:</span>&nbsp;<span class="ident" id="6275802">text</span><span class="op" id="6275806">,</span>&nbsp;<span class="ident" id="6275808">Line</span><span class="op" id="6275812">:</span>&nbsp;<span class="num" id="6275814">0</span><span class="op" id="6275815">}</span><br>
<span class="lineno"></span><span class="op" id="6275817">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6275820">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6275851">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6275883">//</span><br>
<span class="lineno"></span><span class="comment" id="6275886">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6275953">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6276021">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6276095">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6276119">//</span><br>
<span class="lineno"></span><span class="comment" id="6276122">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6276192">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6276238">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6276306">func</span>&nbsp;<span class="op" id="6276311">(</span><span class="ident" id="6276312">t</span>&nbsp;<span class="op" id="6276314">*</span><span class="ident" id="6276315">LineTable</span><span class="op" id="6276324">)</span>&nbsp;<span class="ident" id="6276326">isGo12</span><span class="op" id="6276332">(</span><span class="op" id="6276333">)</span>&nbsp;<span class="builtintype" id="6276335">bool</span>&nbsp;<span class="op" id="6276340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6276343">t</span><span class="op" id="6276344">.</span><span class="ident" id="6276345">go12Init</span><span class="op" id="6276353">(</span><span class="op" id="6276354">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276357">return</span>&nbsp;<span class="ident" id="6276364">t</span><span class="op" id="6276365">.</span><span class="ident" id="6276366">go12</span>&nbsp;<span class="op" id="6276371">==</span>&nbsp;<span class="num" id="6276374">1</span><br>
<span class="lineno"></span><span class="op" id="6276376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6276379">const</span>&nbsp;<span class="ident" id="6276385">go12magic</span>&nbsp;<span class="op" id="6276395">=</span>&nbsp;<span class="num" id="6276397">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6276409">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6276466">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6276523">func</span>&nbsp;<span class="op" id="6276528">(</span><span class="ident" id="6276529">t</span>&nbsp;<span class="op" id="6276531">*</span><span class="ident" id="6276532">LineTable</span><span class="op" id="6276541">)</span>&nbsp;<span class="builtintype" id="6276543">uintptr</span><span class="op" id="6276550">(</span><span class="ident" id="6276551">b</span>&nbsp;<span class="op" id="6276553">[</span><span class="op" id="6276554">]</span><span class="builtintype" id="6276555">byte</span><span class="op" id="6276559">)</span>&nbsp;<span class="ident" id="6276561">uint64</span>&nbsp;<span class="op" id="6276568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276571">if</span>&nbsp;<span class="ident" id="6276574">t</span><span class="op" id="6276575">.</span><span class="ident" id="6276576">ptrsize</span>&nbsp;<span class="op" id="6276584">==</span>&nbsp;<span class="num" id="6276587">4</span>&nbsp;<span class="op" id="6276589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276593">return</span>&nbsp;<span class="ident" id="6276600">uint64</span><span class="op" id="6276606">(</span><span class="ident" id="6276607">t</span><span class="op" id="6276608">.</span><span class="ident" id="6276609">binary</span><span class="op" id="6276615">.</span><span class="ident" id="6276616">Uint32</span><span class="op" id="6276622">(</span><span class="ident" id="6276623">b</span><span class="op" id="6276624">)</span><span class="op" id="6276625">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6276628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276631">return</span>&nbsp;<span class="ident" id="6276638">t</span><span class="op" id="6276639">.</span><span class="ident" id="6276640">binary</span><span class="op" id="6276646">.</span><span class="ident" id="6276647">Uint64</span><span class="op" id="6276653">(</span><span class="ident" id="6276654">b</span><span class="op" id="6276655">)</span><br>
<span class="lineno"></span><span class="op" id="6276657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6276660">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6276735">func</span>&nbsp;<span class="op" id="6276740">(</span><span class="ident" id="6276741">t</span>&nbsp;<span class="op" id="6276743">*</span><span class="ident" id="6276744">LineTable</span><span class="op" id="6276753">)</span>&nbsp;<span class="ident" id="6276755">go12Init</span><span class="op" id="6276763">(</span><span class="op" id="6276764">)</span>&nbsp;<span class="op" id="6276766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6276769">t</span><span class="op" id="6276770">.</span><span class="ident" id="6276771">mu</span><span class="op" id="6276773">.</span><span class="ident" id="6276774">Lock</span><span class="op" id="6276778">(</span><span class="op" id="6276779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276782">defer</span>&nbsp;<span class="ident" id="6276788">t</span><span class="op" id="6276789">.</span><span class="ident" id="6276790">mu</span><span class="op" id="6276792">.</span><span class="ident" id="6276793">Unlock</span><span class="op" id="6276799">(</span><span class="op" id="6276800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276803">if</span>&nbsp;<span class="ident" id="6276806">t</span><span class="op" id="6276807">.</span><span class="ident" id="6276808">go12</span>&nbsp;<span class="op" id="6276813">!=</span>&nbsp;<span class="num" id="6276816">0</span>&nbsp;<span class="op" id="6276818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276822">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6276830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6276834">defer</span>&nbsp;<span class="keyword" id="6276840">func</span><span class="op" id="6276844">(</span><span class="op" id="6276845">)</span>&nbsp;<span class="op" id="6276847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6276851">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6276916">recover</span><span class="op" id="6276923">(</span><span class="op" id="6276924">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6276927">}</span><span class="op" id="6276928">(</span><span class="op" id="6276929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6276933">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277002">t</span><span class="op" id="6277003">.</span><span class="ident" id="6277004">go12</span>&nbsp;<span class="op" id="6277009">=</span>&nbsp;<span class="op" id="6277011">-</span><span class="num" id="6277012">1</span>&nbsp;<span class="comment" id="6277014">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277052">if</span>&nbsp;<span class="builtinfunc" id="6277055">len</span><span class="op" id="6277058">(</span><span class="ident" id="6277059">t</span><span class="op" id="6277060">.</span><span class="ident" id="6277061">Data</span><span class="op" id="6277065">)</span>&nbsp;<span class="op" id="6277067">&lt;</span>&nbsp;<span class="num" id="6277069">16</span>&nbsp;<span class="op" id="6277072">||</span>&nbsp;<span class="ident" id="6277075">t</span><span class="op" id="6277076">.</span><span class="ident" id="6277077">Data</span><span class="op" id="6277081">[</span><span class="num" id="6277082">4</span><span class="op" id="6277083">]</span>&nbsp;<span class="op" id="6277085">!=</span>&nbsp;<span class="num" id="6277088">0</span>&nbsp;<span class="op" id="6277090">||</span>&nbsp;<span class="ident" id="6277093">t</span><span class="op" id="6277094">.</span><span class="ident" id="6277095">Data</span><span class="op" id="6277099">[</span><span class="num" id="6277100">5</span><span class="op" id="6277101">]</span>&nbsp;<span class="op" id="6277103">!=</span>&nbsp;<span class="num" id="6277106">0</span>&nbsp;<span class="op" id="6277108">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6277113">(</span><span class="ident" id="6277114">t</span><span class="op" id="6277115">.</span><span class="ident" id="6277116">Data</span><span class="op" id="6277120">[</span><span class="num" id="6277121">6</span><span class="op" id="6277122">]</span>&nbsp;<span class="op" id="6277124">!=</span>&nbsp;<span class="num" id="6277127">1</span>&nbsp;<span class="op" id="6277129">&amp;&amp;</span>&nbsp;<span class="ident" id="6277132">t</span><span class="op" id="6277133">.</span><span class="ident" id="6277134">Data</span><span class="op" id="6277138">[</span><span class="num" id="6277139">6</span><span class="op" id="6277140">]</span>&nbsp;<span class="op" id="6277142">!=</span>&nbsp;<span class="num" id="6277145">4</span><span class="op" id="6277146">)</span>&nbsp;<span class="op" id="6277148">||</span>&nbsp;<span class="comment" id="6277151">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6277167">(</span><span class="ident" id="6277168">t</span><span class="op" id="6277169">.</span><span class="ident" id="6277170">Data</span><span class="op" id="6277174">[</span><span class="num" id="6277175">7</span><span class="op" id="6277176">]</span>&nbsp;<span class="op" id="6277178">!=</span>&nbsp;<span class="num" id="6277181">4</span>&nbsp;<span class="op" id="6277183">&amp;&amp;</span>&nbsp;<span class="ident" id="6277186">t</span><span class="op" id="6277187">.</span><span class="ident" id="6277188">Data</span><span class="op" id="6277192">[</span><span class="num" id="6277193">7</span><span class="op" id="6277194">]</span>&nbsp;<span class="op" id="6277196">!=</span>&nbsp;<span class="num" id="6277199">8</span><span class="op" id="6277200">)</span>&nbsp;<span class="op" id="6277202">{</span>&nbsp;<span class="comment" id="6277204">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277222">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6277230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277234">switch</span>&nbsp;<span class="builtintype" id="6277241">uint32</span><span class="op" id="6277247">(</span><span class="ident" id="6277248">go12magic</span><span class="op" id="6277257">)</span>&nbsp;<span class="op" id="6277259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277262">case</span>&nbsp;<span class="ident" id="6277267">binary</span><span class="op" id="6277273">.</span><span class="ident" id="6277274">LittleEndian</span><span class="op" id="6277286">.</span><span class="ident" id="6277287">Uint32</span><span class="op" id="6277293">(</span><span class="ident" id="6277294">t</span><span class="op" id="6277295">.</span><span class="ident" id="6277296">Data</span><span class="op" id="6277300">)</span><span class="op" id="6277301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277305">t</span><span class="op" id="6277306">.</span><span class="ident" id="6277307">binary</span>&nbsp;<span class="op" id="6277314">=</span>&nbsp;<span class="ident" id="6277316">binary</span><span class="op" id="6277322">.</span><span class="ident" id="6277323">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277337">case</span>&nbsp;<span class="ident" id="6277342">binary</span><span class="op" id="6277348">.</span><span class="ident" id="6277349">BigEndian</span><span class="op" id="6277358">.</span><span class="ident" id="6277359">Uint32</span><span class="op" id="6277365">(</span><span class="ident" id="6277366">t</span><span class="op" id="6277367">.</span><span class="ident" id="6277368">Data</span><span class="op" id="6277372">)</span><span class="op" id="6277373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277377">t</span><span class="op" id="6277378">.</span><span class="ident" id="6277379">binary</span>&nbsp;<span class="op" id="6277386">=</span>&nbsp;<span class="ident" id="6277388">binary</span><span class="op" id="6277394">.</span><span class="ident" id="6277395">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277406">default</span><span class="op" id="6277413">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6277417">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6277425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277429">t</span><span class="op" id="6277430">.</span><span class="ident" id="6277431">quantum</span>&nbsp;<span class="op" id="6277439">=</span>&nbsp;<span class="builtintype" id="6277441">uint32</span><span class="op" id="6277447">(</span><span class="ident" id="6277448">t</span><span class="op" id="6277449">.</span><span class="ident" id="6277450">Data</span><span class="op" id="6277454">[</span><span class="num" id="6277455">6</span><span class="op" id="6277456">]</span><span class="op" id="6277457">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277460">t</span><span class="op" id="6277461">.</span><span class="ident" id="6277462">ptrsize</span>&nbsp;<span class="op" id="6277470">=</span>&nbsp;<span class="builtintype" id="6277472">uint32</span><span class="op" id="6277478">(</span><span class="ident" id="6277479">t</span><span class="op" id="6277480">.</span><span class="ident" id="6277481">Data</span><span class="op" id="6277485">[</span><span class="num" id="6277486">7</span><span class="op" id="6277487">]</span><span class="op" id="6277488">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277492">t</span><span class="op" id="6277493">.</span><span class="ident" id="6277494">nfunctab</span>&nbsp;<span class="op" id="6277503">=</span>&nbsp;<span class="builtintype" id="6277505">uint32</span><span class="op" id="6277511">(</span><span class="ident" id="6277512">t</span><span class="op" id="6277513">.</span><span class="builtintype" id="6277514">uintptr</span><span class="op" id="6277521">(</span><span class="ident" id="6277522">t</span><span class="op" id="6277523">.</span><span class="ident" id="6277524">Data</span><span class="op" id="6277528">[</span><span class="num" id="6277529">8</span><span class="op" id="6277530">:</span><span class="op" id="6277531">]</span><span class="op" id="6277532">)</span><span class="op" id="6277533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277536">t</span><span class="op" id="6277537">.</span><span class="ident" id="6277538">functab</span>&nbsp;<span class="op" id="6277546">=</span>&nbsp;<span class="ident" id="6277548">t</span><span class="op" id="6277549">.</span><span class="ident" id="6277550">Data</span><span class="op" id="6277554">[</span><span class="num" id="6277555">8</span><span class="op" id="6277556">+</span><span class="ident" id="6277557">t</span><span class="op" id="6277558">.</span><span class="ident" id="6277559">ptrsize</span><span class="op" id="6277566">:</span><span class="op" id="6277567">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277570">functabsize</span>&nbsp;<span class="op" id="6277582">:=</span>&nbsp;<span class="ident" id="6277585">t</span><span class="op" id="6277586">.</span><span class="ident" id="6277587">nfunctab</span><span class="op" id="6277595">*</span><span class="num" id="6277596">2</span><span class="op" id="6277597">*</span><span class="ident" id="6277598">t</span><span class="op" id="6277599">.</span><span class="ident" id="6277600">ptrsize</span>&nbsp;<span class="op" id="6277608">+</span>&nbsp;<span class="ident" id="6277610">t</span><span class="op" id="6277611">.</span><span class="ident" id="6277612">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277621">fileoff</span>&nbsp;<span class="op" id="6277629">:=</span>&nbsp;<span class="ident" id="6277632">t</span><span class="op" id="6277633">.</span><span class="ident" id="6277634">binary</span><span class="op" id="6277640">.</span><span class="ident" id="6277641">Uint32</span><span class="op" id="6277647">(</span><span class="ident" id="6277648">t</span><span class="op" id="6277649">.</span><span class="ident" id="6277650">functab</span><span class="op" id="6277657">[</span><span class="ident" id="6277658">functabsize</span><span class="op" id="6277669">:</span><span class="op" id="6277670">]</span><span class="op" id="6277671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277674">t</span><span class="op" id="6277675">.</span><span class="ident" id="6277676">functab</span>&nbsp;<span class="op" id="6277684">=</span>&nbsp;<span class="ident" id="6277686">t</span><span class="op" id="6277687">.</span><span class="ident" id="6277688">functab</span><span class="op" id="6277695">[</span><span class="op" id="6277696">:</span><span class="ident" id="6277697">functabsize</span><span class="op" id="6277708">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277711">t</span><span class="op" id="6277712">.</span><span class="ident" id="6277713">filetab</span>&nbsp;<span class="op" id="6277721">=</span>&nbsp;<span class="ident" id="6277723">t</span><span class="op" id="6277724">.</span><span class="ident" id="6277725">Data</span><span class="op" id="6277729">[</span><span class="ident" id="6277730">fileoff</span><span class="op" id="6277737">:</span><span class="op" id="6277738">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277741">t</span><span class="op" id="6277742">.</span><span class="ident" id="6277743">nfiletab</span>&nbsp;<span class="op" id="6277752">=</span>&nbsp;<span class="ident" id="6277754">t</span><span class="op" id="6277755">.</span><span class="ident" id="6277756">binary</span><span class="op" id="6277762">.</span><span class="ident" id="6277763">Uint32</span><span class="op" id="6277769">(</span><span class="ident" id="6277770">t</span><span class="op" id="6277771">.</span><span class="ident" id="6277772">filetab</span><span class="op" id="6277779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277782">t</span><span class="op" id="6277783">.</span><span class="ident" id="6277784">filetab</span>&nbsp;<span class="op" id="6277792">=</span>&nbsp;<span class="ident" id="6277794">t</span><span class="op" id="6277795">.</span><span class="ident" id="6277796">filetab</span><span class="op" id="6277803">[</span><span class="op" id="6277804">:</span><span class="ident" id="6277805">t</span><span class="op" id="6277806">.</span><span class="ident" id="6277807">nfiletab</span><span class="op" id="6277815">*</span><span class="num" id="6277816">4</span><span class="op" id="6277817">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6277821">t</span><span class="op" id="6277822">.</span><span class="ident" id="6277823">go12</span>&nbsp;<span class="op" id="6277828">=</span>&nbsp;<span class="num" id="6277830">1</span>&nbsp;<span class="comment" id="6277832">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6277850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6277853">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6277927">func</span>&nbsp;<span class="op" id="6277932">(</span><span class="ident" id="6277933">t</span>&nbsp;<span class="op" id="6277935">*</span><span class="ident" id="6277936">LineTable</span><span class="op" id="6277945">)</span>&nbsp;<span class="ident" id="6277947">go12Funcs</span><span class="op" id="6277956">(</span><span class="op" id="6277957">)</span>&nbsp;<span class="op" id="6277959">[</span><span class="op" id="6277960">]</span><span class="ident" id="6277961">Func</span>&nbsp;<span class="op" id="6277966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6277969">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278021">defer</span>&nbsp;<span class="keyword" id="6278027">func</span><span class="op" id="6278031">(</span><span class="op" id="6278032">)</span>&nbsp;<span class="op" id="6278034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6278038">recover</span><span class="op" id="6278045">(</span><span class="op" id="6278046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6278049">}</span><span class="op" id="6278050">(</span><span class="op" id="6278051">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278055">n</span>&nbsp;<span class="op" id="6278057">:=</span>&nbsp;<span class="builtinfunc" id="6278060">len</span><span class="op" id="6278063">(</span><span class="ident" id="6278064">t</span><span class="op" id="6278065">.</span><span class="ident" id="6278066">functab</span><span class="op" id="6278073">)</span>&nbsp;<span class="op" id="6278075">/</span>&nbsp;<span class="builtintype" id="6278077">int</span><span class="op" id="6278080">(</span><span class="ident" id="6278081">t</span><span class="op" id="6278082">.</span><span class="ident" id="6278083">ptrsize</span><span class="op" id="6278090">)</span>&nbsp;<span class="op" id="6278092">/</span>&nbsp;<span class="num" id="6278094">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278097">funcs</span>&nbsp;<span class="op" id="6278103">:=</span>&nbsp;<span class="builtinfunc" id="6278106">make</span><span class="op" id="6278110">(</span><span class="op" id="6278111">[</span><span class="op" id="6278112">]</span><span class="ident" id="6278113">Func</span><span class="op" id="6278117">,</span>&nbsp;<span class="ident" id="6278119">n</span><span class="op" id="6278120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278123">for</span>&nbsp;<span class="ident" id="6278127">i</span>&nbsp;<span class="op" id="6278129">:=</span>&nbsp;<span class="keyword" id="6278132">range</span>&nbsp;<span class="ident" id="6278138">funcs</span>&nbsp;<span class="op" id="6278144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278148">f</span>&nbsp;<span class="op" id="6278150">:=</span>&nbsp;<span class="op" id="6278153">&amp;</span><span class="ident" id="6278154">funcs</span><span class="op" id="6278159">[</span><span class="ident" id="6278160">i</span><span class="op" id="6278161">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278165">f</span><span class="op" id="6278166">.</span><span class="ident" id="6278167">Entry</span>&nbsp;<span class="op" id="6278173">=</span>&nbsp;<span class="ident" id="6278175">uint64</span><span class="op" id="6278181">(</span><span class="ident" id="6278182">t</span><span class="op" id="6278183">.</span><span class="builtintype" id="6278184">uintptr</span><span class="op" id="6278191">(</span><span class="ident" id="6278192">t</span><span class="op" id="6278193">.</span><span class="ident" id="6278194">functab</span><span class="op" id="6278201">[</span><span class="num" id="6278202">2</span><span class="op" id="6278203">*</span><span class="ident" id="6278204">i</span><span class="op" id="6278205">*</span><span class="builtintype" id="6278206">int</span><span class="op" id="6278209">(</span><span class="ident" id="6278210">t</span><span class="op" id="6278211">.</span><span class="ident" id="6278212">ptrsize</span><span class="op" id="6278219">)</span><span class="op" id="6278220">:</span><span class="op" id="6278221">]</span><span class="op" id="6278222">)</span><span class="op" id="6278223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278227">f</span><span class="op" id="6278228">.</span><span class="ident" id="6278229">End</span>&nbsp;<span class="op" id="6278233">=</span>&nbsp;<span class="ident" id="6278235">uint64</span><span class="op" id="6278241">(</span><span class="ident" id="6278242">t</span><span class="op" id="6278243">.</span><span class="builtintype" id="6278244">uintptr</span><span class="op" id="6278251">(</span><span class="ident" id="6278252">t</span><span class="op" id="6278253">.</span><span class="ident" id="6278254">functab</span><span class="op" id="6278261">[</span><span class="op" id="6278262">(</span><span class="num" id="6278263">2</span><span class="op" id="6278264">*</span><span class="ident" id="6278265">i</span><span class="op" id="6278266">+</span><span class="num" id="6278267">2</span><span class="op" id="6278268">)</span><span class="op" id="6278269">*</span><span class="builtintype" id="6278270">int</span><span class="op" id="6278273">(</span><span class="ident" id="6278274">t</span><span class="op" id="6278275">.</span><span class="ident" id="6278276">ptrsize</span><span class="op" id="6278283">)</span><span class="op" id="6278284">:</span><span class="op" id="6278285">]</span><span class="op" id="6278286">)</span><span class="op" id="6278287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278291">info</span>&nbsp;<span class="op" id="6278296">:=</span>&nbsp;<span class="ident" id="6278299">t</span><span class="op" id="6278300">.</span><span class="ident" id="6278301">Data</span><span class="op" id="6278305">[</span><span class="ident" id="6278306">t</span><span class="op" id="6278307">.</span><span class="builtintype" id="6278308">uintptr</span><span class="op" id="6278315">(</span><span class="ident" id="6278316">t</span><span class="op" id="6278317">.</span><span class="ident" id="6278318">functab</span><span class="op" id="6278325">[</span><span class="op" id="6278326">(</span><span class="num" id="6278327">2</span><span class="op" id="6278328">*</span><span class="ident" id="6278329">i</span><span class="op" id="6278330">+</span><span class="num" id="6278331">1</span><span class="op" id="6278332">)</span><span class="op" id="6278333">*</span><span class="builtintype" id="6278334">int</span><span class="op" id="6278337">(</span><span class="ident" id="6278338">t</span><span class="op" id="6278339">.</span><span class="ident" id="6278340">ptrsize</span><span class="op" id="6278347">)</span><span class="op" id="6278348">:</span><span class="op" id="6278349">]</span><span class="op" id="6278350">)</span><span class="op" id="6278351">:</span><span class="op" id="6278352">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278356">f</span><span class="op" id="6278357">.</span><span class="ident" id="6278358">LineTable</span>&nbsp;<span class="op" id="6278368">=</span>&nbsp;<span class="ident" id="6278370">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278374">f</span><span class="op" id="6278375">.</span><span class="ident" id="6278376">FrameSize</span>&nbsp;<span class="op" id="6278386">=</span>&nbsp;<span class="builtintype" id="6278388">int</span><span class="op" id="6278391">(</span><span class="ident" id="6278392">t</span><span class="op" id="6278393">.</span><span class="ident" id="6278394">binary</span><span class="op" id="6278400">.</span><span class="ident" id="6278401">Uint32</span><span class="op" id="6278407">(</span><span class="ident" id="6278408">info</span><span class="op" id="6278412">[</span><span class="ident" id="6278413">t</span><span class="op" id="6278414">.</span><span class="ident" id="6278415">ptrsize</span><span class="op" id="6278422">+</span><span class="num" id="6278423">2</span><span class="op" id="6278424">*</span><span class="num" id="6278425">4</span><span class="op" id="6278426">:</span><span class="op" id="6278427">]</span><span class="op" id="6278428">)</span><span class="op" id="6278429">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278433">f</span><span class="op" id="6278434">.</span><span class="ident" id="6278435">Sym</span>&nbsp;<span class="op" id="6278439">=</span>&nbsp;<span class="op" id="6278441">&amp;</span><span class="ident" id="6278442">Sym</span><span class="op" id="6278445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278450">Value</span><span class="op" id="6278455">:</span>&nbsp;&nbsp;<span class="ident" id="6278458">f</span><span class="op" id="6278459">.</span><span class="ident" id="6278460">Entry</span><span class="op" id="6278465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278470">Type</span><span class="op" id="6278474">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6278478">&#39;T&#39;</span><span class="op" id="6278481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278486">Name</span><span class="op" id="6278490">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6278494">t</span><span class="op" id="6278495">.</span><span class="builtintype" id="6278496">string</span><span class="op" id="6278502">(</span><span class="ident" id="6278503">t</span><span class="op" id="6278504">.</span><span class="ident" id="6278505">binary</span><span class="op" id="6278511">.</span><span class="ident" id="6278512">Uint32</span><span class="op" id="6278518">(</span><span class="ident" id="6278519">info</span><span class="op" id="6278523">[</span><span class="ident" id="6278524">t</span><span class="op" id="6278525">.</span><span class="ident" id="6278526">ptrsize</span><span class="op" id="6278533">:</span><span class="op" id="6278534">]</span><span class="op" id="6278535">)</span><span class="op" id="6278536">)</span><span class="op" id="6278537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278542">GoType</span><span class="op" id="6278548">:</span>&nbsp;<span class="num" id="6278550">0</span><span class="op" id="6278551">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278556">Func</span><span class="op" id="6278560">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6278564">f</span><span class="op" id="6278565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6278569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6278572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278575">return</span>&nbsp;<span class="ident" id="6278582">funcs</span><br>
<span class="lineno"></span><span class="op" id="6278588">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6278591">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6278664">func</span>&nbsp;<span class="op" id="6278669">(</span><span class="ident" id="6278670">t</span>&nbsp;<span class="op" id="6278672">*</span><span class="ident" id="6278673">LineTable</span><span class="op" id="6278682">)</span>&nbsp;<span class="ident" id="6278684">findFunc</span><span class="op" id="6278692">(</span><span class="ident" id="6278693">pc</span>&nbsp;<span class="ident" id="6278696">uint64</span><span class="op" id="6278702">)</span>&nbsp;<span class="op" id="6278704">[</span><span class="op" id="6278705">]</span><span class="builtintype" id="6278706">byte</span>&nbsp;<span class="op" id="6278711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278714">if</span>&nbsp;<span class="ident" id="6278717">pc</span>&nbsp;<span class="op" id="6278720">&lt;</span>&nbsp;<span class="ident" id="6278722">t</span><span class="op" id="6278723">.</span><span class="builtintype" id="6278724">uintptr</span><span class="op" id="6278731">(</span><span class="ident" id="6278732">t</span><span class="op" id="6278733">.</span><span class="ident" id="6278734">functab</span><span class="op" id="6278741">)</span>&nbsp;<span class="op" id="6278743">||</span>&nbsp;<span class="ident" id="6278746">pc</span>&nbsp;<span class="op" id="6278749">&gt;=</span>&nbsp;<span class="ident" id="6278752">t</span><span class="op" id="6278753">.</span><span class="builtintype" id="6278754">uintptr</span><span class="op" id="6278761">(</span><span class="ident" id="6278762">t</span><span class="op" id="6278763">.</span><span class="ident" id="6278764">functab</span><span class="op" id="6278771">[</span><span class="builtinfunc" id="6278772">len</span><span class="op" id="6278775">(</span><span class="ident" id="6278776">t</span><span class="op" id="6278777">.</span><span class="ident" id="6278778">functab</span><span class="op" id="6278785">)</span><span class="op" id="6278786">-</span><span class="builtintype" id="6278787">int</span><span class="op" id="6278790">(</span><span class="ident" id="6278791">t</span><span class="op" id="6278792">.</span><span class="ident" id="6278793">ptrsize</span><span class="op" id="6278800">)</span><span class="op" id="6278801">:</span><span class="op" id="6278802">]</span><span class="op" id="6278803">)</span>&nbsp;<span class="op" id="6278805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278809">return</span>&nbsp;<span class="builtintype" id="6278816">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6278821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6278825">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6278884">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278949">f</span>&nbsp;<span class="op" id="6278951">:=</span>&nbsp;<span class="ident" id="6278954">t</span><span class="op" id="6278955">.</span><span class="ident" id="6278956">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278965">nf</span>&nbsp;<span class="op" id="6278968">:=</span>&nbsp;<span class="ident" id="6278971">t</span><span class="op" id="6278972">.</span><span class="ident" id="6278973">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6278983">for</span>&nbsp;<span class="ident" id="6278987">nf</span>&nbsp;<span class="op" id="6278990">&gt;</span>&nbsp;<span class="num" id="6278992">0</span>&nbsp;<span class="op" id="6278994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6278998">m</span>&nbsp;<span class="op" id="6279000">:=</span>&nbsp;<span class="ident" id="6279003">nf</span>&nbsp;<span class="op" id="6279006">/</span>&nbsp;<span class="num" id="6279008">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279012">fm</span>&nbsp;<span class="op" id="6279015">:=</span>&nbsp;<span class="ident" id="6279018">f</span><span class="op" id="6279019">[</span><span class="num" id="6279020">2</span><span class="op" id="6279021">*</span><span class="ident" id="6279022">t</span><span class="op" id="6279023">.</span><span class="ident" id="6279024">ptrsize</span><span class="op" id="6279031">*</span><span class="ident" id="6279032">m</span><span class="op" id="6279033">:</span><span class="op" id="6279034">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279038">if</span>&nbsp;<span class="ident" id="6279041">t</span><span class="op" id="6279042">.</span><span class="builtintype" id="6279043">uintptr</span><span class="op" id="6279050">(</span><span class="ident" id="6279051">fm</span><span class="op" id="6279053">)</span>&nbsp;<span class="op" id="6279055">&lt;=</span>&nbsp;<span class="ident" id="6279058">pc</span>&nbsp;<span class="op" id="6279061">&amp;&amp;</span>&nbsp;<span class="ident" id="6279064">pc</span>&nbsp;<span class="op" id="6279067">&lt;</span>&nbsp;<span class="ident" id="6279069">t</span><span class="op" id="6279070">.</span><span class="builtintype" id="6279071">uintptr</span><span class="op" id="6279078">(</span><span class="ident" id="6279079">fm</span><span class="op" id="6279081">[</span><span class="num" id="6279082">2</span><span class="op" id="6279083">*</span><span class="ident" id="6279084">t</span><span class="op" id="6279085">.</span><span class="ident" id="6279086">ptrsize</span><span class="op" id="6279093">:</span><span class="op" id="6279094">]</span><span class="op" id="6279095">)</span>&nbsp;<span class="op" id="6279097">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279102">return</span>&nbsp;<span class="ident" id="6279109">t</span><span class="op" id="6279110">.</span><span class="ident" id="6279111">Data</span><span class="op" id="6279115">[</span><span class="ident" id="6279116">t</span><span class="op" id="6279117">.</span><span class="builtintype" id="6279118">uintptr</span><span class="op" id="6279125">(</span><span class="ident" id="6279126">fm</span><span class="op" id="6279128">[</span><span class="ident" id="6279129">t</span><span class="op" id="6279130">.</span><span class="ident" id="6279131">ptrsize</span><span class="op" id="6279138">:</span><span class="op" id="6279139">]</span><span class="op" id="6279140">)</span><span class="op" id="6279141">:</span><span class="op" id="6279142">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279146">}</span>&nbsp;<span class="keyword" id="6279148">else</span>&nbsp;<span class="keyword" id="6279153">if</span>&nbsp;<span class="ident" id="6279156">pc</span>&nbsp;<span class="op" id="6279159">&lt;</span>&nbsp;<span class="ident" id="6279161">t</span><span class="op" id="6279162">.</span><span class="builtintype" id="6279163">uintptr</span><span class="op" id="6279170">(</span><span class="ident" id="6279171">fm</span><span class="op" id="6279173">)</span>&nbsp;<span class="op" id="6279175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279180">nf</span>&nbsp;<span class="op" id="6279183">=</span>&nbsp;<span class="ident" id="6279185">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279189">}</span>&nbsp;<span class="keyword" id="6279191">else</span>&nbsp;<span class="op" id="6279196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279201">f</span>&nbsp;<span class="op" id="6279203">=</span>&nbsp;<span class="ident" id="6279205">f</span><span class="op" id="6279206">[</span><span class="op" id="6279207">(</span><span class="ident" id="6279208">m</span><span class="op" id="6279209">+</span><span class="num" id="6279210">1</span><span class="op" id="6279211">)</span><span class="op" id="6279212">*</span><span class="num" id="6279213">2</span><span class="op" id="6279214">*</span><span class="ident" id="6279215">t</span><span class="op" id="6279216">.</span><span class="ident" id="6279217">ptrsize</span><span class="op" id="6279224">:</span><span class="op" id="6279225">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279230">nf</span>&nbsp;<span class="op" id="6279233">-=</span>&nbsp;<span class="ident" id="6279236">m</span>&nbsp;<span class="op" id="6279238">+</span>&nbsp;<span class="num" id="6279240">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279250">return</span>&nbsp;<span class="builtintype" id="6279257">nil</span><br>
<span class="lineno"></span><span class="op" id="6279261">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6279264">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6279325">func</span>&nbsp;<span class="op" id="6279330">(</span><span class="ident" id="6279331">t</span>&nbsp;<span class="op" id="6279333">*</span><span class="ident" id="6279334">LineTable</span><span class="op" id="6279343">)</span>&nbsp;<span class="ident" id="6279345">readvarint</span><span class="op" id="6279355">(</span><span class="ident" id="6279356">pp</span>&nbsp;<span class="op" id="6279359">*</span><span class="op" id="6279360">[</span><span class="op" id="6279361">]</span><span class="builtintype" id="6279362">byte</span><span class="op" id="6279366">)</span>&nbsp;<span class="builtintype" id="6279368">uint32</span>&nbsp;<span class="op" id="6279375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279378">var</span>&nbsp;<span class="ident" id="6279382">v</span><span class="op" id="6279383">,</span>&nbsp;<span class="ident" id="6279385">shift</span>&nbsp;<span class="builtintype" id="6279391">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279399">p</span>&nbsp;<span class="op" id="6279401">:=</span>&nbsp;<span class="op" id="6279404">*</span><span class="ident" id="6279405">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279409">for</span>&nbsp;<span class="ident" id="6279413">shift</span>&nbsp;<span class="op" id="6279419">=</span>&nbsp;<span class="num" id="6279421">0</span><span class="op" id="6279422">;</span>&nbsp;<span class="op" id="6279424">;</span>&nbsp;<span class="ident" id="6279426">shift</span>&nbsp;<span class="op" id="6279432">+=</span>&nbsp;<span class="num" id="6279435">7</span>&nbsp;<span class="op" id="6279437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279441">b</span>&nbsp;<span class="op" id="6279443">:=</span>&nbsp;<span class="ident" id="6279446">p</span><span class="op" id="6279447">[</span><span class="num" id="6279448">0</span><span class="op" id="6279449">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279453">p</span>&nbsp;<span class="op" id="6279455">=</span>&nbsp;<span class="ident" id="6279457">p</span><span class="op" id="6279458">[</span><span class="num" id="6279459">1</span><span class="op" id="6279460">:</span><span class="op" id="6279461">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279465">v</span>&nbsp;<span class="op" id="6279467">|=</span>&nbsp;<span class="op" id="6279470">(</span><span class="builtintype" id="6279471">uint32</span><span class="op" id="6279477">(</span><span class="ident" id="6279478">b</span><span class="op" id="6279479">)</span>&nbsp;<span class="op" id="6279481">&amp;</span>&nbsp;<span class="num" id="6279483">0x7F</span><span class="op" id="6279487">)</span>&nbsp;<span class="op" id="6279489">&lt;&lt;</span>&nbsp;<span class="ident" id="6279492">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279500">if</span>&nbsp;<span class="ident" id="6279503">b</span><span class="op" id="6279504">&amp;</span><span class="num" id="6279505">0x80</span>&nbsp;<span class="op" id="6279510">==</span>&nbsp;<span class="num" id="6279513">0</span>&nbsp;<span class="op" id="6279515">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279520">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279534">*</span><span class="ident" id="6279535">pp</span>&nbsp;<span class="op" id="6279538">=</span>&nbsp;<span class="ident" id="6279540">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279543">return</span>&nbsp;<span class="ident" id="6279550">v</span><br>
<span class="lineno">265</span><span class="op" id="6279552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6279555">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6279599">func</span>&nbsp;<span class="op" id="6279604">(</span><span class="ident" id="6279605">t</span>&nbsp;<span class="op" id="6279607">*</span><span class="ident" id="6279608">LineTable</span><span class="op" id="6279617">)</span>&nbsp;<span class="builtintype" id="6279619">string</span><span class="op" id="6279625">(</span><span class="ident" id="6279626">off</span>&nbsp;<span class="builtintype" id="6279630">uint32</span><span class="op" id="6279636">)</span>&nbsp;<span class="builtintype" id="6279638">string</span>&nbsp;<span class="op" id="6279645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279648">for</span>&nbsp;<span class="ident" id="6279652">i</span>&nbsp;<span class="op" id="6279654">:=</span>&nbsp;<span class="ident" id="6279657">off</span><span class="op" id="6279660">;</span>&nbsp;<span class="op" id="6279662">;</span>&nbsp;<span class="ident" id="6279664">i</span><span class="op" id="6279665">++</span>&nbsp;<span class="op" id="6279668">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279672">if</span>&nbsp;<span class="ident" id="6279675">t</span><span class="op" id="6279676">.</span><span class="ident" id="6279677">Data</span><span class="op" id="6279681">[</span><span class="ident" id="6279682">i</span><span class="op" id="6279683">]</span>&nbsp;<span class="op" id="6279685">==</span>&nbsp;<span class="num" id="6279688">0</span>&nbsp;<span class="op" id="6279690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279695">return</span>&nbsp;<span class="builtintype" id="6279702">string</span><span class="op" id="6279708">(</span><span class="ident" id="6279709">t</span><span class="op" id="6279710">.</span><span class="ident" id="6279711">Data</span><span class="op" id="6279715">[</span><span class="ident" id="6279716">off</span><span class="op" id="6279719">:</span><span class="ident" id="6279720">i</span><span class="op" id="6279721">]</span><span class="op" id="6279722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279729">}</span><br>
<span class="lineno"></span><span class="op" id="6279731">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6279734">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6279800">func</span>&nbsp;<span class="op" id="6279805">(</span><span class="ident" id="6279806">t</span>&nbsp;<span class="op" id="6279808">*</span><span class="ident" id="6279809">LineTable</span><span class="op" id="6279818">)</span>&nbsp;<span class="ident" id="6279820">step</span><span class="op" id="6279824">(</span><span class="ident" id="6279825">p</span>&nbsp;<span class="op" id="6279827">*</span><span class="op" id="6279828">[</span><span class="op" id="6279829">]</span><span class="builtintype" id="6279830">byte</span><span class="op" id="6279834">,</span>&nbsp;<span class="ident" id="6279836">pc</span>&nbsp;<span class="op" id="6279839">*</span><span class="ident" id="6279840">uint64</span><span class="op" id="6279846">,</span>&nbsp;<span class="ident" id="6279848">val</span>&nbsp;<span class="op" id="6279852">*</span><span class="builtintype" id="6279853">int32</span><span class="op" id="6279858">,</span>&nbsp;<span class="ident" id="6279860">first</span>&nbsp;<span class="builtintype" id="6279866">bool</span><span class="op" id="6279870">)</span>&nbsp;<span class="builtintype" id="6279872">bool</span>&nbsp;<span class="op" id="6279877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279880">uvdelta</span>&nbsp;<span class="op" id="6279888">:=</span>&nbsp;<span class="ident" id="6279891">t</span><span class="op" id="6279892">.</span><span class="ident" id="6279893">readvarint</span><span class="op" id="6279903">(</span><span class="ident" id="6279904">p</span><span class="op" id="6279905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279908">if</span>&nbsp;<span class="ident" id="6279911">uvdelta</span>&nbsp;<span class="op" id="6279919">==</span>&nbsp;<span class="num" id="6279922">0</span>&nbsp;<span class="op" id="6279924">&amp;&amp;</span>&nbsp;<span class="op" id="6279927">!</span><span class="ident" id="6279928">first</span>&nbsp;<span class="op" id="6279934">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279938">return</span>&nbsp;<span class="builtintype" id="6279945">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6279952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6279955">if</span>&nbsp;<span class="ident" id="6279958">uvdelta</span><span class="op" id="6279965">&amp;</span><span class="num" id="6279966">1</span>&nbsp;<span class="op" id="6279968">!=</span>&nbsp;<span class="num" id="6279971">0</span>&nbsp;<span class="op" id="6279973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6279977">uvdelta</span>&nbsp;<span class="op" id="6279985">=</span>&nbsp;<span class="op" id="6279987">^</span><span class="op" id="6279988">(</span><span class="ident" id="6279989">uvdelta</span>&nbsp;<span class="op" id="6279997">&gt;&gt;</span>&nbsp;<span class="num" id="6280000">1</span><span class="op" id="6280001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280004">}</span>&nbsp;<span class="keyword" id="6280006">else</span>&nbsp;<span class="op" id="6280011">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280015">uvdelta</span>&nbsp;<span class="op" id="6280023">&gt;&gt;=</span>&nbsp;<span class="num" id="6280027">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280033">vdelta</span>&nbsp;<span class="op" id="6280040">:=</span>&nbsp;<span class="builtintype" id="6280043">int32</span><span class="op" id="6280048">(</span><span class="ident" id="6280049">uvdelta</span><span class="op" id="6280056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280059">pcdelta</span>&nbsp;<span class="op" id="6280067">:=</span>&nbsp;<span class="ident" id="6280070">t</span><span class="op" id="6280071">.</span><span class="ident" id="6280072">readvarint</span><span class="op" id="6280082">(</span><span class="ident" id="6280083">p</span><span class="op" id="6280084">)</span>&nbsp;<span class="op" id="6280086">*</span>&nbsp;<span class="ident" id="6280088">t</span><span class="op" id="6280089">.</span><span class="ident" id="6280090">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280099">*</span><span class="ident" id="6280100">pc</span>&nbsp;<span class="op" id="6280103">+=</span>&nbsp;<span class="ident" id="6280106">uint64</span><span class="op" id="6280112">(</span><span class="ident" id="6280113">pcdelta</span><span class="op" id="6280120">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280123">*</span><span class="ident" id="6280124">val</span>&nbsp;<span class="op" id="6280128">+=</span>&nbsp;<span class="ident" id="6280131">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280139">return</span>&nbsp;<span class="builtintype" id="6280146">true</span><br>
<span class="lineno"></span><span class="op" id="6280151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6280154">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6280214">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6280275">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6280336">func</span>&nbsp;<span class="op" id="6280341">(</span><span class="ident" id="6280342">t</span>&nbsp;<span class="op" id="6280344">*</span><span class="ident" id="6280345">LineTable</span><span class="op" id="6280354">)</span>&nbsp;<span class="ident" id="6280356">pcvalue</span><span class="op" id="6280363">(</span><span class="ident" id="6280364">off</span>&nbsp;<span class="builtintype" id="6280368">uint32</span><span class="op" id="6280374">,</span>&nbsp;<span class="ident" id="6280376">entry</span><span class="op" id="6280381">,</span>&nbsp;<span class="ident" id="6280383">targetpc</span>&nbsp;<span class="ident" id="6280392">uint64</span><span class="op" id="6280398">)</span>&nbsp;<span class="builtintype" id="6280400">int32</span>&nbsp;<span class="op" id="6280406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280409">if</span>&nbsp;<span class="ident" id="6280412">off</span>&nbsp;<span class="op" id="6280416">==</span>&nbsp;<span class="num" id="6280419">0</span>&nbsp;<span class="op" id="6280421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280425">return</span>&nbsp;<span class="op" id="6280432">-</span><span class="num" id="6280433">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280439">p</span>&nbsp;<span class="op" id="6280441">:=</span>&nbsp;<span class="ident" id="6280444">t</span><span class="op" id="6280445">.</span><span class="ident" id="6280446">Data</span><span class="op" id="6280450">[</span><span class="ident" id="6280451">off</span><span class="op" id="6280454">:</span><span class="op" id="6280455">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280459">val</span>&nbsp;<span class="op" id="6280463">:=</span>&nbsp;<span class="builtintype" id="6280466">int32</span><span class="op" id="6280471">(</span><span class="op" id="6280472">-</span><span class="num" id="6280473">1</span><span class="op" id="6280474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6280477">pc</span>&nbsp;<span class="op" id="6280480">:=</span>&nbsp;<span class="ident" id="6280483">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280490">for</span>&nbsp;<span class="ident" id="6280494">t</span><span class="op" id="6280495">.</span><span class="ident" id="6280496">step</span><span class="op" id="6280500">(</span><span class="op" id="6280501">&amp;</span><span class="ident" id="6280502">p</span><span class="op" id="6280503">,</span>&nbsp;<span class="op" id="6280505">&amp;</span><span class="ident" id="6280506">pc</span><span class="op" id="6280508">,</span>&nbsp;<span class="op" id="6280510">&amp;</span><span class="ident" id="6280511">val</span><span class="op" id="6280514">,</span>&nbsp;<span class="ident" id="6280516">pc</span>&nbsp;<span class="op" id="6280519">==</span>&nbsp;<span class="ident" id="6280522">entry</span><span class="op" id="6280527">)</span>&nbsp;<span class="op" id="6280529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280533">if</span>&nbsp;<span class="ident" id="6280536">targetpc</span>&nbsp;<span class="op" id="6280545">&lt;</span>&nbsp;<span class="ident" id="6280547">pc</span>&nbsp;<span class="op" id="6280550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280555">return</span>&nbsp;<span class="ident" id="6280562">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280571">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6280574">return</span>&nbsp;<span class="op" id="6280581">-</span><span class="num" id="6280582">1</span><br>
<span class="lineno"></span><span class="op" id="6280584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6280587">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6280650">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6280706">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6280775">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6280846">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6280921">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6280998">func</span>&nbsp;<span class="op" id="6281003">(</span><span class="ident" id="6281004">t</span>&nbsp;<span class="op" id="6281006">*</span><span class="ident" id="6281007">LineTable</span><span class="op" id="6281016">)</span>&nbsp;<span class="ident" id="6281018">findFileLine</span><span class="op" id="6281030">(</span><span class="ident" id="6281031">entry</span>&nbsp;<span class="ident" id="6281037">uint64</span><span class="op" id="6281043">,</span>&nbsp;<span class="ident" id="6281045">filetab</span><span class="op" id="6281052">,</span>&nbsp;<span class="ident" id="6281054">linetab</span>&nbsp;<span class="builtintype" id="6281062">uint32</span><span class="op" id="6281068">,</span>&nbsp;<span class="ident" id="6281070">filenum</span><span class="op" id="6281077">,</span>&nbsp;<span class="ident" id="6281079">line</span>&nbsp;<span class="builtintype" id="6281084">int32</span><span class="op" id="6281089">)</span>&nbsp;<span class="ident" id="6281091">uint64</span>&nbsp;<span class="op" id="6281098">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281101">if</span>&nbsp;<span class="ident" id="6281104">filetab</span>&nbsp;<span class="op" id="6281112">==</span>&nbsp;<span class="num" id="6281115">0</span>&nbsp;<span class="op" id="6281117">||</span>&nbsp;<span class="ident" id="6281120">linetab</span>&nbsp;<span class="op" id="6281128">==</span>&nbsp;<span class="num" id="6281131">0</span>&nbsp;<span class="op" id="6281133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281137">return</span>&nbsp;<span class="num" id="6281144">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281151">fp</span>&nbsp;<span class="op" id="6281154">:=</span>&nbsp;<span class="ident" id="6281157">t</span><span class="op" id="6281158">.</span><span class="ident" id="6281159">Data</span><span class="op" id="6281163">[</span><span class="ident" id="6281164">filetab</span><span class="op" id="6281171">:</span><span class="op" id="6281172">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281175">fl</span>&nbsp;<span class="op" id="6281178">:=</span>&nbsp;<span class="ident" id="6281181">t</span><span class="op" id="6281182">.</span><span class="ident" id="6281183">Data</span><span class="op" id="6281187">[</span><span class="ident" id="6281188">linetab</span><span class="op" id="6281195">:</span><span class="op" id="6281196">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281199">fileVal</span>&nbsp;<span class="op" id="6281207">:=</span>&nbsp;<span class="builtintype" id="6281210">int32</span><span class="op" id="6281215">(</span><span class="op" id="6281216">-</span><span class="num" id="6281217">1</span><span class="op" id="6281218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281221">filePC</span>&nbsp;<span class="op" id="6281228">:=</span>&nbsp;<span class="ident" id="6281231">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281238">lineVal</span>&nbsp;<span class="op" id="6281246">:=</span>&nbsp;<span class="builtintype" id="6281249">int32</span><span class="op" id="6281254">(</span><span class="op" id="6281255">-</span><span class="num" id="6281256">1</span><span class="op" id="6281257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281260">linePC</span>&nbsp;<span class="op" id="6281267">:=</span>&nbsp;<span class="ident" id="6281270">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281277">fileStartPC</span>&nbsp;<span class="op" id="6281289">:=</span>&nbsp;<span class="ident" id="6281292">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281300">for</span>&nbsp;<span class="ident" id="6281304">t</span><span class="op" id="6281305">.</span><span class="ident" id="6281306">step</span><span class="op" id="6281310">(</span><span class="op" id="6281311">&amp;</span><span class="ident" id="6281312">fp</span><span class="op" id="6281314">,</span>&nbsp;<span class="op" id="6281316">&amp;</span><span class="ident" id="6281317">filePC</span><span class="op" id="6281323">,</span>&nbsp;<span class="op" id="6281325">&amp;</span><span class="ident" id="6281326">fileVal</span><span class="op" id="6281333">,</span>&nbsp;<span class="ident" id="6281335">filePC</span>&nbsp;<span class="op" id="6281342">==</span>&nbsp;<span class="ident" id="6281345">entry</span><span class="op" id="6281350">)</span>&nbsp;<span class="op" id="6281352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281356">if</span>&nbsp;<span class="ident" id="6281359">fileVal</span>&nbsp;<span class="op" id="6281367">==</span>&nbsp;<span class="ident" id="6281370">filenum</span>&nbsp;<span class="op" id="6281378">&amp;&amp;</span>&nbsp;<span class="ident" id="6281381">fileStartPC</span>&nbsp;<span class="op" id="6281393">&lt;</span>&nbsp;<span class="ident" id="6281395">filePC</span>&nbsp;<span class="op" id="6281402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6281407">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6281464">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6281523">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6281581">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281613">lineStartPC</span>&nbsp;<span class="op" id="6281625">:=</span>&nbsp;<span class="ident" id="6281628">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281638">for</span>&nbsp;<span class="ident" id="6281642">linePC</span>&nbsp;<span class="op" id="6281649">&lt;</span>&nbsp;<span class="ident" id="6281651">filePC</span>&nbsp;<span class="op" id="6281658">&amp;&amp;</span>&nbsp;<span class="ident" id="6281661">t</span><span class="op" id="6281662">.</span><span class="ident" id="6281663">step</span><span class="op" id="6281667">(</span><span class="op" id="6281668">&amp;</span><span class="ident" id="6281669">fl</span><span class="op" id="6281671">,</span>&nbsp;<span class="op" id="6281673">&amp;</span><span class="ident" id="6281674">linePC</span><span class="op" id="6281680">,</span>&nbsp;<span class="op" id="6281682">&amp;</span><span class="ident" id="6281683">lineVal</span><span class="op" id="6281690">,</span>&nbsp;<span class="ident" id="6281692">linePC</span>&nbsp;<span class="op" id="6281699">==</span>&nbsp;<span class="ident" id="6281702">entry</span><span class="op" id="6281707">)</span>&nbsp;<span class="op" id="6281709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6281715">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281783">if</span>&nbsp;<span class="ident" id="6281786">lineVal</span>&nbsp;<span class="op" id="6281794">==</span>&nbsp;<span class="ident" id="6281797">line</span>&nbsp;<span class="op" id="6281802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281809">if</span>&nbsp;<span class="ident" id="6281812">fileStartPC</span>&nbsp;<span class="op" id="6281824">&lt;=</span>&nbsp;<span class="ident" id="6281827">lineStartPC</span>&nbsp;<span class="op" id="6281839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281847">return</span>&nbsp;<span class="ident" id="6281854">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281878">if</span>&nbsp;<span class="ident" id="6281881">fileStartPC</span>&nbsp;<span class="op" id="6281893">&lt;</span>&nbsp;<span class="ident" id="6281895">linePC</span>&nbsp;<span class="op" id="6281902">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6281910">return</span>&nbsp;<span class="ident" id="6281917">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281946">lineStartPC</span>&nbsp;<span class="op" id="6281958">=</span>&nbsp;<span class="ident" id="6281960">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281970">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6281974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6281978">fileStartPC</span>&nbsp;<span class="op" id="6281990">=</span>&nbsp;<span class="ident" id="6281992">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282003">return</span>&nbsp;<span class="num" id="6282010">0</span><br>
<span class="lineno"></span><span class="op" id="6282012">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6282015">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6282094">func</span>&nbsp;<span class="op" id="6282099">(</span><span class="ident" id="6282100">t</span>&nbsp;<span class="op" id="6282102">*</span><span class="ident" id="6282103">LineTable</span><span class="op" id="6282112">)</span>&nbsp;<span class="ident" id="6282114">go12PCToLine</span><span class="op" id="6282126">(</span><span class="ident" id="6282127">pc</span>&nbsp;<span class="ident" id="6282130">uint64</span><span class="op" id="6282136">)</span>&nbsp;<span class="op" id="6282138">(</span><span class="ident" id="6282139">line</span>&nbsp;<span class="builtintype" id="6282144">int</span><span class="op" id="6282147">)</span>&nbsp;<span class="op" id="6282149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282152">defer</span>&nbsp;<span class="keyword" id="6282158">func</span><span class="op" id="6282162">(</span><span class="op" id="6282163">)</span>&nbsp;<span class="op" id="6282165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282169">if</span>&nbsp;<span class="builtinfunc" id="6282172">recover</span><span class="op" id="6282179">(</span><span class="op" id="6282180">)</span>&nbsp;<span class="op" id="6282182">!=</span>&nbsp;<span class="builtintype" id="6282185">nil</span>&nbsp;<span class="op" id="6282189">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282194">line</span>&nbsp;<span class="op" id="6282199">=</span>&nbsp;<span class="op" id="6282201">-</span><span class="num" id="6282202">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282209">}</span><span class="op" id="6282210">(</span><span class="op" id="6282211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282215">f</span>&nbsp;<span class="op" id="6282217">:=</span>&nbsp;<span class="ident" id="6282220">t</span><span class="op" id="6282221">.</span><span class="ident" id="6282222">findFunc</span><span class="op" id="6282230">(</span><span class="ident" id="6282231">pc</span><span class="op" id="6282233">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282236">if</span>&nbsp;<span class="ident" id="6282239">f</span>&nbsp;<span class="op" id="6282241">==</span>&nbsp;<span class="builtintype" id="6282244">nil</span>&nbsp;<span class="op" id="6282248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282252">return</span>&nbsp;<span class="op" id="6282259">-</span><span class="num" id="6282260">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282266">entry</span>&nbsp;<span class="op" id="6282272">:=</span>&nbsp;<span class="ident" id="6282275">t</span><span class="op" id="6282276">.</span><span class="builtintype" id="6282277">uintptr</span><span class="op" id="6282284">(</span><span class="ident" id="6282285">f</span><span class="op" id="6282286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282289">linetab</span>&nbsp;<span class="op" id="6282297">:=</span>&nbsp;<span class="ident" id="6282300">t</span><span class="op" id="6282301">.</span><span class="ident" id="6282302">binary</span><span class="op" id="6282308">.</span><span class="ident" id="6282309">Uint32</span><span class="op" id="6282315">(</span><span class="ident" id="6282316">f</span><span class="op" id="6282317">[</span><span class="ident" id="6282318">t</span><span class="op" id="6282319">.</span><span class="ident" id="6282320">ptrsize</span><span class="op" id="6282327">+</span><span class="num" id="6282328">5</span><span class="op" id="6282329">*</span><span class="num" id="6282330">4</span><span class="op" id="6282331">:</span><span class="op" id="6282332">]</span><span class="op" id="6282333">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282336">return</span>&nbsp;<span class="builtintype" id="6282343">int</span><span class="op" id="6282346">(</span><span class="ident" id="6282347">t</span><span class="op" id="6282348">.</span><span class="ident" id="6282349">pcvalue</span><span class="op" id="6282356">(</span><span class="ident" id="6282357">linetab</span><span class="op" id="6282364">,</span>&nbsp;<span class="ident" id="6282366">entry</span><span class="op" id="6282371">,</span>&nbsp;<span class="ident" id="6282373">pc</span><span class="op" id="6282375">)</span><span class="op" id="6282376">)</span><br>
<span class="lineno"></span><span class="op" id="6282378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6282381">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6282458">func</span>&nbsp;<span class="op" id="6282463">(</span><span class="ident" id="6282464">t</span>&nbsp;<span class="op" id="6282466">*</span><span class="ident" id="6282467">LineTable</span><span class="op" id="6282476">)</span>&nbsp;<span class="ident" id="6282478">go12PCToFile</span><span class="op" id="6282490">(</span><span class="ident" id="6282491">pc</span>&nbsp;<span class="ident" id="6282494">uint64</span><span class="op" id="6282500">)</span>&nbsp;<span class="op" id="6282502">(</span><span class="ident" id="6282503">file</span>&nbsp;<span class="builtintype" id="6282508">string</span><span class="op" id="6282514">)</span>&nbsp;<span class="op" id="6282516">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282519">defer</span>&nbsp;<span class="keyword" id="6282525">func</span><span class="op" id="6282529">(</span><span class="op" id="6282530">)</span>&nbsp;<span class="op" id="6282532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282536">if</span>&nbsp;<span class="builtinfunc" id="6282539">recover</span><span class="op" id="6282546">(</span><span class="op" id="6282547">)</span>&nbsp;<span class="op" id="6282549">!=</span>&nbsp;<span class="builtintype" id="6282552">nil</span>&nbsp;<span class="op" id="6282556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282561">file</span>&nbsp;<span class="op" id="6282566">=</span>&nbsp;<span class="string" id="6282568">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282576">}</span><span class="op" id="6282577">(</span><span class="op" id="6282578">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282582">f</span>&nbsp;<span class="op" id="6282584">:=</span>&nbsp;<span class="ident" id="6282587">t</span><span class="op" id="6282588">.</span><span class="ident" id="6282589">findFunc</span><span class="op" id="6282597">(</span><span class="ident" id="6282598">pc</span><span class="op" id="6282600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282603">if</span>&nbsp;<span class="ident" id="6282606">f</span>&nbsp;<span class="op" id="6282608">==</span>&nbsp;<span class="builtintype" id="6282611">nil</span>&nbsp;<span class="op" id="6282615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282619">return</span>&nbsp;<span class="string" id="6282626">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282630">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282633">entry</span>&nbsp;<span class="op" id="6282639">:=</span>&nbsp;<span class="ident" id="6282642">t</span><span class="op" id="6282643">.</span><span class="builtintype" id="6282644">uintptr</span><span class="op" id="6282651">(</span><span class="ident" id="6282652">f</span><span class="op" id="6282653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282656">filetab</span>&nbsp;<span class="op" id="6282664">:=</span>&nbsp;<span class="ident" id="6282667">t</span><span class="op" id="6282668">.</span><span class="ident" id="6282669">binary</span><span class="op" id="6282675">.</span><span class="ident" id="6282676">Uint32</span><span class="op" id="6282682">(</span><span class="ident" id="6282683">f</span><span class="op" id="6282684">[</span><span class="ident" id="6282685">t</span><span class="op" id="6282686">.</span><span class="ident" id="6282687">ptrsize</span><span class="op" id="6282694">+</span><span class="num" id="6282695">4</span><span class="op" id="6282696">*</span><span class="num" id="6282697">4</span><span class="op" id="6282698">:</span><span class="op" id="6282699">]</span><span class="op" id="6282700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6282703">fno</span>&nbsp;<span class="op" id="6282707">:=</span>&nbsp;<span class="ident" id="6282710">t</span><span class="op" id="6282711">.</span><span class="ident" id="6282712">pcvalue</span><span class="op" id="6282719">(</span><span class="ident" id="6282720">filetab</span><span class="op" id="6282727">,</span>&nbsp;<span class="ident" id="6282729">entry</span><span class="op" id="6282734">,</span>&nbsp;<span class="ident" id="6282736">pc</span><span class="op" id="6282738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282741">if</span>&nbsp;<span class="ident" id="6282744">fno</span>&nbsp;<span class="op" id="6282748">&lt;=</span>&nbsp;<span class="num" id="6282751">0</span>&nbsp;<span class="op" id="6282753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282757">return</span>&nbsp;<span class="string" id="6282764">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6282768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282771">return</span>&nbsp;<span class="ident" id="6282778">t</span><span class="op" id="6282779">.</span><span class="builtintype" id="6282780">string</span><span class="op" id="6282786">(</span><span class="ident" id="6282787">t</span><span class="op" id="6282788">.</span><span class="ident" id="6282789">binary</span><span class="op" id="6282795">.</span><span class="ident" id="6282796">Uint32</span><span class="op" id="6282802">(</span><span class="ident" id="6282803">t</span><span class="op" id="6282804">.</span><span class="ident" id="6282805">filetab</span><span class="op" id="6282812">[</span><span class="num" id="6282813">4</span><span class="op" id="6282814">*</span><span class="ident" id="6282815">fno</span><span class="op" id="6282818">:</span><span class="op" id="6282819">]</span><span class="op" id="6282820">)</span><span class="op" id="6282821">)</span><br>
<span class="lineno"></span><span class="op" id="6282823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6282826">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6282915">func</span>&nbsp;<span class="op" id="6282920">(</span><span class="ident" id="6282921">t</span>&nbsp;<span class="op" id="6282923">*</span><span class="ident" id="6282924">LineTable</span><span class="op" id="6282933">)</span>&nbsp;<span class="ident" id="6282935">go12LineToPC</span><span class="op" id="6282947">(</span><span class="ident" id="6282948">file</span>&nbsp;<span class="builtintype" id="6282953">string</span><span class="op" id="6282959">,</span>&nbsp;<span class="ident" id="6282961">line</span>&nbsp;<span class="builtintype" id="6282966">int</span><span class="op" id="6282969">)</span>&nbsp;<span class="op" id="6282971">(</span><span class="ident" id="6282972">pc</span>&nbsp;<span class="ident" id="6282975">uint64</span><span class="op" id="6282981">)</span>&nbsp;<span class="op" id="6282983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6282986">defer</span>&nbsp;<span class="keyword" id="6282992">func</span><span class="op" id="6282996">(</span><span class="op" id="6282997">)</span>&nbsp;<span class="op" id="6282999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283003">if</span>&nbsp;<span class="builtinfunc" id="6283006">recover</span><span class="op" id="6283013">(</span><span class="op" id="6283014">)</span>&nbsp;<span class="op" id="6283016">!=</span>&nbsp;<span class="builtintype" id="6283019">nil</span>&nbsp;<span class="op" id="6283023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283028">pc</span>&nbsp;<span class="op" id="6283031">=</span>&nbsp;<span class="num" id="6283033">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283037">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283040">}</span><span class="op" id="6283041">(</span><span class="op" id="6283042">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283046">t</span><span class="op" id="6283047">.</span><span class="ident" id="6283048">initFileMap</span><span class="op" id="6283059">(</span><span class="op" id="6283060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283063">filenum</span>&nbsp;<span class="op" id="6283071">:=</span>&nbsp;<span class="ident" id="6283074">t</span><span class="op" id="6283075">.</span><span class="ident" id="6283076">fileMap</span><span class="op" id="6283083">[</span><span class="ident" id="6283084">file</span><span class="op" id="6283088">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283091">if</span>&nbsp;<span class="ident" id="6283094">filenum</span>&nbsp;<span class="op" id="6283102">==</span>&nbsp;<span class="num" id="6283105">0</span>&nbsp;<span class="op" id="6283107">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283111">return</span>&nbsp;<span class="num" id="6283118">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6283125">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6283149">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6283226">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283299">for</span>&nbsp;<span class="ident" id="6283303">i</span>&nbsp;<span class="op" id="6283305">:=</span>&nbsp;<span class="builtintype" id="6283308">uint32</span><span class="op" id="6283314">(</span><span class="num" id="6283315">0</span><span class="op" id="6283316">)</span><span class="op" id="6283317">;</span>&nbsp;<span class="ident" id="6283319">i</span>&nbsp;<span class="op" id="6283321">&lt;</span>&nbsp;<span class="ident" id="6283323">t</span><span class="op" id="6283324">.</span><span class="ident" id="6283325">nfunctab</span><span class="op" id="6283333">;</span>&nbsp;<span class="ident" id="6283335">i</span><span class="op" id="6283336">++</span>&nbsp;<span class="op" id="6283339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283343">f</span>&nbsp;<span class="op" id="6283345">:=</span>&nbsp;<span class="ident" id="6283348">t</span><span class="op" id="6283349">.</span><span class="ident" id="6283350">Data</span><span class="op" id="6283354">[</span><span class="ident" id="6283355">t</span><span class="op" id="6283356">.</span><span class="builtintype" id="6283357">uintptr</span><span class="op" id="6283364">(</span><span class="ident" id="6283365">t</span><span class="op" id="6283366">.</span><span class="ident" id="6283367">functab</span><span class="op" id="6283374">[</span><span class="num" id="6283375">2</span><span class="op" id="6283376">*</span><span class="ident" id="6283377">t</span><span class="op" id="6283378">.</span><span class="ident" id="6283379">ptrsize</span><span class="op" id="6283386">*</span><span class="ident" id="6283387">i</span><span class="op" id="6283388">+</span><span class="ident" id="6283389">t</span><span class="op" id="6283390">.</span><span class="ident" id="6283391">ptrsize</span><span class="op" id="6283398">:</span><span class="op" id="6283399">]</span><span class="op" id="6283400">)</span><span class="op" id="6283401">:</span><span class="op" id="6283402">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283406">entry</span>&nbsp;<span class="op" id="6283412">:=</span>&nbsp;<span class="ident" id="6283415">t</span><span class="op" id="6283416">.</span><span class="builtintype" id="6283417">uintptr</span><span class="op" id="6283424">(</span><span class="ident" id="6283425">f</span><span class="op" id="6283426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283430">filetab</span>&nbsp;<span class="op" id="6283438">:=</span>&nbsp;<span class="ident" id="6283441">t</span><span class="op" id="6283442">.</span><span class="ident" id="6283443">binary</span><span class="op" id="6283449">.</span><span class="ident" id="6283450">Uint32</span><span class="op" id="6283456">(</span><span class="ident" id="6283457">f</span><span class="op" id="6283458">[</span><span class="ident" id="6283459">t</span><span class="op" id="6283460">.</span><span class="ident" id="6283461">ptrsize</span><span class="op" id="6283468">+</span><span class="num" id="6283469">4</span><span class="op" id="6283470">*</span><span class="num" id="6283471">4</span><span class="op" id="6283472">:</span><span class="op" id="6283473">]</span><span class="op" id="6283474">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283478">linetab</span>&nbsp;<span class="op" id="6283486">:=</span>&nbsp;<span class="ident" id="6283489">t</span><span class="op" id="6283490">.</span><span class="ident" id="6283491">binary</span><span class="op" id="6283497">.</span><span class="ident" id="6283498">Uint32</span><span class="op" id="6283504">(</span><span class="ident" id="6283505">f</span><span class="op" id="6283506">[</span><span class="ident" id="6283507">t</span><span class="op" id="6283508">.</span><span class="ident" id="6283509">ptrsize</span><span class="op" id="6283516">+</span><span class="num" id="6283517">5</span><span class="op" id="6283518">*</span><span class="num" id="6283519">4</span><span class="op" id="6283520">:</span><span class="op" id="6283521">]</span><span class="op" id="6283522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283526">pc</span>&nbsp;<span class="op" id="6283529">:=</span>&nbsp;<span class="ident" id="6283532">t</span><span class="op" id="6283533">.</span><span class="ident" id="6283534">findFileLine</span><span class="op" id="6283546">(</span><span class="ident" id="6283547">entry</span><span class="op" id="6283552">,</span>&nbsp;<span class="ident" id="6283554">filetab</span><span class="op" id="6283561">,</span>&nbsp;<span class="ident" id="6283563">linetab</span><span class="op" id="6283570">,</span>&nbsp;<span class="builtintype" id="6283572">int32</span><span class="op" id="6283577">(</span><span class="ident" id="6283578">filenum</span><span class="op" id="6283585">)</span><span class="op" id="6283586">,</span>&nbsp;<span class="builtintype" id="6283588">int32</span><span class="op" id="6283593">(</span><span class="ident" id="6283594">line</span><span class="op" id="6283598">)</span><span class="op" id="6283599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283603">if</span>&nbsp;<span class="ident" id="6283606">pc</span>&nbsp;<span class="op" id="6283609">!=</span>&nbsp;<span class="num" id="6283612">0</span>&nbsp;<span class="op" id="6283614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283619">return</span>&nbsp;<span class="ident" id="6283626">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283631">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283637">return</span>&nbsp;<span class="num" id="6283644">0</span><br>
<span class="lineno"></span><span class="op" id="6283646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6283649">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6283715">func</span>&nbsp;<span class="op" id="6283720">(</span><span class="ident" id="6283721">t</span>&nbsp;<span class="op" id="6283723">*</span><span class="ident" id="6283724">LineTable</span><span class="op" id="6283733">)</span>&nbsp;<span class="ident" id="6283735">initFileMap</span><span class="op" id="6283746">(</span><span class="op" id="6283747">)</span>&nbsp;<span class="op" id="6283749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283752">t</span><span class="op" id="6283753">.</span><span class="ident" id="6283754">mu</span><span class="op" id="6283756">.</span><span class="ident" id="6283757">Lock</span><span class="op" id="6283761">(</span><span class="op" id="6283762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283765">defer</span>&nbsp;<span class="ident" id="6283771">t</span><span class="op" id="6283772">.</span><span class="ident" id="6283773">mu</span><span class="op" id="6283775">.</span><span class="ident" id="6283776">Unlock</span><span class="op" id="6283782">(</span><span class="op" id="6283783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283787">if</span>&nbsp;<span class="ident" id="6283790">t</span><span class="op" id="6283791">.</span><span class="ident" id="6283792">fileMap</span>&nbsp;<span class="op" id="6283800">!=</span>&nbsp;<span class="builtintype" id="6283803">nil</span>&nbsp;<span class="op" id="6283807">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283811">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283822">m</span>&nbsp;<span class="op" id="6283824">:=</span>&nbsp;<span class="builtinfunc" id="6283827">make</span><span class="op" id="6283831">(</span><span class="keyword" id="6283832">map</span><span class="op" id="6283835">[</span><span class="builtintype" id="6283836">string</span><span class="op" id="6283842">]</span><span class="builtintype" id="6283843">uint32</span><span class="op" id="6283849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6283853">for</span>&nbsp;<span class="ident" id="6283857">i</span>&nbsp;<span class="op" id="6283859">:=</span>&nbsp;<span class="builtintype" id="6283862">uint32</span><span class="op" id="6283868">(</span><span class="num" id="6283869">1</span><span class="op" id="6283870">)</span><span class="op" id="6283871">;</span>&nbsp;<span class="ident" id="6283873">i</span>&nbsp;<span class="op" id="6283875">&lt;</span>&nbsp;<span class="ident" id="6283877">t</span><span class="op" id="6283878">.</span><span class="ident" id="6283879">nfiletab</span><span class="op" id="6283887">;</span>&nbsp;<span class="ident" id="6283889">i</span><span class="op" id="6283890">++</span>&nbsp;<span class="op" id="6283893">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283897">s</span>&nbsp;<span class="op" id="6283899">:=</span>&nbsp;<span class="ident" id="6283902">t</span><span class="op" id="6283903">.</span><span class="builtintype" id="6283904">string</span><span class="op" id="6283910">(</span><span class="ident" id="6283911">t</span><span class="op" id="6283912">.</span><span class="ident" id="6283913">binary</span><span class="op" id="6283919">.</span><span class="ident" id="6283920">Uint32</span><span class="op" id="6283926">(</span><span class="ident" id="6283927">t</span><span class="op" id="6283928">.</span><span class="ident" id="6283929">filetab</span><span class="op" id="6283936">[</span><span class="num" id="6283937">4</span><span class="op" id="6283938">*</span><span class="ident" id="6283939">i</span><span class="op" id="6283940">:</span><span class="op" id="6283941">]</span><span class="op" id="6283942">)</span><span class="op" id="6283943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283947">m</span><span class="op" id="6283948">[</span><span class="ident" id="6283949">s</span><span class="op" id="6283950">]</span>&nbsp;<span class="op" id="6283952">=</span>&nbsp;<span class="ident" id="6283954">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6283957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6283960">t</span><span class="op" id="6283961">.</span><span class="ident" id="6283962">fileMap</span>&nbsp;<span class="op" id="6283970">=</span>&nbsp;<span class="ident" id="6283972">m</span><br>
<span class="lineno"></span><span class="op" id="6283974">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6283977">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6284049">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6284126">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6284191">func</span>&nbsp;<span class="op" id="6284196">(</span><span class="ident" id="6284197">t</span>&nbsp;<span class="op" id="6284199">*</span><span class="ident" id="6284200">LineTable</span><span class="op" id="6284209">)</span>&nbsp;<span class="ident" id="6284211">go12MapFiles</span><span class="op" id="6284223">(</span><span class="ident" id="6284224">m</span>&nbsp;<span class="keyword" id="6284226">map</span><span class="op" id="6284229">[</span><span class="builtintype" id="6284230">string</span><span class="op" id="6284236">]</span><span class="op" id="6284237">*</span><span class="ident" id="6284238">Obj</span><span class="op" id="6284241">,</span>&nbsp;<span class="ident" id="6284243">obj</span>&nbsp;<span class="op" id="6284247">*</span><span class="ident" id="6284248">Obj</span><span class="op" id="6284251">)</span>&nbsp;<span class="op" id="6284253">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6284256">defer</span>&nbsp;<span class="keyword" id="6284262">func</span><span class="op" id="6284266">(</span><span class="op" id="6284267">)</span>&nbsp;<span class="op" id="6284269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6284273">recover</span><span class="op" id="6284280">(</span><span class="op" id="6284281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6284284">}</span><span class="op" id="6284285">(</span><span class="op" id="6284286">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284290">t</span><span class="op" id="6284291">.</span><span class="ident" id="6284292">initFileMap</span><span class="op" id="6284303">(</span><span class="op" id="6284304">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6284307">for</span>&nbsp;<span class="ident" id="6284311">file</span>&nbsp;<span class="op" id="6284316">:=</span>&nbsp;<span class="keyword" id="6284319">range</span>&nbsp;<span class="ident" id="6284325">t</span><span class="op" id="6284326">.</span><span class="ident" id="6284327">fileMap</span>&nbsp;<span class="op" id="6284335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284339">m</span><span class="op" id="6284340">[</span><span class="ident" id="6284341">file</span><span class="op" id="6284345">]</span>&nbsp;<span class="op" id="6284347">=</span>&nbsp;<span class="ident" id="6284349">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6284354">}</span><br>
<span class="lineno"></span><span class="op" id="6284356">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
