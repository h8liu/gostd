<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2623741">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2623796">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2623850">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2623901">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2623973">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2623989">package</span>&nbsp;<span class="ident" id="2623997">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624003">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2624075">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2624148">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2624213">type</span>&nbsp;<span class="ident" id="2624218">Interface</span>&nbsp;<span class="keyword" id="2624228">interface</span>&nbsp;<span class="op" id="2624238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624241">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624294">Len</span><span class="op" id="2624297">(</span><span class="op" id="2624298">)</span>&nbsp;<span class="builtintype" id="2624300">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624305">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624347">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624404">Less</span><span class="op" id="2624408">(</span><span class="ident" id="2624409">i</span><span class="op" id="2624410">,</span>&nbsp;<span class="ident" id="2624412">j</span>&nbsp;<span class="builtintype" id="2624414">int</span><span class="op" id="2624417">)</span>&nbsp;<span class="builtintype" id="2624419">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624425">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624475">Swap</span><span class="op" id="2624479">(</span><span class="ident" id="2624480">i</span><span class="op" id="2624481">,</span>&nbsp;<span class="ident" id="2624483">j</span>&nbsp;<span class="builtintype" id="2624485">int</span><span class="op" id="2624488">)</span><br>
<span class="lineno">20</span><span class="op" id="2624490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2624493">func</span>&nbsp;<span class="ident" id="2624498">min</span><span class="op" id="2624501">(</span><span class="ident" id="2624502">a</span><span class="op" id="2624503">,</span>&nbsp;<span class="ident" id="2624505">b</span>&nbsp;<span class="builtintype" id="2624507">int</span><span class="op" id="2624510">)</span>&nbsp;<span class="builtintype" id="2624512">int</span>&nbsp;<span class="op" id="2624516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624519">if</span>&nbsp;<span class="ident" id="2624522">a</span>&nbsp;<span class="op" id="2624524">&lt;</span>&nbsp;<span class="ident" id="2624526">b</span>&nbsp;<span class="op" id="2624528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624532">return</span>&nbsp;<span class="ident" id="2624539">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624545">return</span>&nbsp;<span class="ident" id="2624552">b</span><br>
<span class="lineno"></span><span class="op" id="2624554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624557">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2624575">func</span>&nbsp;<span class="ident" id="2624580">insertionSort</span><span class="op" id="2624593">(</span><span class="ident" id="2624594">data</span>&nbsp;<span class="ident" id="2624599">Interface</span><span class="op" id="2624608">,</span>&nbsp;<span class="ident" id="2624610">a</span><span class="op" id="2624611">,</span>&nbsp;<span class="ident" id="2624613">b</span>&nbsp;<span class="builtintype" id="2624615">int</span><span class="op" id="2624618">)</span>&nbsp;<span class="op" id="2624620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624623">for</span>&nbsp;<span class="ident" id="2624627">i</span>&nbsp;<span class="op" id="2624629">:=</span>&nbsp;<span class="ident" id="2624632">a</span>&nbsp;<span class="op" id="2624634">+</span>&nbsp;<span class="num" id="2624636">1</span><span class="op" id="2624637">;</span>&nbsp;<span class="ident" id="2624639">i</span>&nbsp;<span class="op" id="2624641">&lt;</span>&nbsp;<span class="ident" id="2624643">b</span><span class="op" id="2624644">;</span>&nbsp;<span class="ident" id="2624646">i</span><span class="op" id="2624647">++</span>&nbsp;<span class="op" id="2624650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624654">for</span>&nbsp;<span class="ident" id="2624658">j</span>&nbsp;<span class="op" id="2624660">:=</span>&nbsp;<span class="ident" id="2624663">i</span><span class="op" id="2624664">;</span>&nbsp;<span class="ident" id="2624666">j</span>&nbsp;<span class="op" id="2624668">&gt;</span>&nbsp;<span class="ident" id="2624670">a</span>&nbsp;<span class="op" id="2624672">&amp;&amp;</span>&nbsp;<span class="ident" id="2624675">data</span><span class="op" id="2624679">.</span><span class="ident" id="2624680">Less</span><span class="op" id="2624684">(</span><span class="ident" id="2624685">j</span><span class="op" id="2624686">,</span>&nbsp;<span class="ident" id="2624688">j</span><span class="op" id="2624689">-</span><span class="num" id="2624690">1</span><span class="op" id="2624691">)</span><span class="op" id="2624692">;</span>&nbsp;<span class="ident" id="2624694">j</span><span class="op" id="2624695">--</span>&nbsp;<span class="op" id="2624698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624703">data</span><span class="op" id="2624707">.</span><span class="ident" id="2624708">Swap</span><span class="op" id="2624712">(</span><span class="ident" id="2624713">j</span><span class="op" id="2624714">,</span>&nbsp;<span class="ident" id="2624716">j</span><span class="op" id="2624717">-</span><span class="num" id="2624718">1</span><span class="op" id="2624719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624723">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624726">}</span><br>
<span class="lineno"></span><span class="op" id="2624728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624731">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2624789">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2624859">func</span>&nbsp;<span class="ident" id="2624864">siftDown</span><span class="op" id="2624872">(</span><span class="ident" id="2624873">data</span>&nbsp;<span class="ident" id="2624878">Interface</span><span class="op" id="2624887">,</span>&nbsp;<span class="ident" id="2624889">lo</span><span class="op" id="2624891">,</span>&nbsp;<span class="ident" id="2624893">hi</span><span class="op" id="2624895">,</span>&nbsp;<span class="ident" id="2624897">first</span>&nbsp;<span class="builtintype" id="2624903">int</span><span class="op" id="2624906">)</span>&nbsp;<span class="op" id="2624908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624911">root</span>&nbsp;<span class="op" id="2624916">:=</span>&nbsp;<span class="ident" id="2624919">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624923">for</span>&nbsp;<span class="op" id="2624927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624931">child</span>&nbsp;<span class="op" id="2624937">:=</span>&nbsp;<span class="num" id="2624940">2</span><span class="op" id="2624941">*</span><span class="ident" id="2624942">root</span>&nbsp;<span class="op" id="2624947">+</span>&nbsp;<span class="num" id="2624949">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624953">if</span>&nbsp;<span class="ident" id="2624956">child</span>&nbsp;<span class="op" id="2624962">&gt;=</span>&nbsp;<span class="ident" id="2624965">hi</span>&nbsp;<span class="op" id="2624968">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624973">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624985">if</span>&nbsp;<span class="ident" id="2624988">child</span><span class="op" id="2624993">+</span><span class="num" id="2624994">1</span>&nbsp;<span class="op" id="2624996">&lt;</span>&nbsp;<span class="ident" id="2624998">hi</span>&nbsp;<span class="op" id="2625001">&amp;&amp;</span>&nbsp;<span class="ident" id="2625004">data</span><span class="op" id="2625008">.</span><span class="ident" id="2625009">Less</span><span class="op" id="2625013">(</span><span class="ident" id="2625014">first</span><span class="op" id="2625019">+</span><span class="ident" id="2625020">child</span><span class="op" id="2625025">,</span>&nbsp;<span class="ident" id="2625027">first</span><span class="op" id="2625032">+</span><span class="ident" id="2625033">child</span><span class="op" id="2625038">+</span><span class="num" id="2625039">1</span><span class="op" id="2625040">)</span>&nbsp;<span class="op" id="2625042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625047">child</span><span class="op" id="2625052">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625057">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625061">if</span>&nbsp;<span class="op" id="2625064">!</span><span class="ident" id="2625065">data</span><span class="op" id="2625069">.</span><span class="ident" id="2625070">Less</span><span class="op" id="2625074">(</span><span class="ident" id="2625075">first</span><span class="op" id="2625080">+</span><span class="ident" id="2625081">root</span><span class="op" id="2625085">,</span>&nbsp;<span class="ident" id="2625087">first</span><span class="op" id="2625092">+</span><span class="ident" id="2625093">child</span><span class="op" id="2625098">)</span>&nbsp;<span class="op" id="2625100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625105">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625118">data</span><span class="op" id="2625122">.</span><span class="ident" id="2625123">Swap</span><span class="op" id="2625127">(</span><span class="ident" id="2625128">first</span><span class="op" id="2625133">+</span><span class="ident" id="2625134">root</span><span class="op" id="2625138">,</span>&nbsp;<span class="ident" id="2625140">first</span><span class="op" id="2625145">+</span><span class="ident" id="2625146">child</span><span class="op" id="2625151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625155">root</span>&nbsp;<span class="op" id="2625160">=</span>&nbsp;<span class="ident" id="2625162">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625169">}</span><br>
<span class="lineno"></span><span class="op" id="2625171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2625174">func</span>&nbsp;<span class="ident" id="2625179">heapSort</span><span class="op" id="2625187">(</span><span class="ident" id="2625188">data</span>&nbsp;<span class="ident" id="2625193">Interface</span><span class="op" id="2625202">,</span>&nbsp;<span class="ident" id="2625204">a</span><span class="op" id="2625205">,</span>&nbsp;<span class="ident" id="2625207">b</span>&nbsp;<span class="builtintype" id="2625209">int</span><span class="op" id="2625212">)</span>&nbsp;<span class="op" id="2625214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625217">first</span>&nbsp;<span class="op" id="2625223">:=</span>&nbsp;<span class="ident" id="2625226">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625229">lo</span>&nbsp;<span class="op" id="2625232">:=</span>&nbsp;<span class="num" id="2625235">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625238">hi</span>&nbsp;<span class="op" id="2625241">:=</span>&nbsp;<span class="ident" id="2625244">b</span>&nbsp;<span class="op" id="2625246">-</span>&nbsp;<span class="ident" id="2625248">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625252">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625297">for</span>&nbsp;<span class="ident" id="2625301">i</span>&nbsp;<span class="op" id="2625303">:=</span>&nbsp;<span class="op" id="2625306">(</span><span class="ident" id="2625307">hi</span>&nbsp;<span class="op" id="2625310">-</span>&nbsp;<span class="num" id="2625312">1</span><span class="op" id="2625313">)</span>&nbsp;<span class="op" id="2625315">/</span>&nbsp;<span class="num" id="2625317">2</span><span class="op" id="2625318">;</span>&nbsp;<span class="ident" id="2625320">i</span>&nbsp;<span class="op" id="2625322">&gt;=</span>&nbsp;<span class="num" id="2625325">0</span><span class="op" id="2625326">;</span>&nbsp;<span class="ident" id="2625328">i</span><span class="op" id="2625329">--</span>&nbsp;<span class="op" id="2625332">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625336">siftDown</span><span class="op" id="2625344">(</span><span class="ident" id="2625345">data</span><span class="op" id="2625349">,</span>&nbsp;<span class="ident" id="2625351">i</span><span class="op" id="2625352">,</span>&nbsp;<span class="ident" id="2625354">hi</span><span class="op" id="2625356">,</span>&nbsp;<span class="ident" id="2625358">first</span><span class="op" id="2625363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625370">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625421">for</span>&nbsp;<span class="ident" id="2625425">i</span>&nbsp;<span class="op" id="2625427">:=</span>&nbsp;<span class="ident" id="2625430">hi</span>&nbsp;<span class="op" id="2625433">-</span>&nbsp;<span class="num" id="2625435">1</span><span class="op" id="2625436">;</span>&nbsp;<span class="ident" id="2625438">i</span>&nbsp;<span class="op" id="2625440">&gt;=</span>&nbsp;<span class="num" id="2625443">0</span><span class="op" id="2625444">;</span>&nbsp;<span class="ident" id="2625446">i</span><span class="op" id="2625447">--</span>&nbsp;<span class="op" id="2625450">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625454">data</span><span class="op" id="2625458">.</span><span class="ident" id="2625459">Swap</span><span class="op" id="2625463">(</span><span class="ident" id="2625464">first</span><span class="op" id="2625469">,</span>&nbsp;<span class="ident" id="2625471">first</span><span class="op" id="2625476">+</span><span class="ident" id="2625477">i</span><span class="op" id="2625478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625482">siftDown</span><span class="op" id="2625490">(</span><span class="ident" id="2625491">data</span><span class="op" id="2625495">,</span>&nbsp;<span class="ident" id="2625497">lo</span><span class="op" id="2625499">,</span>&nbsp;<span class="ident" id="2625501">i</span><span class="op" id="2625502">,</span>&nbsp;<span class="ident" id="2625504">first</span><span class="op" id="2625509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625512">}</span><br>
<span class="lineno"></span><span class="op" id="2625514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2625517">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2625562">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2625619">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2625713">func</span>&nbsp;<span class="ident" id="2625718">medianOfThree</span><span class="op" id="2625731">(</span><span class="ident" id="2625732">data</span>&nbsp;<span class="ident" id="2625737">Interface</span><span class="op" id="2625746">,</span>&nbsp;<span class="ident" id="2625748">a</span><span class="op" id="2625749">,</span>&nbsp;<span class="ident" id="2625751">b</span><span class="op" id="2625752">,</span>&nbsp;<span class="ident" id="2625754">c</span>&nbsp;<span class="builtintype" id="2625756">int</span><span class="op" id="2625759">)</span>&nbsp;<span class="op" id="2625761">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625764">m0</span>&nbsp;<span class="op" id="2625767">:=</span>&nbsp;<span class="ident" id="2625770">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625773">m1</span>&nbsp;<span class="op" id="2625776">:=</span>&nbsp;<span class="ident" id="2625779">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625782">m2</span>&nbsp;<span class="op" id="2625785">:=</span>&nbsp;<span class="ident" id="2625788">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625791">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625821">if</span>&nbsp;<span class="ident" id="2625824">data</span><span class="op" id="2625828">.</span><span class="ident" id="2625829">Less</span><span class="op" id="2625833">(</span><span class="ident" id="2625834">m1</span><span class="op" id="2625836">,</span>&nbsp;<span class="ident" id="2625838">m0</span><span class="op" id="2625840">)</span>&nbsp;<span class="op" id="2625842">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625846">data</span><span class="op" id="2625850">.</span><span class="ident" id="2625851">Swap</span><span class="op" id="2625855">(</span><span class="ident" id="2625856">m1</span><span class="op" id="2625858">,</span>&nbsp;<span class="ident" id="2625860">m0</span><span class="op" id="2625862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625868">if</span>&nbsp;<span class="ident" id="2625871">data</span><span class="op" id="2625875">.</span><span class="ident" id="2625876">Less</span><span class="op" id="2625880">(</span><span class="ident" id="2625881">m2</span><span class="op" id="2625883">,</span>&nbsp;<span class="ident" id="2625885">m1</span><span class="op" id="2625887">)</span>&nbsp;<span class="op" id="2625889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625893">data</span><span class="op" id="2625897">.</span><span class="ident" id="2625898">Swap</span><span class="op" id="2625902">(</span><span class="ident" id="2625903">m2</span><span class="op" id="2625905">,</span>&nbsp;<span class="ident" id="2625907">m1</span><span class="op" id="2625909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625912">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625915">if</span>&nbsp;<span class="ident" id="2625918">data</span><span class="op" id="2625922">.</span><span class="ident" id="2625923">Less</span><span class="op" id="2625927">(</span><span class="ident" id="2625928">m1</span><span class="op" id="2625930">,</span>&nbsp;<span class="ident" id="2625932">m0</span><span class="op" id="2625934">)</span>&nbsp;<span class="op" id="2625936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625940">data</span><span class="op" id="2625944">.</span><span class="ident" id="2625945">Swap</span><span class="op" id="2625949">(</span><span class="ident" id="2625950">m1</span><span class="op" id="2625952">,</span>&nbsp;<span class="ident" id="2625954">m0</span><span class="op" id="2625956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625962">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2626002">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2626005">func</span>&nbsp;<span class="ident" id="2626010">swapRange</span><span class="op" id="2626019">(</span><span class="ident" id="2626020">data</span>&nbsp;<span class="ident" id="2626025">Interface</span><span class="op" id="2626034">,</span>&nbsp;<span class="ident" id="2626036">a</span><span class="op" id="2626037">,</span>&nbsp;<span class="ident" id="2626039">b</span><span class="op" id="2626040">,</span>&nbsp;<span class="ident" id="2626042">n</span>&nbsp;<span class="builtintype" id="2626044">int</span><span class="op" id="2626047">)</span>&nbsp;<span class="op" id="2626049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626052">for</span>&nbsp;<span class="ident" id="2626056">i</span>&nbsp;<span class="op" id="2626058">:=</span>&nbsp;<span class="num" id="2626061">0</span><span class="op" id="2626062">;</span>&nbsp;<span class="ident" id="2626064">i</span>&nbsp;<span class="op" id="2626066">&lt;</span>&nbsp;<span class="ident" id="2626068">n</span><span class="op" id="2626069">;</span>&nbsp;<span class="ident" id="2626071">i</span><span class="op" id="2626072">++</span>&nbsp;<span class="op" id="2626075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626079">data</span><span class="op" id="2626083">.</span><span class="ident" id="2626084">Swap</span><span class="op" id="2626088">(</span><span class="ident" id="2626089">a</span><span class="op" id="2626090">+</span><span class="ident" id="2626091">i</span><span class="op" id="2626092">,</span>&nbsp;<span class="ident" id="2626094">b</span><span class="op" id="2626095">+</span><span class="ident" id="2626096">i</span><span class="op" id="2626097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626100">}</span><br>
<span class="lineno">100</span><span class="op" id="2626102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2626105">func</span>&nbsp;<span class="ident" id="2626110">doPivot</span><span class="op" id="2626117">(</span><span class="ident" id="2626118">data</span>&nbsp;<span class="ident" id="2626123">Interface</span><span class="op" id="2626132">,</span>&nbsp;<span class="ident" id="2626134">lo</span><span class="op" id="2626136">,</span>&nbsp;<span class="ident" id="2626138">hi</span>&nbsp;<span class="builtintype" id="2626141">int</span><span class="op" id="2626144">)</span>&nbsp;<span class="op" id="2626146">(</span><span class="ident" id="2626147">midlo</span><span class="op" id="2626152">,</span>&nbsp;<span class="ident" id="2626154">midhi</span>&nbsp;<span class="builtintype" id="2626160">int</span><span class="op" id="2626163">)</span>&nbsp;<span class="op" id="2626165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626168">m</span>&nbsp;<span class="op" id="2626170">:=</span>&nbsp;<span class="ident" id="2626173">lo</span>&nbsp;<span class="op" id="2626176">+</span>&nbsp;<span class="op" id="2626178">(</span><span class="ident" id="2626179">hi</span><span class="op" id="2626181">-</span><span class="ident" id="2626182">lo</span><span class="op" id="2626184">)</span><span class="op" id="2626185">/</span><span class="num" id="2626186">2</span>&nbsp;<span class="comment" id="2626188">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626237">if</span>&nbsp;<span class="ident" id="2626240">hi</span><span class="op" id="2626242">-</span><span class="ident" id="2626243">lo</span>&nbsp;<span class="op" id="2626246">&gt;</span>&nbsp;<span class="num" id="2626248">40</span>&nbsp;<span class="op" id="2626251">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626255">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626315">s</span>&nbsp;<span class="op" id="2626317">:=</span>&nbsp;<span class="op" id="2626320">(</span><span class="ident" id="2626321">hi</span>&nbsp;<span class="op" id="2626324">-</span>&nbsp;<span class="ident" id="2626326">lo</span><span class="op" id="2626328">)</span>&nbsp;<span class="op" id="2626330">/</span>&nbsp;<span class="num" id="2626332">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626336">medianOfThree</span><span class="op" id="2626349">(</span><span class="ident" id="2626350">data</span><span class="op" id="2626354">,</span>&nbsp;<span class="ident" id="2626356">lo</span><span class="op" id="2626358">,</span>&nbsp;<span class="ident" id="2626360">lo</span><span class="op" id="2626362">+</span><span class="ident" id="2626363">s</span><span class="op" id="2626364">,</span>&nbsp;<span class="ident" id="2626366">lo</span><span class="op" id="2626368">+</span><span class="num" id="2626369">2</span><span class="op" id="2626370">*</span><span class="ident" id="2626371">s</span><span class="op" id="2626372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626376">medianOfThree</span><span class="op" id="2626389">(</span><span class="ident" id="2626390">data</span><span class="op" id="2626394">,</span>&nbsp;<span class="ident" id="2626396">m</span><span class="op" id="2626397">,</span>&nbsp;<span class="ident" id="2626399">m</span><span class="op" id="2626400">-</span><span class="ident" id="2626401">s</span><span class="op" id="2626402">,</span>&nbsp;<span class="ident" id="2626404">m</span><span class="op" id="2626405">+</span><span class="ident" id="2626406">s</span><span class="op" id="2626407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626411">medianOfThree</span><span class="op" id="2626424">(</span><span class="ident" id="2626425">data</span><span class="op" id="2626429">,</span>&nbsp;<span class="ident" id="2626431">hi</span><span class="op" id="2626433">-</span><span class="num" id="2626434">1</span><span class="op" id="2626435">,</span>&nbsp;<span class="ident" id="2626437">hi</span><span class="op" id="2626439">-</span><span class="num" id="2626440">1</span><span class="op" id="2626441">-</span><span class="ident" id="2626442">s</span><span class="op" id="2626443">,</span>&nbsp;<span class="ident" id="2626445">hi</span><span class="op" id="2626447">-</span><span class="num" id="2626448">1</span><span class="op" id="2626449">-</span><span class="num" id="2626450">2</span><span class="op" id="2626451">*</span><span class="ident" id="2626452">s</span><span class="op" id="2626453">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626459">medianOfThree</span><span class="op" id="2626472">(</span><span class="ident" id="2626473">data</span><span class="op" id="2626477">,</span>&nbsp;<span class="ident" id="2626479">lo</span><span class="op" id="2626481">,</span>&nbsp;<span class="ident" id="2626483">m</span><span class="op" id="2626484">,</span>&nbsp;<span class="ident" id="2626486">hi</span><span class="op" id="2626488">-</span><span class="num" id="2626489">1</span><span class="op" id="2626490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626494">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626514">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626559">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626589">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626618">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626653">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626682">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626712">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626716">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626768">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626802">pivot</span>&nbsp;<span class="op" id="2626808">:=</span>&nbsp;<span class="ident" id="2626811">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626815">a</span><span class="op" id="2626816">,</span>&nbsp;<span class="ident" id="2626818">b</span><span class="op" id="2626819">,</span>&nbsp;<span class="ident" id="2626821">c</span><span class="op" id="2626822">,</span>&nbsp;<span class="ident" id="2626824">d</span>&nbsp;<span class="op" id="2626826">:=</span>&nbsp;<span class="ident" id="2626829">lo</span><span class="op" id="2626831">+</span><span class="num" id="2626832">1</span><span class="op" id="2626833">,</span>&nbsp;<span class="ident" id="2626835">lo</span><span class="op" id="2626837">+</span><span class="num" id="2626838">1</span><span class="op" id="2626839">,</span>&nbsp;<span class="ident" id="2626841">hi</span><span class="op" id="2626843">,</span>&nbsp;<span class="ident" id="2626845">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626849">for</span>&nbsp;<span class="op" id="2626853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626857">for</span>&nbsp;<span class="ident" id="2626861">b</span>&nbsp;<span class="op" id="2626863">&lt;</span>&nbsp;<span class="ident" id="2626865">c</span>&nbsp;<span class="op" id="2626867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626872">if</span>&nbsp;<span class="ident" id="2626875">data</span><span class="op" id="2626879">.</span><span class="ident" id="2626880">Less</span><span class="op" id="2626884">(</span><span class="ident" id="2626885">b</span><span class="op" id="2626886">,</span>&nbsp;<span class="ident" id="2626888">pivot</span><span class="op" id="2626893">)</span>&nbsp;<span class="op" id="2626895">{</span>&nbsp;<span class="comment" id="2626897">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626920">b</span><span class="op" id="2626921">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626927">}</span>&nbsp;<span class="keyword" id="2626929">else</span>&nbsp;<span class="keyword" id="2626934">if</span>&nbsp;<span class="op" id="2626937">!</span><span class="ident" id="2626938">data</span><span class="op" id="2626942">.</span><span class="ident" id="2626943">Less</span><span class="op" id="2626947">(</span><span class="ident" id="2626948">pivot</span><span class="op" id="2626953">,</span>&nbsp;<span class="ident" id="2626955">b</span><span class="op" id="2626956">)</span>&nbsp;<span class="op" id="2626958">{</span>&nbsp;<span class="comment" id="2626960">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626983">data</span><span class="op" id="2626987">.</span><span class="ident" id="2626988">Swap</span><span class="op" id="2626992">(</span><span class="ident" id="2626993">a</span><span class="op" id="2626994">,</span>&nbsp;<span class="ident" id="2626996">b</span><span class="op" id="2626997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627003">a</span><span class="op" id="2627004">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627011">b</span><span class="op" id="2627012">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627018">}</span>&nbsp;<span class="keyword" id="2627020">else</span>&nbsp;<span class="op" id="2627025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627031">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627048">for</span>&nbsp;<span class="ident" id="2627052">b</span>&nbsp;<span class="op" id="2627054">&lt;</span>&nbsp;<span class="ident" id="2627056">c</span>&nbsp;<span class="op" id="2627058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627063">if</span>&nbsp;<span class="ident" id="2627066">data</span><span class="op" id="2627070">.</span><span class="ident" id="2627071">Less</span><span class="op" id="2627075">(</span><span class="ident" id="2627076">pivot</span><span class="op" id="2627081">,</span>&nbsp;<span class="ident" id="2627083">c</span><span class="op" id="2627084">-</span><span class="num" id="2627085">1</span><span class="op" id="2627086">)</span>&nbsp;<span class="op" id="2627088">{</span>&nbsp;<span class="comment" id="2627090">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627115">c</span><span class="op" id="2627116">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627122">}</span>&nbsp;<span class="keyword" id="2627124">else</span>&nbsp;<span class="keyword" id="2627129">if</span>&nbsp;<span class="op" id="2627132">!</span><span class="ident" id="2627133">data</span><span class="op" id="2627137">.</span><span class="ident" id="2627138">Less</span><span class="op" id="2627142">(</span><span class="ident" id="2627143">c</span><span class="op" id="2627144">-</span><span class="num" id="2627145">1</span><span class="op" id="2627146">,</span>&nbsp;<span class="ident" id="2627148">pivot</span><span class="op" id="2627153">)</span>&nbsp;<span class="op" id="2627155">{</span>&nbsp;<span class="comment" id="2627157">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627182">data</span><span class="op" id="2627186">.</span><span class="ident" id="2627187">Swap</span><span class="op" id="2627191">(</span><span class="ident" id="2627192">c</span><span class="op" id="2627193">-</span><span class="num" id="2627194">1</span><span class="op" id="2627195">,</span>&nbsp;<span class="ident" id="2627197">d</span><span class="op" id="2627198">-</span><span class="num" id="2627199">1</span><span class="op" id="2627200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627206">c</span><span class="op" id="2627207">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627214">d</span><span class="op" id="2627215">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627221">}</span>&nbsp;<span class="keyword" id="2627223">else</span>&nbsp;<span class="op" id="2627228">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627234">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627251">if</span>&nbsp;<span class="ident" id="2627254">b</span>&nbsp;<span class="op" id="2627256">&gt;=</span>&nbsp;<span class="ident" id="2627259">c</span>&nbsp;<span class="op" id="2627261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627266">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2627278">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627318">data</span><span class="op" id="2627322">.</span><span class="ident" id="2627323">Swap</span><span class="op" id="2627327">(</span><span class="ident" id="2627328">b</span><span class="op" id="2627329">,</span>&nbsp;<span class="ident" id="2627331">c</span><span class="op" id="2627332">-</span><span class="num" id="2627333">1</span><span class="op" id="2627334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627338">b</span><span class="op" id="2627339">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627344">c</span><span class="op" id="2627345">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627353">n</span>&nbsp;<span class="op" id="2627355">:=</span>&nbsp;<span class="ident" id="2627358">min</span><span class="op" id="2627361">(</span><span class="ident" id="2627362">b</span><span class="op" id="2627363">-</span><span class="ident" id="2627364">a</span><span class="op" id="2627365">,</span>&nbsp;<span class="ident" id="2627367">a</span><span class="op" id="2627368">-</span><span class="ident" id="2627369">lo</span><span class="op" id="2627371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627374">swapRange</span><span class="op" id="2627383">(</span><span class="ident" id="2627384">data</span><span class="op" id="2627388">,</span>&nbsp;<span class="ident" id="2627390">lo</span><span class="op" id="2627392">,</span>&nbsp;<span class="ident" id="2627394">b</span><span class="op" id="2627395">-</span><span class="ident" id="2627396">n</span><span class="op" id="2627397">,</span>&nbsp;<span class="ident" id="2627399">n</span><span class="op" id="2627400">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627404">n</span>&nbsp;<span class="op" id="2627406">=</span>&nbsp;<span class="ident" id="2627408">min</span><span class="op" id="2627411">(</span><span class="ident" id="2627412">hi</span><span class="op" id="2627414">-</span><span class="ident" id="2627415">d</span><span class="op" id="2627416">,</span>&nbsp;<span class="ident" id="2627418">d</span><span class="op" id="2627419">-</span><span class="ident" id="2627420">c</span><span class="op" id="2627421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627424">swapRange</span><span class="op" id="2627433">(</span><span class="ident" id="2627434">data</span><span class="op" id="2627438">,</span>&nbsp;<span class="ident" id="2627440">c</span><span class="op" id="2627441">,</span>&nbsp;<span class="ident" id="2627443">hi</span><span class="op" id="2627445">-</span><span class="ident" id="2627446">n</span><span class="op" id="2627447">,</span>&nbsp;<span class="ident" id="2627449">n</span><span class="op" id="2627450">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627454">return</span>&nbsp;<span class="ident" id="2627461">lo</span>&nbsp;<span class="op" id="2627464">+</span>&nbsp;<span class="ident" id="2627466">b</span>&nbsp;<span class="op" id="2627468">-</span>&nbsp;<span class="ident" id="2627470">a</span><span class="op" id="2627471">,</span>&nbsp;<span class="ident" id="2627473">hi</span>&nbsp;<span class="op" id="2627476">-</span>&nbsp;<span class="op" id="2627478">(</span><span class="ident" id="2627479">d</span>&nbsp;<span class="op" id="2627481">-</span>&nbsp;<span class="ident" id="2627483">c</span><span class="op" id="2627484">)</span><br>
<span class="lineno"></span><span class="op" id="2627486">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2627489">func</span>&nbsp;<span class="ident" id="2627494">quickSort</span><span class="op" id="2627503">(</span><span class="ident" id="2627504">data</span>&nbsp;<span class="ident" id="2627509">Interface</span><span class="op" id="2627518">,</span>&nbsp;<span class="ident" id="2627520">a</span><span class="op" id="2627521">,</span>&nbsp;<span class="ident" id="2627523">b</span><span class="op" id="2627524">,</span>&nbsp;<span class="ident" id="2627526">maxDepth</span>&nbsp;<span class="builtintype" id="2627535">int</span><span class="op" id="2627538">)</span>&nbsp;<span class="op" id="2627540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627543">for</span>&nbsp;<span class="ident" id="2627547">b</span><span class="op" id="2627548">-</span><span class="ident" id="2627549">a</span>&nbsp;<span class="op" id="2627551">&gt;</span>&nbsp;<span class="num" id="2627553">7</span>&nbsp;<span class="op" id="2627555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627559">if</span>&nbsp;<span class="ident" id="2627562">maxDepth</span>&nbsp;<span class="op" id="2627571">==</span>&nbsp;<span class="num" id="2627574">0</span>&nbsp;<span class="op" id="2627576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627581">heapSort</span><span class="op" id="2627589">(</span><span class="ident" id="2627590">data</span><span class="op" id="2627594">,</span>&nbsp;<span class="ident" id="2627596">a</span><span class="op" id="2627597">,</span>&nbsp;<span class="ident" id="2627599">b</span><span class="op" id="2627600">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627605">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627618">maxDepth</span><span class="op" id="2627626">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627631">mlo</span><span class="op" id="2627634">,</span>&nbsp;<span class="ident" id="2627636">mhi</span>&nbsp;<span class="op" id="2627640">:=</span>&nbsp;<span class="ident" id="2627643">doPivot</span><span class="op" id="2627650">(</span><span class="ident" id="2627651">data</span><span class="op" id="2627655">,</span>&nbsp;<span class="ident" id="2627657">a</span><span class="op" id="2627658">,</span>&nbsp;<span class="ident" id="2627660">b</span><span class="op" id="2627661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2627665">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2627725">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627764">if</span>&nbsp;<span class="ident" id="2627767">mlo</span><span class="op" id="2627770">-</span><span class="ident" id="2627771">a</span>&nbsp;<span class="op" id="2627773">&lt;</span>&nbsp;<span class="ident" id="2627775">b</span><span class="op" id="2627776">-</span><span class="ident" id="2627777">mhi</span>&nbsp;<span class="op" id="2627781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627786">quickSort</span><span class="op" id="2627795">(</span><span class="ident" id="2627796">data</span><span class="op" id="2627800">,</span>&nbsp;<span class="ident" id="2627802">a</span><span class="op" id="2627803">,</span>&nbsp;<span class="ident" id="2627805">mlo</span><span class="op" id="2627808">,</span>&nbsp;<span class="ident" id="2627810">maxDepth</span><span class="op" id="2627818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627823">a</span>&nbsp;<span class="op" id="2627825">=</span>&nbsp;<span class="ident" id="2627827">mhi</span>&nbsp;<span class="comment" id="2627831">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627866">}</span>&nbsp;<span class="keyword" id="2627868">else</span>&nbsp;<span class="op" id="2627873">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627878">quickSort</span><span class="op" id="2627887">(</span><span class="ident" id="2627888">data</span><span class="op" id="2627892">,</span>&nbsp;<span class="ident" id="2627894">mhi</span><span class="op" id="2627897">,</span>&nbsp;<span class="ident" id="2627899">b</span><span class="op" id="2627900">,</span>&nbsp;<span class="ident" id="2627902">maxDepth</span><span class="op" id="2627910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627915">b</span>&nbsp;<span class="op" id="2627917">=</span>&nbsp;<span class="ident" id="2627919">mlo</span>&nbsp;<span class="comment" id="2627923">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627964">if</span>&nbsp;<span class="ident" id="2627967">b</span><span class="op" id="2627968">-</span><span class="ident" id="2627969">a</span>&nbsp;<span class="op" id="2627971">&gt;</span>&nbsp;<span class="num" id="2627973">1</span>&nbsp;<span class="op" id="2627975">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627979">insertionSort</span><span class="op" id="2627992">(</span><span class="ident" id="2627993">data</span><span class="op" id="2627997">,</span>&nbsp;<span class="ident" id="2627999">a</span><span class="op" id="2628000">,</span>&nbsp;<span class="ident" id="2628002">b</span><span class="op" id="2628003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628006">}</span><br>
<span class="lineno"></span><span class="op" id="2628008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628011">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2628031">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2628105">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2628174">func</span>&nbsp;<span class="ident" id="2628179">Sort</span><span class="op" id="2628183">(</span><span class="ident" id="2628184">data</span>&nbsp;<span class="ident" id="2628189">Interface</span><span class="op" id="2628198">)</span>&nbsp;<span class="op" id="2628200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628203">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628266">n</span>&nbsp;<span class="op" id="2628268">:=</span>&nbsp;<span class="ident" id="2628271">data</span><span class="op" id="2628275">.</span><span class="ident" id="2628276">Len</span><span class="op" id="2628279">(</span><span class="op" id="2628280">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628283">maxDepth</span>&nbsp;<span class="op" id="2628292">:=</span>&nbsp;<span class="num" id="2628295">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628298">for</span>&nbsp;<span class="ident" id="2628302">i</span>&nbsp;<span class="op" id="2628304">:=</span>&nbsp;<span class="ident" id="2628307">n</span><span class="op" id="2628308">;</span>&nbsp;<span class="ident" id="2628310">i</span>&nbsp;<span class="op" id="2628312">&gt;</span>&nbsp;<span class="num" id="2628314">0</span><span class="op" id="2628315">;</span>&nbsp;<span class="ident" id="2628317">i</span>&nbsp;<span class="op" id="2628319">&gt;&gt;=</span>&nbsp;<span class="num" id="2628323">1</span>&nbsp;<span class="op" id="2628325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628329">maxDepth</span><span class="op" id="2628337">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628344">maxDepth</span>&nbsp;<span class="op" id="2628353">*=</span>&nbsp;<span class="num" id="2628356">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628359">quickSort</span><span class="op" id="2628368">(</span><span class="ident" id="2628369">data</span><span class="op" id="2628373">,</span>&nbsp;<span class="num" id="2628375">0</span><span class="op" id="2628376">,</span>&nbsp;<span class="ident" id="2628378">n</span><span class="op" id="2628379">,</span>&nbsp;<span class="ident" id="2628381">maxDepth</span><span class="op" id="2628389">)</span><br>
<span class="lineno"></span><span class="op" id="2628391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2628394">type</span>&nbsp;<span class="ident" id="2628399">reverse</span>&nbsp;<span class="keyword" id="2628407">struct</span>&nbsp;<span class="op" id="2628414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628417">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628483">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628521">Interface</span><br>
<span class="lineno"></span><span class="op" id="2628531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628534">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2628609">func</span>&nbsp;<span class="op" id="2628614">(</span><span class="ident" id="2628615">r</span>&nbsp;<span class="ident" id="2628617">reverse</span><span class="op" id="2628624">)</span>&nbsp;<span class="ident" id="2628626">Less</span><span class="op" id="2628630">(</span><span class="ident" id="2628631">i</span><span class="op" id="2628632">,</span>&nbsp;<span class="ident" id="2628634">j</span>&nbsp;<span class="builtintype" id="2628636">int</span><span class="op" id="2628639">)</span>&nbsp;<span class="builtintype" id="2628641">bool</span>&nbsp;<span class="op" id="2628646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628649">return</span>&nbsp;<span class="ident" id="2628656">r</span><span class="op" id="2628657">.</span><span class="ident" id="2628658">Interface</span><span class="op" id="2628667">.</span><span class="ident" id="2628668">Less</span><span class="op" id="2628672">(</span><span class="ident" id="2628673">j</span><span class="op" id="2628674">,</span>&nbsp;<span class="ident" id="2628676">i</span><span class="op" id="2628677">)</span><br>
<span class="lineno"></span><span class="op" id="2628679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628682">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2628729">func</span>&nbsp;<span class="ident" id="2628734">Reverse</span><span class="op" id="2628741">(</span><span class="ident" id="2628742">data</span>&nbsp;<span class="ident" id="2628747">Interface</span><span class="op" id="2628756">)</span>&nbsp;<span class="ident" id="2628758">Interface</span>&nbsp;<span class="op" id="2628768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628771">return</span>&nbsp;<span class="op" id="2628778">&amp;</span><span class="ident" id="2628779">reverse</span><span class="op" id="2628786">{</span><span class="ident" id="2628787">data</span><span class="op" id="2628791">}</span><br>
<span class="lineno"></span><span class="op" id="2628793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628796">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2628840">func</span>&nbsp;<span class="ident" id="2628845">IsSorted</span><span class="op" id="2628853">(</span><span class="ident" id="2628854">data</span>&nbsp;<span class="ident" id="2628859">Interface</span><span class="op" id="2628868">)</span>&nbsp;<span class="builtintype" id="2628870">bool</span>&nbsp;<span class="op" id="2628875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628878">n</span>&nbsp;<span class="op" id="2628880">:=</span>&nbsp;<span class="ident" id="2628883">data</span><span class="op" id="2628887">.</span><span class="ident" id="2628888">Len</span><span class="op" id="2628891">(</span><span class="op" id="2628892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628895">for</span>&nbsp;<span class="ident" id="2628899">i</span>&nbsp;<span class="op" id="2628901">:=</span>&nbsp;<span class="ident" id="2628904">n</span>&nbsp;<span class="op" id="2628906">-</span>&nbsp;<span class="num" id="2628908">1</span><span class="op" id="2628909">;</span>&nbsp;<span class="ident" id="2628911">i</span>&nbsp;<span class="op" id="2628913">&gt;</span>&nbsp;<span class="num" id="2628915">0</span><span class="op" id="2628916">;</span>&nbsp;<span class="ident" id="2628918">i</span><span class="op" id="2628919">--</span>&nbsp;<span class="op" id="2628922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628926">if</span>&nbsp;<span class="ident" id="2628929">data</span><span class="op" id="2628933">.</span><span class="ident" id="2628934">Less</span><span class="op" id="2628938">(</span><span class="ident" id="2628939">i</span><span class="op" id="2628940">,</span>&nbsp;<span class="ident" id="2628942">i</span><span class="op" id="2628943">-</span><span class="num" id="2628944">1</span><span class="op" id="2628945">)</span>&nbsp;<span class="op" id="2628947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628952">return</span>&nbsp;<span class="builtintype" id="2628959">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628973">return</span>&nbsp;<span class="builtintype" id="2628980">true</span><br>
<span class="lineno"></span><span class="op" id="2628985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2628988">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629027">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2629112">type</span>&nbsp;<span class="ident" id="2629117">IntSlice</span>&nbsp;<span class="op" id="2629126">[</span><span class="op" id="2629127">]</span><span class="builtintype" id="2629128">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2629133">func</span>&nbsp;<span class="op" id="2629138">(</span><span class="ident" id="2629139">p</span>&nbsp;<span class="ident" id="2629141">IntSlice</span><span class="op" id="2629149">)</span>&nbsp;<span class="ident" id="2629151">Len</span><span class="op" id="2629154">(</span><span class="op" id="2629155">)</span>&nbsp;<span class="builtintype" id="2629157">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2629171">{</span>&nbsp;<span class="keyword" id="2629173">return</span>&nbsp;<span class="builtinfunc" id="2629180">len</span><span class="op" id="2629183">(</span><span class="ident" id="2629184">p</span><span class="op" id="2629185">)</span>&nbsp;<span class="op" id="2629187">}</span><br>
<span class="lineno"></span><span class="keyword" id="2629189">func</span>&nbsp;<span class="op" id="2629194">(</span><span class="ident" id="2629195">p</span>&nbsp;<span class="ident" id="2629197">IntSlice</span><span class="op" id="2629205">)</span>&nbsp;<span class="ident" id="2629207">Less</span><span class="op" id="2629211">(</span><span class="ident" id="2629212">i</span><span class="op" id="2629213">,</span>&nbsp;<span class="ident" id="2629215">j</span>&nbsp;<span class="builtintype" id="2629217">int</span><span class="op" id="2629220">)</span>&nbsp;<span class="builtintype" id="2629222">bool</span>&nbsp;<span class="op" id="2629227">{</span>&nbsp;<span class="keyword" id="2629229">return</span>&nbsp;<span class="ident" id="2629236">p</span><span class="op" id="2629237">[</span><span class="ident" id="2629238">i</span><span class="op" id="2629239">]</span>&nbsp;<span class="op" id="2629241">&lt;</span>&nbsp;<span class="ident" id="2629243">p</span><span class="op" id="2629244">[</span><span class="ident" id="2629245">j</span><span class="op" id="2629246">]</span>&nbsp;<span class="op" id="2629248">}</span><br>
<span class="lineno"></span><span class="keyword" id="2629250">func</span>&nbsp;<span class="op" id="2629255">(</span><span class="ident" id="2629256">p</span>&nbsp;<span class="ident" id="2629258">IntSlice</span><span class="op" id="2629266">)</span>&nbsp;<span class="ident" id="2629268">Swap</span><span class="op" id="2629272">(</span><span class="ident" id="2629273">i</span><span class="op" id="2629274">,</span>&nbsp;<span class="ident" id="2629276">j</span>&nbsp;<span class="builtintype" id="2629278">int</span><span class="op" id="2629281">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2629288">{</span>&nbsp;<span class="ident" id="2629290">p</span><span class="op" id="2629291">[</span><span class="ident" id="2629292">i</span><span class="op" id="2629293">]</span><span class="op" id="2629294">,</span>&nbsp;<span class="ident" id="2629296">p</span><span class="op" id="2629297">[</span><span class="ident" id="2629298">j</span><span class="op" id="2629299">]</span>&nbsp;<span class="op" id="2629301">=</span>&nbsp;<span class="ident" id="2629303">p</span><span class="op" id="2629304">[</span><span class="ident" id="2629305">j</span><span class="op" id="2629306">]</span><span class="op" id="2629307">,</span>&nbsp;<span class="ident" id="2629309">p</span><span class="op" id="2629310">[</span><span class="ident" id="2629311">i</span><span class="op" id="2629312">]</span>&nbsp;<span class="op" id="2629314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629317">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2629350">func</span>&nbsp;<span class="op" id="2629355">(</span><span class="ident" id="2629356">p</span>&nbsp;<span class="ident" id="2629358">IntSlice</span><span class="op" id="2629366">)</span>&nbsp;<span class="ident" id="2629368">Sort</span><span class="op" id="2629372">(</span><span class="op" id="2629373">)</span>&nbsp;<span class="op" id="2629375">{</span>&nbsp;<span class="ident" id="2629377">Sort</span><span class="op" id="2629381">(</span><span class="ident" id="2629382">p</span><span class="op" id="2629383">)</span>&nbsp;<span class="op" id="2629385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629388">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2629481">type</span>&nbsp;<span class="ident" id="2629486">Float64Slice</span>&nbsp;<span class="op" id="2629499">[</span><span class="op" id="2629500">]</span><span class="builtintype" id="2629501">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2629510">func</span>&nbsp;<span class="op" id="2629515">(</span><span class="ident" id="2629516">p</span>&nbsp;<span class="ident" id="2629518">Float64Slice</span><span class="op" id="2629530">)</span>&nbsp;<span class="ident" id="2629532">Len</span><span class="op" id="2629535">(</span><span class="op" id="2629536">)</span>&nbsp;<span class="builtintype" id="2629538">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2629552">{</span>&nbsp;<span class="keyword" id="2629554">return</span>&nbsp;<span class="builtinfunc" id="2629561">len</span><span class="op" id="2629564">(</span><span class="ident" id="2629565">p</span><span class="op" id="2629566">)</span>&nbsp;<span class="op" id="2629568">}</span><br>
<span class="lineno"></span><span class="keyword" id="2629570">func</span>&nbsp;<span class="op" id="2629575">(</span><span class="ident" id="2629576">p</span>&nbsp;<span class="ident" id="2629578">Float64Slice</span><span class="op" id="2629590">)</span>&nbsp;<span class="ident" id="2629592">Less</span><span class="op" id="2629596">(</span><span class="ident" id="2629597">i</span><span class="op" id="2629598">,</span>&nbsp;<span class="ident" id="2629600">j</span>&nbsp;<span class="builtintype" id="2629602">int</span><span class="op" id="2629605">)</span>&nbsp;<span class="builtintype" id="2629607">bool</span>&nbsp;<span class="op" id="2629612">{</span>&nbsp;<span class="keyword" id="2629614">return</span>&nbsp;<span class="ident" id="2629621">p</span><span class="op" id="2629622">[</span><span class="ident" id="2629623">i</span><span class="op" id="2629624">]</span>&nbsp;<span class="op" id="2629626">&lt;</span>&nbsp;<span class="ident" id="2629628">p</span><span class="op" id="2629629">[</span><span class="ident" id="2629630">j</span><span class="op" id="2629631">]</span>&nbsp;<span class="op" id="2629633">||</span>&nbsp;<span class="ident" id="2629636">isNaN</span><span class="op" id="2629641">(</span><span class="ident" id="2629642">p</span><span class="op" id="2629643">[</span><span class="ident" id="2629644">i</span><span class="op" id="2629645">]</span><span class="op" id="2629646">)</span>&nbsp;<span class="op" id="2629648">&amp;&amp;</span>&nbsp;<span class="op" id="2629651">!</span><span class="ident" id="2629652">isNaN</span><span class="op" id="2629657">(</span><span class="ident" id="2629658">p</span><span class="op" id="2629659">[</span><span class="ident" id="2629660">j</span><span class="op" id="2629661">]</span><span class="op" id="2629662">)</span>&nbsp;<span class="op" id="2629664">}</span><br>
<span class="lineno"></span><span class="keyword" id="2629666">func</span>&nbsp;<span class="op" id="2629671">(</span><span class="ident" id="2629672">p</span>&nbsp;<span class="ident" id="2629674">Float64Slice</span><span class="op" id="2629686">)</span>&nbsp;<span class="ident" id="2629688">Swap</span><span class="op" id="2629692">(</span><span class="ident" id="2629693">i</span><span class="op" id="2629694">,</span>&nbsp;<span class="ident" id="2629696">j</span>&nbsp;<span class="builtintype" id="2629698">int</span><span class="op" id="2629701">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2629708">{</span>&nbsp;<span class="ident" id="2629710">p</span><span class="op" id="2629711">[</span><span class="ident" id="2629712">i</span><span class="op" id="2629713">]</span><span class="op" id="2629714">,</span>&nbsp;<span class="ident" id="2629716">p</span><span class="op" id="2629717">[</span><span class="ident" id="2629718">j</span><span class="op" id="2629719">]</span>&nbsp;<span class="op" id="2629721">=</span>&nbsp;<span class="ident" id="2629723">p</span><span class="op" id="2629724">[</span><span class="ident" id="2629725">j</span><span class="op" id="2629726">]</span><span class="op" id="2629727">,</span>&nbsp;<span class="ident" id="2629729">p</span><span class="op" id="2629730">[</span><span class="ident" id="2629731">i</span><span class="op" id="2629732">]</span>&nbsp;<span class="op" id="2629734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629737">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2629813">func</span>&nbsp;<span class="ident" id="2629818">isNaN</span><span class="op" id="2629823">(</span><span class="ident" id="2629824">f</span>&nbsp;<span class="builtintype" id="2629826">float64</span><span class="op" id="2629833">)</span>&nbsp;<span class="builtintype" id="2629835">bool</span>&nbsp;<span class="op" id="2629840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629843">return</span>&nbsp;<span class="ident" id="2629850">f</span>&nbsp;<span class="op" id="2629852">!=</span>&nbsp;<span class="ident" id="2629855">f</span><br>
<span class="lineno"></span><span class="op" id="2629857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629860">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2629893">func</span>&nbsp;<span class="op" id="2629898">(</span><span class="ident" id="2629899">p</span>&nbsp;<span class="ident" id="2629901">Float64Slice</span><span class="op" id="2629913">)</span>&nbsp;<span class="ident" id="2629915">Sort</span><span class="op" id="2629919">(</span><span class="op" id="2629920">)</span>&nbsp;<span class="op" id="2629922">{</span>&nbsp;<span class="ident" id="2629924">Sort</span><span class="op" id="2629928">(</span><span class="ident" id="2629929">p</span><span class="op" id="2629930">)</span>&nbsp;<span class="op" id="2629932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629935">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2630026">type</span>&nbsp;<span class="ident" id="2630031">StringSlice</span>&nbsp;<span class="op" id="2630043">[</span><span class="op" id="2630044">]</span><span class="builtintype" id="2630045">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2630053">func</span>&nbsp;<span class="op" id="2630058">(</span><span class="ident" id="2630059">p</span>&nbsp;<span class="ident" id="2630061">StringSlice</span><span class="op" id="2630072">)</span>&nbsp;<span class="ident" id="2630074">Len</span><span class="op" id="2630077">(</span><span class="op" id="2630078">)</span>&nbsp;<span class="builtintype" id="2630080">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2630094">{</span>&nbsp;<span class="keyword" id="2630096">return</span>&nbsp;<span class="builtinfunc" id="2630103">len</span><span class="op" id="2630106">(</span><span class="ident" id="2630107">p</span><span class="op" id="2630108">)</span>&nbsp;<span class="op" id="2630110">}</span><br>
<span class="lineno"></span><span class="keyword" id="2630112">func</span>&nbsp;<span class="op" id="2630117">(</span><span class="ident" id="2630118">p</span>&nbsp;<span class="ident" id="2630120">StringSlice</span><span class="op" id="2630131">)</span>&nbsp;<span class="ident" id="2630133">Less</span><span class="op" id="2630137">(</span><span class="ident" id="2630138">i</span><span class="op" id="2630139">,</span>&nbsp;<span class="ident" id="2630141">j</span>&nbsp;<span class="builtintype" id="2630143">int</span><span class="op" id="2630146">)</span>&nbsp;<span class="builtintype" id="2630148">bool</span>&nbsp;<span class="op" id="2630153">{</span>&nbsp;<span class="keyword" id="2630155">return</span>&nbsp;<span class="ident" id="2630162">p</span><span class="op" id="2630163">[</span><span class="ident" id="2630164">i</span><span class="op" id="2630165">]</span>&nbsp;<span class="op" id="2630167">&lt;</span>&nbsp;<span class="ident" id="2630169">p</span><span class="op" id="2630170">[</span><span class="ident" id="2630171">j</span><span class="op" id="2630172">]</span>&nbsp;<span class="op" id="2630174">}</span><br>
<span class="lineno"></span><span class="keyword" id="2630176">func</span>&nbsp;<span class="op" id="2630181">(</span><span class="ident" id="2630182">p</span>&nbsp;<span class="ident" id="2630184">StringSlice</span><span class="op" id="2630195">)</span>&nbsp;<span class="ident" id="2630197">Swap</span><span class="op" id="2630201">(</span><span class="ident" id="2630202">i</span><span class="op" id="2630203">,</span>&nbsp;<span class="ident" id="2630205">j</span>&nbsp;<span class="builtintype" id="2630207">int</span><span class="op" id="2630210">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2630217">{</span>&nbsp;<span class="ident" id="2630219">p</span><span class="op" id="2630220">[</span><span class="ident" id="2630221">i</span><span class="op" id="2630222">]</span><span class="op" id="2630223">,</span>&nbsp;<span class="ident" id="2630225">p</span><span class="op" id="2630226">[</span><span class="ident" id="2630227">j</span><span class="op" id="2630228">]</span>&nbsp;<span class="op" id="2630230">=</span>&nbsp;<span class="ident" id="2630232">p</span><span class="op" id="2630233">[</span><span class="ident" id="2630234">j</span><span class="op" id="2630235">]</span><span class="op" id="2630236">,</span>&nbsp;<span class="ident" id="2630238">p</span><span class="op" id="2630239">[</span><span class="ident" id="2630240">i</span><span class="op" id="2630241">]</span>&nbsp;<span class="op" id="2630243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630246">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2630279">func</span>&nbsp;<span class="op" id="2630284">(</span><span class="ident" id="2630285">p</span>&nbsp;<span class="ident" id="2630287">StringSlice</span><span class="op" id="2630298">)</span>&nbsp;<span class="ident" id="2630300">Sort</span><span class="op" id="2630304">(</span><span class="op" id="2630305">)</span>&nbsp;<span class="op" id="2630307">{</span>&nbsp;<span class="ident" id="2630309">Sort</span><span class="op" id="2630313">(</span><span class="ident" id="2630314">p</span><span class="op" id="2630315">)</span>&nbsp;<span class="op" id="2630317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630320">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630362">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2630413">func</span>&nbsp;<span class="ident" id="2630418">Ints</span><span class="op" id="2630422">(</span><span class="ident" id="2630423">a</span>&nbsp;<span class="op" id="2630425">[</span><span class="op" id="2630426">]</span><span class="builtintype" id="2630427">int</span><span class="op" id="2630430">)</span>&nbsp;<span class="op" id="2630432">{</span>&nbsp;<span class="ident" id="2630434">Sort</span><span class="op" id="2630438">(</span><span class="ident" id="2630439">IntSlice</span><span class="op" id="2630447">(</span><span class="ident" id="2630448">a</span><span class="op" id="2630449">)</span><span class="op" id="2630450">)</span>&nbsp;<span class="op" id="2630452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630455">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2630514">func</span>&nbsp;<span class="ident" id="2630519">Float64s</span><span class="op" id="2630527">(</span><span class="ident" id="2630528">a</span>&nbsp;<span class="op" id="2630530">[</span><span class="op" id="2630531">]</span><span class="builtintype" id="2630532">float64</span><span class="op" id="2630539">)</span>&nbsp;<span class="op" id="2630541">{</span>&nbsp;<span class="ident" id="2630543">Sort</span><span class="op" id="2630547">(</span><span class="ident" id="2630548">Float64Slice</span><span class="op" id="2630560">(</span><span class="ident" id="2630561">a</span><span class="op" id="2630562">)</span><span class="op" id="2630563">)</span>&nbsp;<span class="op" id="2630565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2630568">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2630625">func</span>&nbsp;<span class="ident" id="2630630">Strings</span><span class="op" id="2630637">(</span><span class="ident" id="2630638">a</span>&nbsp;<span class="op" id="2630640">[</span><span class="op" id="2630641">]</span><span class="builtintype" id="2630642">string</span><span class="op" id="2630648">)</span>&nbsp;<span class="op" id="2630650">{</span>&nbsp;<span class="ident" id="2630652">Sort</span><span class="op" id="2630656">(</span><span class="ident" id="2630657">StringSlice</span><span class="op" id="2630668">(</span><span class="ident" id="2630669">a</span><span class="op" id="2630670">)</span><span class="op" id="2630671">)</span>&nbsp;<span class="op" id="2630673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630676">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2630754">func</span>&nbsp;<span class="ident" id="2630759">IntsAreSorted</span><span class="op" id="2630772">(</span><span class="ident" id="2630773">a</span>&nbsp;<span class="op" id="2630775">[</span><span class="op" id="2630776">]</span><span class="builtintype" id="2630777">int</span><span class="op" id="2630780">)</span>&nbsp;<span class="builtintype" id="2630782">bool</span>&nbsp;<span class="op" id="2630787">{</span>&nbsp;<span class="keyword" id="2630789">return</span>&nbsp;<span class="ident" id="2630796">IsSorted</span><span class="op" id="2630804">(</span><span class="ident" id="2630805">IntSlice</span><span class="op" id="2630813">(</span><span class="ident" id="2630814">a</span><span class="op" id="2630815">)</span><span class="op" id="2630816">)</span>&nbsp;<span class="op" id="2630818">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2630821">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2630907">func</span>&nbsp;<span class="ident" id="2630912">Float64sAreSorted</span><span class="op" id="2630929">(</span><span class="ident" id="2630930">a</span>&nbsp;<span class="op" id="2630932">[</span><span class="op" id="2630933">]</span><span class="builtintype" id="2630934">float64</span><span class="op" id="2630941">)</span>&nbsp;<span class="builtintype" id="2630943">bool</span>&nbsp;<span class="op" id="2630948">{</span>&nbsp;<span class="keyword" id="2630950">return</span>&nbsp;<span class="ident" id="2630957">IsSorted</span><span class="op" id="2630965">(</span><span class="ident" id="2630966">Float64Slice</span><span class="op" id="2630978">(</span><span class="ident" id="2630979">a</span><span class="op" id="2630980">)</span><span class="op" id="2630981">)</span>&nbsp;<span class="op" id="2630983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630986">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2631070">func</span>&nbsp;<span class="ident" id="2631075">StringsAreSorted</span><span class="op" id="2631091">(</span><span class="ident" id="2631092">a</span>&nbsp;<span class="op" id="2631094">[</span><span class="op" id="2631095">]</span><span class="builtintype" id="2631096">string</span><span class="op" id="2631102">)</span>&nbsp;<span class="builtintype" id="2631104">bool</span>&nbsp;<span class="op" id="2631109">{</span>&nbsp;<span class="keyword" id="2631111">return</span>&nbsp;<span class="ident" id="2631118">IsSorted</span><span class="op" id="2631126">(</span><span class="ident" id="2631127">StringSlice</span><span class="op" id="2631138">(</span><span class="ident" id="2631139">a</span><span class="op" id="2631140">)</span><span class="op" id="2631141">)</span>&nbsp;<span class="op" id="2631143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2631146">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2631174">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2631250">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2631325">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2631388">//</span><br>
<span class="lineno"></span><span class="comment" id="2631391">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2631433">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2631505">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2631523">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2631577">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2631654">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2631726">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2631798">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2631853">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2631926">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2631977">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2632053">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2632127">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2632193">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2632270">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2632349">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2632427">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2632501">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2632549">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2632623">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2632672">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2632745">//</span><br>
<span class="lineno">315</span><span class="comment" id="2632748">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2632818">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2632874">func</span>&nbsp;<span class="ident" id="2632879">Stable</span><span class="op" id="2632885">(</span><span class="ident" id="2632886">data</span>&nbsp;<span class="ident" id="2632891">Interface</span><span class="op" id="2632900">)</span>&nbsp;<span class="op" id="2632902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632905">n</span>&nbsp;<span class="op" id="2632907">:=</span>&nbsp;<span class="ident" id="2632910">data</span><span class="op" id="2632914">.</span><span class="ident" id="2632915">Len</span><span class="op" id="2632918">(</span><span class="op" id="2632919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632922">blockSize</span>&nbsp;<span class="op" id="2632932">:=</span>&nbsp;<span class="num" id="2632935">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632939">a</span><span class="op" id="2632940">,</span>&nbsp;<span class="ident" id="2632942">b</span>&nbsp;<span class="op" id="2632944">:=</span>&nbsp;<span class="num" id="2632947">0</span><span class="op" id="2632948">,</span>&nbsp;<span class="ident" id="2632950">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632961">for</span>&nbsp;<span class="ident" id="2632965">b</span>&nbsp;<span class="op" id="2632967">&lt;=</span>&nbsp;<span class="ident" id="2632970">n</span>&nbsp;<span class="op" id="2632972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632976">insertionSort</span><span class="op" id="2632989">(</span><span class="ident" id="2632990">data</span><span class="op" id="2632994">,</span>&nbsp;<span class="ident" id="2632996">a</span><span class="op" id="2632997">,</span>&nbsp;<span class="ident" id="2632999">b</span><span class="op" id="2633000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633004">a</span>&nbsp;<span class="op" id="2633006">=</span>&nbsp;<span class="ident" id="2633008">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633012">b</span>&nbsp;<span class="op" id="2633014">+=</span>&nbsp;<span class="ident" id="2633017">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633031">insertionSort</span><span class="op" id="2633044">(</span><span class="ident" id="2633045">data</span><span class="op" id="2633049">,</span>&nbsp;<span class="ident" id="2633051">a</span><span class="op" id="2633052">,</span>&nbsp;<span class="ident" id="2633054">n</span><span class="op" id="2633055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633059">for</span>&nbsp;<span class="ident" id="2633063">blockSize</span>&nbsp;<span class="op" id="2633073">&lt;</span>&nbsp;<span class="ident" id="2633075">n</span>&nbsp;<span class="op" id="2633077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633081">a</span><span class="op" id="2633082">,</span>&nbsp;<span class="ident" id="2633084">b</span>&nbsp;<span class="op" id="2633086">=</span>&nbsp;<span class="num" id="2633088">0</span><span class="op" id="2633089">,</span>&nbsp;<span class="num" id="2633091">2</span><span class="op" id="2633092">*</span><span class="ident" id="2633093">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633105">for</span>&nbsp;<span class="ident" id="2633109">b</span>&nbsp;<span class="op" id="2633111">&lt;=</span>&nbsp;<span class="ident" id="2633114">n</span>&nbsp;<span class="op" id="2633116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633121">symMerge</span><span class="op" id="2633129">(</span><span class="ident" id="2633130">data</span><span class="op" id="2633134">,</span>&nbsp;<span class="ident" id="2633136">a</span><span class="op" id="2633137">,</span>&nbsp;<span class="ident" id="2633139">a</span><span class="op" id="2633140">+</span><span class="ident" id="2633141">blockSize</span><span class="op" id="2633150">,</span>&nbsp;<span class="ident" id="2633152">b</span><span class="op" id="2633153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633158">a</span>&nbsp;<span class="op" id="2633160">=</span>&nbsp;<span class="ident" id="2633162">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633167">b</span>&nbsp;<span class="op" id="2633169">+=</span>&nbsp;<span class="num" id="2633172">2</span>&nbsp;<span class="op" id="2633174">*</span>&nbsp;<span class="ident" id="2633176">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633188">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633192">symMerge</span><span class="op" id="2633200">(</span><span class="ident" id="2633201">data</span><span class="op" id="2633205">,</span>&nbsp;<span class="ident" id="2633207">a</span><span class="op" id="2633208">,</span>&nbsp;<span class="ident" id="2633210">a</span><span class="op" id="2633211">+</span><span class="ident" id="2633212">blockSize</span><span class="op" id="2633221">,</span>&nbsp;<span class="ident" id="2633223">n</span><span class="op" id="2633224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633228">blockSize</span>&nbsp;<span class="op" id="2633238">*=</span>&nbsp;<span class="num" id="2633241">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633244">}</span><br>
<span class="lineno"></span><span class="op" id="2633246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2633249">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2633326">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2633403">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2633478">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2633553">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2633605">//</span><br>
<span class="lineno"></span><span class="comment" id="2633608">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2633649">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2633700">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2633761">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2633820">//</span><br>
<span class="lineno"></span><span class="comment" id="2633823">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2633898">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2633978">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2634055">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2634098">func</span>&nbsp;<span class="ident" id="2634103">symMerge</span><span class="op" id="2634111">(</span><span class="ident" id="2634112">data</span>&nbsp;<span class="ident" id="2634117">Interface</span><span class="op" id="2634126">,</span>&nbsp;<span class="ident" id="2634128">a</span><span class="op" id="2634129">,</span>&nbsp;<span class="ident" id="2634131">m</span><span class="op" id="2634132">,</span>&nbsp;<span class="ident" id="2634134">b</span>&nbsp;<span class="builtintype" id="2634136">int</span><span class="op" id="2634139">)</span>&nbsp;<span class="op" id="2634141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634144">if</span>&nbsp;<span class="ident" id="2634147">a</span>&nbsp;<span class="op" id="2634149">&gt;=</span>&nbsp;<span class="ident" id="2634152">m</span>&nbsp;<span class="op" id="2634154">||</span>&nbsp;<span class="ident" id="2634157">m</span>&nbsp;<span class="op" id="2634159">&gt;=</span>&nbsp;<span class="ident" id="2634162">b</span>&nbsp;<span class="op" id="2634164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634168">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634180">mid</span>&nbsp;<span class="op" id="2634184">:=</span>&nbsp;<span class="ident" id="2634187">a</span>&nbsp;<span class="op" id="2634189">+</span>&nbsp;<span class="op" id="2634191">(</span><span class="ident" id="2634192">b</span><span class="op" id="2634193">-</span><span class="ident" id="2634194">a</span><span class="op" id="2634195">)</span><span class="op" id="2634196">/</span><span class="num" id="2634197">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634200">n</span>&nbsp;<span class="op" id="2634202">:=</span>&nbsp;<span class="ident" id="2634205">mid</span>&nbsp;<span class="op" id="2634209">+</span>&nbsp;<span class="ident" id="2634211">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634214">start</span>&nbsp;<span class="op" id="2634220">:=</span>&nbsp;<span class="num" id="2634223">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634226">if</span>&nbsp;<span class="ident" id="2634229">m</span>&nbsp;<span class="op" id="2634231">&gt;</span>&nbsp;<span class="ident" id="2634233">mid</span>&nbsp;<span class="op" id="2634237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634241">start</span>&nbsp;<span class="op" id="2634247">=</span>&nbsp;<span class="ident" id="2634249">n</span>&nbsp;<span class="op" id="2634251">-</span>&nbsp;<span class="ident" id="2634253">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634257">r</span><span class="op" id="2634258">,</span>&nbsp;<span class="ident" id="2634260">p</span>&nbsp;<span class="op" id="2634262">:=</span>&nbsp;<span class="ident" id="2634265">mid</span><span class="op" id="2634268">,</span>&nbsp;<span class="ident" id="2634270">n</span><span class="op" id="2634271">-</span><span class="num" id="2634272">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634276">for</span>&nbsp;<span class="ident" id="2634280">start</span>&nbsp;<span class="op" id="2634286">&lt;</span>&nbsp;<span class="ident" id="2634288">r</span>&nbsp;<span class="op" id="2634290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634295">c</span>&nbsp;<span class="op" id="2634297">:=</span>&nbsp;<span class="ident" id="2634300">start</span>&nbsp;<span class="op" id="2634306">+</span>&nbsp;<span class="op" id="2634308">(</span><span class="ident" id="2634309">r</span><span class="op" id="2634310">-</span><span class="ident" id="2634311">start</span><span class="op" id="2634316">)</span><span class="op" id="2634317">/</span><span class="num" id="2634318">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634323">if</span>&nbsp;<span class="op" id="2634326">!</span><span class="ident" id="2634327">data</span><span class="op" id="2634331">.</span><span class="ident" id="2634332">Less</span><span class="op" id="2634336">(</span><span class="ident" id="2634337">p</span><span class="op" id="2634338">-</span><span class="ident" id="2634339">c</span><span class="op" id="2634340">,</span>&nbsp;<span class="ident" id="2634342">c</span><span class="op" id="2634343">)</span>&nbsp;<span class="op" id="2634345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634351">start</span>&nbsp;<span class="op" id="2634357">=</span>&nbsp;<span class="ident" id="2634359">c</span>&nbsp;<span class="op" id="2634361">+</span>&nbsp;<span class="num" id="2634363">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634368">}</span>&nbsp;<span class="keyword" id="2634370">else</span>&nbsp;<span class="op" id="2634375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634381">r</span>&nbsp;<span class="op" id="2634383">=</span>&nbsp;<span class="ident" id="2634385">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634397">}</span>&nbsp;<span class="keyword" id="2634399">else</span>&nbsp;<span class="op" id="2634404">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634408">start</span>&nbsp;<span class="op" id="2634414">=</span>&nbsp;<span class="ident" id="2634416">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634420">r</span><span class="op" id="2634421">,</span>&nbsp;<span class="ident" id="2634423">p</span>&nbsp;<span class="op" id="2634425">:=</span>&nbsp;<span class="ident" id="2634428">m</span><span class="op" id="2634429">,</span>&nbsp;<span class="ident" id="2634431">n</span><span class="op" id="2634432">-</span><span class="num" id="2634433">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634437">for</span>&nbsp;<span class="ident" id="2634441">start</span>&nbsp;<span class="op" id="2634447">&lt;</span>&nbsp;<span class="ident" id="2634449">r</span>&nbsp;<span class="op" id="2634451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634456">c</span>&nbsp;<span class="op" id="2634458">:=</span>&nbsp;<span class="ident" id="2634461">start</span>&nbsp;<span class="op" id="2634467">+</span>&nbsp;<span class="op" id="2634469">(</span><span class="ident" id="2634470">r</span><span class="op" id="2634471">-</span><span class="ident" id="2634472">start</span><span class="op" id="2634477">)</span><span class="op" id="2634478">/</span><span class="num" id="2634479">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634484">if</span>&nbsp;<span class="op" id="2634487">!</span><span class="ident" id="2634488">data</span><span class="op" id="2634492">.</span><span class="ident" id="2634493">Less</span><span class="op" id="2634497">(</span><span class="ident" id="2634498">p</span><span class="op" id="2634499">-</span><span class="ident" id="2634500">c</span><span class="op" id="2634501">,</span>&nbsp;<span class="ident" id="2634503">c</span><span class="op" id="2634504">)</span>&nbsp;<span class="op" id="2634506">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634512">start</span>&nbsp;<span class="op" id="2634518">=</span>&nbsp;<span class="ident" id="2634520">c</span>&nbsp;<span class="op" id="2634522">+</span>&nbsp;<span class="num" id="2634524">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634529">}</span>&nbsp;<span class="keyword" id="2634531">else</span>&nbsp;<span class="op" id="2634536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634542">r</span>&nbsp;<span class="op" id="2634544">=</span>&nbsp;<span class="ident" id="2634546">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634555">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634561">end</span>&nbsp;<span class="op" id="2634565">:=</span>&nbsp;<span class="ident" id="2634568">n</span>&nbsp;<span class="op" id="2634570">-</span>&nbsp;<span class="ident" id="2634572">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634579">rotate</span><span class="op" id="2634585">(</span><span class="ident" id="2634586">data</span><span class="op" id="2634590">,</span>&nbsp;<span class="ident" id="2634592">start</span><span class="op" id="2634597">,</span>&nbsp;<span class="ident" id="2634599">m</span><span class="op" id="2634600">,</span>&nbsp;<span class="ident" id="2634602">end</span><span class="op" id="2634605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634608">symMerge</span><span class="op" id="2634616">(</span><span class="ident" id="2634617">data</span><span class="op" id="2634621">,</span>&nbsp;<span class="ident" id="2634623">a</span><span class="op" id="2634624">,</span>&nbsp;<span class="ident" id="2634626">start</span><span class="op" id="2634631">,</span>&nbsp;<span class="ident" id="2634633">mid</span><span class="op" id="2634636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634639">symMerge</span><span class="op" id="2634647">(</span><span class="ident" id="2634648">data</span><span class="op" id="2634652">,</span>&nbsp;<span class="ident" id="2634654">mid</span><span class="op" id="2634657">,</span>&nbsp;<span class="ident" id="2634659">end</span><span class="op" id="2634662">,</span>&nbsp;<span class="ident" id="2634664">b</span><span class="op" id="2634665">)</span><br>
<span class="lineno">390</span><span class="op" id="2634667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2634670">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2634745">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2634800">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2634856">func</span>&nbsp;<span class="ident" id="2634861">rotate</span><span class="op" id="2634867">(</span><span class="ident" id="2634868">data</span>&nbsp;<span class="ident" id="2634873">Interface</span><span class="op" id="2634882">,</span>&nbsp;<span class="ident" id="2634884">a</span><span class="op" id="2634885">,</span>&nbsp;<span class="ident" id="2634887">m</span><span class="op" id="2634888">,</span>&nbsp;<span class="ident" id="2634890">b</span>&nbsp;<span class="builtintype" id="2634892">int</span><span class="op" id="2634895">)</span>&nbsp;<span class="op" id="2634897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634900">i</span>&nbsp;<span class="op" id="2634902">:=</span>&nbsp;<span class="ident" id="2634905">m</span>&nbsp;<span class="op" id="2634907">-</span>&nbsp;<span class="ident" id="2634909">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634912">if</span>&nbsp;<span class="ident" id="2634915">i</span>&nbsp;<span class="op" id="2634917">==</span>&nbsp;<span class="num" id="2634920">0</span>&nbsp;<span class="op" id="2634922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634926">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634934">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634937">j</span>&nbsp;<span class="op" id="2634939">:=</span>&nbsp;<span class="ident" id="2634942">b</span>&nbsp;<span class="op" id="2634944">-</span>&nbsp;<span class="ident" id="2634946">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634949">if</span>&nbsp;<span class="ident" id="2634952">j</span>&nbsp;<span class="op" id="2634954">==</span>&nbsp;<span class="num" id="2634957">0</span>&nbsp;<span class="op" id="2634959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634963">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634975">if</span>&nbsp;<span class="ident" id="2634978">i</span>&nbsp;<span class="op" id="2634980">==</span>&nbsp;<span class="ident" id="2634983">j</span>&nbsp;<span class="op" id="2634985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634989">swapRange</span><span class="op" id="2634998">(</span><span class="ident" id="2634999">data</span><span class="op" id="2635003">,</span>&nbsp;<span class="ident" id="2635005">a</span><span class="op" id="2635006">,</span>&nbsp;<span class="ident" id="2635008">m</span><span class="op" id="2635009">,</span>&nbsp;<span class="ident" id="2635011">i</span><span class="op" id="2635012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635016">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635028">p</span>&nbsp;<span class="op" id="2635030">:=</span>&nbsp;<span class="ident" id="2635033">a</span>&nbsp;<span class="op" id="2635035">+</span>&nbsp;<span class="ident" id="2635037">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635040">for</span>&nbsp;<span class="ident" id="2635044">i</span>&nbsp;<span class="op" id="2635046">!=</span>&nbsp;<span class="ident" id="2635049">j</span>&nbsp;<span class="op" id="2635051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635055">if</span>&nbsp;<span class="ident" id="2635058">i</span>&nbsp;<span class="op" id="2635060">&gt;</span>&nbsp;<span class="ident" id="2635062">j</span>&nbsp;<span class="op" id="2635064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635069">swapRange</span><span class="op" id="2635078">(</span><span class="ident" id="2635079">data</span><span class="op" id="2635083">,</span>&nbsp;<span class="ident" id="2635085">p</span><span class="op" id="2635086">-</span><span class="ident" id="2635087">i</span><span class="op" id="2635088">,</span>&nbsp;<span class="ident" id="2635090">p</span><span class="op" id="2635091">,</span>&nbsp;<span class="ident" id="2635093">j</span><span class="op" id="2635094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635099">i</span>&nbsp;<span class="op" id="2635101">-=</span>&nbsp;<span class="ident" id="2635104">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635108">}</span>&nbsp;<span class="keyword" id="2635110">else</span>&nbsp;<span class="op" id="2635115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635120">swapRange</span><span class="op" id="2635129">(</span><span class="ident" id="2635130">data</span><span class="op" id="2635134">,</span>&nbsp;<span class="ident" id="2635136">p</span><span class="op" id="2635137">-</span><span class="ident" id="2635138">i</span><span class="op" id="2635139">,</span>&nbsp;<span class="ident" id="2635141">p</span><span class="op" id="2635142">+</span><span class="ident" id="2635143">j</span><span class="op" id="2635144">-</span><span class="ident" id="2635145">i</span><span class="op" id="2635146">,</span>&nbsp;<span class="ident" id="2635148">i</span><span class="op" id="2635149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635154">j</span>&nbsp;<span class="op" id="2635156">-=</span>&nbsp;<span class="ident" id="2635159">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635166">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635169">swapRange</span><span class="op" id="2635178">(</span><span class="ident" id="2635179">data</span><span class="op" id="2635183">,</span>&nbsp;<span class="ident" id="2635185">p</span><span class="op" id="2635186">-</span><span class="ident" id="2635187">i</span><span class="op" id="2635188">,</span>&nbsp;<span class="ident" id="2635190">p</span><span class="op" id="2635191">,</span>&nbsp;<span class="ident" id="2635193">i</span><span class="op" id="2635194">)</span><br>
<span class="lineno"></span><span class="op" id="2635196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2635199">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
