<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7256930">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7256985">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7257039">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7257090">package</span>&nbsp;<span class="ident" id="7257098">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7257104">import</span>&nbsp;<span class="op" id="7257111">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7257114">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7257124">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7257131">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7257139">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7257149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7257152">const</span>&nbsp;<span class="op" id="7257158">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257161">numTestSamples</span>&nbsp;<span class="op" id="7257176">=</span>&nbsp;<span class="num" id="7257178">10000</span><br>
<span class="lineno"></span><span class="op" id="7257184">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7257187">type</span>&nbsp;<span class="ident" id="7257192">statsResults</span>&nbsp;<span class="keyword" id="7257205">struct</span>&nbsp;<span class="op" id="7257212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257215">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7257227">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257236">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7257248">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257257">closeEnough</span>&nbsp;<span class="builtintype" id="7257269">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257278">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7257290">float64</span><br>
<span class="lineno"></span><span class="op" id="7257298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7257301">func</span>&nbsp;<span class="ident" id="7257306">max</span><span class="op" id="7257309">(</span><span class="ident" id="7257310">a</span><span class="op" id="7257311">,</span>&nbsp;<span class="ident" id="7257313">b</span>&nbsp;<span class="builtintype" id="7257315">float64</span><span class="op" id="7257322">)</span>&nbsp;<span class="builtintype" id="7257324">float64</span>&nbsp;<span class="op" id="7257332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257335">if</span>&nbsp;<span class="ident" id="7257338">a</span>&nbsp;<span class="op" id="7257340">&gt;</span>&nbsp;<span class="ident" id="7257342">b</span>&nbsp;<span class="op" id="7257344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257348">return</span>&nbsp;<span class="ident" id="7257355">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7257358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257361">return</span>&nbsp;<span class="ident" id="7257368">b</span><br>
<span class="lineno">30</span><span class="op" id="7257370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7257373">func</span>&nbsp;<span class="ident" id="7257378">nearEqual</span><span class="op" id="7257387">(</span><span class="ident" id="7257388">a</span><span class="op" id="7257389">,</span>&nbsp;<span class="ident" id="7257391">b</span><span class="op" id="7257392">,</span>&nbsp;<span class="ident" id="7257394">closeEnough</span><span class="op" id="7257405">,</span>&nbsp;<span class="ident" id="7257407">maxError</span>&nbsp;<span class="builtintype" id="7257416">float64</span><span class="op" id="7257423">)</span>&nbsp;<span class="builtintype" id="7257425">bool</span>&nbsp;<span class="op" id="7257430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257433">absDiff</span>&nbsp;<span class="op" id="7257441">:=</span>&nbsp;<span class="ident" id="7257444">math</span><span class="op" id="7257448">.</span><span class="ident" id="7257449">Abs</span><span class="op" id="7257452">(</span><span class="ident" id="7257453">a</span>&nbsp;<span class="op" id="7257455">-</span>&nbsp;<span class="ident" id="7257457">b</span><span class="op" id="7257458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257461">if</span>&nbsp;<span class="ident" id="7257464">absDiff</span>&nbsp;<span class="op" id="7257472">&lt;</span>&nbsp;<span class="ident" id="7257474">closeEnough</span>&nbsp;<span class="op" id="7257486">{</span>&nbsp;<span class="comment" id="7257488">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257558">return</span>&nbsp;<span class="builtintype" id="7257565">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7257571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257574">return</span>&nbsp;<span class="ident" id="7257581">absDiff</span><span class="op" id="7257588">/</span><span class="ident" id="7257589">max</span><span class="op" id="7257592">(</span><span class="ident" id="7257593">math</span><span class="op" id="7257597">.</span><span class="ident" id="7257598">Abs</span><span class="op" id="7257601">(</span><span class="ident" id="7257602">a</span><span class="op" id="7257603">)</span><span class="op" id="7257604">,</span>&nbsp;<span class="ident" id="7257606">math</span><span class="op" id="7257610">.</span><span class="ident" id="7257611">Abs</span><span class="op" id="7257614">(</span><span class="ident" id="7257615">b</span><span class="op" id="7257616">)</span><span class="op" id="7257617">)</span>&nbsp;<span class="op" id="7257619">&lt;</span>&nbsp;<span class="ident" id="7257621">maxError</span><br>
<span class="lineno"></span><span class="op" id="7257630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7257633">var</span>&nbsp;<span class="ident" id="7257637">testSeeds</span>&nbsp;<span class="op" id="7257647">=</span>&nbsp;<span class="op" id="7257649">[</span><span class="op" id="7257650">]</span><span class="ident" id="7257651">int64</span><span class="op" id="7257656">{</span><span class="num" id="7257657">1</span><span class="op" id="7257658">,</span>&nbsp;<span class="num" id="7257660">1754801282</span><span class="op" id="7257670">,</span>&nbsp;<span class="num" id="7257672">1698661970</span><span class="op" id="7257682">,</span>&nbsp;<span class="num" id="7257684">1550503961</span><span class="op" id="7257694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7257697">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7257771">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7257804">func</span>&nbsp;<span class="op" id="7257809">(</span><span class="ident" id="7257810">this</span>&nbsp;<span class="op" id="7257815">*</span><span class="ident" id="7257816">statsResults</span><span class="op" id="7257828">)</span>&nbsp;<span class="ident" id="7257830">checkSimilarDistribution</span><span class="op" id="7257854">(</span><span class="ident" id="7257855">expected</span>&nbsp;<span class="op" id="7257864">*</span><span class="ident" id="7257865">statsResults</span><span class="op" id="7257877">)</span>&nbsp;<span class="builtintype" id="7257879">error</span>&nbsp;<span class="op" id="7257885">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257888">if</span>&nbsp;<span class="op" id="7257891">!</span><span class="ident" id="7257892">nearEqual</span><span class="op" id="7257901">(</span><span class="ident" id="7257902">this</span><span class="op" id="7257906">.</span><span class="ident" id="7257907">mean</span><span class="op" id="7257911">,</span>&nbsp;<span class="ident" id="7257913">expected</span><span class="op" id="7257921">.</span><span class="ident" id="7257922">mean</span><span class="op" id="7257926">,</span>&nbsp;<span class="ident" id="7257928">expected</span><span class="op" id="7257936">.</span><span class="ident" id="7257937">closeEnough</span><span class="op" id="7257948">,</span>&nbsp;<span class="ident" id="7257950">expected</span><span class="op" id="7257958">.</span><span class="ident" id="7257959">maxError</span><span class="op" id="7257967">)</span>&nbsp;<span class="op" id="7257969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257973">s</span>&nbsp;<span class="op" id="7257975">:=</span>&nbsp;<span class="ident" id="7257978">fmt</span><span class="op" id="7257981">.</span><span class="ident" id="7257982">Sprintf</span><span class="op" id="7257989">(</span><span class="string" id="7257990">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7258028">,</span>&nbsp;<span class="ident" id="7258030">this</span><span class="op" id="7258034">.</span><span class="ident" id="7258035">mean</span><span class="op" id="7258039">,</span>&nbsp;<span class="ident" id="7258041">expected</span><span class="op" id="7258049">.</span><span class="ident" id="7258050">mean</span><span class="op" id="7258054">,</span>&nbsp;<span class="ident" id="7258056">expected</span><span class="op" id="7258064">.</span><span class="ident" id="7258065">closeEnough</span><span class="op" id="7258076">,</span>&nbsp;<span class="ident" id="7258078">expected</span><span class="op" id="7258086">.</span><span class="ident" id="7258087">maxError</span><span class="op" id="7258095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258099">fmt</span><span class="op" id="7258102">.</span><span class="ident" id="7258103">Println</span><span class="op" id="7258110">(</span><span class="ident" id="7258111">s</span><span class="op" id="7258112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258116">return</span>&nbsp;<span class="ident" id="7258123">errors</span><span class="op" id="7258129">.</span><span class="ident" id="7258130">New</span><span class="op" id="7258133">(</span><span class="ident" id="7258134">s</span><span class="op" id="7258135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258138">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258141">if</span>&nbsp;<span class="op" id="7258144">!</span><span class="ident" id="7258145">nearEqual</span><span class="op" id="7258154">(</span><span class="ident" id="7258155">this</span><span class="op" id="7258159">.</span><span class="ident" id="7258160">stddev</span><span class="op" id="7258166">,</span>&nbsp;<span class="ident" id="7258168">expected</span><span class="op" id="7258176">.</span><span class="ident" id="7258177">stddev</span><span class="op" id="7258183">,</span>&nbsp;<span class="num" id="7258185">0</span><span class="op" id="7258186">,</span>&nbsp;<span class="ident" id="7258188">expected</span><span class="op" id="7258196">.</span><span class="ident" id="7258197">maxError</span><span class="op" id="7258205">)</span>&nbsp;<span class="op" id="7258207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258211">s</span>&nbsp;<span class="op" id="7258213">:=</span>&nbsp;<span class="ident" id="7258216">fmt</span><span class="op" id="7258219">.</span><span class="ident" id="7258220">Sprintf</span><span class="op" id="7258227">(</span><span class="string" id="7258228">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7258268">,</span>&nbsp;<span class="ident" id="7258270">this</span><span class="op" id="7258274">.</span><span class="ident" id="7258275">stddev</span><span class="op" id="7258281">,</span>&nbsp;<span class="ident" id="7258283">expected</span><span class="op" id="7258291">.</span><span class="ident" id="7258292">stddev</span><span class="op" id="7258298">,</span>&nbsp;<span class="ident" id="7258300">expected</span><span class="op" id="7258308">.</span><span class="ident" id="7258309">closeEnough</span><span class="op" id="7258320">,</span>&nbsp;<span class="ident" id="7258322">expected</span><span class="op" id="7258330">.</span><span class="ident" id="7258331">maxError</span><span class="op" id="7258339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258343">fmt</span><span class="op" id="7258346">.</span><span class="ident" id="7258347">Println</span><span class="op" id="7258354">(</span><span class="ident" id="7258355">s</span><span class="op" id="7258356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258360">return</span>&nbsp;<span class="ident" id="7258367">errors</span><span class="op" id="7258373">.</span><span class="ident" id="7258374">New</span><span class="op" id="7258377">(</span><span class="ident" id="7258378">s</span><span class="op" id="7258379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258382">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258385">return</span>&nbsp;<span class="ident" id="7258392">nil</span><br>
<span class="lineno"></span><span class="op" id="7258396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7258399">func</span>&nbsp;<span class="ident" id="7258404">getStatsResults</span><span class="op" id="7258419">(</span><span class="ident" id="7258420">samples</span>&nbsp;<span class="op" id="7258428">[</span><span class="op" id="7258429">]</span><span class="builtintype" id="7258430">float64</span><span class="op" id="7258437">)</span>&nbsp;<span class="op" id="7258439">*</span><span class="ident" id="7258440">statsResults</span>&nbsp;<span class="op" id="7258453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258456">res</span>&nbsp;<span class="op" id="7258460">:=</span>&nbsp;<span class="builtinfunc" id="7258463">new</span><span class="op" id="7258466">(</span><span class="ident" id="7258467">statsResults</span><span class="op" id="7258479">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258482">var</span>&nbsp;<span class="ident" id="7258486">sum</span><span class="op" id="7258489">,</span>&nbsp;<span class="ident" id="7258491">squaresum</span>&nbsp;<span class="builtintype" id="7258501">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258510">for</span>&nbsp;<span class="ident" id="7258514">_</span><span class="op" id="7258515">,</span>&nbsp;<span class="ident" id="7258517">s</span>&nbsp;<span class="op" id="7258519">:=</span>&nbsp;<span class="keyword" id="7258522">range</span>&nbsp;<span class="ident" id="7258528">samples</span>&nbsp;<span class="op" id="7258536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258540">sum</span>&nbsp;<span class="op" id="7258544">+=</span>&nbsp;<span class="ident" id="7258547">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258551">squaresum</span>&nbsp;<span class="op" id="7258561">+=</span>&nbsp;<span class="ident" id="7258564">s</span>&nbsp;<span class="op" id="7258566">*</span>&nbsp;<span class="ident" id="7258568">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258571">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258574">res</span><span class="op" id="7258577">.</span><span class="ident" id="7258578">mean</span>&nbsp;<span class="op" id="7258583">=</span>&nbsp;<span class="ident" id="7258585">sum</span>&nbsp;<span class="op" id="7258589">/</span>&nbsp;<span class="builtintype" id="7258591">float64</span><span class="op" id="7258598">(</span><span class="builtinfunc" id="7258599">len</span><span class="op" id="7258602">(</span><span class="ident" id="7258603">samples</span><span class="op" id="7258610">)</span><span class="op" id="7258611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258614">res</span><span class="op" id="7258617">.</span><span class="ident" id="7258618">stddev</span>&nbsp;<span class="op" id="7258625">=</span>&nbsp;<span class="ident" id="7258627">math</span><span class="op" id="7258631">.</span><span class="ident" id="7258632">Sqrt</span><span class="op" id="7258636">(</span><span class="ident" id="7258637">squaresum</span><span class="op" id="7258646">/</span><span class="builtintype" id="7258647">float64</span><span class="op" id="7258654">(</span><span class="builtinfunc" id="7258655">len</span><span class="op" id="7258658">(</span><span class="ident" id="7258659">samples</span><span class="op" id="7258666">)</span><span class="op" id="7258667">)</span>&nbsp;<span class="op" id="7258669">-</span>&nbsp;<span class="ident" id="7258671">res</span><span class="op" id="7258674">.</span><span class="ident" id="7258675">mean</span><span class="op" id="7258679">*</span><span class="ident" id="7258680">res</span><span class="op" id="7258683">.</span><span class="ident" id="7258684">mean</span><span class="op" id="7258688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258691">return</span>&nbsp;<span class="ident" id="7258698">res</span><br>
<span class="lineno"></span><span class="op" id="7258702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7258705">func</span>&nbsp;<span class="ident" id="7258710">checkSampleDistribution</span><span class="op" id="7258733">(</span><span class="ident" id="7258734">t</span>&nbsp;<span class="op" id="7258736">*</span><span class="ident" id="7258737">testing</span><span class="op" id="7258744">.</span><span class="ident" id="7258745">T</span><span class="op" id="7258746">,</span>&nbsp;<span class="ident" id="7258748">samples</span>&nbsp;<span class="op" id="7258756">[</span><span class="op" id="7258757">]</span><span class="builtintype" id="7258758">float64</span><span class="op" id="7258765">,</span>&nbsp;<span class="ident" id="7258767">expected</span>&nbsp;<span class="op" id="7258776">*</span><span class="ident" id="7258777">statsResults</span><span class="op" id="7258789">)</span>&nbsp;<span class="op" id="7258791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258794">actual</span>&nbsp;<span class="op" id="7258801">:=</span>&nbsp;<span class="ident" id="7258804">getStatsResults</span><span class="op" id="7258819">(</span><span class="ident" id="7258820">samples</span><span class="op" id="7258827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258830">err</span>&nbsp;<span class="op" id="7258834">:=</span>&nbsp;<span class="ident" id="7258837">actual</span><span class="op" id="7258843">.</span><span class="ident" id="7258844">checkSimilarDistribution</span><span class="op" id="7258868">(</span><span class="ident" id="7258869">expected</span><span class="op" id="7258877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258880">if</span>&nbsp;<span class="ident" id="7258883">err</span>&nbsp;<span class="op" id="7258887">!=</span>&nbsp;<span class="ident" id="7258890">nil</span>&nbsp;<span class="op" id="7258894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258898">t</span><span class="op" id="7258899">.</span><span class="ident" id="7258900">Errorf</span><span class="op" id="7258906">(</span><span class="ident" id="7258907">err</span><span class="op" id="7258910">.</span><span class="ident" id="7258911">Error</span><span class="op" id="7258916">(</span><span class="op" id="7258917">)</span><span class="op" id="7258918">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258921">}</span><br>
<span class="lineno"></span><span class="op" id="7258923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7258926">func</span>&nbsp;<span class="ident" id="7258931">checkSampleSliceDistributions</span><span class="op" id="7258960">(</span><span class="ident" id="7258961">t</span>&nbsp;<span class="op" id="7258963">*</span><span class="ident" id="7258964">testing</span><span class="op" id="7258971">.</span><span class="ident" id="7258972">T</span><span class="op" id="7258973">,</span>&nbsp;<span class="ident" id="7258975">samples</span>&nbsp;<span class="op" id="7258983">[</span><span class="op" id="7258984">]</span><span class="builtintype" id="7258985">float64</span><span class="op" id="7258992">,</span>&nbsp;<span class="ident" id="7258994">nslices</span>&nbsp;<span class="builtintype" id="7259002">int</span><span class="op" id="7259005">,</span>&nbsp;<span class="ident" id="7259007">expected</span>&nbsp;<span class="op" id="7259016">*</span><span class="ident" id="7259017">statsResults</span><span class="op" id="7259029">)</span>&nbsp;<span class="op" id="7259031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259034">chunk</span>&nbsp;<span class="op" id="7259040">:=</span>&nbsp;<span class="builtinfunc" id="7259043">len</span><span class="op" id="7259046">(</span><span class="ident" id="7259047">samples</span><span class="op" id="7259054">)</span>&nbsp;<span class="op" id="7259056">/</span>&nbsp;<span class="ident" id="7259058">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259067">for</span>&nbsp;<span class="ident" id="7259071">i</span>&nbsp;<span class="op" id="7259073">:=</span>&nbsp;<span class="num" id="7259076">0</span><span class="op" id="7259077">;</span>&nbsp;<span class="ident" id="7259079">i</span>&nbsp;<span class="op" id="7259081">&lt;</span>&nbsp;<span class="ident" id="7259083">nslices</span><span class="op" id="7259090">;</span>&nbsp;<span class="ident" id="7259092">i</span><span class="op" id="7259093">++</span>&nbsp;<span class="op" id="7259096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259100">low</span>&nbsp;<span class="op" id="7259104">:=</span>&nbsp;<span class="ident" id="7259107">i</span>&nbsp;<span class="op" id="7259109">*</span>&nbsp;<span class="ident" id="7259111">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259119">var</span>&nbsp;<span class="ident" id="7259123">high</span>&nbsp;<span class="builtintype" id="7259128">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259134">if</span>&nbsp;<span class="ident" id="7259137">i</span>&nbsp;<span class="op" id="7259139">==</span>&nbsp;<span class="ident" id="7259142">nslices</span><span class="op" id="7259149">-</span><span class="num" id="7259150">1</span>&nbsp;<span class="op" id="7259152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259157">high</span>&nbsp;<span class="op" id="7259162">=</span>&nbsp;<span class="builtinfunc" id="7259164">len</span><span class="op" id="7259167">(</span><span class="ident" id="7259168">samples</span><span class="op" id="7259175">)</span>&nbsp;<span class="op" id="7259177">-</span>&nbsp;<span class="num" id="7259179">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259183">}</span>&nbsp;<span class="keyword" id="7259185">else</span>&nbsp;<span class="op" id="7259190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259195">high</span>&nbsp;<span class="op" id="7259200">=</span>&nbsp;<span class="op" id="7259202">(</span><span class="ident" id="7259203">i</span>&nbsp;<span class="op" id="7259205">+</span>&nbsp;<span class="num" id="7259207">1</span><span class="op" id="7259208">)</span>&nbsp;<span class="op" id="7259210">*</span>&nbsp;<span class="ident" id="7259212">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259224">checkSampleDistribution</span><span class="op" id="7259247">(</span><span class="ident" id="7259248">t</span><span class="op" id="7259249">,</span>&nbsp;<span class="ident" id="7259251">samples</span><span class="op" id="7259258">[</span><span class="ident" id="7259259">low</span><span class="op" id="7259262">:</span><span class="ident" id="7259263">high</span><span class="op" id="7259267">]</span><span class="op" id="7259268">,</span>&nbsp;<span class="ident" id="7259270">expected</span><span class="op" id="7259278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259281">}</span><br>
<span class="lineno">90</span><span class="op" id="7259283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7259286">//</span><br>
<span class="lineno"></span><span class="comment" id="7259289">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7259318">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7259322">func</span>&nbsp;<span class="ident" id="7259327">generateNormalSamples</span><span class="op" id="7259348">(</span><span class="ident" id="7259349">nsamples</span>&nbsp;<span class="builtintype" id="7259358">int</span><span class="op" id="7259361">,</span>&nbsp;<span class="ident" id="7259363">mean</span><span class="op" id="7259367">,</span>&nbsp;<span class="ident" id="7259369">stddev</span>&nbsp;<span class="builtintype" id="7259376">float64</span><span class="op" id="7259383">,</span>&nbsp;<span class="ident" id="7259385">seed</span>&nbsp;<span class="ident" id="7259390">int64</span><span class="op" id="7259395">)</span>&nbsp;<span class="op" id="7259397">[</span><span class="op" id="7259398">]</span><span class="builtintype" id="7259399">float64</span>&nbsp;<span class="op" id="7259407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259410">r</span>&nbsp;<span class="op" id="7259412">:=</span>&nbsp;<span class="ident" id="7259415">New</span><span class="op" id="7259418">(</span><span class="ident" id="7259419">NewSource</span><span class="op" id="7259428">(</span><span class="ident" id="7259429">seed</span><span class="op" id="7259433">)</span><span class="op" id="7259434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259437">samples</span>&nbsp;<span class="op" id="7259445">:=</span>&nbsp;<span class="builtinfunc" id="7259448">make</span><span class="op" id="7259452">(</span><span class="op" id="7259453">[</span><span class="op" id="7259454">]</span><span class="builtintype" id="7259455">float64</span><span class="op" id="7259462">,</span>&nbsp;<span class="ident" id="7259464">nsamples</span><span class="op" id="7259472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259475">for</span>&nbsp;<span class="ident" id="7259479">i</span>&nbsp;<span class="op" id="7259481">:=</span>&nbsp;<span class="keyword" id="7259484">range</span>&nbsp;<span class="ident" id="7259490">samples</span>&nbsp;<span class="op" id="7259498">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259502">samples</span><span class="op" id="7259509">[</span><span class="ident" id="7259510">i</span><span class="op" id="7259511">]</span>&nbsp;<span class="op" id="7259513">=</span>&nbsp;<span class="ident" id="7259515">r</span><span class="op" id="7259516">.</span><span class="ident" id="7259517">NormFloat64</span><span class="op" id="7259528">(</span><span class="op" id="7259529">)</span><span class="op" id="7259530">*</span><span class="ident" id="7259531">stddev</span>&nbsp;<span class="op" id="7259538">+</span>&nbsp;<span class="ident" id="7259540">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259549">return</span>&nbsp;<span class="ident" id="7259556">samples</span><br>
<span class="lineno"></span><span class="op" id="7259564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7259567">func</span>&nbsp;<span class="ident" id="7259572">testNormalDistribution</span><span class="op" id="7259594">(</span><span class="ident" id="7259595">t</span>&nbsp;<span class="op" id="7259597">*</span><span class="ident" id="7259598">testing</span><span class="op" id="7259605">.</span><span class="ident" id="7259606">T</span><span class="op" id="7259607">,</span>&nbsp;<span class="ident" id="7259609">nsamples</span>&nbsp;<span class="builtintype" id="7259618">int</span><span class="op" id="7259621">,</span>&nbsp;<span class="ident" id="7259623">mean</span><span class="op" id="7259627">,</span>&nbsp;<span class="ident" id="7259629">stddev</span>&nbsp;<span class="builtintype" id="7259636">float64</span><span class="op" id="7259643">,</span>&nbsp;<span class="ident" id="7259645">seed</span>&nbsp;<span class="ident" id="7259650">int64</span><span class="op" id="7259655">)</span>&nbsp;<span class="op" id="7259657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7259660">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259757">samples</span>&nbsp;<span class="op" id="7259765">:=</span>&nbsp;<span class="ident" id="7259768">generateNormalSamples</span><span class="op" id="7259789">(</span><span class="ident" id="7259790">nsamples</span><span class="op" id="7259798">,</span>&nbsp;<span class="ident" id="7259800">mean</span><span class="op" id="7259804">,</span>&nbsp;<span class="ident" id="7259806">stddev</span><span class="op" id="7259812">,</span>&nbsp;<span class="ident" id="7259814">seed</span><span class="op" id="7259818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259821">errorScale</span>&nbsp;<span class="op" id="7259832">:=</span>&nbsp;<span class="ident" id="7259835">max</span><span class="op" id="7259838">(</span><span class="num" id="7259839">1.0</span><span class="op" id="7259842">,</span>&nbsp;<span class="ident" id="7259844">stddev</span><span class="op" id="7259850">)</span>&nbsp;<span class="comment" id="7259852">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259881">expected</span>&nbsp;<span class="op" id="7259890">:=</span>&nbsp;<span class="op" id="7259893">&amp;</span><span class="ident" id="7259894">statsResults</span><span class="op" id="7259906">{</span><span class="ident" id="7259907">mean</span><span class="op" id="7259911">,</span>&nbsp;<span class="ident" id="7259913">stddev</span><span class="op" id="7259919">,</span>&nbsp;<span class="num" id="7259921">0.10</span>&nbsp;<span class="op" id="7259926">*</span>&nbsp;<span class="ident" id="7259928">errorScale</span><span class="op" id="7259938">,</span>&nbsp;<span class="num" id="7259940">0.08</span>&nbsp;<span class="op" id="7259945">*</span>&nbsp;<span class="ident" id="7259947">errorScale</span><span class="op" id="7259957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7259961">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260030">checkSampleDistribution</span><span class="op" id="7260053">(</span><span class="ident" id="7260054">t</span><span class="op" id="7260055">,</span>&nbsp;<span class="ident" id="7260057">samples</span><span class="op" id="7260064">,</span>&nbsp;<span class="ident" id="7260066">expected</span><span class="op" id="7260074">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7260078">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260153">checkSampleSliceDistributions</span><span class="op" id="7260182">(</span><span class="ident" id="7260183">t</span><span class="op" id="7260184">,</span>&nbsp;<span class="ident" id="7260186">samples</span><span class="op" id="7260193">,</span>&nbsp;<span class="num" id="7260195">2</span><span class="op" id="7260196">,</span>&nbsp;<span class="ident" id="7260198">expected</span><span class="op" id="7260206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7260210">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260284">checkSampleSliceDistributions</span><span class="op" id="7260313">(</span><span class="ident" id="7260314">t</span><span class="op" id="7260315">,</span>&nbsp;<span class="ident" id="7260317">samples</span><span class="op" id="7260324">,</span>&nbsp;<span class="num" id="7260326">7</span><span class="op" id="7260327">,</span>&nbsp;<span class="ident" id="7260329">expected</span><span class="op" id="7260337">)</span><br>
<span class="lineno">120</span><span class="op" id="7260339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7260342">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7260359">func</span>&nbsp;<span class="ident" id="7260364">TestStandardNormalValues</span><span class="op" id="7260388">(</span><span class="ident" id="7260389">t</span>&nbsp;<span class="op" id="7260391">*</span><span class="ident" id="7260392">testing</span><span class="op" id="7260399">.</span><span class="ident" id="7260400">T</span><span class="op" id="7260401">)</span>&nbsp;<span class="op" id="7260403">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260406">for</span>&nbsp;<span class="ident" id="7260410">_</span><span class="op" id="7260411">,</span>&nbsp;<span class="ident" id="7260413">seed</span>&nbsp;<span class="op" id="7260418">:=</span>&nbsp;<span class="keyword" id="7260421">range</span>&nbsp;<span class="ident" id="7260427">testSeeds</span>&nbsp;<span class="op" id="7260437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260441">testNormalDistribution</span><span class="op" id="7260463">(</span><span class="ident" id="7260464">t</span><span class="op" id="7260465">,</span>&nbsp;<span class="ident" id="7260467">numTestSamples</span><span class="op" id="7260481">,</span>&nbsp;<span class="num" id="7260483">0</span><span class="op" id="7260484">,</span>&nbsp;<span class="num" id="7260486">1</span><span class="op" id="7260487">,</span>&nbsp;<span class="ident" id="7260489">seed</span><span class="op" id="7260493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260496">}</span><br>
<span class="lineno"></span><span class="op" id="7260498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7260501">func</span>&nbsp;<span class="ident" id="7260506">TestNonStandardNormalValues</span><span class="op" id="7260533">(</span><span class="ident" id="7260534">t</span>&nbsp;<span class="op" id="7260536">*</span><span class="ident" id="7260537">testing</span><span class="op" id="7260544">.</span><span class="ident" id="7260545">T</span><span class="op" id="7260546">)</span>&nbsp;<span class="op" id="7260548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260551">sdmax</span>&nbsp;<span class="op" id="7260557">:=</span>&nbsp;<span class="num" id="7260560">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260568">mmax</span>&nbsp;<span class="op" id="7260573">:=</span>&nbsp;<span class="num" id="7260576">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260584">if</span>&nbsp;<span class="ident" id="7260587">testing</span><span class="op" id="7260594">.</span><span class="ident" id="7260595">Short</span><span class="op" id="7260600">(</span><span class="op" id="7260601">)</span>&nbsp;<span class="op" id="7260603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260607">sdmax</span>&nbsp;<span class="op" id="7260613">=</span>&nbsp;<span class="num" id="7260615">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260619">mmax</span>&nbsp;<span class="op" id="7260624">=</span>&nbsp;<span class="num" id="7260626">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260632">for</span>&nbsp;<span class="ident" id="7260636">sd</span>&nbsp;<span class="op" id="7260639">:=</span>&nbsp;<span class="num" id="7260642">0.5</span><span class="op" id="7260645">;</span>&nbsp;<span class="ident" id="7260647">sd</span>&nbsp;<span class="op" id="7260650">&lt;</span>&nbsp;<span class="ident" id="7260652">sdmax</span><span class="op" id="7260657">;</span>&nbsp;<span class="ident" id="7260659">sd</span>&nbsp;<span class="op" id="7260662">*=</span>&nbsp;<span class="num" id="7260665">2</span>&nbsp;<span class="op" id="7260667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260671">for</span>&nbsp;<span class="ident" id="7260675">m</span>&nbsp;<span class="op" id="7260677">:=</span>&nbsp;<span class="num" id="7260680">0.5</span><span class="op" id="7260683">;</span>&nbsp;<span class="ident" id="7260685">m</span>&nbsp;<span class="op" id="7260687">&lt;</span>&nbsp;<span class="ident" id="7260689">mmax</span><span class="op" id="7260693">;</span>&nbsp;<span class="ident" id="7260695">m</span>&nbsp;<span class="op" id="7260697">*=</span>&nbsp;<span class="num" id="7260700">2</span>&nbsp;<span class="op" id="7260702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260707">for</span>&nbsp;<span class="ident" id="7260711">_</span><span class="op" id="7260712">,</span>&nbsp;<span class="ident" id="7260714">seed</span>&nbsp;<span class="op" id="7260719">:=</span>&nbsp;<span class="keyword" id="7260722">range</span>&nbsp;<span class="ident" id="7260728">testSeeds</span>&nbsp;<span class="op" id="7260738">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260744">testNormalDistribution</span><span class="op" id="7260766">(</span><span class="ident" id="7260767">t</span><span class="op" id="7260768">,</span>&nbsp;<span class="ident" id="7260770">numTestSamples</span><span class="op" id="7260784">,</span>&nbsp;<span class="ident" id="7260786">m</span><span class="op" id="7260787">,</span>&nbsp;<span class="ident" id="7260789">sd</span><span class="op" id="7260791">,</span>&nbsp;<span class="ident" id="7260793">seed</span><span class="op" id="7260797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260803">if</span>&nbsp;<span class="ident" id="7260806">testing</span><span class="op" id="7260813">.</span><span class="ident" id="7260814">Short</span><span class="op" id="7260819">(</span><span class="op" id="7260820">)</span>&nbsp;<span class="op" id="7260822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7260829">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260844">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7260851">}</span><br>
<span class="lineno"></span><span class="op" id="7260853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7260856">//</span><br>
<span class="lineno">150</span><span class="comment" id="7260859">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7260893">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7260897">func</span>&nbsp;<span class="ident" id="7260902">generateExponentialSamples</span><span class="op" id="7260928">(</span><span class="ident" id="7260929">nsamples</span>&nbsp;<span class="builtintype" id="7260938">int</span><span class="op" id="7260941">,</span>&nbsp;<span class="ident" id="7260943">rate</span>&nbsp;<span class="builtintype" id="7260948">float64</span><span class="op" id="7260955">,</span>&nbsp;<span class="ident" id="7260957">seed</span>&nbsp;<span class="ident" id="7260962">int64</span><span class="op" id="7260967">)</span>&nbsp;<span class="op" id="7260969">[</span><span class="op" id="7260970">]</span><span class="builtintype" id="7260971">float64</span>&nbsp;<span class="op" id="7260979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7260982">r</span>&nbsp;<span class="op" id="7260984">:=</span>&nbsp;<span class="ident" id="7260987">New</span><span class="op" id="7260990">(</span><span class="ident" id="7260991">NewSource</span><span class="op" id="7261000">(</span><span class="ident" id="7261001">seed</span><span class="op" id="7261005">)</span><span class="op" id="7261006">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261009">samples</span>&nbsp;<span class="op" id="7261017">:=</span>&nbsp;<span class="builtinfunc" id="7261020">make</span><span class="op" id="7261024">(</span><span class="op" id="7261025">[</span><span class="op" id="7261026">]</span><span class="builtintype" id="7261027">float64</span><span class="op" id="7261034">,</span>&nbsp;<span class="ident" id="7261036">nsamples</span><span class="op" id="7261044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7261047">for</span>&nbsp;<span class="ident" id="7261051">i</span>&nbsp;<span class="op" id="7261053">:=</span>&nbsp;<span class="keyword" id="7261056">range</span>&nbsp;<span class="ident" id="7261062">samples</span>&nbsp;<span class="op" id="7261070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261074">samples</span><span class="op" id="7261081">[</span><span class="ident" id="7261082">i</span><span class="op" id="7261083">]</span>&nbsp;<span class="op" id="7261085">=</span>&nbsp;<span class="ident" id="7261087">r</span><span class="op" id="7261088">.</span><span class="ident" id="7261089">ExpFloat64</span><span class="op" id="7261099">(</span><span class="op" id="7261100">)</span>&nbsp;<span class="op" id="7261102">/</span>&nbsp;<span class="ident" id="7261104">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7261110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7261113">return</span>&nbsp;<span class="ident" id="7261120">samples</span><br>
<span class="lineno">160</span><span class="op" id="7261128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7261131">func</span>&nbsp;<span class="ident" id="7261136">testExponentialDistribution</span><span class="op" id="7261163">(</span><span class="ident" id="7261164">t</span>&nbsp;<span class="op" id="7261166">*</span><span class="ident" id="7261167">testing</span><span class="op" id="7261174">.</span><span class="ident" id="7261175">T</span><span class="op" id="7261176">,</span>&nbsp;<span class="ident" id="7261178">nsamples</span>&nbsp;<span class="builtintype" id="7261187">int</span><span class="op" id="7261190">,</span>&nbsp;<span class="ident" id="7261192">rate</span>&nbsp;<span class="builtintype" id="7261197">float64</span><span class="op" id="7261204">,</span>&nbsp;<span class="ident" id="7261206">seed</span>&nbsp;<span class="ident" id="7261211">int64</span><span class="op" id="7261216">)</span>&nbsp;<span class="op" id="7261218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7261221">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261300">mean</span>&nbsp;<span class="op" id="7261305">:=</span>&nbsp;<span class="num" id="7261308">1</span>&nbsp;<span class="op" id="7261310">/</span>&nbsp;<span class="ident" id="7261312">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261318">stddev</span>&nbsp;<span class="op" id="7261325">:=</span>&nbsp;<span class="ident" id="7261328">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261335">samples</span>&nbsp;<span class="op" id="7261343">:=</span>&nbsp;<span class="ident" id="7261346">generateExponentialSamples</span><span class="op" id="7261372">(</span><span class="ident" id="7261373">nsamples</span><span class="op" id="7261381">,</span>&nbsp;<span class="ident" id="7261383">rate</span><span class="op" id="7261387">,</span>&nbsp;<span class="ident" id="7261389">seed</span><span class="op" id="7261393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261396">errorScale</span>&nbsp;<span class="op" id="7261407">:=</span>&nbsp;<span class="ident" id="7261410">max</span><span class="op" id="7261413">(</span><span class="num" id="7261414">1.0</span><span class="op" id="7261417">,</span>&nbsp;<span class="num" id="7261419">1</span><span class="op" id="7261420">/</span><span class="ident" id="7261421">rate</span><span class="op" id="7261425">)</span>&nbsp;<span class="comment" id="7261427">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261473">expected</span>&nbsp;<span class="op" id="7261482">:=</span>&nbsp;<span class="op" id="7261485">&amp;</span><span class="ident" id="7261486">statsResults</span><span class="op" id="7261498">{</span><span class="ident" id="7261499">mean</span><span class="op" id="7261503">,</span>&nbsp;<span class="ident" id="7261505">stddev</span><span class="op" id="7261511">,</span>&nbsp;<span class="num" id="7261513">0.10</span>&nbsp;<span class="op" id="7261518">*</span>&nbsp;<span class="ident" id="7261520">errorScale</span><span class="op" id="7261530">,</span>&nbsp;<span class="num" id="7261532">0.20</span>&nbsp;<span class="op" id="7261537">*</span>&nbsp;<span class="ident" id="7261539">errorScale</span><span class="op" id="7261549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7261553">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261622">checkSampleDistribution</span><span class="op" id="7261645">(</span><span class="ident" id="7261646">t</span><span class="op" id="7261647">,</span>&nbsp;<span class="ident" id="7261649">samples</span><span class="op" id="7261656">,</span>&nbsp;<span class="ident" id="7261658">expected</span><span class="op" id="7261666">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7261670">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261745">checkSampleSliceDistributions</span><span class="op" id="7261774">(</span><span class="ident" id="7261775">t</span><span class="op" id="7261776">,</span>&nbsp;<span class="ident" id="7261778">samples</span><span class="op" id="7261785">,</span>&nbsp;<span class="num" id="7261787">2</span><span class="op" id="7261788">,</span>&nbsp;<span class="ident" id="7261790">expected</span><span class="op" id="7261798">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7261802">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7261876">checkSampleSliceDistributions</span><span class="op" id="7261905">(</span><span class="ident" id="7261906">t</span><span class="op" id="7261907">,</span>&nbsp;<span class="ident" id="7261909">samples</span><span class="op" id="7261916">,</span>&nbsp;<span class="num" id="7261918">7</span><span class="op" id="7261919">,</span>&nbsp;<span class="ident" id="7261921">expected</span><span class="op" id="7261929">)</span><br>
<span class="lineno">180</span><span class="op" id="7261931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7261934">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7261951">func</span>&nbsp;<span class="ident" id="7261956">TestStandardExponentialValues</span><span class="op" id="7261985">(</span><span class="ident" id="7261986">t</span>&nbsp;<span class="op" id="7261988">*</span><span class="ident" id="7261989">testing</span><span class="op" id="7261996">.</span><span class="ident" id="7261997">T</span><span class="op" id="7261998">)</span>&nbsp;<span class="op" id="7262000">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262003">for</span>&nbsp;<span class="ident" id="7262007">_</span><span class="op" id="7262008">,</span>&nbsp;<span class="ident" id="7262010">seed</span>&nbsp;<span class="op" id="7262015">:=</span>&nbsp;<span class="keyword" id="7262018">range</span>&nbsp;<span class="ident" id="7262024">testSeeds</span>&nbsp;<span class="op" id="7262034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262038">testExponentialDistribution</span><span class="op" id="7262065">(</span><span class="ident" id="7262066">t</span><span class="op" id="7262067">,</span>&nbsp;<span class="ident" id="7262069">numTestSamples</span><span class="op" id="7262083">,</span>&nbsp;<span class="num" id="7262085">1</span><span class="op" id="7262086">,</span>&nbsp;<span class="ident" id="7262088">seed</span><span class="op" id="7262092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7262095">}</span><br>
<span class="lineno"></span><span class="op" id="7262097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7262100">func</span>&nbsp;<span class="ident" id="7262105">TestNonStandardExponentialValues</span><span class="op" id="7262137">(</span><span class="ident" id="7262138">t</span>&nbsp;<span class="op" id="7262140">*</span><span class="ident" id="7262141">testing</span><span class="op" id="7262148">.</span><span class="ident" id="7262149">T</span><span class="op" id="7262150">)</span>&nbsp;<span class="op" id="7262152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262155">for</span>&nbsp;<span class="ident" id="7262159">rate</span>&nbsp;<span class="op" id="7262164">:=</span>&nbsp;<span class="num" id="7262167">0.05</span><span class="op" id="7262171">;</span>&nbsp;<span class="ident" id="7262173">rate</span>&nbsp;<span class="op" id="7262178">&lt;</span>&nbsp;<span class="num" id="7262180">10</span><span class="op" id="7262182">;</span>&nbsp;<span class="ident" id="7262184">rate</span>&nbsp;<span class="op" id="7262189">*=</span>&nbsp;<span class="num" id="7262192">2</span>&nbsp;<span class="op" id="7262194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262198">for</span>&nbsp;<span class="ident" id="7262202">_</span><span class="op" id="7262203">,</span>&nbsp;<span class="ident" id="7262205">seed</span>&nbsp;<span class="op" id="7262210">:=</span>&nbsp;<span class="keyword" id="7262213">range</span>&nbsp;<span class="ident" id="7262219">testSeeds</span>&nbsp;<span class="op" id="7262229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262234">testExponentialDistribution</span><span class="op" id="7262261">(</span><span class="ident" id="7262262">t</span><span class="op" id="7262263">,</span>&nbsp;<span class="ident" id="7262265">numTestSamples</span><span class="op" id="7262279">,</span>&nbsp;<span class="ident" id="7262281">rate</span><span class="op" id="7262285">,</span>&nbsp;<span class="ident" id="7262287">seed</span><span class="op" id="7262291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262296">if</span>&nbsp;<span class="ident" id="7262299">testing</span><span class="op" id="7262306">.</span><span class="ident" id="7262307">Short</span><span class="op" id="7262312">(</span><span class="op" id="7262313">)</span>&nbsp;<span class="op" id="7262315">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262321">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7262330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7262334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7262337">}</span><br>
<span class="lineno"></span><span class="op" id="7262339">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7262342">//</span><br>
<span class="lineno"></span><span class="comment" id="7262345">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7262371">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7262375">func</span>&nbsp;<span class="ident" id="7262380">initNorm</span><span class="op" id="7262388">(</span><span class="op" id="7262389">)</span>&nbsp;<span class="op" id="7262391">(</span><span class="ident" id="7262392">testKn</span>&nbsp;<span class="op" id="7262399">[</span><span class="op" id="7262400">]</span><span class="builtintype" id="7262401">uint32</span><span class="op" id="7262407">,</span>&nbsp;<span class="ident" id="7262409">testWn</span><span class="op" id="7262415">,</span>&nbsp;<span class="ident" id="7262417">testFn</span>&nbsp;<span class="op" id="7262424">[</span><span class="op" id="7262425">]</span><span class="builtintype" id="7262426">float32</span><span class="op" id="7262433">)</span>&nbsp;<span class="op" id="7262435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262438">const</span>&nbsp;<span class="ident" id="7262444">m1</span>&nbsp;<span class="op" id="7262447">=</span>&nbsp;<span class="num" id="7262449">1</span>&nbsp;<span class="op" id="7262451">&lt;&lt;</span>&nbsp;<span class="num" id="7262454">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262458">var</span>&nbsp;<span class="op" id="7262462">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262466">dn</span>&nbsp;<span class="builtintype" id="7262469">float64</span>&nbsp;<span class="op" id="7262477">=</span>&nbsp;<span class="ident" id="7262479">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262484">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7262495">=</span>&nbsp;<span class="ident" id="7262497">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262502">vn</span>&nbsp;<span class="builtintype" id="7262505">float64</span>&nbsp;<span class="op" id="7262513">=</span>&nbsp;<span class="num" id="7262515">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7262536">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262540">testKn</span>&nbsp;<span class="op" id="7262547">=</span>&nbsp;<span class="builtinfunc" id="7262549">make</span><span class="op" id="7262553">(</span><span class="op" id="7262554">[</span><span class="op" id="7262555">]</span><span class="builtintype" id="7262556">uint32</span><span class="op" id="7262562">,</span>&nbsp;<span class="num" id="7262564">128</span><span class="op" id="7262567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262570">testWn</span>&nbsp;<span class="op" id="7262577">=</span>&nbsp;<span class="builtinfunc" id="7262579">make</span><span class="op" id="7262583">(</span><span class="op" id="7262584">[</span><span class="op" id="7262585">]</span><span class="builtintype" id="7262586">float32</span><span class="op" id="7262593">,</span>&nbsp;<span class="num" id="7262595">128</span><span class="op" id="7262598">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262601">testFn</span>&nbsp;<span class="op" id="7262608">=</span>&nbsp;<span class="builtinfunc" id="7262610">make</span><span class="op" id="7262614">(</span><span class="op" id="7262615">[</span><span class="op" id="7262616">]</span><span class="builtintype" id="7262617">float32</span><span class="op" id="7262624">,</span>&nbsp;<span class="num" id="7262626">128</span><span class="op" id="7262629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262633">q</span>&nbsp;<span class="op" id="7262635">:=</span>&nbsp;<span class="ident" id="7262638">vn</span>&nbsp;<span class="op" id="7262641">/</span>&nbsp;<span class="ident" id="7262643">math</span><span class="op" id="7262647">.</span><span class="ident" id="7262648">Exp</span><span class="op" id="7262651">(</span><span class="op" id="7262652">-</span><span class="num" id="7262653">0.5</span><span class="op" id="7262656">*</span><span class="ident" id="7262657">dn</span><span class="op" id="7262659">*</span><span class="ident" id="7262660">dn</span><span class="op" id="7262662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262665">testKn</span><span class="op" id="7262671">[</span><span class="num" id="7262672">0</span><span class="op" id="7262673">]</span>&nbsp;<span class="op" id="7262675">=</span>&nbsp;<span class="builtintype" id="7262677">uint32</span><span class="op" id="7262683">(</span><span class="op" id="7262684">(</span><span class="ident" id="7262685">dn</span>&nbsp;<span class="op" id="7262688">/</span>&nbsp;<span class="ident" id="7262690">q</span><span class="op" id="7262691">)</span>&nbsp;<span class="op" id="7262693">*</span>&nbsp;<span class="ident" id="7262695">m1</span><span class="op" id="7262697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262700">testKn</span><span class="op" id="7262706">[</span><span class="num" id="7262707">1</span><span class="op" id="7262708">]</span>&nbsp;<span class="op" id="7262710">=</span>&nbsp;<span class="num" id="7262712">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262715">testWn</span><span class="op" id="7262721">[</span><span class="num" id="7262722">0</span><span class="op" id="7262723">]</span>&nbsp;<span class="op" id="7262725">=</span>&nbsp;<span class="builtintype" id="7262727">float32</span><span class="op" id="7262734">(</span><span class="ident" id="7262735">q</span>&nbsp;<span class="op" id="7262737">/</span>&nbsp;<span class="ident" id="7262739">m1</span><span class="op" id="7262741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262744">testWn</span><span class="op" id="7262750">[</span><span class="num" id="7262751">127</span><span class="op" id="7262754">]</span>&nbsp;<span class="op" id="7262756">=</span>&nbsp;<span class="builtintype" id="7262758">float32</span><span class="op" id="7262765">(</span><span class="ident" id="7262766">dn</span>&nbsp;<span class="op" id="7262769">/</span>&nbsp;<span class="ident" id="7262771">m1</span><span class="op" id="7262773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262776">testFn</span><span class="op" id="7262782">[</span><span class="num" id="7262783">0</span><span class="op" id="7262784">]</span>&nbsp;<span class="op" id="7262786">=</span>&nbsp;<span class="num" id="7262788">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262793">testFn</span><span class="op" id="7262799">[</span><span class="num" id="7262800">127</span><span class="op" id="7262803">]</span>&nbsp;<span class="op" id="7262805">=</span>&nbsp;<span class="builtintype" id="7262807">float32</span><span class="op" id="7262814">(</span><span class="ident" id="7262815">math</span><span class="op" id="7262819">.</span><span class="ident" id="7262820">Exp</span><span class="op" id="7262823">(</span><span class="op" id="7262824">-</span><span class="num" id="7262825">0.5</span>&nbsp;<span class="op" id="7262829">*</span>&nbsp;<span class="ident" id="7262831">dn</span>&nbsp;<span class="op" id="7262834">*</span>&nbsp;<span class="ident" id="7262836">dn</span><span class="op" id="7262838">)</span><span class="op" id="7262839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7262842">for</span>&nbsp;<span class="ident" id="7262846">i</span>&nbsp;<span class="op" id="7262848">:=</span>&nbsp;<span class="num" id="7262851">126</span><span class="op" id="7262854">;</span>&nbsp;<span class="ident" id="7262856">i</span>&nbsp;<span class="op" id="7262858">&gt;=</span>&nbsp;<span class="num" id="7262861">1</span><span class="op" id="7262862">;</span>&nbsp;<span class="ident" id="7262864">i</span><span class="op" id="7262865">--</span>&nbsp;<span class="op" id="7262868">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262872">dn</span>&nbsp;<span class="op" id="7262875">=</span>&nbsp;<span class="ident" id="7262877">math</span><span class="op" id="7262881">.</span><span class="ident" id="7262882">Sqrt</span><span class="op" id="7262886">(</span><span class="op" id="7262887">-</span><span class="num" id="7262888">2.0</span>&nbsp;<span class="op" id="7262892">*</span>&nbsp;<span class="ident" id="7262894">math</span><span class="op" id="7262898">.</span><span class="ident" id="7262899">Log</span><span class="op" id="7262902">(</span><span class="ident" id="7262903">vn</span><span class="op" id="7262905">/</span><span class="ident" id="7262906">dn</span><span class="op" id="7262908">+</span><span class="ident" id="7262909">math</span><span class="op" id="7262913">.</span><span class="ident" id="7262914">Exp</span><span class="op" id="7262917">(</span><span class="op" id="7262918">-</span><span class="num" id="7262919">0.5</span><span class="op" id="7262922">*</span><span class="ident" id="7262923">dn</span><span class="op" id="7262925">*</span><span class="ident" id="7262926">dn</span><span class="op" id="7262928">)</span><span class="op" id="7262929">)</span><span class="op" id="7262930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262934">testKn</span><span class="op" id="7262940">[</span><span class="ident" id="7262941">i</span><span class="op" id="7262942">+</span><span class="num" id="7262943">1</span><span class="op" id="7262944">]</span>&nbsp;<span class="op" id="7262946">=</span>&nbsp;<span class="builtintype" id="7262948">uint32</span><span class="op" id="7262954">(</span><span class="op" id="7262955">(</span><span class="ident" id="7262956">dn</span>&nbsp;<span class="op" id="7262959">/</span>&nbsp;<span class="ident" id="7262961">tn</span><span class="op" id="7262963">)</span>&nbsp;<span class="op" id="7262965">*</span>&nbsp;<span class="ident" id="7262967">m1</span><span class="op" id="7262969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262973">tn</span>&nbsp;<span class="op" id="7262976">=</span>&nbsp;<span class="ident" id="7262978">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7262983">testFn</span><span class="op" id="7262989">[</span><span class="ident" id="7262990">i</span><span class="op" id="7262991">]</span>&nbsp;<span class="op" id="7262993">=</span>&nbsp;<span class="builtintype" id="7262995">float32</span><span class="op" id="7263002">(</span><span class="ident" id="7263003">math</span><span class="op" id="7263007">.</span><span class="ident" id="7263008">Exp</span><span class="op" id="7263011">(</span><span class="op" id="7263012">-</span><span class="num" id="7263013">0.5</span>&nbsp;<span class="op" id="7263017">*</span>&nbsp;<span class="ident" id="7263019">dn</span>&nbsp;<span class="op" id="7263022">*</span>&nbsp;<span class="ident" id="7263024">dn</span><span class="op" id="7263026">)</span><span class="op" id="7263027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263031">testWn</span><span class="op" id="7263037">[</span><span class="ident" id="7263038">i</span><span class="op" id="7263039">]</span>&nbsp;<span class="op" id="7263041">=</span>&nbsp;<span class="builtintype" id="7263043">float32</span><span class="op" id="7263050">(</span><span class="ident" id="7263051">dn</span>&nbsp;<span class="op" id="7263054">/</span>&nbsp;<span class="ident" id="7263056">m1</span><span class="op" id="7263058">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7263061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263064">return</span><br>
<span class="lineno"></span><span class="op" id="7263071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7263074">func</span>&nbsp;<span class="ident" id="7263079">initExp</span><span class="op" id="7263086">(</span><span class="op" id="7263087">)</span>&nbsp;<span class="op" id="7263089">(</span><span class="ident" id="7263090">testKe</span>&nbsp;<span class="op" id="7263097">[</span><span class="op" id="7263098">]</span><span class="builtintype" id="7263099">uint32</span><span class="op" id="7263105">,</span>&nbsp;<span class="ident" id="7263107">testWe</span><span class="op" id="7263113">,</span>&nbsp;<span class="ident" id="7263115">testFe</span>&nbsp;<span class="op" id="7263122">[</span><span class="op" id="7263123">]</span><span class="builtintype" id="7263124">float32</span><span class="op" id="7263131">)</span>&nbsp;<span class="op" id="7263133">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263136">const</span>&nbsp;<span class="ident" id="7263142">m2</span>&nbsp;<span class="op" id="7263145">=</span>&nbsp;<span class="num" id="7263147">1</span>&nbsp;<span class="op" id="7263149">&lt;&lt;</span>&nbsp;<span class="num" id="7263152">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263156">var</span>&nbsp;<span class="op" id="7263160">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263164">de</span>&nbsp;<span class="builtintype" id="7263167">float64</span>&nbsp;<span class="op" id="7263175">=</span>&nbsp;<span class="ident" id="7263177">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263182">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7263193">=</span>&nbsp;<span class="ident" id="7263195">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263200">ve</span>&nbsp;<span class="builtintype" id="7263203">float64</span>&nbsp;<span class="op" id="7263211">=</span>&nbsp;<span class="num" id="7263213">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7263239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263243">testKe</span>&nbsp;<span class="op" id="7263250">=</span>&nbsp;<span class="builtinfunc" id="7263252">make</span><span class="op" id="7263256">(</span><span class="op" id="7263257">[</span><span class="op" id="7263258">]</span><span class="builtintype" id="7263259">uint32</span><span class="op" id="7263265">,</span>&nbsp;<span class="num" id="7263267">256</span><span class="op" id="7263270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263273">testWe</span>&nbsp;<span class="op" id="7263280">=</span>&nbsp;<span class="builtinfunc" id="7263282">make</span><span class="op" id="7263286">(</span><span class="op" id="7263287">[</span><span class="op" id="7263288">]</span><span class="builtintype" id="7263289">float32</span><span class="op" id="7263296">,</span>&nbsp;<span class="num" id="7263298">256</span><span class="op" id="7263301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263304">testFe</span>&nbsp;<span class="op" id="7263311">=</span>&nbsp;<span class="builtinfunc" id="7263313">make</span><span class="op" id="7263317">(</span><span class="op" id="7263318">[</span><span class="op" id="7263319">]</span><span class="builtintype" id="7263320">float32</span><span class="op" id="7263327">,</span>&nbsp;<span class="num" id="7263329">256</span><span class="op" id="7263332">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263336">q</span>&nbsp;<span class="op" id="7263338">:=</span>&nbsp;<span class="ident" id="7263341">ve</span>&nbsp;<span class="op" id="7263344">/</span>&nbsp;<span class="ident" id="7263346">math</span><span class="op" id="7263350">.</span><span class="ident" id="7263351">Exp</span><span class="op" id="7263354">(</span><span class="op" id="7263355">-</span><span class="ident" id="7263356">de</span><span class="op" id="7263358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263361">testKe</span><span class="op" id="7263367">[</span><span class="num" id="7263368">0</span><span class="op" id="7263369">]</span>&nbsp;<span class="op" id="7263371">=</span>&nbsp;<span class="builtintype" id="7263373">uint32</span><span class="op" id="7263379">(</span><span class="op" id="7263380">(</span><span class="ident" id="7263381">de</span>&nbsp;<span class="op" id="7263384">/</span>&nbsp;<span class="ident" id="7263386">q</span><span class="op" id="7263387">)</span>&nbsp;<span class="op" id="7263389">*</span>&nbsp;<span class="ident" id="7263391">m2</span><span class="op" id="7263393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263396">testKe</span><span class="op" id="7263402">[</span><span class="num" id="7263403">1</span><span class="op" id="7263404">]</span>&nbsp;<span class="op" id="7263406">=</span>&nbsp;<span class="num" id="7263408">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263411">testWe</span><span class="op" id="7263417">[</span><span class="num" id="7263418">0</span><span class="op" id="7263419">]</span>&nbsp;<span class="op" id="7263421">=</span>&nbsp;<span class="builtintype" id="7263423">float32</span><span class="op" id="7263430">(</span><span class="ident" id="7263431">q</span>&nbsp;<span class="op" id="7263433">/</span>&nbsp;<span class="ident" id="7263435">m2</span><span class="op" id="7263437">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263440">testWe</span><span class="op" id="7263446">[</span><span class="num" id="7263447">255</span><span class="op" id="7263450">]</span>&nbsp;<span class="op" id="7263452">=</span>&nbsp;<span class="builtintype" id="7263454">float32</span><span class="op" id="7263461">(</span><span class="ident" id="7263462">de</span>&nbsp;<span class="op" id="7263465">/</span>&nbsp;<span class="ident" id="7263467">m2</span><span class="op" id="7263469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263472">testFe</span><span class="op" id="7263478">[</span><span class="num" id="7263479">0</span><span class="op" id="7263480">]</span>&nbsp;<span class="op" id="7263482">=</span>&nbsp;<span class="num" id="7263484">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263489">testFe</span><span class="op" id="7263495">[</span><span class="num" id="7263496">255</span><span class="op" id="7263499">]</span>&nbsp;<span class="op" id="7263501">=</span>&nbsp;<span class="builtintype" id="7263503">float32</span><span class="op" id="7263510">(</span><span class="ident" id="7263511">math</span><span class="op" id="7263515">.</span><span class="ident" id="7263516">Exp</span><span class="op" id="7263519">(</span><span class="op" id="7263520">-</span><span class="ident" id="7263521">de</span><span class="op" id="7263523">)</span><span class="op" id="7263524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263527">for</span>&nbsp;<span class="ident" id="7263531">i</span>&nbsp;<span class="op" id="7263533">:=</span>&nbsp;<span class="num" id="7263536">254</span><span class="op" id="7263539">;</span>&nbsp;<span class="ident" id="7263541">i</span>&nbsp;<span class="op" id="7263543">&gt;=</span>&nbsp;<span class="num" id="7263546">1</span><span class="op" id="7263547">;</span>&nbsp;<span class="ident" id="7263549">i</span><span class="op" id="7263550">--</span>&nbsp;<span class="op" id="7263553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263557">de</span>&nbsp;<span class="op" id="7263560">=</span>&nbsp;<span class="op" id="7263562">-</span><span class="ident" id="7263563">math</span><span class="op" id="7263567">.</span><span class="ident" id="7263568">Log</span><span class="op" id="7263571">(</span><span class="ident" id="7263572">ve</span><span class="op" id="7263574">/</span><span class="ident" id="7263575">de</span>&nbsp;<span class="op" id="7263578">+</span>&nbsp;<span class="ident" id="7263580">math</span><span class="op" id="7263584">.</span><span class="ident" id="7263585">Exp</span><span class="op" id="7263588">(</span><span class="op" id="7263589">-</span><span class="ident" id="7263590">de</span><span class="op" id="7263592">)</span><span class="op" id="7263593">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263597">testKe</span><span class="op" id="7263603">[</span><span class="ident" id="7263604">i</span><span class="op" id="7263605">+</span><span class="num" id="7263606">1</span><span class="op" id="7263607">]</span>&nbsp;<span class="op" id="7263609">=</span>&nbsp;<span class="builtintype" id="7263611">uint32</span><span class="op" id="7263617">(</span><span class="op" id="7263618">(</span><span class="ident" id="7263619">de</span>&nbsp;<span class="op" id="7263622">/</span>&nbsp;<span class="ident" id="7263624">te</span><span class="op" id="7263626">)</span>&nbsp;<span class="op" id="7263628">*</span>&nbsp;<span class="ident" id="7263630">m2</span><span class="op" id="7263632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263636">te</span>&nbsp;<span class="op" id="7263639">=</span>&nbsp;<span class="ident" id="7263641">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263646">testFe</span><span class="op" id="7263652">[</span><span class="ident" id="7263653">i</span><span class="op" id="7263654">]</span>&nbsp;<span class="op" id="7263656">=</span>&nbsp;<span class="builtintype" id="7263658">float32</span><span class="op" id="7263665">(</span><span class="ident" id="7263666">math</span><span class="op" id="7263670">.</span><span class="ident" id="7263671">Exp</span><span class="op" id="7263674">(</span><span class="op" id="7263675">-</span><span class="ident" id="7263676">de</span><span class="op" id="7263678">)</span><span class="op" id="7263679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7263683">testWe</span><span class="op" id="7263689">[</span><span class="ident" id="7263690">i</span><span class="op" id="7263691">]</span>&nbsp;<span class="op" id="7263693">=</span>&nbsp;<span class="builtintype" id="7263695">float32</span><span class="op" id="7263702">(</span><span class="ident" id="7263703">de</span>&nbsp;<span class="op" id="7263706">/</span>&nbsp;<span class="ident" id="7263708">m2</span><span class="op" id="7263710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7263713">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263716">return</span><br>
<span class="lineno"></span><span class="op" id="7263723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7263726">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7263794">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7263858">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7263876">func</span>&nbsp;<span class="ident" id="7263881">compareUint32Slices</span><span class="op" id="7263900">(</span><span class="ident" id="7263901">s1</span><span class="op" id="7263903">,</span>&nbsp;<span class="ident" id="7263905">s2</span>&nbsp;<span class="op" id="7263908">[</span><span class="op" id="7263909">]</span><span class="builtintype" id="7263910">uint32</span><span class="op" id="7263916">)</span>&nbsp;<span class="builtintype" id="7263918">int</span>&nbsp;<span class="op" id="7263922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263925">if</span>&nbsp;<span class="builtinfunc" id="7263928">len</span><span class="op" id="7263931">(</span><span class="ident" id="7263932">s1</span><span class="op" id="7263934">)</span>&nbsp;<span class="op" id="7263936">!=</span>&nbsp;<span class="builtinfunc" id="7263939">len</span><span class="op" id="7263942">(</span><span class="ident" id="7263943">s2</span><span class="op" id="7263945">)</span>&nbsp;<span class="op" id="7263947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263951">if</span>&nbsp;<span class="builtinfunc" id="7263954">len</span><span class="op" id="7263957">(</span><span class="ident" id="7263958">s1</span><span class="op" id="7263960">)</span>&nbsp;<span class="op" id="7263962">&gt;</span>&nbsp;<span class="builtinfunc" id="7263964">len</span><span class="op" id="7263967">(</span><span class="ident" id="7263968">s2</span><span class="op" id="7263970">)</span>&nbsp;<span class="op" id="7263972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7263977">return</span>&nbsp;<span class="builtinfunc" id="7263984">len</span><span class="op" id="7263987">(</span><span class="ident" id="7263988">s2</span><span class="op" id="7263990">)</span>&nbsp;<span class="op" id="7263992">+</span>&nbsp;<span class="num" id="7263994">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7263998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264002">return</span>&nbsp;<span class="builtinfunc" id="7264009">len</span><span class="op" id="7264012">(</span><span class="ident" id="7264013">s1</span><span class="op" id="7264015">)</span>&nbsp;<span class="op" id="7264017">+</span>&nbsp;<span class="num" id="7264019">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264025">for</span>&nbsp;<span class="ident" id="7264029">i</span>&nbsp;<span class="op" id="7264031">:=</span>&nbsp;<span class="keyword" id="7264034">range</span>&nbsp;<span class="ident" id="7264040">s1</span>&nbsp;<span class="op" id="7264043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264047">if</span>&nbsp;<span class="ident" id="7264050">s1</span><span class="op" id="7264052">[</span><span class="ident" id="7264053">i</span><span class="op" id="7264054">]</span>&nbsp;<span class="op" id="7264056">!=</span>&nbsp;<span class="ident" id="7264059">s2</span><span class="op" id="7264061">[</span><span class="ident" id="7264062">i</span><span class="op" id="7264063">]</span>&nbsp;<span class="op" id="7264065">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264070">return</span>&nbsp;<span class="ident" id="7264077">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264087">return</span>&nbsp;<span class="op" id="7264094">-</span><span class="num" id="7264095">1</span><br>
<span class="lineno"></span><span class="op" id="7264097">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7264100">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7264169">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7264233">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7264251">func</span>&nbsp;<span class="ident" id="7264256">compareFloat32Slices</span><span class="op" id="7264276">(</span><span class="ident" id="7264277">s1</span><span class="op" id="7264279">,</span>&nbsp;<span class="ident" id="7264281">s2</span>&nbsp;<span class="op" id="7264284">[</span><span class="op" id="7264285">]</span><span class="builtintype" id="7264286">float32</span><span class="op" id="7264293">)</span>&nbsp;<span class="builtintype" id="7264295">int</span>&nbsp;<span class="op" id="7264299">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264302">if</span>&nbsp;<span class="builtinfunc" id="7264305">len</span><span class="op" id="7264308">(</span><span class="ident" id="7264309">s1</span><span class="op" id="7264311">)</span>&nbsp;<span class="op" id="7264313">!=</span>&nbsp;<span class="builtinfunc" id="7264316">len</span><span class="op" id="7264319">(</span><span class="ident" id="7264320">s2</span><span class="op" id="7264322">)</span>&nbsp;<span class="op" id="7264324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264328">if</span>&nbsp;<span class="builtinfunc" id="7264331">len</span><span class="op" id="7264334">(</span><span class="ident" id="7264335">s1</span><span class="op" id="7264337">)</span>&nbsp;<span class="op" id="7264339">&gt;</span>&nbsp;<span class="builtinfunc" id="7264341">len</span><span class="op" id="7264344">(</span><span class="ident" id="7264345">s2</span><span class="op" id="7264347">)</span>&nbsp;<span class="op" id="7264349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264354">return</span>&nbsp;<span class="builtinfunc" id="7264361">len</span><span class="op" id="7264364">(</span><span class="ident" id="7264365">s2</span><span class="op" id="7264367">)</span>&nbsp;<span class="op" id="7264369">+</span>&nbsp;<span class="num" id="7264371">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264379">return</span>&nbsp;<span class="builtinfunc" id="7264386">len</span><span class="op" id="7264389">(</span><span class="ident" id="7264390">s1</span><span class="op" id="7264392">)</span>&nbsp;<span class="op" id="7264394">+</span>&nbsp;<span class="num" id="7264396">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264402">for</span>&nbsp;<span class="ident" id="7264406">i</span>&nbsp;<span class="op" id="7264408">:=</span>&nbsp;<span class="keyword" id="7264411">range</span>&nbsp;<span class="ident" id="7264417">s1</span>&nbsp;<span class="op" id="7264420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264424">if</span>&nbsp;<span class="op" id="7264427">!</span><span class="ident" id="7264428">nearEqual</span><span class="op" id="7264437">(</span><span class="builtintype" id="7264438">float64</span><span class="op" id="7264445">(</span><span class="ident" id="7264446">s1</span><span class="op" id="7264448">[</span><span class="ident" id="7264449">i</span><span class="op" id="7264450">]</span><span class="op" id="7264451">)</span><span class="op" id="7264452">,</span>&nbsp;<span class="builtintype" id="7264454">float64</span><span class="op" id="7264461">(</span><span class="ident" id="7264462">s2</span><span class="op" id="7264464">[</span><span class="ident" id="7264465">i</span><span class="op" id="7264466">]</span><span class="op" id="7264467">)</span><span class="op" id="7264468">,</span>&nbsp;<span class="num" id="7264470">0</span><span class="op" id="7264471">,</span>&nbsp;<span class="num" id="7264473">1e-7</span><span class="op" id="7264477">)</span>&nbsp;<span class="op" id="7264479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264484">return</span>&nbsp;<span class="ident" id="7264491">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264495">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264501">return</span>&nbsp;<span class="op" id="7264508">-</span><span class="num" id="7264509">1</span><br>
<span class="lineno"></span><span class="op" id="7264511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7264514">func</span>&nbsp;<span class="ident" id="7264519">TestNormTables</span><span class="op" id="7264533">(</span><span class="ident" id="7264534">t</span>&nbsp;<span class="op" id="7264536">*</span><span class="ident" id="7264537">testing</span><span class="op" id="7264544">.</span><span class="ident" id="7264545">T</span><span class="op" id="7264546">)</span>&nbsp;<span class="op" id="7264548">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7264551">testKn</span><span class="op" id="7264557">,</span>&nbsp;<span class="ident" id="7264559">testWn</span><span class="op" id="7264565">,</span>&nbsp;<span class="ident" id="7264567">testFn</span>&nbsp;<span class="op" id="7264574">:=</span>&nbsp;<span class="ident" id="7264577">initNorm</span><span class="op" id="7264585">(</span><span class="op" id="7264586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264589">if</span>&nbsp;<span class="ident" id="7264592">i</span>&nbsp;<span class="op" id="7264594">:=</span>&nbsp;<span class="ident" id="7264597">compareUint32Slices</span><span class="op" id="7264616">(</span><span class="ident" id="7264617">kn</span><span class="op" id="7264619">[</span><span class="num" id="7264620">0</span><span class="op" id="7264621">:</span><span class="op" id="7264622">]</span><span class="op" id="7264623">,</span>&nbsp;<span class="ident" id="7264625">testKn</span><span class="op" id="7264631">)</span><span class="op" id="7264632">;</span>&nbsp;<span class="ident" id="7264634">i</span>&nbsp;<span class="op" id="7264636">&gt;=</span>&nbsp;<span class="num" id="7264639">0</span>&nbsp;<span class="op" id="7264641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7264645">t</span><span class="op" id="7264646">.</span><span class="ident" id="7264647">Errorf</span><span class="op" id="7264653">(</span><span class="string" id="7264654">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7264690">,</span>&nbsp;<span class="ident" id="7264692">i</span><span class="op" id="7264693">,</span>&nbsp;<span class="ident" id="7264695">kn</span><span class="op" id="7264697">[</span><span class="ident" id="7264698">i</span><span class="op" id="7264699">]</span><span class="op" id="7264700">,</span>&nbsp;<span class="ident" id="7264702">testKn</span><span class="op" id="7264708">[</span><span class="ident" id="7264709">i</span><span class="op" id="7264710">]</span><span class="op" id="7264711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264717">if</span>&nbsp;<span class="ident" id="7264720">i</span>&nbsp;<span class="op" id="7264722">:=</span>&nbsp;<span class="ident" id="7264725">compareFloat32Slices</span><span class="op" id="7264745">(</span><span class="ident" id="7264746">wn</span><span class="op" id="7264748">[</span><span class="num" id="7264749">0</span><span class="op" id="7264750">:</span><span class="op" id="7264751">]</span><span class="op" id="7264752">,</span>&nbsp;<span class="ident" id="7264754">testWn</span><span class="op" id="7264760">)</span><span class="op" id="7264761">;</span>&nbsp;<span class="ident" id="7264763">i</span>&nbsp;<span class="op" id="7264765">&gt;=</span>&nbsp;<span class="num" id="7264768">0</span>&nbsp;<span class="op" id="7264770">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7264774">t</span><span class="op" id="7264775">.</span><span class="ident" id="7264776">Errorf</span><span class="op" id="7264782">(</span><span class="string" id="7264783">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7264819">,</span>&nbsp;<span class="ident" id="7264821">i</span><span class="op" id="7264822">,</span>&nbsp;<span class="ident" id="7264824">wn</span><span class="op" id="7264826">[</span><span class="ident" id="7264827">i</span><span class="op" id="7264828">]</span><span class="op" id="7264829">,</span>&nbsp;<span class="ident" id="7264831">testWn</span><span class="op" id="7264837">[</span><span class="ident" id="7264838">i</span><span class="op" id="7264839">]</span><span class="op" id="7264840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7264846">if</span>&nbsp;<span class="ident" id="7264849">i</span>&nbsp;<span class="op" id="7264851">:=</span>&nbsp;<span class="ident" id="7264854">compareFloat32Slices</span><span class="op" id="7264874">(</span><span class="ident" id="7264875">fn</span><span class="op" id="7264877">[</span><span class="num" id="7264878">0</span><span class="op" id="7264879">:</span><span class="op" id="7264880">]</span><span class="op" id="7264881">,</span>&nbsp;<span class="ident" id="7264883">testFn</span><span class="op" id="7264889">)</span><span class="op" id="7264890">;</span>&nbsp;<span class="ident" id="7264892">i</span>&nbsp;<span class="op" id="7264894">&gt;=</span>&nbsp;<span class="num" id="7264897">0</span>&nbsp;<span class="op" id="7264899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7264903">t</span><span class="op" id="7264904">.</span><span class="ident" id="7264905">Errorf</span><span class="op" id="7264911">(</span><span class="string" id="7264912">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7264948">,</span>&nbsp;<span class="ident" id="7264950">i</span><span class="op" id="7264951">,</span>&nbsp;<span class="ident" id="7264953">fn</span><span class="op" id="7264955">[</span><span class="ident" id="7264956">i</span><span class="op" id="7264957">]</span><span class="op" id="7264958">,</span>&nbsp;<span class="ident" id="7264960">testFn</span><span class="op" id="7264966">[</span><span class="ident" id="7264967">i</span><span class="op" id="7264968">]</span><span class="op" id="7264969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7264972">}</span><br>
<span class="lineno">310</span><span class="op" id="7264974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7264977">func</span>&nbsp;<span class="ident" id="7264982">TestExpTables</span><span class="op" id="7264995">(</span><span class="ident" id="7264996">t</span>&nbsp;<span class="op" id="7264998">*</span><span class="ident" id="7264999">testing</span><span class="op" id="7265006">.</span><span class="ident" id="7265007">T</span><span class="op" id="7265008">)</span>&nbsp;<span class="op" id="7265010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265013">testKe</span><span class="op" id="7265019">,</span>&nbsp;<span class="ident" id="7265021">testWe</span><span class="op" id="7265027">,</span>&nbsp;<span class="ident" id="7265029">testFe</span>&nbsp;<span class="op" id="7265036">:=</span>&nbsp;<span class="ident" id="7265039">initExp</span><span class="op" id="7265046">(</span><span class="op" id="7265047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265050">if</span>&nbsp;<span class="ident" id="7265053">i</span>&nbsp;<span class="op" id="7265055">:=</span>&nbsp;<span class="ident" id="7265058">compareUint32Slices</span><span class="op" id="7265077">(</span><span class="ident" id="7265078">ke</span><span class="op" id="7265080">[</span><span class="num" id="7265081">0</span><span class="op" id="7265082">:</span><span class="op" id="7265083">]</span><span class="op" id="7265084">,</span>&nbsp;<span class="ident" id="7265086">testKe</span><span class="op" id="7265092">)</span><span class="op" id="7265093">;</span>&nbsp;<span class="ident" id="7265095">i</span>&nbsp;<span class="op" id="7265097">&gt;=</span>&nbsp;<span class="num" id="7265100">0</span>&nbsp;<span class="op" id="7265102">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265106">t</span><span class="op" id="7265107">.</span><span class="ident" id="7265108">Errorf</span><span class="op" id="7265114">(</span><span class="string" id="7265115">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7265151">,</span>&nbsp;<span class="ident" id="7265153">i</span><span class="op" id="7265154">,</span>&nbsp;<span class="ident" id="7265156">ke</span><span class="op" id="7265158">[</span><span class="ident" id="7265159">i</span><span class="op" id="7265160">]</span><span class="op" id="7265161">,</span>&nbsp;<span class="ident" id="7265163">testKe</span><span class="op" id="7265169">[</span><span class="ident" id="7265170">i</span><span class="op" id="7265171">]</span><span class="op" id="7265172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265178">if</span>&nbsp;<span class="ident" id="7265181">i</span>&nbsp;<span class="op" id="7265183">:=</span>&nbsp;<span class="ident" id="7265186">compareFloat32Slices</span><span class="op" id="7265206">(</span><span class="ident" id="7265207">we</span><span class="op" id="7265209">[</span><span class="num" id="7265210">0</span><span class="op" id="7265211">:</span><span class="op" id="7265212">]</span><span class="op" id="7265213">,</span>&nbsp;<span class="ident" id="7265215">testWe</span><span class="op" id="7265221">)</span><span class="op" id="7265222">;</span>&nbsp;<span class="ident" id="7265224">i</span>&nbsp;<span class="op" id="7265226">&gt;=</span>&nbsp;<span class="num" id="7265229">0</span>&nbsp;<span class="op" id="7265231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265235">t</span><span class="op" id="7265236">.</span><span class="ident" id="7265237">Errorf</span><span class="op" id="7265243">(</span><span class="string" id="7265244">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7265280">,</span>&nbsp;<span class="ident" id="7265282">i</span><span class="op" id="7265283">,</span>&nbsp;<span class="ident" id="7265285">we</span><span class="op" id="7265287">[</span><span class="ident" id="7265288">i</span><span class="op" id="7265289">]</span><span class="op" id="7265290">,</span>&nbsp;<span class="ident" id="7265292">testWe</span><span class="op" id="7265298">[</span><span class="ident" id="7265299">i</span><span class="op" id="7265300">]</span><span class="op" id="7265301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265304">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265307">if</span>&nbsp;<span class="ident" id="7265310">i</span>&nbsp;<span class="op" id="7265312">:=</span>&nbsp;<span class="ident" id="7265315">compareFloat32Slices</span><span class="op" id="7265335">(</span><span class="ident" id="7265336">fe</span><span class="op" id="7265338">[</span><span class="num" id="7265339">0</span><span class="op" id="7265340">:</span><span class="op" id="7265341">]</span><span class="op" id="7265342">,</span>&nbsp;<span class="ident" id="7265344">testFe</span><span class="op" id="7265350">)</span><span class="op" id="7265351">;</span>&nbsp;<span class="ident" id="7265353">i</span>&nbsp;<span class="op" id="7265355">&gt;=</span>&nbsp;<span class="num" id="7265358">0</span>&nbsp;<span class="op" id="7265360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265364">t</span><span class="op" id="7265365">.</span><span class="ident" id="7265366">Errorf</span><span class="op" id="7265372">(</span><span class="string" id="7265373">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7265409">,</span>&nbsp;<span class="ident" id="7265411">i</span><span class="op" id="7265412">,</span>&nbsp;<span class="ident" id="7265414">fe</span><span class="op" id="7265416">[</span><span class="ident" id="7265417">i</span><span class="op" id="7265418">]</span><span class="op" id="7265419">,</span>&nbsp;<span class="ident" id="7265421">testFe</span><span class="op" id="7265427">[</span><span class="ident" id="7265428">i</span><span class="op" id="7265429">]</span><span class="op" id="7265430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265433">}</span><br>
<span class="lineno"></span><span class="op" id="7265435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7265438">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7265510">func</span>&nbsp;<span class="ident" id="7265515">TestFloat32</span><span class="op" id="7265526">(</span><span class="ident" id="7265527">t</span>&nbsp;<span class="op" id="7265529">*</span><span class="ident" id="7265530">testing</span><span class="op" id="7265537">.</span><span class="ident" id="7265538">T</span><span class="op" id="7265539">)</span>&nbsp;<span class="op" id="7265541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265544">r</span>&nbsp;<span class="op" id="7265546">:=</span>&nbsp;<span class="ident" id="7265549">New</span><span class="op" id="7265552">(</span><span class="ident" id="7265553">NewSource</span><span class="op" id="7265562">(</span><span class="num" id="7265563">1</span><span class="op" id="7265564">)</span><span class="op" id="7265565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265568">for</span>&nbsp;<span class="ident" id="7265572">ct</span>&nbsp;<span class="op" id="7265575">:=</span>&nbsp;<span class="num" id="7265578">0</span><span class="op" id="7265579">;</span>&nbsp;<span class="ident" id="7265581">ct</span>&nbsp;<span class="op" id="7265584">&lt;</span>&nbsp;<span class="num" id="7265586">10e6</span><span class="op" id="7265590">;</span>&nbsp;<span class="ident" id="7265592">ct</span><span class="op" id="7265594">++</span>&nbsp;<span class="op" id="7265597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265601">f</span>&nbsp;<span class="op" id="7265603">:=</span>&nbsp;<span class="ident" id="7265606">r</span><span class="op" id="7265607">.</span><span class="ident" id="7265608">Float32</span><span class="op" id="7265615">(</span><span class="op" id="7265616">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265620">if</span>&nbsp;<span class="ident" id="7265623">f</span>&nbsp;<span class="op" id="7265625">&gt;=</span>&nbsp;<span class="num" id="7265628">1</span>&nbsp;<span class="op" id="7265630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265635">t</span><span class="op" id="7265636">.</span><span class="ident" id="7265637">Fatal</span><span class="op" id="7265642">(</span><span class="string" id="7265643">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7265684">,</span>&nbsp;<span class="ident" id="7265686">ct</span><span class="op" id="7265688">,</span>&nbsp;<span class="string" id="7265690">&#34;f:&#34;</span><span class="op" id="7265694">,</span>&nbsp;<span class="ident" id="7265696">f</span><span class="op" id="7265697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265704">}</span><br>
<span class="lineno"></span><span class="op" id="7265706">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7265709">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7265724">func</span>&nbsp;<span class="ident" id="7265729">BenchmarkInt63Threadsafe</span><span class="op" id="7265753">(</span><span class="ident" id="7265754">b</span>&nbsp;<span class="op" id="7265756">*</span><span class="ident" id="7265757">testing</span><span class="op" id="7265764">.</span><span class="ident" id="7265765">B</span><span class="op" id="7265766">)</span>&nbsp;<span class="op" id="7265768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265771">for</span>&nbsp;<span class="ident" id="7265775">n</span>&nbsp;<span class="op" id="7265777">:=</span>&nbsp;<span class="ident" id="7265780">b</span><span class="op" id="7265781">.</span><span class="ident" id="7265782">N</span><span class="op" id="7265783">;</span>&nbsp;<span class="ident" id="7265785">n</span>&nbsp;<span class="op" id="7265787">&gt;</span>&nbsp;<span class="num" id="7265789">0</span><span class="op" id="7265790">;</span>&nbsp;<span class="ident" id="7265792">n</span><span class="op" id="7265793">--</span>&nbsp;<span class="op" id="7265796">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265800">Int63</span><span class="op" id="7265805">(</span><span class="op" id="7265806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265809">}</span><br>
<span class="lineno"></span><span class="op" id="7265811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7265814">func</span>&nbsp;<span class="ident" id="7265819">BenchmarkInt63Unthreadsafe</span><span class="op" id="7265845">(</span><span class="ident" id="7265846">b</span>&nbsp;<span class="op" id="7265848">*</span><span class="ident" id="7265849">testing</span><span class="op" id="7265856">.</span><span class="ident" id="7265857">B</span><span class="op" id="7265858">)</span>&nbsp;<span class="op" id="7265860">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265863">r</span>&nbsp;<span class="op" id="7265865">:=</span>&nbsp;<span class="ident" id="7265868">New</span><span class="op" id="7265871">(</span><span class="ident" id="7265872">NewSource</span><span class="op" id="7265881">(</span><span class="num" id="7265882">1</span><span class="op" id="7265883">)</span><span class="op" id="7265884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265887">for</span>&nbsp;<span class="ident" id="7265891">n</span>&nbsp;<span class="op" id="7265893">:=</span>&nbsp;<span class="ident" id="7265896">b</span><span class="op" id="7265897">.</span><span class="ident" id="7265898">N</span><span class="op" id="7265899">;</span>&nbsp;<span class="ident" id="7265901">n</span>&nbsp;<span class="op" id="7265903">&gt;</span>&nbsp;<span class="num" id="7265905">0</span><span class="op" id="7265906">;</span>&nbsp;<span class="ident" id="7265908">n</span><span class="op" id="7265909">--</span>&nbsp;<span class="op" id="7265912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265916">r</span><span class="op" id="7265917">.</span><span class="ident" id="7265918">Int63</span><span class="op" id="7265923">(</span><span class="op" id="7265924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265927">}</span><br>
<span class="lineno"></span><span class="op" id="7265929">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7265932">func</span>&nbsp;<span class="ident" id="7265937">BenchmarkIntn1000</span><span class="op" id="7265954">(</span><span class="ident" id="7265955">b</span>&nbsp;<span class="op" id="7265957">*</span><span class="ident" id="7265958">testing</span><span class="op" id="7265965">.</span><span class="ident" id="7265966">B</span><span class="op" id="7265967">)</span>&nbsp;<span class="op" id="7265969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265972">r</span>&nbsp;<span class="op" id="7265974">:=</span>&nbsp;<span class="ident" id="7265977">New</span><span class="op" id="7265980">(</span><span class="ident" id="7265981">NewSource</span><span class="op" id="7265990">(</span><span class="num" id="7265991">1</span><span class="op" id="7265992">)</span><span class="op" id="7265993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265996">for</span>&nbsp;<span class="ident" id="7266000">n</span>&nbsp;<span class="op" id="7266002">:=</span>&nbsp;<span class="ident" id="7266005">b</span><span class="op" id="7266006">.</span><span class="ident" id="7266007">N</span><span class="op" id="7266008">;</span>&nbsp;<span class="ident" id="7266010">n</span>&nbsp;<span class="op" id="7266012">&gt;</span>&nbsp;<span class="num" id="7266014">0</span><span class="op" id="7266015">;</span>&nbsp;<span class="ident" id="7266017">n</span><span class="op" id="7266018">--</span>&nbsp;<span class="op" id="7266021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266025">r</span><span class="op" id="7266026">.</span><span class="ident" id="7266027">Intn</span><span class="op" id="7266031">(</span><span class="num" id="7266032">1000</span><span class="op" id="7266036">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266039">}</span><br>
<span class="lineno"></span><span class="op" id="7266041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266044">func</span>&nbsp;<span class="ident" id="7266049">BenchmarkInt63n1000</span><span class="op" id="7266068">(</span><span class="ident" id="7266069">b</span>&nbsp;<span class="op" id="7266071">*</span><span class="ident" id="7266072">testing</span><span class="op" id="7266079">.</span><span class="ident" id="7266080">B</span><span class="op" id="7266081">)</span>&nbsp;<span class="op" id="7266083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266086">r</span>&nbsp;<span class="op" id="7266088">:=</span>&nbsp;<span class="ident" id="7266091">New</span><span class="op" id="7266094">(</span><span class="ident" id="7266095">NewSource</span><span class="op" id="7266104">(</span><span class="num" id="7266105">1</span><span class="op" id="7266106">)</span><span class="op" id="7266107">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266110">for</span>&nbsp;<span class="ident" id="7266114">n</span>&nbsp;<span class="op" id="7266116">:=</span>&nbsp;<span class="ident" id="7266119">b</span><span class="op" id="7266120">.</span><span class="ident" id="7266121">N</span><span class="op" id="7266122">;</span>&nbsp;<span class="ident" id="7266124">n</span>&nbsp;<span class="op" id="7266126">&gt;</span>&nbsp;<span class="num" id="7266128">0</span><span class="op" id="7266129">;</span>&nbsp;<span class="ident" id="7266131">n</span><span class="op" id="7266132">--</span>&nbsp;<span class="op" id="7266135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266139">r</span><span class="op" id="7266140">.</span><span class="ident" id="7266141">Int63n</span><span class="op" id="7266147">(</span><span class="num" id="7266148">1000</span><span class="op" id="7266152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266155">}</span><br>
<span class="lineno"></span><span class="op" id="7266157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7266160">func</span>&nbsp;<span class="ident" id="7266165">BenchmarkInt31n1000</span><span class="op" id="7266184">(</span><span class="ident" id="7266185">b</span>&nbsp;<span class="op" id="7266187">*</span><span class="ident" id="7266188">testing</span><span class="op" id="7266195">.</span><span class="ident" id="7266196">B</span><span class="op" id="7266197">)</span>&nbsp;<span class="op" id="7266199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266202">r</span>&nbsp;<span class="op" id="7266204">:=</span>&nbsp;<span class="ident" id="7266207">New</span><span class="op" id="7266210">(</span><span class="ident" id="7266211">NewSource</span><span class="op" id="7266220">(</span><span class="num" id="7266221">1</span><span class="op" id="7266222">)</span><span class="op" id="7266223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266226">for</span>&nbsp;<span class="ident" id="7266230">n</span>&nbsp;<span class="op" id="7266232">:=</span>&nbsp;<span class="ident" id="7266235">b</span><span class="op" id="7266236">.</span><span class="ident" id="7266237">N</span><span class="op" id="7266238">;</span>&nbsp;<span class="ident" id="7266240">n</span>&nbsp;<span class="op" id="7266242">&gt;</span>&nbsp;<span class="num" id="7266244">0</span><span class="op" id="7266245">;</span>&nbsp;<span class="ident" id="7266247">n</span><span class="op" id="7266248">--</span>&nbsp;<span class="op" id="7266251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266255">r</span><span class="op" id="7266256">.</span><span class="ident" id="7266257">Int31n</span><span class="op" id="7266263">(</span><span class="num" id="7266264">1000</span><span class="op" id="7266268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266271">}</span><br>
<span class="lineno">370</span><span class="op" id="7266273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266276">func</span>&nbsp;<span class="ident" id="7266281">BenchmarkFloat32</span><span class="op" id="7266297">(</span><span class="ident" id="7266298">b</span>&nbsp;<span class="op" id="7266300">*</span><span class="ident" id="7266301">testing</span><span class="op" id="7266308">.</span><span class="ident" id="7266309">B</span><span class="op" id="7266310">)</span>&nbsp;<span class="op" id="7266312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266315">r</span>&nbsp;<span class="op" id="7266317">:=</span>&nbsp;<span class="ident" id="7266320">New</span><span class="op" id="7266323">(</span><span class="ident" id="7266324">NewSource</span><span class="op" id="7266333">(</span><span class="num" id="7266334">1</span><span class="op" id="7266335">)</span><span class="op" id="7266336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266339">for</span>&nbsp;<span class="ident" id="7266343">n</span>&nbsp;<span class="op" id="7266345">:=</span>&nbsp;<span class="ident" id="7266348">b</span><span class="op" id="7266349">.</span><span class="ident" id="7266350">N</span><span class="op" id="7266351">;</span>&nbsp;<span class="ident" id="7266353">n</span>&nbsp;<span class="op" id="7266355">&gt;</span>&nbsp;<span class="num" id="7266357">0</span><span class="op" id="7266358">;</span>&nbsp;<span class="ident" id="7266360">n</span><span class="op" id="7266361">--</span>&nbsp;<span class="op" id="7266364">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266368">r</span><span class="op" id="7266369">.</span><span class="ident" id="7266370">Float32</span><span class="op" id="7266377">(</span><span class="op" id="7266378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266381">}</span><br>
<span class="lineno"></span><span class="op" id="7266383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266386">func</span>&nbsp;<span class="ident" id="7266391">BenchmarkFloat64</span><span class="op" id="7266407">(</span><span class="ident" id="7266408">b</span>&nbsp;<span class="op" id="7266410">*</span><span class="ident" id="7266411">testing</span><span class="op" id="7266418">.</span><span class="ident" id="7266419">B</span><span class="op" id="7266420">)</span>&nbsp;<span class="op" id="7266422">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266425">r</span>&nbsp;<span class="op" id="7266427">:=</span>&nbsp;<span class="ident" id="7266430">New</span><span class="op" id="7266433">(</span><span class="ident" id="7266434">NewSource</span><span class="op" id="7266443">(</span><span class="num" id="7266444">1</span><span class="op" id="7266445">)</span><span class="op" id="7266446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266449">for</span>&nbsp;<span class="ident" id="7266453">n</span>&nbsp;<span class="op" id="7266455">:=</span>&nbsp;<span class="ident" id="7266458">b</span><span class="op" id="7266459">.</span><span class="ident" id="7266460">N</span><span class="op" id="7266461">;</span>&nbsp;<span class="ident" id="7266463">n</span>&nbsp;<span class="op" id="7266465">&gt;</span>&nbsp;<span class="num" id="7266467">0</span><span class="op" id="7266468">;</span>&nbsp;<span class="ident" id="7266470">n</span><span class="op" id="7266471">--</span>&nbsp;<span class="op" id="7266474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266478">r</span><span class="op" id="7266479">.</span><span class="ident" id="7266480">Float64</span><span class="op" id="7266487">(</span><span class="op" id="7266488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266491">}</span><br>
<span class="lineno"></span><span class="op" id="7266493">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7266496">func</span>&nbsp;<span class="ident" id="7266501">BenchmarkPerm3</span><span class="op" id="7266515">(</span><span class="ident" id="7266516">b</span>&nbsp;<span class="op" id="7266518">*</span><span class="ident" id="7266519">testing</span><span class="op" id="7266526">.</span><span class="ident" id="7266527">B</span><span class="op" id="7266528">)</span>&nbsp;<span class="op" id="7266530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266533">r</span>&nbsp;<span class="op" id="7266535">:=</span>&nbsp;<span class="ident" id="7266538">New</span><span class="op" id="7266541">(</span><span class="ident" id="7266542">NewSource</span><span class="op" id="7266551">(</span><span class="num" id="7266552">1</span><span class="op" id="7266553">)</span><span class="op" id="7266554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266557">for</span>&nbsp;<span class="ident" id="7266561">n</span>&nbsp;<span class="op" id="7266563">:=</span>&nbsp;<span class="ident" id="7266566">b</span><span class="op" id="7266567">.</span><span class="ident" id="7266568">N</span><span class="op" id="7266569">;</span>&nbsp;<span class="ident" id="7266571">n</span>&nbsp;<span class="op" id="7266573">&gt;</span>&nbsp;<span class="num" id="7266575">0</span><span class="op" id="7266576">;</span>&nbsp;<span class="ident" id="7266578">n</span><span class="op" id="7266579">--</span>&nbsp;<span class="op" id="7266582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266586">r</span><span class="op" id="7266587">.</span><span class="ident" id="7266588">Perm</span><span class="op" id="7266592">(</span><span class="num" id="7266593">3</span><span class="op" id="7266594">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266597">}</span><br>
<span class="lineno"></span><span class="op" id="7266599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266602">func</span>&nbsp;<span class="ident" id="7266607">BenchmarkPerm30</span><span class="op" id="7266622">(</span><span class="ident" id="7266623">b</span>&nbsp;<span class="op" id="7266625">*</span><span class="ident" id="7266626">testing</span><span class="op" id="7266633">.</span><span class="ident" id="7266634">B</span><span class="op" id="7266635">)</span>&nbsp;<span class="op" id="7266637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266640">r</span>&nbsp;<span class="op" id="7266642">:=</span>&nbsp;<span class="ident" id="7266645">New</span><span class="op" id="7266648">(</span><span class="ident" id="7266649">NewSource</span><span class="op" id="7266658">(</span><span class="num" id="7266659">1</span><span class="op" id="7266660">)</span><span class="op" id="7266661">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266664">for</span>&nbsp;<span class="ident" id="7266668">n</span>&nbsp;<span class="op" id="7266670">:=</span>&nbsp;<span class="ident" id="7266673">b</span><span class="op" id="7266674">.</span><span class="ident" id="7266675">N</span><span class="op" id="7266676">;</span>&nbsp;<span class="ident" id="7266678">n</span>&nbsp;<span class="op" id="7266680">&gt;</span>&nbsp;<span class="num" id="7266682">0</span><span class="op" id="7266683">;</span>&nbsp;<span class="ident" id="7266685">n</span><span class="op" id="7266686">--</span>&nbsp;<span class="op" id="7266689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266693">r</span><span class="op" id="7266694">.</span><span class="ident" id="7266695">Perm</span><span class="op" id="7266699">(</span><span class="num" id="7266700">30</span><span class="op" id="7266702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266705">}</span><br>
<span class="lineno"></span><span class="op" id="7266707">}</span>
</div>
</body>
</html>
