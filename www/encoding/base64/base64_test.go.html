<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6764696">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6764751">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6764805">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6764856">package</span>&nbsp;<span class="ident" id="6764864">base64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764872">import</span>&nbsp;<span class="op" id="6764879">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764882">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764891">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764901">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764907">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764920">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764931">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764942">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6764953">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6764960">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6764963">type</span>&nbsp;<span class="ident" id="6764968">testpair</span>&nbsp;<span class="keyword" id="6764977">struct</span>&nbsp;<span class="op" id="6764984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6764987">decoded</span><span class="op" id="6764994">,</span>&nbsp;<span class="ident" id="6764996">encoded</span>&nbsp;<span class="builtintype" id="6765004">string</span><br>
<span class="lineno">20</span><span class="op" id="6765011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6765014">var</span>&nbsp;<span class="ident" id="6765018">pairs</span>&nbsp;<span class="op" id="6765024">=</span>&nbsp;<span class="op" id="6765026">[</span><span class="op" id="6765027">]</span><span class="ident" id="6765028"><a href="/encoding/base64/base64_test.go.html#6764968">testpair</a></span><span class="op" id="6765036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6765039">//&nbsp;RFC&nbsp;3548&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765061">{</span><span class="string" id="6765062">&#34;\x14\xfb\x9c\x03\xd9\x7e&#34;</span><span class="op" id="6765088">,</span>&nbsp;<span class="string" id="6765090">&#34;FPucA9l+&#34;</span><span class="op" id="6765100">}</span><span class="op" id="6765101">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765104">{</span><span class="string" id="6765105">&#34;\x14\xfb\x9c\x03\xd9&#34;</span><span class="op" id="6765127">,</span>&nbsp;<span class="string" id="6765129">&#34;FPucA9k=&#34;</span><span class="op" id="6765139">}</span><span class="op" id="6765140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765143">{</span><span class="string" id="6765144">&#34;\x14\xfb\x9c\x03&#34;</span><span class="op" id="6765162">,</span>&nbsp;<span class="string" id="6765164">&#34;FPucAw==&#34;</span><span class="op" id="6765174">}</span><span class="op" id="6765175">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6765179">//&nbsp;RFC&nbsp;4648&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765201">{</span><span class="string" id="6765202">&#34;&#34;</span><span class="op" id="6765204">,</span>&nbsp;<span class="string" id="6765206">&#34;&#34;</span><span class="op" id="6765208">}</span><span class="op" id="6765209">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765212">{</span><span class="string" id="6765213">&#34;f&#34;</span><span class="op" id="6765216">,</span>&nbsp;<span class="string" id="6765218">&#34;Zg==&#34;</span><span class="op" id="6765224">}</span><span class="op" id="6765225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765228">{</span><span class="string" id="6765229">&#34;fo&#34;</span><span class="op" id="6765233">,</span>&nbsp;<span class="string" id="6765235">&#34;Zm8=&#34;</span><span class="op" id="6765241">}</span><span class="op" id="6765242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765245">{</span><span class="string" id="6765246">&#34;foo&#34;</span><span class="op" id="6765251">,</span>&nbsp;<span class="string" id="6765253">&#34;Zm9v&#34;</span><span class="op" id="6765259">}</span><span class="op" id="6765260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765263">{</span><span class="string" id="6765264">&#34;foob&#34;</span><span class="op" id="6765270">,</span>&nbsp;<span class="string" id="6765272">&#34;Zm9vYg==&#34;</span><span class="op" id="6765282">}</span><span class="op" id="6765283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765286">{</span><span class="string" id="6765287">&#34;fooba&#34;</span><span class="op" id="6765294">,</span>&nbsp;<span class="string" id="6765296">&#34;Zm9vYmE=&#34;</span><span class="op" id="6765306">}</span><span class="op" id="6765307">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765310">{</span><span class="string" id="6765311">&#34;foobar&#34;</span><span class="op" id="6765319">,</span>&nbsp;<span class="string" id="6765321">&#34;Zm9vYmFy&#34;</span><span class="op" id="6765331">}</span><span class="op" id="6765332">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6765336">//&nbsp;Wikipedia&nbsp;examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765359">{</span><span class="string" id="6765360">&#34;sure.&#34;</span><span class="op" id="6765367">,</span>&nbsp;<span class="string" id="6765369">&#34;c3VyZS4=&#34;</span><span class="op" id="6765379">}</span><span class="op" id="6765380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765383">{</span><span class="string" id="6765384">&#34;sure&#34;</span><span class="op" id="6765390">,</span>&nbsp;<span class="string" id="6765392">&#34;c3VyZQ==&#34;</span><span class="op" id="6765402">}</span><span class="op" id="6765403">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765406">{</span><span class="string" id="6765407">&#34;sur&#34;</span><span class="op" id="6765412">,</span>&nbsp;<span class="string" id="6765414">&#34;c3Vy&#34;</span><span class="op" id="6765420">}</span><span class="op" id="6765421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765424">{</span><span class="string" id="6765425">&#34;su&#34;</span><span class="op" id="6765429">,</span>&nbsp;<span class="string" id="6765431">&#34;c3U=&#34;</span><span class="op" id="6765437">}</span><span class="op" id="6765438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765441">{</span><span class="string" id="6765442">&#34;leasure.&#34;</span><span class="op" id="6765452">,</span>&nbsp;<span class="string" id="6765454">&#34;bGVhc3VyZS4=&#34;</span><span class="op" id="6765468">}</span><span class="op" id="6765469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765472">{</span><span class="string" id="6765473">&#34;easure.&#34;</span><span class="op" id="6765482">,</span>&nbsp;<span class="string" id="6765484">&#34;ZWFzdXJlLg==&#34;</span><span class="op" id="6765498">}</span><span class="op" id="6765499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765502">{</span><span class="string" id="6765503">&#34;asure.&#34;</span><span class="op" id="6765511">,</span>&nbsp;<span class="string" id="6765513">&#34;YXN1cmUu&#34;</span><span class="op" id="6765523">}</span><span class="op" id="6765524">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765527">{</span><span class="string" id="6765528">&#34;sure.&#34;</span><span class="op" id="6765535">,</span>&nbsp;<span class="string" id="6765537">&#34;c3VyZS4=&#34;</span><span class="op" id="6765547">}</span><span class="op" id="6765548">,</span><br>
<span class="lineno"></span><span class="op" id="6765550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6765553">var</span>&nbsp;<span class="ident" id="6765557">bigtest</span>&nbsp;<span class="op" id="6765565">=</span>&nbsp;<span class="ident" id="6765567"><a href="/encoding/base64/base64_test.go.html#6764968">testpair</a></span><span class="op" id="6765575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6765578">&#34;Twas&nbsp;brillig,&nbsp;and&nbsp;the&nbsp;slithy&nbsp;toves&#34;</span><span class="op" id="6765614">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6765617">&#34;VHdhcyBicmlsbGlnLCBhbmQgdGhlIHNsaXRoeSB0b3Zlcw==&#34;</span><span class="op" id="6765667">,</span><br>
<span class="lineno"></span><span class="op" id="6765669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6765672">func</span>&nbsp;<span class="ident" id="6765677">testEqual</span><span class="op" id="6765686">(</span><span class="ident" id="6765687">t</span>&nbsp;<span class="op" id="6765689">*</span><span class="ident" id="6765690"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6765697">.</span><span class="ident" id="6765698">T</span><span class="op" id="6765699">,</span>&nbsp;<span class="ident" id="6765701">msg</span>&nbsp;<span class="builtintype" id="6765705">string</span><span class="op" id="6765711">,</span>&nbsp;<span class="ident" id="6765713">args</span>&nbsp;<span class="op" id="6765718">...</span><span class="keyword" id="6765721">interface</span><span class="op" id="6765730">{</span><span class="op" id="6765731">}</span><span class="op" id="6765732">)</span>&nbsp;<span class="builtintype" id="6765734">bool</span>&nbsp;<span class="op" id="6765739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6765742">if</span>&nbsp;<span class="ident" id="6765745"><a href="/encoding/base64/base64_test.go.html#6765713">args</a></span><span class="op" id="6765749">[</span><span class="builtinfunc" id="6765750">len</span><span class="op" id="6765753">(</span><span class="ident" id="6765754"><a href="/encoding/base64/base64_test.go.html#6765713">args</a></span><span class="op" id="6765758">)</span><span class="op" id="6765759">-</span><span class="num" id="6765760">2</span><span class="op" id="6765761">]</span>&nbsp;<span class="op" id="6765763">!=</span>&nbsp;<span class="ident" id="6765766"><a href="/encoding/base64/base64_test.go.html#6765713">args</a></span><span class="op" id="6765770">[</span><span class="builtinfunc" id="6765771">len</span><span class="op" id="6765774">(</span><span class="ident" id="6765775"><a href="/encoding/base64/base64_test.go.html#6765713">args</a></span><span class="op" id="6765779">)</span><span class="op" id="6765780">-</span><span class="num" id="6765781">1</span><span class="op" id="6765782">]</span>&nbsp;<span class="op" id="6765784">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6765788"><a href="/encoding/base64/base64_test.go.html#6765687">t</a></span><span class="op" id="6765789">.</span><span class="ident" id="6765790">Errorf</span><span class="op" id="6765796">(</span><span class="ident" id="6765797"><a href="/encoding/base64/base64_test.go.html#6765701">msg</a></span><span class="op" id="6765800">,</span>&nbsp;<span class="ident" id="6765802"><a href="/encoding/base64/base64_test.go.html#6765713">args</a></span><span class="op" id="6765806">...</span><span class="op" id="6765809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6765813">return</span>&nbsp;<span class="builtintype" id="6765820">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6765827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6765830">return</span>&nbsp;<span class="builtintype" id="6765837">true</span><br>
<span class="lineno"></span><span class="op" id="6765842">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="6765845">func</span>&nbsp;<span class="ident" id="6765850">TestEncode</span><span class="op" id="6765860">(</span><span class="ident" id="6765861">t</span>&nbsp;<span class="op" id="6765863">*</span><span class="ident" id="6765864"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6765871">.</span><span class="ident" id="6765872">T</span><span class="op" id="6765873">)</span>&nbsp;<span class="op" id="6765875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6765878">for</span>&nbsp;<span class="ident" id="6765882">_</span><span class="op" id="6765883">,</span>&nbsp;<span class="ident" id="6765885">p</span>&nbsp;<span class="op" id="6765887">:=</span>&nbsp;<span class="keyword" id="6765890">range</span>&nbsp;<span class="ident" id="6765896"><a href="/encoding/base64/base64_test.go.html#6765018">pairs</a></span>&nbsp;<span class="op" id="6765902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6765906">got</span>&nbsp;<span class="op" id="6765910">:=</span>&nbsp;<span class="ident" id="6765913"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6765924">.</span><span class="ident" id="6765925">EncodeToString</span><span class="op" id="6765939">(</span><span class="op" id="6765940">[</span><span class="op" id="6765941">]</span><span class="builtintype" id="6765942">byte</span><span class="op" id="6765946">(</span><span class="ident" id="6765947"><a href="/encoding/base64/base64_test.go.html#6765885">p</a></span><span class="op" id="6765948">.</span><span class="ident" id="6765949">decoded</span><span class="op" id="6765956">)</span><span class="op" id="6765957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6765961"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6765970">(</span><span class="ident" id="6765971"><a href="/encoding/base64/base64_test.go.html#6765861">t</a></span><span class="op" id="6765972">,</span>&nbsp;<span class="string" id="6765974">&#34;Encode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6766000">,</span>&nbsp;<span class="ident" id="6766002"><a href="/encoding/base64/base64_test.go.html#6765885">p</a></span><span class="op" id="6766003">.</span><span class="ident" id="6766004">decoded</span><span class="op" id="6766011">,</span>&nbsp;<span class="ident" id="6766013"><a href="/encoding/base64/base64_test.go.html#6765906">got</a></span><span class="op" id="6766016">,</span>&nbsp;<span class="ident" id="6766018"><a href="/encoding/base64/base64_test.go.html#6765885">p</a></span><span class="op" id="6766019">.</span><span class="ident" id="6766020">encoded</span><span class="op" id="6766027">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766030">}</span><br>
<span class="lineno"></span><span class="op" id="6766032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6766035">func</span>&nbsp;<span class="ident" id="6766040">TestEncoder</span><span class="op" id="6766051">(</span><span class="ident" id="6766052">t</span>&nbsp;<span class="op" id="6766054">*</span><span class="ident" id="6766055"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6766062">.</span><span class="ident" id="6766063">T</span><span class="op" id="6766064">)</span>&nbsp;<span class="op" id="6766066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6766069">for</span>&nbsp;<span class="ident" id="6766073">_</span><span class="op" id="6766074">,</span>&nbsp;<span class="ident" id="6766076">p</span>&nbsp;<span class="op" id="6766078">:=</span>&nbsp;<span class="keyword" id="6766081">range</span>&nbsp;<span class="ident" id="6766087"><a href="/encoding/base64/base64_test.go.html#6765018">pairs</a></span>&nbsp;<span class="op" id="6766093">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766097">bb</span>&nbsp;<span class="op" id="6766100">:=</span>&nbsp;<span class="op" id="6766103">&amp;</span><span class="ident" id="6766104"><a href="/encoding/base64/base64_test.go.html#6764882">bytes</a></span><span class="op" id="6766109">.</span><span class="ident" id="6766110">Buffer</span><span class="op" id="6766116">{</span><span class="op" id="6766117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766121">encoder</span>&nbsp;<span class="op" id="6766129">:=</span>&nbsp;<span class="ident" id="6766132"><a href="/encoding/base64/base64.go.html#3528843">NewEncoder</a></span><span class="op" id="6766142">(</span><span class="ident" id="6766143"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6766154">,</span>&nbsp;<span class="ident" id="6766156"><a href="/encoding/base64/base64_test.go.html#6766097">bb</a></span><span class="op" id="6766158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766162"><a href="/encoding/base64/base64_test.go.html#6766121">encoder</a></span><span class="op" id="6766169">.</span><span class="ident" id="6766170">Write</span><span class="op" id="6766175">(</span><span class="op" id="6766176">[</span><span class="op" id="6766177">]</span><span class="builtintype" id="6766178">byte</span><span class="op" id="6766182">(</span><span class="ident" id="6766183"><a href="/encoding/base64/base64_test.go.html#6766076">p</a></span><span class="op" id="6766184">.</span><span class="ident" id="6766185">decoded</span><span class="op" id="6766192">)</span><span class="op" id="6766193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766197"><a href="/encoding/base64/base64_test.go.html#6766121">encoder</a></span><span class="op" id="6766204">.</span><span class="ident" id="6766205">Close</span><span class="op" id="6766210">(</span><span class="op" id="6766211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766215"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6766224">(</span><span class="ident" id="6766225"><a href="/encoding/base64/base64_test.go.html#6766052">t</a></span><span class="op" id="6766226">,</span>&nbsp;<span class="string" id="6766228">&#34;Encode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6766254">,</span>&nbsp;<span class="ident" id="6766256"><a href="/encoding/base64/base64_test.go.html#6766076">p</a></span><span class="op" id="6766257">.</span><span class="ident" id="6766258">decoded</span><span class="op" id="6766265">,</span>&nbsp;<span class="ident" id="6766267"><a href="/encoding/base64/base64_test.go.html#6766097">bb</a></span><span class="op" id="6766269">.</span><span class="ident" id="6766270">String</span><span class="op" id="6766276">(</span><span class="op" id="6766277">)</span><span class="op" id="6766278">,</span>&nbsp;<span class="ident" id="6766280"><a href="/encoding/base64/base64_test.go.html#6766076">p</a></span><span class="op" id="6766281">.</span><span class="ident" id="6766282">encoded</span><span class="op" id="6766289">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766292">}</span><br>
<span class="lineno"></span><span class="op" id="6766294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6766297">func</span>&nbsp;<span class="ident" id="6766302">TestEncoderBuffering</span><span class="op" id="6766322">(</span><span class="ident" id="6766323">t</span>&nbsp;<span class="op" id="6766325">*</span><span class="ident" id="6766326"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6766333">.</span><span class="ident" id="6766334">T</span><span class="op" id="6766335">)</span>&nbsp;<span class="op" id="6766337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766340">input</span>&nbsp;<span class="op" id="6766346">:=</span>&nbsp;<span class="op" id="6766349">[</span><span class="op" id="6766350">]</span><span class="builtintype" id="6766351">byte</span><span class="op" id="6766355">(</span><span class="ident" id="6766356"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6766363">.</span><span class="ident" id="6766364">decoded</span><span class="op" id="6766371">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6766374">for</span>&nbsp;<span class="ident" id="6766378">bs</span>&nbsp;<span class="op" id="6766381">:=</span>&nbsp;<span class="num" id="6766384">1</span><span class="op" id="6766385">;</span>&nbsp;<span class="ident" id="6766387"><a href="/encoding/base64/base64_test.go.html#6766378">bs</a></span>&nbsp;<span class="op" id="6766390">&lt;=</span>&nbsp;<span class="num" id="6766393">12</span><span class="op" id="6766395">;</span>&nbsp;<span class="ident" id="6766397"><a href="/encoding/base64/base64_test.go.html#6766378">bs</a></span><span class="op" id="6766399">++</span>&nbsp;<span class="op" id="6766402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766406">bb</span>&nbsp;<span class="op" id="6766409">:=</span>&nbsp;<span class="op" id="6766412">&amp;</span><span class="ident" id="6766413"><a href="/encoding/base64/base64_test.go.html#6764882">bytes</a></span><span class="op" id="6766418">.</span><span class="ident" id="6766419">Buffer</span><span class="op" id="6766425">{</span><span class="op" id="6766426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766430">encoder</span>&nbsp;<span class="op" id="6766438">:=</span>&nbsp;<span class="ident" id="6766441"><a href="/encoding/base64/base64.go.html#3528843">NewEncoder</a></span><span class="op" id="6766451">(</span><span class="ident" id="6766452"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6766463">,</span>&nbsp;<span class="ident" id="6766465"><a href="/encoding/base64/base64_test.go.html#6766406">bb</a></span><span class="op" id="6766467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6766471">for</span>&nbsp;<span class="ident" id="6766475">pos</span>&nbsp;<span class="op" id="6766479">:=</span>&nbsp;<span class="num" id="6766482">0</span><span class="op" id="6766483">;</span>&nbsp;<span class="ident" id="6766485"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span>&nbsp;<span class="op" id="6766489">&lt;</span>&nbsp;<span class="builtinfunc" id="6766491">len</span><span class="op" id="6766494">(</span><span class="ident" id="6766495"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766500">)</span><span class="op" id="6766501">;</span>&nbsp;<span class="ident" id="6766503"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span>&nbsp;<span class="op" id="6766507">+=</span>&nbsp;<span class="ident" id="6766510"><a href="/encoding/base64/base64_test.go.html#6766378">bs</a></span>&nbsp;<span class="op" id="6766513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766518">end</span>&nbsp;<span class="op" id="6766522">:=</span>&nbsp;<span class="ident" id="6766525"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span>&nbsp;<span class="op" id="6766529">+</span>&nbsp;<span class="ident" id="6766531"><a href="/encoding/base64/base64_test.go.html#6766378">bs</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6766537">if</span>&nbsp;<span class="ident" id="6766540"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span>&nbsp;<span class="op" id="6766544">&gt;</span>&nbsp;<span class="builtinfunc" id="6766546">len</span><span class="op" id="6766549">(</span><span class="ident" id="6766550"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766555">)</span>&nbsp;<span class="op" id="6766557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766563"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span>&nbsp;<span class="op" id="6766567">=</span>&nbsp;<span class="builtinfunc" id="6766569">len</span><span class="op" id="6766572">(</span><span class="ident" id="6766573"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766588">n</span><span class="op" id="6766589">,</span>&nbsp;<span class="ident" id="6766591">err</span>&nbsp;<span class="op" id="6766595">:=</span>&nbsp;<span class="ident" id="6766598"><a href="/encoding/base64/base64_test.go.html#6766430">encoder</a></span><span class="op" id="6766605">.</span><span class="ident" id="6766606">Write</span><span class="op" id="6766611">(</span><span class="ident" id="6766612"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766617">[</span><span class="ident" id="6766618"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span><span class="op" id="6766621">:</span><span class="ident" id="6766622"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span><span class="op" id="6766625">]</span><span class="op" id="6766626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766631"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6766640">(</span><span class="ident" id="6766641"><a href="/encoding/base64/base64_test.go.html#6766323">t</a></span><span class="op" id="6766642">,</span>&nbsp;<span class="string" id="6766644">&#34;Write(%q)&nbsp;gave&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6766678">,</span>&nbsp;<span class="ident" id="6766680"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766685">[</span><span class="ident" id="6766686"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span><span class="op" id="6766689">:</span><span class="ident" id="6766690"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span><span class="op" id="6766693">]</span><span class="op" id="6766694">,</span>&nbsp;<span class="ident" id="6766696"><a href="/encoding/base64/base64_test.go.html#6766591">err</a></span><span class="op" id="6766699">,</span>&nbsp;<span class="builtintype" id="6766701">error</span><span class="op" id="6766706">(</span><span class="ident" id="6766707">nil</span><span class="op" id="6766710">)</span><span class="op" id="6766711">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766716"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6766725">(</span><span class="ident" id="6766726"><a href="/encoding/base64/base64_test.go.html#6766323">t</a></span><span class="op" id="6766727">,</span>&nbsp;<span class="string" id="6766729">&#34;Write(%q)&nbsp;gave&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6766764">,</span>&nbsp;<span class="ident" id="6766766"><a href="/encoding/base64/base64_test.go.html#6766340">input</a></span><span class="op" id="6766771">[</span><span class="ident" id="6766772"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span><span class="op" id="6766775">:</span><span class="ident" id="6766776"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span><span class="op" id="6766779">]</span><span class="op" id="6766780">,</span>&nbsp;<span class="ident" id="6766782"><a href="/encoding/base64/base64_test.go.html#6766588">n</a></span><span class="op" id="6766783">,</span>&nbsp;<span class="ident" id="6766785"><a href="/encoding/base64/base64_test.go.html#6766518">end</a></span><span class="op" id="6766788">-</span><span class="ident" id="6766789"><a href="/encoding/base64/base64_test.go.html#6766475">pos</a></span><span class="op" id="6766792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766800">err</span>&nbsp;<span class="op" id="6766804">:=</span>&nbsp;<span class="ident" id="6766807"><a href="/encoding/base64/base64_test.go.html#6766430">encoder</a></span><span class="op" id="6766814">.</span><span class="ident" id="6766815">Close</span><span class="op" id="6766820">(</span><span class="op" id="6766821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766825"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6766834">(</span><span class="ident" id="6766835"><a href="/encoding/base64/base64_test.go.html#6766323">t</a></span><span class="op" id="6766836">,</span>&nbsp;<span class="string" id="6766838">&#34;Close&nbsp;gave&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6766868">,</span>&nbsp;<span class="ident" id="6766870"><a href="/encoding/base64/base64_test.go.html#6766800">err</a></span><span class="op" id="6766873">,</span>&nbsp;<span class="builtintype" id="6766875">error</span><span class="op" id="6766880">(</span><span class="ident" id="6766881">nil</span><span class="op" id="6766884">)</span><span class="op" id="6766885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6766889"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6766898">(</span><span class="ident" id="6766899"><a href="/encoding/base64/base64_test.go.html#6766323">t</a></span><span class="op" id="6766900">,</span>&nbsp;<span class="string" id="6766902">&#34;Encoding/%d&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6766935">,</span>&nbsp;<span class="ident" id="6766937"><a href="/encoding/base64/base64_test.go.html#6766378">bs</a></span><span class="op" id="6766939">,</span>&nbsp;<span class="ident" id="6766941"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6766948">.</span><span class="ident" id="6766949">decoded</span><span class="op" id="6766956">,</span>&nbsp;<span class="ident" id="6766958"><a href="/encoding/base64/base64_test.go.html#6766406">bb</a></span><span class="op" id="6766960">.</span><span class="ident" id="6766961">String</span><span class="op" id="6766967">(</span><span class="op" id="6766968">)</span><span class="op" id="6766969">,</span>&nbsp;<span class="ident" id="6766971"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6766978">.</span><span class="ident" id="6766979">encoded</span><span class="op" id="6766986">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6766989">}</span><br>
<span class="lineno"></span><span class="op" id="6766991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6766994">func</span>&nbsp;<span class="ident" id="6766999">TestDecode</span><span class="op" id="6767009">(</span><span class="ident" id="6767010">t</span>&nbsp;<span class="op" id="6767012">*</span><span class="ident" id="6767013"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6767020">.</span><span class="ident" id="6767021">T</span><span class="op" id="6767022">)</span>&nbsp;<span class="op" id="6767024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767027">for</span>&nbsp;<span class="ident" id="6767031">_</span><span class="op" id="6767032">,</span>&nbsp;<span class="ident" id="6767034">p</span>&nbsp;<span class="op" id="6767036">:=</span>&nbsp;<span class="keyword" id="6767039">range</span>&nbsp;<span class="ident" id="6767045"><a href="/encoding/base64/base64_test.go.html#6765018">pairs</a></span>&nbsp;<span class="op" id="6767051">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767055">dbuf</span>&nbsp;<span class="op" id="6767060">:=</span>&nbsp;<span class="builtinfunc" id="6767063">make</span><span class="op" id="6767067">(</span><span class="op" id="6767068">[</span><span class="op" id="6767069">]</span><span class="builtintype" id="6767070">byte</span><span class="op" id="6767074">,</span>&nbsp;<span class="ident" id="6767076"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6767087">.</span><span class="ident" id="6767088">DecodedLen</span><span class="op" id="6767098">(</span><span class="builtinfunc" id="6767099">len</span><span class="op" id="6767102">(</span><span class="ident" id="6767103"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767104">.</span><span class="ident" id="6767105">encoded</span><span class="op" id="6767112">)</span><span class="op" id="6767113">)</span><span class="op" id="6767114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767118">count</span><span class="op" id="6767123">,</span>&nbsp;<span class="ident" id="6767125">end</span><span class="op" id="6767128">,</span>&nbsp;<span class="ident" id="6767130">err</span>&nbsp;<span class="op" id="6767134">:=</span>&nbsp;<span class="ident" id="6767137"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6767148">.</span><span class="ident" id="6767149">decode</span><span class="op" id="6767155">(</span><span class="ident" id="6767156"><a href="/encoding/base64/base64_test.go.html#6767055">dbuf</a></span><span class="op" id="6767160">,</span>&nbsp;<span class="op" id="6767162">[</span><span class="op" id="6767163">]</span><span class="builtintype" id="6767164">byte</span><span class="op" id="6767168">(</span><span class="ident" id="6767169"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767170">.</span><span class="ident" id="6767171">encoded</span><span class="op" id="6767178">)</span><span class="op" id="6767179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767183"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767192">(</span><span class="ident" id="6767193"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767194">,</span>&nbsp;<span class="string" id="6767196">&#34;Decode(%q)&nbsp;=&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6767228">,</span>&nbsp;<span class="ident" id="6767230"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767231">.</span><span class="ident" id="6767232">encoded</span><span class="op" id="6767239">,</span>&nbsp;<span class="ident" id="6767241"><a href="/encoding/base64/base64_test.go.html#6767130">err</a></span><span class="op" id="6767244">,</span>&nbsp;<span class="builtintype" id="6767246">error</span><span class="op" id="6767251">(</span><span class="ident" id="6767252">nil</span><span class="op" id="6767255">)</span><span class="op" id="6767256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767260"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767269">(</span><span class="ident" id="6767270"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767271">,</span>&nbsp;<span class="string" id="6767273">&#34;Decode(%q)&nbsp;=&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6767306">,</span>&nbsp;<span class="ident" id="6767308"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767309">.</span><span class="ident" id="6767310">encoded</span><span class="op" id="6767317">,</span>&nbsp;<span class="ident" id="6767319"><a href="/encoding/base64/base64_test.go.html#6767118">count</a></span><span class="op" id="6767324">,</span>&nbsp;<span class="builtinfunc" id="6767326">len</span><span class="op" id="6767329">(</span><span class="ident" id="6767330"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767331">.</span><span class="ident" id="6767332">decoded</span><span class="op" id="6767339">)</span><span class="op" id="6767340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767344">if</span>&nbsp;<span class="builtinfunc" id="6767347">len</span><span class="op" id="6767350">(</span><span class="ident" id="6767351"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767352">.</span><span class="ident" id="6767353">encoded</span><span class="op" id="6767360">)</span>&nbsp;<span class="op" id="6767362">&gt;</span>&nbsp;<span class="num" id="6767364">0</span>&nbsp;<span class="op" id="6767366">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767371"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767380">(</span><span class="ident" id="6767381"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767382">,</span>&nbsp;<span class="string" id="6767384">&#34;Decode(%q)&nbsp;=&nbsp;end&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6767414">,</span>&nbsp;<span class="ident" id="6767416"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767417">.</span><span class="ident" id="6767418">encoded</span><span class="op" id="6767425">,</span>&nbsp;<span class="ident" id="6767427"><a href="/encoding/base64/base64_test.go.html#6767125">end</a></span><span class="op" id="6767430">,</span>&nbsp;<span class="op" id="6767432">(</span><span class="ident" id="6767433"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767434">.</span><span class="ident" id="6767435">encoded</span><span class="op" id="6767442">[</span><span class="builtinfunc" id="6767443">len</span><span class="op" id="6767446">(</span><span class="ident" id="6767447"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767448">.</span><span class="ident" id="6767449">encoded</span><span class="op" id="6767456">)</span><span class="op" id="6767457">-</span><span class="num" id="6767458">1</span><span class="op" id="6767459">]</span>&nbsp;<span class="op" id="6767461">==</span>&nbsp;<span class="string" id="6767464">&#39;=&#39;</span><span class="op" id="6767467">)</span><span class="op" id="6767468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767476"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767485">(</span><span class="ident" id="6767486"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767487">,</span>&nbsp;<span class="string" id="6767489">&#34;Decode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6767515">,</span>&nbsp;<span class="ident" id="6767517"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767518">.</span><span class="ident" id="6767519">encoded</span><span class="op" id="6767526">,</span>&nbsp;<span class="builtintype" id="6767528">string</span><span class="op" id="6767534">(</span><span class="ident" id="6767535"><a href="/encoding/base64/base64_test.go.html#6767055">dbuf</a></span><span class="op" id="6767539">[</span><span class="num" id="6767540">0</span><span class="op" id="6767541">:</span><span class="ident" id="6767542"><a href="/encoding/base64/base64_test.go.html#6767118">count</a></span><span class="op" id="6767547">]</span><span class="op" id="6767548">)</span><span class="op" id="6767549">,</span>&nbsp;<span class="ident" id="6767551"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767552">.</span><span class="ident" id="6767553">decoded</span><span class="op" id="6767560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767565"><a href="/encoding/base64/base64_test.go.html#6767055">dbuf</a></span><span class="op" id="6767569">,</span>&nbsp;<span class="ident" id="6767571"><a href="/encoding/base64/base64_test.go.html#6767130">err</a></span>&nbsp;<span class="op" id="6767575">=</span>&nbsp;<span class="ident" id="6767577"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6767588">.</span><span class="ident" id="6767589">DecodeString</span><span class="op" id="6767601">(</span><span class="ident" id="6767602"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767603">.</span><span class="ident" id="6767604">encoded</span><span class="op" id="6767611">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767615"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767624">(</span><span class="ident" id="6767625"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767626">,</span>&nbsp;<span class="string" id="6767628">&#34;DecodeString(%q)&nbsp;=&nbsp;error&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6767666">,</span>&nbsp;<span class="ident" id="6767668"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767669">.</span><span class="ident" id="6767670">encoded</span><span class="op" id="6767677">,</span>&nbsp;<span class="ident" id="6767679"><a href="/encoding/base64/base64_test.go.html#6767130">err</a></span><span class="op" id="6767682">,</span>&nbsp;<span class="builtintype" id="6767684">error</span><span class="op" id="6767689">(</span><span class="ident" id="6767690">nil</span><span class="op" id="6767693">)</span><span class="op" id="6767694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767698"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6767707">(</span><span class="ident" id="6767708"><a href="/encoding/base64/base64_test.go.html#6767010">t</a></span><span class="op" id="6767709">,</span>&nbsp;<span class="string" id="6767711">&#34;DecodeString(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6767743">,</span>&nbsp;<span class="builtintype" id="6767745">string</span><span class="op" id="6767751">(</span><span class="ident" id="6767752"><a href="/encoding/base64/base64_test.go.html#6767055">dbuf</a></span><span class="op" id="6767756">)</span><span class="op" id="6767757">,</span>&nbsp;<span class="ident" id="6767759"><a href="/encoding/base64/base64_test.go.html#6767034">p</a></span><span class="op" id="6767760">.</span><span class="ident" id="6767761">decoded</span><span class="op" id="6767768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767771">}</span><br>
<span class="lineno"></span><span class="op" id="6767773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="6767776">func</span>&nbsp;<span class="ident" id="6767781">TestDecoder</span><span class="op" id="6767792">(</span><span class="ident" id="6767793">t</span>&nbsp;<span class="op" id="6767795">*</span><span class="ident" id="6767796"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6767803">.</span><span class="ident" id="6767804">T</span><span class="op" id="6767805">)</span>&nbsp;<span class="op" id="6767807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767810">for</span>&nbsp;<span class="ident" id="6767814">_</span><span class="op" id="6767815">,</span>&nbsp;<span class="ident" id="6767817">p</span>&nbsp;<span class="op" id="6767819">:=</span>&nbsp;<span class="keyword" id="6767822">range</span>&nbsp;<span class="ident" id="6767828"><a href="/encoding/base64/base64_test.go.html#6765018">pairs</a></span>&nbsp;<span class="op" id="6767834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767838">decoder</span>&nbsp;<span class="op" id="6767846">:=</span>&nbsp;<span class="ident" id="6767849"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6767859">(</span><span class="ident" id="6767860"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6767871">,</span>&nbsp;<span class="ident" id="6767873"><a href="/encoding/base64/base64_test.go.html#6764931">strings</a></span><span class="op" id="6767880">.</span><span class="ident" id="6767881">NewReader</span><span class="op" id="6767890">(</span><span class="ident" id="6767891"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6767892">.</span><span class="ident" id="6767893">encoded</span><span class="op" id="6767900">)</span><span class="op" id="6767901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767905">dbuf</span>&nbsp;<span class="op" id="6767910">:=</span>&nbsp;<span class="builtinfunc" id="6767913">make</span><span class="op" id="6767917">(</span><span class="op" id="6767918">[</span><span class="op" id="6767919">]</span><span class="builtintype" id="6767920">byte</span><span class="op" id="6767924">,</span>&nbsp;<span class="ident" id="6767926"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6767937">.</span><span class="ident" id="6767938">DecodedLen</span><span class="op" id="6767948">(</span><span class="builtinfunc" id="6767949">len</span><span class="op" id="6767952">(</span><span class="ident" id="6767953"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6767954">.</span><span class="ident" id="6767955">encoded</span><span class="op" id="6767962">)</span><span class="op" id="6767963">)</span><span class="op" id="6767964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767968">count</span><span class="op" id="6767973">,</span>&nbsp;<span class="ident" id="6767975">err</span>&nbsp;<span class="op" id="6767979">:=</span>&nbsp;<span class="ident" id="6767982"><a href="/encoding/base64/base64_test.go.html#6767838">decoder</a></span><span class="op" id="6767989">.</span><span class="ident" id="6767990">Read</span><span class="op" id="6767994">(</span><span class="ident" id="6767995"><a href="/encoding/base64/base64_test.go.html#6767905">dbuf</a></span><span class="op" id="6767999">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768003">if</span>&nbsp;<span class="ident" id="6768006"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span>&nbsp;<span class="op" id="6768010">!=</span>&nbsp;<span class="ident" id="6768013">nil</span>&nbsp;<span class="op" id="6768017">&amp;&amp;</span>&nbsp;<span class="ident" id="6768020"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span>&nbsp;<span class="op" id="6768024">!=</span>&nbsp;<span class="ident" id="6768027"><a href="/encoding/base64/base64_test.go.html#6764901">io</a></span><span class="op" id="6768029">.</span><span class="ident" id="6768030">EOF</span>&nbsp;<span class="op" id="6768034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768039"><a href="/encoding/base64/base64_test.go.html#6767793">t</a></span><span class="op" id="6768040">.</span><span class="ident" id="6768041">Fatal</span><span class="op" id="6768046">(</span><span class="string" id="6768047">&#34;Read&nbsp;failed&#34;</span><span class="op" id="6768060">,</span>&nbsp;<span class="ident" id="6768062"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span><span class="op" id="6768065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768073"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6768082">(</span><span class="ident" id="6768083"><a href="/encoding/base64/base64_test.go.html#6767793">t</a></span><span class="op" id="6768084">,</span>&nbsp;<span class="string" id="6768086">&#34;Read&nbsp;from&nbsp;%q&nbsp;=&nbsp;length&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6768121">,</span>&nbsp;<span class="ident" id="6768123"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6768124">.</span><span class="ident" id="6768125">encoded</span><span class="op" id="6768132">,</span>&nbsp;<span class="ident" id="6768134"><a href="/encoding/base64/base64_test.go.html#6767968">count</a></span><span class="op" id="6768139">,</span>&nbsp;<span class="builtinfunc" id="6768141">len</span><span class="op" id="6768144">(</span><span class="ident" id="6768145"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6768146">.</span><span class="ident" id="6768147">decoded</span><span class="op" id="6768154">)</span><span class="op" id="6768155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768159"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6768168">(</span><span class="ident" id="6768169"><a href="/encoding/base64/base64_test.go.html#6767793">t</a></span><span class="op" id="6768170">,</span>&nbsp;<span class="string" id="6768172">&#34;Decoding&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6768202">,</span>&nbsp;<span class="ident" id="6768204"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6768205">.</span><span class="ident" id="6768206">encoded</span><span class="op" id="6768213">,</span>&nbsp;<span class="builtintype" id="6768215">string</span><span class="op" id="6768221">(</span><span class="ident" id="6768222"><a href="/encoding/base64/base64_test.go.html#6767905">dbuf</a></span><span class="op" id="6768226">[</span><span class="num" id="6768227">0</span><span class="op" id="6768228">:</span><span class="ident" id="6768229"><a href="/encoding/base64/base64_test.go.html#6767968">count</a></span><span class="op" id="6768234">]</span><span class="op" id="6768235">)</span><span class="op" id="6768236">,</span>&nbsp;<span class="ident" id="6768238"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6768239">.</span><span class="ident" id="6768240">decoded</span><span class="op" id="6768247">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768251">if</span>&nbsp;<span class="ident" id="6768254"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span>&nbsp;<span class="op" id="6768258">!=</span>&nbsp;<span class="ident" id="6768261"><a href="/encoding/base64/base64_test.go.html#6764901">io</a></span><span class="op" id="6768263">.</span><span class="ident" id="6768264">EOF</span>&nbsp;<span class="op" id="6768268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768273"><a href="/encoding/base64/base64_test.go.html#6767968">count</a></span><span class="op" id="6768278">,</span>&nbsp;<span class="ident" id="6768280"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span>&nbsp;<span class="op" id="6768284">=</span>&nbsp;<span class="ident" id="6768286"><a href="/encoding/base64/base64_test.go.html#6767838">decoder</a></span><span class="op" id="6768293">.</span><span class="ident" id="6768294">Read</span><span class="op" id="6768298">(</span><span class="ident" id="6768299"><a href="/encoding/base64/base64_test.go.html#6767905">dbuf</a></span><span class="op" id="6768303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768311"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6768320">(</span><span class="ident" id="6768321"><a href="/encoding/base64/base64_test.go.html#6767793">t</a></span><span class="op" id="6768322">,</span>&nbsp;<span class="string" id="6768324">&#34;Read&nbsp;from&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6768352">,</span>&nbsp;<span class="ident" id="6768354"><a href="/encoding/base64/base64_test.go.html#6767817">p</a></span><span class="op" id="6768355">.</span><span class="ident" id="6768356">encoded</span><span class="op" id="6768363">,</span>&nbsp;<span class="ident" id="6768365"><a href="/encoding/base64/base64_test.go.html#6767975">err</a></span><span class="op" id="6768368">,</span>&nbsp;<span class="ident" id="6768370"><a href="/encoding/base64/base64_test.go.html#6764901">io</a></span><span class="op" id="6768372">.</span><span class="ident" id="6768373">EOF</span><span class="op" id="6768376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768379">}</span><br>
<span class="lineno">130</span><span class="op" id="6768381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6768384">func</span>&nbsp;<span class="ident" id="6768389">TestDecoderBuffering</span><span class="op" id="6768409">(</span><span class="ident" id="6768410">t</span>&nbsp;<span class="op" id="6768412">*</span><span class="ident" id="6768413"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6768420">.</span><span class="ident" id="6768421">T</span><span class="op" id="6768422">)</span>&nbsp;<span class="op" id="6768424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768427">for</span>&nbsp;<span class="ident" id="6768431">bs</span>&nbsp;<span class="op" id="6768434">:=</span>&nbsp;<span class="num" id="6768437">1</span><span class="op" id="6768438">;</span>&nbsp;<span class="ident" id="6768440"><a href="/encoding/base64/base64_test.go.html#6768431">bs</a></span>&nbsp;<span class="op" id="6768443">&lt;=</span>&nbsp;<span class="num" id="6768446">12</span><span class="op" id="6768448">;</span>&nbsp;<span class="ident" id="6768450"><a href="/encoding/base64/base64_test.go.html#6768431">bs</a></span><span class="op" id="6768452">++</span>&nbsp;<span class="op" id="6768455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768459">decoder</span>&nbsp;<span class="op" id="6768467">:=</span>&nbsp;<span class="ident" id="6768470"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6768480">(</span><span class="ident" id="6768481"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6768492">,</span>&nbsp;<span class="ident" id="6768494"><a href="/encoding/base64/base64_test.go.html#6764931">strings</a></span><span class="op" id="6768501">.</span><span class="ident" id="6768502">NewReader</span><span class="op" id="6768511">(</span><span class="ident" id="6768512"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768519">.</span><span class="ident" id="6768520">encoded</span><span class="op" id="6768527">)</span><span class="op" id="6768528">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768532">buf</span>&nbsp;<span class="op" id="6768536">:=</span>&nbsp;<span class="builtinfunc" id="6768539">make</span><span class="op" id="6768543">(</span><span class="op" id="6768544">[</span><span class="op" id="6768545">]</span><span class="builtintype" id="6768546">byte</span><span class="op" id="6768550">,</span>&nbsp;<span class="builtinfunc" id="6768552">len</span><span class="op" id="6768555">(</span><span class="ident" id="6768556"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768563">.</span><span class="ident" id="6768564">decoded</span><span class="op" id="6768571">)</span><span class="op" id="6768572">+</span><span class="num" id="6768573">12</span><span class="op" id="6768575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768579">var</span>&nbsp;<span class="ident" id="6768583">total</span>&nbsp;<span class="builtintype" id="6768589">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768595">for</span>&nbsp;<span class="ident" id="6768599"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span>&nbsp;<span class="op" id="6768605">=</span>&nbsp;<span class="num" id="6768607">0</span><span class="op" id="6768608">;</span>&nbsp;<span class="ident" id="6768610"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span>&nbsp;<span class="op" id="6768616">&lt;</span>&nbsp;<span class="builtinfunc" id="6768618">len</span><span class="op" id="6768621">(</span><span class="ident" id="6768622"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768629">.</span><span class="ident" id="6768630">decoded</span><span class="op" id="6768637">)</span><span class="op" id="6768638">;</span>&nbsp;<span class="op" id="6768640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768645">n</span><span class="op" id="6768646">,</span>&nbsp;<span class="ident" id="6768648">err</span>&nbsp;<span class="op" id="6768652">:=</span>&nbsp;<span class="ident" id="6768655"><a href="/encoding/base64/base64_test.go.html#6768459">decoder</a></span><span class="op" id="6768662">.</span><span class="ident" id="6768663">Read</span><span class="op" id="6768667">(</span><span class="ident" id="6768668"><a href="/encoding/base64/base64_test.go.html#6768532">buf</a></span><span class="op" id="6768671">[</span><span class="ident" id="6768672"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span>&nbsp;<span class="op" id="6768678">:</span>&nbsp;<span class="ident" id="6768680"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span><span class="op" id="6768685">+</span><span class="ident" id="6768686"><a href="/encoding/base64/base64_test.go.html#6768431">bs</a></span><span class="op" id="6768688">]</span><span class="op" id="6768689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768694"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6768703">(</span><span class="ident" id="6768704"><a href="/encoding/base64/base64_test.go.html#6768410">t</a></span><span class="op" id="6768705">,</span>&nbsp;<span class="string" id="6768707">&#34;Read&nbsp;from&nbsp;%q&nbsp;at&nbsp;pos&nbsp;%d&nbsp;=&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;_,&nbsp;%v&#34;</span><span class="op" id="6768752">,</span>&nbsp;<span class="ident" id="6768754"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768761">.</span><span class="ident" id="6768762">encoded</span><span class="op" id="6768769">,</span>&nbsp;<span class="ident" id="6768771"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span><span class="op" id="6768776">,</span>&nbsp;<span class="ident" id="6768778"><a href="/encoding/base64/base64_test.go.html#6768645">n</a></span><span class="op" id="6768779">,</span>&nbsp;<span class="ident" id="6768781"><a href="/encoding/base64/base64_test.go.html#6768648">err</a></span><span class="op" id="6768784">,</span>&nbsp;<span class="builtintype" id="6768786">error</span><span class="op" id="6768791">(</span><span class="ident" id="6768792">nil</span><span class="op" id="6768795">)</span><span class="op" id="6768796">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768801"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span>&nbsp;<span class="op" id="6768807">+=</span>&nbsp;<span class="ident" id="6768810"><a href="/encoding/base64/base64_test.go.html#6768645">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768818"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6768827">(</span><span class="ident" id="6768828"><a href="/encoding/base64/base64_test.go.html#6768410">t</a></span><span class="op" id="6768829">,</span>&nbsp;<span class="string" id="6768831">&#34;Decoding/%d&nbsp;of&nbsp;%q&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6768864">,</span>&nbsp;<span class="ident" id="6768866"><a href="/encoding/base64/base64_test.go.html#6768431">bs</a></span><span class="op" id="6768868">,</span>&nbsp;<span class="ident" id="6768870"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768877">.</span><span class="ident" id="6768878">encoded</span><span class="op" id="6768885">,</span>&nbsp;<span class="builtintype" id="6768887">string</span><span class="op" id="6768893">(</span><span class="ident" id="6768894"><a href="/encoding/base64/base64_test.go.html#6768532">buf</a></span><span class="op" id="6768897">[</span><span class="num" id="6768898">0</span><span class="op" id="6768899">:</span><span class="ident" id="6768900"><a href="/encoding/base64/base64_test.go.html#6768583">total</a></span><span class="op" id="6768905">]</span><span class="op" id="6768906">)</span><span class="op" id="6768907">,</span>&nbsp;<span class="ident" id="6768909"><a href="/encoding/base64/base64_test.go.html#6765557">bigtest</a></span><span class="op" id="6768916">.</span><span class="ident" id="6768917">decoded</span><span class="op" id="6768924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768927">}</span><br>
<span class="lineno"></span><span class="op" id="6768929">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="6768932">func</span>&nbsp;<span class="ident" id="6768937">TestDecodeCorrupt</span><span class="op" id="6768954">(</span><span class="ident" id="6768955">t</span>&nbsp;<span class="op" id="6768957">*</span><span class="ident" id="6768958"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6768965">.</span><span class="ident" id="6768966">T</span><span class="op" id="6768967">)</span>&nbsp;<span class="op" id="6768969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768972">testCases</span>&nbsp;<span class="op" id="6768982">:=</span>&nbsp;<span class="op" id="6768985">[</span><span class="op" id="6768986">]</span><span class="keyword" id="6768987">struct</span>&nbsp;<span class="op" id="6768994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768998">input</span>&nbsp;&nbsp;<span class="builtintype" id="6769005">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769014">offset</span>&nbsp;<span class="builtintype" id="6769021">int</span>&nbsp;<span class="comment" id="6769025">//&nbsp;-1&nbsp;means&nbsp;no&nbsp;corruption.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769053">}</span><span class="op" id="6769054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769058">{</span><span class="string" id="6769059">&#34;&#34;</span><span class="op" id="6769061">,</span>&nbsp;<span class="op" id="6769063">-</span><span class="num" id="6769064">1</span><span class="op" id="6769065">}</span><span class="op" id="6769066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769070">{</span><span class="string" id="6769071">&#34;!!!!&#34;</span><span class="op" id="6769077">,</span>&nbsp;<span class="num" id="6769079">0</span><span class="op" id="6769080">}</span><span class="op" id="6769081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769085">{</span><span class="string" id="6769086">&#34;====&#34;</span><span class="op" id="6769092">,</span>&nbsp;<span class="num" id="6769094">0</span><span class="op" id="6769095">}</span><span class="op" id="6769096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769100">{</span><span class="string" id="6769101">&#34;x===&#34;</span><span class="op" id="6769107">,</span>&nbsp;<span class="num" id="6769109">1</span><span class="op" id="6769110">}</span><span class="op" id="6769111">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769115">{</span><span class="string" id="6769116">&#34;=AAA&#34;</span><span class="op" id="6769122">,</span>&nbsp;<span class="num" id="6769124">0</span><span class="op" id="6769125">}</span><span class="op" id="6769126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769130">{</span><span class="string" id="6769131">&#34;A=AA&#34;</span><span class="op" id="6769137">,</span>&nbsp;<span class="num" id="6769139">1</span><span class="op" id="6769140">}</span><span class="op" id="6769141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769145">{</span><span class="string" id="6769146">&#34;AA=A&#34;</span><span class="op" id="6769152">,</span>&nbsp;<span class="num" id="6769154">2</span><span class="op" id="6769155">}</span><span class="op" id="6769156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769160">{</span><span class="string" id="6769161">&#34;AA==A&#34;</span><span class="op" id="6769168">,</span>&nbsp;<span class="num" id="6769170">4</span><span class="op" id="6769171">}</span><span class="op" id="6769172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769176">{</span><span class="string" id="6769177">&#34;AAA=AAAA&#34;</span><span class="op" id="6769187">,</span>&nbsp;<span class="num" id="6769189">4</span><span class="op" id="6769190">}</span><span class="op" id="6769191">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769195">{</span><span class="string" id="6769196">&#34;AAAAA&#34;</span><span class="op" id="6769203">,</span>&nbsp;<span class="num" id="6769205">4</span><span class="op" id="6769206">}</span><span class="op" id="6769207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769211">{</span><span class="string" id="6769212">&#34;AAAAAA&#34;</span><span class="op" id="6769220">,</span>&nbsp;<span class="num" id="6769222">4</span><span class="op" id="6769223">}</span><span class="op" id="6769224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769228">{</span><span class="string" id="6769229">&#34;A=&#34;</span><span class="op" id="6769233">,</span>&nbsp;<span class="num" id="6769235">1</span><span class="op" id="6769236">}</span><span class="op" id="6769237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769241">{</span><span class="string" id="6769242">&#34;A==&#34;</span><span class="op" id="6769247">,</span>&nbsp;<span class="num" id="6769249">1</span><span class="op" id="6769250">}</span><span class="op" id="6769251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769255">{</span><span class="string" id="6769256">&#34;AA=&#34;</span><span class="op" id="6769261">,</span>&nbsp;<span class="num" id="6769263">3</span><span class="op" id="6769264">}</span><span class="op" id="6769265">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769269">{</span><span class="string" id="6769270">&#34;AA==&#34;</span><span class="op" id="6769276">,</span>&nbsp;<span class="op" id="6769278">-</span><span class="num" id="6769279">1</span><span class="op" id="6769280">}</span><span class="op" id="6769281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769285">{</span><span class="string" id="6769286">&#34;AAA=&#34;</span><span class="op" id="6769292">,</span>&nbsp;<span class="op" id="6769294">-</span><span class="num" id="6769295">1</span><span class="op" id="6769296">}</span><span class="op" id="6769297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769301">{</span><span class="string" id="6769302">&#34;AAAA&#34;</span><span class="op" id="6769308">,</span>&nbsp;<span class="op" id="6769310">-</span><span class="num" id="6769311">1</span><span class="op" id="6769312">}</span><span class="op" id="6769313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769317">{</span><span class="string" id="6769318">&#34;AAAAAA=&#34;</span><span class="op" id="6769327">,</span>&nbsp;<span class="num" id="6769329">7</span><span class="op" id="6769330">}</span><span class="op" id="6769331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769335">{</span><span class="string" id="6769336">&#34;YWJjZA=====&#34;</span><span class="op" id="6769349">,</span>&nbsp;<span class="num" id="6769351">8</span><span class="op" id="6769352">}</span><span class="op" id="6769353">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769359">for</span>&nbsp;<span class="ident" id="6769363">_</span><span class="op" id="6769364">,</span>&nbsp;<span class="ident" id="6769366">tc</span>&nbsp;<span class="op" id="6769369">:=</span>&nbsp;<span class="keyword" id="6769372">range</span>&nbsp;<span class="ident" id="6769378"><a href="/encoding/base64/base64_test.go.html#6768972">testCases</a></span>&nbsp;<span class="op" id="6769388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769392">dbuf</span>&nbsp;<span class="op" id="6769397">:=</span>&nbsp;<span class="builtinfunc" id="6769400">make</span><span class="op" id="6769404">(</span><span class="op" id="6769405">[</span><span class="op" id="6769406">]</span><span class="builtintype" id="6769407">byte</span><span class="op" id="6769411">,</span>&nbsp;<span class="ident" id="6769413"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6769424">.</span><span class="ident" id="6769425">DecodedLen</span><span class="op" id="6769435">(</span><span class="builtinfunc" id="6769436">len</span><span class="op" id="6769439">(</span><span class="ident" id="6769440"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769442">.</span><span class="ident" id="6769443">input</span><span class="op" id="6769448">)</span><span class="op" id="6769449">)</span><span class="op" id="6769450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769454">_</span><span class="op" id="6769455">,</span>&nbsp;<span class="ident" id="6769457">err</span>&nbsp;<span class="op" id="6769461">:=</span>&nbsp;<span class="ident" id="6769464"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6769475">.</span><span class="ident" id="6769476">Decode</span><span class="op" id="6769482">(</span><span class="ident" id="6769483"><a href="/encoding/base64/base64_test.go.html#6769392">dbuf</a></span><span class="op" id="6769487">,</span>&nbsp;<span class="op" id="6769489">[</span><span class="op" id="6769490">]</span><span class="builtintype" id="6769491">byte</span><span class="op" id="6769495">(</span><span class="ident" id="6769496"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769498">.</span><span class="ident" id="6769499">input</span><span class="op" id="6769504">)</span><span class="op" id="6769505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769509">if</span>&nbsp;<span class="ident" id="6769512"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769514">.</span><span class="ident" id="6769515">offset</span>&nbsp;<span class="op" id="6769522">==</span>&nbsp;<span class="op" id="6769525">-</span><span class="num" id="6769526">1</span>&nbsp;<span class="op" id="6769528">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769533">if</span>&nbsp;<span class="ident" id="6769536"><a href="/encoding/base64/base64_test.go.html#6769457">err</a></span>&nbsp;<span class="op" id="6769540">!=</span>&nbsp;<span class="ident" id="6769543">nil</span>&nbsp;<span class="op" id="6769547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769553"><a href="/encoding/base64/base64_test.go.html#6768955">t</a></span><span class="op" id="6769554">.</span><span class="ident" id="6769555">Error</span><span class="op" id="6769560">(</span><span class="string" id="6769561">&#34;Decoder&nbsp;wrongly&nbsp;detected&nbsp;coruption&nbsp;in&#34;</span><span class="op" id="6769600">,</span>&nbsp;<span class="ident" id="6769602"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769604">.</span><span class="ident" id="6769605">input</span><span class="op" id="6769610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769620">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769631">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769635">switch</span>&nbsp;<span class="ident" id="6769642">err</span>&nbsp;<span class="op" id="6769646">:=</span>&nbsp;<span class="ident" id="6769649"><a href="/encoding/base64/base64_test.go.html#6769457">err</a></span><span class="op" id="6769652">.</span><span class="op" id="6769653">(</span><span class="keyword" id="6769654">type</span><span class="op" id="6769658">)</span>&nbsp;<span class="op" id="6769660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769664">case</span>&nbsp;<span class="ident" id="6769669"><a href="/encoding/base64/base64.go.html#3529130">CorruptInputError</a></span><span class="op" id="6769686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769691"><a href="/encoding/base64/base64_test.go.html#6765677">testEqual</a></span><span class="op" id="6769700">(</span><span class="ident" id="6769701"><a href="/encoding/base64/base64_test.go.html#6768955">t</a></span><span class="op" id="6769702">,</span>&nbsp;<span class="string" id="6769704">&#34;Corruption&nbsp;in&nbsp;%q&nbsp;at&nbsp;offset&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6769744">,</span>&nbsp;<span class="ident" id="6769746"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769748">.</span><span class="ident" id="6769749">input</span><span class="op" id="6769754">,</span>&nbsp;<span class="builtintype" id="6769756">int</span><span class="op" id="6769759">(</span><span class="ident" id="6769760"><a href="/encoding/base64/base64_test.go.html#6769642">err</a></span><span class="op" id="6769763">)</span><span class="op" id="6769764">,</span>&nbsp;<span class="ident" id="6769766"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769768">.</span><span class="ident" id="6769769">offset</span><span class="op" id="6769775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769779">default</span><span class="op" id="6769786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769791"><a href="/encoding/base64/base64_test.go.html#6768955">t</a></span><span class="op" id="6769792">.</span><span class="ident" id="6769793">Error</span><span class="op" id="6769798">(</span><span class="string" id="6769799">&#34;Decoder&nbsp;failed&nbsp;to&nbsp;detect&nbsp;corruption&nbsp;in&#34;</span><span class="op" id="6769839">,</span>&nbsp;<span class="ident" id="6769841"><a href="/encoding/base64/base64_test.go.html#6769366">tc</a></span><span class="op" id="6769843">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769850">}</span><br>
<span class="lineno"></span><span class="op" id="6769852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6769855">func</span>&nbsp;<span class="ident" id="6769860">TestBig</span><span class="op" id="6769867">(</span><span class="ident" id="6769868">t</span>&nbsp;<span class="op" id="6769870">*</span><span class="ident" id="6769871"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6769878">.</span><span class="ident" id="6769879">T</span><span class="op" id="6769880">)</span>&nbsp;<span class="op" id="6769882">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769885">n</span>&nbsp;<span class="op" id="6769887">:=</span>&nbsp;<span class="num" id="6769890">3</span><span class="op" id="6769891">*</span><span class="num" id="6769892">1000</span>&nbsp;<span class="op" id="6769897">+</span>&nbsp;<span class="num" id="6769899">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769902">raw</span>&nbsp;<span class="op" id="6769906">:=</span>&nbsp;<span class="builtinfunc" id="6769909">make</span><span class="op" id="6769913">(</span><span class="op" id="6769914">[</span><span class="op" id="6769915">]</span><span class="builtintype" id="6769916">byte</span><span class="op" id="6769920">,</span>&nbsp;<span class="ident" id="6769922"><a href="/encoding/base64/base64_test.go.html#6769885">n</a></span><span class="op" id="6769923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769926">const</span>&nbsp;<span class="ident" id="6769932">alpha</span>&nbsp;<span class="op" id="6769938">=</span>&nbsp;<span class="string" id="6769940">&#34;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770006">for</span>&nbsp;<span class="ident" id="6770010">i</span>&nbsp;<span class="op" id="6770012">:=</span>&nbsp;<span class="num" id="6770015">0</span><span class="op" id="6770016">;</span>&nbsp;<span class="ident" id="6770018"><a href="/encoding/base64/base64_test.go.html#6770010">i</a></span>&nbsp;<span class="op" id="6770020">&lt;</span>&nbsp;<span class="ident" id="6770022"><a href="/encoding/base64/base64_test.go.html#6769885">n</a></span><span class="op" id="6770023">;</span>&nbsp;<span class="ident" id="6770025"><a href="/encoding/base64/base64_test.go.html#6770010">i</a></span><span class="op" id="6770026">++</span>&nbsp;<span class="op" id="6770029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770033"><a href="/encoding/base64/base64_test.go.html#6769902">raw</a></span><span class="op" id="6770036">[</span><span class="ident" id="6770037"><a href="/encoding/base64/base64_test.go.html#6770010">i</a></span><span class="op" id="6770038">]</span>&nbsp;<span class="op" id="6770040">=</span>&nbsp;<span class="ident" id="6770042"><a href="/encoding/base64/base64_test.go.html#6769932">alpha</a></span><span class="op" id="6770047">[</span><span class="ident" id="6770048"><a href="/encoding/base64/base64_test.go.html#6770010">i</a></span><span class="op" id="6770049">%</span><span class="builtinfunc" id="6770050">len</span><span class="op" id="6770053">(</span><span class="ident" id="6770054"><a href="/encoding/base64/base64_test.go.html#6769932">alpha</a></span><span class="op" id="6770059">)</span><span class="op" id="6770060">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770066">encoded</span>&nbsp;<span class="op" id="6770074">:=</span>&nbsp;<span class="builtinfunc" id="6770077">new</span><span class="op" id="6770080">(</span><span class="ident" id="6770081"><a href="/encoding/base64/base64_test.go.html#6764882">bytes</a></span><span class="op" id="6770086">.</span><span class="ident" id="6770087">Buffer</span><span class="op" id="6770093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770096">w</span>&nbsp;<span class="op" id="6770098">:=</span>&nbsp;<span class="ident" id="6770101"><a href="/encoding/base64/base64.go.html#3528843">NewEncoder</a></span><span class="op" id="6770111">(</span><span class="ident" id="6770112"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6770123">,</span>&nbsp;<span class="ident" id="6770125"><a href="/encoding/base64/base64_test.go.html#6770066">encoded</a></span><span class="op" id="6770132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770135">nn</span><span class="op" id="6770137">,</span>&nbsp;<span class="ident" id="6770139">err</span>&nbsp;<span class="op" id="6770143">:=</span>&nbsp;<span class="ident" id="6770146"><a href="/encoding/base64/base64_test.go.html#6770096">w</a></span><span class="op" id="6770147">.</span><span class="ident" id="6770148">Write</span><span class="op" id="6770153">(</span><span class="ident" id="6770154"><a href="/encoding/base64/base64_test.go.html#6769902">raw</a></span><span class="op" id="6770157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770160">if</span>&nbsp;<span class="ident" id="6770163"><a href="/encoding/base64/base64_test.go.html#6770135">nn</a></span>&nbsp;<span class="op" id="6770166">!=</span>&nbsp;<span class="ident" id="6770169"><a href="/encoding/base64/base64_test.go.html#6769885">n</a></span>&nbsp;<span class="op" id="6770171">||</span>&nbsp;<span class="ident" id="6770174"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span>&nbsp;<span class="op" id="6770178">!=</span>&nbsp;<span class="ident" id="6770181">nil</span>&nbsp;<span class="op" id="6770185">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770189"><a href="/encoding/base64/base64_test.go.html#6769868">t</a></span><span class="op" id="6770190">.</span><span class="ident" id="6770191">Fatalf</span><span class="op" id="6770197">(</span><span class="string" id="6770198">&#34;Encoder.Write(raw)&nbsp;=&nbsp;%d,&nbsp;%v&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="6770240">,</span>&nbsp;<span class="ident" id="6770242"><a href="/encoding/base64/base64_test.go.html#6770135">nn</a></span><span class="op" id="6770244">,</span>&nbsp;<span class="ident" id="6770246"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span><span class="op" id="6770249">,</span>&nbsp;<span class="ident" id="6770251"><a href="/encoding/base64/base64_test.go.html#6769885">n</a></span><span class="op" id="6770252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770258"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span>&nbsp;<span class="op" id="6770262">=</span>&nbsp;<span class="ident" id="6770264"><a href="/encoding/base64/base64_test.go.html#6770096">w</a></span><span class="op" id="6770265">.</span><span class="ident" id="6770266">Close</span><span class="op" id="6770271">(</span><span class="op" id="6770272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770275">if</span>&nbsp;<span class="ident" id="6770278"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span>&nbsp;<span class="op" id="6770282">!=</span>&nbsp;<span class="ident" id="6770285">nil</span>&nbsp;<span class="op" id="6770289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770293"><a href="/encoding/base64/base64_test.go.html#6769868">t</a></span><span class="op" id="6770294">.</span><span class="ident" id="6770295">Fatalf</span><span class="op" id="6770301">(</span><span class="string" id="6770302">&#34;Encoder.Close()&nbsp;=&nbsp;%v&nbsp;want&nbsp;nil&#34;</span><span class="op" id="6770333">,</span>&nbsp;<span class="ident" id="6770335"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span><span class="op" id="6770338">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770344">decoded</span><span class="op" id="6770351">,</span>&nbsp;<span class="ident" id="6770353"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span>&nbsp;<span class="op" id="6770357">:=</span>&nbsp;<span class="ident" id="6770360"><a href="/encoding/base64/base64_test.go.html#6764907">ioutil</a></span><span class="op" id="6770366">.</span><span class="ident" id="6770367">ReadAll</span><span class="op" id="6770374">(</span><span class="ident" id="6770375"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6770385">(</span><span class="ident" id="6770386"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6770397">,</span>&nbsp;<span class="ident" id="6770399"><a href="/encoding/base64/base64_test.go.html#6770066">encoded</a></span><span class="op" id="6770406">)</span><span class="op" id="6770407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770410">if</span>&nbsp;<span class="ident" id="6770413"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span>&nbsp;<span class="op" id="6770417">!=</span>&nbsp;<span class="ident" id="6770420">nil</span>&nbsp;<span class="op" id="6770424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770428"><a href="/encoding/base64/base64_test.go.html#6769868">t</a></span><span class="op" id="6770429">.</span><span class="ident" id="6770430">Fatalf</span><span class="op" id="6770436">(</span><span class="string" id="6770437">&#34;ioutil.ReadAll(NewDecoder(...)):&nbsp;%v&#34;</span><span class="op" id="6770474">,</span>&nbsp;<span class="ident" id="6770476"><a href="/encoding/base64/base64_test.go.html#6770139">err</a></span><span class="op" id="6770479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770482">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770486">if</span>&nbsp;<span class="op" id="6770489">!</span><span class="ident" id="6770490"><a href="/encoding/base64/base64_test.go.html#6764882">bytes</a></span><span class="op" id="6770495">.</span><span class="ident" id="6770496">Equal</span><span class="op" id="6770501">(</span><span class="ident" id="6770502"><a href="/encoding/base64/base64_test.go.html#6769902">raw</a></span><span class="op" id="6770505">,</span>&nbsp;<span class="ident" id="6770507"><a href="/encoding/base64/base64_test.go.html#6770344">decoded</a></span><span class="op" id="6770514">)</span>&nbsp;<span class="op" id="6770516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770520">var</span>&nbsp;<span class="ident" id="6770524">i</span>&nbsp;<span class="builtintype" id="6770526">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770532">for</span>&nbsp;<span class="ident" id="6770536"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span>&nbsp;<span class="op" id="6770538">=</span>&nbsp;<span class="num" id="6770540">0</span><span class="op" id="6770541">;</span>&nbsp;<span class="ident" id="6770543"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span>&nbsp;<span class="op" id="6770545">&lt;</span>&nbsp;<span class="builtinfunc" id="6770547">len</span><span class="op" id="6770550">(</span><span class="ident" id="6770551"><a href="/encoding/base64/base64_test.go.html#6770344">decoded</a></span><span class="op" id="6770558">)</span>&nbsp;<span class="op" id="6770560">&amp;&amp;</span>&nbsp;<span class="ident" id="6770563"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span>&nbsp;<span class="op" id="6770565">&lt;</span>&nbsp;<span class="builtinfunc" id="6770567">len</span><span class="op" id="6770570">(</span><span class="ident" id="6770571"><a href="/encoding/base64/base64_test.go.html#6769902">raw</a></span><span class="op" id="6770574">)</span><span class="op" id="6770575">;</span>&nbsp;<span class="ident" id="6770577"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span><span class="op" id="6770578">++</span>&nbsp;<span class="op" id="6770581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770586">if</span>&nbsp;<span class="ident" id="6770589"><a href="/encoding/base64/base64_test.go.html#6770344">decoded</a></span><span class="op" id="6770596">[</span><span class="ident" id="6770597"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span><span class="op" id="6770598">]</span>&nbsp;<span class="op" id="6770600">!=</span>&nbsp;<span class="ident" id="6770603"><a href="/encoding/base64/base64_test.go.html#6769902">raw</a></span><span class="op" id="6770606">[</span><span class="ident" id="6770607"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span><span class="op" id="6770608">]</span>&nbsp;<span class="op" id="6770610">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770616">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770633"><a href="/encoding/base64/base64_test.go.html#6769868">t</a></span><span class="op" id="6770634">.</span><span class="ident" id="6770635">Errorf</span><span class="op" id="6770641">(</span><span class="string" id="6770642">&#34;Decode(Encode(%d-byte&nbsp;string))&nbsp;failed&nbsp;at&nbsp;offset&nbsp;%d&#34;</span><span class="op" id="6770694">,</span>&nbsp;<span class="ident" id="6770696"><a href="/encoding/base64/base64_test.go.html#6769885">n</a></span><span class="op" id="6770697">,</span>&nbsp;<span class="ident" id="6770699"><a href="/encoding/base64/base64_test.go.html#6770524">i</a></span><span class="op" id="6770700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770703">}</span><br>
<span class="lineno">220</span><span class="op" id="6770705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6770708">func</span>&nbsp;<span class="ident" id="6770713">TestNewLineCharacters</span><span class="op" id="6770734">(</span><span class="ident" id="6770735">t</span>&nbsp;<span class="op" id="6770737">*</span><span class="ident" id="6770738"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6770745">.</span><span class="ident" id="6770746">T</span><span class="op" id="6770747">)</span>&nbsp;<span class="op" id="6770749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6770752">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;should&nbsp;decode&nbsp;to&nbsp;the&nbsp;string&nbsp;&#34;sure&#34;,&nbsp;without&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6770822">const</span>&nbsp;<span class="ident" id="6770828">expected</span>&nbsp;<span class="op" id="6770837">=</span>&nbsp;<span class="string" id="6770839">&#34;sure&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6770847">examples</span>&nbsp;<span class="op" id="6770856">:=</span>&nbsp;<span class="op" id="6770859">[</span><span class="op" id="6770860">]</span><span class="builtintype" id="6770861">string</span><span class="op" id="6770867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770871">&#34;c3VyZQ==&#34;</span><span class="op" id="6770881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770885">&#34;c3VyZQ==\r&#34;</span><span class="op" id="6770897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770901">&#34;c3VyZQ==\n&#34;</span><span class="op" id="6770913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770917">&#34;c3VyZQ==\r\n&#34;</span><span class="op" id="6770931">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770935">&#34;c3VyZ\r\nQ==&#34;</span><span class="op" id="6770949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770953">&#34;c3V\ryZ\nQ==&#34;</span><span class="op" id="6770967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770971">&#34;c3V\nyZ\rQ==&#34;</span><span class="op" id="6770985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6770989">&#34;c3VyZ\nQ==&#34;</span><span class="op" id="6771001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6771005">&#34;c3VyZQ\n==&#34;</span><span class="op" id="6771017">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6771021">&#34;c3VyZQ=\n=&#34;</span><span class="op" id="6771033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6771037">&#34;c3VyZQ=\r\n\r\n=&#34;</span><span class="op" id="6771055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771061">for</span>&nbsp;<span class="ident" id="6771065">_</span><span class="op" id="6771066">,</span>&nbsp;<span class="ident" id="6771068">e</span>&nbsp;<span class="op" id="6771070">:=</span>&nbsp;<span class="keyword" id="6771073">range</span>&nbsp;<span class="ident" id="6771079"><a href="/encoding/base64/base64_test.go.html#6770847">examples</a></span>&nbsp;<span class="op" id="6771088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771092">buf</span><span class="op" id="6771095">,</span>&nbsp;<span class="ident" id="6771097">err</span>&nbsp;<span class="op" id="6771101">:=</span>&nbsp;<span class="ident" id="6771104"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6771115">.</span><span class="ident" id="6771116">DecodeString</span><span class="op" id="6771128">(</span><span class="ident" id="6771129"><a href="/encoding/base64/base64_test.go.html#6771068">e</a></span><span class="op" id="6771130">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771134">if</span>&nbsp;<span class="ident" id="6771137"><a href="/encoding/base64/base64_test.go.html#6771097">err</a></span>&nbsp;<span class="op" id="6771141">!=</span>&nbsp;<span class="ident" id="6771144">nil</span>&nbsp;<span class="op" id="6771148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771153"><a href="/encoding/base64/base64_test.go.html#6770735">t</a></span><span class="op" id="6771154">.</span><span class="ident" id="6771155">Errorf</span><span class="op" id="6771161">(</span><span class="string" id="6771162">&#34;Decode(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6771185">,</span>&nbsp;<span class="ident" id="6771187"><a href="/encoding/base64/base64_test.go.html#6771068">e</a></span><span class="op" id="6771188">,</span>&nbsp;<span class="ident" id="6771190"><a href="/encoding/base64/base64_test.go.html#6771097">err</a></span><span class="op" id="6771193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771198">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771213">if</span>&nbsp;<span class="ident" id="6771216">s</span>&nbsp;<span class="op" id="6771218">:=</span>&nbsp;<span class="builtintype" id="6771221">string</span><span class="op" id="6771227">(</span><span class="ident" id="6771228"><a href="/encoding/base64/base64_test.go.html#6771092">buf</a></span><span class="op" id="6771231">)</span><span class="op" id="6771232">;</span>&nbsp;<span class="ident" id="6771234"><a href="/encoding/base64/base64_test.go.html#6771216">s</a></span>&nbsp;<span class="op" id="6771236">!=</span>&nbsp;<span class="ident" id="6771239"><a href="/encoding/base64/base64_test.go.html#6770828">expected</a></span>&nbsp;<span class="op" id="6771248">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771253"><a href="/encoding/base64/base64_test.go.html#6770735">t</a></span><span class="op" id="6771254">.</span><span class="ident" id="6771255">Errorf</span><span class="op" id="6771261">(</span><span class="string" id="6771262">&#34;Decode(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6771288">,</span>&nbsp;<span class="ident" id="6771290"><a href="/encoding/base64/base64_test.go.html#6771068">e</a></span><span class="op" id="6771291">,</span>&nbsp;<span class="ident" id="6771293"><a href="/encoding/base64/base64_test.go.html#6771216">s</a></span><span class="op" id="6771294">,</span>&nbsp;<span class="ident" id="6771296"><a href="/encoding/base64/base64_test.go.html#6770828">expected</a></span><span class="op" id="6771304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771311">}</span><br>
<span class="lineno"></span><span class="op" id="6771313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6771316">type</span>&nbsp;<span class="ident" id="6771321">nextRead</span>&nbsp;<span class="keyword" id="6771330">struct</span>&nbsp;<span class="op" id="6771337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771340">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6771344">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6771350">//&nbsp;bytes&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771370">err</span>&nbsp;<span class="builtintype" id="6771374">error</span>&nbsp;<span class="comment" id="6771380">//&nbsp;error&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="6771399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="6771402">//&nbsp;faultInjectReader&nbsp;returns&nbsp;data&nbsp;from&nbsp;source,&nbsp;rate-limited</span><br>
<span class="lineno"></span><span class="comment" id="6771462">//&nbsp;and&nbsp;with&nbsp;the&nbsp;errors&nbsp;as&nbsp;written&nbsp;to&nbsp;nextc.</span><br>
<span class="lineno"></span><span class="keyword" id="6771506">type</span>&nbsp;<span class="ident" id="6771511">faultInjectReader</span>&nbsp;<span class="keyword" id="6771529">struct</span>&nbsp;<span class="op" id="6771536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771539">source</span>&nbsp;<span class="builtintype" id="6771546">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771554">nextc</span>&nbsp;&nbsp;<span class="op" id="6771561">&lt;-</span><span class="keyword" id="6771563">chan</span>&nbsp;<span class="ident" id="6771568"><a href="/encoding/base64/base64_test.go.html#6771321">nextRead</a></span><br>
<span class="lineno">260</span><span class="op" id="6771577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771580">func</span>&nbsp;<span class="op" id="6771585">(</span><span class="ident" id="6771586">r</span>&nbsp;<span class="op" id="6771588">*</span><span class="ident" id="6771589"><a href="/encoding/base64/base64_test.go.html#6771511">faultInjectReader</a></span><span class="op" id="6771606">)</span>&nbsp;<span class="ident" id="6771608">Read</span><span class="op" id="6771612">(</span><span class="ident" id="6771613">p</span>&nbsp;<span class="op" id="6771615">[</span><span class="op" id="6771616">]</span><span class="builtintype" id="6771617">byte</span><span class="op" id="6771621">)</span>&nbsp;<span class="op" id="6771623">(</span><span class="builtintype" id="6771624">int</span><span class="op" id="6771627">,</span>&nbsp;<span class="builtintype" id="6771629">error</span><span class="op" id="6771634">)</span>&nbsp;<span class="op" id="6771636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771639">nr</span>&nbsp;<span class="op" id="6771642">:=</span>&nbsp;<span class="op" id="6771645">&lt;-</span><span class="ident" id="6771647"><a href="/encoding/base64/base64_test.go.html#6771586">r</a></span><span class="op" id="6771648">.</span><span class="ident" id="6771649">nextc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771656">if</span>&nbsp;<span class="builtinfunc" id="6771659">len</span><span class="op" id="6771662">(</span><span class="ident" id="6771663"><a href="/encoding/base64/base64_test.go.html#6771613">p</a></span><span class="op" id="6771664">)</span>&nbsp;<span class="op" id="6771666">&gt;</span>&nbsp;<span class="ident" id="6771668"><a href="/encoding/base64/base64_test.go.html#6771639">nr</a></span><span class="op" id="6771670">.</span><span class="ident" id="6771671">n</span>&nbsp;<span class="op" id="6771673">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771677"><a href="/encoding/base64/base64_test.go.html#6771613">p</a></span>&nbsp;<span class="op" id="6771679">=</span>&nbsp;<span class="ident" id="6771681"><a href="/encoding/base64/base64_test.go.html#6771613">p</a></span><span class="op" id="6771682">[</span><span class="op" id="6771683">:</span><span class="ident" id="6771684"><a href="/encoding/base64/base64_test.go.html#6771639">nr</a></span><span class="op" id="6771686">.</span><span class="ident" id="6771687">n</span><span class="op" id="6771688">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771694">n</span>&nbsp;<span class="op" id="6771696">:=</span>&nbsp;<span class="builtinfunc" id="6771699">copy</span><span class="op" id="6771703">(</span><span class="ident" id="6771704"><a href="/encoding/base64/base64_test.go.html#6771613">p</a></span><span class="op" id="6771705">,</span>&nbsp;<span class="ident" id="6771707"><a href="/encoding/base64/base64_test.go.html#6771586">r</a></span><span class="op" id="6771708">.</span><span class="ident" id="6771709">source</span><span class="op" id="6771715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771718"><a href="/encoding/base64/base64_test.go.html#6771586">r</a></span><span class="op" id="6771719">.</span><span class="ident" id="6771720">source</span>&nbsp;<span class="op" id="6771727">=</span>&nbsp;<span class="ident" id="6771729"><a href="/encoding/base64/base64_test.go.html#6771586">r</a></span><span class="op" id="6771730">.</span><span class="ident" id="6771731">source</span><span class="op" id="6771737">[</span><span class="ident" id="6771738"><a href="/encoding/base64/base64_test.go.html#6771694">n</a></span><span class="op" id="6771739">:</span><span class="op" id="6771740">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771743">return</span>&nbsp;<span class="ident" id="6771750"><a href="/encoding/base64/base64_test.go.html#6771694">n</a></span><span class="op" id="6771751">,</span>&nbsp;<span class="ident" id="6771753"><a href="/encoding/base64/base64_test.go.html#6771639">nr</a></span><span class="op" id="6771755">.</span><span class="ident" id="6771756">err</span><br>
<span class="lineno">270</span><span class="op" id="6771760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6771763">//&nbsp;tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;ignore&nbsp;errors&nbsp;from&nbsp;our&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span><span class="keyword" id="6771827">func</span>&nbsp;<span class="ident" id="6771832">TestDecoderIssue3577</span><span class="op" id="6771852">(</span><span class="ident" id="6771853">t</span>&nbsp;<span class="op" id="6771855">*</span><span class="ident" id="6771856"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6771863">.</span><span class="ident" id="6771864">T</span><span class="op" id="6771865">)</span>&nbsp;<span class="op" id="6771867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771870">next</span>&nbsp;<span class="op" id="6771875">:=</span>&nbsp;<span class="builtinfunc" id="6771878">make</span><span class="op" id="6771882">(</span><span class="keyword" id="6771883">chan</span>&nbsp;<span class="ident" id="6771888"><a href="/encoding/base64/base64_test.go.html#6771321">nextRead</a></span><span class="op" id="6771896">,</span>&nbsp;<span class="num" id="6771898">10</span><span class="op" id="6771900">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771903">wantErr</span>&nbsp;<span class="op" id="6771911">:=</span>&nbsp;<span class="ident" id="6771914"><a href="/encoding/base64/base64_test.go.html#6764891">errors</a></span><span class="op" id="6771920">.</span><span class="ident" id="6771921">New</span><span class="op" id="6771924">(</span><span class="string" id="6771925">&#34;my&nbsp;error&#34;</span><span class="op" id="6771935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771938"><a href="/encoding/base64/base64_test.go.html#6771870">next</a></span>&nbsp;<span class="op" id="6771943">&lt;-</span>&nbsp;<span class="ident" id="6771946"><a href="/encoding/base64/base64_test.go.html#6771321">nextRead</a></span><span class="op" id="6771954">{</span><span class="num" id="6771955">5</span><span class="op" id="6771956">,</span>&nbsp;<span class="ident" id="6771958">nil</span><span class="op" id="6771961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771964"><a href="/encoding/base64/base64_test.go.html#6771870">next</a></span>&nbsp;<span class="op" id="6771969">&lt;-</span>&nbsp;<span class="ident" id="6771972"><a href="/encoding/base64/base64_test.go.html#6771321">nextRead</a></span><span class="op" id="6771980">{</span><span class="num" id="6771981">10</span><span class="op" id="6771983">,</span>&nbsp;<span class="ident" id="6771985"><a href="/encoding/base64/base64_test.go.html#6771903">wantErr</a></span><span class="op" id="6771992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771995"><a href="/encoding/base64/base64_test.go.html#6771870">next</a></span>&nbsp;<span class="op" id="6772000">&lt;-</span>&nbsp;<span class="ident" id="6772003"><a href="/encoding/base64/base64_test.go.html#6771321">nextRead</a></span><span class="op" id="6772011">{</span><span class="num" id="6772012">0</span><span class="op" id="6772013">,</span>&nbsp;<span class="ident" id="6772015"><a href="/encoding/base64/base64_test.go.html#6771903">wantErr</a></span><span class="op" id="6772022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772025">d</span>&nbsp;<span class="op" id="6772027">:=</span>&nbsp;<span class="ident" id="6772030"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6772040">(</span><span class="ident" id="6772041"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6772052">,</span>&nbsp;<span class="op" id="6772054">&amp;</span><span class="ident" id="6772055"><a href="/encoding/base64/base64_test.go.html#6771511">faultInjectReader</a></span><span class="op" id="6772072">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772076">source</span><span class="op" id="6772082">:</span>&nbsp;<span class="string" id="6772084">&#34;VHdhcyBicmlsbGlnLCBhbmQgdGhlIHNsaXRoeSB0b3Zlcw==&#34;</span><span class="op" id="6772134">,</span>&nbsp;<span class="comment" id="6772136">//&nbsp;twas&nbsp;brillig...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772157">nextc</span><span class="op" id="6772162">:</span>&nbsp;&nbsp;<span class="ident" id="6772165"><a href="/encoding/base64/base64_test.go.html#6771870">next</a></span><span class="op" id="6772169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772172">}</span><span class="op" id="6772173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772176">errc</span>&nbsp;<span class="op" id="6772181">:=</span>&nbsp;<span class="builtinfunc" id="6772184">make</span><span class="op" id="6772188">(</span><span class="keyword" id="6772189">chan</span>&nbsp;<span class="builtintype" id="6772194">error</span><span class="op" id="6772199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772202">go</span>&nbsp;<span class="keyword" id="6772205">func</span><span class="op" id="6772209">(</span><span class="op" id="6772210">)</span>&nbsp;<span class="op" id="6772212">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772216">_</span><span class="op" id="6772217">,</span>&nbsp;<span class="ident" id="6772219">err</span>&nbsp;<span class="op" id="6772223">:=</span>&nbsp;<span class="ident" id="6772226"><a href="/encoding/base64/base64_test.go.html#6764907">ioutil</a></span><span class="op" id="6772232">.</span><span class="ident" id="6772233">ReadAll</span><span class="op" id="6772240">(</span><span class="ident" id="6772241"><a href="/encoding/base64/base64_test.go.html#6772025">d</a></span><span class="op" id="6772242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772246"><a href="/encoding/base64/base64_test.go.html#6772176">errc</a></span>&nbsp;<span class="op" id="6772251">&lt;-</span>&nbsp;<span class="ident" id="6772254"><a href="/encoding/base64/base64_test.go.html#6772219">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772259">}</span><span class="op" id="6772260">(</span><span class="op" id="6772261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772264">select</span>&nbsp;<span class="op" id="6772271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772274">case</span>&nbsp;<span class="ident" id="6772279">err</span>&nbsp;<span class="op" id="6772283">:=</span>&nbsp;<span class="op" id="6772286">&lt;-</span><span class="ident" id="6772288"><a href="/encoding/base64/base64_test.go.html#6772176">errc</a></span><span class="op" id="6772292">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772296">if</span>&nbsp;<span class="ident" id="6772299"><a href="/encoding/base64/base64_test.go.html#6772279">err</a></span>&nbsp;<span class="op" id="6772303">!=</span>&nbsp;<span class="ident" id="6772306"><a href="/encoding/base64/base64_test.go.html#6771903">wantErr</a></span>&nbsp;<span class="op" id="6772314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772319"><a href="/encoding/base64/base64_test.go.html#6771853">t</a></span><span class="op" id="6772320">.</span><span class="ident" id="6772321">Errorf</span><span class="op" id="6772327">(</span><span class="string" id="6772328">&#34;got&nbsp;error&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6772351">,</span>&nbsp;<span class="ident" id="6772353"><a href="/encoding/base64/base64_test.go.html#6772279">err</a></span><span class="op" id="6772356">,</span>&nbsp;<span class="ident" id="6772358"><a href="/encoding/base64/base64_test.go.html#6771903">wantErr</a></span><span class="op" id="6772365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6772372">case</span>&nbsp;<span class="op" id="6772377">&lt;-</span><span class="ident" id="6772379"><a href="/encoding/base64/base64_test.go.html#6764953">time</a></span><span class="op" id="6772383">.</span><span class="ident" id="6772384">After</span><span class="op" id="6772389">(</span><span class="num" id="6772390">5</span>&nbsp;<span class="op" id="6772392">*</span>&nbsp;<span class="ident" id="6772394"><a href="/encoding/base64/base64_test.go.html#6764953">time</a></span><span class="op" id="6772398">.</span><span class="ident" id="6772399">Second</span><span class="op" id="6772405">)</span><span class="op" id="6772406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772410"><a href="/encoding/base64/base64_test.go.html#6771853">t</a></span><span class="op" id="6772411">.</span><span class="ident" id="6772412">Errorf</span><span class="op" id="6772418">(</span><span class="string" id="6772419">&#34;timeout;&nbsp;Decoder&nbsp;blocked&nbsp;without&nbsp;returning&nbsp;an&nbsp;error&#34;</span><span class="op" id="6772472">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6772475">}</span><br>
<span class="lineno"></span><span class="op" id="6772477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6772480">func</span>&nbsp;<span class="ident" id="6772485">TestDecoderIssue4779</span><span class="op" id="6772505">(</span><span class="ident" id="6772506">t</span>&nbsp;<span class="op" id="6772508">*</span><span class="ident" id="6772509"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6772516">.</span><span class="ident" id="6772517">T</span><span class="op" id="6772518">)</span>&nbsp;<span class="op" id="6772520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6772523">encoded</span>&nbsp;<span class="op" id="6772531">:=</span>&nbsp;<span class="string" id="6772534">`CP/EAT8AAAEF<br>
<span class="lineno">300</span>AQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAAB<br>
<span class="lineno"></span>BAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHx<br>
<span class="lineno"></span>Y3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm<br>
<span class="lineno"></span>9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS<br>
<span class="lineno"></span>0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0<br>
<span class="lineno">305</span>pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9VSSSSUpJJJJSkkkJ+Tj<br>
<span class="lineno"></span>1kiy1jCJJDnAcCTykpKkuQ6p/jN6FgmxlNduXawwAzaGH+V6jn/R/wCt71zdn+N/qL3kVYFNYB4N<br>
<span class="lineno"></span>ji6PDVjWpKp9TSXnvTf8bFNjg3qOEa2n6VlLpj/rT/pf567DpX1i6L1hs9Py67X8mqdtg/rUWbbf<br>
<span class="lineno"></span>+gkp0kkkklKSSSSUpJJJJT//0PVUkkklKVLq3WMDpGI7KzrNjADtYNXvI/Mqr/Pd/q9W3vaxjnvM<br>
<span class="lineno"></span>NaCXE9gNSvGPrf8AWS3qmba5jjsJhoB0DAf0NDf6sevf+/lf8Hj0JJATfWT6/dV6oXU1uOLQeKKn<br>
<span class="lineno">310</span>EQP+Hubtfe/+R7Mf/g7f5xcocp++Z11JMCJPgFBxOg7/AOuqDx8I/ikpkXkmSdU8mJIJA/O8EMAy<br>
<span class="lineno"></span>j+mSARB/17pKVXYWHXjsj7yIex0PadzXMO1zT5KHoNA3HT8ietoGhgjsfA+CSnvvqh/jJtqsrwOv<br>
<span class="lineno"></span>2b6NGNzXfTYexzJ+nU7/ALkf4P8Awv6P9KvTQQ4AgyDqCF85Pho3CTB7eHwXoH+LT65uZbX9X+o2<br>
<span class="lineno"></span>bqbPb06551Y4<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773565">encodedShort</span>&nbsp;<span class="op" id="6773578">:=</span>&nbsp;<span class="ident" id="6773581"><a href="/encoding/base64/base64_test.go.html#6764931">strings</a></span><span class="op" id="6773588">.</span><span class="ident" id="6773589">Replace</span><span class="op" id="6773596">(</span><span class="ident" id="6773597"><a href="/encoding/base64/base64_test.go.html#6772523">encoded</a></span><span class="op" id="6773604">,</span>&nbsp;<span class="string" id="6773606">&#34;\n&#34;</span><span class="op" id="6773610">,</span>&nbsp;<span class="string" id="6773612">&#34;&#34;</span><span class="op" id="6773614">,</span>&nbsp;<span class="op" id="6773616">-</span><span class="num" id="6773617">1</span><span class="op" id="6773618">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773622">dec</span>&nbsp;<span class="op" id="6773626">:=</span>&nbsp;<span class="ident" id="6773629"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6773639">(</span><span class="ident" id="6773640"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6773651">,</span>&nbsp;<span class="ident" id="6773653"><a href="/encoding/base64/base64_test.go.html#6764931">strings</a></span><span class="op" id="6773660">.</span><span class="ident" id="6773661">NewReader</span><span class="op" id="6773670">(</span><span class="ident" id="6773671"><a href="/encoding/base64/base64_test.go.html#6772523">encoded</a></span><span class="op" id="6773678">)</span><span class="op" id="6773679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773682">res1</span><span class="op" id="6773686">,</span>&nbsp;<span class="ident" id="6773688">err</span>&nbsp;<span class="op" id="6773692">:=</span>&nbsp;<span class="ident" id="6773695"><a href="/encoding/base64/base64_test.go.html#6764907">ioutil</a></span><span class="op" id="6773701">.</span><span class="ident" id="6773702">ReadAll</span><span class="op" id="6773709">(</span><span class="ident" id="6773710"><a href="/encoding/base64/base64_test.go.html#6773622">dec</a></span><span class="op" id="6773713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773716">if</span>&nbsp;<span class="ident" id="6773719"><a href="/encoding/base64/base64_test.go.html#6773688">err</a></span>&nbsp;<span class="op" id="6773723">!=</span>&nbsp;<span class="ident" id="6773726">nil</span>&nbsp;<span class="op" id="6773730">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773734"><a href="/encoding/base64/base64_test.go.html#6772506">t</a></span><span class="op" id="6773735">.</span><span class="ident" id="6773736">Errorf</span><span class="op" id="6773742">(</span><span class="string" id="6773743">&#34;ReadAll&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6773763">,</span>&nbsp;<span class="ident" id="6773765"><a href="/encoding/base64/base64_test.go.html#6773688">err</a></span><span class="op" id="6773768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773775"><a href="/encoding/base64/base64_test.go.html#6773622">dec</a></span>&nbsp;<span class="op" id="6773779">=</span>&nbsp;<span class="ident" id="6773781"><a href="/encoding/base64/base64.go.html#3533385">NewDecoder</a></span><span class="op" id="6773791">(</span><span class="ident" id="6773792"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6773803">,</span>&nbsp;<span class="ident" id="6773805"><a href="/encoding/base64/base64_test.go.html#6764931">strings</a></span><span class="op" id="6773812">.</span><span class="ident" id="6773813">NewReader</span><span class="op" id="6773822">(</span><span class="ident" id="6773823"><a href="/encoding/base64/base64_test.go.html#6773565">encodedShort</a></span><span class="op" id="6773835">)</span><span class="op" id="6773836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773839">var</span>&nbsp;<span class="ident" id="6773843">res2</span>&nbsp;<span class="op" id="6773848">[</span><span class="op" id="6773849">]</span><span class="builtintype" id="6773850">byte</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773856"><a href="/encoding/base64/base64_test.go.html#6773843">res2</a></span><span class="op" id="6773860">,</span>&nbsp;<span class="ident" id="6773862"><a href="/encoding/base64/base64_test.go.html#6773688">err</a></span>&nbsp;<span class="op" id="6773866">=</span>&nbsp;<span class="ident" id="6773868"><a href="/encoding/base64/base64_test.go.html#6764907">ioutil</a></span><span class="op" id="6773874">.</span><span class="ident" id="6773875">ReadAll</span><span class="op" id="6773882">(</span><span class="ident" id="6773883"><a href="/encoding/base64/base64_test.go.html#6773622">dec</a></span><span class="op" id="6773886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773889">if</span>&nbsp;<span class="ident" id="6773892"><a href="/encoding/base64/base64_test.go.html#6773688">err</a></span>&nbsp;<span class="op" id="6773896">!=</span>&nbsp;<span class="ident" id="6773899">nil</span>&nbsp;<span class="op" id="6773903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773907"><a href="/encoding/base64/base64_test.go.html#6772506">t</a></span><span class="op" id="6773908">.</span><span class="ident" id="6773909">Errorf</span><span class="op" id="6773915">(</span><span class="string" id="6773916">&#34;ReadAll&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6773936">,</span>&nbsp;<span class="ident" id="6773938"><a href="/encoding/base64/base64_test.go.html#6773688">err</a></span><span class="op" id="6773941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6773944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6773948">if</span>&nbsp;<span class="op" id="6773951">!</span><span class="ident" id="6773952"><a href="/encoding/base64/base64_test.go.html#6764882">bytes</a></span><span class="op" id="6773957">.</span><span class="ident" id="6773958">Equal</span><span class="op" id="6773963">(</span><span class="ident" id="6773964"><a href="/encoding/base64/base64_test.go.html#6773682">res1</a></span><span class="op" id="6773968">,</span>&nbsp;<span class="ident" id="6773970"><a href="/encoding/base64/base64_test.go.html#6773843">res2</a></span><span class="op" id="6773974">)</span>&nbsp;<span class="op" id="6773976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6773980"><a href="/encoding/base64/base64_test.go.html#6772506">t</a></span><span class="op" id="6773981">.</span><span class="ident" id="6773982">Error</span><span class="op" id="6773987">(</span><span class="string" id="6773988">&#34;Decoded&nbsp;results&nbsp;not&nbsp;equal&#34;</span><span class="op" id="6774015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774018">}</span><br>
<span class="lineno"></span><span class="op" id="6774020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6774023">func</span>&nbsp;<span class="ident" id="6774028">TestDecoderIssue7733</span><span class="op" id="6774048">(</span><span class="ident" id="6774049">t</span>&nbsp;<span class="op" id="6774051">*</span><span class="ident" id="6774052"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6774059">.</span><span class="ident" id="6774060">T</span><span class="op" id="6774061">)</span>&nbsp;<span class="op" id="6774063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774066">s</span><span class="op" id="6774067">,</span>&nbsp;<span class="ident" id="6774069">err</span>&nbsp;<span class="op" id="6774073">:=</span>&nbsp;<span class="ident" id="6774076"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6774087">.</span><span class="ident" id="6774088">DecodeString</span><span class="op" id="6774100">(</span><span class="string" id="6774101">&#34;YWJjZA=====&#34;</span><span class="op" id="6774114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774117">want</span>&nbsp;<span class="op" id="6774122">:=</span>&nbsp;<span class="ident" id="6774125"><a href="/encoding/base64/base64.go.html#3529130">CorruptInputError</a></span><span class="op" id="6774142">(</span><span class="num" id="6774143">8</span><span class="op" id="6774144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774147">if</span>&nbsp;<span class="op" id="6774150">!</span><span class="ident" id="6774151"><a href="/encoding/base64/base64_test.go.html#6764920">reflect</a></span><span class="op" id="6774158">.</span><span class="ident" id="6774159">DeepEqual</span><span class="op" id="6774168">(</span><span class="ident" id="6774169"><a href="/encoding/base64/base64_test.go.html#6774117">want</a></span><span class="op" id="6774173">,</span>&nbsp;<span class="ident" id="6774175"><a href="/encoding/base64/base64_test.go.html#6774069">err</a></span><span class="op" id="6774178">)</span>&nbsp;<span class="op" id="6774180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774184"><a href="/encoding/base64/base64_test.go.html#6774049">t</a></span><span class="op" id="6774185">.</span><span class="ident" id="6774186">Errorf</span><span class="op" id="6774192">(</span><span class="string" id="6774193">&#34;Error&nbsp;=&nbsp;%v;&nbsp;want&nbsp;CorruptInputError(8)&#34;</span><span class="op" id="6774232">,</span>&nbsp;<span class="ident" id="6774234"><a href="/encoding/base64/base64_test.go.html#6774069">err</a></span><span class="op" id="6774237">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774243">if</span>&nbsp;<span class="builtintype" id="6774246">string</span><span class="op" id="6774252">(</span><span class="ident" id="6774253"><a href="/encoding/base64/base64_test.go.html#6774066">s</a></span><span class="op" id="6774254">)</span>&nbsp;<span class="op" id="6774256">!=</span>&nbsp;<span class="string" id="6774259">&#34;abcd&#34;</span>&nbsp;<span class="op" id="6774266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774270"><a href="/encoding/base64/base64_test.go.html#6774049">t</a></span><span class="op" id="6774271">.</span><span class="ident" id="6774272">Errorf</span><span class="op" id="6774278">(</span><span class="string" id="6774279">&#34;DecodeString&nbsp;=&nbsp;%q;&nbsp;want&nbsp;abcd&#34;</span><span class="op" id="6774309">,</span>&nbsp;<span class="ident" id="6774311"><a href="/encoding/base64/base64_test.go.html#6774066">s</a></span><span class="op" id="6774312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774315">}</span><br>
<span class="lineno"></span><span class="op" id="6774317">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="keyword" id="6774320">func</span>&nbsp;<span class="ident" id="6774325">BenchmarkEncodeToString</span><span class="op" id="6774348">(</span><span class="ident" id="6774349">b</span>&nbsp;<span class="op" id="6774351">*</span><span class="ident" id="6774352"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6774359">.</span><span class="ident" id="6774360">B</span><span class="op" id="6774361">)</span>&nbsp;<span class="op" id="6774363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774366">data</span>&nbsp;<span class="op" id="6774371">:=</span>&nbsp;<span class="builtinfunc" id="6774374">make</span><span class="op" id="6774378">(</span><span class="op" id="6774379">[</span><span class="op" id="6774380">]</span><span class="builtintype" id="6774381">byte</span><span class="op" id="6774385">,</span>&nbsp;<span class="num" id="6774387">8192</span><span class="op" id="6774391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774394"><a href="/encoding/base64/base64_test.go.html#6774349">b</a></span><span class="op" id="6774395">.</span><span class="ident" id="6774396">SetBytes</span><span class="op" id="6774404">(</span><span class="ident" id="6774405">int64</span><span class="op" id="6774410">(</span><span class="builtinfunc" id="6774411">len</span><span class="op" id="6774414">(</span><span class="ident" id="6774415"><a href="/encoding/base64/base64_test.go.html#6774366">data</a></span><span class="op" id="6774419">)</span><span class="op" id="6774420">)</span><span class="op" id="6774421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774424">for</span>&nbsp;<span class="ident" id="6774428">i</span>&nbsp;<span class="op" id="6774430">:=</span>&nbsp;<span class="num" id="6774433">0</span><span class="op" id="6774434">;</span>&nbsp;<span class="ident" id="6774436"><a href="/encoding/base64/base64_test.go.html#6774428">i</a></span>&nbsp;<span class="op" id="6774438">&lt;</span>&nbsp;<span class="ident" id="6774440"><a href="/encoding/base64/base64_test.go.html#6774349">b</a></span><span class="op" id="6774441">.</span><span class="ident" id="6774442">N</span><span class="op" id="6774443">;</span>&nbsp;<span class="ident" id="6774445"><a href="/encoding/base64/base64_test.go.html#6774428">i</a></span><span class="op" id="6774446">++</span>&nbsp;<span class="op" id="6774449">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774453"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6774464">.</span><span class="ident" id="6774465">EncodeToString</span><span class="op" id="6774479">(</span><span class="ident" id="6774480"><a href="/encoding/base64/base64_test.go.html#6774366">data</a></span><span class="op" id="6774484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774487">}</span><br>
<span class="lineno"></span><span class="op" id="6774489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6774492">func</span>&nbsp;<span class="ident" id="6774497">BenchmarkDecodeString</span><span class="op" id="6774518">(</span><span class="ident" id="6774519">b</span>&nbsp;<span class="op" id="6774521">*</span><span class="ident" id="6774522"><a href="/encoding/base64/base64_test.go.html#6764942">testing</a></span><span class="op" id="6774529">.</span><span class="ident" id="6774530">B</span><span class="op" id="6774531">)</span>&nbsp;<span class="op" id="6774533">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774536">data</span>&nbsp;<span class="op" id="6774541">:=</span>&nbsp;<span class="ident" id="6774544"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6774555">.</span><span class="ident" id="6774556">EncodeToString</span><span class="op" id="6774570">(</span><span class="builtinfunc" id="6774571">make</span><span class="op" id="6774575">(</span><span class="op" id="6774576">[</span><span class="op" id="6774577">]</span><span class="builtintype" id="6774578">byte</span><span class="op" id="6774582">,</span>&nbsp;<span class="num" id="6774584">8192</span><span class="op" id="6774588">)</span><span class="op" id="6774589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774592"><a href="/encoding/base64/base64_test.go.html#6774519">b</a></span><span class="op" id="6774593">.</span><span class="ident" id="6774594">SetBytes</span><span class="op" id="6774602">(</span><span class="ident" id="6774603">int64</span><span class="op" id="6774608">(</span><span class="builtinfunc" id="6774609">len</span><span class="op" id="6774612">(</span><span class="ident" id="6774613"><a href="/encoding/base64/base64_test.go.html#6774536">data</a></span><span class="op" id="6774617">)</span><span class="op" id="6774618">)</span><span class="op" id="6774619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6774622">for</span>&nbsp;<span class="ident" id="6774626">i</span>&nbsp;<span class="op" id="6774628">:=</span>&nbsp;<span class="num" id="6774631">0</span><span class="op" id="6774632">;</span>&nbsp;<span class="ident" id="6774634"><a href="/encoding/base64/base64_test.go.html#6774626">i</a></span>&nbsp;<span class="op" id="6774636">&lt;</span>&nbsp;<span class="ident" id="6774638"><a href="/encoding/base64/base64_test.go.html#6774519">b</a></span><span class="op" id="6774639">.</span><span class="ident" id="6774640">N</span><span class="op" id="6774641">;</span>&nbsp;<span class="ident" id="6774643"><a href="/encoding/base64/base64_test.go.html#6774626">i</a></span><span class="op" id="6774644">++</span>&nbsp;<span class="op" id="6774647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6774651"><a href="/encoding/base64/base64.go.html#3525662">StdEncoding</a></span><span class="op" id="6774662">.</span><span class="ident" id="6774663">DecodeString</span><span class="op" id="6774675">(</span><span class="ident" id="6774676"><a href="/encoding/base64/base64_test.go.html#6774536">data</a></span><span class="op" id="6774680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6774683">}</span><br>
<span class="lineno">360</span><span class="op" id="6774685">}</span>
</div>
</body>
</html>
