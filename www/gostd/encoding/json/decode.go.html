<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4869760">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4869815">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4869869">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4869920">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="4869995">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4870026">package</span>&nbsp;<span class="ident" id="4870034">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4870040">import</span>&nbsp;<span class="op" id="4870047">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870050">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870059">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870071">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870090">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870100">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870107">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870118">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870129">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870140">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870151">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4870168">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4870183">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4870186">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="4870250">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4870283">//</span><br>
<span class="lineno"></span><span class="comment" id="4870286">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4870338">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4870407">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="4870447">//</span><br>
<span class="lineno"></span><span class="comment" id="4870450">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4870523">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="4870594">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="4870664">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="4870738">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="4870783">//</span><br>
<span class="lineno"></span><span class="comment" id="4870786">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="4870856">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="4870935">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="4871009">//</span><br>
<span class="lineno"></span><span class="comment" id="4871012">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4871058">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="4871115">//</span><br>
<span class="lineno"></span><span class="comment" id="4871118">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="4871145">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="4871174">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4871202">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="4871236">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="4871280">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="4871301">//</span><br>
<span class="lineno"></span><span class="comment" id="4871304">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="4871367">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="4871427">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="4871495">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="4871559">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4871620">//</span><br>
<span class="lineno"></span><span class="comment" id="4871623">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="4871699">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="4871778">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="4871860">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4871899">//</span><br>
<span class="lineno"></span><span class="comment" id="4871902">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4871956">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4872019">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="4872076">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="4872097">//</span><br>
<span class="lineno"></span><span class="keyword" id="4872100">func</span>&nbsp;<span class="ident" id="4872105">Unmarshal</span><span class="op" id="4872114">(</span><span class="ident" id="4872115">data</span>&nbsp;<span class="op" id="4872120">[</span><span class="op" id="4872121">]</span><span class="builtintype" id="4872122">byte</span><span class="op" id="4872126">,</span>&nbsp;<span class="ident" id="4872128">v</span>&nbsp;<span class="keyword" id="4872130">interface</span><span class="op" id="4872139">{</span><span class="op" id="4872140">}</span><span class="op" id="4872141">)</span>&nbsp;<span class="builtintype" id="4872143">error</span>&nbsp;<span class="op" id="4872149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872152">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872183">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872228">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872272">var</span>&nbsp;<span class="ident" id="4872276">d</span>&nbsp;<span class="ident" id="4872278">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872291">err</span>&nbsp;<span class="op" id="4872295">:=</span>&nbsp;<span class="ident" id="4872298">checkValid</span><span class="op" id="4872308">(</span><span class="ident" id="4872309">data</span><span class="op" id="4872313">,</span>&nbsp;<span class="op" id="4872315">&amp;</span><span class="ident" id="4872316">d</span><span class="op" id="4872317">.</span><span class="ident" id="4872318">scan</span><span class="op" id="4872322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872325">if</span>&nbsp;<span class="ident" id="4872328">err</span>&nbsp;<span class="op" id="4872332">!=</span>&nbsp;<span class="ident" id="4872335">nil</span>&nbsp;<span class="op" id="4872339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872343">return</span>&nbsp;<span class="ident" id="4872350">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872359">d</span><span class="op" id="4872360">.</span><span class="ident" id="4872361">init</span><span class="op" id="4872365">(</span><span class="ident" id="4872366">data</span><span class="op" id="4872370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872373">return</span>&nbsp;<span class="ident" id="4872380">d</span><span class="op" id="4872381">.</span><span class="ident" id="4872382">unmarshal</span><span class="op" id="4872391">(</span><span class="ident" id="4872392">v</span><span class="op" id="4872393">)</span><br>
<span class="lineno"></span><span class="op" id="4872395">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4872398">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="4872453">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="4872509">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4872563">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="4872618">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="4872670">type</span>&nbsp;<span class="ident" id="4872675">Unmarshaler</span>&nbsp;<span class="keyword" id="4872687">interface</span>&nbsp;<span class="op" id="4872697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872700">UnmarshalJSON</span><span class="op" id="4872713">(</span><span class="op" id="4872714">[</span><span class="op" id="4872715">]</span><span class="builtintype" id="4872716">byte</span><span class="op" id="4872720">)</span>&nbsp;<span class="builtintype" id="4872722">error</span><br>
<span class="lineno"></span><span class="op" id="4872728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="4872731">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="4872788">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4872842">type</span>&nbsp;<span class="ident" id="4872847">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="4872866">struct</span>&nbsp;<span class="op" id="4872873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872876">Value</span>&nbsp;<span class="builtintype" id="4872882">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4872895">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872956">Type</span>&nbsp;&nbsp;<span class="ident" id="4872962">reflect</span><span class="op" id="4872969">.</span><span class="ident" id="4872970">Type</span>&nbsp;<span class="comment" id="4872975">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="4873023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4873026">func</span>&nbsp;<span class="op" id="4873031">(</span><span class="ident" id="4873032">e</span>&nbsp;<span class="op" id="4873034">*</span><span class="ident" id="4873035">UnmarshalTypeError</span><span class="op" id="4873053">)</span>&nbsp;<span class="ident" id="4873055">Error</span><span class="op" id="4873060">(</span><span class="op" id="4873061">)</span>&nbsp;<span class="builtintype" id="4873063">string</span>&nbsp;<span class="op" id="4873070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873073">return</span>&nbsp;<span class="string" id="4873080">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="4873106">+</span>&nbsp;<span class="ident" id="4873108">e</span><span class="op" id="4873109">.</span><span class="ident" id="4873110">Value</span>&nbsp;<span class="op" id="4873116">+</span>&nbsp;<span class="string" id="4873118">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="4873144">+</span>&nbsp;<span class="ident" id="4873146">e</span><span class="op" id="4873147">.</span><span class="ident" id="4873148">Type</span><span class="op" id="4873152">.</span><span class="ident" id="4873153">String</span><span class="op" id="4873159">(</span><span class="op" id="4873160">)</span><br>
<span class="lineno"></span><span class="op" id="4873162">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4873165">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4873224">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4873289">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="4873334">type</span>&nbsp;<span class="ident" id="4873339">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="4873359">struct</span>&nbsp;<span class="op" id="4873366">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873369">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4873375">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873383">Type</span>&nbsp;&nbsp;<span class="ident" id="4873389">reflect</span><span class="op" id="4873396">.</span><span class="ident" id="4873397">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873403">Field</span>&nbsp;<span class="ident" id="4873409">reflect</span><span class="op" id="4873416">.</span><span class="ident" id="4873417">StructField</span><br>
<span class="lineno"></span><span class="op" id="4873429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="4873432">func</span>&nbsp;<span class="op" id="4873437">(</span><span class="ident" id="4873438">e</span>&nbsp;<span class="op" id="4873440">*</span><span class="ident" id="4873441">UnmarshalFieldError</span><span class="op" id="4873460">)</span>&nbsp;<span class="ident" id="4873462">Error</span><span class="op" id="4873467">(</span><span class="op" id="4873468">)</span>&nbsp;<span class="builtintype" id="4873470">string</span>&nbsp;<span class="op" id="4873477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873480">return</span>&nbsp;<span class="string" id="4873487">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="4873524">+</span>&nbsp;<span class="ident" id="4873526">strconv</span><span class="op" id="4873533">.</span><span class="ident" id="4873534">Quote</span><span class="op" id="4873539">(</span><span class="ident" id="4873540">e</span><span class="op" id="4873541">.</span><span class="ident" id="4873542">Key</span><span class="op" id="4873545">)</span>&nbsp;<span class="op" id="4873547">+</span>&nbsp;<span class="string" id="4873549">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="4873575">+</span>&nbsp;<span class="ident" id="4873577">e</span><span class="op" id="4873578">.</span><span class="ident" id="4873579">Field</span><span class="op" id="4873584">.</span><span class="ident" id="4873585">Name</span>&nbsp;<span class="op" id="4873590">+</span>&nbsp;<span class="string" id="4873592">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="4873604">+</span>&nbsp;<span class="ident" id="4873606">e</span><span class="op" id="4873607">.</span><span class="ident" id="4873608">Type</span><span class="op" id="4873612">.</span><span class="ident" id="4873613">String</span><span class="op" id="4873619">(</span><span class="op" id="4873620">)</span><br>
<span class="lineno"></span><span class="op" id="4873622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4873625">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="4873704">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="4873762">type</span>&nbsp;<span class="ident" id="4873767">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="4873789">struct</span>&nbsp;<span class="op" id="4873796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873799">Type</span>&nbsp;<span class="ident" id="4873804">reflect</span><span class="op" id="4873811">.</span><span class="ident" id="4873812">Type</span><br>
<span class="lineno"></span><span class="op" id="4873817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="4873820">func</span>&nbsp;<span class="op" id="4873825">(</span><span class="ident" id="4873826">e</span>&nbsp;<span class="op" id="4873828">*</span><span class="ident" id="4873829">InvalidUnmarshalError</span><span class="op" id="4873850">)</span>&nbsp;<span class="ident" id="4873852">Error</span><span class="op" id="4873857">(</span><span class="op" id="4873858">)</span>&nbsp;<span class="builtintype" id="4873860">string</span>&nbsp;<span class="op" id="4873867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873870">if</span>&nbsp;<span class="ident" id="4873873">e</span><span class="op" id="4873874">.</span><span class="ident" id="4873875">Type</span>&nbsp;<span class="op" id="4873880">==</span>&nbsp;<span class="ident" id="4873883">nil</span>&nbsp;<span class="op" id="4873887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873891">return</span>&nbsp;<span class="string" id="4873898">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873926">if</span>&nbsp;<span class="ident" id="4873929">e</span><span class="op" id="4873930">.</span><span class="ident" id="4873931">Type</span><span class="op" id="4873935">.</span><span class="ident" id="4873936">Kind</span><span class="op" id="4873940">(</span><span class="op" id="4873941">)</span>&nbsp;<span class="op" id="4873943">!=</span>&nbsp;<span class="ident" id="4873946">reflect</span><span class="op" id="4873953">.</span><span class="ident" id="4873954">Ptr</span>&nbsp;<span class="op" id="4873958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873962">return</span>&nbsp;<span class="string" id="4873969">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="4874000">+</span>&nbsp;<span class="ident" id="4874002">e</span><span class="op" id="4874003">.</span><span class="ident" id="4874004">Type</span><span class="op" id="4874008">.</span><span class="ident" id="4874009">String</span><span class="op" id="4874015">(</span><span class="op" id="4874016">)</span>&nbsp;<span class="op" id="4874018">+</span>&nbsp;<span class="string" id="4874020">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874028">return</span>&nbsp;<span class="string" id="4874035">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="4874058">+</span>&nbsp;<span class="ident" id="4874060">e</span><span class="op" id="4874061">.</span><span class="ident" id="4874062">Type</span><span class="op" id="4874066">.</span><span class="ident" id="4874067">String</span><span class="op" id="4874073">(</span><span class="op" id="4874074">)</span>&nbsp;<span class="op" id="4874076">+</span>&nbsp;<span class="string" id="4874078">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="4874082">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="4874085">func</span>&nbsp;<span class="op" id="4874090">(</span><span class="ident" id="4874091">d</span>&nbsp;<span class="op" id="4874093">*</span><span class="ident" id="4874094">decodeState</span><span class="op" id="4874105">)</span>&nbsp;<span class="ident" id="4874107">unmarshal</span><span class="op" id="4874116">(</span><span class="ident" id="4874117">v</span>&nbsp;<span class="keyword" id="4874119">interface</span><span class="op" id="4874128">{</span><span class="op" id="4874129">}</span><span class="op" id="4874130">)</span>&nbsp;<span class="op" id="4874132">(</span><span class="ident" id="4874133">err</span>&nbsp;<span class="builtintype" id="4874137">error</span><span class="op" id="4874142">)</span>&nbsp;<span class="op" id="4874144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874147">defer</span>&nbsp;<span class="keyword" id="4874153">func</span><span class="op" id="4874157">(</span><span class="op" id="4874158">)</span>&nbsp;<span class="op" id="4874160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874164">if</span>&nbsp;<span class="ident" id="4874167">r</span>&nbsp;<span class="op" id="4874169">:=</span>&nbsp;<span class="builtinfunc" id="4874172">recover</span><span class="op" id="4874179">(</span><span class="op" id="4874180">)</span><span class="op" id="4874181">;</span>&nbsp;<span class="ident" id="4874183">r</span>&nbsp;<span class="op" id="4874185">!=</span>&nbsp;<span class="ident" id="4874188">nil</span>&nbsp;<span class="op" id="4874192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874197">if</span>&nbsp;<span class="ident" id="4874200">_</span><span class="op" id="4874201">,</span>&nbsp;<span class="ident" id="4874203">ok</span>&nbsp;<span class="op" id="4874206">:=</span>&nbsp;<span class="ident" id="4874209">r</span><span class="op" id="4874210">.</span><span class="op" id="4874211">(</span><span class="ident" id="4874212">runtime</span><span class="op" id="4874219">.</span><span class="ident" id="4874220">Error</span><span class="op" id="4874225">)</span><span class="op" id="4874226">;</span>&nbsp;<span class="ident" id="4874228">ok</span>&nbsp;<span class="op" id="4874231">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4874237">panic</span><span class="op" id="4874242">(</span><span class="ident" id="4874243">r</span><span class="op" id="4874244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874254">err</span>&nbsp;<span class="op" id="4874258">=</span>&nbsp;<span class="ident" id="4874260">r</span><span class="op" id="4874261">.</span><span class="op" id="4874262">(</span><span class="builtintype" id="4874263">error</span><span class="op" id="4874268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874275">}</span><span class="op" id="4874276">(</span><span class="op" id="4874277">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874281">rv</span>&nbsp;<span class="op" id="4874284">:=</span>&nbsp;<span class="ident" id="4874287">reflect</span><span class="op" id="4874294">.</span><span class="ident" id="4874295">ValueOf</span><span class="op" id="4874302">(</span><span class="ident" id="4874303">v</span><span class="op" id="4874304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874307">if</span>&nbsp;<span class="ident" id="4874310">rv</span><span class="op" id="4874312">.</span><span class="ident" id="4874313">Kind</span><span class="op" id="4874317">(</span><span class="op" id="4874318">)</span>&nbsp;<span class="op" id="4874320">!=</span>&nbsp;<span class="ident" id="4874323">reflect</span><span class="op" id="4874330">.</span><span class="ident" id="4874331">Ptr</span>&nbsp;<span class="op" id="4874335">||</span>&nbsp;<span class="ident" id="4874338">rv</span><span class="op" id="4874340">.</span><span class="ident" id="4874341">IsNil</span><span class="op" id="4874346">(</span><span class="op" id="4874347">)</span>&nbsp;<span class="op" id="4874349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874353">return</span>&nbsp;<span class="op" id="4874360">&amp;</span><span class="ident" id="4874361">InvalidUnmarshalError</span><span class="op" id="4874382">{</span><span class="ident" id="4874383">reflect</span><span class="op" id="4874390">.</span><span class="ident" id="4874391">TypeOf</span><span class="op" id="4874397">(</span><span class="ident" id="4874398">v</span><span class="op" id="4874399">)</span><span class="op" id="4874400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874403">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874407">d</span><span class="op" id="4874408">.</span><span class="ident" id="4874409">scan</span><span class="op" id="4874413">.</span><span class="ident" id="4874414">reset</span><span class="op" id="4874419">(</span><span class="op" id="4874420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4874423">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4874486">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874542">d</span><span class="op" id="4874543">.</span><span class="ident" id="4874544">value</span><span class="op" id="4874549">(</span><span class="ident" id="4874550">rv</span><span class="op" id="4874552">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874555">return</span>&nbsp;<span class="ident" id="4874562">d</span><span class="op" id="4874563">.</span><span class="ident" id="4874564">savedError</span><br>
<span class="lineno"></span><span class="op" id="4874575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4874578">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="4874624">type</span>&nbsp;<span class="ident" id="4874629">Number</span>&nbsp;<span class="builtintype" id="4874636">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4874644">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4874694">func</span>&nbsp;<span class="op" id="4874699">(</span><span class="ident" id="4874700">n</span>&nbsp;<span class="ident" id="4874702">Number</span><span class="op" id="4874708">)</span>&nbsp;<span class="ident" id="4874710">String</span><span class="op" id="4874716">(</span><span class="op" id="4874717">)</span>&nbsp;<span class="builtintype" id="4874719">string</span>&nbsp;<span class="op" id="4874726">{</span>&nbsp;<span class="keyword" id="4874728">return</span>&nbsp;<span class="builtintype" id="4874735">string</span><span class="op" id="4874741">(</span><span class="ident" id="4874742">n</span><span class="op" id="4874743">)</span>&nbsp;<span class="op" id="4874745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4874748">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="4874792">func</span>&nbsp;<span class="op" id="4874797">(</span><span class="ident" id="4874798">n</span>&nbsp;<span class="ident" id="4874800">Number</span><span class="op" id="4874806">)</span>&nbsp;<span class="ident" id="4874808">Float64</span><span class="op" id="4874815">(</span><span class="op" id="4874816">)</span>&nbsp;<span class="op" id="4874818">(</span><span class="builtintype" id="4874819">float64</span><span class="op" id="4874826">,</span>&nbsp;<span class="builtintype" id="4874828">error</span><span class="op" id="4874833">)</span>&nbsp;<span class="op" id="4874835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874838">return</span>&nbsp;<span class="ident" id="4874845">strconv</span><span class="op" id="4874852">.</span><span class="ident" id="4874853">ParseFloat</span><span class="op" id="4874863">(</span><span class="builtintype" id="4874864">string</span><span class="op" id="4874870">(</span><span class="ident" id="4874871">n</span><span class="op" id="4874872">)</span><span class="op" id="4874873">,</span>&nbsp;<span class="num" id="4874875">64</span><span class="op" id="4874877">)</span><br>
<span class="lineno"></span><span class="op" id="4874879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4874882">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="4874923">func</span>&nbsp;<span class="op" id="4874928">(</span><span class="ident" id="4874929">n</span>&nbsp;<span class="ident" id="4874931">Number</span><span class="op" id="4874937">)</span>&nbsp;<span class="ident" id="4874939">Int64</span><span class="op" id="4874944">(</span><span class="op" id="4874945">)</span>&nbsp;<span class="op" id="4874947">(</span><span class="ident" id="4874948">int64</span><span class="op" id="4874953">,</span>&nbsp;<span class="builtintype" id="4874955">error</span><span class="op" id="4874960">)</span>&nbsp;<span class="op" id="4874962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874965">return</span>&nbsp;<span class="ident" id="4874972">strconv</span><span class="op" id="4874979">.</span><span class="ident" id="4874980">ParseInt</span><span class="op" id="4874988">(</span><span class="builtintype" id="4874989">string</span><span class="op" id="4874995">(</span><span class="ident" id="4874996">n</span><span class="op" id="4874997">)</span><span class="op" id="4874998">,</span>&nbsp;<span class="num" id="4875000">10</span><span class="op" id="4875002">,</span>&nbsp;<span class="num" id="4875004">64</span><span class="op" id="4875006">)</span><br>
<span class="lineno"></span><span class="op" id="4875008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4875011">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="4875076">type</span>&nbsp;<span class="ident" id="4875081">decodeState</span>&nbsp;<span class="keyword" id="4875093">struct</span>&nbsp;<span class="op" id="4875100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875103">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4875114">[</span><span class="op" id="4875115">]</span><span class="builtintype" id="4875116">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875122">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4875133">int</span>&nbsp;<span class="comment" id="4875137">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875161">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4875172">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875181">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4875192">scanner</span>&nbsp;<span class="comment" id="4875200">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875227">savedError</span>&nbsp;<span class="builtintype" id="4875238">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875245">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="4875256">bool</span><br>
<span class="lineno"></span><span class="op" id="4875261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4875264">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="4875325">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="4875387">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="4875433">var</span>&nbsp;<span class="ident" id="4875437">errPhase</span>&nbsp;<span class="op" id="4875446">=</span>&nbsp;<span class="ident" id="4875448">errors</span><span class="op" id="4875454">.</span><span class="ident" id="4875455">New</span><span class="op" id="4875458">(</span><span class="string" id="4875459">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="4875512">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4875515">func</span>&nbsp;<span class="op" id="4875520">(</span><span class="ident" id="4875521">d</span>&nbsp;<span class="op" id="4875523">*</span><span class="ident" id="4875524">decodeState</span><span class="op" id="4875535">)</span>&nbsp;<span class="ident" id="4875537">init</span><span class="op" id="4875541">(</span><span class="ident" id="4875542">data</span>&nbsp;<span class="op" id="4875547">[</span><span class="op" id="4875548">]</span><span class="builtintype" id="4875549">byte</span><span class="op" id="4875553">)</span>&nbsp;<span class="op" id="4875555">*</span><span class="ident" id="4875556">decodeState</span>&nbsp;<span class="op" id="4875568">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875571">d</span><span class="op" id="4875572">.</span><span class="ident" id="4875573">data</span>&nbsp;<span class="op" id="4875578">=</span>&nbsp;<span class="ident" id="4875580">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875586">d</span><span class="op" id="4875587">.</span><span class="ident" id="4875588">off</span>&nbsp;<span class="op" id="4875592">=</span>&nbsp;<span class="num" id="4875594">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875597">d</span><span class="op" id="4875598">.</span><span class="ident" id="4875599">savedError</span>&nbsp;<span class="op" id="4875610">=</span>&nbsp;<span class="ident" id="4875612">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875617">return</span>&nbsp;<span class="ident" id="4875624">d</span><br>
<span class="lineno"></span><span class="op" id="4875626">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4875629">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="4875681">func</span>&nbsp;<span class="op" id="4875686">(</span><span class="ident" id="4875687">d</span>&nbsp;<span class="op" id="4875689">*</span><span class="ident" id="4875690">decodeState</span><span class="op" id="4875701">)</span>&nbsp;<span class="builtintype" id="4875703">error</span><span class="op" id="4875708">(</span><span class="ident" id="4875709">err</span>&nbsp;<span class="builtintype" id="4875713">error</span><span class="op" id="4875718">)</span>&nbsp;<span class="op" id="4875720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4875723">panic</span><span class="op" id="4875728">(</span><span class="ident" id="4875729">err</span><span class="op" id="4875732">)</span><br>
<span class="lineno"></span><span class="op" id="4875734">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4875737">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="4875789">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="4875835">func</span>&nbsp;<span class="op" id="4875840">(</span><span class="ident" id="4875841">d</span>&nbsp;<span class="op" id="4875843">*</span><span class="ident" id="4875844">decodeState</span><span class="op" id="4875855">)</span>&nbsp;<span class="ident" id="4875857">saveError</span><span class="op" id="4875866">(</span><span class="ident" id="4875867">err</span>&nbsp;<span class="builtintype" id="4875871">error</span><span class="op" id="4875876">)</span>&nbsp;<span class="op" id="4875878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875881">if</span>&nbsp;<span class="ident" id="4875884">d</span><span class="op" id="4875885">.</span><span class="ident" id="4875886">savedError</span>&nbsp;<span class="op" id="4875897">==</span>&nbsp;<span class="ident" id="4875900">nil</span>&nbsp;<span class="op" id="4875904">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875908">d</span><span class="op" id="4875909">.</span><span class="ident" id="4875910">savedError</span>&nbsp;<span class="op" id="4875921">=</span>&nbsp;<span class="ident" id="4875923">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875928">}</span><br>
<span class="lineno"></span><span class="op" id="4875930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4875933">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="4876006">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="4876074">func</span>&nbsp;<span class="op" id="4876079">(</span><span class="ident" id="4876080">d</span>&nbsp;<span class="op" id="4876082">*</span><span class="ident" id="4876083">decodeState</span><span class="op" id="4876094">)</span>&nbsp;<span class="ident" id="4876096">next</span><span class="op" id="4876100">(</span><span class="op" id="4876101">)</span>&nbsp;<span class="op" id="4876103">[</span><span class="op" id="4876104">]</span><span class="builtintype" id="4876105">byte</span>&nbsp;<span class="op" id="4876110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876113">c</span>&nbsp;<span class="op" id="4876115">:=</span>&nbsp;<span class="ident" id="4876118">d</span><span class="op" id="4876119">.</span><span class="ident" id="4876120">data</span><span class="op" id="4876124">[</span><span class="ident" id="4876125">d</span><span class="op" id="4876126">.</span><span class="ident" id="4876127">off</span><span class="op" id="4876130">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876133">item</span><span class="op" id="4876137">,</span>&nbsp;<span class="ident" id="4876139">rest</span><span class="op" id="4876143">,</span>&nbsp;<span class="ident" id="4876145">err</span>&nbsp;<span class="op" id="4876149">:=</span>&nbsp;<span class="ident" id="4876152">nextValue</span><span class="op" id="4876161">(</span><span class="ident" id="4876162">d</span><span class="op" id="4876163">.</span><span class="ident" id="4876164">data</span><span class="op" id="4876168">[</span><span class="ident" id="4876169">d</span><span class="op" id="4876170">.</span><span class="ident" id="4876171">off</span><span class="op" id="4876174">:</span><span class="op" id="4876175">]</span><span class="op" id="4876176">,</span>&nbsp;<span class="op" id="4876178">&amp;</span><span class="ident" id="4876179">d</span><span class="op" id="4876180">.</span><span class="ident" id="4876181">nextscan</span><span class="op" id="4876189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876192">if</span>&nbsp;<span class="ident" id="4876195">err</span>&nbsp;<span class="op" id="4876199">!=</span>&nbsp;<span class="ident" id="4876202">nil</span>&nbsp;<span class="op" id="4876206">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876210">d</span><span class="op" id="4876211">.</span><span class="builtintype" id="4876212">error</span><span class="op" id="4876217">(</span><span class="ident" id="4876218">err</span><span class="op" id="4876221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876227">d</span><span class="op" id="4876228">.</span><span class="ident" id="4876229">off</span>&nbsp;<span class="op" id="4876233">=</span>&nbsp;<span class="builtinfunc" id="4876235">len</span><span class="op" id="4876238">(</span><span class="ident" id="4876239">d</span><span class="op" id="4876240">.</span><span class="ident" id="4876241">data</span><span class="op" id="4876245">)</span>&nbsp;<span class="op" id="4876247">-</span>&nbsp;<span class="builtinfunc" id="4876249">len</span><span class="op" id="4876252">(</span><span class="ident" id="4876253">rest</span><span class="op" id="4876257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4876261">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4876312">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4876368">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876418">if</span>&nbsp;<span class="ident" id="4876421">c</span>&nbsp;<span class="op" id="4876423">==</span>&nbsp;<span class="string" id="4876426">&#39;{&#39;</span>&nbsp;<span class="op" id="4876430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876434">d</span><span class="op" id="4876435">.</span><span class="ident" id="4876436">scan</span><span class="op" id="4876440">.</span><span class="ident" id="4876441">step</span><span class="op" id="4876445">(</span><span class="op" id="4876446">&amp;</span><span class="ident" id="4876447">d</span><span class="op" id="4876448">.</span><span class="ident" id="4876449">scan</span><span class="op" id="4876453">,</span>&nbsp;<span class="string" id="4876455">&#39;}&#39;</span><span class="op" id="4876458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876461">}</span>&nbsp;<span class="keyword" id="4876463">else</span>&nbsp;<span class="op" id="4876468">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876472">d</span><span class="op" id="4876473">.</span><span class="ident" id="4876474">scan</span><span class="op" id="4876478">.</span><span class="ident" id="4876479">step</span><span class="op" id="4876483">(</span><span class="op" id="4876484">&amp;</span><span class="ident" id="4876485">d</span><span class="op" id="4876486">.</span><span class="ident" id="4876487">scan</span><span class="op" id="4876491">,</span>&nbsp;<span class="string" id="4876493">&#39;]&#39;</span><span class="op" id="4876496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876503">return</span>&nbsp;<span class="ident" id="4876510">item</span><br>
<span class="lineno"></span><span class="op" id="4876515">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="4876518">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4876574">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="4876615">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="4876666">func</span>&nbsp;<span class="op" id="4876671">(</span><span class="ident" id="4876672">d</span>&nbsp;<span class="op" id="4876674">*</span><span class="ident" id="4876675">decodeState</span><span class="op" id="4876686">)</span>&nbsp;<span class="ident" id="4876688">scanWhile</span><span class="op" id="4876697">(</span><span class="ident" id="4876698">op</span>&nbsp;<span class="builtintype" id="4876701">int</span><span class="op" id="4876704">)</span>&nbsp;<span class="builtintype" id="4876706">int</span>&nbsp;<span class="op" id="4876710">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876713">var</span>&nbsp;<span class="ident" id="4876717">newOp</span>&nbsp;<span class="builtintype" id="4876723">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876728">for</span>&nbsp;<span class="op" id="4876732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876736">if</span>&nbsp;<span class="ident" id="4876739">d</span><span class="op" id="4876740">.</span><span class="ident" id="4876741">off</span>&nbsp;<span class="op" id="4876745">&gt;=</span>&nbsp;<span class="builtinfunc" id="4876748">len</span><span class="op" id="4876751">(</span><span class="ident" id="4876752">d</span><span class="op" id="4876753">.</span><span class="ident" id="4876754">data</span><span class="op" id="4876758">)</span>&nbsp;<span class="op" id="4876760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876765">newOp</span>&nbsp;<span class="op" id="4876771">=</span>&nbsp;<span class="ident" id="4876773">d</span><span class="op" id="4876774">.</span><span class="ident" id="4876775">scan</span><span class="op" id="4876779">.</span><span class="ident" id="4876780">eof</span><span class="op" id="4876783">(</span><span class="op" id="4876784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876789">d</span><span class="op" id="4876790">.</span><span class="ident" id="4876791">off</span>&nbsp;<span class="op" id="4876795">=</span>&nbsp;<span class="builtinfunc" id="4876797">len</span><span class="op" id="4876800">(</span><span class="ident" id="4876801">d</span><span class="op" id="4876802">.</span><span class="ident" id="4876803">data</span><span class="op" id="4876807">)</span>&nbsp;<span class="op" id="4876809">+</span>&nbsp;<span class="num" id="4876811">1</span>&nbsp;<span class="comment" id="4876813">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876848">}</span>&nbsp;<span class="keyword" id="4876850">else</span>&nbsp;<span class="op" id="4876855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876860">c</span>&nbsp;<span class="op" id="4876862">:=</span>&nbsp;<span class="builtintype" id="4876865">int</span><span class="op" id="4876868">(</span><span class="ident" id="4876869">d</span><span class="op" id="4876870">.</span><span class="ident" id="4876871">data</span><span class="op" id="4876875">[</span><span class="ident" id="4876876">d</span><span class="op" id="4876877">.</span><span class="ident" id="4876878">off</span><span class="op" id="4876881">]</span><span class="op" id="4876882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876887">d</span><span class="op" id="4876888">.</span><span class="ident" id="4876889">off</span><span class="op" id="4876892">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876898">newOp</span>&nbsp;<span class="op" id="4876904">=</span>&nbsp;<span class="ident" id="4876906">d</span><span class="op" id="4876907">.</span><span class="ident" id="4876908">scan</span><span class="op" id="4876912">.</span><span class="ident" id="4876913">step</span><span class="op" id="4876917">(</span><span class="op" id="4876918">&amp;</span><span class="ident" id="4876919">d</span><span class="op" id="4876920">.</span><span class="ident" id="4876921">scan</span><span class="op" id="4876925">,</span>&nbsp;<span class="ident" id="4876927">c</span><span class="op" id="4876928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876932">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876936">if</span>&nbsp;<span class="ident" id="4876939">newOp</span>&nbsp;<span class="op" id="4876945">!=</span>&nbsp;<span class="ident" id="4876948">op</span>&nbsp;<span class="op" id="4876951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876956">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4876967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876970">return</span>&nbsp;<span class="ident" id="4876977">newOp</span><br>
<span class="lineno">245</span><span class="op" id="4876983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4876986">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4877052">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4877105">func</span>&nbsp;<span class="op" id="4877110">(</span><span class="ident" id="4877111">d</span>&nbsp;<span class="op" id="4877113">*</span><span class="ident" id="4877114">decodeState</span><span class="op" id="4877125">)</span>&nbsp;<span class="ident" id="4877127">value</span><span class="op" id="4877132">(</span><span class="ident" id="4877133">v</span>&nbsp;<span class="ident" id="4877135">reflect</span><span class="op" id="4877142">.</span><span class="ident" id="4877143">Value</span><span class="op" id="4877148">)</span>&nbsp;<span class="op" id="4877150">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877153">if</span>&nbsp;<span class="op" id="4877156">!</span><span class="ident" id="4877157">v</span><span class="op" id="4877158">.</span><span class="ident" id="4877159">IsValid</span><span class="op" id="4877166">(</span><span class="op" id="4877167">)</span>&nbsp;<span class="op" id="4877169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877173">_</span><span class="op" id="4877174">,</span>&nbsp;<span class="ident" id="4877176">rest</span><span class="op" id="4877180">,</span>&nbsp;<span class="ident" id="4877182">err</span>&nbsp;<span class="op" id="4877186">:=</span>&nbsp;<span class="ident" id="4877189">nextValue</span><span class="op" id="4877198">(</span><span class="ident" id="4877199">d</span><span class="op" id="4877200">.</span><span class="ident" id="4877201">data</span><span class="op" id="4877205">[</span><span class="ident" id="4877206">d</span><span class="op" id="4877207">.</span><span class="ident" id="4877208">off</span><span class="op" id="4877211">:</span><span class="op" id="4877212">]</span><span class="op" id="4877213">,</span>&nbsp;<span class="op" id="4877215">&amp;</span><span class="ident" id="4877216">d</span><span class="op" id="4877217">.</span><span class="ident" id="4877218">nextscan</span><span class="op" id="4877226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877230">if</span>&nbsp;<span class="ident" id="4877233">err</span>&nbsp;<span class="op" id="4877237">!=</span>&nbsp;<span class="ident" id="4877240">nil</span>&nbsp;<span class="op" id="4877244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877249">d</span><span class="op" id="4877250">.</span><span class="builtintype" id="4877251">error</span><span class="op" id="4877256">(</span><span class="ident" id="4877257">err</span><span class="op" id="4877260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877264">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877268">d</span><span class="op" id="4877269">.</span><span class="ident" id="4877270">off</span>&nbsp;<span class="op" id="4877274">=</span>&nbsp;<span class="builtinfunc" id="4877276">len</span><span class="op" id="4877279">(</span><span class="ident" id="4877280">d</span><span class="op" id="4877281">.</span><span class="ident" id="4877282">data</span><span class="op" id="4877286">)</span>&nbsp;<span class="op" id="4877288">-</span>&nbsp;<span class="builtinfunc" id="4877290">len</span><span class="op" id="4877293">(</span><span class="ident" id="4877294">rest</span><span class="op" id="4877298">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877303">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877364">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877426">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877480">if</span>&nbsp;<span class="ident" id="4877483">d</span><span class="op" id="4877484">.</span><span class="ident" id="4877485">scan</span><span class="op" id="4877489">.</span><span class="ident" id="4877490">redo</span>&nbsp;<span class="op" id="4877495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877500">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877514">d</span><span class="op" id="4877515">.</span><span class="ident" id="4877516">scan</span><span class="op" id="4877520">.</span><span class="ident" id="4877521">redo</span>&nbsp;<span class="op" id="4877526">=</span>&nbsp;<span class="builtintype" id="4877528">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877537">d</span><span class="op" id="4877538">.</span><span class="ident" id="4877539">scan</span><span class="op" id="4877543">.</span><span class="ident" id="4877544">step</span>&nbsp;<span class="op" id="4877549">=</span>&nbsp;<span class="ident" id="4877551">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877569">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877573">d</span><span class="op" id="4877574">.</span><span class="ident" id="4877575">scan</span><span class="op" id="4877579">.</span><span class="ident" id="4877580">step</span><span class="op" id="4877584">(</span><span class="op" id="4877585">&amp;</span><span class="ident" id="4877586">d</span><span class="op" id="4877587">.</span><span class="ident" id="4877588">scan</span><span class="op" id="4877592">,</span>&nbsp;<span class="string" id="4877594">&#39;&#34;&#39;</span><span class="op" id="4877597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877601">d</span><span class="op" id="4877602">.</span><span class="ident" id="4877603">scan</span><span class="op" id="4877607">.</span><span class="ident" id="4877608">step</span><span class="op" id="4877612">(</span><span class="op" id="4877613">&amp;</span><span class="ident" id="4877614">d</span><span class="op" id="4877615">.</span><span class="ident" id="4877616">scan</span><span class="op" id="4877620">,</span>&nbsp;<span class="string" id="4877622">&#39;&#34;&#39;</span><span class="op" id="4877625">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877630">n</span>&nbsp;<span class="op" id="4877632">:=</span>&nbsp;<span class="builtinfunc" id="4877635">len</span><span class="op" id="4877638">(</span><span class="ident" id="4877639">d</span><span class="op" id="4877640">.</span><span class="ident" id="4877641">scan</span><span class="op" id="4877645">.</span><span class="ident" id="4877646">parseState</span><span class="op" id="4877656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877660">if</span>&nbsp;<span class="ident" id="4877663">n</span>&nbsp;<span class="op" id="4877665">&gt;</span>&nbsp;<span class="num" id="4877667">0</span>&nbsp;<span class="op" id="4877669">&amp;&amp;</span>&nbsp;<span class="ident" id="4877672">d</span><span class="op" id="4877673">.</span><span class="ident" id="4877674">scan</span><span class="op" id="4877678">.</span><span class="ident" id="4877679">parseState</span><span class="op" id="4877689">[</span><span class="ident" id="4877690">n</span><span class="op" id="4877691">-</span><span class="num" id="4877692">1</span><span class="op" id="4877693">]</span>&nbsp;<span class="op" id="4877695">==</span>&nbsp;<span class="ident" id="4877698">parseObjectKey</span>&nbsp;<span class="op" id="4877713">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877718">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877784">d</span><span class="op" id="4877785">.</span><span class="ident" id="4877786">scan</span><span class="op" id="4877790">.</span><span class="ident" id="4877791">step</span><span class="op" id="4877795">(</span><span class="op" id="4877796">&amp;</span><span class="ident" id="4877797">d</span><span class="op" id="4877798">.</span><span class="ident" id="4877799">scan</span><span class="op" id="4877803">,</span>&nbsp;<span class="string" id="4877805">&#39;:&#39;</span><span class="op" id="4877808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877813">d</span><span class="op" id="4877814">.</span><span class="ident" id="4877815">scan</span><span class="op" id="4877819">.</span><span class="ident" id="4877820">step</span><span class="op" id="4877824">(</span><span class="op" id="4877825">&amp;</span><span class="ident" id="4877826">d</span><span class="op" id="4877827">.</span><span class="ident" id="4877828">scan</span><span class="op" id="4877832">,</span>&nbsp;<span class="string" id="4877834">&#39;&#34;&#39;</span><span class="op" id="4877837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877842">d</span><span class="op" id="4877843">.</span><span class="ident" id="4877844">scan</span><span class="op" id="4877848">.</span><span class="ident" id="4877849">step</span><span class="op" id="4877853">(</span><span class="op" id="4877854">&amp;</span><span class="ident" id="4877855">d</span><span class="op" id="4877856">.</span><span class="ident" id="4877857">scan</span><span class="op" id="4877861">,</span>&nbsp;<span class="string" id="4877863">&#39;&#34;&#39;</span><span class="op" id="4877866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877871">d</span><span class="op" id="4877872">.</span><span class="ident" id="4877873">scan</span><span class="op" id="4877877">.</span><span class="ident" id="4877878">step</span><span class="op" id="4877882">(</span><span class="op" id="4877883">&amp;</span><span class="ident" id="4877884">d</span><span class="op" id="4877885">.</span><span class="ident" id="4877886">scan</span><span class="op" id="4877890">,</span>&nbsp;<span class="string" id="4877892">&#39;}&#39;</span><span class="op" id="4877895">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877904">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877916">switch</span>&nbsp;<span class="ident" id="4877923">op</span>&nbsp;<span class="op" id="4877926">:=</span>&nbsp;<span class="ident" id="4877929">d</span><span class="op" id="4877930">.</span><span class="ident" id="4877931">scanWhile</span><span class="op" id="4877940">(</span><span class="ident" id="4877941">scanSkipSpace</span><span class="op" id="4877954">)</span><span class="op" id="4877955">;</span>&nbsp;<span class="ident" id="4877957">op</span>&nbsp;<span class="op" id="4877960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877963">default</span><span class="op" id="4877970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877974">d</span><span class="op" id="4877975">.</span><span class="builtintype" id="4877976">error</span><span class="op" id="4877981">(</span><span class="ident" id="4877982">errPhase</span><span class="op" id="4877990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877994">case</span>&nbsp;<span class="ident" id="4877999">scanBeginArray</span><span class="op" id="4878013">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878017">d</span><span class="op" id="4878018">.</span><span class="ident" id="4878019">array</span><span class="op" id="4878024">(</span><span class="ident" id="4878025">v</span><span class="op" id="4878026">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878030">case</span>&nbsp;<span class="ident" id="4878035">scanBeginObject</span><span class="op" id="4878050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878054">d</span><span class="op" id="4878055">.</span><span class="ident" id="4878056">object</span><span class="op" id="4878062">(</span><span class="ident" id="4878063">v</span><span class="op" id="4878064">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878068">case</span>&nbsp;<span class="ident" id="4878073">scanBeginLiteral</span><span class="op" id="4878089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878093">d</span><span class="op" id="4878094">.</span><span class="ident" id="4878095">literal</span><span class="op" id="4878102">(</span><span class="ident" id="4878103">v</span><span class="op" id="4878104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878107">}</span><br>
<span class="lineno"></span><span class="op" id="4878109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="4878112">type</span>&nbsp;<span class="ident" id="4878117">unquotedValue</span>&nbsp;<span class="keyword" id="4878131">struct</span><span class="op" id="4878137">{</span><span class="op" id="4878138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4878141">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4878184">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4878250">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="4878318">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4878358">func</span>&nbsp;<span class="op" id="4878363">(</span><span class="ident" id="4878364">d</span>&nbsp;<span class="op" id="4878366">*</span><span class="ident" id="4878367">decodeState</span><span class="op" id="4878378">)</span>&nbsp;<span class="ident" id="4878380">valueQuoted</span><span class="op" id="4878391">(</span><span class="op" id="4878392">)</span>&nbsp;<span class="keyword" id="4878394">interface</span><span class="op" id="4878403">{</span><span class="op" id="4878404">}</span>&nbsp;<span class="op" id="4878406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878409">switch</span>&nbsp;<span class="ident" id="4878416">op</span>&nbsp;<span class="op" id="4878419">:=</span>&nbsp;<span class="ident" id="4878422">d</span><span class="op" id="4878423">.</span><span class="ident" id="4878424">scanWhile</span><span class="op" id="4878433">(</span><span class="ident" id="4878434">scanSkipSpace</span><span class="op" id="4878447">)</span><span class="op" id="4878448">;</span>&nbsp;<span class="ident" id="4878450">op</span>&nbsp;<span class="op" id="4878453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878456">default</span><span class="op" id="4878463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878467">d</span><span class="op" id="4878468">.</span><span class="builtintype" id="4878469">error</span><span class="op" id="4878474">(</span><span class="ident" id="4878475">errPhase</span><span class="op" id="4878483">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878487">case</span>&nbsp;<span class="ident" id="4878492">scanBeginArray</span><span class="op" id="4878506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878510">d</span><span class="op" id="4878511">.</span><span class="ident" id="4878512">array</span><span class="op" id="4878517">(</span><span class="ident" id="4878518">reflect</span><span class="op" id="4878525">.</span><span class="ident" id="4878526">Value</span><span class="op" id="4878531">{</span><span class="op" id="4878532">}</span><span class="op" id="4878533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878537">case</span>&nbsp;<span class="ident" id="4878542">scanBeginObject</span><span class="op" id="4878557">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878561">d</span><span class="op" id="4878562">.</span><span class="ident" id="4878563">object</span><span class="op" id="4878569">(</span><span class="ident" id="4878570">reflect</span><span class="op" id="4878577">.</span><span class="ident" id="4878578">Value</span><span class="op" id="4878583">{</span><span class="op" id="4878584">}</span><span class="op" id="4878585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878589">case</span>&nbsp;<span class="ident" id="4878594">scanBeginLiteral</span><span class="op" id="4878610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878614">switch</span>&nbsp;<span class="ident" id="4878621">v</span>&nbsp;<span class="op" id="4878623">:=</span>&nbsp;<span class="ident" id="4878626">d</span><span class="op" id="4878627">.</span><span class="ident" id="4878628">literalInterface</span><span class="op" id="4878644">(</span><span class="op" id="4878645">)</span><span class="op" id="4878646">.</span><span class="op" id="4878647">(</span><span class="keyword" id="4878648">type</span><span class="op" id="4878652">)</span>&nbsp;<span class="op" id="4878654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878658">case</span>&nbsp;<span class="ident" id="4878663">nil</span><span class="op" id="4878666">,</span>&nbsp;<span class="builtintype" id="4878668">string</span><span class="op" id="4878674">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878679">return</span>&nbsp;<span class="ident" id="4878686">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878696">return</span>&nbsp;<span class="ident" id="4878703">unquotedValue</span><span class="op" id="4878716">{</span><span class="op" id="4878717">}</span><br>
<span class="lineno"></span><span class="op" id="4878719">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="4878722">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="4878778">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="4878813">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="4878882">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="4878970">func</span>&nbsp;<span class="op" id="4878975">(</span><span class="ident" id="4878976">d</span>&nbsp;<span class="op" id="4878978">*</span><span class="ident" id="4878979">decodeState</span><span class="op" id="4878990">)</span>&nbsp;<span class="ident" id="4878992">indirect</span><span class="op" id="4879000">(</span><span class="ident" id="4879001">v</span>&nbsp;<span class="ident" id="4879003">reflect</span><span class="op" id="4879010">.</span><span class="ident" id="4879011">Value</span><span class="op" id="4879016">,</span>&nbsp;<span class="ident" id="4879018">decodingNull</span>&nbsp;<span class="builtintype" id="4879031">bool</span><span class="op" id="4879035">)</span>&nbsp;<span class="op" id="4879037">(</span><span class="ident" id="4879038">Unmarshaler</span><span class="op" id="4879049">,</span>&nbsp;<span class="ident" id="4879051">encoding</span><span class="op" id="4879059">.</span><span class="ident" id="4879060">TextUnmarshaler</span><span class="op" id="4879075">,</span>&nbsp;<span class="ident" id="4879077">reflect</span><span class="op" id="4879084">.</span><span class="ident" id="4879085">Value</span><span class="op" id="4879090">)</span>&nbsp;<span class="op" id="4879092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4879095">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4879140">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4879209">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879227">if</span>&nbsp;<span class="ident" id="4879230">v</span><span class="op" id="4879231">.</span><span class="ident" id="4879232">Kind</span><span class="op" id="4879236">(</span><span class="op" id="4879237">)</span>&nbsp;<span class="op" id="4879239">!=</span>&nbsp;<span class="ident" id="4879242">reflect</span><span class="op" id="4879249">.</span><span class="ident" id="4879250">Ptr</span>&nbsp;<span class="op" id="4879254">&amp;&amp;</span>&nbsp;<span class="ident" id="4879257">v</span><span class="op" id="4879258">.</span><span class="ident" id="4879259">Type</span><span class="op" id="4879263">(</span><span class="op" id="4879264">)</span><span class="op" id="4879265">.</span><span class="ident" id="4879266">Name</span><span class="op" id="4879270">(</span><span class="op" id="4879271">)</span>&nbsp;<span class="op" id="4879273">!=</span>&nbsp;<span class="string" id="4879276">&#34;&#34;</span>&nbsp;<span class="op" id="4879279">&amp;&amp;</span>&nbsp;<span class="ident" id="4879282">v</span><span class="op" id="4879283">.</span><span class="ident" id="4879284">CanAddr</span><span class="op" id="4879291">(</span><span class="op" id="4879292">)</span>&nbsp;<span class="op" id="4879294">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879298">v</span>&nbsp;<span class="op" id="4879300">=</span>&nbsp;<span class="ident" id="4879302">v</span><span class="op" id="4879303">.</span><span class="ident" id="4879304">Addr</span><span class="op" id="4879308">(</span><span class="op" id="4879309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879315">for</span>&nbsp;<span class="op" id="4879319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4879323">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4879386">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879413">if</span>&nbsp;<span class="ident" id="4879416">v</span><span class="op" id="4879417">.</span><span class="ident" id="4879418">Kind</span><span class="op" id="4879422">(</span><span class="op" id="4879423">)</span>&nbsp;<span class="op" id="4879425">==</span>&nbsp;<span class="ident" id="4879428">reflect</span><span class="op" id="4879435">.</span><span class="ident" id="4879436">Interface</span>&nbsp;<span class="op" id="4879446">&amp;&amp;</span>&nbsp;<span class="op" id="4879449">!</span><span class="ident" id="4879450">v</span><span class="op" id="4879451">.</span><span class="ident" id="4879452">IsNil</span><span class="op" id="4879457">(</span><span class="op" id="4879458">)</span>&nbsp;<span class="op" id="4879460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879465">e</span>&nbsp;<span class="op" id="4879467">:=</span>&nbsp;<span class="ident" id="4879470">v</span><span class="op" id="4879471">.</span><span class="ident" id="4879472">Elem</span><span class="op" id="4879476">(</span><span class="op" id="4879477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879482">if</span>&nbsp;<span class="ident" id="4879485">e</span><span class="op" id="4879486">.</span><span class="ident" id="4879487">Kind</span><span class="op" id="4879491">(</span><span class="op" id="4879492">)</span>&nbsp;<span class="op" id="4879494">==</span>&nbsp;<span class="ident" id="4879497">reflect</span><span class="op" id="4879504">.</span><span class="ident" id="4879505">Ptr</span>&nbsp;<span class="op" id="4879509">&amp;&amp;</span>&nbsp;<span class="op" id="4879512">!</span><span class="ident" id="4879513">e</span><span class="op" id="4879514">.</span><span class="ident" id="4879515">IsNil</span><span class="op" id="4879520">(</span><span class="op" id="4879521">)</span>&nbsp;<span class="op" id="4879523">&amp;&amp;</span>&nbsp;<span class="op" id="4879526">(</span><span class="op" id="4879527">!</span><span class="ident" id="4879528">decodingNull</span>&nbsp;<span class="op" id="4879541">||</span>&nbsp;<span class="ident" id="4879544">e</span><span class="op" id="4879545">.</span><span class="ident" id="4879546">Elem</span><span class="op" id="4879550">(</span><span class="op" id="4879551">)</span><span class="op" id="4879552">.</span><span class="ident" id="4879553">Kind</span><span class="op" id="4879557">(</span><span class="op" id="4879558">)</span>&nbsp;<span class="op" id="4879560">==</span>&nbsp;<span class="ident" id="4879563">reflect</span><span class="op" id="4879570">.</span><span class="ident" id="4879571">Ptr</span><span class="op" id="4879574">)</span>&nbsp;<span class="op" id="4879576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879582">v</span>&nbsp;<span class="op" id="4879584">=</span>&nbsp;<span class="ident" id="4879586">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879592">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879613">if</span>&nbsp;<span class="ident" id="4879616">v</span><span class="op" id="4879617">.</span><span class="ident" id="4879618">Kind</span><span class="op" id="4879622">(</span><span class="op" id="4879623">)</span>&nbsp;<span class="op" id="4879625">!=</span>&nbsp;<span class="ident" id="4879628">reflect</span><span class="op" id="4879635">.</span><span class="ident" id="4879636">Ptr</span>&nbsp;<span class="op" id="4879640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879645">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879658">if</span>&nbsp;<span class="ident" id="4879661">v</span><span class="op" id="4879662">.</span><span class="ident" id="4879663">Elem</span><span class="op" id="4879667">(</span><span class="op" id="4879668">)</span><span class="op" id="4879669">.</span><span class="ident" id="4879670">Kind</span><span class="op" id="4879674">(</span><span class="op" id="4879675">)</span>&nbsp;<span class="op" id="4879677">!=</span>&nbsp;<span class="ident" id="4879680">reflect</span><span class="op" id="4879687">.</span><span class="ident" id="4879688">Ptr</span>&nbsp;<span class="op" id="4879692">&amp;&amp;</span>&nbsp;<span class="ident" id="4879695">decodingNull</span>&nbsp;<span class="op" id="4879708">&amp;&amp;</span>&nbsp;<span class="ident" id="4879711">v</span><span class="op" id="4879712">.</span><span class="ident" id="4879713">CanSet</span><span class="op" id="4879719">(</span><span class="op" id="4879720">)</span>&nbsp;<span class="op" id="4879722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879727">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879735">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879739">if</span>&nbsp;<span class="ident" id="4879742">v</span><span class="op" id="4879743">.</span><span class="ident" id="4879744">IsNil</span><span class="op" id="4879749">(</span><span class="op" id="4879750">)</span>&nbsp;<span class="op" id="4879752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879757">v</span><span class="op" id="4879758">.</span><span class="ident" id="4879759">Set</span><span class="op" id="4879762">(</span><span class="ident" id="4879763">reflect</span><span class="op" id="4879770">.</span><span class="ident" id="4879771">New</span><span class="op" id="4879774">(</span><span class="ident" id="4879775">v</span><span class="op" id="4879776">.</span><span class="ident" id="4879777">Type</span><span class="op" id="4879781">(</span><span class="op" id="4879782">)</span><span class="op" id="4879783">.</span><span class="ident" id="4879784">Elem</span><span class="op" id="4879788">(</span><span class="op" id="4879789">)</span><span class="op" id="4879790">)</span><span class="op" id="4879791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879799">if</span>&nbsp;<span class="ident" id="4879802">v</span><span class="op" id="4879803">.</span><span class="ident" id="4879804">Type</span><span class="op" id="4879808">(</span><span class="op" id="4879809">)</span><span class="op" id="4879810">.</span><span class="ident" id="4879811">NumMethod</span><span class="op" id="4879820">(</span><span class="op" id="4879821">)</span>&nbsp;<span class="op" id="4879823">&gt;</span>&nbsp;<span class="num" id="4879825">0</span>&nbsp;<span class="op" id="4879827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879832">if</span>&nbsp;<span class="ident" id="4879835">u</span><span class="op" id="4879836">,</span>&nbsp;<span class="ident" id="4879838">ok</span>&nbsp;<span class="op" id="4879841">:=</span>&nbsp;<span class="ident" id="4879844">v</span><span class="op" id="4879845">.</span><span class="ident" id="4879846">Interface</span><span class="op" id="4879855">(</span><span class="op" id="4879856">)</span><span class="op" id="4879857">.</span><span class="op" id="4879858">(</span><span class="ident" id="4879859">Unmarshaler</span><span class="op" id="4879870">)</span><span class="op" id="4879871">;</span>&nbsp;<span class="ident" id="4879873">ok</span>&nbsp;<span class="op" id="4879876">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879882">return</span>&nbsp;<span class="ident" id="4879889">u</span><span class="op" id="4879890">,</span>&nbsp;<span class="ident" id="4879892">nil</span><span class="op" id="4879895">,</span>&nbsp;<span class="ident" id="4879897">reflect</span><span class="op" id="4879904">.</span><span class="ident" id="4879905">Value</span><span class="op" id="4879910">{</span><span class="op" id="4879911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879921">if</span>&nbsp;<span class="ident" id="4879924">u</span><span class="op" id="4879925">,</span>&nbsp;<span class="ident" id="4879927">ok</span>&nbsp;<span class="op" id="4879930">:=</span>&nbsp;<span class="ident" id="4879933">v</span><span class="op" id="4879934">.</span><span class="ident" id="4879935">Interface</span><span class="op" id="4879944">(</span><span class="op" id="4879945">)</span><span class="op" id="4879946">.</span><span class="op" id="4879947">(</span><span class="ident" id="4879948">encoding</span><span class="op" id="4879956">.</span><span class="ident" id="4879957">TextUnmarshaler</span><span class="op" id="4879972">)</span><span class="op" id="4879973">;</span>&nbsp;<span class="ident" id="4879975">ok</span>&nbsp;<span class="op" id="4879978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879984">return</span>&nbsp;<span class="ident" id="4879991">nil</span><span class="op" id="4879994">,</span>&nbsp;<span class="ident" id="4879996">u</span><span class="op" id="4879997">,</span>&nbsp;<span class="ident" id="4879999">reflect</span><span class="op" id="4880006">.</span><span class="ident" id="4880007">Value</span><span class="op" id="4880012">{</span><span class="op" id="4880013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880018">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880026">v</span>&nbsp;<span class="op" id="4880028">=</span>&nbsp;<span class="ident" id="4880030">v</span><span class="op" id="4880031">.</span><span class="ident" id="4880032">Elem</span><span class="op" id="4880036">(</span><span class="op" id="4880037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880043">return</span>&nbsp;<span class="ident" id="4880050">nil</span><span class="op" id="4880053">,</span>&nbsp;<span class="ident" id="4880055">nil</span><span class="op" id="4880058">,</span>&nbsp;<span class="ident" id="4880060">v</span><br>
<span class="lineno"></span><span class="op" id="4880062">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="4880065">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4880142">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="4880202">func</span>&nbsp;<span class="op" id="4880207">(</span><span class="ident" id="4880208">d</span>&nbsp;<span class="op" id="4880210">*</span><span class="ident" id="4880211">decodeState</span><span class="op" id="4880222">)</span>&nbsp;<span class="ident" id="4880224">array</span><span class="op" id="4880229">(</span><span class="ident" id="4880230">v</span>&nbsp;<span class="ident" id="4880232">reflect</span><span class="op" id="4880239">.</span><span class="ident" id="4880240">Value</span><span class="op" id="4880245">)</span>&nbsp;<span class="op" id="4880247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4880250">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880277">u</span><span class="op" id="4880278">,</span>&nbsp;<span class="ident" id="4880280">ut</span><span class="op" id="4880282">,</span>&nbsp;<span class="ident" id="4880284">pv</span>&nbsp;<span class="op" id="4880287">:=</span>&nbsp;<span class="ident" id="4880290">d</span><span class="op" id="4880291">.</span><span class="ident" id="4880292">indirect</span><span class="op" id="4880300">(</span><span class="ident" id="4880301">v</span><span class="op" id="4880302">,</span>&nbsp;<span class="builtintype" id="4880304">false</span><span class="op" id="4880309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880312">if</span>&nbsp;<span class="ident" id="4880315">u</span>&nbsp;<span class="op" id="4880317">!=</span>&nbsp;<span class="ident" id="4880320">nil</span>&nbsp;<span class="op" id="4880324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880328">d</span><span class="op" id="4880329">.</span><span class="ident" id="4880330">off</span><span class="op" id="4880333">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880338">err</span>&nbsp;<span class="op" id="4880342">:=</span>&nbsp;<span class="ident" id="4880345">u</span><span class="op" id="4880346">.</span><span class="ident" id="4880347">UnmarshalJSON</span><span class="op" id="4880360">(</span><span class="ident" id="4880361">d</span><span class="op" id="4880362">.</span><span class="ident" id="4880363">next</span><span class="op" id="4880367">(</span><span class="op" id="4880368">)</span><span class="op" id="4880369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880373">if</span>&nbsp;<span class="ident" id="4880376">err</span>&nbsp;<span class="op" id="4880380">!=</span>&nbsp;<span class="ident" id="4880383">nil</span>&nbsp;<span class="op" id="4880387">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880392">d</span><span class="op" id="4880393">.</span><span class="builtintype" id="4880394">error</span><span class="op" id="4880399">(</span><span class="ident" id="4880400">err</span><span class="op" id="4880403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880411">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880422">if</span>&nbsp;<span class="ident" id="4880425">ut</span>&nbsp;<span class="op" id="4880428">!=</span>&nbsp;<span class="ident" id="4880431">nil</span>&nbsp;<span class="op" id="4880435">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880439">d</span><span class="op" id="4880440">.</span><span class="ident" id="4880441">saveError</span><span class="op" id="4880450">(</span><span class="op" id="4880451">&amp;</span><span class="ident" id="4880452">UnmarshalTypeError</span><span class="op" id="4880470">{</span><span class="string" id="4880471">&#34;array&#34;</span><span class="op" id="4880478">,</span>&nbsp;<span class="ident" id="4880480">v</span><span class="op" id="4880481">.</span><span class="ident" id="4880482">Type</span><span class="op" id="4880486">(</span><span class="op" id="4880487">)</span><span class="op" id="4880488">}</span><span class="op" id="4880489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880493">d</span><span class="op" id="4880494">.</span><span class="ident" id="4880495">off</span><span class="op" id="4880498">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880503">d</span><span class="op" id="4880504">.</span><span class="ident" id="4880505">next</span><span class="op" id="4880509">(</span><span class="op" id="4880510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880514">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880522">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880526">v</span>&nbsp;<span class="op" id="4880528">=</span>&nbsp;<span class="ident" id="4880530">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4880535">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880561">switch</span>&nbsp;<span class="ident" id="4880568">v</span><span class="op" id="4880569">.</span><span class="ident" id="4880570">Kind</span><span class="op" id="4880574">(</span><span class="op" id="4880575">)</span>&nbsp;<span class="op" id="4880577">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880580">case</span>&nbsp;<span class="ident" id="4880585">reflect</span><span class="op" id="4880592">.</span><span class="ident" id="4880593">Interface</span><span class="op" id="4880602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880606">if</span>&nbsp;<span class="ident" id="4880609">v</span><span class="op" id="4880610">.</span><span class="ident" id="4880611">NumMethod</span><span class="op" id="4880620">(</span><span class="op" id="4880621">)</span>&nbsp;<span class="op" id="4880623">==</span>&nbsp;<span class="num" id="4880626">0</span>&nbsp;<span class="op" id="4880628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4880633">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880697">v</span><span class="op" id="4880698">.</span><span class="ident" id="4880699">Set</span><span class="op" id="4880702">(</span><span class="ident" id="4880703">reflect</span><span class="op" id="4880710">.</span><span class="ident" id="4880711">ValueOf</span><span class="op" id="4880718">(</span><span class="ident" id="4880719">d</span><span class="op" id="4880720">.</span><span class="ident" id="4880721">arrayInterface</span><span class="op" id="4880735">(</span><span class="op" id="4880736">)</span><span class="op" id="4880737">)</span><span class="op" id="4880738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880743">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4880756">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880785">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880798">default</span><span class="op" id="4880805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880809">d</span><span class="op" id="4880810">.</span><span class="ident" id="4880811">saveError</span><span class="op" id="4880820">(</span><span class="op" id="4880821">&amp;</span><span class="ident" id="4880822">UnmarshalTypeError</span><span class="op" id="4880840">{</span><span class="string" id="4880841">&#34;array&#34;</span><span class="op" id="4880848">,</span>&nbsp;<span class="ident" id="4880850">v</span><span class="op" id="4880851">.</span><span class="ident" id="4880852">Type</span><span class="op" id="4880856">(</span><span class="op" id="4880857">)</span><span class="op" id="4880858">}</span><span class="op" id="4880859">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880863">d</span><span class="op" id="4880864">.</span><span class="ident" id="4880865">off</span><span class="op" id="4880868">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880873">d</span><span class="op" id="4880874">.</span><span class="ident" id="4880875">next</span><span class="op" id="4880879">(</span><span class="op" id="4880880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880884">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880892">case</span>&nbsp;<span class="ident" id="4880897">reflect</span><span class="op" id="4880904">.</span><span class="ident" id="4880905">Array</span><span class="op" id="4880910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880913">case</span>&nbsp;<span class="ident" id="4880918">reflect</span><span class="op" id="4880925">.</span><span class="ident" id="4880926">Slice</span><span class="op" id="4880931">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880935">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880946">i</span>&nbsp;<span class="op" id="4880948">:=</span>&nbsp;<span class="num" id="4880951">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880954">for</span>&nbsp;<span class="op" id="4880958">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4880962">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881022">op</span>&nbsp;<span class="op" id="4881025">:=</span>&nbsp;<span class="ident" id="4881028">d</span><span class="op" id="4881029">.</span><span class="ident" id="4881030">scanWhile</span><span class="op" id="4881039">(</span><span class="ident" id="4881040">scanSkipSpace</span><span class="op" id="4881053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881057">if</span>&nbsp;<span class="ident" id="4881060">op</span>&nbsp;<span class="op" id="4881063">==</span>&nbsp;<span class="ident" id="4881066">scanEndArray</span>&nbsp;<span class="op" id="4881079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881084">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881092">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881097">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881153">d</span><span class="op" id="4881154">.</span><span class="ident" id="4881155">off</span><span class="op" id="4881158">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881163">d</span><span class="op" id="4881164">.</span><span class="ident" id="4881165">scan</span><span class="op" id="4881169">.</span><span class="ident" id="4881170">undo</span><span class="op" id="4881174">(</span><span class="ident" id="4881175">op</span><span class="op" id="4881177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881182">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881231">if</span>&nbsp;<span class="ident" id="4881234">v</span><span class="op" id="4881235">.</span><span class="ident" id="4881236">Kind</span><span class="op" id="4881240">(</span><span class="op" id="4881241">)</span>&nbsp;<span class="op" id="4881243">==</span>&nbsp;<span class="ident" id="4881246">reflect</span><span class="op" id="4881253">.</span><span class="ident" id="4881254">Slice</span>&nbsp;<span class="op" id="4881260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881265">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881295">if</span>&nbsp;<span class="ident" id="4881298">i</span>&nbsp;<span class="op" id="4881300">&gt;=</span>&nbsp;<span class="ident" id="4881303">v</span><span class="op" id="4881304">.</span><span class="ident" id="4881305">Cap</span><span class="op" id="4881308">(</span><span class="op" id="4881309">)</span>&nbsp;<span class="op" id="4881311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881317">newcap</span>&nbsp;<span class="op" id="4881324">:=</span>&nbsp;<span class="ident" id="4881327">v</span><span class="op" id="4881328">.</span><span class="ident" id="4881329">Cap</span><span class="op" id="4881332">(</span><span class="op" id="4881333">)</span>&nbsp;<span class="op" id="4881335">+</span>&nbsp;<span class="ident" id="4881337">v</span><span class="op" id="4881338">.</span><span class="ident" id="4881339">Cap</span><span class="op" id="4881342">(</span><span class="op" id="4881343">)</span><span class="op" id="4881344">/</span><span class="num" id="4881345">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881351">if</span>&nbsp;<span class="ident" id="4881354">newcap</span>&nbsp;<span class="op" id="4881361">&lt;</span>&nbsp;<span class="num" id="4881363">4</span>&nbsp;<span class="op" id="4881365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881372">newcap</span>&nbsp;<span class="op" id="4881379">=</span>&nbsp;<span class="num" id="4881381">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881393">newv</span>&nbsp;<span class="op" id="4881398">:=</span>&nbsp;<span class="ident" id="4881401">reflect</span><span class="op" id="4881408">.</span><span class="ident" id="4881409">MakeSlice</span><span class="op" id="4881418">(</span><span class="ident" id="4881419">v</span><span class="op" id="4881420">.</span><span class="ident" id="4881421">Type</span><span class="op" id="4881425">(</span><span class="op" id="4881426">)</span><span class="op" id="4881427">,</span>&nbsp;<span class="ident" id="4881429">v</span><span class="op" id="4881430">.</span><span class="ident" id="4881431">Len</span><span class="op" id="4881434">(</span><span class="op" id="4881435">)</span><span class="op" id="4881436">,</span>&nbsp;<span class="ident" id="4881438">newcap</span><span class="op" id="4881444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881450">reflect</span><span class="op" id="4881457">.</span><span class="ident" id="4881458">Copy</span><span class="op" id="4881462">(</span><span class="ident" id="4881463">newv</span><span class="op" id="4881467">,</span>&nbsp;<span class="ident" id="4881469">v</span><span class="op" id="4881470">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881476">v</span><span class="op" id="4881477">.</span><span class="ident" id="4881478">Set</span><span class="op" id="4881481">(</span><span class="ident" id="4881482">newv</span><span class="op" id="4881486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881496">if</span>&nbsp;<span class="ident" id="4881499">i</span>&nbsp;<span class="op" id="4881501">&gt;=</span>&nbsp;<span class="ident" id="4881504">v</span><span class="op" id="4881505">.</span><span class="ident" id="4881506">Len</span><span class="op" id="4881509">(</span><span class="op" id="4881510">)</span>&nbsp;<span class="op" id="4881512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881518">v</span><span class="op" id="4881519">.</span><span class="ident" id="4881520">SetLen</span><span class="op" id="4881526">(</span><span class="ident" id="4881527">i</span>&nbsp;<span class="op" id="4881529">+</span>&nbsp;<span class="num" id="4881531">1</span><span class="op" id="4881532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881537">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881546">if</span>&nbsp;<span class="ident" id="4881549">i</span>&nbsp;<span class="op" id="4881551">&lt;</span>&nbsp;<span class="ident" id="4881553">v</span><span class="op" id="4881554">.</span><span class="ident" id="4881555">Len</span><span class="op" id="4881558">(</span><span class="op" id="4881559">)</span>&nbsp;<span class="op" id="4881561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881566">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881593">d</span><span class="op" id="4881594">.</span><span class="ident" id="4881595">value</span><span class="op" id="4881600">(</span><span class="ident" id="4881601">v</span><span class="op" id="4881602">.</span><span class="ident" id="4881603">Index</span><span class="op" id="4881608">(</span><span class="ident" id="4881609">i</span><span class="op" id="4881610">)</span><span class="op" id="4881611">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881615">}</span>&nbsp;<span class="keyword" id="4881617">else</span>&nbsp;<span class="op" id="4881622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881627">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881663">d</span><span class="op" id="4881664">.</span><span class="ident" id="4881665">value</span><span class="op" id="4881670">(</span><span class="ident" id="4881671">reflect</span><span class="op" id="4881678">.</span><span class="ident" id="4881679">Value</span><span class="op" id="4881684">{</span><span class="op" id="4881685">}</span><span class="op" id="4881686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881694">i</span><span class="op" id="4881695">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881701">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881733">op</span>&nbsp;<span class="op" id="4881736">=</span>&nbsp;<span class="ident" id="4881738">d</span><span class="op" id="4881739">.</span><span class="ident" id="4881740">scanWhile</span><span class="op" id="4881749">(</span><span class="ident" id="4881750">scanSkipSpace</span><span class="op" id="4881763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881767">if</span>&nbsp;<span class="ident" id="4881770">op</span>&nbsp;<span class="op" id="4881773">==</span>&nbsp;<span class="ident" id="4881776">scanEndArray</span>&nbsp;<span class="op" id="4881789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881794">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881806">if</span>&nbsp;<span class="ident" id="4881809">op</span>&nbsp;<span class="op" id="4881812">!=</span>&nbsp;<span class="ident" id="4881815">scanArrayValue</span>&nbsp;<span class="op" id="4881830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881835">d</span><span class="op" id="4881836">.</span><span class="builtintype" id="4881837">error</span><span class="op" id="4881842">(</span><span class="ident" id="4881843">errPhase</span><span class="op" id="4881851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881858">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881862">if</span>&nbsp;<span class="ident" id="4881865">i</span>&nbsp;<span class="op" id="4881867">&lt;</span>&nbsp;<span class="ident" id="4881869">v</span><span class="op" id="4881870">.</span><span class="ident" id="4881871">Len</span><span class="op" id="4881874">(</span><span class="op" id="4881875">)</span>&nbsp;<span class="op" id="4881877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881881">if</span>&nbsp;<span class="ident" id="4881884">v</span><span class="op" id="4881885">.</span><span class="ident" id="4881886">Kind</span><span class="op" id="4881890">(</span><span class="op" id="4881891">)</span>&nbsp;<span class="op" id="4881893">==</span>&nbsp;<span class="ident" id="4881896">reflect</span><span class="op" id="4881903">.</span><span class="ident" id="4881904">Array</span>&nbsp;<span class="op" id="4881910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4881915">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881944">z</span>&nbsp;<span class="op" id="4881946">:=</span>&nbsp;<span class="ident" id="4881949">reflect</span><span class="op" id="4881956">.</span><span class="ident" id="4881957">Zero</span><span class="op" id="4881961">(</span><span class="ident" id="4881962">v</span><span class="op" id="4881963">.</span><span class="ident" id="4881964">Type</span><span class="op" id="4881968">(</span><span class="op" id="4881969">)</span><span class="op" id="4881970">.</span><span class="ident" id="4881971">Elem</span><span class="op" id="4881975">(</span><span class="op" id="4881976">)</span><span class="op" id="4881977">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881982">for</span>&nbsp;<span class="op" id="4881986">;</span>&nbsp;<span class="ident" id="4881988">i</span>&nbsp;<span class="op" id="4881990">&lt;</span>&nbsp;<span class="ident" id="4881992">v</span><span class="op" id="4881993">.</span><span class="ident" id="4881994">Len</span><span class="op" id="4881997">(</span><span class="op" id="4881998">)</span><span class="op" id="4881999">;</span>&nbsp;<span class="ident" id="4882001">i</span><span class="op" id="4882002">++</span>&nbsp;<span class="op" id="4882005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882011">v</span><span class="op" id="4882012">.</span><span class="ident" id="4882013">Index</span><span class="op" id="4882018">(</span><span class="ident" id="4882019">i</span><span class="op" id="4882020">)</span><span class="op" id="4882021">.</span><span class="ident" id="4882022">Set</span><span class="op" id="4882025">(</span><span class="ident" id="4882026">z</span><span class="op" id="4882027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882036">}</span>&nbsp;<span class="keyword" id="4882038">else</span>&nbsp;<span class="op" id="4882043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882048">v</span><span class="op" id="4882049">.</span><span class="ident" id="4882050">SetLen</span><span class="op" id="4882056">(</span><span class="ident" id="4882057">i</span><span class="op" id="4882058">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882068">if</span>&nbsp;<span class="ident" id="4882071">i</span>&nbsp;<span class="op" id="4882073">==</span>&nbsp;<span class="num" id="4882076">0</span>&nbsp;<span class="op" id="4882078">&amp;&amp;</span>&nbsp;<span class="ident" id="4882081">v</span><span class="op" id="4882082">.</span><span class="ident" id="4882083">Kind</span><span class="op" id="4882087">(</span><span class="op" id="4882088">)</span>&nbsp;<span class="op" id="4882090">==</span>&nbsp;<span class="ident" id="4882093">reflect</span><span class="op" id="4882100">.</span><span class="ident" id="4882101">Slice</span>&nbsp;<span class="op" id="4882107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882111">v</span><span class="op" id="4882112">.</span><span class="ident" id="4882113">Set</span><span class="op" id="4882116">(</span><span class="ident" id="4882117">reflect</span><span class="op" id="4882124">.</span><span class="ident" id="4882125">MakeSlice</span><span class="op" id="4882134">(</span><span class="ident" id="4882135">v</span><span class="op" id="4882136">.</span><span class="ident" id="4882137">Type</span><span class="op" id="4882141">(</span><span class="op" id="4882142">)</span><span class="op" id="4882143">,</span>&nbsp;<span class="num" id="4882145">0</span><span class="op" id="4882146">,</span>&nbsp;<span class="num" id="4882148">0</span><span class="op" id="4882149">)</span><span class="op" id="4882150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882153">}</span><br>
<span class="lineno">470</span><span class="op" id="4882155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4882158">var</span>&nbsp;<span class="ident" id="4882162">nullLiteral</span>&nbsp;<span class="op" id="4882174">=</span>&nbsp;<span class="op" id="4882176">[</span><span class="op" id="4882177">]</span><span class="builtintype" id="4882178">byte</span><span class="op" id="4882182">(</span><span class="string" id="4882183">&#34;null&#34;</span><span class="op" id="4882189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4882192">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="4882271">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="4882332">func</span>&nbsp;<span class="op" id="4882337">(</span><span class="ident" id="4882338">d</span>&nbsp;<span class="op" id="4882340">*</span><span class="ident" id="4882341">decodeState</span><span class="op" id="4882352">)</span>&nbsp;<span class="ident" id="4882354">object</span><span class="op" id="4882360">(</span><span class="ident" id="4882361">v</span>&nbsp;<span class="ident" id="4882363">reflect</span><span class="op" id="4882370">.</span><span class="ident" id="4882371">Value</span><span class="op" id="4882376">)</span>&nbsp;<span class="op" id="4882378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882381">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882408">u</span><span class="op" id="4882409">,</span>&nbsp;<span class="ident" id="4882411">ut</span><span class="op" id="4882413">,</span>&nbsp;<span class="ident" id="4882415">pv</span>&nbsp;<span class="op" id="4882418">:=</span>&nbsp;<span class="ident" id="4882421">d</span><span class="op" id="4882422">.</span><span class="ident" id="4882423">indirect</span><span class="op" id="4882431">(</span><span class="ident" id="4882432">v</span><span class="op" id="4882433">,</span>&nbsp;<span class="builtintype" id="4882435">false</span><span class="op" id="4882440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882443">if</span>&nbsp;<span class="ident" id="4882446">u</span>&nbsp;<span class="op" id="4882448">!=</span>&nbsp;<span class="ident" id="4882451">nil</span>&nbsp;<span class="op" id="4882455">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882459">d</span><span class="op" id="4882460">.</span><span class="ident" id="4882461">off</span><span class="op" id="4882464">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882469">err</span>&nbsp;<span class="op" id="4882473">:=</span>&nbsp;<span class="ident" id="4882476">u</span><span class="op" id="4882477">.</span><span class="ident" id="4882478">UnmarshalJSON</span><span class="op" id="4882491">(</span><span class="ident" id="4882492">d</span><span class="op" id="4882493">.</span><span class="ident" id="4882494">next</span><span class="op" id="4882498">(</span><span class="op" id="4882499">)</span><span class="op" id="4882500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882504">if</span>&nbsp;<span class="ident" id="4882507">err</span>&nbsp;<span class="op" id="4882511">!=</span>&nbsp;<span class="ident" id="4882514">nil</span>&nbsp;<span class="op" id="4882518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882523">d</span><span class="op" id="4882524">.</span><span class="builtintype" id="4882525">error</span><span class="op" id="4882530">(</span><span class="ident" id="4882531">err</span><span class="op" id="4882534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882538">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882542">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882553">if</span>&nbsp;<span class="ident" id="4882556">ut</span>&nbsp;<span class="op" id="4882559">!=</span>&nbsp;<span class="ident" id="4882562">nil</span>&nbsp;<span class="op" id="4882566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882570">d</span><span class="op" id="4882571">.</span><span class="ident" id="4882572">saveError</span><span class="op" id="4882581">(</span><span class="op" id="4882582">&amp;</span><span class="ident" id="4882583">UnmarshalTypeError</span><span class="op" id="4882601">{</span><span class="string" id="4882602">&#34;object&#34;</span><span class="op" id="4882610">,</span>&nbsp;<span class="ident" id="4882612">v</span><span class="op" id="4882613">.</span><span class="ident" id="4882614">Type</span><span class="op" id="4882618">(</span><span class="op" id="4882619">)</span><span class="op" id="4882620">}</span><span class="op" id="4882621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882625">d</span><span class="op" id="4882626">.</span><span class="ident" id="4882627">off</span><span class="op" id="4882630">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882635">d</span><span class="op" id="4882636">.</span><span class="ident" id="4882637">next</span><span class="op" id="4882641">(</span><span class="op" id="4882642">)</span>&nbsp;<span class="comment" id="4882644">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882672">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882683">v</span>&nbsp;<span class="op" id="4882685">=</span>&nbsp;<span class="ident" id="4882687">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882692">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882754">if</span>&nbsp;<span class="ident" id="4882757">v</span><span class="op" id="4882758">.</span><span class="ident" id="4882759">Kind</span><span class="op" id="4882763">(</span><span class="op" id="4882764">)</span>&nbsp;<span class="op" id="4882766">==</span>&nbsp;<span class="ident" id="4882769">reflect</span><span class="op" id="4882776">.</span><span class="ident" id="4882777">Interface</span>&nbsp;<span class="op" id="4882787">&amp;&amp;</span>&nbsp;<span class="ident" id="4882790">v</span><span class="op" id="4882791">.</span><span class="ident" id="4882792">NumMethod</span><span class="op" id="4882801">(</span><span class="op" id="4882802">)</span>&nbsp;<span class="op" id="4882804">==</span>&nbsp;<span class="num" id="4882807">0</span>&nbsp;<span class="op" id="4882809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882813">v</span><span class="op" id="4882814">.</span><span class="ident" id="4882815">Set</span><span class="op" id="4882818">(</span><span class="ident" id="4882819">reflect</span><span class="op" id="4882826">.</span><span class="ident" id="4882827">ValueOf</span><span class="op" id="4882834">(</span><span class="ident" id="4882835">d</span><span class="op" id="4882836">.</span><span class="ident" id="4882837">objectInterface</span><span class="op" id="4882852">(</span><span class="op" id="4882853">)</span><span class="op" id="4882854">)</span><span class="op" id="4882855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882859">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4882867">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882871">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882920">switch</span>&nbsp;<span class="ident" id="4882927">v</span><span class="op" id="4882928">.</span><span class="ident" id="4882929">Kind</span><span class="op" id="4882933">(</span><span class="op" id="4882934">)</span>&nbsp;<span class="op" id="4882936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4882939">case</span>&nbsp;<span class="ident" id="4882944">reflect</span><span class="op" id="4882951">.</span><span class="ident" id="4882952">Map</span><span class="op" id="4882955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4882959">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4882990">t</span>&nbsp;<span class="op" id="4882992">:=</span>&nbsp;<span class="ident" id="4882995">v</span><span class="op" id="4882996">.</span><span class="ident" id="4882997">Type</span><span class="op" id="4883001">(</span><span class="op" id="4883002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883006">if</span>&nbsp;<span class="ident" id="4883009">t</span><span class="op" id="4883010">.</span><span class="ident" id="4883011">Key</span><span class="op" id="4883014">(</span><span class="op" id="4883015">)</span><span class="op" id="4883016">.</span><span class="ident" id="4883017">Kind</span><span class="op" id="4883021">(</span><span class="op" id="4883022">)</span>&nbsp;<span class="op" id="4883024">!=</span>&nbsp;<span class="ident" id="4883027">reflect</span><span class="op" id="4883034">.</span><span class="ident" id="4883035">String</span>&nbsp;<span class="op" id="4883042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883047">d</span><span class="op" id="4883048">.</span><span class="ident" id="4883049">saveError</span><span class="op" id="4883058">(</span><span class="op" id="4883059">&amp;</span><span class="ident" id="4883060">UnmarshalTypeError</span><span class="op" id="4883078">{</span><span class="string" id="4883079">&#34;object&#34;</span><span class="op" id="4883087">,</span>&nbsp;<span class="ident" id="4883089">v</span><span class="op" id="4883090">.</span><span class="ident" id="4883091">Type</span><span class="op" id="4883095">(</span><span class="op" id="4883096">)</span><span class="op" id="4883097">}</span><span class="op" id="4883098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883103">d</span><span class="op" id="4883104">.</span><span class="ident" id="4883105">off</span><span class="op" id="4883108">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883114">d</span><span class="op" id="4883115">.</span><span class="ident" id="4883116">next</span><span class="op" id="4883120">(</span><span class="op" id="4883121">)</span>&nbsp;<span class="comment" id="4883123">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883152">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883165">if</span>&nbsp;<span class="ident" id="4883168">v</span><span class="op" id="4883169">.</span><span class="ident" id="4883170">IsNil</span><span class="op" id="4883175">(</span><span class="op" id="4883176">)</span>&nbsp;<span class="op" id="4883178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883183">v</span><span class="op" id="4883184">.</span><span class="ident" id="4883185">Set</span><span class="op" id="4883188">(</span><span class="ident" id="4883189">reflect</span><span class="op" id="4883196">.</span><span class="ident" id="4883197">MakeMap</span><span class="op" id="4883204">(</span><span class="ident" id="4883205">t</span><span class="op" id="4883206">)</span><span class="op" id="4883207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883211">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883214">case</span>&nbsp;<span class="ident" id="4883219">reflect</span><span class="op" id="4883226">.</span><span class="ident" id="4883227">Struct</span><span class="op" id="4883233">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883237">default</span><span class="op" id="4883244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883248">d</span><span class="op" id="4883249">.</span><span class="ident" id="4883250">saveError</span><span class="op" id="4883259">(</span><span class="op" id="4883260">&amp;</span><span class="ident" id="4883261">UnmarshalTypeError</span><span class="op" id="4883279">{</span><span class="string" id="4883280">&#34;object&#34;</span><span class="op" id="4883288">,</span>&nbsp;<span class="ident" id="4883290">v</span><span class="op" id="4883291">.</span><span class="ident" id="4883292">Type</span><span class="op" id="4883296">(</span><span class="op" id="4883297">)</span><span class="op" id="4883298">}</span><span class="op" id="4883299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883303">d</span><span class="op" id="4883304">.</span><span class="ident" id="4883305">off</span><span class="op" id="4883308">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883313">d</span><span class="op" id="4883314">.</span><span class="ident" id="4883315">next</span><span class="op" id="4883319">(</span><span class="op" id="4883320">)</span>&nbsp;<span class="comment" id="4883322">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883350">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883362">var</span>&nbsp;<span class="ident" id="4883366">mapElem</span>&nbsp;<span class="ident" id="4883374">reflect</span><span class="op" id="4883381">.</span><span class="ident" id="4883382">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883390">for</span>&nbsp;<span class="op" id="4883394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4883398">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883446">op</span>&nbsp;<span class="op" id="4883449">:=</span>&nbsp;<span class="ident" id="4883452">d</span><span class="op" id="4883453">.</span><span class="ident" id="4883454">scanWhile</span><span class="op" id="4883463">(</span><span class="ident" id="4883464">scanSkipSpace</span><span class="op" id="4883477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883481">if</span>&nbsp;<span class="ident" id="4883484">op</span>&nbsp;<span class="op" id="4883487">==</span>&nbsp;<span class="ident" id="4883490">scanEndObject</span>&nbsp;<span class="op" id="4883504">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4883509">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883575">if</span>&nbsp;<span class="ident" id="4883578">op</span>&nbsp;<span class="op" id="4883581">!=</span>&nbsp;<span class="ident" id="4883584">scanBeginLiteral</span>&nbsp;<span class="op" id="4883601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883606">d</span><span class="op" id="4883607">.</span><span class="builtintype" id="4883608">error</span><span class="op" id="4883613">(</span><span class="ident" id="4883614">errPhase</span><span class="op" id="4883622">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4883631">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883646">start</span>&nbsp;<span class="op" id="4883652">:=</span>&nbsp;<span class="ident" id="4883655">d</span><span class="op" id="4883656">.</span><span class="ident" id="4883657">off</span>&nbsp;<span class="op" id="4883661">-</span>&nbsp;<span class="num" id="4883663">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883667">op</span>&nbsp;<span class="op" id="4883670">=</span>&nbsp;<span class="ident" id="4883672">d</span><span class="op" id="4883673">.</span><span class="ident" id="4883674">scanWhile</span><span class="op" id="4883683">(</span><span class="ident" id="4883684">scanContinue</span><span class="op" id="4883696">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883700">item</span>&nbsp;<span class="op" id="4883705">:=</span>&nbsp;<span class="ident" id="4883708">d</span><span class="op" id="4883709">.</span><span class="ident" id="4883710">data</span><span class="op" id="4883714">[</span><span class="ident" id="4883715">start</span>&nbsp;<span class="op" id="4883721">:</span>&nbsp;<span class="ident" id="4883723">d</span><span class="op" id="4883724">.</span><span class="ident" id="4883725">off</span><span class="op" id="4883728">-</span><span class="num" id="4883729">1</span><span class="op" id="4883730">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883734">key</span><span class="op" id="4883737">,</span>&nbsp;<span class="ident" id="4883739">ok</span>&nbsp;<span class="op" id="4883742">:=</span>&nbsp;<span class="ident" id="4883745">unquoteBytes</span><span class="op" id="4883757">(</span><span class="ident" id="4883758">item</span><span class="op" id="4883762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883766">if</span>&nbsp;<span class="op" id="4883769">!</span><span class="ident" id="4883770">ok</span>&nbsp;<span class="op" id="4883773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883778">d</span><span class="op" id="4883779">.</span><span class="builtintype" id="4883780">error</span><span class="op" id="4883785">(</span><span class="ident" id="4883786">errPhase</span><span class="op" id="4883794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4883798">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4883803">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883847">var</span>&nbsp;<span class="ident" id="4883851">subv</span>&nbsp;<span class="ident" id="4883856">reflect</span><span class="op" id="4883863">.</span><span class="ident" id="4883864">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883872">destring</span>&nbsp;<span class="op" id="4883881">:=</span>&nbsp;<span class="builtintype" id="4883884">false</span>&nbsp;<span class="comment" id="4883890">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4883957">if</span>&nbsp;<span class="ident" id="4883960">v</span><span class="op" id="4883961">.</span><span class="ident" id="4883962">Kind</span><span class="op" id="4883966">(</span><span class="op" id="4883967">)</span>&nbsp;<span class="op" id="4883969">==</span>&nbsp;<span class="ident" id="4883972">reflect</span><span class="op" id="4883979">.</span><span class="ident" id="4883980">Map</span>&nbsp;<span class="op" id="4883984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4883989">elemType</span>&nbsp;<span class="op" id="4883998">:=</span>&nbsp;<span class="ident" id="4884001">v</span><span class="op" id="4884002">.</span><span class="ident" id="4884003">Type</span><span class="op" id="4884007">(</span><span class="op" id="4884008">)</span><span class="op" id="4884009">.</span><span class="ident" id="4884010">Elem</span><span class="op" id="4884014">(</span><span class="op" id="4884015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884020">if</span>&nbsp;<span class="op" id="4884023">!</span><span class="ident" id="4884024">mapElem</span><span class="op" id="4884031">.</span><span class="ident" id="4884032">IsValid</span><span class="op" id="4884039">(</span><span class="op" id="4884040">)</span>&nbsp;<span class="op" id="4884042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884048">mapElem</span>&nbsp;<span class="op" id="4884056">=</span>&nbsp;<span class="ident" id="4884058">reflect</span><span class="op" id="4884065">.</span><span class="ident" id="4884066">New</span><span class="op" id="4884069">(</span><span class="ident" id="4884070">elemType</span><span class="op" id="4884078">)</span><span class="op" id="4884079">.</span><span class="ident" id="4884080">Elem</span><span class="op" id="4884084">(</span><span class="op" id="4884085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884090">}</span>&nbsp;<span class="keyword" id="4884092">else</span>&nbsp;<span class="op" id="4884097">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884103">mapElem</span><span class="op" id="4884110">.</span><span class="ident" id="4884111">Set</span><span class="op" id="4884114">(</span><span class="ident" id="4884115">reflect</span><span class="op" id="4884122">.</span><span class="ident" id="4884123">Zero</span><span class="op" id="4884127">(</span><span class="ident" id="4884128">elemType</span><span class="op" id="4884136">)</span><span class="op" id="4884137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884147">subv</span>&nbsp;<span class="op" id="4884152">=</span>&nbsp;<span class="ident" id="4884154">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884164">}</span>&nbsp;<span class="keyword" id="4884166">else</span>&nbsp;<span class="op" id="4884171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884176">var</span>&nbsp;<span class="ident" id="4884180">f</span>&nbsp;<span class="op" id="4884182">*</span><span class="ident" id="4884183">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884192">fields</span>&nbsp;<span class="op" id="4884199">:=</span>&nbsp;<span class="ident" id="4884202">cachedTypeFields</span><span class="op" id="4884218">(</span><span class="ident" id="4884219">v</span><span class="op" id="4884220">.</span><span class="ident" id="4884221">Type</span><span class="op" id="4884225">(</span><span class="op" id="4884226">)</span><span class="op" id="4884227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884232">for</span>&nbsp;<span class="ident" id="4884236">i</span>&nbsp;<span class="op" id="4884238">:=</span>&nbsp;<span class="keyword" id="4884241">range</span>&nbsp;<span class="ident" id="4884247">fields</span>&nbsp;<span class="op" id="4884254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884260">ff</span>&nbsp;<span class="op" id="4884263">:=</span>&nbsp;<span class="op" id="4884266">&amp;</span><span class="ident" id="4884267">fields</span><span class="op" id="4884273">[</span><span class="ident" id="4884274">i</span><span class="op" id="4884275">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884281">if</span>&nbsp;<span class="ident" id="4884284">bytes</span><span class="op" id="4884289">.</span><span class="ident" id="4884290">Equal</span><span class="op" id="4884295">(</span><span class="ident" id="4884296">ff</span><span class="op" id="4884298">.</span><span class="ident" id="4884299">nameBytes</span><span class="op" id="4884308">,</span>&nbsp;<span class="ident" id="4884310">key</span><span class="op" id="4884313">)</span>&nbsp;<span class="op" id="4884315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884322">f</span>&nbsp;<span class="op" id="4884324">=</span>&nbsp;<span class="ident" id="4884326">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884334">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884350">if</span>&nbsp;<span class="ident" id="4884353">f</span>&nbsp;<span class="op" id="4884355">==</span>&nbsp;<span class="ident" id="4884358">nil</span>&nbsp;<span class="op" id="4884362">&amp;&amp;</span>&nbsp;<span class="ident" id="4884365">ff</span><span class="op" id="4884367">.</span><span class="ident" id="4884368">equalFold</span><span class="op" id="4884377">(</span><span class="ident" id="4884378">ff</span><span class="op" id="4884380">.</span><span class="ident" id="4884381">nameBytes</span><span class="op" id="4884390">,</span>&nbsp;<span class="ident" id="4884392">key</span><span class="op" id="4884395">)</span>&nbsp;<span class="op" id="4884397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884404">f</span>&nbsp;<span class="op" id="4884406">=</span>&nbsp;<span class="ident" id="4884408">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884415">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884425">if</span>&nbsp;<span class="ident" id="4884428">f</span>&nbsp;<span class="op" id="4884430">!=</span>&nbsp;<span class="ident" id="4884433">nil</span>&nbsp;<span class="op" id="4884437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884443">subv</span>&nbsp;<span class="op" id="4884448">=</span>&nbsp;<span class="ident" id="4884450">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884456">destring</span>&nbsp;<span class="op" id="4884465">=</span>&nbsp;<span class="ident" id="4884467">f</span><span class="op" id="4884468">.</span><span class="ident" id="4884469">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884480">for</span>&nbsp;<span class="ident" id="4884484">_</span><span class="op" id="4884485">,</span>&nbsp;<span class="ident" id="4884487">i</span>&nbsp;<span class="op" id="4884489">:=</span>&nbsp;<span class="keyword" id="4884492">range</span>&nbsp;<span class="ident" id="4884498">f</span><span class="op" id="4884499">.</span><span class="ident" id="4884500">index</span>&nbsp;<span class="op" id="4884506">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884513">if</span>&nbsp;<span class="ident" id="4884516">subv</span><span class="op" id="4884520">.</span><span class="ident" id="4884521">Kind</span><span class="op" id="4884525">(</span><span class="op" id="4884526">)</span>&nbsp;<span class="op" id="4884528">==</span>&nbsp;<span class="ident" id="4884531">reflect</span><span class="op" id="4884538">.</span><span class="ident" id="4884539">Ptr</span>&nbsp;<span class="op" id="4884543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884551">if</span>&nbsp;<span class="ident" id="4884554">subv</span><span class="op" id="4884558">.</span><span class="ident" id="4884559">IsNil</span><span class="op" id="4884564">(</span><span class="op" id="4884565">)</span>&nbsp;<span class="op" id="4884567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884576">subv</span><span class="op" id="4884580">.</span><span class="ident" id="4884581">Set</span><span class="op" id="4884584">(</span><span class="ident" id="4884585">reflect</span><span class="op" id="4884592">.</span><span class="ident" id="4884593">New</span><span class="op" id="4884596">(</span><span class="ident" id="4884597">subv</span><span class="op" id="4884601">.</span><span class="ident" id="4884602">Type</span><span class="op" id="4884606">(</span><span class="op" id="4884607">)</span><span class="op" id="4884608">.</span><span class="ident" id="4884609">Elem</span><span class="op" id="4884613">(</span><span class="op" id="4884614">)</span><span class="op" id="4884615">)</span><span class="op" id="4884616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884632">subv</span>&nbsp;<span class="op" id="4884637">=</span>&nbsp;<span class="ident" id="4884639">subv</span><span class="op" id="4884643">.</span><span class="ident" id="4884644">Elem</span><span class="op" id="4884648">(</span><span class="op" id="4884649">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884663">subv</span>&nbsp;<span class="op" id="4884668">=</span>&nbsp;<span class="ident" id="4884670">subv</span><span class="op" id="4884674">.</span><span class="ident" id="4884675">Field</span><span class="op" id="4884680">(</span><span class="ident" id="4884681">i</span><span class="op" id="4884682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884697">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4884702">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884728">if</span>&nbsp;<span class="ident" id="4884731">op</span>&nbsp;<span class="op" id="4884734">==</span>&nbsp;<span class="ident" id="4884737">scanSkipSpace</span>&nbsp;<span class="op" id="4884751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884756">op</span>&nbsp;<span class="op" id="4884759">=</span>&nbsp;<span class="ident" id="4884761">d</span><span class="op" id="4884762">.</span><span class="ident" id="4884763">scanWhile</span><span class="op" id="4884772">(</span><span class="ident" id="4884773">scanSkipSpace</span><span class="op" id="4884786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884790">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884794">if</span>&nbsp;<span class="ident" id="4884797">op</span>&nbsp;<span class="op" id="4884800">!=</span>&nbsp;<span class="ident" id="4884803">scanObjectKey</span>&nbsp;<span class="op" id="4884817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884822">d</span><span class="op" id="4884823">.</span><span class="builtintype" id="4884824">error</span><span class="op" id="4884829">(</span><span class="ident" id="4884830">errPhase</span><span class="op" id="4884838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4884842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4884847">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884864">if</span>&nbsp;<span class="ident" id="4884867">destring</span>&nbsp;<span class="op" id="4884876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884881">switch</span>&nbsp;<span class="ident" id="4884888">qv</span>&nbsp;<span class="op" id="4884891">:=</span>&nbsp;<span class="ident" id="4884894">d</span><span class="op" id="4884895">.</span><span class="ident" id="4884896">valueQuoted</span><span class="op" id="4884907">(</span><span class="op" id="4884908">)</span><span class="op" id="4884909">.</span><span class="op" id="4884910">(</span><span class="keyword" id="4884911">type</span><span class="op" id="4884915">)</span>&nbsp;<span class="op" id="4884917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884922">case</span>&nbsp;<span class="ident" id="4884927">nil</span><span class="op" id="4884930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884936">d</span><span class="op" id="4884937">.</span><span class="ident" id="4884938">literalStore</span><span class="op" id="4884950">(</span><span class="ident" id="4884951">nullLiteral</span><span class="op" id="4884962">,</span>&nbsp;<span class="ident" id="4884964">subv</span><span class="op" id="4884968">,</span>&nbsp;<span class="builtintype" id="4884970">false</span><span class="op" id="4884975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4884980">case</span>&nbsp;<span class="builtintype" id="4884985">string</span><span class="op" id="4884991">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884997">d</span><span class="op" id="4884998">.</span><span class="ident" id="4884999">literalStore</span><span class="op" id="4885011">(</span><span class="op" id="4885012">[</span><span class="op" id="4885013">]</span><span class="builtintype" id="4885014">byte</span><span class="op" id="4885018">(</span><span class="ident" id="4885019">qv</span><span class="op" id="4885021">)</span><span class="op" id="4885022">,</span>&nbsp;<span class="ident" id="4885024">subv</span><span class="op" id="4885028">,</span>&nbsp;<span class="builtintype" id="4885030">true</span><span class="op" id="4885034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885039">default</span><span class="op" id="4885046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885052">d</span><span class="op" id="4885053">.</span><span class="ident" id="4885054">saveError</span><span class="op" id="4885063">(</span><span class="ident" id="4885064">fmt</span><span class="op" id="4885067">.</span><span class="ident" id="4885068">Errorf</span><span class="op" id="4885074">(</span><span class="string" id="4885075">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4885160">,</span>&nbsp;<span class="ident" id="4885162">item</span><span class="op" id="4885166">,</span>&nbsp;<span class="ident" id="4885168">v</span><span class="op" id="4885169">.</span><span class="ident" id="4885170">Type</span><span class="op" id="4885174">(</span><span class="op" id="4885175">)</span><span class="op" id="4885176">)</span><span class="op" id="4885177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885186">}</span>&nbsp;<span class="keyword" id="4885188">else</span>&nbsp;<span class="op" id="4885193">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885198">d</span><span class="op" id="4885199">.</span><span class="ident" id="4885200">value</span><span class="op" id="4885205">(</span><span class="ident" id="4885206">subv</span><span class="op" id="4885210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885219">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885249">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885304">if</span>&nbsp;<span class="ident" id="4885307">v</span><span class="op" id="4885308">.</span><span class="ident" id="4885309">Kind</span><span class="op" id="4885313">(</span><span class="op" id="4885314">)</span>&nbsp;<span class="op" id="4885316">==</span>&nbsp;<span class="ident" id="4885319">reflect</span><span class="op" id="4885326">.</span><span class="ident" id="4885327">Map</span>&nbsp;<span class="op" id="4885331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885336">kv</span>&nbsp;<span class="op" id="4885339">:=</span>&nbsp;<span class="ident" id="4885342">reflect</span><span class="op" id="4885349">.</span><span class="ident" id="4885350">ValueOf</span><span class="op" id="4885357">(</span><span class="ident" id="4885358">key</span><span class="op" id="4885361">)</span><span class="op" id="4885362">.</span><span class="ident" id="4885363">Convert</span><span class="op" id="4885370">(</span><span class="ident" id="4885371">v</span><span class="op" id="4885372">.</span><span class="ident" id="4885373">Type</span><span class="op" id="4885377">(</span><span class="op" id="4885378">)</span><span class="op" id="4885379">.</span><span class="ident" id="4885380">Key</span><span class="op" id="4885383">(</span><span class="op" id="4885384">)</span><span class="op" id="4885385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885390">v</span><span class="op" id="4885391">.</span><span class="ident" id="4885392">SetMapIndex</span><span class="op" id="4885403">(</span><span class="ident" id="4885404">kv</span><span class="op" id="4885406">,</span>&nbsp;<span class="ident" id="4885408">subv</span><span class="op" id="4885412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885421">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885453">op</span>&nbsp;<span class="op" id="4885456">=</span>&nbsp;<span class="ident" id="4885458">d</span><span class="op" id="4885459">.</span><span class="ident" id="4885460">scanWhile</span><span class="op" id="4885469">(</span><span class="ident" id="4885470">scanSkipSpace</span><span class="op" id="4885483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885487">if</span>&nbsp;<span class="ident" id="4885490">op</span>&nbsp;<span class="op" id="4885493">==</span>&nbsp;<span class="ident" id="4885496">scanEndObject</span>&nbsp;<span class="op" id="4885510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885515">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885523">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885527">if</span>&nbsp;<span class="ident" id="4885530">op</span>&nbsp;<span class="op" id="4885533">!=</span>&nbsp;<span class="ident" id="4885536">scanObjectValue</span>&nbsp;<span class="op" id="4885552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885557">d</span><span class="op" id="4885558">.</span><span class="builtintype" id="4885559">error</span><span class="op" id="4885564">(</span><span class="ident" id="4885565">errPhase</span><span class="op" id="4885573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885580">}</span><br>
<span class="lineno"></span><span class="op" id="4885582">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="4885585">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4885665">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4885720">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="4885769">func</span>&nbsp;<span class="op" id="4885774">(</span><span class="ident" id="4885775">d</span>&nbsp;<span class="op" id="4885777">*</span><span class="ident" id="4885778">decodeState</span><span class="op" id="4885789">)</span>&nbsp;<span class="ident" id="4885791">literal</span><span class="op" id="4885798">(</span><span class="ident" id="4885799">v</span>&nbsp;<span class="ident" id="4885801">reflect</span><span class="op" id="4885808">.</span><span class="ident" id="4885809">Value</span><span class="op" id="4885814">)</span>&nbsp;<span class="op" id="4885816">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885819">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885877">start</span>&nbsp;<span class="op" id="4885883">:=</span>&nbsp;<span class="ident" id="4885886">d</span><span class="op" id="4885887">.</span><span class="ident" id="4885888">off</span>&nbsp;<span class="op" id="4885892">-</span>&nbsp;<span class="num" id="4885894">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885897">op</span>&nbsp;<span class="op" id="4885900">:=</span>&nbsp;<span class="ident" id="4885903">d</span><span class="op" id="4885904">.</span><span class="ident" id="4885905">scanWhile</span><span class="op" id="4885914">(</span><span class="ident" id="4885915">scanContinue</span><span class="op" id="4885927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885931">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885972">d</span><span class="op" id="4885973">.</span><span class="ident" id="4885974">off</span><span class="op" id="4885977">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885981">d</span><span class="op" id="4885982">.</span><span class="ident" id="4885983">scan</span><span class="op" id="4885987">.</span><span class="ident" id="4885988">undo</span><span class="op" id="4885992">(</span><span class="ident" id="4885993">op</span><span class="op" id="4885995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885999">d</span><span class="op" id="4886000">.</span><span class="ident" id="4886001">literalStore</span><span class="op" id="4886013">(</span><span class="ident" id="4886014">d</span><span class="op" id="4886015">.</span><span class="ident" id="4886016">data</span><span class="op" id="4886020">[</span><span class="ident" id="4886021">start</span><span class="op" id="4886026">:</span><span class="ident" id="4886027">d</span><span class="op" id="4886028">.</span><span class="ident" id="4886029">off</span><span class="op" id="4886032">]</span><span class="op" id="4886033">,</span>&nbsp;<span class="ident" id="4886035">v</span><span class="op" id="4886036">,</span>&nbsp;<span class="builtintype" id="4886038">false</span><span class="op" id="4886043">)</span><br>
<span class="lineno"></span><span class="op" id="4886045">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="4886048">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="4886120">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="4886164">func</span>&nbsp;<span class="op" id="4886169">(</span><span class="ident" id="4886170">d</span>&nbsp;<span class="op" id="4886172">*</span><span class="ident" id="4886173">decodeState</span><span class="op" id="4886184">)</span>&nbsp;<span class="ident" id="4886186">convertNumber</span><span class="op" id="4886199">(</span><span class="ident" id="4886200">s</span>&nbsp;<span class="builtintype" id="4886202">string</span><span class="op" id="4886208">)</span>&nbsp;<span class="op" id="4886210">(</span><span class="keyword" id="4886211">interface</span><span class="op" id="4886220">{</span><span class="op" id="4886221">}</span><span class="op" id="4886222">,</span>&nbsp;<span class="builtintype" id="4886224">error</span><span class="op" id="4886229">)</span>&nbsp;<span class="op" id="4886231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886234">if</span>&nbsp;<span class="ident" id="4886237">d</span><span class="op" id="4886238">.</span><span class="ident" id="4886239">useNumber</span>&nbsp;<span class="op" id="4886249">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886253">return</span>&nbsp;<span class="ident" id="4886260">Number</span><span class="op" id="4886266">(</span><span class="ident" id="4886267">s</span><span class="op" id="4886268">)</span><span class="op" id="4886269">,</span>&nbsp;<span class="ident" id="4886271">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886279">f</span><span class="op" id="4886280">,</span>&nbsp;<span class="ident" id="4886282">err</span>&nbsp;<span class="op" id="4886286">:=</span>&nbsp;<span class="ident" id="4886289">strconv</span><span class="op" id="4886296">.</span><span class="ident" id="4886297">ParseFloat</span><span class="op" id="4886307">(</span><span class="ident" id="4886308">s</span><span class="op" id="4886309">,</span>&nbsp;<span class="num" id="4886311">64</span><span class="op" id="4886313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886316">if</span>&nbsp;<span class="ident" id="4886319">err</span>&nbsp;<span class="op" id="4886323">!=</span>&nbsp;<span class="ident" id="4886326">nil</span>&nbsp;<span class="op" id="4886330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886334">return</span>&nbsp;<span class="ident" id="4886341">nil</span><span class="op" id="4886344">,</span>&nbsp;<span class="op" id="4886346">&amp;</span><span class="ident" id="4886347">UnmarshalTypeError</span><span class="op" id="4886365">{</span><span class="string" id="4886366">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4886376">+</span>&nbsp;<span class="ident" id="4886378">s</span><span class="op" id="4886379">,</span>&nbsp;<span class="ident" id="4886381">reflect</span><span class="op" id="4886388">.</span><span class="ident" id="4886389">TypeOf</span><span class="op" id="4886395">(</span><span class="num" id="4886396">0.0</span><span class="op" id="4886399">)</span><span class="op" id="4886400">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886406">return</span>&nbsp;<span class="ident" id="4886413">f</span><span class="op" id="4886414">,</span>&nbsp;<span class="ident" id="4886416">nil</span><br>
<span class="lineno"></span><span class="op" id="4886420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4886423">var</span>&nbsp;<span class="ident" id="4886427">numberType</span>&nbsp;<span class="op" id="4886438">=</span>&nbsp;<span class="ident" id="4886440">reflect</span><span class="op" id="4886447">.</span><span class="ident" id="4886448">TypeOf</span><span class="op" id="4886454">(</span><span class="ident" id="4886455">Number</span><span class="op" id="4886461">(</span><span class="string" id="4886462">&#34;&#34;</span><span class="op" id="4886464">)</span><span class="op" id="4886465">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="4886468">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4886525">//</span><br>
<span class="lineno"></span><span class="comment" id="4886528">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4886596">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="4886665">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="4886705">func</span>&nbsp;<span class="op" id="4886710">(</span><span class="ident" id="4886711">d</span>&nbsp;<span class="op" id="4886713">*</span><span class="ident" id="4886714">decodeState</span><span class="op" id="4886725">)</span>&nbsp;<span class="ident" id="4886727">literalStore</span><span class="op" id="4886739">(</span><span class="ident" id="4886740">item</span>&nbsp;<span class="op" id="4886745">[</span><span class="op" id="4886746">]</span><span class="builtintype" id="4886747">byte</span><span class="op" id="4886751">,</span>&nbsp;<span class="ident" id="4886753">v</span>&nbsp;<span class="ident" id="4886755">reflect</span><span class="op" id="4886762">.</span><span class="ident" id="4886763">Value</span><span class="op" id="4886768">,</span>&nbsp;<span class="ident" id="4886770">fromQuoted</span>&nbsp;<span class="builtintype" id="4886781">bool</span><span class="op" id="4886785">)</span>&nbsp;<span class="op" id="4886787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886790">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886817">if</span>&nbsp;<span class="builtinfunc" id="4886820">len</span><span class="op" id="4886823">(</span><span class="ident" id="4886824">item</span><span class="op" id="4886828">)</span>&nbsp;<span class="op" id="4886830">==</span>&nbsp;<span class="num" id="4886833">0</span>&nbsp;<span class="op" id="4886835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886839">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886862">d</span><span class="op" id="4886863">.</span><span class="ident" id="4886864">saveError</span><span class="op" id="4886873">(</span><span class="ident" id="4886874">fmt</span><span class="op" id="4886877">.</span><span class="ident" id="4886878">Errorf</span><span class="op" id="4886884">(</span><span class="string" id="4886885">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4886958">,</span>&nbsp;<span class="ident" id="4886960">item</span><span class="op" id="4886964">,</span>&nbsp;<span class="ident" id="4886966">v</span><span class="op" id="4886967">.</span><span class="ident" id="4886968">Type</span><span class="op" id="4886972">(</span><span class="op" id="4886973">)</span><span class="op" id="4886974">)</span><span class="op" id="4886975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886979">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886990">wantptr</span>&nbsp;<span class="op" id="4886998">:=</span>&nbsp;<span class="ident" id="4887001">item</span><span class="op" id="4887005">[</span><span class="num" id="4887006">0</span><span class="op" id="4887007">]</span>&nbsp;<span class="op" id="4887009">==</span>&nbsp;<span class="string" id="4887012">&#39;n&#39;</span>&nbsp;<span class="comment" id="4887016">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887025">u</span><span class="op" id="4887026">,</span>&nbsp;<span class="ident" id="4887028">ut</span><span class="op" id="4887030">,</span>&nbsp;<span class="ident" id="4887032">pv</span>&nbsp;<span class="op" id="4887035">:=</span>&nbsp;<span class="ident" id="4887038">d</span><span class="op" id="4887039">.</span><span class="ident" id="4887040">indirect</span><span class="op" id="4887048">(</span><span class="ident" id="4887049">v</span><span class="op" id="4887050">,</span>&nbsp;<span class="ident" id="4887052">wantptr</span><span class="op" id="4887059">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887062">if</span>&nbsp;<span class="ident" id="4887065">u</span>&nbsp;<span class="op" id="4887067">!=</span>&nbsp;<span class="ident" id="4887070">nil</span>&nbsp;<span class="op" id="4887074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887078">err</span>&nbsp;<span class="op" id="4887082">:=</span>&nbsp;<span class="ident" id="4887085">u</span><span class="op" id="4887086">.</span><span class="ident" id="4887087">UnmarshalJSON</span><span class="op" id="4887100">(</span><span class="ident" id="4887101">item</span><span class="op" id="4887105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887109">if</span>&nbsp;<span class="ident" id="4887112">err</span>&nbsp;<span class="op" id="4887116">!=</span>&nbsp;<span class="ident" id="4887119">nil</span>&nbsp;<span class="op" id="4887123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887128">d</span><span class="op" id="4887129">.</span><span class="builtintype" id="4887130">error</span><span class="op" id="4887135">(</span><span class="ident" id="4887136">err</span><span class="op" id="4887139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887143">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887147">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887158">if</span>&nbsp;<span class="ident" id="4887161">ut</span>&nbsp;<span class="op" id="4887164">!=</span>&nbsp;<span class="ident" id="4887167">nil</span>&nbsp;<span class="op" id="4887171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887175">if</span>&nbsp;<span class="ident" id="4887178">item</span><span class="op" id="4887182">[</span><span class="num" id="4887183">0</span><span class="op" id="4887184">]</span>&nbsp;<span class="op" id="4887186">!=</span>&nbsp;<span class="string" id="4887189">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4887193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887198">if</span>&nbsp;<span class="ident" id="4887201">fromQuoted</span>&nbsp;<span class="op" id="4887212">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887218">d</span><span class="op" id="4887219">.</span><span class="ident" id="4887220">saveError</span><span class="op" id="4887229">(</span><span class="ident" id="4887230">fmt</span><span class="op" id="4887233">.</span><span class="ident" id="4887234">Errorf</span><span class="op" id="4887240">(</span><span class="string" id="4887241">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4887314">,</span>&nbsp;<span class="ident" id="4887316">item</span><span class="op" id="4887320">,</span>&nbsp;<span class="ident" id="4887322">v</span><span class="op" id="4887323">.</span><span class="ident" id="4887324">Type</span><span class="op" id="4887328">(</span><span class="op" id="4887329">)</span><span class="op" id="4887330">)</span><span class="op" id="4887331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887336">}</span>&nbsp;<span class="keyword" id="4887338">else</span>&nbsp;<span class="op" id="4887343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887349">d</span><span class="op" id="4887350">.</span><span class="ident" id="4887351">saveError</span><span class="op" id="4887360">(</span><span class="op" id="4887361">&amp;</span><span class="ident" id="4887362">UnmarshalTypeError</span><span class="op" id="4887380">{</span><span class="string" id="4887381">&#34;string&#34;</span><span class="op" id="4887389">,</span>&nbsp;<span class="ident" id="4887391">v</span><span class="op" id="4887392">.</span><span class="ident" id="4887393">Type</span><span class="op" id="4887397">(</span><span class="op" id="4887398">)</span><span class="op" id="4887399">}</span><span class="op" id="4887400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887409">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887413">s</span><span class="op" id="4887414">,</span>&nbsp;<span class="ident" id="4887416">ok</span>&nbsp;<span class="op" id="4887419">:=</span>&nbsp;<span class="ident" id="4887422">unquoteBytes</span><span class="op" id="4887434">(</span><span class="ident" id="4887435">item</span><span class="op" id="4887439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887443">if</span>&nbsp;<span class="op" id="4887446">!</span><span class="ident" id="4887447">ok</span>&nbsp;<span class="op" id="4887450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887455">if</span>&nbsp;<span class="ident" id="4887458">fromQuoted</span>&nbsp;<span class="op" id="4887469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887475">d</span><span class="op" id="4887476">.</span><span class="builtintype" id="4887477">error</span><span class="op" id="4887482">(</span><span class="ident" id="4887483">fmt</span><span class="op" id="4887486">.</span><span class="ident" id="4887487">Errorf</span><span class="op" id="4887493">(</span><span class="string" id="4887494">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4887567">,</span>&nbsp;<span class="ident" id="4887569">item</span><span class="op" id="4887573">,</span>&nbsp;<span class="ident" id="4887575">v</span><span class="op" id="4887576">.</span><span class="ident" id="4887577">Type</span><span class="op" id="4887581">(</span><span class="op" id="4887582">)</span><span class="op" id="4887583">)</span><span class="op" id="4887584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887589">}</span>&nbsp;<span class="keyword" id="4887591">else</span>&nbsp;<span class="op" id="4887596">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887602">d</span><span class="op" id="4887603">.</span><span class="builtintype" id="4887604">error</span><span class="op" id="4887609">(</span><span class="ident" id="4887610">errPhase</span><span class="op" id="4887618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887631">err</span>&nbsp;<span class="op" id="4887635">:=</span>&nbsp;<span class="ident" id="4887638">ut</span><span class="op" id="4887640">.</span><span class="ident" id="4887641">UnmarshalText</span><span class="op" id="4887654">(</span><span class="ident" id="4887655">s</span><span class="op" id="4887656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887660">if</span>&nbsp;<span class="ident" id="4887663">err</span>&nbsp;<span class="op" id="4887667">!=</span>&nbsp;<span class="ident" id="4887670">nil</span>&nbsp;<span class="op" id="4887674">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887679">d</span><span class="op" id="4887680">.</span><span class="builtintype" id="4887681">error</span><span class="op" id="4887686">(</span><span class="ident" id="4887687">err</span><span class="op" id="4887690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887698">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887710">v</span>&nbsp;<span class="op" id="4887712">=</span>&nbsp;<span class="ident" id="4887714">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887719">switch</span>&nbsp;<span class="ident" id="4887726">c</span>&nbsp;<span class="op" id="4887728">:=</span>&nbsp;<span class="ident" id="4887731">item</span><span class="op" id="4887735">[</span><span class="num" id="4887736">0</span><span class="op" id="4887737">]</span><span class="op" id="4887738">;</span>&nbsp;<span class="ident" id="4887740">c</span>&nbsp;<span class="op" id="4887742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887745">case</span>&nbsp;<span class="string" id="4887750">&#39;n&#39;</span><span class="op" id="4887753">:</span>&nbsp;<span class="comment" id="4887755">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887765">switch</span>&nbsp;<span class="ident" id="4887772">v</span><span class="op" id="4887773">.</span><span class="ident" id="4887774">Kind</span><span class="op" id="4887778">(</span><span class="op" id="4887779">)</span>&nbsp;<span class="op" id="4887781">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887785">case</span>&nbsp;<span class="ident" id="4887790">reflect</span><span class="op" id="4887797">.</span><span class="ident" id="4887798">Interface</span><span class="op" id="4887807">,</span>&nbsp;<span class="ident" id="4887809">reflect</span><span class="op" id="4887816">.</span><span class="ident" id="4887817">Ptr</span><span class="op" id="4887820">,</span>&nbsp;<span class="ident" id="4887822">reflect</span><span class="op" id="4887829">.</span><span class="ident" id="4887830">Map</span><span class="op" id="4887833">,</span>&nbsp;<span class="ident" id="4887835">reflect</span><span class="op" id="4887842">.</span><span class="ident" id="4887843">Slice</span><span class="op" id="4887848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887853">v</span><span class="op" id="4887854">.</span><span class="ident" id="4887855">Set</span><span class="op" id="4887858">(</span><span class="ident" id="4887859">reflect</span><span class="op" id="4887866">.</span><span class="ident" id="4887867">Zero</span><span class="op" id="4887871">(</span><span class="ident" id="4887872">v</span><span class="op" id="4887873">.</span><span class="ident" id="4887874">Type</span><span class="op" id="4887878">(</span><span class="op" id="4887879">)</span><span class="op" id="4887880">)</span><span class="op" id="4887881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887886">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887939">case</span>&nbsp;<span class="string" id="4887944">&#39;t&#39;</span><span class="op" id="4887947">,</span>&nbsp;<span class="string" id="4887949">&#39;f&#39;</span><span class="op" id="4887952">:</span>&nbsp;<span class="comment" id="4887954">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887971">value</span>&nbsp;<span class="op" id="4887977">:=</span>&nbsp;<span class="ident" id="4887980">c</span>&nbsp;<span class="op" id="4887982">==</span>&nbsp;<span class="string" id="4887985">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887991">switch</span>&nbsp;<span class="ident" id="4887998">v</span><span class="op" id="4887999">.</span><span class="ident" id="4888000">Kind</span><span class="op" id="4888004">(</span><span class="op" id="4888005">)</span>&nbsp;<span class="op" id="4888007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888011">default</span><span class="op" id="4888018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888023">if</span>&nbsp;<span class="ident" id="4888026">fromQuoted</span>&nbsp;<span class="op" id="4888037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888043">d</span><span class="op" id="4888044">.</span><span class="ident" id="4888045">saveError</span><span class="op" id="4888054">(</span><span class="ident" id="4888055">fmt</span><span class="op" id="4888058">.</span><span class="ident" id="4888059">Errorf</span><span class="op" id="4888065">(</span><span class="string" id="4888066">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4888139">,</span>&nbsp;<span class="ident" id="4888141">item</span><span class="op" id="4888145">,</span>&nbsp;<span class="ident" id="4888147">v</span><span class="op" id="4888148">.</span><span class="ident" id="4888149">Type</span><span class="op" id="4888153">(</span><span class="op" id="4888154">)</span><span class="op" id="4888155">)</span><span class="op" id="4888156">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888161">}</span>&nbsp;<span class="keyword" id="4888163">else</span>&nbsp;<span class="op" id="4888168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888174">d</span><span class="op" id="4888175">.</span><span class="ident" id="4888176">saveError</span><span class="op" id="4888185">(</span><span class="op" id="4888186">&amp;</span><span class="ident" id="4888187">UnmarshalTypeError</span><span class="op" id="4888205">{</span><span class="string" id="4888206">&#34;bool&#34;</span><span class="op" id="4888212">,</span>&nbsp;<span class="ident" id="4888214">v</span><span class="op" id="4888215">.</span><span class="ident" id="4888216">Type</span><span class="op" id="4888220">(</span><span class="op" id="4888221">)</span><span class="op" id="4888222">}</span><span class="op" id="4888223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888232">case</span>&nbsp;<span class="ident" id="4888237">reflect</span><span class="op" id="4888244">.</span><span class="ident" id="4888245">Bool</span><span class="op" id="4888249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888254">v</span><span class="op" id="4888255">.</span><span class="ident" id="4888256">SetBool</span><span class="op" id="4888263">(</span><span class="ident" id="4888264">value</span><span class="op" id="4888269">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888273">case</span>&nbsp;<span class="ident" id="4888278">reflect</span><span class="op" id="4888285">.</span><span class="ident" id="4888286">Interface</span><span class="op" id="4888295">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888300">if</span>&nbsp;<span class="ident" id="4888303">v</span><span class="op" id="4888304">.</span><span class="ident" id="4888305">NumMethod</span><span class="op" id="4888314">(</span><span class="op" id="4888315">)</span>&nbsp;<span class="op" id="4888317">==</span>&nbsp;<span class="num" id="4888320">0</span>&nbsp;<span class="op" id="4888322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888328">v</span><span class="op" id="4888329">.</span><span class="ident" id="4888330">Set</span><span class="op" id="4888333">(</span><span class="ident" id="4888334">reflect</span><span class="op" id="4888341">.</span><span class="ident" id="4888342">ValueOf</span><span class="op" id="4888349">(</span><span class="ident" id="4888350">value</span><span class="op" id="4888355">)</span><span class="op" id="4888356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888361">}</span>&nbsp;<span class="keyword" id="4888363">else</span>&nbsp;<span class="op" id="4888368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888374">d</span><span class="op" id="4888375">.</span><span class="ident" id="4888376">saveError</span><span class="op" id="4888385">(</span><span class="op" id="4888386">&amp;</span><span class="ident" id="4888387">UnmarshalTypeError</span><span class="op" id="4888405">{</span><span class="string" id="4888406">&#34;bool&#34;</span><span class="op" id="4888412">,</span>&nbsp;<span class="ident" id="4888414">v</span><span class="op" id="4888415">.</span><span class="ident" id="4888416">Type</span><span class="op" id="4888420">(</span><span class="op" id="4888421">)</span><span class="op" id="4888422">}</span><span class="op" id="4888423">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888436">case</span>&nbsp;<span class="string" id="4888441">&#39;&#34;&#39;</span><span class="op" id="4888444">:</span>&nbsp;<span class="comment" id="4888446">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888458">s</span><span class="op" id="4888459">,</span>&nbsp;<span class="ident" id="4888461">ok</span>&nbsp;<span class="op" id="4888464">:=</span>&nbsp;<span class="ident" id="4888467">unquoteBytes</span><span class="op" id="4888479">(</span><span class="ident" id="4888480">item</span><span class="op" id="4888484">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888488">if</span>&nbsp;<span class="op" id="4888491">!</span><span class="ident" id="4888492">ok</span>&nbsp;<span class="op" id="4888495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888500">if</span>&nbsp;<span class="ident" id="4888503">fromQuoted</span>&nbsp;<span class="op" id="4888514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888520">d</span><span class="op" id="4888521">.</span><span class="builtintype" id="4888522">error</span><span class="op" id="4888527">(</span><span class="ident" id="4888528">fmt</span><span class="op" id="4888531">.</span><span class="ident" id="4888532">Errorf</span><span class="op" id="4888538">(</span><span class="string" id="4888539">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4888612">,</span>&nbsp;<span class="ident" id="4888614">item</span><span class="op" id="4888618">,</span>&nbsp;<span class="ident" id="4888620">v</span><span class="op" id="4888621">.</span><span class="ident" id="4888622">Type</span><span class="op" id="4888626">(</span><span class="op" id="4888627">)</span><span class="op" id="4888628">)</span><span class="op" id="4888629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888634">}</span>&nbsp;<span class="keyword" id="4888636">else</span>&nbsp;<span class="op" id="4888641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888647">d</span><span class="op" id="4888648">.</span><span class="builtintype" id="4888649">error</span><span class="op" id="4888654">(</span><span class="ident" id="4888655">errPhase</span><span class="op" id="4888663">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888676">switch</span>&nbsp;<span class="ident" id="4888683">v</span><span class="op" id="4888684">.</span><span class="ident" id="4888685">Kind</span><span class="op" id="4888689">(</span><span class="op" id="4888690">)</span>&nbsp;<span class="op" id="4888692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888696">default</span><span class="op" id="4888703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888708">d</span><span class="op" id="4888709">.</span><span class="ident" id="4888710">saveError</span><span class="op" id="4888719">(</span><span class="op" id="4888720">&amp;</span><span class="ident" id="4888721">UnmarshalTypeError</span><span class="op" id="4888739">{</span><span class="string" id="4888740">&#34;string&#34;</span><span class="op" id="4888748">,</span>&nbsp;<span class="ident" id="4888750">v</span><span class="op" id="4888751">.</span><span class="ident" id="4888752">Type</span><span class="op" id="4888756">(</span><span class="op" id="4888757">)</span><span class="op" id="4888758">}</span><span class="op" id="4888759">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888763">case</span>&nbsp;<span class="ident" id="4888768">reflect</span><span class="op" id="4888775">.</span><span class="ident" id="4888776">Slice</span><span class="op" id="4888781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888786">if</span>&nbsp;<span class="ident" id="4888789">v</span><span class="op" id="4888790">.</span><span class="ident" id="4888791">Type</span><span class="op" id="4888795">(</span><span class="op" id="4888796">)</span>&nbsp;<span class="op" id="4888798">!=</span>&nbsp;<span class="ident" id="4888801">byteSliceType</span>&nbsp;<span class="op" id="4888815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888821">d</span><span class="op" id="4888822">.</span><span class="ident" id="4888823">saveError</span><span class="op" id="4888832">(</span><span class="op" id="4888833">&amp;</span><span class="ident" id="4888834">UnmarshalTypeError</span><span class="op" id="4888852">{</span><span class="string" id="4888853">&#34;string&#34;</span><span class="op" id="4888861">,</span>&nbsp;<span class="ident" id="4888863">v</span><span class="op" id="4888864">.</span><span class="ident" id="4888865">Type</span><span class="op" id="4888869">(</span><span class="op" id="4888870">)</span><span class="op" id="4888871">}</span><span class="op" id="4888872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888878">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888887">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888892">b</span>&nbsp;<span class="op" id="4888894">:=</span>&nbsp;<span class="builtinfunc" id="4888897">make</span><span class="op" id="4888901">(</span><span class="op" id="4888902">[</span><span class="op" id="4888903">]</span><span class="builtintype" id="4888904">byte</span><span class="op" id="4888908">,</span>&nbsp;<span class="ident" id="4888910">base64</span><span class="op" id="4888916">.</span><span class="ident" id="4888917">StdEncoding</span><span class="op" id="4888928">.</span><span class="ident" id="4888929">DecodedLen</span><span class="op" id="4888939">(</span><span class="builtinfunc" id="4888940">len</span><span class="op" id="4888943">(</span><span class="ident" id="4888944">s</span><span class="op" id="4888945">)</span><span class="op" id="4888946">)</span><span class="op" id="4888947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888952">n</span><span class="op" id="4888953">,</span>&nbsp;<span class="ident" id="4888955">err</span>&nbsp;<span class="op" id="4888959">:=</span>&nbsp;<span class="ident" id="4888962">base64</span><span class="op" id="4888968">.</span><span class="ident" id="4888969">StdEncoding</span><span class="op" id="4888980">.</span><span class="ident" id="4888981">Decode</span><span class="op" id="4888987">(</span><span class="ident" id="4888988">b</span><span class="op" id="4888989">,</span>&nbsp;<span class="ident" id="4888991">s</span><span class="op" id="4888992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888997">if</span>&nbsp;<span class="ident" id="4889000">err</span>&nbsp;<span class="op" id="4889004">!=</span>&nbsp;<span class="ident" id="4889007">nil</span>&nbsp;<span class="op" id="4889011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889017">d</span><span class="op" id="4889018">.</span><span class="ident" id="4889019">saveError</span><span class="op" id="4889028">(</span><span class="ident" id="4889029">err</span><span class="op" id="4889032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889038">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889052">v</span><span class="op" id="4889053">.</span><span class="ident" id="4889054">Set</span><span class="op" id="4889057">(</span><span class="ident" id="4889058">reflect</span><span class="op" id="4889065">.</span><span class="ident" id="4889066">ValueOf</span><span class="op" id="4889073">(</span><span class="ident" id="4889074">b</span><span class="op" id="4889075">[</span><span class="num" id="4889076">0</span><span class="op" id="4889077">:</span><span class="ident" id="4889078">n</span><span class="op" id="4889079">]</span><span class="op" id="4889080">)</span><span class="op" id="4889081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889085">case</span>&nbsp;<span class="ident" id="4889090">reflect</span><span class="op" id="4889097">.</span><span class="ident" id="4889098">String</span><span class="op" id="4889104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889109">v</span><span class="op" id="4889110">.</span><span class="ident" id="4889111">SetString</span><span class="op" id="4889120">(</span><span class="builtintype" id="4889121">string</span><span class="op" id="4889127">(</span><span class="ident" id="4889128">s</span><span class="op" id="4889129">)</span><span class="op" id="4889130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889134">case</span>&nbsp;<span class="ident" id="4889139">reflect</span><span class="op" id="4889146">.</span><span class="ident" id="4889147">Interface</span><span class="op" id="4889156">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889161">if</span>&nbsp;<span class="ident" id="4889164">v</span><span class="op" id="4889165">.</span><span class="ident" id="4889166">NumMethod</span><span class="op" id="4889175">(</span><span class="op" id="4889176">)</span>&nbsp;<span class="op" id="4889178">==</span>&nbsp;<span class="num" id="4889181">0</span>&nbsp;<span class="op" id="4889183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889189">v</span><span class="op" id="4889190">.</span><span class="ident" id="4889191">Set</span><span class="op" id="4889194">(</span><span class="ident" id="4889195">reflect</span><span class="op" id="4889202">.</span><span class="ident" id="4889203">ValueOf</span><span class="op" id="4889210">(</span><span class="builtintype" id="4889211">string</span><span class="op" id="4889217">(</span><span class="ident" id="4889218">s</span><span class="op" id="4889219">)</span><span class="op" id="4889220">)</span><span class="op" id="4889221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889226">}</span>&nbsp;<span class="keyword" id="4889228">else</span>&nbsp;<span class="op" id="4889233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889239">d</span><span class="op" id="4889240">.</span><span class="ident" id="4889241">saveError</span><span class="op" id="4889250">(</span><span class="op" id="4889251">&amp;</span><span class="ident" id="4889252">UnmarshalTypeError</span><span class="op" id="4889270">{</span><span class="string" id="4889271">&#34;string&#34;</span><span class="op" id="4889279">,</span>&nbsp;<span class="ident" id="4889281">v</span><span class="op" id="4889282">.</span><span class="ident" id="4889283">Type</span><span class="op" id="4889287">(</span><span class="op" id="4889288">)</span><span class="op" id="4889289">}</span><span class="op" id="4889290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889295">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889303">default</span><span class="op" id="4889310">:</span>&nbsp;<span class="comment" id="4889312">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889324">if</span>&nbsp;<span class="ident" id="4889327">c</span>&nbsp;<span class="op" id="4889329">!=</span>&nbsp;<span class="string" id="4889332">&#39;-&#39;</span>&nbsp;<span class="op" id="4889336">&amp;&amp;</span>&nbsp;<span class="op" id="4889339">(</span><span class="ident" id="4889340">c</span>&nbsp;<span class="op" id="4889342">&lt;</span>&nbsp;<span class="string" id="4889344">&#39;0&#39;</span>&nbsp;<span class="op" id="4889348">||</span>&nbsp;<span class="ident" id="4889351">c</span>&nbsp;<span class="op" id="4889353">&gt;</span>&nbsp;<span class="string" id="4889355">&#39;9&#39;</span><span class="op" id="4889358">)</span>&nbsp;<span class="op" id="4889360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889365">if</span>&nbsp;<span class="ident" id="4889368">fromQuoted</span>&nbsp;<span class="op" id="4889379">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889385">d</span><span class="op" id="4889386">.</span><span class="builtintype" id="4889387">error</span><span class="op" id="4889392">(</span><span class="ident" id="4889393">fmt</span><span class="op" id="4889396">.</span><span class="ident" id="4889397">Errorf</span><span class="op" id="4889403">(</span><span class="string" id="4889404">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4889477">,</span>&nbsp;<span class="ident" id="4889479">item</span><span class="op" id="4889483">,</span>&nbsp;<span class="ident" id="4889485">v</span><span class="op" id="4889486">.</span><span class="ident" id="4889487">Type</span><span class="op" id="4889491">(</span><span class="op" id="4889492">)</span><span class="op" id="4889493">)</span><span class="op" id="4889494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889499">}</span>&nbsp;<span class="keyword" id="4889501">else</span>&nbsp;<span class="op" id="4889506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889512">d</span><span class="op" id="4889513">.</span><span class="builtintype" id="4889514">error</span><span class="op" id="4889519">(</span><span class="ident" id="4889520">errPhase</span><span class="op" id="4889528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889537">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889541">s</span>&nbsp;<span class="op" id="4889543">:=</span>&nbsp;<span class="builtintype" id="4889546">string</span><span class="op" id="4889552">(</span><span class="ident" id="4889553">item</span><span class="op" id="4889557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889561">switch</span>&nbsp;<span class="ident" id="4889568">v</span><span class="op" id="4889569">.</span><span class="ident" id="4889570">Kind</span><span class="op" id="4889574">(</span><span class="op" id="4889575">)</span>&nbsp;<span class="op" id="4889577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889581">default</span><span class="op" id="4889588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889593">if</span>&nbsp;<span class="ident" id="4889596">v</span><span class="op" id="4889597">.</span><span class="ident" id="4889598">Kind</span><span class="op" id="4889602">(</span><span class="op" id="4889603">)</span>&nbsp;<span class="op" id="4889605">==</span>&nbsp;<span class="ident" id="4889608">reflect</span><span class="op" id="4889615">.</span><span class="ident" id="4889616">String</span>&nbsp;<span class="op" id="4889623">&amp;&amp;</span>&nbsp;<span class="ident" id="4889626">v</span><span class="op" id="4889627">.</span><span class="ident" id="4889628">Type</span><span class="op" id="4889632">(</span><span class="op" id="4889633">)</span>&nbsp;<span class="op" id="4889635">==</span>&nbsp;<span class="ident" id="4889638">numberType</span>&nbsp;<span class="op" id="4889649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889655">v</span><span class="op" id="4889656">.</span><span class="ident" id="4889657">SetString</span><span class="op" id="4889666">(</span><span class="ident" id="4889667">s</span><span class="op" id="4889668">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889674">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889688">if</span>&nbsp;<span class="ident" id="4889691">fromQuoted</span>&nbsp;<span class="op" id="4889702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889708">d</span><span class="op" id="4889709">.</span><span class="builtintype" id="4889710">error</span><span class="op" id="4889715">(</span><span class="ident" id="4889716">fmt</span><span class="op" id="4889719">.</span><span class="ident" id="4889720">Errorf</span><span class="op" id="4889726">(</span><span class="string" id="4889727">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="4889800">,</span>&nbsp;<span class="ident" id="4889802">item</span><span class="op" id="4889806">,</span>&nbsp;<span class="ident" id="4889808">v</span><span class="op" id="4889809">.</span><span class="ident" id="4889810">Type</span><span class="op" id="4889814">(</span><span class="op" id="4889815">)</span><span class="op" id="4889816">)</span><span class="op" id="4889817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889822">}</span>&nbsp;<span class="keyword" id="4889824">else</span>&nbsp;<span class="op" id="4889829">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889835">d</span><span class="op" id="4889836">.</span><span class="builtintype" id="4889837">error</span><span class="op" id="4889842">(</span><span class="op" id="4889843">&amp;</span><span class="ident" id="4889844">UnmarshalTypeError</span><span class="op" id="4889862">{</span><span class="string" id="4889863">&#34;number&#34;</span><span class="op" id="4889871">,</span>&nbsp;<span class="ident" id="4889873">v</span><span class="op" id="4889874">.</span><span class="ident" id="4889875">Type</span><span class="op" id="4889879">(</span><span class="op" id="4889880">)</span><span class="op" id="4889881">}</span><span class="op" id="4889882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889891">case</span>&nbsp;<span class="ident" id="4889896">reflect</span><span class="op" id="4889903">.</span><span class="ident" id="4889904">Interface</span><span class="op" id="4889913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889918">n</span><span class="op" id="4889919">,</span>&nbsp;<span class="ident" id="4889921">err</span>&nbsp;<span class="op" id="4889925">:=</span>&nbsp;<span class="ident" id="4889928">d</span><span class="op" id="4889929">.</span><span class="ident" id="4889930">convertNumber</span><span class="op" id="4889943">(</span><span class="ident" id="4889944">s</span><span class="op" id="4889945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889950">if</span>&nbsp;<span class="ident" id="4889953">err</span>&nbsp;<span class="op" id="4889957">!=</span>&nbsp;<span class="ident" id="4889960">nil</span>&nbsp;<span class="op" id="4889964">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889970">d</span><span class="op" id="4889971">.</span><span class="ident" id="4889972">saveError</span><span class="op" id="4889981">(</span><span class="ident" id="4889982">err</span><span class="op" id="4889985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889991">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890005">if</span>&nbsp;<span class="ident" id="4890008">v</span><span class="op" id="4890009">.</span><span class="ident" id="4890010">NumMethod</span><span class="op" id="4890019">(</span><span class="op" id="4890020">)</span>&nbsp;<span class="op" id="4890022">!=</span>&nbsp;<span class="num" id="4890025">0</span>&nbsp;<span class="op" id="4890027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890033">d</span><span class="op" id="4890034">.</span><span class="ident" id="4890035">saveError</span><span class="op" id="4890044">(</span><span class="op" id="4890045">&amp;</span><span class="ident" id="4890046">UnmarshalTypeError</span><span class="op" id="4890064">{</span><span class="string" id="4890065">&#34;number&#34;</span><span class="op" id="4890073">,</span>&nbsp;<span class="ident" id="4890075">v</span><span class="op" id="4890076">.</span><span class="ident" id="4890077">Type</span><span class="op" id="4890081">(</span><span class="op" id="4890082">)</span><span class="op" id="4890083">}</span><span class="op" id="4890084">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890090">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890104">v</span><span class="op" id="4890105">.</span><span class="ident" id="4890106">Set</span><span class="op" id="4890109">(</span><span class="ident" id="4890110">reflect</span><span class="op" id="4890117">.</span><span class="ident" id="4890118">ValueOf</span><span class="op" id="4890125">(</span><span class="ident" id="4890126">n</span><span class="op" id="4890127">)</span><span class="op" id="4890128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890133">case</span>&nbsp;<span class="ident" id="4890138">reflect</span><span class="op" id="4890145">.</span><span class="ident" id="4890146">Int</span><span class="op" id="4890149">,</span>&nbsp;<span class="ident" id="4890151">reflect</span><span class="op" id="4890158">.</span><span class="ident" id="4890159">Int8</span><span class="op" id="4890163">,</span>&nbsp;<span class="ident" id="4890165">reflect</span><span class="op" id="4890172">.</span><span class="ident" id="4890173">Int16</span><span class="op" id="4890178">,</span>&nbsp;<span class="ident" id="4890180">reflect</span><span class="op" id="4890187">.</span><span class="ident" id="4890188">Int32</span><span class="op" id="4890193">,</span>&nbsp;<span class="ident" id="4890195">reflect</span><span class="op" id="4890202">.</span><span class="ident" id="4890203">Int64</span><span class="op" id="4890208">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890213">n</span><span class="op" id="4890214">,</span>&nbsp;<span class="ident" id="4890216">err</span>&nbsp;<span class="op" id="4890220">:=</span>&nbsp;<span class="ident" id="4890223">strconv</span><span class="op" id="4890230">.</span><span class="ident" id="4890231">ParseInt</span><span class="op" id="4890239">(</span><span class="ident" id="4890240">s</span><span class="op" id="4890241">,</span>&nbsp;<span class="num" id="4890243">10</span><span class="op" id="4890245">,</span>&nbsp;<span class="num" id="4890247">64</span><span class="op" id="4890249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890254">if</span>&nbsp;<span class="ident" id="4890257">err</span>&nbsp;<span class="op" id="4890261">!=</span>&nbsp;<span class="ident" id="4890264">nil</span>&nbsp;<span class="op" id="4890268">||</span>&nbsp;<span class="ident" id="4890271">v</span><span class="op" id="4890272">.</span><span class="ident" id="4890273">OverflowInt</span><span class="op" id="4890284">(</span><span class="ident" id="4890285">n</span><span class="op" id="4890286">)</span>&nbsp;<span class="op" id="4890288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890294">d</span><span class="op" id="4890295">.</span><span class="ident" id="4890296">saveError</span><span class="op" id="4890305">(</span><span class="op" id="4890306">&amp;</span><span class="ident" id="4890307">UnmarshalTypeError</span><span class="op" id="4890325">{</span><span class="string" id="4890326">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4890336">+</span>&nbsp;<span class="ident" id="4890338">s</span><span class="op" id="4890339">,</span>&nbsp;<span class="ident" id="4890341">v</span><span class="op" id="4890342">.</span><span class="ident" id="4890343">Type</span><span class="op" id="4890347">(</span><span class="op" id="4890348">)</span><span class="op" id="4890349">}</span><span class="op" id="4890350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890356">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890365">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890370">v</span><span class="op" id="4890371">.</span><span class="ident" id="4890372">SetInt</span><span class="op" id="4890378">(</span><span class="ident" id="4890379">n</span><span class="op" id="4890380">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890385">case</span>&nbsp;<span class="ident" id="4890390">reflect</span><span class="op" id="4890397">.</span><span class="ident" id="4890398">Uint</span><span class="op" id="4890402">,</span>&nbsp;<span class="ident" id="4890404">reflect</span><span class="op" id="4890411">.</span><span class="ident" id="4890412">Uint8</span><span class="op" id="4890417">,</span>&nbsp;<span class="ident" id="4890419">reflect</span><span class="op" id="4890426">.</span><span class="ident" id="4890427">Uint16</span><span class="op" id="4890433">,</span>&nbsp;<span class="ident" id="4890435">reflect</span><span class="op" id="4890442">.</span><span class="ident" id="4890443">Uint32</span><span class="op" id="4890449">,</span>&nbsp;<span class="ident" id="4890451">reflect</span><span class="op" id="4890458">.</span><span class="ident" id="4890459">Uint64</span><span class="op" id="4890465">,</span>&nbsp;<span class="ident" id="4890467">reflect</span><span class="op" id="4890474">.</span><span class="ident" id="4890475">Uintptr</span><span class="op" id="4890482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890487">n</span><span class="op" id="4890488">,</span>&nbsp;<span class="ident" id="4890490">err</span>&nbsp;<span class="op" id="4890494">:=</span>&nbsp;<span class="ident" id="4890497">strconv</span><span class="op" id="4890504">.</span><span class="ident" id="4890505">ParseUint</span><span class="op" id="4890514">(</span><span class="ident" id="4890515">s</span><span class="op" id="4890516">,</span>&nbsp;<span class="num" id="4890518">10</span><span class="op" id="4890520">,</span>&nbsp;<span class="num" id="4890522">64</span><span class="op" id="4890524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890529">if</span>&nbsp;<span class="ident" id="4890532">err</span>&nbsp;<span class="op" id="4890536">!=</span>&nbsp;<span class="ident" id="4890539">nil</span>&nbsp;<span class="op" id="4890543">||</span>&nbsp;<span class="ident" id="4890546">v</span><span class="op" id="4890547">.</span><span class="ident" id="4890548">OverflowUint</span><span class="op" id="4890560">(</span><span class="ident" id="4890561">n</span><span class="op" id="4890562">)</span>&nbsp;<span class="op" id="4890564">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890570">d</span><span class="op" id="4890571">.</span><span class="ident" id="4890572">saveError</span><span class="op" id="4890581">(</span><span class="op" id="4890582">&amp;</span><span class="ident" id="4890583">UnmarshalTypeError</span><span class="op" id="4890601">{</span><span class="string" id="4890602">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4890612">+</span>&nbsp;<span class="ident" id="4890614">s</span><span class="op" id="4890615">,</span>&nbsp;<span class="ident" id="4890617">v</span><span class="op" id="4890618">.</span><span class="ident" id="4890619">Type</span><span class="op" id="4890623">(</span><span class="op" id="4890624">)</span><span class="op" id="4890625">}</span><span class="op" id="4890626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890632">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890646">v</span><span class="op" id="4890647">.</span><span class="ident" id="4890648">SetUint</span><span class="op" id="4890655">(</span><span class="ident" id="4890656">n</span><span class="op" id="4890657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890662">case</span>&nbsp;<span class="ident" id="4890667">reflect</span><span class="op" id="4890674">.</span><span class="ident" id="4890675">Float32</span><span class="op" id="4890682">,</span>&nbsp;<span class="ident" id="4890684">reflect</span><span class="op" id="4890691">.</span><span class="ident" id="4890692">Float64</span><span class="op" id="4890699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890704">n</span><span class="op" id="4890705">,</span>&nbsp;<span class="ident" id="4890707">err</span>&nbsp;<span class="op" id="4890711">:=</span>&nbsp;<span class="ident" id="4890714">strconv</span><span class="op" id="4890721">.</span><span class="ident" id="4890722">ParseFloat</span><span class="op" id="4890732">(</span><span class="ident" id="4890733">s</span><span class="op" id="4890734">,</span>&nbsp;<span class="ident" id="4890736">v</span><span class="op" id="4890737">.</span><span class="ident" id="4890738">Type</span><span class="op" id="4890742">(</span><span class="op" id="4890743">)</span><span class="op" id="4890744">.</span><span class="ident" id="4890745">Bits</span><span class="op" id="4890749">(</span><span class="op" id="4890750">)</span><span class="op" id="4890751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890756">if</span>&nbsp;<span class="ident" id="4890759">err</span>&nbsp;<span class="op" id="4890763">!=</span>&nbsp;<span class="ident" id="4890766">nil</span>&nbsp;<span class="op" id="4890770">||</span>&nbsp;<span class="ident" id="4890773">v</span><span class="op" id="4890774">.</span><span class="ident" id="4890775">OverflowFloat</span><span class="op" id="4890788">(</span><span class="ident" id="4890789">n</span><span class="op" id="4890790">)</span>&nbsp;<span class="op" id="4890792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890798">d</span><span class="op" id="4890799">.</span><span class="ident" id="4890800">saveError</span><span class="op" id="4890809">(</span><span class="op" id="4890810">&amp;</span><span class="ident" id="4890811">UnmarshalTypeError</span><span class="op" id="4890829">{</span><span class="string" id="4890830">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="4890840">+</span>&nbsp;<span class="ident" id="4890842">s</span><span class="op" id="4890843">,</span>&nbsp;<span class="ident" id="4890845">v</span><span class="op" id="4890846">.</span><span class="ident" id="4890847">Type</span><span class="op" id="4890851">(</span><span class="op" id="4890852">)</span><span class="op" id="4890853">}</span><span class="op" id="4890854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4890860">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4890874">v</span><span class="op" id="4890875">.</span><span class="ident" id="4890876">SetFloat</span><span class="op" id="4890884">(</span><span class="ident" id="4890885">n</span><span class="op" id="4890886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4890893">}</span><br>
<span class="lineno"></span><span class="op" id="4890895">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="4890898">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="4890957">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4891017">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="4891082">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="4891138">func</span>&nbsp;<span class="op" id="4891143">(</span><span class="ident" id="4891144">d</span>&nbsp;<span class="op" id="4891146">*</span><span class="ident" id="4891147">decodeState</span><span class="op" id="4891158">)</span>&nbsp;<span class="ident" id="4891160">valueInterface</span><span class="op" id="4891174">(</span><span class="op" id="4891175">)</span>&nbsp;<span class="keyword" id="4891177">interface</span><span class="op" id="4891186">{</span><span class="op" id="4891187">}</span>&nbsp;<span class="op" id="4891189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891192">switch</span>&nbsp;<span class="ident" id="4891199">d</span><span class="op" id="4891200">.</span><span class="ident" id="4891201">scanWhile</span><span class="op" id="4891210">(</span><span class="ident" id="4891211">scanSkipSpace</span><span class="op" id="4891224">)</span>&nbsp;<span class="op" id="4891226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891229">default</span><span class="op" id="4891236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891240">d</span><span class="op" id="4891241">.</span><span class="builtintype" id="4891242">error</span><span class="op" id="4891247">(</span><span class="ident" id="4891248">errPhase</span><span class="op" id="4891256">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4891260">panic</span><span class="op" id="4891265">(</span><span class="string" id="4891266">&#34;unreachable&#34;</span><span class="op" id="4891279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891282">case</span>&nbsp;<span class="ident" id="4891287">scanBeginArray</span><span class="op" id="4891301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891305">return</span>&nbsp;<span class="ident" id="4891312">d</span><span class="op" id="4891313">.</span><span class="ident" id="4891314">arrayInterface</span><span class="op" id="4891328">(</span><span class="op" id="4891329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891332">case</span>&nbsp;<span class="ident" id="4891337">scanBeginObject</span><span class="op" id="4891352">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891356">return</span>&nbsp;<span class="ident" id="4891363">d</span><span class="op" id="4891364">.</span><span class="ident" id="4891365">objectInterface</span><span class="op" id="4891380">(</span><span class="op" id="4891381">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891384">case</span>&nbsp;<span class="ident" id="4891389">scanBeginLiteral</span><span class="op" id="4891405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891409">return</span>&nbsp;<span class="ident" id="4891416">d</span><span class="op" id="4891417">.</span><span class="ident" id="4891418">literalInterface</span><span class="op" id="4891434">(</span><span class="op" id="4891435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4891438">}</span><br>
<span class="lineno"></span><span class="op" id="4891440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="4891443">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4891502">func</span>&nbsp;<span class="op" id="4891507">(</span><span class="ident" id="4891508">d</span>&nbsp;<span class="op" id="4891510">*</span><span class="ident" id="4891511">decodeState</span><span class="op" id="4891522">)</span>&nbsp;<span class="ident" id="4891524">arrayInterface</span><span class="op" id="4891538">(</span><span class="op" id="4891539">)</span>&nbsp;<span class="op" id="4891541">[</span><span class="op" id="4891542">]</span><span class="keyword" id="4891543">interface</span><span class="op" id="4891552">{</span><span class="op" id="4891553">}</span>&nbsp;<span class="op" id="4891555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891558">var</span>&nbsp;<span class="ident" id="4891562">v</span>&nbsp;<span class="op" id="4891564">=</span>&nbsp;<span class="builtinfunc" id="4891566">make</span><span class="op" id="4891570">(</span><span class="op" id="4891571">[</span><span class="op" id="4891572">]</span><span class="keyword" id="4891573">interface</span><span class="op" id="4891582">{</span><span class="op" id="4891583">}</span><span class="op" id="4891584">,</span>&nbsp;<span class="num" id="4891586">0</span><span class="op" id="4891587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891590">for</span>&nbsp;<span class="op" id="4891594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4891598">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891658">op</span>&nbsp;<span class="op" id="4891661">:=</span>&nbsp;<span class="ident" id="4891664">d</span><span class="op" id="4891665">.</span><span class="ident" id="4891666">scanWhile</span><span class="op" id="4891675">(</span><span class="ident" id="4891676">scanSkipSpace</span><span class="op" id="4891689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891693">if</span>&nbsp;<span class="ident" id="4891696">op</span>&nbsp;<span class="op" id="4891699">==</span>&nbsp;<span class="ident" id="4891702">scanEndArray</span>&nbsp;<span class="op" id="4891715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891720">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4891728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4891733">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891789">d</span><span class="op" id="4891790">.</span><span class="ident" id="4891791">off</span><span class="op" id="4891794">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891799">d</span><span class="op" id="4891800">.</span><span class="ident" id="4891801">scan</span><span class="op" id="4891805">.</span><span class="ident" id="4891806">undo</span><span class="op" id="4891810">(</span><span class="ident" id="4891811">op</span><span class="op" id="4891813">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891818">v</span>&nbsp;<span class="op" id="4891820">=</span>&nbsp;<span class="builtinfunc" id="4891822">append</span><span class="op" id="4891828">(</span><span class="ident" id="4891829">v</span><span class="op" id="4891830">,</span>&nbsp;<span class="ident" id="4891832">d</span><span class="op" id="4891833">.</span><span class="ident" id="4891834">valueInterface</span><span class="op" id="4891848">(</span><span class="op" id="4891849">)</span><span class="op" id="4891850">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4891855">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891887">op</span>&nbsp;<span class="op" id="4891890">=</span>&nbsp;<span class="ident" id="4891892">d</span><span class="op" id="4891893">.</span><span class="ident" id="4891894">scanWhile</span><span class="op" id="4891903">(</span><span class="ident" id="4891904">scanSkipSpace</span><span class="op" id="4891917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891921">if</span>&nbsp;<span class="ident" id="4891924">op</span>&nbsp;<span class="op" id="4891927">==</span>&nbsp;<span class="ident" id="4891930">scanEndArray</span>&nbsp;<span class="op" id="4891943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891948">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4891956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4891960">if</span>&nbsp;<span class="ident" id="4891963">op</span>&nbsp;<span class="op" id="4891966">!=</span>&nbsp;<span class="ident" id="4891969">scanArrayValue</span>&nbsp;<span class="op" id="4891984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4891989">d</span><span class="op" id="4891990">.</span><span class="builtintype" id="4891991">error</span><span class="op" id="4891996">(</span><span class="ident" id="4891997">errPhase</span><span class="op" id="4892005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892012">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892015">return</span>&nbsp;<span class="ident" id="4892022">v</span><br>
<span class="lineno"></span><span class="op" id="4892024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4892027">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="4892097">func</span>&nbsp;<span class="op" id="4892102">(</span><span class="ident" id="4892103">d</span>&nbsp;<span class="op" id="4892105">*</span><span class="ident" id="4892106">decodeState</span><span class="op" id="4892117">)</span>&nbsp;<span class="ident" id="4892119">objectInterface</span><span class="op" id="4892134">(</span><span class="op" id="4892135">)</span>&nbsp;<span class="keyword" id="4892137">map</span><span class="op" id="4892140">[</span><span class="builtintype" id="4892141">string</span><span class="op" id="4892147">]</span><span class="keyword" id="4892148">interface</span><span class="op" id="4892157">{</span><span class="op" id="4892158">}</span>&nbsp;<span class="op" id="4892160">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892163">m</span>&nbsp;<span class="op" id="4892165">:=</span>&nbsp;<span class="builtinfunc" id="4892168">make</span><span class="op" id="4892172">(</span><span class="keyword" id="4892173">map</span><span class="op" id="4892176">[</span><span class="builtintype" id="4892177">string</span><span class="op" id="4892183">]</span><span class="keyword" id="4892184">interface</span><span class="op" id="4892193">{</span><span class="op" id="4892194">}</span><span class="op" id="4892195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892198">for</span>&nbsp;<span class="op" id="4892202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892206">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892254">op</span>&nbsp;<span class="op" id="4892257">:=</span>&nbsp;<span class="ident" id="4892260">d</span><span class="op" id="4892261">.</span><span class="ident" id="4892262">scanWhile</span><span class="op" id="4892271">(</span><span class="ident" id="4892272">scanSkipSpace</span><span class="op" id="4892285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892289">if</span>&nbsp;<span class="ident" id="4892292">op</span>&nbsp;<span class="op" id="4892295">==</span>&nbsp;<span class="ident" id="4892298">scanEndObject</span>&nbsp;<span class="op" id="4892312">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892317">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892371">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892383">if</span>&nbsp;<span class="ident" id="4892386">op</span>&nbsp;<span class="op" id="4892389">!=</span>&nbsp;<span class="ident" id="4892392">scanBeginLiteral</span>&nbsp;<span class="op" id="4892409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892414">d</span><span class="op" id="4892415">.</span><span class="builtintype" id="4892416">error</span><span class="op" id="4892421">(</span><span class="ident" id="4892422">errPhase</span><span class="op" id="4892430">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892439">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892461">start</span>&nbsp;<span class="op" id="4892467">:=</span>&nbsp;<span class="ident" id="4892470">d</span><span class="op" id="4892471">.</span><span class="ident" id="4892472">off</span>&nbsp;<span class="op" id="4892476">-</span>&nbsp;<span class="num" id="4892478">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892482">op</span>&nbsp;<span class="op" id="4892485">=</span>&nbsp;<span class="ident" id="4892487">d</span><span class="op" id="4892488">.</span><span class="ident" id="4892489">scanWhile</span><span class="op" id="4892498">(</span><span class="ident" id="4892499">scanContinue</span><span class="op" id="4892511">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892515">item</span>&nbsp;<span class="op" id="4892520">:=</span>&nbsp;<span class="ident" id="4892523">d</span><span class="op" id="4892524">.</span><span class="ident" id="4892525">data</span><span class="op" id="4892529">[</span><span class="ident" id="4892530">start</span>&nbsp;<span class="op" id="4892536">:</span>&nbsp;<span class="ident" id="4892538">d</span><span class="op" id="4892539">.</span><span class="ident" id="4892540">off</span><span class="op" id="4892543">-</span><span class="num" id="4892544">1</span><span class="op" id="4892545">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892549">key</span><span class="op" id="4892552">,</span>&nbsp;<span class="ident" id="4892554">ok</span>&nbsp;<span class="op" id="4892557">:=</span>&nbsp;<span class="ident" id="4892560">unquote</span><span class="op" id="4892567">(</span><span class="ident" id="4892568">item</span><span class="op" id="4892572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892576">if</span>&nbsp;<span class="op" id="4892579">!</span><span class="ident" id="4892580">ok</span>&nbsp;<span class="op" id="4892583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892588">d</span><span class="op" id="4892589">.</span><span class="builtintype" id="4892590">error</span><span class="op" id="4892595">(</span><span class="ident" id="4892596">errPhase</span><span class="op" id="4892604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892608">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892613">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892639">if</span>&nbsp;<span class="ident" id="4892642">op</span>&nbsp;<span class="op" id="4892645">==</span>&nbsp;<span class="ident" id="4892648">scanSkipSpace</span>&nbsp;<span class="op" id="4892662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892667">op</span>&nbsp;<span class="op" id="4892670">=</span>&nbsp;<span class="ident" id="4892672">d</span><span class="op" id="4892673">.</span><span class="ident" id="4892674">scanWhile</span><span class="op" id="4892683">(</span><span class="ident" id="4892684">scanSkipSpace</span><span class="op" id="4892697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892701">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892705">if</span>&nbsp;<span class="ident" id="4892708">op</span>&nbsp;<span class="op" id="4892711">!=</span>&nbsp;<span class="ident" id="4892714">scanObjectKey</span>&nbsp;<span class="op" id="4892728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892733">d</span><span class="op" id="4892734">.</span><span class="builtintype" id="4892735">error</span><span class="op" id="4892740">(</span><span class="ident" id="4892741">errPhase</span><span class="op" id="4892749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892758">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892775">m</span><span class="op" id="4892776">[</span><span class="ident" id="4892777">key</span><span class="op" id="4892780">]</span>&nbsp;<span class="op" id="4892782">=</span>&nbsp;<span class="ident" id="4892784">d</span><span class="op" id="4892785">.</span><span class="ident" id="4892786">valueInterface</span><span class="op" id="4892800">(</span><span class="op" id="4892801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4892806">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892838">op</span>&nbsp;<span class="op" id="4892841">=</span>&nbsp;<span class="ident" id="4892843">d</span><span class="op" id="4892844">.</span><span class="ident" id="4892845">scanWhile</span><span class="op" id="4892854">(</span><span class="ident" id="4892855">scanSkipSpace</span><span class="op" id="4892868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892872">if</span>&nbsp;<span class="ident" id="4892875">op</span>&nbsp;<span class="op" id="4892878">==</span>&nbsp;<span class="ident" id="4892881">scanEndObject</span>&nbsp;<span class="op" id="4892895">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892900">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892912">if</span>&nbsp;<span class="ident" id="4892915">op</span>&nbsp;<span class="op" id="4892918">!=</span>&nbsp;<span class="ident" id="4892921">scanObjectValue</span>&nbsp;<span class="op" id="4892937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4892942">d</span><span class="op" id="4892943">.</span><span class="builtintype" id="4892944">error</span><span class="op" id="4892949">(</span><span class="ident" id="4892950">errPhase</span><span class="op" id="4892958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892962">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4892965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4892968">return</span>&nbsp;<span class="ident" id="4892975">m</span><br>
<span class="lineno"></span><span class="op" id="4892977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4892980">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="4893048">func</span>&nbsp;<span class="op" id="4893053">(</span><span class="ident" id="4893054">d</span>&nbsp;<span class="op" id="4893056">*</span><span class="ident" id="4893057">decodeState</span><span class="op" id="4893068">)</span>&nbsp;<span class="ident" id="4893070">literalInterface</span><span class="op" id="4893086">(</span><span class="op" id="4893087">)</span>&nbsp;<span class="keyword" id="4893089">interface</span><span class="op" id="4893098">{</span><span class="op" id="4893099">}</span>&nbsp;<span class="op" id="4893101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4893104">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893162">start</span>&nbsp;<span class="op" id="4893168">:=</span>&nbsp;<span class="ident" id="4893171">d</span><span class="op" id="4893172">.</span><span class="ident" id="4893173">off</span>&nbsp;<span class="op" id="4893177">-</span>&nbsp;<span class="num" id="4893179">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893182">op</span>&nbsp;<span class="op" id="4893185">:=</span>&nbsp;<span class="ident" id="4893188">d</span><span class="op" id="4893189">.</span><span class="ident" id="4893190">scanWhile</span><span class="op" id="4893199">(</span><span class="ident" id="4893200">scanContinue</span><span class="op" id="4893212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4893216">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893257">d</span><span class="op" id="4893258">.</span><span class="ident" id="4893259">off</span><span class="op" id="4893262">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893266">d</span><span class="op" id="4893267">.</span><span class="ident" id="4893268">scan</span><span class="op" id="4893272">.</span><span class="ident" id="4893273">undo</span><span class="op" id="4893277">(</span><span class="ident" id="4893278">op</span><span class="op" id="4893280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893283">item</span>&nbsp;<span class="op" id="4893288">:=</span>&nbsp;<span class="ident" id="4893291">d</span><span class="op" id="4893292">.</span><span class="ident" id="4893293">data</span><span class="op" id="4893297">[</span><span class="ident" id="4893298">start</span><span class="op" id="4893303">:</span><span class="ident" id="4893304">d</span><span class="op" id="4893305">.</span><span class="ident" id="4893306">off</span><span class="op" id="4893309">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893313">switch</span>&nbsp;<span class="ident" id="4893320">c</span>&nbsp;<span class="op" id="4893322">:=</span>&nbsp;<span class="ident" id="4893325">item</span><span class="op" id="4893329">[</span><span class="num" id="4893330">0</span><span class="op" id="4893331">]</span><span class="op" id="4893332">;</span>&nbsp;<span class="ident" id="4893334">c</span>&nbsp;<span class="op" id="4893336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893339">case</span>&nbsp;<span class="string" id="4893344">&#39;n&#39;</span><span class="op" id="4893347">:</span>&nbsp;<span class="comment" id="4893349">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893359">return</span>&nbsp;<span class="ident" id="4893366">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893372">case</span>&nbsp;<span class="string" id="4893377">&#39;t&#39;</span><span class="op" id="4893380">,</span>&nbsp;<span class="string" id="4893382">&#39;f&#39;</span><span class="op" id="4893385">:</span>&nbsp;<span class="comment" id="4893387">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893404">return</span>&nbsp;<span class="ident" id="4893411">c</span>&nbsp;<span class="op" id="4893413">==</span>&nbsp;<span class="string" id="4893416">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893422">case</span>&nbsp;<span class="string" id="4893427">&#39;&#34;&#39;</span><span class="op" id="4893430">:</span>&nbsp;<span class="comment" id="4893432">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893444">s</span><span class="op" id="4893445">,</span>&nbsp;<span class="ident" id="4893447">ok</span>&nbsp;<span class="op" id="4893450">:=</span>&nbsp;<span class="ident" id="4893453">unquote</span><span class="op" id="4893460">(</span><span class="ident" id="4893461">item</span><span class="op" id="4893465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893469">if</span>&nbsp;<span class="op" id="4893472">!</span><span class="ident" id="4893473">ok</span>&nbsp;<span class="op" id="4893476">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893481">d</span><span class="op" id="4893482">.</span><span class="builtintype" id="4893483">error</span><span class="op" id="4893488">(</span><span class="ident" id="4893489">errPhase</span><span class="op" id="4893497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893505">return</span>&nbsp;<span class="ident" id="4893512">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893516">default</span><span class="op" id="4893523">:</span>&nbsp;<span class="comment" id="4893525">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893537">if</span>&nbsp;<span class="ident" id="4893540">c</span>&nbsp;<span class="op" id="4893542">!=</span>&nbsp;<span class="string" id="4893545">&#39;-&#39;</span>&nbsp;<span class="op" id="4893549">&amp;&amp;</span>&nbsp;<span class="op" id="4893552">(</span><span class="ident" id="4893553">c</span>&nbsp;<span class="op" id="4893555">&lt;</span>&nbsp;<span class="string" id="4893557">&#39;0&#39;</span>&nbsp;<span class="op" id="4893561">||</span>&nbsp;<span class="ident" id="4893564">c</span>&nbsp;<span class="op" id="4893566">&gt;</span>&nbsp;<span class="string" id="4893568">&#39;9&#39;</span><span class="op" id="4893571">)</span>&nbsp;<span class="op" id="4893573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893578">d</span><span class="op" id="4893579">.</span><span class="builtintype" id="4893580">error</span><span class="op" id="4893585">(</span><span class="ident" id="4893586">errPhase</span><span class="op" id="4893594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893602">n</span><span class="op" id="4893603">,</span>&nbsp;<span class="ident" id="4893605">err</span>&nbsp;<span class="op" id="4893609">:=</span>&nbsp;<span class="ident" id="4893612">d</span><span class="op" id="4893613">.</span><span class="ident" id="4893614">convertNumber</span><span class="op" id="4893627">(</span><span class="builtintype" id="4893628">string</span><span class="op" id="4893634">(</span><span class="ident" id="4893635">item</span><span class="op" id="4893639">)</span><span class="op" id="4893640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893644">if</span>&nbsp;<span class="ident" id="4893647">err</span>&nbsp;<span class="op" id="4893651">!=</span>&nbsp;<span class="ident" id="4893654">nil</span>&nbsp;<span class="op" id="4893658">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893663">d</span><span class="op" id="4893664">.</span><span class="ident" id="4893665">saveError</span><span class="op" id="4893674">(</span><span class="ident" id="4893675">err</span><span class="op" id="4893678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893686">return</span>&nbsp;<span class="ident" id="4893693">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893696">}</span><br>
<span class="lineno"></span><span class="op" id="4893698">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="4893701">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4893775">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="4893796">func</span>&nbsp;<span class="ident" id="4893801">getu4</span><span class="op" id="4893806">(</span><span class="ident" id="4893807">s</span>&nbsp;<span class="op" id="4893809">[</span><span class="op" id="4893810">]</span><span class="builtintype" id="4893811">byte</span><span class="op" id="4893815">)</span>&nbsp;<span class="builtintype" id="4893817">rune</span>&nbsp;<span class="op" id="4893822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893825">if</span>&nbsp;<span class="builtinfunc" id="4893828">len</span><span class="op" id="4893831">(</span><span class="ident" id="4893832">s</span><span class="op" id="4893833">)</span>&nbsp;<span class="op" id="4893835">&lt;</span>&nbsp;<span class="num" id="4893837">6</span>&nbsp;<span class="op" id="4893839">||</span>&nbsp;<span class="ident" id="4893842">s</span><span class="op" id="4893843">[</span><span class="num" id="4893844">0</span><span class="op" id="4893845">]</span>&nbsp;<span class="op" id="4893847">!=</span>&nbsp;<span class="string" id="4893850">&#39;\\&#39;</span>&nbsp;<span class="op" id="4893855">||</span>&nbsp;<span class="ident" id="4893858">s</span><span class="op" id="4893859">[</span><span class="num" id="4893860">1</span><span class="op" id="4893861">]</span>&nbsp;<span class="op" id="4893863">!=</span>&nbsp;<span class="string" id="4893866">&#39;u&#39;</span>&nbsp;<span class="op" id="4893870">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893874">return</span>&nbsp;<span class="op" id="4893881">-</span><span class="num" id="4893882">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4893888">r</span><span class="op" id="4893889">,</span>&nbsp;<span class="ident" id="4893891">err</span>&nbsp;<span class="op" id="4893895">:=</span>&nbsp;<span class="ident" id="4893898">strconv</span><span class="op" id="4893905">.</span><span class="ident" id="4893906">ParseUint</span><span class="op" id="4893915">(</span><span class="builtintype" id="4893916">string</span><span class="op" id="4893922">(</span><span class="ident" id="4893923">s</span><span class="op" id="4893924">[</span><span class="num" id="4893925">2</span><span class="op" id="4893926">:</span><span class="num" id="4893927">6</span><span class="op" id="4893928">]</span><span class="op" id="4893929">)</span><span class="op" id="4893930">,</span>&nbsp;<span class="num" id="4893932">16</span><span class="op" id="4893934">,</span>&nbsp;<span class="num" id="4893936">64</span><span class="op" id="4893938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893941">if</span>&nbsp;<span class="ident" id="4893944">err</span>&nbsp;<span class="op" id="4893948">!=</span>&nbsp;<span class="ident" id="4893951">nil</span>&nbsp;<span class="op" id="4893955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893959">return</span>&nbsp;<span class="op" id="4893966">-</span><span class="num" id="4893967">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4893970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4893973">return</span>&nbsp;<span class="builtintype" id="4893980">rune</span><span class="op" id="4893984">(</span><span class="ident" id="4893985">r</span><span class="op" id="4893986">)</span><br>
<span class="lineno"></span><span class="op" id="4893988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4893991">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="4894067">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="4894138">func</span>&nbsp;<span class="ident" id="4894143">unquote</span><span class="op" id="4894150">(</span><span class="ident" id="4894151">s</span>&nbsp;<span class="op" id="4894153">[</span><span class="op" id="4894154">]</span><span class="builtintype" id="4894155">byte</span><span class="op" id="4894159">)</span>&nbsp;<span class="op" id="4894161">(</span><span class="ident" id="4894162">t</span>&nbsp;<span class="builtintype" id="4894164">string</span><span class="op" id="4894170">,</span>&nbsp;<span class="ident" id="4894172">ok</span>&nbsp;<span class="builtintype" id="4894175">bool</span><span class="op" id="4894179">)</span>&nbsp;<span class="op" id="4894181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894184">s</span><span class="op" id="4894185">,</span>&nbsp;<span class="ident" id="4894187">ok</span>&nbsp;<span class="op" id="4894190">=</span>&nbsp;<span class="ident" id="4894192">unquoteBytes</span><span class="op" id="4894204">(</span><span class="ident" id="4894205">s</span><span class="op" id="4894206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894209">t</span>&nbsp;<span class="op" id="4894211">=</span>&nbsp;<span class="builtintype" id="4894213">string</span><span class="op" id="4894219">(</span><span class="ident" id="4894220">s</span><span class="op" id="4894221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894224">return</span><br>
<span class="lineno">970</span><span class="op" id="4894231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4894234">func</span>&nbsp;<span class="ident" id="4894239">unquoteBytes</span><span class="op" id="4894251">(</span><span class="ident" id="4894252">s</span>&nbsp;<span class="op" id="4894254">[</span><span class="op" id="4894255">]</span><span class="builtintype" id="4894256">byte</span><span class="op" id="4894260">)</span>&nbsp;<span class="op" id="4894262">(</span><span class="ident" id="4894263">t</span>&nbsp;<span class="op" id="4894265">[</span><span class="op" id="4894266">]</span><span class="builtintype" id="4894267">byte</span><span class="op" id="4894271">,</span>&nbsp;<span class="ident" id="4894273">ok</span>&nbsp;<span class="builtintype" id="4894276">bool</span><span class="op" id="4894280">)</span>&nbsp;<span class="op" id="4894282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894285">if</span>&nbsp;<span class="builtinfunc" id="4894288">len</span><span class="op" id="4894291">(</span><span class="ident" id="4894292">s</span><span class="op" id="4894293">)</span>&nbsp;<span class="op" id="4894295">&lt;</span>&nbsp;<span class="num" id="4894297">2</span>&nbsp;<span class="op" id="4894299">||</span>&nbsp;<span class="ident" id="4894302">s</span><span class="op" id="4894303">[</span><span class="num" id="4894304">0</span><span class="op" id="4894305">]</span>&nbsp;<span class="op" id="4894307">!=</span>&nbsp;<span class="string" id="4894310">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4894314">||</span>&nbsp;<span class="ident" id="4894317">s</span><span class="op" id="4894318">[</span><span class="builtinfunc" id="4894319">len</span><span class="op" id="4894322">(</span><span class="ident" id="4894323">s</span><span class="op" id="4894324">)</span><span class="op" id="4894325">-</span><span class="num" id="4894326">1</span><span class="op" id="4894327">]</span>&nbsp;<span class="op" id="4894329">!=</span>&nbsp;<span class="string" id="4894332">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4894336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894340">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894351">s</span>&nbsp;<span class="op" id="4894353">=</span>&nbsp;<span class="ident" id="4894355">s</span><span class="op" id="4894356">[</span><span class="num" id="4894357">1</span>&nbsp;<span class="op" id="4894359">:</span>&nbsp;<span class="builtinfunc" id="4894361">len</span><span class="op" id="4894364">(</span><span class="ident" id="4894365">s</span><span class="op" id="4894366">)</span><span class="op" id="4894367">-</span><span class="num" id="4894368">1</span><span class="op" id="4894369">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894373">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894426">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894484">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894504">r</span>&nbsp;<span class="op" id="4894506">:=</span>&nbsp;<span class="num" id="4894509">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894512">for</span>&nbsp;<span class="ident" id="4894516">r</span>&nbsp;<span class="op" id="4894518">&lt;</span>&nbsp;<span class="builtinfunc" id="4894520">len</span><span class="op" id="4894523">(</span><span class="ident" id="4894524">s</span><span class="op" id="4894525">)</span>&nbsp;<span class="op" id="4894527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894531">c</span>&nbsp;<span class="op" id="4894533">:=</span>&nbsp;<span class="ident" id="4894536">s</span><span class="op" id="4894537">[</span><span class="ident" id="4894538">r</span><span class="op" id="4894539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894543">if</span>&nbsp;<span class="ident" id="4894546">c</span>&nbsp;<span class="op" id="4894548">==</span>&nbsp;<span class="string" id="4894551">&#39;\\&#39;</span>&nbsp;<span class="op" id="4894556">||</span>&nbsp;<span class="ident" id="4894559">c</span>&nbsp;<span class="op" id="4894561">==</span>&nbsp;<span class="string" id="4894564">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4894568">||</span>&nbsp;<span class="ident" id="4894571">c</span>&nbsp;<span class="op" id="4894573">&lt;</span>&nbsp;<span class="string" id="4894575">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4894579">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894584">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894596">if</span>&nbsp;<span class="ident" id="4894599">c</span>&nbsp;<span class="op" id="4894601">&lt;</span>&nbsp;<span class="ident" id="4894603">utf8</span><span class="op" id="4894607">.</span><span class="ident" id="4894608">RuneSelf</span>&nbsp;<span class="op" id="4894617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894622">r</span><span class="op" id="4894623">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894629">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894644">rr</span><span class="op" id="4894646">,</span>&nbsp;<span class="ident" id="4894648">size</span>&nbsp;<span class="op" id="4894653">:=</span>&nbsp;<span class="ident" id="4894656">utf8</span><span class="op" id="4894660">.</span><span class="ident" id="4894661">DecodeRune</span><span class="op" id="4894671">(</span><span class="ident" id="4894672">s</span><span class="op" id="4894673">[</span><span class="ident" id="4894674">r</span><span class="op" id="4894675">:</span><span class="op" id="4894676">]</span><span class="op" id="4894677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894681">if</span>&nbsp;<span class="ident" id="4894684">rr</span>&nbsp;<span class="op" id="4894687">==</span>&nbsp;<span class="ident" id="4894690">utf8</span><span class="op" id="4894694">.</span><span class="ident" id="4894695">RuneError</span>&nbsp;<span class="op" id="4894705">&amp;&amp;</span>&nbsp;<span class="ident" id="4894708">size</span>&nbsp;<span class="op" id="4894713">==</span>&nbsp;<span class="num" id="4894716">1</span>&nbsp;<span class="op" id="4894718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894723">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894731">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894735">r</span>&nbsp;<span class="op" id="4894737">+=</span>&nbsp;<span class="ident" id="4894740">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894749">if</span>&nbsp;<span class="ident" id="4894752">r</span>&nbsp;<span class="op" id="4894754">==</span>&nbsp;<span class="builtinfunc" id="4894757">len</span><span class="op" id="4894760">(</span><span class="ident" id="4894761">s</span><span class="op" id="4894762">)</span>&nbsp;<span class="op" id="4894764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894768">return</span>&nbsp;<span class="ident" id="4894775">s</span><span class="op" id="4894776">,</span>&nbsp;<span class="builtintype" id="4894778">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4894784">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894788">b</span>&nbsp;<span class="op" id="4894790">:=</span>&nbsp;<span class="builtinfunc" id="4894793">make</span><span class="op" id="4894797">(</span><span class="op" id="4894798">[</span><span class="op" id="4894799">]</span><span class="builtintype" id="4894800">byte</span><span class="op" id="4894804">,</span>&nbsp;<span class="builtinfunc" id="4894806">len</span><span class="op" id="4894809">(</span><span class="ident" id="4894810">s</span><span class="op" id="4894811">)</span><span class="op" id="4894812">+</span><span class="num" id="4894813">2</span><span class="op" id="4894814">*</span><span class="ident" id="4894815">utf8</span><span class="op" id="4894819">.</span><span class="ident" id="4894820">UTFMax</span><span class="op" id="4894826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894829">w</span>&nbsp;<span class="op" id="4894831">:=</span>&nbsp;<span class="builtinfunc" id="4894834">copy</span><span class="op" id="4894838">(</span><span class="ident" id="4894839">b</span><span class="op" id="4894840">,</span>&nbsp;<span class="ident" id="4894842">s</span><span class="op" id="4894843">[</span><span class="num" id="4894844">0</span><span class="op" id="4894845">:</span><span class="ident" id="4894846">r</span><span class="op" id="4894847">]</span><span class="op" id="4894848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894851">for</span>&nbsp;<span class="ident" id="4894855">r</span>&nbsp;<span class="op" id="4894857">&lt;</span>&nbsp;<span class="builtinfunc" id="4894859">len</span><span class="op" id="4894862">(</span><span class="ident" id="4894863">s</span><span class="op" id="4894864">)</span>&nbsp;<span class="op" id="4894866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894870">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894921">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894967">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4894993">if</span>&nbsp;<span class="ident" id="4894996">w</span>&nbsp;<span class="op" id="4894998">&gt;=</span>&nbsp;<span class="builtinfunc" id="4895001">len</span><span class="op" id="4895004">(</span><span class="ident" id="4895005">b</span><span class="op" id="4895006">)</span><span class="op" id="4895007">-</span><span class="num" id="4895008">2</span><span class="op" id="4895009">*</span><span class="ident" id="4895010">utf8</span><span class="op" id="4895014">.</span><span class="ident" id="4895015">UTFMax</span>&nbsp;<span class="op" id="4895022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895027">nb</span>&nbsp;<span class="op" id="4895030">:=</span>&nbsp;<span class="builtinfunc" id="4895033">make</span><span class="op" id="4895037">(</span><span class="op" id="4895038">[</span><span class="op" id="4895039">]</span><span class="builtintype" id="4895040">byte</span><span class="op" id="4895044">,</span>&nbsp;<span class="op" id="4895046">(</span><span class="builtinfunc" id="4895047">len</span><span class="op" id="4895050">(</span><span class="ident" id="4895051">b</span><span class="op" id="4895052">)</span><span class="op" id="4895053">+</span><span class="ident" id="4895054">utf8</span><span class="op" id="4895058">.</span><span class="ident" id="4895059">UTFMax</span><span class="op" id="4895065">)</span><span class="op" id="4895066">*</span><span class="num" id="4895067">2</span><span class="op" id="4895068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4895073">copy</span><span class="op" id="4895077">(</span><span class="ident" id="4895078">nb</span><span class="op" id="4895080">,</span>&nbsp;<span class="ident" id="4895082">b</span><span class="op" id="4895083">[</span><span class="num" id="4895084">0</span><span class="op" id="4895085">:</span><span class="ident" id="4895086">w</span><span class="op" id="4895087">]</span><span class="op" id="4895088">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895093">b</span>&nbsp;<span class="op" id="4895095">=</span>&nbsp;<span class="ident" id="4895097">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895106">switch</span>&nbsp;<span class="ident" id="4895113">c</span>&nbsp;<span class="op" id="4895115">:=</span>&nbsp;<span class="ident" id="4895118">s</span><span class="op" id="4895119">[</span><span class="ident" id="4895120">r</span><span class="op" id="4895121">]</span><span class="op" id="4895122">;</span>&nbsp;<span class="op" id="4895124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895128">case</span>&nbsp;<span class="ident" id="4895133">c</span>&nbsp;<span class="op" id="4895135">==</span>&nbsp;<span class="string" id="4895138">&#39;\\&#39;</span><span class="op" id="4895142">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895147">r</span><span class="op" id="4895148">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895154">if</span>&nbsp;<span class="ident" id="4895157">r</span>&nbsp;<span class="op" id="4895159">&gt;=</span>&nbsp;<span class="builtinfunc" id="4895162">len</span><span class="op" id="4895165">(</span><span class="ident" id="4895166">s</span><span class="op" id="4895167">)</span>&nbsp;<span class="op" id="4895169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895175">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895190">switch</span>&nbsp;<span class="ident" id="4895197">s</span><span class="op" id="4895198">[</span><span class="ident" id="4895199">r</span><span class="op" id="4895200">]</span>&nbsp;<span class="op" id="4895202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895207">default</span><span class="op" id="4895214">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895220">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895230">case</span>&nbsp;<span class="string" id="4895235">&#39;&#34;&#39;</span><span class="op" id="4895238">,</span>&nbsp;<span class="string" id="4895240">&#39;\\&#39;</span><span class="op" id="4895244">,</span>&nbsp;<span class="string" id="4895246">&#39;/&#39;</span><span class="op" id="4895249">,</span>&nbsp;<span class="string" id="4895251">&#39;\&#39;&#39;</span><span class="op" id="4895255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895261">b</span><span class="op" id="4895262">[</span><span class="ident" id="4895263">w</span><span class="op" id="4895264">]</span>&nbsp;<span class="op" id="4895266">=</span>&nbsp;<span class="ident" id="4895268">s</span><span class="op" id="4895269">[</span><span class="ident" id="4895270">r</span><span class="op" id="4895271">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895277">r</span><span class="op" id="4895278">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895285">w</span><span class="op" id="4895286">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895292">case</span>&nbsp;<span class="string" id="4895297">&#39;b&#39;</span><span class="op" id="4895300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895306">b</span><span class="op" id="4895307">[</span><span class="ident" id="4895308">w</span><span class="op" id="4895309">]</span>&nbsp;<span class="op" id="4895311">=</span>&nbsp;<span class="string" id="4895313">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895322">r</span><span class="op" id="4895323">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895330">w</span><span class="op" id="4895331">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895337">case</span>&nbsp;<span class="string" id="4895342">&#39;f&#39;</span><span class="op" id="4895345">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895351">b</span><span class="op" id="4895352">[</span><span class="ident" id="4895353">w</span><span class="op" id="4895354">]</span>&nbsp;<span class="op" id="4895356">=</span>&nbsp;<span class="string" id="4895358">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895367">r</span><span class="op" id="4895368">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895375">w</span><span class="op" id="4895376">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895382">case</span>&nbsp;<span class="string" id="4895387">&#39;n&#39;</span><span class="op" id="4895390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895396">b</span><span class="op" id="4895397">[</span><span class="ident" id="4895398">w</span><span class="op" id="4895399">]</span>&nbsp;<span class="op" id="4895401">=</span>&nbsp;<span class="string" id="4895403">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895412">r</span><span class="op" id="4895413">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895420">w</span><span class="op" id="4895421">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895427">case</span>&nbsp;<span class="string" id="4895432">&#39;r&#39;</span><span class="op" id="4895435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895441">b</span><span class="op" id="4895442">[</span><span class="ident" id="4895443">w</span><span class="op" id="4895444">]</span>&nbsp;<span class="op" id="4895446">=</span>&nbsp;<span class="string" id="4895448">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895457">r</span><span class="op" id="4895458">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895465">w</span><span class="op" id="4895466">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895472">case</span>&nbsp;<span class="string" id="4895477">&#39;t&#39;</span><span class="op" id="4895480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895486">b</span><span class="op" id="4895487">[</span><span class="ident" id="4895488">w</span><span class="op" id="4895489">]</span>&nbsp;<span class="op" id="4895491">=</span>&nbsp;<span class="string" id="4895493">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895502">r</span><span class="op" id="4895503">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895510">w</span><span class="op" id="4895511">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895517">case</span>&nbsp;<span class="string" id="4895522">&#39;u&#39;</span><span class="op" id="4895525">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895531">r</span><span class="op" id="4895532">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895539">rr</span>&nbsp;<span class="op" id="4895542">:=</span>&nbsp;<span class="ident" id="4895545">getu4</span><span class="op" id="4895550">(</span><span class="ident" id="4895551">s</span><span class="op" id="4895552">[</span><span class="ident" id="4895553">r</span><span class="op" id="4895554">:</span><span class="op" id="4895555">]</span><span class="op" id="4895556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895562">if</span>&nbsp;<span class="ident" id="4895565">rr</span>&nbsp;<span class="op" id="4895568">&lt;</span>&nbsp;<span class="num" id="4895570">0</span>&nbsp;<span class="op" id="4895572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895579">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895596">r</span>&nbsp;<span class="op" id="4895598">+=</span>&nbsp;<span class="num" id="4895601">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895607">if</span>&nbsp;<span class="ident" id="4895610">utf16</span><span class="op" id="4895615">.</span><span class="ident" id="4895616">IsSurrogate</span><span class="op" id="4895627">(</span><span class="ident" id="4895628">rr</span><span class="op" id="4895630">)</span>&nbsp;<span class="op" id="4895632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895639">rr1</span>&nbsp;<span class="op" id="4895643">:=</span>&nbsp;<span class="ident" id="4895646">getu4</span><span class="op" id="4895651">(</span><span class="ident" id="4895652">s</span><span class="op" id="4895653">[</span><span class="ident" id="4895654">r</span><span class="op" id="4895655">:</span><span class="op" id="4895656">]</span><span class="op" id="4895657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895664">if</span>&nbsp;<span class="ident" id="4895667">dec</span>&nbsp;<span class="op" id="4895671">:=</span>&nbsp;<span class="ident" id="4895674">utf16</span><span class="op" id="4895679">.</span><span class="ident" id="4895680">DecodeRune</span><span class="op" id="4895690">(</span><span class="ident" id="4895691">rr</span><span class="op" id="4895693">,</span>&nbsp;<span class="ident" id="4895695">rr1</span><span class="op" id="4895698">)</span><span class="op" id="4895699">;</span>&nbsp;<span class="ident" id="4895701">dec</span>&nbsp;<span class="op" id="4895705">!=</span>&nbsp;<span class="ident" id="4895708">unicode</span><span class="op" id="4895715">.</span><span class="ident" id="4895716">ReplacementChar</span>&nbsp;<span class="op" id="4895732">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4895740">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895772">r</span>&nbsp;<span class="op" id="4895774">+=</span>&nbsp;<span class="num" id="4895777">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895785">w</span>&nbsp;<span class="op" id="4895787">+=</span>&nbsp;<span class="ident" id="4895790">utf8</span><span class="op" id="4895794">.</span><span class="ident" id="4895795">EncodeRune</span><span class="op" id="4895805">(</span><span class="ident" id="4895806">b</span><span class="op" id="4895807">[</span><span class="ident" id="4895808">w</span><span class="op" id="4895809">:</span><span class="op" id="4895810">]</span><span class="op" id="4895811">,</span>&nbsp;<span class="ident" id="4895813">dec</span><span class="op" id="4895816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895824">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895835">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4895842">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895900">rr</span>&nbsp;<span class="op" id="4895903">=</span>&nbsp;<span class="ident" id="4895905">unicode</span><span class="op" id="4895912">.</span><span class="ident" id="4895913">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895939">w</span>&nbsp;<span class="op" id="4895941">+=</span>&nbsp;<span class="ident" id="4895944">utf8</span><span class="op" id="4895948">.</span><span class="ident" id="4895949">EncodeRune</span><span class="op" id="4895959">(</span><span class="ident" id="4895960">b</span><span class="op" id="4895961">[</span><span class="ident" id="4895962">w</span><span class="op" id="4895963">:</span><span class="op" id="4895964">]</span><span class="op" id="4895965">,</span>&nbsp;<span class="ident" id="4895967">rr</span><span class="op" id="4895969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4895974">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4895979">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896023">case</span>&nbsp;<span class="ident" id="4896028">c</span>&nbsp;<span class="op" id="4896030">==</span>&nbsp;<span class="string" id="4896033">&#39;&#34;&#39;</span><span class="op" id="4896036">,</span>&nbsp;<span class="ident" id="4896038">c</span>&nbsp;<span class="op" id="4896040">&lt;</span>&nbsp;<span class="string" id="4896042">&#39;&nbsp;&#39;</span><span class="op" id="4896045">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896050">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4896060">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896071">case</span>&nbsp;<span class="ident" id="4896076">c</span>&nbsp;<span class="op" id="4896078">&lt;</span>&nbsp;<span class="ident" id="4896080">utf8</span><span class="op" id="4896084">.</span><span class="ident" id="4896085">RuneSelf</span><span class="op" id="4896093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896098">b</span><span class="op" id="4896099">[</span><span class="ident" id="4896100">w</span><span class="op" id="4896101">]</span>&nbsp;<span class="op" id="4896103">=</span>&nbsp;<span class="ident" id="4896105">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896110">r</span><span class="op" id="4896111">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896117">w</span><span class="op" id="4896118">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4896124">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896158">default</span><span class="op" id="4896165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896170">rr</span><span class="op" id="4896172">,</span>&nbsp;<span class="ident" id="4896174">size</span>&nbsp;<span class="op" id="4896179">:=</span>&nbsp;<span class="ident" id="4896182">utf8</span><span class="op" id="4896186">.</span><span class="ident" id="4896187">DecodeRune</span><span class="op" id="4896197">(</span><span class="ident" id="4896198">s</span><span class="op" id="4896199">[</span><span class="ident" id="4896200">r</span><span class="op" id="4896201">:</span><span class="op" id="4896202">]</span><span class="op" id="4896203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896208">r</span>&nbsp;<span class="op" id="4896210">+=</span>&nbsp;<span class="ident" id="4896213">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896221">w</span>&nbsp;<span class="op" id="4896223">+=</span>&nbsp;<span class="ident" id="4896226">utf8</span><span class="op" id="4896230">.</span><span class="ident" id="4896231">EncodeRune</span><span class="op" id="4896241">(</span><span class="ident" id="4896242">b</span><span class="op" id="4896243">[</span><span class="ident" id="4896244">w</span><span class="op" id="4896245">:</span><span class="op" id="4896246">]</span><span class="op" id="4896247">,</span>&nbsp;<span class="ident" id="4896249">rr</span><span class="op" id="4896251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896261">return</span>&nbsp;<span class="ident" id="4896268">b</span><span class="op" id="4896269">[</span><span class="num" id="4896270">0</span><span class="op" id="4896271">:</span><span class="ident" id="4896272">w</span><span class="op" id="4896273">]</span><span class="op" id="4896274">,</span>&nbsp;<span class="builtintype" id="4896276">true</span><br>
<span class="lineno"></span><span class="op" id="4896281">}</span>
</div>
</body>
</html>
