<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8412077">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8412133">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8412187">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8412238">package</span>&nbsp;<span class="ident" id="8412246">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8412257">import</span>&nbsp;<span class="op" id="8412264">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412267">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412276">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412285">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412291">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412302">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8412313">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8412323">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8412326">type</span>&nbsp;<span class="ident" id="8412331">canonicalHeaderKeyTest</span>&nbsp;<span class="keyword" id="8412354">struct</span>&nbsp;<span class="op" id="8412361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8412364">in</span><span class="op" id="8412366">,</span>&nbsp;<span class="ident" id="8412368">out</span>&nbsp;<span class="builtintype" id="8412372">string</span><br>
<span class="lineno"></span><span class="op" id="8412379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="8412382">var</span>&nbsp;<span class="ident" id="8412386">canonicalHeaderKeyTests</span>&nbsp;<span class="op" id="8412410">=</span>&nbsp;<span class="op" id="8412412">[</span><span class="op" id="8412413">]</span><span class="ident" id="8412414">canonicalHeaderKeyTest</span><span class="op" id="8412436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412439">{</span><span class="string" id="8412440">&#34;a-b-c&#34;</span><span class="op" id="8412447">,</span>&nbsp;<span class="string" id="8412449">&#34;A-B-C&#34;</span><span class="op" id="8412456">}</span><span class="op" id="8412457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412460">{</span><span class="string" id="8412461">&#34;a-1-c&#34;</span><span class="op" id="8412468">,</span>&nbsp;<span class="string" id="8412470">&#34;A-1-C&#34;</span><span class="op" id="8412477">}</span><span class="op" id="8412478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412481">{</span><span class="string" id="8412482">&#34;User-Agent&#34;</span><span class="op" id="8412494">,</span>&nbsp;<span class="string" id="8412496">&#34;User-Agent&#34;</span><span class="op" id="8412508">}</span><span class="op" id="8412509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412512">{</span><span class="string" id="8412513">&#34;uSER-aGENT&#34;</span><span class="op" id="8412525">,</span>&nbsp;<span class="string" id="8412527">&#34;User-Agent&#34;</span><span class="op" id="8412539">}</span><span class="op" id="8412540">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412543">{</span><span class="string" id="8412544">&#34;user-agent&#34;</span><span class="op" id="8412556">,</span>&nbsp;<span class="string" id="8412558">&#34;User-Agent&#34;</span><span class="op" id="8412570">}</span><span class="op" id="8412571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412574">{</span><span class="string" id="8412575">&#34;USER-AGENT&#34;</span><span class="op" id="8412587">,</span>&nbsp;<span class="string" id="8412589">&#34;User-Agent&#34;</span><span class="op" id="8412601">}</span><span class="op" id="8412602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412605">{</span><span class="string" id="8412606">&#34;üser-agenT&#34;</span><span class="op" id="8412619">,</span>&nbsp;<span class="string" id="8412621">&#34;üser-Agent&#34;</span><span class="op" id="8412634">}</span><span class="op" id="8412635">,</span>&nbsp;<span class="comment" id="8412637">//&nbsp;non-ASCII&nbsp;unchanged</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8412662">//&nbsp;This&nbsp;caused&nbsp;a&nbsp;panic&nbsp;due&nbsp;to&nbsp;mishandling&nbsp;of&nbsp;a&nbsp;space:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412717">{</span><span class="string" id="8412718">&#34;C&nbsp;Ontent-Transfer-Encoding&#34;</span><span class="op" id="8412746">,</span>&nbsp;<span class="string" id="8412748">&#34;C-Ontent-Transfer-Encoding&#34;</span><span class="op" id="8412776">}</span><span class="op" id="8412777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412780">{</span><span class="string" id="8412781">&#34;foo&nbsp;bar&#34;</span><span class="op" id="8412790">,</span>&nbsp;<span class="string" id="8412792">&#34;Foo-Bar&#34;</span><span class="op" id="8412801">}</span><span class="op" id="8412802">,</span><br>
<span class="lineno"></span><span class="op" id="8412804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8412807">func</span>&nbsp;<span class="ident" id="8412812">TestCanonicalMIMEHeaderKey</span><span class="op" id="8412838">(</span><span class="ident" id="8412839">t</span>&nbsp;<span class="op" id="8412841">*</span><span class="ident" id="8412842">testing</span><span class="op" id="8412849">.</span><span class="ident" id="8412850">T</span><span class="op" id="8412851">)</span>&nbsp;<span class="op" id="8412853">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8412856">for</span>&nbsp;<span class="ident" id="8412860">_</span><span class="op" id="8412861">,</span>&nbsp;<span class="ident" id="8412863">tt</span>&nbsp;<span class="op" id="8412866">:=</span>&nbsp;<span class="keyword" id="8412869">range</span>&nbsp;<span class="ident" id="8412875">canonicalHeaderKeyTests</span>&nbsp;<span class="op" id="8412899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8412903">if</span>&nbsp;<span class="ident" id="8412906">s</span>&nbsp;<span class="op" id="8412908">:=</span>&nbsp;<span class="ident" id="8412911">CanonicalMIMEHeaderKey</span><span class="op" id="8412933">(</span><span class="ident" id="8412934">tt</span><span class="op" id="8412936">.</span><span class="ident" id="8412937">in</span><span class="op" id="8412939">)</span><span class="op" id="8412940">;</span>&nbsp;<span class="ident" id="8412942">s</span>&nbsp;<span class="op" id="8412944">!=</span>&nbsp;<span class="ident" id="8412947">tt</span><span class="op" id="8412949">.</span><span class="ident" id="8412950">out</span>&nbsp;<span class="op" id="8412954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8412959">t</span><span class="op" id="8412960">.</span><span class="ident" id="8412961">Errorf</span><span class="op" id="8412967">(</span><span class="string" id="8412968">&#34;CanonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8413010">,</span>&nbsp;<span class="ident" id="8413012">tt</span><span class="op" id="8413014">.</span><span class="ident" id="8413015">in</span><span class="op" id="8413017">,</span>&nbsp;<span class="ident" id="8413019">s</span><span class="op" id="8413020">,</span>&nbsp;<span class="ident" id="8413022">tt</span><span class="op" id="8413024">.</span><span class="ident" id="8413025">out</span><span class="op" id="8413028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413035">}</span><br>
<span class="lineno">40</span><span class="op" id="8413037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8413040">func</span>&nbsp;<span class="ident" id="8413045">reader</span><span class="op" id="8413051">(</span><span class="ident" id="8413052">s</span>&nbsp;<span class="builtintype" id="8413054">string</span><span class="op" id="8413060">)</span>&nbsp;<span class="op" id="8413062">*</span><span class="ident" id="8413063">Reader</span>&nbsp;<span class="op" id="8413070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413073">return</span>&nbsp;<span class="ident" id="8413080">NewReader</span><span class="op" id="8413089">(</span><span class="ident" id="8413090">bufio</span><span class="op" id="8413095">.</span><span class="ident" id="8413096">NewReader</span><span class="op" id="8413105">(</span><span class="ident" id="8413106">strings</span><span class="op" id="8413113">.</span><span class="ident" id="8413114">NewReader</span><span class="op" id="8413123">(</span><span class="ident" id="8413124">s</span><span class="op" id="8413125">)</span><span class="op" id="8413126">)</span><span class="op" id="8413127">)</span><br>
<span class="lineno"></span><span class="op" id="8413129">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8413132">func</span>&nbsp;<span class="ident" id="8413137">TestReadLine</span><span class="op" id="8413149">(</span><span class="ident" id="8413150">t</span>&nbsp;<span class="op" id="8413152">*</span><span class="ident" id="8413153">testing</span><span class="op" id="8413160">.</span><span class="ident" id="8413161">T</span><span class="op" id="8413162">)</span>&nbsp;<span class="op" id="8413164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413167">r</span>&nbsp;<span class="op" id="8413169">:=</span>&nbsp;<span class="ident" id="8413172">reader</span><span class="op" id="8413178">(</span><span class="string" id="8413179">&#34;line1\nline2\n&#34;</span><span class="op" id="8413195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413198">s</span><span class="op" id="8413199">,</span>&nbsp;<span class="ident" id="8413201">err</span>&nbsp;<span class="op" id="8413205">:=</span>&nbsp;<span class="ident" id="8413208">r</span><span class="op" id="8413209">.</span><span class="ident" id="8413210">ReadLine</span><span class="op" id="8413218">(</span><span class="op" id="8413219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413222">if</span>&nbsp;<span class="ident" id="8413225">s</span>&nbsp;<span class="op" id="8413227">!=</span>&nbsp;<span class="string" id="8413230">&#34;line1&#34;</span>&nbsp;<span class="op" id="8413238">||</span>&nbsp;<span class="ident" id="8413241">err</span>&nbsp;<span class="op" id="8413245">!=</span>&nbsp;<span class="builtintype" id="8413248">nil</span>&nbsp;<span class="op" id="8413252">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413256">t</span><span class="op" id="8413257">.</span><span class="ident" id="8413258">Fatalf</span><span class="op" id="8413264">(</span><span class="string" id="8413265">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413281">,</span>&nbsp;<span class="ident" id="8413283">s</span><span class="op" id="8413284">,</span>&nbsp;<span class="ident" id="8413286">err</span><span class="op" id="8413289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413295">s</span><span class="op" id="8413296">,</span>&nbsp;<span class="ident" id="8413298">err</span>&nbsp;<span class="op" id="8413302">=</span>&nbsp;<span class="ident" id="8413304">r</span><span class="op" id="8413305">.</span><span class="ident" id="8413306">ReadLine</span><span class="op" id="8413314">(</span><span class="op" id="8413315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413318">if</span>&nbsp;<span class="ident" id="8413321">s</span>&nbsp;<span class="op" id="8413323">!=</span>&nbsp;<span class="string" id="8413326">&#34;line2&#34;</span>&nbsp;<span class="op" id="8413334">||</span>&nbsp;<span class="ident" id="8413337">err</span>&nbsp;<span class="op" id="8413341">!=</span>&nbsp;<span class="builtintype" id="8413344">nil</span>&nbsp;<span class="op" id="8413348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413352">t</span><span class="op" id="8413353">.</span><span class="ident" id="8413354">Fatalf</span><span class="op" id="8413360">(</span><span class="string" id="8413361">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413377">,</span>&nbsp;<span class="ident" id="8413379">s</span><span class="op" id="8413380">,</span>&nbsp;<span class="ident" id="8413382">err</span><span class="op" id="8413385">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413391">s</span><span class="op" id="8413392">,</span>&nbsp;<span class="ident" id="8413394">err</span>&nbsp;<span class="op" id="8413398">=</span>&nbsp;<span class="ident" id="8413400">r</span><span class="op" id="8413401">.</span><span class="ident" id="8413402">ReadLine</span><span class="op" id="8413410">(</span><span class="op" id="8413411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413414">if</span>&nbsp;<span class="ident" id="8413417">s</span>&nbsp;<span class="op" id="8413419">!=</span>&nbsp;<span class="string" id="8413422">&#34;&#34;</span>&nbsp;<span class="op" id="8413425">||</span>&nbsp;<span class="ident" id="8413428">err</span>&nbsp;<span class="op" id="8413432">!=</span>&nbsp;<span class="ident" id="8413435">io</span><span class="op" id="8413437">.</span><span class="ident" id="8413438">EOF</span>&nbsp;<span class="op" id="8413442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413446">t</span><span class="op" id="8413447">.</span><span class="ident" id="8413448">Fatalf</span><span class="op" id="8413454">(</span><span class="string" id="8413455">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413468">,</span>&nbsp;<span class="ident" id="8413470">s</span><span class="op" id="8413471">,</span>&nbsp;<span class="ident" id="8413473">err</span><span class="op" id="8413476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413479">}</span><br>
<span class="lineno">60</span><span class="op" id="8413481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8413484">func</span>&nbsp;<span class="ident" id="8413489">TestReadContinuedLine</span><span class="op" id="8413510">(</span><span class="ident" id="8413511">t</span>&nbsp;<span class="op" id="8413513">*</span><span class="ident" id="8413514">testing</span><span class="op" id="8413521">.</span><span class="ident" id="8413522">T</span><span class="op" id="8413523">)</span>&nbsp;<span class="op" id="8413525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413528">r</span>&nbsp;<span class="op" id="8413530">:=</span>&nbsp;<span class="ident" id="8413533">reader</span><span class="op" id="8413539">(</span><span class="string" id="8413540">&#34;line1\nline\n&nbsp;2\nline3\n&#34;</span><span class="op" id="8413566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413569">s</span><span class="op" id="8413570">,</span>&nbsp;<span class="ident" id="8413572">err</span>&nbsp;<span class="op" id="8413576">:=</span>&nbsp;<span class="ident" id="8413579">r</span><span class="op" id="8413580">.</span><span class="ident" id="8413581">ReadContinuedLine</span><span class="op" id="8413598">(</span><span class="op" id="8413599">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413602">if</span>&nbsp;<span class="ident" id="8413605">s</span>&nbsp;<span class="op" id="8413607">!=</span>&nbsp;<span class="string" id="8413610">&#34;line1&#34;</span>&nbsp;<span class="op" id="8413618">||</span>&nbsp;<span class="ident" id="8413621">err</span>&nbsp;<span class="op" id="8413625">!=</span>&nbsp;<span class="builtintype" id="8413628">nil</span>&nbsp;<span class="op" id="8413632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413636">t</span><span class="op" id="8413637">.</span><span class="ident" id="8413638">Fatalf</span><span class="op" id="8413644">(</span><span class="string" id="8413645">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413661">,</span>&nbsp;<span class="ident" id="8413663">s</span><span class="op" id="8413664">,</span>&nbsp;<span class="ident" id="8413666">err</span><span class="op" id="8413669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413675">s</span><span class="op" id="8413676">,</span>&nbsp;<span class="ident" id="8413678">err</span>&nbsp;<span class="op" id="8413682">=</span>&nbsp;<span class="ident" id="8413684">r</span><span class="op" id="8413685">.</span><span class="ident" id="8413686">ReadContinuedLine</span><span class="op" id="8413703">(</span><span class="op" id="8413704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413707">if</span>&nbsp;<span class="ident" id="8413710">s</span>&nbsp;<span class="op" id="8413712">!=</span>&nbsp;<span class="string" id="8413715">&#34;line&nbsp;2&#34;</span>&nbsp;<span class="op" id="8413724">||</span>&nbsp;<span class="ident" id="8413727">err</span>&nbsp;<span class="op" id="8413731">!=</span>&nbsp;<span class="builtintype" id="8413734">nil</span>&nbsp;<span class="op" id="8413738">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413742">t</span><span class="op" id="8413743">.</span><span class="ident" id="8413744">Fatalf</span><span class="op" id="8413750">(</span><span class="string" id="8413751">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413767">,</span>&nbsp;<span class="ident" id="8413769">s</span><span class="op" id="8413770">,</span>&nbsp;<span class="ident" id="8413772">err</span><span class="op" id="8413775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413781">s</span><span class="op" id="8413782">,</span>&nbsp;<span class="ident" id="8413784">err</span>&nbsp;<span class="op" id="8413788">=</span>&nbsp;<span class="ident" id="8413790">r</span><span class="op" id="8413791">.</span><span class="ident" id="8413792">ReadContinuedLine</span><span class="op" id="8413809">(</span><span class="op" id="8413810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413813">if</span>&nbsp;<span class="ident" id="8413816">s</span>&nbsp;<span class="op" id="8413818">!=</span>&nbsp;<span class="string" id="8413821">&#34;line3&#34;</span>&nbsp;<span class="op" id="8413829">||</span>&nbsp;<span class="ident" id="8413832">err</span>&nbsp;<span class="op" id="8413836">!=</span>&nbsp;<span class="builtintype" id="8413839">nil</span>&nbsp;<span class="op" id="8413843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413847">t</span><span class="op" id="8413848">.</span><span class="ident" id="8413849">Fatalf</span><span class="op" id="8413855">(</span><span class="string" id="8413856">&#34;Line&nbsp;3:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413872">,</span>&nbsp;<span class="ident" id="8413874">s</span><span class="op" id="8413875">,</span>&nbsp;<span class="ident" id="8413877">err</span><span class="op" id="8413880">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413886">s</span><span class="op" id="8413887">,</span>&nbsp;<span class="ident" id="8413889">err</span>&nbsp;<span class="op" id="8413893">=</span>&nbsp;<span class="ident" id="8413895">r</span><span class="op" id="8413896">.</span><span class="ident" id="8413897">ReadContinuedLine</span><span class="op" id="8413914">(</span><span class="op" id="8413915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8413918">if</span>&nbsp;<span class="ident" id="8413921">s</span>&nbsp;<span class="op" id="8413923">!=</span>&nbsp;<span class="string" id="8413926">&#34;&#34;</span>&nbsp;<span class="op" id="8413929">||</span>&nbsp;<span class="ident" id="8413932">err</span>&nbsp;<span class="op" id="8413936">!=</span>&nbsp;<span class="ident" id="8413939">io</span><span class="op" id="8413941">.</span><span class="ident" id="8413942">EOF</span>&nbsp;<span class="op" id="8413946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8413950">t</span><span class="op" id="8413951">.</span><span class="ident" id="8413952">Fatalf</span><span class="op" id="8413958">(</span><span class="string" id="8413959">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8413972">,</span>&nbsp;<span class="ident" id="8413974">s</span><span class="op" id="8413975">,</span>&nbsp;<span class="ident" id="8413977">err</span><span class="op" id="8413980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8413983">}</span><br>
<span class="lineno">80</span><span class="op" id="8413985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8413988">func</span>&nbsp;<span class="ident" id="8413993">TestReadCodeLine</span><span class="op" id="8414009">(</span><span class="ident" id="8414010">t</span>&nbsp;<span class="op" id="8414012">*</span><span class="ident" id="8414013">testing</span><span class="op" id="8414020">.</span><span class="ident" id="8414021">T</span><span class="op" id="8414022">)</span>&nbsp;<span class="op" id="8414024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414027">r</span>&nbsp;<span class="op" id="8414029">:=</span>&nbsp;<span class="ident" id="8414032">reader</span><span class="op" id="8414038">(</span><span class="string" id="8414039">&#34;123&nbsp;hi\n234&nbsp;bye\n345&nbsp;no&nbsp;way\n&#34;</span><span class="op" id="8414070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414073">code</span><span class="op" id="8414077">,</span>&nbsp;<span class="ident" id="8414079">msg</span><span class="op" id="8414082">,</span>&nbsp;<span class="ident" id="8414084">err</span>&nbsp;<span class="op" id="8414088">:=</span>&nbsp;<span class="ident" id="8414091">r</span><span class="op" id="8414092">.</span><span class="ident" id="8414093">ReadCodeLine</span><span class="op" id="8414105">(</span><span class="num" id="8414106">0</span><span class="op" id="8414107">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414110">if</span>&nbsp;<span class="ident" id="8414113">code</span>&nbsp;<span class="op" id="8414118">!=</span>&nbsp;<span class="num" id="8414121">123</span>&nbsp;<span class="op" id="8414125">||</span>&nbsp;<span class="ident" id="8414128">msg</span>&nbsp;<span class="op" id="8414132">!=</span>&nbsp;<span class="string" id="8414135">&#34;hi&#34;</span>&nbsp;<span class="op" id="8414140">||</span>&nbsp;<span class="ident" id="8414143">err</span>&nbsp;<span class="op" id="8414147">!=</span>&nbsp;<span class="builtintype" id="8414150">nil</span>&nbsp;<span class="op" id="8414154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414158">t</span><span class="op" id="8414159">.</span><span class="ident" id="8414160">Fatalf</span><span class="op" id="8414166">(</span><span class="string" id="8414167">&#34;Line&nbsp;1:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8414187">,</span>&nbsp;<span class="ident" id="8414189">code</span><span class="op" id="8414193">,</span>&nbsp;<span class="ident" id="8414195">msg</span><span class="op" id="8414198">,</span>&nbsp;<span class="ident" id="8414200">err</span><span class="op" id="8414203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8414206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414209">code</span><span class="op" id="8414213">,</span>&nbsp;<span class="ident" id="8414215">msg</span><span class="op" id="8414218">,</span>&nbsp;<span class="ident" id="8414220">err</span>&nbsp;<span class="op" id="8414224">=</span>&nbsp;<span class="ident" id="8414226">r</span><span class="op" id="8414227">.</span><span class="ident" id="8414228">ReadCodeLine</span><span class="op" id="8414240">(</span><span class="num" id="8414241">23</span><span class="op" id="8414243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414246">if</span>&nbsp;<span class="ident" id="8414249">code</span>&nbsp;<span class="op" id="8414254">!=</span>&nbsp;<span class="num" id="8414257">234</span>&nbsp;<span class="op" id="8414261">||</span>&nbsp;<span class="ident" id="8414264">msg</span>&nbsp;<span class="op" id="8414268">!=</span>&nbsp;<span class="string" id="8414271">&#34;bye&#34;</span>&nbsp;<span class="op" id="8414277">||</span>&nbsp;<span class="ident" id="8414280">err</span>&nbsp;<span class="op" id="8414284">!=</span>&nbsp;<span class="builtintype" id="8414287">nil</span>&nbsp;<span class="op" id="8414291">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414295">t</span><span class="op" id="8414296">.</span><span class="ident" id="8414297">Fatalf</span><span class="op" id="8414303">(</span><span class="string" id="8414304">&#34;Line&nbsp;2:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8414324">,</span>&nbsp;<span class="ident" id="8414326">code</span><span class="op" id="8414330">,</span>&nbsp;<span class="ident" id="8414332">msg</span><span class="op" id="8414335">,</span>&nbsp;<span class="ident" id="8414337">err</span><span class="op" id="8414340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8414343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414346">code</span><span class="op" id="8414350">,</span>&nbsp;<span class="ident" id="8414352">msg</span><span class="op" id="8414355">,</span>&nbsp;<span class="ident" id="8414357">err</span>&nbsp;<span class="op" id="8414361">=</span>&nbsp;<span class="ident" id="8414363">r</span><span class="op" id="8414364">.</span><span class="ident" id="8414365">ReadCodeLine</span><span class="op" id="8414377">(</span><span class="num" id="8414378">346</span><span class="op" id="8414381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414384">if</span>&nbsp;<span class="ident" id="8414387">code</span>&nbsp;<span class="op" id="8414392">!=</span>&nbsp;<span class="num" id="8414395">345</span>&nbsp;<span class="op" id="8414399">||</span>&nbsp;<span class="ident" id="8414402">msg</span>&nbsp;<span class="op" id="8414406">!=</span>&nbsp;<span class="string" id="8414409">&#34;no&nbsp;way&#34;</span>&nbsp;<span class="op" id="8414418">||</span>&nbsp;<span class="ident" id="8414421">err</span>&nbsp;<span class="op" id="8414425">==</span>&nbsp;<span class="builtintype" id="8414428">nil</span>&nbsp;<span class="op" id="8414432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414436">t</span><span class="op" id="8414437">.</span><span class="ident" id="8414438">Fatalf</span><span class="op" id="8414444">(</span><span class="string" id="8414445">&#34;Line&nbsp;3:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8414465">,</span>&nbsp;<span class="ident" id="8414467">code</span><span class="op" id="8414471">,</span>&nbsp;<span class="ident" id="8414473">msg</span><span class="op" id="8414476">,</span>&nbsp;<span class="ident" id="8414478">err</span><span class="op" id="8414481">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8414484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414487">if</span>&nbsp;<span class="ident" id="8414490">e</span><span class="op" id="8414491">,</span>&nbsp;<span class="ident" id="8414493">ok</span>&nbsp;<span class="op" id="8414496">:=</span>&nbsp;<span class="ident" id="8414499">err</span><span class="op" id="8414502">.</span><span class="op" id="8414503">(</span><span class="op" id="8414504">*</span><span class="ident" id="8414505">Error</span><span class="op" id="8414510">)</span><span class="op" id="8414511">;</span>&nbsp;<span class="op" id="8414513">!</span><span class="ident" id="8414514">ok</span>&nbsp;<span class="op" id="8414517">||</span>&nbsp;<span class="ident" id="8414520">e</span><span class="op" id="8414521">.</span><span class="ident" id="8414522">Code</span>&nbsp;<span class="op" id="8414527">!=</span>&nbsp;<span class="ident" id="8414530">code</span>&nbsp;<span class="op" id="8414535">||</span>&nbsp;<span class="ident" id="8414538">e</span><span class="op" id="8414539">.</span><span class="ident" id="8414540">Msg</span>&nbsp;<span class="op" id="8414544">!=</span>&nbsp;<span class="ident" id="8414547">msg</span>&nbsp;<span class="op" id="8414551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414555">t</span><span class="op" id="8414556">.</span><span class="ident" id="8414557">Fatalf</span><span class="op" id="8414563">(</span><span class="string" id="8414564">&#34;Line&nbsp;3:&nbsp;wrong&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8414590">,</span>&nbsp;<span class="ident" id="8414592">err</span><span class="op" id="8414595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8414598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414601">code</span><span class="op" id="8414605">,</span>&nbsp;<span class="ident" id="8414607">msg</span><span class="op" id="8414610">,</span>&nbsp;<span class="ident" id="8414612">err</span>&nbsp;<span class="op" id="8414616">=</span>&nbsp;<span class="ident" id="8414618">r</span><span class="op" id="8414619">.</span><span class="ident" id="8414620">ReadCodeLine</span><span class="op" id="8414632">(</span><span class="num" id="8414633">1</span><span class="op" id="8414634">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414637">if</span>&nbsp;<span class="ident" id="8414640">code</span>&nbsp;<span class="op" id="8414645">!=</span>&nbsp;<span class="num" id="8414648">0</span>&nbsp;<span class="op" id="8414650">||</span>&nbsp;<span class="ident" id="8414653">msg</span>&nbsp;<span class="op" id="8414657">!=</span>&nbsp;<span class="string" id="8414660">&#34;&#34;</span>&nbsp;<span class="op" id="8414663">||</span>&nbsp;<span class="ident" id="8414666">err</span>&nbsp;<span class="op" id="8414670">!=</span>&nbsp;<span class="ident" id="8414673">io</span><span class="op" id="8414675">.</span><span class="ident" id="8414676">EOF</span>&nbsp;<span class="op" id="8414680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414684">t</span><span class="op" id="8414685">.</span><span class="ident" id="8414686">Fatalf</span><span class="op" id="8414692">(</span><span class="string" id="8414693">&#34;EOF:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="8414710">,</span>&nbsp;<span class="ident" id="8414712">code</span><span class="op" id="8414716">,</span>&nbsp;<span class="ident" id="8414718">msg</span><span class="op" id="8414721">,</span>&nbsp;<span class="ident" id="8414723">err</span><span class="op" id="8414726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8414729">}</span><br>
<span class="lineno"></span><span class="op" id="8414731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8414734">func</span>&nbsp;<span class="ident" id="8414739">TestReadDotLines</span><span class="op" id="8414755">(</span><span class="ident" id="8414756">t</span>&nbsp;<span class="op" id="8414758">*</span><span class="ident" id="8414759">testing</span><span class="op" id="8414766">.</span><span class="ident" id="8414767">T</span><span class="op" id="8414768">)</span>&nbsp;<span class="op" id="8414770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414773">r</span>&nbsp;<span class="op" id="8414775">:=</span>&nbsp;<span class="ident" id="8414778">reader</span><span class="op" id="8414784">(</span><span class="string" id="8414785">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanother\n&#34;</span><span class="op" id="8414848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414851">s</span><span class="op" id="8414852">,</span>&nbsp;<span class="ident" id="8414854">err</span>&nbsp;<span class="op" id="8414858">:=</span>&nbsp;<span class="ident" id="8414861">r</span><span class="op" id="8414862">.</span><span class="ident" id="8414863">ReadDotLines</span><span class="op" id="8414875">(</span><span class="op" id="8414876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414879">want</span>&nbsp;<span class="op" id="8414884">:=</span>&nbsp;<span class="op" id="8414887">[</span><span class="op" id="8414888">]</span><span class="builtintype" id="8414889">string</span><span class="op" id="8414895">{</span><span class="string" id="8414896">&#34;dotlines&#34;</span><span class="op" id="8414906">,</span>&nbsp;<span class="string" id="8414908">&#34;foo&#34;</span><span class="op" id="8414913">,</span>&nbsp;<span class="string" id="8414915">&#34;.bar&#34;</span><span class="op" id="8414921">,</span>&nbsp;<span class="string" id="8414923">&#34;..baz&#34;</span><span class="op" id="8414930">,</span>&nbsp;<span class="string" id="8414932">&#34;quux&#34;</span><span class="op" id="8414938">,</span>&nbsp;<span class="string" id="8414940">&#34;&#34;</span><span class="op" id="8414942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8414945">if</span>&nbsp;<span class="op" id="8414948">!</span><span class="ident" id="8414949">reflect</span><span class="op" id="8414956">.</span><span class="ident" id="8414957">DeepEqual</span><span class="op" id="8414966">(</span><span class="ident" id="8414967">s</span><span class="op" id="8414968">,</span>&nbsp;<span class="ident" id="8414970">want</span><span class="op" id="8414974">)</span>&nbsp;<span class="op" id="8414976">||</span>&nbsp;<span class="ident" id="8414979">err</span>&nbsp;<span class="op" id="8414983">!=</span>&nbsp;<span class="builtintype" id="8414986">nil</span>&nbsp;<span class="op" id="8414990">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8414994">t</span><span class="op" id="8414995">.</span><span class="ident" id="8414996">Fatalf</span><span class="op" id="8415002">(</span><span class="string" id="8415003">&#34;ReadDotLines:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8415025">,</span>&nbsp;<span class="ident" id="8415027">s</span><span class="op" id="8415028">,</span>&nbsp;<span class="ident" id="8415030">err</span><span class="op" id="8415033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8415036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415040">s</span><span class="op" id="8415041">,</span>&nbsp;<span class="ident" id="8415043">err</span>&nbsp;<span class="op" id="8415047">=</span>&nbsp;<span class="ident" id="8415049">r</span><span class="op" id="8415050">.</span><span class="ident" id="8415051">ReadDotLines</span><span class="op" id="8415063">(</span><span class="op" id="8415064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415067">want</span>&nbsp;<span class="op" id="8415072">=</span>&nbsp;<span class="op" id="8415074">[</span><span class="op" id="8415075">]</span><span class="builtintype" id="8415076">string</span><span class="op" id="8415082">{</span><span class="string" id="8415083">&#34;another&#34;</span><span class="op" id="8415092">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8415095">if</span>&nbsp;<span class="op" id="8415098">!</span><span class="ident" id="8415099">reflect</span><span class="op" id="8415106">.</span><span class="ident" id="8415107">DeepEqual</span><span class="op" id="8415116">(</span><span class="ident" id="8415117">s</span><span class="op" id="8415118">,</span>&nbsp;<span class="ident" id="8415120">want</span><span class="op" id="8415124">)</span>&nbsp;<span class="op" id="8415126">||</span>&nbsp;<span class="ident" id="8415129">err</span>&nbsp;<span class="op" id="8415133">!=</span>&nbsp;<span class="ident" id="8415136">io</span><span class="op" id="8415138">.</span><span class="ident" id="8415139">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="8415156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415160">t</span><span class="op" id="8415161">.</span><span class="ident" id="8415162">Fatalf</span><span class="op" id="8415168">(</span><span class="string" id="8415169">&#34;ReadDotLines2:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8415192">,</span>&nbsp;<span class="ident" id="8415194">s</span><span class="op" id="8415195">,</span>&nbsp;<span class="ident" id="8415197">err</span><span class="op" id="8415200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8415203">}</span><br>
<span class="lineno"></span><span class="op" id="8415205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="8415208">func</span>&nbsp;<span class="ident" id="8415213">TestReadDotBytes</span><span class="op" id="8415229">(</span><span class="ident" id="8415230">t</span>&nbsp;<span class="op" id="8415232">*</span><span class="ident" id="8415233">testing</span><span class="op" id="8415240">.</span><span class="ident" id="8415241">T</span><span class="op" id="8415242">)</span>&nbsp;<span class="op" id="8415244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415247">r</span>&nbsp;<span class="op" id="8415249">:=</span>&nbsp;<span class="ident" id="8415252">reader</span><span class="op" id="8415258">(</span><span class="string" id="8415259">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanot.her\r\n&#34;</span><span class="op" id="8415325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415328">b</span><span class="op" id="8415329">,</span>&nbsp;<span class="ident" id="8415331">err</span>&nbsp;<span class="op" id="8415335">:=</span>&nbsp;<span class="ident" id="8415338">r</span><span class="op" id="8415339">.</span><span class="ident" id="8415340">ReadDotBytes</span><span class="op" id="8415352">(</span><span class="op" id="8415353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415356">want</span>&nbsp;<span class="op" id="8415361">:=</span>&nbsp;<span class="op" id="8415364">[</span><span class="op" id="8415365">]</span><span class="builtintype" id="8415366">byte</span><span class="op" id="8415370">(</span><span class="string" id="8415371">&#34;dotlines\nfoo\n.bar\n..baz\nquux\n\n&#34;</span><span class="op" id="8415409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8415412">if</span>&nbsp;<span class="op" id="8415415">!</span><span class="ident" id="8415416">reflect</span><span class="op" id="8415423">.</span><span class="ident" id="8415424">DeepEqual</span><span class="op" id="8415433">(</span><span class="ident" id="8415434">b</span><span class="op" id="8415435">,</span>&nbsp;<span class="ident" id="8415437">want</span><span class="op" id="8415441">)</span>&nbsp;<span class="op" id="8415443">||</span>&nbsp;<span class="ident" id="8415446">err</span>&nbsp;<span class="op" id="8415450">!=</span>&nbsp;<span class="builtintype" id="8415453">nil</span>&nbsp;<span class="op" id="8415457">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415461">t</span><span class="op" id="8415462">.</span><span class="ident" id="8415463">Fatalf</span><span class="op" id="8415469">(</span><span class="string" id="8415470">&#34;ReadDotBytes:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="8415492">,</span>&nbsp;<span class="ident" id="8415494">b</span><span class="op" id="8415495">,</span>&nbsp;<span class="ident" id="8415497">err</span><span class="op" id="8415500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8415503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415507">b</span><span class="op" id="8415508">,</span>&nbsp;<span class="ident" id="8415510">err</span>&nbsp;<span class="op" id="8415514">=</span>&nbsp;<span class="ident" id="8415516">r</span><span class="op" id="8415517">.</span><span class="ident" id="8415518">ReadDotBytes</span><span class="op" id="8415530">(</span><span class="op" id="8415531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415534">want</span>&nbsp;<span class="op" id="8415539">=</span>&nbsp;<span class="op" id="8415541">[</span><span class="op" id="8415542">]</span><span class="builtintype" id="8415543">byte</span><span class="op" id="8415547">(</span><span class="string" id="8415548">&#34;anot.her\n&#34;</span><span class="op" id="8415560">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8415563">if</span>&nbsp;<span class="op" id="8415566">!</span><span class="ident" id="8415567">reflect</span><span class="op" id="8415574">.</span><span class="ident" id="8415575">DeepEqual</span><span class="op" id="8415584">(</span><span class="ident" id="8415585">b</span><span class="op" id="8415586">,</span>&nbsp;<span class="ident" id="8415588">want</span><span class="op" id="8415592">)</span>&nbsp;<span class="op" id="8415594">||</span>&nbsp;<span class="ident" id="8415597">err</span>&nbsp;<span class="op" id="8415601">!=</span>&nbsp;<span class="ident" id="8415604">io</span><span class="op" id="8415606">.</span><span class="ident" id="8415607">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="8415624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415628">t</span><span class="op" id="8415629">.</span><span class="ident" id="8415630">Fatalf</span><span class="op" id="8415636">(</span><span class="string" id="8415637">&#34;ReadDotBytes2:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="8415660">,</span>&nbsp;<span class="ident" id="8415662">b</span><span class="op" id="8415663">,</span>&nbsp;<span class="ident" id="8415665">err</span><span class="op" id="8415668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8415671">}</span><br>
<span class="lineno"></span><span class="op" id="8415673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8415676">func</span>&nbsp;<span class="ident" id="8415681">TestReadMIMEHeader</span><span class="op" id="8415699">(</span><span class="ident" id="8415700">t</span>&nbsp;<span class="op" id="8415702">*</span><span class="ident" id="8415703">testing</span><span class="op" id="8415710">.</span><span class="ident" id="8415711">T</span><span class="op" id="8415712">)</span>&nbsp;<span class="op" id="8415714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415717">r</span>&nbsp;<span class="op" id="8415719">:=</span>&nbsp;<span class="ident" id="8415722">reader</span><span class="op" id="8415728">(</span><span class="string" id="8415729">&#34;my-key:&nbsp;Value&nbsp;1&nbsp;&nbsp;\r\nLong-key:&nbsp;Even&nbsp;\n&nbsp;Longer&nbsp;Value\r\nmy-Key:&nbsp;Value&nbsp;2\r\n\n&#34;</span><span class="op" id="8415807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415810">m</span><span class="op" id="8415811">,</span>&nbsp;<span class="ident" id="8415813">err</span>&nbsp;<span class="op" id="8415817">:=</span>&nbsp;<span class="ident" id="8415820">r</span><span class="op" id="8415821">.</span><span class="ident" id="8415822">ReadMIMEHeader</span><span class="op" id="8415836">(</span><span class="op" id="8415837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415840">want</span>&nbsp;<span class="op" id="8415845">:=</span>&nbsp;<span class="ident" id="8415848">MIMEHeader</span><span class="op" id="8415858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8415862">&#34;My-Key&#34;</span><span class="op" id="8415870">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8415874">{</span><span class="string" id="8415875">&#34;Value&nbsp;1&#34;</span><span class="op" id="8415884">,</span>&nbsp;<span class="string" id="8415886">&#34;Value&nbsp;2&#34;</span><span class="op" id="8415895">}</span><span class="op" id="8415896">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8415900">&#34;Long-Key&#34;</span><span class="op" id="8415910">:</span>&nbsp;<span class="op" id="8415912">{</span><span class="string" id="8415913">&#34;Even&nbsp;Longer&nbsp;Value&#34;</span><span class="op" id="8415932">}</span><span class="op" id="8415933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8415936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8415939">if</span>&nbsp;<span class="op" id="8415942">!</span><span class="ident" id="8415943">reflect</span><span class="op" id="8415950">.</span><span class="ident" id="8415951">DeepEqual</span><span class="op" id="8415960">(</span><span class="ident" id="8415961">m</span><span class="op" id="8415962">,</span>&nbsp;<span class="ident" id="8415964">want</span><span class="op" id="8415968">)</span>&nbsp;<span class="op" id="8415970">||</span>&nbsp;<span class="ident" id="8415973">err</span>&nbsp;<span class="op" id="8415977">!=</span>&nbsp;<span class="builtintype" id="8415980">nil</span>&nbsp;<span class="op" id="8415984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8415988">t</span><span class="op" id="8415989">.</span><span class="ident" id="8415990">Fatalf</span><span class="op" id="8415996">(</span><span class="string" id="8415997">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8416030">,</span>&nbsp;<span class="ident" id="8416032">m</span><span class="op" id="8416033">,</span>&nbsp;<span class="ident" id="8416035">err</span><span class="op" id="8416038">,</span>&nbsp;<span class="ident" id="8416040">want</span><span class="op" id="8416044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8416047">}</span><br>
<span class="lineno">145</span><span class="op" id="8416049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8416052">func</span>&nbsp;<span class="ident" id="8416057">TestReadMIMEHeaderSingle</span><span class="op" id="8416081">(</span><span class="ident" id="8416082">t</span>&nbsp;<span class="op" id="8416084">*</span><span class="ident" id="8416085">testing</span><span class="op" id="8416092">.</span><span class="ident" id="8416093">T</span><span class="op" id="8416094">)</span>&nbsp;<span class="op" id="8416096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416099">r</span>&nbsp;<span class="op" id="8416101">:=</span>&nbsp;<span class="ident" id="8416104">reader</span><span class="op" id="8416110">(</span><span class="string" id="8416111">&#34;Foo:&nbsp;bar\n\n&#34;</span><span class="op" id="8416125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416128">m</span><span class="op" id="8416129">,</span>&nbsp;<span class="ident" id="8416131">err</span>&nbsp;<span class="op" id="8416135">:=</span>&nbsp;<span class="ident" id="8416138">r</span><span class="op" id="8416139">.</span><span class="ident" id="8416140">ReadMIMEHeader</span><span class="op" id="8416154">(</span><span class="op" id="8416155">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416158">want</span>&nbsp;<span class="op" id="8416163">:=</span>&nbsp;<span class="ident" id="8416166">MIMEHeader</span><span class="op" id="8416176">{</span><span class="string" id="8416177">&#34;Foo&#34;</span><span class="op" id="8416182">:</span>&nbsp;<span class="op" id="8416184">{</span><span class="string" id="8416185">&#34;bar&#34;</span><span class="op" id="8416190">}</span><span class="op" id="8416191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8416194">if</span>&nbsp;<span class="op" id="8416197">!</span><span class="ident" id="8416198">reflect</span><span class="op" id="8416205">.</span><span class="ident" id="8416206">DeepEqual</span><span class="op" id="8416215">(</span><span class="ident" id="8416216">m</span><span class="op" id="8416217">,</span>&nbsp;<span class="ident" id="8416219">want</span><span class="op" id="8416223">)</span>&nbsp;<span class="op" id="8416225">||</span>&nbsp;<span class="ident" id="8416228">err</span>&nbsp;<span class="op" id="8416232">!=</span>&nbsp;<span class="builtintype" id="8416235">nil</span>&nbsp;<span class="op" id="8416239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416243">t</span><span class="op" id="8416244">.</span><span class="ident" id="8416245">Fatalf</span><span class="op" id="8416251">(</span><span class="string" id="8416252">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8416285">,</span>&nbsp;<span class="ident" id="8416287">m</span><span class="op" id="8416288">,</span>&nbsp;<span class="ident" id="8416290">err</span><span class="op" id="8416293">,</span>&nbsp;<span class="ident" id="8416295">want</span><span class="op" id="8416299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8416302">}</span><br>
<span class="lineno"></span><span class="op" id="8416304">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="8416307">func</span>&nbsp;<span class="ident" id="8416312">TestLargeReadMIMEHeader</span><span class="op" id="8416335">(</span><span class="ident" id="8416336">t</span>&nbsp;<span class="op" id="8416338">*</span><span class="ident" id="8416339">testing</span><span class="op" id="8416346">.</span><span class="ident" id="8416347">T</span><span class="op" id="8416348">)</span>&nbsp;<span class="op" id="8416350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416353">data</span>&nbsp;<span class="op" id="8416358">:=</span>&nbsp;<span class="builtinfunc" id="8416361">make</span><span class="op" id="8416365">(</span><span class="op" id="8416366">[</span><span class="op" id="8416367">]</span><span class="builtintype" id="8416368">byte</span><span class="op" id="8416372">,</span>&nbsp;<span class="num" id="8416374">16</span><span class="op" id="8416376">*</span><span class="num" id="8416377">1024</span><span class="op" id="8416381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8416384">for</span>&nbsp;<span class="ident" id="8416388">i</span>&nbsp;<span class="op" id="8416390">:=</span>&nbsp;<span class="num" id="8416393">0</span><span class="op" id="8416394">;</span>&nbsp;<span class="ident" id="8416396">i</span>&nbsp;<span class="op" id="8416398">&lt;</span>&nbsp;<span class="builtinfunc" id="8416400">len</span><span class="op" id="8416403">(</span><span class="ident" id="8416404">data</span><span class="op" id="8416408">)</span><span class="op" id="8416409">;</span>&nbsp;<span class="ident" id="8416411">i</span><span class="op" id="8416412">++</span>&nbsp;<span class="op" id="8416415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416419">data</span><span class="op" id="8416423">[</span><span class="ident" id="8416424">i</span><span class="op" id="8416425">]</span>&nbsp;<span class="op" id="8416427">=</span>&nbsp;<span class="string" id="8416429">&#39;x&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8416434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416437">sdata</span>&nbsp;<span class="op" id="8416443">:=</span>&nbsp;<span class="builtintype" id="8416446">string</span><span class="op" id="8416452">(</span><span class="ident" id="8416453">data</span><span class="op" id="8416457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416460">r</span>&nbsp;<span class="op" id="8416462">:=</span>&nbsp;<span class="ident" id="8416465">reader</span><span class="op" id="8416471">(</span><span class="string" id="8416472">&#34;Cookie:&nbsp;&#34;</span>&nbsp;<span class="op" id="8416483">+</span>&nbsp;<span class="ident" id="8416485">sdata</span>&nbsp;<span class="op" id="8416491">+</span>&nbsp;<span class="string" id="8416493">&#34;\r\n\n&#34;</span><span class="op" id="8416501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416504">m</span><span class="op" id="8416505">,</span>&nbsp;<span class="ident" id="8416507">err</span>&nbsp;<span class="op" id="8416511">:=</span>&nbsp;<span class="ident" id="8416514">r</span><span class="op" id="8416515">.</span><span class="ident" id="8416516">ReadMIMEHeader</span><span class="op" id="8416530">(</span><span class="op" id="8416531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8416534">if</span>&nbsp;<span class="ident" id="8416537">err</span>&nbsp;<span class="op" id="8416541">!=</span>&nbsp;<span class="builtintype" id="8416544">nil</span>&nbsp;<span class="op" id="8416548">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416552">t</span><span class="op" id="8416553">.</span><span class="ident" id="8416554">Fatalf</span><span class="op" id="8416560">(</span><span class="string" id="8416561">&#34;ReadMIMEHeader:&nbsp;%v&#34;</span><span class="op" id="8416581">,</span>&nbsp;<span class="ident" id="8416583">err</span><span class="op" id="8416586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8416589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416592">cookie</span>&nbsp;<span class="op" id="8416599">:=</span>&nbsp;<span class="ident" id="8416602">m</span><span class="op" id="8416603">.</span><span class="ident" id="8416604">Get</span><span class="op" id="8416607">(</span><span class="string" id="8416608">&#34;Cookie&#34;</span><span class="op" id="8416616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8416619">if</span>&nbsp;<span class="ident" id="8416622">cookie</span>&nbsp;<span class="op" id="8416629">!=</span>&nbsp;<span class="ident" id="8416632">sdata</span>&nbsp;<span class="op" id="8416638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8416642">t</span><span class="op" id="8416643">.</span><span class="ident" id="8416644">Fatalf</span><span class="op" id="8416650">(</span><span class="string" id="8416651">&#34;ReadMIMEHeader:&nbsp;%v&nbsp;bytes,&nbsp;want&nbsp;%v&nbsp;bytes&#34;</span><span class="op" id="8416692">,</span>&nbsp;<span class="builtinfunc" id="8416694">len</span><span class="op" id="8416697">(</span><span class="ident" id="8416698">cookie</span><span class="op" id="8416704">)</span><span class="op" id="8416705">,</span>&nbsp;<span class="builtinfunc" id="8416707">len</span><span class="op" id="8416710">(</span><span class="ident" id="8416711">sdata</span><span class="op" id="8416716">)</span><span class="op" id="8416717">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8416720">}</span><br>
<span class="lineno"></span><span class="op" id="8416722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8416725">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;read&nbsp;slightly-bogus&nbsp;MIME&nbsp;headers&nbsp;seen&nbsp;in&nbsp;the&nbsp;wild,</span><br>
<span class="lineno"></span><span class="comment" id="8416792">//&nbsp;with&nbsp;spaces&nbsp;before&nbsp;colons,&nbsp;and&nbsp;spaces&nbsp;in&nbsp;keys.</span><br>
<span class="lineno">175</span><span class="keyword" id="8416842">func</span>&nbsp;<span class="ident" id="8416847">TestReadMIMEHeaderNonCompliant</span><span class="op" id="8416877">(</span><span class="ident" id="8416878">t</span>&nbsp;<span class="op" id="8416880">*</span><span class="ident" id="8416881">testing</span><span class="op" id="8416888">.</span><span class="ident" id="8416889">T</span><span class="op" id="8416890">)</span>&nbsp;<span class="op" id="8416892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8416895">//&nbsp;Invalid&nbsp;HTTP&nbsp;response&nbsp;header&nbsp;as&nbsp;sent&nbsp;by&nbsp;an&nbsp;Axis&nbsp;security</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8416956">//&nbsp;camera:&nbsp;(this&nbsp;is&nbsp;handled&nbsp;by&nbsp;IE,&nbsp;Firefox,&nbsp;Chrome,&nbsp;curl,&nbsp;etc.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417021">r</span>&nbsp;<span class="op" id="8417023">:=</span>&nbsp;<span class="ident" id="8417026">reader</span><span class="op" id="8417032">(</span><span class="string" id="8417033">&#34;Foo:&nbsp;bar\r\n&#34;</span>&nbsp;<span class="op" id="8417048">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417052">&#34;Content-Language:&nbsp;en\r\n&#34;</span>&nbsp;<span class="op" id="8417079">+</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417083">&#34;SID&nbsp;:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="8417097">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417101">&#34;Audio&nbsp;Mode&nbsp;:&nbsp;None\r\n&#34;</span>&nbsp;<span class="op" id="8417125">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417129">&#34;Privilege&nbsp;:&nbsp;127\r\n\r\n&#34;</span><span class="op" id="8417154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417157">m</span><span class="op" id="8417158">,</span>&nbsp;<span class="ident" id="8417160">err</span>&nbsp;<span class="op" id="8417164">:=</span>&nbsp;<span class="ident" id="8417167">r</span><span class="op" id="8417168">.</span><span class="ident" id="8417169">ReadMIMEHeader</span><span class="op" id="8417183">(</span><span class="op" id="8417184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417187">want</span>&nbsp;<span class="op" id="8417192">:=</span>&nbsp;<span class="ident" id="8417195">MIMEHeader</span><span class="op" id="8417205">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417209">&#34;Foo&#34;</span><span class="op" id="8417214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417229">{</span><span class="string" id="8417230">&#34;bar&#34;</span><span class="op" id="8417235">}</span><span class="op" id="8417236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417240">&#34;Content-Language&#34;</span><span class="op" id="8417258">:</span>&nbsp;<span class="op" id="8417260">{</span><span class="string" id="8417261">&#34;en&#34;</span><span class="op" id="8417265">}</span><span class="op" id="8417266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417270">&#34;Sid&#34;</span><span class="op" id="8417275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417290">{</span><span class="string" id="8417291">&#34;0&#34;</span><span class="op" id="8417294">}</span><span class="op" id="8417295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417299">&#34;Audio-Mode&#34;</span><span class="op" id="8417311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417319">{</span><span class="string" id="8417320">&#34;None&#34;</span><span class="op" id="8417326">}</span><span class="op" id="8417327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417331">&#34;Privilege&#34;</span><span class="op" id="8417342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417351">{</span><span class="string" id="8417352">&#34;127&#34;</span><span class="op" id="8417357">}</span><span class="op" id="8417358">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8417364">if</span>&nbsp;<span class="op" id="8417367">!</span><span class="ident" id="8417368">reflect</span><span class="op" id="8417375">.</span><span class="ident" id="8417376">DeepEqual</span><span class="op" id="8417385">(</span><span class="ident" id="8417386">m</span><span class="op" id="8417387">,</span>&nbsp;<span class="ident" id="8417389">want</span><span class="op" id="8417393">)</span>&nbsp;<span class="op" id="8417395">||</span>&nbsp;<span class="ident" id="8417398">err</span>&nbsp;<span class="op" id="8417402">!=</span>&nbsp;<span class="builtintype" id="8417405">nil</span>&nbsp;<span class="op" id="8417409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417413">t</span><span class="op" id="8417414">.</span><span class="ident" id="8417415">Fatalf</span><span class="op" id="8417421">(</span><span class="string" id="8417422">&#34;ReadMIMEHeader&nbsp;=\n%v,&nbsp;%v;&nbsp;want:\n%v&#34;</span><span class="op" id="8417459">,</span>&nbsp;<span class="ident" id="8417461">m</span><span class="op" id="8417462">,</span>&nbsp;<span class="ident" id="8417464">err</span><span class="op" id="8417467">,</span>&nbsp;<span class="ident" id="8417469">want</span><span class="op" id="8417473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417476">}</span><br>
<span class="lineno"></span><span class="op" id="8417478">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8417481">type</span>&nbsp;<span class="ident" id="8417486">readResponseTest</span>&nbsp;<span class="keyword" id="8417503">struct</span>&nbsp;<span class="op" id="8417510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417513">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8417522">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417530">inCode</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8417539">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417544">wantCode</span>&nbsp;<span class="builtintype" id="8417553">int</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8417558">wantMsg</span>&nbsp;&nbsp;<span class="builtintype" id="8417567">string</span><br>
<span class="lineno"></span><span class="op" id="8417574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8417577">var</span>&nbsp;<span class="ident" id="8417581">readResponseTests</span>&nbsp;<span class="op" id="8417599">=</span>&nbsp;<span class="op" id="8417601">[</span><span class="op" id="8417602">]</span><span class="ident" id="8417603">readResponseTest</span><span class="op" id="8417619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417622">{</span><span class="string" id="8417623">&#34;230-Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span>&nbsp;<span class="op" id="8417676">+</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417680">&#34;Read&nbsp;the&nbsp;file&nbsp;README.txt,\n&#34;</span>&nbsp;<span class="op" id="8417710">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417714">&#34;230&nbsp;&nbsp;please&#34;</span><span class="op" id="8417727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417731">23</span><span class="op" id="8417733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417737">230</span><span class="op" id="8417740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417744">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\nRead&nbsp;the&nbsp;file&nbsp;README.txt,\n&nbsp;please&#34;</span><span class="op" id="8417826">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417829">}</span><span class="op" id="8417830">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417834">{</span><span class="string" id="8417835">&#34;230&nbsp;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span><span class="op" id="8417887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417891">23</span><span class="op" id="8417893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417897">230</span><span class="op" id="8417900">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417904">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply&#34;</span><span class="op" id="8417950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417953">}</span><span class="op" id="8417954">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8417958">{</span><span class="string" id="8417959">&#34;400-A\n400-B\n400&nbsp;C&#34;</span><span class="op" id="8417980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417984">4</span><span class="op" id="8417985">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8417989">400</span><span class="op" id="8417992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8417996">&#34;A\nB\nC&#34;</span><span class="op" id="8418005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418008">}</span><span class="op" id="8418009">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418013">{</span><span class="string" id="8418014">&#34;400-A\r\n400-B\r\n400&nbsp;C\r\n&#34;</span><span class="op" id="8418043">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8418047">4</span><span class="op" id="8418048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8418052">400</span><span class="op" id="8418055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8418059">&#34;A\nB\nC&#34;</span><span class="op" id="8418068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418071">}</span><span class="op" id="8418072">,</span><br>
<span class="lineno"></span><span class="op" id="8418074">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="8418077">//&nbsp;See&nbsp;http://www.ietf.org/rfc/rfc959.txt&nbsp;page&nbsp;36.</span><br>
<span class="lineno"></span><span class="keyword" id="8418128">func</span>&nbsp;<span class="ident" id="8418133">TestRFC959Lines</span><span class="op" id="8418148">(</span><span class="ident" id="8418149">t</span>&nbsp;<span class="op" id="8418151">*</span><span class="ident" id="8418152">testing</span><span class="op" id="8418159">.</span><span class="ident" id="8418160">T</span><span class="op" id="8418161">)</span>&nbsp;<span class="op" id="8418163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418166">for</span>&nbsp;<span class="ident" id="8418170">i</span><span class="op" id="8418171">,</span>&nbsp;<span class="ident" id="8418173">tt</span>&nbsp;<span class="op" id="8418176">:=</span>&nbsp;<span class="keyword" id="8418179">range</span>&nbsp;<span class="ident" id="8418185">readResponseTests</span>&nbsp;<span class="op" id="8418203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418207">r</span>&nbsp;<span class="op" id="8418209">:=</span>&nbsp;<span class="ident" id="8418212">reader</span><span class="op" id="8418218">(</span><span class="ident" id="8418219">tt</span><span class="op" id="8418221">.</span><span class="ident" id="8418222">in</span>&nbsp;<span class="op" id="8418225">+</span>&nbsp;<span class="string" id="8418227">&#34;\nFOLLOWING&nbsp;DATA&#34;</span><span class="op" id="8418245">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418249">code</span><span class="op" id="8418253">,</span>&nbsp;<span class="ident" id="8418255">msg</span><span class="op" id="8418258">,</span>&nbsp;<span class="ident" id="8418260">err</span>&nbsp;<span class="op" id="8418264">:=</span>&nbsp;<span class="ident" id="8418267">r</span><span class="op" id="8418268">.</span><span class="ident" id="8418269">ReadResponse</span><span class="op" id="8418281">(</span><span class="ident" id="8418282">tt</span><span class="op" id="8418284">.</span><span class="ident" id="8418285">inCode</span><span class="op" id="8418291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418295">if</span>&nbsp;<span class="ident" id="8418298">err</span>&nbsp;<span class="op" id="8418302">!=</span>&nbsp;<span class="builtintype" id="8418305">nil</span>&nbsp;<span class="op" id="8418309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418314">t</span><span class="op" id="8418315">.</span><span class="ident" id="8418316">Errorf</span><span class="op" id="8418322">(</span><span class="string" id="8418323">&#34;#%d:&nbsp;ReadResponse:&nbsp;%v&#34;</span><span class="op" id="8418346">,</span>&nbsp;<span class="ident" id="8418348">i</span><span class="op" id="8418349">,</span>&nbsp;<span class="ident" id="8418351">err</span><span class="op" id="8418354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418359">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418370">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418374">if</span>&nbsp;<span class="ident" id="8418377">code</span>&nbsp;<span class="op" id="8418382">!=</span>&nbsp;<span class="ident" id="8418385">tt</span><span class="op" id="8418387">.</span><span class="ident" id="8418388">wantCode</span>&nbsp;<span class="op" id="8418397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418402">t</span><span class="op" id="8418403">.</span><span class="ident" id="8418404">Errorf</span><span class="op" id="8418410">(</span><span class="string" id="8418411">&#34;#%d:&nbsp;code=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8418434">,</span>&nbsp;<span class="ident" id="8418436">i</span><span class="op" id="8418437">,</span>&nbsp;<span class="ident" id="8418439">code</span><span class="op" id="8418443">,</span>&nbsp;<span class="ident" id="8418445">tt</span><span class="op" id="8418447">.</span><span class="ident" id="8418448">wantCode</span><span class="op" id="8418456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418464">if</span>&nbsp;<span class="ident" id="8418467">msg</span>&nbsp;<span class="op" id="8418471">!=</span>&nbsp;<span class="ident" id="8418474">tt</span><span class="op" id="8418476">.</span><span class="ident" id="8418477">wantMsg</span>&nbsp;<span class="op" id="8418485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418490">t</span><span class="op" id="8418491">.</span><span class="ident" id="8418492">Errorf</span><span class="op" id="8418498">(</span><span class="string" id="8418499">&#34;#%d:&nbsp;msg=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8418521">,</span>&nbsp;<span class="ident" id="8418523">i</span><span class="op" id="8418524">,</span>&nbsp;<span class="ident" id="8418526">msg</span><span class="op" id="8418529">,</span>&nbsp;<span class="ident" id="8418531">tt</span><span class="op" id="8418533">.</span><span class="ident" id="8418534">wantMsg</span><span class="op" id="8418541">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418548">}</span><br>
<span class="lineno"></span><span class="op" id="8418550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8418553">func</span>&nbsp;<span class="ident" id="8418558">TestCommonHeaders</span><span class="op" id="8418575">(</span><span class="ident" id="8418576">t</span>&nbsp;<span class="op" id="8418578">*</span><span class="ident" id="8418579">testing</span><span class="op" id="8418586">.</span><span class="ident" id="8418587">T</span><span class="op" id="8418588">)</span>&nbsp;<span class="op" id="8418590">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418593">for</span>&nbsp;<span class="ident" id="8418597">h</span>&nbsp;<span class="op" id="8418599">:=</span>&nbsp;<span class="keyword" id="8418602">range</span>&nbsp;<span class="ident" id="8418608">commonHeader</span>&nbsp;<span class="op" id="8418621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418625">if</span>&nbsp;<span class="ident" id="8418628">h</span>&nbsp;<span class="op" id="8418630">!=</span>&nbsp;<span class="ident" id="8418633">CanonicalMIMEHeaderKey</span><span class="op" id="8418655">(</span><span class="ident" id="8418656">h</span><span class="op" id="8418657">)</span>&nbsp;<span class="op" id="8418659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418664">t</span><span class="op" id="8418665">.</span><span class="ident" id="8418666">Errorf</span><span class="op" id="8418672">(</span><span class="string" id="8418673">&#34;Non-canonical&nbsp;header&nbsp;%q&nbsp;in&nbsp;commonHeader&#34;</span><span class="op" id="8418714">,</span>&nbsp;<span class="ident" id="8418716">h</span><span class="op" id="8418717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418724">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418727">b</span>&nbsp;<span class="op" id="8418729">:=</span>&nbsp;<span class="op" id="8418732">[</span><span class="op" id="8418733">]</span><span class="builtintype" id="8418734">byte</span><span class="op" id="8418738">(</span><span class="string" id="8418739">&#34;content-Length&#34;</span><span class="op" id="8418755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418758">want</span>&nbsp;<span class="op" id="8418763">:=</span>&nbsp;<span class="string" id="8418766">&#34;Content-Length&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418784">n</span>&nbsp;<span class="op" id="8418786">:=</span>&nbsp;<span class="ident" id="8418789">testing</span><span class="op" id="8418796">.</span><span class="ident" id="8418797">AllocsPerRun</span><span class="op" id="8418809">(</span><span class="num" id="8418810">200</span><span class="op" id="8418813">,</span>&nbsp;<span class="keyword" id="8418815">func</span><span class="op" id="8418819">(</span><span class="op" id="8418820">)</span>&nbsp;<span class="op" id="8418822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418826">if</span>&nbsp;<span class="ident" id="8418829">x</span>&nbsp;<span class="op" id="8418831">:=</span>&nbsp;<span class="ident" id="8418834">canonicalMIMEHeaderKey</span><span class="op" id="8418856">(</span><span class="ident" id="8418857">b</span><span class="op" id="8418858">)</span><span class="op" id="8418859">;</span>&nbsp;<span class="ident" id="8418861">x</span>&nbsp;<span class="op" id="8418863">!=</span>&nbsp;<span class="ident" id="8418866">want</span>&nbsp;<span class="op" id="8418871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418876">t</span><span class="op" id="8418877">.</span><span class="ident" id="8418878">Fatalf</span><span class="op" id="8418884">(</span><span class="string" id="8418885">&#34;canonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8418927">,</span>&nbsp;<span class="ident" id="8418929">b</span><span class="op" id="8418930">,</span>&nbsp;<span class="ident" id="8418932">x</span><span class="op" id="8418933">,</span>&nbsp;<span class="ident" id="8418935">want</span><span class="op" id="8418939">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8418946">}</span><span class="op" id="8418947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8418950">if</span>&nbsp;<span class="ident" id="8418953">n</span>&nbsp;<span class="op" id="8418955">&gt;</span>&nbsp;<span class="num" id="8418957">0</span>&nbsp;<span class="op" id="8418959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8418963">t</span><span class="op" id="8418964">.</span><span class="ident" id="8418965">Errorf</span><span class="op" id="8418971">(</span><span class="string" id="8418972">&#34;canonicalMIMEHeaderKey&nbsp;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8419016">,</span>&nbsp;<span class="ident" id="8419018">n</span><span class="op" id="8419019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8419022">}</span><br>
<span class="lineno">265</span><span class="op" id="8419024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8419027">var</span>&nbsp;<span class="ident" id="8419031">clientHeaders</span>&nbsp;<span class="op" id="8419045">=</span>&nbsp;<span class="ident" id="8419047">strings</span><span class="op" id="8419054">.</span><span class="ident" id="8419055">Replace</span><span class="op" id="8419062">(</span><span class="string" id="8419063">`Host:&nbsp;golang.org<br>
<span class="lineno"></span>Connection:&nbsp;keep-alive<br>
<span class="lineno"></span>Cache-Control:&nbsp;max-age=0<br>
<span class="lineno">270</span>Accept:&nbsp;application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5<br>
<span class="lineno"></span>User-Agent:&nbsp;Mozilla/5.0&nbsp;(X11;&nbsp;U;&nbsp;Linux&nbsp;x86_64;&nbsp;en-US)&nbsp;AppleWebKit/534.3&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/6.0.472.63&nbsp;Safari/534.3<br>
<span class="lineno"></span>Accept-Encoding:&nbsp;gzip,deflate,sdch<br>
<span class="lineno"></span>Accept-Language:&nbsp;en-US,en;q=0.8,fr-CH;q=0.6<br>
<span class="lineno"></span>Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.3<br>
<span class="lineno">275</span>COOKIE:&nbsp;__utma=000000000.0000000000.0000000000.0000000000.0000000000.00;&nbsp;__utmb=000000000.0.00.0000000000;&nbsp;__utmc=000000000;&nbsp;__utmz=000000000.0000000000.00.0.utmcsr=code.google.com|utmccn=(referral)|utmcmd=referral|utmcct=/p/go/issues/detail<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno"></span>`</span><span class="op" id="8419740">,</span>&nbsp;<span class="string" id="8419742">&#34;\n&#34;</span><span class="op" id="8419746">,</span>&nbsp;<span class="string" id="8419748">&#34;\r\n&#34;</span><span class="op" id="8419754">,</span>&nbsp;<span class="op" id="8419756">-</span><span class="num" id="8419757">1</span><span class="op" id="8419758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="8419761">var</span>&nbsp;<span class="ident" id="8419765">serverHeaders</span>&nbsp;<span class="op" id="8419779">=</span>&nbsp;<span class="ident" id="8419781">strings</span><span class="op" id="8419788">.</span><span class="ident" id="8419789">Replace</span><span class="op" id="8419796">(</span><span class="string" id="8419797">`Content-Type:&nbsp;text/html;&nbsp;charset=utf-8<br>
<span class="lineno"></span>Content-Encoding:&nbsp;gzip<br>
<span class="lineno"></span>Date:&nbsp;Thu,&nbsp;27&nbsp;Sep&nbsp;2012&nbsp;09:03:33&nbsp;GMT<br>
<span class="lineno"></span>Server:&nbsp;Google&nbsp;Frontend<br>
<span class="lineno"></span>Cache-Control:&nbsp;private<br>
<span class="lineno">285</span>Content-Length:&nbsp;2298<br>
<span class="lineno"></span>VIA:&nbsp;1.1&nbsp;proxy.example.com:80&nbsp;(XXX/n.n.n-nnn)<br>
<span class="lineno"></span>Connection:&nbsp;Close<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno">290</span>`</span><span class="op" id="8420049">,</span>&nbsp;<span class="string" id="8420051">&#34;\n&#34;</span><span class="op" id="8420055">,</span>&nbsp;<span class="string" id="8420057">&#34;\r\n&#34;</span><span class="op" id="8420063">,</span>&nbsp;<span class="op" id="8420065">-</span><span class="num" id="8420066">1</span><span class="op" id="8420067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8420070">func</span>&nbsp;<span class="ident" id="8420075">BenchmarkReadMIMEHeader</span><span class="op" id="8420098">(</span><span class="ident" id="8420099">b</span>&nbsp;<span class="op" id="8420101">*</span><span class="ident" id="8420102">testing</span><span class="op" id="8420109">.</span><span class="ident" id="8420110">B</span><span class="op" id="8420111">)</span>&nbsp;<span class="op" id="8420113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420116">b</span><span class="op" id="8420117">.</span><span class="ident" id="8420118">ReportAllocs</span><span class="op" id="8420130">(</span><span class="op" id="8420131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420134">var</span>&nbsp;<span class="ident" id="8420138">buf</span>&nbsp;<span class="ident" id="8420142">bytes</span><span class="op" id="8420147">.</span><span class="ident" id="8420148">Buffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420156">br</span>&nbsp;<span class="op" id="8420159">:=</span>&nbsp;<span class="ident" id="8420162">bufio</span><span class="op" id="8420167">.</span><span class="ident" id="8420168">NewReader</span><span class="op" id="8420177">(</span><span class="op" id="8420178">&amp;</span><span class="ident" id="8420179">buf</span><span class="op" id="8420182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420185">r</span>&nbsp;<span class="op" id="8420187">:=</span>&nbsp;<span class="ident" id="8420190">NewReader</span><span class="op" id="8420199">(</span><span class="ident" id="8420200">br</span><span class="op" id="8420202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420205">for</span>&nbsp;<span class="ident" id="8420209">i</span>&nbsp;<span class="op" id="8420211">:=</span>&nbsp;<span class="num" id="8420214">0</span><span class="op" id="8420215">;</span>&nbsp;<span class="ident" id="8420217">i</span>&nbsp;<span class="op" id="8420219">&lt;</span>&nbsp;<span class="ident" id="8420221">b</span><span class="op" id="8420222">.</span><span class="ident" id="8420223">N</span><span class="op" id="8420224">;</span>&nbsp;<span class="ident" id="8420226">i</span><span class="op" id="8420227">++</span>&nbsp;<span class="op" id="8420230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420234">var</span>&nbsp;<span class="ident" id="8420238">want</span>&nbsp;<span class="builtintype" id="8420243">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420249">var</span>&nbsp;<span class="ident" id="8420253">find</span>&nbsp;<span class="builtintype" id="8420258">string</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420267">if</span>&nbsp;<span class="op" id="8420270">(</span><span class="ident" id="8420271">i</span>&nbsp;<span class="op" id="8420273">&amp;</span>&nbsp;<span class="num" id="8420275">1</span><span class="op" id="8420276">)</span>&nbsp;<span class="op" id="8420278">==</span>&nbsp;<span class="num" id="8420281">1</span>&nbsp;<span class="op" id="8420283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420288">buf</span><span class="op" id="8420291">.</span><span class="ident" id="8420292">WriteString</span><span class="op" id="8420303">(</span><span class="ident" id="8420304">clientHeaders</span><span class="op" id="8420317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420322">want</span>&nbsp;<span class="op" id="8420327">=</span>&nbsp;<span class="num" id="8420329">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420335">find</span>&nbsp;<span class="op" id="8420340">=</span>&nbsp;<span class="string" id="8420342">&#34;Cookie&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420353">}</span>&nbsp;<span class="keyword" id="8420355">else</span>&nbsp;<span class="op" id="8420360">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420365">buf</span><span class="op" id="8420368">.</span><span class="ident" id="8420369">WriteString</span><span class="op" id="8420380">(</span><span class="ident" id="8420381">serverHeaders</span><span class="op" id="8420394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420399">want</span>&nbsp;<span class="op" id="8420404">=</span>&nbsp;<span class="num" id="8420406">9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420411">find</span>&nbsp;<span class="op" id="8420416">=</span>&nbsp;<span class="string" id="8420418">&#34;Via&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420430">h</span><span class="op" id="8420431">,</span>&nbsp;<span class="ident" id="8420433">err</span>&nbsp;<span class="op" id="8420437">:=</span>&nbsp;<span class="ident" id="8420440">r</span><span class="op" id="8420441">.</span><span class="ident" id="8420442">ReadMIMEHeader</span><span class="op" id="8420456">(</span><span class="op" id="8420457">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420461">if</span>&nbsp;<span class="ident" id="8420464">err</span>&nbsp;<span class="op" id="8420468">!=</span>&nbsp;<span class="builtintype" id="8420471">nil</span>&nbsp;<span class="op" id="8420475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420480">b</span><span class="op" id="8420481">.</span><span class="ident" id="8420482">Fatal</span><span class="op" id="8420487">(</span><span class="ident" id="8420488">err</span><span class="op" id="8420491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420499">if</span>&nbsp;<span class="builtinfunc" id="8420502">len</span><span class="op" id="8420505">(</span><span class="ident" id="8420506">h</span><span class="op" id="8420507">)</span>&nbsp;<span class="op" id="8420509">!=</span>&nbsp;<span class="ident" id="8420512">want</span>&nbsp;<span class="op" id="8420517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420522">b</span><span class="op" id="8420523">.</span><span class="ident" id="8420524">Fatalf</span><span class="op" id="8420530">(</span><span class="string" id="8420531">&#34;wrong&nbsp;number&nbsp;of&nbsp;headers:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8420573">,</span>&nbsp;<span class="builtinfunc" id="8420575">len</span><span class="op" id="8420578">(</span><span class="ident" id="8420579">h</span><span class="op" id="8420580">)</span><span class="op" id="8420581">,</span>&nbsp;<span class="ident" id="8420583">want</span><span class="op" id="8420587">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420595">if</span>&nbsp;<span class="ident" id="8420598">_</span><span class="op" id="8420599">,</span>&nbsp;<span class="ident" id="8420601">ok</span>&nbsp;<span class="op" id="8420604">:=</span>&nbsp;<span class="ident" id="8420607">h</span><span class="op" id="8420608">[</span><span class="ident" id="8420609">find</span><span class="op" id="8420613">]</span><span class="op" id="8420614">;</span>&nbsp;<span class="op" id="8420616">!</span><span class="ident" id="8420617">ok</span>&nbsp;<span class="op" id="8420620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420625">b</span><span class="op" id="8420626">.</span><span class="ident" id="8420627">Fatalf</span><span class="op" id="8420633">(</span><span class="string" id="8420634">&#34;did&nbsp;not&nbsp;find&nbsp;key&nbsp;%s&#34;</span><span class="op" id="8420655">,</span>&nbsp;<span class="ident" id="8420657">find</span><span class="op" id="8420661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420668">}</span><br>
<span class="lineno">320</span><span class="op" id="8420670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8420673">func</span>&nbsp;<span class="ident" id="8420678">BenchmarkUncommon</span><span class="op" id="8420695">(</span><span class="ident" id="8420696">b</span>&nbsp;<span class="op" id="8420698">*</span><span class="ident" id="8420699">testing</span><span class="op" id="8420706">.</span><span class="ident" id="8420707">B</span><span class="op" id="8420708">)</span>&nbsp;<span class="op" id="8420710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420713">b</span><span class="op" id="8420714">.</span><span class="ident" id="8420715">ReportAllocs</span><span class="op" id="8420727">(</span><span class="op" id="8420728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420731">var</span>&nbsp;<span class="ident" id="8420735">buf</span>&nbsp;<span class="ident" id="8420739">bytes</span><span class="op" id="8420744">.</span><span class="ident" id="8420745">Buffer</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420753">br</span>&nbsp;<span class="op" id="8420756">:=</span>&nbsp;<span class="ident" id="8420759">bufio</span><span class="op" id="8420764">.</span><span class="ident" id="8420765">NewReader</span><span class="op" id="8420774">(</span><span class="op" id="8420775">&amp;</span><span class="ident" id="8420776">buf</span><span class="op" id="8420779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420782">r</span>&nbsp;<span class="op" id="8420784">:=</span>&nbsp;<span class="ident" id="8420787">NewReader</span><span class="op" id="8420796">(</span><span class="ident" id="8420797">br</span><span class="op" id="8420799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420802">for</span>&nbsp;<span class="ident" id="8420806">i</span>&nbsp;<span class="op" id="8420808">:=</span>&nbsp;<span class="num" id="8420811">0</span><span class="op" id="8420812">;</span>&nbsp;<span class="ident" id="8420814">i</span>&nbsp;<span class="op" id="8420816">&lt;</span>&nbsp;<span class="ident" id="8420818">b</span><span class="op" id="8420819">.</span><span class="ident" id="8420820">N</span><span class="op" id="8420821">;</span>&nbsp;<span class="ident" id="8420823">i</span><span class="op" id="8420824">++</span>&nbsp;<span class="op" id="8420827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420831">buf</span><span class="op" id="8420834">.</span><span class="ident" id="8420835">WriteString</span><span class="op" id="8420846">(</span><span class="string" id="8420847">&#34;uncommon-header-for-benchmark:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8420891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420895">h</span><span class="op" id="8420896">,</span>&nbsp;<span class="ident" id="8420898">err</span>&nbsp;<span class="op" id="8420902">:=</span>&nbsp;<span class="ident" id="8420905">r</span><span class="op" id="8420906">.</span><span class="ident" id="8420907">ReadMIMEHeader</span><span class="op" id="8420921">(</span><span class="op" id="8420922">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420926">if</span>&nbsp;<span class="ident" id="8420929">err</span>&nbsp;<span class="op" id="8420933">!=</span>&nbsp;<span class="builtintype" id="8420936">nil</span>&nbsp;<span class="op" id="8420940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8420945">b</span><span class="op" id="8420946">.</span><span class="ident" id="8420947">Fatal</span><span class="op" id="8420952">(</span><span class="ident" id="8420953">err</span><span class="op" id="8420956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8420960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8420964">if</span>&nbsp;<span class="ident" id="8420967">_</span><span class="op" id="8420968">,</span>&nbsp;<span class="ident" id="8420970">ok</span>&nbsp;<span class="op" id="8420973">:=</span>&nbsp;<span class="ident" id="8420976">h</span><span class="op" id="8420977">[</span><span class="string" id="8420978">&#34;Uncommon-Header-For-Benchmark&#34;</span><span class="op" id="8421009">]</span><span class="op" id="8421010">;</span>&nbsp;<span class="op" id="8421012">!</span><span class="ident" id="8421013">ok</span>&nbsp;<span class="op" id="8421016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421021">b</span><span class="op" id="8421022">.</span><span class="ident" id="8421023">Fatal</span><span class="op" id="8421028">(</span><span class="string" id="8421029">&#34;Missing&nbsp;result&nbsp;header.&#34;</span><span class="op" id="8421053">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8421057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8421060">}</span><br>
<span class="lineno"></span><span class="op" id="8421062">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
