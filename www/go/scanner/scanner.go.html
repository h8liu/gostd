<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5195938">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5195993">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5196047">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5196098">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="5196158">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="5196217">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5196263">//</span><br>
<span class="lineno"></span><span class="keyword" id="5196266">package</span>&nbsp;<span class="ident" id="5196274">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5196283">import</span>&nbsp;<span class="op" id="5196290">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196293">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196302">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196309">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196321">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196338">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196349">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5196360">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5196375">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5196378">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5196451">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5196524">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5196598">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="5196622">//</span><br>
<span class="lineno"></span><span class="keyword" id="5196625">type</span>&nbsp;<span class="ident" id="5196630">ErrorHandler</span>&nbsp;<span class="keyword" id="5196643">func</span><span class="op" id="5196647">(</span><span class="ident" id="5196648">pos</span>&nbsp;<span class="ident" id="5196652"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5196657">.</span><span class="ident" id="5196658">Position</span><span class="op" id="5196666">,</span>&nbsp;<span class="ident" id="5196668">msg</span>&nbsp;<span class="builtintype" id="5196672">string</span><span class="op" id="5196678">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5196681">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="5196746">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="5196808">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="5196866">//</span><br>
<span class="lineno"></span><span class="keyword" id="5196869">type</span>&nbsp;<span class="ident" id="5196874">Scanner</span>&nbsp;<span class="keyword" id="5196882">struct</span>&nbsp;<span class="op" id="5196889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5196892">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196912">file</span>&nbsp;<span class="op" id="5196917">*</span><span class="ident" id="5196918"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5196923">.</span><span class="ident" id="5196924">File</span>&nbsp;&nbsp;<span class="comment" id="5196930">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196953">dir</span>&nbsp;&nbsp;<span class="builtintype" id="5196958">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196971">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197008">src</span>&nbsp;&nbsp;<span class="op" id="5197013">[</span><span class="op" id="5197014">]</span><span class="builtintype" id="5197015">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197026">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197037">err</span>&nbsp;&nbsp;<span class="ident" id="5197042"><a href="/go/scanner/scanner.go.html#5196630">ErrorHandler</a></span>&nbsp;<span class="comment" id="5197055">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197083">mode</span>&nbsp;<span class="ident" id="5197088"><a href="/go/scanner/scanner.go.html#5198404">Mode</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197101">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5197120">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197139">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197150">rune</span>&nbsp;<span class="comment" id="5197155">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197177">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197188">int</span>&nbsp;&nbsp;<span class="comment" id="5197193">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197214">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197225">int</span>&nbsp;&nbsp;<span class="comment" id="5197230">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197284">lineOffset</span>&nbsp;<span class="builtintype" id="5197295">int</span>&nbsp;&nbsp;<span class="comment" id="5197300">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197324">insertSemi</span>&nbsp;<span class="builtintype" id="5197335">bool</span>&nbsp;<span class="comment" id="5197340">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5197384">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197416">ErrorCount</span>&nbsp;<span class="builtintype" id="5197427">int</span>&nbsp;<span class="comment" id="5197431">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="5197463">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5197466">const</span>&nbsp;<span class="ident" id="5197472">bom</span>&nbsp;<span class="op" id="5197476">=</span>&nbsp;<span class="num" id="5197478">0xFEFF</span>&nbsp;<span class="comment" id="5197485">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5197545">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="5197586">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="5197617">//</span><br>
<span class="lineno"></span><span class="keyword" id="5197620">func</span>&nbsp;<span class="op" id="5197625">(</span><span class="ident" id="5197626">s</span>&nbsp;<span class="op" id="5197628">*</span><span class="ident" id="5197629"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5197636">)</span>&nbsp;<span class="ident" id="5197638">next</span><span class="op" id="5197642">(</span><span class="op" id="5197643">)</span>&nbsp;<span class="op" id="5197645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197648">if</span>&nbsp;<span class="ident" id="5197651"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197652">.</span><span class="ident" id="5197653">rdOffset</span>&nbsp;<span class="op" id="5197662">&lt;</span>&nbsp;<span class="builtinfunc" id="5197664">len</span><span class="op" id="5197667">(</span><span class="ident" id="5197668"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197669">.</span><span class="ident" id="5197670">src</span><span class="op" id="5197673">)</span>&nbsp;<span class="op" id="5197675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197679"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197680">.</span><span class="ident" id="5197681">offset</span>&nbsp;<span class="op" id="5197688">=</span>&nbsp;<span class="ident" id="5197690"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197691">.</span><span class="ident" id="5197692">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197703">if</span>&nbsp;<span class="ident" id="5197706"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197707">.</span><span class="ident" id="5197708">ch</span>&nbsp;<span class="op" id="5197711">==</span>&nbsp;<span class="string" id="5197714">&#39;\n&#39;</span>&nbsp;<span class="op" id="5197719">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197724"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197725">.</span><span class="ident" id="5197726">lineOffset</span>&nbsp;<span class="op" id="5197737">=</span>&nbsp;<span class="ident" id="5197739"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197740">.</span><span class="ident" id="5197741">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197751"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197752">.</span><span class="ident" id="5197753">file</span><span class="op" id="5197757">.</span><span class="ident" id="5197758">AddLine</span><span class="op" id="5197765">(</span><span class="ident" id="5197766"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197767">.</span><span class="ident" id="5197768">offset</span><span class="op" id="5197774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5197778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197782">r</span><span class="op" id="5197783">,</span>&nbsp;<span class="ident" id="5197785">w</span>&nbsp;<span class="op" id="5197787">:=</span>&nbsp;<span class="builtintype" id="5197790">rune</span><span class="op" id="5197794">(</span><span class="ident" id="5197795"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197796">.</span><span class="ident" id="5197797">src</span><span class="op" id="5197800">[</span><span class="ident" id="5197801"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197802">.</span><span class="ident" id="5197803">rdOffset</span><span class="op" id="5197811">]</span><span class="op" id="5197812">)</span><span class="op" id="5197813">,</span>&nbsp;<span class="num" id="5197815">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197819">switch</span>&nbsp;<span class="op" id="5197826">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197830">case</span>&nbsp;<span class="ident" id="5197835"><a href="/go/scanner/scanner.go.html#5197782">r</a></span>&nbsp;<span class="op" id="5197837">==</span>&nbsp;<span class="num" id="5197840">0</span><span class="op" id="5197841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197846"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197847">.</span><span class="builtintype" id="5197848">error</span><span class="op" id="5197853">(</span><span class="ident" id="5197854"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197855">.</span><span class="ident" id="5197856">offset</span><span class="op" id="5197862">,</span>&nbsp;<span class="string" id="5197864">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="5197887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197891">case</span>&nbsp;<span class="ident" id="5197896"><a href="/go/scanner/scanner.go.html#5197782">r</a></span>&nbsp;<span class="op" id="5197898">&gt;=</span>&nbsp;<span class="num" id="5197901">0x80</span><span class="op" id="5197905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5197910">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197926"><a href="/go/scanner/scanner.go.html#5197782">r</a></span><span class="op" id="5197927">,</span>&nbsp;<span class="ident" id="5197929"><a href="/go/scanner/scanner.go.html#5197785">w</a></span>&nbsp;<span class="op" id="5197931">=</span>&nbsp;<span class="ident" id="5197933"><a href="/go/scanner/scanner.go.html#5196360">utf8</a></span><span class="op" id="5197937">.</span><span class="ident" id="5197938">DecodeRune</span><span class="op" id="5197948">(</span><span class="ident" id="5197949"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197950">.</span><span class="ident" id="5197951">src</span><span class="op" id="5197954">[</span><span class="ident" id="5197955"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5197956">.</span><span class="ident" id="5197957">rdOffset</span><span class="op" id="5197965">:</span><span class="op" id="5197966">]</span><span class="op" id="5197967">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197972">if</span>&nbsp;<span class="ident" id="5197975"><a href="/go/scanner/scanner.go.html#5197782">r</a></span>&nbsp;<span class="op" id="5197977">==</span>&nbsp;<span class="ident" id="5197980"><a href="/go/scanner/scanner.go.html#5196360">utf8</a></span><span class="op" id="5197984">.</span><span class="ident" id="5197985">RuneError</span>&nbsp;<span class="op" id="5197995">&amp;&amp;</span>&nbsp;<span class="ident" id="5197998"><a href="/go/scanner/scanner.go.html#5197785">w</a></span>&nbsp;<span class="op" id="5198000">==</span>&nbsp;<span class="num" id="5198003">1</span>&nbsp;<span class="op" id="5198005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198011"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198012">.</span><span class="builtintype" id="5198013">error</span><span class="op" id="5198018">(</span><span class="ident" id="5198019"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198020">.</span><span class="ident" id="5198021">offset</span><span class="op" id="5198027">,</span>&nbsp;<span class="string" id="5198029">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="5198053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198058">}</span>&nbsp;<span class="keyword" id="5198060">else</span>&nbsp;<span class="keyword" id="5198065">if</span>&nbsp;<span class="ident" id="5198068"><a href="/go/scanner/scanner.go.html#5197782">r</a></span>&nbsp;<span class="op" id="5198070">==</span>&nbsp;<span class="ident" id="5198073"><a href="/go/scanner/scanner.go.html#5197472">bom</a></span>&nbsp;<span class="op" id="5198077">&amp;&amp;</span>&nbsp;<span class="ident" id="5198080"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198081">.</span><span class="ident" id="5198082">offset</span>&nbsp;<span class="op" id="5198089">&gt;</span>&nbsp;<span class="num" id="5198091">0</span>&nbsp;<span class="op" id="5198093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198099"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198100">.</span><span class="builtintype" id="5198101">error</span><span class="op" id="5198106">(</span><span class="ident" id="5198107"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198108">.</span><span class="ident" id="5198109">offset</span><span class="op" id="5198115">,</span>&nbsp;<span class="string" id="5198117">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="5198142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198147">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198155"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198156">.</span><span class="ident" id="5198157">rdOffset</span>&nbsp;<span class="op" id="5198166">+=</span>&nbsp;<span class="ident" id="5198169"><a href="/go/scanner/scanner.go.html#5197785">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198173"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198174">.</span><span class="ident" id="5198175">ch</span>&nbsp;<span class="op" id="5198178">=</span>&nbsp;<span class="ident" id="5198180"><a href="/go/scanner/scanner.go.html#5197782">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198183">}</span>&nbsp;<span class="keyword" id="5198185">else</span>&nbsp;<span class="op" id="5198190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198194"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198195">.</span><span class="ident" id="5198196">offset</span>&nbsp;<span class="op" id="5198203">=</span>&nbsp;<span class="builtinfunc" id="5198205">len</span><span class="op" id="5198208">(</span><span class="ident" id="5198209"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198210">.</span><span class="ident" id="5198211">src</span><span class="op" id="5198214">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198218">if</span>&nbsp;<span class="ident" id="5198221"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198222">.</span><span class="ident" id="5198223">ch</span>&nbsp;<span class="op" id="5198226">==</span>&nbsp;<span class="string" id="5198229">&#39;\n&#39;</span>&nbsp;<span class="op" id="5198234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198239"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198240">.</span><span class="ident" id="5198241">lineOffset</span>&nbsp;<span class="op" id="5198252">=</span>&nbsp;<span class="ident" id="5198254"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198255">.</span><span class="ident" id="5198256">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198266"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198267">.</span><span class="ident" id="5198268">file</span><span class="op" id="5198272">.</span><span class="ident" id="5198273">AddLine</span><span class="op" id="5198280">(</span><span class="ident" id="5198281"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198282">.</span><span class="ident" id="5198283">offset</span><span class="op" id="5198289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198297"><a href="/go/scanner/scanner.go.html#5197626">s</a></span><span class="op" id="5198298">.</span><span class="ident" id="5198299">ch</span>&nbsp;<span class="op" id="5198302">=</span>&nbsp;<span class="op" id="5198304">-</span><span class="num" id="5198305">1</span>&nbsp;<span class="comment" id="5198307">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198315">}</span><br>
<span class="lineno"></span><span class="op" id="5198317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5198320">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="5198362">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="5198396">//</span><br>
<span class="lineno"></span><span class="keyword" id="5198399">type</span>&nbsp;<span class="ident" id="5198404">Mode</span>&nbsp;<span class="builtintype" id="5198409">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5198415">const</span>&nbsp;<span class="op" id="5198421">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198424">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5198440"><a href="/go/scanner/scanner.go.html#5198404">Mode</a></span>&nbsp;<span class="op" id="5198445">=</span>&nbsp;<span class="num" id="5198447">1</span>&nbsp;<span class="op" id="5198449">&lt;&lt;</span>&nbsp;<span class="ident" id="5198452">iota</span>&nbsp;<span class="comment" id="5198457">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198495">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5198528">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="5198589">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5198592">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5198663">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="5198734">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="5198806">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5198876">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5198947">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="5199002">//</span><br>
<span class="lineno">105</span><span class="comment" id="5199005">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5199076">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="5199146">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="5199220">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="5199260">//</span><br>
<span class="lineno">110</span><span class="comment" id="5199263">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="5199338">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5199354">//</span><br>
<span class="lineno"></span><span class="keyword" id="5199357">func</span>&nbsp;<span class="op" id="5199362">(</span><span class="ident" id="5199363">s</span>&nbsp;<span class="op" id="5199365">*</span><span class="ident" id="5199366"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5199373">)</span>&nbsp;<span class="ident" id="5199375">Init</span><span class="op" id="5199379">(</span><span class="ident" id="5199380">file</span>&nbsp;<span class="op" id="5199385">*</span><span class="ident" id="5199386"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5199391">.</span><span class="ident" id="5199392">File</span><span class="op" id="5199396">,</span>&nbsp;<span class="ident" id="5199398">src</span>&nbsp;<span class="op" id="5199402">[</span><span class="op" id="5199403">]</span><span class="builtintype" id="5199404">byte</span><span class="op" id="5199408">,</span>&nbsp;<span class="ident" id="5199410">err</span>&nbsp;<span class="ident" id="5199414"><a href="/go/scanner/scanner.go.html#5196630">ErrorHandler</a></span><span class="op" id="5199426">,</span>&nbsp;<span class="ident" id="5199428">mode</span>&nbsp;<span class="ident" id="5199433"><a href="/go/scanner/scanner.go.html#5198404">Mode</a></span><span class="op" id="5199437">)</span>&nbsp;<span class="op" id="5199439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199442">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199510">if</span>&nbsp;<span class="ident" id="5199513"><a href="/go/scanner/scanner.go.html#5199380">file</a></span><span class="op" id="5199517">.</span><span class="ident" id="5199518">Size</span><span class="op" id="5199522">(</span><span class="op" id="5199523">)</span>&nbsp;<span class="op" id="5199525">!=</span>&nbsp;<span class="builtinfunc" id="5199528">len</span><span class="op" id="5199531">(</span><span class="ident" id="5199532"><a href="/go/scanner/scanner.go.html#5199398">src</a></span><span class="op" id="5199535">)</span>&nbsp;<span class="op" id="5199537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5199541">panic</span><span class="op" id="5199546">(</span><span class="ident" id="5199547"><a href="/go/scanner/scanner.go.html#5196302">fmt</a></span><span class="op" id="5199550">.</span><span class="ident" id="5199551">Sprintf</span><span class="op" id="5199558">(</span><span class="string" id="5199559">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="5199603">,</span>&nbsp;<span class="ident" id="5199605"><a href="/go/scanner/scanner.go.html#5199380">file</a></span><span class="op" id="5199609">.</span><span class="ident" id="5199610">Size</span><span class="op" id="5199614">(</span><span class="op" id="5199615">)</span><span class="op" id="5199616">,</span>&nbsp;<span class="builtinfunc" id="5199618">len</span><span class="op" id="5199621">(</span><span class="ident" id="5199622"><a href="/go/scanner/scanner.go.html#5199398">src</a></span><span class="op" id="5199625">)</span><span class="op" id="5199626">)</span><span class="op" id="5199627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199633"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199634">.</span><span class="ident" id="5199635">file</span>&nbsp;<span class="op" id="5199640">=</span>&nbsp;<span class="ident" id="5199642"><a href="/go/scanner/scanner.go.html#5199380">file</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199648"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199649">.</span><span class="ident" id="5199650">dir</span><span class="op" id="5199653">,</span>&nbsp;<span class="ident" id="5199655">_</span>&nbsp;<span class="op" id="5199657">=</span>&nbsp;<span class="ident" id="5199659"><a href="/go/scanner/scanner.go.html#5196321">filepath</a></span><span class="op" id="5199667">.</span><span class="ident" id="5199668">Split</span><span class="op" id="5199673">(</span><span class="ident" id="5199674"><a href="/go/scanner/scanner.go.html#5199380">file</a></span><span class="op" id="5199678">.</span><span class="ident" id="5199679">Name</span><span class="op" id="5199683">(</span><span class="op" id="5199684">)</span><span class="op" id="5199685">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199688"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199689">.</span><span class="ident" id="5199690">src</span>&nbsp;<span class="op" id="5199694">=</span>&nbsp;<span class="ident" id="5199696"><a href="/go/scanner/scanner.go.html#5199398">src</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199701"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199702">.</span><span class="ident" id="5199703">err</span>&nbsp;<span class="op" id="5199707">=</span>&nbsp;<span class="ident" id="5199709"><a href="/go/scanner/scanner.go.html#5199410">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199714"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199715">.</span><span class="ident" id="5199716">mode</span>&nbsp;<span class="op" id="5199721">=</span>&nbsp;<span class="ident" id="5199723"><a href="/go/scanner/scanner.go.html#5199428">mode</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199730"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199731">.</span><span class="ident" id="5199732">ch</span>&nbsp;<span class="op" id="5199735">=</span>&nbsp;<span class="string" id="5199737">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199742"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199743">.</span><span class="ident" id="5199744">offset</span>&nbsp;<span class="op" id="5199751">=</span>&nbsp;<span class="num" id="5199753">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199756"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199757">.</span><span class="ident" id="5199758">rdOffset</span>&nbsp;<span class="op" id="5199767">=</span>&nbsp;<span class="num" id="5199769">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199772"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199773">.</span><span class="ident" id="5199774">lineOffset</span>&nbsp;<span class="op" id="5199785">=</span>&nbsp;<span class="num" id="5199787">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199790"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199791">.</span><span class="ident" id="5199792">insertSemi</span>&nbsp;<span class="op" id="5199803">=</span>&nbsp;<span class="builtintype" id="5199805">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199812"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199813">.</span><span class="ident" id="5199814">ErrorCount</span>&nbsp;<span class="op" id="5199825">=</span>&nbsp;<span class="num" id="5199827">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199831"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199832">.</span><span class="ident" id="5199833">next</span><span class="op" id="5199837">(</span><span class="op" id="5199838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199841">if</span>&nbsp;<span class="ident" id="5199844"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199845">.</span><span class="ident" id="5199846">ch</span>&nbsp;<span class="op" id="5199849">==</span>&nbsp;<span class="ident" id="5199852"><a href="/go/scanner/scanner.go.html#5197472">bom</a></span>&nbsp;<span class="op" id="5199856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199860"><a href="/go/scanner/scanner.go.html#5199363">s</a></span><span class="op" id="5199861">.</span><span class="ident" id="5199862">next</span><span class="op" id="5199866">(</span><span class="op" id="5199867">)</span>&nbsp;<span class="comment" id="5199869">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199902">}</span><br>
<span class="lineno">135</span><span class="op" id="5199904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5199907">func</span>&nbsp;<span class="op" id="5199912">(</span><span class="ident" id="5199913">s</span>&nbsp;<span class="op" id="5199915">*</span><span class="ident" id="5199916"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5199923">)</span>&nbsp;<span class="builtintype" id="5199925">error</span><span class="op" id="5199930">(</span><span class="ident" id="5199931">offs</span>&nbsp;<span class="builtintype" id="5199936">int</span><span class="op" id="5199939">,</span>&nbsp;<span class="ident" id="5199941">msg</span>&nbsp;<span class="builtintype" id="5199945">string</span><span class="op" id="5199951">)</span>&nbsp;<span class="op" id="5199953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199956">if</span>&nbsp;<span class="ident" id="5199959"><a href="/go/scanner/scanner.go.html#5199913">s</a></span><span class="op" id="5199960">.</span><span class="ident" id="5199961">err</span>&nbsp;<span class="op" id="5199965">!=</span>&nbsp;<span class="ident" id="5199968">nil</span>&nbsp;<span class="op" id="5199972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199976"><a href="/go/scanner/scanner.go.html#5199913">s</a></span><span class="op" id="5199977">.</span><span class="ident" id="5199978">err</span><span class="op" id="5199981">(</span><span class="ident" id="5199982"><a href="/go/scanner/scanner.go.html#5199913">s</a></span><span class="op" id="5199983">.</span><span class="ident" id="5199984">file</span><span class="op" id="5199988">.</span><span class="ident" id="5199989">Position</span><span class="op" id="5199997">(</span><span class="ident" id="5199998"><a href="/go/scanner/scanner.go.html#5199913">s</a></span><span class="op" id="5199999">.</span><span class="ident" id="5200000">file</span><span class="op" id="5200004">.</span><span class="ident" id="5200005">Pos</span><span class="op" id="5200008">(</span><span class="ident" id="5200009"><a href="/go/scanner/scanner.go.html#5199931">offs</a></span><span class="op" id="5200013">)</span><span class="op" id="5200014">)</span><span class="op" id="5200015">,</span>&nbsp;<span class="ident" id="5200017"><a href="/go/scanner/scanner.go.html#5199941">msg</a></span><span class="op" id="5200020">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200026"><a href="/go/scanner/scanner.go.html#5199913">s</a></span><span class="op" id="5200027">.</span><span class="ident" id="5200028">ErrorCount</span><span class="op" id="5200038">++</span><br>
<span class="lineno"></span><span class="op" id="5200041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5200044">var</span>&nbsp;<span class="ident" id="5200048">prefix</span>&nbsp;<span class="op" id="5200055">=</span>&nbsp;<span class="op" id="5200057">[</span><span class="op" id="5200058">]</span><span class="builtintype" id="5200059">byte</span><span class="op" id="5200063">(</span><span class="string" id="5200064">&#34;//line&nbsp;&#34;</span><span class="op" id="5200073">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="5200076">func</span>&nbsp;<span class="op" id="5200081">(</span><span class="ident" id="5200082">s</span>&nbsp;<span class="op" id="5200084">*</span><span class="ident" id="5200085"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5200092">)</span>&nbsp;<span class="ident" id="5200094">interpretLineComment</span><span class="op" id="5200114">(</span><span class="ident" id="5200115">text</span>&nbsp;<span class="op" id="5200120">[</span><span class="op" id="5200121">]</span><span class="builtintype" id="5200122">byte</span><span class="op" id="5200126">)</span>&nbsp;<span class="op" id="5200128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200131">if</span>&nbsp;<span class="ident" id="5200134"><a href="/go/scanner/scanner.go.html#5196293">bytes</a></span><span class="op" id="5200139">.</span><span class="ident" id="5200140">HasPrefix</span><span class="op" id="5200149">(</span><span class="ident" id="5200150"><a href="/go/scanner/scanner.go.html#5200115">text</a></span><span class="op" id="5200154">,</span>&nbsp;<span class="ident" id="5200156"><a href="/go/scanner/scanner.go.html#5200048">prefix</a></span><span class="op" id="5200162">)</span>&nbsp;<span class="op" id="5200164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5200168">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200210">if</span>&nbsp;<span class="ident" id="5200213">i</span>&nbsp;<span class="op" id="5200215">:=</span>&nbsp;<span class="ident" id="5200218"><a href="/go/scanner/scanner.go.html#5196293">bytes</a></span><span class="op" id="5200223">.</span><span class="ident" id="5200224">LastIndex</span><span class="op" id="5200233">(</span><span class="ident" id="5200234"><a href="/go/scanner/scanner.go.html#5200115">text</a></span><span class="op" id="5200238">,</span>&nbsp;<span class="op" id="5200240">[</span><span class="op" id="5200241">]</span><span class="builtintype" id="5200242">byte</span><span class="op" id="5200246">{</span><span class="string" id="5200247">&#39;:&#39;</span><span class="op" id="5200250">}</span><span class="op" id="5200251">)</span><span class="op" id="5200252">;</span>&nbsp;<span class="ident" id="5200254"><a href="/go/scanner/scanner.go.html#5200213">i</a></span>&nbsp;<span class="op" id="5200256">&gt;</span>&nbsp;<span class="num" id="5200258">0</span>&nbsp;<span class="op" id="5200260">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200265">if</span>&nbsp;<span class="ident" id="5200268">line</span><span class="op" id="5200272">,</span>&nbsp;<span class="ident" id="5200274">err</span>&nbsp;<span class="op" id="5200278">:=</span>&nbsp;<span class="ident" id="5200281"><a href="/go/scanner/scanner.go.html#5196338">strconv</a></span><span class="op" id="5200288">.</span><span class="ident" id="5200289">Atoi</span><span class="op" id="5200293">(</span><span class="builtintype" id="5200294">string</span><span class="op" id="5200300">(</span><span class="ident" id="5200301"><a href="/go/scanner/scanner.go.html#5200115">text</a></span><span class="op" id="5200305">[</span><span class="ident" id="5200306"><a href="/go/scanner/scanner.go.html#5200213">i</a></span><span class="op" id="5200307">+</span><span class="num" id="5200308">1</span><span class="op" id="5200309">:</span><span class="op" id="5200310">]</span><span class="op" id="5200311">)</span><span class="op" id="5200312">)</span><span class="op" id="5200313">;</span>&nbsp;<span class="ident" id="5200315"><a href="/go/scanner/scanner.go.html#5200274">err</a></span>&nbsp;<span class="op" id="5200319">==</span>&nbsp;<span class="ident" id="5200322">nil</span>&nbsp;<span class="op" id="5200326">&amp;&amp;</span>&nbsp;<span class="ident" id="5200329"><a href="/go/scanner/scanner.go.html#5200268">line</a></span>&nbsp;<span class="op" id="5200334">&gt;</span>&nbsp;<span class="num" id="5200336">0</span>&nbsp;<span class="op" id="5200338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5200344">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200386">filename</span>&nbsp;<span class="op" id="5200395">:=</span>&nbsp;<span class="builtintype" id="5200398">string</span><span class="op" id="5200404">(</span><span class="ident" id="5200405"><a href="/go/scanner/scanner.go.html#5196293">bytes</a></span><span class="op" id="5200410">.</span><span class="ident" id="5200411">TrimSpace</span><span class="op" id="5200420">(</span><span class="ident" id="5200421"><a href="/go/scanner/scanner.go.html#5200115">text</a></span><span class="op" id="5200425">[</span><span class="builtinfunc" id="5200426">len</span><span class="op" id="5200429">(</span><span class="ident" id="5200430"><a href="/go/scanner/scanner.go.html#5200048">prefix</a></span><span class="op" id="5200436">)</span><span class="op" id="5200437">:</span><span class="ident" id="5200438"><a href="/go/scanner/scanner.go.html#5200213">i</a></span><span class="op" id="5200439">]</span><span class="op" id="5200440">)</span><span class="op" id="5200441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200447">if</span>&nbsp;<span class="ident" id="5200450"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span>&nbsp;<span class="op" id="5200459">!=</span>&nbsp;<span class="string" id="5200462">&#34;&#34;</span>&nbsp;<span class="op" id="5200465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200472"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span>&nbsp;<span class="op" id="5200481">=</span>&nbsp;<span class="ident" id="5200483"><a href="/go/scanner/scanner.go.html#5196321">filepath</a></span><span class="op" id="5200491">.</span><span class="ident" id="5200492">Clean</span><span class="op" id="5200497">(</span><span class="ident" id="5200498"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span><span class="op" id="5200506">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200513">if</span>&nbsp;<span class="op" id="5200516">!</span><span class="ident" id="5200517"><a href="/go/scanner/scanner.go.html#5196321">filepath</a></span><span class="op" id="5200525">.</span><span class="ident" id="5200526">IsAbs</span><span class="op" id="5200531">(</span><span class="ident" id="5200532"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span><span class="op" id="5200540">)</span>&nbsp;<span class="op" id="5200542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5200550">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200603"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span>&nbsp;<span class="op" id="5200612">=</span>&nbsp;<span class="ident" id="5200614"><a href="/go/scanner/scanner.go.html#5196321">filepath</a></span><span class="op" id="5200622">.</span><span class="ident" id="5200623">Join</span><span class="op" id="5200627">(</span><span class="ident" id="5200628"><a href="/go/scanner/scanner.go.html#5200082">s</a></span><span class="op" id="5200629">.</span><span class="ident" id="5200630">dir</span><span class="op" id="5200633">,</span>&nbsp;<span class="ident" id="5200635"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span><span class="op" id="5200643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200656">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5200662">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200693"><a href="/go/scanner/scanner.go.html#5200082">s</a></span><span class="op" id="5200694">.</span><span class="ident" id="5200695">file</span><span class="op" id="5200699">.</span><span class="ident" id="5200700">AddLineInfo</span><span class="op" id="5200711">(</span><span class="ident" id="5200712"><a href="/go/scanner/scanner.go.html#5200082">s</a></span><span class="op" id="5200713">.</span><span class="ident" id="5200714">lineOffset</span><span class="op" id="5200724">+</span><span class="builtinfunc" id="5200725">len</span><span class="op" id="5200728">(</span><span class="ident" id="5200729"><a href="/go/scanner/scanner.go.html#5200115">text</a></span><span class="op" id="5200733">)</span><span class="op" id="5200734">+</span><span class="num" id="5200735">1</span><span class="op" id="5200736">,</span>&nbsp;<span class="ident" id="5200738"><a href="/go/scanner/scanner.go.html#5200386">filename</a></span><span class="op" id="5200746">,</span>&nbsp;<span class="ident" id="5200748"><a href="/go/scanner/scanner.go.html#5200268">line</a></span><span class="op" id="5200752">)</span>&nbsp;<span class="comment" id="5200754">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5200815">}</span><br>
<span class="lineno">165</span><span class="op" id="5200817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5200820">func</span>&nbsp;<span class="op" id="5200825">(</span><span class="ident" id="5200826">s</span>&nbsp;<span class="op" id="5200828">*</span><span class="ident" id="5200829"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5200836">)</span>&nbsp;<span class="ident" id="5200838">scanComment</span><span class="op" id="5200849">(</span><span class="op" id="5200850">)</span>&nbsp;<span class="builtintype" id="5200852">string</span>&nbsp;<span class="op" id="5200859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5200862">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200923">offs</span>&nbsp;<span class="op" id="5200928">:=</span>&nbsp;<span class="ident" id="5200931"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5200932">.</span><span class="ident" id="5200933">offset</span>&nbsp;<span class="op" id="5200940">-</span>&nbsp;<span class="num" id="5200942">1</span>&nbsp;<span class="comment" id="5200944">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200972">hasCR</span>&nbsp;<span class="op" id="5200978">:=</span>&nbsp;<span class="builtintype" id="5200981">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5200989">if</span>&nbsp;<span class="ident" id="5200992"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5200993">.</span><span class="ident" id="5200994">ch</span>&nbsp;<span class="op" id="5200997">==</span>&nbsp;<span class="string" id="5201000">&#39;/&#39;</span>&nbsp;<span class="op" id="5201004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201008">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201027"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201028">.</span><span class="ident" id="5201029">next</span><span class="op" id="5201033">(</span><span class="op" id="5201034">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201038">for</span>&nbsp;<span class="ident" id="5201042"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201043">.</span><span class="ident" id="5201044">ch</span>&nbsp;<span class="op" id="5201047">!=</span>&nbsp;<span class="string" id="5201050">&#39;\n&#39;</span>&nbsp;<span class="op" id="5201055">&amp;&amp;</span>&nbsp;<span class="ident" id="5201058"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201059">.</span><span class="ident" id="5201060">ch</span>&nbsp;<span class="op" id="5201063">&gt;=</span>&nbsp;<span class="num" id="5201066">0</span>&nbsp;<span class="op" id="5201068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201073">if</span>&nbsp;<span class="ident" id="5201076"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201077">.</span><span class="ident" id="5201078">ch</span>&nbsp;<span class="op" id="5201081">==</span>&nbsp;<span class="string" id="5201084">&#39;\r&#39;</span>&nbsp;<span class="op" id="5201089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201095"><a href="/go/scanner/scanner.go.html#5200972">hasCR</a></span>&nbsp;<span class="op" id="5201101">=</span>&nbsp;<span class="builtintype" id="5201103">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201116"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201117">.</span><span class="ident" id="5201118">next</span><span class="op" id="5201122">(</span><span class="op" id="5201123">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201131">if</span>&nbsp;<span class="ident" id="5201134"><a href="/go/scanner/scanner.go.html#5200923">offs</a></span>&nbsp;<span class="op" id="5201139">==</span>&nbsp;<span class="ident" id="5201142"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201143">.</span><span class="ident" id="5201144">lineOffset</span>&nbsp;<span class="op" id="5201155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201160">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201218"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201219">.</span><span class="ident" id="5201220">interpretLineComment</span><span class="op" id="5201240">(</span><span class="ident" id="5201241"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201242">.</span><span class="ident" id="5201243">src</span><span class="op" id="5201246">[</span><span class="ident" id="5201247"><a href="/go/scanner/scanner.go.html#5200923">offs</a></span><span class="op" id="5201251">:</span><span class="ident" id="5201252"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201253">.</span><span class="ident" id="5201254">offset</span><span class="op" id="5201260">]</span><span class="op" id="5201261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201265">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201269">goto</span>&nbsp;<span class="ident" id="5201274">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201284">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201305"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201306">.</span><span class="ident" id="5201307">next</span><span class="op" id="5201311">(</span><span class="op" id="5201312">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201315">for</span>&nbsp;<span class="ident" id="5201319"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201320">.</span><span class="ident" id="5201321">ch</span>&nbsp;<span class="op" id="5201324">&gt;=</span>&nbsp;<span class="num" id="5201327">0</span>&nbsp;<span class="op" id="5201329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201333">ch</span>&nbsp;<span class="op" id="5201336">:=</span>&nbsp;<span class="ident" id="5201339"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201340">.</span><span class="ident" id="5201341">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201346">if</span>&nbsp;<span class="ident" id="5201349"><a href="/go/scanner/scanner.go.html#5201333">ch</a></span>&nbsp;<span class="op" id="5201352">==</span>&nbsp;<span class="string" id="5201355">&#39;\r&#39;</span>&nbsp;<span class="op" id="5201360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201365"><a href="/go/scanner/scanner.go.html#5200972">hasCR</a></span>&nbsp;<span class="op" id="5201371">=</span>&nbsp;<span class="builtintype" id="5201373">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201380">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201384"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201385">.</span><span class="ident" id="5201386">next</span><span class="op" id="5201390">(</span><span class="op" id="5201391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201395">if</span>&nbsp;<span class="ident" id="5201398"><a href="/go/scanner/scanner.go.html#5201333">ch</a></span>&nbsp;<span class="op" id="5201401">==</span>&nbsp;<span class="string" id="5201404">&#39;*&#39;</span>&nbsp;<span class="op" id="5201408">&amp;&amp;</span>&nbsp;<span class="ident" id="5201411"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201412">.</span><span class="ident" id="5201413">ch</span>&nbsp;<span class="op" id="5201416">==</span>&nbsp;<span class="string" id="5201419">&#39;/&#39;</span>&nbsp;<span class="op" id="5201423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201428"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201429">.</span><span class="ident" id="5201430">next</span><span class="op" id="5201434">(</span><span class="op" id="5201435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201440">goto</span>&nbsp;<span class="ident" id="5201445">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201452">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201459"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201460">.</span><span class="builtintype" id="5201461">error</span><span class="op" id="5201466">(</span><span class="ident" id="5201467"><a href="/go/scanner/scanner.go.html#5200923">offs</a></span><span class="op" id="5201471">,</span>&nbsp;<span class="string" id="5201473">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5201497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5201500">exit</span><span class="op" id="5201504">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201507">lit</span>&nbsp;<span class="op" id="5201511">:=</span>&nbsp;<span class="ident" id="5201514"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201515">.</span><span class="ident" id="5201516">src</span><span class="op" id="5201519">[</span><span class="ident" id="5201520"><a href="/go/scanner/scanner.go.html#5200923">offs</a></span><span class="op" id="5201524">:</span><span class="ident" id="5201525"><a href="/go/scanner/scanner.go.html#5200826">s</a></span><span class="op" id="5201526">.</span><span class="ident" id="5201527">offset</span><span class="op" id="5201533">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201536">if</span>&nbsp;<span class="ident" id="5201539"><a href="/go/scanner/scanner.go.html#5200972">hasCR</a></span>&nbsp;<span class="op" id="5201545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201549"><a href="/go/scanner/scanner.go.html#5201507">lit</a></span>&nbsp;<span class="op" id="5201553">=</span>&nbsp;<span class="ident" id="5201555"><a href="/go/scanner/scanner.go.html#5206672">stripCR</a></span><span class="op" id="5201562">(</span><span class="ident" id="5201563"><a href="/go/scanner/scanner.go.html#5201507">lit</a></span><span class="op" id="5201566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201573">return</span>&nbsp;<span class="builtintype" id="5201580">string</span><span class="op" id="5201586">(</span><span class="ident" id="5201587"><a href="/go/scanner/scanner.go.html#5201507">lit</a></span><span class="op" id="5201590">)</span><br>
<span class="lineno"></span><span class="op" id="5201592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5201595">func</span>&nbsp;<span class="op" id="5201600">(</span><span class="ident" id="5201601">s</span>&nbsp;<span class="op" id="5201603">*</span><span class="ident" id="5201604"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5201611">)</span>&nbsp;<span class="ident" id="5201613">findLineEnd</span><span class="op" id="5201624">(</span><span class="op" id="5201625">)</span>&nbsp;<span class="builtintype" id="5201627">bool</span>&nbsp;<span class="op" id="5201632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201635">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201669">defer</span>&nbsp;<span class="keyword" id="5201675">func</span><span class="op" id="5201679">(</span><span class="ident" id="5201680">offs</span>&nbsp;<span class="builtintype" id="5201685">int</span><span class="op" id="5201688">)</span>&nbsp;<span class="op" id="5201690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201694">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201760"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201761">.</span><span class="ident" id="5201762">ch</span>&nbsp;<span class="op" id="5201765">=</span>&nbsp;<span class="string" id="5201767">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201773"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201774">.</span><span class="ident" id="5201775">offset</span>&nbsp;<span class="op" id="5201782">=</span>&nbsp;<span class="ident" id="5201784"><a href="/go/scanner/scanner.go.html#5201680">offs</a></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201791"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201792">.</span><span class="ident" id="5201793">rdOffset</span>&nbsp;<span class="op" id="5201802">=</span>&nbsp;<span class="ident" id="5201804"><a href="/go/scanner/scanner.go.html#5201680">offs</a></span>&nbsp;<span class="op" id="5201809">+</span>&nbsp;<span class="num" id="5201811">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201815"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201816">.</span><span class="ident" id="5201817">next</span><span class="op" id="5201821">(</span><span class="op" id="5201822">)</span>&nbsp;<span class="comment" id="5201824">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201854">}</span><span class="op" id="5201855">(</span><span class="ident" id="5201856"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201857">.</span><span class="ident" id="5201858">offset</span>&nbsp;<span class="op" id="5201865">-</span>&nbsp;<span class="num" id="5201867">1</span><span class="op" id="5201868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201872">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201939">for</span>&nbsp;<span class="ident" id="5201943"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201944">.</span><span class="ident" id="5201945">ch</span>&nbsp;<span class="op" id="5201948">==</span>&nbsp;<span class="string" id="5201951">&#39;/&#39;</span>&nbsp;<span class="op" id="5201955">||</span>&nbsp;<span class="ident" id="5201958"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201959">.</span><span class="ident" id="5201960">ch</span>&nbsp;<span class="op" id="5201963">==</span>&nbsp;<span class="string" id="5201966">&#39;*&#39;</span>&nbsp;<span class="op" id="5201970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201974">if</span>&nbsp;<span class="ident" id="5201977"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5201978">.</span><span class="ident" id="5201979">ch</span>&nbsp;<span class="op" id="5201982">==</span>&nbsp;<span class="string" id="5201985">&#39;/&#39;</span>&nbsp;<span class="op" id="5201989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5201994">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202040">return</span>&nbsp;<span class="builtintype" id="5202047">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202054">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5202058">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202098"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202099">.</span><span class="ident" id="5202100">next</span><span class="op" id="5202104">(</span><span class="op" id="5202105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202109">for</span>&nbsp;<span class="ident" id="5202113"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202114">.</span><span class="ident" id="5202115">ch</span>&nbsp;<span class="op" id="5202118">&gt;=</span>&nbsp;<span class="num" id="5202121">0</span>&nbsp;<span class="op" id="5202123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202128">ch</span>&nbsp;<span class="op" id="5202131">:=</span>&nbsp;<span class="ident" id="5202134"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202135">.</span><span class="ident" id="5202136">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202142">if</span>&nbsp;<span class="ident" id="5202145"><a href="/go/scanner/scanner.go.html#5202128">ch</a></span>&nbsp;<span class="op" id="5202148">==</span>&nbsp;<span class="string" id="5202151">&#39;\n&#39;</span>&nbsp;<span class="op" id="5202156">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202162">return</span>&nbsp;<span class="builtintype" id="5202169">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202182"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202183">.</span><span class="ident" id="5202184">next</span><span class="op" id="5202188">(</span><span class="op" id="5202189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202194">if</span>&nbsp;<span class="ident" id="5202197"><a href="/go/scanner/scanner.go.html#5202128">ch</a></span>&nbsp;<span class="op" id="5202200">==</span>&nbsp;<span class="string" id="5202203">&#39;*&#39;</span>&nbsp;<span class="op" id="5202207">&amp;&amp;</span>&nbsp;<span class="ident" id="5202210"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202211">.</span><span class="ident" id="5202212">ch</span>&nbsp;<span class="op" id="5202215">==</span>&nbsp;<span class="string" id="5202218">&#39;/&#39;</span>&nbsp;<span class="op" id="5202222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202228"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202229">.</span><span class="ident" id="5202230">next</span><span class="op" id="5202234">(</span><span class="op" id="5202235">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202241">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202258"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202259">.</span><span class="ident" id="5202260">skipWhitespace</span><span class="op" id="5202274">(</span><span class="op" id="5202275">)</span>&nbsp;<span class="comment" id="5202277">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202302">if</span>&nbsp;<span class="ident" id="5202305"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202306">.</span><span class="ident" id="5202307">ch</span>&nbsp;<span class="op" id="5202310">&lt;</span>&nbsp;<span class="num" id="5202312">0</span>&nbsp;<span class="op" id="5202314">||</span>&nbsp;<span class="ident" id="5202317"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202318">.</span><span class="ident" id="5202319">ch</span>&nbsp;<span class="op" id="5202322">==</span>&nbsp;<span class="string" id="5202325">&#39;\n&#39;</span>&nbsp;<span class="op" id="5202330">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202335">return</span>&nbsp;<span class="builtintype" id="5202342">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202353">if</span>&nbsp;<span class="ident" id="5202356"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202357">.</span><span class="ident" id="5202358">ch</span>&nbsp;<span class="op" id="5202361">!=</span>&nbsp;<span class="string" id="5202364">&#39;/&#39;</span>&nbsp;<span class="op" id="5202368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5202373">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202397">return</span>&nbsp;<span class="builtintype" id="5202404">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202416"><a href="/go/scanner/scanner.go.html#5201601">s</a></span><span class="op" id="5202417">.</span><span class="ident" id="5202418">next</span><span class="op" id="5202422">(</span><span class="op" id="5202423">)</span>&nbsp;<span class="comment" id="5202425">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202445">return</span>&nbsp;<span class="builtintype" id="5202452">false</span><br>
<span class="lineno">255</span><span class="op" id="5202458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202461">func</span>&nbsp;<span class="ident" id="5202466">isLetter</span><span class="op" id="5202474">(</span><span class="ident" id="5202475">ch</span>&nbsp;<span class="builtintype" id="5202478">rune</span><span class="op" id="5202482">)</span>&nbsp;<span class="builtintype" id="5202484">bool</span>&nbsp;<span class="op" id="5202489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202492">return</span>&nbsp;<span class="string" id="5202499">&#39;a&#39;</span>&nbsp;<span class="op" id="5202503">&lt;=</span>&nbsp;<span class="ident" id="5202506"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202509">&amp;&amp;</span>&nbsp;<span class="ident" id="5202512"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202515">&lt;=</span>&nbsp;<span class="string" id="5202518">&#39;z&#39;</span>&nbsp;<span class="op" id="5202522">||</span>&nbsp;<span class="string" id="5202525">&#39;A&#39;</span>&nbsp;<span class="op" id="5202529">&lt;=</span>&nbsp;<span class="ident" id="5202532"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202535">&amp;&amp;</span>&nbsp;<span class="ident" id="5202538"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202541">&lt;=</span>&nbsp;<span class="string" id="5202544">&#39;Z&#39;</span>&nbsp;<span class="op" id="5202548">||</span>&nbsp;<span class="ident" id="5202551"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202554">==</span>&nbsp;<span class="string" id="5202557">&#39;_&#39;</span>&nbsp;<span class="op" id="5202561">||</span>&nbsp;<span class="ident" id="5202564"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span>&nbsp;<span class="op" id="5202567">&gt;=</span>&nbsp;<span class="num" id="5202570">0x80</span>&nbsp;<span class="op" id="5202575">&amp;&amp;</span>&nbsp;<span class="ident" id="5202578"><a href="/go/scanner/scanner.go.html#5196349">unicode</a></span><span class="op" id="5202585">.</span><span class="ident" id="5202586">IsLetter</span><span class="op" id="5202594">(</span><span class="ident" id="5202595"><a href="/go/scanner/scanner.go.html#5202475">ch</a></span><span class="op" id="5202597">)</span><br>
<span class="lineno"></span><span class="op" id="5202599">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="5202602">func</span>&nbsp;<span class="ident" id="5202607">isDigit</span><span class="op" id="5202614">(</span><span class="ident" id="5202615">ch</span>&nbsp;<span class="builtintype" id="5202618">rune</span><span class="op" id="5202622">)</span>&nbsp;<span class="builtintype" id="5202624">bool</span>&nbsp;<span class="op" id="5202629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202632">return</span>&nbsp;<span class="string" id="5202639">&#39;0&#39;</span>&nbsp;<span class="op" id="5202643">&lt;=</span>&nbsp;<span class="ident" id="5202646"><a href="/go/scanner/scanner.go.html#5202615">ch</a></span>&nbsp;<span class="op" id="5202649">&amp;&amp;</span>&nbsp;<span class="ident" id="5202652"><a href="/go/scanner/scanner.go.html#5202615">ch</a></span>&nbsp;<span class="op" id="5202655">&lt;=</span>&nbsp;<span class="string" id="5202658">&#39;9&#39;</span>&nbsp;<span class="op" id="5202662">||</span>&nbsp;<span class="ident" id="5202665"><a href="/go/scanner/scanner.go.html#5202615">ch</a></span>&nbsp;<span class="op" id="5202668">&gt;=</span>&nbsp;<span class="num" id="5202671">0x80</span>&nbsp;<span class="op" id="5202676">&amp;&amp;</span>&nbsp;<span class="ident" id="5202679"><a href="/go/scanner/scanner.go.html#5196349">unicode</a></span><span class="op" id="5202686">.</span><span class="ident" id="5202687">IsDigit</span><span class="op" id="5202694">(</span><span class="ident" id="5202695"><a href="/go/scanner/scanner.go.html#5202615">ch</a></span><span class="op" id="5202697">)</span><br>
<span class="lineno"></span><span class="op" id="5202699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5202702">func</span>&nbsp;<span class="op" id="5202707">(</span><span class="ident" id="5202708">s</span>&nbsp;<span class="op" id="5202710">*</span><span class="ident" id="5202711"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5202718">)</span>&nbsp;<span class="ident" id="5202720">scanIdentifier</span><span class="op" id="5202734">(</span><span class="op" id="5202735">)</span>&nbsp;<span class="builtintype" id="5202737">string</span>&nbsp;<span class="op" id="5202744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202747">offs</span>&nbsp;<span class="op" id="5202752">:=</span>&nbsp;<span class="ident" id="5202755"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202756">.</span><span class="ident" id="5202757">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202765">for</span>&nbsp;<span class="ident" id="5202769"><a href="/go/scanner/scanner.go.html#5202466">isLetter</a></span><span class="op" id="5202777">(</span><span class="ident" id="5202778"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202779">.</span><span class="ident" id="5202780">ch</span><span class="op" id="5202782">)</span>&nbsp;<span class="op" id="5202784">||</span>&nbsp;<span class="ident" id="5202787"><a href="/go/scanner/scanner.go.html#5202607">isDigit</a></span><span class="op" id="5202794">(</span><span class="ident" id="5202795"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202796">.</span><span class="ident" id="5202797">ch</span><span class="op" id="5202799">)</span>&nbsp;<span class="op" id="5202801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202805"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202806">.</span><span class="ident" id="5202807">next</span><span class="op" id="5202811">(</span><span class="op" id="5202812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202815">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202818">return</span>&nbsp;<span class="builtintype" id="5202825">string</span><span class="op" id="5202831">(</span><span class="ident" id="5202832"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202833">.</span><span class="ident" id="5202834">src</span><span class="op" id="5202837">[</span><span class="ident" id="5202838"><a href="/go/scanner/scanner.go.html#5202747">offs</a></span><span class="op" id="5202842">:</span><span class="ident" id="5202843"><a href="/go/scanner/scanner.go.html#5202708">s</a></span><span class="op" id="5202844">.</span><span class="ident" id="5202845">offset</span><span class="op" id="5202851">]</span><span class="op" id="5202852">)</span><br>
<span class="lineno"></span><span class="op" id="5202854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202857">func</span>&nbsp;<span class="ident" id="5202862">digitVal</span><span class="op" id="5202870">(</span><span class="ident" id="5202871">ch</span>&nbsp;<span class="builtintype" id="5202874">rune</span><span class="op" id="5202878">)</span>&nbsp;<span class="builtintype" id="5202880">int</span>&nbsp;<span class="op" id="5202884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202887">switch</span>&nbsp;<span class="op" id="5202894">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202897">case</span>&nbsp;<span class="string" id="5202902">&#39;0&#39;</span>&nbsp;<span class="op" id="5202906">&lt;=</span>&nbsp;<span class="ident" id="5202909"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202912">&amp;&amp;</span>&nbsp;<span class="ident" id="5202915"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202918">&lt;=</span>&nbsp;<span class="string" id="5202921">&#39;9&#39;</span><span class="op" id="5202924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202928">return</span>&nbsp;<span class="builtintype" id="5202935">int</span><span class="op" id="5202938">(</span><span class="ident" id="5202939"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202942">-</span>&nbsp;<span class="string" id="5202944">&#39;0&#39;</span><span class="op" id="5202947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202950">case</span>&nbsp;<span class="string" id="5202955">&#39;a&#39;</span>&nbsp;<span class="op" id="5202959">&lt;=</span>&nbsp;<span class="ident" id="5202962"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202965">&amp;&amp;</span>&nbsp;<span class="ident" id="5202968"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202971">&lt;=</span>&nbsp;<span class="string" id="5202974">&#39;f&#39;</span><span class="op" id="5202977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202981">return</span>&nbsp;<span class="builtintype" id="5202988">int</span><span class="op" id="5202991">(</span><span class="ident" id="5202992"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5202995">-</span>&nbsp;<span class="string" id="5202997">&#39;a&#39;</span>&nbsp;<span class="op" id="5203001">+</span>&nbsp;<span class="num" id="5203003">10</span><span class="op" id="5203005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203008">case</span>&nbsp;<span class="string" id="5203013">&#39;A&#39;</span>&nbsp;<span class="op" id="5203017">&lt;=</span>&nbsp;<span class="ident" id="5203020"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5203023">&amp;&amp;</span>&nbsp;<span class="ident" id="5203026"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5203029">&lt;=</span>&nbsp;<span class="string" id="5203032">&#39;F&#39;</span><span class="op" id="5203035">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203039">return</span>&nbsp;<span class="builtintype" id="5203046">int</span><span class="op" id="5203049">(</span><span class="ident" id="5203050"><a href="/go/scanner/scanner.go.html#5202871">ch</a></span>&nbsp;<span class="op" id="5203053">-</span>&nbsp;<span class="string" id="5203055">&#39;A&#39;</span>&nbsp;<span class="op" id="5203059">+</span>&nbsp;<span class="num" id="5203061">10</span><span class="op" id="5203063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203069">return</span>&nbsp;<span class="num" id="5203076">16</span>&nbsp;<span class="comment" id="5203079">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="5203114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5203117">func</span>&nbsp;<span class="op" id="5203122">(</span><span class="ident" id="5203123">s</span>&nbsp;<span class="op" id="5203125">*</span><span class="ident" id="5203126"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5203133">)</span>&nbsp;<span class="ident" id="5203135">scanMantissa</span><span class="op" id="5203147">(</span><span class="ident" id="5203148">base</span>&nbsp;<span class="builtintype" id="5203153">int</span><span class="op" id="5203156">)</span>&nbsp;<span class="op" id="5203158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203161">for</span>&nbsp;<span class="ident" id="5203165"><a href="/go/scanner/scanner.go.html#5202862">digitVal</a></span><span class="op" id="5203173">(</span><span class="ident" id="5203174"><a href="/go/scanner/scanner.go.html#5203123">s</a></span><span class="op" id="5203175">.</span><span class="ident" id="5203176">ch</span><span class="op" id="5203178">)</span>&nbsp;<span class="op" id="5203180">&lt;</span>&nbsp;<span class="ident" id="5203182"><a href="/go/scanner/scanner.go.html#5203148">base</a></span>&nbsp;<span class="op" id="5203187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203191"><a href="/go/scanner/scanner.go.html#5203123">s</a></span><span class="op" id="5203192">.</span><span class="ident" id="5203193">next</span><span class="op" id="5203197">(</span><span class="op" id="5203198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203201">}</span><br>
<span class="lineno"></span><span class="op" id="5203203">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="5203206">func</span>&nbsp;<span class="op" id="5203211">(</span><span class="ident" id="5203212">s</span>&nbsp;<span class="op" id="5203214">*</span><span class="ident" id="5203215"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5203222">)</span>&nbsp;<span class="ident" id="5203224">scanNumber</span><span class="op" id="5203234">(</span><span class="ident" id="5203235">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="5203252">bool</span><span class="op" id="5203256">)</span>&nbsp;<span class="op" id="5203258">(</span><span class="ident" id="5203259"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5203264">.</span><span class="ident" id="5203265">Token</span><span class="op" id="5203270">,</span>&nbsp;<span class="builtintype" id="5203272">string</span><span class="op" id="5203278">)</span>&nbsp;<span class="op" id="5203280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203283">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203307">offs</span>&nbsp;<span class="op" id="5203312">:=</span>&nbsp;<span class="ident" id="5203315"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203316">.</span><span class="ident" id="5203317">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203325">tok</span>&nbsp;<span class="op" id="5203329">:=</span>&nbsp;<span class="ident" id="5203332"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5203337">.</span><span class="ident" id="5203338">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203344">if</span>&nbsp;<span class="ident" id="5203347"><a href="/go/scanner/scanner.go.html#5203235">seenDecimalPoint</a></span>&nbsp;<span class="op" id="5203364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203368"><a href="/go/scanner/scanner.go.html#5203307">offs</a></span><span class="op" id="5203372">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203377"><a href="/go/scanner/scanner.go.html#5203325">tok</a></span>&nbsp;<span class="op" id="5203381">=</span>&nbsp;<span class="ident" id="5203383"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5203388">.</span><span class="ident" id="5203389">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203397"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203398">.</span><span class="ident" id="5203399">scanMantissa</span><span class="op" id="5203411">(</span><span class="num" id="5203412">10</span><span class="op" id="5203414">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203418">goto</span>&nbsp;<span class="ident" id="5203423">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203437">if</span>&nbsp;<span class="ident" id="5203440"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203441">.</span><span class="ident" id="5203442">ch</span>&nbsp;<span class="op" id="5203445">==</span>&nbsp;<span class="string" id="5203448">&#39;0&#39;</span>&nbsp;<span class="op" id="5203452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203456">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203474">offs</span>&nbsp;<span class="op" id="5203479">:=</span>&nbsp;<span class="ident" id="5203482"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203483">.</span><span class="ident" id="5203484">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203493"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203494">.</span><span class="ident" id="5203495">next</span><span class="op" id="5203499">(</span><span class="op" id="5203500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203504">if</span>&nbsp;<span class="ident" id="5203507"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203508">.</span><span class="ident" id="5203509">ch</span>&nbsp;<span class="op" id="5203512">==</span>&nbsp;<span class="string" id="5203515">&#39;x&#39;</span>&nbsp;<span class="op" id="5203519">||</span>&nbsp;<span class="ident" id="5203522"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203523">.</span><span class="ident" id="5203524">ch</span>&nbsp;<span class="op" id="5203527">==</span>&nbsp;<span class="string" id="5203530">&#39;X&#39;</span>&nbsp;<span class="op" id="5203534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203539">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203561"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203562">.</span><span class="ident" id="5203563">next</span><span class="op" id="5203567">(</span><span class="op" id="5203568">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203573"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203574">.</span><span class="ident" id="5203575">scanMantissa</span><span class="op" id="5203587">(</span><span class="num" id="5203588">16</span><span class="op" id="5203590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203595">if</span>&nbsp;<span class="ident" id="5203598"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203599">.</span><span class="ident" id="5203600">offset</span><span class="op" id="5203606">-</span><span class="ident" id="5203607"><a href="/go/scanner/scanner.go.html#5203474">offs</a></span>&nbsp;<span class="op" id="5203612">&lt;=</span>&nbsp;<span class="num" id="5203615">2</span>&nbsp;<span class="op" id="5203617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203623">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203656"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203657">.</span><span class="builtintype" id="5203658">error</span><span class="op" id="5203663">(</span><span class="ident" id="5203664"><a href="/go/scanner/scanner.go.html#5203474">offs</a></span><span class="op" id="5203668">,</span>&nbsp;<span class="string" id="5203670">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="5203698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203703">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203707">}</span>&nbsp;<span class="keyword" id="5203709">else</span>&nbsp;<span class="op" id="5203714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203719">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203744">seenDecimalDigit</span>&nbsp;<span class="op" id="5203761">:=</span>&nbsp;<span class="builtintype" id="5203764">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203773"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203774">.</span><span class="ident" id="5203775">scanMantissa</span><span class="op" id="5203787">(</span><span class="num" id="5203788">8</span><span class="op" id="5203789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203794">if</span>&nbsp;<span class="ident" id="5203797"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203798">.</span><span class="ident" id="5203799">ch</span>&nbsp;<span class="op" id="5203802">==</span>&nbsp;<span class="string" id="5203805">&#39;8&#39;</span>&nbsp;<span class="op" id="5203809">||</span>&nbsp;<span class="ident" id="5203812"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203813">.</span><span class="ident" id="5203814">ch</span>&nbsp;<span class="op" id="5203817">==</span>&nbsp;<span class="string" id="5203820">&#39;9&#39;</span>&nbsp;<span class="op" id="5203824">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5203830">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203864"><a href="/go/scanner/scanner.go.html#5203744">seenDecimalDigit</a></span>&nbsp;<span class="op" id="5203881">=</span>&nbsp;<span class="builtintype" id="5203883">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203892"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203893">.</span><span class="ident" id="5203894">scanMantissa</span><span class="op" id="5203906">(</span><span class="num" id="5203907">10</span><span class="op" id="5203909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203919">if</span>&nbsp;<span class="ident" id="5203922"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203923">.</span><span class="ident" id="5203924">ch</span>&nbsp;<span class="op" id="5203927">==</span>&nbsp;<span class="string" id="5203930">&#39;.&#39;</span>&nbsp;<span class="op" id="5203934">||</span>&nbsp;<span class="ident" id="5203937"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203938">.</span><span class="ident" id="5203939">ch</span>&nbsp;<span class="op" id="5203942">==</span>&nbsp;<span class="string" id="5203945">&#39;e&#39;</span>&nbsp;<span class="op" id="5203949">||</span>&nbsp;<span class="ident" id="5203952"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203953">.</span><span class="ident" id="5203954">ch</span>&nbsp;<span class="op" id="5203957">==</span>&nbsp;<span class="string" id="5203960">&#39;E&#39;</span>&nbsp;<span class="op" id="5203964">||</span>&nbsp;<span class="ident" id="5203967"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5203968">.</span><span class="ident" id="5203969">ch</span>&nbsp;<span class="op" id="5203972">==</span>&nbsp;<span class="string" id="5203975">&#39;i&#39;</span>&nbsp;<span class="op" id="5203979">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203985">goto</span>&nbsp;<span class="ident" id="5203990">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5204007">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204023">if</span>&nbsp;<span class="ident" id="5204026"><a href="/go/scanner/scanner.go.html#5203744">seenDecimalDigit</a></span>&nbsp;<span class="op" id="5204043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204049"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204050">.</span><span class="builtintype" id="5204051">error</span><span class="op" id="5204056">(</span><span class="ident" id="5204057"><a href="/go/scanner/scanner.go.html#5203474">offs</a></span><span class="op" id="5204061">,</span>&nbsp;<span class="string" id="5204063">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="5204085">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204098">goto</span>&nbsp;<span class="ident" id="5204103">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5204113">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204138"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204139">.</span><span class="ident" id="5204140">scanMantissa</span><span class="op" id="5204152">(</span><span class="num" id="5204153">10</span><span class="op" id="5204155">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5204158">fraction</span><span class="op" id="5204166">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204169">if</span>&nbsp;<span class="ident" id="5204172"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204173">.</span><span class="ident" id="5204174">ch</span>&nbsp;<span class="op" id="5204177">==</span>&nbsp;<span class="string" id="5204180">&#39;.&#39;</span>&nbsp;<span class="op" id="5204184">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204188"><a href="/go/scanner/scanner.go.html#5203325">tok</a></span>&nbsp;<span class="op" id="5204192">=</span>&nbsp;<span class="ident" id="5204194"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5204199">.</span><span class="ident" id="5204200">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204208"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204209">.</span><span class="ident" id="5204210">next</span><span class="op" id="5204214">(</span><span class="op" id="5204215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204219"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204220">.</span><span class="ident" id="5204221">scanMantissa</span><span class="op" id="5204233">(</span><span class="num" id="5204234">10</span><span class="op" id="5204236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="5204242">exponent</span><span class="op" id="5204250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204253">if</span>&nbsp;<span class="ident" id="5204256"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204257">.</span><span class="ident" id="5204258">ch</span>&nbsp;<span class="op" id="5204261">==</span>&nbsp;<span class="string" id="5204264">&#39;e&#39;</span>&nbsp;<span class="op" id="5204268">||</span>&nbsp;<span class="ident" id="5204271"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204272">.</span><span class="ident" id="5204273">ch</span>&nbsp;<span class="op" id="5204276">==</span>&nbsp;<span class="string" id="5204279">&#39;E&#39;</span>&nbsp;<span class="op" id="5204283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204287"><a href="/go/scanner/scanner.go.html#5203325">tok</a></span>&nbsp;<span class="op" id="5204291">=</span>&nbsp;<span class="ident" id="5204293"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5204298">.</span><span class="ident" id="5204299">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204307"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204308">.</span><span class="ident" id="5204309">next</span><span class="op" id="5204313">(</span><span class="op" id="5204314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204318">if</span>&nbsp;<span class="ident" id="5204321"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204322">.</span><span class="ident" id="5204323">ch</span>&nbsp;<span class="op" id="5204326">==</span>&nbsp;<span class="string" id="5204329">&#39;-&#39;</span>&nbsp;<span class="op" id="5204333">||</span>&nbsp;<span class="ident" id="5204336"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204337">.</span><span class="ident" id="5204338">ch</span>&nbsp;<span class="op" id="5204341">==</span>&nbsp;<span class="string" id="5204344">&#39;+&#39;</span>&nbsp;<span class="op" id="5204348">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204353"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204354">.</span><span class="ident" id="5204355">next</span><span class="op" id="5204359">(</span><span class="op" id="5204360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204368"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204369">.</span><span class="ident" id="5204370">scanMantissa</span><span class="op" id="5204382">(</span><span class="num" id="5204383">10</span><span class="op" id="5204385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204392">if</span>&nbsp;<span class="ident" id="5204395"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204396">.</span><span class="ident" id="5204397">ch</span>&nbsp;<span class="op" id="5204400">==</span>&nbsp;<span class="string" id="5204403">&#39;i&#39;</span>&nbsp;<span class="op" id="5204407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204411"><a href="/go/scanner/scanner.go.html#5203325">tok</a></span>&nbsp;<span class="op" id="5204415">=</span>&nbsp;<span class="ident" id="5204417"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5204422">.</span><span class="ident" id="5204423">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204430"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204431">.</span><span class="ident" id="5204432">next</span><span class="op" id="5204436">(</span><span class="op" id="5204437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5204440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="5204443">exit</span><span class="op" id="5204447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204450">return</span>&nbsp;<span class="ident" id="5204457"><a href="/go/scanner/scanner.go.html#5203325">tok</a></span><span class="op" id="5204460">,</span>&nbsp;<span class="builtintype" id="5204462">string</span><span class="op" id="5204468">(</span><span class="ident" id="5204469"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204470">.</span><span class="ident" id="5204471">src</span><span class="op" id="5204474">[</span><span class="ident" id="5204475"><a href="/go/scanner/scanner.go.html#5203307">offs</a></span><span class="op" id="5204479">:</span><span class="ident" id="5204480"><a href="/go/scanner/scanner.go.html#5203212">s</a></span><span class="op" id="5204481">.</span><span class="ident" id="5204482">offset</span><span class="op" id="5204488">]</span><span class="op" id="5204489">)</span><br>
<span class="lineno"></span><span class="op" id="5204491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5204494">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="5204561">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="5204632">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5204697">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5204717">func</span>&nbsp;<span class="op" id="5204722">(</span><span class="ident" id="5204723">s</span>&nbsp;<span class="op" id="5204725">*</span><span class="ident" id="5204726"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5204733">)</span>&nbsp;<span class="ident" id="5204735">scanEscape</span><span class="op" id="5204745">(</span><span class="ident" id="5204746">quote</span>&nbsp;<span class="builtintype" id="5204752">rune</span><span class="op" id="5204756">)</span>&nbsp;<span class="builtintype" id="5204758">bool</span>&nbsp;<span class="op" id="5204763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204766">offs</span>&nbsp;<span class="op" id="5204771">:=</span>&nbsp;<span class="ident" id="5204774"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5204775">.</span><span class="ident" id="5204776">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204785">var</span>&nbsp;<span class="ident" id="5204789">n</span>&nbsp;<span class="builtintype" id="5204791">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204796">var</span>&nbsp;<span class="ident" id="5204800">base</span><span class="op" id="5204804">,</span>&nbsp;<span class="ident" id="5204806">max</span>&nbsp;<span class="builtintype" id="5204810">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204818">switch</span>&nbsp;<span class="ident" id="5204825"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5204826">.</span><span class="ident" id="5204827">ch</span>&nbsp;<span class="op" id="5204830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204833">case</span>&nbsp;<span class="string" id="5204838">&#39;a&#39;</span><span class="op" id="5204841">,</span>&nbsp;<span class="string" id="5204843">&#39;b&#39;</span><span class="op" id="5204846">,</span>&nbsp;<span class="string" id="5204848">&#39;f&#39;</span><span class="op" id="5204851">,</span>&nbsp;<span class="string" id="5204853">&#39;n&#39;</span><span class="op" id="5204856">,</span>&nbsp;<span class="string" id="5204858">&#39;r&#39;</span><span class="op" id="5204861">,</span>&nbsp;<span class="string" id="5204863">&#39;t&#39;</span><span class="op" id="5204866">,</span>&nbsp;<span class="string" id="5204868">&#39;v&#39;</span><span class="op" id="5204871">,</span>&nbsp;<span class="string" id="5204873">&#39;\\&#39;</span><span class="op" id="5204877">,</span>&nbsp;<span class="ident" id="5204879"><a href="/go/scanner/scanner.go.html#5204746">quote</a></span><span class="op" id="5204884">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204888"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5204889">.</span><span class="ident" id="5204890">next</span><span class="op" id="5204894">(</span><span class="op" id="5204895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204899">return</span>&nbsp;<span class="builtintype" id="5204906">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204912">case</span>&nbsp;<span class="string" id="5204917">&#39;0&#39;</span><span class="op" id="5204920">,</span>&nbsp;<span class="string" id="5204922">&#39;1&#39;</span><span class="op" id="5204925">,</span>&nbsp;<span class="string" id="5204927">&#39;2&#39;</span><span class="op" id="5204930">,</span>&nbsp;<span class="string" id="5204932">&#39;3&#39;</span><span class="op" id="5204935">,</span>&nbsp;<span class="string" id="5204937">&#39;4&#39;</span><span class="op" id="5204940">,</span>&nbsp;<span class="string" id="5204942">&#39;5&#39;</span><span class="op" id="5204945">,</span>&nbsp;<span class="string" id="5204947">&#39;6&#39;</span><span class="op" id="5204950">,</span>&nbsp;<span class="string" id="5204952">&#39;7&#39;</span><span class="op" id="5204955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204959"><a href="/go/scanner/scanner.go.html#5204789">n</a></span><span class="op" id="5204960">,</span>&nbsp;<span class="ident" id="5204962"><a href="/go/scanner/scanner.go.html#5204800">base</a></span><span class="op" id="5204966">,</span>&nbsp;<span class="ident" id="5204968"><a href="/go/scanner/scanner.go.html#5204806">max</a></span>&nbsp;<span class="op" id="5204972">=</span>&nbsp;<span class="num" id="5204974">3</span><span class="op" id="5204975">,</span>&nbsp;<span class="num" id="5204977">8</span><span class="op" id="5204978">,</span>&nbsp;<span class="num" id="5204980">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5204985">case</span>&nbsp;<span class="string" id="5204990">&#39;x&#39;</span><span class="op" id="5204993">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5204997"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5204998">.</span><span class="ident" id="5204999">next</span><span class="op" id="5205003">(</span><span class="op" id="5205004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205008"><a href="/go/scanner/scanner.go.html#5204789">n</a></span><span class="op" id="5205009">,</span>&nbsp;<span class="ident" id="5205011"><a href="/go/scanner/scanner.go.html#5204800">base</a></span><span class="op" id="5205015">,</span>&nbsp;<span class="ident" id="5205017"><a href="/go/scanner/scanner.go.html#5204806">max</a></span>&nbsp;<span class="op" id="5205021">=</span>&nbsp;<span class="num" id="5205023">2</span><span class="op" id="5205024">,</span>&nbsp;<span class="num" id="5205026">16</span><span class="op" id="5205028">,</span>&nbsp;<span class="num" id="5205030">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205035">case</span>&nbsp;<span class="string" id="5205040">&#39;u&#39;</span><span class="op" id="5205043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205047"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205048">.</span><span class="ident" id="5205049">next</span><span class="op" id="5205053">(</span><span class="op" id="5205054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205058"><a href="/go/scanner/scanner.go.html#5204789">n</a></span><span class="op" id="5205059">,</span>&nbsp;<span class="ident" id="5205061"><a href="/go/scanner/scanner.go.html#5204800">base</a></span><span class="op" id="5205065">,</span>&nbsp;<span class="ident" id="5205067"><a href="/go/scanner/scanner.go.html#5204806">max</a></span>&nbsp;<span class="op" id="5205071">=</span>&nbsp;<span class="num" id="5205073">4</span><span class="op" id="5205074">,</span>&nbsp;<span class="num" id="5205076">16</span><span class="op" id="5205078">,</span>&nbsp;<span class="ident" id="5205080"><a href="/go/scanner/scanner.go.html#5196349">unicode</a></span><span class="op" id="5205087">.</span><span class="ident" id="5205088">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205097">case</span>&nbsp;<span class="string" id="5205102">&#39;U&#39;</span><span class="op" id="5205105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205109"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205110">.</span><span class="ident" id="5205111">next</span><span class="op" id="5205115">(</span><span class="op" id="5205116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205120"><a href="/go/scanner/scanner.go.html#5204789">n</a></span><span class="op" id="5205121">,</span>&nbsp;<span class="ident" id="5205123"><a href="/go/scanner/scanner.go.html#5204800">base</a></span><span class="op" id="5205127">,</span>&nbsp;<span class="ident" id="5205129"><a href="/go/scanner/scanner.go.html#5204806">max</a></span>&nbsp;<span class="op" id="5205133">=</span>&nbsp;<span class="num" id="5205135">8</span><span class="op" id="5205136">,</span>&nbsp;<span class="num" id="5205138">16</span><span class="op" id="5205140">,</span>&nbsp;<span class="ident" id="5205142"><a href="/go/scanner/scanner.go.html#5196349">unicode</a></span><span class="op" id="5205149">.</span><span class="ident" id="5205150">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205159">default</span><span class="op" id="5205166">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205170">msg</span>&nbsp;<span class="op" id="5205174">:=</span>&nbsp;<span class="string" id="5205177">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205205">if</span>&nbsp;<span class="ident" id="5205208"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205209">.</span><span class="ident" id="5205210">ch</span>&nbsp;<span class="op" id="5205213">&lt;</span>&nbsp;<span class="num" id="5205215">0</span>&nbsp;<span class="op" id="5205217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205222"><a href="/go/scanner/scanner.go.html#5205170">msg</a></span>&nbsp;<span class="op" id="5205226">=</span>&nbsp;<span class="string" id="5205228">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205267"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205268">.</span><span class="builtintype" id="5205269">error</span><span class="op" id="5205274">(</span><span class="ident" id="5205275"><a href="/go/scanner/scanner.go.html#5204766">offs</a></span><span class="op" id="5205279">,</span>&nbsp;<span class="ident" id="5205281"><a href="/go/scanner/scanner.go.html#5205170">msg</a></span><span class="op" id="5205284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205288">return</span>&nbsp;<span class="builtintype" id="5205295">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205306">var</span>&nbsp;<span class="ident" id="5205310">x</span>&nbsp;<span class="builtintype" id="5205312">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205320">for</span>&nbsp;<span class="ident" id="5205324"><a href="/go/scanner/scanner.go.html#5204789">n</a></span>&nbsp;<span class="op" id="5205326">&gt;</span>&nbsp;<span class="num" id="5205328">0</span>&nbsp;<span class="op" id="5205330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205334">d</span>&nbsp;<span class="op" id="5205336">:=</span>&nbsp;<span class="builtintype" id="5205339">uint32</span><span class="op" id="5205345">(</span><span class="ident" id="5205346"><a href="/go/scanner/scanner.go.html#5202862">digitVal</a></span><span class="op" id="5205354">(</span><span class="ident" id="5205355"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205356">.</span><span class="ident" id="5205357">ch</span><span class="op" id="5205359">)</span><span class="op" id="5205360">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205364">if</span>&nbsp;<span class="ident" id="5205367"><a href="/go/scanner/scanner.go.html#5205334">d</a></span>&nbsp;<span class="op" id="5205369">&gt;=</span>&nbsp;<span class="ident" id="5205372"><a href="/go/scanner/scanner.go.html#5204800">base</a></span>&nbsp;<span class="op" id="5205377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205382">msg</span>&nbsp;<span class="op" id="5205386">:=</span>&nbsp;<span class="ident" id="5205389"><a href="/go/scanner/scanner.go.html#5196302">fmt</a></span><span class="op" id="5205392">.</span><span class="ident" id="5205393">Sprintf</span><span class="op" id="5205400">(</span><span class="string" id="5205401">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="5205443">,</span>&nbsp;<span class="ident" id="5205445"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205446">.</span><span class="ident" id="5205447">ch</span><span class="op" id="5205449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205454">if</span>&nbsp;<span class="ident" id="5205457"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205458">.</span><span class="ident" id="5205459">ch</span>&nbsp;<span class="op" id="5205462">&lt;</span>&nbsp;<span class="num" id="5205464">0</span>&nbsp;<span class="op" id="5205466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205472"><a href="/go/scanner/scanner.go.html#5205382">msg</a></span>&nbsp;<span class="op" id="5205476">=</span>&nbsp;<span class="string" id="5205478">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205514">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205519"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205520">.</span><span class="builtintype" id="5205521">error</span><span class="op" id="5205526">(</span><span class="ident" id="5205527"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205528">.</span><span class="ident" id="5205529">offset</span><span class="op" id="5205535">,</span>&nbsp;<span class="ident" id="5205537"><a href="/go/scanner/scanner.go.html#5205382">msg</a></span><span class="op" id="5205540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205545">return</span>&nbsp;<span class="builtintype" id="5205552">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205564"><a href="/go/scanner/scanner.go.html#5205310">x</a></span>&nbsp;<span class="op" id="5205566">=</span>&nbsp;<span class="ident" id="5205568"><a href="/go/scanner/scanner.go.html#5205310">x</a></span><span class="op" id="5205569">*</span><span class="ident" id="5205570"><a href="/go/scanner/scanner.go.html#5204800">base</a></span>&nbsp;<span class="op" id="5205575">+</span>&nbsp;<span class="ident" id="5205577"><a href="/go/scanner/scanner.go.html#5205334">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205581"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205582">.</span><span class="ident" id="5205583">next</span><span class="op" id="5205587">(</span><span class="op" id="5205588">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205592"><a href="/go/scanner/scanner.go.html#5204789">n</a></span><span class="op" id="5205593">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205601">if</span>&nbsp;<span class="ident" id="5205604"><a href="/go/scanner/scanner.go.html#5205310">x</a></span>&nbsp;<span class="op" id="5205606">&gt;</span>&nbsp;<span class="ident" id="5205608"><a href="/go/scanner/scanner.go.html#5204806">max</a></span>&nbsp;<span class="op" id="5205612">||</span>&nbsp;<span class="num" id="5205615">0xD800</span>&nbsp;<span class="op" id="5205622">&lt;=</span>&nbsp;<span class="ident" id="5205625"><a href="/go/scanner/scanner.go.html#5205310">x</a></span>&nbsp;<span class="op" id="5205627">&amp;&amp;</span>&nbsp;<span class="ident" id="5205630"><a href="/go/scanner/scanner.go.html#5205310">x</a></span>&nbsp;<span class="op" id="5205632">&lt;</span>&nbsp;<span class="num" id="5205634">0xE000</span>&nbsp;<span class="op" id="5205641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205645"><a href="/go/scanner/scanner.go.html#5204723">s</a></span><span class="op" id="5205646">.</span><span class="builtintype" id="5205647">error</span><span class="op" id="5205652">(</span><span class="ident" id="5205653"><a href="/go/scanner/scanner.go.html#5204766">offs</a></span><span class="op" id="5205657">,</span>&nbsp;<span class="string" id="5205659">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="5205706">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205710">return</span>&nbsp;<span class="builtintype" id="5205717">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5205724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205728">return</span>&nbsp;<span class="builtintype" id="5205735">true</span><br>
<span class="lineno"></span><span class="op" id="5205740">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="5205743">func</span>&nbsp;<span class="op" id="5205748">(</span><span class="ident" id="5205749">s</span>&nbsp;<span class="op" id="5205751">*</span><span class="ident" id="5205752"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5205759">)</span>&nbsp;<span class="ident" id="5205761">scanRune</span><span class="op" id="5205769">(</span><span class="op" id="5205770">)</span>&nbsp;<span class="builtintype" id="5205772">string</span>&nbsp;<span class="op" id="5205779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5205782">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205816">offs</span>&nbsp;<span class="op" id="5205821">:=</span>&nbsp;<span class="ident" id="5205824"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5205825">.</span><span class="ident" id="5205826">offset</span>&nbsp;<span class="op" id="5205833">-</span>&nbsp;<span class="num" id="5205835">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205839">valid</span>&nbsp;<span class="op" id="5205845">:=</span>&nbsp;<span class="builtintype" id="5205848">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205854">n</span>&nbsp;<span class="op" id="5205856">:=</span>&nbsp;<span class="num" id="5205859">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205862">for</span>&nbsp;<span class="op" id="5205866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205870">ch</span>&nbsp;<span class="op" id="5205873">:=</span>&nbsp;<span class="ident" id="5205876"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5205877">.</span><span class="ident" id="5205878">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205883">if</span>&nbsp;<span class="ident" id="5205886"><a href="/go/scanner/scanner.go.html#5205870">ch</a></span>&nbsp;<span class="op" id="5205889">==</span>&nbsp;<span class="string" id="5205892">&#39;\n&#39;</span>&nbsp;<span class="op" id="5205897">||</span>&nbsp;<span class="ident" id="5205900"><a href="/go/scanner/scanner.go.html#5205870">ch</a></span>&nbsp;<span class="op" id="5205903">&lt;</span>&nbsp;<span class="num" id="5205905">0</span>&nbsp;<span class="op" id="5205907">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5205912">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5205965">if</span>&nbsp;<span class="ident" id="5205968"><a href="/go/scanner/scanner.go.html#5205839">valid</a></span>&nbsp;<span class="op" id="5205974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5205980"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5205981">.</span><span class="builtintype" id="5205982">error</span><span class="op" id="5205987">(</span><span class="ident" id="5205988"><a href="/go/scanner/scanner.go.html#5205816">offs</a></span><span class="op" id="5205992">,</span>&nbsp;<span class="string" id="5205994">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5206023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206029"><a href="/go/scanner/scanner.go.html#5205839">valid</a></span>&nbsp;<span class="op" id="5206035">=</span>&nbsp;<span class="builtintype" id="5206037">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206046">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206063"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5206064">.</span><span class="ident" id="5206065">next</span><span class="op" id="5206069">(</span><span class="op" id="5206070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206074">if</span>&nbsp;<span class="ident" id="5206077"><a href="/go/scanner/scanner.go.html#5205870">ch</a></span>&nbsp;<span class="op" id="5206080">==</span>&nbsp;<span class="string" id="5206083">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="5206088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206093">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206105"><a href="/go/scanner/scanner.go.html#5205854">n</a></span><span class="op" id="5206106">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206111">if</span>&nbsp;<span class="ident" id="5206114"><a href="/go/scanner/scanner.go.html#5205870">ch</a></span>&nbsp;<span class="op" id="5206117">==</span>&nbsp;<span class="string" id="5206120">&#39;\\&#39;</span>&nbsp;<span class="op" id="5206125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206130">if</span>&nbsp;<span class="op" id="5206133">!</span><span class="ident" id="5206134"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5206135">.</span><span class="ident" id="5206136">scanEscape</span><span class="op" id="5206146">(</span><span class="string" id="5206147">&#39;\&#39;&#39;</span><span class="op" id="5206151">)</span>&nbsp;<span class="op" id="5206153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206159"><a href="/go/scanner/scanner.go.html#5205839">valid</a></span>&nbsp;<span class="op" id="5206165">=</span>&nbsp;<span class="builtintype" id="5206167">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5206181">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206227">if</span>&nbsp;<span class="ident" id="5206230"><a href="/go/scanner/scanner.go.html#5205839">valid</a></span>&nbsp;<span class="op" id="5206236">&amp;&amp;</span>&nbsp;<span class="ident" id="5206239"><a href="/go/scanner/scanner.go.html#5205854">n</a></span>&nbsp;<span class="op" id="5206241">!=</span>&nbsp;<span class="num" id="5206244">1</span>&nbsp;<span class="op" id="5206246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206250"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5206251">.</span><span class="builtintype" id="5206252">error</span><span class="op" id="5206257">(</span><span class="ident" id="5206258"><a href="/go/scanner/scanner.go.html#5205816">offs</a></span><span class="op" id="5206262">,</span>&nbsp;<span class="string" id="5206264">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="5206286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206293">return</span>&nbsp;<span class="builtintype" id="5206300">string</span><span class="op" id="5206306">(</span><span class="ident" id="5206307"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5206308">.</span><span class="ident" id="5206309">src</span><span class="op" id="5206312">[</span><span class="ident" id="5206313"><a href="/go/scanner/scanner.go.html#5205816">offs</a></span><span class="op" id="5206317">:</span><span class="ident" id="5206318"><a href="/go/scanner/scanner.go.html#5205749">s</a></span><span class="op" id="5206319">.</span><span class="ident" id="5206320">offset</span><span class="op" id="5206326">]</span><span class="op" id="5206327">)</span><br>
<span class="lineno">455</span><span class="op" id="5206329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5206332">func</span>&nbsp;<span class="op" id="5206337">(</span><span class="ident" id="5206338">s</span>&nbsp;<span class="op" id="5206340">*</span><span class="ident" id="5206341"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5206348">)</span>&nbsp;<span class="ident" id="5206350">scanString</span><span class="op" id="5206360">(</span><span class="op" id="5206361">)</span>&nbsp;<span class="builtintype" id="5206363">string</span>&nbsp;<span class="op" id="5206370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5206373">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206406">offs</span>&nbsp;<span class="op" id="5206411">:=</span>&nbsp;<span class="ident" id="5206414"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206415">.</span><span class="ident" id="5206416">offset</span>&nbsp;<span class="op" id="5206423">-</span>&nbsp;<span class="num" id="5206425">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206429">for</span>&nbsp;<span class="op" id="5206433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206437">ch</span>&nbsp;<span class="op" id="5206440">:=</span>&nbsp;<span class="ident" id="5206443"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206444">.</span><span class="ident" id="5206445">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206450">if</span>&nbsp;<span class="ident" id="5206453"><a href="/go/scanner/scanner.go.html#5206437">ch</a></span>&nbsp;<span class="op" id="5206456">==</span>&nbsp;<span class="string" id="5206459">&#39;\n&#39;</span>&nbsp;<span class="op" id="5206464">||</span>&nbsp;<span class="ident" id="5206467"><a href="/go/scanner/scanner.go.html#5206437">ch</a></span>&nbsp;<span class="op" id="5206470">&lt;</span>&nbsp;<span class="num" id="5206472">0</span>&nbsp;<span class="op" id="5206474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206479"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206480">.</span><span class="builtintype" id="5206481">error</span><span class="op" id="5206486">(</span><span class="ident" id="5206487"><a href="/go/scanner/scanner.go.html#5206406">offs</a></span><span class="op" id="5206491">,</span>&nbsp;<span class="string" id="5206493">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5206524">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206529">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206541"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206542">.</span><span class="ident" id="5206543">next</span><span class="op" id="5206547">(</span><span class="op" id="5206548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206552">if</span>&nbsp;<span class="ident" id="5206555"><a href="/go/scanner/scanner.go.html#5206437">ch</a></span>&nbsp;<span class="op" id="5206558">==</span>&nbsp;<span class="string" id="5206561">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5206565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206570">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206582">if</span>&nbsp;<span class="ident" id="5206585"><a href="/go/scanner/scanner.go.html#5206437">ch</a></span>&nbsp;<span class="op" id="5206588">==</span>&nbsp;<span class="string" id="5206591">&#39;\\&#39;</span>&nbsp;<span class="op" id="5206596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206601"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206602">.</span><span class="ident" id="5206603">scanEscape</span><span class="op" id="5206613">(</span><span class="string" id="5206614">&#39;&#34;&#39;</span><span class="op" id="5206617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206624">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206628">return</span>&nbsp;<span class="builtintype" id="5206635">string</span><span class="op" id="5206641">(</span><span class="ident" id="5206642"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206643">.</span><span class="ident" id="5206644">src</span><span class="op" id="5206647">[</span><span class="ident" id="5206648"><a href="/go/scanner/scanner.go.html#5206406">offs</a></span><span class="op" id="5206652">:</span><span class="ident" id="5206653"><a href="/go/scanner/scanner.go.html#5206338">s</a></span><span class="op" id="5206654">.</span><span class="ident" id="5206655">offset</span><span class="op" id="5206661">]</span><span class="op" id="5206662">)</span><br>
<span class="lineno"></span><span class="op" id="5206664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5206667">func</span>&nbsp;<span class="ident" id="5206672">stripCR</span><span class="op" id="5206679">(</span><span class="ident" id="5206680">b</span>&nbsp;<span class="op" id="5206682">[</span><span class="op" id="5206683">]</span><span class="builtintype" id="5206684">byte</span><span class="op" id="5206688">)</span>&nbsp;<span class="op" id="5206690">[</span><span class="op" id="5206691">]</span><span class="builtintype" id="5206692">byte</span>&nbsp;<span class="op" id="5206697">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206700">c</span>&nbsp;<span class="op" id="5206702">:=</span>&nbsp;<span class="builtinfunc" id="5206705">make</span><span class="op" id="5206709">(</span><span class="op" id="5206710">[</span><span class="op" id="5206711">]</span><span class="builtintype" id="5206712">byte</span><span class="op" id="5206716">,</span>&nbsp;<span class="builtinfunc" id="5206718">len</span><span class="op" id="5206721">(</span><span class="ident" id="5206722"><a href="/go/scanner/scanner.go.html#5206680">b</a></span><span class="op" id="5206723">)</span><span class="op" id="5206724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206727">i</span>&nbsp;<span class="op" id="5206729">:=</span>&nbsp;<span class="num" id="5206732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206735">for</span>&nbsp;<span class="ident" id="5206739">_</span><span class="op" id="5206740">,</span>&nbsp;<span class="ident" id="5206742">ch</span>&nbsp;<span class="op" id="5206745">:=</span>&nbsp;<span class="keyword" id="5206748">range</span>&nbsp;<span class="ident" id="5206754"><a href="/go/scanner/scanner.go.html#5206680">b</a></span>&nbsp;<span class="op" id="5206756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206760">if</span>&nbsp;<span class="ident" id="5206763"><a href="/go/scanner/scanner.go.html#5206742">ch</a></span>&nbsp;<span class="op" id="5206766">!=</span>&nbsp;<span class="string" id="5206769">&#39;\r&#39;</span>&nbsp;<span class="op" id="5206774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206779"><a href="/go/scanner/scanner.go.html#5206700">c</a></span><span class="op" id="5206780">[</span><span class="ident" id="5206781"><a href="/go/scanner/scanner.go.html#5206727">i</a></span><span class="op" id="5206782">]</span>&nbsp;<span class="op" id="5206784">=</span>&nbsp;<span class="ident" id="5206786"><a href="/go/scanner/scanner.go.html#5206742">ch</a></span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206792"><a href="/go/scanner/scanner.go.html#5206727">i</a></span><span class="op" id="5206793">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5206801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206804">return</span>&nbsp;<span class="ident" id="5206811"><a href="/go/scanner/scanner.go.html#5206700">c</a></span><span class="op" id="5206812">[</span><span class="op" id="5206813">:</span><span class="ident" id="5206814"><a href="/go/scanner/scanner.go.html#5206727">i</a></span><span class="op" id="5206815">]</span><br>
<span class="lineno"></span><span class="op" id="5206817">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="5206820">func</span>&nbsp;<span class="op" id="5206825">(</span><span class="ident" id="5206826">s</span>&nbsp;<span class="op" id="5206828">*</span><span class="ident" id="5206829"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5206836">)</span>&nbsp;<span class="ident" id="5206838">scanRawString</span><span class="op" id="5206851">(</span><span class="op" id="5206852">)</span>&nbsp;<span class="builtintype" id="5206854">string</span>&nbsp;<span class="op" id="5206861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5206864">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206897">offs</span>&nbsp;<span class="op" id="5206902">:=</span>&nbsp;<span class="ident" id="5206905"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5206906">.</span><span class="ident" id="5206907">offset</span>&nbsp;<span class="op" id="5206914">-</span>&nbsp;<span class="num" id="5206916">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206920">hasCR</span>&nbsp;<span class="op" id="5206926">:=</span>&nbsp;<span class="builtintype" id="5206929">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206936">for</span>&nbsp;<span class="op" id="5206940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206944">ch</span>&nbsp;<span class="op" id="5206947">:=</span>&nbsp;<span class="ident" id="5206950"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5206951">.</span><span class="ident" id="5206952">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5206957">if</span>&nbsp;<span class="ident" id="5206960"><a href="/go/scanner/scanner.go.html#5206944">ch</a></span>&nbsp;<span class="op" id="5206963">&lt;</span>&nbsp;<span class="num" id="5206965">0</span>&nbsp;<span class="op" id="5206967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5206972"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5206973">.</span><span class="builtintype" id="5206974">error</span><span class="op" id="5206979">(</span><span class="ident" id="5206980"><a href="/go/scanner/scanner.go.html#5206897">offs</a></span><span class="op" id="5206984">,</span>&nbsp;<span class="string" id="5206986">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5207021">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207026">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207038"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5207039">.</span><span class="ident" id="5207040">next</span><span class="op" id="5207044">(</span><span class="op" id="5207045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207049">if</span>&nbsp;<span class="ident" id="5207052"><a href="/go/scanner/scanner.go.html#5206944">ch</a></span>&nbsp;<span class="op" id="5207055">==</span>&nbsp;<span class="string" id="5207058">&#39;`&#39;</span>&nbsp;<span class="op" id="5207062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207067">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207079">if</span>&nbsp;<span class="ident" id="5207082"><a href="/go/scanner/scanner.go.html#5206944">ch</a></span>&nbsp;<span class="op" id="5207085">==</span>&nbsp;<span class="string" id="5207088">&#39;\r&#39;</span>&nbsp;<span class="op" id="5207093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207098"><a href="/go/scanner/scanner.go.html#5206920">hasCR</a></span>&nbsp;<span class="op" id="5207104">=</span>&nbsp;<span class="builtintype" id="5207106">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207116">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207120">lit</span>&nbsp;<span class="op" id="5207124">:=</span>&nbsp;<span class="ident" id="5207127"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5207128">.</span><span class="ident" id="5207129">src</span><span class="op" id="5207132">[</span><span class="ident" id="5207133"><a href="/go/scanner/scanner.go.html#5206897">offs</a></span><span class="op" id="5207137">:</span><span class="ident" id="5207138"><a href="/go/scanner/scanner.go.html#5206826">s</a></span><span class="op" id="5207139">.</span><span class="ident" id="5207140">offset</span><span class="op" id="5207146">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207149">if</span>&nbsp;<span class="ident" id="5207152"><a href="/go/scanner/scanner.go.html#5206920">hasCR</a></span>&nbsp;<span class="op" id="5207158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207162"><a href="/go/scanner/scanner.go.html#5207120">lit</a></span>&nbsp;<span class="op" id="5207166">=</span>&nbsp;<span class="ident" id="5207168"><a href="/go/scanner/scanner.go.html#5206672">stripCR</a></span><span class="op" id="5207175">(</span><span class="ident" id="5207176"><a href="/go/scanner/scanner.go.html#5207120">lit</a></span><span class="op" id="5207179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207182">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207186">return</span>&nbsp;<span class="builtintype" id="5207193">string</span><span class="op" id="5207199">(</span><span class="ident" id="5207200"><a href="/go/scanner/scanner.go.html#5207120">lit</a></span><span class="op" id="5207203">)</span><br>
<span class="lineno"></span><span class="op" id="5207205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5207208">func</span>&nbsp;<span class="op" id="5207213">(</span><span class="ident" id="5207214">s</span>&nbsp;<span class="op" id="5207216">*</span><span class="ident" id="5207217"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5207224">)</span>&nbsp;<span class="ident" id="5207226">skipWhitespace</span><span class="op" id="5207240">(</span><span class="op" id="5207241">)</span>&nbsp;<span class="op" id="5207243">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207246">for</span>&nbsp;<span class="ident" id="5207250"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207251">.</span><span class="ident" id="5207252">ch</span>&nbsp;<span class="op" id="5207255">==</span>&nbsp;<span class="string" id="5207258">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5207262">||</span>&nbsp;<span class="ident" id="5207265"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207266">.</span><span class="ident" id="5207267">ch</span>&nbsp;<span class="op" id="5207270">==</span>&nbsp;<span class="string" id="5207273">&#39;\t&#39;</span>&nbsp;<span class="op" id="5207278">||</span>&nbsp;<span class="ident" id="5207281"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207282">.</span><span class="ident" id="5207283">ch</span>&nbsp;<span class="op" id="5207286">==</span>&nbsp;<span class="string" id="5207289">&#39;\n&#39;</span>&nbsp;<span class="op" id="5207294">&amp;&amp;</span>&nbsp;<span class="op" id="5207297">!</span><span class="ident" id="5207298"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207299">.</span><span class="ident" id="5207300">insertSemi</span>&nbsp;<span class="op" id="5207311">||</span>&nbsp;<span class="ident" id="5207314"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207315">.</span><span class="ident" id="5207316">ch</span>&nbsp;<span class="op" id="5207319">==</span>&nbsp;<span class="string" id="5207322">&#39;\r&#39;</span>&nbsp;<span class="op" id="5207327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207331"><a href="/go/scanner/scanner.go.html#5207214">s</a></span><span class="op" id="5207332">.</span><span class="ident" id="5207333">next</span><span class="op" id="5207337">(</span><span class="op" id="5207338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207341">}</span><br>
<span class="lineno"></span><span class="op" id="5207343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="5207346">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="5207417">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5207489">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="5207552">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="5207621">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="5207688">func</span>&nbsp;<span class="op" id="5207693">(</span><span class="ident" id="5207694">s</span>&nbsp;<span class="op" id="5207696">*</span><span class="ident" id="5207697"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5207704">)</span>&nbsp;<span class="ident" id="5207706">switch2</span><span class="op" id="5207713">(</span><span class="ident" id="5207714">tok0</span><span class="op" id="5207718">,</span>&nbsp;<span class="ident" id="5207720">tok1</span>&nbsp;<span class="ident" id="5207725"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5207730">.</span><span class="ident" id="5207731">Token</span><span class="op" id="5207736">)</span>&nbsp;<span class="ident" id="5207738"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5207743">.</span><span class="ident" id="5207744">Token</span>&nbsp;<span class="op" id="5207750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207753">if</span>&nbsp;<span class="ident" id="5207756"><a href="/go/scanner/scanner.go.html#5207694">s</a></span><span class="op" id="5207757">.</span><span class="ident" id="5207758">ch</span>&nbsp;<span class="op" id="5207761">==</span>&nbsp;<span class="string" id="5207764">&#39;=&#39;</span>&nbsp;<span class="op" id="5207768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207772"><a href="/go/scanner/scanner.go.html#5207694">s</a></span><span class="op" id="5207773">.</span><span class="ident" id="5207774">next</span><span class="op" id="5207778">(</span><span class="op" id="5207779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207783">return</span>&nbsp;<span class="ident" id="5207790"><a href="/go/scanner/scanner.go.html#5207720">tok1</a></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207799">return</span>&nbsp;<span class="ident" id="5207806"><a href="/go/scanner/scanner.go.html#5207714">tok0</a></span><br>
<span class="lineno"></span><span class="op" id="5207811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5207814">func</span>&nbsp;<span class="op" id="5207819">(</span><span class="ident" id="5207820">s</span>&nbsp;<span class="op" id="5207822">*</span><span class="ident" id="5207823"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5207830">)</span>&nbsp;<span class="ident" id="5207832">switch3</span><span class="op" id="5207839">(</span><span class="ident" id="5207840">tok0</span><span class="op" id="5207844">,</span>&nbsp;<span class="ident" id="5207846">tok1</span>&nbsp;<span class="ident" id="5207851"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5207856">.</span><span class="ident" id="5207857">Token</span><span class="op" id="5207862">,</span>&nbsp;<span class="ident" id="5207864">ch2</span>&nbsp;<span class="builtintype" id="5207868">rune</span><span class="op" id="5207872">,</span>&nbsp;<span class="ident" id="5207874">tok2</span>&nbsp;<span class="ident" id="5207879"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5207884">.</span><span class="ident" id="5207885">Token</span><span class="op" id="5207890">)</span>&nbsp;<span class="ident" id="5207892"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5207897">.</span><span class="ident" id="5207898">Token</span>&nbsp;<span class="op" id="5207904">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207907">if</span>&nbsp;<span class="ident" id="5207910"><a href="/go/scanner/scanner.go.html#5207820">s</a></span><span class="op" id="5207911">.</span><span class="ident" id="5207912">ch</span>&nbsp;<span class="op" id="5207915">==</span>&nbsp;<span class="string" id="5207918">&#39;=&#39;</span>&nbsp;<span class="op" id="5207922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207926"><a href="/go/scanner/scanner.go.html#5207820">s</a></span><span class="op" id="5207927">.</span><span class="ident" id="5207928">next</span><span class="op" id="5207932">(</span><span class="op" id="5207933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207937">return</span>&nbsp;<span class="ident" id="5207944"><a href="/go/scanner/scanner.go.html#5207846">tok1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207953">if</span>&nbsp;<span class="ident" id="5207956"><a href="/go/scanner/scanner.go.html#5207820">s</a></span><span class="op" id="5207957">.</span><span class="ident" id="5207958">ch</span>&nbsp;<span class="op" id="5207961">==</span>&nbsp;<span class="ident" id="5207964"><a href="/go/scanner/scanner.go.html#5207864">ch2</a></span>&nbsp;<span class="op" id="5207968">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5207972"><a href="/go/scanner/scanner.go.html#5207820">s</a></span><span class="op" id="5207973">.</span><span class="ident" id="5207974">next</span><span class="op" id="5207978">(</span><span class="op" id="5207979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207983">return</span>&nbsp;<span class="ident" id="5207990"><a href="/go/scanner/scanner.go.html#5207874">tok2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5207996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5207999">return</span>&nbsp;<span class="ident" id="5208006"><a href="/go/scanner/scanner.go.html#5207840">tok0</a></span><br>
<span class="lineno"></span><span class="op" id="5208011">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="5208014">func</span>&nbsp;<span class="op" id="5208019">(</span><span class="ident" id="5208020">s</span>&nbsp;<span class="op" id="5208022">*</span><span class="ident" id="5208023"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5208030">)</span>&nbsp;<span class="ident" id="5208032">switch4</span><span class="op" id="5208039">(</span><span class="ident" id="5208040">tok0</span><span class="op" id="5208044">,</span>&nbsp;<span class="ident" id="5208046">tok1</span>&nbsp;<span class="ident" id="5208051"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5208056">.</span><span class="ident" id="5208057">Token</span><span class="op" id="5208062">,</span>&nbsp;<span class="ident" id="5208064">ch2</span>&nbsp;<span class="builtintype" id="5208068">rune</span><span class="op" id="5208072">,</span>&nbsp;<span class="ident" id="5208074">tok2</span><span class="op" id="5208078">,</span>&nbsp;<span class="ident" id="5208080">tok3</span>&nbsp;<span class="ident" id="5208085"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5208090">.</span><span class="ident" id="5208091">Token</span><span class="op" id="5208096">)</span>&nbsp;<span class="ident" id="5208098"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5208103">.</span><span class="ident" id="5208104">Token</span>&nbsp;<span class="op" id="5208110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208113">if</span>&nbsp;<span class="ident" id="5208116"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208117">.</span><span class="ident" id="5208118">ch</span>&nbsp;<span class="op" id="5208121">==</span>&nbsp;<span class="string" id="5208124">&#39;=&#39;</span>&nbsp;<span class="op" id="5208128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5208132"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208133">.</span><span class="ident" id="5208134">next</span><span class="op" id="5208138">(</span><span class="op" id="5208139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208143">return</span>&nbsp;<span class="ident" id="5208150"><a href="/go/scanner/scanner.go.html#5208046">tok1</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5208156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208159">if</span>&nbsp;<span class="ident" id="5208162"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208163">.</span><span class="ident" id="5208164">ch</span>&nbsp;<span class="op" id="5208167">==</span>&nbsp;<span class="ident" id="5208170"><a href="/go/scanner/scanner.go.html#5208064">ch2</a></span>&nbsp;<span class="op" id="5208174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5208178"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208179">.</span><span class="ident" id="5208180">next</span><span class="op" id="5208184">(</span><span class="op" id="5208185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208189">if</span>&nbsp;<span class="ident" id="5208192"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208193">.</span><span class="ident" id="5208194">ch</span>&nbsp;<span class="op" id="5208197">==</span>&nbsp;<span class="string" id="5208200">&#39;=&#39;</span>&nbsp;<span class="op" id="5208204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5208209"><a href="/go/scanner/scanner.go.html#5208020">s</a></span><span class="op" id="5208210">.</span><span class="ident" id="5208211">next</span><span class="op" id="5208215">(</span><span class="op" id="5208216">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208221">return</span>&nbsp;<span class="ident" id="5208228"><a href="/go/scanner/scanner.go.html#5208080">tok3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5208235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208239">return</span>&nbsp;<span class="ident" id="5208246"><a href="/go/scanner/scanner.go.html#5208074">tok2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5208252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5208255">return</span>&nbsp;<span class="ident" id="5208262"><a href="/go/scanner/scanner.go.html#5208040">tok0</a></span><br>
<span class="lineno">565</span><span class="op" id="5208267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5208270">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="5208342">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5208414">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="5208428">//</span><br>
<span class="lineno"></span><span class="comment" id="5208431">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="5208507">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="5208585">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5208617">//</span><br>
<span class="lineno">575</span><span class="comment" id="5208620">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="5208694">//</span><br>
<span class="lineno"></span><span class="comment" id="5208697">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="5208760">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="5208829">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="5208895">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="5208906">//</span><br>
<span class="lineno"></span><span class="comment" id="5208909">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5208978">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="5209002">//</span><br>
<span class="lineno">585</span><span class="comment" id="5209005">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5209066">//</span><br>
<span class="lineno"></span><span class="comment" id="5209069">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5209133">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="5209196">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="5209259">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5209321">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="5209383">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="5209436">//</span><br>
<span class="lineno"></span><span class="comment" id="5209439">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="5209499">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="5209559">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="5209597">//</span><br>
<span class="lineno"></span><span class="keyword" id="5209600">func</span>&nbsp;<span class="op" id="5209605">(</span><span class="ident" id="5209606">s</span>&nbsp;<span class="op" id="5209608">*</span><span class="ident" id="5209609"><a href="/go/scanner/scanner.go.html#5196874">Scanner</a></span><span class="op" id="5209616">)</span>&nbsp;<span class="ident" id="5209618">Scan</span><span class="op" id="5209622">(</span><span class="op" id="5209623">)</span>&nbsp;<span class="op" id="5209625">(</span><span class="ident" id="5209626">pos</span>&nbsp;<span class="ident" id="5209630"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5209635">.</span><span class="ident" id="5209636">Pos</span><span class="op" id="5209639">,</span>&nbsp;<span class="ident" id="5209641">tok</span>&nbsp;<span class="ident" id="5209645"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5209650">.</span><span class="ident" id="5209651">Token</span><span class="op" id="5209656">,</span>&nbsp;<span class="ident" id="5209658">lit</span>&nbsp;<span class="builtintype" id="5209662">string</span><span class="op" id="5209668">)</span>&nbsp;<span class="op" id="5209670">{</span><br>
<span class="lineno"></span><span class="ident" id="5209672">scanAgain</span><span class="op" id="5209681">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5209684"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5209685">.</span><span class="ident" id="5209686">skipWhitespace</span><span class="op" id="5209700">(</span><span class="op" id="5209701">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5209705">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5209729"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span>&nbsp;<span class="op" id="5209733">=</span>&nbsp;<span class="ident" id="5209735"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5209736">.</span><span class="ident" id="5209737">file</span><span class="op" id="5209741">.</span><span class="ident" id="5209742">Pos</span><span class="op" id="5209745">(</span><span class="ident" id="5209746"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5209747">.</span><span class="ident" id="5209748">offset</span><span class="op" id="5209754">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5209758">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5209784">insertSemi</span>&nbsp;<span class="op" id="5209795">:=</span>&nbsp;<span class="builtintype" id="5209798">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5209805">switch</span>&nbsp;<span class="ident" id="5209812">ch</span>&nbsp;<span class="op" id="5209815">:=</span>&nbsp;<span class="ident" id="5209818"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5209819">.</span><span class="ident" id="5209820">ch</span><span class="op" id="5209822">;</span>&nbsp;<span class="op" id="5209824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5209827">case</span>&nbsp;<span class="ident" id="5209832"><a href="/go/scanner/scanner.go.html#5202466">isLetter</a></span><span class="op" id="5209840">(</span><span class="ident" id="5209841"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span><span class="op" id="5209843">)</span><span class="op" id="5209844">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5209848"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5209852">=</span>&nbsp;<span class="ident" id="5209854"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5209855">.</span><span class="ident" id="5209856">scanIdentifier</span><span class="op" id="5209870">(</span><span class="op" id="5209871">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5209875">if</span>&nbsp;<span class="builtinfunc" id="5209878">len</span><span class="op" id="5209881">(</span><span class="ident" id="5209882"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span><span class="op" id="5209885">)</span>&nbsp;<span class="op" id="5209887">&gt;</span>&nbsp;<span class="num" id="5209889">1</span>&nbsp;<span class="op" id="5209891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5209896">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5209963"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5209967">=</span>&nbsp;<span class="ident" id="5209969"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5209974">.</span><span class="ident" id="5209975">Lookup</span><span class="op" id="5209981">(</span><span class="ident" id="5209982"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span><span class="op" id="5209985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5209990">switch</span>&nbsp;<span class="ident" id="5209997"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210006">case</span>&nbsp;<span class="ident" id="5210011"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210016">.</span><span class="ident" id="5210017">IDENT</span><span class="op" id="5210022">,</span>&nbsp;<span class="ident" id="5210024"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210029">.</span><span class="ident" id="5210030">BREAK</span><span class="op" id="5210035">,</span>&nbsp;<span class="ident" id="5210037"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210042">.</span><span class="ident" id="5210043">CONTINUE</span><span class="op" id="5210051">,</span>&nbsp;<span class="ident" id="5210053"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210058">.</span><span class="ident" id="5210059">FALLTHROUGH</span><span class="op" id="5210070">,</span>&nbsp;<span class="ident" id="5210072"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210077">.</span><span class="ident" id="5210078">RETURN</span><span class="op" id="5210084">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210090"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210101">=</span>&nbsp;<span class="builtintype" id="5210103">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5210111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5210115">}</span>&nbsp;<span class="keyword" id="5210117">else</span>&nbsp;<span class="op" id="5210122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210127"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210138">=</span>&nbsp;<span class="builtintype" id="5210140">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210148"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210152">=</span>&nbsp;<span class="ident" id="5210154"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210159">.</span><span class="ident" id="5210160">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5210168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210171">case</span>&nbsp;<span class="string" id="5210176">&#39;0&#39;</span>&nbsp;<span class="op" id="5210180">&lt;=</span>&nbsp;<span class="ident" id="5210183"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span>&nbsp;<span class="op" id="5210186">&amp;&amp;</span>&nbsp;<span class="ident" id="5210189"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span>&nbsp;<span class="op" id="5210192">&lt;=</span>&nbsp;<span class="string" id="5210195">&#39;9&#39;</span><span class="op" id="5210198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210202"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210213">=</span>&nbsp;<span class="builtintype" id="5210215">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210222"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span><span class="op" id="5210225">,</span>&nbsp;<span class="ident" id="5210227"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5210231">=</span>&nbsp;<span class="ident" id="5210233"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210234">.</span><span class="ident" id="5210235">scanNumber</span><span class="op" id="5210245">(</span><span class="builtintype" id="5210246">false</span><span class="op" id="5210251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210254">default</span><span class="op" id="5210261">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210265"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210266">.</span><span class="ident" id="5210267">next</span><span class="op" id="5210271">(</span><span class="op" id="5210272">)</span>&nbsp;<span class="comment" id="5210274">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210300">switch</span>&nbsp;<span class="ident" id="5210307"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span>&nbsp;<span class="op" id="5210310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210314">case</span>&nbsp;<span class="op" id="5210319">-</span><span class="num" id="5210320">1</span><span class="op" id="5210321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210326">if</span>&nbsp;<span class="ident" id="5210329"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210330">.</span><span class="ident" id="5210331">insertSemi</span>&nbsp;<span class="op" id="5210342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210348"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210349">.</span><span class="ident" id="5210350">insertSemi</span>&nbsp;<span class="op" id="5210361">=</span>&nbsp;<span class="builtintype" id="5210363">false</span>&nbsp;<span class="comment" id="5210369">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210389">return</span>&nbsp;<span class="ident" id="5210396"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span><span class="op" id="5210399">,</span>&nbsp;<span class="ident" id="5210401"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210406">.</span><span class="ident" id="5210407">SEMICOLON</span><span class="op" id="5210416">,</span>&nbsp;<span class="string" id="5210418">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5210426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210431"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210435">=</span>&nbsp;<span class="ident" id="5210437"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210442">.</span><span class="ident" id="5210443">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210449">case</span>&nbsp;<span class="string" id="5210454">&#39;\n&#39;</span><span class="op" id="5210458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5210463">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5210508">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5210554">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210584"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210585">.</span><span class="ident" id="5210586">insertSemi</span>&nbsp;<span class="op" id="5210597">=</span>&nbsp;<span class="builtintype" id="5210599">false</span>&nbsp;<span class="comment" id="5210605">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210628">return</span>&nbsp;<span class="ident" id="5210635"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span><span class="op" id="5210638">,</span>&nbsp;<span class="ident" id="5210640"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210645">.</span><span class="ident" id="5210646">SEMICOLON</span><span class="op" id="5210655">,</span>&nbsp;<span class="string" id="5210657">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210664">case</span>&nbsp;<span class="string" id="5210669">&#39;&#34;&#39;</span><span class="op" id="5210672">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210677"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210688">=</span>&nbsp;<span class="builtintype" id="5210690">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210698"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210702">=</span>&nbsp;<span class="ident" id="5210704"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210709">.</span><span class="ident" id="5210710">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210720"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5210724">=</span>&nbsp;<span class="ident" id="5210726"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210727">.</span><span class="ident" id="5210728">scanString</span><span class="op" id="5210738">(</span><span class="op" id="5210739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210743">case</span>&nbsp;<span class="string" id="5210748">&#39;\&#39;&#39;</span><span class="op" id="5210752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210757"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210768">=</span>&nbsp;<span class="builtintype" id="5210770">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210778"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210782">=</span>&nbsp;<span class="ident" id="5210784"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210789">.</span><span class="ident" id="5210790">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210798"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5210802">=</span>&nbsp;<span class="ident" id="5210804"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210805">.</span><span class="ident" id="5210806">scanRune</span><span class="op" id="5210814">(</span><span class="op" id="5210815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210819">case</span>&nbsp;<span class="string" id="5210824">&#39;`&#39;</span><span class="op" id="5210827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210832"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5210843">=</span>&nbsp;<span class="builtintype" id="5210845">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210853"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210857">=</span>&nbsp;<span class="ident" id="5210859"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210864">.</span><span class="ident" id="5210865">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210875"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5210879">=</span>&nbsp;<span class="ident" id="5210881"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210882">.</span><span class="ident" id="5210883">scanRawString</span><span class="op" id="5210896">(</span><span class="op" id="5210897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210901">case</span>&nbsp;<span class="string" id="5210906">&#39;:&#39;</span><span class="op" id="5210909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5210914"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5210918">=</span>&nbsp;<span class="ident" id="5210920"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210921">.</span><span class="ident" id="5210922">switch2</span><span class="op" id="5210929">(</span><span class="ident" id="5210930"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210935">.</span><span class="ident" id="5210936">COLON</span><span class="op" id="5210941">,</span>&nbsp;<span class="ident" id="5210943"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5210948">.</span><span class="ident" id="5210949">DEFINE</span><span class="op" id="5210955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210959">case</span>&nbsp;<span class="string" id="5210964">&#39;.&#39;</span><span class="op" id="5210967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5210972">if</span>&nbsp;<span class="string" id="5210975">&#39;0&#39;</span>&nbsp;<span class="op" id="5210979">&lt;=</span>&nbsp;<span class="ident" id="5210982"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210983">.</span><span class="ident" id="5210984">ch</span>&nbsp;<span class="op" id="5210987">&amp;&amp;</span>&nbsp;<span class="ident" id="5210990"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5210991">.</span><span class="ident" id="5210992">ch</span>&nbsp;<span class="op" id="5210995">&lt;=</span>&nbsp;<span class="string" id="5210998">&#39;9&#39;</span>&nbsp;<span class="op" id="5211002">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211008"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211019">=</span>&nbsp;<span class="builtintype" id="5211021">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211030"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span><span class="op" id="5211033">,</span>&nbsp;<span class="ident" id="5211035"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5211039">=</span>&nbsp;<span class="ident" id="5211041"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211042">.</span><span class="ident" id="5211043">scanNumber</span><span class="op" id="5211053">(</span><span class="builtintype" id="5211054">true</span><span class="op" id="5211058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211063">}</span>&nbsp;<span class="keyword" id="5211065">else</span>&nbsp;<span class="keyword" id="5211070">if</span>&nbsp;<span class="ident" id="5211073"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211074">.</span><span class="ident" id="5211075">ch</span>&nbsp;<span class="op" id="5211078">==</span>&nbsp;<span class="string" id="5211081">&#39;.&#39;</span>&nbsp;<span class="op" id="5211085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211091"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211092">.</span><span class="ident" id="5211093">next</span><span class="op" id="5211097">(</span><span class="op" id="5211098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211104">if</span>&nbsp;<span class="ident" id="5211107"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211108">.</span><span class="ident" id="5211109">ch</span>&nbsp;<span class="op" id="5211112">==</span>&nbsp;<span class="string" id="5211115">&#39;.&#39;</span>&nbsp;<span class="op" id="5211119">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211126"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211127">.</span><span class="ident" id="5211128">next</span><span class="op" id="5211132">(</span><span class="op" id="5211133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211140"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211144">=</span>&nbsp;<span class="ident" id="5211146"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211151">.</span><span class="ident" id="5211152">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211170">}</span>&nbsp;<span class="keyword" id="5211172">else</span>&nbsp;<span class="op" id="5211177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211183"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211187">=</span>&nbsp;<span class="ident" id="5211189"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211194">.</span><span class="ident" id="5211195">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211209">case</span>&nbsp;<span class="string" id="5211214">&#39;,&#39;</span><span class="op" id="5211217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211222"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211226">=</span>&nbsp;<span class="ident" id="5211228"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211233">.</span><span class="ident" id="5211234">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211242">case</span>&nbsp;<span class="string" id="5211247">&#39;;&#39;</span><span class="op" id="5211250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211255"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211259">=</span>&nbsp;<span class="ident" id="5211261"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211266">.</span><span class="ident" id="5211267">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211280"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5211284">=</span>&nbsp;<span class="string" id="5211286">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211292">case</span>&nbsp;<span class="string" id="5211297">&#39;(&#39;</span><span class="op" id="5211300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211305"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211309">=</span>&nbsp;<span class="ident" id="5211311"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211316">.</span><span class="ident" id="5211317">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211326">case</span>&nbsp;<span class="string" id="5211331">&#39;)&#39;</span><span class="op" id="5211334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211339"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211350">=</span>&nbsp;<span class="builtintype" id="5211352">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211360"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211364">=</span>&nbsp;<span class="ident" id="5211366"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211371">.</span><span class="ident" id="5211372">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211381">case</span>&nbsp;<span class="string" id="5211386">&#39;[&#39;</span><span class="op" id="5211389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211394"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211398">=</span>&nbsp;<span class="ident" id="5211400"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211405">.</span><span class="ident" id="5211406">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211415">case</span>&nbsp;<span class="string" id="5211420">&#39;]&#39;</span><span class="op" id="5211423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211428"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211439">=</span>&nbsp;<span class="builtintype" id="5211441">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211449"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211453">=</span>&nbsp;<span class="ident" id="5211455"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211460">.</span><span class="ident" id="5211461">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211470">case</span>&nbsp;<span class="string" id="5211475">&#39;{&#39;</span><span class="op" id="5211478">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211483"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211487">=</span>&nbsp;<span class="ident" id="5211489"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211494">.</span><span class="ident" id="5211495">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211504">case</span>&nbsp;<span class="string" id="5211509">&#39;}&#39;</span><span class="op" id="5211512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211517"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211528">=</span>&nbsp;<span class="builtintype" id="5211530">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211538"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211542">=</span>&nbsp;<span class="ident" id="5211544"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211549">.</span><span class="ident" id="5211550">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211559">case</span>&nbsp;<span class="string" id="5211564">&#39;+&#39;</span><span class="op" id="5211567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211572"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211576">=</span>&nbsp;<span class="ident" id="5211578"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211579">.</span><span class="ident" id="5211580">switch3</span><span class="op" id="5211587">(</span><span class="ident" id="5211588"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211593">.</span><span class="ident" id="5211594">ADD</span><span class="op" id="5211597">,</span>&nbsp;<span class="ident" id="5211599"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211604">.</span><span class="ident" id="5211605">ADD_ASSIGN</span><span class="op" id="5211615">,</span>&nbsp;<span class="string" id="5211617">&#39;+&#39;</span><span class="op" id="5211620">,</span>&nbsp;<span class="ident" id="5211622"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211627">.</span><span class="ident" id="5211628">INC</span><span class="op" id="5211631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211636">if</span>&nbsp;<span class="ident" id="5211639"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211643">==</span>&nbsp;<span class="ident" id="5211646"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211651">.</span><span class="ident" id="5211652">INC</span>&nbsp;<span class="op" id="5211656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211662"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211673">=</span>&nbsp;<span class="builtintype" id="5211675">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211687">case</span>&nbsp;<span class="string" id="5211692">&#39;-&#39;</span><span class="op" id="5211695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211700"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211704">=</span>&nbsp;<span class="ident" id="5211706"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211707">.</span><span class="ident" id="5211708">switch3</span><span class="op" id="5211715">(</span><span class="ident" id="5211716"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211721">.</span><span class="ident" id="5211722">SUB</span><span class="op" id="5211725">,</span>&nbsp;<span class="ident" id="5211727"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211732">.</span><span class="ident" id="5211733">SUB_ASSIGN</span><span class="op" id="5211743">,</span>&nbsp;<span class="string" id="5211745">&#39;-&#39;</span><span class="op" id="5211748">,</span>&nbsp;<span class="ident" id="5211750"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211755">.</span><span class="ident" id="5211756">DEC</span><span class="op" id="5211759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211764">if</span>&nbsp;<span class="ident" id="5211767"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211771">==</span>&nbsp;<span class="ident" id="5211774"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211779">.</span><span class="ident" id="5211780">DEC</span>&nbsp;<span class="op" id="5211784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211790"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5211801">=</span>&nbsp;<span class="builtintype" id="5211803">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5211811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211815">case</span>&nbsp;<span class="string" id="5211820">&#39;*&#39;</span><span class="op" id="5211823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5211828"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5211832">=</span>&nbsp;<span class="ident" id="5211834"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211835">.</span><span class="ident" id="5211836">switch2</span><span class="op" id="5211843">(</span><span class="ident" id="5211844"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211849">.</span><span class="ident" id="5211850">MUL</span><span class="op" id="5211853">,</span>&nbsp;<span class="ident" id="5211855"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5211860">.</span><span class="ident" id="5211861">MUL_ASSIGN</span><span class="op" id="5211871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211875">case</span>&nbsp;<span class="string" id="5211880">&#39;/&#39;</span><span class="op" id="5211883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211888">if</span>&nbsp;<span class="ident" id="5211891"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211892">.</span><span class="ident" id="5211893">ch</span>&nbsp;<span class="op" id="5211896">==</span>&nbsp;<span class="string" id="5211899">&#39;/&#39;</span>&nbsp;<span class="op" id="5211903">||</span>&nbsp;<span class="ident" id="5211906"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211907">.</span><span class="ident" id="5211908">ch</span>&nbsp;<span class="op" id="5211911">==</span>&nbsp;<span class="string" id="5211914">&#39;*&#39;</span>&nbsp;<span class="op" id="5211918">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5211924">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5211939">if</span>&nbsp;<span class="ident" id="5211942"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211943">.</span><span class="ident" id="5211944">insertSemi</span>&nbsp;<span class="op" id="5211955">&amp;&amp;</span>&nbsp;<span class="ident" id="5211958"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5211959">.</span><span class="ident" id="5211960">findLineEnd</span><span class="op" id="5211971">(</span><span class="op" id="5211972">)</span>&nbsp;<span class="op" id="5211974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5211981">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212036"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212037">.</span><span class="ident" id="5212038">ch</span>&nbsp;<span class="op" id="5212041">=</span>&nbsp;<span class="string" id="5212043">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212052"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212053">.</span><span class="ident" id="5212054">offset</span>&nbsp;<span class="op" id="5212061">=</span>&nbsp;<span class="ident" id="5212063"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212064">.</span><span class="ident" id="5212065">file</span><span class="op" id="5212069">.</span><span class="ident" id="5212070">Offset</span><span class="op" id="5212076">(</span><span class="ident" id="5212077"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span><span class="op" id="5212080">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212087"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212088">.</span><span class="ident" id="5212089">rdOffset</span>&nbsp;<span class="op" id="5212098">=</span>&nbsp;<span class="ident" id="5212100"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212101">.</span><span class="ident" id="5212102">offset</span>&nbsp;<span class="op" id="5212109">+</span>&nbsp;<span class="num" id="5212111">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212118"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212119">.</span><span class="ident" id="5212120">insertSemi</span>&nbsp;<span class="op" id="5212131">=</span>&nbsp;<span class="builtintype" id="5212133">false</span>&nbsp;<span class="comment" id="5212139">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212164">return</span>&nbsp;<span class="ident" id="5212171"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span><span class="op" id="5212174">,</span>&nbsp;<span class="ident" id="5212176"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212181">.</span><span class="ident" id="5212182">SEMICOLON</span><span class="op" id="5212191">,</span>&nbsp;<span class="string" id="5212193">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212208"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5212212">=</span>&nbsp;<span class="ident" id="5212214"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212215">.</span><span class="ident" id="5212216">scanComment</span><span class="op" id="5212227">(</span><span class="op" id="5212228">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212234">if</span>&nbsp;<span class="ident" id="5212237"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212238">.</span><span class="ident" id="5212239">mode</span><span class="op" id="5212243">&amp;</span><span class="ident" id="5212244"><a href="/go/scanner/scanner.go.html#5198424">ScanComments</a></span>&nbsp;<span class="op" id="5212257">==</span>&nbsp;<span class="num" id="5212260">0</span>&nbsp;<span class="op" id="5212262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5212269">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212290"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212291">.</span><span class="ident" id="5212292">insertSemi</span>&nbsp;<span class="op" id="5212303">=</span>&nbsp;<span class="builtintype" id="5212305">false</span>&nbsp;<span class="comment" id="5212311">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212336">goto</span>&nbsp;<span class="ident" id="5212341">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212355">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212361"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212365">=</span>&nbsp;<span class="ident" id="5212367"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212372">.</span><span class="ident" id="5212373">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212384">}</span>&nbsp;<span class="keyword" id="5212386">else</span>&nbsp;<span class="op" id="5212391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212397"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212401">=</span>&nbsp;<span class="ident" id="5212403"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212404">.</span><span class="ident" id="5212405">switch2</span><span class="op" id="5212412">(</span><span class="ident" id="5212413"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212418">.</span><span class="ident" id="5212419">QUO</span><span class="op" id="5212422">,</span>&nbsp;<span class="ident" id="5212424"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212429">.</span><span class="ident" id="5212430">QUO_ASSIGN</span><span class="op" id="5212440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212449">case</span>&nbsp;<span class="string" id="5212454">&#39;%&#39;</span><span class="op" id="5212457">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212462"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212466">=</span>&nbsp;<span class="ident" id="5212468"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212469">.</span><span class="ident" id="5212470">switch2</span><span class="op" id="5212477">(</span><span class="ident" id="5212478"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212483">.</span><span class="ident" id="5212484">REM</span><span class="op" id="5212487">,</span>&nbsp;<span class="ident" id="5212489"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212494">.</span><span class="ident" id="5212495">REM_ASSIGN</span><span class="op" id="5212505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212509">case</span>&nbsp;<span class="string" id="5212514">&#39;^&#39;</span><span class="op" id="5212517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212522"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212526">=</span>&nbsp;<span class="ident" id="5212528"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212529">.</span><span class="ident" id="5212530">switch2</span><span class="op" id="5212537">(</span><span class="ident" id="5212538"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212543">.</span><span class="ident" id="5212544">XOR</span><span class="op" id="5212547">,</span>&nbsp;<span class="ident" id="5212549"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212554">.</span><span class="ident" id="5212555">XOR_ASSIGN</span><span class="op" id="5212565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212569">case</span>&nbsp;<span class="string" id="5212574">&#39;&lt;&#39;</span><span class="op" id="5212577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212582">if</span>&nbsp;<span class="ident" id="5212585"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212586">.</span><span class="ident" id="5212587">ch</span>&nbsp;<span class="op" id="5212590">==</span>&nbsp;<span class="string" id="5212593">&#39;-&#39;</span>&nbsp;<span class="op" id="5212597">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212603"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212604">.</span><span class="ident" id="5212605">next</span><span class="op" id="5212609">(</span><span class="op" id="5212610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212616"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212620">=</span>&nbsp;<span class="ident" id="5212622"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212627">.</span><span class="ident" id="5212628">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212637">}</span>&nbsp;<span class="keyword" id="5212639">else</span>&nbsp;<span class="op" id="5212644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212650"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212654">=</span>&nbsp;<span class="ident" id="5212656"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212657">.</span><span class="ident" id="5212658">switch4</span><span class="op" id="5212665">(</span><span class="ident" id="5212666"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212671">.</span><span class="ident" id="5212672">LSS</span><span class="op" id="5212675">,</span>&nbsp;<span class="ident" id="5212677"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212682">.</span><span class="ident" id="5212683">LEQ</span><span class="op" id="5212686">,</span>&nbsp;<span class="string" id="5212688">&#39;&lt;&#39;</span><span class="op" id="5212691">,</span>&nbsp;<span class="ident" id="5212693"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212698">.</span><span class="ident" id="5212699">SHL</span><span class="op" id="5212702">,</span>&nbsp;<span class="ident" id="5212704"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212709">.</span><span class="ident" id="5212710">SHL_ASSIGN</span><span class="op" id="5212720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5212725">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212729">case</span>&nbsp;<span class="string" id="5212734">&#39;&gt;&#39;</span><span class="op" id="5212737">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212742"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212746">=</span>&nbsp;<span class="ident" id="5212748"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212749">.</span><span class="ident" id="5212750">switch4</span><span class="op" id="5212757">(</span><span class="ident" id="5212758"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212763">.</span><span class="ident" id="5212764">GTR</span><span class="op" id="5212767">,</span>&nbsp;<span class="ident" id="5212769"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212774">.</span><span class="ident" id="5212775">GEQ</span><span class="op" id="5212778">,</span>&nbsp;<span class="string" id="5212780">&#39;&gt;&#39;</span><span class="op" id="5212783">,</span>&nbsp;<span class="ident" id="5212785"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212790">.</span><span class="ident" id="5212791">SHR</span><span class="op" id="5212794">,</span>&nbsp;<span class="ident" id="5212796"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212801">.</span><span class="ident" id="5212802">SHR_ASSIGN</span><span class="op" id="5212812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212816">case</span>&nbsp;<span class="string" id="5212821">&#39;=&#39;</span><span class="op" id="5212824">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212829"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212833">=</span>&nbsp;<span class="ident" id="5212835"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212836">.</span><span class="ident" id="5212837">switch2</span><span class="op" id="5212844">(</span><span class="ident" id="5212845"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212850">.</span><span class="ident" id="5212851">ASSIGN</span><span class="op" id="5212857">,</span>&nbsp;<span class="ident" id="5212859"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212864">.</span><span class="ident" id="5212865">EQL</span><span class="op" id="5212868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212872">case</span>&nbsp;<span class="string" id="5212877">&#39;!&#39;</span><span class="op" id="5212880">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212885"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212889">=</span>&nbsp;<span class="ident" id="5212891"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212892">.</span><span class="ident" id="5212893">switch2</span><span class="op" id="5212900">(</span><span class="ident" id="5212901"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212906">.</span><span class="ident" id="5212907">NOT</span><span class="op" id="5212910">,</span>&nbsp;<span class="ident" id="5212912"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212917">.</span><span class="ident" id="5212918">NEQ</span><span class="op" id="5212921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212925">case</span>&nbsp;<span class="string" id="5212930">&#39;&amp;&#39;</span><span class="op" id="5212933">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5212938">if</span>&nbsp;<span class="ident" id="5212941"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212942">.</span><span class="ident" id="5212943">ch</span>&nbsp;<span class="op" id="5212946">==</span>&nbsp;<span class="string" id="5212949">&#39;^&#39;</span>&nbsp;<span class="op" id="5212953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212959"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212960">.</span><span class="ident" id="5212961">next</span><span class="op" id="5212965">(</span><span class="op" id="5212966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5212972"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5212976">=</span>&nbsp;<span class="ident" id="5212978"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5212979">.</span><span class="ident" id="5212980">switch2</span><span class="op" id="5212987">(</span><span class="ident" id="5212988"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5212993">.</span><span class="ident" id="5212994">AND_NOT</span><span class="op" id="5213001">,</span>&nbsp;<span class="ident" id="5213003"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213008">.</span><span class="ident" id="5213009">AND_NOT_ASSIGN</span><span class="op" id="5213023">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213028">}</span>&nbsp;<span class="keyword" id="5213030">else</span>&nbsp;<span class="op" id="5213035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213041"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5213045">=</span>&nbsp;<span class="ident" id="5213047"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213048">.</span><span class="ident" id="5213049">switch3</span><span class="op" id="5213056">(</span><span class="ident" id="5213057"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213062">.</span><span class="ident" id="5213063">AND</span><span class="op" id="5213066">,</span>&nbsp;<span class="ident" id="5213068"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213073">.</span><span class="ident" id="5213074">AND_ASSIGN</span><span class="op" id="5213084">,</span>&nbsp;<span class="string" id="5213086">&#39;&amp;&#39;</span><span class="op" id="5213089">,</span>&nbsp;<span class="ident" id="5213091"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213096">.</span><span class="ident" id="5213097">LAND</span><span class="op" id="5213101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5213110">case</span>&nbsp;<span class="string" id="5213115">&#39;|&#39;</span><span class="op" id="5213118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213123"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5213127">=</span>&nbsp;<span class="ident" id="5213129"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213130">.</span><span class="ident" id="5213131">switch3</span><span class="op" id="5213138">(</span><span class="ident" id="5213139"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213144">.</span><span class="ident" id="5213145">OR</span><span class="op" id="5213147">,</span>&nbsp;<span class="ident" id="5213149"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213154">.</span><span class="ident" id="5213155">OR_ASSIGN</span><span class="op" id="5213164">,</span>&nbsp;<span class="string" id="5213166">&#39;|&#39;</span><span class="op" id="5213169">,</span>&nbsp;<span class="ident" id="5213171"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213176">.</span><span class="ident" id="5213177">LOR</span><span class="op" id="5213180">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5213184">default</span><span class="op" id="5213191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5213196">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5213246">if</span>&nbsp;<span class="ident" id="5213249"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span>&nbsp;<span class="op" id="5213252">!=</span>&nbsp;<span class="ident" id="5213255"><a href="/go/scanner/scanner.go.html#5197472">bom</a></span>&nbsp;<span class="op" id="5213259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213265"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213266">.</span><span class="builtintype" id="5213267">error</span><span class="op" id="5213272">(</span><span class="ident" id="5213273"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213274">.</span><span class="ident" id="5213275">file</span><span class="op" id="5213279">.</span><span class="ident" id="5213280">Offset</span><span class="op" id="5213286">(</span><span class="ident" id="5213287"><a href="/go/scanner/scanner.go.html#5209626">pos</a></span><span class="op" id="5213290">)</span><span class="op" id="5213291">,</span>&nbsp;<span class="ident" id="5213293"><a href="/go/scanner/scanner.go.html#5196302">fmt</a></span><span class="op" id="5213296">.</span><span class="ident" id="5213297">Sprintf</span><span class="op" id="5213304">(</span><span class="string" id="5213305">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="5213328">,</span>&nbsp;<span class="ident" id="5213330"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span><span class="op" id="5213332">)</span><span class="op" id="5213333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213338">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213343"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span>&nbsp;<span class="op" id="5213354">=</span>&nbsp;<span class="ident" id="5213356"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213357">.</span><span class="ident" id="5213358">insertSemi</span>&nbsp;<span class="comment" id="5213369">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213400"><a href="/go/scanner/scanner.go.html#5209641">tok</a></span>&nbsp;<span class="op" id="5213404">=</span>&nbsp;<span class="ident" id="5213406"><a href="/go/scanner/scanner.go.html#5196309">token</a></span><span class="op" id="5213411">.</span><span class="ident" id="5213412">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213423"><a href="/go/scanner/scanner.go.html#5209658">lit</a></span>&nbsp;<span class="op" id="5213427">=</span>&nbsp;<span class="builtintype" id="5213429">string</span><span class="op" id="5213435">(</span><span class="ident" id="5213436"><a href="/go/scanner/scanner.go.html#5209812">ch</a></span><span class="op" id="5213438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213445">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5213448">if</span>&nbsp;<span class="ident" id="5213451"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213452">.</span><span class="ident" id="5213453">mode</span><span class="op" id="5213457">&amp;</span><span class="ident" id="5213458"><a href="/go/scanner/scanner.go.html#5198495">dontInsertSemis</a></span>&nbsp;<span class="op" id="5213474">==</span>&nbsp;<span class="num" id="5213477">0</span>&nbsp;<span class="op" id="5213479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5213483"><a href="/go/scanner/scanner.go.html#5209606">s</a></span><span class="op" id="5213484">.</span><span class="ident" id="5213485">insertSemi</span>&nbsp;<span class="op" id="5213496">=</span>&nbsp;<span class="ident" id="5213498"><a href="/go/scanner/scanner.go.html#5209784">insertSemi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5213510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5213514">return</span><br>
<span class="lineno">760</span><span class="op" id="5213521">}</span>
</div>
</body>
</html>
