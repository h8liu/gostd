<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6920424">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6920480">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6920534">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6920585">package</span>&nbsp;<span class="ident" id="6920593">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6920600">import</span>&nbsp;<span class="op" id="6920607">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6920610">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6920621">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6920631">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6920634">var</span>&nbsp;<span class="op" id="6920638">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920641">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6920651">=</span>&nbsp;<span class="ident" id="6920653">runtime</span><span class="op" id="6920660">.</span><span class="ident" id="6920661">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920667">thisArch</span>&nbsp;&nbsp;<span class="op" id="6920677">=</span>&nbsp;<span class="ident" id="6920679">runtime</span><span class="op" id="6920686">.</span><span class="ident" id="6920687">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920695">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6920705">=</span>&nbsp;<span class="ident" id="6920707">anotherOS</span><span class="op" id="6920716">(</span><span class="op" id="6920717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920720">otherArch</span>&nbsp;<span class="op" id="6920730">=</span>&nbsp;<span class="ident" id="6920732">anotherArch</span><span class="op" id="6920743">(</span><span class="op" id="6920744">)</span><br>
<span class="lineno"></span><span class="op" id="6920746">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6920749">func</span>&nbsp;<span class="ident" id="6920754">anotherOS</span><span class="op" id="6920763">(</span><span class="op" id="6920764">)</span>&nbsp;<span class="builtintype" id="6920766">string</span>&nbsp;<span class="op" id="6920773">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920776">if</span>&nbsp;<span class="ident" id="6920779">thisOS</span>&nbsp;<span class="op" id="6920786">!=</span>&nbsp;<span class="string" id="6920789">&#34;darwin&#34;</span>&nbsp;<span class="op" id="6920798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920802">return</span>&nbsp;<span class="string" id="6920809">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6920819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920822">return</span>&nbsp;<span class="string" id="6920829">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="6920837">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6920840">func</span>&nbsp;<span class="ident" id="6920845">anotherArch</span><span class="op" id="6920856">(</span><span class="op" id="6920857">)</span>&nbsp;<span class="builtintype" id="6920859">string</span>&nbsp;<span class="op" id="6920866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920869">if</span>&nbsp;<span class="ident" id="6920872">thisArch</span>&nbsp;<span class="op" id="6920881">!=</span>&nbsp;<span class="string" id="6920884">&#34;amd64&#34;</span>&nbsp;<span class="op" id="6920892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920896">return</span>&nbsp;<span class="string" id="6920903">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6920912">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920915">return</span>&nbsp;<span class="string" id="6920922">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="6920928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6920931">type</span>&nbsp;<span class="ident" id="6920936">GoodFileTest</span>&nbsp;<span class="keyword" id="6920949">struct</span>&nbsp;<span class="op" id="6920956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920959">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6920966">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920974">result</span>&nbsp;<span class="builtintype" id="6920981">bool</span><br>
<span class="lineno"></span><span class="op" id="6920986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6920989">var</span>&nbsp;<span class="ident" id="6920993">tests</span>&nbsp;<span class="op" id="6920999">=</span>&nbsp;<span class="op" id="6921001">[</span><span class="op" id="6921002">]</span><span class="ident" id="6921003">GoodFileTest</span><span class="op" id="6921015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921018">{</span><span class="string" id="6921019">&#34;file.go&#34;</span><span class="op" id="6921028">,</span>&nbsp;<span class="builtintype" id="6921030">true</span><span class="op" id="6921034">}</span><span class="op" id="6921035">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921038">{</span><span class="string" id="6921039">&#34;file.c&#34;</span><span class="op" id="6921047">,</span>&nbsp;<span class="builtintype" id="6921049">true</span><span class="op" id="6921053">}</span><span class="op" id="6921054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921057">{</span><span class="string" id="6921058">&#34;file_foo.go&#34;</span><span class="op" id="6921071">,</span>&nbsp;<span class="builtintype" id="6921073">true</span><span class="op" id="6921077">}</span><span class="op" id="6921078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921081">{</span><span class="string" id="6921082">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921090">+</span>&nbsp;<span class="ident" id="6921092">thisArch</span>&nbsp;<span class="op" id="6921101">+</span>&nbsp;<span class="string" id="6921103">&#34;.go&#34;</span><span class="op" id="6921108">,</span>&nbsp;<span class="builtintype" id="6921110">true</span><span class="op" id="6921114">}</span><span class="op" id="6921115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921118">{</span><span class="string" id="6921119">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921127">+</span>&nbsp;<span class="ident" id="6921129">otherArch</span>&nbsp;<span class="op" id="6921139">+</span>&nbsp;<span class="string" id="6921141">&#34;.go&#34;</span><span class="op" id="6921146">,</span>&nbsp;<span class="builtintype" id="6921148">false</span><span class="op" id="6921153">}</span><span class="op" id="6921154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921157">{</span><span class="string" id="6921158">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921166">+</span>&nbsp;<span class="ident" id="6921168">thisOS</span>&nbsp;<span class="op" id="6921175">+</span>&nbsp;<span class="string" id="6921177">&#34;.go&#34;</span><span class="op" id="6921182">,</span>&nbsp;<span class="builtintype" id="6921184">true</span><span class="op" id="6921188">}</span><span class="op" id="6921189">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921192">{</span><span class="string" id="6921193">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921201">+</span>&nbsp;<span class="ident" id="6921203">otherOS</span>&nbsp;<span class="op" id="6921211">+</span>&nbsp;<span class="string" id="6921213">&#34;.go&#34;</span><span class="op" id="6921218">,</span>&nbsp;<span class="builtintype" id="6921220">false</span><span class="op" id="6921225">}</span><span class="op" id="6921226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921229">{</span><span class="string" id="6921230">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921238">+</span>&nbsp;<span class="ident" id="6921240">thisOS</span>&nbsp;<span class="op" id="6921247">+</span>&nbsp;<span class="string" id="6921249">&#34;_&#34;</span>&nbsp;<span class="op" id="6921253">+</span>&nbsp;<span class="ident" id="6921255">thisArch</span>&nbsp;<span class="op" id="6921264">+</span>&nbsp;<span class="string" id="6921266">&#34;.go&#34;</span><span class="op" id="6921271">,</span>&nbsp;<span class="builtintype" id="6921273">true</span><span class="op" id="6921277">}</span><span class="op" id="6921278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921281">{</span><span class="string" id="6921282">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921290">+</span>&nbsp;<span class="ident" id="6921292">otherOS</span>&nbsp;<span class="op" id="6921300">+</span>&nbsp;<span class="string" id="6921302">&#34;_&#34;</span>&nbsp;<span class="op" id="6921306">+</span>&nbsp;<span class="ident" id="6921308">thisArch</span>&nbsp;<span class="op" id="6921317">+</span>&nbsp;<span class="string" id="6921319">&#34;.go&#34;</span><span class="op" id="6921324">,</span>&nbsp;<span class="builtintype" id="6921326">false</span><span class="op" id="6921331">}</span><span class="op" id="6921332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921335">{</span><span class="string" id="6921336">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921344">+</span>&nbsp;<span class="ident" id="6921346">thisOS</span>&nbsp;<span class="op" id="6921353">+</span>&nbsp;<span class="string" id="6921355">&#34;_&#34;</span>&nbsp;<span class="op" id="6921359">+</span>&nbsp;<span class="ident" id="6921361">otherArch</span>&nbsp;<span class="op" id="6921371">+</span>&nbsp;<span class="string" id="6921373">&#34;.go&#34;</span><span class="op" id="6921378">,</span>&nbsp;<span class="builtintype" id="6921380">false</span><span class="op" id="6921385">}</span><span class="op" id="6921386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921389">{</span><span class="string" id="6921390">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921398">+</span>&nbsp;<span class="ident" id="6921400">otherOS</span>&nbsp;<span class="op" id="6921408">+</span>&nbsp;<span class="string" id="6921410">&#34;_&#34;</span>&nbsp;<span class="op" id="6921414">+</span>&nbsp;<span class="ident" id="6921416">otherArch</span>&nbsp;<span class="op" id="6921426">+</span>&nbsp;<span class="string" id="6921428">&#34;.go&#34;</span><span class="op" id="6921433">,</span>&nbsp;<span class="builtintype" id="6921435">false</span><span class="op" id="6921440">}</span><span class="op" id="6921441">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921444">{</span><span class="string" id="6921445">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="6921457">+</span>&nbsp;<span class="ident" id="6921459">thisArch</span>&nbsp;<span class="op" id="6921468">+</span>&nbsp;<span class="string" id="6921470">&#34;.go&#34;</span><span class="op" id="6921475">,</span>&nbsp;<span class="builtintype" id="6921477">true</span><span class="op" id="6921481">}</span><span class="op" id="6921482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921485">{</span><span class="string" id="6921486">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="6921498">+</span>&nbsp;<span class="ident" id="6921500">otherArch</span>&nbsp;<span class="op" id="6921510">+</span>&nbsp;<span class="string" id="6921512">&#34;.go&#34;</span><span class="op" id="6921517">,</span>&nbsp;<span class="builtintype" id="6921519">false</span><span class="op" id="6921524">}</span><span class="op" id="6921525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921528">{</span><span class="string" id="6921529">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921537">+</span>&nbsp;<span class="ident" id="6921539">thisOS</span>&nbsp;<span class="op" id="6921546">+</span>&nbsp;<span class="string" id="6921548">&#34;.c&#34;</span><span class="op" id="6921552">,</span>&nbsp;<span class="builtintype" id="6921554">true</span><span class="op" id="6921558">}</span><span class="op" id="6921559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921562">{</span><span class="string" id="6921563">&#34;file_&#34;</span>&nbsp;<span class="op" id="6921571">+</span>&nbsp;<span class="ident" id="6921573">otherOS</span>&nbsp;<span class="op" id="6921581">+</span>&nbsp;<span class="string" id="6921583">&#34;.c&#34;</span><span class="op" id="6921587">,</span>&nbsp;<span class="builtintype" id="6921589">false</span><span class="op" id="6921594">}</span><span class="op" id="6921595">,</span><br>
<span class="lineno"></span><span class="op" id="6921597">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6921600">func</span>&nbsp;<span class="ident" id="6921605">TestGoodOSArch</span><span class="op" id="6921619">(</span><span class="ident" id="6921620">t</span>&nbsp;<span class="op" id="6921622">*</span><span class="ident" id="6921623">testing</span><span class="op" id="6921630">.</span><span class="ident" id="6921631">T</span><span class="op" id="6921632">)</span>&nbsp;<span class="op" id="6921634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6921637">for</span>&nbsp;<span class="ident" id="6921641">_</span><span class="op" id="6921642">,</span>&nbsp;<span class="ident" id="6921644">test</span>&nbsp;<span class="op" id="6921649">:=</span>&nbsp;<span class="keyword" id="6921652">range</span>&nbsp;<span class="ident" id="6921658">tests</span>&nbsp;<span class="op" id="6921664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6921668">if</span>&nbsp;<span class="ident" id="6921671">Default</span><span class="op" id="6921678">.</span><span class="ident" id="6921679">goodOSArchFile</span><span class="op" id="6921693">(</span><span class="ident" id="6921694">test</span><span class="op" id="6921698">.</span><span class="ident" id="6921699">name</span><span class="op" id="6921703">,</span>&nbsp;<span class="builtinfunc" id="6921705">make</span><span class="op" id="6921709">(</span><span class="keyword" id="6921710">map</span><span class="op" id="6921713">[</span><span class="builtintype" id="6921714">string</span><span class="op" id="6921720">]</span><span class="builtintype" id="6921721">bool</span><span class="op" id="6921725">)</span><span class="op" id="6921726">)</span>&nbsp;<span class="op" id="6921728">!=</span>&nbsp;<span class="ident" id="6921731">test</span><span class="op" id="6921735">.</span><span class="ident" id="6921736">result</span>&nbsp;<span class="op" id="6921743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6921748">t</span><span class="op" id="6921749">.</span><span class="ident" id="6921750">Fatalf</span><span class="op" id="6921756">(</span><span class="string" id="6921757">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6921783">,</span>&nbsp;<span class="ident" id="6921785">test</span><span class="op" id="6921789">.</span><span class="ident" id="6921790">name</span><span class="op" id="6921794">,</span>&nbsp;<span class="ident" id="6921796">test</span><span class="op" id="6921800">.</span><span class="ident" id="6921801">result</span><span class="op" id="6921807">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6921814">}</span><br>
<span class="lineno"></span><span class="op" id="6921816">}</span>
</div>
</body>
</html>
