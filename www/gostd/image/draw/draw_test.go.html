<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7428428">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7428483">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7428537">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7428588">package</span>&nbsp;<span class="ident" id="7428596">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7428602">import</span>&nbsp;<span class="op" id="7428609">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7428612">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7428621">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7428636">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7428649">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7428655">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7428665">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7428668">func</span>&nbsp;<span class="ident" id="7428673">eq</span><span class="op" id="7428675">(</span><span class="ident" id="7428676">c0</span><span class="op" id="7428678">,</span>&nbsp;<span class="ident" id="7428680">c1</span>&nbsp;<span class="ident" id="7428683">color</span><span class="op" id="7428688">.</span><span class="ident" id="7428689">Color</span><span class="op" id="7428694">)</span>&nbsp;<span class="builtintype" id="7428696">bool</span>&nbsp;<span class="op" id="7428701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7428704">r0</span><span class="op" id="7428706">,</span>&nbsp;<span class="ident" id="7428708">g0</span><span class="op" id="7428710">,</span>&nbsp;<span class="ident" id="7428712">b0</span><span class="op" id="7428714">,</span>&nbsp;<span class="ident" id="7428716">a0</span>&nbsp;<span class="op" id="7428719">:=</span>&nbsp;<span class="ident" id="7428722">c0</span><span class="op" id="7428724">.</span><span class="ident" id="7428725">RGBA</span><span class="op" id="7428729">(</span><span class="op" id="7428730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7428733">r1</span><span class="op" id="7428735">,</span>&nbsp;<span class="ident" id="7428737">g1</span><span class="op" id="7428739">,</span>&nbsp;<span class="ident" id="7428741">b1</span><span class="op" id="7428743">,</span>&nbsp;<span class="ident" id="7428745">a1</span>&nbsp;<span class="op" id="7428748">:=</span>&nbsp;<span class="ident" id="7428751">c1</span><span class="op" id="7428753">.</span><span class="ident" id="7428754">RGBA</span><span class="op" id="7428758">(</span><span class="op" id="7428759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7428762">return</span>&nbsp;<span class="ident" id="7428769">r0</span>&nbsp;<span class="op" id="7428772">==</span>&nbsp;<span class="ident" id="7428775">r1</span>&nbsp;<span class="op" id="7428778">&amp;&amp;</span>&nbsp;<span class="ident" id="7428781">g0</span>&nbsp;<span class="op" id="7428784">==</span>&nbsp;<span class="ident" id="7428787">g1</span>&nbsp;<span class="op" id="7428790">&amp;&amp;</span>&nbsp;<span class="ident" id="7428793">b0</span>&nbsp;<span class="op" id="7428796">==</span>&nbsp;<span class="ident" id="7428799">b1</span>&nbsp;<span class="op" id="7428802">&amp;&amp;</span>&nbsp;<span class="ident" id="7428805">a0</span>&nbsp;<span class="op" id="7428808">==</span>&nbsp;<span class="ident" id="7428811">a1</span><br>
<span class="lineno"></span><span class="op" id="7428814">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7428817">func</span>&nbsp;<span class="ident" id="7428822">fillBlue</span><span class="op" id="7428830">(</span><span class="ident" id="7428831">alpha</span>&nbsp;<span class="builtintype" id="7428837">int</span><span class="op" id="7428840">)</span>&nbsp;<span class="ident" id="7428842">image</span><span class="op" id="7428847">.</span><span class="ident" id="7428848">Image</span>&nbsp;<span class="op" id="7428854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7428857">return</span>&nbsp;<span class="ident" id="7428864">image</span><span class="op" id="7428869">.</span><span class="ident" id="7428870">NewUniform</span><span class="op" id="7428880">(</span><span class="ident" id="7428881">color</span><span class="op" id="7428886">.</span><span class="ident" id="7428887">RGBA</span><span class="op" id="7428891">{</span><span class="num" id="7428892">0</span><span class="op" id="7428893">,</span>&nbsp;<span class="num" id="7428895">0</span><span class="op" id="7428896">,</span>&nbsp;<span class="builtintype" id="7428898">uint8</span><span class="op" id="7428903">(</span><span class="ident" id="7428904">alpha</span><span class="op" id="7428909">)</span><span class="op" id="7428910">,</span>&nbsp;<span class="builtintype" id="7428912">uint8</span><span class="op" id="7428917">(</span><span class="ident" id="7428918">alpha</span><span class="op" id="7428923">)</span><span class="op" id="7428924">}</span><span class="op" id="7428925">)</span><br>
<span class="lineno"></span><span class="op" id="7428927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7428930">func</span>&nbsp;<span class="ident" id="7428935">fillAlpha</span><span class="op" id="7428944">(</span><span class="ident" id="7428945">alpha</span>&nbsp;<span class="builtintype" id="7428951">int</span><span class="op" id="7428954">)</span>&nbsp;<span class="ident" id="7428956">image</span><span class="op" id="7428961">.</span><span class="ident" id="7428962">Image</span>&nbsp;<span class="op" id="7428968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7428971">return</span>&nbsp;<span class="ident" id="7428978">image</span><span class="op" id="7428983">.</span><span class="ident" id="7428984">NewUniform</span><span class="op" id="7428994">(</span><span class="ident" id="7428995">color</span><span class="op" id="7429000">.</span><span class="ident" id="7429001">Alpha</span><span class="op" id="7429006">{</span><span class="builtintype" id="7429007">uint8</span><span class="op" id="7429012">(</span><span class="ident" id="7429013">alpha</span><span class="op" id="7429018">)</span><span class="op" id="7429019">}</span><span class="op" id="7429020">)</span><br>
<span class="lineno"></span><span class="op" id="7429022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7429025">func</span>&nbsp;<span class="ident" id="7429030">vgradGreen</span><span class="op" id="7429040">(</span><span class="ident" id="7429041">alpha</span>&nbsp;<span class="builtintype" id="7429047">int</span><span class="op" id="7429050">)</span>&nbsp;<span class="ident" id="7429052">image</span><span class="op" id="7429057">.</span><span class="ident" id="7429058">Image</span>&nbsp;<span class="op" id="7429064">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429067">m</span>&nbsp;<span class="op" id="7429069">:=</span>&nbsp;<span class="ident" id="7429072">image</span><span class="op" id="7429077">.</span><span class="ident" id="7429078">NewRGBA</span><span class="op" id="7429085">(</span><span class="ident" id="7429086">image</span><span class="op" id="7429091">.</span><span class="ident" id="7429092">Rect</span><span class="op" id="7429096">(</span><span class="num" id="7429097">0</span><span class="op" id="7429098">,</span>&nbsp;<span class="num" id="7429100">0</span><span class="op" id="7429101">,</span>&nbsp;<span class="num" id="7429103">16</span><span class="op" id="7429105">,</span>&nbsp;<span class="num" id="7429107">16</span><span class="op" id="7429109">)</span><span class="op" id="7429110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429113">for</span>&nbsp;<span class="ident" id="7429117">y</span>&nbsp;<span class="op" id="7429119">:=</span>&nbsp;<span class="num" id="7429122">0</span><span class="op" id="7429123">;</span>&nbsp;<span class="ident" id="7429125">y</span>&nbsp;<span class="op" id="7429127">&lt;</span>&nbsp;<span class="num" id="7429129">16</span><span class="op" id="7429131">;</span>&nbsp;<span class="ident" id="7429133">y</span><span class="op" id="7429134">++</span>&nbsp;<span class="op" id="7429137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429141">for</span>&nbsp;<span class="ident" id="7429145">x</span>&nbsp;<span class="op" id="7429147">:=</span>&nbsp;<span class="num" id="7429150">0</span><span class="op" id="7429151">;</span>&nbsp;<span class="ident" id="7429153">x</span>&nbsp;<span class="op" id="7429155">&lt;</span>&nbsp;<span class="num" id="7429157">16</span><span class="op" id="7429159">;</span>&nbsp;<span class="ident" id="7429161">x</span><span class="op" id="7429162">++</span>&nbsp;<span class="op" id="7429165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429170">m</span><span class="op" id="7429171">.</span><span class="ident" id="7429172">Set</span><span class="op" id="7429175">(</span><span class="ident" id="7429176">x</span><span class="op" id="7429177">,</span>&nbsp;<span class="ident" id="7429179">y</span><span class="op" id="7429180">,</span>&nbsp;<span class="ident" id="7429182">color</span><span class="op" id="7429187">.</span><span class="ident" id="7429188">RGBA</span><span class="op" id="7429192">{</span><span class="num" id="7429193">0</span><span class="op" id="7429194">,</span>&nbsp;<span class="builtintype" id="7429196">uint8</span><span class="op" id="7429201">(</span><span class="ident" id="7429202">y</span>&nbsp;<span class="op" id="7429204">*</span>&nbsp;<span class="ident" id="7429206">alpha</span>&nbsp;<span class="op" id="7429212">/</span>&nbsp;<span class="num" id="7429214">15</span><span class="op" id="7429216">)</span><span class="op" id="7429217">,</span>&nbsp;<span class="num" id="7429219">0</span><span class="op" id="7429220">,</span>&nbsp;<span class="builtintype" id="7429222">uint8</span><span class="op" id="7429227">(</span><span class="ident" id="7429228">alpha</span><span class="op" id="7429233">)</span><span class="op" id="7429234">}</span><span class="op" id="7429235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429239">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429245">return</span>&nbsp;<span class="ident" id="7429252">m</span><br>
<span class="lineno"></span><span class="op" id="7429254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7429257">func</span>&nbsp;<span class="ident" id="7429262">vgradAlpha</span><span class="op" id="7429272">(</span><span class="ident" id="7429273">alpha</span>&nbsp;<span class="builtintype" id="7429279">int</span><span class="op" id="7429282">)</span>&nbsp;<span class="ident" id="7429284">image</span><span class="op" id="7429289">.</span><span class="ident" id="7429290">Image</span>&nbsp;<span class="op" id="7429296">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429299">m</span>&nbsp;<span class="op" id="7429301">:=</span>&nbsp;<span class="ident" id="7429304">image</span><span class="op" id="7429309">.</span><span class="ident" id="7429310">NewAlpha</span><span class="op" id="7429318">(</span><span class="ident" id="7429319">image</span><span class="op" id="7429324">.</span><span class="ident" id="7429325">Rect</span><span class="op" id="7429329">(</span><span class="num" id="7429330">0</span><span class="op" id="7429331">,</span>&nbsp;<span class="num" id="7429333">0</span><span class="op" id="7429334">,</span>&nbsp;<span class="num" id="7429336">16</span><span class="op" id="7429338">,</span>&nbsp;<span class="num" id="7429340">16</span><span class="op" id="7429342">)</span><span class="op" id="7429343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429346">for</span>&nbsp;<span class="ident" id="7429350">y</span>&nbsp;<span class="op" id="7429352">:=</span>&nbsp;<span class="num" id="7429355">0</span><span class="op" id="7429356">;</span>&nbsp;<span class="ident" id="7429358">y</span>&nbsp;<span class="op" id="7429360">&lt;</span>&nbsp;<span class="num" id="7429362">16</span><span class="op" id="7429364">;</span>&nbsp;<span class="ident" id="7429366">y</span><span class="op" id="7429367">++</span>&nbsp;<span class="op" id="7429370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429374">for</span>&nbsp;<span class="ident" id="7429378">x</span>&nbsp;<span class="op" id="7429380">:=</span>&nbsp;<span class="num" id="7429383">0</span><span class="op" id="7429384">;</span>&nbsp;<span class="ident" id="7429386">x</span>&nbsp;<span class="op" id="7429388">&lt;</span>&nbsp;<span class="num" id="7429390">16</span><span class="op" id="7429392">;</span>&nbsp;<span class="ident" id="7429394">x</span><span class="op" id="7429395">++</span>&nbsp;<span class="op" id="7429398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429403">m</span><span class="op" id="7429404">.</span><span class="ident" id="7429405">Set</span><span class="op" id="7429408">(</span><span class="ident" id="7429409">x</span><span class="op" id="7429410">,</span>&nbsp;<span class="ident" id="7429412">y</span><span class="op" id="7429413">,</span>&nbsp;<span class="ident" id="7429415">color</span><span class="op" id="7429420">.</span><span class="ident" id="7429421">Alpha</span><span class="op" id="7429426">{</span><span class="builtintype" id="7429427">uint8</span><span class="op" id="7429432">(</span><span class="ident" id="7429433">y</span>&nbsp;<span class="op" id="7429435">*</span>&nbsp;<span class="ident" id="7429437">alpha</span>&nbsp;<span class="op" id="7429443">/</span>&nbsp;<span class="num" id="7429445">15</span><span class="op" id="7429447">)</span><span class="op" id="7429448">}</span><span class="op" id="7429449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429453">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429459">return</span>&nbsp;<span class="ident" id="7429466">m</span><br>
<span class="lineno"></span><span class="op" id="7429468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7429471">func</span>&nbsp;<span class="ident" id="7429476">vgradGreenNRGBA</span><span class="op" id="7429491">(</span><span class="ident" id="7429492">alpha</span>&nbsp;<span class="builtintype" id="7429498">int</span><span class="op" id="7429501">)</span>&nbsp;<span class="ident" id="7429503">image</span><span class="op" id="7429508">.</span><span class="ident" id="7429509">Image</span>&nbsp;<span class="op" id="7429515">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429518">m</span>&nbsp;<span class="op" id="7429520">:=</span>&nbsp;<span class="ident" id="7429523">image</span><span class="op" id="7429528">.</span><span class="ident" id="7429529">NewNRGBA</span><span class="op" id="7429537">(</span><span class="ident" id="7429538">image</span><span class="op" id="7429543">.</span><span class="ident" id="7429544">Rect</span><span class="op" id="7429548">(</span><span class="num" id="7429549">0</span><span class="op" id="7429550">,</span>&nbsp;<span class="num" id="7429552">0</span><span class="op" id="7429553">,</span>&nbsp;<span class="num" id="7429555">16</span><span class="op" id="7429557">,</span>&nbsp;<span class="num" id="7429559">16</span><span class="op" id="7429561">)</span><span class="op" id="7429562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429565">for</span>&nbsp;<span class="ident" id="7429569">y</span>&nbsp;<span class="op" id="7429571">:=</span>&nbsp;<span class="num" id="7429574">0</span><span class="op" id="7429575">;</span>&nbsp;<span class="ident" id="7429577">y</span>&nbsp;<span class="op" id="7429579">&lt;</span>&nbsp;<span class="num" id="7429581">16</span><span class="op" id="7429583">;</span>&nbsp;<span class="ident" id="7429585">y</span><span class="op" id="7429586">++</span>&nbsp;<span class="op" id="7429589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429593">for</span>&nbsp;<span class="ident" id="7429597">x</span>&nbsp;<span class="op" id="7429599">:=</span>&nbsp;<span class="num" id="7429602">0</span><span class="op" id="7429603">;</span>&nbsp;<span class="ident" id="7429605">x</span>&nbsp;<span class="op" id="7429607">&lt;</span>&nbsp;<span class="num" id="7429609">16</span><span class="op" id="7429611">;</span>&nbsp;<span class="ident" id="7429613">x</span><span class="op" id="7429614">++</span>&nbsp;<span class="op" id="7429617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429622">m</span><span class="op" id="7429623">.</span><span class="ident" id="7429624">Set</span><span class="op" id="7429627">(</span><span class="ident" id="7429628">x</span><span class="op" id="7429629">,</span>&nbsp;<span class="ident" id="7429631">y</span><span class="op" id="7429632">,</span>&nbsp;<span class="ident" id="7429634">color</span><span class="op" id="7429639">.</span><span class="ident" id="7429640">RGBA</span><span class="op" id="7429644">{</span><span class="num" id="7429645">0</span><span class="op" id="7429646">,</span>&nbsp;<span class="builtintype" id="7429648">uint8</span><span class="op" id="7429653">(</span><span class="ident" id="7429654">y</span>&nbsp;<span class="op" id="7429656">*</span>&nbsp;<span class="num" id="7429658">0x11</span><span class="op" id="7429662">)</span><span class="op" id="7429663">,</span>&nbsp;<span class="num" id="7429665">0</span><span class="op" id="7429666">,</span>&nbsp;<span class="builtintype" id="7429668">uint8</span><span class="op" id="7429673">(</span><span class="ident" id="7429674">alpha</span><span class="op" id="7429679">)</span><span class="op" id="7429680">}</span><span class="op" id="7429681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429685">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7429688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7429691">return</span>&nbsp;<span class="ident" id="7429698">m</span><br>
<span class="lineno"></span><span class="op" id="7429700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7429703">func</span>&nbsp;<span class="ident" id="7429708">vgradCr</span><span class="op" id="7429715">(</span><span class="op" id="7429716">)</span>&nbsp;<span class="ident" id="7429718">image</span><span class="op" id="7429723">.</span><span class="ident" id="7429724">Image</span>&nbsp;<span class="op" id="7429730">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429733">m</span>&nbsp;<span class="op" id="7429735">:=</span>&nbsp;<span class="op" id="7429738">&amp;</span><span class="ident" id="7429739">image</span><span class="op" id="7429744">.</span><span class="ident" id="7429745">YCbCr</span><span class="op" id="7429750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429754">Y</span><span class="op" id="7429755">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7429770">make</span><span class="op" id="7429774">(</span><span class="op" id="7429775">[</span><span class="op" id="7429776">]</span><span class="builtintype" id="7429777">byte</span><span class="op" id="7429781">,</span>&nbsp;<span class="num" id="7429783">16</span><span class="op" id="7429785">*</span><span class="num" id="7429786">16</span><span class="op" id="7429788">)</span><span class="op" id="7429789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429793">Cb</span><span class="op" id="7429795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7429809">make</span><span class="op" id="7429813">(</span><span class="op" id="7429814">[</span><span class="op" id="7429815">]</span><span class="builtintype" id="7429816">byte</span><span class="op" id="7429820">,</span>&nbsp;<span class="num" id="7429822">16</span><span class="op" id="7429824">*</span><span class="num" id="7429825">16</span><span class="op" id="7429827">)</span><span class="op" id="7429828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429832">Cr</span><span class="op" id="7429834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7429848">make</span><span class="op" id="7429852">(</span><span class="op" id="7429853">[</span><span class="op" id="7429854">]</span><span class="builtintype" id="7429855">byte</span><span class="op" id="7429859">,</span>&nbsp;<span class="num" id="7429861">16</span><span class="op" id="7429863">*</span><span class="num" id="7429864">16</span><span class="op" id="7429866">)</span><span class="op" id="7429867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429871">YStride</span><span class="op" id="7429878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7429887">16</span><span class="op" id="7429889">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429893">CStride</span><span class="op" id="7429900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7429909">16</span><span class="op" id="7429911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429915">SubsampleRatio</span><span class="op" id="7429929">:</span>&nbsp;<span class="ident" id="7429931">image</span><span class="op" id="7429936">.</span><span class="ident" id="7429937">YCbCrSubsampleRatio444</span><span class="op" id="7429959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429963">Rect</span><span class="op" id="7429967">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7429979">image</span><span class="op" id="7429984">.</span><span class="ident" id="7429985">Rect</span><span class="op" id="7429989">(</span><span class="num" id="7429990">0</span><span class="op" id="7429991">,</span>&nbsp;<span class="num" id="7429993">0</span><span class="op" id="7429994">,</span>&nbsp;<span class="num" id="7429996">16</span><span class="op" id="7429998">,</span>&nbsp;<span class="num" id="7430000">16</span><span class="op" id="7430002">)</span><span class="op" id="7430003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430009">for</span>&nbsp;<span class="ident" id="7430013">y</span>&nbsp;<span class="op" id="7430015">:=</span>&nbsp;<span class="num" id="7430018">0</span><span class="op" id="7430019">;</span>&nbsp;<span class="ident" id="7430021">y</span>&nbsp;<span class="op" id="7430023">&lt;</span>&nbsp;<span class="num" id="7430025">16</span><span class="op" id="7430027">;</span>&nbsp;<span class="ident" id="7430029">y</span><span class="op" id="7430030">++</span>&nbsp;<span class="op" id="7430033">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430037">for</span>&nbsp;<span class="ident" id="7430041">x</span>&nbsp;<span class="op" id="7430043">:=</span>&nbsp;<span class="num" id="7430046">0</span><span class="op" id="7430047">;</span>&nbsp;<span class="ident" id="7430049">x</span>&nbsp;<span class="op" id="7430051">&lt;</span>&nbsp;<span class="num" id="7430053">16</span><span class="op" id="7430055">;</span>&nbsp;<span class="ident" id="7430057">x</span><span class="op" id="7430058">++</span>&nbsp;<span class="op" id="7430061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430066">m</span><span class="op" id="7430067">.</span><span class="ident" id="7430068">Cr</span><span class="op" id="7430070">[</span><span class="ident" id="7430071">y</span><span class="op" id="7430072">*</span><span class="ident" id="7430073">m</span><span class="op" id="7430074">.</span><span class="ident" id="7430075">CStride</span><span class="op" id="7430082">+</span><span class="ident" id="7430083">x</span><span class="op" id="7430084">]</span>&nbsp;<span class="op" id="7430086">=</span>&nbsp;<span class="builtintype" id="7430088">uint8</span><span class="op" id="7430093">(</span><span class="ident" id="7430094">y</span>&nbsp;<span class="op" id="7430096">*</span>&nbsp;<span class="num" id="7430098">0x11</span><span class="op" id="7430102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430112">return</span>&nbsp;<span class="ident" id="7430119">m</span><br>
<span class="lineno">75</span><span class="op" id="7430121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7430124">func</span>&nbsp;<span class="ident" id="7430129">hgradRed</span><span class="op" id="7430137">(</span><span class="ident" id="7430138">alpha</span>&nbsp;<span class="builtintype" id="7430144">int</span><span class="op" id="7430147">)</span>&nbsp;<span class="ident" id="7430149">Image</span>&nbsp;<span class="op" id="7430155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430158">m</span>&nbsp;<span class="op" id="7430160">:=</span>&nbsp;<span class="ident" id="7430163">image</span><span class="op" id="7430168">.</span><span class="ident" id="7430169">NewRGBA</span><span class="op" id="7430176">(</span><span class="ident" id="7430177">image</span><span class="op" id="7430182">.</span><span class="ident" id="7430183">Rect</span><span class="op" id="7430187">(</span><span class="num" id="7430188">0</span><span class="op" id="7430189">,</span>&nbsp;<span class="num" id="7430191">0</span><span class="op" id="7430192">,</span>&nbsp;<span class="num" id="7430194">16</span><span class="op" id="7430196">,</span>&nbsp;<span class="num" id="7430198">16</span><span class="op" id="7430200">)</span><span class="op" id="7430201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430204">for</span>&nbsp;<span class="ident" id="7430208">y</span>&nbsp;<span class="op" id="7430210">:=</span>&nbsp;<span class="num" id="7430213">0</span><span class="op" id="7430214">;</span>&nbsp;<span class="ident" id="7430216">y</span>&nbsp;<span class="op" id="7430218">&lt;</span>&nbsp;<span class="num" id="7430220">16</span><span class="op" id="7430222">;</span>&nbsp;<span class="ident" id="7430224">y</span><span class="op" id="7430225">++</span>&nbsp;<span class="op" id="7430228">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430232">for</span>&nbsp;<span class="ident" id="7430236">x</span>&nbsp;<span class="op" id="7430238">:=</span>&nbsp;<span class="num" id="7430241">0</span><span class="op" id="7430242">;</span>&nbsp;<span class="ident" id="7430244">x</span>&nbsp;<span class="op" id="7430246">&lt;</span>&nbsp;<span class="num" id="7430248">16</span><span class="op" id="7430250">;</span>&nbsp;<span class="ident" id="7430252">x</span><span class="op" id="7430253">++</span>&nbsp;<span class="op" id="7430256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430261">m</span><span class="op" id="7430262">.</span><span class="ident" id="7430263">Set</span><span class="op" id="7430266">(</span><span class="ident" id="7430267">x</span><span class="op" id="7430268">,</span>&nbsp;<span class="ident" id="7430270">y</span><span class="op" id="7430271">,</span>&nbsp;<span class="ident" id="7430273">color</span><span class="op" id="7430278">.</span><span class="ident" id="7430279">RGBA</span><span class="op" id="7430283">{</span><span class="builtintype" id="7430284">uint8</span><span class="op" id="7430289">(</span><span class="ident" id="7430290">x</span>&nbsp;<span class="op" id="7430292">*</span>&nbsp;<span class="ident" id="7430294">alpha</span>&nbsp;<span class="op" id="7430300">/</span>&nbsp;<span class="num" id="7430302">15</span><span class="op" id="7430304">)</span><span class="op" id="7430305">,</span>&nbsp;<span class="num" id="7430307">0</span><span class="op" id="7430308">,</span>&nbsp;<span class="num" id="7430310">0</span><span class="op" id="7430311">,</span>&nbsp;<span class="builtintype" id="7430313">uint8</span><span class="op" id="7430318">(</span><span class="ident" id="7430319">alpha</span><span class="op" id="7430324">)</span><span class="op" id="7430325">}</span><span class="op" id="7430326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430336">return</span>&nbsp;<span class="ident" id="7430343">m</span><br>
<span class="lineno">85</span><span class="op" id="7430345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7430348">func</span>&nbsp;<span class="ident" id="7430353">gradYellow</span><span class="op" id="7430363">(</span><span class="ident" id="7430364">alpha</span>&nbsp;<span class="builtintype" id="7430370">int</span><span class="op" id="7430373">)</span>&nbsp;<span class="ident" id="7430375">Image</span>&nbsp;<span class="op" id="7430381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430384">m</span>&nbsp;<span class="op" id="7430386">:=</span>&nbsp;<span class="ident" id="7430389">image</span><span class="op" id="7430394">.</span><span class="ident" id="7430395">NewRGBA</span><span class="op" id="7430402">(</span><span class="ident" id="7430403">image</span><span class="op" id="7430408">.</span><span class="ident" id="7430409">Rect</span><span class="op" id="7430413">(</span><span class="num" id="7430414">0</span><span class="op" id="7430415">,</span>&nbsp;<span class="num" id="7430417">0</span><span class="op" id="7430418">,</span>&nbsp;<span class="num" id="7430420">16</span><span class="op" id="7430422">,</span>&nbsp;<span class="num" id="7430424">16</span><span class="op" id="7430426">)</span><span class="op" id="7430427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430430">for</span>&nbsp;<span class="ident" id="7430434">y</span>&nbsp;<span class="op" id="7430436">:=</span>&nbsp;<span class="num" id="7430439">0</span><span class="op" id="7430440">;</span>&nbsp;<span class="ident" id="7430442">y</span>&nbsp;<span class="op" id="7430444">&lt;</span>&nbsp;<span class="num" id="7430446">16</span><span class="op" id="7430448">;</span>&nbsp;<span class="ident" id="7430450">y</span><span class="op" id="7430451">++</span>&nbsp;<span class="op" id="7430454">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430458">for</span>&nbsp;<span class="ident" id="7430462">x</span>&nbsp;<span class="op" id="7430464">:=</span>&nbsp;<span class="num" id="7430467">0</span><span class="op" id="7430468">;</span>&nbsp;<span class="ident" id="7430470">x</span>&nbsp;<span class="op" id="7430472">&lt;</span>&nbsp;<span class="num" id="7430474">16</span><span class="op" id="7430476">;</span>&nbsp;<span class="ident" id="7430478">x</span><span class="op" id="7430479">++</span>&nbsp;<span class="op" id="7430482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430487">m</span><span class="op" id="7430488">.</span><span class="ident" id="7430489">Set</span><span class="op" id="7430492">(</span><span class="ident" id="7430493">x</span><span class="op" id="7430494">,</span>&nbsp;<span class="ident" id="7430496">y</span><span class="op" id="7430497">,</span>&nbsp;<span class="ident" id="7430499">color</span><span class="op" id="7430504">.</span><span class="ident" id="7430505">RGBA</span><span class="op" id="7430509">{</span><span class="builtintype" id="7430510">uint8</span><span class="op" id="7430515">(</span><span class="ident" id="7430516">x</span>&nbsp;<span class="op" id="7430518">*</span>&nbsp;<span class="ident" id="7430520">alpha</span>&nbsp;<span class="op" id="7430526">/</span>&nbsp;<span class="num" id="7430528">15</span><span class="op" id="7430530">)</span><span class="op" id="7430531">,</span>&nbsp;<span class="builtintype" id="7430533">uint8</span><span class="op" id="7430538">(</span><span class="ident" id="7430539">y</span>&nbsp;<span class="op" id="7430541">*</span>&nbsp;<span class="ident" id="7430543">alpha</span>&nbsp;<span class="op" id="7430549">/</span>&nbsp;<span class="num" id="7430551">15</span><span class="op" id="7430553">)</span><span class="op" id="7430554">,</span>&nbsp;<span class="num" id="7430556">0</span><span class="op" id="7430557">,</span>&nbsp;<span class="builtintype" id="7430559">uint8</span><span class="op" id="7430564">(</span><span class="ident" id="7430565">alpha</span><span class="op" id="7430570">)</span><span class="op" id="7430571">}</span><span class="op" id="7430572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7430582">return</span>&nbsp;<span class="ident" id="7430589">m</span><br>
<span class="lineno">95</span><span class="op" id="7430591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7430594">type</span>&nbsp;<span class="ident" id="7430599">drawTest</span>&nbsp;<span class="keyword" id="7430608">struct</span>&nbsp;<span class="op" id="7430615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430618">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7430627">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430635">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430644">image</span><span class="op" id="7430649">.</span><span class="ident" id="7430650">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430657">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430666">image</span><span class="op" id="7430671">.</span><span class="ident" id="7430672">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430679">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430688">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7430692">expected</span>&nbsp;<span class="ident" id="7430701">color</span><span class="op" id="7430706">.</span><span class="ident" id="7430707">Color</span><br>
<span class="lineno"></span><span class="op" id="7430713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7430716">var</span>&nbsp;<span class="ident" id="7430720">drawTests</span>&nbsp;<span class="op" id="7430730">=</span>&nbsp;<span class="op" id="7430732">[</span><span class="op" id="7430733">]</span><span class="ident" id="7430734">drawTest</span><span class="op" id="7430742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7430745">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430775">{</span><span class="string" id="7430776">&#34;nop&#34;</span><span class="op" id="7430781">,</span>&nbsp;<span class="ident" id="7430783">vgradGreen</span><span class="op" id="7430793">(</span><span class="num" id="7430794">255</span><span class="op" id="7430797">)</span><span class="op" id="7430798">,</span>&nbsp;<span class="ident" id="7430800">fillAlpha</span><span class="op" id="7430809">(</span><span class="num" id="7430810">0</span><span class="op" id="7430811">)</span><span class="op" id="7430812">,</span>&nbsp;<span class="ident" id="7430814">Over</span><span class="op" id="7430818">,</span>&nbsp;<span class="ident" id="7430820">color</span><span class="op" id="7430825">.</span><span class="ident" id="7430826">RGBA</span><span class="op" id="7430830">{</span><span class="num" id="7430831">136</span><span class="op" id="7430834">,</span>&nbsp;<span class="num" id="7430836">0</span><span class="op" id="7430837">,</span>&nbsp;<span class="num" id="7430839">0</span><span class="op" id="7430840">,</span>&nbsp;<span class="num" id="7430842">255</span><span class="op" id="7430845">}</span><span class="op" id="7430846">}</span><span class="op" id="7430847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7430850">{</span><span class="string" id="7430851">&#34;clear&#34;</span><span class="op" id="7430858">,</span>&nbsp;<span class="ident" id="7430860">vgradGreen</span><span class="op" id="7430870">(</span><span class="num" id="7430871">255</span><span class="op" id="7430874">)</span><span class="op" id="7430875">,</span>&nbsp;<span class="ident" id="7430877">fillAlpha</span><span class="op" id="7430886">(</span><span class="num" id="7430887">0</span><span class="op" id="7430888">)</span><span class="op" id="7430889">,</span>&nbsp;<span class="ident" id="7430891">Src</span><span class="op" id="7430894">,</span>&nbsp;<span class="ident" id="7430896">color</span><span class="op" id="7430901">.</span><span class="ident" id="7430902">RGBA</span><span class="op" id="7430906">{</span><span class="num" id="7430907">0</span><span class="op" id="7430908">,</span>&nbsp;<span class="num" id="7430910">0</span><span class="op" id="7430911">,</span>&nbsp;<span class="num" id="7430913">0</span><span class="op" id="7430914">,</span>&nbsp;<span class="num" id="7430916">0</span><span class="op" id="7430917">}</span><span class="op" id="7430918">}</span><span class="op" id="7430919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7430922">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7430976">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431001">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431048">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431088">{</span><span class="string" id="7431089">&#34;fill&#34;</span><span class="op" id="7431095">,</span>&nbsp;<span class="ident" id="7431097">fillBlue</span><span class="op" id="7431105">(</span><span class="num" id="7431106">90</span><span class="op" id="7431108">)</span><span class="op" id="7431109">,</span>&nbsp;<span class="ident" id="7431111">fillAlpha</span><span class="op" id="7431120">(</span><span class="num" id="7431121">255</span><span class="op" id="7431124">)</span><span class="op" id="7431125">,</span>&nbsp;<span class="ident" id="7431127">Over</span><span class="op" id="7431131">,</span>&nbsp;<span class="ident" id="7431133">color</span><span class="op" id="7431138">.</span><span class="ident" id="7431139">RGBA</span><span class="op" id="7431143">{</span><span class="num" id="7431144">88</span><span class="op" id="7431146">,</span>&nbsp;<span class="num" id="7431148">0</span><span class="op" id="7431149">,</span>&nbsp;<span class="num" id="7431151">90</span><span class="op" id="7431153">,</span>&nbsp;<span class="num" id="7431155">255</span><span class="op" id="7431158">}</span><span class="op" id="7431159">}</span><span class="op" id="7431160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431163">{</span><span class="string" id="7431164">&#34;fillSrc&#34;</span><span class="op" id="7431173">,</span>&nbsp;<span class="ident" id="7431175">fillBlue</span><span class="op" id="7431183">(</span><span class="num" id="7431184">90</span><span class="op" id="7431186">)</span><span class="op" id="7431187">,</span>&nbsp;<span class="ident" id="7431189">fillAlpha</span><span class="op" id="7431198">(</span><span class="num" id="7431199">255</span><span class="op" id="7431202">)</span><span class="op" id="7431203">,</span>&nbsp;<span class="ident" id="7431205">Src</span><span class="op" id="7431208">,</span>&nbsp;<span class="ident" id="7431210">color</span><span class="op" id="7431215">.</span><span class="ident" id="7431216">RGBA</span><span class="op" id="7431220">{</span><span class="num" id="7431221">0</span><span class="op" id="7431222">,</span>&nbsp;<span class="num" id="7431224">0</span><span class="op" id="7431225">,</span>&nbsp;<span class="num" id="7431227">90</span><span class="op" id="7431229">,</span>&nbsp;<span class="num" id="7431231">90</span><span class="op" id="7431233">}</span><span class="op" id="7431234">}</span><span class="op" id="7431235">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431238">{</span><span class="string" id="7431239">&#34;fillAlpha&#34;</span><span class="op" id="7431250">,</span>&nbsp;<span class="ident" id="7431252">fillBlue</span><span class="op" id="7431260">(</span><span class="num" id="7431261">90</span><span class="op" id="7431263">)</span><span class="op" id="7431264">,</span>&nbsp;<span class="ident" id="7431266">fillAlpha</span><span class="op" id="7431275">(</span><span class="num" id="7431276">192</span><span class="op" id="7431279">)</span><span class="op" id="7431280">,</span>&nbsp;<span class="ident" id="7431282">Over</span><span class="op" id="7431286">,</span>&nbsp;<span class="ident" id="7431288">color</span><span class="op" id="7431293">.</span><span class="ident" id="7431294">RGBA</span><span class="op" id="7431298">{</span><span class="num" id="7431299">100</span><span class="op" id="7431302">,</span>&nbsp;<span class="num" id="7431304">0</span><span class="op" id="7431305">,</span>&nbsp;<span class="num" id="7431307">68</span><span class="op" id="7431309">,</span>&nbsp;<span class="num" id="7431311">255</span><span class="op" id="7431314">}</span><span class="op" id="7431315">}</span><span class="op" id="7431316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431319">{</span><span class="string" id="7431320">&#34;fillAlphaSrc&#34;</span><span class="op" id="7431334">,</span>&nbsp;<span class="ident" id="7431336">fillBlue</span><span class="op" id="7431344">(</span><span class="num" id="7431345">90</span><span class="op" id="7431347">)</span><span class="op" id="7431348">,</span>&nbsp;<span class="ident" id="7431350">fillAlpha</span><span class="op" id="7431359">(</span><span class="num" id="7431360">192</span><span class="op" id="7431363">)</span><span class="op" id="7431364">,</span>&nbsp;<span class="ident" id="7431366">Src</span><span class="op" id="7431369">,</span>&nbsp;<span class="ident" id="7431371">color</span><span class="op" id="7431376">.</span><span class="ident" id="7431377">RGBA</span><span class="op" id="7431381">{</span><span class="num" id="7431382">0</span><span class="op" id="7431383">,</span>&nbsp;<span class="num" id="7431385">0</span><span class="op" id="7431386">,</span>&nbsp;<span class="num" id="7431388">68</span><span class="op" id="7431390">,</span>&nbsp;<span class="num" id="7431392">68</span><span class="op" id="7431394">}</span><span class="op" id="7431395">}</span><span class="op" id="7431396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431399">{</span><span class="string" id="7431400">&#34;fillNil&#34;</span><span class="op" id="7431409">,</span>&nbsp;<span class="ident" id="7431411">fillBlue</span><span class="op" id="7431419">(</span><span class="num" id="7431420">90</span><span class="op" id="7431422">)</span><span class="op" id="7431423">,</span>&nbsp;<span class="ident" id="7431425">nil</span><span class="op" id="7431428">,</span>&nbsp;<span class="ident" id="7431430">Over</span><span class="op" id="7431434">,</span>&nbsp;<span class="ident" id="7431436">color</span><span class="op" id="7431441">.</span><span class="ident" id="7431442">RGBA</span><span class="op" id="7431446">{</span><span class="num" id="7431447">88</span><span class="op" id="7431449">,</span>&nbsp;<span class="num" id="7431451">0</span><span class="op" id="7431452">,</span>&nbsp;<span class="num" id="7431454">90</span><span class="op" id="7431456">,</span>&nbsp;<span class="num" id="7431458">255</span><span class="op" id="7431461">}</span><span class="op" id="7431462">}</span><span class="op" id="7431463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431466">{</span><span class="string" id="7431467">&#34;fillNilSrc&#34;</span><span class="op" id="7431479">,</span>&nbsp;<span class="ident" id="7431481">fillBlue</span><span class="op" id="7431489">(</span><span class="num" id="7431490">90</span><span class="op" id="7431492">)</span><span class="op" id="7431493">,</span>&nbsp;<span class="ident" id="7431495">nil</span><span class="op" id="7431498">,</span>&nbsp;<span class="ident" id="7431500">Src</span><span class="op" id="7431503">,</span>&nbsp;<span class="ident" id="7431505">color</span><span class="op" id="7431510">.</span><span class="ident" id="7431511">RGBA</span><span class="op" id="7431515">{</span><span class="num" id="7431516">0</span><span class="op" id="7431517">,</span>&nbsp;<span class="num" id="7431519">0</span><span class="op" id="7431520">,</span>&nbsp;<span class="num" id="7431522">90</span><span class="op" id="7431524">,</span>&nbsp;<span class="num" id="7431526">90</span><span class="op" id="7431528">}</span><span class="op" id="7431529">}</span><span class="op" id="7431530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431533">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431588">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431613">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7431660">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431700">{</span><span class="string" id="7431701">&#34;copy&#34;</span><span class="op" id="7431707">,</span>&nbsp;<span class="ident" id="7431709">vgradGreen</span><span class="op" id="7431719">(</span><span class="num" id="7431720">90</span><span class="op" id="7431722">)</span><span class="op" id="7431723">,</span>&nbsp;<span class="ident" id="7431725">fillAlpha</span><span class="op" id="7431734">(</span><span class="num" id="7431735">255</span><span class="op" id="7431738">)</span><span class="op" id="7431739">,</span>&nbsp;<span class="ident" id="7431741">Over</span><span class="op" id="7431745">,</span>&nbsp;<span class="ident" id="7431747">color</span><span class="op" id="7431752">.</span><span class="ident" id="7431753">RGBA</span><span class="op" id="7431757">{</span><span class="num" id="7431758">88</span><span class="op" id="7431760">,</span>&nbsp;<span class="num" id="7431762">48</span><span class="op" id="7431764">,</span>&nbsp;<span class="num" id="7431766">0</span><span class="op" id="7431767">,</span>&nbsp;<span class="num" id="7431769">255</span><span class="op" id="7431772">}</span><span class="op" id="7431773">}</span><span class="op" id="7431774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431777">{</span><span class="string" id="7431778">&#34;copySrc&#34;</span><span class="op" id="7431787">,</span>&nbsp;<span class="ident" id="7431789">vgradGreen</span><span class="op" id="7431799">(</span><span class="num" id="7431800">90</span><span class="op" id="7431802">)</span><span class="op" id="7431803">,</span>&nbsp;<span class="ident" id="7431805">fillAlpha</span><span class="op" id="7431814">(</span><span class="num" id="7431815">255</span><span class="op" id="7431818">)</span><span class="op" id="7431819">,</span>&nbsp;<span class="ident" id="7431821">Src</span><span class="op" id="7431824">,</span>&nbsp;<span class="ident" id="7431826">color</span><span class="op" id="7431831">.</span><span class="ident" id="7431832">RGBA</span><span class="op" id="7431836">{</span><span class="num" id="7431837">0</span><span class="op" id="7431838">,</span>&nbsp;<span class="num" id="7431840">48</span><span class="op" id="7431842">,</span>&nbsp;<span class="num" id="7431844">0</span><span class="op" id="7431845">,</span>&nbsp;<span class="num" id="7431847">90</span><span class="op" id="7431849">}</span><span class="op" id="7431850">}</span><span class="op" id="7431851">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431854">{</span><span class="string" id="7431855">&#34;copyAlpha&#34;</span><span class="op" id="7431866">,</span>&nbsp;<span class="ident" id="7431868">vgradGreen</span><span class="op" id="7431878">(</span><span class="num" id="7431879">90</span><span class="op" id="7431881">)</span><span class="op" id="7431882">,</span>&nbsp;<span class="ident" id="7431884">fillAlpha</span><span class="op" id="7431893">(</span><span class="num" id="7431894">192</span><span class="op" id="7431897">)</span><span class="op" id="7431898">,</span>&nbsp;<span class="ident" id="7431900">Over</span><span class="op" id="7431904">,</span>&nbsp;<span class="ident" id="7431906">color</span><span class="op" id="7431911">.</span><span class="ident" id="7431912">RGBA</span><span class="op" id="7431916">{</span><span class="num" id="7431917">100</span><span class="op" id="7431920">,</span>&nbsp;<span class="num" id="7431922">36</span><span class="op" id="7431924">,</span>&nbsp;<span class="num" id="7431926">0</span><span class="op" id="7431927">,</span>&nbsp;<span class="num" id="7431929">255</span><span class="op" id="7431932">}</span><span class="op" id="7431933">}</span><span class="op" id="7431934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7431937">{</span><span class="string" id="7431938">&#34;copyAlphaSrc&#34;</span><span class="op" id="7431952">,</span>&nbsp;<span class="ident" id="7431954">vgradGreen</span><span class="op" id="7431964">(</span><span class="num" id="7431965">90</span><span class="op" id="7431967">)</span><span class="op" id="7431968">,</span>&nbsp;<span class="ident" id="7431970">fillAlpha</span><span class="op" id="7431979">(</span><span class="num" id="7431980">192</span><span class="op" id="7431983">)</span><span class="op" id="7431984">,</span>&nbsp;<span class="ident" id="7431986">Src</span><span class="op" id="7431989">,</span>&nbsp;<span class="ident" id="7431991">color</span><span class="op" id="7431996">.</span><span class="ident" id="7431997">RGBA</span><span class="op" id="7432001">{</span><span class="num" id="7432002">0</span><span class="op" id="7432003">,</span>&nbsp;<span class="num" id="7432005">36</span><span class="op" id="7432007">,</span>&nbsp;<span class="num" id="7432009">0</span><span class="op" id="7432010">,</span>&nbsp;<span class="num" id="7432012">68</span><span class="op" id="7432014">}</span><span class="op" id="7432015">}</span><span class="op" id="7432016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432019">{</span><span class="string" id="7432020">&#34;copyNil&#34;</span><span class="op" id="7432029">,</span>&nbsp;<span class="ident" id="7432031">vgradGreen</span><span class="op" id="7432041">(</span><span class="num" id="7432042">90</span><span class="op" id="7432044">)</span><span class="op" id="7432045">,</span>&nbsp;<span class="ident" id="7432047">nil</span><span class="op" id="7432050">,</span>&nbsp;<span class="ident" id="7432052">Over</span><span class="op" id="7432056">,</span>&nbsp;<span class="ident" id="7432058">color</span><span class="op" id="7432063">.</span><span class="ident" id="7432064">RGBA</span><span class="op" id="7432068">{</span><span class="num" id="7432069">88</span><span class="op" id="7432071">,</span>&nbsp;<span class="num" id="7432073">48</span><span class="op" id="7432075">,</span>&nbsp;<span class="num" id="7432077">0</span><span class="op" id="7432078">,</span>&nbsp;<span class="num" id="7432080">255</span><span class="op" id="7432083">}</span><span class="op" id="7432084">}</span><span class="op" id="7432085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432088">{</span><span class="string" id="7432089">&#34;copyNilSrc&#34;</span><span class="op" id="7432101">,</span>&nbsp;<span class="ident" id="7432103">vgradGreen</span><span class="op" id="7432113">(</span><span class="num" id="7432114">90</span><span class="op" id="7432116">)</span><span class="op" id="7432117">,</span>&nbsp;<span class="ident" id="7432119">nil</span><span class="op" id="7432122">,</span>&nbsp;<span class="ident" id="7432124">Src</span><span class="op" id="7432127">,</span>&nbsp;<span class="ident" id="7432129">color</span><span class="op" id="7432134">.</span><span class="ident" id="7432135">RGBA</span><span class="op" id="7432139">{</span><span class="num" id="7432140">0</span><span class="op" id="7432141">,</span>&nbsp;<span class="num" id="7432143">48</span><span class="op" id="7432145">,</span>&nbsp;<span class="num" id="7432147">0</span><span class="op" id="7432148">,</span>&nbsp;<span class="num" id="7432150">90</span><span class="op" id="7432152">}</span><span class="op" id="7432153">}</span><span class="op" id="7432154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432157">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432218">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432243">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432290">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432385">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432478">{</span><span class="string" id="7432479">&#34;nrgba&#34;</span><span class="op" id="7432486">,</span>&nbsp;<span class="ident" id="7432488">vgradGreenNRGBA</span><span class="op" id="7432503">(</span><span class="num" id="7432504">90</span><span class="op" id="7432506">)</span><span class="op" id="7432507">,</span>&nbsp;<span class="ident" id="7432509">fillAlpha</span><span class="op" id="7432518">(</span><span class="num" id="7432519">255</span><span class="op" id="7432522">)</span><span class="op" id="7432523">,</span>&nbsp;<span class="ident" id="7432525">Over</span><span class="op" id="7432529">,</span>&nbsp;<span class="ident" id="7432531">color</span><span class="op" id="7432536">.</span><span class="ident" id="7432537">RGBA</span><span class="op" id="7432541">{</span><span class="num" id="7432542">88</span><span class="op" id="7432544">,</span>&nbsp;<span class="num" id="7432546">46</span><span class="op" id="7432548">,</span>&nbsp;<span class="num" id="7432550">0</span><span class="op" id="7432551">,</span>&nbsp;<span class="num" id="7432553">255</span><span class="op" id="7432556">}</span><span class="op" id="7432557">}</span><span class="op" id="7432558">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432561">{</span><span class="string" id="7432562">&#34;nrgbaSrc&#34;</span><span class="op" id="7432572">,</span>&nbsp;<span class="ident" id="7432574">vgradGreenNRGBA</span><span class="op" id="7432589">(</span><span class="num" id="7432590">90</span><span class="op" id="7432592">)</span><span class="op" id="7432593">,</span>&nbsp;<span class="ident" id="7432595">fillAlpha</span><span class="op" id="7432604">(</span><span class="num" id="7432605">255</span><span class="op" id="7432608">)</span><span class="op" id="7432609">,</span>&nbsp;<span class="ident" id="7432611">Src</span><span class="op" id="7432614">,</span>&nbsp;<span class="ident" id="7432616">color</span><span class="op" id="7432621">.</span><span class="ident" id="7432622">RGBA</span><span class="op" id="7432626">{</span><span class="num" id="7432627">0</span><span class="op" id="7432628">,</span>&nbsp;<span class="num" id="7432630">46</span><span class="op" id="7432632">,</span>&nbsp;<span class="num" id="7432634">0</span><span class="op" id="7432635">,</span>&nbsp;<span class="num" id="7432637">90</span><span class="op" id="7432639">}</span><span class="op" id="7432640">}</span><span class="op" id="7432641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432644">{</span><span class="string" id="7432645">&#34;nrgbaAlpha&#34;</span><span class="op" id="7432657">,</span>&nbsp;<span class="ident" id="7432659">vgradGreenNRGBA</span><span class="op" id="7432674">(</span><span class="num" id="7432675">90</span><span class="op" id="7432677">)</span><span class="op" id="7432678">,</span>&nbsp;<span class="ident" id="7432680">fillAlpha</span><span class="op" id="7432689">(</span><span class="num" id="7432690">192</span><span class="op" id="7432693">)</span><span class="op" id="7432694">,</span>&nbsp;<span class="ident" id="7432696">Over</span><span class="op" id="7432700">,</span>&nbsp;<span class="ident" id="7432702">color</span><span class="op" id="7432707">.</span><span class="ident" id="7432708">RGBA</span><span class="op" id="7432712">{</span><span class="num" id="7432713">100</span><span class="op" id="7432716">,</span>&nbsp;<span class="num" id="7432718">34</span><span class="op" id="7432720">,</span>&nbsp;<span class="num" id="7432722">0</span><span class="op" id="7432723">,</span>&nbsp;<span class="num" id="7432725">255</span><span class="op" id="7432728">}</span><span class="op" id="7432729">}</span><span class="op" id="7432730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432733">{</span><span class="string" id="7432734">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="7432749">,</span>&nbsp;<span class="ident" id="7432751">vgradGreenNRGBA</span><span class="op" id="7432766">(</span><span class="num" id="7432767">90</span><span class="op" id="7432769">)</span><span class="op" id="7432770">,</span>&nbsp;<span class="ident" id="7432772">fillAlpha</span><span class="op" id="7432781">(</span><span class="num" id="7432782">192</span><span class="op" id="7432785">)</span><span class="op" id="7432786">,</span>&nbsp;<span class="ident" id="7432788">Src</span><span class="op" id="7432791">,</span>&nbsp;<span class="ident" id="7432793">color</span><span class="op" id="7432798">.</span><span class="ident" id="7432799">RGBA</span><span class="op" id="7432803">{</span><span class="num" id="7432804">0</span><span class="op" id="7432805">,</span>&nbsp;<span class="num" id="7432807">34</span><span class="op" id="7432809">,</span>&nbsp;<span class="num" id="7432811">0</span><span class="op" id="7432812">,</span>&nbsp;<span class="num" id="7432814">68</span><span class="op" id="7432816">}</span><span class="op" id="7432817">}</span><span class="op" id="7432818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432821">{</span><span class="string" id="7432822">&#34;nrgbaNil&#34;</span><span class="op" id="7432832">,</span>&nbsp;<span class="ident" id="7432834">vgradGreenNRGBA</span><span class="op" id="7432849">(</span><span class="num" id="7432850">90</span><span class="op" id="7432852">)</span><span class="op" id="7432853">,</span>&nbsp;<span class="ident" id="7432855">nil</span><span class="op" id="7432858">,</span>&nbsp;<span class="ident" id="7432860">Over</span><span class="op" id="7432864">,</span>&nbsp;<span class="ident" id="7432866">color</span><span class="op" id="7432871">.</span><span class="ident" id="7432872">RGBA</span><span class="op" id="7432876">{</span><span class="num" id="7432877">88</span><span class="op" id="7432879">,</span>&nbsp;<span class="num" id="7432881">46</span><span class="op" id="7432883">,</span>&nbsp;<span class="num" id="7432885">0</span><span class="op" id="7432886">,</span>&nbsp;<span class="num" id="7432888">255</span><span class="op" id="7432891">}</span><span class="op" id="7432892">}</span><span class="op" id="7432893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7432896">{</span><span class="string" id="7432897">&#34;nrgbaNilSrc&#34;</span><span class="op" id="7432910">,</span>&nbsp;<span class="ident" id="7432912">vgradGreenNRGBA</span><span class="op" id="7432927">(</span><span class="num" id="7432928">90</span><span class="op" id="7432930">)</span><span class="op" id="7432931">,</span>&nbsp;<span class="ident" id="7432933">nil</span><span class="op" id="7432936">,</span>&nbsp;<span class="ident" id="7432938">Src</span><span class="op" id="7432941">,</span>&nbsp;<span class="ident" id="7432943">color</span><span class="op" id="7432948">.</span><span class="ident" id="7432949">RGBA</span><span class="op" id="7432953">{</span><span class="num" id="7432954">0</span><span class="op" id="7432955">,</span>&nbsp;<span class="num" id="7432957">46</span><span class="op" id="7432959">,</span>&nbsp;<span class="num" id="7432961">0</span><span class="op" id="7432962">,</span>&nbsp;<span class="num" id="7432964">90</span><span class="op" id="7432966">}</span><span class="op" id="7432967">}</span><span class="op" id="7432968">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7432971">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433032">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433057">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433104">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433196">{</span><span class="string" id="7433197">&#34;ycbcr&#34;</span><span class="op" id="7433204">,</span>&nbsp;<span class="ident" id="7433206">vgradCr</span><span class="op" id="7433213">(</span><span class="op" id="7433214">)</span><span class="op" id="7433215">,</span>&nbsp;<span class="ident" id="7433217">fillAlpha</span><span class="op" id="7433226">(</span><span class="num" id="7433227">255</span><span class="op" id="7433230">)</span><span class="op" id="7433231">,</span>&nbsp;<span class="ident" id="7433233">Over</span><span class="op" id="7433237">,</span>&nbsp;<span class="ident" id="7433239">color</span><span class="op" id="7433244">.</span><span class="ident" id="7433245">RGBA</span><span class="op" id="7433249">{</span><span class="num" id="7433250">11</span><span class="op" id="7433252">,</span>&nbsp;<span class="num" id="7433254">38</span><span class="op" id="7433256">,</span>&nbsp;<span class="num" id="7433258">0</span><span class="op" id="7433259">,</span>&nbsp;<span class="num" id="7433261">255</span><span class="op" id="7433264">}</span><span class="op" id="7433265">}</span><span class="op" id="7433266">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433269">{</span><span class="string" id="7433270">&#34;ycbcrSrc&#34;</span><span class="op" id="7433280">,</span>&nbsp;<span class="ident" id="7433282">vgradCr</span><span class="op" id="7433289">(</span><span class="op" id="7433290">)</span><span class="op" id="7433291">,</span>&nbsp;<span class="ident" id="7433293">fillAlpha</span><span class="op" id="7433302">(</span><span class="num" id="7433303">255</span><span class="op" id="7433306">)</span><span class="op" id="7433307">,</span>&nbsp;<span class="ident" id="7433309">Src</span><span class="op" id="7433312">,</span>&nbsp;<span class="ident" id="7433314">color</span><span class="op" id="7433319">.</span><span class="ident" id="7433320">RGBA</span><span class="op" id="7433324">{</span><span class="num" id="7433325">11</span><span class="op" id="7433327">,</span>&nbsp;<span class="num" id="7433329">38</span><span class="op" id="7433331">,</span>&nbsp;<span class="num" id="7433333">0</span><span class="op" id="7433334">,</span>&nbsp;<span class="num" id="7433336">255</span><span class="op" id="7433339">}</span><span class="op" id="7433340">}</span><span class="op" id="7433341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433344">{</span><span class="string" id="7433345">&#34;ycbcrAlpha&#34;</span><span class="op" id="7433357">,</span>&nbsp;<span class="ident" id="7433359">vgradCr</span><span class="op" id="7433366">(</span><span class="op" id="7433367">)</span><span class="op" id="7433368">,</span>&nbsp;<span class="ident" id="7433370">fillAlpha</span><span class="op" id="7433379">(</span><span class="num" id="7433380">192</span><span class="op" id="7433383">)</span><span class="op" id="7433384">,</span>&nbsp;<span class="ident" id="7433386">Over</span><span class="op" id="7433390">,</span>&nbsp;<span class="ident" id="7433392">color</span><span class="op" id="7433397">.</span><span class="ident" id="7433398">RGBA</span><span class="op" id="7433402">{</span><span class="num" id="7433403">42</span><span class="op" id="7433405">,</span>&nbsp;<span class="num" id="7433407">28</span><span class="op" id="7433409">,</span>&nbsp;<span class="num" id="7433411">0</span><span class="op" id="7433412">,</span>&nbsp;<span class="num" id="7433414">255</span><span class="op" id="7433417">}</span><span class="op" id="7433418">}</span><span class="op" id="7433419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433422">{</span><span class="string" id="7433423">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="7433438">,</span>&nbsp;<span class="ident" id="7433440">vgradCr</span><span class="op" id="7433447">(</span><span class="op" id="7433448">)</span><span class="op" id="7433449">,</span>&nbsp;<span class="ident" id="7433451">fillAlpha</span><span class="op" id="7433460">(</span><span class="num" id="7433461">192</span><span class="op" id="7433464">)</span><span class="op" id="7433465">,</span>&nbsp;<span class="ident" id="7433467">Src</span><span class="op" id="7433470">,</span>&nbsp;<span class="ident" id="7433472">color</span><span class="op" id="7433477">.</span><span class="ident" id="7433478">RGBA</span><span class="op" id="7433482">{</span><span class="num" id="7433483">8</span><span class="op" id="7433484">,</span>&nbsp;<span class="num" id="7433486">28</span><span class="op" id="7433488">,</span>&nbsp;<span class="num" id="7433490">0</span><span class="op" id="7433491">,</span>&nbsp;<span class="num" id="7433493">192</span><span class="op" id="7433496">}</span><span class="op" id="7433497">}</span><span class="op" id="7433498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433501">{</span><span class="string" id="7433502">&#34;ycbcrNil&#34;</span><span class="op" id="7433512">,</span>&nbsp;<span class="ident" id="7433514">vgradCr</span><span class="op" id="7433521">(</span><span class="op" id="7433522">)</span><span class="op" id="7433523">,</span>&nbsp;<span class="ident" id="7433525">nil</span><span class="op" id="7433528">,</span>&nbsp;<span class="ident" id="7433530">Over</span><span class="op" id="7433534">,</span>&nbsp;<span class="ident" id="7433536">color</span><span class="op" id="7433541">.</span><span class="ident" id="7433542">RGBA</span><span class="op" id="7433546">{</span><span class="num" id="7433547">11</span><span class="op" id="7433549">,</span>&nbsp;<span class="num" id="7433551">38</span><span class="op" id="7433553">,</span>&nbsp;<span class="num" id="7433555">0</span><span class="op" id="7433556">,</span>&nbsp;<span class="num" id="7433558">255</span><span class="op" id="7433561">}</span><span class="op" id="7433562">}</span><span class="op" id="7433563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433566">{</span><span class="string" id="7433567">&#34;ycbcrNilSrc&#34;</span><span class="op" id="7433580">,</span>&nbsp;<span class="ident" id="7433582">vgradCr</span><span class="op" id="7433589">(</span><span class="op" id="7433590">)</span><span class="op" id="7433591">,</span>&nbsp;<span class="ident" id="7433593">nil</span><span class="op" id="7433596">,</span>&nbsp;<span class="ident" id="7433598">Src</span><span class="op" id="7433601">,</span>&nbsp;<span class="ident" id="7433603">color</span><span class="op" id="7433608">.</span><span class="ident" id="7433609">RGBA</span><span class="op" id="7433613">{</span><span class="num" id="7433614">11</span><span class="op" id="7433616">,</span>&nbsp;<span class="num" id="7433618">38</span><span class="op" id="7433620">,</span>&nbsp;<span class="num" id="7433622">0</span><span class="op" id="7433623">,</span>&nbsp;<span class="num" id="7433625">255</span><span class="op" id="7433628">}</span><span class="op" id="7433629">}</span><span class="op" id="7433630">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433633">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433672">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433697">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433744">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7433786">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433829">{</span><span class="string" id="7433830">&#34;generic&#34;</span><span class="op" id="7433839">,</span>&nbsp;<span class="ident" id="7433841">fillBlue</span><span class="op" id="7433849">(</span><span class="num" id="7433850">255</span><span class="op" id="7433853">)</span><span class="op" id="7433854">,</span>&nbsp;<span class="ident" id="7433856">vgradAlpha</span><span class="op" id="7433866">(</span><span class="num" id="7433867">192</span><span class="op" id="7433870">)</span><span class="op" id="7433871">,</span>&nbsp;<span class="ident" id="7433873">Over</span><span class="op" id="7433877">,</span>&nbsp;<span class="ident" id="7433879">color</span><span class="op" id="7433884">.</span><span class="ident" id="7433885">RGBA</span><span class="op" id="7433889">{</span><span class="num" id="7433890">81</span><span class="op" id="7433892">,</span>&nbsp;<span class="num" id="7433894">0</span><span class="op" id="7433895">,</span>&nbsp;<span class="num" id="7433897">102</span><span class="op" id="7433900">,</span>&nbsp;<span class="num" id="7433902">255</span><span class="op" id="7433905">}</span><span class="op" id="7433906">}</span><span class="op" id="7433907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7433910">{</span><span class="string" id="7433911">&#34;genericSrc&#34;</span><span class="op" id="7433923">,</span>&nbsp;<span class="ident" id="7433925">fillBlue</span><span class="op" id="7433933">(</span><span class="num" id="7433934">255</span><span class="op" id="7433937">)</span><span class="op" id="7433938">,</span>&nbsp;<span class="ident" id="7433940">vgradAlpha</span><span class="op" id="7433950">(</span><span class="num" id="7433951">192</span><span class="op" id="7433954">)</span><span class="op" id="7433955">,</span>&nbsp;<span class="ident" id="7433957">Src</span><span class="op" id="7433960">,</span>&nbsp;<span class="ident" id="7433962">color</span><span class="op" id="7433967">.</span><span class="ident" id="7433968">RGBA</span><span class="op" id="7433972">{</span><span class="num" id="7433973">0</span><span class="op" id="7433974">,</span>&nbsp;<span class="num" id="7433976">0</span><span class="op" id="7433977">,</span>&nbsp;<span class="num" id="7433979">102</span><span class="op" id="7433982">,</span>&nbsp;<span class="num" id="7433984">102</span><span class="op" id="7433987">}</span><span class="op" id="7433988">}</span><span class="op" id="7433989">,</span><br>
<span class="lineno"></span><span class="op" id="7433991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7433994">func</span>&nbsp;<span class="ident" id="7433999">makeGolden</span><span class="op" id="7434009">(</span><span class="ident" id="7434010">dst</span>&nbsp;<span class="ident" id="7434014">image</span><span class="op" id="7434019">.</span><span class="ident" id="7434020">Image</span><span class="op" id="7434025">,</span>&nbsp;<span class="ident" id="7434027">r</span>&nbsp;<span class="ident" id="7434029">image</span><span class="op" id="7434034">.</span><span class="ident" id="7434035">Rectangle</span><span class="op" id="7434044">,</span>&nbsp;<span class="ident" id="7434046">src</span>&nbsp;<span class="ident" id="7434050">image</span><span class="op" id="7434055">.</span><span class="ident" id="7434056">Image</span><span class="op" id="7434061">,</span>&nbsp;<span class="ident" id="7434063">sp</span>&nbsp;<span class="ident" id="7434066">image</span><span class="op" id="7434071">.</span><span class="ident" id="7434072">Point</span><span class="op" id="7434077">,</span>&nbsp;<span class="ident" id="7434079">mask</span>&nbsp;<span class="ident" id="7434084">image</span><span class="op" id="7434089">.</span><span class="ident" id="7434090">Image</span><span class="op" id="7434095">,</span>&nbsp;<span class="ident" id="7434097">mp</span>&nbsp;<span class="ident" id="7434100">image</span><span class="op" id="7434105">.</span><span class="ident" id="7434106">Point</span><span class="op" id="7434111">,</span>&nbsp;<span class="ident" id="7434113">op</span>&nbsp;<span class="ident" id="7434116">Op</span><span class="op" id="7434118">)</span>&nbsp;<span class="ident" id="7434120">image</span><span class="op" id="7434125">.</span><span class="ident" id="7434126">Image</span>&nbsp;<span class="op" id="7434132">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7434135">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7434210">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434280">b</span>&nbsp;<span class="op" id="7434282">:=</span>&nbsp;<span class="ident" id="7434285">dst</span><span class="op" id="7434288">.</span><span class="ident" id="7434289">Bounds</span><span class="op" id="7434295">(</span><span class="op" id="7434296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434299">sb</span>&nbsp;<span class="op" id="7434302">:=</span>&nbsp;<span class="ident" id="7434305">src</span><span class="op" id="7434308">.</span><span class="ident" id="7434309">Bounds</span><span class="op" id="7434315">(</span><span class="op" id="7434316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434319">mb</span>&nbsp;<span class="op" id="7434322">:=</span>&nbsp;<span class="ident" id="7434325">image</span><span class="op" id="7434330">.</span><span class="ident" id="7434331">Rect</span><span class="op" id="7434335">(</span><span class="op" id="7434336">-</span><span class="num" id="7434337">1e9</span><span class="op" id="7434340">,</span>&nbsp;<span class="op" id="7434342">-</span><span class="num" id="7434343">1e9</span><span class="op" id="7434346">,</span>&nbsp;<span class="num" id="7434348">1e9</span><span class="op" id="7434351">,</span>&nbsp;<span class="num" id="7434353">1e9</span><span class="op" id="7434356">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434359">if</span>&nbsp;<span class="ident" id="7434362">mask</span>&nbsp;<span class="op" id="7434367">!=</span>&nbsp;<span class="ident" id="7434370">nil</span>&nbsp;<span class="op" id="7434374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434378">mb</span>&nbsp;<span class="op" id="7434381">=</span>&nbsp;<span class="ident" id="7434383">mask</span><span class="op" id="7434387">.</span><span class="ident" id="7434388">Bounds</span><span class="op" id="7434394">(</span><span class="op" id="7434395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7434398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434401">golden</span>&nbsp;<span class="op" id="7434408">:=</span>&nbsp;<span class="ident" id="7434411">image</span><span class="op" id="7434416">.</span><span class="ident" id="7434417">NewRGBA</span><span class="op" id="7434424">(</span><span class="ident" id="7434425">image</span><span class="op" id="7434430">.</span><span class="ident" id="7434431">Rect</span><span class="op" id="7434435">(</span><span class="num" id="7434436">0</span><span class="op" id="7434437">,</span>&nbsp;<span class="num" id="7434439">0</span><span class="op" id="7434440">,</span>&nbsp;<span class="ident" id="7434442">b</span><span class="op" id="7434443">.</span><span class="ident" id="7434444">Max</span><span class="op" id="7434447">.</span><span class="ident" id="7434448">X</span><span class="op" id="7434449">,</span>&nbsp;<span class="ident" id="7434451">b</span><span class="op" id="7434452">.</span><span class="ident" id="7434453">Max</span><span class="op" id="7434456">.</span><span class="ident" id="7434457">Y</span><span class="op" id="7434458">)</span><span class="op" id="7434459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434462">for</span>&nbsp;<span class="ident" id="7434466">y</span>&nbsp;<span class="op" id="7434468">:=</span>&nbsp;<span class="ident" id="7434471">r</span><span class="op" id="7434472">.</span><span class="ident" id="7434473">Min</span><span class="op" id="7434476">.</span><span class="ident" id="7434477">Y</span><span class="op" id="7434478">;</span>&nbsp;<span class="ident" id="7434480">y</span>&nbsp;<span class="op" id="7434482">&lt;</span>&nbsp;<span class="ident" id="7434484">r</span><span class="op" id="7434485">.</span><span class="ident" id="7434486">Max</span><span class="op" id="7434489">.</span><span class="ident" id="7434490">Y</span><span class="op" id="7434491">;</span>&nbsp;<span class="ident" id="7434493">y</span><span class="op" id="7434494">++</span>&nbsp;<span class="op" id="7434497">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434501">sy</span>&nbsp;<span class="op" id="7434504">:=</span>&nbsp;<span class="ident" id="7434507">y</span>&nbsp;<span class="op" id="7434509">+</span>&nbsp;<span class="ident" id="7434511">sp</span><span class="op" id="7434513">.</span><span class="ident" id="7434514">Y</span>&nbsp;<span class="op" id="7434516">-</span>&nbsp;<span class="ident" id="7434518">r</span><span class="op" id="7434519">.</span><span class="ident" id="7434520">Min</span><span class="op" id="7434523">.</span><span class="ident" id="7434524">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434528">my</span>&nbsp;<span class="op" id="7434531">:=</span>&nbsp;<span class="ident" id="7434534">y</span>&nbsp;<span class="op" id="7434536">+</span>&nbsp;<span class="ident" id="7434538">mp</span><span class="op" id="7434540">.</span><span class="ident" id="7434541">Y</span>&nbsp;<span class="op" id="7434543">-</span>&nbsp;<span class="ident" id="7434545">r</span><span class="op" id="7434546">.</span><span class="ident" id="7434547">Min</span><span class="op" id="7434550">.</span><span class="ident" id="7434551">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434555">for</span>&nbsp;<span class="ident" id="7434559">x</span>&nbsp;<span class="op" id="7434561">:=</span>&nbsp;<span class="ident" id="7434564">r</span><span class="op" id="7434565">.</span><span class="ident" id="7434566">Min</span><span class="op" id="7434569">.</span><span class="ident" id="7434570">X</span><span class="op" id="7434571">;</span>&nbsp;<span class="ident" id="7434573">x</span>&nbsp;<span class="op" id="7434575">&lt;</span>&nbsp;<span class="ident" id="7434577">r</span><span class="op" id="7434578">.</span><span class="ident" id="7434579">Max</span><span class="op" id="7434582">.</span><span class="ident" id="7434583">X</span><span class="op" id="7434584">;</span>&nbsp;<span class="ident" id="7434586">x</span><span class="op" id="7434587">++</span>&nbsp;<span class="op" id="7434590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434595">if</span>&nbsp;<span class="op" id="7434598">!</span><span class="op" id="7434599">(</span><span class="ident" id="7434600">image</span><span class="op" id="7434605">.</span><span class="ident" id="7434606">Pt</span><span class="op" id="7434608">(</span><span class="ident" id="7434609">x</span><span class="op" id="7434610">,</span>&nbsp;<span class="ident" id="7434612">y</span><span class="op" id="7434613">)</span><span class="op" id="7434614">.</span><span class="ident" id="7434615">In</span><span class="op" id="7434617">(</span><span class="ident" id="7434618">b</span><span class="op" id="7434619">)</span><span class="op" id="7434620">)</span>&nbsp;<span class="op" id="7434622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434628">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7434640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434645">sx</span>&nbsp;<span class="op" id="7434648">:=</span>&nbsp;<span class="ident" id="7434651">x</span>&nbsp;<span class="op" id="7434653">+</span>&nbsp;<span class="ident" id="7434655">sp</span><span class="op" id="7434657">.</span><span class="ident" id="7434658">X</span>&nbsp;<span class="op" id="7434660">-</span>&nbsp;<span class="ident" id="7434662">r</span><span class="op" id="7434663">.</span><span class="ident" id="7434664">Min</span><span class="op" id="7434667">.</span><span class="ident" id="7434668">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434673">if</span>&nbsp;<span class="op" id="7434676">!</span><span class="op" id="7434677">(</span><span class="ident" id="7434678">image</span><span class="op" id="7434683">.</span><span class="ident" id="7434684">Pt</span><span class="op" id="7434686">(</span><span class="ident" id="7434687">sx</span><span class="op" id="7434689">,</span>&nbsp;<span class="ident" id="7434691">sy</span><span class="op" id="7434693">)</span><span class="op" id="7434694">.</span><span class="ident" id="7434695">In</span><span class="op" id="7434697">(</span><span class="ident" id="7434698">sb</span><span class="op" id="7434700">)</span><span class="op" id="7434701">)</span>&nbsp;<span class="op" id="7434703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434709">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7434721">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434726">mx</span>&nbsp;<span class="op" id="7434729">:=</span>&nbsp;<span class="ident" id="7434732">x</span>&nbsp;<span class="op" id="7434734">+</span>&nbsp;<span class="ident" id="7434736">mp</span><span class="op" id="7434738">.</span><span class="ident" id="7434739">X</span>&nbsp;<span class="op" id="7434741">-</span>&nbsp;<span class="ident" id="7434743">r</span><span class="op" id="7434744">.</span><span class="ident" id="7434745">Min</span><span class="op" id="7434748">.</span><span class="ident" id="7434749">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434754">if</span>&nbsp;<span class="op" id="7434757">!</span><span class="op" id="7434758">(</span><span class="ident" id="7434759">image</span><span class="op" id="7434764">.</span><span class="ident" id="7434765">Pt</span><span class="op" id="7434767">(</span><span class="ident" id="7434768">mx</span><span class="op" id="7434770">,</span>&nbsp;<span class="ident" id="7434772">my</span><span class="op" id="7434774">)</span><span class="op" id="7434775">.</span><span class="ident" id="7434776">In</span><span class="op" id="7434778">(</span><span class="ident" id="7434779">mb</span><span class="op" id="7434781">)</span><span class="op" id="7434782">)</span>&nbsp;<span class="op" id="7434784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434790">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7434802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434808">const</span>&nbsp;<span class="ident" id="7434814">M</span>&nbsp;<span class="op" id="7434816">=</span>&nbsp;<span class="num" id="7434818">1</span><span class="op" id="7434819">&lt;&lt;</span><span class="num" id="7434821">16</span>&nbsp;<span class="op" id="7434824">-</span>&nbsp;<span class="num" id="7434826">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434831">var</span>&nbsp;<span class="ident" id="7434835">dr</span><span class="op" id="7434837">,</span>&nbsp;<span class="ident" id="7434839">dg</span><span class="op" id="7434841">,</span>&nbsp;<span class="ident" id="7434843">db</span><span class="op" id="7434845">,</span>&nbsp;<span class="ident" id="7434847">da</span>&nbsp;<span class="builtintype" id="7434850">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434860">if</span>&nbsp;<span class="ident" id="7434863">op</span>&nbsp;<span class="op" id="7434866">==</span>&nbsp;<span class="ident" id="7434869">Over</span>&nbsp;<span class="op" id="7434874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434880">dr</span><span class="op" id="7434882">,</span>&nbsp;<span class="ident" id="7434884">dg</span><span class="op" id="7434886">,</span>&nbsp;<span class="ident" id="7434888">db</span><span class="op" id="7434890">,</span>&nbsp;<span class="ident" id="7434892">da</span>&nbsp;<span class="op" id="7434895">=</span>&nbsp;<span class="ident" id="7434897">dst</span><span class="op" id="7434900">.</span><span class="ident" id="7434901">At</span><span class="op" id="7434903">(</span><span class="ident" id="7434904">x</span><span class="op" id="7434905">,</span>&nbsp;<span class="ident" id="7434907">y</span><span class="op" id="7434908">)</span><span class="op" id="7434909">.</span><span class="ident" id="7434910">RGBA</span><span class="op" id="7434914">(</span><span class="op" id="7434915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7434920">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434925">sr</span><span class="op" id="7434927">,</span>&nbsp;<span class="ident" id="7434929">sg</span><span class="op" id="7434931">,</span>&nbsp;<span class="ident" id="7434933">sb</span><span class="op" id="7434935">,</span>&nbsp;<span class="ident" id="7434937">sa</span>&nbsp;<span class="op" id="7434940">:=</span>&nbsp;<span class="ident" id="7434943">src</span><span class="op" id="7434946">.</span><span class="ident" id="7434947">At</span><span class="op" id="7434949">(</span><span class="ident" id="7434950">sx</span><span class="op" id="7434952">,</span>&nbsp;<span class="ident" id="7434954">sy</span><span class="op" id="7434956">)</span><span class="op" id="7434957">.</span><span class="ident" id="7434958">RGBA</span><span class="op" id="7434962">(</span><span class="op" id="7434963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7434968">ma</span>&nbsp;<span class="op" id="7434971">:=</span>&nbsp;<span class="builtintype" id="7434974">uint32</span><span class="op" id="7434980">(</span><span class="ident" id="7434981">M</span><span class="op" id="7434982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7434987">if</span>&nbsp;<span class="ident" id="7434990">mask</span>&nbsp;<span class="op" id="7434995">!=</span>&nbsp;<span class="ident" id="7434998">nil</span>&nbsp;<span class="op" id="7435002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435008">_</span><span class="op" id="7435009">,</span>&nbsp;<span class="ident" id="7435011">_</span><span class="op" id="7435012">,</span>&nbsp;<span class="ident" id="7435014">_</span><span class="op" id="7435015">,</span>&nbsp;<span class="ident" id="7435017">ma</span>&nbsp;<span class="op" id="7435020">=</span>&nbsp;<span class="ident" id="7435022">mask</span><span class="op" id="7435026">.</span><span class="ident" id="7435027">At</span><span class="op" id="7435029">(</span><span class="ident" id="7435030">mx</span><span class="op" id="7435032">,</span>&nbsp;<span class="ident" id="7435034">my</span><span class="op" id="7435036">)</span><span class="op" id="7435037">.</span><span class="ident" id="7435038">RGBA</span><span class="op" id="7435042">(</span><span class="op" id="7435043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7435048">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435053">a</span>&nbsp;<span class="op" id="7435055">:=</span>&nbsp;<span class="ident" id="7435058">M</span>&nbsp;<span class="op" id="7435060">-</span>&nbsp;<span class="op" id="7435062">(</span><span class="ident" id="7435063">sa</span>&nbsp;<span class="op" id="7435066">*</span>&nbsp;<span class="ident" id="7435068">ma</span>&nbsp;<span class="op" id="7435071">/</span>&nbsp;<span class="ident" id="7435073">M</span><span class="op" id="7435074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435079">golden</span><span class="op" id="7435085">.</span><span class="ident" id="7435086">Set</span><span class="op" id="7435089">(</span><span class="ident" id="7435090">x</span><span class="op" id="7435091">,</span>&nbsp;<span class="ident" id="7435093">y</span><span class="op" id="7435094">,</span>&nbsp;<span class="ident" id="7435096">color</span><span class="op" id="7435101">.</span><span class="ident" id="7435102">RGBA64</span><span class="op" id="7435108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7435114">uint16</span><span class="op" id="7435120">(</span><span class="op" id="7435121">(</span><span class="ident" id="7435122">dr</span><span class="op" id="7435124">*</span><span class="ident" id="7435125">a</span>&nbsp;<span class="op" id="7435127">+</span>&nbsp;<span class="ident" id="7435129">sr</span><span class="op" id="7435131">*</span><span class="ident" id="7435132">ma</span><span class="op" id="7435134">)</span>&nbsp;<span class="op" id="7435136">/</span>&nbsp;<span class="ident" id="7435138">M</span><span class="op" id="7435139">)</span><span class="op" id="7435140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7435146">uint16</span><span class="op" id="7435152">(</span><span class="op" id="7435153">(</span><span class="ident" id="7435154">dg</span><span class="op" id="7435156">*</span><span class="ident" id="7435157">a</span>&nbsp;<span class="op" id="7435159">+</span>&nbsp;<span class="ident" id="7435161">sg</span><span class="op" id="7435163">*</span><span class="ident" id="7435164">ma</span><span class="op" id="7435166">)</span>&nbsp;<span class="op" id="7435168">/</span>&nbsp;<span class="ident" id="7435170">M</span><span class="op" id="7435171">)</span><span class="op" id="7435172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7435178">uint16</span><span class="op" id="7435184">(</span><span class="op" id="7435185">(</span><span class="ident" id="7435186">db</span><span class="op" id="7435188">*</span><span class="ident" id="7435189">a</span>&nbsp;<span class="op" id="7435191">+</span>&nbsp;<span class="ident" id="7435193">sb</span><span class="op" id="7435195">*</span><span class="ident" id="7435196">ma</span><span class="op" id="7435198">)</span>&nbsp;<span class="op" id="7435200">/</span>&nbsp;<span class="ident" id="7435202">M</span><span class="op" id="7435203">)</span><span class="op" id="7435204">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7435210">uint16</span><span class="op" id="7435216">(</span><span class="op" id="7435217">(</span><span class="ident" id="7435218">da</span><span class="op" id="7435220">*</span><span class="ident" id="7435221">a</span>&nbsp;<span class="op" id="7435223">+</span>&nbsp;<span class="ident" id="7435225">sa</span><span class="op" id="7435227">*</span><span class="ident" id="7435228">ma</span><span class="op" id="7435230">)</span>&nbsp;<span class="op" id="7435232">/</span>&nbsp;<span class="ident" id="7435234">M</span><span class="op" id="7435235">)</span><span class="op" id="7435236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7435241">}</span><span class="op" id="7435242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7435246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7435249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7435252">return</span>&nbsp;<span class="ident" id="7435259">golden</span><span class="op" id="7435265">.</span><span class="ident" id="7435266">SubImage</span><span class="op" id="7435274">(</span><span class="ident" id="7435275">b</span><span class="op" id="7435276">)</span><br>
<span class="lineno">205</span><span class="op" id="7435278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7435281">func</span>&nbsp;<span class="ident" id="7435286">TestDraw</span><span class="op" id="7435294">(</span><span class="ident" id="7435295">t</span>&nbsp;<span class="op" id="7435297">*</span><span class="ident" id="7435298">testing</span><span class="op" id="7435305">.</span><span class="ident" id="7435306">T</span><span class="op" id="7435307">)</span>&nbsp;<span class="op" id="7435309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435312">rr</span>&nbsp;<span class="op" id="7435315">:=</span>&nbsp;<span class="op" id="7435318">[</span><span class="op" id="7435319">]</span><span class="ident" id="7435320">image</span><span class="op" id="7435325">.</span><span class="ident" id="7435326">Rectangle</span><span class="op" id="7435335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435339">image</span><span class="op" id="7435344">.</span><span class="ident" id="7435345">Rect</span><span class="op" id="7435349">(</span><span class="num" id="7435350">0</span><span class="op" id="7435351">,</span>&nbsp;<span class="num" id="7435353">0</span><span class="op" id="7435354">,</span>&nbsp;<span class="num" id="7435356">0</span><span class="op" id="7435357">,</span>&nbsp;<span class="num" id="7435359">0</span><span class="op" id="7435360">)</span><span class="op" id="7435361">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435365">image</span><span class="op" id="7435370">.</span><span class="ident" id="7435371">Rect</span><span class="op" id="7435375">(</span><span class="num" id="7435376">0</span><span class="op" id="7435377">,</span>&nbsp;<span class="num" id="7435379">0</span><span class="op" id="7435380">,</span>&nbsp;<span class="num" id="7435382">16</span><span class="op" id="7435384">,</span>&nbsp;<span class="num" id="7435386">16</span><span class="op" id="7435388">)</span><span class="op" id="7435389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435393">image</span><span class="op" id="7435398">.</span><span class="ident" id="7435399">Rect</span><span class="op" id="7435403">(</span><span class="num" id="7435404">3</span><span class="op" id="7435405">,</span>&nbsp;<span class="num" id="7435407">5</span><span class="op" id="7435408">,</span>&nbsp;<span class="num" id="7435410">12</span><span class="op" id="7435412">,</span>&nbsp;<span class="num" id="7435414">10</span><span class="op" id="7435416">)</span><span class="op" id="7435417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435421">image</span><span class="op" id="7435426">.</span><span class="ident" id="7435427">Rect</span><span class="op" id="7435431">(</span><span class="num" id="7435432">0</span><span class="op" id="7435433">,</span>&nbsp;<span class="num" id="7435435">0</span><span class="op" id="7435436">,</span>&nbsp;<span class="num" id="7435438">9</span><span class="op" id="7435439">,</span>&nbsp;<span class="num" id="7435441">9</span><span class="op" id="7435442">)</span><span class="op" id="7435443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435447">image</span><span class="op" id="7435452">.</span><span class="ident" id="7435453">Rect</span><span class="op" id="7435457">(</span><span class="num" id="7435458">8</span><span class="op" id="7435459">,</span>&nbsp;<span class="num" id="7435461">8</span><span class="op" id="7435462">,</span>&nbsp;<span class="num" id="7435464">16</span><span class="op" id="7435466">,</span>&nbsp;<span class="num" id="7435468">16</span><span class="op" id="7435470">)</span><span class="op" id="7435471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435475">image</span><span class="op" id="7435480">.</span><span class="ident" id="7435481">Rect</span><span class="op" id="7435485">(</span><span class="num" id="7435486">8</span><span class="op" id="7435487">,</span>&nbsp;<span class="num" id="7435489">0</span><span class="op" id="7435490">,</span>&nbsp;<span class="num" id="7435492">9</span><span class="op" id="7435493">,</span>&nbsp;<span class="num" id="7435495">16</span><span class="op" id="7435497">)</span><span class="op" id="7435498">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435502">image</span><span class="op" id="7435507">.</span><span class="ident" id="7435508">Rect</span><span class="op" id="7435512">(</span><span class="num" id="7435513">0</span><span class="op" id="7435514">,</span>&nbsp;<span class="num" id="7435516">8</span><span class="op" id="7435517">,</span>&nbsp;<span class="num" id="7435519">16</span><span class="op" id="7435521">,</span>&nbsp;<span class="num" id="7435523">9</span><span class="op" id="7435524">)</span><span class="op" id="7435525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435529">image</span><span class="op" id="7435534">.</span><span class="ident" id="7435535">Rect</span><span class="op" id="7435539">(</span><span class="num" id="7435540">8</span><span class="op" id="7435541">,</span>&nbsp;<span class="num" id="7435543">8</span><span class="op" id="7435544">,</span>&nbsp;<span class="num" id="7435546">9</span><span class="op" id="7435547">,</span>&nbsp;<span class="num" id="7435549">9</span><span class="op" id="7435550">)</span><span class="op" id="7435551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435555">image</span><span class="op" id="7435560">.</span><span class="ident" id="7435561">Rect</span><span class="op" id="7435565">(</span><span class="num" id="7435566">8</span><span class="op" id="7435567">,</span>&nbsp;<span class="num" id="7435569">8</span><span class="op" id="7435570">,</span>&nbsp;<span class="num" id="7435572">8</span><span class="op" id="7435573">,</span>&nbsp;<span class="num" id="7435575">8</span><span class="op" id="7435576">)</span><span class="op" id="7435577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7435580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7435583">for</span>&nbsp;<span class="ident" id="7435587">_</span><span class="op" id="7435588">,</span>&nbsp;<span class="ident" id="7435590">r</span>&nbsp;<span class="op" id="7435592">:=</span>&nbsp;<span class="keyword" id="7435595">range</span>&nbsp;<span class="ident" id="7435601">rr</span>&nbsp;<span class="op" id="7435604">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435607">loop</span><span class="op" id="7435611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7435615">for</span>&nbsp;<span class="ident" id="7435619">_</span><span class="op" id="7435620">,</span>&nbsp;<span class="ident" id="7435622">test</span>&nbsp;<span class="op" id="7435627">:=</span>&nbsp;<span class="keyword" id="7435630">range</span>&nbsp;<span class="ident" id="7435636">drawTests</span>&nbsp;<span class="op" id="7435646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435651">dst</span>&nbsp;<span class="op" id="7435655">:=</span>&nbsp;<span class="ident" id="7435658">hgradRed</span><span class="op" id="7435666">(</span><span class="num" id="7435667">255</span><span class="op" id="7435670">)</span><span class="op" id="7435671">.</span><span class="op" id="7435672">(</span><span class="op" id="7435673">*</span><span class="ident" id="7435674">image</span><span class="op" id="7435679">.</span><span class="ident" id="7435680">RGBA</span><span class="op" id="7435684">)</span><span class="op" id="7435685">.</span><span class="ident" id="7435686">SubImage</span><span class="op" id="7435694">(</span><span class="ident" id="7435695">r</span><span class="op" id="7435696">)</span><span class="op" id="7435697">.</span><span class="op" id="7435698">(</span><span class="ident" id="7435699">Image</span><span class="op" id="7435704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7435709">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435810">golden</span>&nbsp;<span class="op" id="7435817">:=</span>&nbsp;<span class="ident" id="7435820">makeGolden</span><span class="op" id="7435830">(</span><span class="ident" id="7435831">dst</span><span class="op" id="7435834">,</span>&nbsp;<span class="ident" id="7435836">image</span><span class="op" id="7435841">.</span><span class="ident" id="7435842">Rect</span><span class="op" id="7435846">(</span><span class="num" id="7435847">0</span><span class="op" id="7435848">,</span>&nbsp;<span class="num" id="7435850">0</span><span class="op" id="7435851">,</span>&nbsp;<span class="num" id="7435853">16</span><span class="op" id="7435855">,</span>&nbsp;<span class="num" id="7435857">16</span><span class="op" id="7435859">)</span><span class="op" id="7435860">,</span>&nbsp;<span class="ident" id="7435862">test</span><span class="op" id="7435866">.</span><span class="ident" id="7435867">src</span><span class="op" id="7435870">,</span>&nbsp;<span class="ident" id="7435872">image</span><span class="op" id="7435877">.</span><span class="ident" id="7435878">ZP</span><span class="op" id="7435880">,</span>&nbsp;<span class="ident" id="7435882">test</span><span class="op" id="7435886">.</span><span class="ident" id="7435887">mask</span><span class="op" id="7435891">,</span>&nbsp;<span class="ident" id="7435893">image</span><span class="op" id="7435898">.</span><span class="ident" id="7435899">ZP</span><span class="op" id="7435901">,</span>&nbsp;<span class="ident" id="7435903">test</span><span class="op" id="7435907">.</span><span class="ident" id="7435908">op</span><span class="op" id="7435910">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435915">b</span>&nbsp;<span class="op" id="7435917">:=</span>&nbsp;<span class="ident" id="7435920">dst</span><span class="op" id="7435923">.</span><span class="ident" id="7435924">Bounds</span><span class="op" id="7435930">(</span><span class="op" id="7435931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7435936">if</span>&nbsp;<span class="op" id="7435939">!</span><span class="ident" id="7435940">b</span><span class="op" id="7435941">.</span><span class="ident" id="7435942">Eq</span><span class="op" id="7435944">(</span><span class="ident" id="7435945">golden</span><span class="op" id="7435951">.</span><span class="ident" id="7435952">Bounds</span><span class="op" id="7435958">(</span><span class="op" id="7435959">)</span><span class="op" id="7435960">)</span>&nbsp;<span class="op" id="7435962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7435968">t</span><span class="op" id="7435969">.</span><span class="ident" id="7435970">Errorf</span><span class="op" id="7435976">(</span><span class="string" id="7435977">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7436010">,</span>&nbsp;<span class="ident" id="7436012">r</span><span class="op" id="7436013">,</span>&nbsp;<span class="ident" id="7436015">test</span><span class="op" id="7436019">.</span><span class="ident" id="7436020">desc</span><span class="op" id="7436024">,</span>&nbsp;<span class="ident" id="7436026">dst</span><span class="op" id="7436029">.</span><span class="ident" id="7436030">Bounds</span><span class="op" id="7436036">(</span><span class="op" id="7436037">)</span><span class="op" id="7436038">,</span>&nbsp;<span class="ident" id="7436040">golden</span><span class="op" id="7436046">.</span><span class="ident" id="7436047">Bounds</span><span class="op" id="7436053">(</span><span class="op" id="7436054">)</span><span class="op" id="7436055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436061">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436073">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7436078">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7436175">DrawMask</span><span class="op" id="7436183">(</span><span class="ident" id="7436184">dst</span><span class="op" id="7436187">,</span>&nbsp;<span class="ident" id="7436189">image</span><span class="op" id="7436194">.</span><span class="ident" id="7436195">Rect</span><span class="op" id="7436199">(</span><span class="num" id="7436200">0</span><span class="op" id="7436201">,</span>&nbsp;<span class="num" id="7436203">0</span><span class="op" id="7436204">,</span>&nbsp;<span class="num" id="7436206">16</span><span class="op" id="7436208">,</span>&nbsp;<span class="num" id="7436210">16</span><span class="op" id="7436212">)</span><span class="op" id="7436213">,</span>&nbsp;<span class="ident" id="7436215">test</span><span class="op" id="7436219">.</span><span class="ident" id="7436220">src</span><span class="op" id="7436223">,</span>&nbsp;<span class="ident" id="7436225">image</span><span class="op" id="7436230">.</span><span class="ident" id="7436231">ZP</span><span class="op" id="7436233">,</span>&nbsp;<span class="ident" id="7436235">test</span><span class="op" id="7436239">.</span><span class="ident" id="7436240">mask</span><span class="op" id="7436244">,</span>&nbsp;<span class="ident" id="7436246">image</span><span class="op" id="7436251">.</span><span class="ident" id="7436252">ZP</span><span class="op" id="7436254">,</span>&nbsp;<span class="ident" id="7436256">test</span><span class="op" id="7436260">.</span><span class="ident" id="7436261">op</span><span class="op" id="7436263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436268">if</span>&nbsp;<span class="ident" id="7436271">image</span><span class="op" id="7436276">.</span><span class="ident" id="7436277">Pt</span><span class="op" id="7436279">(</span><span class="num" id="7436280">8</span><span class="op" id="7436281">,</span>&nbsp;<span class="num" id="7436283">8</span><span class="op" id="7436284">)</span><span class="op" id="7436285">.</span><span class="ident" id="7436286">In</span><span class="op" id="7436288">(</span><span class="ident" id="7436289">r</span><span class="op" id="7436290">)</span>&nbsp;<span class="op" id="7436292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7436298">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7436369">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436422">if</span>&nbsp;<span class="op" id="7436425">!</span><span class="ident" id="7436426">eq</span><span class="op" id="7436428">(</span><span class="ident" id="7436429">dst</span><span class="op" id="7436432">.</span><span class="ident" id="7436433">At</span><span class="op" id="7436435">(</span><span class="num" id="7436436">8</span><span class="op" id="7436437">,</span>&nbsp;<span class="num" id="7436439">8</span><span class="op" id="7436440">)</span><span class="op" id="7436441">,</span>&nbsp;<span class="ident" id="7436443">test</span><span class="op" id="7436447">.</span><span class="ident" id="7436448">expected</span><span class="op" id="7436456">)</span>&nbsp;<span class="op" id="7436458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7436465">t</span><span class="op" id="7436466">.</span><span class="ident" id="7436467">Errorf</span><span class="op" id="7436473">(</span><span class="string" id="7436474">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7436510">,</span>&nbsp;<span class="ident" id="7436512">r</span><span class="op" id="7436513">,</span>&nbsp;<span class="ident" id="7436515">test</span><span class="op" id="7436519">.</span><span class="ident" id="7436520">desc</span><span class="op" id="7436524">,</span>&nbsp;<span class="ident" id="7436526">dst</span><span class="op" id="7436529">.</span><span class="ident" id="7436530">At</span><span class="op" id="7436532">(</span><span class="num" id="7436533">8</span><span class="op" id="7436534">,</span>&nbsp;<span class="num" id="7436536">8</span><span class="op" id="7436537">)</span><span class="op" id="7436538">,</span>&nbsp;<span class="ident" id="7436540">test</span><span class="op" id="7436544">.</span><span class="ident" id="7436545">expected</span><span class="op" id="7436553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436560">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436578">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7436583">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436651">for</span>&nbsp;<span class="ident" id="7436655">y</span>&nbsp;<span class="op" id="7436657">:=</span>&nbsp;<span class="ident" id="7436660">b</span><span class="op" id="7436661">.</span><span class="ident" id="7436662">Min</span><span class="op" id="7436665">.</span><span class="ident" id="7436666">Y</span><span class="op" id="7436667">;</span>&nbsp;<span class="ident" id="7436669">y</span>&nbsp;<span class="op" id="7436671">&lt;</span>&nbsp;<span class="ident" id="7436673">b</span><span class="op" id="7436674">.</span><span class="ident" id="7436675">Max</span><span class="op" id="7436678">.</span><span class="ident" id="7436679">Y</span><span class="op" id="7436680">;</span>&nbsp;<span class="ident" id="7436682">y</span><span class="op" id="7436683">++</span>&nbsp;<span class="op" id="7436686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436692">for</span>&nbsp;<span class="ident" id="7436696">x</span>&nbsp;<span class="op" id="7436698">:=</span>&nbsp;<span class="ident" id="7436701">b</span><span class="op" id="7436702">.</span><span class="ident" id="7436703">Min</span><span class="op" id="7436706">.</span><span class="ident" id="7436707">X</span><span class="op" id="7436708">;</span>&nbsp;<span class="ident" id="7436710">x</span>&nbsp;<span class="op" id="7436712">&lt;</span>&nbsp;<span class="ident" id="7436714">b</span><span class="op" id="7436715">.</span><span class="ident" id="7436716">Max</span><span class="op" id="7436719">.</span><span class="ident" id="7436720">X</span><span class="op" id="7436721">;</span>&nbsp;<span class="ident" id="7436723">x</span><span class="op" id="7436724">++</span>&nbsp;<span class="op" id="7436727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436734">if</span>&nbsp;<span class="op" id="7436737">!</span><span class="ident" id="7436738">eq</span><span class="op" id="7436740">(</span><span class="ident" id="7436741">dst</span><span class="op" id="7436744">.</span><span class="ident" id="7436745">At</span><span class="op" id="7436747">(</span><span class="ident" id="7436748">x</span><span class="op" id="7436749">,</span>&nbsp;<span class="ident" id="7436751">y</span><span class="op" id="7436752">)</span><span class="op" id="7436753">,</span>&nbsp;<span class="ident" id="7436755">golden</span><span class="op" id="7436761">.</span><span class="ident" id="7436762">At</span><span class="op" id="7436764">(</span><span class="ident" id="7436765">x</span><span class="op" id="7436766">,</span>&nbsp;<span class="ident" id="7436768">y</span><span class="op" id="7436769">)</span><span class="op" id="7436770">)</span>&nbsp;<span class="op" id="7436772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7436780">t</span><span class="op" id="7436781">.</span><span class="ident" id="7436782">Errorf</span><span class="op" id="7436788">(</span><span class="string" id="7436789">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7436835">,</span>&nbsp;<span class="ident" id="7436837">r</span><span class="op" id="7436838">,</span>&nbsp;<span class="ident" id="7436840">test</span><span class="op" id="7436844">.</span><span class="ident" id="7436845">desc</span><span class="op" id="7436849">,</span>&nbsp;<span class="ident" id="7436851">x</span><span class="op" id="7436852">,</span>&nbsp;<span class="ident" id="7436854">y</span><span class="op" id="7436855">,</span>&nbsp;<span class="ident" id="7436857">dst</span><span class="op" id="7436860">.</span><span class="ident" id="7436861">At</span><span class="op" id="7436863">(</span><span class="ident" id="7436864">x</span><span class="op" id="7436865">,</span>&nbsp;<span class="ident" id="7436867">y</span><span class="op" id="7436868">)</span><span class="op" id="7436869">,</span>&nbsp;<span class="ident" id="7436871">golden</span><span class="op" id="7436877">.</span><span class="ident" id="7436878">At</span><span class="op" id="7436880">(</span><span class="ident" id="7436881">x</span><span class="op" id="7436882">,</span>&nbsp;<span class="ident" id="7436884">y</span><span class="op" id="7436885">)</span><span class="op" id="7436886">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436894">continue</span>&nbsp;<span class="ident" id="7436903">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436928">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7436931">}</span><br>
<span class="lineno"></span><span class="op" id="7436933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7436936">func</span>&nbsp;<span class="ident" id="7436941">TestDrawOverlap</span><span class="op" id="7436956">(</span><span class="ident" id="7436957">t</span>&nbsp;<span class="op" id="7436959">*</span><span class="ident" id="7436960">testing</span><span class="op" id="7436967">.</span><span class="ident" id="7436968">T</span><span class="op" id="7436969">)</span>&nbsp;<span class="op" id="7436971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7436974">for</span>&nbsp;<span class="ident" id="7436978">_</span><span class="op" id="7436979">,</span>&nbsp;<span class="ident" id="7436981">op</span>&nbsp;<span class="op" id="7436984">:=</span>&nbsp;<span class="keyword" id="7436987">range</span>&nbsp;<span class="op" id="7436993">[</span><span class="op" id="7436994">]</span><span class="ident" id="7436995">Op</span><span class="op" id="7436997">{</span><span class="ident" id="7436998">Over</span><span class="op" id="7437002">,</span>&nbsp;<span class="ident" id="7437004">Src</span><span class="op" id="7437007">}</span>&nbsp;<span class="op" id="7437009">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437013">for</span>&nbsp;<span class="ident" id="7437017">yoff</span>&nbsp;<span class="op" id="7437022">:=</span>&nbsp;<span class="op" id="7437025">-</span><span class="num" id="7437026">2</span><span class="op" id="7437027">;</span>&nbsp;<span class="ident" id="7437029">yoff</span>&nbsp;<span class="op" id="7437034">&lt;=</span>&nbsp;<span class="num" id="7437037">2</span><span class="op" id="7437038">;</span>&nbsp;<span class="ident" id="7437040">yoff</span><span class="op" id="7437044">++</span>&nbsp;<span class="op" id="7437047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437051">loop</span><span class="op" id="7437055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437060">for</span>&nbsp;<span class="ident" id="7437064">xoff</span>&nbsp;<span class="op" id="7437069">:=</span>&nbsp;<span class="op" id="7437072">-</span><span class="num" id="7437073">2</span><span class="op" id="7437074">;</span>&nbsp;<span class="ident" id="7437076">xoff</span>&nbsp;<span class="op" id="7437081">&lt;=</span>&nbsp;<span class="num" id="7437084">2</span><span class="op" id="7437085">;</span>&nbsp;<span class="ident" id="7437087">xoff</span><span class="op" id="7437091">++</span>&nbsp;<span class="op" id="7437094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437100">m</span>&nbsp;<span class="op" id="7437102">:=</span>&nbsp;<span class="ident" id="7437105">gradYellow</span><span class="op" id="7437115">(</span><span class="num" id="7437116">127</span><span class="op" id="7437119">)</span><span class="op" id="7437120">.</span><span class="op" id="7437121">(</span><span class="op" id="7437122">*</span><span class="ident" id="7437123">image</span><span class="op" id="7437128">.</span><span class="ident" id="7437129">RGBA</span><span class="op" id="7437133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437139">dst</span>&nbsp;<span class="op" id="7437143">:=</span>&nbsp;<span class="ident" id="7437146">m</span><span class="op" id="7437147">.</span><span class="ident" id="7437148">SubImage</span><span class="op" id="7437156">(</span><span class="ident" id="7437157">image</span><span class="op" id="7437162">.</span><span class="ident" id="7437163">Rect</span><span class="op" id="7437167">(</span><span class="num" id="7437168">5</span><span class="op" id="7437169">,</span>&nbsp;<span class="num" id="7437171">5</span><span class="op" id="7437172">,</span>&nbsp;<span class="num" id="7437174">10</span><span class="op" id="7437176">,</span>&nbsp;<span class="num" id="7437178">10</span><span class="op" id="7437180">)</span><span class="op" id="7437181">)</span><span class="op" id="7437182">.</span><span class="op" id="7437183">(</span><span class="op" id="7437184">*</span><span class="ident" id="7437185">image</span><span class="op" id="7437190">.</span><span class="ident" id="7437191">RGBA</span><span class="op" id="7437195">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437201">src</span>&nbsp;<span class="op" id="7437205">:=</span>&nbsp;<span class="ident" id="7437208">m</span><span class="op" id="7437209">.</span><span class="ident" id="7437210">SubImage</span><span class="op" id="7437218">(</span><span class="ident" id="7437219">image</span><span class="op" id="7437224">.</span><span class="ident" id="7437225">Rect</span><span class="op" id="7437229">(</span><span class="num" id="7437230">5</span><span class="op" id="7437231">+</span><span class="ident" id="7437232">xoff</span><span class="op" id="7437236">,</span>&nbsp;<span class="num" id="7437238">5</span><span class="op" id="7437239">+</span><span class="ident" id="7437240">yoff</span><span class="op" id="7437244">,</span>&nbsp;<span class="num" id="7437246">10</span><span class="op" id="7437248">+</span><span class="ident" id="7437249">xoff</span><span class="op" id="7437253">,</span>&nbsp;<span class="num" id="7437255">10</span><span class="op" id="7437257">+</span><span class="ident" id="7437258">yoff</span><span class="op" id="7437262">)</span><span class="op" id="7437263">)</span><span class="op" id="7437264">.</span><span class="op" id="7437265">(</span><span class="op" id="7437266">*</span><span class="ident" id="7437267">image</span><span class="op" id="7437272">.</span><span class="ident" id="7437273">RGBA</span><span class="op" id="7437277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437283">b</span>&nbsp;<span class="op" id="7437285">:=</span>&nbsp;<span class="ident" id="7437288">dst</span><span class="op" id="7437291">.</span><span class="ident" id="7437292">Bounds</span><span class="op" id="7437298">(</span><span class="op" id="7437299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7437305">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437407">golden</span>&nbsp;<span class="op" id="7437414">:=</span>&nbsp;<span class="ident" id="7437417">makeGolden</span><span class="op" id="7437427">(</span><span class="ident" id="7437428">dst</span><span class="op" id="7437431">,</span>&nbsp;<span class="ident" id="7437433">b</span><span class="op" id="7437434">,</span>&nbsp;<span class="ident" id="7437436">src</span><span class="op" id="7437439">,</span>&nbsp;<span class="ident" id="7437441">src</span><span class="op" id="7437444">.</span><span class="ident" id="7437445">Bounds</span><span class="op" id="7437451">(</span><span class="op" id="7437452">)</span><span class="op" id="7437453">.</span><span class="ident" id="7437454">Min</span><span class="op" id="7437457">,</span>&nbsp;<span class="ident" id="7437459">nil</span><span class="op" id="7437462">,</span>&nbsp;<span class="ident" id="7437464">image</span><span class="op" id="7437469">.</span><span class="ident" id="7437470">ZP</span><span class="op" id="7437472">,</span>&nbsp;<span class="ident" id="7437474">op</span><span class="op" id="7437476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437482">if</span>&nbsp;<span class="op" id="7437485">!</span><span class="ident" id="7437486">b</span><span class="op" id="7437487">.</span><span class="ident" id="7437488">Eq</span><span class="op" id="7437490">(</span><span class="ident" id="7437491">golden</span><span class="op" id="7437497">.</span><span class="ident" id="7437498">Bounds</span><span class="op" id="7437504">(</span><span class="op" id="7437505">)</span><span class="op" id="7437506">)</span>&nbsp;<span class="op" id="7437508">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437515">t</span><span class="op" id="7437516">.</span><span class="ident" id="7437517">Errorf</span><span class="op" id="7437523">(</span><span class="string" id="7437524">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7437574">,</span>&nbsp;<span class="ident" id="7437576">xoff</span><span class="op" id="7437580">,</span>&nbsp;<span class="ident" id="7437582">yoff</span><span class="op" id="7437586">,</span>&nbsp;<span class="ident" id="7437588">dst</span><span class="op" id="7437591">.</span><span class="ident" id="7437592">Bounds</span><span class="op" id="7437598">(</span><span class="op" id="7437599">)</span><span class="op" id="7437600">,</span>&nbsp;<span class="ident" id="7437602">golden</span><span class="op" id="7437608">.</span><span class="ident" id="7437609">Bounds</span><span class="op" id="7437615">(</span><span class="op" id="7437616">)</span><span class="op" id="7437617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437624">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7437637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7437643">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7437741">DrawMask</span><span class="op" id="7437749">(</span><span class="ident" id="7437750">dst</span><span class="op" id="7437753">,</span>&nbsp;<span class="ident" id="7437755">b</span><span class="op" id="7437756">,</span>&nbsp;<span class="ident" id="7437758">src</span><span class="op" id="7437761">,</span>&nbsp;<span class="ident" id="7437763">src</span><span class="op" id="7437766">.</span><span class="ident" id="7437767">Bounds</span><span class="op" id="7437773">(</span><span class="op" id="7437774">)</span><span class="op" id="7437775">.</span><span class="ident" id="7437776">Min</span><span class="op" id="7437779">,</span>&nbsp;<span class="ident" id="7437781">nil</span><span class="op" id="7437784">,</span>&nbsp;<span class="ident" id="7437786">image</span><span class="op" id="7437791">.</span><span class="ident" id="7437792">ZP</span><span class="op" id="7437794">,</span>&nbsp;<span class="ident" id="7437796">op</span><span class="op" id="7437798">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7437804">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437873">for</span>&nbsp;<span class="ident" id="7437877">y</span>&nbsp;<span class="op" id="7437879">:=</span>&nbsp;<span class="ident" id="7437882">b</span><span class="op" id="7437883">.</span><span class="ident" id="7437884">Min</span><span class="op" id="7437887">.</span><span class="ident" id="7437888">Y</span><span class="op" id="7437889">;</span>&nbsp;<span class="ident" id="7437891">y</span>&nbsp;<span class="op" id="7437893">&lt;</span>&nbsp;<span class="ident" id="7437895">b</span><span class="op" id="7437896">.</span><span class="ident" id="7437897">Max</span><span class="op" id="7437900">.</span><span class="ident" id="7437901">Y</span><span class="op" id="7437902">;</span>&nbsp;<span class="ident" id="7437904">y</span><span class="op" id="7437905">++</span>&nbsp;<span class="op" id="7437908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437915">for</span>&nbsp;<span class="ident" id="7437919">x</span>&nbsp;<span class="op" id="7437921">:=</span>&nbsp;<span class="ident" id="7437924">b</span><span class="op" id="7437925">.</span><span class="ident" id="7437926">Min</span><span class="op" id="7437929">.</span><span class="ident" id="7437930">X</span><span class="op" id="7437931">;</span>&nbsp;<span class="ident" id="7437933">x</span>&nbsp;<span class="op" id="7437935">&lt;</span>&nbsp;<span class="ident" id="7437937">b</span><span class="op" id="7437938">.</span><span class="ident" id="7437939">Max</span><span class="op" id="7437942">.</span><span class="ident" id="7437943">X</span><span class="op" id="7437944">;</span>&nbsp;<span class="ident" id="7437946">x</span><span class="op" id="7437947">++</span>&nbsp;<span class="op" id="7437950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7437958">if</span>&nbsp;<span class="op" id="7437961">!</span><span class="ident" id="7437962">eq</span><span class="op" id="7437964">(</span><span class="ident" id="7437965">dst</span><span class="op" id="7437968">.</span><span class="ident" id="7437969">At</span><span class="op" id="7437971">(</span><span class="ident" id="7437972">x</span><span class="op" id="7437973">,</span>&nbsp;<span class="ident" id="7437975">y</span><span class="op" id="7437976">)</span><span class="op" id="7437977">,</span>&nbsp;<span class="ident" id="7437979">golden</span><span class="op" id="7437985">.</span><span class="ident" id="7437986">At</span><span class="op" id="7437988">(</span><span class="ident" id="7437989">x</span><span class="op" id="7437990">,</span>&nbsp;<span class="ident" id="7437992">y</span><span class="op" id="7437993">)</span><span class="op" id="7437994">)</span>&nbsp;<span class="op" id="7437996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438005">t</span><span class="op" id="7438006">.</span><span class="ident" id="7438007">Errorf</span><span class="op" id="7438013">(</span><span class="string" id="7438014">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7438077">,</span>&nbsp;<span class="ident" id="7438079">xoff</span><span class="op" id="7438083">,</span>&nbsp;<span class="ident" id="7438085">yoff</span><span class="op" id="7438089">,</span>&nbsp;<span class="ident" id="7438091">x</span><span class="op" id="7438092">,</span>&nbsp;<span class="ident" id="7438094">y</span><span class="op" id="7438095">,</span>&nbsp;<span class="ident" id="7438097">dst</span><span class="op" id="7438100">.</span><span class="ident" id="7438101">At</span><span class="op" id="7438103">(</span><span class="ident" id="7438104">x</span><span class="op" id="7438105">,</span>&nbsp;<span class="ident" id="7438107">y</span><span class="op" id="7438108">)</span><span class="op" id="7438109">,</span>&nbsp;<span class="ident" id="7438111">golden</span><span class="op" id="7438117">.</span><span class="ident" id="7438118">At</span><span class="op" id="7438120">(</span><span class="ident" id="7438121">x</span><span class="op" id="7438122">,</span>&nbsp;<span class="ident" id="7438124">y</span><span class="op" id="7438125">)</span><span class="op" id="7438126">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7438135">continue</span>&nbsp;<span class="ident" id="7438144">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438173">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438180">}</span><br>
<span class="lineno"></span><span class="op" id="7438182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7438185">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="7438257">func</span>&nbsp;<span class="ident" id="7438262">TestNonZeroSrcPt</span><span class="op" id="7438278">(</span><span class="ident" id="7438279">t</span>&nbsp;<span class="op" id="7438281">*</span><span class="ident" id="7438282">testing</span><span class="op" id="7438289">.</span><span class="ident" id="7438290">T</span><span class="op" id="7438291">)</span>&nbsp;<span class="op" id="7438293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438296">a</span>&nbsp;<span class="op" id="7438298">:=</span>&nbsp;<span class="ident" id="7438301">image</span><span class="op" id="7438306">.</span><span class="ident" id="7438307">NewRGBA</span><span class="op" id="7438314">(</span><span class="ident" id="7438315">image</span><span class="op" id="7438320">.</span><span class="ident" id="7438321">Rect</span><span class="op" id="7438325">(</span><span class="num" id="7438326">0</span><span class="op" id="7438327">,</span>&nbsp;<span class="num" id="7438329">0</span><span class="op" id="7438330">,</span>&nbsp;<span class="num" id="7438332">1</span><span class="op" id="7438333">,</span>&nbsp;<span class="num" id="7438335">1</span><span class="op" id="7438336">)</span><span class="op" id="7438337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438340">b</span>&nbsp;<span class="op" id="7438342">:=</span>&nbsp;<span class="ident" id="7438345">image</span><span class="op" id="7438350">.</span><span class="ident" id="7438351">NewRGBA</span><span class="op" id="7438358">(</span><span class="ident" id="7438359">image</span><span class="op" id="7438364">.</span><span class="ident" id="7438365">Rect</span><span class="op" id="7438369">(</span><span class="num" id="7438370">0</span><span class="op" id="7438371">,</span>&nbsp;<span class="num" id="7438373">0</span><span class="op" id="7438374">,</span>&nbsp;<span class="num" id="7438376">2</span><span class="op" id="7438377">,</span>&nbsp;<span class="num" id="7438379">2</span><span class="op" id="7438380">)</span><span class="op" id="7438381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438384">b</span><span class="op" id="7438385">.</span><span class="ident" id="7438386">Set</span><span class="op" id="7438389">(</span><span class="num" id="7438390">0</span><span class="op" id="7438391">,</span>&nbsp;<span class="num" id="7438393">0</span><span class="op" id="7438394">,</span>&nbsp;<span class="ident" id="7438396">color</span><span class="op" id="7438401">.</span><span class="ident" id="7438402">RGBA</span><span class="op" id="7438406">{</span><span class="num" id="7438407">0</span><span class="op" id="7438408">,</span>&nbsp;<span class="num" id="7438410">0</span><span class="op" id="7438411">,</span>&nbsp;<span class="num" id="7438413">0</span><span class="op" id="7438414">,</span>&nbsp;<span class="num" id="7438416">5</span><span class="op" id="7438417">}</span><span class="op" id="7438418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438421">b</span><span class="op" id="7438422">.</span><span class="ident" id="7438423">Set</span><span class="op" id="7438426">(</span><span class="num" id="7438427">1</span><span class="op" id="7438428">,</span>&nbsp;<span class="num" id="7438430">0</span><span class="op" id="7438431">,</span>&nbsp;<span class="ident" id="7438433">color</span><span class="op" id="7438438">.</span><span class="ident" id="7438439">RGBA</span><span class="op" id="7438443">{</span><span class="num" id="7438444">0</span><span class="op" id="7438445">,</span>&nbsp;<span class="num" id="7438447">0</span><span class="op" id="7438448">,</span>&nbsp;<span class="num" id="7438450">5</span><span class="op" id="7438451">,</span>&nbsp;<span class="num" id="7438453">5</span><span class="op" id="7438454">}</span><span class="op" id="7438455">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438458">b</span><span class="op" id="7438459">.</span><span class="ident" id="7438460">Set</span><span class="op" id="7438463">(</span><span class="num" id="7438464">0</span><span class="op" id="7438465">,</span>&nbsp;<span class="num" id="7438467">1</span><span class="op" id="7438468">,</span>&nbsp;<span class="ident" id="7438470">color</span><span class="op" id="7438475">.</span><span class="ident" id="7438476">RGBA</span><span class="op" id="7438480">{</span><span class="num" id="7438481">0</span><span class="op" id="7438482">,</span>&nbsp;<span class="num" id="7438484">5</span><span class="op" id="7438485">,</span>&nbsp;<span class="num" id="7438487">0</span><span class="op" id="7438488">,</span>&nbsp;<span class="num" id="7438490">5</span><span class="op" id="7438491">}</span><span class="op" id="7438492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438495">b</span><span class="op" id="7438496">.</span><span class="ident" id="7438497">Set</span><span class="op" id="7438500">(</span><span class="num" id="7438501">1</span><span class="op" id="7438502">,</span>&nbsp;<span class="num" id="7438504">1</span><span class="op" id="7438505">,</span>&nbsp;<span class="ident" id="7438507">color</span><span class="op" id="7438512">.</span><span class="ident" id="7438513">RGBA</span><span class="op" id="7438517">{</span><span class="num" id="7438518">5</span><span class="op" id="7438519">,</span>&nbsp;<span class="num" id="7438521">0</span><span class="op" id="7438522">,</span>&nbsp;<span class="num" id="7438524">0</span><span class="op" id="7438525">,</span>&nbsp;<span class="num" id="7438527">5</span><span class="op" id="7438528">}</span><span class="op" id="7438529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438532">Draw</span><span class="op" id="7438536">(</span><span class="ident" id="7438537">a</span><span class="op" id="7438538">,</span>&nbsp;<span class="ident" id="7438540">image</span><span class="op" id="7438545">.</span><span class="ident" id="7438546">Rect</span><span class="op" id="7438550">(</span><span class="num" id="7438551">0</span><span class="op" id="7438552">,</span>&nbsp;<span class="num" id="7438554">0</span><span class="op" id="7438555">,</span>&nbsp;<span class="num" id="7438557">1</span><span class="op" id="7438558">,</span>&nbsp;<span class="num" id="7438560">1</span><span class="op" id="7438561">)</span><span class="op" id="7438562">,</span>&nbsp;<span class="ident" id="7438564">b</span><span class="op" id="7438565">,</span>&nbsp;<span class="ident" id="7438567">image</span><span class="op" id="7438572">.</span><span class="ident" id="7438573">Pt</span><span class="op" id="7438575">(</span><span class="num" id="7438576">1</span><span class="op" id="7438577">,</span>&nbsp;<span class="num" id="7438579">1</span><span class="op" id="7438580">)</span><span class="op" id="7438581">,</span>&nbsp;<span class="ident" id="7438583">Over</span><span class="op" id="7438587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7438590">if</span>&nbsp;<span class="op" id="7438593">!</span><span class="ident" id="7438594">eq</span><span class="op" id="7438596">(</span><span class="ident" id="7438597">color</span><span class="op" id="7438602">.</span><span class="ident" id="7438603">RGBA</span><span class="op" id="7438607">{</span><span class="num" id="7438608">5</span><span class="op" id="7438609">,</span>&nbsp;<span class="num" id="7438611">0</span><span class="op" id="7438612">,</span>&nbsp;<span class="num" id="7438614">0</span><span class="op" id="7438615">,</span>&nbsp;<span class="num" id="7438617">5</span><span class="op" id="7438618">}</span><span class="op" id="7438619">,</span>&nbsp;<span class="ident" id="7438621">a</span><span class="op" id="7438622">.</span><span class="ident" id="7438623">At</span><span class="op" id="7438625">(</span><span class="num" id="7438626">0</span><span class="op" id="7438627">,</span>&nbsp;<span class="num" id="7438629">0</span><span class="op" id="7438630">)</span><span class="op" id="7438631">)</span>&nbsp;<span class="op" id="7438633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438637">t</span><span class="op" id="7438638">.</span><span class="ident" id="7438639">Errorf</span><span class="op" id="7438645">(</span><span class="string" id="7438646">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7438679">,</span>&nbsp;<span class="ident" id="7438681">color</span><span class="op" id="7438686">.</span><span class="ident" id="7438687">RGBA</span><span class="op" id="7438691">{</span><span class="num" id="7438692">5</span><span class="op" id="7438693">,</span>&nbsp;<span class="num" id="7438695">0</span><span class="op" id="7438696">,</span>&nbsp;<span class="num" id="7438698">0</span><span class="op" id="7438699">,</span>&nbsp;<span class="num" id="7438701">5</span><span class="op" id="7438702">}</span><span class="op" id="7438703">,</span>&nbsp;<span class="ident" id="7438705">a</span><span class="op" id="7438706">.</span><span class="ident" id="7438707">At</span><span class="op" id="7438709">(</span><span class="num" id="7438710">0</span><span class="op" id="7438711">,</span>&nbsp;<span class="num" id="7438713">0</span><span class="op" id="7438714">)</span><span class="op" id="7438715">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7438718">}</span><br>
<span class="lineno"></span><span class="op" id="7438720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7438723">func</span>&nbsp;<span class="ident" id="7438728">TestFill</span><span class="op" id="7438736">(</span><span class="ident" id="7438737">t</span>&nbsp;<span class="op" id="7438739">*</span><span class="ident" id="7438740">testing</span><span class="op" id="7438747">.</span><span class="ident" id="7438748">T</span><span class="op" id="7438749">)</span>&nbsp;<span class="op" id="7438751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438754">rr</span>&nbsp;<span class="op" id="7438757">:=</span>&nbsp;<span class="op" id="7438760">[</span><span class="op" id="7438761">]</span><span class="ident" id="7438762">image</span><span class="op" id="7438767">.</span><span class="ident" id="7438768">Rectangle</span><span class="op" id="7438777">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438781">image</span><span class="op" id="7438786">.</span><span class="ident" id="7438787">Rect</span><span class="op" id="7438791">(</span><span class="num" id="7438792">0</span><span class="op" id="7438793">,</span>&nbsp;<span class="num" id="7438795">0</span><span class="op" id="7438796">,</span>&nbsp;<span class="num" id="7438798">0</span><span class="op" id="7438799">,</span>&nbsp;<span class="num" id="7438801">0</span><span class="op" id="7438802">)</span><span class="op" id="7438803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438807">image</span><span class="op" id="7438812">.</span><span class="ident" id="7438813">Rect</span><span class="op" id="7438817">(</span><span class="num" id="7438818">0</span><span class="op" id="7438819">,</span>&nbsp;<span class="num" id="7438821">0</span><span class="op" id="7438822">,</span>&nbsp;<span class="num" id="7438824">40</span><span class="op" id="7438826">,</span>&nbsp;<span class="num" id="7438828">30</span><span class="op" id="7438830">)</span><span class="op" id="7438831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438835">image</span><span class="op" id="7438840">.</span><span class="ident" id="7438841">Rect</span><span class="op" id="7438845">(</span><span class="num" id="7438846">10</span><span class="op" id="7438848">,</span>&nbsp;<span class="num" id="7438850">0</span><span class="op" id="7438851">,</span>&nbsp;<span class="num" id="7438853">40</span><span class="op" id="7438855">,</span>&nbsp;<span class="num" id="7438857">30</span><span class="op" id="7438859">)</span><span class="op" id="7438860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438864">image</span><span class="op" id="7438869">.</span><span class="ident" id="7438870">Rect</span><span class="op" id="7438874">(</span><span class="num" id="7438875">0</span><span class="op" id="7438876">,</span>&nbsp;<span class="num" id="7438878">20</span><span class="op" id="7438880">,</span>&nbsp;<span class="num" id="7438882">40</span><span class="op" id="7438884">,</span>&nbsp;<span class="num" id="7438886">30</span><span class="op" id="7438888">)</span><span class="op" id="7438889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438893">image</span><span class="op" id="7438898">.</span><span class="ident" id="7438899">Rect</span><span class="op" id="7438903">(</span><span class="num" id="7438904">10</span><span class="op" id="7438906">,</span>&nbsp;<span class="num" id="7438908">20</span><span class="op" id="7438910">,</span>&nbsp;<span class="num" id="7438912">40</span><span class="op" id="7438914">,</span>&nbsp;<span class="num" id="7438916">30</span><span class="op" id="7438918">)</span><span class="op" id="7438919">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438923">image</span><span class="op" id="7438928">.</span><span class="ident" id="7438929">Rect</span><span class="op" id="7438933">(</span><span class="num" id="7438934">10</span><span class="op" id="7438936">,</span>&nbsp;<span class="num" id="7438938">20</span><span class="op" id="7438940">,</span>&nbsp;<span class="num" id="7438942">15</span><span class="op" id="7438944">,</span>&nbsp;<span class="num" id="7438946">25</span><span class="op" id="7438948">)</span><span class="op" id="7438949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438953">image</span><span class="op" id="7438958">.</span><span class="ident" id="7438959">Rect</span><span class="op" id="7438963">(</span><span class="num" id="7438964">10</span><span class="op" id="7438966">,</span>&nbsp;<span class="num" id="7438968">0</span><span class="op" id="7438969">,</span>&nbsp;<span class="num" id="7438971">35</span><span class="op" id="7438973">,</span>&nbsp;<span class="num" id="7438975">30</span><span class="op" id="7438977">)</span><span class="op" id="7438978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7438982">image</span><span class="op" id="7438987">.</span><span class="ident" id="7438988">Rect</span><span class="op" id="7438992">(</span><span class="num" id="7438993">0</span><span class="op" id="7438994">,</span>&nbsp;<span class="num" id="7438996">15</span><span class="op" id="7438998">,</span>&nbsp;<span class="num" id="7439000">40</span><span class="op" id="7439002">,</span>&nbsp;<span class="num" id="7439004">16</span><span class="op" id="7439006">)</span><span class="op" id="7439007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439011">image</span><span class="op" id="7439016">.</span><span class="ident" id="7439017">Rect</span><span class="op" id="7439021">(</span><span class="num" id="7439022">24</span><span class="op" id="7439024">,</span>&nbsp;<span class="num" id="7439026">24</span><span class="op" id="7439028">,</span>&nbsp;<span class="num" id="7439030">25</span><span class="op" id="7439032">,</span>&nbsp;<span class="num" id="7439034">25</span><span class="op" id="7439036">)</span><span class="op" id="7439037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439041">image</span><span class="op" id="7439046">.</span><span class="ident" id="7439047">Rect</span><span class="op" id="7439051">(</span><span class="num" id="7439052">23</span><span class="op" id="7439054">,</span>&nbsp;<span class="num" id="7439056">23</span><span class="op" id="7439058">,</span>&nbsp;<span class="num" id="7439060">26</span><span class="op" id="7439062">,</span>&nbsp;<span class="num" id="7439064">26</span><span class="op" id="7439066">)</span><span class="op" id="7439067">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439071">image</span><span class="op" id="7439076">.</span><span class="ident" id="7439077">Rect</span><span class="op" id="7439081">(</span><span class="num" id="7439082">22</span><span class="op" id="7439084">,</span>&nbsp;<span class="num" id="7439086">22</span><span class="op" id="7439088">,</span>&nbsp;<span class="num" id="7439090">27</span><span class="op" id="7439092">,</span>&nbsp;<span class="num" id="7439094">27</span><span class="op" id="7439096">)</span><span class="op" id="7439097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439101">image</span><span class="op" id="7439106">.</span><span class="ident" id="7439107">Rect</span><span class="op" id="7439111">(</span><span class="num" id="7439112">21</span><span class="op" id="7439114">,</span>&nbsp;<span class="num" id="7439116">21</span><span class="op" id="7439118">,</span>&nbsp;<span class="num" id="7439120">28</span><span class="op" id="7439122">,</span>&nbsp;<span class="num" id="7439124">28</span><span class="op" id="7439126">)</span><span class="op" id="7439127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439131">image</span><span class="op" id="7439136">.</span><span class="ident" id="7439137">Rect</span><span class="op" id="7439141">(</span><span class="num" id="7439142">20</span><span class="op" id="7439144">,</span>&nbsp;<span class="num" id="7439146">20</span><span class="op" id="7439148">,</span>&nbsp;<span class="num" id="7439150">29</span><span class="op" id="7439152">,</span>&nbsp;<span class="num" id="7439154">29</span><span class="op" id="7439156">)</span><span class="op" id="7439157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439163">for</span>&nbsp;<span class="ident" id="7439167">_</span><span class="op" id="7439168">,</span>&nbsp;<span class="ident" id="7439170">r</span>&nbsp;<span class="op" id="7439172">:=</span>&nbsp;<span class="keyword" id="7439175">range</span>&nbsp;<span class="ident" id="7439181">rr</span>&nbsp;<span class="op" id="7439184">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439188">m</span>&nbsp;<span class="op" id="7439190">:=</span>&nbsp;<span class="ident" id="7439193">image</span><span class="op" id="7439198">.</span><span class="ident" id="7439199">NewRGBA</span><span class="op" id="7439206">(</span><span class="ident" id="7439207">image</span><span class="op" id="7439212">.</span><span class="ident" id="7439213">Rect</span><span class="op" id="7439217">(</span><span class="num" id="7439218">0</span><span class="op" id="7439219">,</span>&nbsp;<span class="num" id="7439221">0</span><span class="op" id="7439222">,</span>&nbsp;<span class="num" id="7439224">40</span><span class="op" id="7439226">,</span>&nbsp;<span class="num" id="7439228">30</span><span class="op" id="7439230">)</span><span class="op" id="7439231">)</span><span class="op" id="7439232">.</span><span class="ident" id="7439233">SubImage</span><span class="op" id="7439241">(</span><span class="ident" id="7439242">r</span><span class="op" id="7439243">)</span><span class="op" id="7439244">.</span><span class="op" id="7439245">(</span><span class="op" id="7439246">*</span><span class="ident" id="7439247">image</span><span class="op" id="7439252">.</span><span class="ident" id="7439253">RGBA</span><span class="op" id="7439257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439261">b</span>&nbsp;<span class="op" id="7439263">:=</span>&nbsp;<span class="ident" id="7439266">m</span><span class="op" id="7439267">.</span><span class="ident" id="7439268">Bounds</span><span class="op" id="7439274">(</span><span class="op" id="7439275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439279">c</span>&nbsp;<span class="op" id="7439281">:=</span>&nbsp;<span class="ident" id="7439284">color</span><span class="op" id="7439289">.</span><span class="ident" id="7439290">RGBA</span><span class="op" id="7439294">{</span><span class="num" id="7439295">11</span><span class="op" id="7439297">,</span>&nbsp;<span class="num" id="7439299">0</span><span class="op" id="7439300">,</span>&nbsp;<span class="num" id="7439302">0</span><span class="op" id="7439303">,</span>&nbsp;<span class="num" id="7439305">255</span><span class="op" id="7439308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439312">src</span>&nbsp;<span class="op" id="7439316">:=</span>&nbsp;<span class="op" id="7439319">&amp;</span><span class="ident" id="7439320">image</span><span class="op" id="7439325">.</span><span class="ident" id="7439326">Uniform</span><span class="op" id="7439333">{</span><span class="ident" id="7439334">C</span><span class="op" id="7439335">:</span>&nbsp;<span class="ident" id="7439337">c</span><span class="op" id="7439338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439342">check</span>&nbsp;<span class="op" id="7439348">:=</span>&nbsp;<span class="keyword" id="7439351">func</span><span class="op" id="7439355">(</span><span class="ident" id="7439356">desc</span>&nbsp;<span class="builtintype" id="7439361">string</span><span class="op" id="7439367">)</span>&nbsp;<span class="op" id="7439369">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439374">for</span>&nbsp;<span class="ident" id="7439378">y</span>&nbsp;<span class="op" id="7439380">:=</span>&nbsp;<span class="ident" id="7439383">b</span><span class="op" id="7439384">.</span><span class="ident" id="7439385">Min</span><span class="op" id="7439388">.</span><span class="ident" id="7439389">Y</span><span class="op" id="7439390">;</span>&nbsp;<span class="ident" id="7439392">y</span>&nbsp;<span class="op" id="7439394">&lt;</span>&nbsp;<span class="ident" id="7439396">b</span><span class="op" id="7439397">.</span><span class="ident" id="7439398">Max</span><span class="op" id="7439401">.</span><span class="ident" id="7439402">Y</span><span class="op" id="7439403">;</span>&nbsp;<span class="ident" id="7439405">y</span><span class="op" id="7439406">++</span>&nbsp;<span class="op" id="7439409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439415">for</span>&nbsp;<span class="ident" id="7439419">x</span>&nbsp;<span class="op" id="7439421">:=</span>&nbsp;<span class="ident" id="7439424">b</span><span class="op" id="7439425">.</span><span class="ident" id="7439426">Min</span><span class="op" id="7439429">.</span><span class="ident" id="7439430">X</span><span class="op" id="7439431">;</span>&nbsp;<span class="ident" id="7439433">x</span>&nbsp;<span class="op" id="7439435">&lt;</span>&nbsp;<span class="ident" id="7439437">b</span><span class="op" id="7439438">.</span><span class="ident" id="7439439">Max</span><span class="op" id="7439442">.</span><span class="ident" id="7439443">X</span><span class="op" id="7439444">;</span>&nbsp;<span class="ident" id="7439446">x</span><span class="op" id="7439447">++</span>&nbsp;<span class="op" id="7439450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439457">if</span>&nbsp;<span class="op" id="7439460">!</span><span class="ident" id="7439461">eq</span><span class="op" id="7439463">(</span><span class="ident" id="7439464">c</span><span class="op" id="7439465">,</span>&nbsp;<span class="ident" id="7439467">m</span><span class="op" id="7439468">.</span><span class="ident" id="7439469">At</span><span class="op" id="7439471">(</span><span class="ident" id="7439472">x</span><span class="op" id="7439473">,</span>&nbsp;<span class="ident" id="7439475">y</span><span class="op" id="7439476">)</span><span class="op" id="7439477">)</span>&nbsp;<span class="op" id="7439479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439487">t</span><span class="op" id="7439488">.</span><span class="ident" id="7439489">Errorf</span><span class="op" id="7439495">(</span><span class="string" id="7439496">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7439555">,</span>&nbsp;<span class="ident" id="7439557">desc</span><span class="op" id="7439561">,</span>&nbsp;<span class="ident" id="7439563">x</span><span class="op" id="7439564">,</span>&nbsp;<span class="ident" id="7439566">y</span><span class="op" id="7439567">,</span>&nbsp;<span class="ident" id="7439569">r</span><span class="op" id="7439570">,</span>&nbsp;<span class="ident" id="7439572">c</span><span class="op" id="7439573">,</span>&nbsp;<span class="ident" id="7439575">m</span><span class="op" id="7439576">.</span><span class="ident" id="7439577">At</span><span class="op" id="7439579">(</span><span class="ident" id="7439580">x</span><span class="op" id="7439581">,</span>&nbsp;<span class="ident" id="7439583">y</span><span class="op" id="7439584">)</span><span class="op" id="7439585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439593">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7439624">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439653">for</span>&nbsp;<span class="ident" id="7439657">y</span>&nbsp;<span class="op" id="7439659">:=</span>&nbsp;<span class="ident" id="7439662">b</span><span class="op" id="7439663">.</span><span class="ident" id="7439664">Min</span><span class="op" id="7439667">.</span><span class="ident" id="7439668">Y</span><span class="op" id="7439669">;</span>&nbsp;<span class="ident" id="7439671">y</span>&nbsp;<span class="op" id="7439673">&lt;</span>&nbsp;<span class="ident" id="7439675">b</span><span class="op" id="7439676">.</span><span class="ident" id="7439677">Max</span><span class="op" id="7439680">.</span><span class="ident" id="7439681">Y</span><span class="op" id="7439682">;</span>&nbsp;<span class="ident" id="7439684">y</span><span class="op" id="7439685">++</span>&nbsp;<span class="op" id="7439688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439693">for</span>&nbsp;<span class="ident" id="7439697">x</span>&nbsp;<span class="op" id="7439699">:=</span>&nbsp;<span class="ident" id="7439702">b</span><span class="op" id="7439703">.</span><span class="ident" id="7439704">Min</span><span class="op" id="7439707">.</span><span class="ident" id="7439708">X</span><span class="op" id="7439709">;</span>&nbsp;<span class="ident" id="7439711">x</span>&nbsp;<span class="op" id="7439713">&lt;</span>&nbsp;<span class="ident" id="7439715">b</span><span class="op" id="7439716">.</span><span class="ident" id="7439717">Max</span><span class="op" id="7439720">.</span><span class="ident" id="7439721">X</span><span class="op" id="7439722">;</span>&nbsp;<span class="ident" id="7439724">x</span><span class="op" id="7439725">++</span>&nbsp;<span class="op" id="7439728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439734">DrawMask</span><span class="op" id="7439742">(</span><span class="ident" id="7439743">m</span><span class="op" id="7439744">,</span>&nbsp;<span class="ident" id="7439746">image</span><span class="op" id="7439751">.</span><span class="ident" id="7439752">Rect</span><span class="op" id="7439756">(</span><span class="ident" id="7439757">x</span><span class="op" id="7439758">,</span>&nbsp;<span class="ident" id="7439760">y</span><span class="op" id="7439761">,</span>&nbsp;<span class="ident" id="7439763">x</span><span class="op" id="7439764">+</span><span class="num" id="7439765">1</span><span class="op" id="7439766">,</span>&nbsp;<span class="ident" id="7439768">y</span><span class="op" id="7439769">+</span><span class="num" id="7439770">1</span><span class="op" id="7439771">)</span><span class="op" id="7439772">,</span>&nbsp;<span class="ident" id="7439774">src</span><span class="op" id="7439777">,</span>&nbsp;<span class="ident" id="7439779">image</span><span class="op" id="7439784">.</span><span class="ident" id="7439785">ZP</span><span class="op" id="7439787">,</span>&nbsp;<span class="ident" id="7439789">nil</span><span class="op" id="7439792">,</span>&nbsp;<span class="ident" id="7439794">image</span><span class="op" id="7439799">.</span><span class="ident" id="7439800">ZP</span><span class="op" id="7439802">,</span>&nbsp;<span class="ident" id="7439804">Src</span><span class="op" id="7439807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7439816">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439820">check</span><span class="op" id="7439825">(</span><span class="string" id="7439826">&#34;pixel&#34;</span><span class="op" id="7439833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7439837">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439864">c</span>&nbsp;<span class="op" id="7439866">=</span>&nbsp;<span class="ident" id="7439868">color</span><span class="op" id="7439873">.</span><span class="ident" id="7439874">RGBA</span><span class="op" id="7439878">{</span><span class="num" id="7439879">0</span><span class="op" id="7439880">,</span>&nbsp;<span class="num" id="7439882">22</span><span class="op" id="7439884">,</span>&nbsp;<span class="num" id="7439886">0</span><span class="op" id="7439887">,</span>&nbsp;<span class="num" id="7439889">255</span><span class="op" id="7439892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439896">src</span>&nbsp;<span class="op" id="7439900">=</span>&nbsp;<span class="op" id="7439902">&amp;</span><span class="ident" id="7439903">image</span><span class="op" id="7439908">.</span><span class="ident" id="7439909">Uniform</span><span class="op" id="7439916">{</span><span class="ident" id="7439917">C</span><span class="op" id="7439918">:</span>&nbsp;<span class="ident" id="7439920">c</span><span class="op" id="7439921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7439925">for</span>&nbsp;<span class="ident" id="7439929">y</span>&nbsp;<span class="op" id="7439931">:=</span>&nbsp;<span class="ident" id="7439934">b</span><span class="op" id="7439935">.</span><span class="ident" id="7439936">Min</span><span class="op" id="7439939">.</span><span class="ident" id="7439940">Y</span><span class="op" id="7439941">;</span>&nbsp;<span class="ident" id="7439943">y</span>&nbsp;<span class="op" id="7439945">&lt;</span>&nbsp;<span class="ident" id="7439947">b</span><span class="op" id="7439948">.</span><span class="ident" id="7439949">Max</span><span class="op" id="7439952">.</span><span class="ident" id="7439953">Y</span><span class="op" id="7439954">;</span>&nbsp;<span class="ident" id="7439956">y</span><span class="op" id="7439957">++</span>&nbsp;<span class="op" id="7439960">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7439965">DrawMask</span><span class="op" id="7439973">(</span><span class="ident" id="7439974">m</span><span class="op" id="7439975">,</span>&nbsp;<span class="ident" id="7439977">image</span><span class="op" id="7439982">.</span><span class="ident" id="7439983">Rect</span><span class="op" id="7439987">(</span><span class="ident" id="7439988">b</span><span class="op" id="7439989">.</span><span class="ident" id="7439990">Min</span><span class="op" id="7439993">.</span><span class="ident" id="7439994">X</span><span class="op" id="7439995">,</span>&nbsp;<span class="ident" id="7439997">y</span><span class="op" id="7439998">,</span>&nbsp;<span class="ident" id="7440000">b</span><span class="op" id="7440001">.</span><span class="ident" id="7440002">Max</span><span class="op" id="7440005">.</span><span class="ident" id="7440006">X</span><span class="op" id="7440007">,</span>&nbsp;<span class="ident" id="7440009">y</span><span class="op" id="7440010">+</span><span class="num" id="7440011">1</span><span class="op" id="7440012">)</span><span class="op" id="7440013">,</span>&nbsp;<span class="ident" id="7440015">src</span><span class="op" id="7440018">,</span>&nbsp;<span class="ident" id="7440020">image</span><span class="op" id="7440025">.</span><span class="ident" id="7440026">ZP</span><span class="op" id="7440028">,</span>&nbsp;<span class="ident" id="7440030">nil</span><span class="op" id="7440033">,</span>&nbsp;<span class="ident" id="7440035">image</span><span class="op" id="7440040">.</span><span class="ident" id="7440041">ZP</span><span class="op" id="7440043">,</span>&nbsp;<span class="ident" id="7440045">Src</span><span class="op" id="7440048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7440052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440056">check</span><span class="op" id="7440061">(</span><span class="string" id="7440062">&#34;row&#34;</span><span class="op" id="7440067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7440071">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440101">c</span>&nbsp;<span class="op" id="7440103">=</span>&nbsp;<span class="ident" id="7440105">color</span><span class="op" id="7440110">.</span><span class="ident" id="7440111">RGBA</span><span class="op" id="7440115">{</span><span class="num" id="7440116">0</span><span class="op" id="7440117">,</span>&nbsp;<span class="num" id="7440119">0</span><span class="op" id="7440120">,</span>&nbsp;<span class="num" id="7440122">33</span><span class="op" id="7440124">,</span>&nbsp;<span class="num" id="7440126">255</span><span class="op" id="7440129">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440133">src</span>&nbsp;<span class="op" id="7440137">=</span>&nbsp;<span class="op" id="7440139">&amp;</span><span class="ident" id="7440140">image</span><span class="op" id="7440145">.</span><span class="ident" id="7440146">Uniform</span><span class="op" id="7440153">{</span><span class="ident" id="7440154">C</span><span class="op" id="7440155">:</span>&nbsp;<span class="ident" id="7440157">c</span><span class="op" id="7440158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7440162">for</span>&nbsp;<span class="ident" id="7440166">x</span>&nbsp;<span class="op" id="7440168">:=</span>&nbsp;<span class="ident" id="7440171">b</span><span class="op" id="7440172">.</span><span class="ident" id="7440173">Min</span><span class="op" id="7440176">.</span><span class="ident" id="7440177">X</span><span class="op" id="7440178">;</span>&nbsp;<span class="ident" id="7440180">x</span>&nbsp;<span class="op" id="7440182">&lt;</span>&nbsp;<span class="ident" id="7440184">b</span><span class="op" id="7440185">.</span><span class="ident" id="7440186">Max</span><span class="op" id="7440189">.</span><span class="ident" id="7440190">X</span><span class="op" id="7440191">;</span>&nbsp;<span class="ident" id="7440193">x</span><span class="op" id="7440194">++</span>&nbsp;<span class="op" id="7440197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440202">DrawMask</span><span class="op" id="7440210">(</span><span class="ident" id="7440211">m</span><span class="op" id="7440212">,</span>&nbsp;<span class="ident" id="7440214">image</span><span class="op" id="7440219">.</span><span class="ident" id="7440220">Rect</span><span class="op" id="7440224">(</span><span class="ident" id="7440225">x</span><span class="op" id="7440226">,</span>&nbsp;<span class="ident" id="7440228">b</span><span class="op" id="7440229">.</span><span class="ident" id="7440230">Min</span><span class="op" id="7440233">.</span><span class="ident" id="7440234">Y</span><span class="op" id="7440235">,</span>&nbsp;<span class="ident" id="7440237">x</span><span class="op" id="7440238">+</span><span class="num" id="7440239">1</span><span class="op" id="7440240">,</span>&nbsp;<span class="ident" id="7440242">b</span><span class="op" id="7440243">.</span><span class="ident" id="7440244">Max</span><span class="op" id="7440247">.</span><span class="ident" id="7440248">Y</span><span class="op" id="7440249">)</span><span class="op" id="7440250">,</span>&nbsp;<span class="ident" id="7440252">src</span><span class="op" id="7440255">,</span>&nbsp;<span class="ident" id="7440257">image</span><span class="op" id="7440262">.</span><span class="ident" id="7440263">ZP</span><span class="op" id="7440265">,</span>&nbsp;<span class="ident" id="7440267">nil</span><span class="op" id="7440270">,</span>&nbsp;<span class="ident" id="7440272">image</span><span class="op" id="7440277">.</span><span class="ident" id="7440278">ZP</span><span class="op" id="7440280">,</span>&nbsp;<span class="ident" id="7440282">Src</span><span class="op" id="7440285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7440289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440293">check</span><span class="op" id="7440298">(</span><span class="string" id="7440299">&#34;column&#34;</span><span class="op" id="7440307">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7440311">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440346">c</span>&nbsp;<span class="op" id="7440348">=</span>&nbsp;<span class="ident" id="7440350">color</span><span class="op" id="7440355">.</span><span class="ident" id="7440356">RGBA</span><span class="op" id="7440360">{</span><span class="num" id="7440361">44</span><span class="op" id="7440363">,</span>&nbsp;<span class="num" id="7440365">55</span><span class="op" id="7440367">,</span>&nbsp;<span class="num" id="7440369">66</span><span class="op" id="7440371">,</span>&nbsp;<span class="num" id="7440373">77</span><span class="op" id="7440375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440379">src</span>&nbsp;<span class="op" id="7440383">=</span>&nbsp;<span class="op" id="7440385">&amp;</span><span class="ident" id="7440386">image</span><span class="op" id="7440391">.</span><span class="ident" id="7440392">Uniform</span><span class="op" id="7440399">{</span><span class="ident" id="7440400">C</span><span class="op" id="7440401">:</span>&nbsp;<span class="ident" id="7440403">c</span><span class="op" id="7440404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440408">DrawMask</span><span class="op" id="7440416">(</span><span class="ident" id="7440417">m</span><span class="op" id="7440418">,</span>&nbsp;<span class="ident" id="7440420">b</span><span class="op" id="7440421">,</span>&nbsp;<span class="ident" id="7440423">src</span><span class="op" id="7440426">,</span>&nbsp;<span class="ident" id="7440428">image</span><span class="op" id="7440433">.</span><span class="ident" id="7440434">ZP</span><span class="op" id="7440436">,</span>&nbsp;<span class="ident" id="7440438">nil</span><span class="op" id="7440441">,</span>&nbsp;<span class="ident" id="7440443">image</span><span class="op" id="7440448">.</span><span class="ident" id="7440449">ZP</span><span class="op" id="7440451">,</span>&nbsp;<span class="ident" id="7440453">Src</span><span class="op" id="7440456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440460">check</span><span class="op" id="7440465">(</span><span class="string" id="7440466">&#34;whole&#34;</span><span class="op" id="7440473">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7440476">}</span><br>
<span class="lineno"></span><span class="op" id="7440478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7440481">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="7440556">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="7440633">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="7440671">func</span>&nbsp;<span class="ident" id="7440676">TestFloydSteinbergCheckerboard</span><span class="op" id="7440706">(</span><span class="ident" id="7440707">t</span>&nbsp;<span class="op" id="7440709">*</span><span class="ident" id="7440710">testing</span><span class="op" id="7440717">.</span><span class="ident" id="7440718">T</span><span class="op" id="7440719">)</span>&nbsp;<span class="op" id="7440721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440724">b</span>&nbsp;<span class="op" id="7440726">:=</span>&nbsp;<span class="ident" id="7440729">image</span><span class="op" id="7440734">.</span><span class="ident" id="7440735">Rect</span><span class="op" id="7440739">(</span><span class="num" id="7440740">0</span><span class="op" id="7440741">,</span>&nbsp;<span class="num" id="7440743">0</span><span class="op" id="7440744">,</span>&nbsp;<span class="num" id="7440746">640</span><span class="op" id="7440749">,</span>&nbsp;<span class="num" id="7440751">480</span><span class="op" id="7440754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7440757">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440830">src</span>&nbsp;<span class="op" id="7440834">:=</span>&nbsp;<span class="op" id="7440837">&amp;</span><span class="ident" id="7440838">image</span><span class="op" id="7440843">.</span><span class="ident" id="7440844">Uniform</span><span class="op" id="7440851">{</span><span class="ident" id="7440852">color</span><span class="op" id="7440857">.</span><span class="ident" id="7440858">Gray16</span><span class="op" id="7440864">{</span><span class="num" id="7440865">0x7fff</span><span class="op" id="7440871">}</span><span class="op" id="7440872">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440875">dst</span>&nbsp;<span class="op" id="7440879">:=</span>&nbsp;<span class="ident" id="7440882">image</span><span class="op" id="7440887">.</span><span class="ident" id="7440888">NewPaletted</span><span class="op" id="7440899">(</span><span class="ident" id="7440900">b</span><span class="op" id="7440901">,</span>&nbsp;<span class="ident" id="7440903">color</span><span class="op" id="7440908">.</span><span class="ident" id="7440909">Palette</span><span class="op" id="7440916">{</span><span class="ident" id="7440917">color</span><span class="op" id="7440922">.</span><span class="ident" id="7440923">Black</span><span class="op" id="7440928">,</span>&nbsp;<span class="ident" id="7440930">color</span><span class="op" id="7440935">.</span><span class="ident" id="7440936">White</span><span class="op" id="7440941">}</span><span class="op" id="7440942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440945">FloydSteinberg</span><span class="op" id="7440959">.</span><span class="ident" id="7440960">Draw</span><span class="op" id="7440964">(</span><span class="ident" id="7440965">dst</span><span class="op" id="7440968">,</span>&nbsp;<span class="ident" id="7440970">b</span><span class="op" id="7440971">,</span>&nbsp;<span class="ident" id="7440973">src</span><span class="op" id="7440976">,</span>&nbsp;<span class="ident" id="7440978">image</span><span class="op" id="7440983">.</span><span class="ident" id="7440984">Point</span><span class="op" id="7440989">{</span><span class="op" id="7440990">}</span><span class="op" id="7440991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7440994">nErr</span>&nbsp;<span class="op" id="7440999">:=</span>&nbsp;<span class="num" id="7441002">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441005">for</span>&nbsp;<span class="ident" id="7441009">y</span>&nbsp;<span class="op" id="7441011">:=</span>&nbsp;<span class="ident" id="7441014">b</span><span class="op" id="7441015">.</span><span class="ident" id="7441016">Min</span><span class="op" id="7441019">.</span><span class="ident" id="7441020">Y</span><span class="op" id="7441021">;</span>&nbsp;<span class="ident" id="7441023">y</span>&nbsp;<span class="op" id="7441025">&lt;</span>&nbsp;<span class="ident" id="7441027">b</span><span class="op" id="7441028">.</span><span class="ident" id="7441029">Max</span><span class="op" id="7441032">.</span><span class="ident" id="7441033">Y</span><span class="op" id="7441034">;</span>&nbsp;<span class="ident" id="7441036">y</span><span class="op" id="7441037">++</span>&nbsp;<span class="op" id="7441040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441044">for</span>&nbsp;<span class="ident" id="7441048">x</span>&nbsp;<span class="op" id="7441050">:=</span>&nbsp;<span class="ident" id="7441053">b</span><span class="op" id="7441054">.</span><span class="ident" id="7441055">Min</span><span class="op" id="7441058">.</span><span class="ident" id="7441059">X</span><span class="op" id="7441060">;</span>&nbsp;<span class="ident" id="7441062">x</span>&nbsp;<span class="op" id="7441064">&lt;</span>&nbsp;<span class="ident" id="7441066">b</span><span class="op" id="7441067">.</span><span class="ident" id="7441068">Max</span><span class="op" id="7441071">.</span><span class="ident" id="7441072">X</span><span class="op" id="7441073">;</span>&nbsp;<span class="ident" id="7441075">x</span><span class="op" id="7441076">++</span>&nbsp;<span class="op" id="7441079">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441084">got</span>&nbsp;<span class="op" id="7441088">:=</span>&nbsp;<span class="ident" id="7441091">dst</span><span class="op" id="7441094">.</span><span class="ident" id="7441095">Pix</span><span class="op" id="7441098">[</span><span class="ident" id="7441099">dst</span><span class="op" id="7441102">.</span><span class="ident" id="7441103">PixOffset</span><span class="op" id="7441112">(</span><span class="ident" id="7441113">x</span><span class="op" id="7441114">,</span>&nbsp;<span class="ident" id="7441116">y</span><span class="op" id="7441117">)</span><span class="op" id="7441118">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441123">want</span>&nbsp;<span class="op" id="7441128">:=</span>&nbsp;<span class="builtintype" id="7441131">uint8</span><span class="op" id="7441136">(</span><span class="ident" id="7441137">x</span><span class="op" id="7441138">+</span><span class="ident" id="7441139">y</span><span class="op" id="7441140">)</span>&nbsp;<span class="op" id="7441142">%</span>&nbsp;<span class="num" id="7441144">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441149">if</span>&nbsp;<span class="ident" id="7441152">got</span>&nbsp;<span class="op" id="7441156">!=</span>&nbsp;<span class="ident" id="7441159">want</span>&nbsp;<span class="op" id="7441164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441170">t</span><span class="op" id="7441171">.</span><span class="ident" id="7441172">Errorf</span><span class="op" id="7441178">(</span><span class="string" id="7441179">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7441209">,</span>&nbsp;<span class="ident" id="7441211">x</span><span class="op" id="7441212">,</span>&nbsp;<span class="ident" id="7441214">y</span><span class="op" id="7441215">,</span>&nbsp;<span class="ident" id="7441217">got</span><span class="op" id="7441220">,</span>&nbsp;<span class="ident" id="7441222">want</span><span class="op" id="7441226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441232">if</span>&nbsp;<span class="ident" id="7441235">nErr</span><span class="op" id="7441239">++</span><span class="op" id="7441241">;</span>&nbsp;<span class="ident" id="7441243">nErr</span>&nbsp;<span class="op" id="7441248">==</span>&nbsp;<span class="num" id="7441251">10</span>&nbsp;<span class="op" id="7441254">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441261">t</span><span class="op" id="7441262">.</span><span class="ident" id="7441263">Fatal</span><span class="op" id="7441268">(</span><span class="string" id="7441269">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="7441295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441313">}</span><br>
<span class="lineno">380</span><span class="op" id="7441315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7441318">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="7441397">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="7441429">type</span>&nbsp;<span class="ident" id="7441434">embeddedPaletted</span>&nbsp;<span class="keyword" id="7441451">struct</span>&nbsp;<span class="op" id="7441458">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441461">*</span><span class="ident" id="7441462">image</span><span class="op" id="7441467">.</span><span class="ident" id="7441468">Paletted</span><br>
<span class="lineno"></span><span class="op" id="7441477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7441480">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="7441550">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="7441602">func</span>&nbsp;<span class="ident" id="7441607">TestPaletted</span><span class="op" id="7441619">(</span><span class="ident" id="7441620">t</span>&nbsp;<span class="op" id="7441622">*</span><span class="ident" id="7441623">testing</span><span class="op" id="7441630">.</span><span class="ident" id="7441631">T</span><span class="op" id="7441632">)</span>&nbsp;<span class="op" id="7441634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441637">f</span><span class="op" id="7441638">,</span>&nbsp;<span class="ident" id="7441640">err</span>&nbsp;<span class="op" id="7441644">:=</span>&nbsp;<span class="ident" id="7441647">os</span><span class="op" id="7441649">.</span><span class="ident" id="7441650">Open</span><span class="op" id="7441654">(</span><span class="string" id="7441655">&#34;../testdata/video-001.png&#34;</span><span class="op" id="7441682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441685">if</span>&nbsp;<span class="ident" id="7441688">err</span>&nbsp;<span class="op" id="7441692">!=</span>&nbsp;<span class="ident" id="7441695">nil</span>&nbsp;<span class="op" id="7441699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441703">t</span><span class="op" id="7441704">.</span><span class="ident" id="7441705">Fatalf</span><span class="op" id="7441711">(</span><span class="string" id="7441712">&#34;open:&nbsp;%v&#34;</span><span class="op" id="7441722">,</span>&nbsp;<span class="ident" id="7441724">err</span><span class="op" id="7441727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441730">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441733">defer</span>&nbsp;<span class="ident" id="7441739">f</span><span class="op" id="7441740">.</span><span class="ident" id="7441741">Close</span><span class="op" id="7441746">(</span><span class="op" id="7441747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441750">src</span><span class="op" id="7441753">,</span>&nbsp;<span class="ident" id="7441755">err</span>&nbsp;<span class="op" id="7441759">:=</span>&nbsp;<span class="ident" id="7441762">png</span><span class="op" id="7441765">.</span><span class="ident" id="7441766">Decode</span><span class="op" id="7441772">(</span><span class="ident" id="7441773">f</span><span class="op" id="7441774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7441777">if</span>&nbsp;<span class="ident" id="7441780">err</span>&nbsp;<span class="op" id="7441784">!=</span>&nbsp;<span class="ident" id="7441787">nil</span>&nbsp;<span class="op" id="7441791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441795">t</span><span class="op" id="7441796">.</span><span class="ident" id="7441797">Fatalf</span><span class="op" id="7441803">(</span><span class="string" id="7441804">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7441816">,</span>&nbsp;<span class="ident" id="7441818">err</span><span class="op" id="7441821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7441824">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441827">b</span>&nbsp;<span class="op" id="7441829">:=</span>&nbsp;<span class="ident" id="7441832">src</span><span class="op" id="7441835">.</span><span class="ident" id="7441836">Bounds</span><span class="op" id="7441842">(</span><span class="op" id="7441843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441847">cgaPalette</span>&nbsp;<span class="op" id="7441858">:=</span>&nbsp;<span class="ident" id="7441861">color</span><span class="op" id="7441866">.</span><span class="ident" id="7441867">Palette</span><span class="op" id="7441874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441878">color</span><span class="op" id="7441883">.</span><span class="ident" id="7441884">RGBA</span><span class="op" id="7441888">{</span><span class="num" id="7441889">0x00</span><span class="op" id="7441893">,</span>&nbsp;<span class="num" id="7441895">0x00</span><span class="op" id="7441899">,</span>&nbsp;<span class="num" id="7441901">0x00</span><span class="op" id="7441905">,</span>&nbsp;<span class="num" id="7441907">0xff</span><span class="op" id="7441911">}</span><span class="op" id="7441912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441916">color</span><span class="op" id="7441921">.</span><span class="ident" id="7441922">RGBA</span><span class="op" id="7441926">{</span><span class="num" id="7441927">0x55</span><span class="op" id="7441931">,</span>&nbsp;<span class="num" id="7441933">0xff</span><span class="op" id="7441937">,</span>&nbsp;<span class="num" id="7441939">0xff</span><span class="op" id="7441943">,</span>&nbsp;<span class="num" id="7441945">0xff</span><span class="op" id="7441949">}</span><span class="op" id="7441950">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441954">color</span><span class="op" id="7441959">.</span><span class="ident" id="7441960">RGBA</span><span class="op" id="7441964">{</span><span class="num" id="7441965">0xff</span><span class="op" id="7441969">,</span>&nbsp;<span class="num" id="7441971">0x55</span><span class="op" id="7441975">,</span>&nbsp;<span class="num" id="7441977">0xff</span><span class="op" id="7441981">,</span>&nbsp;<span class="num" id="7441983">0xff</span><span class="op" id="7441987">}</span><span class="op" id="7441988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7441992">color</span><span class="op" id="7441997">.</span><span class="ident" id="7441998">RGBA</span><span class="op" id="7442002">{</span><span class="num" id="7442003">0xff</span><span class="op" id="7442007">,</span>&nbsp;<span class="num" id="7442009">0xff</span><span class="op" id="7442013">,</span>&nbsp;<span class="num" id="7442015">0xff</span><span class="op" id="7442019">,</span>&nbsp;<span class="num" id="7442021">0xff</span><span class="op" id="7442025">}</span><span class="op" id="7442026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442032">drawers</span>&nbsp;<span class="op" id="7442040">:=</span>&nbsp;<span class="keyword" id="7442043">map</span><span class="op" id="7442046">[</span><span class="builtintype" id="7442047">string</span><span class="op" id="7442053">]</span><span class="ident" id="7442054">Drawer</span><span class="op" id="7442060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7442064">&#34;src&#34;</span><span class="op" id="7442069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442083">Src</span><span class="op" id="7442086">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7442090">&#34;floyd-steinberg&#34;</span><span class="op" id="7442107">:</span>&nbsp;<span class="ident" id="7442109">FloydSteinberg</span><span class="op" id="7442123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="7442129">loop</span><span class="op" id="7442133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442136">for</span>&nbsp;<span class="ident" id="7442140">dName</span><span class="op" id="7442145">,</span>&nbsp;<span class="ident" id="7442147">d</span>&nbsp;<span class="op" id="7442149">:=</span>&nbsp;<span class="keyword" id="7442152">range</span>&nbsp;<span class="ident" id="7442158">drawers</span>&nbsp;<span class="op" id="7442166">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442170">dst0</span>&nbsp;<span class="op" id="7442175">:=</span>&nbsp;<span class="ident" id="7442178">image</span><span class="op" id="7442183">.</span><span class="ident" id="7442184">NewPaletted</span><span class="op" id="7442195">(</span><span class="ident" id="7442196">b</span><span class="op" id="7442197">,</span>&nbsp;<span class="ident" id="7442199">cgaPalette</span><span class="op" id="7442209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442213">dst1</span>&nbsp;<span class="op" id="7442218">:=</span>&nbsp;<span class="ident" id="7442221">image</span><span class="op" id="7442226">.</span><span class="ident" id="7442227">NewPaletted</span><span class="op" id="7442238">(</span><span class="ident" id="7442239">b</span><span class="op" id="7442240">,</span>&nbsp;<span class="ident" id="7442242">cgaPalette</span><span class="op" id="7442252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442256">d</span><span class="op" id="7442257">.</span><span class="ident" id="7442258">Draw</span><span class="op" id="7442262">(</span><span class="ident" id="7442263">dst0</span><span class="op" id="7442267">,</span>&nbsp;<span class="ident" id="7442269">b</span><span class="op" id="7442270">,</span>&nbsp;<span class="ident" id="7442272">src</span><span class="op" id="7442275">,</span>&nbsp;<span class="ident" id="7442277">image</span><span class="op" id="7442282">.</span><span class="ident" id="7442283">Point</span><span class="op" id="7442288">{</span><span class="op" id="7442289">}</span><span class="op" id="7442290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442294">d</span><span class="op" id="7442295">.</span><span class="ident" id="7442296">Draw</span><span class="op" id="7442300">(</span><span class="ident" id="7442301">embeddedPaletted</span><span class="op" id="7442317">{</span><span class="ident" id="7442318">dst1</span><span class="op" id="7442322">}</span><span class="op" id="7442323">,</span>&nbsp;<span class="ident" id="7442325">b</span><span class="op" id="7442326">,</span>&nbsp;<span class="ident" id="7442328">src</span><span class="op" id="7442331">,</span>&nbsp;<span class="ident" id="7442333">image</span><span class="op" id="7442338">.</span><span class="ident" id="7442339">Point</span><span class="op" id="7442344">{</span><span class="op" id="7442345">}</span><span class="op" id="7442346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442350">for</span>&nbsp;<span class="ident" id="7442354">y</span>&nbsp;<span class="op" id="7442356">:=</span>&nbsp;<span class="ident" id="7442359">b</span><span class="op" id="7442360">.</span><span class="ident" id="7442361">Min</span><span class="op" id="7442364">.</span><span class="ident" id="7442365">Y</span><span class="op" id="7442366">;</span>&nbsp;<span class="ident" id="7442368">y</span>&nbsp;<span class="op" id="7442370">&lt;</span>&nbsp;<span class="ident" id="7442372">b</span><span class="op" id="7442373">.</span><span class="ident" id="7442374">Max</span><span class="op" id="7442377">.</span><span class="ident" id="7442378">Y</span><span class="op" id="7442379">;</span>&nbsp;<span class="ident" id="7442381">y</span><span class="op" id="7442382">++</span>&nbsp;<span class="op" id="7442385">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442390">for</span>&nbsp;<span class="ident" id="7442394">x</span>&nbsp;<span class="op" id="7442396">:=</span>&nbsp;<span class="ident" id="7442399">b</span><span class="op" id="7442400">.</span><span class="ident" id="7442401">Min</span><span class="op" id="7442404">.</span><span class="ident" id="7442405">X</span><span class="op" id="7442406">;</span>&nbsp;<span class="ident" id="7442408">x</span>&nbsp;<span class="op" id="7442410">&lt;</span>&nbsp;<span class="ident" id="7442412">b</span><span class="op" id="7442413">.</span><span class="ident" id="7442414">Max</span><span class="op" id="7442417">.</span><span class="ident" id="7442418">X</span><span class="op" id="7442419">;</span>&nbsp;<span class="ident" id="7442421">x</span><span class="op" id="7442422">++</span>&nbsp;<span class="op" id="7442425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442431">if</span>&nbsp;<span class="op" id="7442434">!</span><span class="ident" id="7442435">eq</span><span class="op" id="7442437">(</span><span class="ident" id="7442438">dst0</span><span class="op" id="7442442">.</span><span class="ident" id="7442443">At</span><span class="op" id="7442445">(</span><span class="ident" id="7442446">x</span><span class="op" id="7442447">,</span>&nbsp;<span class="ident" id="7442449">y</span><span class="op" id="7442450">)</span><span class="op" id="7442451">,</span>&nbsp;<span class="ident" id="7442453">dst1</span><span class="op" id="7442457">.</span><span class="ident" id="7442458">At</span><span class="op" id="7442460">(</span><span class="ident" id="7442461">x</span><span class="op" id="7442462">,</span>&nbsp;<span class="ident" id="7442464">y</span><span class="op" id="7442465">)</span><span class="op" id="7442466">)</span>&nbsp;<span class="op" id="7442468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442475">t</span><span class="op" id="7442476">.</span><span class="ident" id="7442477">Errorf</span><span class="op" id="7442483">(</span><span class="string" id="7442484">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7442515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7442523">dName</span><span class="op" id="7442528">,</span>&nbsp;<span class="ident" id="7442530">x</span><span class="op" id="7442531">,</span>&nbsp;<span class="ident" id="7442533">y</span><span class="op" id="7442534">,</span>&nbsp;<span class="ident" id="7442536">dst0</span><span class="op" id="7442540">.</span><span class="ident" id="7442541">At</span><span class="op" id="7442543">(</span><span class="ident" id="7442544">x</span><span class="op" id="7442545">,</span>&nbsp;<span class="ident" id="7442547">y</span><span class="op" id="7442548">)</span><span class="op" id="7442549">,</span>&nbsp;<span class="ident" id="7442551">dst1</span><span class="op" id="7442555">.</span><span class="ident" id="7442556">At</span><span class="op" id="7442558">(</span><span class="ident" id="7442559">x</span><span class="op" id="7442560">,</span>&nbsp;<span class="ident" id="7442562">y</span><span class="op" id="7442563">)</span><span class="op" id="7442564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7442571">continue</span>&nbsp;<span class="ident" id="7442580">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7442601">}</span><br>
<span class="lineno"></span><span class="op" id="7442603">}</span>
</div>
</body>
</html>
