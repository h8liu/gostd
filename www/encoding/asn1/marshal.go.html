<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4234920">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4234975">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4235029">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4235080">package</span>&nbsp;<span class="ident" id="4235088">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4235094">import</span>&nbsp;<span class="op" id="4235101">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235104">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235113">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235123">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235130">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235136">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235148">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235159">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4235167">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4235182">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4235185">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4235240">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4235299">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4235319">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4235348">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4235418">type</span>&nbsp;<span class="ident" id="4235423">forkableWriter</span>&nbsp;<span class="keyword" id="4235438">struct</span>&nbsp;<span class="op" id="4235445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4235448">*</span><span class="ident" id="4235449">bytes</span><span class="op" id="4235454">.</span><span class="ident" id="4235455">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235463">pre</span><span class="op" id="4235466">,</span>&nbsp;<span class="ident" id="4235468">post</span>&nbsp;<span class="op" id="4235473">*</span><span class="ident" id="4235474">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4235489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4235492">func</span>&nbsp;<span class="ident" id="4235497">newForkableWriter</span><span class="op" id="4235514">(</span><span class="op" id="4235515">)</span>&nbsp;<span class="op" id="4235517">*</span><span class="ident" id="4235518">forkableWriter</span>&nbsp;<span class="op" id="4235533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235536">return</span>&nbsp;<span class="op" id="4235543">&amp;</span><span class="ident" id="4235544">forkableWriter</span><span class="op" id="4235558">{</span><span class="builtinfunc" id="4235559">new</span><span class="op" id="4235562">(</span><span class="ident" id="4235563">bytes</span><span class="op" id="4235568">.</span><span class="ident" id="4235569">Buffer</span><span class="op" id="4235575">)</span><span class="op" id="4235576">,</span>&nbsp;<span class="ident" id="4235578">nil</span><span class="op" id="4235581">,</span>&nbsp;<span class="ident" id="4235583">nil</span><span class="op" id="4235586">}</span><br>
<span class="lineno">30</span><span class="op" id="4235588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4235591">func</span>&nbsp;<span class="op" id="4235596">(</span><span class="ident" id="4235597">f</span>&nbsp;<span class="op" id="4235599">*</span><span class="ident" id="4235600">forkableWriter</span><span class="op" id="4235614">)</span>&nbsp;<span class="ident" id="4235616">fork</span><span class="op" id="4235620">(</span><span class="op" id="4235621">)</span>&nbsp;<span class="op" id="4235623">(</span><span class="ident" id="4235624">pre</span><span class="op" id="4235627">,</span>&nbsp;<span class="ident" id="4235629">post</span>&nbsp;<span class="op" id="4235634">*</span><span class="ident" id="4235635">forkableWriter</span><span class="op" id="4235649">)</span>&nbsp;<span class="op" id="4235651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235654">if</span>&nbsp;<span class="ident" id="4235657">f</span><span class="op" id="4235658">.</span><span class="ident" id="4235659">pre</span>&nbsp;<span class="op" id="4235663">!=</span>&nbsp;<span class="ident" id="4235666">nil</span>&nbsp;<span class="op" id="4235670">||</span>&nbsp;<span class="ident" id="4235673">f</span><span class="op" id="4235674">.</span><span class="ident" id="4235675">post</span>&nbsp;<span class="op" id="4235680">!=</span>&nbsp;<span class="ident" id="4235683">nil</span>&nbsp;<span class="op" id="4235687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4235691">panic</span><span class="op" id="4235696">(</span><span class="string" id="4235697">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4235718">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4235721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235724">f</span><span class="op" id="4235725">.</span><span class="ident" id="4235726">pre</span>&nbsp;<span class="op" id="4235730">=</span>&nbsp;<span class="ident" id="4235732">newForkableWriter</span><span class="op" id="4235749">(</span><span class="op" id="4235750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235753">f</span><span class="op" id="4235754">.</span><span class="ident" id="4235755">post</span>&nbsp;<span class="op" id="4235760">=</span>&nbsp;<span class="ident" id="4235762">newForkableWriter</span><span class="op" id="4235779">(</span><span class="op" id="4235780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235783">return</span>&nbsp;<span class="ident" id="4235790">f</span><span class="op" id="4235791">.</span><span class="ident" id="4235792">pre</span><span class="op" id="4235795">,</span>&nbsp;<span class="ident" id="4235797">f</span><span class="op" id="4235798">.</span><span class="ident" id="4235799">post</span><br>
<span class="lineno"></span><span class="op" id="4235804">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4235807">func</span>&nbsp;<span class="op" id="4235812">(</span><span class="ident" id="4235813">f</span>&nbsp;<span class="op" id="4235815">*</span><span class="ident" id="4235816">forkableWriter</span><span class="op" id="4235830">)</span>&nbsp;<span class="ident" id="4235832">Len</span><span class="op" id="4235835">(</span><span class="op" id="4235836">)</span>&nbsp;<span class="op" id="4235838">(</span><span class="ident" id="4235839">l</span>&nbsp;<span class="builtintype" id="4235841">int</span><span class="op" id="4235844">)</span>&nbsp;<span class="op" id="4235846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235849">l</span>&nbsp;<span class="op" id="4235851">+=</span>&nbsp;<span class="ident" id="4235854">f</span><span class="op" id="4235855">.</span><span class="ident" id="4235856">Buffer</span><span class="op" id="4235862">.</span><span class="ident" id="4235863">Len</span><span class="op" id="4235866">(</span><span class="op" id="4235867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235870">if</span>&nbsp;<span class="ident" id="4235873">f</span><span class="op" id="4235874">.</span><span class="ident" id="4235875">pre</span>&nbsp;<span class="op" id="4235879">!=</span>&nbsp;<span class="ident" id="4235882">nil</span>&nbsp;<span class="op" id="4235886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235890">l</span>&nbsp;<span class="op" id="4235892">+=</span>&nbsp;<span class="ident" id="4235895">f</span><span class="op" id="4235896">.</span><span class="ident" id="4235897">pre</span><span class="op" id="4235900">.</span><span class="ident" id="4235901">Len</span><span class="op" id="4235904">(</span><span class="op" id="4235905">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4235908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235911">if</span>&nbsp;<span class="ident" id="4235914">f</span><span class="op" id="4235915">.</span><span class="ident" id="4235916">post</span>&nbsp;<span class="op" id="4235921">!=</span>&nbsp;<span class="ident" id="4235924">nil</span>&nbsp;<span class="op" id="4235928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4235932">l</span>&nbsp;<span class="op" id="4235934">+=</span>&nbsp;<span class="ident" id="4235937">f</span><span class="op" id="4235938">.</span><span class="ident" id="4235939">post</span><span class="op" id="4235943">.</span><span class="ident" id="4235944">Len</span><span class="op" id="4235947">(</span><span class="op" id="4235948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4235951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4235954">return</span><br>
<span class="lineno">50</span><span class="op" id="4235961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4235964">func</span>&nbsp;<span class="op" id="4235969">(</span><span class="ident" id="4235970">f</span>&nbsp;<span class="op" id="4235972">*</span><span class="ident" id="4235973">forkableWriter</span><span class="op" id="4235987">)</span>&nbsp;<span class="ident" id="4235989">writeTo</span><span class="op" id="4235996">(</span><span class="ident" id="4235997">out</span>&nbsp;<span class="ident" id="4236001">io</span><span class="op" id="4236003">.</span><span class="ident" id="4236004">Writer</span><span class="op" id="4236010">)</span>&nbsp;<span class="op" id="4236012">(</span><span class="ident" id="4236013">n</span>&nbsp;<span class="builtintype" id="4236015">int</span><span class="op" id="4236018">,</span>&nbsp;<span class="ident" id="4236020">err</span>&nbsp;<span class="builtintype" id="4236024">error</span><span class="op" id="4236029">)</span>&nbsp;<span class="op" id="4236031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236034">n</span><span class="op" id="4236035">,</span>&nbsp;<span class="ident" id="4236037">err</span>&nbsp;<span class="op" id="4236041">=</span>&nbsp;<span class="ident" id="4236043">out</span><span class="op" id="4236046">.</span><span class="ident" id="4236047">Write</span><span class="op" id="4236052">(</span><span class="ident" id="4236053">f</span><span class="op" id="4236054">.</span><span class="ident" id="4236055">Bytes</span><span class="op" id="4236060">(</span><span class="op" id="4236061">)</span><span class="op" id="4236062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236065">if</span>&nbsp;<span class="ident" id="4236068">err</span>&nbsp;<span class="op" id="4236072">!=</span>&nbsp;<span class="ident" id="4236075">nil</span>&nbsp;<span class="op" id="4236079">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236083">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236095">var</span>&nbsp;<span class="ident" id="4236099">nn</span>&nbsp;<span class="builtintype" id="4236102">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236108">if</span>&nbsp;<span class="ident" id="4236111">f</span><span class="op" id="4236112">.</span><span class="ident" id="4236113">pre</span>&nbsp;<span class="op" id="4236117">!=</span>&nbsp;<span class="ident" id="4236120">nil</span>&nbsp;<span class="op" id="4236124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236128">nn</span><span class="op" id="4236130">,</span>&nbsp;<span class="ident" id="4236132">err</span>&nbsp;<span class="op" id="4236136">=</span>&nbsp;<span class="ident" id="4236138">f</span><span class="op" id="4236139">.</span><span class="ident" id="4236140">pre</span><span class="op" id="4236143">.</span><span class="ident" id="4236144">writeTo</span><span class="op" id="4236151">(</span><span class="ident" id="4236152">out</span><span class="op" id="4236155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236159">n</span>&nbsp;<span class="op" id="4236161">+=</span>&nbsp;<span class="ident" id="4236164">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236169">if</span>&nbsp;<span class="ident" id="4236172">err</span>&nbsp;<span class="op" id="4236176">!=</span>&nbsp;<span class="ident" id="4236179">nil</span>&nbsp;<span class="op" id="4236183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236188">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236204">if</span>&nbsp;<span class="ident" id="4236207">f</span><span class="op" id="4236208">.</span><span class="ident" id="4236209">post</span>&nbsp;<span class="op" id="4236214">!=</span>&nbsp;<span class="ident" id="4236217">nil</span>&nbsp;<span class="op" id="4236221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236225">nn</span><span class="op" id="4236227">,</span>&nbsp;<span class="ident" id="4236229">err</span>&nbsp;<span class="op" id="4236233">=</span>&nbsp;<span class="ident" id="4236235">f</span><span class="op" id="4236236">.</span><span class="ident" id="4236237">post</span><span class="op" id="4236241">.</span><span class="ident" id="4236242">writeTo</span><span class="op" id="4236249">(</span><span class="ident" id="4236250">out</span><span class="op" id="4236253">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236257">n</span>&nbsp;<span class="op" id="4236259">+=</span>&nbsp;<span class="ident" id="4236262">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236269">return</span><br>
<span class="lineno"></span><span class="op" id="4236276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4236279">func</span>&nbsp;<span class="ident" id="4236284">marshalBase128Int</span><span class="op" id="4236301">(</span><span class="ident" id="4236302">out</span>&nbsp;<span class="op" id="4236306">*</span><span class="ident" id="4236307">forkableWriter</span><span class="op" id="4236321">,</span>&nbsp;<span class="ident" id="4236323">n</span>&nbsp;<span class="ident" id="4236325">int64</span><span class="op" id="4236330">)</span>&nbsp;<span class="op" id="4236332">(</span><span class="ident" id="4236333">err</span>&nbsp;<span class="builtintype" id="4236337">error</span><span class="op" id="4236342">)</span>&nbsp;<span class="op" id="4236344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236347">if</span>&nbsp;<span class="ident" id="4236350">n</span>&nbsp;<span class="op" id="4236352">==</span>&nbsp;<span class="num" id="4236355">0</span>&nbsp;<span class="op" id="4236357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236361">err</span>&nbsp;<span class="op" id="4236365">=</span>&nbsp;<span class="ident" id="4236367">out</span><span class="op" id="4236370">.</span><span class="ident" id="4236371">WriteByte</span><span class="op" id="4236380">(</span><span class="num" id="4236381">0</span><span class="op" id="4236382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236386">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236394">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236398">l</span>&nbsp;<span class="op" id="4236400">:=</span>&nbsp;<span class="num" id="4236403">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236406">for</span>&nbsp;<span class="ident" id="4236410">i</span>&nbsp;<span class="op" id="4236412">:=</span>&nbsp;<span class="ident" id="4236415">n</span><span class="op" id="4236416">;</span>&nbsp;<span class="ident" id="4236418">i</span>&nbsp;<span class="op" id="4236420">&gt;</span>&nbsp;<span class="num" id="4236422">0</span><span class="op" id="4236423">;</span>&nbsp;<span class="ident" id="4236425">i</span>&nbsp;<span class="op" id="4236427">&gt;&gt;=</span>&nbsp;<span class="num" id="4236431">7</span>&nbsp;<span class="op" id="4236433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236437">l</span><span class="op" id="4236438">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236442">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236446">for</span>&nbsp;<span class="ident" id="4236450">i</span>&nbsp;<span class="op" id="4236452">:=</span>&nbsp;<span class="ident" id="4236455">l</span>&nbsp;<span class="op" id="4236457">-</span>&nbsp;<span class="num" id="4236459">1</span><span class="op" id="4236460">;</span>&nbsp;<span class="ident" id="4236462">i</span>&nbsp;<span class="op" id="4236464">&gt;=</span>&nbsp;<span class="num" id="4236467">0</span><span class="op" id="4236468">;</span>&nbsp;<span class="ident" id="4236470">i</span><span class="op" id="4236471">--</span>&nbsp;<span class="op" id="4236474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236478">o</span>&nbsp;<span class="op" id="4236480">:=</span>&nbsp;<span class="builtintype" id="4236483">byte</span><span class="op" id="4236487">(</span><span class="ident" id="4236488">n</span>&nbsp;<span class="op" id="4236490">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4236493">uint</span><span class="op" id="4236497">(</span><span class="ident" id="4236498">i</span><span class="op" id="4236499">*</span><span class="num" id="4236500">7</span><span class="op" id="4236501">)</span><span class="op" id="4236502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236506">o</span>&nbsp;<span class="op" id="4236508">&amp;=</span>&nbsp;<span class="num" id="4236511">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236518">if</span>&nbsp;<span class="ident" id="4236521">i</span>&nbsp;<span class="op" id="4236523">!=</span>&nbsp;<span class="num" id="4236526">0</span>&nbsp;<span class="op" id="4236528">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236533">o</span>&nbsp;<span class="op" id="4236535">|=</span>&nbsp;<span class="num" id="4236538">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236549">err</span>&nbsp;<span class="op" id="4236553">=</span>&nbsp;<span class="ident" id="4236555">out</span><span class="op" id="4236558">.</span><span class="ident" id="4236559">WriteByte</span><span class="op" id="4236568">(</span><span class="ident" id="4236569">o</span><span class="op" id="4236570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236574">if</span>&nbsp;<span class="ident" id="4236577">err</span>&nbsp;<span class="op" id="4236581">!=</span>&nbsp;<span class="ident" id="4236584">nil</span>&nbsp;<span class="op" id="4236588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236593">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236609">return</span>&nbsp;<span class="ident" id="4236616">nil</span><br>
<span class="lineno"></span><span class="op" id="4236620">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4236623">func</span>&nbsp;<span class="ident" id="4236628">marshalInt64</span><span class="op" id="4236640">(</span><span class="ident" id="4236641">out</span>&nbsp;<span class="op" id="4236645">*</span><span class="ident" id="4236646">forkableWriter</span><span class="op" id="4236660">,</span>&nbsp;<span class="ident" id="4236662">i</span>&nbsp;<span class="ident" id="4236664">int64</span><span class="op" id="4236669">)</span>&nbsp;<span class="op" id="4236671">(</span><span class="ident" id="4236672">err</span>&nbsp;<span class="builtintype" id="4236676">error</span><span class="op" id="4236681">)</span>&nbsp;<span class="op" id="4236683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236686">n</span>&nbsp;<span class="op" id="4236688">:=</span>&nbsp;<span class="ident" id="4236691">int64Length</span><span class="op" id="4236702">(</span><span class="ident" id="4236703">i</span><span class="op" id="4236704">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236708">for</span>&nbsp;<span class="op" id="4236712">;</span>&nbsp;<span class="ident" id="4236714">n</span>&nbsp;<span class="op" id="4236716">&gt;</span>&nbsp;<span class="num" id="4236718">0</span><span class="op" id="4236719">;</span>&nbsp;<span class="ident" id="4236721">n</span><span class="op" id="4236722">--</span>&nbsp;<span class="op" id="4236725">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236729">err</span>&nbsp;<span class="op" id="4236733">=</span>&nbsp;<span class="ident" id="4236735">out</span><span class="op" id="4236738">.</span><span class="ident" id="4236739">WriteByte</span><span class="op" id="4236748">(</span><span class="builtintype" id="4236749">byte</span><span class="op" id="4236753">(</span><span class="ident" id="4236754">i</span>&nbsp;<span class="op" id="4236756">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4236759">uint</span><span class="op" id="4236763">(</span><span class="op" id="4236764">(</span><span class="ident" id="4236765">n</span><span class="op" id="4236766">-</span><span class="num" id="4236767">1</span><span class="op" id="4236768">)</span><span class="op" id="4236769">*</span><span class="num" id="4236770">8</span><span class="op" id="4236771">)</span><span class="op" id="4236772">)</span><span class="op" id="4236773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236777">if</span>&nbsp;<span class="ident" id="4236780">err</span>&nbsp;<span class="op" id="4236784">!=</span>&nbsp;<span class="ident" id="4236787">nil</span>&nbsp;<span class="op" id="4236791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236796">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236808">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236812">return</span>&nbsp;<span class="ident" id="4236819">nil</span><br>
<span class="lineno"></span><span class="op" id="4236823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4236826">func</span>&nbsp;<span class="ident" id="4236831">int64Length</span><span class="op" id="4236842">(</span><span class="ident" id="4236843">i</span>&nbsp;<span class="ident" id="4236845">int64</span><span class="op" id="4236850">)</span>&nbsp;<span class="op" id="4236852">(</span><span class="ident" id="4236853">numBytes</span>&nbsp;<span class="builtintype" id="4236862">int</span><span class="op" id="4236865">)</span>&nbsp;<span class="op" id="4236867">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236870">numBytes</span>&nbsp;<span class="op" id="4236879">=</span>&nbsp;<span class="num" id="4236881">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236885">for</span>&nbsp;<span class="ident" id="4236889">i</span>&nbsp;<span class="op" id="4236891">&gt;</span>&nbsp;<span class="num" id="4236893">127</span>&nbsp;<span class="op" id="4236897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236901">numBytes</span><span class="op" id="4236909">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236914">i</span>&nbsp;<span class="op" id="4236916">&gt;&gt;=</span>&nbsp;<span class="num" id="4236920">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236927">for</span>&nbsp;<span class="ident" id="4236931">i</span>&nbsp;<span class="op" id="4236933">&lt;</span>&nbsp;<span class="op" id="4236935">-</span><span class="num" id="4236936">128</span>&nbsp;<span class="op" id="4236940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236944">numBytes</span><span class="op" id="4236952">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4236957">i</span>&nbsp;<span class="op" id="4236959">&gt;&gt;=</span>&nbsp;<span class="num" id="4236963">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4236966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4236970">return</span><br>
<span class="lineno"></span><span class="op" id="4236977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4236980">func</span>&nbsp;<span class="ident" id="4236985">marshalBigInt</span><span class="op" id="4236998">(</span><span class="ident" id="4236999">out</span>&nbsp;<span class="op" id="4237003">*</span><span class="ident" id="4237004">forkableWriter</span><span class="op" id="4237018">,</span>&nbsp;<span class="ident" id="4237020">n</span>&nbsp;<span class="op" id="4237022">*</span><span class="ident" id="4237023">big</span><span class="op" id="4237026">.</span><span class="ident" id="4237027">Int</span><span class="op" id="4237030">)</span>&nbsp;<span class="op" id="4237032">(</span><span class="ident" id="4237033">err</span>&nbsp;<span class="builtintype" id="4237037">error</span><span class="op" id="4237042">)</span>&nbsp;<span class="op" id="4237044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237047">if</span>&nbsp;<span class="ident" id="4237050">n</span><span class="op" id="4237051">.</span><span class="ident" id="4237052">Sign</span><span class="op" id="4237056">(</span><span class="op" id="4237057">)</span>&nbsp;<span class="op" id="4237059">&lt;</span>&nbsp;<span class="num" id="4237061">0</span>&nbsp;<span class="op" id="4237063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237067">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237130">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237180">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237243">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237306">nMinus1</span>&nbsp;<span class="op" id="4237314">:=</span>&nbsp;<span class="builtinfunc" id="4237317">new</span><span class="op" id="4237320">(</span><span class="ident" id="4237321">big</span><span class="op" id="4237324">.</span><span class="ident" id="4237325">Int</span><span class="op" id="4237328">)</span><span class="op" id="4237329">.</span><span class="ident" id="4237330">Neg</span><span class="op" id="4237333">(</span><span class="ident" id="4237334">n</span><span class="op" id="4237335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237339">nMinus1</span><span class="op" id="4237346">.</span><span class="ident" id="4237347">Sub</span><span class="op" id="4237350">(</span><span class="ident" id="4237351">nMinus1</span><span class="op" id="4237358">,</span>&nbsp;<span class="ident" id="4237360">bigOne</span><span class="op" id="4237366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237370">bytes</span>&nbsp;<span class="op" id="4237376">:=</span>&nbsp;<span class="ident" id="4237379">nMinus1</span><span class="op" id="4237386">.</span><span class="ident" id="4237387">Bytes</span><span class="op" id="4237392">(</span><span class="op" id="4237393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237397">for</span>&nbsp;<span class="ident" id="4237401">i</span>&nbsp;<span class="op" id="4237403">:=</span>&nbsp;<span class="keyword" id="4237406">range</span>&nbsp;<span class="ident" id="4237412">bytes</span>&nbsp;<span class="op" id="4237418">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237423">bytes</span><span class="op" id="4237428">[</span><span class="ident" id="4237429">i</span><span class="op" id="4237430">]</span>&nbsp;<span class="op" id="4237432">^=</span>&nbsp;<span class="num" id="4237435">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237446">if</span>&nbsp;<span class="builtinfunc" id="4237449">len</span><span class="op" id="4237452">(</span><span class="ident" id="4237453">bytes</span><span class="op" id="4237458">)</span>&nbsp;<span class="op" id="4237460">==</span>&nbsp;<span class="num" id="4237463">0</span>&nbsp;<span class="op" id="4237465">||</span>&nbsp;<span class="ident" id="4237468">bytes</span><span class="op" id="4237473">[</span><span class="num" id="4237474">0</span><span class="op" id="4237475">]</span><span class="op" id="4237476">&amp;</span><span class="num" id="4237477">0x80</span>&nbsp;<span class="op" id="4237482">==</span>&nbsp;<span class="num" id="4237485">0</span>&nbsp;<span class="op" id="4237487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237492">err</span>&nbsp;<span class="op" id="4237496">=</span>&nbsp;<span class="ident" id="4237498">out</span><span class="op" id="4237501">.</span><span class="ident" id="4237502">WriteByte</span><span class="op" id="4237511">(</span><span class="num" id="4237512">0xff</span><span class="op" id="4237516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237521">if</span>&nbsp;<span class="ident" id="4237524">err</span>&nbsp;<span class="op" id="4237528">!=</span>&nbsp;<span class="ident" id="4237531">nil</span>&nbsp;<span class="op" id="4237535">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237541">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237559">_</span><span class="op" id="4237560">,</span>&nbsp;<span class="ident" id="4237562">err</span>&nbsp;<span class="op" id="4237566">=</span>&nbsp;<span class="ident" id="4237568">out</span><span class="op" id="4237571">.</span><span class="ident" id="4237572">Write</span><span class="op" id="4237577">(</span><span class="ident" id="4237578">bytes</span><span class="op" id="4237583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237586">}</span>&nbsp;<span class="keyword" id="4237588">else</span>&nbsp;<span class="keyword" id="4237593">if</span>&nbsp;<span class="ident" id="4237596">n</span><span class="op" id="4237597">.</span><span class="ident" id="4237598">Sign</span><span class="op" id="4237602">(</span><span class="op" id="4237603">)</span>&nbsp;<span class="op" id="4237605">==</span>&nbsp;<span class="num" id="4237608">0</span>&nbsp;<span class="op" id="4237610">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237614">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237676">err</span>&nbsp;<span class="op" id="4237680">=</span>&nbsp;<span class="ident" id="4237682">out</span><span class="op" id="4237685">.</span><span class="ident" id="4237686">WriteByte</span><span class="op" id="4237695">(</span><span class="num" id="4237696">0x00</span><span class="op" id="4237700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237703">}</span>&nbsp;<span class="keyword" id="4237705">else</span>&nbsp;<span class="op" id="4237710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237714">bytes</span>&nbsp;<span class="op" id="4237720">:=</span>&nbsp;<span class="ident" id="4237723">n</span><span class="op" id="4237724">.</span><span class="ident" id="4237725">Bytes</span><span class="op" id="4237730">(</span><span class="op" id="4237731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237735">if</span>&nbsp;<span class="builtinfunc" id="4237738">len</span><span class="op" id="4237741">(</span><span class="ident" id="4237742">bytes</span><span class="op" id="4237747">)</span>&nbsp;<span class="op" id="4237749">&gt;</span>&nbsp;<span class="num" id="4237751">0</span>&nbsp;<span class="op" id="4237753">&amp;&amp;</span>&nbsp;<span class="ident" id="4237756">bytes</span><span class="op" id="4237761">[</span><span class="num" id="4237762">0</span><span class="op" id="4237763">]</span><span class="op" id="4237764">&amp;</span><span class="num" id="4237765">0x80</span>&nbsp;<span class="op" id="4237770">!=</span>&nbsp;<span class="num" id="4237773">0</span>&nbsp;<span class="op" id="4237775">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237780">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4237839">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237877">err</span>&nbsp;<span class="op" id="4237881">=</span>&nbsp;<span class="ident" id="4237883">out</span><span class="op" id="4237886">.</span><span class="ident" id="4237887">WriteByte</span><span class="op" id="4237896">(</span><span class="num" id="4237897">0</span><span class="op" id="4237898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237903">if</span>&nbsp;<span class="ident" id="4237906">err</span>&nbsp;<span class="op" id="4237910">!=</span>&nbsp;<span class="ident" id="4237913">nil</span>&nbsp;<span class="op" id="4237917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237923">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4237941">_</span><span class="op" id="4237942">,</span>&nbsp;<span class="ident" id="4237944">err</span>&nbsp;<span class="op" id="4237948">=</span>&nbsp;<span class="ident" id="4237950">out</span><span class="op" id="4237953">.</span><span class="ident" id="4237954">Write</span><span class="op" id="4237959">(</span><span class="ident" id="4237960">bytes</span><span class="op" id="4237965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4237968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4237971">return</span><br>
<span class="lineno">165</span><span class="op" id="4237978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4237981">func</span>&nbsp;<span class="ident" id="4237986">marshalLength</span><span class="op" id="4237999">(</span><span class="ident" id="4238000">out</span>&nbsp;<span class="op" id="4238004">*</span><span class="ident" id="4238005">forkableWriter</span><span class="op" id="4238019">,</span>&nbsp;<span class="ident" id="4238021">i</span>&nbsp;<span class="builtintype" id="4238023">int</span><span class="op" id="4238026">)</span>&nbsp;<span class="op" id="4238028">(</span><span class="ident" id="4238029">err</span>&nbsp;<span class="builtintype" id="4238033">error</span><span class="op" id="4238038">)</span>&nbsp;<span class="op" id="4238040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238043">n</span>&nbsp;<span class="op" id="4238045">:=</span>&nbsp;<span class="ident" id="4238048">lengthLength</span><span class="op" id="4238060">(</span><span class="ident" id="4238061">i</span><span class="op" id="4238062">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238066">for</span>&nbsp;<span class="op" id="4238070">;</span>&nbsp;<span class="ident" id="4238072">n</span>&nbsp;<span class="op" id="4238074">&gt;</span>&nbsp;<span class="num" id="4238076">0</span><span class="op" id="4238077">;</span>&nbsp;<span class="ident" id="4238079">n</span><span class="op" id="4238080">--</span>&nbsp;<span class="op" id="4238083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238087">err</span>&nbsp;<span class="op" id="4238091">=</span>&nbsp;<span class="ident" id="4238093">out</span><span class="op" id="4238096">.</span><span class="ident" id="4238097">WriteByte</span><span class="op" id="4238106">(</span><span class="builtintype" id="4238107">byte</span><span class="op" id="4238111">(</span><span class="ident" id="4238112">i</span>&nbsp;<span class="op" id="4238114">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4238117">uint</span><span class="op" id="4238121">(</span><span class="op" id="4238122">(</span><span class="ident" id="4238123">n</span><span class="op" id="4238124">-</span><span class="num" id="4238125">1</span><span class="op" id="4238126">)</span><span class="op" id="4238127">*</span><span class="num" id="4238128">8</span><span class="op" id="4238129">)</span><span class="op" id="4238130">)</span><span class="op" id="4238131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238135">if</span>&nbsp;<span class="ident" id="4238138">err</span>&nbsp;<span class="op" id="4238142">!=</span>&nbsp;<span class="ident" id="4238145">nil</span>&nbsp;<span class="op" id="4238149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238154">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238163">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238170">return</span>&nbsp;<span class="ident" id="4238177">nil</span><br>
<span class="lineno"></span><span class="op" id="4238181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4238184">func</span>&nbsp;<span class="ident" id="4238189">lengthLength</span><span class="op" id="4238201">(</span><span class="ident" id="4238202">i</span>&nbsp;<span class="builtintype" id="4238204">int</span><span class="op" id="4238207">)</span>&nbsp;<span class="op" id="4238209">(</span><span class="ident" id="4238210">numBytes</span>&nbsp;<span class="builtintype" id="4238219">int</span><span class="op" id="4238222">)</span>&nbsp;<span class="op" id="4238224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238227">numBytes</span>&nbsp;<span class="op" id="4238236">=</span>&nbsp;<span class="num" id="4238238">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238241">for</span>&nbsp;<span class="ident" id="4238245">i</span>&nbsp;<span class="op" id="4238247">&gt;</span>&nbsp;<span class="num" id="4238249">255</span>&nbsp;<span class="op" id="4238253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238257">numBytes</span><span class="op" id="4238265">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238270">i</span>&nbsp;<span class="op" id="4238272">&gt;&gt;=</span>&nbsp;<span class="num" id="4238276">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238282">return</span><br>
<span class="lineno"></span><span class="op" id="4238289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4238292">func</span>&nbsp;<span class="ident" id="4238297">marshalTagAndLength</span><span class="op" id="4238316">(</span><span class="ident" id="4238317">out</span>&nbsp;<span class="op" id="4238321">*</span><span class="ident" id="4238322">forkableWriter</span><span class="op" id="4238336">,</span>&nbsp;<span class="ident" id="4238338">t</span>&nbsp;<span class="ident" id="4238340">tagAndLength</span><span class="op" id="4238352">)</span>&nbsp;<span class="op" id="4238354">(</span><span class="ident" id="4238355">err</span>&nbsp;<span class="builtintype" id="4238359">error</span><span class="op" id="4238364">)</span>&nbsp;<span class="op" id="4238366">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238369">b</span>&nbsp;<span class="op" id="4238371">:=</span>&nbsp;<span class="builtintype" id="4238374">uint8</span><span class="op" id="4238379">(</span><span class="ident" id="4238380">t</span><span class="op" id="4238381">.</span><span class="ident" id="4238382">class</span><span class="op" id="4238387">)</span>&nbsp;<span class="op" id="4238389">&lt;&lt;</span>&nbsp;<span class="num" id="4238392">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238395">if</span>&nbsp;<span class="ident" id="4238398">t</span><span class="op" id="4238399">.</span><span class="ident" id="4238400">isCompound</span>&nbsp;<span class="op" id="4238411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238415">b</span>&nbsp;<span class="op" id="4238417">|=</span>&nbsp;<span class="num" id="4238420">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238429">if</span>&nbsp;<span class="ident" id="4238432">t</span><span class="op" id="4238433">.</span><span class="ident" id="4238434">tag</span>&nbsp;<span class="op" id="4238438">&gt;=</span>&nbsp;<span class="num" id="4238441">31</span>&nbsp;<span class="op" id="4238444">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238448">b</span>&nbsp;<span class="op" id="4238450">|=</span>&nbsp;<span class="num" id="4238453">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238460">err</span>&nbsp;<span class="op" id="4238464">=</span>&nbsp;<span class="ident" id="4238466">out</span><span class="op" id="4238469">.</span><span class="ident" id="4238470">WriteByte</span><span class="op" id="4238479">(</span><span class="ident" id="4238480">b</span><span class="op" id="4238481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238485">if</span>&nbsp;<span class="ident" id="4238488">err</span>&nbsp;<span class="op" id="4238492">!=</span>&nbsp;<span class="ident" id="4238495">nil</span>&nbsp;<span class="op" id="4238499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238504">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238513">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238517">err</span>&nbsp;<span class="op" id="4238521">=</span>&nbsp;<span class="ident" id="4238523">marshalBase128Int</span><span class="op" id="4238540">(</span><span class="ident" id="4238541">out</span><span class="op" id="4238544">,</span>&nbsp;<span class="ident" id="4238546">int64</span><span class="op" id="4238551">(</span><span class="ident" id="4238552">t</span><span class="op" id="4238553">.</span><span class="ident" id="4238554">tag</span><span class="op" id="4238557">)</span><span class="op" id="4238558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238562">if</span>&nbsp;<span class="ident" id="4238565">err</span>&nbsp;<span class="op" id="4238569">!=</span>&nbsp;<span class="ident" id="4238572">nil</span>&nbsp;<span class="op" id="4238576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238581">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238593">}</span>&nbsp;<span class="keyword" id="4238595">else</span>&nbsp;<span class="op" id="4238600">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238604">b</span>&nbsp;<span class="op" id="4238606">|=</span>&nbsp;<span class="builtintype" id="4238609">uint8</span><span class="op" id="4238614">(</span><span class="ident" id="4238615">t</span><span class="op" id="4238616">.</span><span class="ident" id="4238617">tag</span><span class="op" id="4238620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238624">err</span>&nbsp;<span class="op" id="4238628">=</span>&nbsp;<span class="ident" id="4238630">out</span><span class="op" id="4238633">.</span><span class="ident" id="4238634">WriteByte</span><span class="op" id="4238643">(</span><span class="ident" id="4238644">b</span><span class="op" id="4238645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238649">if</span>&nbsp;<span class="ident" id="4238652">err</span>&nbsp;<span class="op" id="4238656">!=</span>&nbsp;<span class="ident" id="4238659">nil</span>&nbsp;<span class="op" id="4238663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238668">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238677">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238684">if</span>&nbsp;<span class="ident" id="4238687">t</span><span class="op" id="4238688">.</span><span class="ident" id="4238689">length</span>&nbsp;<span class="op" id="4238696">&gt;=</span>&nbsp;<span class="num" id="4238699">128</span>&nbsp;<span class="op" id="4238703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238707">l</span>&nbsp;<span class="op" id="4238709">:=</span>&nbsp;<span class="ident" id="4238712">lengthLength</span><span class="op" id="4238724">(</span><span class="ident" id="4238725">t</span><span class="op" id="4238726">.</span><span class="ident" id="4238727">length</span><span class="op" id="4238733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238737">err</span>&nbsp;<span class="op" id="4238741">=</span>&nbsp;<span class="ident" id="4238743">out</span><span class="op" id="4238746">.</span><span class="ident" id="4238747">WriteByte</span><span class="op" id="4238756">(</span><span class="num" id="4238757">0x80</span>&nbsp;<span class="op" id="4238762">|</span>&nbsp;<span class="builtintype" id="4238764">byte</span><span class="op" id="4238768">(</span><span class="ident" id="4238769">l</span><span class="op" id="4238770">)</span><span class="op" id="4238771">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238775">if</span>&nbsp;<span class="ident" id="4238778">err</span>&nbsp;<span class="op" id="4238782">!=</span>&nbsp;<span class="ident" id="4238785">nil</span>&nbsp;<span class="op" id="4238789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238794">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238807">err</span>&nbsp;<span class="op" id="4238811">=</span>&nbsp;<span class="ident" id="4238813">marshalLength</span><span class="op" id="4238826">(</span><span class="ident" id="4238827">out</span><span class="op" id="4238830">,</span>&nbsp;<span class="ident" id="4238832">t</span><span class="op" id="4238833">.</span><span class="ident" id="4238834">length</span><span class="op" id="4238840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238844">if</span>&nbsp;<span class="ident" id="4238847">err</span>&nbsp;<span class="op" id="4238851">!=</span>&nbsp;<span class="ident" id="4238854">nil</span>&nbsp;<span class="op" id="4238858">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238863">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238875">}</span>&nbsp;<span class="keyword" id="4238877">else</span>&nbsp;<span class="op" id="4238882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4238886">err</span>&nbsp;<span class="op" id="4238890">=</span>&nbsp;<span class="ident" id="4238892">out</span><span class="op" id="4238895">.</span><span class="ident" id="4238896">WriteByte</span><span class="op" id="4238905">(</span><span class="builtintype" id="4238906">byte</span><span class="op" id="4238910">(</span><span class="ident" id="4238911">t</span><span class="op" id="4238912">.</span><span class="ident" id="4238913">length</span><span class="op" id="4238919">)</span><span class="op" id="4238920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238924">if</span>&nbsp;<span class="ident" id="4238927">err</span>&nbsp;<span class="op" id="4238931">!=</span>&nbsp;<span class="ident" id="4238934">nil</span>&nbsp;<span class="op" id="4238938">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4238955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4238959">return</span>&nbsp;<span class="ident" id="4238966">nil</span><br>
<span class="lineno">230</span><span class="op" id="4238970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4238973">func</span>&nbsp;<span class="ident" id="4238978">marshalBitString</span><span class="op" id="4238994">(</span><span class="ident" id="4238995">out</span>&nbsp;<span class="op" id="4238999">*</span><span class="ident" id="4239000">forkableWriter</span><span class="op" id="4239014">,</span>&nbsp;<span class="ident" id="4239016">b</span>&nbsp;<span class="ident" id="4239018">BitString</span><span class="op" id="4239027">)</span>&nbsp;<span class="op" id="4239029">(</span><span class="ident" id="4239030">err</span>&nbsp;<span class="builtintype" id="4239034">error</span><span class="op" id="4239039">)</span>&nbsp;<span class="op" id="4239041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239044">paddingBits</span>&nbsp;<span class="op" id="4239056">:=</span>&nbsp;<span class="builtintype" id="4239059">byte</span><span class="op" id="4239063">(</span><span class="op" id="4239064">(</span><span class="num" id="4239065">8</span>&nbsp;<span class="op" id="4239067">-</span>&nbsp;<span class="ident" id="4239069">b</span><span class="op" id="4239070">.</span><span class="ident" id="4239071">BitLength</span><span class="op" id="4239080">%</span><span class="num" id="4239081">8</span><span class="op" id="4239082">)</span>&nbsp;<span class="op" id="4239084">%</span>&nbsp;<span class="num" id="4239086">8</span><span class="op" id="4239087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239090">err</span>&nbsp;<span class="op" id="4239094">=</span>&nbsp;<span class="ident" id="4239096">out</span><span class="op" id="4239099">.</span><span class="ident" id="4239100">WriteByte</span><span class="op" id="4239109">(</span><span class="ident" id="4239110">paddingBits</span><span class="op" id="4239121">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239124">if</span>&nbsp;<span class="ident" id="4239127">err</span>&nbsp;<span class="op" id="4239131">!=</span>&nbsp;<span class="ident" id="4239134">nil</span>&nbsp;<span class="op" id="4239138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239142">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239153">_</span><span class="op" id="4239154">,</span>&nbsp;<span class="ident" id="4239156">err</span>&nbsp;<span class="op" id="4239160">=</span>&nbsp;<span class="ident" id="4239162">out</span><span class="op" id="4239165">.</span><span class="ident" id="4239166">Write</span><span class="op" id="4239171">(</span><span class="ident" id="4239172">b</span><span class="op" id="4239173">.</span><span class="ident" id="4239174">Bytes</span><span class="op" id="4239179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239182">return</span><br>
<span class="lineno">240</span><span class="op" id="4239189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4239192">func</span>&nbsp;<span class="ident" id="4239197">marshalObjectIdentifier</span><span class="op" id="4239220">(</span><span class="ident" id="4239221">out</span>&nbsp;<span class="op" id="4239225">*</span><span class="ident" id="4239226">forkableWriter</span><span class="op" id="4239240">,</span>&nbsp;<span class="ident" id="4239242">oid</span>&nbsp;<span class="op" id="4239246">[</span><span class="op" id="4239247">]</span><span class="builtintype" id="4239248">int</span><span class="op" id="4239251">)</span>&nbsp;<span class="op" id="4239253">(</span><span class="ident" id="4239254">err</span>&nbsp;<span class="builtintype" id="4239258">error</span><span class="op" id="4239263">)</span>&nbsp;<span class="op" id="4239265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239268">if</span>&nbsp;<span class="builtinfunc" id="4239271">len</span><span class="op" id="4239274">(</span><span class="ident" id="4239275">oid</span><span class="op" id="4239278">)</span>&nbsp;<span class="op" id="4239280">&lt;</span>&nbsp;<span class="num" id="4239282">2</span>&nbsp;<span class="op" id="4239284">||</span>&nbsp;<span class="ident" id="4239287">oid</span><span class="op" id="4239290">[</span><span class="num" id="4239291">0</span><span class="op" id="4239292">]</span>&nbsp;<span class="op" id="4239294">&gt;</span>&nbsp;<span class="num" id="4239296">2</span>&nbsp;<span class="op" id="4239298">||</span>&nbsp;<span class="op" id="4239301">(</span><span class="ident" id="4239302">oid</span><span class="op" id="4239305">[</span><span class="num" id="4239306">0</span><span class="op" id="4239307">]</span>&nbsp;<span class="op" id="4239309">&lt;</span>&nbsp;<span class="num" id="4239311">2</span>&nbsp;<span class="op" id="4239313">&amp;&amp;</span>&nbsp;<span class="ident" id="4239316">oid</span><span class="op" id="4239319">[</span><span class="num" id="4239320">1</span><span class="op" id="4239321">]</span>&nbsp;<span class="op" id="4239323">&gt;=</span>&nbsp;<span class="num" id="4239326">40</span><span class="op" id="4239328">)</span>&nbsp;<span class="op" id="4239330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239334">return</span>&nbsp;<span class="ident" id="4239341">StructuralError</span><span class="op" id="4239356">{</span><span class="string" id="4239357">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4239384">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239391">err</span>&nbsp;<span class="op" id="4239395">=</span>&nbsp;<span class="ident" id="4239397">marshalBase128Int</span><span class="op" id="4239414">(</span><span class="ident" id="4239415">out</span><span class="op" id="4239418">,</span>&nbsp;<span class="ident" id="4239420">int64</span><span class="op" id="4239425">(</span><span class="ident" id="4239426">oid</span><span class="op" id="4239429">[</span><span class="num" id="4239430">0</span><span class="op" id="4239431">]</span><span class="op" id="4239432">*</span><span class="num" id="4239433">40</span><span class="op" id="4239435">+</span><span class="ident" id="4239436">oid</span><span class="op" id="4239439">[</span><span class="num" id="4239440">1</span><span class="op" id="4239441">]</span><span class="op" id="4239442">)</span><span class="op" id="4239443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239446">if</span>&nbsp;<span class="ident" id="4239449">err</span>&nbsp;<span class="op" id="4239453">!=</span>&nbsp;<span class="ident" id="4239456">nil</span>&nbsp;<span class="op" id="4239460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239464">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239475">for</span>&nbsp;<span class="ident" id="4239479">i</span>&nbsp;<span class="op" id="4239481">:=</span>&nbsp;<span class="num" id="4239484">2</span><span class="op" id="4239485">;</span>&nbsp;<span class="ident" id="4239487">i</span>&nbsp;<span class="op" id="4239489">&lt;</span>&nbsp;<span class="builtinfunc" id="4239491">len</span><span class="op" id="4239494">(</span><span class="ident" id="4239495">oid</span><span class="op" id="4239498">)</span><span class="op" id="4239499">;</span>&nbsp;<span class="ident" id="4239501">i</span><span class="op" id="4239502">++</span>&nbsp;<span class="op" id="4239505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239509">err</span>&nbsp;<span class="op" id="4239513">=</span>&nbsp;<span class="ident" id="4239515">marshalBase128Int</span><span class="op" id="4239532">(</span><span class="ident" id="4239533">out</span><span class="op" id="4239536">,</span>&nbsp;<span class="ident" id="4239538">int64</span><span class="op" id="4239543">(</span><span class="ident" id="4239544">oid</span><span class="op" id="4239547">[</span><span class="ident" id="4239548">i</span><span class="op" id="4239549">]</span><span class="op" id="4239550">)</span><span class="op" id="4239551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239555">if</span>&nbsp;<span class="ident" id="4239558">err</span>&nbsp;<span class="op" id="4239562">!=</span>&nbsp;<span class="ident" id="4239565">nil</span>&nbsp;<span class="op" id="4239569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239574">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239590">return</span><br>
<span class="lineno"></span><span class="op" id="4239597">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4239600">func</span>&nbsp;<span class="ident" id="4239605">marshalPrintableString</span><span class="op" id="4239627">(</span><span class="ident" id="4239628">out</span>&nbsp;<span class="op" id="4239632">*</span><span class="ident" id="4239633">forkableWriter</span><span class="op" id="4239647">,</span>&nbsp;<span class="ident" id="4239649">s</span>&nbsp;<span class="builtintype" id="4239651">string</span><span class="op" id="4239657">)</span>&nbsp;<span class="op" id="4239659">(</span><span class="ident" id="4239660">err</span>&nbsp;<span class="builtintype" id="4239664">error</span><span class="op" id="4239669">)</span>&nbsp;<span class="op" id="4239671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239674">b</span>&nbsp;<span class="op" id="4239676">:=</span>&nbsp;<span class="op" id="4239679">[</span><span class="op" id="4239680">]</span><span class="builtintype" id="4239681">byte</span><span class="op" id="4239685">(</span><span class="ident" id="4239686">s</span><span class="op" id="4239687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239690">for</span>&nbsp;<span class="ident" id="4239694">_</span><span class="op" id="4239695">,</span>&nbsp;<span class="ident" id="4239697">c</span>&nbsp;<span class="op" id="4239699">:=</span>&nbsp;<span class="keyword" id="4239702">range</span>&nbsp;<span class="ident" id="4239708">b</span>&nbsp;<span class="op" id="4239710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239714">if</span>&nbsp;<span class="op" id="4239717">!</span><span class="ident" id="4239718">isPrintable</span><span class="op" id="4239729">(</span><span class="ident" id="4239730">c</span><span class="op" id="4239731">)</span>&nbsp;<span class="op" id="4239733">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239738">return</span>&nbsp;<span class="ident" id="4239745">StructuralError</span><span class="op" id="4239760">{</span><span class="string" id="4239761">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4239805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4239812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239816">_</span><span class="op" id="4239817">,</span>&nbsp;<span class="ident" id="4239819">err</span>&nbsp;<span class="op" id="4239823">=</span>&nbsp;<span class="ident" id="4239825">out</span><span class="op" id="4239828">.</span><span class="ident" id="4239829">Write</span><span class="op" id="4239834">(</span><span class="ident" id="4239835">b</span><span class="op" id="4239836">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239839">return</span><br>
<span class="lineno"></span><span class="op" id="4239846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4239849">func</span>&nbsp;<span class="ident" id="4239854">marshalIA5String</span><span class="op" id="4239870">(</span><span class="ident" id="4239871">out</span>&nbsp;<span class="op" id="4239875">*</span><span class="ident" id="4239876">forkableWriter</span><span class="op" id="4239890">,</span>&nbsp;<span class="ident" id="4239892">s</span>&nbsp;<span class="builtintype" id="4239894">string</span><span class="op" id="4239900">)</span>&nbsp;<span class="op" id="4239902">(</span><span class="ident" id="4239903">err</span>&nbsp;<span class="builtintype" id="4239907">error</span><span class="op" id="4239912">)</span>&nbsp;<span class="op" id="4239914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4239917">b</span>&nbsp;<span class="op" id="4239919">:=</span>&nbsp;<span class="op" id="4239922">[</span><span class="op" id="4239923">]</span><span class="builtintype" id="4239924">byte</span><span class="op" id="4239928">(</span><span class="ident" id="4239929">s</span><span class="op" id="4239930">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239933">for</span>&nbsp;<span class="ident" id="4239937">_</span><span class="op" id="4239938">,</span>&nbsp;<span class="ident" id="4239940">c</span>&nbsp;<span class="op" id="4239942">:=</span>&nbsp;<span class="keyword" id="4239945">range</span>&nbsp;<span class="ident" id="4239951">b</span>&nbsp;<span class="op" id="4239953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239957">if</span>&nbsp;<span class="ident" id="4239960">c</span>&nbsp;<span class="op" id="4239962">&gt;</span>&nbsp;<span class="num" id="4239964">127</span>&nbsp;<span class="op" id="4239968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4239973">return</span>&nbsp;<span class="ident" id="4239980">StructuralError</span><span class="op" id="4239995">{</span><span class="string" id="4239996">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4240034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4240038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4240041">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240045">_</span><span class="op" id="4240046">,</span>&nbsp;<span class="ident" id="4240048">err</span>&nbsp;<span class="op" id="4240052">=</span>&nbsp;<span class="ident" id="4240054">out</span><span class="op" id="4240057">.</span><span class="ident" id="4240058">Write</span><span class="op" id="4240063">(</span><span class="ident" id="4240064">b</span><span class="op" id="4240065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240068">return</span><br>
<span class="lineno"></span><span class="op" id="4240075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4240078">func</span>&nbsp;<span class="ident" id="4240083">marshalUTF8String</span><span class="op" id="4240100">(</span><span class="ident" id="4240101">out</span>&nbsp;<span class="op" id="4240105">*</span><span class="ident" id="4240106">forkableWriter</span><span class="op" id="4240120">,</span>&nbsp;<span class="ident" id="4240122">s</span>&nbsp;<span class="builtintype" id="4240124">string</span><span class="op" id="4240130">)</span>&nbsp;<span class="op" id="4240132">(</span><span class="ident" id="4240133">err</span>&nbsp;<span class="builtintype" id="4240137">error</span><span class="op" id="4240142">)</span>&nbsp;<span class="op" id="4240144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240147">_</span><span class="op" id="4240148">,</span>&nbsp;<span class="ident" id="4240150">err</span>&nbsp;<span class="op" id="4240154">=</span>&nbsp;<span class="ident" id="4240156">out</span><span class="op" id="4240159">.</span><span class="ident" id="4240160">Write</span><span class="op" id="4240165">(</span><span class="op" id="4240166">[</span><span class="op" id="4240167">]</span><span class="builtintype" id="4240168">byte</span><span class="op" id="4240172">(</span><span class="ident" id="4240173">s</span><span class="op" id="4240174">)</span><span class="op" id="4240175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240178">return</span><br>
<span class="lineno"></span><span class="op" id="4240185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4240188">func</span>&nbsp;<span class="ident" id="4240193">marshalTwoDigits</span><span class="op" id="4240209">(</span><span class="ident" id="4240210">out</span>&nbsp;<span class="op" id="4240214">*</span><span class="ident" id="4240215">forkableWriter</span><span class="op" id="4240229">,</span>&nbsp;<span class="ident" id="4240231">v</span>&nbsp;<span class="builtintype" id="4240233">int</span><span class="op" id="4240236">)</span>&nbsp;<span class="op" id="4240238">(</span><span class="ident" id="4240239">err</span>&nbsp;<span class="builtintype" id="4240243">error</span><span class="op" id="4240248">)</span>&nbsp;<span class="op" id="4240250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240253">err</span>&nbsp;<span class="op" id="4240257">=</span>&nbsp;<span class="ident" id="4240259">out</span><span class="op" id="4240262">.</span><span class="ident" id="4240263">WriteByte</span><span class="op" id="4240272">(</span><span class="builtintype" id="4240273">byte</span><span class="op" id="4240277">(</span><span class="string" id="4240278">&#39;0&#39;</span>&nbsp;<span class="op" id="4240282">+</span>&nbsp;<span class="op" id="4240284">(</span><span class="ident" id="4240285">v</span><span class="op" id="4240286">/</span><span class="num" id="4240287">10</span><span class="op" id="4240289">)</span><span class="op" id="4240290">%</span><span class="num" id="4240291">10</span><span class="op" id="4240293">)</span><span class="op" id="4240294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240297">if</span>&nbsp;<span class="ident" id="4240300">err</span>&nbsp;<span class="op" id="4240304">!=</span>&nbsp;<span class="ident" id="4240307">nil</span>&nbsp;<span class="op" id="4240311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240315">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4240323">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240326">return</span>&nbsp;<span class="ident" id="4240333">out</span><span class="op" id="4240336">.</span><span class="ident" id="4240337">WriteByte</span><span class="op" id="4240346">(</span><span class="builtintype" id="4240347">byte</span><span class="op" id="4240351">(</span><span class="string" id="4240352">&#39;0&#39;</span>&nbsp;<span class="op" id="4240356">+</span>&nbsp;<span class="ident" id="4240358">v</span><span class="op" id="4240359">%</span><span class="num" id="4240360">10</span><span class="op" id="4240362">)</span><span class="op" id="4240363">)</span><br>
<span class="lineno"></span><span class="op" id="4240365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4240368">func</span>&nbsp;<span class="ident" id="4240373">marshalFourDigits</span><span class="op" id="4240390">(</span><span class="ident" id="4240391">out</span>&nbsp;<span class="op" id="4240395">*</span><span class="ident" id="4240396">forkableWriter</span><span class="op" id="4240410">,</span>&nbsp;<span class="ident" id="4240412">v</span>&nbsp;<span class="builtintype" id="4240414">int</span><span class="op" id="4240417">)</span>&nbsp;<span class="op" id="4240419">(</span><span class="ident" id="4240420">err</span>&nbsp;<span class="builtintype" id="4240424">error</span><span class="op" id="4240429">)</span>&nbsp;<span class="op" id="4240431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240434">var</span>&nbsp;<span class="ident" id="4240438">bytes</span>&nbsp;<span class="op" id="4240444">[</span><span class="num" id="4240445">4</span><span class="op" id="4240446">]</span><span class="builtintype" id="4240447">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240453">for</span>&nbsp;<span class="ident" id="4240457">i</span>&nbsp;<span class="op" id="4240459">:=</span>&nbsp;<span class="keyword" id="4240462">range</span>&nbsp;<span class="ident" id="4240468">bytes</span>&nbsp;<span class="op" id="4240474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240478">bytes</span><span class="op" id="4240483">[</span><span class="num" id="4240484">3</span><span class="op" id="4240485">-</span><span class="ident" id="4240486">i</span><span class="op" id="4240487">]</span>&nbsp;<span class="op" id="4240489">=</span>&nbsp;<span class="string" id="4240491">&#39;0&#39;</span>&nbsp;<span class="op" id="4240495">+</span>&nbsp;<span class="builtintype" id="4240497">byte</span><span class="op" id="4240501">(</span><span class="ident" id="4240502">v</span><span class="op" id="4240503">%</span><span class="num" id="4240504">10</span><span class="op" id="4240506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240510">v</span>&nbsp;<span class="op" id="4240512">/=</span>&nbsp;<span class="num" id="4240515">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4240519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240522">_</span><span class="op" id="4240523">,</span>&nbsp;<span class="ident" id="4240525">err</span>&nbsp;<span class="op" id="4240529">=</span>&nbsp;<span class="ident" id="4240531">out</span><span class="op" id="4240534">.</span><span class="ident" id="4240535">Write</span><span class="op" id="4240540">(</span><span class="ident" id="4240541">bytes</span><span class="op" id="4240546">[</span><span class="op" id="4240547">:</span><span class="op" id="4240548">]</span><span class="op" id="4240549">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240552">return</span><br>
<span class="lineno"></span><span class="op" id="4240559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4240562">func</span>&nbsp;<span class="ident" id="4240567">outsideUTCRange</span><span class="op" id="4240582">(</span><span class="ident" id="4240583">t</span>&nbsp;<span class="ident" id="4240585">time</span><span class="op" id="4240589">.</span><span class="ident" id="4240590">Time</span><span class="op" id="4240594">)</span>&nbsp;<span class="builtintype" id="4240596">bool</span>&nbsp;<span class="op" id="4240601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240604">year</span>&nbsp;<span class="op" id="4240609">:=</span>&nbsp;<span class="ident" id="4240612">t</span><span class="op" id="4240613">.</span><span class="ident" id="4240614">Year</span><span class="op" id="4240618">(</span><span class="op" id="4240619">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240622">return</span>&nbsp;<span class="ident" id="4240629">year</span>&nbsp;<span class="op" id="4240634">&lt;</span>&nbsp;<span class="num" id="4240636">1950</span>&nbsp;<span class="op" id="4240641">||</span>&nbsp;<span class="ident" id="4240644">year</span>&nbsp;<span class="op" id="4240649">&gt;=</span>&nbsp;<span class="num" id="4240652">2050</span><br>
<span class="lineno"></span><span class="op" id="4240657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4240660">func</span>&nbsp;<span class="ident" id="4240665">marshalUTCTime</span><span class="op" id="4240679">(</span><span class="ident" id="4240680">out</span>&nbsp;<span class="op" id="4240684">*</span><span class="ident" id="4240685">forkableWriter</span><span class="op" id="4240699">,</span>&nbsp;<span class="ident" id="4240701">t</span>&nbsp;<span class="ident" id="4240703">time</span><span class="op" id="4240707">.</span><span class="ident" id="4240708">Time</span><span class="op" id="4240712">)</span>&nbsp;<span class="op" id="4240714">(</span><span class="ident" id="4240715">err</span>&nbsp;<span class="builtintype" id="4240719">error</span><span class="op" id="4240724">)</span>&nbsp;<span class="op" id="4240726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240729">year</span>&nbsp;<span class="op" id="4240734">:=</span>&nbsp;<span class="ident" id="4240737">t</span><span class="op" id="4240738">.</span><span class="ident" id="4240739">Year</span><span class="op" id="4240743">(</span><span class="op" id="4240744">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240748">switch</span>&nbsp;<span class="op" id="4240755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240758">case</span>&nbsp;<span class="num" id="4240763">1950</span>&nbsp;<span class="op" id="4240768">&lt;=</span>&nbsp;<span class="ident" id="4240771">year</span>&nbsp;<span class="op" id="4240776">&amp;&amp;</span>&nbsp;<span class="ident" id="4240779">year</span>&nbsp;<span class="op" id="4240784">&lt;</span>&nbsp;<span class="num" id="4240786">2000</span><span class="op" id="4240790">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240794">err</span>&nbsp;<span class="op" id="4240798">=</span>&nbsp;<span class="ident" id="4240800">marshalTwoDigits</span><span class="op" id="4240816">(</span><span class="ident" id="4240817">out</span><span class="op" id="4240820">,</span>&nbsp;<span class="builtintype" id="4240822">int</span><span class="op" id="4240825">(</span><span class="ident" id="4240826">year</span><span class="op" id="4240830">-</span><span class="num" id="4240831">1900</span><span class="op" id="4240835">)</span><span class="op" id="4240836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240839">case</span>&nbsp;<span class="num" id="4240844">2000</span>&nbsp;<span class="op" id="4240849">&lt;=</span>&nbsp;<span class="ident" id="4240852">year</span>&nbsp;<span class="op" id="4240857">&amp;&amp;</span>&nbsp;<span class="ident" id="4240860">year</span>&nbsp;<span class="op" id="4240865">&lt;</span>&nbsp;<span class="num" id="4240867">2050</span><span class="op" id="4240871">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4240875">err</span>&nbsp;<span class="op" id="4240879">=</span>&nbsp;<span class="ident" id="4240881">marshalTwoDigits</span><span class="op" id="4240897">(</span><span class="ident" id="4240898">out</span><span class="op" id="4240901">,</span>&nbsp;<span class="builtintype" id="4240903">int</span><span class="op" id="4240906">(</span><span class="ident" id="4240907">year</span><span class="op" id="4240911">-</span><span class="num" id="4240912">2000</span><span class="op" id="4240916">)</span><span class="op" id="4240917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240920">default</span><span class="op" id="4240927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240931">return</span>&nbsp;<span class="ident" id="4240938">StructuralError</span><span class="op" id="4240953">{</span><span class="string" id="4240954">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4240988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4240991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4240994">if</span>&nbsp;<span class="ident" id="4240997">err</span>&nbsp;<span class="op" id="4241001">!=</span>&nbsp;<span class="ident" id="4241004">nil</span>&nbsp;<span class="op" id="4241008">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241012">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241024">return</span>&nbsp;<span class="ident" id="4241031">marshalTimeCommon</span><span class="op" id="4241048">(</span><span class="ident" id="4241049">out</span><span class="op" id="4241052">,</span>&nbsp;<span class="ident" id="4241054">t</span><span class="op" id="4241055">)</span><br>
<span class="lineno"></span><span class="op" id="4241057">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4241060">func</span>&nbsp;<span class="ident" id="4241065">marshalGeneralizedTime</span><span class="op" id="4241087">(</span><span class="ident" id="4241088">out</span>&nbsp;<span class="op" id="4241092">*</span><span class="ident" id="4241093">forkableWriter</span><span class="op" id="4241107">,</span>&nbsp;<span class="ident" id="4241109">t</span>&nbsp;<span class="ident" id="4241111">time</span><span class="op" id="4241115">.</span><span class="ident" id="4241116">Time</span><span class="op" id="4241120">)</span>&nbsp;<span class="op" id="4241122">(</span><span class="ident" id="4241123">err</span>&nbsp;<span class="builtintype" id="4241127">error</span><span class="op" id="4241132">)</span>&nbsp;<span class="op" id="4241134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241137">year</span>&nbsp;<span class="op" id="4241142">:=</span>&nbsp;<span class="ident" id="4241145">t</span><span class="op" id="4241146">.</span><span class="ident" id="4241147">Year</span><span class="op" id="4241151">(</span><span class="op" id="4241152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241155">if</span>&nbsp;<span class="ident" id="4241158">year</span>&nbsp;<span class="op" id="4241163">&lt;</span>&nbsp;<span class="num" id="4241165">0</span>&nbsp;<span class="op" id="4241167">||</span>&nbsp;<span class="ident" id="4241170">year</span>&nbsp;<span class="op" id="4241175">&gt;</span>&nbsp;<span class="num" id="4241177">9999</span>&nbsp;<span class="op" id="4241182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241186">return</span>&nbsp;<span class="ident" id="4241193">StructuralError</span><span class="op" id="4241208">{</span><span class="string" id="4241209">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4241251">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241257">if</span>&nbsp;<span class="ident" id="4241260">err</span>&nbsp;<span class="op" id="4241264">=</span>&nbsp;<span class="ident" id="4241266">marshalFourDigits</span><span class="op" id="4241283">(</span><span class="ident" id="4241284">out</span><span class="op" id="4241287">,</span>&nbsp;<span class="ident" id="4241289">year</span><span class="op" id="4241293">)</span><span class="op" id="4241294">;</span>&nbsp;<span class="ident" id="4241296">err</span>&nbsp;<span class="op" id="4241300">!=</span>&nbsp;<span class="ident" id="4241303">nil</span>&nbsp;<span class="op" id="4241307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241311">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241323">return</span>&nbsp;<span class="ident" id="4241330">marshalTimeCommon</span><span class="op" id="4241347">(</span><span class="ident" id="4241348">out</span><span class="op" id="4241351">,</span>&nbsp;<span class="ident" id="4241353">t</span><span class="op" id="4241354">)</span><br>
<span class="lineno"></span><span class="op" id="4241356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4241359">func</span>&nbsp;<span class="ident" id="4241364">marshalTimeCommon</span><span class="op" id="4241381">(</span><span class="ident" id="4241382">out</span>&nbsp;<span class="op" id="4241386">*</span><span class="ident" id="4241387">forkableWriter</span><span class="op" id="4241401">,</span>&nbsp;<span class="ident" id="4241403">t</span>&nbsp;<span class="ident" id="4241405">time</span><span class="op" id="4241409">.</span><span class="ident" id="4241410">Time</span><span class="op" id="4241414">)</span>&nbsp;<span class="op" id="4241416">(</span><span class="ident" id="4241417">err</span>&nbsp;<span class="builtintype" id="4241421">error</span><span class="op" id="4241426">)</span>&nbsp;<span class="op" id="4241428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241431">_</span><span class="op" id="4241432">,</span>&nbsp;<span class="ident" id="4241434">month</span><span class="op" id="4241439">,</span>&nbsp;<span class="ident" id="4241441">day</span>&nbsp;<span class="op" id="4241445">:=</span>&nbsp;<span class="ident" id="4241448">t</span><span class="op" id="4241449">.</span><span class="ident" id="4241450">Date</span><span class="op" id="4241454">(</span><span class="op" id="4241455">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241459">err</span>&nbsp;<span class="op" id="4241463">=</span>&nbsp;<span class="ident" id="4241465">marshalTwoDigits</span><span class="op" id="4241481">(</span><span class="ident" id="4241482">out</span><span class="op" id="4241485">,</span>&nbsp;<span class="builtintype" id="4241487">int</span><span class="op" id="4241490">(</span><span class="ident" id="4241491">month</span><span class="op" id="4241496">)</span><span class="op" id="4241497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241500">if</span>&nbsp;<span class="ident" id="4241503">err</span>&nbsp;<span class="op" id="4241507">!=</span>&nbsp;<span class="ident" id="4241510">nil</span>&nbsp;<span class="op" id="4241514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241518">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241526">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241530">err</span>&nbsp;<span class="op" id="4241534">=</span>&nbsp;<span class="ident" id="4241536">marshalTwoDigits</span><span class="op" id="4241552">(</span><span class="ident" id="4241553">out</span><span class="op" id="4241556">,</span>&nbsp;<span class="ident" id="4241558">day</span><span class="op" id="4241561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241564">if</span>&nbsp;<span class="ident" id="4241567">err</span>&nbsp;<span class="op" id="4241571">!=</span>&nbsp;<span class="ident" id="4241574">nil</span>&nbsp;<span class="op" id="4241578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241582">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241590">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241594">hour</span><span class="op" id="4241598">,</span>&nbsp;<span class="ident" id="4241600">min</span><span class="op" id="4241603">,</span>&nbsp;<span class="ident" id="4241605">sec</span>&nbsp;<span class="op" id="4241609">:=</span>&nbsp;<span class="ident" id="4241612">t</span><span class="op" id="4241613">.</span><span class="ident" id="4241614">Clock</span><span class="op" id="4241619">(</span><span class="op" id="4241620">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241624">err</span>&nbsp;<span class="op" id="4241628">=</span>&nbsp;<span class="ident" id="4241630">marshalTwoDigits</span><span class="op" id="4241646">(</span><span class="ident" id="4241647">out</span><span class="op" id="4241650">,</span>&nbsp;<span class="ident" id="4241652">hour</span><span class="op" id="4241656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241659">if</span>&nbsp;<span class="ident" id="4241662">err</span>&nbsp;<span class="op" id="4241666">!=</span>&nbsp;<span class="ident" id="4241669">nil</span>&nbsp;<span class="op" id="4241673">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241677">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241689">err</span>&nbsp;<span class="op" id="4241693">=</span>&nbsp;<span class="ident" id="4241695">marshalTwoDigits</span><span class="op" id="4241711">(</span><span class="ident" id="4241712">out</span><span class="op" id="4241715">,</span>&nbsp;<span class="ident" id="4241717">min</span><span class="op" id="4241720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241723">if</span>&nbsp;<span class="ident" id="4241726">err</span>&nbsp;<span class="op" id="4241730">!=</span>&nbsp;<span class="ident" id="4241733">nil</span>&nbsp;<span class="op" id="4241737">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241741">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241753">err</span>&nbsp;<span class="op" id="4241757">=</span>&nbsp;<span class="ident" id="4241759">marshalTwoDigits</span><span class="op" id="4241775">(</span><span class="ident" id="4241776">out</span><span class="op" id="4241779">,</span>&nbsp;<span class="ident" id="4241781">sec</span><span class="op" id="4241784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241787">if</span>&nbsp;<span class="ident" id="4241790">err</span>&nbsp;<span class="op" id="4241794">!=</span>&nbsp;<span class="ident" id="4241797">nil</span>&nbsp;<span class="op" id="4241801">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241805">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241817">_</span><span class="op" id="4241818">,</span>&nbsp;<span class="ident" id="4241820">offset</span>&nbsp;<span class="op" id="4241827">:=</span>&nbsp;<span class="ident" id="4241830">t</span><span class="op" id="4241831">.</span><span class="ident" id="4241832">Zone</span><span class="op" id="4241836">(</span><span class="op" id="4241837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241841">switch</span>&nbsp;<span class="op" id="4241848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241851">case</span>&nbsp;<span class="ident" id="4241856">offset</span><span class="op" id="4241862">/</span><span class="num" id="4241863">60</span>&nbsp;<span class="op" id="4241866">==</span>&nbsp;<span class="num" id="4241869">0</span><span class="op" id="4241870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241874">err</span>&nbsp;<span class="op" id="4241878">=</span>&nbsp;<span class="ident" id="4241880">out</span><span class="op" id="4241883">.</span><span class="ident" id="4241884">WriteByte</span><span class="op" id="4241893">(</span><span class="string" id="4241894">&#39;Z&#39;</span><span class="op" id="4241897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241901">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241909">case</span>&nbsp;<span class="ident" id="4241914">offset</span>&nbsp;<span class="op" id="4241921">&gt;</span>&nbsp;<span class="num" id="4241923">0</span><span class="op" id="4241924">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241928">err</span>&nbsp;<span class="op" id="4241932">=</span>&nbsp;<span class="ident" id="4241934">out</span><span class="op" id="4241937">.</span><span class="ident" id="4241938">WriteByte</span><span class="op" id="4241947">(</span><span class="string" id="4241948">&#39;+&#39;</span><span class="op" id="4241951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4241954">case</span>&nbsp;<span class="ident" id="4241959">offset</span>&nbsp;<span class="op" id="4241966">&lt;</span>&nbsp;<span class="num" id="4241968">0</span><span class="op" id="4241969">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4241973">err</span>&nbsp;<span class="op" id="4241977">=</span>&nbsp;<span class="ident" id="4241979">out</span><span class="op" id="4241982">.</span><span class="ident" id="4241983">WriteByte</span><span class="op" id="4241992">(</span><span class="string" id="4241993">&#39;-&#39;</span><span class="op" id="4241996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4241999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242003">if</span>&nbsp;<span class="ident" id="4242006">err</span>&nbsp;<span class="op" id="4242010">!=</span>&nbsp;<span class="ident" id="4242013">nil</span>&nbsp;<span class="op" id="4242017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242021">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242033">offsetMinutes</span>&nbsp;<span class="op" id="4242047">:=</span>&nbsp;<span class="ident" id="4242050">offset</span>&nbsp;<span class="op" id="4242057">/</span>&nbsp;<span class="num" id="4242059">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242063">if</span>&nbsp;<span class="ident" id="4242066">offsetMinutes</span>&nbsp;<span class="op" id="4242080">&lt;</span>&nbsp;<span class="num" id="4242082">0</span>&nbsp;<span class="op" id="4242084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242088">offsetMinutes</span>&nbsp;<span class="op" id="4242102">=</span>&nbsp;<span class="op" id="4242104">-</span><span class="ident" id="4242105">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242124">err</span>&nbsp;<span class="op" id="4242128">=</span>&nbsp;<span class="ident" id="4242130">marshalTwoDigits</span><span class="op" id="4242146">(</span><span class="ident" id="4242147">out</span><span class="op" id="4242150">,</span>&nbsp;<span class="ident" id="4242152">offsetMinutes</span><span class="op" id="4242165">/</span><span class="num" id="4242166">60</span><span class="op" id="4242168">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242171">if</span>&nbsp;<span class="ident" id="4242174">err</span>&nbsp;<span class="op" id="4242178">!=</span>&nbsp;<span class="ident" id="4242181">nil</span>&nbsp;<span class="op" id="4242185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242189">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242201">err</span>&nbsp;<span class="op" id="4242205">=</span>&nbsp;<span class="ident" id="4242207">marshalTwoDigits</span><span class="op" id="4242223">(</span><span class="ident" id="4242224">out</span><span class="op" id="4242227">,</span>&nbsp;<span class="ident" id="4242229">offsetMinutes</span><span class="op" id="4242242">%</span><span class="num" id="4242243">60</span><span class="op" id="4242245">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242248">return</span><br>
<span class="lineno"></span><span class="op" id="4242255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4242258">func</span>&nbsp;<span class="ident" id="4242263">stripTagAndLength</span><span class="op" id="4242280">(</span><span class="ident" id="4242281">in</span>&nbsp;<span class="op" id="4242284">[</span><span class="op" id="4242285">]</span><span class="builtintype" id="4242286">byte</span><span class="op" id="4242290">)</span>&nbsp;<span class="op" id="4242292">[</span><span class="op" id="4242293">]</span><span class="builtintype" id="4242294">byte</span>&nbsp;<span class="op" id="4242299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242302">_</span><span class="op" id="4242303">,</span>&nbsp;<span class="ident" id="4242305">offset</span><span class="op" id="4242311">,</span>&nbsp;<span class="ident" id="4242313">err</span>&nbsp;<span class="op" id="4242317">:=</span>&nbsp;<span class="ident" id="4242320">parseTagAndLength</span><span class="op" id="4242337">(</span><span class="ident" id="4242338">in</span><span class="op" id="4242340">,</span>&nbsp;<span class="num" id="4242342">0</span><span class="op" id="4242343">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242346">if</span>&nbsp;<span class="ident" id="4242349">err</span>&nbsp;<span class="op" id="4242353">!=</span>&nbsp;<span class="ident" id="4242356">nil</span>&nbsp;<span class="op" id="4242360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242364">return</span>&nbsp;<span class="ident" id="4242371">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242378">return</span>&nbsp;<span class="ident" id="4242385">in</span><span class="op" id="4242387">[</span><span class="ident" id="4242388">offset</span><span class="op" id="4242394">:</span><span class="op" id="4242395">]</span><br>
<span class="lineno"></span><span class="op" id="4242397">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4242400">func</span>&nbsp;<span class="ident" id="4242405">marshalBody</span><span class="op" id="4242416">(</span><span class="ident" id="4242417">out</span>&nbsp;<span class="op" id="4242421">*</span><span class="ident" id="4242422">forkableWriter</span><span class="op" id="4242436">,</span>&nbsp;<span class="ident" id="4242438">value</span>&nbsp;<span class="ident" id="4242444">reflect</span><span class="op" id="4242451">.</span><span class="ident" id="4242452">Value</span><span class="op" id="4242457">,</span>&nbsp;<span class="ident" id="4242459">params</span>&nbsp;<span class="ident" id="4242466">fieldParameters</span><span class="op" id="4242481">)</span>&nbsp;<span class="op" id="4242483">(</span><span class="ident" id="4242484">err</span>&nbsp;<span class="builtintype" id="4242488">error</span><span class="op" id="4242493">)</span>&nbsp;<span class="op" id="4242495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242498">switch</span>&nbsp;<span class="ident" id="4242505">value</span><span class="op" id="4242510">.</span><span class="ident" id="4242511">Type</span><span class="op" id="4242515">(</span><span class="op" id="4242516">)</span>&nbsp;<span class="op" id="4242518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242521">case</span>&nbsp;<span class="ident" id="4242526">timeType</span><span class="op" id="4242534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4242538">t</span>&nbsp;<span class="op" id="4242540">:=</span>&nbsp;<span class="ident" id="4242543">value</span><span class="op" id="4242548">.</span><span class="ident" id="4242549">Interface</span><span class="op" id="4242558">(</span><span class="op" id="4242559">)</span><span class="op" id="4242560">.</span><span class="op" id="4242561">(</span><span class="ident" id="4242562">time</span><span class="op" id="4242566">.</span><span class="ident" id="4242567">Time</span><span class="op" id="4242571">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242575">if</span>&nbsp;<span class="ident" id="4242578">outsideUTCRange</span><span class="op" id="4242593">(</span><span class="ident" id="4242594">t</span><span class="op" id="4242595">)</span>&nbsp;<span class="op" id="4242597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242602">return</span>&nbsp;<span class="ident" id="4242609">marshalGeneralizedTime</span><span class="op" id="4242631">(</span><span class="ident" id="4242632">out</span><span class="op" id="4242635">,</span>&nbsp;<span class="ident" id="4242637">t</span><span class="op" id="4242638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242642">}</span>&nbsp;<span class="keyword" id="4242644">else</span>&nbsp;<span class="op" id="4242649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242654">return</span>&nbsp;<span class="ident" id="4242661">marshalUTCTime</span><span class="op" id="4242675">(</span><span class="ident" id="4242676">out</span><span class="op" id="4242679">,</span>&nbsp;<span class="ident" id="4242681">t</span><span class="op" id="4242682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242686">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242689">case</span>&nbsp;<span class="ident" id="4242694">bitStringType</span><span class="op" id="4242707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242711">return</span>&nbsp;<span class="ident" id="4242718">marshalBitString</span><span class="op" id="4242734">(</span><span class="ident" id="4242735">out</span><span class="op" id="4242738">,</span>&nbsp;<span class="ident" id="4242740">value</span><span class="op" id="4242745">.</span><span class="ident" id="4242746">Interface</span><span class="op" id="4242755">(</span><span class="op" id="4242756">)</span><span class="op" id="4242757">.</span><span class="op" id="4242758">(</span><span class="ident" id="4242759">BitString</span><span class="op" id="4242768">)</span><span class="op" id="4242769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242772">case</span>&nbsp;<span class="ident" id="4242777">objectIdentifierType</span><span class="op" id="4242797">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242801">return</span>&nbsp;<span class="ident" id="4242808">marshalObjectIdentifier</span><span class="op" id="4242831">(</span><span class="ident" id="4242832">out</span><span class="op" id="4242835">,</span>&nbsp;<span class="ident" id="4242837">value</span><span class="op" id="4242842">.</span><span class="ident" id="4242843">Interface</span><span class="op" id="4242852">(</span><span class="op" id="4242853">)</span><span class="op" id="4242854">.</span><span class="op" id="4242855">(</span><span class="ident" id="4242856">ObjectIdentifier</span><span class="op" id="4242872">)</span><span class="op" id="4242873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242876">case</span>&nbsp;<span class="ident" id="4242881">bigIntType</span><span class="op" id="4242891">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242895">return</span>&nbsp;<span class="ident" id="4242902">marshalBigInt</span><span class="op" id="4242915">(</span><span class="ident" id="4242916">out</span><span class="op" id="4242919">,</span>&nbsp;<span class="ident" id="4242921">value</span><span class="op" id="4242926">.</span><span class="ident" id="4242927">Interface</span><span class="op" id="4242936">(</span><span class="op" id="4242937">)</span><span class="op" id="4242938">.</span><span class="op" id="4242939">(</span><span class="op" id="4242940">*</span><span class="ident" id="4242941">big</span><span class="op" id="4242944">.</span><span class="ident" id="4242945">Int</span><span class="op" id="4242948">)</span><span class="op" id="4242949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4242952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242956">switch</span>&nbsp;<span class="ident" id="4242963">v</span>&nbsp;<span class="op" id="4242965">:=</span>&nbsp;<span class="ident" id="4242968">value</span><span class="op" id="4242973">;</span>&nbsp;<span class="ident" id="4242975">v</span><span class="op" id="4242976">.</span><span class="ident" id="4242977">Kind</span><span class="op" id="4242981">(</span><span class="op" id="4242982">)</span>&nbsp;<span class="op" id="4242984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4242987">case</span>&nbsp;<span class="ident" id="4242992">reflect</span><span class="op" id="4242999">.</span><span class="ident" id="4243000">Bool</span><span class="op" id="4243004">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243008">if</span>&nbsp;<span class="ident" id="4243011">v</span><span class="op" id="4243012">.</span><span class="ident" id="4243013">Bool</span><span class="op" id="4243017">(</span><span class="op" id="4243018">)</span>&nbsp;<span class="op" id="4243020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243025">return</span>&nbsp;<span class="ident" id="4243032">out</span><span class="op" id="4243035">.</span><span class="ident" id="4243036">WriteByte</span><span class="op" id="4243045">(</span><span class="num" id="4243046">255</span><span class="op" id="4243049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243053">}</span>&nbsp;<span class="keyword" id="4243055">else</span>&nbsp;<span class="op" id="4243060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243065">return</span>&nbsp;<span class="ident" id="4243072">out</span><span class="op" id="4243075">.</span><span class="ident" id="4243076">WriteByte</span><span class="op" id="4243085">(</span><span class="num" id="4243086">0</span><span class="op" id="4243087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243091">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243094">case</span>&nbsp;<span class="ident" id="4243099">reflect</span><span class="op" id="4243106">.</span><span class="ident" id="4243107">Int</span><span class="op" id="4243110">,</span>&nbsp;<span class="ident" id="4243112">reflect</span><span class="op" id="4243119">.</span><span class="ident" id="4243120">Int8</span><span class="op" id="4243124">,</span>&nbsp;<span class="ident" id="4243126">reflect</span><span class="op" id="4243133">.</span><span class="ident" id="4243134">Int16</span><span class="op" id="4243139">,</span>&nbsp;<span class="ident" id="4243141">reflect</span><span class="op" id="4243148">.</span><span class="ident" id="4243149">Int32</span><span class="op" id="4243154">,</span>&nbsp;<span class="ident" id="4243156">reflect</span><span class="op" id="4243163">.</span><span class="ident" id="4243164">Int64</span><span class="op" id="4243169">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243173">return</span>&nbsp;<span class="ident" id="4243180">marshalInt64</span><span class="op" id="4243192">(</span><span class="ident" id="4243193">out</span><span class="op" id="4243196">,</span>&nbsp;<span class="ident" id="4243198">int64</span><span class="op" id="4243203">(</span><span class="ident" id="4243204">v</span><span class="op" id="4243205">.</span><span class="ident" id="4243206">Int</span><span class="op" id="4243209">(</span><span class="op" id="4243210">)</span><span class="op" id="4243211">)</span><span class="op" id="4243212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243215">case</span>&nbsp;<span class="ident" id="4243220">reflect</span><span class="op" id="4243227">.</span><span class="ident" id="4243228">Struct</span><span class="op" id="4243234">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243238">t</span>&nbsp;<span class="op" id="4243240">:=</span>&nbsp;<span class="ident" id="4243243">v</span><span class="op" id="4243244">.</span><span class="ident" id="4243245">Type</span><span class="op" id="4243249">(</span><span class="op" id="4243250">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243255">startingField</span>&nbsp;<span class="op" id="4243269">:=</span>&nbsp;<span class="num" id="4243272">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4243277">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4243335">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243396">if</span>&nbsp;<span class="ident" id="4243399">t</span><span class="op" id="4243400">.</span><span class="ident" id="4243401">NumField</span><span class="op" id="4243409">(</span><span class="op" id="4243410">)</span>&nbsp;<span class="op" id="4243412">&gt;</span>&nbsp;<span class="num" id="4243414">0</span>&nbsp;<span class="op" id="4243416">&amp;&amp;</span>&nbsp;<span class="ident" id="4243419">t</span><span class="op" id="4243420">.</span><span class="ident" id="4243421">Field</span><span class="op" id="4243426">(</span><span class="num" id="4243427">0</span><span class="op" id="4243428">)</span><span class="op" id="4243429">.</span><span class="ident" id="4243430">Type</span>&nbsp;<span class="op" id="4243435">==</span>&nbsp;<span class="ident" id="4243438">rawContentsType</span>&nbsp;<span class="op" id="4243454">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243459">s</span>&nbsp;<span class="op" id="4243461">:=</span>&nbsp;<span class="ident" id="4243464">v</span><span class="op" id="4243465">.</span><span class="ident" id="4243466">Field</span><span class="op" id="4243471">(</span><span class="num" id="4243472">0</span><span class="op" id="4243473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243478">if</span>&nbsp;<span class="ident" id="4243481">s</span><span class="op" id="4243482">.</span><span class="ident" id="4243483">Len</span><span class="op" id="4243486">(</span><span class="op" id="4243487">)</span>&nbsp;<span class="op" id="4243489">&gt;</span>&nbsp;<span class="num" id="4243491">0</span>&nbsp;<span class="op" id="4243493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243499">bytes</span>&nbsp;<span class="op" id="4243505">:=</span>&nbsp;<span class="builtinfunc" id="4243508">make</span><span class="op" id="4243512">(</span><span class="op" id="4243513">[</span><span class="op" id="4243514">]</span><span class="builtintype" id="4243515">byte</span><span class="op" id="4243519">,</span>&nbsp;<span class="ident" id="4243521">s</span><span class="op" id="4243522">.</span><span class="ident" id="4243523">Len</span><span class="op" id="4243526">(</span><span class="op" id="4243527">)</span><span class="op" id="4243528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243534">for</span>&nbsp;<span class="ident" id="4243538">i</span>&nbsp;<span class="op" id="4243540">:=</span>&nbsp;<span class="num" id="4243543">0</span><span class="op" id="4243544">;</span>&nbsp;<span class="ident" id="4243546">i</span>&nbsp;<span class="op" id="4243548">&lt;</span>&nbsp;<span class="ident" id="4243550">s</span><span class="op" id="4243551">.</span><span class="ident" id="4243552">Len</span><span class="op" id="4243555">(</span><span class="op" id="4243556">)</span><span class="op" id="4243557">;</span>&nbsp;<span class="ident" id="4243559">i</span><span class="op" id="4243560">++</span>&nbsp;<span class="op" id="4243563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243570">bytes</span><span class="op" id="4243575">[</span><span class="ident" id="4243576">i</span><span class="op" id="4243577">]</span>&nbsp;<span class="op" id="4243579">=</span>&nbsp;<span class="builtintype" id="4243581">uint8</span><span class="op" id="4243586">(</span><span class="ident" id="4243587">s</span><span class="op" id="4243588">.</span><span class="ident" id="4243589">Index</span><span class="op" id="4243594">(</span><span class="ident" id="4243595">i</span><span class="op" id="4243596">)</span><span class="op" id="4243597">.</span><span class="ident" id="4243598">Uint</span><span class="op" id="4243602">(</span><span class="op" id="4243603">)</span><span class="op" id="4243604">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4243616">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243775">_</span><span class="op" id="4243776">,</span>&nbsp;<span class="ident" id="4243778">err</span>&nbsp;<span class="op" id="4243782">=</span>&nbsp;<span class="ident" id="4243784">out</span><span class="op" id="4243787">.</span><span class="ident" id="4243788">Write</span><span class="op" id="4243793">(</span><span class="ident" id="4243794">stripTagAndLength</span><span class="op" id="4243811">(</span><span class="ident" id="4243812">bytes</span><span class="op" id="4243817">)</span><span class="op" id="4243818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243824">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243834">}</span>&nbsp;<span class="keyword" id="4243836">else</span>&nbsp;<span class="op" id="4243841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243847">startingField</span>&nbsp;<span class="op" id="4243861">=</span>&nbsp;<span class="num" id="4243863">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243868">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4243872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243877">for</span>&nbsp;<span class="ident" id="4243881">i</span>&nbsp;<span class="op" id="4243883">:=</span>&nbsp;<span class="ident" id="4243886">startingField</span><span class="op" id="4243899">;</span>&nbsp;<span class="ident" id="4243901">i</span>&nbsp;<span class="op" id="4243903">&lt;</span>&nbsp;<span class="ident" id="4243905">t</span><span class="op" id="4243906">.</span><span class="ident" id="4243907">NumField</span><span class="op" id="4243915">(</span><span class="op" id="4243916">)</span><span class="op" id="4243917">;</span>&nbsp;<span class="ident" id="4243919">i</span><span class="op" id="4243920">++</span>&nbsp;<span class="op" id="4243923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4243928">var</span>&nbsp;<span class="ident" id="4243932">pre</span>&nbsp;<span class="op" id="4243936">*</span><span class="ident" id="4243937">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243955">pre</span><span class="op" id="4243958">,</span>&nbsp;<span class="ident" id="4243960">out</span>&nbsp;<span class="op" id="4243964">=</span>&nbsp;<span class="ident" id="4243966">out</span><span class="op" id="4243969">.</span><span class="ident" id="4243970">fork</span><span class="op" id="4243974">(</span><span class="op" id="4243975">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4243980">err</span>&nbsp;<span class="op" id="4243984">=</span>&nbsp;<span class="ident" id="4243986">marshalField</span><span class="op" id="4243998">(</span><span class="ident" id="4243999">pre</span><span class="op" id="4244002">,</span>&nbsp;<span class="ident" id="4244004">v</span><span class="op" id="4244005">.</span><span class="ident" id="4244006">Field</span><span class="op" id="4244011">(</span><span class="ident" id="4244012">i</span><span class="op" id="4244013">)</span><span class="op" id="4244014">,</span>&nbsp;<span class="ident" id="4244016">parseFieldParameters</span><span class="op" id="4244036">(</span><span class="ident" id="4244037">t</span><span class="op" id="4244038">.</span><span class="ident" id="4244039">Field</span><span class="op" id="4244044">(</span><span class="ident" id="4244045">i</span><span class="op" id="4244046">)</span><span class="op" id="4244047">.</span><span class="ident" id="4244048">Tag</span><span class="op" id="4244051">.</span><span class="ident" id="4244052">Get</span><span class="op" id="4244055">(</span><span class="string" id="4244056">&#34;asn1&#34;</span><span class="op" id="4244062">)</span><span class="op" id="4244063">)</span><span class="op" id="4244064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244069">if</span>&nbsp;<span class="ident" id="4244072">err</span>&nbsp;<span class="op" id="4244076">!=</span>&nbsp;<span class="ident" id="4244079">nil</span>&nbsp;<span class="op" id="4244083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244089">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244103">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244107">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244115">case</span>&nbsp;<span class="ident" id="4244120">reflect</span><span class="op" id="4244127">.</span><span class="ident" id="4244128">Slice</span><span class="op" id="4244133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244137">sliceType</span>&nbsp;<span class="op" id="4244147">:=</span>&nbsp;<span class="ident" id="4244150">v</span><span class="op" id="4244151">.</span><span class="ident" id="4244152">Type</span><span class="op" id="4244156">(</span><span class="op" id="4244157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244161">if</span>&nbsp;<span class="ident" id="4244164">sliceType</span><span class="op" id="4244173">.</span><span class="ident" id="4244174">Elem</span><span class="op" id="4244178">(</span><span class="op" id="4244179">)</span><span class="op" id="4244180">.</span><span class="ident" id="4244181">Kind</span><span class="op" id="4244185">(</span><span class="op" id="4244186">)</span>&nbsp;<span class="op" id="4244188">==</span>&nbsp;<span class="ident" id="4244191">reflect</span><span class="op" id="4244198">.</span><span class="ident" id="4244199">Uint8</span>&nbsp;<span class="op" id="4244205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244210">bytes</span>&nbsp;<span class="op" id="4244216">:=</span>&nbsp;<span class="builtinfunc" id="4244219">make</span><span class="op" id="4244223">(</span><span class="op" id="4244224">[</span><span class="op" id="4244225">]</span><span class="builtintype" id="4244226">byte</span><span class="op" id="4244230">,</span>&nbsp;<span class="ident" id="4244232">v</span><span class="op" id="4244233">.</span><span class="ident" id="4244234">Len</span><span class="op" id="4244237">(</span><span class="op" id="4244238">)</span><span class="op" id="4244239">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244244">for</span>&nbsp;<span class="ident" id="4244248">i</span>&nbsp;<span class="op" id="4244250">:=</span>&nbsp;<span class="num" id="4244253">0</span><span class="op" id="4244254">;</span>&nbsp;<span class="ident" id="4244256">i</span>&nbsp;<span class="op" id="4244258">&lt;</span>&nbsp;<span class="ident" id="4244260">v</span><span class="op" id="4244261">.</span><span class="ident" id="4244262">Len</span><span class="op" id="4244265">(</span><span class="op" id="4244266">)</span><span class="op" id="4244267">;</span>&nbsp;<span class="ident" id="4244269">i</span><span class="op" id="4244270">++</span>&nbsp;<span class="op" id="4244273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244279">bytes</span><span class="op" id="4244284">[</span><span class="ident" id="4244285">i</span><span class="op" id="4244286">]</span>&nbsp;<span class="op" id="4244288">=</span>&nbsp;<span class="builtintype" id="4244290">uint8</span><span class="op" id="4244295">(</span><span class="ident" id="4244296">v</span><span class="op" id="4244297">.</span><span class="ident" id="4244298">Index</span><span class="op" id="4244303">(</span><span class="ident" id="4244304">i</span><span class="op" id="4244305">)</span><span class="op" id="4244306">.</span><span class="ident" id="4244307">Uint</span><span class="op" id="4244311">(</span><span class="op" id="4244312">)</span><span class="op" id="4244313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244323">_</span><span class="op" id="4244324">,</span>&nbsp;<span class="ident" id="4244326">err</span>&nbsp;<span class="op" id="4244330">=</span>&nbsp;<span class="ident" id="4244332">out</span><span class="op" id="4244335">.</span><span class="ident" id="4244336">Write</span><span class="op" id="4244341">(</span><span class="ident" id="4244342">bytes</span><span class="op" id="4244347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244352">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244366">var</span>&nbsp;<span class="ident" id="4244370">fp</span>&nbsp;<span class="ident" id="4244373">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244391">for</span>&nbsp;<span class="ident" id="4244395">i</span>&nbsp;<span class="op" id="4244397">:=</span>&nbsp;<span class="num" id="4244400">0</span><span class="op" id="4244401">;</span>&nbsp;<span class="ident" id="4244403">i</span>&nbsp;<span class="op" id="4244405">&lt;</span>&nbsp;<span class="ident" id="4244407">v</span><span class="op" id="4244408">.</span><span class="ident" id="4244409">Len</span><span class="op" id="4244412">(</span><span class="op" id="4244413">)</span><span class="op" id="4244414">;</span>&nbsp;<span class="ident" id="4244416">i</span><span class="op" id="4244417">++</span>&nbsp;<span class="op" id="4244420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244425">var</span>&nbsp;<span class="ident" id="4244429">pre</span>&nbsp;<span class="op" id="4244433">*</span><span class="ident" id="4244434">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244452">pre</span><span class="op" id="4244455">,</span>&nbsp;<span class="ident" id="4244457">out</span>&nbsp;<span class="op" id="4244461">=</span>&nbsp;<span class="ident" id="4244463">out</span><span class="op" id="4244466">.</span><span class="ident" id="4244467">fork</span><span class="op" id="4244471">(</span><span class="op" id="4244472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4244477">err</span>&nbsp;<span class="op" id="4244481">=</span>&nbsp;<span class="ident" id="4244483">marshalField</span><span class="op" id="4244495">(</span><span class="ident" id="4244496">pre</span><span class="op" id="4244499">,</span>&nbsp;<span class="ident" id="4244501">v</span><span class="op" id="4244502">.</span><span class="ident" id="4244503">Index</span><span class="op" id="4244508">(</span><span class="ident" id="4244509">i</span><span class="op" id="4244510">)</span><span class="op" id="4244511">,</span>&nbsp;<span class="ident" id="4244513">fp</span><span class="op" id="4244515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244520">if</span>&nbsp;<span class="ident" id="4244523">err</span>&nbsp;<span class="op" id="4244527">!=</span>&nbsp;<span class="ident" id="4244530">nil</span>&nbsp;<span class="op" id="4244534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244540">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244550">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244558">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244566">case</span>&nbsp;<span class="ident" id="4244571">reflect</span><span class="op" id="4244578">.</span><span class="ident" id="4244579">String</span><span class="op" id="4244585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244589">switch</span>&nbsp;<span class="ident" id="4244596">params</span><span class="op" id="4244602">.</span><span class="ident" id="4244603">stringType</span>&nbsp;<span class="op" id="4244614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244618">case</span>&nbsp;<span class="ident" id="4244623">tagIA5String</span><span class="op" id="4244635">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244640">return</span>&nbsp;<span class="ident" id="4244647">marshalIA5String</span><span class="op" id="4244663">(</span><span class="ident" id="4244664">out</span><span class="op" id="4244667">,</span>&nbsp;<span class="ident" id="4244669">v</span><span class="op" id="4244670">.</span><span class="ident" id="4244671">String</span><span class="op" id="4244677">(</span><span class="op" id="4244678">)</span><span class="op" id="4244679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244683">case</span>&nbsp;<span class="ident" id="4244688">tagPrintableString</span><span class="op" id="4244706">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244711">return</span>&nbsp;<span class="ident" id="4244718">marshalPrintableString</span><span class="op" id="4244740">(</span><span class="ident" id="4244741">out</span><span class="op" id="4244744">,</span>&nbsp;<span class="ident" id="4244746">v</span><span class="op" id="4244747">.</span><span class="ident" id="4244748">String</span><span class="op" id="4244754">(</span><span class="op" id="4244755">)</span><span class="op" id="4244756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244760">default</span><span class="op" id="4244767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244772">return</span>&nbsp;<span class="ident" id="4244779">marshalUTF8String</span><span class="op" id="4244796">(</span><span class="ident" id="4244797">out</span><span class="op" id="4244800">,</span>&nbsp;<span class="ident" id="4244802">v</span><span class="op" id="4244803">.</span><span class="ident" id="4244804">String</span><span class="op" id="4244810">(</span><span class="op" id="4244811">)</span><span class="op" id="4244812">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4244819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4244823">return</span>&nbsp;<span class="ident" id="4244830">StructuralError</span><span class="op" id="4244845">{</span><span class="string" id="4244846">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4244863">}</span><br>
<span class="lineno"></span><span class="op" id="4244865">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4244868">func</span>&nbsp;<span class="ident" id="4244873">marshalField</span><span class="op" id="4244885">(</span><span class="ident" id="4244886">out</span>&nbsp;<span class="op" id="4244890">*</span><span class="ident" id="4244891">forkableWriter</span><span class="op" id="4244905">,</span>&nbsp;<span class="ident" id="4244907">v</span>&nbsp;<span class="ident" id="4244909">reflect</span><span class="op" id="4244916">.</span><span class="ident" id="4244917">Value</span><span class="op" id="4244922">,</span>&nbsp;<span class="ident" id="4244924">params</span>&nbsp;<span class="ident" id="4244931">fieldParameters</span><span class="op" id="4244946">)</span>&nbsp;<span class="op" id="4244948">(</span><span class="ident" id="4244949">err</span>&nbsp;<span class="builtintype" id="4244953">error</span><span class="op" id="4244958">)</span>&nbsp;<span class="op" id="4244960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4244963">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245020">if</span>&nbsp;<span class="ident" id="4245023">v</span><span class="op" id="4245024">.</span><span class="ident" id="4245025">Kind</span><span class="op" id="4245029">(</span><span class="op" id="4245030">)</span>&nbsp;<span class="op" id="4245032">==</span>&nbsp;<span class="ident" id="4245035">reflect</span><span class="op" id="4245042">.</span><span class="ident" id="4245043">Interface</span>&nbsp;<span class="op" id="4245053">&amp;&amp;</span>&nbsp;<span class="ident" id="4245056">v</span><span class="op" id="4245057">.</span><span class="ident" id="4245058">Type</span><span class="op" id="4245062">(</span><span class="op" id="4245063">)</span><span class="op" id="4245064">.</span><span class="ident" id="4245065">NumMethod</span><span class="op" id="4245074">(</span><span class="op" id="4245075">)</span>&nbsp;<span class="op" id="4245077">==</span>&nbsp;<span class="num" id="4245080">0</span>&nbsp;<span class="op" id="4245082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245086">return</span>&nbsp;<span class="ident" id="4245093">marshalField</span><span class="op" id="4245105">(</span><span class="ident" id="4245106">out</span><span class="op" id="4245109">,</span>&nbsp;<span class="ident" id="4245111">v</span><span class="op" id="4245112">.</span><span class="ident" id="4245113">Elem</span><span class="op" id="4245117">(</span><span class="op" id="4245118">)</span><span class="op" id="4245119">,</span>&nbsp;<span class="ident" id="4245121">params</span><span class="op" id="4245127">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245134">if</span>&nbsp;<span class="ident" id="4245137">v</span><span class="op" id="4245138">.</span><span class="ident" id="4245139">Kind</span><span class="op" id="4245143">(</span><span class="op" id="4245144">)</span>&nbsp;<span class="op" id="4245146">==</span>&nbsp;<span class="ident" id="4245149">reflect</span><span class="op" id="4245156">.</span><span class="ident" id="4245157">Slice</span>&nbsp;<span class="op" id="4245163">&amp;&amp;</span>&nbsp;<span class="ident" id="4245166">v</span><span class="op" id="4245167">.</span><span class="ident" id="4245168">Len</span><span class="op" id="4245171">(</span><span class="op" id="4245172">)</span>&nbsp;<span class="op" id="4245174">==</span>&nbsp;<span class="num" id="4245177">0</span>&nbsp;<span class="op" id="4245179">&amp;&amp;</span>&nbsp;<span class="ident" id="4245182">params</span><span class="op" id="4245188">.</span><span class="ident" id="4245189">omitEmpty</span>&nbsp;<span class="op" id="4245199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245203">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245211">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245215">if</span>&nbsp;<span class="ident" id="4245218">params</span><span class="op" id="4245224">.</span><span class="ident" id="4245225">optional</span>&nbsp;<span class="op" id="4245234">&amp;&amp;</span>&nbsp;<span class="ident" id="4245237">params</span><span class="op" id="4245243">.</span><span class="ident" id="4245244">defaultValue</span>&nbsp;<span class="op" id="4245257">!=</span>&nbsp;<span class="ident" id="4245260">nil</span>&nbsp;<span class="op" id="4245264">&amp;&amp;</span>&nbsp;<span class="ident" id="4245267">canHaveDefaultValue</span><span class="op" id="4245286">(</span><span class="ident" id="4245287">v</span><span class="op" id="4245288">.</span><span class="ident" id="4245289">Kind</span><span class="op" id="4245293">(</span><span class="op" id="4245294">)</span><span class="op" id="4245295">)</span>&nbsp;<span class="op" id="4245297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4245301">defaultValue</span>&nbsp;<span class="op" id="4245314">:=</span>&nbsp;<span class="ident" id="4245317">reflect</span><span class="op" id="4245324">.</span><span class="ident" id="4245325">New</span><span class="op" id="4245328">(</span><span class="ident" id="4245329">v</span><span class="op" id="4245330">.</span><span class="ident" id="4245331">Type</span><span class="op" id="4245335">(</span><span class="op" id="4245336">)</span><span class="op" id="4245337">)</span><span class="op" id="4245338">.</span><span class="ident" id="4245339">Elem</span><span class="op" id="4245343">(</span><span class="op" id="4245344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4245348">defaultValue</span><span class="op" id="4245360">.</span><span class="ident" id="4245361">SetInt</span><span class="op" id="4245367">(</span><span class="op" id="4245368">*</span><span class="ident" id="4245369">params</span><span class="op" id="4245375">.</span><span class="ident" id="4245376">defaultValue</span><span class="op" id="4245388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245393">if</span>&nbsp;<span class="ident" id="4245396">reflect</span><span class="op" id="4245403">.</span><span class="ident" id="4245404">DeepEqual</span><span class="op" id="4245413">(</span><span class="ident" id="4245414">v</span><span class="op" id="4245415">.</span><span class="ident" id="4245416">Interface</span><span class="op" id="4245425">(</span><span class="op" id="4245426">)</span><span class="op" id="4245427">,</span>&nbsp;<span class="ident" id="4245429">defaultValue</span><span class="op" id="4245441">.</span><span class="ident" id="4245442">Interface</span><span class="op" id="4245451">(</span><span class="op" id="4245452">)</span><span class="op" id="4245453">)</span>&nbsp;<span class="op" id="4245455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245460">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4245476">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4245545">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4245615">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245671">if</span>&nbsp;<span class="ident" id="4245674">params</span><span class="op" id="4245680">.</span><span class="ident" id="4245681">optional</span>&nbsp;<span class="op" id="4245690">&amp;&amp;</span>&nbsp;<span class="ident" id="4245693">params</span><span class="op" id="4245699">.</span><span class="ident" id="4245700">defaultValue</span>&nbsp;<span class="op" id="4245713">==</span>&nbsp;<span class="ident" id="4245716">nil</span>&nbsp;<span class="op" id="4245720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245724">if</span>&nbsp;<span class="ident" id="4245727">reflect</span><span class="op" id="4245734">.</span><span class="ident" id="4245735">DeepEqual</span><span class="op" id="4245744">(</span><span class="ident" id="4245745">v</span><span class="op" id="4245746">.</span><span class="ident" id="4245747">Interface</span><span class="op" id="4245756">(</span><span class="op" id="4245757">)</span><span class="op" id="4245758">,</span>&nbsp;<span class="ident" id="4245760">reflect</span><span class="op" id="4245767">.</span><span class="ident" id="4245768">Zero</span><span class="op" id="4245772">(</span><span class="ident" id="4245773">v</span><span class="op" id="4245774">.</span><span class="ident" id="4245775">Type</span><span class="op" id="4245779">(</span><span class="op" id="4245780">)</span><span class="op" id="4245781">)</span><span class="op" id="4245782">.</span><span class="ident" id="4245783">Interface</span><span class="op" id="4245792">(</span><span class="op" id="4245793">)</span><span class="op" id="4245794">)</span>&nbsp;<span class="op" id="4245796">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245801">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245817">if</span>&nbsp;<span class="ident" id="4245820">v</span><span class="op" id="4245821">.</span><span class="ident" id="4245822">Type</span><span class="op" id="4245826">(</span><span class="op" id="4245827">)</span>&nbsp;<span class="op" id="4245829">==</span>&nbsp;<span class="ident" id="4245832">rawValueType</span>&nbsp;<span class="op" id="4245845">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4245849">rv</span>&nbsp;<span class="op" id="4245852">:=</span>&nbsp;<span class="ident" id="4245855">v</span><span class="op" id="4245856">.</span><span class="ident" id="4245857">Interface</span><span class="op" id="4245866">(</span><span class="op" id="4245867">)</span><span class="op" id="4245868">.</span><span class="op" id="4245869">(</span><span class="ident" id="4245870">RawValue</span><span class="op" id="4245878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4245882">if</span>&nbsp;<span class="builtinfunc" id="4245885">len</span><span class="op" id="4245888">(</span><span class="ident" id="4245889">rv</span><span class="op" id="4245891">.</span><span class="ident" id="4245892">FullBytes</span><span class="op" id="4245901">)</span>&nbsp;<span class="op" id="4245903">!=</span>&nbsp;<span class="num" id="4245906">0</span>&nbsp;<span class="op" id="4245908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4245913">_</span><span class="op" id="4245914">,</span>&nbsp;<span class="ident" id="4245916">err</span>&nbsp;<span class="op" id="4245920">=</span>&nbsp;<span class="ident" id="4245922">out</span><span class="op" id="4245925">.</span><span class="ident" id="4245926">Write</span><span class="op" id="4245931">(</span><span class="ident" id="4245932">rv</span><span class="op" id="4245934">.</span><span class="ident" id="4245935">FullBytes</span><span class="op" id="4245944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4245948">}</span>&nbsp;<span class="keyword" id="4245950">else</span>&nbsp;<span class="op" id="4245955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4245960">err</span>&nbsp;<span class="op" id="4245964">=</span>&nbsp;<span class="ident" id="4245966">marshalTagAndLength</span><span class="op" id="4245985">(</span><span class="ident" id="4245986">out</span><span class="op" id="4245989">,</span>&nbsp;<span class="ident" id="4245991">tagAndLength</span><span class="op" id="4246003">{</span><span class="ident" id="4246004">rv</span><span class="op" id="4246006">.</span><span class="ident" id="4246007">Class</span><span class="op" id="4246012">,</span>&nbsp;<span class="ident" id="4246014">rv</span><span class="op" id="4246016">.</span><span class="ident" id="4246017">Tag</span><span class="op" id="4246020">,</span>&nbsp;<span class="builtinfunc" id="4246022">len</span><span class="op" id="4246025">(</span><span class="ident" id="4246026">rv</span><span class="op" id="4246028">.</span><span class="ident" id="4246029">Bytes</span><span class="op" id="4246034">)</span><span class="op" id="4246035">,</span>&nbsp;<span class="ident" id="4246037">rv</span><span class="op" id="4246039">.</span><span class="ident" id="4246040">IsCompound</span><span class="op" id="4246050">}</span><span class="op" id="4246051">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246056">if</span>&nbsp;<span class="ident" id="4246059">err</span>&nbsp;<span class="op" id="4246063">!=</span>&nbsp;<span class="ident" id="4246066">nil</span>&nbsp;<span class="op" id="4246070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246076">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246091">_</span><span class="op" id="4246092">,</span>&nbsp;<span class="ident" id="4246094">err</span>&nbsp;<span class="op" id="4246098">=</span>&nbsp;<span class="ident" id="4246100">out</span><span class="op" id="4246103">.</span><span class="ident" id="4246104">Write</span><span class="op" id="4246109">(</span><span class="ident" id="4246110">rv</span><span class="op" id="4246112">.</span><span class="ident" id="4246113">Bytes</span><span class="op" id="4246118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246122">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246126">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246138">tag</span><span class="op" id="4246141">,</span>&nbsp;<span class="ident" id="4246143">isCompound</span><span class="op" id="4246153">,</span>&nbsp;<span class="ident" id="4246155">ok</span>&nbsp;<span class="op" id="4246158">:=</span>&nbsp;<span class="ident" id="4246161">getUniversalType</span><span class="op" id="4246177">(</span><span class="ident" id="4246178">v</span><span class="op" id="4246179">.</span><span class="ident" id="4246180">Type</span><span class="op" id="4246184">(</span><span class="op" id="4246185">)</span><span class="op" id="4246186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246189">if</span>&nbsp;<span class="op" id="4246192">!</span><span class="ident" id="4246193">ok</span>&nbsp;<span class="op" id="4246196">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246200">err</span>&nbsp;<span class="op" id="4246204">=</span>&nbsp;<span class="ident" id="4246206">StructuralError</span><span class="op" id="4246221">{</span><span class="ident" id="4246222">fmt</span><span class="op" id="4246225">.</span><span class="ident" id="4246226">Sprintf</span><span class="op" id="4246233">(</span><span class="string" id="4246234">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4246255">,</span>&nbsp;<span class="ident" id="4246257">v</span><span class="op" id="4246258">.</span><span class="ident" id="4246259">Type</span><span class="op" id="4246263">(</span><span class="op" id="4246264">)</span><span class="op" id="4246265">)</span><span class="op" id="4246266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246270">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246281">class</span>&nbsp;<span class="op" id="4246287">:=</span>&nbsp;<span class="ident" id="4246290">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246307">if</span>&nbsp;<span class="ident" id="4246310">params</span><span class="op" id="4246316">.</span><span class="ident" id="4246317">stringType</span>&nbsp;<span class="op" id="4246328">!=</span>&nbsp;<span class="num" id="4246331">0</span>&nbsp;<span class="op" id="4246333">&amp;&amp;</span>&nbsp;<span class="ident" id="4246336">tag</span>&nbsp;<span class="op" id="4246340">!=</span>&nbsp;<span class="ident" id="4246343">tagPrintableString</span>&nbsp;<span class="op" id="4246362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246366">return</span>&nbsp;<span class="ident" id="4246373">StructuralError</span><span class="op" id="4246388">{</span><span class="string" id="4246389">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4246438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246445">switch</span>&nbsp;<span class="ident" id="4246452">tag</span>&nbsp;<span class="op" id="4246456">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246459">case</span>&nbsp;<span class="ident" id="4246464">tagPrintableString</span><span class="op" id="4246482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246486">if</span>&nbsp;<span class="ident" id="4246489">params</span><span class="op" id="4246495">.</span><span class="ident" id="4246496">stringType</span>&nbsp;<span class="op" id="4246507">==</span>&nbsp;<span class="num" id="4246510">0</span>&nbsp;<span class="op" id="4246512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4246517">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4246583">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4246645">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246707">for</span>&nbsp;<span class="ident" id="4246711">_</span><span class="op" id="4246712">,</span>&nbsp;<span class="ident" id="4246714">r</span>&nbsp;<span class="op" id="4246716">:=</span>&nbsp;<span class="keyword" id="4246719">range</span>&nbsp;<span class="ident" id="4246725">v</span><span class="op" id="4246726">.</span><span class="ident" id="4246727">String</span><span class="op" id="4246733">(</span><span class="op" id="4246734">)</span>&nbsp;<span class="op" id="4246736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246742">if</span>&nbsp;<span class="ident" id="4246745">r</span>&nbsp;<span class="op" id="4246747">&gt;=</span>&nbsp;<span class="ident" id="4246750">utf8</span><span class="op" id="4246754">.</span><span class="ident" id="4246755">RuneSelf</span>&nbsp;<span class="op" id="4246764">||</span>&nbsp;<span class="op" id="4246767">!</span><span class="ident" id="4246768">isPrintable</span><span class="op" id="4246779">(</span><span class="builtintype" id="4246780">byte</span><span class="op" id="4246784">(</span><span class="ident" id="4246785">r</span><span class="op" id="4246786">)</span><span class="op" id="4246787">)</span>&nbsp;<span class="op" id="4246789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246796">if</span>&nbsp;<span class="op" id="4246799">!</span><span class="ident" id="4246800">utf8</span><span class="op" id="4246804">.</span><span class="ident" id="4246805">ValidString</span><span class="op" id="4246816">(</span><span class="ident" id="4246817">v</span><span class="op" id="4246818">.</span><span class="ident" id="4246819">String</span><span class="op" id="4246825">(</span><span class="op" id="4246826">)</span><span class="op" id="4246827">)</span>&nbsp;<span class="op" id="4246829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246837">return</span>&nbsp;<span class="ident" id="4246844">errors</span><span class="op" id="4246850">.</span><span class="ident" id="4246851">New</span><span class="op" id="4246854">(</span><span class="string" id="4246855">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4246885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246892">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246899">tag</span>&nbsp;<span class="op" id="4246903">=</span>&nbsp;<span class="ident" id="4246905">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246924">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246943">}</span>&nbsp;<span class="keyword" id="4246945">else</span>&nbsp;<span class="op" id="4246950">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4246955">tag</span>&nbsp;<span class="op" id="4246959">=</span>&nbsp;<span class="ident" id="4246961">params</span><span class="op" id="4246967">.</span><span class="ident" id="4246968">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4246981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4246984">case</span>&nbsp;<span class="ident" id="4246989">tagUTCTime</span><span class="op" id="4246999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247003">if</span>&nbsp;<span class="ident" id="4247006">outsideUTCRange</span><span class="op" id="4247021">(</span><span class="ident" id="4247022">v</span><span class="op" id="4247023">.</span><span class="ident" id="4247024">Interface</span><span class="op" id="4247033">(</span><span class="op" id="4247034">)</span><span class="op" id="4247035">.</span><span class="op" id="4247036">(</span><span class="ident" id="4247037">time</span><span class="op" id="4247041">.</span><span class="ident" id="4247042">Time</span><span class="op" id="4247046">)</span><span class="op" id="4247047">)</span>&nbsp;<span class="op" id="4247049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247054">tag</span>&nbsp;<span class="op" id="4247058">=</span>&nbsp;<span class="ident" id="4247060">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247088">if</span>&nbsp;<span class="ident" id="4247091">params</span><span class="op" id="4247097">.</span><span class="ident" id="4247098">set</span>&nbsp;<span class="op" id="4247102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247106">if</span>&nbsp;<span class="ident" id="4247109">tag</span>&nbsp;<span class="op" id="4247113">!=</span>&nbsp;<span class="ident" id="4247116">tagSequence</span>&nbsp;<span class="op" id="4247128">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247133">return</span>&nbsp;<span class="ident" id="4247140">StructuralError</span><span class="op" id="4247155">{</span><span class="string" id="4247156">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4247184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247192">tag</span>&nbsp;<span class="op" id="4247196">=</span>&nbsp;<span class="ident" id="4247198">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247210">tags</span><span class="op" id="4247214">,</span>&nbsp;<span class="ident" id="4247216">body</span>&nbsp;<span class="op" id="4247221">:=</span>&nbsp;<span class="ident" id="4247224">out</span><span class="op" id="4247227">.</span><span class="ident" id="4247228">fork</span><span class="op" id="4247232">(</span><span class="op" id="4247233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247237">err</span>&nbsp;<span class="op" id="4247241">=</span>&nbsp;<span class="ident" id="4247243">marshalBody</span><span class="op" id="4247254">(</span><span class="ident" id="4247255">body</span><span class="op" id="4247259">,</span>&nbsp;<span class="ident" id="4247261">v</span><span class="op" id="4247262">,</span>&nbsp;<span class="ident" id="4247264">params</span><span class="op" id="4247270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247273">if</span>&nbsp;<span class="ident" id="4247276">err</span>&nbsp;<span class="op" id="4247280">!=</span>&nbsp;<span class="ident" id="4247283">nil</span>&nbsp;<span class="op" id="4247287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247291">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247303">bodyLen</span>&nbsp;<span class="op" id="4247311">:=</span>&nbsp;<span class="ident" id="4247314">body</span><span class="op" id="4247318">.</span><span class="ident" id="4247319">Len</span><span class="op" id="4247322">(</span><span class="op" id="4247323">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247327">var</span>&nbsp;<span class="ident" id="4247331">explicitTag</span>&nbsp;<span class="op" id="4247343">*</span><span class="ident" id="4247344">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247360">if</span>&nbsp;<span class="ident" id="4247363">params</span><span class="op" id="4247369">.</span><span class="ident" id="4247370">explicit</span>&nbsp;<span class="op" id="4247379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247383">explicitTag</span><span class="op" id="4247394">,</span>&nbsp;<span class="ident" id="4247396">tags</span>&nbsp;<span class="op" id="4247401">=</span>&nbsp;<span class="ident" id="4247403">tags</span><span class="op" id="4247407">.</span><span class="ident" id="4247408">fork</span><span class="op" id="4247412">(</span><span class="op" id="4247413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247420">if</span>&nbsp;<span class="op" id="4247423">!</span><span class="ident" id="4247424">params</span><span class="op" id="4247430">.</span><span class="ident" id="4247431">explicit</span>&nbsp;<span class="op" id="4247440">&amp;&amp;</span>&nbsp;<span class="ident" id="4247443">params</span><span class="op" id="4247449">.</span><span class="ident" id="4247450">tag</span>&nbsp;<span class="op" id="4247454">!=</span>&nbsp;<span class="ident" id="4247457">nil</span>&nbsp;<span class="op" id="4247461">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4247465">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247484">tag</span>&nbsp;<span class="op" id="4247488">=</span>&nbsp;<span class="op" id="4247490">*</span><span class="ident" id="4247491">params</span><span class="op" id="4247497">.</span><span class="ident" id="4247498">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247504">class</span>&nbsp;<span class="op" id="4247510">=</span>&nbsp;<span class="ident" id="4247512">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247538">err</span>&nbsp;<span class="op" id="4247542">=</span>&nbsp;<span class="ident" id="4247544">marshalTagAndLength</span><span class="op" id="4247563">(</span><span class="ident" id="4247564">tags</span><span class="op" id="4247568">,</span>&nbsp;<span class="ident" id="4247570">tagAndLength</span><span class="op" id="4247582">{</span><span class="ident" id="4247583">class</span><span class="op" id="4247588">,</span>&nbsp;<span class="ident" id="4247590">tag</span><span class="op" id="4247593">,</span>&nbsp;<span class="ident" id="4247595">bodyLen</span><span class="op" id="4247602">,</span>&nbsp;<span class="ident" id="4247604">isCompound</span><span class="op" id="4247614">}</span><span class="op" id="4247615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247618">if</span>&nbsp;<span class="ident" id="4247621">err</span>&nbsp;<span class="op" id="4247625">!=</span>&nbsp;<span class="ident" id="4247628">nil</span>&nbsp;<span class="op" id="4247632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247636">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247648">if</span>&nbsp;<span class="ident" id="4247651">params</span><span class="op" id="4247657">.</span><span class="ident" id="4247658">explicit</span>&nbsp;<span class="op" id="4247667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247671">err</span>&nbsp;<span class="op" id="4247675">=</span>&nbsp;<span class="ident" id="4247677">marshalTagAndLength</span><span class="op" id="4247696">(</span><span class="ident" id="4247697">explicitTag</span><span class="op" id="4247708">,</span>&nbsp;<span class="ident" id="4247710">tagAndLength</span><span class="op" id="4247722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247727">class</span><span class="op" id="4247732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4247739">classContextSpecific</span><span class="op" id="4247759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247764">tag</span><span class="op" id="4247767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4247776">*</span><span class="ident" id="4247777">params</span><span class="op" id="4247783">.</span><span class="ident" id="4247784">tag</span><span class="op" id="4247787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247792">length</span><span class="op" id="4247798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4247804">bodyLen</span>&nbsp;<span class="op" id="4247812">+</span>&nbsp;<span class="ident" id="4247814">tags</span><span class="op" id="4247818">.</span><span class="ident" id="4247819">Len</span><span class="op" id="4247822">(</span><span class="op" id="4247823">)</span><span class="op" id="4247824">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4247829">isCompound</span><span class="op" id="4247839">:</span>&nbsp;<span class="ident" id="4247841">true</span><span class="op" id="4247845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247849">}</span><span class="op" id="4247850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4247853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4247857">return</span>&nbsp;<span class="ident" id="4247864">nil</span><br>
<span class="lineno">625</span><span class="op" id="4247868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4247871">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4247917">//</span><br>
<span class="lineno"></span><span class="comment" id="4247920">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4248000">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4248009">//</span><br>
<span class="lineno"></span><span class="comment" id="4248012">//&nbsp;&nbsp;&nbsp;&nbspia5:&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4248074">//&nbsp;&nbsp;&nbsp;&nbspomitempty:&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4248122">//&nbsp;&nbsp;&nbsp;&nbspprintable:&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4248202">//&nbsp;&nbsp;&nbsp;&nbsputf8:&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspcauses&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4248266">func</span>&nbsp;<span class="ident" id="4248271">Marshal</span><span class="op" id="4248278">(</span><span class="ident" id="4248279">val</span>&nbsp;<span class="keyword" id="4248283">interface</span><span class="op" id="4248292">{</span><span class="op" id="4248293">}</span><span class="op" id="4248294">)</span>&nbsp;<span class="op" id="4248296">(</span><span class="op" id="4248297">[</span><span class="op" id="4248298">]</span><span class="builtintype" id="4248299">byte</span><span class="op" id="4248303">,</span>&nbsp;<span class="builtintype" id="4248305">error</span><span class="op" id="4248310">)</span>&nbsp;<span class="op" id="4248312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4248315">var</span>&nbsp;<span class="ident" id="4248319">out</span>&nbsp;<span class="ident" id="4248323">bytes</span><span class="op" id="4248328">.</span><span class="ident" id="4248329">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4248337">v</span>&nbsp;<span class="op" id="4248339">:=</span>&nbsp;<span class="ident" id="4248342">reflect</span><span class="op" id="4248349">.</span><span class="ident" id="4248350">ValueOf</span><span class="op" id="4248357">(</span><span class="ident" id="4248358">val</span><span class="op" id="4248361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4248364">f</span>&nbsp;<span class="op" id="4248366">:=</span>&nbsp;<span class="ident" id="4248369">newForkableWriter</span><span class="op" id="4248386">(</span><span class="op" id="4248387">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4248390">err</span>&nbsp;<span class="op" id="4248394">:=</span>&nbsp;<span class="ident" id="4248397">marshalField</span><span class="op" id="4248409">(</span><span class="ident" id="4248410">f</span><span class="op" id="4248411">,</span>&nbsp;<span class="ident" id="4248413">v</span><span class="op" id="4248414">,</span>&nbsp;<span class="ident" id="4248416">fieldParameters</span><span class="op" id="4248431">{</span><span class="op" id="4248432">}</span><span class="op" id="4248433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4248436">if</span>&nbsp;<span class="ident" id="4248439">err</span>&nbsp;<span class="op" id="4248443">!=</span>&nbsp;<span class="ident" id="4248446">nil</span>&nbsp;<span class="op" id="4248450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4248454">return</span>&nbsp;<span class="ident" id="4248461">nil</span><span class="op" id="4248464">,</span>&nbsp;<span class="ident" id="4248466">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4248471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4248474">_</span><span class="op" id="4248475">,</span>&nbsp;<span class="ident" id="4248477">err</span>&nbsp;<span class="op" id="4248481">=</span>&nbsp;<span class="ident" id="4248483">f</span><span class="op" id="4248484">.</span><span class="ident" id="4248485">writeTo</span><span class="op" id="4248492">(</span><span class="op" id="4248493">&amp;</span><span class="ident" id="4248494">out</span><span class="op" id="4248497">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4248500">return</span>&nbsp;<span class="ident" id="4248507">out</span><span class="op" id="4248510">.</span><span class="ident" id="4248511">Bytes</span><span class="op" id="4248516">(</span><span class="op" id="4248517">)</span><span class="op" id="4248518">,</span>&nbsp;<span class="ident" id="4248520">nil</span><br>
<span class="lineno"></span><span class="op" id="4248524">}</span>
</div>
</body>
</html>
