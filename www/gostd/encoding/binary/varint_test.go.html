<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html" class="current">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7990445">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7990500">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7990554">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7990605">package</span>&nbsp;<span class="ident" id="7990613">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7990621">import</span>&nbsp;<span class="op" id="7990628">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990631">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990640">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990646">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7990656">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7990659">func</span>&nbsp;<span class="ident" id="7990664">testConstant</span><span class="op" id="7990676">(</span><span class="ident" id="7990677">t</span>&nbsp;<span class="op" id="7990679">*</span><span class="ident" id="7990680">testing</span><span class="op" id="7990687">.</span><span class="ident" id="7990688">T</span><span class="op" id="7990689">,</span>&nbsp;<span class="ident" id="7990691">w</span>&nbsp;<span class="builtintype" id="7990693">uint</span><span class="op" id="7990697">,</span>&nbsp;<span class="ident" id="7990699">max</span>&nbsp;<span class="builtintype" id="7990703">int</span><span class="op" id="7990706">)</span>&nbsp;<span class="op" id="7990708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990711">buf</span>&nbsp;<span class="op" id="7990715">:=</span>&nbsp;<span class="builtinfunc" id="7990718">make</span><span class="op" id="7990722">(</span><span class="op" id="7990723">[</span><span class="op" id="7990724">]</span><span class="builtintype" id="7990725">byte</span><span class="op" id="7990729">,</span>&nbsp;<span class="ident" id="7990731">MaxVarintLen64</span><span class="op" id="7990745">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990748">n</span>&nbsp;<span class="op" id="7990750">:=</span>&nbsp;<span class="ident" id="7990753">PutUvarint</span><span class="op" id="7990763">(</span><span class="ident" id="7990764">buf</span><span class="op" id="7990767">,</span>&nbsp;<span class="num" id="7990769">1</span><span class="op" id="7990770">&lt;&lt;</span><span class="ident" id="7990772">w</span><span class="op" id="7990773">-</span><span class="num" id="7990774">1</span><span class="op" id="7990775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7990778">if</span>&nbsp;<span class="ident" id="7990781">n</span>&nbsp;<span class="op" id="7990783">!=</span>&nbsp;<span class="ident" id="7990786">max</span>&nbsp;<span class="op" id="7990790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990794">t</span><span class="op" id="7990795">.</span><span class="ident" id="7990796">Errorf</span><span class="op" id="7990802">(</span><span class="string" id="7990803">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7990833">,</span>&nbsp;<span class="ident" id="7990835">w</span><span class="op" id="7990836">,</span>&nbsp;<span class="ident" id="7990838">max</span><span class="op" id="7990841">,</span>&nbsp;<span class="ident" id="7990843">n</span><span class="op" id="7990844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990847">}</span><br>
<span class="lineno"></span><span class="op" id="7990849">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7990852">func</span>&nbsp;<span class="ident" id="7990857">TestConstants</span><span class="op" id="7990870">(</span><span class="ident" id="7990871">t</span>&nbsp;<span class="op" id="7990873">*</span><span class="ident" id="7990874">testing</span><span class="op" id="7990881">.</span><span class="ident" id="7990882">T</span><span class="op" id="7990883">)</span>&nbsp;<span class="op" id="7990885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990888">testConstant</span><span class="op" id="7990900">(</span><span class="ident" id="7990901">t</span><span class="op" id="7990902">,</span>&nbsp;<span class="num" id="7990904">16</span><span class="op" id="7990906">,</span>&nbsp;<span class="ident" id="7990908">MaxVarintLen16</span><span class="op" id="7990922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990925">testConstant</span><span class="op" id="7990937">(</span><span class="ident" id="7990938">t</span><span class="op" id="7990939">,</span>&nbsp;<span class="num" id="7990941">32</span><span class="op" id="7990943">,</span>&nbsp;<span class="ident" id="7990945">MaxVarintLen32</span><span class="op" id="7990959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990962">testConstant</span><span class="op" id="7990974">(</span><span class="ident" id="7990975">t</span><span class="op" id="7990976">,</span>&nbsp;<span class="num" id="7990978">64</span><span class="op" id="7990980">,</span>&nbsp;<span class="ident" id="7990982">MaxVarintLen64</span><span class="op" id="7990996">)</span><br>
<span class="lineno">25</span><span class="op" id="7990998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991001">func</span>&nbsp;<span class="ident" id="7991006">testVarint</span><span class="op" id="7991016">(</span><span class="ident" id="7991017">t</span>&nbsp;<span class="op" id="7991019">*</span><span class="ident" id="7991020">testing</span><span class="op" id="7991027">.</span><span class="ident" id="7991028">T</span><span class="op" id="7991029">,</span>&nbsp;<span class="ident" id="7991031">x</span>&nbsp;<span class="ident" id="7991033">int64</span><span class="op" id="7991038">)</span>&nbsp;<span class="op" id="7991040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991043">buf</span>&nbsp;<span class="op" id="7991047">:=</span>&nbsp;<span class="builtinfunc" id="7991050">make</span><span class="op" id="7991054">(</span><span class="op" id="7991055">[</span><span class="op" id="7991056">]</span><span class="builtintype" id="7991057">byte</span><span class="op" id="7991061">,</span>&nbsp;<span class="ident" id="7991063">MaxVarintLen64</span><span class="op" id="7991077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991080">n</span>&nbsp;<span class="op" id="7991082">:=</span>&nbsp;<span class="ident" id="7991085">PutVarint</span><span class="op" id="7991094">(</span><span class="ident" id="7991095">buf</span><span class="op" id="7991098">,</span>&nbsp;<span class="ident" id="7991100">x</span><span class="op" id="7991101">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991104">y</span><span class="op" id="7991105">,</span>&nbsp;<span class="ident" id="7991107">m</span>&nbsp;<span class="op" id="7991109">:=</span>&nbsp;<span class="ident" id="7991112">Varint</span><span class="op" id="7991118">(</span><span class="ident" id="7991119">buf</span><span class="op" id="7991122">[</span><span class="num" id="7991123">0</span><span class="op" id="7991124">:</span><span class="ident" id="7991125">n</span><span class="op" id="7991126">]</span><span class="op" id="7991127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991130">if</span>&nbsp;<span class="ident" id="7991133">x</span>&nbsp;<span class="op" id="7991135">!=</span>&nbsp;<span class="ident" id="7991138">y</span>&nbsp;<span class="op" id="7991140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991144">t</span><span class="op" id="7991145">.</span><span class="ident" id="7991146">Errorf</span><span class="op" id="7991152">(</span><span class="string" id="7991153">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7991173">,</span>&nbsp;<span class="ident" id="7991175">x</span><span class="op" id="7991176">,</span>&nbsp;<span class="ident" id="7991178">y</span><span class="op" id="7991179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991185">if</span>&nbsp;<span class="ident" id="7991188">n</span>&nbsp;<span class="op" id="7991190">!=</span>&nbsp;<span class="ident" id="7991193">m</span>&nbsp;<span class="op" id="7991195">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991199">t</span><span class="op" id="7991200">.</span><span class="ident" id="7991201">Errorf</span><span class="op" id="7991207">(</span><span class="string" id="7991208">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7991241">,</span>&nbsp;<span class="ident" id="7991243">x</span><span class="op" id="7991244">,</span>&nbsp;<span class="ident" id="7991246">m</span><span class="op" id="7991247">,</span>&nbsp;<span class="ident" id="7991249">n</span><span class="op" id="7991250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991257">y</span><span class="op" id="7991258">,</span>&nbsp;<span class="ident" id="7991260">err</span>&nbsp;<span class="op" id="7991264">:=</span>&nbsp;<span class="ident" id="7991267">ReadVarint</span><span class="op" id="7991277">(</span><span class="ident" id="7991278">bytes</span><span class="op" id="7991283">.</span><span class="ident" id="7991284">NewReader</span><span class="op" id="7991293">(</span><span class="ident" id="7991294">buf</span><span class="op" id="7991297">)</span><span class="op" id="7991298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991301">if</span>&nbsp;<span class="ident" id="7991304">err</span>&nbsp;<span class="op" id="7991308">!=</span>&nbsp;<span class="ident" id="7991311">nil</span>&nbsp;<span class="op" id="7991315">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991319">t</span><span class="op" id="7991320">.</span><span class="ident" id="7991321">Errorf</span><span class="op" id="7991327">(</span><span class="string" id="7991328">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7991348">,</span>&nbsp;<span class="ident" id="7991350">x</span><span class="op" id="7991351">,</span>&nbsp;<span class="ident" id="7991353">err</span><span class="op" id="7991356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991362">if</span>&nbsp;<span class="ident" id="7991365">x</span>&nbsp;<span class="op" id="7991367">!=</span>&nbsp;<span class="ident" id="7991370">y</span>&nbsp;<span class="op" id="7991372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991376">t</span><span class="op" id="7991377">.</span><span class="ident" id="7991378">Errorf</span><span class="op" id="7991384">(</span><span class="string" id="7991385">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7991409">,</span>&nbsp;<span class="ident" id="7991411">x</span><span class="op" id="7991412">,</span>&nbsp;<span class="ident" id="7991414">y</span><span class="op" id="7991415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991418">}</span><br>
<span class="lineno">45</span><span class="op" id="7991420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991423">func</span>&nbsp;<span class="ident" id="7991428">testUvarint</span><span class="op" id="7991439">(</span><span class="ident" id="7991440">t</span>&nbsp;<span class="op" id="7991442">*</span><span class="ident" id="7991443">testing</span><span class="op" id="7991450">.</span><span class="ident" id="7991451">T</span><span class="op" id="7991452">,</span>&nbsp;<span class="ident" id="7991454">x</span>&nbsp;<span class="ident" id="7991456">uint64</span><span class="op" id="7991462">)</span>&nbsp;<span class="op" id="7991464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991467">buf</span>&nbsp;<span class="op" id="7991471">:=</span>&nbsp;<span class="builtinfunc" id="7991474">make</span><span class="op" id="7991478">(</span><span class="op" id="7991479">[</span><span class="op" id="7991480">]</span><span class="builtintype" id="7991481">byte</span><span class="op" id="7991485">,</span>&nbsp;<span class="ident" id="7991487">MaxVarintLen64</span><span class="op" id="7991501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991504">n</span>&nbsp;<span class="op" id="7991506">:=</span>&nbsp;<span class="ident" id="7991509">PutUvarint</span><span class="op" id="7991519">(</span><span class="ident" id="7991520">buf</span><span class="op" id="7991523">,</span>&nbsp;<span class="ident" id="7991525">x</span><span class="op" id="7991526">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991529">y</span><span class="op" id="7991530">,</span>&nbsp;<span class="ident" id="7991532">m</span>&nbsp;<span class="op" id="7991534">:=</span>&nbsp;<span class="ident" id="7991537">Uvarint</span><span class="op" id="7991544">(</span><span class="ident" id="7991545">buf</span><span class="op" id="7991548">[</span><span class="num" id="7991549">0</span><span class="op" id="7991550">:</span><span class="ident" id="7991551">n</span><span class="op" id="7991552">]</span><span class="op" id="7991553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991556">if</span>&nbsp;<span class="ident" id="7991559">x</span>&nbsp;<span class="op" id="7991561">!=</span>&nbsp;<span class="ident" id="7991564">y</span>&nbsp;<span class="op" id="7991566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991570">t</span><span class="op" id="7991571">.</span><span class="ident" id="7991572">Errorf</span><span class="op" id="7991578">(</span><span class="string" id="7991579">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7991600">,</span>&nbsp;<span class="ident" id="7991602">x</span><span class="op" id="7991603">,</span>&nbsp;<span class="ident" id="7991605">y</span><span class="op" id="7991606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991612">if</span>&nbsp;<span class="ident" id="7991615">n</span>&nbsp;<span class="op" id="7991617">!=</span>&nbsp;<span class="ident" id="7991620">m</span>&nbsp;<span class="op" id="7991622">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991626">t</span><span class="op" id="7991627">.</span><span class="ident" id="7991628">Errorf</span><span class="op" id="7991634">(</span><span class="string" id="7991635">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7991669">,</span>&nbsp;<span class="ident" id="7991671">x</span><span class="op" id="7991672">,</span>&nbsp;<span class="ident" id="7991674">m</span><span class="op" id="7991675">,</span>&nbsp;<span class="ident" id="7991677">n</span><span class="op" id="7991678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991685">y</span><span class="op" id="7991686">,</span>&nbsp;<span class="ident" id="7991688">err</span>&nbsp;<span class="op" id="7991692">:=</span>&nbsp;<span class="ident" id="7991695">ReadUvarint</span><span class="op" id="7991706">(</span><span class="ident" id="7991707">bytes</span><span class="op" id="7991712">.</span><span class="ident" id="7991713">NewReader</span><span class="op" id="7991722">(</span><span class="ident" id="7991723">buf</span><span class="op" id="7991726">)</span><span class="op" id="7991727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991730">if</span>&nbsp;<span class="ident" id="7991733">err</span>&nbsp;<span class="op" id="7991737">!=</span>&nbsp;<span class="ident" id="7991740">nil</span>&nbsp;<span class="op" id="7991744">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991748">t</span><span class="op" id="7991749">.</span><span class="ident" id="7991750">Errorf</span><span class="op" id="7991756">(</span><span class="string" id="7991757">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7991778">,</span>&nbsp;<span class="ident" id="7991780">x</span><span class="op" id="7991781">,</span>&nbsp;<span class="ident" id="7991783">err</span><span class="op" id="7991786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991792">if</span>&nbsp;<span class="ident" id="7991795">x</span>&nbsp;<span class="op" id="7991797">!=</span>&nbsp;<span class="ident" id="7991800">y</span>&nbsp;<span class="op" id="7991802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991806">t</span><span class="op" id="7991807">.</span><span class="ident" id="7991808">Errorf</span><span class="op" id="7991814">(</span><span class="string" id="7991815">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7991840">,</span>&nbsp;<span class="ident" id="7991842">x</span><span class="op" id="7991843">,</span>&nbsp;<span class="ident" id="7991845">y</span><span class="op" id="7991846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991849">}</span><br>
<span class="lineno">65</span><span class="op" id="7991851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991854">var</span>&nbsp;<span class="ident" id="7991858">tests</span>&nbsp;<span class="op" id="7991864">=</span>&nbsp;<span class="op" id="7991866">[</span><span class="op" id="7991867">]</span><span class="ident" id="7991868">int64</span><span class="op" id="7991873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991876">-</span><span class="num" id="7991877">1</span>&nbsp;<span class="op" id="7991879">&lt;&lt;</span>&nbsp;<span class="num" id="7991882">63</span><span class="op" id="7991884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991887">-</span><span class="num" id="7991888">1</span><span class="op" id="7991889">&lt;&lt;</span><span class="num" id="7991891">63</span>&nbsp;<span class="op" id="7991894">+</span>&nbsp;<span class="num" id="7991896">1</span><span class="op" id="7991897">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991900">-</span><span class="num" id="7991901">1</span><span class="op" id="7991902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991905">0</span><span class="op" id="7991906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991909">1</span><span class="op" id="7991910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991913">2</span><span class="op" id="7991914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991917">10</span><span class="op" id="7991919">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991922">20</span><span class="op" id="7991924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991927">63</span><span class="op" id="7991929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991932">64</span><span class="op" id="7991934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991937">65</span><span class="op" id="7991939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991942">127</span><span class="op" id="7991945">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991948">128</span><span class="op" id="7991951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991954">129</span><span class="op" id="7991957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991960">255</span><span class="op" id="7991963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991966">256</span><span class="op" id="7991969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991972">257</span><span class="op" id="7991975">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7991978">1</span><span class="op" id="7991979">&lt;&lt;</span><span class="num" id="7991981">63</span>&nbsp;<span class="op" id="7991984">-</span>&nbsp;<span class="num" id="7991986">1</span><span class="op" id="7991987">,</span><br>
<span class="lineno"></span><span class="op" id="7991989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991992">func</span>&nbsp;<span class="ident" id="7991997">TestVarint</span><span class="op" id="7992007">(</span><span class="ident" id="7992008">t</span>&nbsp;<span class="op" id="7992010">*</span><span class="ident" id="7992011">testing</span><span class="op" id="7992018">.</span><span class="ident" id="7992019">T</span><span class="op" id="7992020">)</span>&nbsp;<span class="op" id="7992022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992025">for</span>&nbsp;<span class="ident" id="7992029">_</span><span class="op" id="7992030">,</span>&nbsp;<span class="ident" id="7992032">x</span>&nbsp;<span class="op" id="7992034">:=</span>&nbsp;<span class="keyword" id="7992037">range</span>&nbsp;<span class="ident" id="7992043">tests</span>&nbsp;<span class="op" id="7992049">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992053">testVarint</span><span class="op" id="7992063">(</span><span class="ident" id="7992064">t</span><span class="op" id="7992065">,</span>&nbsp;<span class="ident" id="7992067">x</span><span class="op" id="7992068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992072">testVarint</span><span class="op" id="7992082">(</span><span class="ident" id="7992083">t</span><span class="op" id="7992084">,</span>&nbsp;<span class="op" id="7992086">-</span><span class="ident" id="7992087">x</span><span class="op" id="7992088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992094">for</span>&nbsp;<span class="ident" id="7992098">x</span>&nbsp;<span class="op" id="7992100">:=</span>&nbsp;<span class="ident" id="7992103">int64</span><span class="op" id="7992108">(</span><span class="num" id="7992109">0x7</span><span class="op" id="7992112">)</span><span class="op" id="7992113">;</span>&nbsp;<span class="ident" id="7992115">x</span>&nbsp;<span class="op" id="7992117">!=</span>&nbsp;<span class="num" id="7992120">0</span><span class="op" id="7992121">;</span>&nbsp;<span class="ident" id="7992123">x</span>&nbsp;<span class="op" id="7992125">&lt;&lt;=</span>&nbsp;<span class="num" id="7992129">1</span>&nbsp;<span class="op" id="7992131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992135">testVarint</span><span class="op" id="7992145">(</span><span class="ident" id="7992146">t</span><span class="op" id="7992147">,</span>&nbsp;<span class="ident" id="7992149">x</span><span class="op" id="7992150">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992154">testVarint</span><span class="op" id="7992164">(</span><span class="ident" id="7992165">t</span><span class="op" id="7992166">,</span>&nbsp;<span class="op" id="7992168">-</span><span class="ident" id="7992169">x</span><span class="op" id="7992170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992173">}</span><br>
<span class="lineno"></span><span class="op" id="7992175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992178">func</span>&nbsp;<span class="ident" id="7992183">TestUvarint</span><span class="op" id="7992194">(</span><span class="ident" id="7992195">t</span>&nbsp;<span class="op" id="7992197">*</span><span class="ident" id="7992198">testing</span><span class="op" id="7992205">.</span><span class="ident" id="7992206">T</span><span class="op" id="7992207">)</span>&nbsp;<span class="op" id="7992209">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992212">for</span>&nbsp;<span class="ident" id="7992216">_</span><span class="op" id="7992217">,</span>&nbsp;<span class="ident" id="7992219">x</span>&nbsp;<span class="op" id="7992221">:=</span>&nbsp;<span class="keyword" id="7992224">range</span>&nbsp;<span class="ident" id="7992230">tests</span>&nbsp;<span class="op" id="7992236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992240">testUvarint</span><span class="op" id="7992251">(</span><span class="ident" id="7992252">t</span><span class="op" id="7992253">,</span>&nbsp;<span class="ident" id="7992255">uint64</span><span class="op" id="7992261">(</span><span class="ident" id="7992262">x</span><span class="op" id="7992263">)</span><span class="op" id="7992264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992270">for</span>&nbsp;<span class="ident" id="7992274">x</span>&nbsp;<span class="op" id="7992276">:=</span>&nbsp;<span class="ident" id="7992279">uint64</span><span class="op" id="7992285">(</span><span class="num" id="7992286">0x7</span><span class="op" id="7992289">)</span><span class="op" id="7992290">;</span>&nbsp;<span class="ident" id="7992292">x</span>&nbsp;<span class="op" id="7992294">!=</span>&nbsp;<span class="num" id="7992297">0</span><span class="op" id="7992298">;</span>&nbsp;<span class="ident" id="7992300">x</span>&nbsp;<span class="op" id="7992302">&lt;&lt;=</span>&nbsp;<span class="num" id="7992306">1</span>&nbsp;<span class="op" id="7992308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992312">testUvarint</span><span class="op" id="7992323">(</span><span class="ident" id="7992324">t</span><span class="op" id="7992325">,</span>&nbsp;<span class="ident" id="7992327">x</span><span class="op" id="7992328">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992331">}</span><br>
<span class="lineno"></span><span class="op" id="7992333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992336">func</span>&nbsp;<span class="ident" id="7992341">TestBufferTooSmall</span><span class="op" id="7992359">(</span><span class="ident" id="7992360">t</span>&nbsp;<span class="op" id="7992362">*</span><span class="ident" id="7992363">testing</span><span class="op" id="7992370">.</span><span class="ident" id="7992371">T</span><span class="op" id="7992372">)</span>&nbsp;<span class="op" id="7992374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992377">buf</span>&nbsp;<span class="op" id="7992381">:=</span>&nbsp;<span class="op" id="7992384">[</span><span class="op" id="7992385">]</span><span class="builtintype" id="7992386">byte</span><span class="op" id="7992390">{</span><span class="num" id="7992391">0x80</span><span class="op" id="7992395">,</span>&nbsp;<span class="num" id="7992397">0x80</span><span class="op" id="7992401">,</span>&nbsp;<span class="num" id="7992403">0x80</span><span class="op" id="7992407">,</span>&nbsp;<span class="num" id="7992409">0x80</span><span class="op" id="7992413">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992416">for</span>&nbsp;<span class="ident" id="7992420">i</span>&nbsp;<span class="op" id="7992422">:=</span>&nbsp;<span class="num" id="7992425">0</span><span class="op" id="7992426">;</span>&nbsp;<span class="ident" id="7992428">i</span>&nbsp;<span class="op" id="7992430">&lt;=</span>&nbsp;<span class="builtinfunc" id="7992433">len</span><span class="op" id="7992436">(</span><span class="ident" id="7992437">buf</span><span class="op" id="7992440">)</span><span class="op" id="7992441">;</span>&nbsp;<span class="ident" id="7992443">i</span><span class="op" id="7992444">++</span>&nbsp;<span class="op" id="7992447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992451">buf</span>&nbsp;<span class="op" id="7992455">:=</span>&nbsp;<span class="ident" id="7992458">buf</span><span class="op" id="7992461">[</span><span class="num" id="7992462">0</span><span class="op" id="7992463">:</span><span class="ident" id="7992464">i</span><span class="op" id="7992465">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992469">x</span><span class="op" id="7992470">,</span>&nbsp;<span class="ident" id="7992472">n</span>&nbsp;<span class="op" id="7992474">:=</span>&nbsp;<span class="ident" id="7992477">Uvarint</span><span class="op" id="7992484">(</span><span class="ident" id="7992485">buf</span><span class="op" id="7992488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992492">if</span>&nbsp;<span class="ident" id="7992495">x</span>&nbsp;<span class="op" id="7992497">!=</span>&nbsp;<span class="num" id="7992500">0</span>&nbsp;<span class="op" id="7992502">||</span>&nbsp;<span class="ident" id="7992505">n</span>&nbsp;<span class="op" id="7992507">!=</span>&nbsp;<span class="num" id="7992510">0</span>&nbsp;<span class="op" id="7992512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992517">t</span><span class="op" id="7992518">.</span><span class="ident" id="7992519">Errorf</span><span class="op" id="7992525">(</span><span class="string" id="7992526">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7992559">,</span>&nbsp;<span class="ident" id="7992561">buf</span><span class="op" id="7992564">,</span>&nbsp;<span class="ident" id="7992566">x</span><span class="op" id="7992567">,</span>&nbsp;<span class="ident" id="7992569">n</span><span class="op" id="7992570">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992579">x</span><span class="op" id="7992580">,</span>&nbsp;<span class="ident" id="7992582">err</span>&nbsp;<span class="op" id="7992586">:=</span>&nbsp;<span class="ident" id="7992589">ReadUvarint</span><span class="op" id="7992600">(</span><span class="ident" id="7992601">bytes</span><span class="op" id="7992606">.</span><span class="ident" id="7992607">NewReader</span><span class="op" id="7992616">(</span><span class="ident" id="7992617">buf</span><span class="op" id="7992620">)</span><span class="op" id="7992621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992625">if</span>&nbsp;<span class="ident" id="7992628">x</span>&nbsp;<span class="op" id="7992630">!=</span>&nbsp;<span class="num" id="7992633">0</span>&nbsp;<span class="op" id="7992635">||</span>&nbsp;<span class="ident" id="7992638">err</span>&nbsp;<span class="op" id="7992642">!=</span>&nbsp;<span class="ident" id="7992645">io</span><span class="op" id="7992647">.</span><span class="ident" id="7992648">EOF</span>&nbsp;<span class="op" id="7992652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992657">t</span><span class="op" id="7992658">.</span><span class="ident" id="7992659">Errorf</span><span class="op" id="7992665">(</span><span class="string" id="7992666">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7992705">,</span>&nbsp;<span class="ident" id="7992707">buf</span><span class="op" id="7992710">,</span>&nbsp;<span class="ident" id="7992712">x</span><span class="op" id="7992713">,</span>&nbsp;<span class="ident" id="7992715">err</span><span class="op" id="7992718">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992725">}</span><br>
<span class="lineno"></span><span class="op" id="7992727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992730">func</span>&nbsp;<span class="ident" id="7992735">testOverflow</span><span class="op" id="7992747">(</span><span class="ident" id="7992748">t</span>&nbsp;<span class="op" id="7992750">*</span><span class="ident" id="7992751">testing</span><span class="op" id="7992758">.</span><span class="ident" id="7992759">T</span><span class="op" id="7992760">,</span>&nbsp;<span class="ident" id="7992762">buf</span>&nbsp;<span class="op" id="7992766">[</span><span class="op" id="7992767">]</span><span class="builtintype" id="7992768">byte</span><span class="op" id="7992772">,</span>&nbsp;<span class="ident" id="7992774">n0</span>&nbsp;<span class="builtintype" id="7992777">int</span><span class="op" id="7992780">,</span>&nbsp;<span class="ident" id="7992782">err0</span>&nbsp;<span class="builtintype" id="7992787">error</span><span class="op" id="7992792">)</span>&nbsp;<span class="op" id="7992794">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992797">x</span><span class="op" id="7992798">,</span>&nbsp;<span class="ident" id="7992800">n</span>&nbsp;<span class="op" id="7992802">:=</span>&nbsp;<span class="ident" id="7992805">Uvarint</span><span class="op" id="7992812">(</span><span class="ident" id="7992813">buf</span><span class="op" id="7992816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992819">if</span>&nbsp;<span class="ident" id="7992822">x</span>&nbsp;<span class="op" id="7992824">!=</span>&nbsp;<span class="num" id="7992827">0</span>&nbsp;<span class="op" id="7992829">||</span>&nbsp;<span class="ident" id="7992832">n</span>&nbsp;<span class="op" id="7992834">!=</span>&nbsp;<span class="ident" id="7992837">n0</span>&nbsp;<span class="op" id="7992840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992844">t</span><span class="op" id="7992845">.</span><span class="ident" id="7992846">Errorf</span><span class="op" id="7992852">(</span><span class="string" id="7992853">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7992898">,</span>&nbsp;<span class="ident" id="7992900">buf</span><span class="op" id="7992903">,</span>&nbsp;<span class="ident" id="7992905">x</span><span class="op" id="7992906">,</span>&nbsp;<span class="ident" id="7992908">n</span><span class="op" id="7992909">,</span>&nbsp;<span class="ident" id="7992911">n0</span><span class="op" id="7992913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992920">x</span><span class="op" id="7992921">,</span>&nbsp;<span class="ident" id="7992923">err</span>&nbsp;<span class="op" id="7992927">:=</span>&nbsp;<span class="ident" id="7992930">ReadUvarint</span><span class="op" id="7992941">(</span><span class="ident" id="7992942">bytes</span><span class="op" id="7992947">.</span><span class="ident" id="7992948">NewReader</span><span class="op" id="7992957">(</span><span class="ident" id="7992958">buf</span><span class="op" id="7992961">)</span><span class="op" id="7992962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992965">if</span>&nbsp;<span class="ident" id="7992968">x</span>&nbsp;<span class="op" id="7992970">!=</span>&nbsp;<span class="num" id="7992973">0</span>&nbsp;<span class="op" id="7992975">||</span>&nbsp;<span class="ident" id="7992978">err</span>&nbsp;<span class="op" id="7992982">!=</span>&nbsp;<span class="ident" id="7992985">err0</span>&nbsp;<span class="op" id="7992990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992994">t</span><span class="op" id="7992995">.</span><span class="ident" id="7992996">Errorf</span><span class="op" id="7993002">(</span><span class="string" id="7993003">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7993054">,</span>&nbsp;<span class="ident" id="7993056">buf</span><span class="op" id="7993059">,</span>&nbsp;<span class="ident" id="7993061">x</span><span class="op" id="7993062">,</span>&nbsp;<span class="ident" id="7993064">err</span><span class="op" id="7993067">,</span>&nbsp;<span class="ident" id="7993069">err0</span><span class="op" id="7993073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993076">}</span><br>
<span class="lineno"></span><span class="op" id="7993078">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7993081">func</span>&nbsp;<span class="ident" id="7993086">TestOverflow</span><span class="op" id="7993098">(</span><span class="ident" id="7993099">t</span>&nbsp;<span class="op" id="7993101">*</span><span class="ident" id="7993102">testing</span><span class="op" id="7993109">.</span><span class="ident" id="7993110">T</span><span class="op" id="7993111">)</span>&nbsp;<span class="op" id="7993113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993116">testOverflow</span><span class="op" id="7993128">(</span><span class="ident" id="7993129">t</span><span class="op" id="7993130">,</span>&nbsp;<span class="op" id="7993132">[</span><span class="op" id="7993133">]</span><span class="builtintype" id="7993134">byte</span><span class="op" id="7993138">{</span><span class="num" id="7993139">0x80</span><span class="op" id="7993143">,</span>&nbsp;<span class="num" id="7993145">0x80</span><span class="op" id="7993149">,</span>&nbsp;<span class="num" id="7993151">0x80</span><span class="op" id="7993155">,</span>&nbsp;<span class="num" id="7993157">0x80</span><span class="op" id="7993161">,</span>&nbsp;<span class="num" id="7993163">0x80</span><span class="op" id="7993167">,</span>&nbsp;<span class="num" id="7993169">0x80</span><span class="op" id="7993173">,</span>&nbsp;<span class="num" id="7993175">0x80</span><span class="op" id="7993179">,</span>&nbsp;<span class="num" id="7993181">0x80</span><span class="op" id="7993185">,</span>&nbsp;<span class="num" id="7993187">0x80</span><span class="op" id="7993191">,</span>&nbsp;<span class="num" id="7993193">0x2</span><span class="op" id="7993196">}</span><span class="op" id="7993197">,</span>&nbsp;<span class="op" id="7993199">-</span><span class="num" id="7993200">10</span><span class="op" id="7993202">,</span>&nbsp;<span class="ident" id="7993204">overflow</span><span class="op" id="7993212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993215">testOverflow</span><span class="op" id="7993227">(</span><span class="ident" id="7993228">t</span><span class="op" id="7993229">,</span>&nbsp;<span class="op" id="7993231">[</span><span class="op" id="7993232">]</span><span class="builtintype" id="7993233">byte</span><span class="op" id="7993237">{</span><span class="num" id="7993238">0x80</span><span class="op" id="7993242">,</span>&nbsp;<span class="num" id="7993244">0x80</span><span class="op" id="7993248">,</span>&nbsp;<span class="num" id="7993250">0x80</span><span class="op" id="7993254">,</span>&nbsp;<span class="num" id="7993256">0x80</span><span class="op" id="7993260">,</span>&nbsp;<span class="num" id="7993262">0x80</span><span class="op" id="7993266">,</span>&nbsp;<span class="num" id="7993268">0x80</span><span class="op" id="7993272">,</span>&nbsp;<span class="num" id="7993274">0x80</span><span class="op" id="7993278">,</span>&nbsp;<span class="num" id="7993280">0x80</span><span class="op" id="7993284">,</span>&nbsp;<span class="num" id="7993286">0x80</span><span class="op" id="7993290">,</span>&nbsp;<span class="num" id="7993292">0x80</span><span class="op" id="7993296">,</span>&nbsp;<span class="num" id="7993298">0x80</span><span class="op" id="7993302">,</span>&nbsp;<span class="num" id="7993304">0x80</span><span class="op" id="7993308">,</span>&nbsp;<span class="num" id="7993310">0x1</span><span class="op" id="7993313">,</span>&nbsp;<span class="num" id="7993315">0</span><span class="op" id="7993316">,</span>&nbsp;<span class="num" id="7993318">0</span><span class="op" id="7993319">}</span><span class="op" id="7993320">,</span>&nbsp;<span class="op" id="7993322">-</span><span class="num" id="7993323">13</span><span class="op" id="7993325">,</span>&nbsp;<span class="ident" id="7993327">overflow</span><span class="op" id="7993335">)</span><br>
<span class="lineno"></span><span class="op" id="7993337">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7993340">func</span>&nbsp;<span class="ident" id="7993345">TestNonCanonicalZero</span><span class="op" id="7993365">(</span><span class="ident" id="7993366">t</span>&nbsp;<span class="op" id="7993368">*</span><span class="ident" id="7993369">testing</span><span class="op" id="7993376">.</span><span class="ident" id="7993377">T</span><span class="op" id="7993378">)</span>&nbsp;<span class="op" id="7993380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993383">buf</span>&nbsp;<span class="op" id="7993387">:=</span>&nbsp;<span class="op" id="7993390">[</span><span class="op" id="7993391">]</span><span class="builtintype" id="7993392">byte</span><span class="op" id="7993396">{</span><span class="num" id="7993397">0x80</span><span class="op" id="7993401">,</span>&nbsp;<span class="num" id="7993403">0x80</span><span class="op" id="7993407">,</span>&nbsp;<span class="num" id="7993409">0x80</span><span class="op" id="7993413">,</span>&nbsp;<span class="num" id="7993415">0</span><span class="op" id="7993416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993419">x</span><span class="op" id="7993420">,</span>&nbsp;<span class="ident" id="7993422">n</span>&nbsp;<span class="op" id="7993424">:=</span>&nbsp;<span class="ident" id="7993427">Uvarint</span><span class="op" id="7993434">(</span><span class="ident" id="7993435">buf</span><span class="op" id="7993438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7993441">if</span>&nbsp;<span class="ident" id="7993444">x</span>&nbsp;<span class="op" id="7993446">!=</span>&nbsp;<span class="num" id="7993449">0</span>&nbsp;<span class="op" id="7993451">||</span>&nbsp;<span class="ident" id="7993454">n</span>&nbsp;<span class="op" id="7993456">!=</span>&nbsp;<span class="num" id="7993459">4</span>&nbsp;<span class="op" id="7993461">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993465">t</span><span class="op" id="7993466">.</span><span class="ident" id="7993467">Errorf</span><span class="op" id="7993473">(</span><span class="string" id="7993474">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7993518">,</span>&nbsp;<span class="ident" id="7993520">buf</span><span class="op" id="7993523">,</span>&nbsp;<span class="ident" id="7993525">x</span><span class="op" id="7993526">,</span>&nbsp;<span class="ident" id="7993528">n</span><span class="op" id="7993529">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993533">}</span><br>
<span class="lineno"></span><span class="op" id="7993535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7993538">func</span>&nbsp;<span class="ident" id="7993543">BenchmarkPutUvarint32</span><span class="op" id="7993564">(</span><span class="ident" id="7993565">b</span>&nbsp;<span class="op" id="7993567">*</span><span class="ident" id="7993568">testing</span><span class="op" id="7993575">.</span><span class="ident" id="7993576">B</span><span class="op" id="7993577">)</span>&nbsp;<span class="op" id="7993579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993582">buf</span>&nbsp;<span class="op" id="7993586">:=</span>&nbsp;<span class="builtinfunc" id="7993589">make</span><span class="op" id="7993593">(</span><span class="op" id="7993594">[</span><span class="op" id="7993595">]</span><span class="builtintype" id="7993596">byte</span><span class="op" id="7993600">,</span>&nbsp;<span class="ident" id="7993602">MaxVarintLen32</span><span class="op" id="7993616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993619">b</span><span class="op" id="7993620">.</span><span class="ident" id="7993621">SetBytes</span><span class="op" id="7993629">(</span><span class="num" id="7993630">4</span><span class="op" id="7993631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7993634">for</span>&nbsp;<span class="ident" id="7993638">i</span>&nbsp;<span class="op" id="7993640">:=</span>&nbsp;<span class="num" id="7993643">0</span><span class="op" id="7993644">;</span>&nbsp;<span class="ident" id="7993646">i</span>&nbsp;<span class="op" id="7993648">&lt;</span>&nbsp;<span class="ident" id="7993650">b</span><span class="op" id="7993651">.</span><span class="ident" id="7993652">N</span><span class="op" id="7993653">;</span>&nbsp;<span class="ident" id="7993655">i</span><span class="op" id="7993656">++</span>&nbsp;<span class="op" id="7993659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7993663">for</span>&nbsp;<span class="ident" id="7993667">j</span>&nbsp;<span class="op" id="7993669">:=</span>&nbsp;<span class="builtintype" id="7993672">uint</span><span class="op" id="7993676">(</span><span class="num" id="7993677">0</span><span class="op" id="7993678">)</span><span class="op" id="7993679">;</span>&nbsp;<span class="ident" id="7993681">j</span>&nbsp;<span class="op" id="7993683">&lt;</span>&nbsp;<span class="ident" id="7993685">MaxVarintLen32</span><span class="op" id="7993699">;</span>&nbsp;<span class="ident" id="7993701">j</span><span class="op" id="7993702">++</span>&nbsp;<span class="op" id="7993705">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993710">PutUvarint</span><span class="op" id="7993720">(</span><span class="ident" id="7993721">buf</span><span class="op" id="7993724">,</span>&nbsp;<span class="num" id="7993726">1</span><span class="op" id="7993727">&lt;&lt;</span><span class="op" id="7993729">(</span><span class="ident" id="7993730">j</span><span class="op" id="7993731">*</span><span class="num" id="7993732">7</span><span class="op" id="7993733">)</span><span class="op" id="7993734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993741">}</span><br>
<span class="lineno"></span><span class="op" id="7993743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7993746">func</span>&nbsp;<span class="ident" id="7993751">BenchmarkPutUvarint64</span><span class="op" id="7993772">(</span><span class="ident" id="7993773">b</span>&nbsp;<span class="op" id="7993775">*</span><span class="ident" id="7993776">testing</span><span class="op" id="7993783">.</span><span class="ident" id="7993784">B</span><span class="op" id="7993785">)</span>&nbsp;<span class="op" id="7993787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993790">buf</span>&nbsp;<span class="op" id="7993794">:=</span>&nbsp;<span class="builtinfunc" id="7993797">make</span><span class="op" id="7993801">(</span><span class="op" id="7993802">[</span><span class="op" id="7993803">]</span><span class="builtintype" id="7993804">byte</span><span class="op" id="7993808">,</span>&nbsp;<span class="ident" id="7993810">MaxVarintLen64</span><span class="op" id="7993824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993827">b</span><span class="op" id="7993828">.</span><span class="ident" id="7993829">SetBytes</span><span class="op" id="7993837">(</span><span class="num" id="7993838">8</span><span class="op" id="7993839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7993842">for</span>&nbsp;<span class="ident" id="7993846">i</span>&nbsp;<span class="op" id="7993848">:=</span>&nbsp;<span class="num" id="7993851">0</span><span class="op" id="7993852">;</span>&nbsp;<span class="ident" id="7993854">i</span>&nbsp;<span class="op" id="7993856">&lt;</span>&nbsp;<span class="ident" id="7993858">b</span><span class="op" id="7993859">.</span><span class="ident" id="7993860">N</span><span class="op" id="7993861">;</span>&nbsp;<span class="ident" id="7993863">i</span><span class="op" id="7993864">++</span>&nbsp;<span class="op" id="7993867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7993871">for</span>&nbsp;<span class="ident" id="7993875">j</span>&nbsp;<span class="op" id="7993877">:=</span>&nbsp;<span class="builtintype" id="7993880">uint</span><span class="op" id="7993884">(</span><span class="num" id="7993885">0</span><span class="op" id="7993886">)</span><span class="op" id="7993887">;</span>&nbsp;<span class="ident" id="7993889">j</span>&nbsp;<span class="op" id="7993891">&lt;</span>&nbsp;<span class="ident" id="7993893">MaxVarintLen64</span><span class="op" id="7993907">;</span>&nbsp;<span class="ident" id="7993909">j</span><span class="op" id="7993910">++</span>&nbsp;<span class="op" id="7993913">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7993918">PutUvarint</span><span class="op" id="7993928">(</span><span class="ident" id="7993929">buf</span><span class="op" id="7993932">,</span>&nbsp;<span class="num" id="7993934">1</span><span class="op" id="7993935">&lt;&lt;</span><span class="op" id="7993937">(</span><span class="ident" id="7993938">j</span><span class="op" id="7993939">*</span><span class="num" id="7993940">7</span><span class="op" id="7993941">)</span><span class="op" id="7993942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993949">}</span><br>
<span class="lineno"></span><span class="op" id="7993951">}</span>
</div>
</body>
</html>
