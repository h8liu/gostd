<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3031410">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3031465">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3031519">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3031570">package</span>&nbsp;<span class="ident" id="3031578">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3031588">import</span>&nbsp;<span class="op" id="3031595">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031598">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031608">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031614">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031625">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031633">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3031644">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3031659">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3031662">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3031723">var</span>&nbsp;<span class="ident" id="3031727">ErrBadPattern</span>&nbsp;<span class="op" id="3031741">=</span>&nbsp;<span class="ident" id="3031743">errors</span><span class="op" id="3031749">.</span><span class="ident" id="3031750">New</span><span class="op" id="3031753">(</span><span class="string" id="3031754">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3031779">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3031782">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3031849">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3031875">//</span><br>
<span class="lineno"></span><span class="comment" id="3031878">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3031890">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3031903">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3031912">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3031977">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3032036">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3032076">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3032128">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3032191">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3032227">//</span><br>
<span class="lineno"></span><span class="comment" id="3032230">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3032250">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3032308">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3032344">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3032398">//</span><br>
<span class="lineno"></span><span class="comment" id="3032401">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3032471">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3032538">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3032555">//</span><br>
<span class="lineno"></span><span class="comment" id="3032558">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3032623">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3032642">//</span><br>
<span class="lineno"></span><span class="keyword" id="3032645">func</span>&nbsp;<span class="ident" id="3032650">Match</span><span class="op" id="3032655">(</span><span class="ident" id="3032656">pattern</span><span class="op" id="3032663">,</span>&nbsp;<span class="ident" id="3032665">name</span>&nbsp;<span class="builtintype" id="3032670">string</span><span class="op" id="3032676">)</span>&nbsp;<span class="op" id="3032678">(</span><span class="ident" id="3032679">matched</span>&nbsp;<span class="builtintype" id="3032687">bool</span><span class="op" id="3032691">,</span>&nbsp;<span class="ident" id="3032693">err</span>&nbsp;<span class="builtintype" id="3032697">error</span><span class="op" id="3032702">)</span>&nbsp;<span class="op" id="3032704">{</span><br>
<span class="lineno">45</span><span class="ident" id="3032706">Pattern</span><span class="op" id="3032713">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032716">for</span>&nbsp;<span class="builtinfunc" id="3032720">len</span><span class="op" id="3032723">(</span><span class="ident" id="3032724">pattern</span><span class="op" id="3032731">)</span>&nbsp;<span class="op" id="3032733">&gt;</span>&nbsp;<span class="num" id="3032735">0</span>&nbsp;<span class="op" id="3032737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032741">var</span>&nbsp;<span class="ident" id="3032745">star</span>&nbsp;<span class="builtintype" id="3032750">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032757">var</span>&nbsp;<span class="ident" id="3032761">chunk</span>&nbsp;<span class="builtintype" id="3032767">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032776">star</span><span class="op" id="3032780">,</span>&nbsp;<span class="ident" id="3032782">chunk</span><span class="op" id="3032787">,</span>&nbsp;<span class="ident" id="3032789">pattern</span>&nbsp;<span class="op" id="3032797">=</span>&nbsp;<span class="ident" id="3032799">scanChunk</span><span class="op" id="3032808">(</span><span class="ident" id="3032809">pattern</span><span class="op" id="3032816">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032820">if</span>&nbsp;<span class="ident" id="3032823">star</span>&nbsp;<span class="op" id="3032828">&amp;&amp;</span>&nbsp;<span class="ident" id="3032831">chunk</span>&nbsp;<span class="op" id="3032837">==</span>&nbsp;<span class="string" id="3032840">&#34;&#34;</span>&nbsp;<span class="op" id="3032843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3032848">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032907">return</span>&nbsp;<span class="ident" id="3032914">strings</span><span class="op" id="3032921">.</span><span class="ident" id="3032922">Index</span><span class="op" id="3032927">(</span><span class="ident" id="3032928">name</span><span class="op" id="3032932">,</span>&nbsp;<span class="builtintype" id="3032934">string</span><span class="op" id="3032940">(</span><span class="ident" id="3032941">Separator</span><span class="op" id="3032950">)</span><span class="op" id="3032951">)</span>&nbsp;<span class="op" id="3032953">&lt;</span>&nbsp;<span class="num" id="3032955">0</span><span class="op" id="3032956">,</span>&nbsp;<span class="ident" id="3032958">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3032964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3032968">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033009">t</span><span class="op" id="3033010">,</span>&nbsp;<span class="ident" id="3033012">ok</span><span class="op" id="3033014">,</span>&nbsp;<span class="ident" id="3033016">err</span>&nbsp;<span class="op" id="3033020">:=</span>&nbsp;<span class="ident" id="3033023">matchChunk</span><span class="op" id="3033033">(</span><span class="ident" id="3033034">chunk</span><span class="op" id="3033039">,</span>&nbsp;<span class="ident" id="3033041">name</span><span class="op" id="3033045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033049">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033114">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033184">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033204">if</span>&nbsp;<span class="ident" id="3033207">ok</span>&nbsp;<span class="op" id="3033210">&amp;&amp;</span>&nbsp;<span class="op" id="3033213">(</span><span class="builtinfunc" id="3033214">len</span><span class="op" id="3033217">(</span><span class="ident" id="3033218">t</span><span class="op" id="3033219">)</span>&nbsp;<span class="op" id="3033221">==</span>&nbsp;<span class="num" id="3033224">0</span>&nbsp;<span class="op" id="3033226">||</span>&nbsp;<span class="builtinfunc" id="3033229">len</span><span class="op" id="3033232">(</span><span class="ident" id="3033233">pattern</span><span class="op" id="3033240">)</span>&nbsp;<span class="op" id="3033242">&gt;</span>&nbsp;<span class="num" id="3033244">0</span><span class="op" id="3033245">)</span>&nbsp;<span class="op" id="3033247">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033252">name</span>&nbsp;<span class="op" id="3033257">=</span>&nbsp;<span class="ident" id="3033259">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033264">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033279">if</span>&nbsp;<span class="ident" id="3033282">err</span>&nbsp;<span class="op" id="3033286">!=</span>&nbsp;<span class="ident" id="3033289">nil</span>&nbsp;<span class="op" id="3033293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033298">return</span>&nbsp;<span class="builtintype" id="3033305">false</span><span class="op" id="3033310">,</span>&nbsp;<span class="ident" id="3033312">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033322">if</span>&nbsp;<span class="ident" id="3033325">star</span>&nbsp;<span class="op" id="3033330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033335">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033376">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033397">for</span>&nbsp;<span class="ident" id="3033401">i</span>&nbsp;<span class="op" id="3033403">:=</span>&nbsp;<span class="num" id="3033406">0</span><span class="op" id="3033407">;</span>&nbsp;<span class="ident" id="3033409">i</span>&nbsp;<span class="op" id="3033411">&lt;</span>&nbsp;<span class="builtinfunc" id="3033413">len</span><span class="op" id="3033416">(</span><span class="ident" id="3033417">name</span><span class="op" id="3033421">)</span>&nbsp;<span class="op" id="3033423">&amp;&amp;</span>&nbsp;<span class="ident" id="3033426">name</span><span class="op" id="3033430">[</span><span class="ident" id="3033431">i</span><span class="op" id="3033432">]</span>&nbsp;<span class="op" id="3033434">!=</span>&nbsp;<span class="ident" id="3033437">Separator</span><span class="op" id="3033446">;</span>&nbsp;<span class="ident" id="3033448">i</span><span class="op" id="3033449">++</span>&nbsp;<span class="op" id="3033452">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033458">t</span><span class="op" id="3033459">,</span>&nbsp;<span class="ident" id="3033461">ok</span><span class="op" id="3033463">,</span>&nbsp;<span class="ident" id="3033465">err</span>&nbsp;<span class="op" id="3033469">:=</span>&nbsp;<span class="ident" id="3033472">matchChunk</span><span class="op" id="3033482">(</span><span class="ident" id="3033483">chunk</span><span class="op" id="3033488">,</span>&nbsp;<span class="ident" id="3033490">name</span><span class="op" id="3033494">[</span><span class="ident" id="3033495">i</span><span class="op" id="3033496">+</span><span class="num" id="3033497">1</span><span class="op" id="3033498">:</span><span class="op" id="3033499">]</span><span class="op" id="3033500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033506">if</span>&nbsp;<span class="ident" id="3033509">ok</span>&nbsp;<span class="op" id="3033512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033519">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033584">if</span>&nbsp;<span class="builtinfunc" id="3033587">len</span><span class="op" id="3033590">(</span><span class="ident" id="3033591">pattern</span><span class="op" id="3033598">)</span>&nbsp;<span class="op" id="3033600">==</span>&nbsp;<span class="num" id="3033603">0</span>&nbsp;<span class="op" id="3033605">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3033608">len</span><span class="op" id="3033611">(</span><span class="ident" id="3033612">t</span><span class="op" id="3033613">)</span>&nbsp;<span class="op" id="3033615">&gt;</span>&nbsp;<span class="num" id="3033617">0</span>&nbsp;<span class="op" id="3033619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033627">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033648">name</span>&nbsp;<span class="op" id="3033653">=</span>&nbsp;<span class="ident" id="3033655">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033662">continue</span>&nbsp;<span class="ident" id="3033671">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033689">if</span>&nbsp;<span class="ident" id="3033692">err</span>&nbsp;<span class="op" id="3033696">!=</span>&nbsp;<span class="ident" id="3033699">nil</span>&nbsp;<span class="op" id="3033703">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033710">return</span>&nbsp;<span class="builtintype" id="3033717">false</span><span class="op" id="3033722">,</span>&nbsp;<span class="ident" id="3033724">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033745">return</span>&nbsp;<span class="builtintype" id="3033752">false</span><span class="op" id="3033757">,</span>&nbsp;<span class="ident" id="3033759">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033767">return</span>&nbsp;<span class="builtinfunc" id="3033774">len</span><span class="op" id="3033777">(</span><span class="ident" id="3033778">name</span><span class="op" id="3033782">)</span>&nbsp;<span class="op" id="3033784">==</span>&nbsp;<span class="num" id="3033787">0</span><span class="op" id="3033788">,</span>&nbsp;<span class="ident" id="3033790">nil</span><br>
<span class="lineno"></span><span class="op" id="3033794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3033797">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3033871">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3033903">func</span>&nbsp;<span class="ident" id="3033908">scanChunk</span><span class="op" id="3033917">(</span><span class="ident" id="3033918">pattern</span>&nbsp;<span class="builtintype" id="3033926">string</span><span class="op" id="3033932">)</span>&nbsp;<span class="op" id="3033934">(</span><span class="ident" id="3033935">star</span>&nbsp;<span class="builtintype" id="3033940">bool</span><span class="op" id="3033944">,</span>&nbsp;<span class="ident" id="3033946">chunk</span><span class="op" id="3033951">,</span>&nbsp;<span class="ident" id="3033953">rest</span>&nbsp;<span class="builtintype" id="3033958">string</span><span class="op" id="3033964">)</span>&nbsp;<span class="op" id="3033966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033969">for</span>&nbsp;<span class="builtinfunc" id="3033973">len</span><span class="op" id="3033976">(</span><span class="ident" id="3033977">pattern</span><span class="op" id="3033984">)</span>&nbsp;<span class="op" id="3033986">&gt;</span>&nbsp;<span class="num" id="3033988">0</span>&nbsp;<span class="op" id="3033990">&amp;&amp;</span>&nbsp;<span class="ident" id="3033993">pattern</span><span class="op" id="3034000">[</span><span class="num" id="3034001">0</span><span class="op" id="3034002">]</span>&nbsp;<span class="op" id="3034004">==</span>&nbsp;<span class="string" id="3034007">&#39;*&#39;</span>&nbsp;<span class="op" id="3034011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034015">pattern</span>&nbsp;<span class="op" id="3034023">=</span>&nbsp;<span class="ident" id="3034025">pattern</span><span class="op" id="3034032">[</span><span class="num" id="3034033">1</span><span class="op" id="3034034">:</span><span class="op" id="3034035">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034039">star</span>&nbsp;<span class="op" id="3034044">=</span>&nbsp;<span class="builtintype" id="3034046">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034055">inrange</span>&nbsp;<span class="op" id="3034063">:=</span>&nbsp;<span class="builtintype" id="3034066">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034073">var</span>&nbsp;<span class="ident" id="3034077">i</span>&nbsp;<span class="builtintype" id="3034079">int</span><br>
<span class="lineno"></span><span class="ident" id="3034083">Scan</span><span class="op" id="3034087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034090">for</span>&nbsp;<span class="ident" id="3034094">i</span>&nbsp;<span class="op" id="3034096">=</span>&nbsp;<span class="num" id="3034098">0</span><span class="op" id="3034099">;</span>&nbsp;<span class="ident" id="3034101">i</span>&nbsp;<span class="op" id="3034103">&lt;</span>&nbsp;<span class="builtinfunc" id="3034105">len</span><span class="op" id="3034108">(</span><span class="ident" id="3034109">pattern</span><span class="op" id="3034116">)</span><span class="op" id="3034117">;</span>&nbsp;<span class="ident" id="3034119">i</span><span class="op" id="3034120">++</span>&nbsp;<span class="op" id="3034123">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034127">switch</span>&nbsp;<span class="ident" id="3034134">pattern</span><span class="op" id="3034141">[</span><span class="ident" id="3034142">i</span><span class="op" id="3034143">]</span>&nbsp;<span class="op" id="3034145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034149">case</span>&nbsp;<span class="string" id="3034154">&#39;\\&#39;</span><span class="op" id="3034158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034163">if</span>&nbsp;<span class="ident" id="3034166">runtime</span><span class="op" id="3034173">.</span><span class="ident" id="3034174">GOOS</span>&nbsp;<span class="op" id="3034179">!=</span>&nbsp;<span class="string" id="3034182">&#34;windows&#34;</span>&nbsp;<span class="op" id="3034192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034198">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034253">if</span>&nbsp;<span class="ident" id="3034256">i</span><span class="op" id="3034257">+</span><span class="num" id="3034258">1</span>&nbsp;<span class="op" id="3034260">&lt;</span>&nbsp;<span class="builtinfunc" id="3034262">len</span><span class="op" id="3034265">(</span><span class="ident" id="3034266">pattern</span><span class="op" id="3034273">)</span>&nbsp;<span class="op" id="3034275">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034282">i</span><span class="op" id="3034283">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034299">case</span>&nbsp;<span class="string" id="3034304">&#39;[&#39;</span><span class="op" id="3034307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034312">inrange</span>&nbsp;<span class="op" id="3034320">=</span>&nbsp;<span class="builtintype" id="3034322">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034329">case</span>&nbsp;<span class="string" id="3034334">&#39;]&#39;</span><span class="op" id="3034337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034342">inrange</span>&nbsp;<span class="op" id="3034350">=</span>&nbsp;<span class="builtintype" id="3034352">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034360">case</span>&nbsp;<span class="string" id="3034365">&#39;*&#39;</span><span class="op" id="3034368">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034373">if</span>&nbsp;<span class="op" id="3034376">!</span><span class="ident" id="3034377">inrange</span>&nbsp;<span class="op" id="3034385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034391">break</span>&nbsp;<span class="ident" id="3034397">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034415">return</span>&nbsp;<span class="ident" id="3034422">star</span><span class="op" id="3034426">,</span>&nbsp;<span class="ident" id="3034428">pattern</span><span class="op" id="3034435">[</span><span class="num" id="3034436">0</span><span class="op" id="3034437">:</span><span class="ident" id="3034438">i</span><span class="op" id="3034439">]</span><span class="op" id="3034440">,</span>&nbsp;<span class="ident" id="3034442">pattern</span><span class="op" id="3034449">[</span><span class="ident" id="3034450">i</span><span class="op" id="3034451">:</span><span class="op" id="3034452">]</span><br>
<span class="lineno"></span><span class="op" id="3034454">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3034457">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3034520">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3034579">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3034654">func</span>&nbsp;<span class="ident" id="3034659">matchChunk</span><span class="op" id="3034669">(</span><span class="ident" id="3034670">chunk</span><span class="op" id="3034675">,</span>&nbsp;<span class="ident" id="3034677">s</span>&nbsp;<span class="builtintype" id="3034679">string</span><span class="op" id="3034685">)</span>&nbsp;<span class="op" id="3034687">(</span><span class="ident" id="3034688">rest</span>&nbsp;<span class="builtintype" id="3034693">string</span><span class="op" id="3034699">,</span>&nbsp;<span class="ident" id="3034701">ok</span>&nbsp;<span class="builtintype" id="3034704">bool</span><span class="op" id="3034708">,</span>&nbsp;<span class="ident" id="3034710">err</span>&nbsp;<span class="builtintype" id="3034714">error</span><span class="op" id="3034719">)</span>&nbsp;<span class="op" id="3034721">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034724">for</span>&nbsp;<span class="builtinfunc" id="3034728">len</span><span class="op" id="3034731">(</span><span class="ident" id="3034732">chunk</span><span class="op" id="3034737">)</span>&nbsp;<span class="op" id="3034739">&gt;</span>&nbsp;<span class="num" id="3034741">0</span>&nbsp;<span class="op" id="3034743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034747">if</span>&nbsp;<span class="builtinfunc" id="3034750">len</span><span class="op" id="3034753">(</span><span class="ident" id="3034754">s</span><span class="op" id="3034755">)</span>&nbsp;<span class="op" id="3034757">==</span>&nbsp;<span class="num" id="3034760">0</span>&nbsp;<span class="op" id="3034762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034767">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034780">switch</span>&nbsp;<span class="ident" id="3034787">chunk</span><span class="op" id="3034792">[</span><span class="num" id="3034793">0</span><span class="op" id="3034794">]</span>&nbsp;<span class="op" id="3034796">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034800">case</span>&nbsp;<span class="string" id="3034805">&#39;[&#39;</span><span class="op" id="3034808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034813">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034835">r</span><span class="op" id="3034836">,</span>&nbsp;<span class="ident" id="3034838">n</span>&nbsp;<span class="op" id="3034840">:=</span>&nbsp;<span class="ident" id="3034843">utf8</span><span class="op" id="3034847">.</span><span class="ident" id="3034848">DecodeRuneInString</span><span class="op" id="3034866">(</span><span class="ident" id="3034867">s</span><span class="op" id="3034868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034873">s</span>&nbsp;<span class="op" id="3034875">=</span>&nbsp;<span class="ident" id="3034877">s</span><span class="op" id="3034878">[</span><span class="ident" id="3034879">n</span><span class="op" id="3034880">:</span><span class="op" id="3034881">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034886">chunk</span>&nbsp;<span class="op" id="3034892">=</span>&nbsp;<span class="ident" id="3034894">chunk</span><span class="op" id="3034899">[</span><span class="num" id="3034900">1</span><span class="op" id="3034901">:</span><span class="op" id="3034902">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034907">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034968">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035014">if</span>&nbsp;<span class="builtinfunc" id="3035017">len</span><span class="op" id="3035020">(</span><span class="ident" id="3035021">chunk</span><span class="op" id="3035026">)</span>&nbsp;<span class="op" id="3035028">==</span>&nbsp;<span class="num" id="3035031">0</span>&nbsp;<span class="op" id="3035033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035039">err</span>&nbsp;<span class="op" id="3035043">=</span>&nbsp;<span class="ident" id="3035045">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035063">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035078">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035101">negated</span>&nbsp;<span class="op" id="3035109">:=</span>&nbsp;<span class="ident" id="3035112">chunk</span><span class="op" id="3035117">[</span><span class="num" id="3035118">0</span><span class="op" id="3035119">]</span>&nbsp;<span class="op" id="3035121">==</span>&nbsp;<span class="string" id="3035124">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035131">if</span>&nbsp;<span class="ident" id="3035134">negated</span>&nbsp;<span class="op" id="3035142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035148">chunk</span>&nbsp;<span class="op" id="3035154">=</span>&nbsp;<span class="ident" id="3035156">chunk</span><span class="op" id="3035161">[</span><span class="num" id="3035162">1</span><span class="op" id="3035163">:</span><span class="op" id="3035164">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035174">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035197">match</span>&nbsp;<span class="op" id="3035203">:=</span>&nbsp;<span class="builtintype" id="3035206">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035215">nrange</span>&nbsp;<span class="op" id="3035222">:=</span>&nbsp;<span class="num" id="3035225">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035230">for</span>&nbsp;<span class="op" id="3035234">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035240">if</span>&nbsp;<span class="builtinfunc" id="3035243">len</span><span class="op" id="3035246">(</span><span class="ident" id="3035247">chunk</span><span class="op" id="3035252">)</span>&nbsp;<span class="op" id="3035254">&gt;</span>&nbsp;<span class="num" id="3035256">0</span>&nbsp;<span class="op" id="3035258">&amp;&amp;</span>&nbsp;<span class="ident" id="3035261">chunk</span><span class="op" id="3035266">[</span><span class="num" id="3035267">0</span><span class="op" id="3035268">]</span>&nbsp;<span class="op" id="3035270">==</span>&nbsp;<span class="string" id="3035273">&#39;]&#39;</span>&nbsp;<span class="op" id="3035277">&amp;&amp;</span>&nbsp;<span class="ident" id="3035280">nrange</span>&nbsp;<span class="op" id="3035287">&gt;</span>&nbsp;<span class="num" id="3035289">0</span>&nbsp;<span class="op" id="3035291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035298">chunk</span>&nbsp;<span class="op" id="3035304">=</span>&nbsp;<span class="ident" id="3035306">chunk</span><span class="op" id="3035311">[</span><span class="num" id="3035312">1</span><span class="op" id="3035313">:</span><span class="op" id="3035314">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035321">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035337">var</span>&nbsp;<span class="ident" id="3035341">lo</span><span class="op" id="3035343">,</span>&nbsp;<span class="ident" id="3035345">hi</span>&nbsp;<span class="builtintype" id="3035348">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035357">if</span>&nbsp;<span class="ident" id="3035360">lo</span><span class="op" id="3035362">,</span>&nbsp;<span class="ident" id="3035364">chunk</span><span class="op" id="3035369">,</span>&nbsp;<span class="ident" id="3035371">err</span>&nbsp;<span class="op" id="3035375">=</span>&nbsp;<span class="ident" id="3035377">getEsc</span><span class="op" id="3035383">(</span><span class="ident" id="3035384">chunk</span><span class="op" id="3035389">)</span><span class="op" id="3035390">;</span>&nbsp;<span class="ident" id="3035392">err</span>&nbsp;<span class="op" id="3035396">!=</span>&nbsp;<span class="ident" id="3035399">nil</span>&nbsp;<span class="op" id="3035403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035410">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035427">hi</span>&nbsp;<span class="op" id="3035430">=</span>&nbsp;<span class="ident" id="3035432">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035439">if</span>&nbsp;<span class="ident" id="3035442">chunk</span><span class="op" id="3035447">[</span><span class="num" id="3035448">0</span><span class="op" id="3035449">]</span>&nbsp;<span class="op" id="3035451">==</span>&nbsp;<span class="string" id="3035454">&#39;-&#39;</span>&nbsp;<span class="op" id="3035458">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035465">if</span>&nbsp;<span class="ident" id="3035468">hi</span><span class="op" id="3035470">,</span>&nbsp;<span class="ident" id="3035472">chunk</span><span class="op" id="3035477">,</span>&nbsp;<span class="ident" id="3035479">err</span>&nbsp;<span class="op" id="3035483">=</span>&nbsp;<span class="ident" id="3035485">getEsc</span><span class="op" id="3035491">(</span><span class="ident" id="3035492">chunk</span><span class="op" id="3035497">[</span><span class="num" id="3035498">1</span><span class="op" id="3035499">:</span><span class="op" id="3035500">]</span><span class="op" id="3035501">)</span><span class="op" id="3035502">;</span>&nbsp;<span class="ident" id="3035504">err</span>&nbsp;<span class="op" id="3035508">!=</span>&nbsp;<span class="ident" id="3035511">nil</span>&nbsp;<span class="op" id="3035515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035523">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035547">if</span>&nbsp;<span class="ident" id="3035550">lo</span>&nbsp;<span class="op" id="3035553">&lt;=</span>&nbsp;<span class="ident" id="3035556">r</span>&nbsp;<span class="op" id="3035558">&amp;&amp;</span>&nbsp;<span class="ident" id="3035561">r</span>&nbsp;<span class="op" id="3035563">&lt;=</span>&nbsp;<span class="ident" id="3035566">hi</span>&nbsp;<span class="op" id="3035569">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035576">match</span>&nbsp;<span class="op" id="3035582">=</span>&nbsp;<span class="builtintype" id="3035584">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035599">nrange</span><span class="op" id="3035605">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035616">if</span>&nbsp;<span class="ident" id="3035619">match</span>&nbsp;<span class="op" id="3035625">==</span>&nbsp;<span class="ident" id="3035628">negated</span>&nbsp;<span class="op" id="3035636">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035642">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035657">case</span>&nbsp;<span class="string" id="3035662">&#39;?&#39;</span><span class="op" id="3035665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035670">if</span>&nbsp;<span class="ident" id="3035673">s</span><span class="op" id="3035674">[</span><span class="num" id="3035675">0</span><span class="op" id="3035676">]</span>&nbsp;<span class="op" id="3035678">==</span>&nbsp;<span class="ident" id="3035681">Separator</span>&nbsp;<span class="op" id="3035691">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035697">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035712">_</span><span class="op" id="3035713">,</span>&nbsp;<span class="ident" id="3035715">n</span>&nbsp;<span class="op" id="3035717">:=</span>&nbsp;<span class="ident" id="3035720">utf8</span><span class="op" id="3035724">.</span><span class="ident" id="3035725">DecodeRuneInString</span><span class="op" id="3035743">(</span><span class="ident" id="3035744">s</span><span class="op" id="3035745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035750">s</span>&nbsp;<span class="op" id="3035752">=</span>&nbsp;<span class="ident" id="3035754">s</span><span class="op" id="3035755">[</span><span class="ident" id="3035756">n</span><span class="op" id="3035757">:</span><span class="op" id="3035758">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035763">chunk</span>&nbsp;<span class="op" id="3035769">=</span>&nbsp;<span class="ident" id="3035771">chunk</span><span class="op" id="3035776">[</span><span class="num" id="3035777">1</span><span class="op" id="3035778">:</span><span class="op" id="3035779">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035784">case</span>&nbsp;<span class="string" id="3035789">&#39;\\&#39;</span><span class="op" id="3035793">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035798">if</span>&nbsp;<span class="ident" id="3035801">runtime</span><span class="op" id="3035808">.</span><span class="ident" id="3035809">GOOS</span>&nbsp;<span class="op" id="3035814">!=</span>&nbsp;<span class="string" id="3035817">&#34;windows&#34;</span>&nbsp;<span class="op" id="3035827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035833">chunk</span>&nbsp;<span class="op" id="3035839">=</span>&nbsp;<span class="ident" id="3035841">chunk</span><span class="op" id="3035846">[</span><span class="num" id="3035847">1</span><span class="op" id="3035848">:</span><span class="op" id="3035849">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035855">if</span>&nbsp;<span class="builtinfunc" id="3035858">len</span><span class="op" id="3035861">(</span><span class="ident" id="3035862">chunk</span><span class="op" id="3035867">)</span>&nbsp;<span class="op" id="3035869">==</span>&nbsp;<span class="num" id="3035872">0</span>&nbsp;<span class="op" id="3035874">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035881">err</span>&nbsp;<span class="op" id="3035885">=</span>&nbsp;<span class="ident" id="3035887">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035906">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035927">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035942">default</span><span class="op" id="3035949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035954">if</span>&nbsp;<span class="ident" id="3035957">chunk</span><span class="op" id="3035962">[</span><span class="num" id="3035963">0</span><span class="op" id="3035964">]</span>&nbsp;<span class="op" id="3035966">!=</span>&nbsp;<span class="ident" id="3035969">s</span><span class="op" id="3035970">[</span><span class="num" id="3035971">0</span><span class="op" id="3035972">]</span>&nbsp;<span class="op" id="3035974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035980">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035990">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035995">s</span>&nbsp;<span class="op" id="3035997">=</span>&nbsp;<span class="ident" id="3035999">s</span><span class="op" id="3036000">[</span><span class="num" id="3036001">1</span><span class="op" id="3036002">:</span><span class="op" id="3036003">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036008">chunk</span>&nbsp;<span class="op" id="3036014">=</span>&nbsp;<span class="ident" id="3036016">chunk</span><span class="op" id="3036021">[</span><span class="num" id="3036022">1</span><span class="op" id="3036023">:</span><span class="op" id="3036024">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036034">return</span>&nbsp;<span class="ident" id="3036041">s</span><span class="op" id="3036042">,</span>&nbsp;<span class="builtintype" id="3036044">true</span><span class="op" id="3036048">,</span>&nbsp;<span class="ident" id="3036050">nil</span><br>
<span class="lineno">200</span><span class="op" id="3036054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3036057">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3036136">func</span>&nbsp;<span class="ident" id="3036141">getEsc</span><span class="op" id="3036147">(</span><span class="ident" id="3036148">chunk</span>&nbsp;<span class="builtintype" id="3036154">string</span><span class="op" id="3036160">)</span>&nbsp;<span class="op" id="3036162">(</span><span class="ident" id="3036163">r</span>&nbsp;<span class="builtintype" id="3036165">rune</span><span class="op" id="3036169">,</span>&nbsp;<span class="ident" id="3036171">nchunk</span>&nbsp;<span class="builtintype" id="3036178">string</span><span class="op" id="3036184">,</span>&nbsp;<span class="ident" id="3036186">err</span>&nbsp;<span class="builtintype" id="3036190">error</span><span class="op" id="3036195">)</span>&nbsp;<span class="op" id="3036197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036200">if</span>&nbsp;<span class="builtinfunc" id="3036203">len</span><span class="op" id="3036206">(</span><span class="ident" id="3036207">chunk</span><span class="op" id="3036212">)</span>&nbsp;<span class="op" id="3036214">==</span>&nbsp;<span class="num" id="3036217">0</span>&nbsp;<span class="op" id="3036219">||</span>&nbsp;<span class="ident" id="3036222">chunk</span><span class="op" id="3036227">[</span><span class="num" id="3036228">0</span><span class="op" id="3036229">]</span>&nbsp;<span class="op" id="3036231">==</span>&nbsp;<span class="string" id="3036234">&#39;-&#39;</span>&nbsp;<span class="op" id="3036238">||</span>&nbsp;<span class="ident" id="3036241">chunk</span><span class="op" id="3036246">[</span><span class="num" id="3036247">0</span><span class="op" id="3036248">]</span>&nbsp;<span class="op" id="3036250">==</span>&nbsp;<span class="string" id="3036253">&#39;]&#39;</span>&nbsp;<span class="op" id="3036257">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036261">err</span>&nbsp;<span class="op" id="3036265">=</span>&nbsp;<span class="ident" id="3036267">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036283">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036294">if</span>&nbsp;<span class="ident" id="3036297">chunk</span><span class="op" id="3036302">[</span><span class="num" id="3036303">0</span><span class="op" id="3036304">]</span>&nbsp;<span class="op" id="3036306">==</span>&nbsp;<span class="string" id="3036309">&#39;\\&#39;</span>&nbsp;<span class="op" id="3036314">&amp;&amp;</span>&nbsp;<span class="ident" id="3036317">runtime</span><span class="op" id="3036324">.</span><span class="ident" id="3036325">GOOS</span>&nbsp;<span class="op" id="3036330">!=</span>&nbsp;<span class="string" id="3036333">&#34;windows&#34;</span>&nbsp;<span class="op" id="3036343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036347">chunk</span>&nbsp;<span class="op" id="3036353">=</span>&nbsp;<span class="ident" id="3036355">chunk</span><span class="op" id="3036360">[</span><span class="num" id="3036361">1</span><span class="op" id="3036362">:</span><span class="op" id="3036363">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036367">if</span>&nbsp;<span class="builtinfunc" id="3036370">len</span><span class="op" id="3036373">(</span><span class="ident" id="3036374">chunk</span><span class="op" id="3036379">)</span>&nbsp;<span class="op" id="3036381">==</span>&nbsp;<span class="num" id="3036384">0</span>&nbsp;<span class="op" id="3036386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036391">err</span>&nbsp;<span class="op" id="3036395">=</span>&nbsp;<span class="ident" id="3036397">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036414">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036426">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036429">r</span><span class="op" id="3036430">,</span>&nbsp;<span class="ident" id="3036432">n</span>&nbsp;<span class="op" id="3036434">:=</span>&nbsp;<span class="ident" id="3036437">utf8</span><span class="op" id="3036441">.</span><span class="ident" id="3036442">DecodeRuneInString</span><span class="op" id="3036460">(</span><span class="ident" id="3036461">chunk</span><span class="op" id="3036466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036469">if</span>&nbsp;<span class="ident" id="3036472">r</span>&nbsp;<span class="op" id="3036474">==</span>&nbsp;<span class="ident" id="3036477">utf8</span><span class="op" id="3036481">.</span><span class="ident" id="3036482">RuneError</span>&nbsp;<span class="op" id="3036492">&amp;&amp;</span>&nbsp;<span class="ident" id="3036495">n</span>&nbsp;<span class="op" id="3036497">==</span>&nbsp;<span class="num" id="3036500">1</span>&nbsp;<span class="op" id="3036502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036506">err</span>&nbsp;<span class="op" id="3036510">=</span>&nbsp;<span class="ident" id="3036512">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036530">nchunk</span>&nbsp;<span class="op" id="3036537">=</span>&nbsp;<span class="ident" id="3036539">chunk</span><span class="op" id="3036544">[</span><span class="ident" id="3036545">n</span><span class="op" id="3036546">:</span><span class="op" id="3036547">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036550">if</span>&nbsp;<span class="builtinfunc" id="3036553">len</span><span class="op" id="3036556">(</span><span class="ident" id="3036557">nchunk</span><span class="op" id="3036563">)</span>&nbsp;<span class="op" id="3036565">==</span>&nbsp;<span class="num" id="3036568">0</span>&nbsp;<span class="op" id="3036570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036574">err</span>&nbsp;<span class="op" id="3036578">=</span>&nbsp;<span class="ident" id="3036580">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036598">return</span><br>
<span class="lineno"></span><span class="op" id="3036605">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3036608">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3036671">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3036739">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3036807">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3036857">//</span><br>
<span class="lineno"></span><span class="comment" id="3036860">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3036935">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3037002">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3037019">func</span>&nbsp;<span class="ident" id="3037024">Glob</span><span class="op" id="3037028">(</span><span class="ident" id="3037029">pattern</span>&nbsp;<span class="builtintype" id="3037037">string</span><span class="op" id="3037043">)</span>&nbsp;<span class="op" id="3037045">(</span><span class="ident" id="3037046">matches</span>&nbsp;<span class="op" id="3037054">[</span><span class="op" id="3037055">]</span><span class="builtintype" id="3037056">string</span><span class="op" id="3037062">,</span>&nbsp;<span class="ident" id="3037064">err</span>&nbsp;<span class="builtintype" id="3037068">error</span><span class="op" id="3037073">)</span>&nbsp;<span class="op" id="3037075">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037078">if</span>&nbsp;<span class="op" id="3037081">!</span><span class="ident" id="3037082">hasMeta</span><span class="op" id="3037089">(</span><span class="ident" id="3037090">pattern</span><span class="op" id="3037097">)</span>&nbsp;<span class="op" id="3037099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037103">if</span>&nbsp;<span class="ident" id="3037106">_</span><span class="op" id="3037107">,</span>&nbsp;<span class="ident" id="3037109">err</span>&nbsp;<span class="op" id="3037113">=</span>&nbsp;<span class="ident" id="3037115">os</span><span class="op" id="3037117">.</span><span class="ident" id="3037118">Lstat</span><span class="op" id="3037123">(</span><span class="ident" id="3037124">pattern</span><span class="op" id="3037131">)</span><span class="op" id="3037132">;</span>&nbsp;<span class="ident" id="3037134">err</span>&nbsp;<span class="op" id="3037138">!=</span>&nbsp;<span class="ident" id="3037141">nil</span>&nbsp;<span class="op" id="3037145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037150">return</span>&nbsp;<span class="ident" id="3037157">nil</span><span class="op" id="3037160">,</span>&nbsp;<span class="ident" id="3037162">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037172">return</span>&nbsp;<span class="op" id="3037179">[</span><span class="op" id="3037180">]</span><span class="builtintype" id="3037181">string</span><span class="op" id="3037187">{</span><span class="ident" id="3037188">pattern</span><span class="op" id="3037195">}</span><span class="op" id="3037196">,</span>&nbsp;<span class="ident" id="3037198">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037207">dir</span><span class="op" id="3037210">,</span>&nbsp;<span class="ident" id="3037212">file</span>&nbsp;<span class="op" id="3037217">:=</span>&nbsp;<span class="ident" id="3037220">Split</span><span class="op" id="3037225">(</span><span class="ident" id="3037226">pattern</span><span class="op" id="3037233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037236">switch</span>&nbsp;<span class="ident" id="3037243">dir</span>&nbsp;<span class="op" id="3037247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037250">case</span>&nbsp;<span class="string" id="3037255">&#34;&#34;</span><span class="op" id="3037257">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037261">dir</span>&nbsp;<span class="op" id="3037265">=</span>&nbsp;<span class="string" id="3037267">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037272">case</span>&nbsp;<span class="builtintype" id="3037277">string</span><span class="op" id="3037283">(</span><span class="ident" id="3037284">Separator</span><span class="op" id="3037293">)</span><span class="op" id="3037294">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037298">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037310">default</span><span class="op" id="3037317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037321">dir</span>&nbsp;<span class="op" id="3037325">=</span>&nbsp;<span class="ident" id="3037327">dir</span><span class="op" id="3037330">[</span><span class="num" id="3037331">0</span>&nbsp;<span class="op" id="3037333">:</span>&nbsp;<span class="builtinfunc" id="3037335">len</span><span class="op" id="3037338">(</span><span class="ident" id="3037339">dir</span><span class="op" id="3037342">)</span><span class="op" id="3037343">-</span><span class="num" id="3037344">1</span><span class="op" id="3037345">]</span>&nbsp;<span class="comment" id="3037347">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037383">if</span>&nbsp;<span class="op" id="3037386">!</span><span class="ident" id="3037387">hasMeta</span><span class="op" id="3037394">(</span><span class="ident" id="3037395">dir</span><span class="op" id="3037398">)</span>&nbsp;<span class="op" id="3037400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037404">return</span>&nbsp;<span class="ident" id="3037411">glob</span><span class="op" id="3037415">(</span><span class="ident" id="3037416">dir</span><span class="op" id="3037419">,</span>&nbsp;<span class="ident" id="3037421">file</span><span class="op" id="3037425">,</span>&nbsp;<span class="ident" id="3037427">nil</span><span class="op" id="3037430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037433">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037437">var</span>&nbsp;<span class="ident" id="3037441">m</span>&nbsp;<span class="op" id="3037443">[</span><span class="op" id="3037444">]</span><span class="builtintype" id="3037445">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037453">m</span><span class="op" id="3037454">,</span>&nbsp;<span class="ident" id="3037456">err</span>&nbsp;<span class="op" id="3037460">=</span>&nbsp;<span class="ident" id="3037462">Glob</span><span class="op" id="3037466">(</span><span class="ident" id="3037467">dir</span><span class="op" id="3037470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037473">if</span>&nbsp;<span class="ident" id="3037476">err</span>&nbsp;<span class="op" id="3037480">!=</span>&nbsp;<span class="ident" id="3037483">nil</span>&nbsp;<span class="op" id="3037487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037491">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037502">for</span>&nbsp;<span class="ident" id="3037506">_</span><span class="op" id="3037507">,</span>&nbsp;<span class="ident" id="3037509">d</span>&nbsp;<span class="op" id="3037511">:=</span>&nbsp;<span class="keyword" id="3037514">range</span>&nbsp;<span class="ident" id="3037520">m</span>&nbsp;<span class="op" id="3037522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037526">matches</span><span class="op" id="3037533">,</span>&nbsp;<span class="ident" id="3037535">err</span>&nbsp;<span class="op" id="3037539">=</span>&nbsp;<span class="ident" id="3037541">glob</span><span class="op" id="3037545">(</span><span class="ident" id="3037546">d</span><span class="op" id="3037547">,</span>&nbsp;<span class="ident" id="3037549">file</span><span class="op" id="3037553">,</span>&nbsp;<span class="ident" id="3037555">matches</span><span class="op" id="3037562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037566">if</span>&nbsp;<span class="ident" id="3037569">err</span>&nbsp;<span class="op" id="3037573">!=</span>&nbsp;<span class="ident" id="3037576">nil</span>&nbsp;<span class="op" id="3037580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037585">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037600">return</span><br>
<span class="lineno"></span><span class="op" id="3037607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3037610">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3037675">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3037734">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3037794">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3037829">func</span>&nbsp;<span class="ident" id="3037834">glob</span><span class="op" id="3037838">(</span><span class="ident" id="3037839">dir</span><span class="op" id="3037842">,</span>&nbsp;<span class="ident" id="3037844">pattern</span>&nbsp;<span class="builtintype" id="3037852">string</span><span class="op" id="3037858">,</span>&nbsp;<span class="ident" id="3037860">matches</span>&nbsp;<span class="op" id="3037868">[</span><span class="op" id="3037869">]</span><span class="builtintype" id="3037870">string</span><span class="op" id="3037876">)</span>&nbsp;<span class="op" id="3037878">(</span><span class="ident" id="3037879">m</span>&nbsp;<span class="op" id="3037881">[</span><span class="op" id="3037882">]</span><span class="builtintype" id="3037883">string</span><span class="op" id="3037889">,</span>&nbsp;<span class="ident" id="3037891">e</span>&nbsp;<span class="builtintype" id="3037893">error</span><span class="op" id="3037898">)</span>&nbsp;<span class="op" id="3037900">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037903">m</span>&nbsp;<span class="op" id="3037905">=</span>&nbsp;<span class="ident" id="3037907">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037916">fi</span><span class="op" id="3037918">,</span>&nbsp;<span class="ident" id="3037920">err</span>&nbsp;<span class="op" id="3037924">:=</span>&nbsp;<span class="ident" id="3037927">os</span><span class="op" id="3037929">.</span><span class="ident" id="3037930">Stat</span><span class="op" id="3037934">(</span><span class="ident" id="3037935">dir</span><span class="op" id="3037938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037941">if</span>&nbsp;<span class="ident" id="3037944">err</span>&nbsp;<span class="op" id="3037948">!=</span>&nbsp;<span class="ident" id="3037951">nil</span>&nbsp;<span class="op" id="3037955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037959">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037967">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037970">if</span>&nbsp;<span class="op" id="3037973">!</span><span class="ident" id="3037974">fi</span><span class="op" id="3037976">.</span><span class="ident" id="3037977">IsDir</span><span class="op" id="3037982">(</span><span class="op" id="3037983">)</span>&nbsp;<span class="op" id="3037985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038000">d</span><span class="op" id="3038001">,</span>&nbsp;<span class="ident" id="3038003">err</span>&nbsp;<span class="op" id="3038007">:=</span>&nbsp;<span class="ident" id="3038010">os</span><span class="op" id="3038012">.</span><span class="ident" id="3038013">Open</span><span class="op" id="3038017">(</span><span class="ident" id="3038018">dir</span><span class="op" id="3038021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038024">if</span>&nbsp;<span class="ident" id="3038027">err</span>&nbsp;<span class="op" id="3038031">!=</span>&nbsp;<span class="ident" id="3038034">nil</span>&nbsp;<span class="op" id="3038038">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038053">defer</span>&nbsp;<span class="ident" id="3038059">d</span><span class="op" id="3038060">.</span><span class="ident" id="3038061">Close</span><span class="op" id="3038066">(</span><span class="op" id="3038067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038071">names</span><span class="op" id="3038076">,</span>&nbsp;<span class="ident" id="3038078">_</span>&nbsp;<span class="op" id="3038080">:=</span>&nbsp;<span class="ident" id="3038083">d</span><span class="op" id="3038084">.</span><span class="ident" id="3038085">Readdirnames</span><span class="op" id="3038097">(</span><span class="op" id="3038098">-</span><span class="num" id="3038099">1</span><span class="op" id="3038100">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038103">sort</span><span class="op" id="3038107">.</span><span class="ident" id="3038108">Strings</span><span class="op" id="3038115">(</span><span class="ident" id="3038116">names</span><span class="op" id="3038121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038125">for</span>&nbsp;<span class="ident" id="3038129">_</span><span class="op" id="3038130">,</span>&nbsp;<span class="ident" id="3038132">n</span>&nbsp;<span class="op" id="3038134">:=</span>&nbsp;<span class="keyword" id="3038137">range</span>&nbsp;<span class="ident" id="3038143">names</span>&nbsp;<span class="op" id="3038149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038153">matched</span><span class="op" id="3038160">,</span>&nbsp;<span class="ident" id="3038162">err</span>&nbsp;<span class="op" id="3038166">:=</span>&nbsp;<span class="ident" id="3038169">Match</span><span class="op" id="3038174">(</span><span class="ident" id="3038175">pattern</span><span class="op" id="3038182">,</span>&nbsp;<span class="ident" id="3038184">n</span><span class="op" id="3038185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038189">if</span>&nbsp;<span class="ident" id="3038192">err</span>&nbsp;<span class="op" id="3038196">!=</span>&nbsp;<span class="ident" id="3038199">nil</span>&nbsp;<span class="op" id="3038203">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038208">return</span>&nbsp;<span class="ident" id="3038215">m</span><span class="op" id="3038216">,</span>&nbsp;<span class="ident" id="3038218">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038228">if</span>&nbsp;<span class="ident" id="3038231">matched</span>&nbsp;<span class="op" id="3038239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038244">m</span>&nbsp;<span class="op" id="3038246">=</span>&nbsp;<span class="builtinfunc" id="3038248">append</span><span class="op" id="3038254">(</span><span class="ident" id="3038255">m</span><span class="op" id="3038256">,</span>&nbsp;<span class="ident" id="3038258">Join</span><span class="op" id="3038262">(</span><span class="ident" id="3038263">dir</span><span class="op" id="3038266">,</span>&nbsp;<span class="ident" id="3038268">n</span><span class="op" id="3038269">)</span><span class="op" id="3038270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038274">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038280">return</span><br>
<span class="lineno"></span><span class="op" id="3038287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3038290">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3038359">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3038383">func</span>&nbsp;<span class="ident" id="3038388">hasMeta</span><span class="op" id="3038395">(</span><span class="ident" id="3038396">path</span>&nbsp;<span class="builtintype" id="3038401">string</span><span class="op" id="3038407">)</span>&nbsp;<span class="builtintype" id="3038409">bool</span>&nbsp;<span class="op" id="3038414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038417">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038482">return</span>&nbsp;<span class="ident" id="3038489">strings</span><span class="op" id="3038496">.</span><span class="ident" id="3038497">IndexAny</span><span class="op" id="3038505">(</span><span class="ident" id="3038506">path</span><span class="op" id="3038510">,</span>&nbsp;<span class="string" id="3038512">&#34;*?[&#34;</span><span class="op" id="3038517">)</span>&nbsp;<span class="op" id="3038519">&gt;=</span>&nbsp;<span class="num" id="3038522">0</span><br>
<span class="lineno"></span><span class="op" id="3038524">}</span>
</div>
</body>
</html>
