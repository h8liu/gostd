<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3612733">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3612788">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3612842">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3612893">package</span>&nbsp;<span class="ident" id="3612901">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3612906">import</span>&nbsp;<span class="op" id="3612913">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3612916">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3612928">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3612936">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3612946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3612949">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="3613026">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="3613111">func</span>&nbsp;<span class="ident" id="3613116">SortImports</span><span class="op" id="3613127">(</span><span class="ident" id="3613128">fset</span>&nbsp;<span class="op" id="3613133">*</span><span class="ident" id="3613134">token</span><span class="op" id="3613139">.</span><span class="ident" id="3613140">FileSet</span><span class="op" id="3613147">,</span>&nbsp;<span class="ident" id="3613149">f</span>&nbsp;<span class="op" id="3613151">*</span><span class="ident" id="3613152">File</span><span class="op" id="3613156">)</span>&nbsp;<span class="op" id="3613158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613161">for</span>&nbsp;<span class="ident" id="3613165">_</span><span class="op" id="3613166">,</span>&nbsp;<span class="ident" id="3613168">d</span>&nbsp;<span class="op" id="3613170">:=</span>&nbsp;<span class="keyword" id="3613173">range</span>&nbsp;<span class="ident" id="3613179">f</span><span class="op" id="3613180">.</span><span class="ident" id="3613181">Decls</span>&nbsp;<span class="op" id="3613187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613191">d</span><span class="op" id="3613192">,</span>&nbsp;<span class="ident" id="3613194">ok</span>&nbsp;<span class="op" id="3613197">:=</span>&nbsp;<span class="ident" id="3613200">d</span><span class="op" id="3613201">.</span><span class="op" id="3613202">(</span><span class="op" id="3613203">*</span><span class="ident" id="3613204">GenDecl</span><span class="op" id="3613211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613215">if</span>&nbsp;<span class="op" id="3613218">!</span><span class="ident" id="3613219">ok</span>&nbsp;<span class="op" id="3613222">||</span>&nbsp;<span class="ident" id="3613225">d</span><span class="op" id="3613226">.</span><span class="ident" id="3613227">Tok</span>&nbsp;<span class="op" id="3613231">!=</span>&nbsp;<span class="ident" id="3613234">token</span><span class="op" id="3613239">.</span><span class="ident" id="3613240">IMPORT</span>&nbsp;<span class="op" id="3613247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613252">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613300">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613332">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613345">if</span>&nbsp;<span class="op" id="3613348">!</span><span class="ident" id="3613349">d</span><span class="op" id="3613350">.</span><span class="ident" id="3613351">Lparen</span><span class="op" id="3613357">.</span><span class="ident" id="3613358">IsValid</span><span class="op" id="3613365">(</span><span class="op" id="3613366">)</span>&nbsp;<span class="op" id="3613368">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613373">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613411">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613427">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613485">i</span>&nbsp;<span class="op" id="3613487">:=</span>&nbsp;<span class="num" id="3613490">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613494">specs</span>&nbsp;<span class="op" id="3613500">:=</span>&nbsp;<span class="ident" id="3613503">d</span><span class="op" id="3613504">.</span><span class="ident" id="3613505">Specs</span><span class="op" id="3613510">[</span><span class="op" id="3613511">:</span><span class="num" id="3613512">0</span><span class="op" id="3613513">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613517">for</span>&nbsp;<span class="ident" id="3613521">j</span><span class="op" id="3613522">,</span>&nbsp;<span class="ident" id="3613524">s</span>&nbsp;<span class="op" id="3613526">:=</span>&nbsp;<span class="keyword" id="3613529">range</span>&nbsp;<span class="ident" id="3613535">d</span><span class="op" id="3613536">.</span><span class="ident" id="3613537">Specs</span>&nbsp;<span class="op" id="3613543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613548">if</span>&nbsp;<span class="ident" id="3613551">j</span>&nbsp;<span class="op" id="3613553">&gt;</span>&nbsp;<span class="ident" id="3613555">i</span>&nbsp;<span class="op" id="3613557">&amp;&amp;</span>&nbsp;<span class="ident" id="3613560">fset</span><span class="op" id="3613564">.</span><span class="ident" id="3613565">Position</span><span class="op" id="3613573">(</span><span class="ident" id="3613574">s</span><span class="op" id="3613575">.</span><span class="ident" id="3613576">Pos</span><span class="op" id="3613579">(</span><span class="op" id="3613580">)</span><span class="op" id="3613581">)</span><span class="op" id="3613582">.</span><span class="ident" id="3613583">Line</span>&nbsp;<span class="op" id="3613588">&gt;</span>&nbsp;<span class="num" id="3613590">1</span><span class="op" id="3613591">+</span><span class="ident" id="3613592">fset</span><span class="op" id="3613596">.</span><span class="ident" id="3613597">Position</span><span class="op" id="3613605">(</span><span class="ident" id="3613606">d</span><span class="op" id="3613607">.</span><span class="ident" id="3613608">Specs</span><span class="op" id="3613613">[</span><span class="ident" id="3613614">j</span><span class="op" id="3613615">-</span><span class="num" id="3613616">1</span><span class="op" id="3613617">]</span><span class="op" id="3613618">.</span><span class="ident" id="3613619">End</span><span class="op" id="3613622">(</span><span class="op" id="3613623">)</span><span class="op" id="3613624">)</span><span class="op" id="3613625">.</span><span class="ident" id="3613626">Line</span>&nbsp;<span class="op" id="3613631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613637">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613679">specs</span>&nbsp;<span class="op" id="3613685">=</span>&nbsp;<span class="builtinfunc" id="3613687">append</span><span class="op" id="3613693">(</span><span class="ident" id="3613694">specs</span><span class="op" id="3613699">,</span>&nbsp;<span class="ident" id="3613701">sortSpecs</span><span class="op" id="3613710">(</span><span class="ident" id="3613711">fset</span><span class="op" id="3613715">,</span>&nbsp;<span class="ident" id="3613717">f</span><span class="op" id="3613718">,</span>&nbsp;<span class="ident" id="3613720">d</span><span class="op" id="3613721">.</span><span class="ident" id="3613722">Specs</span><span class="op" id="3613727">[</span><span class="ident" id="3613728">i</span><span class="op" id="3613729">:</span><span class="ident" id="3613730">j</span><span class="op" id="3613731">]</span><span class="op" id="3613732">)</span><span class="op" id="3613733">...</span><span class="op" id="3613736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613742">i</span>&nbsp;<span class="op" id="3613744">=</span>&nbsp;<span class="ident" id="3613746">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613759">specs</span>&nbsp;<span class="op" id="3613765">=</span>&nbsp;<span class="builtinfunc" id="3613767">append</span><span class="op" id="3613773">(</span><span class="ident" id="3613774">specs</span><span class="op" id="3613779">,</span>&nbsp;<span class="ident" id="3613781">sortSpecs</span><span class="op" id="3613790">(</span><span class="ident" id="3613791">fset</span><span class="op" id="3613795">,</span>&nbsp;<span class="ident" id="3613797">f</span><span class="op" id="3613798">,</span>&nbsp;<span class="ident" id="3613800">d</span><span class="op" id="3613801">.</span><span class="ident" id="3613802">Specs</span><span class="op" id="3613807">[</span><span class="ident" id="3613808">i</span><span class="op" id="3613809">:</span><span class="op" id="3613810">]</span><span class="op" id="3613811">)</span><span class="op" id="3613812">...</span><span class="op" id="3613815">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613819">d</span><span class="op" id="3613820">.</span><span class="ident" id="3613821">Specs</span>&nbsp;<span class="op" id="3613827">=</span>&nbsp;<span class="ident" id="3613829">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613838">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613909">if</span>&nbsp;<span class="builtinfunc" id="3613912">len</span><span class="op" id="3613915">(</span><span class="ident" id="3613916">d</span><span class="op" id="3613917">.</span><span class="ident" id="3613918">Specs</span><span class="op" id="3613923">)</span>&nbsp;<span class="op" id="3613925">&gt;</span>&nbsp;<span class="num" id="3613927">0</span>&nbsp;<span class="op" id="3613929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613934">lastSpec</span>&nbsp;<span class="op" id="3613943">:=</span>&nbsp;<span class="ident" id="3613946">d</span><span class="op" id="3613947">.</span><span class="ident" id="3613948">Specs</span><span class="op" id="3613953">[</span><span class="builtinfunc" id="3613954">len</span><span class="op" id="3613957">(</span><span class="ident" id="3613958">d</span><span class="op" id="3613959">.</span><span class="ident" id="3613960">Specs</span><span class="op" id="3613965">)</span><span class="op" id="3613966">-</span><span class="num" id="3613967">1</span><span class="op" id="3613968">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613973">lastLine</span>&nbsp;<span class="op" id="3613982">:=</span>&nbsp;<span class="ident" id="3613985">fset</span><span class="op" id="3613989">.</span><span class="ident" id="3613990">Position</span><span class="op" id="3613998">(</span><span class="ident" id="3613999">lastSpec</span><span class="op" id="3614007">.</span><span class="ident" id="3614008">Pos</span><span class="op" id="3614011">(</span><span class="op" id="3614012">)</span><span class="op" id="3614013">)</span><span class="op" id="3614014">.</span><span class="ident" id="3614015">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614023">if</span>&nbsp;<span class="ident" id="3614026">rParenLine</span>&nbsp;<span class="op" id="3614037">:=</span>&nbsp;<span class="ident" id="3614040">fset</span><span class="op" id="3614044">.</span><span class="ident" id="3614045">Position</span><span class="op" id="3614053">(</span><span class="ident" id="3614054">d</span><span class="op" id="3614055">.</span><span class="ident" id="3614056">Rparen</span><span class="op" id="3614062">)</span><span class="op" id="3614063">.</span><span class="ident" id="3614064">Line</span><span class="op" id="3614068">;</span>&nbsp;<span class="ident" id="3614070">rParenLine</span>&nbsp;<span class="op" id="3614081">&gt;</span>&nbsp;<span class="ident" id="3614083">lastLine</span><span class="op" id="3614091">+</span><span class="num" id="3614092">1</span>&nbsp;<span class="op" id="3614094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614100">fset</span><span class="op" id="3614104">.</span><span class="ident" id="3614105">File</span><span class="op" id="3614109">(</span><span class="ident" id="3614110">d</span><span class="op" id="3614111">.</span><span class="ident" id="3614112">Rparen</span><span class="op" id="3614118">)</span><span class="op" id="3614119">.</span><span class="ident" id="3614120">MergeLine</span><span class="op" id="3614129">(</span><span class="ident" id="3614130">rParenLine</span>&nbsp;<span class="op" id="3614141">-</span>&nbsp;<span class="num" id="3614143">1</span><span class="op" id="3614144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614153">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614156">}</span><br>
<span class="lineno"></span><span class="op" id="3614158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3614161">func</span>&nbsp;<span class="ident" id="3614166">importPath</span><span class="op" id="3614176">(</span><span class="ident" id="3614177">s</span>&nbsp;<span class="ident" id="3614179">Spec</span><span class="op" id="3614183">)</span>&nbsp;<span class="builtintype" id="3614185">string</span>&nbsp;<span class="op" id="3614192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614195">t</span><span class="op" id="3614196">,</span>&nbsp;<span class="ident" id="3614198">err</span>&nbsp;<span class="op" id="3614202">:=</span>&nbsp;<span class="ident" id="3614205">strconv</span><span class="op" id="3614212">.</span><span class="ident" id="3614213">Unquote</span><span class="op" id="3614220">(</span><span class="ident" id="3614221">s</span><span class="op" id="3614222">.</span><span class="op" id="3614223">(</span><span class="op" id="3614224">*</span><span class="ident" id="3614225">ImportSpec</span><span class="op" id="3614235">)</span><span class="op" id="3614236">.</span><span class="ident" id="3614237">Path</span><span class="op" id="3614241">.</span><span class="ident" id="3614242">Value</span><span class="op" id="3614247">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614250">if</span>&nbsp;<span class="ident" id="3614253">err</span>&nbsp;<span class="op" id="3614257">==</span>&nbsp;<span class="ident" id="3614260">nil</span>&nbsp;<span class="op" id="3614264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614268">return</span>&nbsp;<span class="ident" id="3614275">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614281">return</span>&nbsp;<span class="string" id="3614288">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3614291">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3614294">func</span>&nbsp;<span class="ident" id="3614299">importName</span><span class="op" id="3614309">(</span><span class="ident" id="3614310">s</span>&nbsp;<span class="ident" id="3614312">Spec</span><span class="op" id="3614316">)</span>&nbsp;<span class="builtintype" id="3614318">string</span>&nbsp;<span class="op" id="3614325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614328">n</span>&nbsp;<span class="op" id="3614330">:=</span>&nbsp;<span class="ident" id="3614333">s</span><span class="op" id="3614334">.</span><span class="op" id="3614335">(</span><span class="op" id="3614336">*</span><span class="ident" id="3614337">ImportSpec</span><span class="op" id="3614347">)</span><span class="op" id="3614348">.</span><span class="ident" id="3614349">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614355">if</span>&nbsp;<span class="ident" id="3614358">n</span>&nbsp;<span class="op" id="3614360">==</span>&nbsp;<span class="ident" id="3614363">nil</span>&nbsp;<span class="op" id="3614367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614371">return</span>&nbsp;<span class="string" id="3614378">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614385">return</span>&nbsp;<span class="ident" id="3614392">n</span><span class="op" id="3614393">.</span><span class="ident" id="3614394">Name</span><br>
<span class="lineno"></span><span class="op" id="3614399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3614402">func</span>&nbsp;<span class="ident" id="3614407">importComment</span><span class="op" id="3614420">(</span><span class="ident" id="3614421">s</span>&nbsp;<span class="ident" id="3614423">Spec</span><span class="op" id="3614427">)</span>&nbsp;<span class="builtintype" id="3614429">string</span>&nbsp;<span class="op" id="3614436">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614439">c</span>&nbsp;<span class="op" id="3614441">:=</span>&nbsp;<span class="ident" id="3614444">s</span><span class="op" id="3614445">.</span><span class="op" id="3614446">(</span><span class="op" id="3614447">*</span><span class="ident" id="3614448">ImportSpec</span><span class="op" id="3614458">)</span><span class="op" id="3614459">.</span><span class="ident" id="3614460">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614469">if</span>&nbsp;<span class="ident" id="3614472">c</span>&nbsp;<span class="op" id="3614474">==</span>&nbsp;<span class="ident" id="3614477">nil</span>&nbsp;<span class="op" id="3614481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614485">return</span>&nbsp;<span class="string" id="3614492">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614499">return</span>&nbsp;<span class="ident" id="3614506">c</span><span class="op" id="3614507">.</span><span class="ident" id="3614508">Text</span><span class="op" id="3614512">(</span><span class="op" id="3614513">)</span><br>
<span class="lineno">75</span><span class="op" id="3614515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3614518">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3614588">func</span>&nbsp;<span class="ident" id="3614593">collapse</span><span class="op" id="3614601">(</span><span class="ident" id="3614602">prev</span><span class="op" id="3614606">,</span>&nbsp;<span class="ident" id="3614608">next</span>&nbsp;<span class="ident" id="3614613">Spec</span><span class="op" id="3614617">)</span>&nbsp;<span class="builtintype" id="3614619">bool</span>&nbsp;<span class="op" id="3614624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614627">if</span>&nbsp;<span class="ident" id="3614630">importPath</span><span class="op" id="3614640">(</span><span class="ident" id="3614641">next</span><span class="op" id="3614645">)</span>&nbsp;<span class="op" id="3614647">!=</span>&nbsp;<span class="ident" id="3614650">importPath</span><span class="op" id="3614660">(</span><span class="ident" id="3614661">prev</span><span class="op" id="3614665">)</span>&nbsp;<span class="op" id="3614667">||</span>&nbsp;<span class="ident" id="3614670">importName</span><span class="op" id="3614680">(</span><span class="ident" id="3614681">next</span><span class="op" id="3614685">)</span>&nbsp;<span class="op" id="3614687">!=</span>&nbsp;<span class="ident" id="3614690">importName</span><span class="op" id="3614700">(</span><span class="ident" id="3614701">prev</span><span class="op" id="3614705">)</span>&nbsp;<span class="op" id="3614707">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614711">return</span>&nbsp;<span class="builtintype" id="3614718">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614728">return</span>&nbsp;<span class="ident" id="3614735">prev</span><span class="op" id="3614739">.</span><span class="op" id="3614740">(</span><span class="op" id="3614741">*</span><span class="ident" id="3614742">ImportSpec</span><span class="op" id="3614752">)</span><span class="op" id="3614753">.</span><span class="ident" id="3614754">Comment</span>&nbsp;<span class="op" id="3614762">==</span>&nbsp;<span class="ident" id="3614765">nil</span><br>
<span class="lineno"></span><span class="op" id="3614769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3614772">type</span>&nbsp;<span class="ident" id="3614777">posSpan</span>&nbsp;<span class="keyword" id="3614785">struct</span>&nbsp;<span class="op" id="3614792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614795">Start</span>&nbsp;<span class="ident" id="3614801">token</span><span class="op" id="3614806">.</span><span class="ident" id="3614807">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614812">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3614818">token</span><span class="op" id="3614823">.</span><span class="ident" id="3614824">Pos</span><br>
<span class="lineno"></span><span class="op" id="3614828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3614831">func</span>&nbsp;<span class="ident" id="3614836">sortSpecs</span><span class="op" id="3614845">(</span><span class="ident" id="3614846">fset</span>&nbsp;<span class="op" id="3614851">*</span><span class="ident" id="3614852">token</span><span class="op" id="3614857">.</span><span class="ident" id="3614858">FileSet</span><span class="op" id="3614865">,</span>&nbsp;<span class="ident" id="3614867">f</span>&nbsp;<span class="op" id="3614869">*</span><span class="ident" id="3614870">File</span><span class="op" id="3614874">,</span>&nbsp;<span class="ident" id="3614876">specs</span>&nbsp;<span class="op" id="3614882">[</span><span class="op" id="3614883">]</span><span class="ident" id="3614884">Spec</span><span class="op" id="3614888">)</span>&nbsp;<span class="op" id="3614890">[</span><span class="op" id="3614891">]</span><span class="ident" id="3614892">Spec</span>&nbsp;<span class="op" id="3614897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614900">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614963">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615008">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615059">if</span>&nbsp;<span class="builtinfunc" id="3615062">len</span><span class="op" id="3615065">(</span><span class="ident" id="3615066">specs</span><span class="op" id="3615071">)</span>&nbsp;<span class="op" id="3615073">&lt;=</span>&nbsp;<span class="num" id="3615076">1</span>&nbsp;<span class="op" id="3615078">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615082">return</span>&nbsp;<span class="ident" id="3615089">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615100">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615132">pos</span>&nbsp;<span class="op" id="3615136">:=</span>&nbsp;<span class="builtinfunc" id="3615139">make</span><span class="op" id="3615143">(</span><span class="op" id="3615144">[</span><span class="op" id="3615145">]</span><span class="ident" id="3615146">posSpan</span><span class="op" id="3615153">,</span>&nbsp;<span class="builtinfunc" id="3615155">len</span><span class="op" id="3615158">(</span><span class="ident" id="3615159">specs</span><span class="op" id="3615164">)</span><span class="op" id="3615165">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615168">for</span>&nbsp;<span class="ident" id="3615172">i</span><span class="op" id="3615173">,</span>&nbsp;<span class="ident" id="3615175">s</span>&nbsp;<span class="op" id="3615177">:=</span>&nbsp;<span class="keyword" id="3615180">range</span>&nbsp;<span class="ident" id="3615186">specs</span>&nbsp;<span class="op" id="3615192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615196">pos</span><span class="op" id="3615199">[</span><span class="ident" id="3615200">i</span><span class="op" id="3615201">]</span>&nbsp;<span class="op" id="3615203">=</span>&nbsp;<span class="ident" id="3615205">posSpan</span><span class="op" id="3615212">{</span><span class="ident" id="3615213">s</span><span class="op" id="3615214">.</span><span class="ident" id="3615215">Pos</span><span class="op" id="3615218">(</span><span class="op" id="3615219">)</span><span class="op" id="3615220">,</span>&nbsp;<span class="ident" id="3615222">s</span><span class="op" id="3615223">.</span><span class="ident" id="3615224">End</span><span class="op" id="3615227">(</span><span class="op" id="3615228">)</span><span class="op" id="3615229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615236">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615273">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615333">lastLine</span>&nbsp;<span class="op" id="3615342">:=</span>&nbsp;<span class="ident" id="3615345">fset</span><span class="op" id="3615349">.</span><span class="ident" id="3615350">Position</span><span class="op" id="3615358">(</span><span class="ident" id="3615359">pos</span><span class="op" id="3615362">[</span><span class="builtinfunc" id="3615363">len</span><span class="op" id="3615366">(</span><span class="ident" id="3615367">pos</span><span class="op" id="3615370">)</span><span class="op" id="3615371">-</span><span class="num" id="3615372">1</span><span class="op" id="3615373">]</span><span class="op" id="3615374">.</span><span class="ident" id="3615375">End</span><span class="op" id="3615378">)</span><span class="op" id="3615379">.</span><span class="ident" id="3615380">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615386">cstart</span>&nbsp;<span class="op" id="3615393">:=</span>&nbsp;<span class="builtinfunc" id="3615396">len</span><span class="op" id="3615399">(</span><span class="ident" id="3615400">f</span><span class="op" id="3615401">.</span><span class="ident" id="3615402">Comments</span><span class="op" id="3615410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615413">cend</span>&nbsp;<span class="op" id="3615418">:=</span>&nbsp;<span class="builtinfunc" id="3615421">len</span><span class="op" id="3615424">(</span><span class="ident" id="3615425">f</span><span class="op" id="3615426">.</span><span class="ident" id="3615427">Comments</span><span class="op" id="3615435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615438">for</span>&nbsp;<span class="ident" id="3615442">i</span><span class="op" id="3615443">,</span>&nbsp;<span class="ident" id="3615445">g</span>&nbsp;<span class="op" id="3615447">:=</span>&nbsp;<span class="keyword" id="3615450">range</span>&nbsp;<span class="ident" id="3615456">f</span><span class="op" id="3615457">.</span><span class="ident" id="3615458">Comments</span>&nbsp;<span class="op" id="3615467">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615471">if</span>&nbsp;<span class="ident" id="3615474">g</span><span class="op" id="3615475">.</span><span class="ident" id="3615476">Pos</span><span class="op" id="3615479">(</span><span class="op" id="3615480">)</span>&nbsp;<span class="op" id="3615482">&lt;</span>&nbsp;<span class="ident" id="3615484">pos</span><span class="op" id="3615487">[</span><span class="num" id="3615488">0</span><span class="op" id="3615489">]</span><span class="op" id="3615490">.</span><span class="ident" id="3615491">Start</span>&nbsp;<span class="op" id="3615497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615517">if</span>&nbsp;<span class="ident" id="3615520">i</span>&nbsp;<span class="op" id="3615522">&lt;</span>&nbsp;<span class="ident" id="3615524">cstart</span>&nbsp;<span class="op" id="3615531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615536">cstart</span>&nbsp;<span class="op" id="3615543">=</span>&nbsp;<span class="ident" id="3615545">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615553">if</span>&nbsp;<span class="ident" id="3615556">fset</span><span class="op" id="3615560">.</span><span class="ident" id="3615561">Position</span><span class="op" id="3615569">(</span><span class="ident" id="3615570">g</span><span class="op" id="3615571">.</span><span class="ident" id="3615572">End</span><span class="op" id="3615575">(</span><span class="op" id="3615576">)</span><span class="op" id="3615577">)</span><span class="op" id="3615578">.</span><span class="ident" id="3615579">Line</span>&nbsp;<span class="op" id="3615584">&gt;</span>&nbsp;<span class="ident" id="3615586">lastLine</span>&nbsp;<span class="op" id="3615595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615600">cend</span>&nbsp;<span class="op" id="3615605">=</span>&nbsp;<span class="ident" id="3615607">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615612">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615620">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615626">comments</span>&nbsp;<span class="op" id="3615635">:=</span>&nbsp;<span class="ident" id="3615638">f</span><span class="op" id="3615639">.</span><span class="ident" id="3615640">Comments</span><span class="op" id="3615648">[</span><span class="ident" id="3615649">cstart</span><span class="op" id="3615655">:</span><span class="ident" id="3615656">cend</span><span class="op" id="3615660">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615664">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615721">importComment</span>&nbsp;<span class="op" id="3615735">:=</span>&nbsp;<span class="keyword" id="3615738">map</span><span class="op" id="3615741">[</span><span class="op" id="3615742">*</span><span class="ident" id="3615743">ImportSpec</span><span class="op" id="3615753">]</span><span class="op" id="3615754">[</span><span class="op" id="3615755">]</span><span class="op" id="3615756">*</span><span class="ident" id="3615757">CommentGroup</span><span class="op" id="3615769">{</span><span class="op" id="3615770">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615773">specIndex</span>&nbsp;<span class="op" id="3615783">:=</span>&nbsp;<span class="num" id="3615786">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615789">for</span>&nbsp;<span class="ident" id="3615793">_</span><span class="op" id="3615794">,</span>&nbsp;<span class="ident" id="3615796">g</span>&nbsp;<span class="op" id="3615798">:=</span>&nbsp;<span class="keyword" id="3615801">range</span>&nbsp;<span class="ident" id="3615807">comments</span>&nbsp;<span class="op" id="3615816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615820">for</span>&nbsp;<span class="ident" id="3615824">specIndex</span><span class="op" id="3615833">+</span><span class="num" id="3615834">1</span>&nbsp;<span class="op" id="3615836">&lt;</span>&nbsp;<span class="builtinfunc" id="3615838">len</span><span class="op" id="3615841">(</span><span class="ident" id="3615842">specs</span><span class="op" id="3615847">)</span>&nbsp;<span class="op" id="3615849">&amp;&amp;</span>&nbsp;<span class="ident" id="3615852">pos</span><span class="op" id="3615855">[</span><span class="ident" id="3615856">specIndex</span><span class="op" id="3615865">+</span><span class="num" id="3615866">1</span><span class="op" id="3615867">]</span><span class="op" id="3615868">.</span><span class="ident" id="3615869">Start</span>&nbsp;<span class="op" id="3615875">&lt;=</span>&nbsp;<span class="ident" id="3615878">g</span><span class="op" id="3615879">.</span><span class="ident" id="3615880">Pos</span><span class="op" id="3615883">(</span><span class="op" id="3615884">)</span>&nbsp;<span class="op" id="3615886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615891">specIndex</span><span class="op" id="3615900">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615905">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615909">s</span>&nbsp;<span class="op" id="3615911">:=</span>&nbsp;<span class="ident" id="3615914">specs</span><span class="op" id="3615919">[</span><span class="ident" id="3615920">specIndex</span><span class="op" id="3615929">]</span><span class="op" id="3615930">.</span><span class="op" id="3615931">(</span><span class="op" id="3615932">*</span><span class="ident" id="3615933">ImportSpec</span><span class="op" id="3615943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615947">importComment</span><span class="op" id="3615960">[</span><span class="ident" id="3615961">s</span><span class="op" id="3615962">]</span>&nbsp;<span class="op" id="3615964">=</span>&nbsp;<span class="builtinfunc" id="3615966">append</span><span class="op" id="3615972">(</span><span class="ident" id="3615973">importComment</span><span class="op" id="3615986">[</span><span class="ident" id="3615987">s</span><span class="op" id="3615988">]</span><span class="op" id="3615989">,</span>&nbsp;<span class="ident" id="3615991">g</span><span class="op" id="3615992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615999">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616041">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616097">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616163">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616218">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616257">sort</span><span class="op" id="3616261">.</span><span class="ident" id="3616262">Sort</span><span class="op" id="3616266">(</span><span class="ident" id="3616267">byImportSpec</span><span class="op" id="3616279">(</span><span class="ident" id="3616280">specs</span><span class="op" id="3616285">)</span><span class="op" id="3616286">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616290">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616345">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616376">deduped</span>&nbsp;<span class="op" id="3616384">:=</span>&nbsp;<span class="ident" id="3616387">specs</span><span class="op" id="3616392">[</span><span class="op" id="3616393">:</span><span class="num" id="3616394">0</span><span class="op" id="3616395">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616398">for</span>&nbsp;<span class="ident" id="3616402">i</span><span class="op" id="3616403">,</span>&nbsp;<span class="ident" id="3616405">s</span>&nbsp;<span class="op" id="3616407">:=</span>&nbsp;<span class="keyword" id="3616410">range</span>&nbsp;<span class="ident" id="3616416">specs</span>&nbsp;<span class="op" id="3616422">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616426">if</span>&nbsp;<span class="ident" id="3616429">i</span>&nbsp;<span class="op" id="3616431">==</span>&nbsp;<span class="builtinfunc" id="3616434">len</span><span class="op" id="3616437">(</span><span class="ident" id="3616438">specs</span><span class="op" id="3616443">)</span><span class="op" id="3616444">-</span><span class="num" id="3616445">1</span>&nbsp;<span class="op" id="3616447">||</span>&nbsp;<span class="op" id="3616450">!</span><span class="ident" id="3616451">collapse</span><span class="op" id="3616459">(</span><span class="ident" id="3616460">s</span><span class="op" id="3616461">,</span>&nbsp;<span class="ident" id="3616463">specs</span><span class="op" id="3616468">[</span><span class="ident" id="3616469">i</span><span class="op" id="3616470">+</span><span class="num" id="3616471">1</span><span class="op" id="3616472">]</span><span class="op" id="3616473">)</span>&nbsp;<span class="op" id="3616475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616480">deduped</span>&nbsp;<span class="op" id="3616488">=</span>&nbsp;<span class="builtinfunc" id="3616490">append</span><span class="op" id="3616496">(</span><span class="ident" id="3616497">deduped</span><span class="op" id="3616504">,</span>&nbsp;<span class="ident" id="3616506">s</span><span class="op" id="3616507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616511">}</span>&nbsp;<span class="keyword" id="3616513">else</span>&nbsp;<span class="op" id="3616518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616523">p</span>&nbsp;<span class="op" id="3616525">:=</span>&nbsp;<span class="ident" id="3616528">s</span><span class="op" id="3616529">.</span><span class="ident" id="3616530">Pos</span><span class="op" id="3616533">(</span><span class="op" id="3616534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616539">fset</span><span class="op" id="3616543">.</span><span class="ident" id="3616544">File</span><span class="op" id="3616548">(</span><span class="ident" id="3616549">p</span><span class="op" id="3616550">)</span><span class="op" id="3616551">.</span><span class="ident" id="3616552">MergeLine</span><span class="op" id="3616561">(</span><span class="ident" id="3616562">fset</span><span class="op" id="3616566">.</span><span class="ident" id="3616567">Position</span><span class="op" id="3616575">(</span><span class="ident" id="3616576">p</span><span class="op" id="3616577">)</span><span class="op" id="3616578">.</span><span class="ident" id="3616579">Line</span><span class="op" id="3616583">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616593">specs</span>&nbsp;<span class="op" id="3616599">=</span>&nbsp;<span class="ident" id="3616601">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616611">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616640">for</span>&nbsp;<span class="ident" id="3616644">i</span><span class="op" id="3616645">,</span>&nbsp;<span class="ident" id="3616647">s</span>&nbsp;<span class="op" id="3616649">:=</span>&nbsp;<span class="keyword" id="3616652">range</span>&nbsp;<span class="ident" id="3616658">specs</span>&nbsp;<span class="op" id="3616664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616668">s</span>&nbsp;<span class="op" id="3616670">:=</span>&nbsp;<span class="ident" id="3616673">s</span><span class="op" id="3616674">.</span><span class="op" id="3616675">(</span><span class="op" id="3616676">*</span><span class="ident" id="3616677">ImportSpec</span><span class="op" id="3616687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616691">if</span>&nbsp;<span class="ident" id="3616694">s</span><span class="op" id="3616695">.</span><span class="ident" id="3616696">Name</span>&nbsp;<span class="op" id="3616701">!=</span>&nbsp;<span class="ident" id="3616704">nil</span>&nbsp;<span class="op" id="3616708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616713">s</span><span class="op" id="3616714">.</span><span class="ident" id="3616715">Name</span><span class="op" id="3616719">.</span><span class="ident" id="3616720">NamePos</span>&nbsp;<span class="op" id="3616728">=</span>&nbsp;<span class="ident" id="3616730">pos</span><span class="op" id="3616733">[</span><span class="ident" id="3616734">i</span><span class="op" id="3616735">]</span><span class="op" id="3616736">.</span><span class="ident" id="3616737">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616745">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616749">s</span><span class="op" id="3616750">.</span><span class="ident" id="3616751">Path</span><span class="op" id="3616755">.</span><span class="ident" id="3616756">ValuePos</span>&nbsp;<span class="op" id="3616765">=</span>&nbsp;<span class="ident" id="3616767">pos</span><span class="op" id="3616770">[</span><span class="ident" id="3616771">i</span><span class="op" id="3616772">]</span><span class="op" id="3616773">.</span><span class="ident" id="3616774">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616782">s</span><span class="op" id="3616783">.</span><span class="ident" id="3616784">EndPos</span>&nbsp;<span class="op" id="3616791">=</span>&nbsp;<span class="ident" id="3616793">pos</span><span class="op" id="3616796">[</span><span class="ident" id="3616797">i</span><span class="op" id="3616798">]</span><span class="op" id="3616799">.</span><span class="ident" id="3616800">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616806">for</span>&nbsp;<span class="ident" id="3616810">_</span><span class="op" id="3616811">,</span>&nbsp;<span class="ident" id="3616813">g</span>&nbsp;<span class="op" id="3616815">:=</span>&nbsp;<span class="keyword" id="3616818">range</span>&nbsp;<span class="ident" id="3616824">importComment</span><span class="op" id="3616837">[</span><span class="ident" id="3616838">s</span><span class="op" id="3616839">]</span>&nbsp;<span class="op" id="3616841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616846">for</span>&nbsp;<span class="ident" id="3616850">_</span><span class="op" id="3616851">,</span>&nbsp;<span class="ident" id="3616853">c</span>&nbsp;<span class="op" id="3616855">:=</span>&nbsp;<span class="keyword" id="3616858">range</span>&nbsp;<span class="ident" id="3616864">g</span><span class="op" id="3616865">.</span><span class="ident" id="3616866">List</span>&nbsp;<span class="op" id="3616871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616877">c</span><span class="op" id="3616878">.</span><span class="ident" id="3616879">Slash</span>&nbsp;<span class="op" id="3616885">=</span>&nbsp;<span class="ident" id="3616887">pos</span><span class="op" id="3616890">[</span><span class="ident" id="3616891">i</span><span class="op" id="3616892">]</span><span class="op" id="3616893">.</span><span class="ident" id="3616894">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616912">sort</span><span class="op" id="3616916">.</span><span class="ident" id="3616917">Sort</span><span class="op" id="3616921">(</span><span class="ident" id="3616922">byCommentPos</span><span class="op" id="3616934">(</span><span class="ident" id="3616935">comments</span><span class="op" id="3616943">)</span><span class="op" id="3616944">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616948">return</span>&nbsp;<span class="ident" id="3616955">specs</span><br>
<span class="lineno"></span><span class="op" id="3616961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3616964">type</span>&nbsp;<span class="ident" id="3616969">byImportSpec</span>&nbsp;<span class="op" id="3616982">[</span><span class="op" id="3616983">]</span><span class="ident" id="3616984">Spec</span>&nbsp;<span class="comment" id="3616989">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3617014">func</span>&nbsp;<span class="op" id="3617019">(</span><span class="ident" id="3617020">x</span>&nbsp;<span class="ident" id="3617022">byImportSpec</span><span class="op" id="3617034">)</span>&nbsp;<span class="ident" id="3617036">Len</span><span class="op" id="3617039">(</span><span class="op" id="3617040">)</span>&nbsp;<span class="builtintype" id="3617042">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3617051">{</span>&nbsp;<span class="keyword" id="3617053">return</span>&nbsp;<span class="builtinfunc" id="3617060">len</span><span class="op" id="3617063">(</span><span class="ident" id="3617064">x</span><span class="op" id="3617065">)</span>&nbsp;<span class="op" id="3617067">}</span><br>
<span class="lineno"></span><span class="keyword" id="3617069">func</span>&nbsp;<span class="op" id="3617074">(</span><span class="ident" id="3617075">x</span>&nbsp;<span class="ident" id="3617077">byImportSpec</span><span class="op" id="3617089">)</span>&nbsp;<span class="ident" id="3617091">Swap</span><span class="op" id="3617095">(</span><span class="ident" id="3617096">i</span><span class="op" id="3617097">,</span>&nbsp;<span class="ident" id="3617099">j</span>&nbsp;<span class="builtintype" id="3617101">int</span><span class="op" id="3617104">)</span>&nbsp;<span class="op" id="3617106">{</span>&nbsp;<span class="ident" id="3617108">x</span><span class="op" id="3617109">[</span><span class="ident" id="3617110">i</span><span class="op" id="3617111">]</span><span class="op" id="3617112">,</span>&nbsp;<span class="ident" id="3617114">x</span><span class="op" id="3617115">[</span><span class="ident" id="3617116">j</span><span class="op" id="3617117">]</span>&nbsp;<span class="op" id="3617119">=</span>&nbsp;<span class="ident" id="3617121">x</span><span class="op" id="3617122">[</span><span class="ident" id="3617123">j</span><span class="op" id="3617124">]</span><span class="op" id="3617125">,</span>&nbsp;<span class="ident" id="3617127">x</span><span class="op" id="3617128">[</span><span class="ident" id="3617129">i</span><span class="op" id="3617130">]</span>&nbsp;<span class="op" id="3617132">}</span><br>
<span class="lineno"></span><span class="keyword" id="3617134">func</span>&nbsp;<span class="op" id="3617139">(</span><span class="ident" id="3617140">x</span>&nbsp;<span class="ident" id="3617142">byImportSpec</span><span class="op" id="3617154">)</span>&nbsp;<span class="ident" id="3617156">Less</span><span class="op" id="3617160">(</span><span class="ident" id="3617161">i</span><span class="op" id="3617162">,</span>&nbsp;<span class="ident" id="3617164">j</span>&nbsp;<span class="builtintype" id="3617166">int</span><span class="op" id="3617169">)</span>&nbsp;<span class="builtintype" id="3617171">bool</span>&nbsp;<span class="op" id="3617176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617179">ipath</span>&nbsp;<span class="op" id="3617185">:=</span>&nbsp;<span class="ident" id="3617188">importPath</span><span class="op" id="3617198">(</span><span class="ident" id="3617199">x</span><span class="op" id="3617200">[</span><span class="ident" id="3617201">i</span><span class="op" id="3617202">]</span><span class="op" id="3617203">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617206">jpath</span>&nbsp;<span class="op" id="3617212">:=</span>&nbsp;<span class="ident" id="3617215">importPath</span><span class="op" id="3617225">(</span><span class="ident" id="3617226">x</span><span class="op" id="3617227">[</span><span class="ident" id="3617228">j</span><span class="op" id="3617229">]</span><span class="op" id="3617230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617233">if</span>&nbsp;<span class="ident" id="3617236">ipath</span>&nbsp;<span class="op" id="3617242">!=</span>&nbsp;<span class="ident" id="3617245">jpath</span>&nbsp;<span class="op" id="3617251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617255">return</span>&nbsp;<span class="ident" id="3617262">ipath</span>&nbsp;<span class="op" id="3617268">&lt;</span>&nbsp;<span class="ident" id="3617270">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617280">iname</span>&nbsp;<span class="op" id="3617286">:=</span>&nbsp;<span class="ident" id="3617289">importName</span><span class="op" id="3617299">(</span><span class="ident" id="3617300">x</span><span class="op" id="3617301">[</span><span class="ident" id="3617302">i</span><span class="op" id="3617303">]</span><span class="op" id="3617304">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617307">jname</span>&nbsp;<span class="op" id="3617313">:=</span>&nbsp;<span class="ident" id="3617316">importName</span><span class="op" id="3617326">(</span><span class="ident" id="3617327">x</span><span class="op" id="3617328">[</span><span class="ident" id="3617329">j</span><span class="op" id="3617330">]</span><span class="op" id="3617331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617334">if</span>&nbsp;<span class="ident" id="3617337">iname</span>&nbsp;<span class="op" id="3617343">!=</span>&nbsp;<span class="ident" id="3617346">jname</span>&nbsp;<span class="op" id="3617352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617356">return</span>&nbsp;<span class="ident" id="3617363">iname</span>&nbsp;<span class="op" id="3617369">&lt;</span>&nbsp;<span class="ident" id="3617371">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617381">return</span>&nbsp;<span class="ident" id="3617388">importComment</span><span class="op" id="3617401">(</span><span class="ident" id="3617402">x</span><span class="op" id="3617403">[</span><span class="ident" id="3617404">i</span><span class="op" id="3617405">]</span><span class="op" id="3617406">)</span>&nbsp;<span class="op" id="3617408">&lt;</span>&nbsp;<span class="ident" id="3617410">importComment</span><span class="op" id="3617423">(</span><span class="ident" id="3617424">x</span><span class="op" id="3617425">[</span><span class="ident" id="3617426">j</span><span class="op" id="3617427">]</span><span class="op" id="3617428">)</span><br>
<span class="lineno">190</span><span class="op" id="3617430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3617433">type</span>&nbsp;<span class="ident" id="3617438">byCommentPos</span>&nbsp;<span class="op" id="3617451">[</span><span class="op" id="3617452">]</span><span class="op" id="3617453">*</span><span class="ident" id="3617454">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3617468">func</span>&nbsp;<span class="op" id="3617473">(</span><span class="ident" id="3617474">x</span>&nbsp;<span class="ident" id="3617476">byCommentPos</span><span class="op" id="3617488">)</span>&nbsp;<span class="ident" id="3617490">Len</span><span class="op" id="3617493">(</span><span class="op" id="3617494">)</span>&nbsp;<span class="builtintype" id="3617496">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3617510">{</span>&nbsp;<span class="keyword" id="3617512">return</span>&nbsp;<span class="builtinfunc" id="3617519">len</span><span class="op" id="3617522">(</span><span class="ident" id="3617523">x</span><span class="op" id="3617524">)</span>&nbsp;<span class="op" id="3617526">}</span><br>
<span class="lineno">195</span><span class="keyword" id="3617528">func</span>&nbsp;<span class="op" id="3617533">(</span><span class="ident" id="3617534">x</span>&nbsp;<span class="ident" id="3617536">byCommentPos</span><span class="op" id="3617548">)</span>&nbsp;<span class="ident" id="3617550">Swap</span><span class="op" id="3617554">(</span><span class="ident" id="3617555">i</span><span class="op" id="3617556">,</span>&nbsp;<span class="ident" id="3617558">j</span>&nbsp;<span class="builtintype" id="3617560">int</span><span class="op" id="3617563">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3617570">{</span>&nbsp;<span class="ident" id="3617572">x</span><span class="op" id="3617573">[</span><span class="ident" id="3617574">i</span><span class="op" id="3617575">]</span><span class="op" id="3617576">,</span>&nbsp;<span class="ident" id="3617578">x</span><span class="op" id="3617579">[</span><span class="ident" id="3617580">j</span><span class="op" id="3617581">]</span>&nbsp;<span class="op" id="3617583">=</span>&nbsp;<span class="ident" id="3617585">x</span><span class="op" id="3617586">[</span><span class="ident" id="3617587">j</span><span class="op" id="3617588">]</span><span class="op" id="3617589">,</span>&nbsp;<span class="ident" id="3617591">x</span><span class="op" id="3617592">[</span><span class="ident" id="3617593">i</span><span class="op" id="3617594">]</span>&nbsp;<span class="op" id="3617596">}</span><br>
<span class="lineno"></span><span class="keyword" id="3617598">func</span>&nbsp;<span class="op" id="3617603">(</span><span class="ident" id="3617604">x</span>&nbsp;<span class="ident" id="3617606">byCommentPos</span><span class="op" id="3617618">)</span>&nbsp;<span class="ident" id="3617620">Less</span><span class="op" id="3617624">(</span><span class="ident" id="3617625">i</span><span class="op" id="3617626">,</span>&nbsp;<span class="ident" id="3617628">j</span>&nbsp;<span class="builtintype" id="3617630">int</span><span class="op" id="3617633">)</span>&nbsp;<span class="builtintype" id="3617635">bool</span>&nbsp;<span class="op" id="3617640">{</span>&nbsp;<span class="keyword" id="3617642">return</span>&nbsp;<span class="ident" id="3617649">x</span><span class="op" id="3617650">[</span><span class="ident" id="3617651">i</span><span class="op" id="3617652">]</span><span class="op" id="3617653">.</span><span class="ident" id="3617654">Pos</span><span class="op" id="3617657">(</span><span class="op" id="3617658">)</span>&nbsp;<span class="op" id="3617660">&lt;</span>&nbsp;<span class="ident" id="3617662">x</span><span class="op" id="3617663">[</span><span class="ident" id="3617664">j</span><span class="op" id="3617665">]</span><span class="op" id="3617666">.</span><span class="ident" id="3617667">Pos</span><span class="op" id="3617670">(</span><span class="op" id="3617671">)</span>&nbsp;<span class="op" id="3617673">}</span>
</div>
</body>
</html>
