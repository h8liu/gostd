<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4047164">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4047219">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4047273">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4047324">package</span>&nbsp;<span class="ident" id="4047332">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4047338">import</span>&nbsp;<span class="op" id="4047345">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4047348">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4047358">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4047369">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4047384">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4047387">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="4047448">var</span>&nbsp;<span class="ident" id="4047452">ErrBadPattern</span>&nbsp;<span class="op" id="4047466">=</span>&nbsp;<span class="ident" id="4047468">errors</span><span class="op" id="4047474">.</span><span class="ident" id="4047475">New</span><span class="op" id="4047478">(</span><span class="string" id="4047479">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="4047504">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4047507">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="4047574">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="4047600">//</span><br>
<span class="lineno"></span><span class="comment" id="4047603">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="4047615">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4047628">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="4047637">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="4047694">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="4047745">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="4047785">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="4047837">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4047900">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="4047936">//</span><br>
<span class="lineno"></span><span class="comment" id="4047939">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="4047959">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4048017">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="4048053">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="4048107">//</span><br>
<span class="lineno"></span><span class="comment" id="4048110">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="4048180">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="4048247">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="4048264">//</span><br>
<span class="lineno"></span><span class="keyword" id="4048267">func</span>&nbsp;<span class="ident" id="4048272">Match</span><span class="op" id="4048277">(</span><span class="ident" id="4048278">pattern</span><span class="op" id="4048285">,</span>&nbsp;<span class="ident" id="4048287">name</span>&nbsp;<span class="builtintype" id="4048292">string</span><span class="op" id="4048298">)</span>&nbsp;<span class="op" id="4048300">(</span><span class="ident" id="4048301">matched</span>&nbsp;<span class="builtintype" id="4048309">bool</span><span class="op" id="4048313">,</span>&nbsp;<span class="ident" id="4048315">err</span>&nbsp;<span class="builtintype" id="4048319">error</span><span class="op" id="4048324">)</span>&nbsp;<span class="op" id="4048326">{</span><br>
<span class="lineno"></span><span class="ident" id="4048328">Pattern</span><span class="op" id="4048335">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048338">for</span>&nbsp;<span class="builtinfunc" id="4048342">len</span><span class="op" id="4048345">(</span><span class="ident" id="4048346">pattern</span><span class="op" id="4048353">)</span>&nbsp;<span class="op" id="4048355">&gt;</span>&nbsp;<span class="num" id="4048357">0</span>&nbsp;<span class="op" id="4048359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048363">var</span>&nbsp;<span class="ident" id="4048367">star</span>&nbsp;<span class="builtintype" id="4048372">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048379">var</span>&nbsp;<span class="ident" id="4048383">chunk</span>&nbsp;<span class="builtintype" id="4048389">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048398">star</span><span class="op" id="4048402">,</span>&nbsp;<span class="ident" id="4048404">chunk</span><span class="op" id="4048409">,</span>&nbsp;<span class="ident" id="4048411">pattern</span>&nbsp;<span class="op" id="4048419">=</span>&nbsp;<span class="ident" id="4048421">scanChunk</span><span class="op" id="4048430">(</span><span class="ident" id="4048431">pattern</span><span class="op" id="4048438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048442">if</span>&nbsp;<span class="ident" id="4048445">star</span>&nbsp;<span class="op" id="4048450">&amp;&amp;</span>&nbsp;<span class="ident" id="4048453">chunk</span>&nbsp;<span class="op" id="4048459">==</span>&nbsp;<span class="string" id="4048462">&#34;&#34;</span>&nbsp;<span class="op" id="4048465">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048470">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048529">return</span>&nbsp;<span class="ident" id="4048536">strings</span><span class="op" id="4048543">.</span><span class="ident" id="4048544">Index</span><span class="op" id="4048549">(</span><span class="ident" id="4048550">name</span><span class="op" id="4048554">,</span>&nbsp;<span class="string" id="4048556">&#34;/&#34;</span><span class="op" id="4048559">)</span>&nbsp;<span class="op" id="4048561">&lt;</span>&nbsp;<span class="num" id="4048563">0</span><span class="op" id="4048564">,</span>&nbsp;<span class="ident" id="4048566">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4048572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048576">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048617">t</span><span class="op" id="4048618">,</span>&nbsp;<span class="ident" id="4048620">ok</span><span class="op" id="4048622">,</span>&nbsp;<span class="ident" id="4048624">err</span>&nbsp;<span class="op" id="4048628">:=</span>&nbsp;<span class="ident" id="4048631">matchChunk</span><span class="op" id="4048641">(</span><span class="ident" id="4048642">chunk</span><span class="op" id="4048647">,</span>&nbsp;<span class="ident" id="4048649">name</span><span class="op" id="4048653">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048657">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048722">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048792">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048812">if</span>&nbsp;<span class="ident" id="4048815">ok</span>&nbsp;<span class="op" id="4048818">&amp;&amp;</span>&nbsp;<span class="op" id="4048821">(</span><span class="builtinfunc" id="4048822">len</span><span class="op" id="4048825">(</span><span class="ident" id="4048826">t</span><span class="op" id="4048827">)</span>&nbsp;<span class="op" id="4048829">==</span>&nbsp;<span class="num" id="4048832">0</span>&nbsp;<span class="op" id="4048834">||</span>&nbsp;<span class="builtinfunc" id="4048837">len</span><span class="op" id="4048840">(</span><span class="ident" id="4048841">pattern</span><span class="op" id="4048848">)</span>&nbsp;<span class="op" id="4048850">&gt;</span>&nbsp;<span class="num" id="4048852">0</span><span class="op" id="4048853">)</span>&nbsp;<span class="op" id="4048855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048860">name</span>&nbsp;<span class="op" id="4048865">=</span>&nbsp;<span class="ident" id="4048867">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048872">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4048883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048887">if</span>&nbsp;<span class="ident" id="4048890">err</span>&nbsp;<span class="op" id="4048894">!=</span>&nbsp;<span class="ident" id="4048897">nil</span>&nbsp;<span class="op" id="4048901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048906">return</span>&nbsp;<span class="builtintype" id="4048913">false</span><span class="op" id="4048918">,</span>&nbsp;<span class="ident" id="4048920">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4048926">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048930">if</span>&nbsp;<span class="ident" id="4048933">star</span>&nbsp;<span class="op" id="4048938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048943">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4048984">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049005">for</span>&nbsp;<span class="ident" id="4049009">i</span>&nbsp;<span class="op" id="4049011">:=</span>&nbsp;<span class="num" id="4049014">0</span><span class="op" id="4049015">;</span>&nbsp;<span class="ident" id="4049017">i</span>&nbsp;<span class="op" id="4049019">&lt;</span>&nbsp;<span class="builtinfunc" id="4049021">len</span><span class="op" id="4049024">(</span><span class="ident" id="4049025">name</span><span class="op" id="4049029">)</span>&nbsp;<span class="op" id="4049031">&amp;&amp;</span>&nbsp;<span class="ident" id="4049034">name</span><span class="op" id="4049038">[</span><span class="ident" id="4049039">i</span><span class="op" id="4049040">]</span>&nbsp;<span class="op" id="4049042">!=</span>&nbsp;<span class="string" id="4049045">&#39;/&#39;</span><span class="op" id="4049048">;</span>&nbsp;<span class="ident" id="4049050">i</span><span class="op" id="4049051">++</span>&nbsp;<span class="op" id="4049054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049060">t</span><span class="op" id="4049061">,</span>&nbsp;<span class="ident" id="4049063">ok</span><span class="op" id="4049065">,</span>&nbsp;<span class="ident" id="4049067">err</span>&nbsp;<span class="op" id="4049071">:=</span>&nbsp;<span class="ident" id="4049074">matchChunk</span><span class="op" id="4049084">(</span><span class="ident" id="4049085">chunk</span><span class="op" id="4049090">,</span>&nbsp;<span class="ident" id="4049092">name</span><span class="op" id="4049096">[</span><span class="ident" id="4049097">i</span><span class="op" id="4049098">+</span><span class="num" id="4049099">1</span><span class="op" id="4049100">:</span><span class="op" id="4049101">]</span><span class="op" id="4049102">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049108">if</span>&nbsp;<span class="ident" id="4049111">ok</span>&nbsp;<span class="op" id="4049114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4049121">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049186">if</span>&nbsp;<span class="builtinfunc" id="4049189">len</span><span class="op" id="4049192">(</span><span class="ident" id="4049193">pattern</span><span class="op" id="4049200">)</span>&nbsp;<span class="op" id="4049202">==</span>&nbsp;<span class="num" id="4049205">0</span>&nbsp;<span class="op" id="4049207">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4049210">len</span><span class="op" id="4049213">(</span><span class="ident" id="4049214">t</span><span class="op" id="4049215">)</span>&nbsp;<span class="op" id="4049217">&gt;</span>&nbsp;<span class="num" id="4049219">0</span>&nbsp;<span class="op" id="4049221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049229">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049243">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049250">name</span>&nbsp;<span class="op" id="4049255">=</span>&nbsp;<span class="ident" id="4049257">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049264">continue</span>&nbsp;<span class="ident" id="4049273">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049291">if</span>&nbsp;<span class="ident" id="4049294">err</span>&nbsp;<span class="op" id="4049298">!=</span>&nbsp;<span class="ident" id="4049301">nil</span>&nbsp;<span class="op" id="4049305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049312">return</span>&nbsp;<span class="builtintype" id="4049319">false</span><span class="op" id="4049324">,</span>&nbsp;<span class="ident" id="4049326">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049347">return</span>&nbsp;<span class="builtintype" id="4049354">false</span><span class="op" id="4049359">,</span>&nbsp;<span class="ident" id="4049361">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049366">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049369">return</span>&nbsp;<span class="builtinfunc" id="4049376">len</span><span class="op" id="4049379">(</span><span class="ident" id="4049380">name</span><span class="op" id="4049384">)</span>&nbsp;<span class="op" id="4049386">==</span>&nbsp;<span class="num" id="4049389">0</span><span class="op" id="4049390">,</span>&nbsp;<span class="ident" id="4049392">nil</span><br>
<span class="lineno"></span><span class="op" id="4049396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4049399">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="4049473">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="4049505">func</span>&nbsp;<span class="ident" id="4049510">scanChunk</span><span class="op" id="4049519">(</span><span class="ident" id="4049520">pattern</span>&nbsp;<span class="builtintype" id="4049528">string</span><span class="op" id="4049534">)</span>&nbsp;<span class="op" id="4049536">(</span><span class="ident" id="4049537">star</span>&nbsp;<span class="builtintype" id="4049542">bool</span><span class="op" id="4049546">,</span>&nbsp;<span class="ident" id="4049548">chunk</span><span class="op" id="4049553">,</span>&nbsp;<span class="ident" id="4049555">rest</span>&nbsp;<span class="builtintype" id="4049560">string</span><span class="op" id="4049566">)</span>&nbsp;<span class="op" id="4049568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049571">for</span>&nbsp;<span class="builtinfunc" id="4049575">len</span><span class="op" id="4049578">(</span><span class="ident" id="4049579">pattern</span><span class="op" id="4049586">)</span>&nbsp;<span class="op" id="4049588">&gt;</span>&nbsp;<span class="num" id="4049590">0</span>&nbsp;<span class="op" id="4049592">&amp;&amp;</span>&nbsp;<span class="ident" id="4049595">pattern</span><span class="op" id="4049602">[</span><span class="num" id="4049603">0</span><span class="op" id="4049604">]</span>&nbsp;<span class="op" id="4049606">==</span>&nbsp;<span class="string" id="4049609">&#39;*&#39;</span>&nbsp;<span class="op" id="4049613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049617">pattern</span>&nbsp;<span class="op" id="4049625">=</span>&nbsp;<span class="ident" id="4049627">pattern</span><span class="op" id="4049634">[</span><span class="num" id="4049635">1</span><span class="op" id="4049636">:</span><span class="op" id="4049637">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049641">star</span>&nbsp;<span class="op" id="4049646">=</span>&nbsp;<span class="builtintype" id="4049648">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049654">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049657">inrange</span>&nbsp;<span class="op" id="4049665">:=</span>&nbsp;<span class="builtintype" id="4049668">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049675">var</span>&nbsp;<span class="ident" id="4049679">i</span>&nbsp;<span class="builtintype" id="4049681">int</span><br>
<span class="lineno"></span><span class="ident" id="4049685">Scan</span><span class="op" id="4049689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049692">for</span>&nbsp;<span class="ident" id="4049696">i</span>&nbsp;<span class="op" id="4049698">=</span>&nbsp;<span class="num" id="4049700">0</span><span class="op" id="4049701">;</span>&nbsp;<span class="ident" id="4049703">i</span>&nbsp;<span class="op" id="4049705">&lt;</span>&nbsp;<span class="builtinfunc" id="4049707">len</span><span class="op" id="4049710">(</span><span class="ident" id="4049711">pattern</span><span class="op" id="4049718">)</span><span class="op" id="4049719">;</span>&nbsp;<span class="ident" id="4049721">i</span><span class="op" id="4049722">++</span>&nbsp;<span class="op" id="4049725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049729">switch</span>&nbsp;<span class="ident" id="4049736">pattern</span><span class="op" id="4049743">[</span><span class="ident" id="4049744">i</span><span class="op" id="4049745">]</span>&nbsp;<span class="op" id="4049747">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049751">case</span>&nbsp;<span class="string" id="4049756">&#39;\\&#39;</span><span class="op" id="4049760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4049765">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049819">if</span>&nbsp;<span class="ident" id="4049822">i</span><span class="op" id="4049823">+</span><span class="num" id="4049824">1</span>&nbsp;<span class="op" id="4049826">&lt;</span>&nbsp;<span class="builtinfunc" id="4049828">len</span><span class="op" id="4049831">(</span><span class="ident" id="4049832">pattern</span><span class="op" id="4049839">)</span>&nbsp;<span class="op" id="4049841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049847">i</span><span class="op" id="4049848">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049854">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049858">case</span>&nbsp;<span class="string" id="4049863">&#39;[&#39;</span><span class="op" id="4049866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049871">inrange</span>&nbsp;<span class="op" id="4049879">=</span>&nbsp;<span class="builtintype" id="4049881">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049888">case</span>&nbsp;<span class="string" id="4049893">&#39;]&#39;</span><span class="op" id="4049896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4049901">inrange</span>&nbsp;<span class="op" id="4049909">=</span>&nbsp;<span class="builtintype" id="4049911">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049919">case</span>&nbsp;<span class="string" id="4049924">&#39;*&#39;</span><span class="op" id="4049927">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049932">if</span>&nbsp;<span class="op" id="4049935">!</span><span class="ident" id="4049936">inrange</span>&nbsp;<span class="op" id="4049944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049950">break</span>&nbsp;<span class="ident" id="4049956">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4049971">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4049974">return</span>&nbsp;<span class="ident" id="4049981">star</span><span class="op" id="4049985">,</span>&nbsp;<span class="ident" id="4049987">pattern</span><span class="op" id="4049994">[</span><span class="num" id="4049995">0</span><span class="op" id="4049996">:</span><span class="ident" id="4049997">i</span><span class="op" id="4049998">]</span><span class="op" id="4049999">,</span>&nbsp;<span class="ident" id="4050001">pattern</span><span class="op" id="4050008">[</span><span class="ident" id="4050009">i</span><span class="op" id="4050010">:</span><span class="op" id="4050011">]</span><br>
<span class="lineno"></span><span class="op" id="4050013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4050016">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="4050079">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="4050138">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="4050213">func</span>&nbsp;<span class="ident" id="4050218">matchChunk</span><span class="op" id="4050228">(</span><span class="ident" id="4050229">chunk</span><span class="op" id="4050234">,</span>&nbsp;<span class="ident" id="4050236">s</span>&nbsp;<span class="builtintype" id="4050238">string</span><span class="op" id="4050244">)</span>&nbsp;<span class="op" id="4050246">(</span><span class="ident" id="4050247">rest</span>&nbsp;<span class="builtintype" id="4050252">string</span><span class="op" id="4050258">,</span>&nbsp;<span class="ident" id="4050260">ok</span>&nbsp;<span class="builtintype" id="4050263">bool</span><span class="op" id="4050267">,</span>&nbsp;<span class="ident" id="4050269">err</span>&nbsp;<span class="builtintype" id="4050273">error</span><span class="op" id="4050278">)</span>&nbsp;<span class="op" id="4050280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050283">for</span>&nbsp;<span class="builtinfunc" id="4050287">len</span><span class="op" id="4050290">(</span><span class="ident" id="4050291">chunk</span><span class="op" id="4050296">)</span>&nbsp;<span class="op" id="4050298">&gt;</span>&nbsp;<span class="num" id="4050300">0</span>&nbsp;<span class="op" id="4050302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050306">if</span>&nbsp;<span class="builtinfunc" id="4050309">len</span><span class="op" id="4050312">(</span><span class="ident" id="4050313">s</span><span class="op" id="4050314">)</span>&nbsp;<span class="op" id="4050316">==</span>&nbsp;<span class="num" id="4050319">0</span>&nbsp;<span class="op" id="4050321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050326">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050339">switch</span>&nbsp;<span class="ident" id="4050346">chunk</span><span class="op" id="4050351">[</span><span class="num" id="4050352">0</span><span class="op" id="4050353">]</span>&nbsp;<span class="op" id="4050355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050359">case</span>&nbsp;<span class="string" id="4050364">&#39;[&#39;</span><span class="op" id="4050367">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4050372">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050394">r</span><span class="op" id="4050395">,</span>&nbsp;<span class="ident" id="4050397">n</span>&nbsp;<span class="op" id="4050399">:=</span>&nbsp;<span class="ident" id="4050402">utf8</span><span class="op" id="4050406">.</span><span class="ident" id="4050407">DecodeRuneInString</span><span class="op" id="4050425">(</span><span class="ident" id="4050426">s</span><span class="op" id="4050427">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050432">s</span>&nbsp;<span class="op" id="4050434">=</span>&nbsp;<span class="ident" id="4050436">s</span><span class="op" id="4050437">[</span><span class="ident" id="4050438">n</span><span class="op" id="4050439">:</span><span class="op" id="4050440">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050445">chunk</span>&nbsp;<span class="op" id="4050451">=</span>&nbsp;<span class="ident" id="4050453">chunk</span><span class="op" id="4050458">[</span><span class="num" id="4050459">1</span><span class="op" id="4050460">:</span><span class="op" id="4050461">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4050466">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050489">notNegated</span>&nbsp;<span class="op" id="4050500">:=</span>&nbsp;<span class="builtintype" id="4050503">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050511">if</span>&nbsp;<span class="builtinfunc" id="4050514">len</span><span class="op" id="4050517">(</span><span class="ident" id="4050518">chunk</span><span class="op" id="4050523">)</span>&nbsp;<span class="op" id="4050525">&gt;</span>&nbsp;<span class="num" id="4050527">0</span>&nbsp;<span class="op" id="4050529">&amp;&amp;</span>&nbsp;<span class="ident" id="4050532">chunk</span><span class="op" id="4050537">[</span><span class="num" id="4050538">0</span><span class="op" id="4050539">]</span>&nbsp;<span class="op" id="4050541">==</span>&nbsp;<span class="string" id="4050544">&#39;^&#39;</span>&nbsp;<span class="op" id="4050548">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050554">notNegated</span>&nbsp;<span class="op" id="4050565">=</span>&nbsp;<span class="builtintype" id="4050567">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050577">chunk</span>&nbsp;<span class="op" id="4050583">=</span>&nbsp;<span class="ident" id="4050585">chunk</span><span class="op" id="4050590">[</span><span class="num" id="4050591">1</span><span class="op" id="4050592">:</span><span class="op" id="4050593">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4050603">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050626">match</span>&nbsp;<span class="op" id="4050632">:=</span>&nbsp;<span class="builtintype" id="4050635">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050644">nrange</span>&nbsp;<span class="op" id="4050651">:=</span>&nbsp;<span class="num" id="4050654">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050659">for</span>&nbsp;<span class="op" id="4050663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050669">if</span>&nbsp;<span class="builtinfunc" id="4050672">len</span><span class="op" id="4050675">(</span><span class="ident" id="4050676">chunk</span><span class="op" id="4050681">)</span>&nbsp;<span class="op" id="4050683">&gt;</span>&nbsp;<span class="num" id="4050685">0</span>&nbsp;<span class="op" id="4050687">&amp;&amp;</span>&nbsp;<span class="ident" id="4050690">chunk</span><span class="op" id="4050695">[</span><span class="num" id="4050696">0</span><span class="op" id="4050697">]</span>&nbsp;<span class="op" id="4050699">==</span>&nbsp;<span class="string" id="4050702">&#39;]&#39;</span>&nbsp;<span class="op" id="4050706">&amp;&amp;</span>&nbsp;<span class="ident" id="4050709">nrange</span>&nbsp;<span class="op" id="4050716">&gt;</span>&nbsp;<span class="num" id="4050718">0</span>&nbsp;<span class="op" id="4050720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050727">chunk</span>&nbsp;<span class="op" id="4050733">=</span>&nbsp;<span class="ident" id="4050735">chunk</span><span class="op" id="4050740">[</span><span class="num" id="4050741">1</span><span class="op" id="4050742">:</span><span class="op" id="4050743">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050750">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050766">var</span>&nbsp;<span class="ident" id="4050770">lo</span><span class="op" id="4050772">,</span>&nbsp;<span class="ident" id="4050774">hi</span>&nbsp;<span class="builtintype" id="4050777">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050786">if</span>&nbsp;<span class="ident" id="4050789">lo</span><span class="op" id="4050791">,</span>&nbsp;<span class="ident" id="4050793">chunk</span><span class="op" id="4050798">,</span>&nbsp;<span class="ident" id="4050800">err</span>&nbsp;<span class="op" id="4050804">=</span>&nbsp;<span class="ident" id="4050806">getEsc</span><span class="op" id="4050812">(</span><span class="ident" id="4050813">chunk</span><span class="op" id="4050818">)</span><span class="op" id="4050819">;</span>&nbsp;<span class="ident" id="4050821">err</span>&nbsp;<span class="op" id="4050825">!=</span>&nbsp;<span class="ident" id="4050828">nil</span>&nbsp;<span class="op" id="4050832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050839">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050850">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4050856">hi</span>&nbsp;<span class="op" id="4050859">=</span>&nbsp;<span class="ident" id="4050861">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050868">if</span>&nbsp;<span class="ident" id="4050871">chunk</span><span class="op" id="4050876">[</span><span class="num" id="4050877">0</span><span class="op" id="4050878">]</span>&nbsp;<span class="op" id="4050880">==</span>&nbsp;<span class="string" id="4050883">&#39;-&#39;</span>&nbsp;<span class="op" id="4050887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050894">if</span>&nbsp;<span class="ident" id="4050897">hi</span><span class="op" id="4050899">,</span>&nbsp;<span class="ident" id="4050901">chunk</span><span class="op" id="4050906">,</span>&nbsp;<span class="ident" id="4050908">err</span>&nbsp;<span class="op" id="4050912">=</span>&nbsp;<span class="ident" id="4050914">getEsc</span><span class="op" id="4050920">(</span><span class="ident" id="4050921">chunk</span><span class="op" id="4050926">[</span><span class="num" id="4050927">1</span><span class="op" id="4050928">:</span><span class="op" id="4050929">]</span><span class="op" id="4050930">)</span><span class="op" id="4050931">;</span>&nbsp;<span class="ident" id="4050933">err</span>&nbsp;<span class="op" id="4050937">!=</span>&nbsp;<span class="ident" id="4050940">nil</span>&nbsp;<span class="op" id="4050944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050952">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050964">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4050970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4050976">if</span>&nbsp;<span class="ident" id="4050979">lo</span>&nbsp;<span class="op" id="4050982">&lt;=</span>&nbsp;<span class="ident" id="4050985">r</span>&nbsp;<span class="op" id="4050987">&amp;&amp;</span>&nbsp;<span class="ident" id="4050990">r</span>&nbsp;<span class="op" id="4050992">&lt;=</span>&nbsp;<span class="ident" id="4050995">hi</span>&nbsp;<span class="op" id="4050998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051005">match</span>&nbsp;<span class="op" id="4051011">=</span>&nbsp;<span class="builtintype" id="4051013">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051028">nrange</span><span class="op" id="4051034">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051045">if</span>&nbsp;<span class="ident" id="4051048">match</span>&nbsp;<span class="op" id="4051054">!=</span>&nbsp;<span class="ident" id="4051057">notNegated</span>&nbsp;<span class="op" id="4051068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051074">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051089">case</span>&nbsp;<span class="string" id="4051094">&#39;?&#39;</span><span class="op" id="4051097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051102">if</span>&nbsp;<span class="ident" id="4051105">s</span><span class="op" id="4051106">[</span><span class="num" id="4051107">0</span><span class="op" id="4051108">]</span>&nbsp;<span class="op" id="4051110">==</span>&nbsp;<span class="string" id="4051113">&#39;/&#39;</span>&nbsp;<span class="op" id="4051117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051123">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051138">_</span><span class="op" id="4051139">,</span>&nbsp;<span class="ident" id="4051141">n</span>&nbsp;<span class="op" id="4051143">:=</span>&nbsp;<span class="ident" id="4051146">utf8</span><span class="op" id="4051150">.</span><span class="ident" id="4051151">DecodeRuneInString</span><span class="op" id="4051169">(</span><span class="ident" id="4051170">s</span><span class="op" id="4051171">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051176">s</span>&nbsp;<span class="op" id="4051178">=</span>&nbsp;<span class="ident" id="4051180">s</span><span class="op" id="4051181">[</span><span class="ident" id="4051182">n</span><span class="op" id="4051183">:</span><span class="op" id="4051184">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051189">chunk</span>&nbsp;<span class="op" id="4051195">=</span>&nbsp;<span class="ident" id="4051197">chunk</span><span class="op" id="4051202">[</span><span class="num" id="4051203">1</span><span class="op" id="4051204">:</span><span class="op" id="4051205">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051210">case</span>&nbsp;<span class="string" id="4051215">&#39;\\&#39;</span><span class="op" id="4051219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051224">chunk</span>&nbsp;<span class="op" id="4051230">=</span>&nbsp;<span class="ident" id="4051232">chunk</span><span class="op" id="4051237">[</span><span class="num" id="4051238">1</span><span class="op" id="4051239">:</span><span class="op" id="4051240">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051245">if</span>&nbsp;<span class="builtinfunc" id="4051248">len</span><span class="op" id="4051251">(</span><span class="ident" id="4051252">chunk</span><span class="op" id="4051257">)</span>&nbsp;<span class="op" id="4051259">==</span>&nbsp;<span class="num" id="4051262">0</span>&nbsp;<span class="op" id="4051264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051270">err</span>&nbsp;<span class="op" id="4051274">=</span>&nbsp;<span class="ident" id="4051276">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051294">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051309">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051324">default</span><span class="op" id="4051331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051336">if</span>&nbsp;<span class="ident" id="4051339">chunk</span><span class="op" id="4051344">[</span><span class="num" id="4051345">0</span><span class="op" id="4051346">]</span>&nbsp;<span class="op" id="4051348">!=</span>&nbsp;<span class="ident" id="4051351">s</span><span class="op" id="4051352">[</span><span class="num" id="4051353">0</span><span class="op" id="4051354">]</span>&nbsp;<span class="op" id="4051356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051362">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051372">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051377">s</span>&nbsp;<span class="op" id="4051379">=</span>&nbsp;<span class="ident" id="4051381">s</span><span class="op" id="4051382">[</span><span class="num" id="4051383">1</span><span class="op" id="4051384">:</span><span class="op" id="4051385">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051390">chunk</span>&nbsp;<span class="op" id="4051396">=</span>&nbsp;<span class="ident" id="4051398">chunk</span><span class="op" id="4051403">[</span><span class="num" id="4051404">1</span><span class="op" id="4051405">:</span><span class="op" id="4051406">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051416">return</span>&nbsp;<span class="ident" id="4051423">s</span><span class="op" id="4051424">,</span>&nbsp;<span class="builtintype" id="4051426">true</span><span class="op" id="4051430">,</span>&nbsp;<span class="ident" id="4051432">nil</span><br>
<span class="lineno">185</span><span class="op" id="4051436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4051439">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="4051518">func</span>&nbsp;<span class="ident" id="4051523">getEsc</span><span class="op" id="4051529">(</span><span class="ident" id="4051530">chunk</span>&nbsp;<span class="builtintype" id="4051536">string</span><span class="op" id="4051542">)</span>&nbsp;<span class="op" id="4051544">(</span><span class="ident" id="4051545">r</span>&nbsp;<span class="builtintype" id="4051547">rune</span><span class="op" id="4051551">,</span>&nbsp;<span class="ident" id="4051553">nchunk</span>&nbsp;<span class="builtintype" id="4051560">string</span><span class="op" id="4051566">,</span>&nbsp;<span class="ident" id="4051568">err</span>&nbsp;<span class="builtintype" id="4051572">error</span><span class="op" id="4051577">)</span>&nbsp;<span class="op" id="4051579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051582">if</span>&nbsp;<span class="builtinfunc" id="4051585">len</span><span class="op" id="4051588">(</span><span class="ident" id="4051589">chunk</span><span class="op" id="4051594">)</span>&nbsp;<span class="op" id="4051596">==</span>&nbsp;<span class="num" id="4051599">0</span>&nbsp;<span class="op" id="4051601">||</span>&nbsp;<span class="ident" id="4051604">chunk</span><span class="op" id="4051609">[</span><span class="num" id="4051610">0</span><span class="op" id="4051611">]</span>&nbsp;<span class="op" id="4051613">==</span>&nbsp;<span class="string" id="4051616">&#39;-&#39;</span>&nbsp;<span class="op" id="4051620">||</span>&nbsp;<span class="ident" id="4051623">chunk</span><span class="op" id="4051628">[</span><span class="num" id="4051629">0</span><span class="op" id="4051630">]</span>&nbsp;<span class="op" id="4051632">==</span>&nbsp;<span class="string" id="4051635">&#39;]&#39;</span>&nbsp;<span class="op" id="4051639">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051643">err</span>&nbsp;<span class="op" id="4051647">=</span>&nbsp;<span class="ident" id="4051649">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051665">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051676">if</span>&nbsp;<span class="ident" id="4051679">chunk</span><span class="op" id="4051684">[</span><span class="num" id="4051685">0</span><span class="op" id="4051686">]</span>&nbsp;<span class="op" id="4051688">==</span>&nbsp;<span class="string" id="4051691">&#39;\\&#39;</span>&nbsp;<span class="op" id="4051696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051700">chunk</span>&nbsp;<span class="op" id="4051706">=</span>&nbsp;<span class="ident" id="4051708">chunk</span><span class="op" id="4051713">[</span><span class="num" id="4051714">1</span><span class="op" id="4051715">:</span><span class="op" id="4051716">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051720">if</span>&nbsp;<span class="builtinfunc" id="4051723">len</span><span class="op" id="4051726">(</span><span class="ident" id="4051727">chunk</span><span class="op" id="4051732">)</span>&nbsp;<span class="op" id="4051734">==</span>&nbsp;<span class="num" id="4051737">0</span>&nbsp;<span class="op" id="4051739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051744">err</span>&nbsp;<span class="op" id="4051748">=</span>&nbsp;<span class="ident" id="4051750">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051767">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051779">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051782">r</span><span class="op" id="4051783">,</span>&nbsp;<span class="ident" id="4051785">n</span>&nbsp;<span class="op" id="4051787">:=</span>&nbsp;<span class="ident" id="4051790">utf8</span><span class="op" id="4051794">.</span><span class="ident" id="4051795">DecodeRuneInString</span><span class="op" id="4051813">(</span><span class="ident" id="4051814">chunk</span><span class="op" id="4051819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051822">if</span>&nbsp;<span class="ident" id="4051825">r</span>&nbsp;<span class="op" id="4051827">==</span>&nbsp;<span class="ident" id="4051830">utf8</span><span class="op" id="4051834">.</span><span class="ident" id="4051835">RuneError</span>&nbsp;<span class="op" id="4051845">&amp;&amp;</span>&nbsp;<span class="ident" id="4051848">n</span>&nbsp;<span class="op" id="4051850">==</span>&nbsp;<span class="num" id="4051853">1</span>&nbsp;<span class="op" id="4051855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051859">err</span>&nbsp;<span class="op" id="4051863">=</span>&nbsp;<span class="ident" id="4051865">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051883">nchunk</span>&nbsp;<span class="op" id="4051890">=</span>&nbsp;<span class="ident" id="4051892">chunk</span><span class="op" id="4051897">[</span><span class="ident" id="4051898">n</span><span class="op" id="4051899">:</span><span class="op" id="4051900">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051903">if</span>&nbsp;<span class="builtinfunc" id="4051906">len</span><span class="op" id="4051909">(</span><span class="ident" id="4051910">nchunk</span><span class="op" id="4051916">)</span>&nbsp;<span class="op" id="4051918">==</span>&nbsp;<span class="num" id="4051921">0</span>&nbsp;<span class="op" id="4051923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4051927">err</span>&nbsp;<span class="op" id="4051931">=</span>&nbsp;<span class="ident" id="4051933">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4051948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4051951">return</span><br>
<span class="lineno"></span><span class="op" id="4051958">}</span>
</div>
</body>
</html>
