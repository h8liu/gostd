<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html" class="current">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2258713">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2258768">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2258822">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2258873">package</span>&nbsp;<span class="ident" id="2258881">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2258887">func</span>&nbsp;<span class="ident" id="2258892">isOddInt</span><span class="op" id="2258900">(</span><span class="ident" id="2258901">x</span>&nbsp;<span class="builtintype" id="2258903">float64</span><span class="op" id="2258910">)</span>&nbsp;<span class="builtintype" id="2258912">bool</span>&nbsp;<span class="op" id="2258917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258920">xi</span><span class="op" id="2258922">,</span>&nbsp;<span class="ident" id="2258924">xf</span>&nbsp;<span class="op" id="2258927">:=</span>&nbsp;<span class="ident" id="2258930">Modf</span><span class="op" id="2258934">(</span><span class="ident" id="2258935">x</span><span class="op" id="2258936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258939">return</span>&nbsp;<span class="ident" id="2258946">xf</span>&nbsp;<span class="op" id="2258949">==</span>&nbsp;<span class="num" id="2258952">0</span>&nbsp;<span class="op" id="2258954">&amp;&amp;</span>&nbsp;<span class="ident" id="2258957">int64</span><span class="op" id="2258962">(</span><span class="ident" id="2258963">xi</span><span class="op" id="2258965">)</span><span class="op" id="2258966">&amp;</span><span class="num" id="2258967">1</span>&nbsp;<span class="op" id="2258969">==</span>&nbsp;<span class="num" id="2258972">1</span><br>
<span class="lineno">10</span><span class="op" id="2258974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2258977">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2259045">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2259111">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2259161">//</span><br>
<span class="lineno"></span><span class="comment" id="2259164">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2259197">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2259226">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2259253">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2259280">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2259301">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2259322">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2259370">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2259395">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2259418">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2259480">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2259526">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2259586">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2259608">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2259643">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2259676">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2259709">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2259744">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2259777">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2259808">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2259838">//&nbsp;&nbsp;&nbsp;&nbsp;Pow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2259899">func</span>&nbsp;<span class="ident" id="2259904">Pow</span><span class="op" id="2259907">(</span><span class="ident" id="2259908">x</span><span class="op" id="2259909">,</span>&nbsp;<span class="ident" id="2259911">y</span>&nbsp;<span class="builtintype" id="2259913">float64</span><span class="op" id="2259920">)</span>&nbsp;<span class="builtintype" id="2259922">float64</span>&nbsp;<span class="op" id="2259930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2259933">switch</span>&nbsp;<span class="op" id="2259940">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2259943">case</span>&nbsp;<span class="ident" id="2259948">y</span>&nbsp;<span class="op" id="2259950">==</span>&nbsp;<span class="num" id="2259953">0</span>&nbsp;<span class="op" id="2259955">||</span>&nbsp;<span class="ident" id="2259958">x</span>&nbsp;<span class="op" id="2259960">==</span>&nbsp;<span class="num" id="2259963">1</span><span class="op" id="2259964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2259968">return</span>&nbsp;<span class="num" id="2259975">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2259978">case</span>&nbsp;<span class="ident" id="2259983">y</span>&nbsp;<span class="op" id="2259985">==</span>&nbsp;<span class="num" id="2259988">1</span><span class="op" id="2259989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2259993">return</span>&nbsp;<span class="ident" id="2260000">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260003">case</span>&nbsp;<span class="ident" id="2260008">y</span>&nbsp;<span class="op" id="2260010">==</span>&nbsp;<span class="num" id="2260013">0.5</span><span class="op" id="2260016">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260020">return</span>&nbsp;<span class="ident" id="2260027">Sqrt</span><span class="op" id="2260031">(</span><span class="ident" id="2260032">x</span><span class="op" id="2260033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260036">case</span>&nbsp;<span class="ident" id="2260041">y</span>&nbsp;<span class="op" id="2260043">==</span>&nbsp;<span class="op" id="2260046">-</span><span class="num" id="2260047">0.5</span><span class="op" id="2260050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260054">return</span>&nbsp;<span class="num" id="2260061">1</span>&nbsp;<span class="op" id="2260063">/</span>&nbsp;<span class="ident" id="2260065">Sqrt</span><span class="op" id="2260069">(</span><span class="ident" id="2260070">x</span><span class="op" id="2260071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260074">case</span>&nbsp;<span class="ident" id="2260079">IsNaN</span><span class="op" id="2260084">(</span><span class="ident" id="2260085">x</span><span class="op" id="2260086">)</span>&nbsp;<span class="op" id="2260088">||</span>&nbsp;<span class="ident" id="2260091">IsNaN</span><span class="op" id="2260096">(</span><span class="ident" id="2260097">y</span><span class="op" id="2260098">)</span><span class="op" id="2260099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260103">return</span>&nbsp;<span class="ident" id="2260110">NaN</span><span class="op" id="2260113">(</span><span class="op" id="2260114">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260117">case</span>&nbsp;<span class="ident" id="2260122">x</span>&nbsp;<span class="op" id="2260124">==</span>&nbsp;<span class="num" id="2260127">0</span><span class="op" id="2260128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260132">switch</span>&nbsp;<span class="op" id="2260139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260143">case</span>&nbsp;<span class="ident" id="2260148">y</span>&nbsp;<span class="op" id="2260150">&lt;</span>&nbsp;<span class="num" id="2260152">0</span><span class="op" id="2260153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260158">if</span>&nbsp;<span class="ident" id="2260161">isOddInt</span><span class="op" id="2260169">(</span><span class="ident" id="2260170">y</span><span class="op" id="2260171">)</span>&nbsp;<span class="op" id="2260173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260179">return</span>&nbsp;<span class="ident" id="2260186">Copysign</span><span class="op" id="2260194">(</span><span class="ident" id="2260195">Inf</span><span class="op" id="2260198">(</span><span class="num" id="2260199">1</span><span class="op" id="2260200">)</span><span class="op" id="2260201">,</span>&nbsp;<span class="ident" id="2260203">x</span><span class="op" id="2260204">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260214">return</span>&nbsp;<span class="ident" id="2260221">Inf</span><span class="op" id="2260224">(</span><span class="num" id="2260225">1</span><span class="op" id="2260226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260230">case</span>&nbsp;<span class="ident" id="2260235">y</span>&nbsp;<span class="op" id="2260237">&gt;</span>&nbsp;<span class="num" id="2260239">0</span><span class="op" id="2260240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260245">if</span>&nbsp;<span class="ident" id="2260248">isOddInt</span><span class="op" id="2260256">(</span><span class="ident" id="2260257">y</span><span class="op" id="2260258">)</span>&nbsp;<span class="op" id="2260260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260266">return</span>&nbsp;<span class="ident" id="2260273">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260283">return</span>&nbsp;<span class="num" id="2260290">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260297">case</span>&nbsp;<span class="ident" id="2260302">IsInf</span><span class="op" id="2260307">(</span><span class="ident" id="2260308">y</span><span class="op" id="2260309">,</span>&nbsp;<span class="num" id="2260311">0</span><span class="op" id="2260312">)</span><span class="op" id="2260313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260317">switch</span>&nbsp;<span class="op" id="2260324">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260328">case</span>&nbsp;<span class="ident" id="2260333">x</span>&nbsp;<span class="op" id="2260335">==</span>&nbsp;<span class="op" id="2260338">-</span><span class="num" id="2260339">1</span><span class="op" id="2260340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260345">return</span>&nbsp;<span class="num" id="2260352">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260356">case</span>&nbsp;<span class="op" id="2260361">(</span><span class="ident" id="2260362">Abs</span><span class="op" id="2260365">(</span><span class="ident" id="2260366">x</span><span class="op" id="2260367">)</span>&nbsp;<span class="op" id="2260369">&lt;</span>&nbsp;<span class="num" id="2260371">1</span><span class="op" id="2260372">)</span>&nbsp;<span class="op" id="2260374">==</span>&nbsp;<span class="ident" id="2260377">IsInf</span><span class="op" id="2260382">(</span><span class="ident" id="2260383">y</span><span class="op" id="2260384">,</span>&nbsp;<span class="num" id="2260386">1</span><span class="op" id="2260387">)</span><span class="op" id="2260388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260393">return</span>&nbsp;<span class="num" id="2260400">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260404">default</span><span class="op" id="2260411">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260416">return</span>&nbsp;<span class="ident" id="2260423">Inf</span><span class="op" id="2260426">(</span><span class="num" id="2260427">1</span><span class="op" id="2260428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260435">case</span>&nbsp;<span class="ident" id="2260440">IsInf</span><span class="op" id="2260445">(</span><span class="ident" id="2260446">x</span><span class="op" id="2260447">,</span>&nbsp;<span class="num" id="2260449">0</span><span class="op" id="2260450">)</span><span class="op" id="2260451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260455">if</span>&nbsp;<span class="ident" id="2260458">IsInf</span><span class="op" id="2260463">(</span><span class="ident" id="2260464">x</span><span class="op" id="2260465">,</span>&nbsp;<span class="op" id="2260467">-</span><span class="num" id="2260468">1</span><span class="op" id="2260469">)</span>&nbsp;<span class="op" id="2260471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260476">return</span>&nbsp;<span class="ident" id="2260483">Pow</span><span class="op" id="2260486">(</span><span class="num" id="2260487">1</span><span class="op" id="2260488">/</span><span class="ident" id="2260489">x</span><span class="op" id="2260490">,</span>&nbsp;<span class="op" id="2260492">-</span><span class="ident" id="2260493">y</span><span class="op" id="2260494">)</span>&nbsp;<span class="comment" id="2260496">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260517">switch</span>&nbsp;<span class="op" id="2260524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260528">case</span>&nbsp;<span class="ident" id="2260533">y</span>&nbsp;<span class="op" id="2260535">&lt;</span>&nbsp;<span class="num" id="2260537">0</span><span class="op" id="2260538">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260543">return</span>&nbsp;<span class="num" id="2260550">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260554">case</span>&nbsp;<span class="ident" id="2260559">y</span>&nbsp;<span class="op" id="2260561">&gt;</span>&nbsp;<span class="num" id="2260563">0</span><span class="op" id="2260564">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260569">return</span>&nbsp;<span class="ident" id="2260576">Inf</span><span class="op" id="2260579">(</span><span class="num" id="2260580">1</span><span class="op" id="2260581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260592">absy</span>&nbsp;<span class="op" id="2260597">:=</span>&nbsp;<span class="ident" id="2260600">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260603">flip</span>&nbsp;<span class="op" id="2260608">:=</span>&nbsp;<span class="builtintype" id="2260611">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260618">if</span>&nbsp;<span class="ident" id="2260621">absy</span>&nbsp;<span class="op" id="2260626">&lt;</span>&nbsp;<span class="num" id="2260628">0</span>&nbsp;<span class="op" id="2260630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260634">absy</span>&nbsp;<span class="op" id="2260639">=</span>&nbsp;<span class="op" id="2260641">-</span><span class="ident" id="2260642">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260649">flip</span>&nbsp;<span class="op" id="2260654">=</span>&nbsp;<span class="builtintype" id="2260656">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260662">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260665">yi</span><span class="op" id="2260667">,</span>&nbsp;<span class="ident" id="2260669">yf</span>&nbsp;<span class="op" id="2260672">:=</span>&nbsp;<span class="ident" id="2260675">Modf</span><span class="op" id="2260679">(</span><span class="ident" id="2260680">absy</span><span class="op" id="2260684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260687">if</span>&nbsp;<span class="ident" id="2260690">yf</span>&nbsp;<span class="op" id="2260693">!=</span>&nbsp;<span class="num" id="2260696">0</span>&nbsp;<span class="op" id="2260698">&amp;&amp;</span>&nbsp;<span class="ident" id="2260701">x</span>&nbsp;<span class="op" id="2260703">&lt;</span>&nbsp;<span class="num" id="2260705">0</span>&nbsp;<span class="op" id="2260707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260711">return</span>&nbsp;<span class="ident" id="2260718">NaN</span><span class="op" id="2260721">(</span><span class="op" id="2260722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260728">if</span>&nbsp;<span class="ident" id="2260731">yi</span>&nbsp;<span class="op" id="2260734">&gt;=</span>&nbsp;<span class="num" id="2260737">1</span><span class="op" id="2260738">&lt;&lt;</span><span class="num" id="2260740">63</span>&nbsp;<span class="op" id="2260743">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260747">return</span>&nbsp;<span class="ident" id="2260754">Exp</span><span class="op" id="2260757">(</span><span class="ident" id="2260758">y</span>&nbsp;<span class="op" id="2260760">*</span>&nbsp;<span class="ident" id="2260762">Log</span><span class="op" id="2260765">(</span><span class="ident" id="2260766">x</span><span class="op" id="2260767">)</span><span class="op" id="2260768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260775">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260811">a1</span>&nbsp;<span class="op" id="2260814">:=</span>&nbsp;<span class="num" id="2260817">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260822">ae</span>&nbsp;<span class="op" id="2260825">:=</span>&nbsp;<span class="num" id="2260828">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260832">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260849">if</span>&nbsp;<span class="ident" id="2260852">yf</span>&nbsp;<span class="op" id="2260855">!=</span>&nbsp;<span class="num" id="2260858">0</span>&nbsp;<span class="op" id="2260860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2260864">if</span>&nbsp;<span class="ident" id="2260867">yf</span>&nbsp;<span class="op" id="2260870">&gt;</span>&nbsp;<span class="num" id="2260872">0.5</span>&nbsp;<span class="op" id="2260876">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260881">yf</span><span class="op" id="2260883">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260889">yi</span><span class="op" id="2260891">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2260900">a1</span>&nbsp;<span class="op" id="2260903">=</span>&nbsp;<span class="ident" id="2260905">Exp</span><span class="op" id="2260908">(</span><span class="ident" id="2260909">yf</span>&nbsp;<span class="op" id="2260912">*</span>&nbsp;<span class="ident" id="2260914">Log</span><span class="op" id="2260917">(</span><span class="ident" id="2260918">x</span><span class="op" id="2260919">)</span><span class="op" id="2260920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2260923">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260927">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260944">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2260987">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2261021">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261060">x1</span><span class="op" id="2261062">,</span>&nbsp;<span class="ident" id="2261064">xe</span>&nbsp;<span class="op" id="2261067">:=</span>&nbsp;<span class="ident" id="2261070">Frexp</span><span class="op" id="2261075">(</span><span class="ident" id="2261076">x</span><span class="op" id="2261077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261080">for</span>&nbsp;<span class="ident" id="2261084">i</span>&nbsp;<span class="op" id="2261086">:=</span>&nbsp;<span class="ident" id="2261089">int64</span><span class="op" id="2261094">(</span><span class="ident" id="2261095">yi</span><span class="op" id="2261097">)</span><span class="op" id="2261098">;</span>&nbsp;<span class="ident" id="2261100">i</span>&nbsp;<span class="op" id="2261102">!=</span>&nbsp;<span class="num" id="2261105">0</span><span class="op" id="2261106">;</span>&nbsp;<span class="ident" id="2261108">i</span>&nbsp;<span class="op" id="2261110">&gt;&gt;=</span>&nbsp;<span class="num" id="2261114">1</span>&nbsp;<span class="op" id="2261116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261120">if</span>&nbsp;<span class="ident" id="2261123">i</span><span class="op" id="2261124">&amp;</span><span class="num" id="2261125">1</span>&nbsp;<span class="op" id="2261127">==</span>&nbsp;<span class="num" id="2261130">1</span>&nbsp;<span class="op" id="2261132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261137">a1</span>&nbsp;<span class="op" id="2261140">*=</span>&nbsp;<span class="ident" id="2261143">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261149">ae</span>&nbsp;<span class="op" id="2261152">+=</span>&nbsp;<span class="ident" id="2261155">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261164">x1</span>&nbsp;<span class="op" id="2261167">*=</span>&nbsp;<span class="ident" id="2261170">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261175">xe</span>&nbsp;<span class="op" id="2261178">&lt;&lt;=</span>&nbsp;<span class="num" id="2261182">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261186">if</span>&nbsp;<span class="ident" id="2261189">x1</span>&nbsp;<span class="op" id="2261192">&lt;</span>&nbsp;<span class="num" id="2261194">.5</span>&nbsp;<span class="op" id="2261197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261202">x1</span>&nbsp;<span class="op" id="2261205">+=</span>&nbsp;<span class="ident" id="2261208">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261214">xe</span><span class="op" id="2261216">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2261228">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2261247">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2261277">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261307">if</span>&nbsp;<span class="ident" id="2261310">flip</span>&nbsp;<span class="op" id="2261315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261319">a1</span>&nbsp;<span class="op" id="2261322">=</span>&nbsp;<span class="num" id="2261324">1</span>&nbsp;<span class="op" id="2261326">/</span>&nbsp;<span class="ident" id="2261328">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2261333">ae</span>&nbsp;<span class="op" id="2261336">=</span>&nbsp;<span class="op" id="2261338">-</span><span class="ident" id="2261339">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2261343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2261346">return</span>&nbsp;<span class="ident" id="2261353">Ldexp</span><span class="op" id="2261358">(</span><span class="ident" id="2261359">a1</span><span class="op" id="2261361">,</span>&nbsp;<span class="ident" id="2261363">ae</span><span class="op" id="2261365">)</span><br>
<span class="lineno"></span><span class="op" id="2261367">}</span>
</div>
</body>
</html>
