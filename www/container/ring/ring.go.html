<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6394503">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6394558">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6394612">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6394663">//&nbsp;Package&nbsp;ring&nbsp;implements&nbsp;operations&nbsp;on&nbsp;circular&nbsp;lists.</span><br>
<span class="lineno"></span><span class="keyword" id="6394720">package</span>&nbsp;<span class="ident" id="6394728">ring</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6394734">//&nbsp;A&nbsp;Ring&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;circular&nbsp;list,&nbsp;or&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6394787">//&nbsp;Rings&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;beginning&nbsp;or&nbsp;end;&nbsp;a&nbsp;pointer&nbsp;to&nbsp;any&nbsp;ring&nbsp;element</span><br>
<span class="lineno">10</span><span class="comment" id="6394858">//&nbsp;serves&nbsp;as&nbsp;reference&nbsp;to&nbsp;the&nbsp;entire&nbsp;ring.&nbsp;Empty&nbsp;rings&nbsp;are&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="6394929">//&nbsp;as&nbsp;nil&nbsp;Ring&nbsp;pointers.&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Ring&nbsp;is&nbsp;a&nbsp;one-element</span><br>
<span class="lineno"></span><span class="comment" id="6394997">//&nbsp;ring&nbsp;with&nbsp;a&nbsp;nil&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="6395023">//</span><br>
<span class="lineno"></span><span class="keyword" id="6395026">type</span>&nbsp;<span class="ident" id="6395031">Ring</span>&nbsp;<span class="keyword" id="6395036">struct</span>&nbsp;<span class="op" id="6395043">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395046">next</span><span class="op" id="6395050">,</span>&nbsp;<span class="ident" id="6395052">prev</span>&nbsp;<span class="op" id="6395057">*</span><span class="ident" id="6395058"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395064">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6395075">interface</span><span class="op" id="6395084">{</span><span class="op" id="6395085">}</span>&nbsp;<span class="comment" id="6395087">//&nbsp;for&nbsp;use&nbsp;by&nbsp;client;&nbsp;untouched&nbsp;by&nbsp;this&nbsp;library</span><br>
<span class="lineno"></span><span class="op" id="6395135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6395138">func</span>&nbsp;<span class="op" id="6395143">(</span><span class="ident" id="6395144">r</span>&nbsp;<span class="op" id="6395146">*</span><span class="ident" id="6395147"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6395151">)</span>&nbsp;<span class="ident" id="6395153">init</span><span class="op" id="6395157">(</span><span class="op" id="6395158">)</span>&nbsp;<span class="op" id="6395160">*</span><span class="ident" id="6395161"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6395166">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395169"><a href="/container/ring/ring.go.html#6395144">r</a></span><span class="op" id="6395170">.</span><span class="ident" id="6395171">next</span>&nbsp;<span class="op" id="6395176">=</span>&nbsp;<span class="ident" id="6395178"><a href="/container/ring/ring.go.html#6395144">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395181"><a href="/container/ring/ring.go.html#6395144">r</a></span><span class="op" id="6395182">.</span><span class="ident" id="6395183">prev</span>&nbsp;<span class="op" id="6395188">=</span>&nbsp;<span class="ident" id="6395190"><a href="/container/ring/ring.go.html#6395144">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395193">return</span>&nbsp;<span class="ident" id="6395200"><a href="/container/ring/ring.go.html#6395144">r</a></span><br>
<span class="lineno"></span><span class="op" id="6395202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6395205">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6395265">func</span>&nbsp;<span class="op" id="6395270">(</span><span class="ident" id="6395271">r</span>&nbsp;<span class="op" id="6395273">*</span><span class="ident" id="6395274"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6395278">)</span>&nbsp;<span class="ident" id="6395280">Next</span><span class="op" id="6395284">(</span><span class="op" id="6395285">)</span>&nbsp;<span class="op" id="6395287">*</span><span class="ident" id="6395288"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6395293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395296">if</span>&nbsp;<span class="ident" id="6395299"><a href="/container/ring/ring.go.html#6395271">r</a></span><span class="op" id="6395300">.</span><span class="ident" id="6395301">next</span>&nbsp;<span class="op" id="6395306">==</span>&nbsp;<span class="ident" id="6395309">nil</span>&nbsp;<span class="op" id="6395313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395317">return</span>&nbsp;<span class="ident" id="6395324"><a href="/container/ring/ring.go.html#6395271">r</a></span><span class="op" id="6395325">.</span><span class="ident" id="6395326">init</span><span class="op" id="6395330">(</span><span class="op" id="6395331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395334">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395337">return</span>&nbsp;<span class="ident" id="6395344"><a href="/container/ring/ring.go.html#6395271">r</a></span><span class="op" id="6395345">.</span><span class="ident" id="6395346">next</span><br>
<span class="lineno"></span><span class="op" id="6395351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6395354">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6395418">func</span>&nbsp;<span class="op" id="6395423">(</span><span class="ident" id="6395424">r</span>&nbsp;<span class="op" id="6395426">*</span><span class="ident" id="6395427"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6395431">)</span>&nbsp;<span class="ident" id="6395433">Prev</span><span class="op" id="6395437">(</span><span class="op" id="6395438">)</span>&nbsp;<span class="op" id="6395440">*</span><span class="ident" id="6395441"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6395446">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395449">if</span>&nbsp;<span class="ident" id="6395452"><a href="/container/ring/ring.go.html#6395424">r</a></span><span class="op" id="6395453">.</span><span class="ident" id="6395454">next</span>&nbsp;<span class="op" id="6395459">==</span>&nbsp;<span class="ident" id="6395462">nil</span>&nbsp;<span class="op" id="6395466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395470">return</span>&nbsp;<span class="ident" id="6395477"><a href="/container/ring/ring.go.html#6395424">r</a></span><span class="op" id="6395478">.</span><span class="ident" id="6395479">init</span><span class="op" id="6395483">(</span><span class="op" id="6395484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395490">return</span>&nbsp;<span class="ident" id="6395497"><a href="/container/ring/ring.go.html#6395424">r</a></span><span class="op" id="6395498">.</span><span class="ident" id="6395499">prev</span><br>
<span class="lineno"></span><span class="op" id="6395504">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6395507">//&nbsp;Move&nbsp;moves&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;backward&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;or&nbsp;forward&nbsp;(n&nbsp;&gt;=&nbsp;0)</span><br>
<span class="lineno"></span><span class="comment" id="6395579">//&nbsp;in&nbsp;the&nbsp;ring&nbsp;and&nbsp;returns&nbsp;that&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="comment" id="6395646">//</span><br>
<span class="lineno"></span><span class="keyword" id="6395649">func</span>&nbsp;<span class="op" id="6395654">(</span><span class="ident" id="6395655">r</span>&nbsp;<span class="op" id="6395657">*</span><span class="ident" id="6395658"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6395662">)</span>&nbsp;<span class="ident" id="6395664">Move</span><span class="op" id="6395668">(</span><span class="ident" id="6395669">n</span>&nbsp;<span class="builtintype" id="6395671">int</span><span class="op" id="6395674">)</span>&nbsp;<span class="op" id="6395676">*</span><span class="ident" id="6395677"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6395682">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395685">if</span>&nbsp;<span class="ident" id="6395688"><a href="/container/ring/ring.go.html#6395655">r</a></span><span class="op" id="6395689">.</span><span class="ident" id="6395690">next</span>&nbsp;<span class="op" id="6395695">==</span>&nbsp;<span class="ident" id="6395698">nil</span>&nbsp;<span class="op" id="6395702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395706">return</span>&nbsp;<span class="ident" id="6395713"><a href="/container/ring/ring.go.html#6395655">r</a></span><span class="op" id="6395714">.</span><span class="ident" id="6395715">init</span><span class="op" id="6395719">(</span><span class="op" id="6395720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395726">switch</span>&nbsp;<span class="op" id="6395733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395736">case</span>&nbsp;<span class="ident" id="6395741"><a href="/container/ring/ring.go.html#6395669">n</a></span>&nbsp;<span class="op" id="6395743">&lt;</span>&nbsp;<span class="num" id="6395745">0</span><span class="op" id="6395746">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395750">for</span>&nbsp;<span class="op" id="6395754">;</span>&nbsp;<span class="ident" id="6395756"><a href="/container/ring/ring.go.html#6395669">n</a></span>&nbsp;<span class="op" id="6395758">&lt;</span>&nbsp;<span class="num" id="6395760">0</span><span class="op" id="6395761">;</span>&nbsp;<span class="ident" id="6395763"><a href="/container/ring/ring.go.html#6395669">n</a></span><span class="op" id="6395764">++</span>&nbsp;<span class="op" id="6395767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395772"><a href="/container/ring/ring.go.html#6395655">r</a></span>&nbsp;<span class="op" id="6395774">=</span>&nbsp;<span class="ident" id="6395776"><a href="/container/ring/ring.go.html#6395655">r</a></span><span class="op" id="6395777">.</span><span class="ident" id="6395778">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395788">case</span>&nbsp;<span class="ident" id="6395793"><a href="/container/ring/ring.go.html#6395669">n</a></span>&nbsp;<span class="op" id="6395795">&gt;</span>&nbsp;<span class="num" id="6395797">0</span><span class="op" id="6395798">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395802">for</span>&nbsp;<span class="op" id="6395806">;</span>&nbsp;<span class="ident" id="6395808"><a href="/container/ring/ring.go.html#6395669">n</a></span>&nbsp;<span class="op" id="6395810">&gt;</span>&nbsp;<span class="num" id="6395812">0</span><span class="op" id="6395813">;</span>&nbsp;<span class="ident" id="6395815"><a href="/container/ring/ring.go.html#6395669">n</a></span><span class="op" id="6395816">--</span>&nbsp;<span class="op" id="6395819">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395824"><a href="/container/ring/ring.go.html#6395655">r</a></span>&nbsp;<span class="op" id="6395826">=</span>&nbsp;<span class="ident" id="6395828"><a href="/container/ring/ring.go.html#6395655">r</a></span><span class="op" id="6395829">.</span><span class="ident" id="6395830">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395843">return</span>&nbsp;<span class="ident" id="6395850"><a href="/container/ring/ring.go.html#6395655">r</a></span><br>
<span class="lineno"></span><span class="op" id="6395852">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6395855">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;ring&nbsp;of&nbsp;n&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6395892">func</span>&nbsp;<span class="ident" id="6395897">New</span><span class="op" id="6395900">(</span><span class="ident" id="6395901">n</span>&nbsp;<span class="builtintype" id="6395903">int</span><span class="op" id="6395906">)</span>&nbsp;<span class="op" id="6395908">*</span><span class="ident" id="6395909"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6395914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395917">if</span>&nbsp;<span class="ident" id="6395920"><a href="/container/ring/ring.go.html#6395901">n</a></span>&nbsp;<span class="op" id="6395922">&lt;=</span>&nbsp;<span class="num" id="6395925">0</span>&nbsp;<span class="op" id="6395927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395931">return</span>&nbsp;<span class="ident" id="6395938">nil</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395946">r</span>&nbsp;<span class="op" id="6395948">:=</span>&nbsp;<span class="builtinfunc" id="6395951">new</span><span class="op" id="6395954">(</span><span class="ident" id="6395955"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6395959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395962">p</span>&nbsp;<span class="op" id="6395964">:=</span>&nbsp;<span class="ident" id="6395967"><a href="/container/ring/ring.go.html#6395946">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395970">for</span>&nbsp;<span class="ident" id="6395974">i</span>&nbsp;<span class="op" id="6395976">:=</span>&nbsp;<span class="num" id="6395979">1</span><span class="op" id="6395980">;</span>&nbsp;<span class="ident" id="6395982"><a href="/container/ring/ring.go.html#6395974">i</a></span>&nbsp;<span class="op" id="6395984">&lt;</span>&nbsp;<span class="ident" id="6395986"><a href="/container/ring/ring.go.html#6395901">n</a></span><span class="op" id="6395987">;</span>&nbsp;<span class="ident" id="6395989"><a href="/container/ring/ring.go.html#6395974">i</a></span><span class="op" id="6395990">++</span>&nbsp;<span class="op" id="6395993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395997"><a href="/container/ring/ring.go.html#6395962">p</a></span><span class="op" id="6395998">.</span><span class="ident" id="6395999">next</span>&nbsp;<span class="op" id="6396004">=</span>&nbsp;<span class="op" id="6396006">&amp;</span><span class="ident" id="6396007"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6396011">{</span><span class="ident" id="6396012">prev</span><span class="op" id="6396016">:</span>&nbsp;<span class="ident" id="6396018"><a href="/container/ring/ring.go.html#6395962">p</a></span><span class="op" id="6396019">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396023"><a href="/container/ring/ring.go.html#6395962">p</a></span>&nbsp;<span class="op" id="6396025">=</span>&nbsp;<span class="ident" id="6396027"><a href="/container/ring/ring.go.html#6395962">p</a></span><span class="op" id="6396028">.</span><span class="ident" id="6396029">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396038"><a href="/container/ring/ring.go.html#6395962">p</a></span><span class="op" id="6396039">.</span><span class="ident" id="6396040">next</span>&nbsp;<span class="op" id="6396045">=</span>&nbsp;<span class="ident" id="6396047"><a href="/container/ring/ring.go.html#6395946">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396050"><a href="/container/ring/ring.go.html#6395946">r</a></span><span class="op" id="6396051">.</span><span class="ident" id="6396052">prev</span>&nbsp;<span class="op" id="6396057">=</span>&nbsp;<span class="ident" id="6396059"><a href="/container/ring/ring.go.html#6395962">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396062">return</span>&nbsp;<span class="ident" id="6396069"><a href="/container/ring/ring.go.html#6395946">r</a></span><br>
<span class="lineno">75</span><span class="op" id="6396071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6396074">//&nbsp;Link&nbsp;connects&nbsp;ring&nbsp;r&nbsp;with&nbsp;ring&nbsp;s&nbsp;such&nbsp;that&nbsp;r.Next()</span><br>
<span class="lineno"></span><span class="comment" id="6396129">//&nbsp;becomes&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next().</span><br>
<span class="lineno"></span><span class="comment" id="6396187">//&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">80</span><span class="comment" id="6396211">//</span><br>
<span class="lineno"></span><span class="comment" id="6396214">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;the&nbsp;same&nbsp;ring,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6396260">//&nbsp;them&nbsp;removes&nbsp;the&nbsp;elements&nbsp;between&nbsp;r&nbsp;and&nbsp;s&nbsp;from&nbsp;the&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6396320">//&nbsp;The&nbsp;removed&nbsp;elements&nbsp;form&nbsp;a&nbsp;subring&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6396379">//&nbsp;reference&nbsp;to&nbsp;that&nbsp;subring&nbsp;(if&nbsp;no&nbsp;elements&nbsp;were&nbsp;removed,</span><br>
<span class="lineno">85</span><span class="comment" id="6396438">//&nbsp;the&nbsp;result&nbsp;is&nbsp;still&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next(),</span><br>
<span class="lineno"></span><span class="comment" id="6396494">//&nbsp;and&nbsp;not&nbsp;nil).</span><br>
<span class="lineno"></span><span class="comment" id="6396511">//</span><br>
<span class="lineno"></span><span class="comment" id="6396514">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;different&nbsp;rings,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6396562">//&nbsp;them&nbsp;creates&nbsp;a&nbsp;single&nbsp;ring&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;s&nbsp;inserted</span><br>
<span class="lineno">90</span><span class="comment" id="6396624">//&nbsp;after&nbsp;r.&nbsp;The&nbsp;result&nbsp;points&nbsp;to&nbsp;the&nbsp;element&nbsp;following&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6396683">//&nbsp;last&nbsp;element&nbsp;of&nbsp;s&nbsp;after&nbsp;insertion.</span><br>
<span class="lineno"></span><span class="comment" id="6396721">//</span><br>
<span class="lineno"></span><span class="keyword" id="6396724">func</span>&nbsp;<span class="op" id="6396729">(</span><span class="ident" id="6396730">r</span>&nbsp;<span class="op" id="6396732">*</span><span class="ident" id="6396733"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6396737">)</span>&nbsp;<span class="ident" id="6396739">Link</span><span class="op" id="6396743">(</span><span class="ident" id="6396744">s</span>&nbsp;<span class="op" id="6396746">*</span><span class="ident" id="6396747"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6396751">)</span>&nbsp;<span class="op" id="6396753">*</span><span class="ident" id="6396754"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6396759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396762">n</span>&nbsp;<span class="op" id="6396764">:=</span>&nbsp;<span class="ident" id="6396767"><a href="/container/ring/ring.go.html#6396730">r</a></span><span class="op" id="6396768">.</span><span class="ident" id="6396769">Next</span><span class="op" id="6396773">(</span><span class="op" id="6396774">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396777">if</span>&nbsp;<span class="ident" id="6396780"><a href="/container/ring/ring.go.html#6396744">s</a></span>&nbsp;<span class="op" id="6396782">!=</span>&nbsp;<span class="ident" id="6396785">nil</span>&nbsp;<span class="op" id="6396789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396793">p</span>&nbsp;<span class="op" id="6396795">:=</span>&nbsp;<span class="ident" id="6396798"><a href="/container/ring/ring.go.html#6396744">s</a></span><span class="op" id="6396799">.</span><span class="ident" id="6396800">Prev</span><span class="op" id="6396804">(</span><span class="op" id="6396805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6396809">//&nbsp;Note:&nbsp;Cannot&nbsp;use&nbsp;multiple&nbsp;assignment&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6396859">//&nbsp;evaluation&nbsp;order&nbsp;of&nbsp;LHS&nbsp;is&nbsp;not&nbsp;specified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396906"><a href="/container/ring/ring.go.html#6396730">r</a></span><span class="op" id="6396907">.</span><span class="ident" id="6396908">next</span>&nbsp;<span class="op" id="6396913">=</span>&nbsp;<span class="ident" id="6396915"><a href="/container/ring/ring.go.html#6396744">s</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396919"><a href="/container/ring/ring.go.html#6396744">s</a></span><span class="op" id="6396920">.</span><span class="ident" id="6396921">prev</span>&nbsp;<span class="op" id="6396926">=</span>&nbsp;<span class="ident" id="6396928"><a href="/container/ring/ring.go.html#6396730">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396932"><a href="/container/ring/ring.go.html#6396762">n</a></span><span class="op" id="6396933">.</span><span class="ident" id="6396934">prev</span>&nbsp;<span class="op" id="6396939">=</span>&nbsp;<span class="ident" id="6396941"><a href="/container/ring/ring.go.html#6396793">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396945"><a href="/container/ring/ring.go.html#6396793">p</a></span><span class="op" id="6396946">.</span><span class="ident" id="6396947">next</span>&nbsp;<span class="op" id="6396952">=</span>&nbsp;<span class="ident" id="6396954"><a href="/container/ring/ring.go.html#6396762">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396960">return</span>&nbsp;<span class="ident" id="6396967"><a href="/container/ring/ring.go.html#6396762">n</a></span><br>
<span class="lineno">105</span><span class="op" id="6396969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6396972">//&nbsp;Unlink&nbsp;removes&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;from&nbsp;the&nbsp;ring&nbsp;r,&nbsp;starting</span><br>
<span class="lineno"></span><span class="comment" id="6397037">//&nbsp;at&nbsp;r.Next().&nbsp;If&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;==&nbsp;0,&nbsp;r&nbsp;remains&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="6397095">//&nbsp;The&nbsp;result&nbsp;is&nbsp;the&nbsp;removed&nbsp;subring.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">110</span><span class="comment" id="6397154">//</span><br>
<span class="lineno"></span><span class="keyword" id="6397157">func</span>&nbsp;<span class="op" id="6397162">(</span><span class="ident" id="6397163">r</span>&nbsp;<span class="op" id="6397165">*</span><span class="ident" id="6397166"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6397170">)</span>&nbsp;<span class="ident" id="6397172">Unlink</span><span class="op" id="6397178">(</span><span class="ident" id="6397179">n</span>&nbsp;<span class="builtintype" id="6397181">int</span><span class="op" id="6397184">)</span>&nbsp;<span class="op" id="6397186">*</span><span class="ident" id="6397187"><a href="/container/ring/ring.go.html#6395031">Ring</a></span>&nbsp;<span class="op" id="6397192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397195">if</span>&nbsp;<span class="ident" id="6397198"><a href="/container/ring/ring.go.html#6397179">n</a></span>&nbsp;<span class="op" id="6397200">&lt;=</span>&nbsp;<span class="num" id="6397203">0</span>&nbsp;<span class="op" id="6397205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397209">return</span>&nbsp;<span class="ident" id="6397216">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397221">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397224">return</span>&nbsp;<span class="ident" id="6397231"><a href="/container/ring/ring.go.html#6397163">r</a></span><span class="op" id="6397232">.</span><span class="ident" id="6397233">Link</span><span class="op" id="6397237">(</span><span class="ident" id="6397238"><a href="/container/ring/ring.go.html#6397163">r</a></span><span class="op" id="6397239">.</span><span class="ident" id="6397240">Move</span><span class="op" id="6397244">(</span><span class="ident" id="6397245"><a href="/container/ring/ring.go.html#6397179">n</a></span>&nbsp;<span class="op" id="6397247">+</span>&nbsp;<span class="num" id="6397249">1</span><span class="op" id="6397250">)</span><span class="op" id="6397251">)</span><br>
<span class="lineno"></span><span class="op" id="6397253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6397256">//&nbsp;Len&nbsp;computes&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;ring&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6397306">//&nbsp;It&nbsp;executes&nbsp;in&nbsp;time&nbsp;proportional&nbsp;to&nbsp;the&nbsp;number&nbsp;of&nbsp;elements.</span><br>
<span class="lineno">120</span><span class="comment" id="6397369">//</span><br>
<span class="lineno"></span><span class="keyword" id="6397372">func</span>&nbsp;<span class="op" id="6397377">(</span><span class="ident" id="6397378">r</span>&nbsp;<span class="op" id="6397380">*</span><span class="ident" id="6397381"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6397385">)</span>&nbsp;<span class="ident" id="6397387">Len</span><span class="op" id="6397390">(</span><span class="op" id="6397391">)</span>&nbsp;<span class="builtintype" id="6397393">int</span>&nbsp;<span class="op" id="6397397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397400">n</span>&nbsp;<span class="op" id="6397402">:=</span>&nbsp;<span class="num" id="6397405">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397408">if</span>&nbsp;<span class="ident" id="6397411"><a href="/container/ring/ring.go.html#6397378">r</a></span>&nbsp;<span class="op" id="6397413">!=</span>&nbsp;<span class="ident" id="6397416">nil</span>&nbsp;<span class="op" id="6397420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397424"><a href="/container/ring/ring.go.html#6397400">n</a></span>&nbsp;<span class="op" id="6397426">=</span>&nbsp;<span class="num" id="6397428">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397432">for</span>&nbsp;<span class="ident" id="6397436">p</span>&nbsp;<span class="op" id="6397438">:=</span>&nbsp;<span class="ident" id="6397441"><a href="/container/ring/ring.go.html#6397378">r</a></span><span class="op" id="6397442">.</span><span class="ident" id="6397443">Next</span><span class="op" id="6397447">(</span><span class="op" id="6397448">)</span><span class="op" id="6397449">;</span>&nbsp;<span class="ident" id="6397451"><a href="/container/ring/ring.go.html#6397436">p</a></span>&nbsp;<span class="op" id="6397453">!=</span>&nbsp;<span class="ident" id="6397456"><a href="/container/ring/ring.go.html#6397378">r</a></span><span class="op" id="6397457">;</span>&nbsp;<span class="ident" id="6397459"><a href="/container/ring/ring.go.html#6397436">p</a></span>&nbsp;<span class="op" id="6397461">=</span>&nbsp;<span class="ident" id="6397463"><a href="/container/ring/ring.go.html#6397436">p</a></span><span class="op" id="6397464">.</span><span class="ident" id="6397465">next</span>&nbsp;<span class="op" id="6397470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397475"><a href="/container/ring/ring.go.html#6397400">n</a></span><span class="op" id="6397476">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397487">return</span>&nbsp;<span class="ident" id="6397494"><a href="/container/ring/ring.go.html#6397400">n</a></span><br>
<span class="lineno">130</span><span class="op" id="6397496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6397499">//&nbsp;Do&nbsp;calls&nbsp;function&nbsp;f&nbsp;on&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;ring,&nbsp;in&nbsp;forward&nbsp;order.</span><br>
<span class="lineno"></span><span class="comment" id="6397569">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Do&nbsp;is&nbsp;undefined&nbsp;if&nbsp;f&nbsp;changes&nbsp;*r.</span><br>
<span class="lineno"></span><span class="keyword" id="6397621">func</span>&nbsp;<span class="op" id="6397626">(</span><span class="ident" id="6397627">r</span>&nbsp;<span class="op" id="6397629">*</span><span class="ident" id="6397630"><a href="/container/ring/ring.go.html#6395031">Ring</a></span><span class="op" id="6397634">)</span>&nbsp;<span class="ident" id="6397636">Do</span><span class="op" id="6397638">(</span><span class="ident" id="6397639">f</span>&nbsp;<span class="keyword" id="6397641">func</span><span class="op" id="6397645">(</span><span class="keyword" id="6397646">interface</span><span class="op" id="6397655">{</span><span class="op" id="6397656">}</span><span class="op" id="6397657">)</span><span class="op" id="6397658">)</span>&nbsp;<span class="op" id="6397660">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397663">if</span>&nbsp;<span class="ident" id="6397666"><a href="/container/ring/ring.go.html#6397627">r</a></span>&nbsp;<span class="op" id="6397668">!=</span>&nbsp;<span class="ident" id="6397671">nil</span>&nbsp;<span class="op" id="6397675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397679"><a href="/container/ring/ring.go.html#6397639">f</a></span><span class="op" id="6397680">(</span><span class="ident" id="6397681"><a href="/container/ring/ring.go.html#6397627">r</a></span><span class="op" id="6397682">.</span><span class="ident" id="6397683">Value</span><span class="op" id="6397688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397692">for</span>&nbsp;<span class="ident" id="6397696">p</span>&nbsp;<span class="op" id="6397698">:=</span>&nbsp;<span class="ident" id="6397701"><a href="/container/ring/ring.go.html#6397627">r</a></span><span class="op" id="6397702">.</span><span class="ident" id="6397703">Next</span><span class="op" id="6397707">(</span><span class="op" id="6397708">)</span><span class="op" id="6397709">;</span>&nbsp;<span class="ident" id="6397711"><a href="/container/ring/ring.go.html#6397696">p</a></span>&nbsp;<span class="op" id="6397713">!=</span>&nbsp;<span class="ident" id="6397716"><a href="/container/ring/ring.go.html#6397627">r</a></span><span class="op" id="6397717">;</span>&nbsp;<span class="ident" id="6397719"><a href="/container/ring/ring.go.html#6397696">p</a></span>&nbsp;<span class="op" id="6397721">=</span>&nbsp;<span class="ident" id="6397723"><a href="/container/ring/ring.go.html#6397696">p</a></span><span class="op" id="6397724">.</span><span class="ident" id="6397725">next</span>&nbsp;<span class="op" id="6397730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397735"><a href="/container/ring/ring.go.html#6397639">f</a></span><span class="op" id="6397736">(</span><span class="ident" id="6397737"><a href="/container/ring/ring.go.html#6397696">p</a></span><span class="op" id="6397738">.</span><span class="ident" id="6397739">Value</span><span class="op" id="6397744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397748">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397751">}</span><br>
<span class="lineno"></span><span class="op" id="6397753">}</span>
</div>
</body>
</html>
