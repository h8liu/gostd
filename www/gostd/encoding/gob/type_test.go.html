<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8329588">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8329643">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8329697">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8329748">package</span>&nbsp;<span class="ident" id="8329756">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329761">import</span>&nbsp;<span class="op" id="8329768">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8329771">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8329780">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8329791">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8329801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329804">type</span>&nbsp;<span class="ident" id="8329809">typeT</span>&nbsp;<span class="keyword" id="8329815">struct</span>&nbsp;<span class="op" id="8329822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329825">id</span>&nbsp;&nbsp;<span class="ident" id="8329829">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329837">str</span>&nbsp;<span class="builtintype" id="8329841">string</span><br>
<span class="lineno"></span><span class="op" id="8329848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329851">var</span>&nbsp;<span class="ident" id="8329855">basicTypes</span>&nbsp;<span class="op" id="8329866">=</span>&nbsp;<span class="op" id="8329868">[</span><span class="op" id="8329869">]</span><span class="ident" id="8329870">typeT</span><span class="op" id="8329875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329878">{</span><span class="ident" id="8329879">tBool</span><span class="op" id="8329884">,</span>&nbsp;<span class="string" id="8329886">&#34;bool&#34;</span><span class="op" id="8329892">}</span><span class="op" id="8329893">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329896">{</span><span class="ident" id="8329897">tInt</span><span class="op" id="8329901">,</span>&nbsp;<span class="string" id="8329903">&#34;int&#34;</span><span class="op" id="8329908">}</span><span class="op" id="8329909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329912">{</span><span class="ident" id="8329913">tUint</span><span class="op" id="8329918">,</span>&nbsp;<span class="string" id="8329920">&#34;uint&#34;</span><span class="op" id="8329926">}</span><span class="op" id="8329927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329930">{</span><span class="ident" id="8329931">tFloat</span><span class="op" id="8329937">,</span>&nbsp;<span class="string" id="8329939">&#34;float&#34;</span><span class="op" id="8329946">}</span><span class="op" id="8329947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329950">{</span><span class="ident" id="8329951">tBytes</span><span class="op" id="8329957">,</span>&nbsp;<span class="string" id="8329959">&#34;bytes&#34;</span><span class="op" id="8329966">}</span><span class="op" id="8329967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329970">{</span><span class="ident" id="8329971">tString</span><span class="op" id="8329978">,</span>&nbsp;<span class="string" id="8329980">&#34;string&#34;</span><span class="op" id="8329988">}</span><span class="op" id="8329989">,</span><br>
<span class="lineno">25</span><span class="op" id="8329991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329994">func</span>&nbsp;<span class="ident" id="8329999">getTypeUnlocked</span><span class="op" id="8330014">(</span><span class="ident" id="8330015">name</span>&nbsp;<span class="builtintype" id="8330020">string</span><span class="op" id="8330026">,</span>&nbsp;<span class="ident" id="8330028">rt</span>&nbsp;<span class="ident" id="8330031">reflect</span><span class="op" id="8330038">.</span><span class="ident" id="8330039">Type</span><span class="op" id="8330043">)</span>&nbsp;<span class="ident" id="8330045">gobType</span>&nbsp;<span class="op" id="8330053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330056">typeLock</span><span class="op" id="8330064">.</span><span class="ident" id="8330065">Lock</span><span class="op" id="8330069">(</span><span class="op" id="8330070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330073">defer</span>&nbsp;<span class="ident" id="8330079">typeLock</span><span class="op" id="8330087">.</span><span class="ident" id="8330088">Unlock</span><span class="op" id="8330094">(</span><span class="op" id="8330095">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330098">t</span><span class="op" id="8330099">,</span>&nbsp;<span class="ident" id="8330101">err</span>&nbsp;<span class="op" id="8330105">:=</span>&nbsp;<span class="ident" id="8330108">getBaseType</span><span class="op" id="8330119">(</span><span class="ident" id="8330120">name</span><span class="op" id="8330124">,</span>&nbsp;<span class="ident" id="8330126">rt</span><span class="op" id="8330128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330131">if</span>&nbsp;<span class="ident" id="8330134">err</span>&nbsp;<span class="op" id="8330138">!=</span>&nbsp;<span class="builtintype" id="8330141">nil</span>&nbsp;<span class="op" id="8330145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8330149">panic</span><span class="op" id="8330154">(</span><span class="string" id="8330155">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8330175">+</span>&nbsp;<span class="ident" id="8330177">err</span><span class="op" id="8330180">.</span><span class="ident" id="8330181">Error</span><span class="op" id="8330186">(</span><span class="op" id="8330187">)</span><span class="op" id="8330188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330194">return</span>&nbsp;<span class="ident" id="8330201">t</span><br>
<span class="lineno">35</span><span class="op" id="8330203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8330206">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8330223">func</span>&nbsp;<span class="ident" id="8330228">TestBasic</span><span class="op" id="8330237">(</span><span class="ident" id="8330238">t</span>&nbsp;<span class="op" id="8330240">*</span><span class="ident" id="8330241">testing</span><span class="op" id="8330248">.</span><span class="ident" id="8330249">T</span><span class="op" id="8330250">)</span>&nbsp;<span class="op" id="8330252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330255">for</span>&nbsp;<span class="ident" id="8330259">_</span><span class="op" id="8330260">,</span>&nbsp;<span class="ident" id="8330262">tt</span>&nbsp;<span class="op" id="8330265">:=</span>&nbsp;<span class="keyword" id="8330268">range</span>&nbsp;<span class="ident" id="8330274">basicTypes</span>&nbsp;<span class="op" id="8330285">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330289">if</span>&nbsp;<span class="ident" id="8330292">tt</span><span class="op" id="8330294">.</span><span class="ident" id="8330295">id</span><span class="op" id="8330297">.</span><span class="builtintype" id="8330298">string</span><span class="op" id="8330304">(</span><span class="op" id="8330305">)</span>&nbsp;<span class="op" id="8330307">!=</span>&nbsp;<span class="ident" id="8330310">tt</span><span class="op" id="8330312">.</span><span class="ident" id="8330313">str</span>&nbsp;<span class="op" id="8330317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330322">t</span><span class="op" id="8330323">.</span><span class="ident" id="8330324">Errorf</span><span class="op" id="8330330">(</span><span class="string" id="8330331">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8330362">,</span>&nbsp;<span class="ident" id="8330364">tt</span><span class="op" id="8330366">.</span><span class="ident" id="8330367">str</span><span class="op" id="8330370">,</span>&nbsp;<span class="ident" id="8330372">tt</span><span class="op" id="8330374">.</span><span class="ident" id="8330375">id</span><span class="op" id="8330377">.</span><span class="builtintype" id="8330378">string</span><span class="op" id="8330384">(</span><span class="op" id="8330385">)</span><span class="op" id="8330386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330394">if</span>&nbsp;<span class="ident" id="8330397">tt</span><span class="op" id="8330399">.</span><span class="ident" id="8330400">id</span>&nbsp;<span class="op" id="8330403">==</span>&nbsp;<span class="num" id="8330406">0</span>&nbsp;<span class="op" id="8330408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330413">t</span><span class="op" id="8330414">.</span><span class="ident" id="8330415">Errorf</span><span class="op" id="8330421">(</span><span class="string" id="8330422">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8330441">,</span>&nbsp;<span class="ident" id="8330443">tt</span><span class="op" id="8330445">.</span><span class="ident" id="8330446">str</span><span class="op" id="8330449">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330456">}</span><br>
<span class="lineno"></span><span class="op" id="8330458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8330461">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8330529">func</span>&nbsp;<span class="ident" id="8330534">TestReregistration</span><span class="op" id="8330552">(</span><span class="ident" id="8330553">t</span>&nbsp;<span class="op" id="8330555">*</span><span class="ident" id="8330556">testing</span><span class="op" id="8330563">.</span><span class="ident" id="8330564">T</span><span class="op" id="8330565">)</span>&nbsp;<span class="op" id="8330567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330570">newtyp</span>&nbsp;<span class="op" id="8330577">:=</span>&nbsp;<span class="ident" id="8330580">getTypeUnlocked</span><span class="op" id="8330595">(</span><span class="string" id="8330596">&#34;int&#34;</span><span class="op" id="8330601">,</span>&nbsp;<span class="ident" id="8330603">reflect</span><span class="op" id="8330610">.</span><span class="ident" id="8330611">TypeOf</span><span class="op" id="8330617">(</span><span class="builtintype" id="8330618">int</span><span class="op" id="8330621">(</span><span class="num" id="8330622">0</span><span class="op" id="8330623">)</span><span class="op" id="8330624">)</span><span class="op" id="8330625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330628">if</span>&nbsp;<span class="ident" id="8330631">newtyp</span>&nbsp;<span class="op" id="8330638">!=</span>&nbsp;<span class="ident" id="8330641">tInt</span><span class="op" id="8330645">.</span><span class="ident" id="8330646">gobType</span><span class="op" id="8330653">(</span><span class="op" id="8330654">)</span>&nbsp;<span class="op" id="8330656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330660">t</span><span class="op" id="8330661">.</span><span class="ident" id="8330662">Errorf</span><span class="op" id="8330668">(</span><span class="string" id="8330669">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8330704">,</span>&nbsp;<span class="ident" id="8330706">newtyp</span><span class="op" id="8330712">.</span><span class="builtintype" id="8330713">string</span><span class="op" id="8330719">(</span><span class="op" id="8330720">)</span><span class="op" id="8330721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330724">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330727">newtyp</span>&nbsp;<span class="op" id="8330734">=</span>&nbsp;<span class="ident" id="8330736">getTypeUnlocked</span><span class="op" id="8330751">(</span><span class="string" id="8330752">&#34;uint&#34;</span><span class="op" id="8330758">,</span>&nbsp;<span class="ident" id="8330760">reflect</span><span class="op" id="8330767">.</span><span class="ident" id="8330768">TypeOf</span><span class="op" id="8330774">(</span><span class="builtintype" id="8330775">uint</span><span class="op" id="8330779">(</span><span class="num" id="8330780">0</span><span class="op" id="8330781">)</span><span class="op" id="8330782">)</span><span class="op" id="8330783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330786">if</span>&nbsp;<span class="ident" id="8330789">newtyp</span>&nbsp;<span class="op" id="8330796">!=</span>&nbsp;<span class="ident" id="8330799">tUint</span><span class="op" id="8330804">.</span><span class="ident" id="8330805">gobType</span><span class="op" id="8330812">(</span><span class="op" id="8330813">)</span>&nbsp;<span class="op" id="8330815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330819">t</span><span class="op" id="8330820">.</span><span class="ident" id="8330821">Errorf</span><span class="op" id="8330827">(</span><span class="string" id="8330828">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8330863">,</span>&nbsp;<span class="ident" id="8330865">newtyp</span><span class="op" id="8330871">.</span><span class="builtintype" id="8330872">string</span><span class="op" id="8330878">(</span><span class="op" id="8330879">)</span><span class="op" id="8330880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8330883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330886">newtyp</span>&nbsp;<span class="op" id="8330893">=</span>&nbsp;<span class="ident" id="8330895">getTypeUnlocked</span><span class="op" id="8330910">(</span><span class="string" id="8330911">&#34;string&#34;</span><span class="op" id="8330919">,</span>&nbsp;<span class="ident" id="8330921">reflect</span><span class="op" id="8330928">.</span><span class="ident" id="8330929">TypeOf</span><span class="op" id="8330935">(</span><span class="string" id="8330936">&#34;hello&#34;</span><span class="op" id="8330943">)</span><span class="op" id="8330944">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8330947">if</span>&nbsp;<span class="ident" id="8330950">newtyp</span>&nbsp;<span class="op" id="8330957">!=</span>&nbsp;<span class="ident" id="8330960">tString</span><span class="op" id="8330967">.</span><span class="ident" id="8330968">gobType</span><span class="op" id="8330975">(</span><span class="op" id="8330976">)</span>&nbsp;<span class="op" id="8330978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8330982">t</span><span class="op" id="8330983">.</span><span class="ident" id="8330984">Errorf</span><span class="op" id="8330990">(</span><span class="string" id="8330991">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8331026">,</span>&nbsp;<span class="ident" id="8331028">newtyp</span><span class="op" id="8331034">.</span><span class="builtintype" id="8331035">string</span><span class="op" id="8331041">(</span><span class="op" id="8331042">)</span><span class="op" id="8331043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331046">}</span><br>
<span class="lineno"></span><span class="op" id="8331048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8331051">func</span>&nbsp;<span class="ident" id="8331056">TestArrayType</span><span class="op" id="8331069">(</span><span class="ident" id="8331070">t</span>&nbsp;<span class="op" id="8331072">*</span><span class="ident" id="8331073">testing</span><span class="op" id="8331080">.</span><span class="ident" id="8331081">T</span><span class="op" id="8331082">)</span>&nbsp;<span class="op" id="8331084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331087">var</span>&nbsp;<span class="ident" id="8331091">a3</span>&nbsp;<span class="op" id="8331094">[</span><span class="num" id="8331095">3</span><span class="op" id="8331096">]</span><span class="builtintype" id="8331097">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331102">a3int</span>&nbsp;<span class="op" id="8331108">:=</span>&nbsp;<span class="ident" id="8331111">getTypeUnlocked</span><span class="op" id="8331126">(</span><span class="string" id="8331127">&#34;foo&#34;</span><span class="op" id="8331132">,</span>&nbsp;<span class="ident" id="8331134">reflect</span><span class="op" id="8331141">.</span><span class="ident" id="8331142">TypeOf</span><span class="op" id="8331148">(</span><span class="ident" id="8331149">a3</span><span class="op" id="8331151">)</span><span class="op" id="8331152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331155">newa3int</span>&nbsp;<span class="op" id="8331164">:=</span>&nbsp;<span class="ident" id="8331167">getTypeUnlocked</span><span class="op" id="8331182">(</span><span class="string" id="8331183">&#34;bar&#34;</span><span class="op" id="8331188">,</span>&nbsp;<span class="ident" id="8331190">reflect</span><span class="op" id="8331197">.</span><span class="ident" id="8331198">TypeOf</span><span class="op" id="8331204">(</span><span class="ident" id="8331205">a3</span><span class="op" id="8331207">)</span><span class="op" id="8331208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331211">if</span>&nbsp;<span class="ident" id="8331214">a3int</span>&nbsp;<span class="op" id="8331220">!=</span>&nbsp;<span class="ident" id="8331223">newa3int</span>&nbsp;<span class="op" id="8331232">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331236">t</span><span class="op" id="8331237">.</span><span class="ident" id="8331238">Errorf</span><span class="op" id="8331244">(</span><span class="string" id="8331245">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8331293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331299">var</span>&nbsp;<span class="ident" id="8331303">a4</span>&nbsp;<span class="op" id="8331306">[</span><span class="num" id="8331307">4</span><span class="op" id="8331308">]</span><span class="builtintype" id="8331309">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331314">a4int</span>&nbsp;<span class="op" id="8331320">:=</span>&nbsp;<span class="ident" id="8331323">getTypeUnlocked</span><span class="op" id="8331338">(</span><span class="string" id="8331339">&#34;goo&#34;</span><span class="op" id="8331344">,</span>&nbsp;<span class="ident" id="8331346">reflect</span><span class="op" id="8331353">.</span><span class="ident" id="8331354">TypeOf</span><span class="op" id="8331360">(</span><span class="ident" id="8331361">a4</span><span class="op" id="8331363">)</span><span class="op" id="8331364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331367">if</span>&nbsp;<span class="ident" id="8331370">a3int</span>&nbsp;<span class="op" id="8331376">==</span>&nbsp;<span class="ident" id="8331379">a4int</span>&nbsp;<span class="op" id="8331385">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331389">t</span><span class="op" id="8331390">.</span><span class="ident" id="8331391">Errorf</span><span class="op" id="8331397">(</span><span class="string" id="8331398">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8331450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331456">var</span>&nbsp;<span class="ident" id="8331460">b3</span>&nbsp;<span class="op" id="8331463">[</span><span class="num" id="8331464">3</span><span class="op" id="8331465">]</span><span class="builtintype" id="8331466">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331472">a3bool</span>&nbsp;<span class="op" id="8331479">:=</span>&nbsp;<span class="ident" id="8331482">getTypeUnlocked</span><span class="op" id="8331497">(</span><span class="string" id="8331498">&#34;&#34;</span><span class="op" id="8331500">,</span>&nbsp;<span class="ident" id="8331502">reflect</span><span class="op" id="8331509">.</span><span class="ident" id="8331510">TypeOf</span><span class="op" id="8331516">(</span><span class="ident" id="8331517">b3</span><span class="op" id="8331519">)</span><span class="op" id="8331520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331523">if</span>&nbsp;<span class="ident" id="8331526">a3int</span>&nbsp;<span class="op" id="8331532">==</span>&nbsp;<span class="ident" id="8331535">a3bool</span>&nbsp;<span class="op" id="8331542">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331546">t</span><span class="op" id="8331547">.</span><span class="ident" id="8331548">Errorf</span><span class="op" id="8331554">(</span><span class="string" id="8331555">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8331608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331614">str</span>&nbsp;<span class="op" id="8331618">:=</span>&nbsp;<span class="ident" id="8331621">a3bool</span><span class="op" id="8331627">.</span><span class="builtintype" id="8331628">string</span><span class="op" id="8331634">(</span><span class="op" id="8331635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331638">expected</span>&nbsp;<span class="op" id="8331647">:=</span>&nbsp;<span class="string" id="8331650">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331661">if</span>&nbsp;<span class="ident" id="8331664">str</span>&nbsp;<span class="op" id="8331668">!=</span>&nbsp;<span class="ident" id="8331671">expected</span>&nbsp;<span class="op" id="8331680">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331684">t</span><span class="op" id="8331685">.</span><span class="ident" id="8331686">Errorf</span><span class="op" id="8331692">(</span><span class="string" id="8331693">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8331727">,</span>&nbsp;<span class="ident" id="8331729">str</span><span class="op" id="8331732">,</span>&nbsp;<span class="ident" id="8331734">expected</span><span class="op" id="8331742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8331745">}</span><br>
<span class="lineno"></span><span class="op" id="8331747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8331750">func</span>&nbsp;<span class="ident" id="8331755">TestSliceType</span><span class="op" id="8331768">(</span><span class="ident" id="8331769">t</span>&nbsp;<span class="op" id="8331771">*</span><span class="ident" id="8331772">testing</span><span class="op" id="8331779">.</span><span class="ident" id="8331780">T</span><span class="op" id="8331781">)</span>&nbsp;<span class="op" id="8331783">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331786">var</span>&nbsp;<span class="ident" id="8331790">s</span>&nbsp;<span class="op" id="8331792">[</span><span class="op" id="8331793">]</span><span class="builtintype" id="8331794">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331799">sint</span>&nbsp;<span class="op" id="8331804">:=</span>&nbsp;<span class="ident" id="8331807">getTypeUnlocked</span><span class="op" id="8331822">(</span><span class="string" id="8331823">&#34;slice&#34;</span><span class="op" id="8331830">,</span>&nbsp;<span class="ident" id="8331832">reflect</span><span class="op" id="8331839">.</span><span class="ident" id="8331840">TypeOf</span><span class="op" id="8331846">(</span><span class="ident" id="8331847">s</span><span class="op" id="8331848">)</span><span class="op" id="8331849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331852">var</span>&nbsp;<span class="ident" id="8331856">news</span>&nbsp;<span class="op" id="8331861">[</span><span class="op" id="8331862">]</span><span class="builtintype" id="8331863">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331868">newsint</span>&nbsp;<span class="op" id="8331876">:=</span>&nbsp;<span class="ident" id="8331879">getTypeUnlocked</span><span class="op" id="8331894">(</span><span class="string" id="8331895">&#34;slice1&#34;</span><span class="op" id="8331903">,</span>&nbsp;<span class="ident" id="8331905">reflect</span><span class="op" id="8331912">.</span><span class="ident" id="8331913">TypeOf</span><span class="op" id="8331919">(</span><span class="ident" id="8331920">news</span><span class="op" id="8331924">)</span><span class="op" id="8331925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8331928">if</span>&nbsp;<span class="ident" id="8331931">sint</span>&nbsp;<span class="op" id="8331936">!=</span>&nbsp;<span class="ident" id="8331939">newsint</span>&nbsp;<span class="op" id="8331947">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8331951">t</span><span class="op" id="8331952">.</span><span class="ident" id="8331953">Errorf</span><span class="op" id="8331959">(</span><span class="string" id="8331960">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8332007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332013">var</span>&nbsp;<span class="ident" id="8332017">b</span>&nbsp;<span class="op" id="8332019">[</span><span class="op" id="8332020">]</span><span class="builtintype" id="8332021">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332027">sbool</span>&nbsp;<span class="op" id="8332033">:=</span>&nbsp;<span class="ident" id="8332036">getTypeUnlocked</span><span class="op" id="8332051">(</span><span class="string" id="8332052">&#34;&#34;</span><span class="op" id="8332054">,</span>&nbsp;<span class="ident" id="8332056">reflect</span><span class="op" id="8332063">.</span><span class="ident" id="8332064">TypeOf</span><span class="op" id="8332070">(</span><span class="ident" id="8332071">b</span><span class="op" id="8332072">)</span><span class="op" id="8332073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332076">if</span>&nbsp;<span class="ident" id="8332079">sbool</span>&nbsp;<span class="op" id="8332085">==</span>&nbsp;<span class="ident" id="8332088">sint</span>&nbsp;<span class="op" id="8332093">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332097">t</span><span class="op" id="8332098">.</span><span class="ident" id="8332099">Errorf</span><span class="op" id="8332105">(</span><span class="string" id="8332106">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8332157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332163">str</span>&nbsp;<span class="op" id="8332167">:=</span>&nbsp;<span class="ident" id="8332170">sbool</span><span class="op" id="8332175">.</span><span class="builtintype" id="8332176">string</span><span class="op" id="8332182">(</span><span class="op" id="8332183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332186">expected</span>&nbsp;<span class="op" id="8332195">:=</span>&nbsp;<span class="string" id="8332198">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332208">if</span>&nbsp;<span class="ident" id="8332211">str</span>&nbsp;<span class="op" id="8332215">!=</span>&nbsp;<span class="ident" id="8332218">expected</span>&nbsp;<span class="op" id="8332227">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332231">t</span><span class="op" id="8332232">.</span><span class="ident" id="8332233">Errorf</span><span class="op" id="8332239">(</span><span class="string" id="8332240">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8332274">,</span>&nbsp;<span class="ident" id="8332276">str</span><span class="op" id="8332279">,</span>&nbsp;<span class="ident" id="8332281">expected</span><span class="op" id="8332289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332292">}</span><br>
<span class="lineno"></span><span class="op" id="8332294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8332297">func</span>&nbsp;<span class="ident" id="8332302">TestMapType</span><span class="op" id="8332313">(</span><span class="ident" id="8332314">t</span>&nbsp;<span class="op" id="8332316">*</span><span class="ident" id="8332317">testing</span><span class="op" id="8332324">.</span><span class="ident" id="8332325">T</span><span class="op" id="8332326">)</span>&nbsp;<span class="op" id="8332328">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332331">var</span>&nbsp;<span class="ident" id="8332335">m</span>&nbsp;<span class="keyword" id="8332337">map</span><span class="op" id="8332340">[</span><span class="builtintype" id="8332341">string</span><span class="op" id="8332347">]</span><span class="builtintype" id="8332348">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332353">mapStringInt</span>&nbsp;<span class="op" id="8332366">:=</span>&nbsp;<span class="ident" id="8332369">getTypeUnlocked</span><span class="op" id="8332384">(</span><span class="string" id="8332385">&#34;map&#34;</span><span class="op" id="8332390">,</span>&nbsp;<span class="ident" id="8332392">reflect</span><span class="op" id="8332399">.</span><span class="ident" id="8332400">TypeOf</span><span class="op" id="8332406">(</span><span class="ident" id="8332407">m</span><span class="op" id="8332408">)</span><span class="op" id="8332409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332412">var</span>&nbsp;<span class="ident" id="8332416">newm</span>&nbsp;<span class="keyword" id="8332421">map</span><span class="op" id="8332424">[</span><span class="builtintype" id="8332425">string</span><span class="op" id="8332431">]</span><span class="builtintype" id="8332432">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332437">newMapStringInt</span>&nbsp;<span class="op" id="8332453">:=</span>&nbsp;<span class="ident" id="8332456">getTypeUnlocked</span><span class="op" id="8332471">(</span><span class="string" id="8332472">&#34;map1&#34;</span><span class="op" id="8332478">,</span>&nbsp;<span class="ident" id="8332480">reflect</span><span class="op" id="8332487">.</span><span class="ident" id="8332488">TypeOf</span><span class="op" id="8332494">(</span><span class="ident" id="8332495">newm</span><span class="op" id="8332499">)</span><span class="op" id="8332500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332503">if</span>&nbsp;<span class="ident" id="8332506">mapStringInt</span>&nbsp;<span class="op" id="8332519">!=</span>&nbsp;<span class="ident" id="8332522">newMapStringInt</span>&nbsp;<span class="op" id="8332538">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332542">t</span><span class="op" id="8332543">.</span><span class="ident" id="8332544">Errorf</span><span class="op" id="8332550">(</span><span class="string" id="8332551">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8332607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332613">var</span>&nbsp;<span class="ident" id="8332617">b</span>&nbsp;<span class="keyword" id="8332619">map</span><span class="op" id="8332622">[</span><span class="builtintype" id="8332623">string</span><span class="op" id="8332629">]</span><span class="builtintype" id="8332630">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332636">mapStringBool</span>&nbsp;<span class="op" id="8332650">:=</span>&nbsp;<span class="ident" id="8332653">getTypeUnlocked</span><span class="op" id="8332668">(</span><span class="string" id="8332669">&#34;&#34;</span><span class="op" id="8332671">,</span>&nbsp;<span class="ident" id="8332673">reflect</span><span class="op" id="8332680">.</span><span class="ident" id="8332681">TypeOf</span><span class="op" id="8332687">(</span><span class="ident" id="8332688">b</span><span class="op" id="8332689">)</span><span class="op" id="8332690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332693">if</span>&nbsp;<span class="ident" id="8332696">mapStringBool</span>&nbsp;<span class="op" id="8332710">==</span>&nbsp;<span class="ident" id="8332713">mapStringInt</span>&nbsp;<span class="op" id="8332726">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332730">t</span><span class="op" id="8332731">.</span><span class="ident" id="8332732">Errorf</span><span class="op" id="8332738">(</span><span class="string" id="8332739">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8332808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332814">str</span>&nbsp;<span class="op" id="8332818">:=</span>&nbsp;<span class="ident" id="8332821">mapStringBool</span><span class="op" id="8332834">.</span><span class="builtintype" id="8332835">string</span><span class="op" id="8332841">(</span><span class="op" id="8332842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332845">expected</span>&nbsp;<span class="op" id="8332854">:=</span>&nbsp;<span class="string" id="8332857">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8332876">if</span>&nbsp;<span class="ident" id="8332879">str</span>&nbsp;<span class="op" id="8332883">!=</span>&nbsp;<span class="ident" id="8332886">expected</span>&nbsp;<span class="op" id="8332895">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332899">t</span><span class="op" id="8332900">.</span><span class="ident" id="8332901">Errorf</span><span class="op" id="8332907">(</span><span class="string" id="8332908">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8332940">,</span>&nbsp;<span class="ident" id="8332942">str</span><span class="op" id="8332945">,</span>&nbsp;<span class="ident" id="8332947">expected</span><span class="op" id="8332955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8332958">}</span><br>
<span class="lineno"></span><span class="op" id="8332960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8332963">type</span>&nbsp;<span class="ident" id="8332968">Bar</span>&nbsp;<span class="keyword" id="8332972">struct</span>&nbsp;<span class="op" id="8332979">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8332982">X</span>&nbsp;<span class="builtintype" id="8332984">string</span><br>
<span class="lineno"></span><span class="op" id="8332991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8332994">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8333075">type</span>&nbsp;<span class="ident" id="8333080">Foo</span>&nbsp;<span class="keyword" id="8333084">struct</span>&nbsp;<span class="op" id="8333091">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333094">A</span>&nbsp;<span class="builtintype" id="8333096">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333101">B</span>&nbsp;<span class="builtintype" id="8333103">int32</span>&nbsp;<span class="comment" id="8333109">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333129">C</span>&nbsp;<span class="builtintype" id="8333131">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333139">D</span>&nbsp;<span class="op" id="8333141">[</span><span class="op" id="8333142">]</span><span class="builtintype" id="8333143">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333149">E</span>&nbsp;<span class="op" id="8333151">*</span><span class="builtintype" id="8333152">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8333163">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333187">F</span>&nbsp;<span class="op" id="8333189">*</span><span class="op" id="8333190">*</span><span class="op" id="8333191">*</span><span class="op" id="8333192">*</span><span class="builtintype" id="8333193">float64</span>&nbsp;<span class="comment" id="8333201">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333225">G</span>&nbsp;<span class="op" id="8333227">*</span><span class="ident" id="8333228">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333233">H</span>&nbsp;<span class="op" id="8333235">*</span><span class="ident" id="8333236">Bar</span>&nbsp;<span class="comment" id="8333240">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333295">I</span>&nbsp;<span class="op" id="8333297">*</span><span class="ident" id="8333298">Foo</span>&nbsp;<span class="comment" id="8333302">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8333322">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8333325">func</span>&nbsp;<span class="ident" id="8333330">TestStructType</span><span class="op" id="8333344">(</span><span class="ident" id="8333345">t</span>&nbsp;<span class="op" id="8333347">*</span><span class="ident" id="8333348">testing</span><span class="op" id="8333355">.</span><span class="ident" id="8333356">T</span><span class="op" id="8333357">)</span>&nbsp;<span class="op" id="8333359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333362">sstruct</span>&nbsp;<span class="op" id="8333370">:=</span>&nbsp;<span class="ident" id="8333373">getTypeUnlocked</span><span class="op" id="8333388">(</span><span class="string" id="8333389">&#34;Foo&#34;</span><span class="op" id="8333394">,</span>&nbsp;<span class="ident" id="8333396">reflect</span><span class="op" id="8333403">.</span><span class="ident" id="8333404">TypeOf</span><span class="op" id="8333410">(</span><span class="ident" id="8333411">Foo</span><span class="op" id="8333414">{</span><span class="op" id="8333415">}</span><span class="op" id="8333416">)</span><span class="op" id="8333417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333420">str</span>&nbsp;<span class="op" id="8333424">:=</span>&nbsp;<span class="ident" id="8333427">sstruct</span><span class="op" id="8333434">.</span><span class="builtintype" id="8333435">string</span><span class="op" id="8333441">(</span><span class="op" id="8333442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8333445">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333502">expected</span>&nbsp;<span class="op" id="8333511">:=</span>&nbsp;<span class="string" id="8333514">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333629">if</span>&nbsp;<span class="ident" id="8333632">str</span>&nbsp;<span class="op" id="8333636">!=</span>&nbsp;<span class="ident" id="8333639">expected</span>&nbsp;<span class="op" id="8333648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333652">t</span><span class="op" id="8333653">.</span><span class="ident" id="8333654">Errorf</span><span class="op" id="8333660">(</span><span class="string" id="8333661">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8333696">,</span>&nbsp;<span class="ident" id="8333698">str</span><span class="op" id="8333701">,</span>&nbsp;<span class="ident" id="8333703">expected</span><span class="op" id="8333711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8333714">}</span><br>
<span class="lineno"></span><span class="op" id="8333716">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8333719">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8333796">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8333833">func</span>&nbsp;<span class="ident" id="8333838">TestRegistration</span><span class="op" id="8333854">(</span><span class="ident" id="8333855">t</span>&nbsp;<span class="op" id="8333857">*</span><span class="ident" id="8333858">testing</span><span class="op" id="8333865">.</span><span class="ident" id="8333866">T</span><span class="op" id="8333867">)</span>&nbsp;<span class="op" id="8333869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8333872">type</span>&nbsp;<span class="ident" id="8333877">T</span>&nbsp;<span class="keyword" id="8333879">struct</span><span class="op" id="8333885">{</span>&nbsp;<span class="ident" id="8333887">a</span>&nbsp;<span class="builtintype" id="8333889">int</span>&nbsp;<span class="op" id="8333893">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333896">Register</span><span class="op" id="8333904">(</span><span class="builtinfunc" id="8333905">new</span><span class="op" id="8333908">(</span><span class="ident" id="8333909">T</span><span class="op" id="8333910">)</span><span class="op" id="8333911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8333914">Register</span><span class="op" id="8333922">(</span><span class="builtinfunc" id="8333923">new</span><span class="op" id="8333926">(</span><span class="ident" id="8333927">T</span><span class="op" id="8333928">)</span><span class="op" id="8333929">)</span><br>
<span class="lineno"></span><span class="op" id="8333931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8333934">type</span>&nbsp;<span class="ident" id="8333939">N1</span>&nbsp;<span class="keyword" id="8333942">struct</span><span class="op" id="8333948">{</span><span class="op" id="8333949">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8333951">type</span>&nbsp;<span class="ident" id="8333956">N2</span>&nbsp;<span class="keyword" id="8333959">struct</span><span class="op" id="8333965">{</span><span class="op" id="8333966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8333969">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8334005">func</span>&nbsp;<span class="ident" id="8334010">TestRegistrationNaming</span><span class="op" id="8334032">(</span><span class="ident" id="8334033">t</span>&nbsp;<span class="op" id="8334035">*</span><span class="ident" id="8334036">testing</span><span class="op" id="8334043">.</span><span class="ident" id="8334044">T</span><span class="op" id="8334045">)</span>&nbsp;<span class="op" id="8334047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334050">testCases</span>&nbsp;<span class="op" id="8334060">:=</span>&nbsp;<span class="op" id="8334063">[</span><span class="op" id="8334064">]</span><span class="keyword" id="8334065">struct</span>&nbsp;<span class="op" id="8334072">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334076">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334081">interface</span><span class="op" id="8334090">{</span><span class="op" id="8334091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334095">name</span>&nbsp;<span class="builtintype" id="8334100">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334108">}</span><span class="op" id="8334109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334113">{</span><span class="op" id="8334114">&amp;</span><span class="ident" id="8334115">N1</span><span class="op" id="8334117">{</span><span class="op" id="8334118">}</span><span class="op" id="8334119">,</span>&nbsp;<span class="string" id="8334121">&#34;*gob.N1&#34;</span><span class="op" id="8334130">}</span><span class="op" id="8334131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334135">{</span><span class="ident" id="8334136">N2</span><span class="op" id="8334138">{</span><span class="op" id="8334139">}</span><span class="op" id="8334140">,</span>&nbsp;<span class="string" id="8334142">&#34;encoding/gob.N2&#34;</span><span class="op" id="8334159">}</span><span class="op" id="8334160">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334167">for</span>&nbsp;<span class="ident" id="8334171">_</span><span class="op" id="8334172">,</span>&nbsp;<span class="ident" id="8334174">tc</span>&nbsp;<span class="op" id="8334177">:=</span>&nbsp;<span class="keyword" id="8334180">range</span>&nbsp;<span class="ident" id="8334186">testCases</span>&nbsp;<span class="op" id="8334196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334200">Register</span><span class="op" id="8334208">(</span><span class="ident" id="8334209">tc</span><span class="op" id="8334211">.</span><span class="ident" id="8334212">t</span><span class="op" id="8334213">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334218">tct</span>&nbsp;<span class="op" id="8334222">:=</span>&nbsp;<span class="ident" id="8334225">reflect</span><span class="op" id="8334232">.</span><span class="ident" id="8334233">TypeOf</span><span class="op" id="8334239">(</span><span class="ident" id="8334240">tc</span><span class="op" id="8334242">.</span><span class="ident" id="8334243">t</span><span class="op" id="8334244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334248">registerLock</span><span class="op" id="8334260">.</span><span class="ident" id="8334261">RLock</span><span class="op" id="8334266">(</span><span class="op" id="8334267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334271">ct</span>&nbsp;<span class="op" id="8334274">:=</span>&nbsp;<span class="ident" id="8334277">nameToConcreteType</span><span class="op" id="8334295">[</span><span class="ident" id="8334296">tc</span><span class="op" id="8334298">.</span><span class="ident" id="8334299">name</span><span class="op" id="8334303">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334307">registerLock</span><span class="op" id="8334319">.</span><span class="ident" id="8334320">RUnlock</span><span class="op" id="8334327">(</span><span class="op" id="8334328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334332">if</span>&nbsp;<span class="ident" id="8334335">ct</span>&nbsp;<span class="op" id="8334338">!=</span>&nbsp;<span class="ident" id="8334341">tct</span>&nbsp;<span class="op" id="8334345">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334350">t</span><span class="op" id="8334351">.</span><span class="ident" id="8334352">Errorf</span><span class="op" id="8334358">(</span><span class="string" id="8334359">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8334397">,</span>&nbsp;<span class="ident" id="8334399">tc</span><span class="op" id="8334401">.</span><span class="ident" id="8334402">name</span><span class="op" id="8334406">,</span>&nbsp;<span class="ident" id="8334408">ct</span><span class="op" id="8334410">,</span>&nbsp;<span class="ident" id="8334412">tct</span><span class="op" id="8334415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8334423">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334475">if</span>&nbsp;<span class="ident" id="8334478">tct</span><span class="op" id="8334481">.</span><span class="ident" id="8334482">Kind</span><span class="op" id="8334486">(</span><span class="op" id="8334487">)</span>&nbsp;<span class="op" id="8334489">==</span>&nbsp;<span class="ident" id="8334492">reflect</span><span class="op" id="8334499">.</span><span class="ident" id="8334500">Ptr</span>&nbsp;<span class="op" id="8334504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334509">tct</span>&nbsp;<span class="op" id="8334513">=</span>&nbsp;<span class="ident" id="8334515">tct</span><span class="op" id="8334518">.</span><span class="ident" id="8334519">Elem</span><span class="op" id="8334523">(</span><span class="op" id="8334524">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334532">if</span>&nbsp;<span class="ident" id="8334535">n</span>&nbsp;<span class="op" id="8334537">:=</span>&nbsp;<span class="ident" id="8334540">concreteTypeToName</span><span class="op" id="8334558">[</span><span class="ident" id="8334559">tct</span><span class="op" id="8334562">]</span><span class="op" id="8334563">;</span>&nbsp;<span class="ident" id="8334565">n</span>&nbsp;<span class="op" id="8334567">!=</span>&nbsp;<span class="ident" id="8334570">tc</span><span class="op" id="8334572">.</span><span class="ident" id="8334573">name</span>&nbsp;<span class="op" id="8334578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334583">t</span><span class="op" id="8334584">.</span><span class="ident" id="8334585">Errorf</span><span class="op" id="8334591">(</span><span class="string" id="8334592">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8334632">,</span>&nbsp;<span class="ident" id="8334634">tct</span><span class="op" id="8334637">,</span>&nbsp;<span class="ident" id="8334639">n</span><span class="op" id="8334640">,</span>&nbsp;<span class="ident" id="8334642">tc</span><span class="op" id="8334644">.</span><span class="ident" id="8334645">name</span><span class="op" id="8334649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334656">}</span><br>
<span class="lineno">195</span><span class="op" id="8334658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8334661">func</span>&nbsp;<span class="ident" id="8334666">TestStressParallel</span><span class="op" id="8334684">(</span><span class="ident" id="8334685">t</span>&nbsp;<span class="op" id="8334687">*</span><span class="ident" id="8334688">testing</span><span class="op" id="8334695">.</span><span class="ident" id="8334696">T</span><span class="op" id="8334697">)</span>&nbsp;<span class="op" id="8334699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334702">type</span>&nbsp;<span class="ident" id="8334707">T2</span>&nbsp;<span class="keyword" id="8334710">struct</span><span class="op" id="8334716">{</span>&nbsp;<span class="ident" id="8334718">A</span>&nbsp;<span class="builtintype" id="8334720">int</span>&nbsp;<span class="op" id="8334724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334727">c</span>&nbsp;<span class="op" id="8334729">:=</span>&nbsp;<span class="builtinfunc" id="8334732">make</span><span class="op" id="8334736">(</span><span class="keyword" id="8334737">chan</span>&nbsp;<span class="builtintype" id="8334742">bool</span><span class="op" id="8334746">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334749">const</span>&nbsp;<span class="ident" id="8334755">N</span>&nbsp;<span class="op" id="8334757">=</span>&nbsp;<span class="num" id="8334759">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334763">for</span>&nbsp;<span class="ident" id="8334767">i</span>&nbsp;<span class="op" id="8334769">:=</span>&nbsp;<span class="num" id="8334772">0</span><span class="op" id="8334773">;</span>&nbsp;<span class="ident" id="8334775">i</span>&nbsp;<span class="op" id="8334777">&lt;</span>&nbsp;<span class="ident" id="8334779">N</span><span class="op" id="8334780">;</span>&nbsp;<span class="ident" id="8334782">i</span><span class="op" id="8334783">++</span>&nbsp;<span class="op" id="8334786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334790">go</span>&nbsp;<span class="keyword" id="8334793">func</span><span class="op" id="8334797">(</span><span class="op" id="8334798">)</span>&nbsp;<span class="op" id="8334800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334805">p</span>&nbsp;<span class="op" id="8334807">:=</span>&nbsp;<span class="builtinfunc" id="8334810">new</span><span class="op" id="8334813">(</span><span class="ident" id="8334814">T2</span><span class="op" id="8334816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334821">Register</span><span class="op" id="8334829">(</span><span class="ident" id="8334830">p</span><span class="op" id="8334831">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334836">b</span>&nbsp;<span class="op" id="8334838">:=</span>&nbsp;<span class="builtinfunc" id="8334841">new</span><span class="op" id="8334844">(</span><span class="ident" id="8334845">bytes</span><span class="op" id="8334850">.</span><span class="ident" id="8334851">Buffer</span><span class="op" id="8334857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334862">enc</span>&nbsp;<span class="op" id="8334866">:=</span>&nbsp;<span class="ident" id="8334869">NewEncoder</span><span class="op" id="8334879">(</span><span class="ident" id="8334880">b</span><span class="op" id="8334881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334886">err</span>&nbsp;<span class="op" id="8334890">:=</span>&nbsp;<span class="ident" id="8334893">enc</span><span class="op" id="8334896">.</span><span class="ident" id="8334897">Encode</span><span class="op" id="8334903">(</span><span class="ident" id="8334904">p</span><span class="op" id="8334905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8334910">if</span>&nbsp;<span class="ident" id="8334913">err</span>&nbsp;<span class="op" id="8334917">!=</span>&nbsp;<span class="builtintype" id="8334920">nil</span>&nbsp;<span class="op" id="8334924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334930">t</span><span class="op" id="8334931">.</span><span class="ident" id="8334932">Error</span><span class="op" id="8334937">(</span><span class="string" id="8334938">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8334953">,</span>&nbsp;<span class="ident" id="8334955">err</span><span class="op" id="8334958">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8334963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334968">dec</span>&nbsp;<span class="op" id="8334972">:=</span>&nbsp;<span class="ident" id="8334975">NewDecoder</span><span class="op" id="8334985">(</span><span class="ident" id="8334986">b</span><span class="op" id="8334987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8334992">err</span>&nbsp;<span class="op" id="8334996">=</span>&nbsp;<span class="ident" id="8334998">dec</span><span class="op" id="8335001">.</span><span class="ident" id="8335002">Decode</span><span class="op" id="8335008">(</span><span class="ident" id="8335009">p</span><span class="op" id="8335010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8335015">if</span>&nbsp;<span class="ident" id="8335018">err</span>&nbsp;<span class="op" id="8335022">!=</span>&nbsp;<span class="builtintype" id="8335025">nil</span>&nbsp;<span class="op" id="8335029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8335035">t</span><span class="op" id="8335036">.</span><span class="ident" id="8335037">Error</span><span class="op" id="8335042">(</span><span class="string" id="8335043">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8335058">,</span>&nbsp;<span class="ident" id="8335060">err</span><span class="op" id="8335063">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8335068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8335073">c</span>&nbsp;<span class="op" id="8335075">&lt;-</span>&nbsp;<span class="builtintype" id="8335078">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8335085">}</span><span class="op" id="8335086">(</span><span class="op" id="8335087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8335090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8335093">for</span>&nbsp;<span class="ident" id="8335097">i</span>&nbsp;<span class="op" id="8335099">:=</span>&nbsp;<span class="num" id="8335102">0</span><span class="op" id="8335103">;</span>&nbsp;<span class="ident" id="8335105">i</span>&nbsp;<span class="op" id="8335107">&lt;</span>&nbsp;<span class="ident" id="8335109">N</span><span class="op" id="8335110">;</span>&nbsp;<span class="ident" id="8335112">i</span><span class="op" id="8335113">++</span>&nbsp;<span class="op" id="8335116">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8335120">&lt;-</span><span class="ident" id="8335122">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8335125">}</span><br>
<span class="lineno"></span><span class="op" id="8335127">}</span>
</div>
</body>
</html>
