<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html" class="current">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4043786">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4043841">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4043895">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4043946">package</span>&nbsp;<span class="ident" id="4043954">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4043962">import</span>&nbsp;<span class="op" id="4043969">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4043972">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4043983">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4043992">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4043995">const</span>&nbsp;<span class="ident" id="4044001">wordSize</span>&nbsp;<span class="op" id="4044010">=</span>&nbsp;<span class="builtintype" id="4044012">int</span><span class="op" id="4044015">(</span><span class="ident" id="4044016">unsafe</span><span class="op" id="4044022">.</span><span class="ident" id="4044023">Sizeof</span><span class="op" id="4044029">(</span><span class="builtintype" id="4044030">uintptr</span><span class="op" id="4044037">(</span><span class="num" id="4044038">0</span><span class="op" id="4044039">)</span><span class="op" id="4044040">)</span><span class="op" id="4044041">)</span><br>
<span class="lineno"></span><span class="keyword" id="4044043">const</span>&nbsp;<span class="ident" id="4044049">supportsUnaligned</span>&nbsp;<span class="op" id="4044067">=</span>&nbsp;<span class="ident" id="4044069">runtime</span><span class="op" id="4044076">.</span><span class="ident" id="4044077">GOARCH</span>&nbsp;<span class="op" id="4044084">==</span>&nbsp;<span class="string" id="4044087">&#34;386&#34;</span>&nbsp;<span class="op" id="4044093">||</span>&nbsp;<span class="ident" id="4044096">runtime</span><span class="op" id="4044103">.</span><span class="ident" id="4044104">GOARCH</span>&nbsp;<span class="op" id="4044111">==</span>&nbsp;<span class="string" id="4044114">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4044123">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4044189">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="4044223">func</span>&nbsp;<span class="ident" id="4044228">fastXORBytes</span><span class="op" id="4044240">(</span><span class="ident" id="4044241">dst</span><span class="op" id="4044244">,</span>&nbsp;<span class="ident" id="4044246">a</span><span class="op" id="4044247">,</span>&nbsp;<span class="ident" id="4044249">b</span>&nbsp;<span class="op" id="4044251">[</span><span class="op" id="4044252">]</span><span class="builtintype" id="4044253">byte</span><span class="op" id="4044257">)</span>&nbsp;<span class="builtintype" id="4044259">int</span>&nbsp;<span class="op" id="4044263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044266">n</span>&nbsp;<span class="op" id="4044268">:=</span>&nbsp;<span class="builtinfunc" id="4044271">len</span><span class="op" id="4044274">(</span><span class="ident" id="4044275">a</span><span class="op" id="4044276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044279">if</span>&nbsp;<span class="builtinfunc" id="4044282">len</span><span class="op" id="4044285">(</span><span class="ident" id="4044286">b</span><span class="op" id="4044287">)</span>&nbsp;<span class="op" id="4044289">&lt;</span>&nbsp;<span class="ident" id="4044291">n</span>&nbsp;<span class="op" id="4044293">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044297">n</span>&nbsp;<span class="op" id="4044299">=</span>&nbsp;<span class="builtinfunc" id="4044301">len</span><span class="op" id="4044304">(</span><span class="ident" id="4044305">b</span><span class="op" id="4044306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044313">w</span>&nbsp;<span class="op" id="4044315">:=</span>&nbsp;<span class="ident" id="4044318">n</span>&nbsp;<span class="op" id="4044320">/</span>&nbsp;<span class="ident" id="4044322">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044332">if</span>&nbsp;<span class="ident" id="4044335">w</span>&nbsp;<span class="op" id="4044337">&gt;</span>&nbsp;<span class="num" id="4044339">0</span>&nbsp;<span class="op" id="4044341">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044345">dw</span>&nbsp;<span class="op" id="4044348">:=</span>&nbsp;<span class="op" id="4044351">*</span><span class="op" id="4044352">(</span><span class="op" id="4044353">*</span><span class="op" id="4044354">[</span><span class="op" id="4044355">]</span><span class="builtintype" id="4044356">uintptr</span><span class="op" id="4044363">)</span><span class="op" id="4044364">(</span><span class="ident" id="4044365">unsafe</span><span class="op" id="4044371">.</span><span class="ident" id="4044372">Pointer</span><span class="op" id="4044379">(</span><span class="op" id="4044380">&amp;</span><span class="ident" id="4044381">dst</span><span class="op" id="4044384">)</span><span class="op" id="4044385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044389">aw</span>&nbsp;<span class="op" id="4044392">:=</span>&nbsp;<span class="op" id="4044395">*</span><span class="op" id="4044396">(</span><span class="op" id="4044397">*</span><span class="op" id="4044398">[</span><span class="op" id="4044399">]</span><span class="builtintype" id="4044400">uintptr</span><span class="op" id="4044407">)</span><span class="op" id="4044408">(</span><span class="ident" id="4044409">unsafe</span><span class="op" id="4044415">.</span><span class="ident" id="4044416">Pointer</span><span class="op" id="4044423">(</span><span class="op" id="4044424">&amp;</span><span class="ident" id="4044425">a</span><span class="op" id="4044426">)</span><span class="op" id="4044427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044431">bw</span>&nbsp;<span class="op" id="4044434">:=</span>&nbsp;<span class="op" id="4044437">*</span><span class="op" id="4044438">(</span><span class="op" id="4044439">*</span><span class="op" id="4044440">[</span><span class="op" id="4044441">]</span><span class="builtintype" id="4044442">uintptr</span><span class="op" id="4044449">)</span><span class="op" id="4044450">(</span><span class="ident" id="4044451">unsafe</span><span class="op" id="4044457">.</span><span class="ident" id="4044458">Pointer</span><span class="op" id="4044465">(</span><span class="op" id="4044466">&amp;</span><span class="ident" id="4044467">b</span><span class="op" id="4044468">)</span><span class="op" id="4044469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044473">for</span>&nbsp;<span class="ident" id="4044477">i</span>&nbsp;<span class="op" id="4044479">:=</span>&nbsp;<span class="num" id="4044482">0</span><span class="op" id="4044483">;</span>&nbsp;<span class="ident" id="4044485">i</span>&nbsp;<span class="op" id="4044487">&lt;</span>&nbsp;<span class="ident" id="4044489">w</span><span class="op" id="4044490">;</span>&nbsp;<span class="ident" id="4044492">i</span><span class="op" id="4044493">++</span>&nbsp;<span class="op" id="4044496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044501">dw</span><span class="op" id="4044503">[</span><span class="ident" id="4044504">i</span><span class="op" id="4044505">]</span>&nbsp;<span class="op" id="4044507">=</span>&nbsp;<span class="ident" id="4044509">aw</span><span class="op" id="4044511">[</span><span class="ident" id="4044512">i</span><span class="op" id="4044513">]</span>&nbsp;<span class="op" id="4044515">^</span>&nbsp;<span class="ident" id="4044517">bw</span><span class="op" id="4044519">[</span><span class="ident" id="4044520">i</span><span class="op" id="4044521">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044532">for</span>&nbsp;<span class="ident" id="4044536">i</span>&nbsp;<span class="op" id="4044538">:=</span>&nbsp;<span class="op" id="4044541">(</span><span class="ident" id="4044542">n</span>&nbsp;<span class="op" id="4044544">-</span>&nbsp;<span class="ident" id="4044546">n</span><span class="op" id="4044547">%</span><span class="ident" id="4044548">wordSize</span><span class="op" id="4044556">)</span><span class="op" id="4044557">;</span>&nbsp;<span class="ident" id="4044559">i</span>&nbsp;<span class="op" id="4044561">&lt;</span>&nbsp;<span class="ident" id="4044563">n</span><span class="op" id="4044564">;</span>&nbsp;<span class="ident" id="4044566">i</span><span class="op" id="4044567">++</span>&nbsp;<span class="op" id="4044570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044574">dst</span><span class="op" id="4044577">[</span><span class="ident" id="4044578">i</span><span class="op" id="4044579">]</span>&nbsp;<span class="op" id="4044581">=</span>&nbsp;<span class="ident" id="4044583">a</span><span class="op" id="4044584">[</span><span class="ident" id="4044585">i</span><span class="op" id="4044586">]</span>&nbsp;<span class="op" id="4044588">^</span>&nbsp;<span class="ident" id="4044590">b</span><span class="op" id="4044591">[</span><span class="ident" id="4044592">i</span><span class="op" id="4044593">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044600">return</span>&nbsp;<span class="ident" id="4044607">n</span><br>
<span class="lineno"></span><span class="op" id="4044609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="4044612">func</span>&nbsp;<span class="ident" id="4044617">safeXORBytes</span><span class="op" id="4044629">(</span><span class="ident" id="4044630">dst</span><span class="op" id="4044633">,</span>&nbsp;<span class="ident" id="4044635">a</span><span class="op" id="4044636">,</span>&nbsp;<span class="ident" id="4044638">b</span>&nbsp;<span class="op" id="4044640">[</span><span class="op" id="4044641">]</span><span class="builtintype" id="4044642">byte</span><span class="op" id="4044646">)</span>&nbsp;<span class="builtintype" id="4044648">int</span>&nbsp;<span class="op" id="4044652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044655">n</span>&nbsp;<span class="op" id="4044657">:=</span>&nbsp;<span class="builtinfunc" id="4044660">len</span><span class="op" id="4044663">(</span><span class="ident" id="4044664">a</span><span class="op" id="4044665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044668">if</span>&nbsp;<span class="builtinfunc" id="4044671">len</span><span class="op" id="4044674">(</span><span class="ident" id="4044675">b</span><span class="op" id="4044676">)</span>&nbsp;<span class="op" id="4044678">&lt;</span>&nbsp;<span class="ident" id="4044680">n</span>&nbsp;<span class="op" id="4044682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044686">n</span>&nbsp;<span class="op" id="4044688">=</span>&nbsp;<span class="builtinfunc" id="4044690">len</span><span class="op" id="4044693">(</span><span class="ident" id="4044694">b</span><span class="op" id="4044695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044698">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044701">for</span>&nbsp;<span class="ident" id="4044705">i</span>&nbsp;<span class="op" id="4044707">:=</span>&nbsp;<span class="num" id="4044710">0</span><span class="op" id="4044711">;</span>&nbsp;<span class="ident" id="4044713">i</span>&nbsp;<span class="op" id="4044715">&lt;</span>&nbsp;<span class="ident" id="4044717">n</span><span class="op" id="4044718">;</span>&nbsp;<span class="ident" id="4044720">i</span><span class="op" id="4044721">++</span>&nbsp;<span class="op" id="4044724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4044728">dst</span><span class="op" id="4044731">[</span><span class="ident" id="4044732">i</span><span class="op" id="4044733">]</span>&nbsp;<span class="op" id="4044735">=</span>&nbsp;<span class="ident" id="4044737">a</span><span class="op" id="4044738">[</span><span class="ident" id="4044739">i</span><span class="op" id="4044740">]</span>&nbsp;<span class="op" id="4044742">^</span>&nbsp;<span class="ident" id="4044744">b</span><span class="op" id="4044745">[</span><span class="ident" id="4044746">i</span><span class="op" id="4044747">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044753">return</span>&nbsp;<span class="ident" id="4044760">n</span><br>
<span class="lineno"></span><span class="op" id="4044762">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4044765">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="4044846">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="4044891">func</span>&nbsp;<span class="ident" id="4044896">xorBytes</span><span class="op" id="4044904">(</span><span class="ident" id="4044905">dst</span><span class="op" id="4044908">,</span>&nbsp;<span class="ident" id="4044910">a</span><span class="op" id="4044911">,</span>&nbsp;<span class="ident" id="4044913">b</span>&nbsp;<span class="op" id="4044915">[</span><span class="op" id="4044916">]</span><span class="builtintype" id="4044917">byte</span><span class="op" id="4044921">)</span>&nbsp;<span class="builtintype" id="4044923">int</span>&nbsp;<span class="op" id="4044927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044930">if</span>&nbsp;<span class="ident" id="4044933">supportsUnaligned</span>&nbsp;<span class="op" id="4044951">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4044955">return</span>&nbsp;<span class="ident" id="4044962">fastXORBytes</span><span class="op" id="4044974">(</span><span class="ident" id="4044975">dst</span><span class="op" id="4044978">,</span>&nbsp;<span class="ident" id="4044980">a</span><span class="op" id="4044981">,</span>&nbsp;<span class="ident" id="4044983">b</span><span class="op" id="4044984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4044987">}</span>&nbsp;<span class="keyword" id="4044989">else</span>&nbsp;<span class="op" id="4044994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4044998">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4045054">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4045108">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4045163">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4045208">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4045226">return</span>&nbsp;<span class="ident" id="4045233">safeXORBytes</span><span class="op" id="4045245">(</span><span class="ident" id="4045246">dst</span><span class="op" id="4045249">,</span>&nbsp;<span class="ident" id="4045251">a</span><span class="op" id="4045252">,</span>&nbsp;<span class="ident" id="4045254">b</span><span class="op" id="4045255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4045258">}</span><br>
<span class="lineno"></span><span class="op" id="4045260">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4045263">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="4045339">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="4045391">func</span>&nbsp;<span class="ident" id="4045396">fastXORWords</span><span class="op" id="4045408">(</span><span class="ident" id="4045409">dst</span><span class="op" id="4045412">,</span>&nbsp;<span class="ident" id="4045414">a</span><span class="op" id="4045415">,</span>&nbsp;<span class="ident" id="4045417">b</span>&nbsp;<span class="op" id="4045419">[</span><span class="op" id="4045420">]</span><span class="builtintype" id="4045421">byte</span><span class="op" id="4045425">)</span>&nbsp;<span class="op" id="4045427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045430">dw</span>&nbsp;<span class="op" id="4045433">:=</span>&nbsp;<span class="op" id="4045436">*</span><span class="op" id="4045437">(</span><span class="op" id="4045438">*</span><span class="op" id="4045439">[</span><span class="op" id="4045440">]</span><span class="builtintype" id="4045441">uintptr</span><span class="op" id="4045448">)</span><span class="op" id="4045449">(</span><span class="ident" id="4045450">unsafe</span><span class="op" id="4045456">.</span><span class="ident" id="4045457">Pointer</span><span class="op" id="4045464">(</span><span class="op" id="4045465">&amp;</span><span class="ident" id="4045466">dst</span><span class="op" id="4045469">)</span><span class="op" id="4045470">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045473">aw</span>&nbsp;<span class="op" id="4045476">:=</span>&nbsp;<span class="op" id="4045479">*</span><span class="op" id="4045480">(</span><span class="op" id="4045481">*</span><span class="op" id="4045482">[</span><span class="op" id="4045483">]</span><span class="builtintype" id="4045484">uintptr</span><span class="op" id="4045491">)</span><span class="op" id="4045492">(</span><span class="ident" id="4045493">unsafe</span><span class="op" id="4045499">.</span><span class="ident" id="4045500">Pointer</span><span class="op" id="4045507">(</span><span class="op" id="4045508">&amp;</span><span class="ident" id="4045509">a</span><span class="op" id="4045510">)</span><span class="op" id="4045511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045514">bw</span>&nbsp;<span class="op" id="4045517">:=</span>&nbsp;<span class="op" id="4045520">*</span><span class="op" id="4045521">(</span><span class="op" id="4045522">*</span><span class="op" id="4045523">[</span><span class="op" id="4045524">]</span><span class="builtintype" id="4045525">uintptr</span><span class="op" id="4045532">)</span><span class="op" id="4045533">(</span><span class="ident" id="4045534">unsafe</span><span class="op" id="4045540">.</span><span class="ident" id="4045541">Pointer</span><span class="op" id="4045548">(</span><span class="op" id="4045549">&amp;</span><span class="ident" id="4045550">b</span><span class="op" id="4045551">)</span><span class="op" id="4045552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045555">n</span>&nbsp;<span class="op" id="4045557">:=</span>&nbsp;<span class="builtinfunc" id="4045560">len</span><span class="op" id="4045563">(</span><span class="ident" id="4045564">b</span><span class="op" id="4045565">)</span>&nbsp;<span class="op" id="4045567">/</span>&nbsp;<span class="ident" id="4045569">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4045579">for</span>&nbsp;<span class="ident" id="4045583">i</span>&nbsp;<span class="op" id="4045585">:=</span>&nbsp;<span class="num" id="4045588">0</span><span class="op" id="4045589">;</span>&nbsp;<span class="ident" id="4045591">i</span>&nbsp;<span class="op" id="4045593">&lt;</span>&nbsp;<span class="ident" id="4045595">n</span><span class="op" id="4045596">;</span>&nbsp;<span class="ident" id="4045598">i</span><span class="op" id="4045599">++</span>&nbsp;<span class="op" id="4045602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045606">dw</span><span class="op" id="4045608">[</span><span class="ident" id="4045609">i</span><span class="op" id="4045610">]</span>&nbsp;<span class="op" id="4045612">=</span>&nbsp;<span class="ident" id="4045614">aw</span><span class="op" id="4045616">[</span><span class="ident" id="4045617">i</span><span class="op" id="4045618">]</span>&nbsp;<span class="op" id="4045620">^</span>&nbsp;<span class="ident" id="4045622">bw</span><span class="op" id="4045624">[</span><span class="ident" id="4045625">i</span><span class="op" id="4045626">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4045629">}</span><br>
<span class="lineno"></span><span class="op" id="4045631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4045634">func</span>&nbsp;<span class="ident" id="4045639">xorWords</span><span class="op" id="4045647">(</span><span class="ident" id="4045648">dst</span><span class="op" id="4045651">,</span>&nbsp;<span class="ident" id="4045653">a</span><span class="op" id="4045654">,</span>&nbsp;<span class="ident" id="4045656">b</span>&nbsp;<span class="op" id="4045658">[</span><span class="op" id="4045659">]</span><span class="builtintype" id="4045660">byte</span><span class="op" id="4045664">)</span>&nbsp;<span class="op" id="4045666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4045669">if</span>&nbsp;<span class="ident" id="4045672">supportsUnaligned</span>&nbsp;<span class="op" id="4045690">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045694">fastXORWords</span><span class="op" id="4045706">(</span><span class="ident" id="4045707">dst</span><span class="op" id="4045710">,</span>&nbsp;<span class="ident" id="4045712">a</span><span class="op" id="4045713">,</span>&nbsp;<span class="ident" id="4045715">b</span><span class="op" id="4045716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4045719">}</span>&nbsp;<span class="keyword" id="4045721">else</span>&nbsp;<span class="op" id="4045726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4045730">safeXORBytes</span><span class="op" id="4045742">(</span><span class="ident" id="4045743">dst</span><span class="op" id="4045746">,</span>&nbsp;<span class="ident" id="4045748">a</span><span class="op" id="4045749">,</span>&nbsp;<span class="ident" id="4045751">b</span><span class="op" id="4045752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4045755">}</span><br>
<span class="lineno"></span><span class="op" id="4045757">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
