<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html" class="current">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2755539">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2755594">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2755648">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2755699">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2755773">//</span><br>
<span class="lineno"></span><span class="comment" id="2755776">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2755844">package</span>&nbsp;<span class="ident" id="2755852">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2755858">import</span>&nbsp;<span class="string" id="2755865">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755875">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2755942">//</span><br>
<span class="lineno"></span><span class="comment" id="2755945">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2756017">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2756090">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2756154">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2756193">//</span><br>
<span class="lineno"></span><span class="comment" id="2756196">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2756273">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2756337">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2756401">//</span><br>
<span class="lineno"></span><span class="comment" id="2756404">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2756481">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2756557">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2756635">//</span><br>
<span class="lineno"></span><span class="comment" id="2756638">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2756715">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2756796">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2756870">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2756950">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2757028">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2757077">//</span><br>
<span class="lineno"></span><span class="comment" id="2757080">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2757160">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2757239">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2757318">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2757391">//</span><br>
<span class="lineno"></span><span class="keyword" id="2757394">type</span>&nbsp;<span class="ident" id="2757399">Time</span>&nbsp;<span class="keyword" id="2757404">struct</span>&nbsp;<span class="op" id="2757411">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757414">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757464">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757500">sec</span>&nbsp;<span class="builtintype" id="2757504">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757512">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757557">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757604">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757648">nsec</span>&nbsp;<span class="builtintype" id="2757653">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757661">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757715">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757768">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757802">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757845">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757893">loc</span>&nbsp;<span class="op" id="2757897">*</span><span class="ident" id="2757898">Location</span><br>
<span class="lineno">55</span><span class="op" id="2757907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2757910">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2757966">func</span>&nbsp;<span class="op" id="2757971">(</span><span class="ident" id="2757972">t</span>&nbsp;<span class="ident" id="2757974">Time</span><span class="op" id="2757978">)</span>&nbsp;<span class="ident" id="2757980">After</span><span class="op" id="2757985">(</span><span class="ident" id="2757986">u</span>&nbsp;<span class="ident" id="2757988">Time</span><span class="op" id="2757992">)</span>&nbsp;<span class="builtintype" id="2757994">bool</span>&nbsp;<span class="op" id="2757999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758002">return</span>&nbsp;<span class="ident" id="2758009">t</span><span class="op" id="2758010">.</span><span class="ident" id="2758011">sec</span>&nbsp;<span class="op" id="2758015">&gt;</span>&nbsp;<span class="ident" id="2758017">u</span><span class="op" id="2758018">.</span><span class="ident" id="2758019">sec</span>&nbsp;<span class="op" id="2758023">||</span>&nbsp;<span class="ident" id="2758026">t</span><span class="op" id="2758027">.</span><span class="ident" id="2758028">sec</span>&nbsp;<span class="op" id="2758032">==</span>&nbsp;<span class="ident" id="2758035">u</span><span class="op" id="2758036">.</span><span class="ident" id="2758037">sec</span>&nbsp;<span class="op" id="2758041">&amp;&amp;</span>&nbsp;<span class="ident" id="2758044">t</span><span class="op" id="2758045">.</span><span class="ident" id="2758046">nsec</span>&nbsp;<span class="op" id="2758051">&gt;</span>&nbsp;<span class="ident" id="2758053">u</span><span class="op" id="2758054">.</span><span class="ident" id="2758055">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2758060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758063">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2758121">func</span>&nbsp;<span class="op" id="2758126">(</span><span class="ident" id="2758127">t</span>&nbsp;<span class="ident" id="2758129">Time</span><span class="op" id="2758133">)</span>&nbsp;<span class="ident" id="2758135">Before</span><span class="op" id="2758141">(</span><span class="ident" id="2758142">u</span>&nbsp;<span class="ident" id="2758144">Time</span><span class="op" id="2758148">)</span>&nbsp;<span class="builtintype" id="2758150">bool</span>&nbsp;<span class="op" id="2758155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758158">return</span>&nbsp;<span class="ident" id="2758165">t</span><span class="op" id="2758166">.</span><span class="ident" id="2758167">sec</span>&nbsp;<span class="op" id="2758171">&lt;</span>&nbsp;<span class="ident" id="2758173">u</span><span class="op" id="2758174">.</span><span class="ident" id="2758175">sec</span>&nbsp;<span class="op" id="2758179">||</span>&nbsp;<span class="ident" id="2758182">t</span><span class="op" id="2758183">.</span><span class="ident" id="2758184">sec</span>&nbsp;<span class="op" id="2758188">==</span>&nbsp;<span class="ident" id="2758191">u</span><span class="op" id="2758192">.</span><span class="ident" id="2758193">sec</span>&nbsp;<span class="op" id="2758197">&amp;&amp;</span>&nbsp;<span class="ident" id="2758200">t</span><span class="op" id="2758201">.</span><span class="ident" id="2758202">nsec</span>&nbsp;<span class="op" id="2758207">&lt;</span>&nbsp;<span class="ident" id="2758209">u</span><span class="op" id="2758210">.</span><span class="ident" id="2758211">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2758216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758219">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2758285">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2758352">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2758408">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2758479">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2758497">func</span>&nbsp;<span class="op" id="2758502">(</span><span class="ident" id="2758503">t</span>&nbsp;<span class="ident" id="2758505">Time</span><span class="op" id="2758509">)</span>&nbsp;<span class="ident" id="2758511">Equal</span><span class="op" id="2758516">(</span><span class="ident" id="2758517">u</span>&nbsp;<span class="ident" id="2758519">Time</span><span class="op" id="2758523">)</span>&nbsp;<span class="builtintype" id="2758525">bool</span>&nbsp;<span class="op" id="2758530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758533">return</span>&nbsp;<span class="ident" id="2758540">t</span><span class="op" id="2758541">.</span><span class="ident" id="2758542">sec</span>&nbsp;<span class="op" id="2758546">==</span>&nbsp;<span class="ident" id="2758549">u</span><span class="op" id="2758550">.</span><span class="ident" id="2758551">sec</span>&nbsp;<span class="op" id="2758555">&amp;&amp;</span>&nbsp;<span class="ident" id="2758558">t</span><span class="op" id="2758559">.</span><span class="ident" id="2758560">nsec</span>&nbsp;<span class="op" id="2758565">==</span>&nbsp;<span class="ident" id="2758568">u</span><span class="op" id="2758569">.</span><span class="ident" id="2758570">nsec</span><br>
<span class="lineno"></span><span class="op" id="2758575">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2758578">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2758639">type</span>&nbsp;<span class="ident" id="2758644">Month</span>&nbsp;<span class="builtintype" id="2758650">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2758655">const</span>&nbsp;<span class="op" id="2758661">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758664">January</span>&nbsp;<span class="ident" id="2758672">Month</span>&nbsp;<span class="op" id="2758678">=</span>&nbsp;<span class="num" id="2758680">1</span>&nbsp;<span class="op" id="2758682">+</span>&nbsp;<span class="ident" id="2758684">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758690">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758700">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758707">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758714">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758719">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758725">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758731">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758739">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758750">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758759">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758769">December</span><br>
<span class="lineno"></span><span class="op" id="2758778">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2758781">var</span>&nbsp;<span class="ident" id="2758785">months</span>&nbsp;<span class="op" id="2758792">=</span>&nbsp;<span class="op" id="2758794">[</span><span class="op" id="2758795">...</span><span class="op" id="2758798">]</span><span class="builtintype" id="2758799">string</span><span class="op" id="2758805">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758808">&#34;January&#34;</span><span class="op" id="2758817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758820">&#34;February&#34;</span><span class="op" id="2758830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758833">&#34;March&#34;</span><span class="op" id="2758840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758843">&#34;April&#34;</span><span class="op" id="2758850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758853">&#34;May&#34;</span><span class="op" id="2758858">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758861">&#34;June&#34;</span><span class="op" id="2758867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758870">&#34;July&#34;</span><span class="op" id="2758876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758879">&#34;August&#34;</span><span class="op" id="2758887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758890">&#34;September&#34;</span><span class="op" id="2758901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758904">&#34;October&#34;</span><span class="op" id="2758913">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758916">&#34;November&#34;</span><span class="op" id="2758926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2758929">&#34;December&#34;</span><span class="op" id="2758939">,</span><br>
<span class="lineno"></span><span class="op" id="2758941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758944">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2759022">func</span>&nbsp;<span class="op" id="2759027">(</span><span class="ident" id="2759028">m</span>&nbsp;<span class="ident" id="2759030">Month</span><span class="op" id="2759035">)</span>&nbsp;<span class="ident" id="2759037">String</span><span class="op" id="2759043">(</span><span class="op" id="2759044">)</span>&nbsp;<span class="builtintype" id="2759046">string</span>&nbsp;<span class="op" id="2759053">{</span>&nbsp;<span class="keyword" id="2759055">return</span>&nbsp;<span class="ident" id="2759062">months</span><span class="op" id="2759068">[</span><span class="ident" id="2759069">m</span><span class="op" id="2759070">-</span><span class="num" id="2759071">1</span><span class="op" id="2759072">]</span>&nbsp;<span class="op" id="2759074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759077">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2759137">type</span>&nbsp;<span class="ident" id="2759142">Weekday</span>&nbsp;<span class="builtintype" id="2759150">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2759155">const</span>&nbsp;<span class="op" id="2759161">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759164">Sunday</span>&nbsp;<span class="ident" id="2759171">Weekday</span>&nbsp;<span class="op" id="2759179">=</span>&nbsp;<span class="ident" id="2759181">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759187">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759195">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759204">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759215">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759225">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759233">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2759242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2759245">var</span>&nbsp;<span class="ident" id="2759249">days</span>&nbsp;<span class="op" id="2759254">=</span>&nbsp;<span class="op" id="2759256">[</span><span class="op" id="2759257">...</span><span class="op" id="2759260">]</span><span class="builtintype" id="2759261">string</span><span class="op" id="2759267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759270">&#34;Sunday&#34;</span><span class="op" id="2759278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759281">&#34;Monday&#34;</span><span class="op" id="2759289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759292">&#34;Tuesday&#34;</span><span class="op" id="2759301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759304">&#34;Wednesday&#34;</span><span class="op" id="2759315">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759318">&#34;Thursday&#34;</span><span class="op" id="2759328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759331">&#34;Friday&#34;</span><span class="op" id="2759339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2759342">&#34;Saturday&#34;</span><span class="op" id="2759352">,</span><br>
<span class="lineno"></span><span class="op" id="2759354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2759357">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2759430">func</span>&nbsp;<span class="op" id="2759435">(</span><span class="ident" id="2759436">d</span>&nbsp;<span class="ident" id="2759438">Weekday</span><span class="op" id="2759445">)</span>&nbsp;<span class="ident" id="2759447">String</span><span class="op" id="2759453">(</span><span class="op" id="2759454">)</span>&nbsp;<span class="builtintype" id="2759456">string</span>&nbsp;<span class="op" id="2759463">{</span>&nbsp;<span class="keyword" id="2759465">return</span>&nbsp;<span class="ident" id="2759472">days</span><span class="op" id="2759476">[</span><span class="ident" id="2759477">d</span><span class="op" id="2759478">]</span>&nbsp;<span class="op" id="2759480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759483">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2759508">//</span><br>
<span class="lineno">140</span><span class="comment" id="2759511">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2759557">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2759602">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2759671">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2759743">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2759813">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2759879">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2759944">//</span><br>
<span class="lineno"></span><span class="comment" id="2759947">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2760015">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2760085">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2760156">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2760224">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2760292">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2760325">//</span><br>
<span class="lineno">155</span><span class="comment" id="2760328">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2760398">//</span><br>
<span class="lineno"></span><span class="comment" id="2760401">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2760473">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2760541">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2760613">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2760683">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2760753">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2760825">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2760896">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2760967">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2761040">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2761113">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2761178">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2761250">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2761277">//</span><br>
<span class="lineno"></span><span class="comment" id="2761280">//&nbsp;&nbsp;&nbsp;&nbsp;sec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2761296">//</span><br>
<span class="lineno"></span><span class="comment" id="2761299">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2761313">//</span><br>
<span class="lineno">175</span><span class="comment" id="2761316">//&nbsp;&nbsp;&nbsp;&nbsp;sec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2761332">//&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2761348">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2761362">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2761367">//</span><br>
<span class="lineno">180</span><span class="comment" id="2761370">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2761385">//</span><br>
<span class="lineno"></span><span class="comment" id="2761388">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2761457">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2761530">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2761601">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2761673">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2761745">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2761817">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2761890">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2761963">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2761981">//</span><br>
<span class="lineno"></span><span class="comment" id="2761984">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2762052">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2762109">//</span><br>
<span class="lineno">195</span><span class="comment" id="2762112">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2762187">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2762262">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2762334">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2762408">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2762454">//</span><br>
<span class="lineno"></span><span class="comment" id="2762457">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2762533">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2762591">//</span><br>
<span class="lineno"></span><span class="comment" id="2762594">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2762668">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2762678">//</span><br>
<span class="lineno"></span><span class="comment" id="2762681">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2762754">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2762820">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2762894">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2762967">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2763036">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2763105">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2763132">//</span><br>
<span class="lineno">215</span><span class="comment" id="2763135">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2763203">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2763246">const</span>&nbsp;<span class="op" id="2763252">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763255">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763309">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763380">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763422">absoluteZeroYear</span>&nbsp;<span class="op" id="2763439">=</span>&nbsp;<span class="op" id="2763441">-</span><span class="num" id="2763442">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763457">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763488">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763541">internalYear</span>&nbsp;<span class="op" id="2763554">=</span>&nbsp;<span class="num" id="2763556">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763560">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763596">unixYear</span>&nbsp;<span class="op" id="2763605">=</span>&nbsp;<span class="num" id="2763607">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763614">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763682">absoluteToInternal</span>&nbsp;<span class="builtintype" id="2763701">int64</span>&nbsp;<span class="op" id="2763707">=</span>&nbsp;<span class="op" id="2763709">(</span><span class="ident" id="2763710">absoluteZeroYear</span>&nbsp;<span class="op" id="2763727">-</span>&nbsp;<span class="ident" id="2763729">internalYear</span><span class="op" id="2763741">)</span>&nbsp;<span class="op" id="2763743">*</span>&nbsp;<span class="num" id="2763745">365.2425</span>&nbsp;<span class="op" id="2763754">*</span>&nbsp;<span class="ident" id="2763756">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763771">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763796">=</span>&nbsp;<span class="op" id="2763798">-</span><span class="ident" id="2763799">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763820">unixToInternal</span>&nbsp;<span class="builtintype" id="2763835">int64</span>&nbsp;<span class="op" id="2763841">=</span>&nbsp;<span class="op" id="2763843">(</span><span class="num" id="2763844">1969</span><span class="op" id="2763848">*</span><span class="num" id="2763849">365</span>&nbsp;<span class="op" id="2763853">+</span>&nbsp;<span class="num" id="2763855">1969</span><span class="op" id="2763859">/</span><span class="num" id="2763860">4</span>&nbsp;<span class="op" id="2763862">-</span>&nbsp;<span class="num" id="2763864">1969</span><span class="op" id="2763868">/</span><span class="num" id="2763869">100</span>&nbsp;<span class="op" id="2763873">+</span>&nbsp;<span class="num" id="2763875">1969</span><span class="op" id="2763879">/</span><span class="num" id="2763880">400</span><span class="op" id="2763883">)</span>&nbsp;<span class="op" id="2763885">*</span>&nbsp;<span class="ident" id="2763887">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763902">internalToUnix</span>&nbsp;<span class="builtintype" id="2763917">int64</span>&nbsp;<span class="op" id="2763923">=</span>&nbsp;<span class="op" id="2763925">-</span><span class="ident" id="2763926">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2763941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763944">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2764006">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2764042">func</span>&nbsp;<span class="op" id="2764047">(</span><span class="ident" id="2764048">t</span>&nbsp;<span class="ident" id="2764050">Time</span><span class="op" id="2764054">)</span>&nbsp;<span class="ident" id="2764056">IsZero</span><span class="op" id="2764062">(</span><span class="op" id="2764063">)</span>&nbsp;<span class="builtintype" id="2764065">bool</span>&nbsp;<span class="op" id="2764070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764073">return</span>&nbsp;<span class="ident" id="2764080">t</span><span class="op" id="2764081">.</span><span class="ident" id="2764082">sec</span>&nbsp;<span class="op" id="2764086">==</span>&nbsp;<span class="num" id="2764089">0</span>&nbsp;<span class="op" id="2764091">&amp;&amp;</span>&nbsp;<span class="ident" id="2764094">t</span><span class="op" id="2764095">.</span><span class="ident" id="2764096">nsec</span>&nbsp;<span class="op" id="2764101">==</span>&nbsp;<span class="num" id="2764104">0</span><br>
<span class="lineno"></span><span class="op" id="2764106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2764109">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2764185">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2764260">func</span>&nbsp;<span class="op" id="2764265">(</span><span class="ident" id="2764266">t</span>&nbsp;<span class="ident" id="2764268">Time</span><span class="op" id="2764272">)</span>&nbsp;<span class="ident" id="2764274">abs</span><span class="op" id="2764277">(</span><span class="op" id="2764278">)</span>&nbsp;<span class="builtintype" id="2764280">uint64</span>&nbsp;<span class="op" id="2764287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764290">l</span>&nbsp;<span class="op" id="2764292">:=</span>&nbsp;<span class="ident" id="2764295">t</span><span class="op" id="2764296">.</span><span class="ident" id="2764297">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764302">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764342">if</span>&nbsp;<span class="ident" id="2764345">l</span>&nbsp;<span class="op" id="2764347">==</span>&nbsp;<span class="builtintype" id="2764350">nil</span>&nbsp;<span class="op" id="2764354">||</span>&nbsp;<span class="ident" id="2764357">l</span>&nbsp;<span class="op" id="2764359">==</span>&nbsp;<span class="op" id="2764362">&amp;</span><span class="ident" id="2764363">localLoc</span>&nbsp;<span class="op" id="2764372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764376">l</span>&nbsp;<span class="op" id="2764378">=</span>&nbsp;<span class="ident" id="2764380">l</span><span class="op" id="2764381">.</span><span class="ident" id="2764382">get</span><span class="op" id="2764385">(</span><span class="op" id="2764386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764392">sec</span>&nbsp;<span class="op" id="2764396">:=</span>&nbsp;<span class="ident" id="2764399">t</span><span class="op" id="2764400">.</span><span class="ident" id="2764401">sec</span>&nbsp;<span class="op" id="2764405">+</span>&nbsp;<span class="ident" id="2764407">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764423">if</span>&nbsp;<span class="ident" id="2764426">l</span>&nbsp;<span class="op" id="2764428">!=</span>&nbsp;<span class="op" id="2764431">&amp;</span><span class="ident" id="2764432">utcLoc</span>&nbsp;<span class="op" id="2764439">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764443">if</span>&nbsp;<span class="ident" id="2764446">l</span><span class="op" id="2764447">.</span><span class="ident" id="2764448">cacheZone</span>&nbsp;<span class="op" id="2764458">!=</span>&nbsp;<span class="builtintype" id="2764461">nil</span>&nbsp;<span class="op" id="2764465">&amp;&amp;</span>&nbsp;<span class="ident" id="2764468">l</span><span class="op" id="2764469">.</span><span class="ident" id="2764470">cacheStart</span>&nbsp;<span class="op" id="2764481">&lt;=</span>&nbsp;<span class="ident" id="2764484">sec</span>&nbsp;<span class="op" id="2764488">&amp;&amp;</span>&nbsp;<span class="ident" id="2764491">sec</span>&nbsp;<span class="op" id="2764495">&lt;</span>&nbsp;<span class="ident" id="2764497">l</span><span class="op" id="2764498">.</span><span class="ident" id="2764499">cacheEnd</span>&nbsp;<span class="op" id="2764508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764513">sec</span>&nbsp;<span class="op" id="2764517">+=</span>&nbsp;<span class="builtintype" id="2764520">int64</span><span class="op" id="2764525">(</span><span class="ident" id="2764526">l</span><span class="op" id="2764527">.</span><span class="ident" id="2764528">cacheZone</span><span class="op" id="2764537">.</span><span class="ident" id="2764538">offset</span><span class="op" id="2764544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764548">}</span>&nbsp;<span class="keyword" id="2764550">else</span>&nbsp;<span class="op" id="2764555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764560">_</span><span class="op" id="2764561">,</span>&nbsp;<span class="ident" id="2764563">offset</span><span class="op" id="2764569">,</span>&nbsp;<span class="ident" id="2764571">_</span><span class="op" id="2764572">,</span>&nbsp;<span class="ident" id="2764574">_</span><span class="op" id="2764575">,</span>&nbsp;<span class="ident" id="2764577">_</span>&nbsp;<span class="op" id="2764579">:=</span>&nbsp;<span class="ident" id="2764582">l</span><span class="op" id="2764583">.</span><span class="ident" id="2764584">lookup</span><span class="op" id="2764590">(</span><span class="ident" id="2764591">sec</span><span class="op" id="2764594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764599">sec</span>&nbsp;<span class="op" id="2764603">+=</span>&nbsp;<span class="builtintype" id="2764606">int64</span><span class="op" id="2764611">(</span><span class="ident" id="2764612">offset</span><span class="op" id="2764618">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764628">return</span>&nbsp;<span class="builtintype" id="2764635">uint64</span><span class="op" id="2764641">(</span><span class="ident" id="2764642">sec</span>&nbsp;<span class="op" id="2764646">+</span>&nbsp;<span class="op" id="2764648">(</span><span class="ident" id="2764649">unixToInternal</span>&nbsp;<span class="op" id="2764664">+</span>&nbsp;<span class="ident" id="2764666">internalToAbsolute</span><span class="op" id="2764684">)</span><span class="op" id="2764685">)</span><br>
<span class="lineno"></span><span class="op" id="2764687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2764690">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2764746">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2764806">func</span>&nbsp;<span class="op" id="2764811">(</span><span class="ident" id="2764812">t</span>&nbsp;<span class="ident" id="2764814">Time</span><span class="op" id="2764818">)</span>&nbsp;<span class="ident" id="2764820">locabs</span><span class="op" id="2764826">(</span><span class="op" id="2764827">)</span>&nbsp;<span class="op" id="2764829">(</span><span class="ident" id="2764830">name</span>&nbsp;<span class="builtintype" id="2764835">string</span><span class="op" id="2764841">,</span>&nbsp;<span class="ident" id="2764843">offset</span>&nbsp;<span class="builtintype" id="2764850">int</span><span class="op" id="2764853">,</span>&nbsp;<span class="ident" id="2764855">abs</span>&nbsp;<span class="builtintype" id="2764859">uint64</span><span class="op" id="2764865">)</span>&nbsp;<span class="op" id="2764867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764870">l</span>&nbsp;<span class="op" id="2764872">:=</span>&nbsp;<span class="ident" id="2764875">t</span><span class="op" id="2764876">.</span><span class="ident" id="2764877">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764882">if</span>&nbsp;<span class="ident" id="2764885">l</span>&nbsp;<span class="op" id="2764887">==</span>&nbsp;<span class="builtintype" id="2764890">nil</span>&nbsp;<span class="op" id="2764894">||</span>&nbsp;<span class="ident" id="2764897">l</span>&nbsp;<span class="op" id="2764899">==</span>&nbsp;<span class="op" id="2764902">&amp;</span><span class="ident" id="2764903">localLoc</span>&nbsp;<span class="op" id="2764912">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764916">l</span>&nbsp;<span class="op" id="2764918">=</span>&nbsp;<span class="ident" id="2764920">l</span><span class="op" id="2764921">.</span><span class="ident" id="2764922">get</span><span class="op" id="2764925">(</span><span class="op" id="2764926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2764932">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764988">sec</span>&nbsp;<span class="op" id="2764992">:=</span>&nbsp;<span class="ident" id="2764995">t</span><span class="op" id="2764996">.</span><span class="ident" id="2764997">sec</span>&nbsp;<span class="op" id="2765001">+</span>&nbsp;<span class="ident" id="2765003">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765019">if</span>&nbsp;<span class="ident" id="2765022">l</span>&nbsp;<span class="op" id="2765024">!=</span>&nbsp;<span class="op" id="2765027">&amp;</span><span class="ident" id="2765028">utcLoc</span>&nbsp;<span class="op" id="2765035">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765039">if</span>&nbsp;<span class="ident" id="2765042">l</span><span class="op" id="2765043">.</span><span class="ident" id="2765044">cacheZone</span>&nbsp;<span class="op" id="2765054">!=</span>&nbsp;<span class="builtintype" id="2765057">nil</span>&nbsp;<span class="op" id="2765061">&amp;&amp;</span>&nbsp;<span class="ident" id="2765064">l</span><span class="op" id="2765065">.</span><span class="ident" id="2765066">cacheStart</span>&nbsp;<span class="op" id="2765077">&lt;=</span>&nbsp;<span class="ident" id="2765080">sec</span>&nbsp;<span class="op" id="2765084">&amp;&amp;</span>&nbsp;<span class="ident" id="2765087">sec</span>&nbsp;<span class="op" id="2765091">&lt;</span>&nbsp;<span class="ident" id="2765093">l</span><span class="op" id="2765094">.</span><span class="ident" id="2765095">cacheEnd</span>&nbsp;<span class="op" id="2765104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765109">name</span>&nbsp;<span class="op" id="2765114">=</span>&nbsp;<span class="ident" id="2765116">l</span><span class="op" id="2765117">.</span><span class="ident" id="2765118">cacheZone</span><span class="op" id="2765127">.</span><span class="ident" id="2765128">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765136">offset</span>&nbsp;<span class="op" id="2765143">=</span>&nbsp;<span class="ident" id="2765145">l</span><span class="op" id="2765146">.</span><span class="ident" id="2765147">cacheZone</span><span class="op" id="2765156">.</span><span class="ident" id="2765157">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765166">}</span>&nbsp;<span class="keyword" id="2765168">else</span>&nbsp;<span class="op" id="2765173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765178">name</span><span class="op" id="2765182">,</span>&nbsp;<span class="ident" id="2765184">offset</span><span class="op" id="2765190">,</span>&nbsp;<span class="ident" id="2765192">_</span><span class="op" id="2765193">,</span>&nbsp;<span class="ident" id="2765195">_</span><span class="op" id="2765196">,</span>&nbsp;<span class="ident" id="2765198">_</span>&nbsp;<span class="op" id="2765200">=</span>&nbsp;<span class="ident" id="2765202">l</span><span class="op" id="2765203">.</span><span class="ident" id="2765204">lookup</span><span class="op" id="2765210">(</span><span class="ident" id="2765211">sec</span><span class="op" id="2765214">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765222">sec</span>&nbsp;<span class="op" id="2765226">+=</span>&nbsp;<span class="builtintype" id="2765229">int64</span><span class="op" id="2765234">(</span><span class="ident" id="2765235">offset</span><span class="op" id="2765241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765244">}</span>&nbsp;<span class="keyword" id="2765246">else</span>&nbsp;<span class="op" id="2765251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765255">name</span>&nbsp;<span class="op" id="2765260">=</span>&nbsp;<span class="string" id="2765262">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765269">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765272">abs</span>&nbsp;<span class="op" id="2765276">=</span>&nbsp;<span class="builtintype" id="2765278">uint64</span><span class="op" id="2765284">(</span><span class="ident" id="2765285">sec</span>&nbsp;<span class="op" id="2765289">+</span>&nbsp;<span class="op" id="2765291">(</span><span class="ident" id="2765292">unixToInternal</span>&nbsp;<span class="op" id="2765307">+</span>&nbsp;<span class="ident" id="2765309">internalToAbsolute</span><span class="op" id="2765327">)</span><span class="op" id="2765328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765331">return</span><br>
<span class="lineno"></span><span class="op" id="2765338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765341">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2765401">func</span>&nbsp;<span class="op" id="2765406">(</span><span class="ident" id="2765407">t</span>&nbsp;<span class="ident" id="2765409">Time</span><span class="op" id="2765413">)</span>&nbsp;<span class="ident" id="2765415">Date</span><span class="op" id="2765419">(</span><span class="op" id="2765420">)</span>&nbsp;<span class="op" id="2765422">(</span><span class="ident" id="2765423">year</span>&nbsp;<span class="builtintype" id="2765428">int</span><span class="op" id="2765431">,</span>&nbsp;<span class="ident" id="2765433">month</span>&nbsp;<span class="ident" id="2765439">Month</span><span class="op" id="2765444">,</span>&nbsp;<span class="ident" id="2765446">day</span>&nbsp;<span class="builtintype" id="2765450">int</span><span class="op" id="2765453">)</span>&nbsp;<span class="op" id="2765455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765458">year</span><span class="op" id="2765462">,</span>&nbsp;<span class="ident" id="2765464">month</span><span class="op" id="2765469">,</span>&nbsp;<span class="ident" id="2765471">day</span><span class="op" id="2765474">,</span>&nbsp;<span class="ident" id="2765476">_</span>&nbsp;<span class="op" id="2765478">=</span>&nbsp;<span class="ident" id="2765480">t</span><span class="op" id="2765481">.</span><span class="ident" id="2765482">date</span><span class="op" id="2765486">(</span><span class="builtintype" id="2765487">true</span><span class="op" id="2765491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765494">return</span><br>
<span class="lineno"></span><span class="op" id="2765501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2765504">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2765548">func</span>&nbsp;<span class="op" id="2765553">(</span><span class="ident" id="2765554">t</span>&nbsp;<span class="ident" id="2765556">Time</span><span class="op" id="2765560">)</span>&nbsp;<span class="ident" id="2765562">Year</span><span class="op" id="2765566">(</span><span class="op" id="2765567">)</span>&nbsp;<span class="builtintype" id="2765569">int</span>&nbsp;<span class="op" id="2765573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765576">year</span><span class="op" id="2765580">,</span>&nbsp;<span class="ident" id="2765582">_</span><span class="op" id="2765583">,</span>&nbsp;<span class="ident" id="2765585">_</span><span class="op" id="2765586">,</span>&nbsp;<span class="ident" id="2765588">_</span>&nbsp;<span class="op" id="2765590">:=</span>&nbsp;<span class="ident" id="2765593">t</span><span class="op" id="2765594">.</span><span class="ident" id="2765595">date</span><span class="op" id="2765599">(</span><span class="builtintype" id="2765600">false</span><span class="op" id="2765605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765608">return</span>&nbsp;<span class="ident" id="2765615">year</span><br>
<span class="lineno"></span><span class="op" id="2765620">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2765623">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2765678">func</span>&nbsp;<span class="op" id="2765683">(</span><span class="ident" id="2765684">t</span>&nbsp;<span class="ident" id="2765686">Time</span><span class="op" id="2765690">)</span>&nbsp;<span class="ident" id="2765692">Month</span><span class="op" id="2765697">(</span><span class="op" id="2765698">)</span>&nbsp;<span class="ident" id="2765700">Month</span>&nbsp;<span class="op" id="2765706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765709">_</span><span class="op" id="2765710">,</span>&nbsp;<span class="ident" id="2765712">month</span><span class="op" id="2765717">,</span>&nbsp;<span class="ident" id="2765719">_</span><span class="op" id="2765720">,</span>&nbsp;<span class="ident" id="2765722">_</span>&nbsp;<span class="op" id="2765724">:=</span>&nbsp;<span class="ident" id="2765727">t</span><span class="op" id="2765728">.</span><span class="ident" id="2765729">date</span><span class="op" id="2765733">(</span><span class="builtintype" id="2765734">true</span><span class="op" id="2765738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765741">return</span>&nbsp;<span class="ident" id="2765748">month</span><br>
<span class="lineno">305</span><span class="op" id="2765754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765757">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2765809">func</span>&nbsp;<span class="op" id="2765814">(</span><span class="ident" id="2765815">t</span>&nbsp;<span class="ident" id="2765817">Time</span><span class="op" id="2765821">)</span>&nbsp;<span class="ident" id="2765823">Day</span><span class="op" id="2765826">(</span><span class="op" id="2765827">)</span>&nbsp;<span class="builtintype" id="2765829">int</span>&nbsp;<span class="op" id="2765833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765836">_</span><span class="op" id="2765837">,</span>&nbsp;<span class="ident" id="2765839">_</span><span class="op" id="2765840">,</span>&nbsp;<span class="ident" id="2765842">day</span><span class="op" id="2765845">,</span>&nbsp;<span class="ident" id="2765847">_</span>&nbsp;<span class="op" id="2765849">:=</span>&nbsp;<span class="ident" id="2765852">t</span><span class="op" id="2765853">.</span><span class="ident" id="2765854">date</span><span class="op" id="2765858">(</span><span class="builtintype" id="2765859">true</span><span class="op" id="2765863">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765866">return</span>&nbsp;<span class="ident" id="2765873">day</span><br>
<span class="lineno"></span><span class="op" id="2765877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765880">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2765935">func</span>&nbsp;<span class="op" id="2765940">(</span><span class="ident" id="2765941">t</span>&nbsp;<span class="ident" id="2765943">Time</span><span class="op" id="2765947">)</span>&nbsp;<span class="ident" id="2765949">Weekday</span><span class="op" id="2765956">(</span><span class="op" id="2765957">)</span>&nbsp;<span class="ident" id="2765959">Weekday</span>&nbsp;<span class="op" id="2765967">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765970">return</span>&nbsp;<span class="ident" id="2765977">absWeekday</span><span class="op" id="2765987">(</span><span class="ident" id="2765988">t</span><span class="op" id="2765989">.</span><span class="ident" id="2765990">abs</span><span class="op" id="2765993">(</span><span class="op" id="2765994">)</span><span class="op" id="2765995">)</span><br>
<span class="lineno"></span><span class="op" id="2765997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766000">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2766064">func</span>&nbsp;<span class="ident" id="2766069">absWeekday</span><span class="op" id="2766079">(</span><span class="ident" id="2766080">abs</span>&nbsp;<span class="builtintype" id="2766084">uint64</span><span class="op" id="2766090">)</span>&nbsp;<span class="ident" id="2766092">Weekday</span>&nbsp;<span class="op" id="2766100">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766103">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766177">sec</span>&nbsp;<span class="op" id="2766181">:=</span>&nbsp;<span class="op" id="2766184">(</span><span class="ident" id="2766185">abs</span>&nbsp;<span class="op" id="2766189">+</span>&nbsp;<span class="builtintype" id="2766191">uint64</span><span class="op" id="2766197">(</span><span class="ident" id="2766198">Monday</span><span class="op" id="2766204">)</span><span class="op" id="2766205">*</span><span class="ident" id="2766206">secondsPerDay</span><span class="op" id="2766219">)</span>&nbsp;<span class="op" id="2766221">%</span>&nbsp;<span class="ident" id="2766223">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766239">return</span>&nbsp;<span class="ident" id="2766246">Weekday</span><span class="op" id="2766253">(</span><span class="builtintype" id="2766254">int</span><span class="op" id="2766257">(</span><span class="ident" id="2766258">sec</span><span class="op" id="2766261">)</span>&nbsp;<span class="op" id="2766263">/</span>&nbsp;<span class="ident" id="2766265">secondsPerDay</span><span class="op" id="2766278">)</span><br>
<span class="lineno"></span><span class="op" id="2766280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2766283">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2766355">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2766427">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2766501">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2766517">func</span>&nbsp;<span class="op" id="2766522">(</span><span class="ident" id="2766523">t</span>&nbsp;<span class="ident" id="2766525">Time</span><span class="op" id="2766529">)</span>&nbsp;<span class="ident" id="2766531">ISOWeek</span><span class="op" id="2766538">(</span><span class="op" id="2766539">)</span>&nbsp;<span class="op" id="2766541">(</span><span class="ident" id="2766542">year</span><span class="op" id="2766546">,</span>&nbsp;<span class="ident" id="2766548">week</span>&nbsp;<span class="builtintype" id="2766553">int</span><span class="op" id="2766556">)</span>&nbsp;<span class="op" id="2766558">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766561">year</span><span class="op" id="2766565">,</span>&nbsp;<span class="ident" id="2766567">month</span><span class="op" id="2766572">,</span>&nbsp;<span class="ident" id="2766574">day</span><span class="op" id="2766577">,</span>&nbsp;<span class="ident" id="2766579">yday</span>&nbsp;<span class="op" id="2766584">:=</span>&nbsp;<span class="ident" id="2766587">t</span><span class="op" id="2766588">.</span><span class="ident" id="2766589">date</span><span class="op" id="2766593">(</span><span class="builtintype" id="2766594">true</span><span class="op" id="2766598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766601">wday</span>&nbsp;<span class="op" id="2766606">:=</span>&nbsp;<span class="builtintype" id="2766609">int</span><span class="op" id="2766612">(</span><span class="ident" id="2766613">t</span><span class="op" id="2766614">.</span><span class="ident" id="2766615">Weekday</span><span class="op" id="2766622">(</span><span class="op" id="2766623">)</span><span class="op" id="2766624">+</span><span class="num" id="2766625">6</span><span class="op" id="2766626">)</span>&nbsp;<span class="op" id="2766628">%</span>&nbsp;<span class="num" id="2766630">7</span>&nbsp;<span class="comment" id="2766632">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766660">const</span>&nbsp;<span class="op" id="2766666">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766670">Mon</span>&nbsp;<span class="builtintype" id="2766674">int</span>&nbsp;<span class="op" id="2766678">=</span>&nbsp;<span class="ident" id="2766680">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766687">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766693">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766699">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766705">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766711">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766717">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766726">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766780">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766846">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766906">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2766965">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766988">week</span>&nbsp;<span class="op" id="2766993">=</span>&nbsp;<span class="op" id="2766995">(</span><span class="ident" id="2766996">yday</span>&nbsp;<span class="op" id="2767001">-</span>&nbsp;<span class="ident" id="2767003">wday</span>&nbsp;<span class="op" id="2767008">+</span>&nbsp;<span class="num" id="2767010">7</span><span class="op" id="2767011">)</span>&nbsp;<span class="op" id="2767013">/</span>&nbsp;<span class="num" id="2767015">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767019">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767075">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767127">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767195">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767222">jan1wday</span>&nbsp;<span class="op" id="2767231">:=</span>&nbsp;<span class="op" id="2767234">(</span><span class="ident" id="2767235">wday</span>&nbsp;<span class="op" id="2767240">-</span>&nbsp;<span class="ident" id="2767242">yday</span>&nbsp;<span class="op" id="2767247">+</span>&nbsp;<span class="num" id="2767249">7</span><span class="op" id="2767250">*</span><span class="num" id="2767251">53</span><span class="op" id="2767253">)</span>&nbsp;<span class="op" id="2767255">%</span>&nbsp;<span class="num" id="2767257">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767260">if</span>&nbsp;<span class="ident" id="2767263">Tue</span>&nbsp;<span class="op" id="2767267">&lt;=</span>&nbsp;<span class="ident" id="2767270">jan1wday</span>&nbsp;<span class="op" id="2767279">&amp;&amp;</span>&nbsp;<span class="ident" id="2767282">jan1wday</span>&nbsp;<span class="op" id="2767291">&lt;=</span>&nbsp;<span class="ident" id="2767294">Thu</span>&nbsp;<span class="op" id="2767298">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767302">week</span><span class="op" id="2767306">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767314">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767379">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767411">if</span>&nbsp;<span class="ident" id="2767414">week</span>&nbsp;<span class="op" id="2767419">==</span>&nbsp;<span class="num" id="2767422">0</span>&nbsp;<span class="op" id="2767424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767428">year</span><span class="op" id="2767432">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767437">week</span>&nbsp;<span class="op" id="2767442">=</span>&nbsp;<span class="num" id="2767444">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767449">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767510">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767558">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767627">if</span>&nbsp;<span class="ident" id="2767630">jan1wday</span>&nbsp;<span class="op" id="2767639">==</span>&nbsp;<span class="ident" id="2767642">Fri</span>&nbsp;<span class="op" id="2767646">||</span>&nbsp;<span class="op" id="2767649">(</span><span class="ident" id="2767650">jan1wday</span>&nbsp;<span class="op" id="2767659">==</span>&nbsp;<span class="ident" id="2767662">Sat</span>&nbsp;<span class="op" id="2767666">&amp;&amp;</span>&nbsp;<span class="ident" id="2767669">isLeap</span><span class="op" id="2767675">(</span><span class="ident" id="2767676">year</span><span class="op" id="2767680">)</span><span class="op" id="2767681">)</span>&nbsp;<span class="op" id="2767683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767688">week</span><span class="op" id="2767692">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767700">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767704">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767756">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2767809">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767861">if</span>&nbsp;<span class="ident" id="2767864">month</span>&nbsp;<span class="op" id="2767870">==</span>&nbsp;<span class="ident" id="2767873">December</span>&nbsp;<span class="op" id="2767882">&amp;&amp;</span>&nbsp;<span class="ident" id="2767885">day</span>&nbsp;<span class="op" id="2767889">&gt;=</span>&nbsp;<span class="num" id="2767892">29</span>&nbsp;<span class="op" id="2767895">&amp;&amp;</span>&nbsp;<span class="ident" id="2767898">wday</span>&nbsp;<span class="op" id="2767903">&lt;</span>&nbsp;<span class="ident" id="2767905">Thu</span>&nbsp;<span class="op" id="2767909">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767913">if</span>&nbsp;<span class="ident" id="2767916">dec31wday</span>&nbsp;<span class="op" id="2767926">:=</span>&nbsp;<span class="op" id="2767929">(</span><span class="ident" id="2767930">wday</span>&nbsp;<span class="op" id="2767935">+</span>&nbsp;<span class="num" id="2767937">31</span>&nbsp;<span class="op" id="2767940">-</span>&nbsp;<span class="ident" id="2767942">day</span><span class="op" id="2767945">)</span>&nbsp;<span class="op" id="2767947">%</span>&nbsp;<span class="num" id="2767949">7</span><span class="op" id="2767950">;</span>&nbsp;<span class="ident" id="2767952">Mon</span>&nbsp;<span class="op" id="2767956">&lt;=</span>&nbsp;<span class="ident" id="2767959">dec31wday</span>&nbsp;<span class="op" id="2767969">&amp;&amp;</span>&nbsp;<span class="ident" id="2767972">dec31wday</span>&nbsp;<span class="op" id="2767982">&lt;=</span>&nbsp;<span class="ident" id="2767985">Wed</span>&nbsp;<span class="op" id="2767989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767994">year</span><span class="op" id="2767998">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768004">week</span>&nbsp;<span class="op" id="2768009">=</span>&nbsp;<span class="num" id="2768011">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768018">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768022">return</span><br>
<span class="lineno"></span><span class="op" id="2768029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768032">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2768109">func</span>&nbsp;<span class="op" id="2768114">(</span><span class="ident" id="2768115">t</span>&nbsp;<span class="ident" id="2768117">Time</span><span class="op" id="2768121">)</span>&nbsp;<span class="ident" id="2768123">Clock</span><span class="op" id="2768128">(</span><span class="op" id="2768129">)</span>&nbsp;<span class="op" id="2768131">(</span><span class="ident" id="2768132">hour</span><span class="op" id="2768136">,</span>&nbsp;<span class="ident" id="2768138">min</span><span class="op" id="2768141">,</span>&nbsp;<span class="ident" id="2768143">sec</span>&nbsp;<span class="builtintype" id="2768147">int</span><span class="op" id="2768150">)</span>&nbsp;<span class="op" id="2768152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768155">return</span>&nbsp;<span class="ident" id="2768162">absClock</span><span class="op" id="2768170">(</span><span class="ident" id="2768171">t</span><span class="op" id="2768172">.</span><span class="ident" id="2768173">abs</span><span class="op" id="2768176">(</span><span class="op" id="2768177">)</span><span class="op" id="2768178">)</span><br>
<span class="lineno"></span><span class="op" id="2768180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768183">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2768243">func</span>&nbsp;<span class="ident" id="2768248">absClock</span><span class="op" id="2768256">(</span><span class="ident" id="2768257">abs</span>&nbsp;<span class="builtintype" id="2768261">uint64</span><span class="op" id="2768267">)</span>&nbsp;<span class="op" id="2768269">(</span><span class="ident" id="2768270">hour</span><span class="op" id="2768274">,</span>&nbsp;<span class="ident" id="2768276">min</span><span class="op" id="2768279">,</span>&nbsp;<span class="ident" id="2768281">sec</span>&nbsp;<span class="builtintype" id="2768285">int</span><span class="op" id="2768288">)</span>&nbsp;<span class="op" id="2768290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768293">sec</span>&nbsp;<span class="op" id="2768297">=</span>&nbsp;<span class="builtintype" id="2768299">int</span><span class="op" id="2768302">(</span><span class="ident" id="2768303">abs</span>&nbsp;<span class="op" id="2768307">%</span>&nbsp;<span class="ident" id="2768309">secondsPerDay</span><span class="op" id="2768322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768325">hour</span>&nbsp;<span class="op" id="2768330">=</span>&nbsp;<span class="ident" id="2768332">sec</span>&nbsp;<span class="op" id="2768336">/</span>&nbsp;<span class="ident" id="2768338">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768354">sec</span>&nbsp;<span class="op" id="2768358">-=</span>&nbsp;<span class="ident" id="2768361">hour</span>&nbsp;<span class="op" id="2768366">*</span>&nbsp;<span class="ident" id="2768368">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768384">min</span>&nbsp;<span class="op" id="2768388">=</span>&nbsp;<span class="ident" id="2768390">sec</span>&nbsp;<span class="op" id="2768394">/</span>&nbsp;<span class="ident" id="2768396">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768414">sec</span>&nbsp;<span class="op" id="2768418">-=</span>&nbsp;<span class="ident" id="2768421">min</span>&nbsp;<span class="op" id="2768425">*</span>&nbsp;<span class="ident" id="2768427">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768445">return</span><br>
<span class="lineno"></span><span class="op" id="2768452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768455">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2768533">func</span>&nbsp;<span class="op" id="2768538">(</span><span class="ident" id="2768539">t</span>&nbsp;<span class="ident" id="2768541">Time</span><span class="op" id="2768545">)</span>&nbsp;<span class="ident" id="2768547">Hour</span><span class="op" id="2768551">(</span><span class="op" id="2768552">)</span>&nbsp;<span class="builtintype" id="2768554">int</span>&nbsp;<span class="op" id="2768558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768561">return</span>&nbsp;<span class="builtintype" id="2768568">int</span><span class="op" id="2768571">(</span><span class="ident" id="2768572">t</span><span class="op" id="2768573">.</span><span class="ident" id="2768574">abs</span><span class="op" id="2768577">(</span><span class="op" id="2768578">)</span><span class="op" id="2768579">%</span><span class="ident" id="2768580">secondsPerDay</span><span class="op" id="2768593">)</span>&nbsp;<span class="op" id="2768595">/</span>&nbsp;<span class="ident" id="2768597">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2768612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768615">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2768705">func</span>&nbsp;<span class="op" id="2768710">(</span><span class="ident" id="2768711">t</span>&nbsp;<span class="ident" id="2768713">Time</span><span class="op" id="2768717">)</span>&nbsp;<span class="ident" id="2768719">Minute</span><span class="op" id="2768725">(</span><span class="op" id="2768726">)</span>&nbsp;<span class="builtintype" id="2768728">int</span>&nbsp;<span class="op" id="2768732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768735">return</span>&nbsp;<span class="builtintype" id="2768742">int</span><span class="op" id="2768745">(</span><span class="ident" id="2768746">t</span><span class="op" id="2768747">.</span><span class="ident" id="2768748">abs</span><span class="op" id="2768751">(</span><span class="op" id="2768752">)</span><span class="op" id="2768753">%</span><span class="ident" id="2768754">secondsPerHour</span><span class="op" id="2768768">)</span>&nbsp;<span class="op" id="2768770">/</span>&nbsp;<span class="ident" id="2768772">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2768789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768792">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2768884">func</span>&nbsp;<span class="op" id="2768889">(</span><span class="ident" id="2768890">t</span>&nbsp;<span class="ident" id="2768892">Time</span><span class="op" id="2768896">)</span>&nbsp;<span class="ident" id="2768898">Second</span><span class="op" id="2768904">(</span><span class="op" id="2768905">)</span>&nbsp;<span class="builtintype" id="2768907">int</span>&nbsp;<span class="op" id="2768911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768914">return</span>&nbsp;<span class="builtintype" id="2768921">int</span><span class="op" id="2768924">(</span><span class="ident" id="2768925">t</span><span class="op" id="2768926">.</span><span class="ident" id="2768927">abs</span><span class="op" id="2768930">(</span><span class="op" id="2768931">)</span>&nbsp;<span class="op" id="2768933">%</span>&nbsp;<span class="ident" id="2768935">secondsPerMinute</span><span class="op" id="2768951">)</span><br>
<span class="lineno"></span><span class="op" id="2768953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768956">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2769034">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2769066">func</span>&nbsp;<span class="op" id="2769071">(</span><span class="ident" id="2769072">t</span>&nbsp;<span class="ident" id="2769074">Time</span><span class="op" id="2769078">)</span>&nbsp;<span class="ident" id="2769080">Nanosecond</span><span class="op" id="2769090">(</span><span class="op" id="2769091">)</span>&nbsp;<span class="builtintype" id="2769093">int</span>&nbsp;<span class="op" id="2769097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769100">return</span>&nbsp;<span class="builtintype" id="2769107">int</span><span class="op" id="2769110">(</span><span class="ident" id="2769111">t</span><span class="op" id="2769112">.</span><span class="ident" id="2769113">nsec</span><span class="op" id="2769117">)</span><br>
<span class="lineno"></span><span class="op" id="2769119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2769122">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2769218">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2769248">func</span>&nbsp;<span class="op" id="2769253">(</span><span class="ident" id="2769254">t</span>&nbsp;<span class="ident" id="2769256">Time</span><span class="op" id="2769260">)</span>&nbsp;<span class="ident" id="2769262">YearDay</span><span class="op" id="2769269">(</span><span class="op" id="2769270">)</span>&nbsp;<span class="builtintype" id="2769272">int</span>&nbsp;<span class="op" id="2769276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769279">_</span><span class="op" id="2769280">,</span>&nbsp;<span class="ident" id="2769282">_</span><span class="op" id="2769283">,</span>&nbsp;<span class="ident" id="2769285">_</span><span class="op" id="2769286">,</span>&nbsp;<span class="ident" id="2769288">yday</span>&nbsp;<span class="op" id="2769293">:=</span>&nbsp;<span class="ident" id="2769296">t</span><span class="op" id="2769297">.</span><span class="ident" id="2769298">date</span><span class="op" id="2769302">(</span><span class="builtintype" id="2769303">false</span><span class="op" id="2769308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769311">return</span>&nbsp;<span class="ident" id="2769318">yday</span>&nbsp;<span class="op" id="2769323">+</span>&nbsp;<span class="num" id="2769325">1</span><br>
<span class="lineno">425</span><span class="op" id="2769327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769330">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2769393">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2769457">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2769519">type</span>&nbsp;<span class="ident" id="2769524">Duration</span>&nbsp;<span class="builtintype" id="2769533">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2769540">const</span>&nbsp;<span class="op" id="2769546">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769549">minDuration</span>&nbsp;<span class="ident" id="2769561">Duration</span>&nbsp;<span class="op" id="2769570">=</span>&nbsp;<span class="op" id="2769572">-</span><span class="num" id="2769573">1</span>&nbsp;<span class="op" id="2769575">&lt;&lt;</span>&nbsp;<span class="num" id="2769578">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769582">maxDuration</span>&nbsp;<span class="ident" id="2769594">Duration</span>&nbsp;<span class="op" id="2769603">=</span>&nbsp;<span class="num" id="2769605">1</span><span class="op" id="2769606">&lt;&lt;</span><span class="num" id="2769608">63</span>&nbsp;<span class="op" id="2769611">-</span>&nbsp;<span class="num" id="2769613">1</span><br>
<span class="lineno">435</span><span class="op" id="2769615">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769618">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2769690">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2769759">//</span><br>
<span class="lineno">440</span><span class="comment" id="2769762">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2769817">//&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2769842">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2769902">//</span><br>
<span class="lineno"></span><span class="comment" id="2769905">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2769971">//&nbsp;&nbsp;&nbsp;&nbsp;seconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2769988">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2770051">//</span><br>
<span class="lineno"></span><span class="keyword" id="2770054">const</span>&nbsp;<span class="op" id="2770060">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770063">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2770075">Duration</span>&nbsp;<span class="op" id="2770084">=</span>&nbsp;<span class="num" id="2770086">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770089">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770110">=</span>&nbsp;<span class="num" id="2770112">1000</span>&nbsp;<span class="op" id="2770117">*</span>&nbsp;<span class="ident" id="2770119">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770131">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770152">=</span>&nbsp;<span class="num" id="2770154">1000</span>&nbsp;<span class="op" id="2770159">*</span>&nbsp;<span class="ident" id="2770161">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770174">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770195">=</span>&nbsp;<span class="num" id="2770197">1000</span>&nbsp;<span class="op" id="2770202">*</span>&nbsp;<span class="ident" id="2770204">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770217">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770238">=</span>&nbsp;<span class="num" id="2770240">60</span>&nbsp;<span class="op" id="2770243">*</span>&nbsp;<span class="ident" id="2770245">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770253">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770274">=</span>&nbsp;<span class="num" id="2770276">60</span>&nbsp;<span class="op" id="2770279">*</span>&nbsp;<span class="ident" id="2770281">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2770288">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770291">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2770369">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2770448">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2770527">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2770599">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2770616">func</span>&nbsp;<span class="op" id="2770621">(</span><span class="ident" id="2770622">d</span>&nbsp;<span class="ident" id="2770624">Duration</span><span class="op" id="2770632">)</span>&nbsp;<span class="ident" id="2770634">String</span><span class="op" id="2770640">(</span><span class="op" id="2770641">)</span>&nbsp;<span class="builtintype" id="2770643">string</span>&nbsp;<span class="op" id="2770650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770653">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770698">var</span>&nbsp;<span class="ident" id="2770702">buf</span>&nbsp;<span class="op" id="2770706">[</span><span class="num" id="2770707">32</span><span class="op" id="2770709">]</span><span class="builtintype" id="2770710">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770716">w</span>&nbsp;<span class="op" id="2770718">:=</span>&nbsp;<span class="builtinfunc" id="2770721">len</span><span class="op" id="2770724">(</span><span class="ident" id="2770725">buf</span><span class="op" id="2770728">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770732">u</span>&nbsp;<span class="op" id="2770734">:=</span>&nbsp;<span class="builtintype" id="2770737">uint64</span><span class="op" id="2770743">(</span><span class="ident" id="2770744">d</span><span class="op" id="2770745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770748">neg</span>&nbsp;<span class="op" id="2770752">:=</span>&nbsp;<span class="ident" id="2770755">d</span>&nbsp;<span class="op" id="2770757">&lt;</span>&nbsp;<span class="num" id="2770759">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770762">if</span>&nbsp;<span class="ident" id="2770765">neg</span>&nbsp;<span class="op" id="2770769">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770773">u</span>&nbsp;<span class="op" id="2770775">=</span>&nbsp;<span class="op" id="2770777">-</span><span class="ident" id="2770778">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770785">if</span>&nbsp;<span class="ident" id="2770788">u</span>&nbsp;<span class="op" id="2770790">&lt;</span>&nbsp;<span class="builtintype" id="2770792">uint64</span><span class="op" id="2770798">(</span><span class="ident" id="2770799">Second</span><span class="op" id="2770805">)</span>&nbsp;<span class="op" id="2770807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770811">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770868">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770903">var</span>&nbsp;<span class="ident" id="2770907">prec</span>&nbsp;<span class="builtintype" id="2770912">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770918">w</span><span class="op" id="2770919">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770924">buf</span><span class="op" id="2770927">[</span><span class="ident" id="2770928">w</span><span class="op" id="2770929">]</span>&nbsp;<span class="op" id="2770931">=</span>&nbsp;<span class="string" id="2770933">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770939">w</span><span class="op" id="2770940">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770945">switch</span>&nbsp;<span class="op" id="2770952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770956">case</span>&nbsp;<span class="ident" id="2770961">u</span>&nbsp;<span class="op" id="2770963">==</span>&nbsp;<span class="num" id="2770966">0</span><span class="op" id="2770967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770972">return</span>&nbsp;<span class="string" id="2770979">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770985">case</span>&nbsp;<span class="ident" id="2770990">u</span>&nbsp;<span class="op" id="2770992">&lt;</span>&nbsp;<span class="builtintype" id="2770994">uint64</span><span class="op" id="2771000">(</span><span class="ident" id="2771001">Microsecond</span><span class="op" id="2771012">)</span><span class="op" id="2771013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771018">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771042">prec</span>&nbsp;<span class="op" id="2771047">=</span>&nbsp;<span class="num" id="2771049">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771054">buf</span><span class="op" id="2771057">[</span><span class="ident" id="2771058">w</span><span class="op" id="2771059">]</span>&nbsp;<span class="op" id="2771061">=</span>&nbsp;<span class="string" id="2771063">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771069">case</span>&nbsp;<span class="ident" id="2771074">u</span>&nbsp;<span class="op" id="2771076">&lt;</span>&nbsp;<span class="builtintype" id="2771078">uint64</span><span class="op" id="2771084">(</span><span class="ident" id="2771085">Millisecond</span><span class="op" id="2771096">)</span><span class="op" id="2771097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771102">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771127">prec</span>&nbsp;<span class="op" id="2771132">=</span>&nbsp;<span class="num" id="2771134">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771139">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771181">w</span><span class="op" id="2771182">--</span>&nbsp;<span class="comment" id="2771185">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2771216">copy</span><span class="op" id="2771220">(</span><span class="ident" id="2771221">buf</span><span class="op" id="2771224">[</span><span class="ident" id="2771225">w</span><span class="op" id="2771226">:</span><span class="op" id="2771227">]</span><span class="op" id="2771228">,</span>&nbsp;<span class="string" id="2771230">&#34;µ&#34;</span><span class="op" id="2771234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771238">default</span><span class="op" id="2771245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771250">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771275">prec</span>&nbsp;<span class="op" id="2771280">=</span>&nbsp;<span class="num" id="2771282">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771287">buf</span><span class="op" id="2771290">[</span><span class="ident" id="2771291">w</span><span class="op" id="2771292">]</span>&nbsp;<span class="op" id="2771294">=</span>&nbsp;<span class="string" id="2771296">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771306">w</span><span class="op" id="2771307">,</span>&nbsp;<span class="ident" id="2771309">u</span>&nbsp;<span class="op" id="2771311">=</span>&nbsp;<span class="ident" id="2771313">fmtFrac</span><span class="op" id="2771320">(</span><span class="ident" id="2771321">buf</span><span class="op" id="2771324">[</span><span class="op" id="2771325">:</span><span class="ident" id="2771326">w</span><span class="op" id="2771327">]</span><span class="op" id="2771328">,</span>&nbsp;<span class="ident" id="2771330">u</span><span class="op" id="2771331">,</span>&nbsp;<span class="ident" id="2771333">prec</span><span class="op" id="2771337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771341">w</span>&nbsp;<span class="op" id="2771343">=</span>&nbsp;<span class="ident" id="2771345">fmtInt</span><span class="op" id="2771351">(</span><span class="ident" id="2771352">buf</span><span class="op" id="2771355">[</span><span class="op" id="2771356">:</span><span class="ident" id="2771357">w</span><span class="op" id="2771358">]</span><span class="op" id="2771359">,</span>&nbsp;<span class="ident" id="2771361">u</span><span class="op" id="2771362">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771365">}</span>&nbsp;<span class="keyword" id="2771367">else</span>&nbsp;<span class="op" id="2771372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771376">w</span><span class="op" id="2771377">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771382">buf</span><span class="op" id="2771385">[</span><span class="ident" id="2771386">w</span><span class="op" id="2771387">]</span>&nbsp;<span class="op" id="2771389">=</span>&nbsp;<span class="string" id="2771391">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771398">w</span><span class="op" id="2771399">,</span>&nbsp;<span class="ident" id="2771401">u</span>&nbsp;<span class="op" id="2771403">=</span>&nbsp;<span class="ident" id="2771405">fmtFrac</span><span class="op" id="2771412">(</span><span class="ident" id="2771413">buf</span><span class="op" id="2771416">[</span><span class="op" id="2771417">:</span><span class="ident" id="2771418">w</span><span class="op" id="2771419">]</span><span class="op" id="2771420">,</span>&nbsp;<span class="ident" id="2771422">u</span><span class="op" id="2771423">,</span>&nbsp;<span class="num" id="2771425">9</span><span class="op" id="2771426">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771431">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771461">w</span>&nbsp;<span class="op" id="2771463">=</span>&nbsp;<span class="ident" id="2771465">fmtInt</span><span class="op" id="2771471">(</span><span class="ident" id="2771472">buf</span><span class="op" id="2771475">[</span><span class="op" id="2771476">:</span><span class="ident" id="2771477">w</span><span class="op" id="2771478">]</span><span class="op" id="2771479">,</span>&nbsp;<span class="ident" id="2771481">u</span><span class="op" id="2771482">%</span><span class="num" id="2771483">60</span><span class="op" id="2771485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771489">u</span>&nbsp;<span class="op" id="2771491">/=</span>&nbsp;<span class="num" id="2771494">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771500">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771530">if</span>&nbsp;<span class="ident" id="2771533">u</span>&nbsp;<span class="op" id="2771535">&gt;</span>&nbsp;<span class="num" id="2771537">0</span>&nbsp;<span class="op" id="2771539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771544">w</span><span class="op" id="2771545">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771551">buf</span><span class="op" id="2771554">[</span><span class="ident" id="2771555">w</span><span class="op" id="2771556">]</span>&nbsp;<span class="op" id="2771558">=</span>&nbsp;<span class="string" id="2771560">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771567">w</span>&nbsp;<span class="op" id="2771569">=</span>&nbsp;<span class="ident" id="2771571">fmtInt</span><span class="op" id="2771577">(</span><span class="ident" id="2771578">buf</span><span class="op" id="2771581">[</span><span class="op" id="2771582">:</span><span class="ident" id="2771583">w</span><span class="op" id="2771584">]</span><span class="op" id="2771585">,</span>&nbsp;<span class="ident" id="2771587">u</span><span class="op" id="2771588">%</span><span class="num" id="2771589">60</span><span class="op" id="2771591">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771596">u</span>&nbsp;<span class="op" id="2771598">/=</span>&nbsp;<span class="num" id="2771601">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771608">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771637">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771696">if</span>&nbsp;<span class="ident" id="2771699">u</span>&nbsp;<span class="op" id="2771701">&gt;</span>&nbsp;<span class="num" id="2771703">0</span>&nbsp;<span class="op" id="2771705">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771711">w</span><span class="op" id="2771712">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771719">buf</span><span class="op" id="2771722">[</span><span class="ident" id="2771723">w</span><span class="op" id="2771724">]</span>&nbsp;<span class="op" id="2771726">=</span>&nbsp;<span class="string" id="2771728">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771736">w</span>&nbsp;<span class="op" id="2771738">=</span>&nbsp;<span class="ident" id="2771740">fmtInt</span><span class="op" id="2771746">(</span><span class="ident" id="2771747">buf</span><span class="op" id="2771750">[</span><span class="op" id="2771751">:</span><span class="ident" id="2771752">w</span><span class="op" id="2771753">]</span><span class="op" id="2771754">,</span>&nbsp;<span class="ident" id="2771756">u</span><span class="op" id="2771757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771766">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771773">if</span>&nbsp;<span class="ident" id="2771776">neg</span>&nbsp;<span class="op" id="2771780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771784">w</span><span class="op" id="2771785">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771790">buf</span><span class="op" id="2771793">[</span><span class="ident" id="2771794">w</span><span class="op" id="2771795">]</span>&nbsp;<span class="op" id="2771797">=</span>&nbsp;<span class="string" id="2771799">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771808">return</span>&nbsp;<span class="builtintype" id="2771815">string</span><span class="op" id="2771821">(</span><span class="ident" id="2771822">buf</span><span class="op" id="2771825">[</span><span class="ident" id="2771826">w</span><span class="op" id="2771827">:</span><span class="op" id="2771828">]</span><span class="op" id="2771829">)</span><br>
<span class="lineno"></span><span class="op" id="2771831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2771834">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2771906">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2771969">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2772038">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2772086">func</span>&nbsp;<span class="ident" id="2772091">fmtFrac</span><span class="op" id="2772098">(</span><span class="ident" id="2772099">buf</span>&nbsp;<span class="op" id="2772103">[</span><span class="op" id="2772104">]</span><span class="builtintype" id="2772105">byte</span><span class="op" id="2772109">,</span>&nbsp;<span class="ident" id="2772111">v</span>&nbsp;<span class="builtintype" id="2772113">uint64</span><span class="op" id="2772119">,</span>&nbsp;<span class="ident" id="2772121">prec</span>&nbsp;<span class="builtintype" id="2772126">int</span><span class="op" id="2772129">)</span>&nbsp;<span class="op" id="2772131">(</span><span class="ident" id="2772132">nw</span>&nbsp;<span class="builtintype" id="2772135">int</span><span class="op" id="2772138">,</span>&nbsp;<span class="ident" id="2772140">nv</span>&nbsp;<span class="builtintype" id="2772143">uint64</span><span class="op" id="2772149">)</span>&nbsp;<span class="op" id="2772151">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772154">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772213">w</span>&nbsp;<span class="op" id="2772215">:=</span>&nbsp;<span class="builtinfunc" id="2772218">len</span><span class="op" id="2772221">(</span><span class="ident" id="2772222">buf</span><span class="op" id="2772225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772228">print</span>&nbsp;<span class="op" id="2772234">:=</span>&nbsp;<span class="builtintype" id="2772237">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772244">for</span>&nbsp;<span class="ident" id="2772248">i</span>&nbsp;<span class="op" id="2772250">:=</span>&nbsp;<span class="num" id="2772253">0</span><span class="op" id="2772254">;</span>&nbsp;<span class="ident" id="2772256">i</span>&nbsp;<span class="op" id="2772258">&lt;</span>&nbsp;<span class="ident" id="2772260">prec</span><span class="op" id="2772264">;</span>&nbsp;<span class="ident" id="2772266">i</span><span class="op" id="2772267">++</span>&nbsp;<span class="op" id="2772270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772274">digit</span>&nbsp;<span class="op" id="2772280">:=</span>&nbsp;<span class="ident" id="2772283">v</span>&nbsp;<span class="op" id="2772285">%</span>&nbsp;<span class="num" id="2772287">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772292">print</span>&nbsp;<span class="op" id="2772298">=</span>&nbsp;<span class="builtinfunc" id="2772300">print</span>&nbsp;<span class="op" id="2772306">||</span>&nbsp;<span class="ident" id="2772309">digit</span>&nbsp;<span class="op" id="2772315">!=</span>&nbsp;<span class="num" id="2772318">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772322">if</span>&nbsp;<span class="builtinfunc" id="2772325">print</span>&nbsp;<span class="op" id="2772331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772336">w</span><span class="op" id="2772337">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772343">buf</span><span class="op" id="2772346">[</span><span class="ident" id="2772347">w</span><span class="op" id="2772348">]</span>&nbsp;<span class="op" id="2772350">=</span>&nbsp;<span class="builtintype" id="2772352">byte</span><span class="op" id="2772356">(</span><span class="ident" id="2772357">digit</span><span class="op" id="2772362">)</span>&nbsp;<span class="op" id="2772364">+</span>&nbsp;<span class="string" id="2772366">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772372">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772376">v</span>&nbsp;<span class="op" id="2772378">/=</span>&nbsp;<span class="num" id="2772381">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772388">if</span>&nbsp;<span class="builtinfunc" id="2772391">print</span>&nbsp;<span class="op" id="2772397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772401">w</span><span class="op" id="2772402">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772407">buf</span><span class="op" id="2772410">[</span><span class="ident" id="2772411">w</span><span class="op" id="2772412">]</span>&nbsp;<span class="op" id="2772414">=</span>&nbsp;<span class="string" id="2772416">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772424">return</span>&nbsp;<span class="ident" id="2772431">w</span><span class="op" id="2772432">,</span>&nbsp;<span class="ident" id="2772434">v</span><br>
<span class="lineno"></span><span class="op" id="2772436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772439">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2772481">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2772530">func</span>&nbsp;<span class="ident" id="2772535">fmtInt</span><span class="op" id="2772541">(</span><span class="ident" id="2772542">buf</span>&nbsp;<span class="op" id="2772546">[</span><span class="op" id="2772547">]</span><span class="builtintype" id="2772548">byte</span><span class="op" id="2772552">,</span>&nbsp;<span class="ident" id="2772554">v</span>&nbsp;<span class="builtintype" id="2772556">uint64</span><span class="op" id="2772562">)</span>&nbsp;<span class="builtintype" id="2772564">int</span>&nbsp;<span class="op" id="2772568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772571">w</span>&nbsp;<span class="op" id="2772573">:=</span>&nbsp;<span class="builtinfunc" id="2772576">len</span><span class="op" id="2772579">(</span><span class="ident" id="2772580">buf</span><span class="op" id="2772583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772586">if</span>&nbsp;<span class="ident" id="2772589">v</span>&nbsp;<span class="op" id="2772591">==</span>&nbsp;<span class="num" id="2772594">0</span>&nbsp;<span class="op" id="2772596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772600">w</span><span class="op" id="2772601">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772606">buf</span><span class="op" id="2772609">[</span><span class="ident" id="2772610">w</span><span class="op" id="2772611">]</span>&nbsp;<span class="op" id="2772613">=</span>&nbsp;<span class="string" id="2772615">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772620">}</span>&nbsp;<span class="keyword" id="2772622">else</span>&nbsp;<span class="op" id="2772627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772631">for</span>&nbsp;<span class="ident" id="2772635">v</span>&nbsp;<span class="op" id="2772637">&gt;</span>&nbsp;<span class="num" id="2772639">0</span>&nbsp;<span class="op" id="2772641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772646">w</span><span class="op" id="2772647">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772653">buf</span><span class="op" id="2772656">[</span><span class="ident" id="2772657">w</span><span class="op" id="2772658">]</span>&nbsp;<span class="op" id="2772660">=</span>&nbsp;<span class="builtintype" id="2772662">byte</span><span class="op" id="2772666">(</span><span class="ident" id="2772667">v</span><span class="op" id="2772668">%</span><span class="num" id="2772669">10</span><span class="op" id="2772671">)</span>&nbsp;<span class="op" id="2772673">+</span>&nbsp;<span class="string" id="2772675">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772682">v</span>&nbsp;<span class="op" id="2772684">/=</span>&nbsp;<span class="num" id="2772687">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772698">return</span>&nbsp;<span class="ident" id="2772705">w</span><br>
<span class="lineno"></span><span class="op" id="2772707">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2772710">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2772778">func</span>&nbsp;<span class="op" id="2772783">(</span><span class="ident" id="2772784">d</span>&nbsp;<span class="ident" id="2772786">Duration</span><span class="op" id="2772794">)</span>&nbsp;<span class="ident" id="2772796">Nanoseconds</span><span class="op" id="2772807">(</span><span class="op" id="2772808">)</span>&nbsp;<span class="builtintype" id="2772810">int64</span>&nbsp;<span class="op" id="2772816">{</span>&nbsp;<span class="keyword" id="2772818">return</span>&nbsp;<span class="builtintype" id="2772825">int64</span><span class="op" id="2772830">(</span><span class="ident" id="2772831">d</span><span class="op" id="2772832">)</span>&nbsp;<span class="op" id="2772834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772837">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2772890">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2772957">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2773027">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2773091">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2773156">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2773220">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2773283">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773300">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2773371">func</span>&nbsp;<span class="op" id="2773376">(</span><span class="ident" id="2773377">d</span>&nbsp;<span class="ident" id="2773379">Duration</span><span class="op" id="2773387">)</span>&nbsp;<span class="ident" id="2773389">Seconds</span><span class="op" id="2773396">(</span><span class="op" id="2773397">)</span>&nbsp;<span class="builtintype" id="2773399">float64</span>&nbsp;<span class="op" id="2773407">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773410">sec</span>&nbsp;<span class="op" id="2773414">:=</span>&nbsp;<span class="ident" id="2773417">d</span>&nbsp;<span class="op" id="2773419">/</span>&nbsp;<span class="ident" id="2773421">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773429">nsec</span>&nbsp;<span class="op" id="2773434">:=</span>&nbsp;<span class="ident" id="2773437">d</span>&nbsp;<span class="op" id="2773439">%</span>&nbsp;<span class="ident" id="2773441">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773449">return</span>&nbsp;<span class="builtintype" id="2773456">float64</span><span class="op" id="2773463">(</span><span class="ident" id="2773464">sec</span><span class="op" id="2773467">)</span>&nbsp;<span class="op" id="2773469">+</span>&nbsp;<span class="builtintype" id="2773471">float64</span><span class="op" id="2773478">(</span><span class="ident" id="2773479">nsec</span><span class="op" id="2773483">)</span><span class="op" id="2773484">*</span><span class="num" id="2773485">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2773490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2773493">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2773564">func</span>&nbsp;<span class="op" id="2773569">(</span><span class="ident" id="2773570">d</span>&nbsp;<span class="ident" id="2773572">Duration</span><span class="op" id="2773580">)</span>&nbsp;<span class="ident" id="2773582">Minutes</span><span class="op" id="2773589">(</span><span class="op" id="2773590">)</span>&nbsp;<span class="builtintype" id="2773592">float64</span>&nbsp;<span class="op" id="2773600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773603">min</span>&nbsp;<span class="op" id="2773607">:=</span>&nbsp;<span class="ident" id="2773610">d</span>&nbsp;<span class="op" id="2773612">/</span>&nbsp;<span class="ident" id="2773614">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773622">nsec</span>&nbsp;<span class="op" id="2773627">:=</span>&nbsp;<span class="ident" id="2773630">d</span>&nbsp;<span class="op" id="2773632">%</span>&nbsp;<span class="ident" id="2773634">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773642">return</span>&nbsp;<span class="builtintype" id="2773649">float64</span><span class="op" id="2773656">(</span><span class="ident" id="2773657">min</span><span class="op" id="2773660">)</span>&nbsp;<span class="op" id="2773662">+</span>&nbsp;<span class="builtintype" id="2773664">float64</span><span class="op" id="2773671">(</span><span class="ident" id="2773672">nsec</span><span class="op" id="2773676">)</span><span class="op" id="2773677">*</span><span class="op" id="2773678">(</span><span class="num" id="2773679">1e-9</span><span class="op" id="2773683">/</span><span class="num" id="2773684">60</span><span class="op" id="2773686">)</span><br>
<span class="lineno">600</span><span class="op" id="2773688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773691">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2773758">func</span>&nbsp;<span class="op" id="2773763">(</span><span class="ident" id="2773764">d</span>&nbsp;<span class="ident" id="2773766">Duration</span><span class="op" id="2773774">)</span>&nbsp;<span class="ident" id="2773776">Hours</span><span class="op" id="2773781">(</span><span class="op" id="2773782">)</span>&nbsp;<span class="builtintype" id="2773784">float64</span>&nbsp;<span class="op" id="2773792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773795">hour</span>&nbsp;<span class="op" id="2773800">:=</span>&nbsp;<span class="ident" id="2773803">d</span>&nbsp;<span class="op" id="2773805">/</span>&nbsp;<span class="ident" id="2773807">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773813">nsec</span>&nbsp;<span class="op" id="2773818">:=</span>&nbsp;<span class="ident" id="2773821">d</span>&nbsp;<span class="op" id="2773823">%</span>&nbsp;<span class="ident" id="2773825">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773831">return</span>&nbsp;<span class="builtintype" id="2773838">float64</span><span class="op" id="2773845">(</span><span class="ident" id="2773846">hour</span><span class="op" id="2773850">)</span>&nbsp;<span class="op" id="2773852">+</span>&nbsp;<span class="builtintype" id="2773854">float64</span><span class="op" id="2773861">(</span><span class="ident" id="2773862">nsec</span><span class="op" id="2773866">)</span><span class="op" id="2773867">*</span><span class="op" id="2773868">(</span><span class="num" id="2773869">1e-9</span><span class="op" id="2773873">/</span><span class="num" id="2773874">60</span><span class="op" id="2773876">/</span><span class="num" id="2773877">60</span><span class="op" id="2773879">)</span><br>
<span class="lineno"></span><span class="op" id="2773881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773884">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2773913">func</span>&nbsp;<span class="op" id="2773918">(</span><span class="ident" id="2773919">t</span>&nbsp;<span class="ident" id="2773921">Time</span><span class="op" id="2773925">)</span>&nbsp;<span class="ident" id="2773927">Add</span><span class="op" id="2773930">(</span><span class="ident" id="2773931">d</span>&nbsp;<span class="ident" id="2773933">Duration</span><span class="op" id="2773941">)</span>&nbsp;<span class="ident" id="2773943">Time</span>&nbsp;<span class="op" id="2773948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773951">t</span><span class="op" id="2773952">.</span><span class="ident" id="2773953">sec</span>&nbsp;<span class="op" id="2773957">+=</span>&nbsp;<span class="builtintype" id="2773960">int64</span><span class="op" id="2773965">(</span><span class="ident" id="2773966">d</span>&nbsp;<span class="op" id="2773968">/</span>&nbsp;<span class="num" id="2773970">1e9</span><span class="op" id="2773973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773976">nsec</span>&nbsp;<span class="op" id="2773981">:=</span>&nbsp;<span class="builtintype" id="2773984">int32</span><span class="op" id="2773989">(</span><span class="ident" id="2773990">t</span><span class="op" id="2773991">.</span><span class="ident" id="2773992">nsec</span><span class="op" id="2773996">)</span>&nbsp;<span class="op" id="2773998">+</span>&nbsp;<span class="builtintype" id="2774000">int32</span><span class="op" id="2774005">(</span><span class="ident" id="2774006">d</span><span class="op" id="2774007">%</span><span class="num" id="2774008">1e9</span><span class="op" id="2774011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774014">if</span>&nbsp;<span class="ident" id="2774017">nsec</span>&nbsp;<span class="op" id="2774022">&gt;=</span>&nbsp;<span class="num" id="2774025">1e9</span>&nbsp;<span class="op" id="2774029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774033">t</span><span class="op" id="2774034">.</span><span class="ident" id="2774035">sec</span><span class="op" id="2774038">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774043">nsec</span>&nbsp;<span class="op" id="2774048">-=</span>&nbsp;<span class="num" id="2774051">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2774056">}</span>&nbsp;<span class="keyword" id="2774058">else</span>&nbsp;<span class="keyword" id="2774063">if</span>&nbsp;<span class="ident" id="2774066">nsec</span>&nbsp;<span class="op" id="2774071">&lt;</span>&nbsp;<span class="num" id="2774073">0</span>&nbsp;<span class="op" id="2774075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774079">t</span><span class="op" id="2774080">.</span><span class="ident" id="2774081">sec</span><span class="op" id="2774084">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774089">nsec</span>&nbsp;<span class="op" id="2774094">+=</span>&nbsp;<span class="num" id="2774097">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2774102">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774105">t</span><span class="op" id="2774106">.</span><span class="ident" id="2774107">nsec</span>&nbsp;<span class="op" id="2774112">=</span>&nbsp;<span class="ident" id="2774114">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774120">return</span>&nbsp;<span class="ident" id="2774127">t</span><br>
<span class="lineno"></span><span class="op" id="2774129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774132">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2774212">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2774289">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2774310">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2774361">func</span>&nbsp;<span class="op" id="2774366">(</span><span class="ident" id="2774367">t</span>&nbsp;<span class="ident" id="2774369">Time</span><span class="op" id="2774373">)</span>&nbsp;<span class="ident" id="2774375">Sub</span><span class="op" id="2774378">(</span><span class="ident" id="2774379">u</span>&nbsp;<span class="ident" id="2774381">Time</span><span class="op" id="2774385">)</span>&nbsp;<span class="ident" id="2774387">Duration</span>&nbsp;<span class="op" id="2774396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774399">d</span>&nbsp;<span class="op" id="2774401">:=</span>&nbsp;<span class="ident" id="2774404">Duration</span><span class="op" id="2774412">(</span><span class="ident" id="2774413">t</span><span class="op" id="2774414">.</span><span class="ident" id="2774415">sec</span><span class="op" id="2774418">-</span><span class="ident" id="2774419">u</span><span class="op" id="2774420">.</span><span class="ident" id="2774421">sec</span><span class="op" id="2774424">)</span><span class="op" id="2774425">*</span><span class="ident" id="2774426">Second</span>&nbsp;<span class="op" id="2774433">+</span>&nbsp;<span class="ident" id="2774435">Duration</span><span class="op" id="2774443">(</span><span class="builtintype" id="2774444">int32</span><span class="op" id="2774449">(</span><span class="ident" id="2774450">t</span><span class="op" id="2774451">.</span><span class="ident" id="2774452">nsec</span><span class="op" id="2774456">)</span><span class="op" id="2774457">-</span><span class="builtintype" id="2774458">int32</span><span class="op" id="2774463">(</span><span class="ident" id="2774464">u</span><span class="op" id="2774465">.</span><span class="ident" id="2774466">nsec</span><span class="op" id="2774470">)</span><span class="op" id="2774471">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2774474">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774511">switch</span>&nbsp;<span class="op" id="2774518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774521">case</span>&nbsp;<span class="ident" id="2774526">u</span><span class="op" id="2774527">.</span><span class="ident" id="2774528">Add</span><span class="op" id="2774531">(</span><span class="ident" id="2774532">d</span><span class="op" id="2774533">)</span><span class="op" id="2774534">.</span><span class="ident" id="2774535">Equal</span><span class="op" id="2774540">(</span><span class="ident" id="2774541">t</span><span class="op" id="2774542">)</span><span class="op" id="2774543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774547">return</span>&nbsp;<span class="ident" id="2774554">d</span>&nbsp;<span class="comment" id="2774556">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774573">case</span>&nbsp;<span class="ident" id="2774578">t</span><span class="op" id="2774579">.</span><span class="ident" id="2774580">Before</span><span class="op" id="2774586">(</span><span class="ident" id="2774587">u</span><span class="op" id="2774588">)</span><span class="op" id="2774589">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774593">return</span>&nbsp;<span class="ident" id="2774600">minDuration</span>&nbsp;<span class="comment" id="2774612">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774647">default</span><span class="op" id="2774654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774658">return</span>&nbsp;<span class="ident" id="2774665">maxDuration</span>&nbsp;<span class="comment" id="2774677">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2774712">}</span><br>
<span class="lineno"></span><span class="op" id="2774714">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2774717">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2774760">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2774802">func</span>&nbsp;<span class="ident" id="2774807">Since</span><span class="op" id="2774812">(</span><span class="ident" id="2774813">t</span>&nbsp;<span class="ident" id="2774815">Time</span><span class="op" id="2774819">)</span>&nbsp;<span class="ident" id="2774821">Duration</span>&nbsp;<span class="op" id="2774830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774833">return</span>&nbsp;<span class="ident" id="2774840">Now</span><span class="op" id="2774843">(</span><span class="op" id="2774844">)</span><span class="op" id="2774845">.</span><span class="ident" id="2774846">Sub</span><span class="op" id="2774849">(</span><span class="ident" id="2774850">t</span><span class="op" id="2774851">)</span><br>
<span class="lineno">645</span><span class="op" id="2774853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774856">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2774912">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2774961">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2775022">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2775048">//</span><br>
<span class="lineno"></span><span class="comment" id="2775051">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2775116">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2775174">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2775226">func</span>&nbsp;<span class="op" id="2775231">(</span><span class="ident" id="2775232">t</span>&nbsp;<span class="ident" id="2775234">Time</span><span class="op" id="2775238">)</span>&nbsp;<span class="ident" id="2775240">AddDate</span><span class="op" id="2775247">(</span><span class="ident" id="2775248">years</span>&nbsp;<span class="builtintype" id="2775254">int</span><span class="op" id="2775257">,</span>&nbsp;<span class="ident" id="2775259">months</span>&nbsp;<span class="builtintype" id="2775266">int</span><span class="op" id="2775269">,</span>&nbsp;<span class="ident" id="2775271">days</span>&nbsp;<span class="builtintype" id="2775276">int</span><span class="op" id="2775279">)</span>&nbsp;<span class="ident" id="2775281">Time</span>&nbsp;<span class="op" id="2775286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775289">year</span><span class="op" id="2775293">,</span>&nbsp;<span class="ident" id="2775295">month</span><span class="op" id="2775300">,</span>&nbsp;<span class="ident" id="2775302">day</span>&nbsp;<span class="op" id="2775306">:=</span>&nbsp;<span class="ident" id="2775309">t</span><span class="op" id="2775310">.</span><span class="ident" id="2775311">Date</span><span class="op" id="2775315">(</span><span class="op" id="2775316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775319">hour</span><span class="op" id="2775323">,</span>&nbsp;<span class="ident" id="2775325">min</span><span class="op" id="2775328">,</span>&nbsp;<span class="ident" id="2775330">sec</span>&nbsp;<span class="op" id="2775334">:=</span>&nbsp;<span class="ident" id="2775337">t</span><span class="op" id="2775338">.</span><span class="ident" id="2775339">Clock</span><span class="op" id="2775344">(</span><span class="op" id="2775345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775348">return</span>&nbsp;<span class="ident" id="2775355">Date</span><span class="op" id="2775359">(</span><span class="ident" id="2775360">year</span><span class="op" id="2775364">+</span><span class="ident" id="2775365">years</span><span class="op" id="2775370">,</span>&nbsp;<span class="ident" id="2775372">month</span><span class="op" id="2775377">+</span><span class="ident" id="2775378">Month</span><span class="op" id="2775383">(</span><span class="ident" id="2775384">months</span><span class="op" id="2775390">)</span><span class="op" id="2775391">,</span>&nbsp;<span class="ident" id="2775393">day</span><span class="op" id="2775396">+</span><span class="ident" id="2775397">days</span><span class="op" id="2775401">,</span>&nbsp;<span class="ident" id="2775403">hour</span><span class="op" id="2775407">,</span>&nbsp;<span class="ident" id="2775409">min</span><span class="op" id="2775412">,</span>&nbsp;<span class="ident" id="2775414">sec</span><span class="op" id="2775417">,</span>&nbsp;<span class="builtintype" id="2775419">int</span><span class="op" id="2775422">(</span><span class="ident" id="2775423">t</span><span class="op" id="2775424">.</span><span class="ident" id="2775425">nsec</span><span class="op" id="2775429">)</span><span class="op" id="2775430">,</span>&nbsp;<span class="ident" id="2775432">t</span><span class="op" id="2775433">.</span><span class="ident" id="2775434">loc</span><span class="op" id="2775437">)</span><br>
<span class="lineno"></span><span class="op" id="2775439">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2775442">const</span>&nbsp;<span class="op" id="2775448">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775451">secondsPerMinute</span>&nbsp;<span class="op" id="2775468">=</span>&nbsp;<span class="num" id="2775470">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775474">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2775491">=</span>&nbsp;<span class="num" id="2775493">60</span>&nbsp;<span class="op" id="2775496">*</span>&nbsp;<span class="num" id="2775498">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775502">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775519">=</span>&nbsp;<span class="num" id="2775521">24</span>&nbsp;<span class="op" id="2775524">*</span>&nbsp;<span class="ident" id="2775526">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775542">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2775559">=</span>&nbsp;<span class="num" id="2775561">7</span>&nbsp;<span class="op" id="2775563">*</span>&nbsp;<span class="ident" id="2775565">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775580">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2775597">=</span>&nbsp;<span class="num" id="2775599">365</span><span class="op" id="2775602">*</span><span class="num" id="2775603">400</span>&nbsp;<span class="op" id="2775607">+</span>&nbsp;<span class="num" id="2775609">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775613">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2775630">=</span>&nbsp;<span class="num" id="2775632">365</span><span class="op" id="2775635">*</span><span class="num" id="2775636">100</span>&nbsp;<span class="op" id="2775640">+</span>&nbsp;<span class="num" id="2775642">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775646">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775663">=</span>&nbsp;<span class="num" id="2775665">365</span><span class="op" id="2775668">*</span><span class="num" id="2775669">4</span>&nbsp;<span class="op" id="2775671">+</span>&nbsp;<span class="num" id="2775673">1</span><br>
<span class="lineno"></span><span class="op" id="2775675">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2775678">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2775738">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2775778">func</span>&nbsp;<span class="op" id="2775783">(</span><span class="ident" id="2775784">t</span>&nbsp;<span class="ident" id="2775786">Time</span><span class="op" id="2775790">)</span>&nbsp;<span class="ident" id="2775792">date</span><span class="op" id="2775796">(</span><span class="ident" id="2775797">full</span>&nbsp;<span class="builtintype" id="2775802">bool</span><span class="op" id="2775806">)</span>&nbsp;<span class="op" id="2775808">(</span><span class="ident" id="2775809">year</span>&nbsp;<span class="builtintype" id="2775814">int</span><span class="op" id="2775817">,</span>&nbsp;<span class="ident" id="2775819">month</span>&nbsp;<span class="ident" id="2775825">Month</span><span class="op" id="2775830">,</span>&nbsp;<span class="ident" id="2775832">day</span>&nbsp;<span class="builtintype" id="2775836">int</span><span class="op" id="2775839">,</span>&nbsp;<span class="ident" id="2775841">yday</span>&nbsp;<span class="builtintype" id="2775846">int</span><span class="op" id="2775849">)</span>&nbsp;<span class="op" id="2775851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775854">return</span>&nbsp;<span class="ident" id="2775861">absDate</span><span class="op" id="2775868">(</span><span class="ident" id="2775869">t</span><span class="op" id="2775870">.</span><span class="ident" id="2775871">abs</span><span class="op" id="2775874">(</span><span class="op" id="2775875">)</span><span class="op" id="2775876">,</span>&nbsp;<span class="ident" id="2775878">full</span><span class="op" id="2775882">)</span><br>
<span class="lineno">675</span><span class="op" id="2775884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775887">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2775945">func</span>&nbsp;<span class="ident" id="2775950">absDate</span><span class="op" id="2775957">(</span><span class="ident" id="2775958">abs</span>&nbsp;<span class="builtintype" id="2775962">uint64</span><span class="op" id="2775968">,</span>&nbsp;<span class="ident" id="2775970">full</span>&nbsp;<span class="builtintype" id="2775975">bool</span><span class="op" id="2775979">)</span>&nbsp;<span class="op" id="2775981">(</span><span class="ident" id="2775982">year</span>&nbsp;<span class="builtintype" id="2775987">int</span><span class="op" id="2775990">,</span>&nbsp;<span class="ident" id="2775992">month</span>&nbsp;<span class="ident" id="2775998">Month</span><span class="op" id="2776003">,</span>&nbsp;<span class="ident" id="2776005">day</span>&nbsp;<span class="builtintype" id="2776009">int</span><span class="op" id="2776012">,</span>&nbsp;<span class="ident" id="2776014">yday</span>&nbsp;<span class="builtintype" id="2776019">int</span><span class="op" id="2776022">)</span>&nbsp;<span class="op" id="2776024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776027">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776056">d</span>&nbsp;<span class="op" id="2776058">:=</span>&nbsp;<span class="ident" id="2776061">abs</span>&nbsp;<span class="op" id="2776065">/</span>&nbsp;<span class="ident" id="2776067">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776083">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776116">n</span>&nbsp;<span class="op" id="2776118">:=</span>&nbsp;<span class="ident" id="2776121">d</span>&nbsp;<span class="op" id="2776123">/</span>&nbsp;<span class="ident" id="2776125">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776142">y</span>&nbsp;<span class="op" id="2776144">:=</span>&nbsp;<span class="num" id="2776147">400</span>&nbsp;<span class="op" id="2776151">*</span>&nbsp;<span class="ident" id="2776153">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776156">d</span>&nbsp;<span class="op" id="2776158">-=</span>&nbsp;<span class="ident" id="2776161">daysPer400Years</span>&nbsp;<span class="op" id="2776177">*</span>&nbsp;<span class="ident" id="2776179">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776183">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776212">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776275">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776339">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776386">n</span>&nbsp;<span class="op" id="2776388">=</span>&nbsp;<span class="ident" id="2776390">d</span>&nbsp;<span class="op" id="2776392">/</span>&nbsp;<span class="ident" id="2776394">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776411">n</span>&nbsp;<span class="op" id="2776413">-=</span>&nbsp;<span class="ident" id="2776416">n</span>&nbsp;<span class="op" id="2776418">&gt;&gt;</span>&nbsp;<span class="num" id="2776421">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776424">y</span>&nbsp;<span class="op" id="2776426">+=</span>&nbsp;<span class="num" id="2776429">100</span>&nbsp;<span class="op" id="2776433">*</span>&nbsp;<span class="ident" id="2776435">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776438">d</span>&nbsp;<span class="op" id="2776440">-=</span>&nbsp;<span class="ident" id="2776443">daysPer100Years</span>&nbsp;<span class="op" id="2776459">*</span>&nbsp;<span class="ident" id="2776461">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776465">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776492">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776551">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776579">n</span>&nbsp;<span class="op" id="2776581">=</span>&nbsp;<span class="ident" id="2776583">d</span>&nbsp;<span class="op" id="2776585">/</span>&nbsp;<span class="ident" id="2776587">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776602">y</span>&nbsp;<span class="op" id="2776604">+=</span>&nbsp;<span class="num" id="2776607">4</span>&nbsp;<span class="op" id="2776609">*</span>&nbsp;<span class="ident" id="2776611">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776614">d</span>&nbsp;<span class="op" id="2776616">-=</span>&nbsp;<span class="ident" id="2776619">daysPer4Years</span>&nbsp;<span class="op" id="2776633">*</span>&nbsp;<span class="ident" id="2776635">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776639">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776680">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776747">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776808">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776833">n</span>&nbsp;<span class="op" id="2776835">=</span>&nbsp;<span class="ident" id="2776837">d</span>&nbsp;<span class="op" id="2776839">/</span>&nbsp;<span class="num" id="2776841">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776846">n</span>&nbsp;<span class="op" id="2776848">-=</span>&nbsp;<span class="ident" id="2776851">n</span>&nbsp;<span class="op" id="2776853">&gt;&gt;</span>&nbsp;<span class="num" id="2776856">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776859">y</span>&nbsp;<span class="op" id="2776861">+=</span>&nbsp;<span class="ident" id="2776864">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776867">d</span>&nbsp;<span class="op" id="2776869">-=</span>&nbsp;<span class="num" id="2776872">365</span>&nbsp;<span class="op" id="2776876">*</span>&nbsp;<span class="ident" id="2776878">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776882">year</span>&nbsp;<span class="op" id="2776887">=</span>&nbsp;<span class="builtintype" id="2776889">int</span><span class="op" id="2776892">(</span><span class="builtintype" id="2776893">int64</span><span class="op" id="2776898">(</span><span class="ident" id="2776899">y</span><span class="op" id="2776900">)</span>&nbsp;<span class="op" id="2776902">+</span>&nbsp;<span class="ident" id="2776904">absoluteZeroYear</span><span class="op" id="2776920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776923">yday</span>&nbsp;<span class="op" id="2776928">=</span>&nbsp;<span class="builtintype" id="2776930">int</span><span class="op" id="2776933">(</span><span class="ident" id="2776934">d</span><span class="op" id="2776935">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776939">if</span>&nbsp;<span class="op" id="2776942">!</span><span class="ident" id="2776943">full</span>&nbsp;<span class="op" id="2776948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776952">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2776960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776964">day</span>&nbsp;<span class="op" id="2776968">=</span>&nbsp;<span class="ident" id="2776970">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776976">if</span>&nbsp;<span class="ident" id="2776979">isLeap</span><span class="op" id="2776985">(</span><span class="ident" id="2776986">year</span><span class="op" id="2776990">)</span>&nbsp;<span class="op" id="2776992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776996">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777011">switch</span>&nbsp;<span class="op" id="2777018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777022">case</span>&nbsp;<span class="ident" id="2777027">day</span>&nbsp;<span class="op" id="2777031">&gt;</span>&nbsp;<span class="num" id="2777033">31</span><span class="op" id="2777035">+</span><span class="num" id="2777036">29</span><span class="op" id="2777038">-</span><span class="num" id="2777039">1</span><span class="op" id="2777040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777045">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777092">day</span><span class="op" id="2777095">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777100">case</span>&nbsp;<span class="ident" id="2777105">day</span>&nbsp;<span class="op" id="2777109">==</span>&nbsp;<span class="num" id="2777112">31</span><span class="op" id="2777114">+</span><span class="num" id="2777115">29</span><span class="op" id="2777117">-</span><span class="num" id="2777118">1</span><span class="op" id="2777119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777124">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777140">month</span>&nbsp;<span class="op" id="2777146">=</span>&nbsp;<span class="ident" id="2777148">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777160">day</span>&nbsp;<span class="op" id="2777164">=</span>&nbsp;<span class="num" id="2777166">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777172">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777188">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777251">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777316">month</span>&nbsp;<span class="op" id="2777322">=</span>&nbsp;<span class="ident" id="2777324">Month</span><span class="op" id="2777329">(</span><span class="ident" id="2777330">day</span>&nbsp;<span class="op" id="2777334">/</span>&nbsp;<span class="num" id="2777336">31</span><span class="op" id="2777338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777341">end</span>&nbsp;<span class="op" id="2777345">:=</span>&nbsp;<span class="builtintype" id="2777348">int</span><span class="op" id="2777351">(</span><span class="ident" id="2777352">daysBefore</span><span class="op" id="2777362">[</span><span class="ident" id="2777363">month</span><span class="op" id="2777368">+</span><span class="num" id="2777369">1</span><span class="op" id="2777370">]</span><span class="op" id="2777371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777374">var</span>&nbsp;<span class="ident" id="2777378">begin</span>&nbsp;<span class="builtintype" id="2777384">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777389">if</span>&nbsp;<span class="ident" id="2777392">day</span>&nbsp;<span class="op" id="2777396">&gt;=</span>&nbsp;<span class="ident" id="2777399">end</span>&nbsp;<span class="op" id="2777403">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777407">month</span><span class="op" id="2777412">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777417">begin</span>&nbsp;<span class="op" id="2777423">=</span>&nbsp;<span class="ident" id="2777425">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777430">}</span>&nbsp;<span class="keyword" id="2777432">else</span>&nbsp;<span class="op" id="2777437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777441">begin</span>&nbsp;<span class="op" id="2777447">=</span>&nbsp;<span class="builtintype" id="2777449">int</span><span class="op" id="2777452">(</span><span class="ident" id="2777453">daysBefore</span><span class="op" id="2777463">[</span><span class="ident" id="2777464">month</span><span class="op" id="2777469">]</span><span class="op" id="2777470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777473">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777477">month</span><span class="op" id="2777482">++</span>&nbsp;<span class="comment" id="2777485">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777510">day</span>&nbsp;<span class="op" id="2777514">=</span>&nbsp;<span class="ident" id="2777516">day</span>&nbsp;<span class="op" id="2777520">-</span>&nbsp;<span class="ident" id="2777522">begin</span>&nbsp;<span class="op" id="2777528">+</span>&nbsp;<span class="num" id="2777530">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777533">return</span><br>
<span class="lineno"></span><span class="op" id="2777540">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2777543">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2777605">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2777669">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2777726">var</span>&nbsp;<span class="ident" id="2777730">daysBefore</span>&nbsp;<span class="op" id="2777741">=</span>&nbsp;<span class="op" id="2777743">[</span><span class="op" id="2777744">...</span><span class="op" id="2777747">]</span><span class="builtintype" id="2777748">int32</span><span class="op" id="2777753">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777756">0</span><span class="op" id="2777757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777760">31</span><span class="op" id="2777762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777765">31</span>&nbsp;<span class="op" id="2777768">+</span>&nbsp;<span class="num" id="2777770">28</span><span class="op" id="2777772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777775">31</span>&nbsp;<span class="op" id="2777778">+</span>&nbsp;<span class="num" id="2777780">28</span>&nbsp;<span class="op" id="2777783">+</span>&nbsp;<span class="num" id="2777785">31</span><span class="op" id="2777787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777790">31</span>&nbsp;<span class="op" id="2777793">+</span>&nbsp;<span class="num" id="2777795">28</span>&nbsp;<span class="op" id="2777798">+</span>&nbsp;<span class="num" id="2777800">31</span>&nbsp;<span class="op" id="2777803">+</span>&nbsp;<span class="num" id="2777805">30</span><span class="op" id="2777807">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777810">31</span>&nbsp;<span class="op" id="2777813">+</span>&nbsp;<span class="num" id="2777815">28</span>&nbsp;<span class="op" id="2777818">+</span>&nbsp;<span class="num" id="2777820">31</span>&nbsp;<span class="op" id="2777823">+</span>&nbsp;<span class="num" id="2777825">30</span>&nbsp;<span class="op" id="2777828">+</span>&nbsp;<span class="num" id="2777830">31</span><span class="op" id="2777832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777835">31</span>&nbsp;<span class="op" id="2777838">+</span>&nbsp;<span class="num" id="2777840">28</span>&nbsp;<span class="op" id="2777843">+</span>&nbsp;<span class="num" id="2777845">31</span>&nbsp;<span class="op" id="2777848">+</span>&nbsp;<span class="num" id="2777850">30</span>&nbsp;<span class="op" id="2777853">+</span>&nbsp;<span class="num" id="2777855">31</span>&nbsp;<span class="op" id="2777858">+</span>&nbsp;<span class="num" id="2777860">30</span><span class="op" id="2777862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777865">31</span>&nbsp;<span class="op" id="2777868">+</span>&nbsp;<span class="num" id="2777870">28</span>&nbsp;<span class="op" id="2777873">+</span>&nbsp;<span class="num" id="2777875">31</span>&nbsp;<span class="op" id="2777878">+</span>&nbsp;<span class="num" id="2777880">30</span>&nbsp;<span class="op" id="2777883">+</span>&nbsp;<span class="num" id="2777885">31</span>&nbsp;<span class="op" id="2777888">+</span>&nbsp;<span class="num" id="2777890">30</span>&nbsp;<span class="op" id="2777893">+</span>&nbsp;<span class="num" id="2777895">31</span><span class="op" id="2777897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777900">31</span>&nbsp;<span class="op" id="2777903">+</span>&nbsp;<span class="num" id="2777905">28</span>&nbsp;<span class="op" id="2777908">+</span>&nbsp;<span class="num" id="2777910">31</span>&nbsp;<span class="op" id="2777913">+</span>&nbsp;<span class="num" id="2777915">30</span>&nbsp;<span class="op" id="2777918">+</span>&nbsp;<span class="num" id="2777920">31</span>&nbsp;<span class="op" id="2777923">+</span>&nbsp;<span class="num" id="2777925">30</span>&nbsp;<span class="op" id="2777928">+</span>&nbsp;<span class="num" id="2777930">31</span>&nbsp;<span class="op" id="2777933">+</span>&nbsp;<span class="num" id="2777935">31</span><span class="op" id="2777937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777940">31</span>&nbsp;<span class="op" id="2777943">+</span>&nbsp;<span class="num" id="2777945">28</span>&nbsp;<span class="op" id="2777948">+</span>&nbsp;<span class="num" id="2777950">31</span>&nbsp;<span class="op" id="2777953">+</span>&nbsp;<span class="num" id="2777955">30</span>&nbsp;<span class="op" id="2777958">+</span>&nbsp;<span class="num" id="2777960">31</span>&nbsp;<span class="op" id="2777963">+</span>&nbsp;<span class="num" id="2777965">30</span>&nbsp;<span class="op" id="2777968">+</span>&nbsp;<span class="num" id="2777970">31</span>&nbsp;<span class="op" id="2777973">+</span>&nbsp;<span class="num" id="2777975">31</span>&nbsp;<span class="op" id="2777978">+</span>&nbsp;<span class="num" id="2777980">30</span><span class="op" id="2777982">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2777985">31</span>&nbsp;<span class="op" id="2777988">+</span>&nbsp;<span class="num" id="2777990">28</span>&nbsp;<span class="op" id="2777993">+</span>&nbsp;<span class="num" id="2777995">31</span>&nbsp;<span class="op" id="2777998">+</span>&nbsp;<span class="num" id="2778000">30</span>&nbsp;<span class="op" id="2778003">+</span>&nbsp;<span class="num" id="2778005">31</span>&nbsp;<span class="op" id="2778008">+</span>&nbsp;<span class="num" id="2778010">30</span>&nbsp;<span class="op" id="2778013">+</span>&nbsp;<span class="num" id="2778015">31</span>&nbsp;<span class="op" id="2778018">+</span>&nbsp;<span class="num" id="2778020">31</span>&nbsp;<span class="op" id="2778023">+</span>&nbsp;<span class="num" id="2778025">30</span>&nbsp;<span class="op" id="2778028">+</span>&nbsp;<span class="num" id="2778030">31</span><span class="op" id="2778032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2778035">31</span>&nbsp;<span class="op" id="2778038">+</span>&nbsp;<span class="num" id="2778040">28</span>&nbsp;<span class="op" id="2778043">+</span>&nbsp;<span class="num" id="2778045">31</span>&nbsp;<span class="op" id="2778048">+</span>&nbsp;<span class="num" id="2778050">30</span>&nbsp;<span class="op" id="2778053">+</span>&nbsp;<span class="num" id="2778055">31</span>&nbsp;<span class="op" id="2778058">+</span>&nbsp;<span class="num" id="2778060">30</span>&nbsp;<span class="op" id="2778063">+</span>&nbsp;<span class="num" id="2778065">31</span>&nbsp;<span class="op" id="2778068">+</span>&nbsp;<span class="num" id="2778070">31</span>&nbsp;<span class="op" id="2778073">+</span>&nbsp;<span class="num" id="2778075">30</span>&nbsp;<span class="op" id="2778078">+</span>&nbsp;<span class="num" id="2778080">31</span>&nbsp;<span class="op" id="2778083">+</span>&nbsp;<span class="num" id="2778085">30</span><span class="op" id="2778087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2778090">31</span>&nbsp;<span class="op" id="2778093">+</span>&nbsp;<span class="num" id="2778095">28</span>&nbsp;<span class="op" id="2778098">+</span>&nbsp;<span class="num" id="2778100">31</span>&nbsp;<span class="op" id="2778103">+</span>&nbsp;<span class="num" id="2778105">30</span>&nbsp;<span class="op" id="2778108">+</span>&nbsp;<span class="num" id="2778110">31</span>&nbsp;<span class="op" id="2778113">+</span>&nbsp;<span class="num" id="2778115">30</span>&nbsp;<span class="op" id="2778118">+</span>&nbsp;<span class="num" id="2778120">31</span>&nbsp;<span class="op" id="2778123">+</span>&nbsp;<span class="num" id="2778125">31</span>&nbsp;<span class="op" id="2778128">+</span>&nbsp;<span class="num" id="2778130">30</span>&nbsp;<span class="op" id="2778133">+</span>&nbsp;<span class="num" id="2778135">31</span>&nbsp;<span class="op" id="2778138">+</span>&nbsp;<span class="num" id="2778140">30</span>&nbsp;<span class="op" id="2778143">+</span>&nbsp;<span class="num" id="2778145">31</span><span class="op" id="2778147">,</span><br>
<span class="lineno"></span><span class="op" id="2778149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2778152">func</span>&nbsp;<span class="ident" id="2778157">daysIn</span><span class="op" id="2778163">(</span><span class="ident" id="2778164">m</span>&nbsp;<span class="ident" id="2778166">Month</span><span class="op" id="2778171">,</span>&nbsp;<span class="ident" id="2778173">year</span>&nbsp;<span class="builtintype" id="2778178">int</span><span class="op" id="2778181">)</span>&nbsp;<span class="builtintype" id="2778183">int</span>&nbsp;<span class="op" id="2778187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778190">if</span>&nbsp;<span class="ident" id="2778193">m</span>&nbsp;<span class="op" id="2778195">==</span>&nbsp;<span class="ident" id="2778198">February</span>&nbsp;<span class="op" id="2778207">&amp;&amp;</span>&nbsp;<span class="ident" id="2778210">isLeap</span><span class="op" id="2778216">(</span><span class="ident" id="2778217">year</span><span class="op" id="2778221">)</span>&nbsp;<span class="op" id="2778223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778227">return</span>&nbsp;<span class="num" id="2778234">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2778238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778241">return</span>&nbsp;<span class="builtintype" id="2778248">int</span><span class="op" id="2778251">(</span><span class="ident" id="2778252">daysBefore</span><span class="op" id="2778262">[</span><span class="ident" id="2778263">m</span><span class="op" id="2778264">]</span>&nbsp;<span class="op" id="2778266">-</span>&nbsp;<span class="ident" id="2778268">daysBefore</span><span class="op" id="2778278">[</span><span class="ident" id="2778279">m</span><span class="op" id="2778280">-</span><span class="num" id="2778281">1</span><span class="op" id="2778282">]</span><span class="op" id="2778283">)</span><br>
<span class="lineno">775</span><span class="op" id="2778285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778288">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2778320">func</span>&nbsp;<span class="ident" id="2778325">now</span><span class="op" id="2778328">(</span><span class="op" id="2778329">)</span>&nbsp;<span class="op" id="2778331">(</span><span class="ident" id="2778332">sec</span>&nbsp;<span class="builtintype" id="2778336">int64</span><span class="op" id="2778341">,</span>&nbsp;<span class="ident" id="2778343">nsec</span>&nbsp;<span class="builtintype" id="2778348">int32</span><span class="op" id="2778353">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2778356">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2778395">func</span>&nbsp;<span class="ident" id="2778400">Now</span><span class="op" id="2778403">(</span><span class="op" id="2778404">)</span>&nbsp;<span class="ident" id="2778406">Time</span>&nbsp;<span class="op" id="2778411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778414">sec</span><span class="op" id="2778417">,</span>&nbsp;<span class="ident" id="2778419">nsec</span>&nbsp;<span class="op" id="2778424">:=</span>&nbsp;<span class="ident" id="2778427">now</span><span class="op" id="2778430">(</span><span class="op" id="2778431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778434">return</span>&nbsp;<span class="ident" id="2778441">Time</span><span class="op" id="2778445">{</span><span class="ident" id="2778446">sec</span>&nbsp;<span class="op" id="2778450">+</span>&nbsp;<span class="ident" id="2778452">unixToInternal</span><span class="op" id="2778466">,</span>&nbsp;<span class="ident" id="2778468">nsec</span><span class="op" id="2778472">,</span>&nbsp;<span class="ident" id="2778474">Local</span><span class="op" id="2778479">}</span><br>
<span class="lineno"></span><span class="op" id="2778481">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2778484">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2778531">func</span>&nbsp;<span class="op" id="2778536">(</span><span class="ident" id="2778537">t</span>&nbsp;<span class="ident" id="2778539">Time</span><span class="op" id="2778543">)</span>&nbsp;<span class="ident" id="2778545">UTC</span><span class="op" id="2778548">(</span><span class="op" id="2778549">)</span>&nbsp;<span class="ident" id="2778551">Time</span>&nbsp;<span class="op" id="2778556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778559">t</span><span class="op" id="2778560">.</span><span class="ident" id="2778561">loc</span>&nbsp;<span class="op" id="2778565">=</span>&nbsp;<span class="ident" id="2778567">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778572">return</span>&nbsp;<span class="ident" id="2778579">t</span><br>
<span class="lineno">790</span><span class="op" id="2778581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778584">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2778640">func</span>&nbsp;<span class="op" id="2778645">(</span><span class="ident" id="2778646">t</span>&nbsp;<span class="ident" id="2778648">Time</span><span class="op" id="2778652">)</span>&nbsp;<span class="ident" id="2778654">Local</span><span class="op" id="2778659">(</span><span class="op" id="2778660">)</span>&nbsp;<span class="ident" id="2778662">Time</span>&nbsp;<span class="op" id="2778667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778670">t</span><span class="op" id="2778671">.</span><span class="ident" id="2778672">loc</span>&nbsp;<span class="op" id="2778676">=</span>&nbsp;<span class="ident" id="2778678">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778685">return</span>&nbsp;<span class="ident" id="2778692">t</span><br>
<span class="lineno"></span><span class="op" id="2778694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778697">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2778755">//</span><br>
<span class="lineno">800</span><span class="comment" id="2778758">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2778786">func</span>&nbsp;<span class="op" id="2778791">(</span><span class="ident" id="2778792">t</span>&nbsp;<span class="ident" id="2778794">Time</span><span class="op" id="2778798">)</span>&nbsp;<span class="ident" id="2778800">In</span><span class="op" id="2778802">(</span><span class="ident" id="2778803">loc</span>&nbsp;<span class="op" id="2778807">*</span><span class="ident" id="2778808">Location</span><span class="op" id="2778816">)</span>&nbsp;<span class="ident" id="2778818">Time</span>&nbsp;<span class="op" id="2778823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778826">if</span>&nbsp;<span class="ident" id="2778829">loc</span>&nbsp;<span class="op" id="2778833">==</span>&nbsp;<span class="builtintype" id="2778836">nil</span>&nbsp;<span class="op" id="2778840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2778844">panic</span><span class="op" id="2778849">(</span><span class="string" id="2778850">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2778893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2778896">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778899">t</span><span class="op" id="2778900">.</span><span class="ident" id="2778901">loc</span>&nbsp;<span class="op" id="2778905">=</span>&nbsp;<span class="ident" id="2778907">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778912">return</span>&nbsp;<span class="ident" id="2778919">t</span><br>
<span class="lineno"></span><span class="op" id="2778921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778924">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2778989">func</span>&nbsp;<span class="op" id="2778994">(</span><span class="ident" id="2778995">t</span>&nbsp;<span class="ident" id="2778997">Time</span><span class="op" id="2779001">)</span>&nbsp;<span class="ident" id="2779003">Location</span><span class="op" id="2779011">(</span><span class="op" id="2779012">)</span>&nbsp;<span class="op" id="2779014">*</span><span class="ident" id="2779015">Location</span>&nbsp;<span class="op" id="2779024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779027">l</span>&nbsp;<span class="op" id="2779029">:=</span>&nbsp;<span class="ident" id="2779032">t</span><span class="op" id="2779033">.</span><span class="ident" id="2779034">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779039">if</span>&nbsp;<span class="ident" id="2779042">l</span>&nbsp;<span class="op" id="2779044">==</span>&nbsp;<span class="builtintype" id="2779047">nil</span>&nbsp;<span class="op" id="2779051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779055">l</span>&nbsp;<span class="op" id="2779057">=</span>&nbsp;<span class="ident" id="2779059">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779064">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779067">return</span>&nbsp;<span class="ident" id="2779074">l</span><br>
<span class="lineno"></span><span class="op" id="2779076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2779079">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2779157">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2779232">func</span>&nbsp;<span class="op" id="2779237">(</span><span class="ident" id="2779238">t</span>&nbsp;<span class="ident" id="2779240">Time</span><span class="op" id="2779244">)</span>&nbsp;<span class="ident" id="2779246">Zone</span><span class="op" id="2779250">(</span><span class="op" id="2779251">)</span>&nbsp;<span class="op" id="2779253">(</span><span class="ident" id="2779254">name</span>&nbsp;<span class="builtintype" id="2779259">string</span><span class="op" id="2779265">,</span>&nbsp;<span class="ident" id="2779267">offset</span>&nbsp;<span class="builtintype" id="2779274">int</span><span class="op" id="2779277">)</span>&nbsp;<span class="op" id="2779279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779282">name</span><span class="op" id="2779286">,</span>&nbsp;<span class="ident" id="2779288">offset</span><span class="op" id="2779294">,</span>&nbsp;<span class="ident" id="2779296">_</span><span class="op" id="2779297">,</span>&nbsp;<span class="ident" id="2779299">_</span><span class="op" id="2779300">,</span>&nbsp;<span class="ident" id="2779302">_</span>&nbsp;<span class="op" id="2779304">=</span>&nbsp;<span class="ident" id="2779306">t</span><span class="op" id="2779307">.</span><span class="ident" id="2779308">loc</span><span class="op" id="2779311">.</span><span class="ident" id="2779312">lookup</span><span class="op" id="2779318">(</span><span class="ident" id="2779319">t</span><span class="op" id="2779320">.</span><span class="ident" id="2779321">sec</span>&nbsp;<span class="op" id="2779325">+</span>&nbsp;<span class="ident" id="2779327">internalToUnix</span><span class="op" id="2779341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779344">return</span><br>
<span class="lineno"></span><span class="op" id="2779351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2779354">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2779418">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2779448">func</span>&nbsp;<span class="op" id="2779453">(</span><span class="ident" id="2779454">t</span>&nbsp;<span class="ident" id="2779456">Time</span><span class="op" id="2779460">)</span>&nbsp;<span class="ident" id="2779462">Unix</span><span class="op" id="2779466">(</span><span class="op" id="2779467">)</span>&nbsp;<span class="builtintype" id="2779469">int64</span>&nbsp;<span class="op" id="2779475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779478">return</span>&nbsp;<span class="ident" id="2779485">t</span><span class="op" id="2779486">.</span><span class="ident" id="2779487">sec</span>&nbsp;<span class="op" id="2779491">+</span>&nbsp;<span class="ident" id="2779493">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2779508">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2779511">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2779583">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2779654">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2779722">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2779793">func</span>&nbsp;<span class="op" id="2779798">(</span><span class="ident" id="2779799">t</span>&nbsp;<span class="ident" id="2779801">Time</span><span class="op" id="2779805">)</span>&nbsp;<span class="ident" id="2779807">UnixNano</span><span class="op" id="2779815">(</span><span class="op" id="2779816">)</span>&nbsp;<span class="builtintype" id="2779818">int64</span>&nbsp;<span class="op" id="2779824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779827">return</span>&nbsp;<span class="op" id="2779834">(</span><span class="ident" id="2779835">t</span><span class="op" id="2779836">.</span><span class="ident" id="2779837">sec</span><span class="op" id="2779840">+</span><span class="ident" id="2779841">internalToUnix</span><span class="op" id="2779855">)</span><span class="op" id="2779856">*</span><span class="num" id="2779857">1e9</span>&nbsp;<span class="op" id="2779861">+</span>&nbsp;<span class="builtintype" id="2779863">int64</span><span class="op" id="2779868">(</span><span class="ident" id="2779869">t</span><span class="op" id="2779870">.</span><span class="ident" id="2779871">nsec</span><span class="op" id="2779875">)</span><br>
<span class="lineno"></span><span class="op" id="2779877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2779880">const</span>&nbsp;<span class="ident" id="2779886">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2779904">byte</span>&nbsp;<span class="op" id="2779909">=</span>&nbsp;<span class="num" id="2779911">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2779914">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2779982">func</span>&nbsp;<span class="op" id="2779987">(</span><span class="ident" id="2779988">t</span>&nbsp;<span class="ident" id="2779990">Time</span><span class="op" id="2779994">)</span>&nbsp;<span class="ident" id="2779996">MarshalBinary</span><span class="op" id="2780009">(</span><span class="op" id="2780010">)</span>&nbsp;<span class="op" id="2780012">(</span><span class="op" id="2780013">[</span><span class="op" id="2780014">]</span><span class="builtintype" id="2780015">byte</span><span class="op" id="2780019">,</span>&nbsp;<span class="builtintype" id="2780021">error</span><span class="op" id="2780026">)</span>&nbsp;<span class="op" id="2780028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780031">var</span>&nbsp;<span class="ident" id="2780035">offsetMin</span>&nbsp;<span class="builtintype" id="2780045">int16</span>&nbsp;<span class="comment" id="2780051">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780088">if</span>&nbsp;<span class="ident" id="2780091">t</span><span class="op" id="2780092">.</span><span class="ident" id="2780093">Location</span><span class="op" id="2780101">(</span><span class="op" id="2780102">)</span>&nbsp;<span class="op" id="2780104">==</span>&nbsp;<span class="op" id="2780107">&amp;</span><span class="ident" id="2780108">utcLoc</span>&nbsp;<span class="op" id="2780115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780119">offsetMin</span>&nbsp;<span class="op" id="2780129">=</span>&nbsp;<span class="op" id="2780131">-</span><span class="num" id="2780132">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2780135">}</span>&nbsp;<span class="keyword" id="2780137">else</span>&nbsp;<span class="op" id="2780142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780146">_</span><span class="op" id="2780147">,</span>&nbsp;<span class="ident" id="2780149">offset</span>&nbsp;<span class="op" id="2780156">:=</span>&nbsp;<span class="ident" id="2780159">t</span><span class="op" id="2780160">.</span><span class="ident" id="2780161">Zone</span><span class="op" id="2780165">(</span><span class="op" id="2780166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780170">if</span>&nbsp;<span class="ident" id="2780173">offset</span><span class="op" id="2780179">%</span><span class="num" id="2780180">60</span>&nbsp;<span class="op" id="2780183">!=</span>&nbsp;<span class="num" id="2780186">0</span>&nbsp;<span class="op" id="2780188">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780193">return</span>&nbsp;<span class="builtintype" id="2780200">nil</span><span class="op" id="2780203">,</span>&nbsp;<span class="ident" id="2780205">errors</span><span class="op" id="2780211">.</span><span class="ident" id="2780212">New</span><span class="op" id="2780215">(</span><span class="string" id="2780216">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2780271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2780275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780279">offset</span>&nbsp;<span class="op" id="2780286">/=</span>&nbsp;<span class="num" id="2780289">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780294">if</span>&nbsp;<span class="ident" id="2780297">offset</span>&nbsp;<span class="op" id="2780304">&lt;</span>&nbsp;<span class="op" id="2780306">-</span><span class="num" id="2780307">32768</span>&nbsp;<span class="op" id="2780313">||</span>&nbsp;<span class="ident" id="2780316">offset</span>&nbsp;<span class="op" id="2780323">==</span>&nbsp;<span class="op" id="2780326">-</span><span class="num" id="2780327">1</span>&nbsp;<span class="op" id="2780329">||</span>&nbsp;<span class="ident" id="2780332">offset</span>&nbsp;<span class="op" id="2780339">&gt;</span>&nbsp;<span class="num" id="2780341">32767</span>&nbsp;<span class="op" id="2780347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780352">return</span>&nbsp;<span class="builtintype" id="2780359">nil</span><span class="op" id="2780362">,</span>&nbsp;<span class="ident" id="2780364">errors</span><span class="op" id="2780370">.</span><span class="ident" id="2780371">New</span><span class="op" id="2780374">(</span><span class="string" id="2780375">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2780419">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2780423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780427">offsetMin</span>&nbsp;<span class="op" id="2780437">=</span>&nbsp;<span class="builtintype" id="2780439">int16</span><span class="op" id="2780444">(</span><span class="ident" id="2780445">offset</span><span class="op" id="2780451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2780454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780458">enc</span>&nbsp;<span class="op" id="2780462">:=</span>&nbsp;<span class="op" id="2780465">[</span><span class="op" id="2780466">]</span><span class="builtintype" id="2780467">byte</span><span class="op" id="2780471">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780475">timeBinaryVersion</span><span class="op" id="2780492">,</span>&nbsp;<span class="comment" id="2780494">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780516">byte</span><span class="op" id="2780520">(</span><span class="ident" id="2780521">t</span><span class="op" id="2780522">.</span><span class="ident" id="2780523">sec</span>&nbsp;<span class="op" id="2780527">&gt;&gt;</span>&nbsp;<span class="num" id="2780530">56</span><span class="op" id="2780532">)</span><span class="op" id="2780533">,</span>&nbsp;<span class="comment" id="2780535">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780559">byte</span><span class="op" id="2780563">(</span><span class="ident" id="2780564">t</span><span class="op" id="2780565">.</span><span class="ident" id="2780566">sec</span>&nbsp;<span class="op" id="2780570">&gt;&gt;</span>&nbsp;<span class="num" id="2780573">48</span><span class="op" id="2780575">)</span><span class="op" id="2780576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780580">byte</span><span class="op" id="2780584">(</span><span class="ident" id="2780585">t</span><span class="op" id="2780586">.</span><span class="ident" id="2780587">sec</span>&nbsp;<span class="op" id="2780591">&gt;&gt;</span>&nbsp;<span class="num" id="2780594">40</span><span class="op" id="2780596">)</span><span class="op" id="2780597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780601">byte</span><span class="op" id="2780605">(</span><span class="ident" id="2780606">t</span><span class="op" id="2780607">.</span><span class="ident" id="2780608">sec</span>&nbsp;<span class="op" id="2780612">&gt;&gt;</span>&nbsp;<span class="num" id="2780615">32</span><span class="op" id="2780617">)</span><span class="op" id="2780618">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780622">byte</span><span class="op" id="2780626">(</span><span class="ident" id="2780627">t</span><span class="op" id="2780628">.</span><span class="ident" id="2780629">sec</span>&nbsp;<span class="op" id="2780633">&gt;&gt;</span>&nbsp;<span class="num" id="2780636">24</span><span class="op" id="2780638">)</span><span class="op" id="2780639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780643">byte</span><span class="op" id="2780647">(</span><span class="ident" id="2780648">t</span><span class="op" id="2780649">.</span><span class="ident" id="2780650">sec</span>&nbsp;<span class="op" id="2780654">&gt;&gt;</span>&nbsp;<span class="num" id="2780657">16</span><span class="op" id="2780659">)</span><span class="op" id="2780660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780664">byte</span><span class="op" id="2780668">(</span><span class="ident" id="2780669">t</span><span class="op" id="2780670">.</span><span class="ident" id="2780671">sec</span>&nbsp;<span class="op" id="2780675">&gt;&gt;</span>&nbsp;<span class="num" id="2780678">8</span><span class="op" id="2780679">)</span><span class="op" id="2780680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780684">byte</span><span class="op" id="2780688">(</span><span class="ident" id="2780689">t</span><span class="op" id="2780690">.</span><span class="ident" id="2780691">sec</span><span class="op" id="2780694">)</span><span class="op" id="2780695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780699">byte</span><span class="op" id="2780703">(</span><span class="ident" id="2780704">t</span><span class="op" id="2780705">.</span><span class="ident" id="2780706">nsec</span>&nbsp;<span class="op" id="2780711">&gt;&gt;</span>&nbsp;<span class="num" id="2780714">24</span><span class="op" id="2780716">)</span><span class="op" id="2780717">,</span>&nbsp;<span class="comment" id="2780719">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780748">byte</span><span class="op" id="2780752">(</span><span class="ident" id="2780753">t</span><span class="op" id="2780754">.</span><span class="ident" id="2780755">nsec</span>&nbsp;<span class="op" id="2780760">&gt;&gt;</span>&nbsp;<span class="num" id="2780763">16</span><span class="op" id="2780765">)</span><span class="op" id="2780766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780770">byte</span><span class="op" id="2780774">(</span><span class="ident" id="2780775">t</span><span class="op" id="2780776">.</span><span class="ident" id="2780777">nsec</span>&nbsp;<span class="op" id="2780782">&gt;&gt;</span>&nbsp;<span class="num" id="2780785">8</span><span class="op" id="2780786">)</span><span class="op" id="2780787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780791">byte</span><span class="op" id="2780795">(</span><span class="ident" id="2780796">t</span><span class="op" id="2780797">.</span><span class="ident" id="2780798">nsec</span><span class="op" id="2780802">)</span><span class="op" id="2780803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780807">byte</span><span class="op" id="2780811">(</span><span class="ident" id="2780812">offsetMin</span>&nbsp;<span class="op" id="2780822">&gt;&gt;</span>&nbsp;<span class="num" id="2780825">8</span><span class="op" id="2780826">)</span><span class="op" id="2780827">,</span>&nbsp;<span class="comment" id="2780829">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2780870">byte</span><span class="op" id="2780874">(</span><span class="ident" id="2780875">offsetMin</span><span class="op" id="2780884">)</span><span class="op" id="2780885">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2780888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2780892">return</span>&nbsp;<span class="ident" id="2780899">enc</span><span class="op" id="2780902">,</span>&nbsp;<span class="builtintype" id="2780904">nil</span><br>
<span class="lineno"></span><span class="op" id="2780908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2780911">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2780983">func</span>&nbsp;<span class="op" id="2780988">(</span><span class="ident" id="2780989">t</span>&nbsp;<span class="op" id="2780991">*</span><span class="ident" id="2780992">Time</span><span class="op" id="2780996">)</span>&nbsp;<span class="ident" id="2780998">UnmarshalBinary</span><span class="op" id="2781013">(</span><span class="ident" id="2781014">data</span>&nbsp;<span class="op" id="2781019">[</span><span class="op" id="2781020">]</span><span class="builtintype" id="2781021">byte</span><span class="op" id="2781025">)</span>&nbsp;<span class="builtintype" id="2781027">error</span>&nbsp;<span class="op" id="2781033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781036">buf</span>&nbsp;<span class="op" id="2781040">:=</span>&nbsp;<span class="ident" id="2781043">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781049">if</span>&nbsp;<span class="builtinfunc" id="2781052">len</span><span class="op" id="2781055">(</span><span class="ident" id="2781056">buf</span><span class="op" id="2781059">)</span>&nbsp;<span class="op" id="2781061">==</span>&nbsp;<span class="num" id="2781064">0</span>&nbsp;<span class="op" id="2781066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781070">return</span>&nbsp;<span class="ident" id="2781077">errors</span><span class="op" id="2781083">.</span><span class="ident" id="2781084">New</span><span class="op" id="2781087">(</span><span class="string" id="2781088">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2781119">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781126">if</span>&nbsp;<span class="ident" id="2781129">buf</span><span class="op" id="2781132">[</span><span class="num" id="2781133">0</span><span class="op" id="2781134">]</span>&nbsp;<span class="op" id="2781136">!=</span>&nbsp;<span class="ident" id="2781139">timeBinaryVersion</span>&nbsp;<span class="op" id="2781157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781161">return</span>&nbsp;<span class="ident" id="2781168">errors</span><span class="op" id="2781174">.</span><span class="ident" id="2781175">New</span><span class="op" id="2781178">(</span><span class="string" id="2781179">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2781222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781225">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781229">if</span>&nbsp;<span class="builtinfunc" id="2781232">len</span><span class="op" id="2781235">(</span><span class="ident" id="2781236">buf</span><span class="op" id="2781239">)</span>&nbsp;<span class="op" id="2781241">!=</span>&nbsp;<span class="comment" id="2781244">/*version*/</span>&nbsp;<span class="num" id="2781256">1</span><span class="op" id="2781257">+</span>&nbsp;<span class="comment" id="2781259">/*sec*/</span>&nbsp;<span class="num" id="2781267">8</span><span class="op" id="2781268">+</span>&nbsp;<span class="comment" id="2781270">/*nsec*/</span>&nbsp;<span class="num" id="2781279">4</span><span class="op" id="2781280">+</span>&nbsp;<span class="comment" id="2781282">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2781298">2</span>&nbsp;<span class="op" id="2781300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781304">return</span>&nbsp;<span class="ident" id="2781311">errors</span><span class="op" id="2781317">.</span><span class="ident" id="2781318">New</span><span class="op" id="2781321">(</span><span class="string" id="2781322">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2781360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781367">buf</span>&nbsp;<span class="op" id="2781371">=</span>&nbsp;<span class="ident" id="2781373">buf</span><span class="op" id="2781376">[</span><span class="num" id="2781377">1</span><span class="op" id="2781378">:</span><span class="op" id="2781379">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781382">t</span><span class="op" id="2781383">.</span><span class="ident" id="2781384">sec</span>&nbsp;<span class="op" id="2781388">=</span>&nbsp;<span class="builtintype" id="2781390">int64</span><span class="op" id="2781395">(</span><span class="ident" id="2781396">buf</span><span class="op" id="2781399">[</span><span class="num" id="2781400">7</span><span class="op" id="2781401">]</span><span class="op" id="2781402">)</span>&nbsp;<span class="op" id="2781404">|</span>&nbsp;<span class="builtintype" id="2781406">int64</span><span class="op" id="2781411">(</span><span class="ident" id="2781412">buf</span><span class="op" id="2781415">[</span><span class="num" id="2781416">6</span><span class="op" id="2781417">]</span><span class="op" id="2781418">)</span><span class="op" id="2781419">&lt;&lt;</span><span class="num" id="2781421">8</span>&nbsp;<span class="op" id="2781423">|</span>&nbsp;<span class="builtintype" id="2781425">int64</span><span class="op" id="2781430">(</span><span class="ident" id="2781431">buf</span><span class="op" id="2781434">[</span><span class="num" id="2781435">5</span><span class="op" id="2781436">]</span><span class="op" id="2781437">)</span><span class="op" id="2781438">&lt;&lt;</span><span class="num" id="2781440">16</span>&nbsp;<span class="op" id="2781443">|</span>&nbsp;<span class="builtintype" id="2781445">int64</span><span class="op" id="2781450">(</span><span class="ident" id="2781451">buf</span><span class="op" id="2781454">[</span><span class="num" id="2781455">4</span><span class="op" id="2781456">]</span><span class="op" id="2781457">)</span><span class="op" id="2781458">&lt;&lt;</span><span class="num" id="2781460">24</span>&nbsp;<span class="op" id="2781463">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2781467">int64</span><span class="op" id="2781472">(</span><span class="ident" id="2781473">buf</span><span class="op" id="2781476">[</span><span class="num" id="2781477">3</span><span class="op" id="2781478">]</span><span class="op" id="2781479">)</span><span class="op" id="2781480">&lt;&lt;</span><span class="num" id="2781482">32</span>&nbsp;<span class="op" id="2781485">|</span>&nbsp;<span class="builtintype" id="2781487">int64</span><span class="op" id="2781492">(</span><span class="ident" id="2781493">buf</span><span class="op" id="2781496">[</span><span class="num" id="2781497">2</span><span class="op" id="2781498">]</span><span class="op" id="2781499">)</span><span class="op" id="2781500">&lt;&lt;</span><span class="num" id="2781502">40</span>&nbsp;<span class="op" id="2781505">|</span>&nbsp;<span class="builtintype" id="2781507">int64</span><span class="op" id="2781512">(</span><span class="ident" id="2781513">buf</span><span class="op" id="2781516">[</span><span class="num" id="2781517">1</span><span class="op" id="2781518">]</span><span class="op" id="2781519">)</span><span class="op" id="2781520">&lt;&lt;</span><span class="num" id="2781522">48</span>&nbsp;<span class="op" id="2781525">|</span>&nbsp;<span class="builtintype" id="2781527">int64</span><span class="op" id="2781532">(</span><span class="ident" id="2781533">buf</span><span class="op" id="2781536">[</span><span class="num" id="2781537">0</span><span class="op" id="2781538">]</span><span class="op" id="2781539">)</span><span class="op" id="2781540">&lt;&lt;</span><span class="num" id="2781542">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781547">buf</span>&nbsp;<span class="op" id="2781551">=</span>&nbsp;<span class="ident" id="2781553">buf</span><span class="op" id="2781556">[</span><span class="num" id="2781557">8</span><span class="op" id="2781558">:</span><span class="op" id="2781559">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781562">t</span><span class="op" id="2781563">.</span><span class="ident" id="2781564">nsec</span>&nbsp;<span class="op" id="2781569">=</span>&nbsp;<span class="builtintype" id="2781571">int32</span><span class="op" id="2781576">(</span><span class="ident" id="2781577">buf</span><span class="op" id="2781580">[</span><span class="num" id="2781581">3</span><span class="op" id="2781582">]</span><span class="op" id="2781583">)</span>&nbsp;<span class="op" id="2781585">|</span>&nbsp;<span class="builtintype" id="2781587">int32</span><span class="op" id="2781592">(</span><span class="ident" id="2781593">buf</span><span class="op" id="2781596">[</span><span class="num" id="2781597">2</span><span class="op" id="2781598">]</span><span class="op" id="2781599">)</span><span class="op" id="2781600">&lt;&lt;</span><span class="num" id="2781602">8</span>&nbsp;<span class="op" id="2781604">|</span>&nbsp;<span class="builtintype" id="2781606">int32</span><span class="op" id="2781611">(</span><span class="ident" id="2781612">buf</span><span class="op" id="2781615">[</span><span class="num" id="2781616">1</span><span class="op" id="2781617">]</span><span class="op" id="2781618">)</span><span class="op" id="2781619">&lt;&lt;</span><span class="num" id="2781621">16</span>&nbsp;<span class="op" id="2781624">|</span>&nbsp;<span class="builtintype" id="2781626">int32</span><span class="op" id="2781631">(</span><span class="ident" id="2781632">buf</span><span class="op" id="2781635">[</span><span class="num" id="2781636">0</span><span class="op" id="2781637">]</span><span class="op" id="2781638">)</span><span class="op" id="2781639">&lt;&lt;</span><span class="num" id="2781641">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781646">buf</span>&nbsp;<span class="op" id="2781650">=</span>&nbsp;<span class="ident" id="2781652">buf</span><span class="op" id="2781655">[</span><span class="num" id="2781656">4</span><span class="op" id="2781657">:</span><span class="op" id="2781658">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781661">offset</span>&nbsp;<span class="op" id="2781668">:=</span>&nbsp;<span class="builtintype" id="2781671">int</span><span class="op" id="2781674">(</span><span class="builtintype" id="2781675">int16</span><span class="op" id="2781680">(</span><span class="ident" id="2781681">buf</span><span class="op" id="2781684">[</span><span class="num" id="2781685">1</span><span class="op" id="2781686">]</span><span class="op" id="2781687">)</span><span class="op" id="2781688">|</span><span class="builtintype" id="2781689">int16</span><span class="op" id="2781694">(</span><span class="ident" id="2781695">buf</span><span class="op" id="2781698">[</span><span class="num" id="2781699">0</span><span class="op" id="2781700">]</span><span class="op" id="2781701">)</span><span class="op" id="2781702">&lt;&lt;</span><span class="num" id="2781704">8</span><span class="op" id="2781705">)</span>&nbsp;<span class="op" id="2781707">*</span>&nbsp;<span class="num" id="2781709">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781714">if</span>&nbsp;<span class="ident" id="2781717">offset</span>&nbsp;<span class="op" id="2781724">==</span>&nbsp;<span class="op" id="2781727">-</span><span class="num" id="2781728">1</span><span class="op" id="2781729">*</span><span class="num" id="2781730">60</span>&nbsp;<span class="op" id="2781733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781737">t</span><span class="op" id="2781738">.</span><span class="ident" id="2781739">loc</span>&nbsp;<span class="op" id="2781743">=</span>&nbsp;<span class="op" id="2781745">&amp;</span><span class="ident" id="2781746">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781754">}</span>&nbsp;<span class="keyword" id="2781756">else</span>&nbsp;<span class="keyword" id="2781761">if</span>&nbsp;<span class="ident" id="2781764">_</span><span class="op" id="2781765">,</span>&nbsp;<span class="ident" id="2781767">localoff</span><span class="op" id="2781775">,</span>&nbsp;<span class="ident" id="2781777">_</span><span class="op" id="2781778">,</span>&nbsp;<span class="ident" id="2781780">_</span><span class="op" id="2781781">,</span>&nbsp;<span class="ident" id="2781783">_</span>&nbsp;<span class="op" id="2781785">:=</span>&nbsp;<span class="ident" id="2781788">Local</span><span class="op" id="2781793">.</span><span class="ident" id="2781794">lookup</span><span class="op" id="2781800">(</span><span class="ident" id="2781801">t</span><span class="op" id="2781802">.</span><span class="ident" id="2781803">sec</span>&nbsp;<span class="op" id="2781807">+</span>&nbsp;<span class="ident" id="2781809">internalToUnix</span><span class="op" id="2781823">)</span><span class="op" id="2781824">;</span>&nbsp;<span class="ident" id="2781826">offset</span>&nbsp;<span class="op" id="2781833">==</span>&nbsp;<span class="ident" id="2781836">localoff</span>&nbsp;<span class="op" id="2781845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781849">t</span><span class="op" id="2781850">.</span><span class="ident" id="2781851">loc</span>&nbsp;<span class="op" id="2781855">=</span>&nbsp;<span class="ident" id="2781857">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781864">}</span>&nbsp;<span class="keyword" id="2781866">else</span>&nbsp;<span class="op" id="2781871">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781875">t</span><span class="op" id="2781876">.</span><span class="ident" id="2781877">loc</span>&nbsp;<span class="op" id="2781881">=</span>&nbsp;<span class="ident" id="2781883">FixedZone</span><span class="op" id="2781892">(</span><span class="string" id="2781893">&#34;&#34;</span><span class="op" id="2781895">,</span>&nbsp;<span class="ident" id="2781897">offset</span><span class="op" id="2781903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2781906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2781910">return</span>&nbsp;<span class="builtintype" id="2781917">nil</span><br>
<span class="lineno"></span><span class="op" id="2781921">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2781924">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2782005">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2782087">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2782123">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2782177">func</span>&nbsp;<span class="op" id="2782182">(</span><span class="ident" id="2782183">t</span>&nbsp;<span class="ident" id="2782185">Time</span><span class="op" id="2782189">)</span>&nbsp;<span class="ident" id="2782191">GobEncode</span><span class="op" id="2782200">(</span><span class="op" id="2782201">)</span>&nbsp;<span class="op" id="2782203">(</span><span class="op" id="2782204">[</span><span class="op" id="2782205">]</span><span class="builtintype" id="2782206">byte</span><span class="op" id="2782210">,</span>&nbsp;<span class="builtintype" id="2782212">error</span><span class="op" id="2782217">)</span>&nbsp;<span class="op" id="2782219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782222">return</span>&nbsp;<span class="ident" id="2782229">t</span><span class="op" id="2782230">.</span><span class="ident" id="2782231">MarshalBinary</span><span class="op" id="2782244">(</span><span class="op" id="2782245">)</span><br>
<span class="lineno"></span><span class="op" id="2782247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2782250">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2782304">func</span>&nbsp;<span class="op" id="2782309">(</span><span class="ident" id="2782310">t</span>&nbsp;<span class="op" id="2782312">*</span><span class="ident" id="2782313">Time</span><span class="op" id="2782317">)</span>&nbsp;<span class="ident" id="2782319">GobDecode</span><span class="op" id="2782328">(</span><span class="ident" id="2782329">data</span>&nbsp;<span class="op" id="2782334">[</span><span class="op" id="2782335">]</span><span class="builtintype" id="2782336">byte</span><span class="op" id="2782340">)</span>&nbsp;<span class="builtintype" id="2782342">error</span>&nbsp;<span class="op" id="2782348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782351">return</span>&nbsp;<span class="ident" id="2782358">t</span><span class="op" id="2782359">.</span><span class="ident" id="2782360">UnmarshalBinary</span><span class="op" id="2782375">(</span><span class="ident" id="2782376">data</span><span class="op" id="2782380">)</span><br>
<span class="lineno"></span><span class="op" id="2782382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2782385">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2782441">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2782536">func</span>&nbsp;<span class="op" id="2782541">(</span><span class="ident" id="2782542">t</span>&nbsp;<span class="ident" id="2782544">Time</span><span class="op" id="2782548">)</span>&nbsp;<span class="ident" id="2782550">MarshalJSON</span><span class="op" id="2782561">(</span><span class="op" id="2782562">)</span>&nbsp;<span class="op" id="2782564">(</span><span class="op" id="2782565">[</span><span class="op" id="2782566">]</span><span class="builtintype" id="2782567">byte</span><span class="op" id="2782571">,</span>&nbsp;<span class="builtintype" id="2782573">error</span><span class="op" id="2782578">)</span>&nbsp;<span class="op" id="2782580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782583">if</span>&nbsp;<span class="ident" id="2782586">y</span>&nbsp;<span class="op" id="2782588">:=</span>&nbsp;<span class="ident" id="2782591">t</span><span class="op" id="2782592">.</span><span class="ident" id="2782593">Year</span><span class="op" id="2782597">(</span><span class="op" id="2782598">)</span><span class="op" id="2782599">;</span>&nbsp;<span class="ident" id="2782601">y</span>&nbsp;<span class="op" id="2782603">&lt;</span>&nbsp;<span class="num" id="2782605">0</span>&nbsp;<span class="op" id="2782607">||</span>&nbsp;<span class="ident" id="2782610">y</span>&nbsp;<span class="op" id="2782612">&gt;=</span>&nbsp;<span class="num" id="2782615">10000</span>&nbsp;<span class="op" id="2782621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2782625">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2782681">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782737">return</span>&nbsp;<span class="builtintype" id="2782744">nil</span><span class="op" id="2782747">,</span>&nbsp;<span class="ident" id="2782749">errors</span><span class="op" id="2782755">.</span><span class="ident" id="2782756">New</span><span class="op" id="2782759">(</span><span class="string" id="2782760">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2782810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2782813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782816">return</span>&nbsp;<span class="op" id="2782823">[</span><span class="op" id="2782824">]</span><span class="builtintype" id="2782825">byte</span><span class="op" id="2782829">(</span><span class="ident" id="2782830">t</span><span class="op" id="2782831">.</span><span class="ident" id="2782832">Format</span><span class="op" id="2782838">(</span><span class="string" id="2782839">`&#34;`</span>&nbsp;<span class="op" id="2782843">+</span>&nbsp;<span class="ident" id="2782845">RFC3339Nano</span>&nbsp;<span class="op" id="2782857">+</span>&nbsp;<span class="string" id="2782859">`&#34;`</span><span class="op" id="2782862">)</span><span class="op" id="2782863">)</span><span class="op" id="2782864">,</span>&nbsp;<span class="builtintype" id="2782866">nil</span><br>
<span class="lineno"></span><span class="op" id="2782870">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2782873">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2782933">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2782999">func</span>&nbsp;<span class="op" id="2783004">(</span><span class="ident" id="2783005">t</span>&nbsp;<span class="op" id="2783007">*</span><span class="ident" id="2783008">Time</span><span class="op" id="2783012">)</span>&nbsp;<span class="ident" id="2783014">UnmarshalJSON</span><span class="op" id="2783027">(</span><span class="ident" id="2783028">data</span>&nbsp;<span class="op" id="2783033">[</span><span class="op" id="2783034">]</span><span class="builtintype" id="2783035">byte</span><span class="op" id="2783039">)</span>&nbsp;<span class="op" id="2783041">(</span><span class="ident" id="2783042">err</span>&nbsp;<span class="builtintype" id="2783046">error</span><span class="op" id="2783051">)</span>&nbsp;<span class="op" id="2783053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2783056">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783112">*</span><span class="ident" id="2783113">t</span><span class="op" id="2783114">,</span>&nbsp;<span class="ident" id="2783116">err</span>&nbsp;<span class="op" id="2783120">=</span>&nbsp;<span class="ident" id="2783122">Parse</span><span class="op" id="2783127">(</span><span class="string" id="2783128">`&#34;`</span><span class="op" id="2783131">+</span><span class="ident" id="2783132">RFC3339</span><span class="op" id="2783139">+</span><span class="string" id="2783140">`&#34;`</span><span class="op" id="2783143">,</span>&nbsp;<span class="builtintype" id="2783145">string</span><span class="op" id="2783151">(</span><span class="ident" id="2783152">data</span><span class="op" id="2783156">)</span><span class="op" id="2783157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783160">return</span><br>
<span class="lineno"></span><span class="op" id="2783167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783170">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2783234">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2783323">func</span>&nbsp;<span class="op" id="2783328">(</span><span class="ident" id="2783329">t</span>&nbsp;<span class="ident" id="2783331">Time</span><span class="op" id="2783335">)</span>&nbsp;<span class="ident" id="2783337">MarshalText</span><span class="op" id="2783348">(</span><span class="op" id="2783349">)</span>&nbsp;<span class="op" id="2783351">(</span><span class="op" id="2783352">[</span><span class="op" id="2783353">]</span><span class="builtintype" id="2783354">byte</span><span class="op" id="2783358">,</span>&nbsp;<span class="builtintype" id="2783360">error</span><span class="op" id="2783365">)</span>&nbsp;<span class="op" id="2783367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783370">if</span>&nbsp;<span class="ident" id="2783373">y</span>&nbsp;<span class="op" id="2783375">:=</span>&nbsp;<span class="ident" id="2783378">t</span><span class="op" id="2783379">.</span><span class="ident" id="2783380">Year</span><span class="op" id="2783384">(</span><span class="op" id="2783385">)</span><span class="op" id="2783386">;</span>&nbsp;<span class="ident" id="2783388">y</span>&nbsp;<span class="op" id="2783390">&lt;</span>&nbsp;<span class="num" id="2783392">0</span>&nbsp;<span class="op" id="2783394">||</span>&nbsp;<span class="ident" id="2783397">y</span>&nbsp;<span class="op" id="2783399">&gt;=</span>&nbsp;<span class="num" id="2783402">10000</span>&nbsp;<span class="op" id="2783408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783412">return</span>&nbsp;<span class="builtintype" id="2783419">nil</span><span class="op" id="2783422">,</span>&nbsp;<span class="ident" id="2783424">errors</span><span class="op" id="2783430">.</span><span class="ident" id="2783431">New</span><span class="op" id="2783434">(</span><span class="string" id="2783435">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2783485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783488">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783491">return</span>&nbsp;<span class="op" id="2783498">[</span><span class="op" id="2783499">]</span><span class="builtintype" id="2783500">byte</span><span class="op" id="2783504">(</span><span class="ident" id="2783505">t</span><span class="op" id="2783506">.</span><span class="ident" id="2783507">Format</span><span class="op" id="2783513">(</span><span class="ident" id="2783514">RFC3339Nano</span><span class="op" id="2783525">)</span><span class="op" id="2783526">)</span><span class="op" id="2783527">,</span>&nbsp;<span class="builtintype" id="2783529">nil</span><br>
<span class="lineno"></span><span class="op" id="2783533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783536">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2783604">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2783654">func</span>&nbsp;<span class="op" id="2783659">(</span><span class="ident" id="2783660">t</span>&nbsp;<span class="op" id="2783662">*</span><span class="ident" id="2783663">Time</span><span class="op" id="2783667">)</span>&nbsp;<span class="ident" id="2783669">UnmarshalText</span><span class="op" id="2783682">(</span><span class="ident" id="2783683">data</span>&nbsp;<span class="op" id="2783688">[</span><span class="op" id="2783689">]</span><span class="builtintype" id="2783690">byte</span><span class="op" id="2783694">)</span>&nbsp;<span class="op" id="2783696">(</span><span class="ident" id="2783697">err</span>&nbsp;<span class="builtintype" id="2783701">error</span><span class="op" id="2783706">)</span>&nbsp;<span class="op" id="2783708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2783711">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783767">*</span><span class="ident" id="2783768">t</span><span class="op" id="2783769">,</span>&nbsp;<span class="ident" id="2783771">err</span>&nbsp;<span class="op" id="2783775">=</span>&nbsp;<span class="ident" id="2783777">Parse</span><span class="op" id="2783782">(</span><span class="ident" id="2783783">RFC3339</span><span class="op" id="2783790">,</span>&nbsp;<span class="builtintype" id="2783792">string</span><span class="op" id="2783798">(</span><span class="ident" id="2783799">data</span><span class="op" id="2783803">)</span><span class="op" id="2783804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783807">return</span><br>
<span class="lineno"></span><span class="op" id="2783814">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2783817">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2783886">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2783949">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2784011">func</span>&nbsp;<span class="ident" id="2784016">Unix</span><span class="op" id="2784020">(</span><span class="ident" id="2784021">sec</span>&nbsp;<span class="builtintype" id="2784025">int64</span><span class="op" id="2784030">,</span>&nbsp;<span class="ident" id="2784032">nsec</span>&nbsp;<span class="builtintype" id="2784037">int64</span><span class="op" id="2784042">)</span>&nbsp;<span class="ident" id="2784044">Time</span>&nbsp;<span class="op" id="2784049">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784052">if</span>&nbsp;<span class="ident" id="2784055">nsec</span>&nbsp;<span class="op" id="2784060">&lt;</span>&nbsp;<span class="num" id="2784062">0</span>&nbsp;<span class="op" id="2784064">||</span>&nbsp;<span class="ident" id="2784067">nsec</span>&nbsp;<span class="op" id="2784072">&gt;=</span>&nbsp;<span class="num" id="2784075">1e9</span>&nbsp;<span class="op" id="2784079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784083">n</span>&nbsp;<span class="op" id="2784085">:=</span>&nbsp;<span class="ident" id="2784088">nsec</span>&nbsp;<span class="op" id="2784093">/</span>&nbsp;<span class="num" id="2784095">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784101">sec</span>&nbsp;<span class="op" id="2784105">+=</span>&nbsp;<span class="ident" id="2784108">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784112">nsec</span>&nbsp;<span class="op" id="2784117">-=</span>&nbsp;<span class="ident" id="2784120">n</span>&nbsp;<span class="op" id="2784122">*</span>&nbsp;<span class="num" id="2784124">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784130">if</span>&nbsp;<span class="ident" id="2784133">nsec</span>&nbsp;<span class="op" id="2784138">&lt;</span>&nbsp;<span class="num" id="2784140">0</span>&nbsp;<span class="op" id="2784142">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784147">nsec</span>&nbsp;<span class="op" id="2784152">+=</span>&nbsp;<span class="num" id="2784155">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784162">sec</span><span class="op" id="2784165">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784176">return</span>&nbsp;<span class="ident" id="2784183">Time</span><span class="op" id="2784187">{</span><span class="ident" id="2784188">sec</span>&nbsp;<span class="op" id="2784192">+</span>&nbsp;<span class="ident" id="2784194">unixToInternal</span><span class="op" id="2784208">,</span>&nbsp;<span class="builtintype" id="2784210">int32</span><span class="op" id="2784215">(</span><span class="ident" id="2784216">nsec</span><span class="op" id="2784220">)</span><span class="op" id="2784221">,</span>&nbsp;<span class="ident" id="2784223">Local</span><span class="op" id="2784228">}</span><br>
<span class="lineno">980</span><span class="op" id="2784230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2784233">func</span>&nbsp;<span class="ident" id="2784238">isLeap</span><span class="op" id="2784244">(</span><span class="ident" id="2784245">year</span>&nbsp;<span class="builtintype" id="2784250">int</span><span class="op" id="2784253">)</span>&nbsp;<span class="builtintype" id="2784255">bool</span>&nbsp;<span class="op" id="2784260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784263">return</span>&nbsp;<span class="ident" id="2784270">year</span><span class="op" id="2784274">%</span><span class="num" id="2784275">4</span>&nbsp;<span class="op" id="2784277">==</span>&nbsp;<span class="num" id="2784280">0</span>&nbsp;<span class="op" id="2784282">&amp;&amp;</span>&nbsp;<span class="op" id="2784285">(</span><span class="ident" id="2784286">year</span><span class="op" id="2784290">%</span><span class="num" id="2784291">100</span>&nbsp;<span class="op" id="2784295">!=</span>&nbsp;<span class="num" id="2784298">0</span>&nbsp;<span class="op" id="2784300">||</span>&nbsp;<span class="ident" id="2784303">year</span><span class="op" id="2784307">%</span><span class="num" id="2784308">400</span>&nbsp;<span class="op" id="2784312">==</span>&nbsp;<span class="num" id="2784315">0</span><span class="op" id="2784316">)</span><br>
<span class="lineno"></span><span class="op" id="2784318">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2784321">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2784356">//&nbsp;&nbsp;&nbsp;&nbsp;hi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2784394">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2784413">func</span>&nbsp;<span class="ident" id="2784418">norm</span><span class="op" id="2784422">(</span><span class="ident" id="2784423">hi</span><span class="op" id="2784425">,</span>&nbsp;<span class="ident" id="2784427">lo</span><span class="op" id="2784429">,</span>&nbsp;<span class="ident" id="2784431">base</span>&nbsp;<span class="builtintype" id="2784436">int</span><span class="op" id="2784439">)</span>&nbsp;<span class="op" id="2784441">(</span><span class="ident" id="2784442">nhi</span><span class="op" id="2784445">,</span>&nbsp;<span class="ident" id="2784447">nlo</span>&nbsp;<span class="builtintype" id="2784451">int</span><span class="op" id="2784454">)</span>&nbsp;<span class="op" id="2784456">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784459">if</span>&nbsp;<span class="ident" id="2784462">lo</span>&nbsp;<span class="op" id="2784465">&lt;</span>&nbsp;<span class="num" id="2784467">0</span>&nbsp;<span class="op" id="2784469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784473">n</span>&nbsp;<span class="op" id="2784475">:=</span>&nbsp;<span class="op" id="2784478">(</span><span class="op" id="2784479">-</span><span class="ident" id="2784480">lo</span><span class="op" id="2784482">-</span><span class="num" id="2784483">1</span><span class="op" id="2784484">)</span><span class="op" id="2784485">/</span><span class="ident" id="2784486">base</span>&nbsp;<span class="op" id="2784491">+</span>&nbsp;<span class="num" id="2784493">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784497">hi</span>&nbsp;<span class="op" id="2784500">-=</span>&nbsp;<span class="ident" id="2784503">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784507">lo</span>&nbsp;<span class="op" id="2784510">+=</span>&nbsp;<span class="ident" id="2784513">n</span>&nbsp;<span class="op" id="2784515">*</span>&nbsp;<span class="ident" id="2784517">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784523">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784526">if</span>&nbsp;<span class="ident" id="2784529">lo</span>&nbsp;<span class="op" id="2784532">&gt;=</span>&nbsp;<span class="ident" id="2784535">base</span>&nbsp;<span class="op" id="2784540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784544">n</span>&nbsp;<span class="op" id="2784546">:=</span>&nbsp;<span class="ident" id="2784549">lo</span>&nbsp;<span class="op" id="2784552">/</span>&nbsp;<span class="ident" id="2784554">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784561">hi</span>&nbsp;<span class="op" id="2784564">+=</span>&nbsp;<span class="ident" id="2784567">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784571">lo</span>&nbsp;<span class="op" id="2784574">-=</span>&nbsp;<span class="ident" id="2784577">n</span>&nbsp;<span class="op" id="2784579">*</span>&nbsp;<span class="ident" id="2784581">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784587">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784590">return</span>&nbsp;<span class="ident" id="2784597">hi</span><span class="op" id="2784599">,</span>&nbsp;<span class="ident" id="2784601">lo</span><br>
<span class="lineno"></span><span class="op" id="2784604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784607">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2784649">//&nbsp;&nbsp;&nbsp;&nbsp;yyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2784691">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2784755">//</span><br>
<span class="lineno"></span><span class="comment" id="2784758">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2784824">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2784892">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2784943">//</span><br>
<span class="lineno"></span><span class="comment" id="2784946">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2785008">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2785084">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2785153">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2785222">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2785294">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2785349">//</span><br>
<span class="lineno"></span><span class="comment" id="2785352">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2785382">func</span>&nbsp;<span class="ident" id="2785387">Date</span><span class="op" id="2785391">(</span><span class="ident" id="2785392">year</span>&nbsp;<span class="builtintype" id="2785397">int</span><span class="op" id="2785400">,</span>&nbsp;<span class="ident" id="2785402">month</span>&nbsp;<span class="ident" id="2785408">Month</span><span class="op" id="2785413">,</span>&nbsp;<span class="ident" id="2785415">day</span><span class="op" id="2785418">,</span>&nbsp;<span class="ident" id="2785420">hour</span><span class="op" id="2785424">,</span>&nbsp;<span class="ident" id="2785426">min</span><span class="op" id="2785429">,</span>&nbsp;<span class="ident" id="2785431">sec</span><span class="op" id="2785434">,</span>&nbsp;<span class="ident" id="2785436">nsec</span>&nbsp;<span class="builtintype" id="2785441">int</span><span class="op" id="2785444">,</span>&nbsp;<span class="ident" id="2785446">loc</span>&nbsp;<span class="op" id="2785450">*</span><span class="ident" id="2785451">Location</span><span class="op" id="2785459">)</span>&nbsp;<span class="ident" id="2785461">Time</span>&nbsp;<span class="op" id="2785466">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785469">if</span>&nbsp;<span class="ident" id="2785472">loc</span>&nbsp;<span class="op" id="2785476">==</span>&nbsp;<span class="builtintype" id="2785479">nil</span>&nbsp;<span class="op" id="2785483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2785487">panic</span><span class="op" id="2785492">(</span><span class="string" id="2785493">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2785533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2785540">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785584">m</span>&nbsp;<span class="op" id="2785586">:=</span>&nbsp;<span class="builtintype" id="2785589">int</span><span class="op" id="2785592">(</span><span class="ident" id="2785593">month</span><span class="op" id="2785598">)</span>&nbsp;<span class="op" id="2785600">-</span>&nbsp;<span class="num" id="2785602">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785605">year</span><span class="op" id="2785609">,</span>&nbsp;<span class="ident" id="2785611">m</span>&nbsp;<span class="op" id="2785613">=</span>&nbsp;<span class="ident" id="2785615">norm</span><span class="op" id="2785619">(</span><span class="ident" id="2785620">year</span><span class="op" id="2785624">,</span>&nbsp;<span class="ident" id="2785626">m</span><span class="op" id="2785627">,</span>&nbsp;<span class="num" id="2785629">12</span><span class="op" id="2785631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785634">month</span>&nbsp;<span class="op" id="2785640">=</span>&nbsp;<span class="ident" id="2785642">Month</span><span class="op" id="2785647">(</span><span class="ident" id="2785648">m</span><span class="op" id="2785649">)</span>&nbsp;<span class="op" id="2785651">+</span>&nbsp;<span class="num" id="2785653">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2785657">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785715">sec</span><span class="op" id="2785718">,</span>&nbsp;<span class="ident" id="2785720">nsec</span>&nbsp;<span class="op" id="2785725">=</span>&nbsp;<span class="ident" id="2785727">norm</span><span class="op" id="2785731">(</span><span class="ident" id="2785732">sec</span><span class="op" id="2785735">,</span>&nbsp;<span class="ident" id="2785737">nsec</span><span class="op" id="2785741">,</span>&nbsp;<span class="num" id="2785743">1e9</span><span class="op" id="2785746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785749">min</span><span class="op" id="2785752">,</span>&nbsp;<span class="ident" id="2785754">sec</span>&nbsp;<span class="op" id="2785758">=</span>&nbsp;<span class="ident" id="2785760">norm</span><span class="op" id="2785764">(</span><span class="ident" id="2785765">min</span><span class="op" id="2785768">,</span>&nbsp;<span class="ident" id="2785770">sec</span><span class="op" id="2785773">,</span>&nbsp;<span class="num" id="2785775">60</span><span class="op" id="2785777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785780">hour</span><span class="op" id="2785784">,</span>&nbsp;<span class="ident" id="2785786">min</span>&nbsp;<span class="op" id="2785790">=</span>&nbsp;<span class="ident" id="2785792">norm</span><span class="op" id="2785796">(</span><span class="ident" id="2785797">hour</span><span class="op" id="2785801">,</span>&nbsp;<span class="ident" id="2785803">min</span><span class="op" id="2785806">,</span>&nbsp;<span class="num" id="2785808">60</span><span class="op" id="2785810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785813">day</span><span class="op" id="2785816">,</span>&nbsp;<span class="ident" id="2785818">hour</span>&nbsp;<span class="op" id="2785823">=</span>&nbsp;<span class="ident" id="2785825">norm</span><span class="op" id="2785829">(</span><span class="ident" id="2785830">day</span><span class="op" id="2785833">,</span>&nbsp;<span class="ident" id="2785835">hour</span><span class="op" id="2785839">,</span>&nbsp;<span class="num" id="2785841">24</span><span class="op" id="2785843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785847">y</span>&nbsp;<span class="op" id="2785849">:=</span>&nbsp;<span class="builtintype" id="2785852">uint64</span><span class="op" id="2785858">(</span><span class="builtintype" id="2785859">int64</span><span class="op" id="2785864">(</span><span class="ident" id="2785865">year</span><span class="op" id="2785869">)</span>&nbsp;<span class="op" id="2785871">-</span>&nbsp;<span class="ident" id="2785873">absoluteZeroYear</span><span class="op" id="2785889">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2785893">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2785937">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785975">n</span>&nbsp;<span class="op" id="2785977">:=</span>&nbsp;<span class="ident" id="2785980">y</span>&nbsp;<span class="op" id="2785982">/</span>&nbsp;<span class="num" id="2785984">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785989">y</span>&nbsp;<span class="op" id="2785991">-=</span>&nbsp;<span class="num" id="2785994">400</span>&nbsp;<span class="op" id="2785998">*</span>&nbsp;<span class="ident" id="2786000">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786003">d</span>&nbsp;<span class="op" id="2786005">:=</span>&nbsp;<span class="ident" id="2786008">daysPer400Years</span>&nbsp;<span class="op" id="2786024">*</span>&nbsp;<span class="ident" id="2786026">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786030">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786058">n</span>&nbsp;<span class="op" id="2786060">=</span>&nbsp;<span class="ident" id="2786062">y</span>&nbsp;<span class="op" id="2786064">/</span>&nbsp;<span class="num" id="2786066">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786071">y</span>&nbsp;<span class="op" id="2786073">-=</span>&nbsp;<span class="num" id="2786076">100</span>&nbsp;<span class="op" id="2786080">*</span>&nbsp;<span class="ident" id="2786082">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786085">d</span>&nbsp;<span class="op" id="2786087">+=</span>&nbsp;<span class="ident" id="2786090">daysPer100Years</span>&nbsp;<span class="op" id="2786106">*</span>&nbsp;<span class="ident" id="2786108">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786112">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786138">n</span>&nbsp;<span class="op" id="2786140">=</span>&nbsp;<span class="ident" id="2786142">y</span>&nbsp;<span class="op" id="2786144">/</span>&nbsp;<span class="num" id="2786146">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786149">y</span>&nbsp;<span class="op" id="2786151">-=</span>&nbsp;<span class="num" id="2786154">4</span>&nbsp;<span class="op" id="2786156">*</span>&nbsp;<span class="ident" id="2786158">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786161">d</span>&nbsp;<span class="op" id="2786163">+=</span>&nbsp;<span class="ident" id="2786166">daysPer4Years</span>&nbsp;<span class="op" id="2786180">*</span>&nbsp;<span class="ident" id="2786182">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786186">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786213">n</span>&nbsp;<span class="op" id="2786215">=</span>&nbsp;<span class="ident" id="2786217">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786220">d</span>&nbsp;<span class="op" id="2786222">+=</span>&nbsp;<span class="num" id="2786225">365</span>&nbsp;<span class="op" id="2786229">*</span>&nbsp;<span class="ident" id="2786231">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786235">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786270">d</span>&nbsp;<span class="op" id="2786272">+=</span>&nbsp;<span class="builtintype" id="2786275">uint64</span><span class="op" id="2786281">(</span><span class="ident" id="2786282">daysBefore</span><span class="op" id="2786292">[</span><span class="ident" id="2786293">month</span><span class="op" id="2786298">-</span><span class="num" id="2786299">1</span><span class="op" id="2786300">]</span><span class="op" id="2786301">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786304">if</span>&nbsp;<span class="ident" id="2786307">isLeap</span><span class="op" id="2786313">(</span><span class="ident" id="2786314">year</span><span class="op" id="2786318">)</span>&nbsp;<span class="op" id="2786320">&amp;&amp;</span>&nbsp;<span class="ident" id="2786323">month</span>&nbsp;<span class="op" id="2786329">&gt;=</span>&nbsp;<span class="ident" id="2786332">March</span>&nbsp;<span class="op" id="2786338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786342">d</span><span class="op" id="2786343">++</span>&nbsp;<span class="comment" id="2786346">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2786362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786366">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786396">d</span>&nbsp;<span class="op" id="2786398">+=</span>&nbsp;<span class="builtintype" id="2786401">uint64</span><span class="op" id="2786407">(</span><span class="ident" id="2786408">day</span>&nbsp;<span class="op" id="2786412">-</span>&nbsp;<span class="num" id="2786414">1</span><span class="op" id="2786415">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786419">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786450">abs</span>&nbsp;<span class="op" id="2786454">:=</span>&nbsp;<span class="ident" id="2786457">d</span>&nbsp;<span class="op" id="2786459">*</span>&nbsp;<span class="ident" id="2786461">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786476">abs</span>&nbsp;<span class="op" id="2786480">+=</span>&nbsp;<span class="builtintype" id="2786483">uint64</span><span class="op" id="2786489">(</span><span class="ident" id="2786490">hour</span><span class="op" id="2786494">*</span><span class="ident" id="2786495">secondsPerHour</span>&nbsp;<span class="op" id="2786510">+</span>&nbsp;<span class="ident" id="2786512">min</span><span class="op" id="2786515">*</span><span class="ident" id="2786516">secondsPerMinute</span>&nbsp;<span class="op" id="2786533">+</span>&nbsp;<span class="ident" id="2786535">sec</span><span class="op" id="2786538">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786542">unix</span>&nbsp;<span class="op" id="2786547">:=</span>&nbsp;<span class="builtintype" id="2786550">int64</span><span class="op" id="2786555">(</span><span class="ident" id="2786556">abs</span><span class="op" id="2786559">)</span>&nbsp;<span class="op" id="2786561">+</span>&nbsp;<span class="op" id="2786563">(</span><span class="ident" id="2786564">absoluteToInternal</span>&nbsp;<span class="op" id="2786583">+</span>&nbsp;<span class="ident" id="2786585">internalToUnix</span><span class="op" id="2786599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786603">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786660">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786717">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786778">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786808">_</span><span class="op" id="2786809">,</span>&nbsp;<span class="ident" id="2786811">offset</span><span class="op" id="2786817">,</span>&nbsp;<span class="ident" id="2786819">_</span><span class="op" id="2786820">,</span>&nbsp;<span class="ident" id="2786822">start</span><span class="op" id="2786827">,</span>&nbsp;<span class="ident" id="2786829">end</span>&nbsp;<span class="op" id="2786833">:=</span>&nbsp;<span class="ident" id="2786836">loc</span><span class="op" id="2786839">.</span><span class="ident" id="2786840">lookup</span><span class="op" id="2786846">(</span><span class="ident" id="2786847">unix</span><span class="op" id="2786851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786854">if</span>&nbsp;<span class="ident" id="2786857">offset</span>&nbsp;<span class="op" id="2786864">!=</span>&nbsp;<span class="num" id="2786867">0</span>&nbsp;<span class="op" id="2786869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786873">switch</span>&nbsp;<span class="ident" id="2786880">utc</span>&nbsp;<span class="op" id="2786884">:=</span>&nbsp;<span class="ident" id="2786887">unix</span>&nbsp;<span class="op" id="2786892">-</span>&nbsp;<span class="builtintype" id="2786894">int64</span><span class="op" id="2786899">(</span><span class="ident" id="2786900">offset</span><span class="op" id="2786906">)</span><span class="op" id="2786907">;</span>&nbsp;<span class="op" id="2786909">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786913">case</span>&nbsp;<span class="ident" id="2786918">utc</span>&nbsp;<span class="op" id="2786922">&lt;</span>&nbsp;<span class="ident" id="2786924">start</span><span class="op" id="2786929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786934">_</span><span class="op" id="2786935">,</span>&nbsp;<span class="ident" id="2786937">offset</span><span class="op" id="2786943">,</span>&nbsp;<span class="ident" id="2786945">_</span><span class="op" id="2786946">,</span>&nbsp;<span class="ident" id="2786948">_</span><span class="op" id="2786949">,</span>&nbsp;<span class="ident" id="2786951">_</span>&nbsp;<span class="op" id="2786953">=</span>&nbsp;<span class="ident" id="2786955">loc</span><span class="op" id="2786958">.</span><span class="ident" id="2786959">lookup</span><span class="op" id="2786965">(</span><span class="ident" id="2786966">start</span>&nbsp;<span class="op" id="2786972">-</span>&nbsp;<span class="num" id="2786974">1</span><span class="op" id="2786975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786979">case</span>&nbsp;<span class="ident" id="2786984">utc</span>&nbsp;<span class="op" id="2786988">&gt;=</span>&nbsp;<span class="ident" id="2786991">end</span><span class="op" id="2786994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786999">_</span><span class="op" id="2787000">,</span>&nbsp;<span class="ident" id="2787002">offset</span><span class="op" id="2787008">,</span>&nbsp;<span class="ident" id="2787010">_</span><span class="op" id="2787011">,</span>&nbsp;<span class="ident" id="2787013">_</span><span class="op" id="2787014">,</span>&nbsp;<span class="ident" id="2787016">_</span>&nbsp;<span class="op" id="2787018">=</span>&nbsp;<span class="ident" id="2787020">loc</span><span class="op" id="2787023">.</span><span class="ident" id="2787024">lookup</span><span class="op" id="2787030">(</span><span class="ident" id="2787031">end</span><span class="op" id="2787034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787038">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787042">unix</span>&nbsp;<span class="op" id="2787047">-=</span>&nbsp;<span class="builtintype" id="2787050">int64</span><span class="op" id="2787055">(</span><span class="ident" id="2787056">offset</span><span class="op" id="2787062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787069">return</span>&nbsp;<span class="ident" id="2787076">Time</span><span class="op" id="2787080">{</span><span class="ident" id="2787081">unix</span>&nbsp;<span class="op" id="2787086">+</span>&nbsp;<span class="ident" id="2787088">unixToInternal</span><span class="op" id="2787102">,</span>&nbsp;<span class="builtintype" id="2787104">int32</span><span class="op" id="2787109">(</span><span class="ident" id="2787110">nsec</span><span class="op" id="2787114">)</span><span class="op" id="2787115">,</span>&nbsp;<span class="ident" id="2787117">loc</span><span class="op" id="2787120">}</span><br>
<span class="lineno"></span><span class="op" id="2787122">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2787125">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2787217">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2787261">func</span>&nbsp;<span class="op" id="2787266">(</span><span class="ident" id="2787267">t</span>&nbsp;<span class="ident" id="2787269">Time</span><span class="op" id="2787273">)</span>&nbsp;<span class="ident" id="2787275">Truncate</span><span class="op" id="2787283">(</span><span class="ident" id="2787284">d</span>&nbsp;<span class="ident" id="2787286">Duration</span><span class="op" id="2787294">)</span>&nbsp;<span class="ident" id="2787296">Time</span>&nbsp;<span class="op" id="2787301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787304">if</span>&nbsp;<span class="ident" id="2787307">d</span>&nbsp;<span class="op" id="2787309">&lt;=</span>&nbsp;<span class="num" id="2787312">0</span>&nbsp;<span class="op" id="2787314">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787318">return</span>&nbsp;<span class="ident" id="2787325">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787331">_</span><span class="op" id="2787332">,</span>&nbsp;<span class="ident" id="2787334">r</span>&nbsp;<span class="op" id="2787336">:=</span>&nbsp;<span class="ident" id="2787339">div</span><span class="op" id="2787342">(</span><span class="ident" id="2787343">t</span><span class="op" id="2787344">,</span>&nbsp;<span class="ident" id="2787346">d</span><span class="op" id="2787347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787350">return</span>&nbsp;<span class="ident" id="2787357">t</span><span class="op" id="2787358">.</span><span class="ident" id="2787359">Add</span><span class="op" id="2787362">(</span><span class="op" id="2787363">-</span><span class="ident" id="2787364">r</span><span class="op" id="2787365">)</span><br>
<span class="lineno"></span><span class="op" id="2787367">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2787370">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2787464">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2787524">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2787565">func</span>&nbsp;<span class="op" id="2787570">(</span><span class="ident" id="2787571">t</span>&nbsp;<span class="ident" id="2787573">Time</span><span class="op" id="2787577">)</span>&nbsp;<span class="ident" id="2787579">Round</span><span class="op" id="2787584">(</span><span class="ident" id="2787585">d</span>&nbsp;<span class="ident" id="2787587">Duration</span><span class="op" id="2787595">)</span>&nbsp;<span class="ident" id="2787597">Time</span>&nbsp;<span class="op" id="2787602">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787605">if</span>&nbsp;<span class="ident" id="2787608">d</span>&nbsp;<span class="op" id="2787610">&lt;=</span>&nbsp;<span class="num" id="2787613">0</span>&nbsp;<span class="op" id="2787615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787619">return</span>&nbsp;<span class="ident" id="2787626">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787632">_</span><span class="op" id="2787633">,</span>&nbsp;<span class="ident" id="2787635">r</span>&nbsp;<span class="op" id="2787637">:=</span>&nbsp;<span class="ident" id="2787640">div</span><span class="op" id="2787643">(</span><span class="ident" id="2787644">t</span><span class="op" id="2787645">,</span>&nbsp;<span class="ident" id="2787647">d</span><span class="op" id="2787648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787651">if</span>&nbsp;<span class="ident" id="2787654">r</span><span class="op" id="2787655">+</span><span class="ident" id="2787656">r</span>&nbsp;<span class="op" id="2787658">&lt;</span>&nbsp;<span class="ident" id="2787660">d</span>&nbsp;<span class="op" id="2787662">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787666">return</span>&nbsp;<span class="ident" id="2787673">t</span><span class="op" id="2787674">.</span><span class="ident" id="2787675">Add</span><span class="op" id="2787678">(</span><span class="op" id="2787679">-</span><span class="ident" id="2787680">r</span><span class="op" id="2787681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787687">return</span>&nbsp;<span class="ident" id="2787694">t</span><span class="op" id="2787695">.</span><span class="ident" id="2787696">Add</span><span class="op" id="2787699">(</span><span class="ident" id="2787700">d</span>&nbsp;<span class="op" id="2787702">-</span>&nbsp;<span class="ident" id="2787704">r</span><span class="op" id="2787705">)</span><br>
<span class="lineno"></span><span class="op" id="2787707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2787710">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2787779">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2787864">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2787916">func</span>&nbsp;<span class="ident" id="2787921">div</span><span class="op" id="2787924">(</span><span class="ident" id="2787925">t</span>&nbsp;<span class="ident" id="2787927">Time</span><span class="op" id="2787931">,</span>&nbsp;<span class="ident" id="2787933">d</span>&nbsp;<span class="ident" id="2787935">Duration</span><span class="op" id="2787943">)</span>&nbsp;<span class="op" id="2787945">(</span><span class="ident" id="2787946">qmod2</span>&nbsp;<span class="builtintype" id="2787952">int</span><span class="op" id="2787955">,</span>&nbsp;<span class="ident" id="2787957">r</span>&nbsp;<span class="ident" id="2787959">Duration</span><span class="op" id="2787967">)</span>&nbsp;<span class="op" id="2787969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787972">neg</span>&nbsp;<span class="op" id="2787976">:=</span>&nbsp;<span class="builtintype" id="2787979">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787986">nsec</span>&nbsp;<span class="op" id="2787991">:=</span>&nbsp;<span class="builtintype" id="2787994">int32</span><span class="op" id="2787999">(</span><span class="ident" id="2788000">t</span><span class="op" id="2788001">.</span><span class="ident" id="2788002">nsec</span><span class="op" id="2788006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788009">if</span>&nbsp;<span class="ident" id="2788012">t</span><span class="op" id="2788013">.</span><span class="ident" id="2788014">sec</span>&nbsp;<span class="op" id="2788018">&lt;</span>&nbsp;<span class="num" id="2788020">0</span>&nbsp;<span class="op" id="2788022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788026">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788058">neg</span>&nbsp;<span class="op" id="2788062">=</span>&nbsp;<span class="builtintype" id="2788064">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788071">t</span><span class="op" id="2788072">.</span><span class="ident" id="2788073">sec</span>&nbsp;<span class="op" id="2788077">=</span>&nbsp;<span class="op" id="2788079">-</span><span class="ident" id="2788080">t</span><span class="op" id="2788081">.</span><span class="ident" id="2788082">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788088">nsec</span>&nbsp;<span class="op" id="2788093">=</span>&nbsp;<span class="op" id="2788095">-</span><span class="ident" id="2788096">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788103">if</span>&nbsp;<span class="ident" id="2788106">nsec</span>&nbsp;<span class="op" id="2788111">&lt;</span>&nbsp;<span class="num" id="2788113">0</span>&nbsp;<span class="op" id="2788115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788120">nsec</span>&nbsp;<span class="op" id="2788125">+=</span>&nbsp;<span class="num" id="2788128">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788135">t</span><span class="op" id="2788136">.</span><span class="ident" id="2788137">sec</span><span class="op" id="2788140">--</span>&nbsp;<span class="comment" id="2788143">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788181">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788188">switch</span>&nbsp;<span class="op" id="2788195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788198">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788237">case</span>&nbsp;<span class="ident" id="2788242">d</span>&nbsp;<span class="op" id="2788244">&lt;</span>&nbsp;<span class="ident" id="2788246">Second</span>&nbsp;<span class="op" id="2788253">&amp;&amp;</span>&nbsp;<span class="ident" id="2788256">Second</span><span class="op" id="2788262">%</span><span class="op" id="2788263">(</span><span class="ident" id="2788264">d</span><span class="op" id="2788265">+</span><span class="ident" id="2788266">d</span><span class="op" id="2788267">)</span>&nbsp;<span class="op" id="2788269">==</span>&nbsp;<span class="num" id="2788272">0</span><span class="op" id="2788273">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788277">qmod2</span>&nbsp;<span class="op" id="2788283">=</span>&nbsp;<span class="builtintype" id="2788285">int</span><span class="op" id="2788288">(</span><span class="ident" id="2788289">nsec</span><span class="op" id="2788293">/</span><span class="builtintype" id="2788294">int32</span><span class="op" id="2788299">(</span><span class="ident" id="2788300">d</span><span class="op" id="2788301">)</span><span class="op" id="2788302">)</span>&nbsp;<span class="op" id="2788304">&amp;</span>&nbsp;<span class="num" id="2788306">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788310">r</span>&nbsp;<span class="op" id="2788312">=</span>&nbsp;<span class="ident" id="2788314">Duration</span><span class="op" id="2788322">(</span><span class="ident" id="2788323">nsec</span>&nbsp;<span class="op" id="2788328">%</span>&nbsp;<span class="builtintype" id="2788330">int32</span><span class="op" id="2788335">(</span><span class="ident" id="2788336">d</span><span class="op" id="2788337">)</span><span class="op" id="2788338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788342">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788389">case</span>&nbsp;<span class="ident" id="2788394">d</span><span class="op" id="2788395">%</span><span class="ident" id="2788396">Second</span>&nbsp;<span class="op" id="2788403">==</span>&nbsp;<span class="num" id="2788406">0</span><span class="op" id="2788407">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788411">d1</span>&nbsp;<span class="op" id="2788414">:=</span>&nbsp;<span class="builtintype" id="2788417">int64</span><span class="op" id="2788422">(</span><span class="ident" id="2788423">d</span>&nbsp;<span class="op" id="2788425">/</span>&nbsp;<span class="ident" id="2788427">Second</span><span class="op" id="2788433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788437">qmod2</span>&nbsp;<span class="op" id="2788443">=</span>&nbsp;<span class="builtintype" id="2788445">int</span><span class="op" id="2788448">(</span><span class="ident" id="2788449">t</span><span class="op" id="2788450">.</span><span class="ident" id="2788451">sec</span><span class="op" id="2788454">/</span><span class="ident" id="2788455">d1</span><span class="op" id="2788457">)</span>&nbsp;<span class="op" id="2788459">&amp;</span>&nbsp;<span class="num" id="2788461">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788465">r</span>&nbsp;<span class="op" id="2788467">=</span>&nbsp;<span class="ident" id="2788469">Duration</span><span class="op" id="2788477">(</span><span class="ident" id="2788478">t</span><span class="op" id="2788479">.</span><span class="ident" id="2788480">sec</span><span class="op" id="2788483">%</span><span class="ident" id="2788484">d1</span><span class="op" id="2788486">)</span><span class="op" id="2788487">*</span><span class="ident" id="2788488">Second</span>&nbsp;<span class="op" id="2788495">+</span>&nbsp;<span class="ident" id="2788497">Duration</span><span class="op" id="2788505">(</span><span class="ident" id="2788506">nsec</span><span class="op" id="2788510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788514">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788532">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788590">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788667">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788707">default</span><span class="op" id="2788714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788718">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788762">sec</span>&nbsp;<span class="op" id="2788766">:=</span>&nbsp;<span class="builtintype" id="2788769">uint64</span><span class="op" id="2788775">(</span><span class="ident" id="2788776">t</span><span class="op" id="2788777">.</span><span class="ident" id="2788778">sec</span><span class="op" id="2788781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788785">tmp</span>&nbsp;<span class="op" id="2788789">:=</span>&nbsp;<span class="op" id="2788792">(</span><span class="ident" id="2788793">sec</span>&nbsp;<span class="op" id="2788797">&gt;&gt;</span>&nbsp;<span class="num" id="2788800">32</span><span class="op" id="2788802">)</span>&nbsp;<span class="op" id="2788804">*</span>&nbsp;<span class="num" id="2788806">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788812">u1</span>&nbsp;<span class="op" id="2788815">:=</span>&nbsp;<span class="ident" id="2788818">tmp</span>&nbsp;<span class="op" id="2788822">&gt;&gt;</span>&nbsp;<span class="num" id="2788825">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788830">u0</span>&nbsp;<span class="op" id="2788833">:=</span>&nbsp;<span class="ident" id="2788836">tmp</span>&nbsp;<span class="op" id="2788840">&lt;&lt;</span>&nbsp;<span class="num" id="2788843">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788848">tmp</span>&nbsp;<span class="op" id="2788852">=</span>&nbsp;<span class="builtintype" id="2788854">uint64</span><span class="op" id="2788860">(</span><span class="ident" id="2788861">sec</span><span class="op" id="2788864">&amp;</span><span class="num" id="2788865">0xFFFFFFFF</span><span class="op" id="2788875">)</span>&nbsp;<span class="op" id="2788877">*</span>&nbsp;<span class="num" id="2788879">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788885">u0x</span><span class="op" id="2788888">,</span>&nbsp;<span class="ident" id="2788890">u0</span>&nbsp;<span class="op" id="2788893">:=</span>&nbsp;<span class="ident" id="2788896">u0</span><span class="op" id="2788898">,</span>&nbsp;<span class="ident" id="2788900">u0</span><span class="op" id="2788902">+</span><span class="ident" id="2788903">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788909">if</span>&nbsp;<span class="ident" id="2788912">u0</span>&nbsp;<span class="op" id="2788915">&lt;</span>&nbsp;<span class="ident" id="2788917">u0x</span>&nbsp;<span class="op" id="2788921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788926">u1</span><span class="op" id="2788928">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788937">u0x</span><span class="op" id="2788940">,</span>&nbsp;<span class="ident" id="2788942">u0</span>&nbsp;<span class="op" id="2788945">=</span>&nbsp;<span class="ident" id="2788947">u0</span><span class="op" id="2788949">,</span>&nbsp;<span class="ident" id="2788951">u0</span><span class="op" id="2788953">+</span><span class="builtintype" id="2788954">uint64</span><span class="op" id="2788960">(</span><span class="ident" id="2788961">nsec</span><span class="op" id="2788965">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788969">if</span>&nbsp;<span class="ident" id="2788972">u0</span>&nbsp;<span class="op" id="2788975">&lt;</span>&nbsp;<span class="ident" id="2788977">u0x</span>&nbsp;<span class="op" id="2788981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788986">u1</span><span class="op" id="2788988">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788998">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789059">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789118">d1</span>&nbsp;<span class="op" id="2789121">:=</span>&nbsp;<span class="builtintype" id="2789124">uint64</span><span class="op" id="2789130">(</span><span class="ident" id="2789131">d</span><span class="op" id="2789132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789136">for</span>&nbsp;<span class="ident" id="2789140">d1</span><span class="op" id="2789142">&gt;&gt;</span><span class="num" id="2789144">63</span>&nbsp;<span class="op" id="2789147">!=</span>&nbsp;<span class="num" id="2789150">1</span>&nbsp;<span class="op" id="2789152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789157">d1</span>&nbsp;<span class="op" id="2789160">&lt;&lt;=</span>&nbsp;<span class="num" id="2789164">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789168">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789172">d0</span>&nbsp;<span class="op" id="2789175">:=</span>&nbsp;<span class="builtintype" id="2789178">uint64</span><span class="op" id="2789184">(</span><span class="num" id="2789185">0</span><span class="op" id="2789186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789190">for</span>&nbsp;<span class="op" id="2789194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789199">qmod2</span>&nbsp;<span class="op" id="2789205">=</span>&nbsp;<span class="num" id="2789207">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789212">if</span>&nbsp;<span class="ident" id="2789215">u1</span>&nbsp;<span class="op" id="2789218">&gt;</span>&nbsp;<span class="ident" id="2789220">d1</span>&nbsp;<span class="op" id="2789223">||</span>&nbsp;<span class="ident" id="2789226">u1</span>&nbsp;<span class="op" id="2789229">==</span>&nbsp;<span class="ident" id="2789232">d1</span>&nbsp;<span class="op" id="2789235">&amp;&amp;</span>&nbsp;<span class="ident" id="2789238">u0</span>&nbsp;<span class="op" id="2789241">&gt;=</span>&nbsp;<span class="ident" id="2789244">d0</span>&nbsp;<span class="op" id="2789247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789253">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789269">qmod2</span>&nbsp;<span class="op" id="2789275">=</span>&nbsp;<span class="num" id="2789277">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789283">u0x</span><span class="op" id="2789286">,</span>&nbsp;<span class="ident" id="2789288">u0</span>&nbsp;<span class="op" id="2789291">=</span>&nbsp;<span class="ident" id="2789293">u0</span><span class="op" id="2789295">,</span>&nbsp;<span class="ident" id="2789297">u0</span><span class="op" id="2789299">-</span><span class="ident" id="2789300">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789307">if</span>&nbsp;<span class="ident" id="2789310">u0</span>&nbsp;<span class="op" id="2789313">&gt;</span>&nbsp;<span class="ident" id="2789315">u0x</span>&nbsp;<span class="op" id="2789319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789326">u1</span><span class="op" id="2789328">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789335">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789341">u1</span>&nbsp;<span class="op" id="2789344">-=</span>&nbsp;<span class="ident" id="2789347">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789358">if</span>&nbsp;<span class="ident" id="2789361">d1</span>&nbsp;<span class="op" id="2789364">==</span>&nbsp;<span class="num" id="2789367">0</span>&nbsp;<span class="op" id="2789369">&amp;&amp;</span>&nbsp;<span class="ident" id="2789372">d0</span>&nbsp;<span class="op" id="2789375">==</span>&nbsp;<span class="builtintype" id="2789378">uint64</span><span class="op" id="2789384">(</span><span class="ident" id="2789385">d</span><span class="op" id="2789386">)</span>&nbsp;<span class="op" id="2789388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789394">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789403">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789408">d0</span>&nbsp;<span class="op" id="2789411">&gt;&gt;=</span>&nbsp;<span class="num" id="2789415">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789420">d0</span>&nbsp;<span class="op" id="2789423">|=</span>&nbsp;<span class="op" id="2789426">(</span><span class="ident" id="2789427">d1</span>&nbsp;<span class="op" id="2789430">&amp;</span>&nbsp;<span class="num" id="2789432">1</span><span class="op" id="2789433">)</span>&nbsp;<span class="op" id="2789435">&lt;&lt;</span>&nbsp;<span class="num" id="2789438">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789444">d1</span>&nbsp;<span class="op" id="2789447">&gt;&gt;=</span>&nbsp;<span class="num" id="2789451">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789459">r</span>&nbsp;<span class="op" id="2789461">=</span>&nbsp;<span class="ident" id="2789463">Duration</span><span class="op" id="2789471">(</span><span class="ident" id="2789472">u0</span><span class="op" id="2789474">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789481">if</span>&nbsp;<span class="ident" id="2789484">neg</span>&nbsp;<span class="op" id="2789488">&amp;&amp;</span>&nbsp;<span class="ident" id="2789491">r</span>&nbsp;<span class="op" id="2789493">!=</span>&nbsp;<span class="num" id="2789496">0</span>&nbsp;<span class="op" id="2789498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789502">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789588">//&nbsp;&nbsp;&nbsp;&nbsp;q*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789606">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789659">//&nbsp;&nbsp;&nbsp;&nbsp;q*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789677">//&nbsp;&nbsp;&nbsp;&nbsp;-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2789695">//&nbsp;&nbsp;&nbsp;&nbsp;-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789723">qmod2</span>&nbsp;<span class="op" id="2789729">^=</span>&nbsp;<span class="num" id="2789732">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2789736">r</span>&nbsp;<span class="op" id="2789738">=</span>&nbsp;<span class="ident" id="2789740">d</span>&nbsp;<span class="op" id="2789742">-</span>&nbsp;<span class="ident" id="2789744">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789750">return</span><br>
<span class="lineno"></span><span class="op" id="2789757">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
