<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6151048">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6151103">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6151157">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6151208">package</span>&nbsp;<span class="ident" id="6151216">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6151225">import</span>&nbsp;<span class="op" id="6151232">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151235">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151244">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151251">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151257">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151263">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6151274">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6151281">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6151284">type</span>&nbsp;<span class="ident" id="6151289">InternalExample</span>&nbsp;<span class="keyword" id="6151305">struct</span>&nbsp;<span class="op" id="6151312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151315">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6151322">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151330">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151337">func</span><span class="op" id="6151341">(</span><span class="op" id="6151342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151345">Output</span>&nbsp;<span class="builtintype" id="6151352">string</span><br>
<span class="lineno">20</span><span class="op" id="6151359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6151362">func</span>&nbsp;<span class="ident" id="6151367">RunExamples</span><span class="op" id="6151378">(</span><span class="ident" id="6151379">matchString</span>&nbsp;<span class="keyword" id="6151391">func</span><span class="op" id="6151395">(</span><span class="ident" id="6151396">pat</span><span class="op" id="6151399">,</span>&nbsp;<span class="ident" id="6151401">str</span>&nbsp;<span class="builtintype" id="6151405">string</span><span class="op" id="6151411">)</span>&nbsp;<span class="op" id="6151413">(</span><span class="builtintype" id="6151414">bool</span><span class="op" id="6151418">,</span>&nbsp;<span class="builtintype" id="6151420">error</span><span class="op" id="6151425">)</span><span class="op" id="6151426">,</span>&nbsp;<span class="ident" id="6151428">examples</span>&nbsp;<span class="op" id="6151437">[</span><span class="op" id="6151438">]</span><span class="ident" id="6151439">InternalExample</span><span class="op" id="6151454">)</span>&nbsp;<span class="op" id="6151456">(</span><span class="ident" id="6151457">ok</span>&nbsp;<span class="builtintype" id="6151460">bool</span><span class="op" id="6151464">)</span>&nbsp;<span class="op" id="6151466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151469">ok</span>&nbsp;<span class="op" id="6151472">=</span>&nbsp;<span class="builtintype" id="6151474">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151481">var</span>&nbsp;<span class="ident" id="6151485">eg</span>&nbsp;<span class="ident" id="6151488">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151506">for</span>&nbsp;<span class="ident" id="6151510">_</span><span class="op" id="6151511">,</span>&nbsp;<span class="ident" id="6151513">eg</span>&nbsp;<span class="op" id="6151516">=</span>&nbsp;<span class="keyword" id="6151518">range</span>&nbsp;<span class="ident" id="6151524">examples</span>&nbsp;<span class="op" id="6151533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151537">matched</span><span class="op" id="6151544">,</span>&nbsp;<span class="ident" id="6151546">err</span>&nbsp;<span class="op" id="6151550">:=</span>&nbsp;<span class="ident" id="6151553">matchString</span><span class="op" id="6151564">(</span><span class="op" id="6151565">*</span><span class="ident" id="6151566">match</span><span class="op" id="6151571">,</span>&nbsp;<span class="ident" id="6151573">eg</span><span class="op" id="6151575">.</span><span class="ident" id="6151576">Name</span><span class="op" id="6151580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151584">if</span>&nbsp;<span class="ident" id="6151587">err</span>&nbsp;<span class="op" id="6151591">!=</span>&nbsp;<span class="builtintype" id="6151594">nil</span>&nbsp;<span class="op" id="6151598">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151603">fmt</span><span class="op" id="6151606">.</span><span class="ident" id="6151607">Fprintf</span><span class="op" id="6151614">(</span><span class="ident" id="6151615">os</span><span class="op" id="6151617">.</span><span class="ident" id="6151618">Stderr</span><span class="op" id="6151624">,</span>&nbsp;<span class="string" id="6151626">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6151671">,</span>&nbsp;<span class="ident" id="6151673">err</span><span class="op" id="6151676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151681">os</span><span class="op" id="6151683">.</span><span class="ident" id="6151684">Exit</span><span class="op" id="6151688">(</span><span class="num" id="6151689">1</span><span class="op" id="6151690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151698">if</span>&nbsp;<span class="op" id="6151701">!</span><span class="ident" id="6151702">matched</span>&nbsp;<span class="op" id="6151710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151715">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151730">if</span>&nbsp;<span class="op" id="6151733">!</span><span class="ident" id="6151734">runExample</span><span class="op" id="6151744">(</span><span class="ident" id="6151745">eg</span><span class="op" id="6151747">)</span>&nbsp;<span class="op" id="6151749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151754">ok</span>&nbsp;<span class="op" id="6151757">=</span>&nbsp;<span class="builtintype" id="6151759">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151770">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151774">return</span><br>
<span class="lineno"></span><span class="op" id="6151781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6151784">func</span>&nbsp;<span class="ident" id="6151789">runExample</span><span class="op" id="6151799">(</span><span class="ident" id="6151800">eg</span>&nbsp;<span class="ident" id="6151803">InternalExample</span><span class="op" id="6151818">)</span>&nbsp;<span class="op" id="6151820">(</span><span class="ident" id="6151821">ok</span>&nbsp;<span class="builtintype" id="6151824">bool</span><span class="op" id="6151828">)</span>&nbsp;<span class="op" id="6151830">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151833">if</span>&nbsp;<span class="op" id="6151836">*</span><span class="ident" id="6151837">chatty</span>&nbsp;<span class="op" id="6151844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151848">fmt</span><span class="op" id="6151851">.</span><span class="ident" id="6151852">Printf</span><span class="op" id="6151858">(</span><span class="string" id="6151859">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6151874">,</span>&nbsp;<span class="ident" id="6151876">eg</span><span class="op" id="6151878">.</span><span class="ident" id="6151879">Name</span><span class="op" id="6151883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6151890">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151910">stdout</span>&nbsp;<span class="op" id="6151917">:=</span>&nbsp;<span class="ident" id="6151920">os</span><span class="op" id="6151922">.</span><span class="ident" id="6151923">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151931">r</span><span class="op" id="6151932">,</span>&nbsp;<span class="ident" id="6151934">w</span><span class="op" id="6151935">,</span>&nbsp;<span class="ident" id="6151937">err</span>&nbsp;<span class="op" id="6151941">:=</span>&nbsp;<span class="ident" id="6151944">os</span><span class="op" id="6151946">.</span><span class="ident" id="6151947">Pipe</span><span class="op" id="6151951">(</span><span class="op" id="6151952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151955">if</span>&nbsp;<span class="ident" id="6151958">err</span>&nbsp;<span class="op" id="6151962">!=</span>&nbsp;<span class="builtintype" id="6151965">nil</span>&nbsp;<span class="op" id="6151969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151973">fmt</span><span class="op" id="6151976">.</span><span class="ident" id="6151977">Fprintln</span><span class="op" id="6151985">(</span><span class="ident" id="6151986">os</span><span class="op" id="6151988">.</span><span class="ident" id="6151989">Stderr</span><span class="op" id="6151995">,</span>&nbsp;<span class="ident" id="6151997">err</span><span class="op" id="6152000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152004">os</span><span class="op" id="6152006">.</span><span class="ident" id="6152007">Exit</span><span class="op" id="6152011">(</span><span class="num" id="6152012">1</span><span class="op" id="6152013">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152019">os</span><span class="op" id="6152021">.</span><span class="ident" id="6152022">Stdout</span>&nbsp;<span class="op" id="6152029">=</span>&nbsp;<span class="ident" id="6152031">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152034">outC</span>&nbsp;<span class="op" id="6152039">:=</span>&nbsp;<span class="builtinfunc" id="6152042">make</span><span class="op" id="6152046">(</span><span class="keyword" id="6152047">chan</span>&nbsp;<span class="builtintype" id="6152052">string</span><span class="op" id="6152058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152061">go</span>&nbsp;<span class="keyword" id="6152064">func</span><span class="op" id="6152068">(</span><span class="op" id="6152069">)</span>&nbsp;<span class="op" id="6152071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152075">buf</span>&nbsp;<span class="op" id="6152079">:=</span>&nbsp;<span class="builtinfunc" id="6152082">new</span><span class="op" id="6152085">(</span><span class="ident" id="6152086">bytes</span><span class="op" id="6152091">.</span><span class="ident" id="6152092">Buffer</span><span class="op" id="6152098">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152102">_</span><span class="op" id="6152103">,</span>&nbsp;<span class="ident" id="6152105">err</span>&nbsp;<span class="op" id="6152109">:=</span>&nbsp;<span class="ident" id="6152112">io</span><span class="op" id="6152114">.</span><span class="ident" id="6152115">Copy</span><span class="op" id="6152119">(</span><span class="ident" id="6152120">buf</span><span class="op" id="6152123">,</span>&nbsp;<span class="ident" id="6152125">r</span><span class="op" id="6152126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152130">r</span><span class="op" id="6152131">.</span><span class="ident" id="6152132">Close</span><span class="op" id="6152137">(</span><span class="op" id="6152138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152142">if</span>&nbsp;<span class="ident" id="6152145">err</span>&nbsp;<span class="op" id="6152149">!=</span>&nbsp;<span class="builtintype" id="6152152">nil</span>&nbsp;<span class="op" id="6152156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152161">fmt</span><span class="op" id="6152164">.</span><span class="ident" id="6152165">Fprintf</span><span class="op" id="6152172">(</span><span class="ident" id="6152173">os</span><span class="op" id="6152175">.</span><span class="ident" id="6152176">Stderr</span><span class="op" id="6152182">,</span>&nbsp;<span class="string" id="6152184">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6152213">,</span>&nbsp;<span class="ident" id="6152215">err</span><span class="op" id="6152218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152223">os</span><span class="op" id="6152225">.</span><span class="ident" id="6152226">Exit</span><span class="op" id="6152230">(</span><span class="num" id="6152231">1</span><span class="op" id="6152232">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152240">outC</span>&nbsp;<span class="op" id="6152245">&lt;-</span>&nbsp;<span class="ident" id="6152248">buf</span><span class="op" id="6152251">.</span><span class="ident" id="6152252">String</span><span class="op" id="6152258">(</span><span class="op" id="6152259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152262">}</span><span class="op" id="6152263">(</span><span class="op" id="6152264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152268">start</span>&nbsp;<span class="op" id="6152274">:=</span>&nbsp;<span class="ident" id="6152277">time</span><span class="op" id="6152281">.</span><span class="ident" id="6152282">Now</span><span class="op" id="6152285">(</span><span class="op" id="6152286">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152289">ok</span>&nbsp;<span class="op" id="6152292">=</span>&nbsp;<span class="builtintype" id="6152294">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6152301">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152374">defer</span>&nbsp;<span class="keyword" id="6152380">func</span><span class="op" id="6152384">(</span><span class="op" id="6152385">)</span>&nbsp;<span class="op" id="6152387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152391">dstr</span>&nbsp;<span class="op" id="6152396">:=</span>&nbsp;<span class="ident" id="6152399">fmtDuration</span><span class="op" id="6152410">(</span><span class="ident" id="6152411">time</span><span class="op" id="6152415">.</span><span class="ident" id="6152416">Now</span><span class="op" id="6152419">(</span><span class="op" id="6152420">)</span><span class="op" id="6152421">.</span><span class="ident" id="6152422">Sub</span><span class="op" id="6152425">(</span><span class="ident" id="6152426">start</span><span class="op" id="6152431">)</span><span class="op" id="6152432">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6152437">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152482">w</span><span class="op" id="6152483">.</span><span class="ident" id="6152484">Close</span><span class="op" id="6152489">(</span><span class="op" id="6152490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152494">os</span><span class="op" id="6152496">.</span><span class="ident" id="6152497">Stdout</span>&nbsp;<span class="op" id="6152504">=</span>&nbsp;<span class="ident" id="6152506">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152515">out</span>&nbsp;<span class="op" id="6152519">:=</span>&nbsp;<span class="op" id="6152522">&lt;-</span><span class="ident" id="6152524">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152532">var</span>&nbsp;<span class="ident" id="6152536">fail</span>&nbsp;<span class="builtintype" id="6152541">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152550">err</span>&nbsp;<span class="op" id="6152554">:=</span>&nbsp;<span class="builtinfunc" id="6152557">recover</span><span class="op" id="6152564">(</span><span class="op" id="6152565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152569">if</span>&nbsp;<span class="ident" id="6152572">g</span><span class="op" id="6152573">,</span>&nbsp;<span class="ident" id="6152575">e</span>&nbsp;<span class="op" id="6152577">:=</span>&nbsp;<span class="ident" id="6152580">strings</span><span class="op" id="6152587">.</span><span class="ident" id="6152588">TrimSpace</span><span class="op" id="6152597">(</span><span class="ident" id="6152598">out</span><span class="op" id="6152601">)</span><span class="op" id="6152602">,</span>&nbsp;<span class="ident" id="6152604">strings</span><span class="op" id="6152611">.</span><span class="ident" id="6152612">TrimSpace</span><span class="op" id="6152621">(</span><span class="ident" id="6152622">eg</span><span class="op" id="6152624">.</span><span class="ident" id="6152625">Output</span><span class="op" id="6152631">)</span><span class="op" id="6152632">;</span>&nbsp;<span class="ident" id="6152634">g</span>&nbsp;<span class="op" id="6152636">!=</span>&nbsp;<span class="ident" id="6152639">e</span>&nbsp;<span class="op" id="6152641">&amp;&amp;</span>&nbsp;<span class="ident" id="6152644">err</span>&nbsp;<span class="op" id="6152648">==</span>&nbsp;<span class="builtintype" id="6152651">nil</span>&nbsp;<span class="op" id="6152655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152660">fail</span>&nbsp;<span class="op" id="6152665">=</span>&nbsp;<span class="ident" id="6152667">fmt</span><span class="op" id="6152670">.</span><span class="ident" id="6152671">Sprintf</span><span class="op" id="6152678">(</span><span class="string" id="6152679">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6152702">,</span>&nbsp;<span class="ident" id="6152704">g</span><span class="op" id="6152705">,</span>&nbsp;<span class="ident" id="6152707">e</span><span class="op" id="6152708">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152716">if</span>&nbsp;<span class="ident" id="6152719">fail</span>&nbsp;<span class="op" id="6152724">!=</span>&nbsp;<span class="string" id="6152727">&#34;&#34;</span>&nbsp;<span class="op" id="6152730">||</span>&nbsp;<span class="ident" id="6152733">err</span>&nbsp;<span class="op" id="6152737">!=</span>&nbsp;<span class="builtintype" id="6152740">nil</span>&nbsp;<span class="op" id="6152744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152749">fmt</span><span class="op" id="6152752">.</span><span class="ident" id="6152753">Printf</span><span class="op" id="6152759">(</span><span class="string" id="6152760">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6152783">,</span>&nbsp;<span class="ident" id="6152785">eg</span><span class="op" id="6152787">.</span><span class="ident" id="6152788">Name</span><span class="op" id="6152792">,</span>&nbsp;<span class="ident" id="6152794">dstr</span><span class="op" id="6152798">,</span>&nbsp;<span class="ident" id="6152800">fail</span><span class="op" id="6152804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152809">ok</span>&nbsp;<span class="op" id="6152812">=</span>&nbsp;<span class="builtintype" id="6152814">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152822">}</span>&nbsp;<span class="keyword" id="6152824">else</span>&nbsp;<span class="keyword" id="6152829">if</span>&nbsp;<span class="op" id="6152832">*</span><span class="ident" id="6152833">chatty</span>&nbsp;<span class="op" id="6152840">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152845">fmt</span><span class="op" id="6152848">.</span><span class="ident" id="6152849">Printf</span><span class="op" id="6152855">(</span><span class="string" id="6152856">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6152877">,</span>&nbsp;<span class="ident" id="6152879">eg</span><span class="op" id="6152881">.</span><span class="ident" id="6152882">Name</span><span class="op" id="6152886">,</span>&nbsp;<span class="ident" id="6152888">dstr</span><span class="op" id="6152892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152900">if</span>&nbsp;<span class="ident" id="6152903">err</span>&nbsp;<span class="op" id="6152907">!=</span>&nbsp;<span class="builtintype" id="6152910">nil</span>&nbsp;<span class="op" id="6152914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6152919">panic</span><span class="op" id="6152924">(</span><span class="ident" id="6152925">err</span><span class="op" id="6152928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152932">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152935">}</span><span class="op" id="6152936">(</span><span class="op" id="6152937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6152941">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152958">eg</span><span class="op" id="6152960">.</span><span class="ident" id="6152961">F</span><span class="op" id="6152962">(</span><span class="op" id="6152963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152966">return</span><br>
<span class="lineno">100</span><span class="op" id="6152973">}</span>
</div>
</body>
</html>
