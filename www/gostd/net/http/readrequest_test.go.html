<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6567654">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6567710">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6567764">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6567815">package</span>&nbsp;<span class="ident" id="6567823">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6567829">import</span>&nbsp;<span class="op" id="6567836">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567839">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567848">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567857">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567864">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567870">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567881">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567892">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6567903">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6567913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6567916">type</span>&nbsp;<span class="ident" id="6567921">reqTest</span>&nbsp;<span class="keyword" id="6567929">struct</span>&nbsp;<span class="op" id="6567936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567939">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6567947">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567955">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6567963">*</span><span class="ident" id="6567964">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567973">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6567981">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6567989">Trailer</span>&nbsp;<span class="ident" id="6567997">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568005">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6568013">string</span><br>
<span class="lineno"></span><span class="op" id="6568020">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6568023">var</span>&nbsp;<span class="ident" id="6568027">noError</span>&nbsp;<span class="op" id="6568035">=</span>&nbsp;<span class="string" id="6568037">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="6568040">var</span>&nbsp;<span class="ident" id="6568044">noBody</span>&nbsp;<span class="op" id="6568051">=</span>&nbsp;<span class="string" id="6568053">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="6568056">var</span>&nbsp;<span class="ident" id="6568060">noTrailer</span>&nbsp;<span class="ident" id="6568070">Header</span>&nbsp;<span class="op" id="6568077">=</span>&nbsp;<span class="ident" id="6568079">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6568084">var</span>&nbsp;<span class="ident" id="6568088">reqTests</span>&nbsp;<span class="op" id="6568097">=</span>&nbsp;<span class="op" id="6568099">[</span><span class="op" id="6568100">]</span><span class="ident" id="6568101">reqTest</span><span class="op" id="6568108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6568111">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6568175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568179">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6568225">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568230">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="6568261">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568266">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="6568289">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568294">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="6568372">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568377">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="6568415">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568420">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="6568456">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568461">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="6568514">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568519">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="6568541">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568546">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="6568570">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568575">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6568614">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568619">&#34;abcdef\n???&#34;</span><span class="op" id="6568632">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6568637">&amp;</span><span class="ident" id="6568638">Request</span><span class="op" id="6568645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568650">Method</span><span class="op" id="6568656">:</span>&nbsp;<span class="string" id="6568658">&#34;GET&#34;</span><span class="op" id="6568663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568668">URL</span><span class="op" id="6568671">:</span>&nbsp;<span class="op" id="6568673">&amp;</span><span class="ident" id="6568674">url</span><span class="op" id="6568677">.</span><span class="ident" id="6568678">URL</span><span class="op" id="6568681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568687">Scheme</span><span class="op" id="6568693">:</span>&nbsp;<span class="string" id="6568695">&#34;http&#34;</span><span class="op" id="6568701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568707">Host</span><span class="op" id="6568711">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6568715">&#34;www.techcrunch.com&#34;</span><span class="op" id="6568735">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568741">Path</span><span class="op" id="6568745">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6568749">&#34;/&#34;</span><span class="op" id="6568752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6568757">}</span><span class="op" id="6568758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568763">Proto</span><span class="op" id="6568768">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6568775">&#34;HTTP/1.1&#34;</span><span class="op" id="6568785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568790">ProtoMajor</span><span class="op" id="6568800">:</span>&nbsp;<span class="num" id="6568802">1</span><span class="op" id="6568803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568808">ProtoMinor</span><span class="op" id="6568818">:</span>&nbsp;<span class="num" id="6568820">1</span><span class="op" id="6568821">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6568826">Header</span><span class="op" id="6568832">:</span>&nbsp;<span class="ident" id="6568834">Header</span><span class="op" id="6568840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568846">&#34;Accept&#34;</span><span class="op" id="6568854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6568866">{</span><span class="string" id="6568867">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="6568932">}</span><span class="op" id="6568933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568939">&#34;Accept-Language&#34;</span><span class="op" id="6568956">:</span>&nbsp;&nbsp;<span class="op" id="6568959">{</span><span class="string" id="6568960">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="6568976">}</span><span class="op" id="6568977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6568983">&#34;Accept-Encoding&#34;</span><span class="op" id="6569000">:</span>&nbsp;&nbsp;<span class="op" id="6569003">{</span><span class="string" id="6569004">&#34;gzip,deflate&#34;</span><span class="op" id="6569018">}</span><span class="op" id="6569019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569025">&#34;Accept-Charset&#34;</span><span class="op" id="6569041">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6569045">{</span><span class="string" id="6569046">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="6569078">}</span><span class="op" id="6569079">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569085">&#34;Keep-Alive&#34;</span><span class="op" id="6569097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6569105">{</span><span class="string" id="6569106">&#34;300&#34;</span><span class="op" id="6569111">}</span><span class="op" id="6569112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569118">&#34;Proxy-Connection&#34;</span><span class="op" id="6569136">:</span>&nbsp;<span class="op" id="6569138">{</span><span class="string" id="6569139">&#34;keep-alive&#34;</span><span class="op" id="6569151">}</span><span class="op" id="6569152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569158">&#34;Content-Length&#34;</span><span class="op" id="6569174">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6569178">{</span><span class="string" id="6569179">&#34;7&#34;</span><span class="op" id="6569182">}</span><span class="op" id="6569183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569189">&#34;User-Agent&#34;</span><span class="op" id="6569201">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6569209">{</span><span class="string" id="6569210">&#34;Fake&#34;</span><span class="op" id="6569216">}</span><span class="op" id="6569217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569222">}</span><span class="op" id="6569223">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569228">Close</span><span class="op" id="6569233">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6569243">false</span><span class="op" id="6569248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569253">ContentLength</span><span class="op" id="6569266">:</span>&nbsp;<span class="num" id="6569268">7</span><span class="op" id="6569269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569274">Host</span><span class="op" id="6569278">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6569289">&#34;www.techcrunch.com&#34;</span><span class="op" id="6569309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569314">RequestURI</span><span class="op" id="6569324">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6569329">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="6569357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569361">}</span><span class="op" id="6569362">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569367">&#34;abcdef\n&#34;</span><span class="op" id="6569377">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569382">noTrailer</span><span class="op" id="6569391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569395">noError</span><span class="op" id="6569402">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569405">}</span><span class="op" id="6569406">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6569410">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569461">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6569482">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569487">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="6569510">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569515">&amp;</span><span class="ident" id="6569516">Request</span><span class="op" id="6569523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569528">Method</span><span class="op" id="6569534">:</span>&nbsp;<span class="string" id="6569536">&#34;GET&#34;</span><span class="op" id="6569541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569546">URL</span><span class="op" id="6569549">:</span>&nbsp;<span class="op" id="6569551">&amp;</span><span class="ident" id="6569552">url</span><span class="op" id="6569555">.</span><span class="ident" id="6569556">URL</span><span class="op" id="6569559">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569565">Path</span><span class="op" id="6569569">:</span>&nbsp;<span class="string" id="6569571">&#34;/&#34;</span><span class="op" id="6569574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569579">}</span><span class="op" id="6569580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569585">Proto</span><span class="op" id="6569590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6569600">&#34;HTTP/1.1&#34;</span><span class="op" id="6569610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569615">ProtoMajor</span><span class="op" id="6569625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6569630">1</span><span class="op" id="6569631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569636">ProtoMinor</span><span class="op" id="6569646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6569651">1</span><span class="op" id="6569652">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569657">Header</span><span class="op" id="6569663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6569672">Header</span><span class="op" id="6569678">{</span><span class="op" id="6569679">}</span><span class="op" id="6569680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569685">Close</span><span class="op" id="6569690">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6569700">false</span><span class="op" id="6569705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569710">ContentLength</span><span class="op" id="6569723">:</span>&nbsp;<span class="num" id="6569725">0</span><span class="op" id="6569726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569731">Host</span><span class="op" id="6569735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6569746">&#34;foo.com&#34;</span><span class="op" id="6569755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569760">RequestURI</span><span class="op" id="6569770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6569775">&#34;/&#34;</span><span class="op" id="6569778">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569782">}</span><span class="op" id="6569783">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569788">noBody</span><span class="op" id="6569794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569798">noTrailer</span><span class="op" id="6569807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6569811">noError</span><span class="op" id="6569818">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569821">}</span><span class="op" id="6569822">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6569826">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6569881">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6569931">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569935">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6569986">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6569991">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6570011">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570016">&amp;</span><span class="ident" id="6570017">Request</span><span class="op" id="6570024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570029">Method</span><span class="op" id="6570035">:</span>&nbsp;<span class="string" id="6570037">&#34;GET&#34;</span><span class="op" id="6570042">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570047">URL</span><span class="op" id="6570050">:</span>&nbsp;<span class="op" id="6570052">&amp;</span><span class="ident" id="6570053">url</span><span class="op" id="6570056">.</span><span class="ident" id="6570057">URL</span><span class="op" id="6570060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570066">Path</span><span class="op" id="6570070">:</span>&nbsp;<span class="string" id="6570072">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="6570105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570110">}</span><span class="op" id="6570111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570116">Proto</span><span class="op" id="6570121">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570131">&#34;HTTP/1.1&#34;</span><span class="op" id="6570141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570146">ProtoMajor</span><span class="op" id="6570156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570161">1</span><span class="op" id="6570162">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570167">ProtoMinor</span><span class="op" id="6570177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570182">1</span><span class="op" id="6570183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570188">Header</span><span class="op" id="6570194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6570203">Header</span><span class="op" id="6570209">{</span><span class="op" id="6570210">}</span><span class="op" id="6570211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570216">Close</span><span class="op" id="6570221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6570231">false</span><span class="op" id="6570236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570241">ContentLength</span><span class="op" id="6570254">:</span>&nbsp;<span class="num" id="6570256">0</span><span class="op" id="6570257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570262">Host</span><span class="op" id="6570266">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570277">&#34;test&#34;</span><span class="op" id="6570283">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570288">RequestURI</span><span class="op" id="6570298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570303">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="6570336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570340">}</span><span class="op" id="6570341">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570346">noBody</span><span class="op" id="6570352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570356">noTrailer</span><span class="op" id="6570365">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570369">noError</span><span class="op" id="6570376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570379">}</span><span class="op" id="6570380">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6570384">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570456">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570460">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6570502">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570507">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6570527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570531">nil</span><span class="op" id="6570534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570538">noBody</span><span class="op" id="6570544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570548">noTrailer</span><span class="op" id="6570557">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570561">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="6570616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570619">}</span><span class="op" id="6570620">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6570624">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570647">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570651">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6570671">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570676">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6570696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570700">nil</span><span class="op" id="6570703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570707">noBody</span><span class="op" id="6570713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570717">noTrailer</span><span class="op" id="6570726">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570730">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="6570749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570752">}</span><span class="op" id="6570753">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6570757">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570794">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570798">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6570820">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570825">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="6570845">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570850">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6570887">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570892">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="6570907">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570912">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="6570927">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570932">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="6570940">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570945">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="6570978">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570983">&#34;\r\n&#34;</span><span class="op" id="6570989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570993">&amp;</span><span class="ident" id="6570994">Request</span><span class="op" id="6571001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571006">Method</span><span class="op" id="6571012">:</span>&nbsp;<span class="string" id="6571014">&#34;POST&#34;</span><span class="op" id="6571020">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571025">URL</span><span class="op" id="6571028">:</span>&nbsp;<span class="op" id="6571030">&amp;</span><span class="ident" id="6571031">url</span><span class="op" id="6571034">.</span><span class="ident" id="6571035">URL</span><span class="op" id="6571038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571044">Path</span><span class="op" id="6571048">:</span>&nbsp;<span class="string" id="6571050">&#34;/&#34;</span><span class="op" id="6571053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571058">}</span><span class="op" id="6571059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571064">TransferEncoding</span><span class="op" id="6571080">:</span>&nbsp;<span class="op" id="6571082">[</span><span class="op" id="6571083">]</span><span class="builtintype" id="6571084">string</span><span class="op" id="6571090">{</span><span class="string" id="6571091">&#34;chunked&#34;</span><span class="op" id="6571100">}</span><span class="op" id="6571101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571106">Proto</span><span class="op" id="6571111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571124">&#34;HTTP/1.1&#34;</span><span class="op" id="6571134">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571139">ProtoMajor</span><span class="op" id="6571149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571157">1</span><span class="op" id="6571158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571163">ProtoMinor</span><span class="op" id="6571173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571181">1</span><span class="op" id="6571182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571187">Header</span><span class="op" id="6571193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6571205">Header</span><span class="op" id="6571211">{</span><span class="op" id="6571212">}</span><span class="op" id="6571213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571218">ContentLength</span><span class="op" id="6571231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6571236">-</span><span class="num" id="6571237">1</span><span class="op" id="6571238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571243">Host</span><span class="op" id="6571247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571261">&#34;foo.com&#34;</span><span class="op" id="6571270">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571275">RequestURI</span><span class="op" id="6571285">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571293">&#34;/&#34;</span><span class="op" id="6571296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571300">}</span><span class="op" id="6571301">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571306">&#34;foobar&#34;</span><span class="op" id="6571314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571318">Header</span><span class="op" id="6571324">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571329">&#34;Trailer-Key&#34;</span><span class="op" id="6571342">:</span>&nbsp;<span class="op" id="6571344">{</span><span class="string" id="6571345">&#34;Trailer-Value&#34;</span><span class="op" id="6571360">}</span><span class="op" id="6571361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571365">}</span><span class="op" id="6571366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571370">noError</span><span class="op" id="6571377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571380">}</span><span class="op" id="6571381">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6571385">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571427">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6571472">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571477">&amp;</span><span class="ident" id="6571478">Request</span><span class="op" id="6571485">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571490">Method</span><span class="op" id="6571496">:</span>&nbsp;<span class="string" id="6571498">&#34;CONNECT&#34;</span><span class="op" id="6571507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571512">URL</span><span class="op" id="6571515">:</span>&nbsp;<span class="op" id="6571517">&amp;</span><span class="ident" id="6571518">url</span><span class="op" id="6571521">.</span><span class="ident" id="6571522">URL</span><span class="op" id="6571525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571531">Host</span><span class="op" id="6571535">:</span>&nbsp;<span class="string" id="6571537">&#34;www.google.com:443&#34;</span><span class="op" id="6571557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571562">}</span><span class="op" id="6571563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571568">Proto</span><span class="op" id="6571573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571583">&#34;HTTP/1.1&#34;</span><span class="op" id="6571593">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571598">ProtoMajor</span><span class="op" id="6571608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571613">1</span><span class="op" id="6571614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571619">ProtoMinor</span><span class="op" id="6571629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571634">1</span><span class="op" id="6571635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571640">Header</span><span class="op" id="6571646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6571655">Header</span><span class="op" id="6571661">{</span><span class="op" id="6571662">}</span><span class="op" id="6571663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571668">Close</span><span class="op" id="6571673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6571683">false</span><span class="op" id="6571688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571693">ContentLength</span><span class="op" id="6571706">:</span>&nbsp;<span class="num" id="6571708">0</span><span class="op" id="6571709">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571714">Host</span><span class="op" id="6571718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571729">&#34;www.google.com:443&#34;</span><span class="op" id="6571749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571754">RequestURI</span><span class="op" id="6571764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571769">&#34;www.google.com:443&#34;</span><span class="op" id="6571789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571793">}</span><span class="op" id="6571794">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571799">noBody</span><span class="op" id="6571805">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571809">noTrailer</span><span class="op" id="6571818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571822">noError</span><span class="op" id="6571829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571832">}</span><span class="op" id="6571833">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6571837">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571878">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6571919">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571924">&amp;</span><span class="ident" id="6571925">Request</span><span class="op" id="6571932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571937">Method</span><span class="op" id="6571943">:</span>&nbsp;<span class="string" id="6571945">&#34;CONNECT&#34;</span><span class="op" id="6571954">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571959">URL</span><span class="op" id="6571962">:</span>&nbsp;<span class="op" id="6571964">&amp;</span><span class="ident" id="6571965">url</span><span class="op" id="6571968">.</span><span class="ident" id="6571969">URL</span><span class="op" id="6571972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571978">Host</span><span class="op" id="6571982">:</span>&nbsp;<span class="string" id="6571984">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6572000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572005">}</span><span class="op" id="6572006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572011">Proto</span><span class="op" id="6572016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572026">&#34;HTTP/1.1&#34;</span><span class="op" id="6572036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572041">ProtoMajor</span><span class="op" id="6572051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572056">1</span><span class="op" id="6572057">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572062">ProtoMinor</span><span class="op" id="6572072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572077">1</span><span class="op" id="6572078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572083">Header</span><span class="op" id="6572089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6572098">Header</span><span class="op" id="6572104">{</span><span class="op" id="6572105">}</span><span class="op" id="6572106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572111">Close</span><span class="op" id="6572116">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6572126">false</span><span class="op" id="6572131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572136">ContentLength</span><span class="op" id="6572149">:</span>&nbsp;<span class="num" id="6572151">0</span><span class="op" id="6572152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572157">Host</span><span class="op" id="6572161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572172">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6572188">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572193">RequestURI</span><span class="op" id="6572203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572208">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6572224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572228">}</span><span class="op" id="6572229">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572234">noBody</span><span class="op" id="6572240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572244">noTrailer</span><span class="op" id="6572253">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572257">noError</span><span class="op" id="6572264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572267">}</span><span class="op" id="6572268">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6572272">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572301">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572305">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6572340">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572345">&amp;</span><span class="ident" id="6572346">Request</span><span class="op" id="6572353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572358">Method</span><span class="op" id="6572364">:</span>&nbsp;<span class="string" id="6572366">&#34;CONNECT&#34;</span><span class="op" id="6572375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572380">URL</span><span class="op" id="6572383">:</span>&nbsp;<span class="op" id="6572385">&amp;</span><span class="ident" id="6572386">url</span><span class="op" id="6572389">.</span><span class="ident" id="6572390">URL</span><span class="op" id="6572393">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572399">Path</span><span class="op" id="6572403">:</span>&nbsp;<span class="string" id="6572405">&#34;/_goRPC_&#34;</span><span class="op" id="6572415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572420">}</span><span class="op" id="6572421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572426">Proto</span><span class="op" id="6572431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572441">&#34;HTTP/1.1&#34;</span><span class="op" id="6572451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572456">ProtoMajor</span><span class="op" id="6572466">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572471">1</span><span class="op" id="6572472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572477">ProtoMinor</span><span class="op" id="6572487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572492">1</span><span class="op" id="6572493">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572498">Header</span><span class="op" id="6572504">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6572513">Header</span><span class="op" id="6572519">{</span><span class="op" id="6572520">}</span><span class="op" id="6572521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572526">Close</span><span class="op" id="6572531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6572541">false</span><span class="op" id="6572546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572551">ContentLength</span><span class="op" id="6572564">:</span>&nbsp;<span class="num" id="6572566">0</span><span class="op" id="6572567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572572">Host</span><span class="op" id="6572576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572587">&#34;&#34;</span><span class="op" id="6572589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572594">RequestURI</span><span class="op" id="6572604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572609">&#34;/_goRPC_&#34;</span><span class="op" id="6572619">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572623">}</span><span class="op" id="6572624">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572629">noBody</span><span class="op" id="6572635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572639">noTrailer</span><span class="op" id="6572648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572652">noError</span><span class="op" id="6572659">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572662">}</span><span class="op" id="6572663">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6572667">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572718">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="6572760">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572764">&amp;</span><span class="ident" id="6572765">Request</span><span class="op" id="6572772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572777">Method</span><span class="op" id="6572783">:</span>&nbsp;<span class="string" id="6572785">&#34;NOTIFY&#34;</span><span class="op" id="6572793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572798">URL</span><span class="op" id="6572801">:</span>&nbsp;<span class="op" id="6572803">&amp;</span><span class="ident" id="6572804">url</span><span class="op" id="6572807">.</span><span class="ident" id="6572808">URL</span><span class="op" id="6572811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572817">Path</span><span class="op" id="6572821">:</span>&nbsp;<span class="string" id="6572823">&#34;*&#34;</span><span class="op" id="6572826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572831">}</span><span class="op" id="6572832">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572837">Proto</span><span class="op" id="6572842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572849">&#34;HTTP/1.1&#34;</span><span class="op" id="6572859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572864">ProtoMajor</span><span class="op" id="6572874">:</span>&nbsp;<span class="num" id="6572876">1</span><span class="op" id="6572877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572882">ProtoMinor</span><span class="op" id="6572892">:</span>&nbsp;<span class="num" id="6572894">1</span><span class="op" id="6572895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572900">Header</span><span class="op" id="6572906">:</span>&nbsp;<span class="ident" id="6572908">Header</span><span class="op" id="6572914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572920">&#34;Server&#34;</span><span class="op" id="6572928">:</span>&nbsp;<span class="op" id="6572930">[</span><span class="op" id="6572931">]</span><span class="builtintype" id="6572932">string</span><span class="op" id="6572938">{</span><span class="string" id="6572939">&#34;foo&#34;</span><span class="op" id="6572944">}</span><span class="op" id="6572945">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572950">}</span><span class="op" id="6572951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572956">Close</span><span class="op" id="6572961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6572971">false</span><span class="op" id="6572976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572981">ContentLength</span><span class="op" id="6572994">:</span>&nbsp;<span class="num" id="6572996">0</span><span class="op" id="6572997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573002">RequestURI</span><span class="op" id="6573012">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573017">&#34;*&#34;</span><span class="op" id="6573020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573024">}</span><span class="op" id="6573025">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573030">noBody</span><span class="op" id="6573036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573040">noTrailer</span><span class="op" id="6573049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573053">noError</span><span class="op" id="6573060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573063">}</span><span class="op" id="6573064">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6573068">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6573126">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="6573169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573173">&amp;</span><span class="ident" id="6573174">Request</span><span class="op" id="6573181">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573186">Method</span><span class="op" id="6573192">:</span>&nbsp;<span class="string" id="6573194">&#34;OPTIONS&#34;</span><span class="op" id="6573203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573208">URL</span><span class="op" id="6573211">:</span>&nbsp;<span class="op" id="6573213">&amp;</span><span class="ident" id="6573214">url</span><span class="op" id="6573217">.</span><span class="ident" id="6573218">URL</span><span class="op" id="6573221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573227">Path</span><span class="op" id="6573231">:</span>&nbsp;<span class="string" id="6573233">&#34;*&#34;</span><span class="op" id="6573236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573241">}</span><span class="op" id="6573242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573247">Proto</span><span class="op" id="6573252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573259">&#34;HTTP/1.1&#34;</span><span class="op" id="6573269">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573274">ProtoMajor</span><span class="op" id="6573284">:</span>&nbsp;<span class="num" id="6573286">1</span><span class="op" id="6573287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573292">ProtoMinor</span><span class="op" id="6573302">:</span>&nbsp;<span class="num" id="6573304">1</span><span class="op" id="6573305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573310">Header</span><span class="op" id="6573316">:</span>&nbsp;<span class="ident" id="6573318">Header</span><span class="op" id="6573324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6573330">&#34;Server&#34;</span><span class="op" id="6573338">:</span>&nbsp;<span class="op" id="6573340">[</span><span class="op" id="6573341">]</span><span class="builtintype" id="6573342">string</span><span class="op" id="6573348">{</span><span class="string" id="6573349">&#34;foo&#34;</span><span class="op" id="6573354">}</span><span class="op" id="6573355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573360">}</span><span class="op" id="6573361">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573366">Close</span><span class="op" id="6573371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6573381">false</span><span class="op" id="6573386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573391">ContentLength</span><span class="op" id="6573404">:</span>&nbsp;<span class="num" id="6573406">0</span><span class="op" id="6573407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573412">RequestURI</span><span class="op" id="6573422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573427">&#34;*&#34;</span><span class="op" id="6573430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573434">}</span><span class="op" id="6573435">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573440">noBody</span><span class="op" id="6573446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573450">noTrailer</span><span class="op" id="6573459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573463">noError</span><span class="op" id="6573470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573473">}</span><span class="op" id="6573474">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6573478">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6573527">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="6573595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573599">&amp;</span><span class="ident" id="6573600">Request</span><span class="op" id="6573607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573612">Method</span><span class="op" id="6573618">:</span>&nbsp;<span class="string" id="6573620">&#34;GET&#34;</span><span class="op" id="6573625">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573630">URL</span><span class="op" id="6573633">:</span>&nbsp;<span class="op" id="6573635">&amp;</span><span class="ident" id="6573636">url</span><span class="op" id="6573639">.</span><span class="ident" id="6573640">URL</span><span class="op" id="6573643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573649">Path</span><span class="op" id="6573653">:</span>&nbsp;<span class="string" id="6573655">&#34;/&#34;</span><span class="op" id="6573658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573663">}</span><span class="op" id="6573664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573669">Header</span><span class="op" id="6573675">:</span>&nbsp;<span class="ident" id="6573677">Header</span><span class="op" id="6573683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6573689">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6573731">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6573771">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6573789">&#34;Connection&#34;</span><span class="op" id="6573801">:</span>&nbsp;<span class="op" id="6573803">[</span><span class="op" id="6573804">]</span><span class="builtintype" id="6573805">string</span><span class="op" id="6573811">{</span><span class="string" id="6573812">&#34;close&#34;</span><span class="op" id="6573819">}</span><span class="op" id="6573820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573825">}</span><span class="op" id="6573826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573831">Host</span><span class="op" id="6573835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573843">&#34;issue8261.com&#34;</span><span class="op" id="6573858">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573863">Proto</span><span class="op" id="6573868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573875">&#34;HTTP/1.1&#34;</span><span class="op" id="6573885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573890">ProtoMajor</span><span class="op" id="6573900">:</span>&nbsp;<span class="num" id="6573902">1</span><span class="op" id="6573903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573908">ProtoMinor</span><span class="op" id="6573918">:</span>&nbsp;<span class="num" id="6573920">1</span><span class="op" id="6573921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573926">Close</span><span class="op" id="6573931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6573938">true</span><span class="op" id="6573942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573947">RequestURI</span><span class="op" id="6573957">:</span>&nbsp;<span class="string" id="6573959">&#34;/&#34;</span><span class="op" id="6573962">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573966">}</span><span class="op" id="6573967">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573972">noBody</span><span class="op" id="6573978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573982">noTrailer</span><span class="op" id="6573991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573995">noError</span><span class="op" id="6574002">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574005">}</span><span class="op" id="6574006">,</span><br>
<span class="lineno"></span><span class="op" id="6574008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6574011">func</span>&nbsp;<span class="ident" id="6574016">TestReadRequest</span><span class="op" id="6574031">(</span><span class="ident" id="6574032">t</span>&nbsp;<span class="op" id="6574034">*</span><span class="ident" id="6574035">testing</span><span class="op" id="6574042">.</span><span class="ident" id="6574043">T</span><span class="op" id="6574044">)</span>&nbsp;<span class="op" id="6574046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574049">for</span>&nbsp;<span class="ident" id="6574053">i</span>&nbsp;<span class="op" id="6574055">:=</span>&nbsp;<span class="keyword" id="6574058">range</span>&nbsp;<span class="ident" id="6574064">reqTests</span>&nbsp;<span class="op" id="6574073">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574077">tt</span>&nbsp;<span class="op" id="6574080">:=</span>&nbsp;<span class="op" id="6574083">&amp;</span><span class="ident" id="6574084">reqTests</span><span class="op" id="6574092">[</span><span class="ident" id="6574093">i</span><span class="op" id="6574094">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574098">req</span><span class="op" id="6574101">,</span>&nbsp;<span class="ident" id="6574103">err</span>&nbsp;<span class="op" id="6574107">:=</span>&nbsp;<span class="ident" id="6574110">ReadRequest</span><span class="op" id="6574121">(</span><span class="ident" id="6574122">bufio</span><span class="op" id="6574127">.</span><span class="ident" id="6574128">NewReader</span><span class="op" id="6574137">(</span><span class="ident" id="6574138">strings</span><span class="op" id="6574145">.</span><span class="ident" id="6574146">NewReader</span><span class="op" id="6574155">(</span><span class="ident" id="6574156">tt</span><span class="op" id="6574158">.</span><span class="ident" id="6574159">Raw</span><span class="op" id="6574162">)</span><span class="op" id="6574163">)</span><span class="op" id="6574164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574168">if</span>&nbsp;<span class="ident" id="6574171">err</span>&nbsp;<span class="op" id="6574175">!=</span>&nbsp;<span class="ident" id="6574178">nil</span>&nbsp;<span class="op" id="6574182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574187">if</span>&nbsp;<span class="ident" id="6574190">err</span><span class="op" id="6574193">.</span><span class="ident" id="6574194">Error</span><span class="op" id="6574199">(</span><span class="op" id="6574200">)</span>&nbsp;<span class="op" id="6574202">!=</span>&nbsp;<span class="ident" id="6574205">tt</span><span class="op" id="6574207">.</span><span class="ident" id="6574208">Error</span>&nbsp;<span class="op" id="6574214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574220">t</span><span class="op" id="6574221">.</span><span class="ident" id="6574222">Errorf</span><span class="op" id="6574228">(</span><span class="string" id="6574229">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="6574259">,</span>&nbsp;<span class="ident" id="6574261">i</span><span class="op" id="6574262">,</span>&nbsp;<span class="ident" id="6574264">err</span><span class="op" id="6574267">.</span><span class="ident" id="6574268">Error</span><span class="op" id="6574273">(</span><span class="op" id="6574274">)</span><span class="op" id="6574275">,</span>&nbsp;<span class="ident" id="6574277">tt</span><span class="op" id="6574279">.</span><span class="ident" id="6574280">Error</span><span class="op" id="6574285">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574295">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574310">rbody</span>&nbsp;<span class="op" id="6574316">:=</span>&nbsp;<span class="ident" id="6574319">req</span><span class="op" id="6574322">.</span><span class="ident" id="6574323">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574330">req</span><span class="op" id="6574333">.</span><span class="ident" id="6574334">Body</span>&nbsp;<span class="op" id="6574339">=</span>&nbsp;<span class="ident" id="6574341">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574347">testName</span>&nbsp;<span class="op" id="6574356">:=</span>&nbsp;<span class="ident" id="6574359">fmt</span><span class="op" id="6574362">.</span><span class="ident" id="6574363">Sprintf</span><span class="op" id="6574370">(</span><span class="string" id="6574371">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="6574385">,</span>&nbsp;<span class="ident" id="6574387">i</span><span class="op" id="6574388">,</span>&nbsp;<span class="ident" id="6574390">tt</span><span class="op" id="6574392">.</span><span class="ident" id="6574393">Raw</span><span class="op" id="6574396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574400">diff</span><span class="op" id="6574404">(</span><span class="ident" id="6574405">t</span><span class="op" id="6574406">,</span>&nbsp;<span class="ident" id="6574408">testName</span><span class="op" id="6574416">,</span>&nbsp;<span class="ident" id="6574418">req</span><span class="op" id="6574421">,</span>&nbsp;<span class="ident" id="6574423">tt</span><span class="op" id="6574425">.</span><span class="ident" id="6574426">Req</span><span class="op" id="6574429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574433">var</span>&nbsp;<span class="ident" id="6574437">bout</span>&nbsp;<span class="ident" id="6574442">bytes</span><span class="op" id="6574447">.</span><span class="ident" id="6574448">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574457">if</span>&nbsp;<span class="ident" id="6574460">rbody</span>&nbsp;<span class="op" id="6574466">!=</span>&nbsp;<span class="ident" id="6574469">nil</span>&nbsp;<span class="op" id="6574473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574478">_</span><span class="op" id="6574479">,</span>&nbsp;<span class="ident" id="6574481">err</span>&nbsp;<span class="op" id="6574485">:=</span>&nbsp;<span class="ident" id="6574488">io</span><span class="op" id="6574490">.</span><span class="ident" id="6574491">Copy</span><span class="op" id="6574495">(</span><span class="op" id="6574496">&amp;</span><span class="ident" id="6574497">bout</span><span class="op" id="6574501">,</span>&nbsp;<span class="ident" id="6574503">rbody</span><span class="op" id="6574508">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574513">if</span>&nbsp;<span class="ident" id="6574516">err</span>&nbsp;<span class="op" id="6574520">!=</span>&nbsp;<span class="ident" id="6574523">nil</span>&nbsp;<span class="op" id="6574527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574533">t</span><span class="op" id="6574534">.</span><span class="ident" id="6574535">Fatalf</span><span class="op" id="6574541">(</span><span class="string" id="6574542">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="6574564">,</span>&nbsp;<span class="ident" id="6574566">testName</span><span class="op" id="6574574">,</span>&nbsp;<span class="ident" id="6574576">err</span><span class="op" id="6574579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574589">rbody</span><span class="op" id="6574594">.</span><span class="ident" id="6574595">Close</span><span class="op" id="6574600">(</span><span class="op" id="6574601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574605">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574609">body</span>&nbsp;<span class="op" id="6574614">:=</span>&nbsp;<span class="ident" id="6574617">bout</span><span class="op" id="6574621">.</span><span class="ident" id="6574622">String</span><span class="op" id="6574628">(</span><span class="op" id="6574629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574633">if</span>&nbsp;<span class="ident" id="6574636">body</span>&nbsp;<span class="op" id="6574641">!=</span>&nbsp;<span class="ident" id="6574644">tt</span><span class="op" id="6574646">.</span><span class="ident" id="6574647">Body</span>&nbsp;<span class="op" id="6574652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574657">t</span><span class="op" id="6574658">.</span><span class="ident" id="6574659">Errorf</span><span class="op" id="6574665">(</span><span class="string" id="6574666">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6574689">,</span>&nbsp;<span class="ident" id="6574691">testName</span><span class="op" id="6574699">,</span>&nbsp;<span class="ident" id="6574701">body</span><span class="op" id="6574705">,</span>&nbsp;<span class="ident" id="6574707">tt</span><span class="op" id="6574709">.</span><span class="ident" id="6574710">Body</span><span class="op" id="6574714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6574722">if</span>&nbsp;<span class="op" id="6574725">!</span><span class="ident" id="6574726">reflect</span><span class="op" id="6574733">.</span><span class="ident" id="6574734">DeepEqual</span><span class="op" id="6574743">(</span><span class="ident" id="6574744">tt</span><span class="op" id="6574746">.</span><span class="ident" id="6574747">Trailer</span><span class="op" id="6574754">,</span>&nbsp;<span class="ident" id="6574756">req</span><span class="op" id="6574759">.</span><span class="ident" id="6574760">Trailer</span><span class="op" id="6574767">)</span>&nbsp;<span class="op" id="6574769">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574774">t</span><span class="op" id="6574775">.</span><span class="ident" id="6574776">Errorf</span><span class="op" id="6574782">(</span><span class="string" id="6574783">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6574825">,</span>&nbsp;<span class="ident" id="6574827">testName</span><span class="op" id="6574835">,</span>&nbsp;<span class="ident" id="6574837">req</span><span class="op" id="6574840">.</span><span class="ident" id="6574841">Trailer</span><span class="op" id="6574848">,</span>&nbsp;<span class="ident" id="6574850">tt</span><span class="op" id="6574852">.</span><span class="ident" id="6574853">Trailer</span><span class="op" id="6574860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574867">}</span><br>
<span class="lineno"></span><span class="op" id="6574869">}</span>
</div>
</body>
</html>
