<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7087253">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7087308">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7087362">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7087413">package</span>&nbsp;<span class="ident" id="7087421">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7087426">import</span>&nbsp;<span class="op" id="7087433">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087436">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087445">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087461">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087478">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087494">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087501">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087509">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087520">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7087531">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7087541">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7087544">func</span>&nbsp;<span class="ident" id="7087549">TestZeroRat</span><span class="op" id="7087560">(</span><span class="ident" id="7087561">t</span>&nbsp;<span class="op" id="7087563">*</span><span class="ident" id="7087564">testing</span><span class="op" id="7087571">.</span><span class="ident" id="7087572">T</span><span class="op" id="7087573">)</span>&nbsp;<span class="op" id="7087575">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087578">var</span>&nbsp;<span class="ident" id="7087582">x</span><span class="op" id="7087583">,</span>&nbsp;<span class="ident" id="7087585">y</span><span class="op" id="7087586">,</span>&nbsp;<span class="ident" id="7087588">z</span>&nbsp;<span class="ident" id="7087590">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087595">y</span><span class="op" id="7087596">.</span><span class="ident" id="7087597">SetFrac64</span><span class="op" id="7087606">(</span><span class="num" id="7087607">0</span><span class="op" id="7087608">,</span>&nbsp;<span class="num" id="7087610">42</span><span class="op" id="7087612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087616">if</span>&nbsp;<span class="ident" id="7087619">x</span><span class="op" id="7087620">.</span><span class="ident" id="7087621">Cmp</span><span class="op" id="7087624">(</span><span class="op" id="7087625">&amp;</span><span class="ident" id="7087626">y</span><span class="op" id="7087627">)</span>&nbsp;<span class="op" id="7087629">!=</span>&nbsp;<span class="num" id="7087632">0</span>&nbsp;<span class="op" id="7087634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087638">t</span><span class="op" id="7087639">.</span><span class="ident" id="7087640">Errorf</span><span class="op" id="7087646">(</span><span class="string" id="7087647">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7087686">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7087689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087693">if</span>&nbsp;<span class="ident" id="7087696">s</span>&nbsp;<span class="op" id="7087698">:=</span>&nbsp;<span class="ident" id="7087701">x</span><span class="op" id="7087702">.</span><span class="ident" id="7087703">String</span><span class="op" id="7087709">(</span><span class="op" id="7087710">)</span><span class="op" id="7087711">;</span>&nbsp;<span class="ident" id="7087713">s</span>&nbsp;<span class="op" id="7087715">!=</span>&nbsp;<span class="string" id="7087718">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7087724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087728">t</span><span class="op" id="7087729">.</span><span class="ident" id="7087730">Errorf</span><span class="op" id="7087736">(</span><span class="string" id="7087737">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7087759">,</span>&nbsp;<span class="ident" id="7087761">s</span><span class="op" id="7087762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7087765">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087769">if</span>&nbsp;<span class="ident" id="7087772">s</span>&nbsp;<span class="op" id="7087774">:=</span>&nbsp;<span class="ident" id="7087777">x</span><span class="op" id="7087778">.</span><span class="ident" id="7087779">RatString</span><span class="op" id="7087788">(</span><span class="op" id="7087789">)</span><span class="op" id="7087790">;</span>&nbsp;<span class="ident" id="7087792">s</span>&nbsp;<span class="op" id="7087794">!=</span>&nbsp;<span class="string" id="7087797">&#34;0&#34;</span>&nbsp;<span class="op" id="7087801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087805">t</span><span class="op" id="7087806">.</span><span class="ident" id="7087807">Errorf</span><span class="op" id="7087813">(</span><span class="string" id="7087814">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7087834">,</span>&nbsp;<span class="ident" id="7087836">s</span><span class="op" id="7087837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7087840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087844">z</span><span class="op" id="7087845">.</span><span class="ident" id="7087846">Add</span><span class="op" id="7087849">(</span><span class="op" id="7087850">&amp;</span><span class="ident" id="7087851">x</span><span class="op" id="7087852">,</span>&nbsp;<span class="op" id="7087854">&amp;</span><span class="ident" id="7087855">y</span><span class="op" id="7087856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087859">if</span>&nbsp;<span class="ident" id="7087862">s</span>&nbsp;<span class="op" id="7087864">:=</span>&nbsp;<span class="ident" id="7087867">z</span><span class="op" id="7087868">.</span><span class="ident" id="7087869">RatString</span><span class="op" id="7087878">(</span><span class="op" id="7087879">)</span><span class="op" id="7087880">;</span>&nbsp;<span class="ident" id="7087882">s</span>&nbsp;<span class="op" id="7087884">!=</span>&nbsp;<span class="string" id="7087887">&#34;0&#34;</span>&nbsp;<span class="op" id="7087891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087895">t</span><span class="op" id="7087896">.</span><span class="ident" id="7087897">Errorf</span><span class="op" id="7087903">(</span><span class="string" id="7087904">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7087926">,</span>&nbsp;<span class="ident" id="7087928">s</span><span class="op" id="7087929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7087932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087936">z</span><span class="op" id="7087937">.</span><span class="ident" id="7087938">Sub</span><span class="op" id="7087941">(</span><span class="op" id="7087942">&amp;</span><span class="ident" id="7087943">x</span><span class="op" id="7087944">,</span>&nbsp;<span class="op" id="7087946">&amp;</span><span class="ident" id="7087947">y</span><span class="op" id="7087948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7087951">if</span>&nbsp;<span class="ident" id="7087954">s</span>&nbsp;<span class="op" id="7087956">:=</span>&nbsp;<span class="ident" id="7087959">z</span><span class="op" id="7087960">.</span><span class="ident" id="7087961">RatString</span><span class="op" id="7087970">(</span><span class="op" id="7087971">)</span><span class="op" id="7087972">;</span>&nbsp;<span class="ident" id="7087974">s</span>&nbsp;<span class="op" id="7087976">!=</span>&nbsp;<span class="string" id="7087979">&#34;0&#34;</span>&nbsp;<span class="op" id="7087983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7087987">t</span><span class="op" id="7087988">.</span><span class="ident" id="7087989">Errorf</span><span class="op" id="7087995">(</span><span class="string" id="7087996">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7088018">,</span>&nbsp;<span class="ident" id="7088020">s</span><span class="op" id="7088021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7088028">z</span><span class="op" id="7088029">.</span><span class="ident" id="7088030">Mul</span><span class="op" id="7088033">(</span><span class="op" id="7088034">&amp;</span><span class="ident" id="7088035">x</span><span class="op" id="7088036">,</span>&nbsp;<span class="op" id="7088038">&amp;</span><span class="ident" id="7088039">y</span><span class="op" id="7088040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7088043">if</span>&nbsp;<span class="ident" id="7088046">s</span>&nbsp;<span class="op" id="7088048">:=</span>&nbsp;<span class="ident" id="7088051">z</span><span class="op" id="7088052">.</span><span class="ident" id="7088053">RatString</span><span class="op" id="7088062">(</span><span class="op" id="7088063">)</span><span class="op" id="7088064">;</span>&nbsp;<span class="ident" id="7088066">s</span>&nbsp;<span class="op" id="7088068">!=</span>&nbsp;<span class="string" id="7088071">&#34;0&#34;</span>&nbsp;<span class="op" id="7088075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7088079">t</span><span class="op" id="7088080">.</span><span class="ident" id="7088081">Errorf</span><span class="op" id="7088087">(</span><span class="string" id="7088088">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7088110">,</span>&nbsp;<span class="ident" id="7088112">s</span><span class="op" id="7088113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7088120">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7088151">defer</span>&nbsp;<span class="keyword" id="7088157">func</span><span class="op" id="7088161">(</span><span class="op" id="7088162">)</span>&nbsp;<span class="op" id="7088164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7088168">if</span>&nbsp;<span class="ident" id="7088171">s</span>&nbsp;<span class="op" id="7088173">:=</span>&nbsp;<span class="builtinfunc" id="7088176">recover</span><span class="op" id="7088183">(</span><span class="op" id="7088184">)</span><span class="op" id="7088185">;</span>&nbsp;<span class="ident" id="7088187">s</span>&nbsp;<span class="op" id="7088189">==</span>&nbsp;<span class="ident" id="7088192">nil</span>&nbsp;<span class="op" id="7088196">||</span>&nbsp;<span class="ident" id="7088199">s</span><span class="op" id="7088200">.</span><span class="op" id="7088201">(</span><span class="builtintype" id="7088202">string</span><span class="op" id="7088208">)</span>&nbsp;<span class="op" id="7088210">!=</span>&nbsp;<span class="string" id="7088213">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7088232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7088237">panic</span><span class="op" id="7088242">(</span><span class="ident" id="7088243">s</span><span class="op" id="7088244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088248">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088251">}</span><span class="op" id="7088252">(</span><span class="op" id="7088253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7088256">z</span><span class="op" id="7088257">.</span><span class="ident" id="7088258">Quo</span><span class="op" id="7088261">(</span><span class="op" id="7088262">&amp;</span><span class="ident" id="7088263">x</span><span class="op" id="7088264">,</span>&nbsp;<span class="op" id="7088266">&amp;</span><span class="ident" id="7088267">y</span><span class="op" id="7088268">)</span><br>
<span class="lineno"></span><span class="op" id="7088270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7088273">var</span>&nbsp;<span class="ident" id="7088277">setStringTests</span>&nbsp;<span class="op" id="7088292">=</span>&nbsp;<span class="op" id="7088294">[</span><span class="op" id="7088295">]</span><span class="keyword" id="7088296">struct</span>&nbsp;<span class="op" id="7088303">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7088306">in</span><span class="op" id="7088308">,</span>&nbsp;<span class="ident" id="7088310">out</span>&nbsp;<span class="builtintype" id="7088314">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7088322">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7088330">bool</span><br>
<span class="lineno"></span><span class="op" id="7088335">}</span><span class="op" id="7088336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088339">{</span><span class="string" id="7088340">&#34;0&#34;</span><span class="op" id="7088343">,</span>&nbsp;<span class="string" id="7088345">&#34;0&#34;</span><span class="op" id="7088348">,</span>&nbsp;<span class="builtintype" id="7088350">true</span><span class="op" id="7088354">}</span><span class="op" id="7088355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088358">{</span><span class="string" id="7088359">&#34;-0&#34;</span><span class="op" id="7088363">,</span>&nbsp;<span class="string" id="7088365">&#34;0&#34;</span><span class="op" id="7088368">,</span>&nbsp;<span class="builtintype" id="7088370">true</span><span class="op" id="7088374">}</span><span class="op" id="7088375">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088378">{</span><span class="string" id="7088379">&#34;1&#34;</span><span class="op" id="7088382">,</span>&nbsp;<span class="string" id="7088384">&#34;1&#34;</span><span class="op" id="7088387">,</span>&nbsp;<span class="builtintype" id="7088389">true</span><span class="op" id="7088393">}</span><span class="op" id="7088394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088397">{</span><span class="string" id="7088398">&#34;-1&#34;</span><span class="op" id="7088402">,</span>&nbsp;<span class="string" id="7088404">&#34;-1&#34;</span><span class="op" id="7088408">,</span>&nbsp;<span class="builtintype" id="7088410">true</span><span class="op" id="7088414">}</span><span class="op" id="7088415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088418">{</span><span class="string" id="7088419">&#34;1.&#34;</span><span class="op" id="7088423">,</span>&nbsp;<span class="string" id="7088425">&#34;1&#34;</span><span class="op" id="7088428">,</span>&nbsp;<span class="builtintype" id="7088430">true</span><span class="op" id="7088434">}</span><span class="op" id="7088435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088438">{</span><span class="string" id="7088439">&#34;1e0&#34;</span><span class="op" id="7088444">,</span>&nbsp;<span class="string" id="7088446">&#34;1&#34;</span><span class="op" id="7088449">,</span>&nbsp;<span class="builtintype" id="7088451">true</span><span class="op" id="7088455">}</span><span class="op" id="7088456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088459">{</span><span class="string" id="7088460">&#34;1.e1&#34;</span><span class="op" id="7088466">,</span>&nbsp;<span class="string" id="7088468">&#34;10&#34;</span><span class="op" id="7088472">,</span>&nbsp;<span class="builtintype" id="7088474">true</span><span class="op" id="7088478">}</span><span class="op" id="7088479">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088482">{</span><span class="ident" id="7088483">in</span><span class="op" id="7088485">:</span>&nbsp;<span class="string" id="7088487">&#34;1e&#34;</span><span class="op" id="7088491">,</span>&nbsp;<span class="ident" id="7088493">ok</span><span class="op" id="7088495">:</span>&nbsp;<span class="builtintype" id="7088497">false</span><span class="op" id="7088502">}</span><span class="op" id="7088503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088506">{</span><span class="ident" id="7088507">in</span><span class="op" id="7088509">:</span>&nbsp;<span class="string" id="7088511">&#34;1.e&#34;</span><span class="op" id="7088516">,</span>&nbsp;<span class="ident" id="7088518">ok</span><span class="op" id="7088520">:</span>&nbsp;<span class="builtintype" id="7088522">false</span><span class="op" id="7088527">}</span><span class="op" id="7088528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088531">{</span><span class="ident" id="7088532">in</span><span class="op" id="7088534">:</span>&nbsp;<span class="string" id="7088536">&#34;1e+14e-5&#34;</span><span class="op" id="7088546">,</span>&nbsp;<span class="ident" id="7088548">ok</span><span class="op" id="7088550">:</span>&nbsp;<span class="builtintype" id="7088552">false</span><span class="op" id="7088557">}</span><span class="op" id="7088558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088561">{</span><span class="ident" id="7088562">in</span><span class="op" id="7088564">:</span>&nbsp;<span class="string" id="7088566">&#34;1e4.5&#34;</span><span class="op" id="7088573">,</span>&nbsp;<span class="ident" id="7088575">ok</span><span class="op" id="7088577">:</span>&nbsp;<span class="builtintype" id="7088579">false</span><span class="op" id="7088584">}</span><span class="op" id="7088585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088588">{</span><span class="ident" id="7088589">in</span><span class="op" id="7088591">:</span>&nbsp;<span class="string" id="7088593">&#34;r&#34;</span><span class="op" id="7088596">,</span>&nbsp;<span class="ident" id="7088598">ok</span><span class="op" id="7088600">:</span>&nbsp;<span class="builtintype" id="7088602">false</span><span class="op" id="7088607">}</span><span class="op" id="7088608">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088611">{</span><span class="ident" id="7088612">in</span><span class="op" id="7088614">:</span>&nbsp;<span class="string" id="7088616">&#34;a/b&#34;</span><span class="op" id="7088621">,</span>&nbsp;<span class="ident" id="7088623">ok</span><span class="op" id="7088625">:</span>&nbsp;<span class="builtintype" id="7088627">false</span><span class="op" id="7088632">}</span><span class="op" id="7088633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088636">{</span><span class="ident" id="7088637">in</span><span class="op" id="7088639">:</span>&nbsp;<span class="string" id="7088641">&#34;a.b&#34;</span><span class="op" id="7088646">,</span>&nbsp;<span class="ident" id="7088648">ok</span><span class="op" id="7088650">:</span>&nbsp;<span class="builtintype" id="7088652">false</span><span class="op" id="7088657">}</span><span class="op" id="7088658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088661">{</span><span class="string" id="7088662">&#34;-0.1&#34;</span><span class="op" id="7088668">,</span>&nbsp;<span class="string" id="7088670">&#34;-1/10&#34;</span><span class="op" id="7088677">,</span>&nbsp;<span class="builtintype" id="7088679">true</span><span class="op" id="7088683">}</span><span class="op" id="7088684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088687">{</span><span class="string" id="7088688">&#34;-.1&#34;</span><span class="op" id="7088693">,</span>&nbsp;<span class="string" id="7088695">&#34;-1/10&#34;</span><span class="op" id="7088702">,</span>&nbsp;<span class="builtintype" id="7088704">true</span><span class="op" id="7088708">}</span><span class="op" id="7088709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088712">{</span><span class="string" id="7088713">&#34;2/4&#34;</span><span class="op" id="7088718">,</span>&nbsp;<span class="string" id="7088720">&#34;1/2&#34;</span><span class="op" id="7088725">,</span>&nbsp;<span class="builtintype" id="7088727">true</span><span class="op" id="7088731">}</span><span class="op" id="7088732">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088735">{</span><span class="string" id="7088736">&#34;.25&#34;</span><span class="op" id="7088741">,</span>&nbsp;<span class="string" id="7088743">&#34;1/4&#34;</span><span class="op" id="7088748">,</span>&nbsp;<span class="builtintype" id="7088750">true</span><span class="op" id="7088754">}</span><span class="op" id="7088755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088758">{</span><span class="string" id="7088759">&#34;-1/5&#34;</span><span class="op" id="7088765">,</span>&nbsp;<span class="string" id="7088767">&#34;-1/5&#34;</span><span class="op" id="7088773">,</span>&nbsp;<span class="builtintype" id="7088775">true</span><span class="op" id="7088779">}</span><span class="op" id="7088780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088783">{</span><span class="string" id="7088784">&#34;8129567.7690E14&#34;</span><span class="op" id="7088801">,</span>&nbsp;<span class="string" id="7088803">&#34;812956776900000000000&#34;</span><span class="op" id="7088826">,</span>&nbsp;<span class="builtintype" id="7088828">true</span><span class="op" id="7088832">}</span><span class="op" id="7088833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088836">{</span><span class="string" id="7088837">&#34;78189e+4&#34;</span><span class="op" id="7088847">,</span>&nbsp;<span class="string" id="7088849">&#34;781890000&#34;</span><span class="op" id="7088860">,</span>&nbsp;<span class="builtintype" id="7088862">true</span><span class="op" id="7088866">}</span><span class="op" id="7088867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088870">{</span><span class="string" id="7088871">&#34;553019.8935e+8&#34;</span><span class="op" id="7088887">,</span>&nbsp;<span class="string" id="7088889">&#34;55301989350000&#34;</span><span class="op" id="7088905">,</span>&nbsp;<span class="builtintype" id="7088907">true</span><span class="op" id="7088911">}</span><span class="op" id="7088912">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7088915">{</span><span class="string" id="7088916">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7088951">,</span>&nbsp;<span class="string" id="7088953">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7088996">,</span>&nbsp;<span class="builtintype" id="7088998">true</span><span class="op" id="7089002">}</span><span class="op" id="7089003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089006">{</span><span class="string" id="7089007">&#34;9877861857500000E-7&#34;</span><span class="op" id="7089028">,</span>&nbsp;<span class="string" id="7089030">&#34;3951144743/4&#34;</span><span class="op" id="7089044">,</span>&nbsp;<span class="builtintype" id="7089046">true</span><span class="op" id="7089050">}</span><span class="op" id="7089051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089054">{</span><span class="string" id="7089055">&#34;2169378.417e-3&#34;</span><span class="op" id="7089071">,</span>&nbsp;<span class="string" id="7089073">&#34;2169378417/1000000&#34;</span><span class="op" id="7089093">,</span>&nbsp;<span class="builtintype" id="7089095">true</span><span class="op" id="7089099">}</span><span class="op" id="7089100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089103">{</span><span class="string" id="7089104">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7089142">,</span>&nbsp;<span class="string" id="7089144">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7089182">,</span>&nbsp;<span class="builtintype" id="7089184">true</span><span class="op" id="7089188">}</span><span class="op" id="7089189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089192">{</span><span class="string" id="7089193">&#34;53/70893980658822810696&#34;</span><span class="op" id="7089218">,</span>&nbsp;<span class="string" id="7089220">&#34;53/70893980658822810696&#34;</span><span class="op" id="7089245">,</span>&nbsp;<span class="builtintype" id="7089247">true</span><span class="op" id="7089251">}</span><span class="op" id="7089252">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089255">{</span><span class="string" id="7089256">&#34;106/141787961317645621392&#34;</span><span class="op" id="7089283">,</span>&nbsp;<span class="string" id="7089285">&#34;53/70893980658822810696&#34;</span><span class="op" id="7089310">,</span>&nbsp;<span class="builtintype" id="7089312">true</span><span class="op" id="7089316">}</span><span class="op" id="7089317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089320">{</span><span class="string" id="7089321">&#34;204211327800791583.81095&#34;</span><span class="op" id="7089347">,</span>&nbsp;<span class="string" id="7089349">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7089379">,</span>&nbsp;<span class="builtintype" id="7089381">true</span><span class="op" id="7089385">}</span><span class="op" id="7089386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089389">{</span><span class="ident" id="7089390">in</span><span class="op" id="7089392">:</span>&nbsp;<span class="string" id="7089394">&#34;1/0&#34;</span><span class="op" id="7089399">,</span>&nbsp;<span class="ident" id="7089401">ok</span><span class="op" id="7089403">:</span>&nbsp;<span class="builtintype" id="7089405">false</span><span class="op" id="7089410">}</span><span class="op" id="7089411">,</span><br>
<span class="lineno"></span><span class="op" id="7089413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7089416">func</span>&nbsp;<span class="ident" id="7089421">TestRatSetString</span><span class="op" id="7089437">(</span><span class="ident" id="7089438">t</span>&nbsp;<span class="op" id="7089440">*</span><span class="ident" id="7089441">testing</span><span class="op" id="7089448">.</span><span class="ident" id="7089449">T</span><span class="op" id="7089450">)</span>&nbsp;<span class="op" id="7089452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7089455">for</span>&nbsp;<span class="ident" id="7089459">i</span><span class="op" id="7089460">,</span>&nbsp;<span class="ident" id="7089462">test</span>&nbsp;<span class="op" id="7089467">:=</span>&nbsp;<span class="keyword" id="7089470">range</span>&nbsp;<span class="ident" id="7089476">setStringTests</span>&nbsp;<span class="op" id="7089491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089495">x</span><span class="op" id="7089496">,</span>&nbsp;<span class="ident" id="7089498">ok</span>&nbsp;<span class="op" id="7089501">:=</span>&nbsp;<span class="builtinfunc" id="7089504">new</span><span class="op" id="7089507">(</span><span class="ident" id="7089508">Rat</span><span class="op" id="7089511">)</span><span class="op" id="7089512">.</span><span class="ident" id="7089513">SetString</span><span class="op" id="7089522">(</span><span class="ident" id="7089523">test</span><span class="op" id="7089527">.</span><span class="ident" id="7089528">in</span><span class="op" id="7089530">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7089535">if</span>&nbsp;<span class="ident" id="7089538">ok</span>&nbsp;<span class="op" id="7089541">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7089546">if</span>&nbsp;<span class="op" id="7089549">!</span><span class="ident" id="7089550">test</span><span class="op" id="7089554">.</span><span class="ident" id="7089555">ok</span>&nbsp;<span class="op" id="7089558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089564">t</span><span class="op" id="7089565">.</span><span class="ident" id="7089566">Errorf</span><span class="op" id="7089572">(</span><span class="string" id="7089573">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7089609">,</span>&nbsp;<span class="ident" id="7089611">i</span><span class="op" id="7089612">,</span>&nbsp;<span class="ident" id="7089614">test</span><span class="op" id="7089618">.</span><span class="ident" id="7089619">in</span><span class="op" id="7089621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089626">}</span>&nbsp;<span class="keyword" id="7089628">else</span>&nbsp;<span class="keyword" id="7089633">if</span>&nbsp;<span class="ident" id="7089636">x</span><span class="op" id="7089637">.</span><span class="ident" id="7089638">RatString</span><span class="op" id="7089647">(</span><span class="op" id="7089648">)</span>&nbsp;<span class="op" id="7089650">!=</span>&nbsp;<span class="ident" id="7089653">test</span><span class="op" id="7089657">.</span><span class="ident" id="7089658">out</span>&nbsp;<span class="op" id="7089662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089668">t</span><span class="op" id="7089669">.</span><span class="ident" id="7089670">Errorf</span><span class="op" id="7089676">(</span><span class="string" id="7089677">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7089711">,</span>&nbsp;<span class="ident" id="7089713">i</span><span class="op" id="7089714">,</span>&nbsp;<span class="ident" id="7089716">test</span><span class="op" id="7089720">.</span><span class="ident" id="7089721">in</span><span class="op" id="7089723">,</span>&nbsp;<span class="ident" id="7089725">x</span><span class="op" id="7089726">.</span><span class="ident" id="7089727">RatString</span><span class="op" id="7089736">(</span><span class="op" id="7089737">)</span><span class="op" id="7089738">,</span>&nbsp;<span class="ident" id="7089740">test</span><span class="op" id="7089744">.</span><span class="ident" id="7089745">out</span><span class="op" id="7089748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089753">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089757">}</span>&nbsp;<span class="keyword" id="7089759">else</span>&nbsp;<span class="keyword" id="7089764">if</span>&nbsp;<span class="ident" id="7089767">x</span>&nbsp;<span class="op" id="7089769">!=</span>&nbsp;<span class="ident" id="7089772">nil</span>&nbsp;<span class="op" id="7089776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089781">t</span><span class="op" id="7089782">.</span><span class="ident" id="7089783">Errorf</span><span class="op" id="7089789">(</span><span class="string" id="7089790">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7089825">,</span>&nbsp;<span class="ident" id="7089827">i</span><span class="op" id="7089828">,</span>&nbsp;<span class="ident" id="7089830">test</span><span class="op" id="7089834">.</span><span class="ident" id="7089835">in</span><span class="op" id="7089837">,</span>&nbsp;<span class="ident" id="7089839">x</span><span class="op" id="7089840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7089847">}</span><br>
<span class="lineno"></span><span class="op" id="7089849">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7089852">func</span>&nbsp;<span class="ident" id="7089857">TestRatScan</span><span class="op" id="7089868">(</span><span class="ident" id="7089869">t</span>&nbsp;<span class="op" id="7089871">*</span><span class="ident" id="7089872">testing</span><span class="op" id="7089879">.</span><span class="ident" id="7089880">T</span><span class="op" id="7089881">)</span>&nbsp;<span class="op" id="7089883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7089886">var</span>&nbsp;<span class="ident" id="7089890">buf</span>&nbsp;<span class="ident" id="7089894">bytes</span><span class="op" id="7089899">.</span><span class="ident" id="7089900">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7089908">for</span>&nbsp;<span class="ident" id="7089912">i</span><span class="op" id="7089913">,</span>&nbsp;<span class="ident" id="7089915">test</span>&nbsp;<span class="op" id="7089920">:=</span>&nbsp;<span class="keyword" id="7089923">range</span>&nbsp;<span class="ident" id="7089929">setStringTests</span>&nbsp;<span class="op" id="7089944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089948">x</span>&nbsp;<span class="op" id="7089950">:=</span>&nbsp;<span class="builtinfunc" id="7089953">new</span><span class="op" id="7089956">(</span><span class="ident" id="7089957">Rat</span><span class="op" id="7089960">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089964">buf</span><span class="op" id="7089967">.</span><span class="ident" id="7089968">Reset</span><span class="op" id="7089973">(</span><span class="op" id="7089974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7089978">buf</span><span class="op" id="7089981">.</span><span class="ident" id="7089982">WriteString</span><span class="op" id="7089993">(</span><span class="ident" id="7089994">test</span><span class="op" id="7089998">.</span><span class="ident" id="7089999">in</span><span class="op" id="7090001">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090006">_</span><span class="op" id="7090007">,</span>&nbsp;<span class="ident" id="7090009">err</span>&nbsp;<span class="op" id="7090013">:=</span>&nbsp;<span class="ident" id="7090016">fmt</span><span class="op" id="7090019">.</span><span class="ident" id="7090020">Fscanf</span><span class="op" id="7090026">(</span><span class="op" id="7090027">&amp;</span><span class="ident" id="7090028">buf</span><span class="op" id="7090031">,</span>&nbsp;<span class="string" id="7090033">&#34;%v&#34;</span><span class="op" id="7090037">,</span>&nbsp;<span class="ident" id="7090039">x</span><span class="op" id="7090040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090044">if</span>&nbsp;<span class="ident" id="7090047">err</span>&nbsp;<span class="op" id="7090051">==</span>&nbsp;<span class="ident" id="7090054">nil</span>&nbsp;<span class="op" id="7090058">!=</span>&nbsp;<span class="ident" id="7090061">test</span><span class="op" id="7090065">.</span><span class="ident" id="7090066">ok</span>&nbsp;<span class="op" id="7090069">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090074">if</span>&nbsp;<span class="ident" id="7090077">test</span><span class="op" id="7090081">.</span><span class="ident" id="7090082">ok</span>&nbsp;<span class="op" id="7090085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090091">t</span><span class="op" id="7090092">.</span><span class="ident" id="7090093">Errorf</span><span class="op" id="7090099">(</span><span class="string" id="7090100">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7090115">,</span>&nbsp;<span class="ident" id="7090117">i</span><span class="op" id="7090118">,</span>&nbsp;<span class="ident" id="7090120">err</span><span class="op" id="7090123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090128">}</span>&nbsp;<span class="keyword" id="7090130">else</span>&nbsp;<span class="op" id="7090135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090141">t</span><span class="op" id="7090142">.</span><span class="ident" id="7090143">Errorf</span><span class="op" id="7090149">(</span><span class="string" id="7090150">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7090170">,</span>&nbsp;<span class="ident" id="7090172">i</span><span class="op" id="7090173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090178">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090183">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090198">if</span>&nbsp;<span class="ident" id="7090201">err</span>&nbsp;<span class="op" id="7090205">==</span>&nbsp;<span class="ident" id="7090208">nil</span>&nbsp;<span class="op" id="7090212">&amp;&amp;</span>&nbsp;<span class="ident" id="7090215">x</span><span class="op" id="7090216">.</span><span class="ident" id="7090217">RatString</span><span class="op" id="7090226">(</span><span class="op" id="7090227">)</span>&nbsp;<span class="op" id="7090229">!=</span>&nbsp;<span class="ident" id="7090232">test</span><span class="op" id="7090236">.</span><span class="ident" id="7090237">out</span>&nbsp;<span class="op" id="7090241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090246">t</span><span class="op" id="7090247">.</span><span class="ident" id="7090248">Errorf</span><span class="op" id="7090254">(</span><span class="string" id="7090255">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7090275">,</span>&nbsp;<span class="ident" id="7090277">i</span><span class="op" id="7090278">,</span>&nbsp;<span class="ident" id="7090280">x</span><span class="op" id="7090281">.</span><span class="ident" id="7090282">RatString</span><span class="op" id="7090291">(</span><span class="op" id="7090292">)</span><span class="op" id="7090293">,</span>&nbsp;<span class="ident" id="7090295">test</span><span class="op" id="7090299">.</span><span class="ident" id="7090300">out</span><span class="op" id="7090303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090307">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090310">}</span><br>
<span class="lineno"></span><span class="op" id="7090312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7090315">var</span>&nbsp;<span class="ident" id="7090319">floatStringTests</span>&nbsp;<span class="op" id="7090336">=</span>&nbsp;<span class="op" id="7090338">[</span><span class="op" id="7090339">]</span><span class="keyword" id="7090340">struct</span>&nbsp;<span class="op" id="7090347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090350">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7090355">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090363">prec</span>&nbsp;<span class="builtintype" id="7090368">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090373">out</span>&nbsp;&nbsp;<span class="builtintype" id="7090378">string</span><br>
<span class="lineno"></span><span class="op" id="7090385">}</span><span class="op" id="7090386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090389">{</span><span class="string" id="7090390">&#34;0&#34;</span><span class="op" id="7090393">,</span>&nbsp;<span class="num" id="7090395">0</span><span class="op" id="7090396">,</span>&nbsp;<span class="string" id="7090398">&#34;0&#34;</span><span class="op" id="7090401">}</span><span class="op" id="7090402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090405">{</span><span class="string" id="7090406">&#34;0&#34;</span><span class="op" id="7090409">,</span>&nbsp;<span class="num" id="7090411">4</span><span class="op" id="7090412">,</span>&nbsp;<span class="string" id="7090414">&#34;0.0000&#34;</span><span class="op" id="7090422">}</span><span class="op" id="7090423">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090426">{</span><span class="string" id="7090427">&#34;1&#34;</span><span class="op" id="7090430">,</span>&nbsp;<span class="num" id="7090432">0</span><span class="op" id="7090433">,</span>&nbsp;<span class="string" id="7090435">&#34;1&#34;</span><span class="op" id="7090438">}</span><span class="op" id="7090439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090442">{</span><span class="string" id="7090443">&#34;1&#34;</span><span class="op" id="7090446">,</span>&nbsp;<span class="num" id="7090448">2</span><span class="op" id="7090449">,</span>&nbsp;<span class="string" id="7090451">&#34;1.00&#34;</span><span class="op" id="7090457">}</span><span class="op" id="7090458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090461">{</span><span class="string" id="7090462">&#34;-1&#34;</span><span class="op" id="7090466">,</span>&nbsp;<span class="num" id="7090468">0</span><span class="op" id="7090469">,</span>&nbsp;<span class="string" id="7090471">&#34;-1&#34;</span><span class="op" id="7090475">}</span><span class="op" id="7090476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090479">{</span><span class="string" id="7090480">&#34;.25&#34;</span><span class="op" id="7090485">,</span>&nbsp;<span class="num" id="7090487">2</span><span class="op" id="7090488">,</span>&nbsp;<span class="string" id="7090490">&#34;0.25&#34;</span><span class="op" id="7090496">}</span><span class="op" id="7090497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090500">{</span><span class="string" id="7090501">&#34;.25&#34;</span><span class="op" id="7090506">,</span>&nbsp;<span class="num" id="7090508">1</span><span class="op" id="7090509">,</span>&nbsp;<span class="string" id="7090511">&#34;0.3&#34;</span><span class="op" id="7090516">}</span><span class="op" id="7090517">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090520">{</span><span class="string" id="7090521">&#34;.25&#34;</span><span class="op" id="7090526">,</span>&nbsp;<span class="num" id="7090528">3</span><span class="op" id="7090529">,</span>&nbsp;<span class="string" id="7090531">&#34;0.250&#34;</span><span class="op" id="7090538">}</span><span class="op" id="7090539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090542">{</span><span class="string" id="7090543">&#34;-1/3&#34;</span><span class="op" id="7090549">,</span>&nbsp;<span class="num" id="7090551">3</span><span class="op" id="7090552">,</span>&nbsp;<span class="string" id="7090554">&#34;-0.333&#34;</span><span class="op" id="7090562">}</span><span class="op" id="7090563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090566">{</span><span class="string" id="7090567">&#34;-2/3&#34;</span><span class="op" id="7090573">,</span>&nbsp;<span class="num" id="7090575">4</span><span class="op" id="7090576">,</span>&nbsp;<span class="string" id="7090578">&#34;-0.6667&#34;</span><span class="op" id="7090587">}</span><span class="op" id="7090588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090591">{</span><span class="string" id="7090592">&#34;0.96&#34;</span><span class="op" id="7090598">,</span>&nbsp;<span class="num" id="7090600">1</span><span class="op" id="7090601">,</span>&nbsp;<span class="string" id="7090603">&#34;1.0&#34;</span><span class="op" id="7090608">}</span><span class="op" id="7090609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090612">{</span><span class="string" id="7090613">&#34;0.999&#34;</span><span class="op" id="7090620">,</span>&nbsp;<span class="num" id="7090622">2</span><span class="op" id="7090623">,</span>&nbsp;<span class="string" id="7090625">&#34;1.00&#34;</span><span class="op" id="7090631">}</span><span class="op" id="7090632">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090635">{</span><span class="string" id="7090636">&#34;0.9&#34;</span><span class="op" id="7090641">,</span>&nbsp;<span class="num" id="7090643">0</span><span class="op" id="7090644">,</span>&nbsp;<span class="string" id="7090646">&#34;1&#34;</span><span class="op" id="7090649">}</span><span class="op" id="7090650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090653">{</span><span class="string" id="7090654">&#34;.25&#34;</span><span class="op" id="7090659">,</span>&nbsp;<span class="op" id="7090661">-</span><span class="num" id="7090662">1</span><span class="op" id="7090663">,</span>&nbsp;<span class="string" id="7090665">&#34;0&#34;</span><span class="op" id="7090668">}</span><span class="op" id="7090669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090672">{</span><span class="string" id="7090673">&#34;.55&#34;</span><span class="op" id="7090678">,</span>&nbsp;<span class="op" id="7090680">-</span><span class="num" id="7090681">1</span><span class="op" id="7090682">,</span>&nbsp;<span class="string" id="7090684">&#34;1&#34;</span><span class="op" id="7090687">}</span><span class="op" id="7090688">,</span><br>
<span class="lineno"></span><span class="op" id="7090690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7090693">func</span>&nbsp;<span class="ident" id="7090698">TestFloatString</span><span class="op" id="7090713">(</span><span class="ident" id="7090714">t</span>&nbsp;<span class="op" id="7090716">*</span><span class="ident" id="7090717">testing</span><span class="op" id="7090724">.</span><span class="ident" id="7090725">T</span><span class="op" id="7090726">)</span>&nbsp;<span class="op" id="7090728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090731">for</span>&nbsp;<span class="ident" id="7090735">i</span><span class="op" id="7090736">,</span>&nbsp;<span class="ident" id="7090738">test</span>&nbsp;<span class="op" id="7090743">:=</span>&nbsp;<span class="keyword" id="7090746">range</span>&nbsp;<span class="ident" id="7090752">floatStringTests</span>&nbsp;<span class="op" id="7090769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090773">x</span><span class="op" id="7090774">,</span>&nbsp;<span class="ident" id="7090776">_</span>&nbsp;<span class="op" id="7090778">:=</span>&nbsp;<span class="builtinfunc" id="7090781">new</span><span class="op" id="7090784">(</span><span class="ident" id="7090785">Rat</span><span class="op" id="7090788">)</span><span class="op" id="7090789">.</span><span class="ident" id="7090790">SetString</span><span class="op" id="7090799">(</span><span class="ident" id="7090800">test</span><span class="op" id="7090804">.</span><span class="ident" id="7090805">in</span><span class="op" id="7090807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090812">if</span>&nbsp;<span class="ident" id="7090815">x</span><span class="op" id="7090816">.</span><span class="ident" id="7090817">FloatString</span><span class="op" id="7090828">(</span><span class="ident" id="7090829">test</span><span class="op" id="7090833">.</span><span class="ident" id="7090834">prec</span><span class="op" id="7090838">)</span>&nbsp;<span class="op" id="7090840">!=</span>&nbsp;<span class="ident" id="7090843">test</span><span class="op" id="7090847">.</span><span class="ident" id="7090848">out</span>&nbsp;<span class="op" id="7090852">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090857">t</span><span class="op" id="7090858">.</span><span class="ident" id="7090859">Errorf</span><span class="op" id="7090865">(</span><span class="string" id="7090866">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7090886">,</span>&nbsp;<span class="ident" id="7090888">i</span><span class="op" id="7090889">,</span>&nbsp;<span class="ident" id="7090891">x</span><span class="op" id="7090892">.</span><span class="ident" id="7090893">FloatString</span><span class="op" id="7090904">(</span><span class="ident" id="7090905">test</span><span class="op" id="7090909">.</span><span class="ident" id="7090910">prec</span><span class="op" id="7090914">)</span><span class="op" id="7090915">,</span>&nbsp;<span class="ident" id="7090917">test</span><span class="op" id="7090921">.</span><span class="ident" id="7090922">out</span><span class="op" id="7090925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7090932">}</span><br>
<span class="lineno"></span><span class="op" id="7090934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7090937">func</span>&nbsp;<span class="ident" id="7090942">TestRatSign</span><span class="op" id="7090953">(</span><span class="ident" id="7090954">t</span>&nbsp;<span class="op" id="7090956">*</span><span class="ident" id="7090957">testing</span><span class="op" id="7090964">.</span><span class="ident" id="7090965">T</span><span class="op" id="7090966">)</span>&nbsp;<span class="op" id="7090968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7090971">zero</span>&nbsp;<span class="op" id="7090976">:=</span>&nbsp;<span class="ident" id="7090979">NewRat</span><span class="op" id="7090985">(</span><span class="num" id="7090986">0</span><span class="op" id="7090987">,</span>&nbsp;<span class="num" id="7090989">1</span><span class="op" id="7090990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7090993">for</span>&nbsp;<span class="ident" id="7090997">_</span><span class="op" id="7090998">,</span>&nbsp;<span class="ident" id="7091000">a</span>&nbsp;<span class="op" id="7091002">:=</span>&nbsp;<span class="keyword" id="7091005">range</span>&nbsp;<span class="ident" id="7091011">setStringTests</span>&nbsp;<span class="op" id="7091026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091030">x</span><span class="op" id="7091031">,</span>&nbsp;<span class="ident" id="7091033">ok</span>&nbsp;<span class="op" id="7091036">:=</span>&nbsp;<span class="builtinfunc" id="7091039">new</span><span class="op" id="7091042">(</span><span class="ident" id="7091043">Rat</span><span class="op" id="7091046">)</span><span class="op" id="7091047">.</span><span class="ident" id="7091048">SetString</span><span class="op" id="7091057">(</span><span class="ident" id="7091058">a</span><span class="op" id="7091059">.</span><span class="ident" id="7091060">in</span><span class="op" id="7091062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091066">if</span>&nbsp;<span class="op" id="7091069">!</span><span class="ident" id="7091070">ok</span>&nbsp;<span class="op" id="7091073">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091078">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091093">s</span>&nbsp;<span class="op" id="7091095">:=</span>&nbsp;<span class="ident" id="7091098">x</span><span class="op" id="7091099">.</span><span class="ident" id="7091100">Sign</span><span class="op" id="7091104">(</span><span class="op" id="7091105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091109">e</span>&nbsp;<span class="op" id="7091111">:=</span>&nbsp;<span class="ident" id="7091114">x</span><span class="op" id="7091115">.</span><span class="ident" id="7091116">Cmp</span><span class="op" id="7091119">(</span><span class="ident" id="7091120">zero</span><span class="op" id="7091124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091128">if</span>&nbsp;<span class="ident" id="7091131">s</span>&nbsp;<span class="op" id="7091133">!=</span>&nbsp;<span class="ident" id="7091136">e</span>&nbsp;<span class="op" id="7091138">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091143">t</span><span class="op" id="7091144">.</span><span class="ident" id="7091145">Errorf</span><span class="op" id="7091151">(</span><span class="string" id="7091152">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7091180">,</span>&nbsp;<span class="ident" id="7091182">s</span><span class="op" id="7091183">,</span>&nbsp;<span class="ident" id="7091185">e</span><span class="op" id="7091186">,</span>&nbsp;<span class="op" id="7091188">&amp;</span><span class="ident" id="7091189">x</span><span class="op" id="7091190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091197">}</span><br>
<span class="lineno"></span><span class="op" id="7091199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7091202">var</span>&nbsp;<span class="ident" id="7091206">ratCmpTests</span>&nbsp;<span class="op" id="7091218">=</span>&nbsp;<span class="op" id="7091220">[</span><span class="op" id="7091221">]</span><span class="keyword" id="7091222">struct</span>&nbsp;<span class="op" id="7091229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091232">rat1</span><span class="op" id="7091236">,</span>&nbsp;<span class="ident" id="7091238">rat2</span>&nbsp;<span class="builtintype" id="7091243">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091251">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7091262">int</span><br>
<span class="lineno"></span><span class="op" id="7091266">}</span><span class="op" id="7091267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091270">{</span><span class="string" id="7091271">&#34;0&#34;</span><span class="op" id="7091274">,</span>&nbsp;<span class="string" id="7091276">&#34;0/1&#34;</span><span class="op" id="7091281">,</span>&nbsp;<span class="num" id="7091283">0</span><span class="op" id="7091284">}</span><span class="op" id="7091285">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091288">{</span><span class="string" id="7091289">&#34;1/1&#34;</span><span class="op" id="7091294">,</span>&nbsp;<span class="string" id="7091296">&#34;1&#34;</span><span class="op" id="7091299">,</span>&nbsp;<span class="num" id="7091301">0</span><span class="op" id="7091302">}</span><span class="op" id="7091303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091306">{</span><span class="string" id="7091307">&#34;-1&#34;</span><span class="op" id="7091311">,</span>&nbsp;<span class="string" id="7091313">&#34;-2/2&#34;</span><span class="op" id="7091319">,</span>&nbsp;<span class="num" id="7091321">0</span><span class="op" id="7091322">}</span><span class="op" id="7091323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091326">{</span><span class="string" id="7091327">&#34;1&#34;</span><span class="op" id="7091330">,</span>&nbsp;<span class="string" id="7091332">&#34;0&#34;</span><span class="op" id="7091335">,</span>&nbsp;<span class="num" id="7091337">1</span><span class="op" id="7091338">}</span><span class="op" id="7091339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091342">{</span><span class="string" id="7091343">&#34;0/1&#34;</span><span class="op" id="7091348">,</span>&nbsp;<span class="string" id="7091350">&#34;1/1&#34;</span><span class="op" id="7091355">,</span>&nbsp;<span class="op" id="7091357">-</span><span class="num" id="7091358">1</span><span class="op" id="7091359">}</span><span class="op" id="7091360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091363">{</span><span class="string" id="7091364">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7091391">,</span>&nbsp;<span class="string" id="7091393">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7091420">,</span>&nbsp;<span class="op" id="7091422">-</span><span class="num" id="7091423">1</span><span class="op" id="7091424">}</span><span class="op" id="7091425">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091428">{</span><span class="string" id="7091429">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7091462">,</span>&nbsp;<span class="string" id="7091464">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7091497">,</span>&nbsp;<span class="op" id="7091499">-</span><span class="num" id="7091500">1</span><span class="op" id="7091501">}</span><span class="op" id="7091502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091505">{</span><span class="string" id="7091506">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7091543">,</span>&nbsp;<span class="string" id="7091545">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7091581">,</span>&nbsp;<span class="op" id="7091583">-</span><span class="num" id="7091584">1</span><span class="op" id="7091585">}</span><span class="op" id="7091586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091589">{</span><span class="string" id="7091590">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7091626">,</span>&nbsp;<span class="string" id="7091628">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7091665">,</span>&nbsp;<span class="num" id="7091667">0</span><span class="op" id="7091668">}</span><span class="op" id="7091669">,</span><br>
<span class="lineno"></span><span class="op" id="7091671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7091674">func</span>&nbsp;<span class="ident" id="7091679">TestRatCmp</span><span class="op" id="7091689">(</span><span class="ident" id="7091690">t</span>&nbsp;<span class="op" id="7091692">*</span><span class="ident" id="7091693">testing</span><span class="op" id="7091700">.</span><span class="ident" id="7091701">T</span><span class="op" id="7091702">)</span>&nbsp;<span class="op" id="7091704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091707">for</span>&nbsp;<span class="ident" id="7091711">i</span><span class="op" id="7091712">,</span>&nbsp;<span class="ident" id="7091714">test</span>&nbsp;<span class="op" id="7091719">:=</span>&nbsp;<span class="keyword" id="7091722">range</span>&nbsp;<span class="ident" id="7091728">ratCmpTests</span>&nbsp;<span class="op" id="7091740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091744">x</span><span class="op" id="7091745">,</span>&nbsp;<span class="ident" id="7091747">_</span>&nbsp;<span class="op" id="7091749">:=</span>&nbsp;<span class="builtinfunc" id="7091752">new</span><span class="op" id="7091755">(</span><span class="ident" id="7091756">Rat</span><span class="op" id="7091759">)</span><span class="op" id="7091760">.</span><span class="ident" id="7091761">SetString</span><span class="op" id="7091770">(</span><span class="ident" id="7091771">test</span><span class="op" id="7091775">.</span><span class="ident" id="7091776">rat1</span><span class="op" id="7091780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091784">y</span><span class="op" id="7091785">,</span>&nbsp;<span class="ident" id="7091787">_</span>&nbsp;<span class="op" id="7091789">:=</span>&nbsp;<span class="builtinfunc" id="7091792">new</span><span class="op" id="7091795">(</span><span class="ident" id="7091796">Rat</span><span class="op" id="7091799">)</span><span class="op" id="7091800">.</span><span class="ident" id="7091801">SetString</span><span class="op" id="7091810">(</span><span class="ident" id="7091811">test</span><span class="op" id="7091815">.</span><span class="ident" id="7091816">rat2</span><span class="op" id="7091820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091825">out</span>&nbsp;<span class="op" id="7091829">:=</span>&nbsp;<span class="ident" id="7091832">x</span><span class="op" id="7091833">.</span><span class="ident" id="7091834">Cmp</span><span class="op" id="7091837">(</span><span class="ident" id="7091838">y</span><span class="op" id="7091839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091843">if</span>&nbsp;<span class="ident" id="7091846">out</span>&nbsp;<span class="op" id="7091850">!=</span>&nbsp;<span class="ident" id="7091853">test</span><span class="op" id="7091857">.</span><span class="ident" id="7091858">out</span>&nbsp;<span class="op" id="7091862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091867">t</span><span class="op" id="7091868">.</span><span class="ident" id="7091869">Errorf</span><span class="op" id="7091875">(</span><span class="string" id="7091876">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7091903">,</span>&nbsp;<span class="ident" id="7091905">i</span><span class="op" id="7091906">,</span>&nbsp;<span class="ident" id="7091908">out</span><span class="op" id="7091911">,</span>&nbsp;<span class="ident" id="7091913">test</span><span class="op" id="7091917">.</span><span class="ident" id="7091918">out</span><span class="op" id="7091921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7091928">}</span><br>
<span class="lineno">205</span><span class="op" id="7091930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7091933">func</span>&nbsp;<span class="ident" id="7091938">TestIsInt</span><span class="op" id="7091947">(</span><span class="ident" id="7091948">t</span>&nbsp;<span class="op" id="7091950">*</span><span class="ident" id="7091951">testing</span><span class="op" id="7091958">.</span><span class="ident" id="7091959">T</span><span class="op" id="7091960">)</span>&nbsp;<span class="op" id="7091962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7091965">one</span>&nbsp;<span class="op" id="7091969">:=</span>&nbsp;<span class="ident" id="7091972">NewInt</span><span class="op" id="7091978">(</span><span class="num" id="7091979">1</span><span class="op" id="7091980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7091983">for</span>&nbsp;<span class="ident" id="7091987">_</span><span class="op" id="7091988">,</span>&nbsp;<span class="ident" id="7091990">a</span>&nbsp;<span class="op" id="7091992">:=</span>&nbsp;<span class="keyword" id="7091995">range</span>&nbsp;<span class="ident" id="7092001">setStringTests</span>&nbsp;<span class="op" id="7092016">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092020">x</span><span class="op" id="7092021">,</span>&nbsp;<span class="ident" id="7092023">ok</span>&nbsp;<span class="op" id="7092026">:=</span>&nbsp;<span class="builtinfunc" id="7092029">new</span><span class="op" id="7092032">(</span><span class="ident" id="7092033">Rat</span><span class="op" id="7092036">)</span><span class="op" id="7092037">.</span><span class="ident" id="7092038">SetString</span><span class="op" id="7092047">(</span><span class="ident" id="7092048">a</span><span class="op" id="7092049">.</span><span class="ident" id="7092050">in</span><span class="op" id="7092052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092056">if</span>&nbsp;<span class="op" id="7092059">!</span><span class="ident" id="7092060">ok</span>&nbsp;<span class="op" id="7092063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092068">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092083">i</span>&nbsp;<span class="op" id="7092085">:=</span>&nbsp;<span class="ident" id="7092088">x</span><span class="op" id="7092089">.</span><span class="ident" id="7092090">IsInt</span><span class="op" id="7092095">(</span><span class="op" id="7092096">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092100">e</span>&nbsp;<span class="op" id="7092102">:=</span>&nbsp;<span class="ident" id="7092105">x</span><span class="op" id="7092106">.</span><span class="ident" id="7092107">Denom</span><span class="op" id="7092112">(</span><span class="op" id="7092113">)</span><span class="op" id="7092114">.</span><span class="ident" id="7092115">Cmp</span><span class="op" id="7092118">(</span><span class="ident" id="7092119">one</span><span class="op" id="7092122">)</span>&nbsp;<span class="op" id="7092124">==</span>&nbsp;<span class="num" id="7092127">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092131">if</span>&nbsp;<span class="ident" id="7092134">i</span>&nbsp;<span class="op" id="7092136">!=</span>&nbsp;<span class="ident" id="7092139">e</span>&nbsp;<span class="op" id="7092141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092146">t</span><span class="op" id="7092147">.</span><span class="ident" id="7092148">Errorf</span><span class="op" id="7092154">(</span><span class="string" id="7092155">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7092185">,</span>&nbsp;<span class="ident" id="7092187">x</span><span class="op" id="7092188">,</span>&nbsp;<span class="ident" id="7092190">i</span><span class="op" id="7092191">,</span>&nbsp;<span class="ident" id="7092193">e</span><span class="op" id="7092194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092201">}</span><br>
<span class="lineno">220</span><span class="op" id="7092203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7092206">func</span>&nbsp;<span class="ident" id="7092211">TestRatAbs</span><span class="op" id="7092221">(</span><span class="ident" id="7092222">t</span>&nbsp;<span class="op" id="7092224">*</span><span class="ident" id="7092225">testing</span><span class="op" id="7092232">.</span><span class="ident" id="7092233">T</span><span class="op" id="7092234">)</span>&nbsp;<span class="op" id="7092236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092239">zero</span>&nbsp;<span class="op" id="7092244">:=</span>&nbsp;<span class="builtinfunc" id="7092247">new</span><span class="op" id="7092250">(</span><span class="ident" id="7092251">Rat</span><span class="op" id="7092254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092257">for</span>&nbsp;<span class="ident" id="7092261">_</span><span class="op" id="7092262">,</span>&nbsp;<span class="ident" id="7092264">a</span>&nbsp;<span class="op" id="7092266">:=</span>&nbsp;<span class="keyword" id="7092269">range</span>&nbsp;<span class="ident" id="7092275">setStringTests</span>&nbsp;<span class="op" id="7092290">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092294">x</span><span class="op" id="7092295">,</span>&nbsp;<span class="ident" id="7092297">ok</span>&nbsp;<span class="op" id="7092300">:=</span>&nbsp;<span class="builtinfunc" id="7092303">new</span><span class="op" id="7092306">(</span><span class="ident" id="7092307">Rat</span><span class="op" id="7092310">)</span><span class="op" id="7092311">.</span><span class="ident" id="7092312">SetString</span><span class="op" id="7092321">(</span><span class="ident" id="7092322">a</span><span class="op" id="7092323">.</span><span class="ident" id="7092324">in</span><span class="op" id="7092326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092330">if</span>&nbsp;<span class="op" id="7092333">!</span><span class="ident" id="7092334">ok</span>&nbsp;<span class="op" id="7092337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092342">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092357">e</span>&nbsp;<span class="op" id="7092359">:=</span>&nbsp;<span class="builtinfunc" id="7092362">new</span><span class="op" id="7092365">(</span><span class="ident" id="7092366">Rat</span><span class="op" id="7092369">)</span><span class="op" id="7092370">.</span><span class="ident" id="7092371">Set</span><span class="op" id="7092374">(</span><span class="ident" id="7092375">x</span><span class="op" id="7092376">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092380">if</span>&nbsp;<span class="ident" id="7092383">e</span><span class="op" id="7092384">.</span><span class="ident" id="7092385">Cmp</span><span class="op" id="7092388">(</span><span class="ident" id="7092389">zero</span><span class="op" id="7092393">)</span>&nbsp;<span class="op" id="7092395">&lt;</span>&nbsp;<span class="num" id="7092397">0</span>&nbsp;<span class="op" id="7092399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092404">e</span><span class="op" id="7092405">.</span><span class="ident" id="7092406">Sub</span><span class="op" id="7092409">(</span><span class="ident" id="7092410">zero</span><span class="op" id="7092414">,</span>&nbsp;<span class="ident" id="7092416">e</span><span class="op" id="7092417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092425">z</span>&nbsp;<span class="op" id="7092427">:=</span>&nbsp;<span class="builtinfunc" id="7092430">new</span><span class="op" id="7092433">(</span><span class="ident" id="7092434">Rat</span><span class="op" id="7092437">)</span><span class="op" id="7092438">.</span><span class="ident" id="7092439">Abs</span><span class="op" id="7092442">(</span><span class="ident" id="7092443">x</span><span class="op" id="7092444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092448">if</span>&nbsp;<span class="ident" id="7092451">z</span><span class="op" id="7092452">.</span><span class="ident" id="7092453">Cmp</span><span class="op" id="7092456">(</span><span class="ident" id="7092457">e</span><span class="op" id="7092458">)</span>&nbsp;<span class="op" id="7092460">!=</span>&nbsp;<span class="num" id="7092463">0</span>&nbsp;<span class="op" id="7092465">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092470">t</span><span class="op" id="7092471">.</span><span class="ident" id="7092472">Errorf</span><span class="op" id="7092478">(</span><span class="string" id="7092479">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7092506">,</span>&nbsp;<span class="ident" id="7092508">x</span><span class="op" id="7092509">,</span>&nbsp;<span class="ident" id="7092511">z</span><span class="op" id="7092512">,</span>&nbsp;<span class="ident" id="7092514">e</span><span class="op" id="7092515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092522">}</span><br>
<span class="lineno"></span><span class="op" id="7092524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7092527">func</span>&nbsp;<span class="ident" id="7092532">TestRatNeg</span><span class="op" id="7092542">(</span><span class="ident" id="7092543">t</span>&nbsp;<span class="op" id="7092545">*</span><span class="ident" id="7092546">testing</span><span class="op" id="7092553">.</span><span class="ident" id="7092554">T</span><span class="op" id="7092555">)</span>&nbsp;<span class="op" id="7092557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092560">zero</span>&nbsp;<span class="op" id="7092565">:=</span>&nbsp;<span class="builtinfunc" id="7092568">new</span><span class="op" id="7092571">(</span><span class="ident" id="7092572">Rat</span><span class="op" id="7092575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092578">for</span>&nbsp;<span class="ident" id="7092582">_</span><span class="op" id="7092583">,</span>&nbsp;<span class="ident" id="7092585">a</span>&nbsp;<span class="op" id="7092587">:=</span>&nbsp;<span class="keyword" id="7092590">range</span>&nbsp;<span class="ident" id="7092596">setStringTests</span>&nbsp;<span class="op" id="7092611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092615">x</span><span class="op" id="7092616">,</span>&nbsp;<span class="ident" id="7092618">ok</span>&nbsp;<span class="op" id="7092621">:=</span>&nbsp;<span class="builtinfunc" id="7092624">new</span><span class="op" id="7092627">(</span><span class="ident" id="7092628">Rat</span><span class="op" id="7092631">)</span><span class="op" id="7092632">.</span><span class="ident" id="7092633">SetString</span><span class="op" id="7092642">(</span><span class="ident" id="7092643">a</span><span class="op" id="7092644">.</span><span class="ident" id="7092645">in</span><span class="op" id="7092647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092651">if</span>&nbsp;<span class="op" id="7092654">!</span><span class="ident" id="7092655">ok</span>&nbsp;<span class="op" id="7092658">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092663">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092678">e</span>&nbsp;<span class="op" id="7092680">:=</span>&nbsp;<span class="builtinfunc" id="7092683">new</span><span class="op" id="7092686">(</span><span class="ident" id="7092687">Rat</span><span class="op" id="7092690">)</span><span class="op" id="7092691">.</span><span class="ident" id="7092692">Sub</span><span class="op" id="7092695">(</span><span class="ident" id="7092696">zero</span><span class="op" id="7092700">,</span>&nbsp;<span class="ident" id="7092702">x</span><span class="op" id="7092703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092707">z</span>&nbsp;<span class="op" id="7092709">:=</span>&nbsp;<span class="builtinfunc" id="7092712">new</span><span class="op" id="7092715">(</span><span class="ident" id="7092716">Rat</span><span class="op" id="7092719">)</span><span class="op" id="7092720">.</span><span class="ident" id="7092721">Neg</span><span class="op" id="7092724">(</span><span class="ident" id="7092725">x</span><span class="op" id="7092726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092730">if</span>&nbsp;<span class="ident" id="7092733">z</span><span class="op" id="7092734">.</span><span class="ident" id="7092735">Cmp</span><span class="op" id="7092738">(</span><span class="ident" id="7092739">e</span><span class="op" id="7092740">)</span>&nbsp;<span class="op" id="7092742">!=</span>&nbsp;<span class="num" id="7092745">0</span>&nbsp;<span class="op" id="7092747">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092752">t</span><span class="op" id="7092753">.</span><span class="ident" id="7092754">Errorf</span><span class="op" id="7092760">(</span><span class="string" id="7092761">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7092788">,</span>&nbsp;<span class="ident" id="7092790">x</span><span class="op" id="7092791">,</span>&nbsp;<span class="ident" id="7092793">z</span><span class="op" id="7092794">,</span>&nbsp;<span class="ident" id="7092796">e</span><span class="op" id="7092797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092804">}</span><br>
<span class="lineno"></span><span class="op" id="7092806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7092809">func</span>&nbsp;<span class="ident" id="7092814">TestRatInv</span><span class="op" id="7092824">(</span><span class="ident" id="7092825">t</span>&nbsp;<span class="op" id="7092827">*</span><span class="ident" id="7092828">testing</span><span class="op" id="7092835">.</span><span class="ident" id="7092836">T</span><span class="op" id="7092837">)</span>&nbsp;<span class="op" id="7092839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092842">zero</span>&nbsp;<span class="op" id="7092847">:=</span>&nbsp;<span class="builtinfunc" id="7092850">new</span><span class="op" id="7092853">(</span><span class="ident" id="7092854">Rat</span><span class="op" id="7092857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092860">for</span>&nbsp;<span class="ident" id="7092864">_</span><span class="op" id="7092865">,</span>&nbsp;<span class="ident" id="7092867">a</span>&nbsp;<span class="op" id="7092869">:=</span>&nbsp;<span class="keyword" id="7092872">range</span>&nbsp;<span class="ident" id="7092878">setStringTests</span>&nbsp;<span class="op" id="7092893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7092897">x</span><span class="op" id="7092898">,</span>&nbsp;<span class="ident" id="7092900">ok</span>&nbsp;<span class="op" id="7092903">:=</span>&nbsp;<span class="builtinfunc" id="7092906">new</span><span class="op" id="7092909">(</span><span class="ident" id="7092910">Rat</span><span class="op" id="7092913">)</span><span class="op" id="7092914">.</span><span class="ident" id="7092915">SetString</span><span class="op" id="7092924">(</span><span class="ident" id="7092925">a</span><span class="op" id="7092926">.</span><span class="ident" id="7092927">in</span><span class="op" id="7092929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092933">if</span>&nbsp;<span class="op" id="7092936">!</span><span class="ident" id="7092937">ok</span>&nbsp;<span class="op" id="7092940">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092945">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7092956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092960">if</span>&nbsp;<span class="ident" id="7092963">x</span><span class="op" id="7092964">.</span><span class="ident" id="7092965">Cmp</span><span class="op" id="7092968">(</span><span class="ident" id="7092969">zero</span><span class="op" id="7092973">)</span>&nbsp;<span class="op" id="7092975">==</span>&nbsp;<span class="num" id="7092978">0</span>&nbsp;<span class="op" id="7092980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7092985">continue</span>&nbsp;<span class="comment" id="7092994">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093022">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093026">e</span>&nbsp;<span class="op" id="7093028">:=</span>&nbsp;<span class="builtinfunc" id="7093031">new</span><span class="op" id="7093034">(</span><span class="ident" id="7093035">Rat</span><span class="op" id="7093038">)</span><span class="op" id="7093039">.</span><span class="ident" id="7093040">SetFrac</span><span class="op" id="7093047">(</span><span class="ident" id="7093048">x</span><span class="op" id="7093049">.</span><span class="ident" id="7093050">Denom</span><span class="op" id="7093055">(</span><span class="op" id="7093056">)</span><span class="op" id="7093057">,</span>&nbsp;<span class="ident" id="7093059">x</span><span class="op" id="7093060">.</span><span class="ident" id="7093061">Num</span><span class="op" id="7093064">(</span><span class="op" id="7093065">)</span><span class="op" id="7093066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093070">z</span>&nbsp;<span class="op" id="7093072">:=</span>&nbsp;<span class="builtinfunc" id="7093075">new</span><span class="op" id="7093078">(</span><span class="ident" id="7093079">Rat</span><span class="op" id="7093082">)</span><span class="op" id="7093083">.</span><span class="ident" id="7093084">Inv</span><span class="op" id="7093087">(</span><span class="ident" id="7093088">x</span><span class="op" id="7093089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7093093">if</span>&nbsp;<span class="ident" id="7093096">z</span><span class="op" id="7093097">.</span><span class="ident" id="7093098">Cmp</span><span class="op" id="7093101">(</span><span class="ident" id="7093102">e</span><span class="op" id="7093103">)</span>&nbsp;<span class="op" id="7093105">!=</span>&nbsp;<span class="num" id="7093108">0</span>&nbsp;<span class="op" id="7093110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093115">t</span><span class="op" id="7093116">.</span><span class="ident" id="7093117">Errorf</span><span class="op" id="7093123">(</span><span class="string" id="7093124">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7093151">,</span>&nbsp;<span class="ident" id="7093153">x</span><span class="op" id="7093154">,</span>&nbsp;<span class="ident" id="7093156">z</span><span class="op" id="7093157">,</span>&nbsp;<span class="ident" id="7093159">e</span><span class="op" id="7093160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093164">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093167">}</span><br>
<span class="lineno"></span><span class="op" id="7093169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7093172">type</span>&nbsp;<span class="ident" id="7093177">ratBinFun</span>&nbsp;<span class="keyword" id="7093187">func</span><span class="op" id="7093191">(</span><span class="ident" id="7093192">z</span><span class="op" id="7093193">,</span>&nbsp;<span class="ident" id="7093195">x</span><span class="op" id="7093196">,</span>&nbsp;<span class="ident" id="7093198">y</span>&nbsp;<span class="op" id="7093200">*</span><span class="ident" id="7093201">Rat</span><span class="op" id="7093204">)</span>&nbsp;<span class="op" id="7093206">*</span><span class="ident" id="7093207">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7093211">type</span>&nbsp;<span class="ident" id="7093216">ratBinArg</span>&nbsp;<span class="keyword" id="7093226">struct</span>&nbsp;<span class="op" id="7093233">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093236">x</span><span class="op" id="7093237">,</span>&nbsp;<span class="ident" id="7093239">y</span><span class="op" id="7093240">,</span>&nbsp;<span class="ident" id="7093242">z</span>&nbsp;<span class="builtintype" id="7093244">string</span><br>
<span class="lineno"></span><span class="op" id="7093251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7093254">func</span>&nbsp;<span class="ident" id="7093259">testRatBin</span><span class="op" id="7093269">(</span><span class="ident" id="7093270">t</span>&nbsp;<span class="op" id="7093272">*</span><span class="ident" id="7093273">testing</span><span class="op" id="7093280">.</span><span class="ident" id="7093281">T</span><span class="op" id="7093282">,</span>&nbsp;<span class="ident" id="7093284">i</span>&nbsp;<span class="builtintype" id="7093286">int</span><span class="op" id="7093289">,</span>&nbsp;<span class="ident" id="7093291">name</span>&nbsp;<span class="builtintype" id="7093296">string</span><span class="op" id="7093302">,</span>&nbsp;<span class="ident" id="7093304">f</span>&nbsp;<span class="ident" id="7093306">ratBinFun</span><span class="op" id="7093315">,</span>&nbsp;<span class="ident" id="7093317">a</span>&nbsp;<span class="ident" id="7093319">ratBinArg</span><span class="op" id="7093328">)</span>&nbsp;<span class="op" id="7093330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093333">x</span><span class="op" id="7093334">,</span>&nbsp;<span class="ident" id="7093336">_</span>&nbsp;<span class="op" id="7093338">:=</span>&nbsp;<span class="builtinfunc" id="7093341">new</span><span class="op" id="7093344">(</span><span class="ident" id="7093345">Rat</span><span class="op" id="7093348">)</span><span class="op" id="7093349">.</span><span class="ident" id="7093350">SetString</span><span class="op" id="7093359">(</span><span class="ident" id="7093360">a</span><span class="op" id="7093361">.</span><span class="ident" id="7093362">x</span><span class="op" id="7093363">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093366">y</span><span class="op" id="7093367">,</span>&nbsp;<span class="ident" id="7093369">_</span>&nbsp;<span class="op" id="7093371">:=</span>&nbsp;<span class="builtinfunc" id="7093374">new</span><span class="op" id="7093377">(</span><span class="ident" id="7093378">Rat</span><span class="op" id="7093381">)</span><span class="op" id="7093382">.</span><span class="ident" id="7093383">SetString</span><span class="op" id="7093392">(</span><span class="ident" id="7093393">a</span><span class="op" id="7093394">.</span><span class="ident" id="7093395">y</span><span class="op" id="7093396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093399">z</span><span class="op" id="7093400">,</span>&nbsp;<span class="ident" id="7093402">_</span>&nbsp;<span class="op" id="7093404">:=</span>&nbsp;<span class="builtinfunc" id="7093407">new</span><span class="op" id="7093410">(</span><span class="ident" id="7093411">Rat</span><span class="op" id="7093414">)</span><span class="op" id="7093415">.</span><span class="ident" id="7093416">SetString</span><span class="op" id="7093425">(</span><span class="ident" id="7093426">a</span><span class="op" id="7093427">.</span><span class="ident" id="7093428">z</span><span class="op" id="7093429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093432">out</span>&nbsp;<span class="op" id="7093436">:=</span>&nbsp;<span class="ident" id="7093439">f</span><span class="op" id="7093440">(</span><span class="builtinfunc" id="7093441">new</span><span class="op" id="7093444">(</span><span class="ident" id="7093445">Rat</span><span class="op" id="7093448">)</span><span class="op" id="7093449">,</span>&nbsp;<span class="ident" id="7093451">x</span><span class="op" id="7093452">,</span>&nbsp;<span class="ident" id="7093454">y</span><span class="op" id="7093455">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7093459">if</span>&nbsp;<span class="ident" id="7093462">out</span><span class="op" id="7093465">.</span><span class="ident" id="7093466">Cmp</span><span class="op" id="7093469">(</span><span class="ident" id="7093470">z</span><span class="op" id="7093471">)</span>&nbsp;<span class="op" id="7093473">!=</span>&nbsp;<span class="num" id="7093476">0</span>&nbsp;<span class="op" id="7093478">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093482">t</span><span class="op" id="7093483">.</span><span class="ident" id="7093484">Errorf</span><span class="op" id="7093490">(</span><span class="string" id="7093491">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7093514">,</span>&nbsp;<span class="ident" id="7093516">name</span><span class="op" id="7093520">,</span>&nbsp;<span class="ident" id="7093522">i</span><span class="op" id="7093523">,</span>&nbsp;<span class="ident" id="7093525">out</span><span class="op" id="7093528">,</span>&nbsp;<span class="ident" id="7093530">z</span><span class="op" id="7093531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093534">}</span><br>
<span class="lineno"></span><span class="op" id="7093536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7093539">var</span>&nbsp;<span class="ident" id="7093543">ratBinTests</span>&nbsp;<span class="op" id="7093555">=</span>&nbsp;<span class="op" id="7093557">[</span><span class="op" id="7093558">]</span><span class="keyword" id="7093559">struct</span>&nbsp;<span class="op" id="7093566">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093569">x</span><span class="op" id="7093570">,</span>&nbsp;<span class="ident" id="7093572">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7093579">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7093587">sum</span><span class="op" id="7093590">,</span>&nbsp;<span class="ident" id="7093592">prod</span>&nbsp;<span class="builtintype" id="7093597">string</span><br>
<span class="lineno"></span><span class="op" id="7093604">}</span><span class="op" id="7093605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093608">{</span><span class="string" id="7093609">&#34;0&#34;</span><span class="op" id="7093612">,</span>&nbsp;<span class="string" id="7093614">&#34;0&#34;</span><span class="op" id="7093617">,</span>&nbsp;<span class="string" id="7093619">&#34;0&#34;</span><span class="op" id="7093622">,</span>&nbsp;<span class="string" id="7093624">&#34;0&#34;</span><span class="op" id="7093627">}</span><span class="op" id="7093628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093631">{</span><span class="string" id="7093632">&#34;0&#34;</span><span class="op" id="7093635">,</span>&nbsp;<span class="string" id="7093637">&#34;1&#34;</span><span class="op" id="7093640">,</span>&nbsp;<span class="string" id="7093642">&#34;1&#34;</span><span class="op" id="7093645">,</span>&nbsp;<span class="string" id="7093647">&#34;0&#34;</span><span class="op" id="7093650">}</span><span class="op" id="7093651">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093654">{</span><span class="string" id="7093655">&#34;-1&#34;</span><span class="op" id="7093659">,</span>&nbsp;<span class="string" id="7093661">&#34;0&#34;</span><span class="op" id="7093664">,</span>&nbsp;<span class="string" id="7093666">&#34;-1&#34;</span><span class="op" id="7093670">,</span>&nbsp;<span class="string" id="7093672">&#34;0&#34;</span><span class="op" id="7093675">}</span><span class="op" id="7093676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093679">{</span><span class="string" id="7093680">&#34;-1&#34;</span><span class="op" id="7093684">,</span>&nbsp;<span class="string" id="7093686">&#34;1&#34;</span><span class="op" id="7093689">,</span>&nbsp;<span class="string" id="7093691">&#34;0&#34;</span><span class="op" id="7093694">,</span>&nbsp;<span class="string" id="7093696">&#34;-1&#34;</span><span class="op" id="7093700">}</span><span class="op" id="7093701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093704">{</span><span class="string" id="7093705">&#34;1&#34;</span><span class="op" id="7093708">,</span>&nbsp;<span class="string" id="7093710">&#34;1&#34;</span><span class="op" id="7093713">,</span>&nbsp;<span class="string" id="7093715">&#34;2&#34;</span><span class="op" id="7093718">,</span>&nbsp;<span class="string" id="7093720">&#34;1&#34;</span><span class="op" id="7093723">}</span><span class="op" id="7093724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093727">{</span><span class="string" id="7093728">&#34;1/2&#34;</span><span class="op" id="7093733">,</span>&nbsp;<span class="string" id="7093735">&#34;1/2&#34;</span><span class="op" id="7093740">,</span>&nbsp;<span class="string" id="7093742">&#34;1&#34;</span><span class="op" id="7093745">,</span>&nbsp;<span class="string" id="7093747">&#34;1/4&#34;</span><span class="op" id="7093752">}</span><span class="op" id="7093753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093756">{</span><span class="string" id="7093757">&#34;1/4&#34;</span><span class="op" id="7093762">,</span>&nbsp;<span class="string" id="7093764">&#34;1/3&#34;</span><span class="op" id="7093769">,</span>&nbsp;<span class="string" id="7093771">&#34;7/12&#34;</span><span class="op" id="7093777">,</span>&nbsp;<span class="string" id="7093779">&#34;1/12&#34;</span><span class="op" id="7093785">}</span><span class="op" id="7093786">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093789">{</span><span class="string" id="7093790">&#34;2/5&#34;</span><span class="op" id="7093795">,</span>&nbsp;<span class="string" id="7093797">&#34;-14/3&#34;</span><span class="op" id="7093804">,</span>&nbsp;<span class="string" id="7093806">&#34;-64/15&#34;</span><span class="op" id="7093814">,</span>&nbsp;<span class="string" id="7093816">&#34;-28/15&#34;</span><span class="op" id="7093824">}</span><span class="op" id="7093825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7093828">{</span><span class="string" id="7093829">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7093856">,</span>&nbsp;<span class="string" id="7093858">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7093886">,</span>&nbsp;<span class="string" id="7093888">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7093954">,</span>&nbsp;<span class="string" id="7093956">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7094006">}</span><span class="op" id="7094007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094010">{</span><span class="string" id="7094011">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7094036">,</span>&nbsp;<span class="string" id="7094038">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7094063">,</span>&nbsp;<span class="string" id="7094065">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7094091">,</span>&nbsp;<span class="string" id="7094093">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7094136">}</span><span class="op" id="7094137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094140">{</span><span class="string" id="7094141">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7094203">,</span>&nbsp;<span class="string" id="7094205">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7094231">,</span>&nbsp;<span class="string" id="7094233">&#34;-27/133467566250814981&#34;</span><span class="op" id="7094257">,</span>&nbsp;<span class="string" id="7094259">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7094342">}</span><span class="op" id="7094343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094346">{</span><span class="string" id="7094347">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7094406">,</span>&nbsp;<span class="string" id="7094408">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7094441">,</span>&nbsp;<span class="string" id="7094443">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7094477">,</span>&nbsp;<span class="string" id="7094479">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7094566">}</span><span class="op" id="7094567">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094570">{</span><span class="string" id="7094571">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7094596">,</span>&nbsp;<span class="string" id="7094598">&#34;5/2848423294177090248&#34;</span><span class="op" id="7094621">,</span>&nbsp;<span class="string" id="7094623">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7094683">,</span>&nbsp;<span class="string" id="7094685">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7094728">}</span><span class="op" id="7094729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094732">{</span><span class="string" id="7094733">&#34;26946729/330400702820&#34;</span><span class="op" id="7094756">,</span>&nbsp;<span class="string" id="7094758">&#34;41563965/225583428284&#34;</span><span class="op" id="7094781">,</span>&nbsp;<span class="string" id="7094783">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7094827">,</span>&nbsp;<span class="string" id="7094829">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7094870">}</span><span class="op" id="7094871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7094874">{</span><span class="string" id="7094875">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7094899">,</span>&nbsp;<span class="string" id="7094901">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7094945">,</span>&nbsp;<span class="string" id="7094947">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7095011">,</span>&nbsp;<span class="string" id="7095013">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7095076">}</span><span class="op" id="7095077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7095080">{</span><span class="string" id="7095081">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7095121">,</span>&nbsp;<span class="string" id="7095123">&#34;29/712593081308&#34;</span><span class="op" id="7095140">,</span>&nbsp;<span class="string" id="7095142">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7095205">,</span>&nbsp;<span class="string" id="7095207">&#34;808/45524274987585732633&#34;</span><span class="op" id="7095233">}</span><span class="op" id="7095234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7095237">{</span><span class="string" id="7095238">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7095279">,</span>&nbsp;<span class="string" id="7095281">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7095307">,</span>&nbsp;<span class="string" id="7095309">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7095380">,</span>&nbsp;<span class="string" id="7095382">&#34;8967230/3296219033&#34;</span><span class="op" id="7095402">}</span><span class="op" id="7095403">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7095406">{</span><span class="string" id="7095407">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7095454">,</span>&nbsp;<span class="string" id="7095456">&#34;9381566963714/9633539&#34;</span><span class="op" id="7095479">,</span>&nbsp;<span class="string" id="7095481">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7095550">,</span>&nbsp;<span class="string" id="7095552">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7095579">}</span><span class="op" id="7095580">,</span><br>
<span class="lineno"></span><span class="op" id="7095582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7095585">func</span>&nbsp;<span class="ident" id="7095590">TestRatBin</span><span class="op" id="7095600">(</span><span class="ident" id="7095601">t</span>&nbsp;<span class="op" id="7095603">*</span><span class="ident" id="7095604">testing</span><span class="op" id="7095611">.</span><span class="ident" id="7095612">T</span><span class="op" id="7095613">)</span>&nbsp;<span class="op" id="7095615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7095618">for</span>&nbsp;<span class="ident" id="7095622">i</span><span class="op" id="7095623">,</span>&nbsp;<span class="ident" id="7095625">test</span>&nbsp;<span class="op" id="7095630">:=</span>&nbsp;<span class="keyword" id="7095633">range</span>&nbsp;<span class="ident" id="7095639">ratBinTests</span>&nbsp;<span class="op" id="7095651">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095655">arg</span>&nbsp;<span class="op" id="7095659">:=</span>&nbsp;<span class="ident" id="7095662">ratBinArg</span><span class="op" id="7095671">{</span><span class="ident" id="7095672">test</span><span class="op" id="7095676">.</span><span class="ident" id="7095677">x</span><span class="op" id="7095678">,</span>&nbsp;<span class="ident" id="7095680">test</span><span class="op" id="7095684">.</span><span class="ident" id="7095685">y</span><span class="op" id="7095686">,</span>&nbsp;<span class="ident" id="7095688">test</span><span class="op" id="7095692">.</span><span class="ident" id="7095693">sum</span><span class="op" id="7095696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095700">testRatBin</span><span class="op" id="7095710">(</span><span class="ident" id="7095711">t</span><span class="op" id="7095712">,</span>&nbsp;<span class="ident" id="7095714">i</span><span class="op" id="7095715">,</span>&nbsp;<span class="string" id="7095717">&#34;Add&#34;</span><span class="op" id="7095722">,</span>&nbsp;<span class="op" id="7095724">(</span><span class="op" id="7095725">*</span><span class="ident" id="7095726">Rat</span><span class="op" id="7095729">)</span><span class="op" id="7095730">.</span><span class="ident" id="7095731">Add</span><span class="op" id="7095734">,</span>&nbsp;<span class="ident" id="7095736">arg</span><span class="op" id="7095739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095744">arg</span>&nbsp;<span class="op" id="7095748">=</span>&nbsp;<span class="ident" id="7095750">ratBinArg</span><span class="op" id="7095759">{</span><span class="ident" id="7095760">test</span><span class="op" id="7095764">.</span><span class="ident" id="7095765">y</span><span class="op" id="7095766">,</span>&nbsp;<span class="ident" id="7095768">test</span><span class="op" id="7095772">.</span><span class="ident" id="7095773">x</span><span class="op" id="7095774">,</span>&nbsp;<span class="ident" id="7095776">test</span><span class="op" id="7095780">.</span><span class="ident" id="7095781">sum</span><span class="op" id="7095784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095788">testRatBin</span><span class="op" id="7095798">(</span><span class="ident" id="7095799">t</span><span class="op" id="7095800">,</span>&nbsp;<span class="ident" id="7095802">i</span><span class="op" id="7095803">,</span>&nbsp;<span class="string" id="7095805">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7095820">,</span>&nbsp;<span class="op" id="7095822">(</span><span class="op" id="7095823">*</span><span class="ident" id="7095824">Rat</span><span class="op" id="7095827">)</span><span class="op" id="7095828">.</span><span class="ident" id="7095829">Add</span><span class="op" id="7095832">,</span>&nbsp;<span class="ident" id="7095834">arg</span><span class="op" id="7095837">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095842">arg</span>&nbsp;<span class="op" id="7095846">=</span>&nbsp;<span class="ident" id="7095848">ratBinArg</span><span class="op" id="7095857">{</span><span class="ident" id="7095858">test</span><span class="op" id="7095862">.</span><span class="ident" id="7095863">sum</span><span class="op" id="7095866">,</span>&nbsp;<span class="ident" id="7095868">test</span><span class="op" id="7095872">.</span><span class="ident" id="7095873">x</span><span class="op" id="7095874">,</span>&nbsp;<span class="ident" id="7095876">test</span><span class="op" id="7095880">.</span><span class="ident" id="7095881">y</span><span class="op" id="7095882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095886">testRatBin</span><span class="op" id="7095896">(</span><span class="ident" id="7095897">t</span><span class="op" id="7095898">,</span>&nbsp;<span class="ident" id="7095900">i</span><span class="op" id="7095901">,</span>&nbsp;<span class="string" id="7095903">&#34;Sub&#34;</span><span class="op" id="7095908">,</span>&nbsp;<span class="op" id="7095910">(</span><span class="op" id="7095911">*</span><span class="ident" id="7095912">Rat</span><span class="op" id="7095915">)</span><span class="op" id="7095916">.</span><span class="ident" id="7095917">Sub</span><span class="op" id="7095920">,</span>&nbsp;<span class="ident" id="7095922">arg</span><span class="op" id="7095925">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095930">arg</span>&nbsp;<span class="op" id="7095934">=</span>&nbsp;<span class="ident" id="7095936">ratBinArg</span><span class="op" id="7095945">{</span><span class="ident" id="7095946">test</span><span class="op" id="7095950">.</span><span class="ident" id="7095951">sum</span><span class="op" id="7095954">,</span>&nbsp;<span class="ident" id="7095956">test</span><span class="op" id="7095960">.</span><span class="ident" id="7095961">y</span><span class="op" id="7095962">,</span>&nbsp;<span class="ident" id="7095964">test</span><span class="op" id="7095968">.</span><span class="ident" id="7095969">x</span><span class="op" id="7095970">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7095974">testRatBin</span><span class="op" id="7095984">(</span><span class="ident" id="7095985">t</span><span class="op" id="7095986">,</span>&nbsp;<span class="ident" id="7095988">i</span><span class="op" id="7095989">,</span>&nbsp;<span class="string" id="7095991">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7096006">,</span>&nbsp;<span class="op" id="7096008">(</span><span class="op" id="7096009">*</span><span class="ident" id="7096010">Rat</span><span class="op" id="7096013">)</span><span class="op" id="7096014">.</span><span class="ident" id="7096015">Sub</span><span class="op" id="7096018">,</span>&nbsp;<span class="ident" id="7096020">arg</span><span class="op" id="7096023">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096028">arg</span>&nbsp;<span class="op" id="7096032">=</span>&nbsp;<span class="ident" id="7096034">ratBinArg</span><span class="op" id="7096043">{</span><span class="ident" id="7096044">test</span><span class="op" id="7096048">.</span><span class="ident" id="7096049">x</span><span class="op" id="7096050">,</span>&nbsp;<span class="ident" id="7096052">test</span><span class="op" id="7096056">.</span><span class="ident" id="7096057">y</span><span class="op" id="7096058">,</span>&nbsp;<span class="ident" id="7096060">test</span><span class="op" id="7096064">.</span><span class="ident" id="7096065">prod</span><span class="op" id="7096069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096073">testRatBin</span><span class="op" id="7096083">(</span><span class="ident" id="7096084">t</span><span class="op" id="7096085">,</span>&nbsp;<span class="ident" id="7096087">i</span><span class="op" id="7096088">,</span>&nbsp;<span class="string" id="7096090">&#34;Mul&#34;</span><span class="op" id="7096095">,</span>&nbsp;<span class="op" id="7096097">(</span><span class="op" id="7096098">*</span><span class="ident" id="7096099">Rat</span><span class="op" id="7096102">)</span><span class="op" id="7096103">.</span><span class="ident" id="7096104">Mul</span><span class="op" id="7096107">,</span>&nbsp;<span class="ident" id="7096109">arg</span><span class="op" id="7096112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096117">arg</span>&nbsp;<span class="op" id="7096121">=</span>&nbsp;<span class="ident" id="7096123">ratBinArg</span><span class="op" id="7096132">{</span><span class="ident" id="7096133">test</span><span class="op" id="7096137">.</span><span class="ident" id="7096138">y</span><span class="op" id="7096139">,</span>&nbsp;<span class="ident" id="7096141">test</span><span class="op" id="7096145">.</span><span class="ident" id="7096146">x</span><span class="op" id="7096147">,</span>&nbsp;<span class="ident" id="7096149">test</span><span class="op" id="7096153">.</span><span class="ident" id="7096154">prod</span><span class="op" id="7096158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096162">testRatBin</span><span class="op" id="7096172">(</span><span class="ident" id="7096173">t</span><span class="op" id="7096174">,</span>&nbsp;<span class="ident" id="7096176">i</span><span class="op" id="7096177">,</span>&nbsp;<span class="string" id="7096179">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7096194">,</span>&nbsp;<span class="op" id="7096196">(</span><span class="op" id="7096197">*</span><span class="ident" id="7096198">Rat</span><span class="op" id="7096201">)</span><span class="op" id="7096202">.</span><span class="ident" id="7096203">Mul</span><span class="op" id="7096206">,</span>&nbsp;<span class="ident" id="7096208">arg</span><span class="op" id="7096211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7096216">if</span>&nbsp;<span class="ident" id="7096219">test</span><span class="op" id="7096223">.</span><span class="ident" id="7096224">x</span>&nbsp;<span class="op" id="7096226">!=</span>&nbsp;<span class="string" id="7096229">&#34;0&#34;</span>&nbsp;<span class="op" id="7096233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096238">arg</span>&nbsp;<span class="op" id="7096242">=</span>&nbsp;<span class="ident" id="7096244">ratBinArg</span><span class="op" id="7096253">{</span><span class="ident" id="7096254">test</span><span class="op" id="7096258">.</span><span class="ident" id="7096259">prod</span><span class="op" id="7096263">,</span>&nbsp;<span class="ident" id="7096265">test</span><span class="op" id="7096269">.</span><span class="ident" id="7096270">x</span><span class="op" id="7096271">,</span>&nbsp;<span class="ident" id="7096273">test</span><span class="op" id="7096277">.</span><span class="ident" id="7096278">y</span><span class="op" id="7096279">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096284">testRatBin</span><span class="op" id="7096294">(</span><span class="ident" id="7096295">t</span><span class="op" id="7096296">,</span>&nbsp;<span class="ident" id="7096298">i</span><span class="op" id="7096299">,</span>&nbsp;<span class="string" id="7096301">&#34;Quo&#34;</span><span class="op" id="7096306">,</span>&nbsp;<span class="op" id="7096308">(</span><span class="op" id="7096309">*</span><span class="ident" id="7096310">Rat</span><span class="op" id="7096313">)</span><span class="op" id="7096314">.</span><span class="ident" id="7096315">Quo</span><span class="op" id="7096318">,</span>&nbsp;<span class="ident" id="7096320">arg</span><span class="op" id="7096323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7096332">if</span>&nbsp;<span class="ident" id="7096335">test</span><span class="op" id="7096339">.</span><span class="ident" id="7096340">y</span>&nbsp;<span class="op" id="7096342">!=</span>&nbsp;<span class="string" id="7096345">&#34;0&#34;</span>&nbsp;<span class="op" id="7096349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096354">arg</span>&nbsp;<span class="op" id="7096358">=</span>&nbsp;<span class="ident" id="7096360">ratBinArg</span><span class="op" id="7096369">{</span><span class="ident" id="7096370">test</span><span class="op" id="7096374">.</span><span class="ident" id="7096375">prod</span><span class="op" id="7096379">,</span>&nbsp;<span class="ident" id="7096381">test</span><span class="op" id="7096385">.</span><span class="ident" id="7096386">y</span><span class="op" id="7096387">,</span>&nbsp;<span class="ident" id="7096389">test</span><span class="op" id="7096393">.</span><span class="ident" id="7096394">x</span><span class="op" id="7096395">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096400">testRatBin</span><span class="op" id="7096410">(</span><span class="ident" id="7096411">t</span><span class="op" id="7096412">,</span>&nbsp;<span class="ident" id="7096414">i</span><span class="op" id="7096415">,</span>&nbsp;<span class="string" id="7096417">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7096432">,</span>&nbsp;<span class="op" id="7096434">(</span><span class="op" id="7096435">*</span><span class="ident" id="7096436">Rat</span><span class="op" id="7096439">)</span><span class="op" id="7096440">.</span><span class="ident" id="7096441">Quo</span><span class="op" id="7096444">,</span>&nbsp;<span class="ident" id="7096446">arg</span><span class="op" id="7096449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096456">}</span><br>
<span class="lineno"></span><span class="op" id="7096458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7096461">func</span>&nbsp;<span class="ident" id="7096466">TestIssue820</span><span class="op" id="7096478">(</span><span class="ident" id="7096479">t</span>&nbsp;<span class="op" id="7096481">*</span><span class="ident" id="7096482">testing</span><span class="op" id="7096489">.</span><span class="ident" id="7096490">T</span><span class="op" id="7096491">)</span>&nbsp;<span class="op" id="7096493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096496">x</span>&nbsp;<span class="op" id="7096498">:=</span>&nbsp;<span class="ident" id="7096501">NewRat</span><span class="op" id="7096507">(</span><span class="num" id="7096508">3</span><span class="op" id="7096509">,</span>&nbsp;<span class="num" id="7096511">1</span><span class="op" id="7096512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096515">y</span>&nbsp;<span class="op" id="7096517">:=</span>&nbsp;<span class="ident" id="7096520">NewRat</span><span class="op" id="7096526">(</span><span class="num" id="7096527">2</span><span class="op" id="7096528">,</span>&nbsp;<span class="num" id="7096530">1</span><span class="op" id="7096531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096534">z</span>&nbsp;<span class="op" id="7096536">:=</span>&nbsp;<span class="ident" id="7096539">y</span><span class="op" id="7096540">.</span><span class="ident" id="7096541">Quo</span><span class="op" id="7096544">(</span><span class="ident" id="7096545">x</span><span class="op" id="7096546">,</span>&nbsp;<span class="ident" id="7096548">y</span><span class="op" id="7096549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096552">q</span>&nbsp;<span class="op" id="7096554">:=</span>&nbsp;<span class="ident" id="7096557">NewRat</span><span class="op" id="7096563">(</span><span class="num" id="7096564">3</span><span class="op" id="7096565">,</span>&nbsp;<span class="num" id="7096567">2</span><span class="op" id="7096568">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7096571">if</span>&nbsp;<span class="ident" id="7096574">z</span><span class="op" id="7096575">.</span><span class="ident" id="7096576">Cmp</span><span class="op" id="7096579">(</span><span class="ident" id="7096580">q</span><span class="op" id="7096581">)</span>&nbsp;<span class="op" id="7096583">!=</span>&nbsp;<span class="num" id="7096586">0</span>&nbsp;<span class="op" id="7096588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096592">t</span><span class="op" id="7096593">.</span><span class="ident" id="7096594">Errorf</span><span class="op" id="7096600">(</span><span class="string" id="7096601">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7096617">,</span>&nbsp;<span class="ident" id="7096619">z</span><span class="op" id="7096620">,</span>&nbsp;<span class="ident" id="7096622">q</span><span class="op" id="7096623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096630">y</span>&nbsp;<span class="op" id="7096632">=</span>&nbsp;<span class="ident" id="7096634">NewRat</span><span class="op" id="7096640">(</span><span class="num" id="7096641">3</span><span class="op" id="7096642">,</span>&nbsp;<span class="num" id="7096644">1</span><span class="op" id="7096645">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096648">x</span>&nbsp;<span class="op" id="7096650">=</span>&nbsp;<span class="ident" id="7096652">NewRat</span><span class="op" id="7096658">(</span><span class="num" id="7096659">2</span><span class="op" id="7096660">,</span>&nbsp;<span class="num" id="7096662">1</span><span class="op" id="7096663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096666">z</span>&nbsp;<span class="op" id="7096668">=</span>&nbsp;<span class="ident" id="7096670">y</span><span class="op" id="7096671">.</span><span class="ident" id="7096672">Quo</span><span class="op" id="7096675">(</span><span class="ident" id="7096676">x</span><span class="op" id="7096677">,</span>&nbsp;<span class="ident" id="7096679">y</span><span class="op" id="7096680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096683">q</span>&nbsp;<span class="op" id="7096685">=</span>&nbsp;<span class="ident" id="7096687">NewRat</span><span class="op" id="7096693">(</span><span class="num" id="7096694">2</span><span class="op" id="7096695">,</span>&nbsp;<span class="num" id="7096697">3</span><span class="op" id="7096698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7096701">if</span>&nbsp;<span class="ident" id="7096704">z</span><span class="op" id="7096705">.</span><span class="ident" id="7096706">Cmp</span><span class="op" id="7096709">(</span><span class="ident" id="7096710">q</span><span class="op" id="7096711">)</span>&nbsp;<span class="op" id="7096713">!=</span>&nbsp;<span class="num" id="7096716">0</span>&nbsp;<span class="op" id="7096718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096722">t</span><span class="op" id="7096723">.</span><span class="ident" id="7096724">Errorf</span><span class="op" id="7096730">(</span><span class="string" id="7096731">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7096747">,</span>&nbsp;<span class="ident" id="7096749">z</span><span class="op" id="7096750">,</span>&nbsp;<span class="ident" id="7096752">q</span><span class="op" id="7096753">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096760">x</span>&nbsp;<span class="op" id="7096762">=</span>&nbsp;<span class="ident" id="7096764">NewRat</span><span class="op" id="7096770">(</span><span class="num" id="7096771">3</span><span class="op" id="7096772">,</span>&nbsp;<span class="num" id="7096774">1</span><span class="op" id="7096775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096778">z</span>&nbsp;<span class="op" id="7096780">=</span>&nbsp;<span class="ident" id="7096782">x</span><span class="op" id="7096783">.</span><span class="ident" id="7096784">Quo</span><span class="op" id="7096787">(</span><span class="ident" id="7096788">x</span><span class="op" id="7096789">,</span>&nbsp;<span class="ident" id="7096791">x</span><span class="op" id="7096792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096795">q</span>&nbsp;<span class="op" id="7096797">=</span>&nbsp;<span class="ident" id="7096799">NewRat</span><span class="op" id="7096805">(</span><span class="num" id="7096806">3</span><span class="op" id="7096807">,</span>&nbsp;<span class="num" id="7096809">3</span><span class="op" id="7096810">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7096813">if</span>&nbsp;<span class="ident" id="7096816">z</span><span class="op" id="7096817">.</span><span class="ident" id="7096818">Cmp</span><span class="op" id="7096821">(</span><span class="ident" id="7096822">q</span><span class="op" id="7096823">)</span>&nbsp;<span class="op" id="7096825">!=</span>&nbsp;<span class="num" id="7096828">0</span>&nbsp;<span class="op" id="7096830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096834">t</span><span class="op" id="7096835">.</span><span class="ident" id="7096836">Errorf</span><span class="op" id="7096842">(</span><span class="string" id="7096843">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7096859">,</span>&nbsp;<span class="ident" id="7096861">z</span><span class="op" id="7096862">,</span>&nbsp;<span class="ident" id="7096864">q</span><span class="op" id="7096865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096868">}</span><br>
<span class="lineno"></span><span class="op" id="7096870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7096873">var</span>&nbsp;<span class="ident" id="7096877">setFrac64Tests</span>&nbsp;<span class="op" id="7096892">=</span>&nbsp;<span class="op" id="7096894">[</span><span class="op" id="7096895">]</span><span class="keyword" id="7096896">struct</span>&nbsp;<span class="op" id="7096903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096906">a</span><span class="op" id="7096907">,</span>&nbsp;<span class="ident" id="7096909">b</span>&nbsp;<span class="ident" id="7096911">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7096918">out</span>&nbsp;&nbsp;<span class="builtintype" id="7096923">string</span><br>
<span class="lineno"></span><span class="op" id="7096930">}</span><span class="op" id="7096931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096934">{</span><span class="num" id="7096935">0</span><span class="op" id="7096936">,</span>&nbsp;<span class="num" id="7096938">1</span><span class="op" id="7096939">,</span>&nbsp;<span class="string" id="7096941">&#34;0&#34;</span><span class="op" id="7096944">}</span><span class="op" id="7096945">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096948">{</span><span class="num" id="7096949">0</span><span class="op" id="7096950">,</span>&nbsp;<span class="op" id="7096952">-</span><span class="num" id="7096953">1</span><span class="op" id="7096954">,</span>&nbsp;<span class="string" id="7096956">&#34;0&#34;</span><span class="op" id="7096959">}</span><span class="op" id="7096960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096963">{</span><span class="num" id="7096964">1</span><span class="op" id="7096965">,</span>&nbsp;<span class="num" id="7096967">1</span><span class="op" id="7096968">,</span>&nbsp;<span class="string" id="7096970">&#34;1&#34;</span><span class="op" id="7096973">}</span><span class="op" id="7096974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096977">{</span><span class="op" id="7096978">-</span><span class="num" id="7096979">1</span><span class="op" id="7096980">,</span>&nbsp;<span class="num" id="7096982">1</span><span class="op" id="7096983">,</span>&nbsp;<span class="string" id="7096985">&#34;-1&#34;</span><span class="op" id="7096989">}</span><span class="op" id="7096990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7096993">{</span><span class="num" id="7096994">1</span><span class="op" id="7096995">,</span>&nbsp;<span class="op" id="7096997">-</span><span class="num" id="7096998">1</span><span class="op" id="7096999">,</span>&nbsp;<span class="string" id="7097001">&#34;-1&#34;</span><span class="op" id="7097005">}</span><span class="op" id="7097006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097009">{</span><span class="op" id="7097010">-</span><span class="num" id="7097011">1</span><span class="op" id="7097012">,</span>&nbsp;<span class="op" id="7097014">-</span><span class="num" id="7097015">1</span><span class="op" id="7097016">,</span>&nbsp;<span class="string" id="7097018">&#34;1&#34;</span><span class="op" id="7097021">}</span><span class="op" id="7097022">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097025">{</span><span class="op" id="7097026">-</span><span class="num" id="7097027">9223372036854775808</span><span class="op" id="7097046">,</span>&nbsp;<span class="op" id="7097048">-</span><span class="num" id="7097049">9223372036854775808</span><span class="op" id="7097068">,</span>&nbsp;<span class="string" id="7097070">&#34;1&#34;</span><span class="op" id="7097073">}</span><span class="op" id="7097074">,</span><br>
<span class="lineno"></span><span class="op" id="7097076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7097079">func</span>&nbsp;<span class="ident" id="7097084">TestRatSetFrac64Rat</span><span class="op" id="7097103">(</span><span class="ident" id="7097104">t</span>&nbsp;<span class="op" id="7097106">*</span><span class="ident" id="7097107">testing</span><span class="op" id="7097114">.</span><span class="ident" id="7097115">T</span><span class="op" id="7097116">)</span>&nbsp;<span class="op" id="7097118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097121">for</span>&nbsp;<span class="ident" id="7097125">i</span><span class="op" id="7097126">,</span>&nbsp;<span class="ident" id="7097128">test</span>&nbsp;<span class="op" id="7097133">:=</span>&nbsp;<span class="keyword" id="7097136">range</span>&nbsp;<span class="ident" id="7097142">setFrac64Tests</span>&nbsp;<span class="op" id="7097157">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097161">x</span>&nbsp;<span class="op" id="7097163">:=</span>&nbsp;<span class="builtinfunc" id="7097166">new</span><span class="op" id="7097169">(</span><span class="ident" id="7097170">Rat</span><span class="op" id="7097173">)</span><span class="op" id="7097174">.</span><span class="ident" id="7097175">SetFrac64</span><span class="op" id="7097184">(</span><span class="ident" id="7097185">test</span><span class="op" id="7097189">.</span><span class="ident" id="7097190">a</span><span class="op" id="7097191">,</span>&nbsp;<span class="ident" id="7097193">test</span><span class="op" id="7097197">.</span><span class="ident" id="7097198">b</span><span class="op" id="7097199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097203">if</span>&nbsp;<span class="ident" id="7097206">x</span><span class="op" id="7097207">.</span><span class="ident" id="7097208">RatString</span><span class="op" id="7097217">(</span><span class="op" id="7097218">)</span>&nbsp;<span class="op" id="7097220">!=</span>&nbsp;<span class="ident" id="7097223">test</span><span class="op" id="7097227">.</span><span class="ident" id="7097228">out</span>&nbsp;<span class="op" id="7097232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097237">t</span><span class="op" id="7097238">.</span><span class="ident" id="7097239">Errorf</span><span class="op" id="7097245">(</span><span class="string" id="7097246">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7097266">,</span>&nbsp;<span class="ident" id="7097268">i</span><span class="op" id="7097269">,</span>&nbsp;<span class="ident" id="7097271">x</span><span class="op" id="7097272">.</span><span class="ident" id="7097273">RatString</span><span class="op" id="7097282">(</span><span class="op" id="7097283">)</span><span class="op" id="7097284">,</span>&nbsp;<span class="ident" id="7097286">test</span><span class="op" id="7097290">.</span><span class="ident" id="7097291">out</span><span class="op" id="7097294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097301">}</span><br>
<span class="lineno">390</span><span class="op" id="7097303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7097306">func</span>&nbsp;<span class="ident" id="7097311">TestRatGobEncoding</span><span class="op" id="7097329">(</span><span class="ident" id="7097330">t</span>&nbsp;<span class="op" id="7097332">*</span><span class="ident" id="7097333">testing</span><span class="op" id="7097340">.</span><span class="ident" id="7097341">T</span><span class="op" id="7097342">)</span>&nbsp;<span class="op" id="7097344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097347">var</span>&nbsp;<span class="ident" id="7097351">medium</span>&nbsp;<span class="ident" id="7097358">bytes</span><span class="op" id="7097363">.</span><span class="ident" id="7097364">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097372">enc</span>&nbsp;<span class="op" id="7097376">:=</span>&nbsp;<span class="ident" id="7097379">gob</span><span class="op" id="7097382">.</span><span class="ident" id="7097383">NewEncoder</span><span class="op" id="7097393">(</span><span class="op" id="7097394">&amp;</span><span class="ident" id="7097395">medium</span><span class="op" id="7097401">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097404">dec</span>&nbsp;<span class="op" id="7097408">:=</span>&nbsp;<span class="ident" id="7097411">gob</span><span class="op" id="7097414">.</span><span class="ident" id="7097415">NewDecoder</span><span class="op" id="7097425">(</span><span class="op" id="7097426">&amp;</span><span class="ident" id="7097427">medium</span><span class="op" id="7097433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097436">for</span>&nbsp;<span class="ident" id="7097440">_</span><span class="op" id="7097441">,</span>&nbsp;<span class="ident" id="7097443">test</span>&nbsp;<span class="op" id="7097448">:=</span>&nbsp;<span class="keyword" id="7097451">range</span>&nbsp;<span class="ident" id="7097457">encodingTests</span>&nbsp;<span class="op" id="7097471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097475">medium</span><span class="op" id="7097481">.</span><span class="ident" id="7097482">Reset</span><span class="op" id="7097487">(</span><span class="op" id="7097488">)</span>&nbsp;<span class="comment" id="7097490">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097549">var</span>&nbsp;<span class="ident" id="7097553">tx</span>&nbsp;<span class="ident" id="7097556">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097562">tx</span><span class="op" id="7097564">.</span><span class="ident" id="7097565">SetString</span><span class="op" id="7097574">(</span><span class="ident" id="7097575">test</span>&nbsp;<span class="op" id="7097580">+</span>&nbsp;<span class="string" id="7097582">&#34;.14159265&#34;</span><span class="op" id="7097593">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097597">if</span>&nbsp;<span class="ident" id="7097600">err</span>&nbsp;<span class="op" id="7097604">:=</span>&nbsp;<span class="ident" id="7097607">enc</span><span class="op" id="7097610">.</span><span class="ident" id="7097611">Encode</span><span class="op" id="7097617">(</span><span class="op" id="7097618">&amp;</span><span class="ident" id="7097619">tx</span><span class="op" id="7097621">)</span><span class="op" id="7097622">;</span>&nbsp;<span class="ident" id="7097624">err</span>&nbsp;<span class="op" id="7097628">!=</span>&nbsp;<span class="ident" id="7097631">nil</span>&nbsp;<span class="op" id="7097635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097640">t</span><span class="op" id="7097641">.</span><span class="ident" id="7097642">Errorf</span><span class="op" id="7097648">(</span><span class="string" id="7097649">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7097676">,</span>&nbsp;<span class="op" id="7097678">&amp;</span><span class="ident" id="7097679">tx</span><span class="op" id="7097681">,</span>&nbsp;<span class="ident" id="7097683">err</span><span class="op" id="7097686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097694">var</span>&nbsp;<span class="ident" id="7097698">rx</span>&nbsp;<span class="ident" id="7097701">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097707">if</span>&nbsp;<span class="ident" id="7097710">err</span>&nbsp;<span class="op" id="7097714">:=</span>&nbsp;<span class="ident" id="7097717">dec</span><span class="op" id="7097720">.</span><span class="ident" id="7097721">Decode</span><span class="op" id="7097727">(</span><span class="op" id="7097728">&amp;</span><span class="ident" id="7097729">rx</span><span class="op" id="7097731">)</span><span class="op" id="7097732">;</span>&nbsp;<span class="ident" id="7097734">err</span>&nbsp;<span class="op" id="7097738">!=</span>&nbsp;<span class="ident" id="7097741">nil</span>&nbsp;<span class="op" id="7097745">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097750">t</span><span class="op" id="7097751">.</span><span class="ident" id="7097752">Errorf</span><span class="op" id="7097758">(</span><span class="string" id="7097759">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7097786">,</span>&nbsp;<span class="op" id="7097788">&amp;</span><span class="ident" id="7097789">tx</span><span class="op" id="7097791">,</span>&nbsp;<span class="ident" id="7097793">err</span><span class="op" id="7097796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7097804">if</span>&nbsp;<span class="ident" id="7097807">rx</span><span class="op" id="7097809">.</span><span class="ident" id="7097810">Cmp</span><span class="op" id="7097813">(</span><span class="op" id="7097814">&amp;</span><span class="ident" id="7097815">tx</span><span class="op" id="7097817">)</span>&nbsp;<span class="op" id="7097819">!=</span>&nbsp;<span class="num" id="7097822">0</span>&nbsp;<span class="op" id="7097824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7097829">t</span><span class="op" id="7097830">.</span><span class="ident" id="7097831">Errorf</span><span class="op" id="7097837">(</span><span class="string" id="7097838">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7097881">,</span>&nbsp;<span class="op" id="7097883">&amp;</span><span class="ident" id="7097884">tx</span><span class="op" id="7097886">,</span>&nbsp;<span class="op" id="7097888">&amp;</span><span class="ident" id="7097889">rx</span><span class="op" id="7097891">,</span>&nbsp;<span class="op" id="7097893">&amp;</span><span class="ident" id="7097894">tx</span><span class="op" id="7097896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097900">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7097903">}</span><br>
<span class="lineno"></span><span class="op" id="7097905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7097908">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7098003">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7098028">func</span>&nbsp;<span class="ident" id="7098033">TestGobEncodingNilRatInSlice</span><span class="op" id="7098061">(</span><span class="ident" id="7098062">t</span>&nbsp;<span class="op" id="7098064">*</span><span class="ident" id="7098065">testing</span><span class="op" id="7098072">.</span><span class="ident" id="7098073">T</span><span class="op" id="7098074">)</span>&nbsp;<span class="op" id="7098076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098079">buf</span>&nbsp;<span class="op" id="7098083">:=</span>&nbsp;<span class="builtinfunc" id="7098086">new</span><span class="op" id="7098089">(</span><span class="ident" id="7098090">bytes</span><span class="op" id="7098095">.</span><span class="ident" id="7098096">Buffer</span><span class="op" id="7098102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098105">enc</span>&nbsp;<span class="op" id="7098109">:=</span>&nbsp;<span class="ident" id="7098112">gob</span><span class="op" id="7098115">.</span><span class="ident" id="7098116">NewEncoder</span><span class="op" id="7098126">(</span><span class="ident" id="7098127">buf</span><span class="op" id="7098130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098133">dec</span>&nbsp;<span class="op" id="7098137">:=</span>&nbsp;<span class="ident" id="7098140">gob</span><span class="op" id="7098143">.</span><span class="ident" id="7098144">NewDecoder</span><span class="op" id="7098154">(</span><span class="ident" id="7098155">buf</span><span class="op" id="7098158">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098162">var</span>&nbsp;<span class="ident" id="7098166">in</span>&nbsp;<span class="op" id="7098169">=</span>&nbsp;<span class="builtinfunc" id="7098171">make</span><span class="op" id="7098175">(</span><span class="op" id="7098176">[</span><span class="op" id="7098177">]</span><span class="op" id="7098178">*</span><span class="ident" id="7098179">Rat</span><span class="op" id="7098182">,</span>&nbsp;<span class="num" id="7098184">1</span><span class="op" id="7098185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098188">err</span>&nbsp;<span class="op" id="7098192">:=</span>&nbsp;<span class="ident" id="7098195">enc</span><span class="op" id="7098198">.</span><span class="ident" id="7098199">Encode</span><span class="op" id="7098205">(</span><span class="op" id="7098206">&amp;</span><span class="ident" id="7098207">in</span><span class="op" id="7098209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098212">if</span>&nbsp;<span class="ident" id="7098215">err</span>&nbsp;<span class="op" id="7098219">!=</span>&nbsp;<span class="ident" id="7098222">nil</span>&nbsp;<span class="op" id="7098226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098230">t</span><span class="op" id="7098231">.</span><span class="ident" id="7098232">Errorf</span><span class="op" id="7098238">(</span><span class="string" id="7098239">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7098262">,</span>&nbsp;<span class="ident" id="7098264">err</span><span class="op" id="7098267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7098270">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098273">var</span>&nbsp;<span class="ident" id="7098277">out</span>&nbsp;<span class="op" id="7098281">[</span><span class="op" id="7098282">]</span><span class="op" id="7098283">*</span><span class="ident" id="7098284">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098289">err</span>&nbsp;<span class="op" id="7098293">=</span>&nbsp;<span class="ident" id="7098295">dec</span><span class="op" id="7098298">.</span><span class="ident" id="7098299">Decode</span><span class="op" id="7098305">(</span><span class="op" id="7098306">&amp;</span><span class="ident" id="7098307">out</span><span class="op" id="7098310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098313">if</span>&nbsp;<span class="ident" id="7098316">err</span>&nbsp;<span class="op" id="7098320">!=</span>&nbsp;<span class="ident" id="7098323">nil</span>&nbsp;<span class="op" id="7098327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098331">t</span><span class="op" id="7098332">.</span><span class="ident" id="7098333">Fatalf</span><span class="op" id="7098339">(</span><span class="string" id="7098340">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7098363">,</span>&nbsp;<span class="ident" id="7098365">err</span><span class="op" id="7098368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7098371">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098374">if</span>&nbsp;<span class="builtinfunc" id="7098377">len</span><span class="op" id="7098380">(</span><span class="ident" id="7098381">out</span><span class="op" id="7098384">)</span>&nbsp;<span class="op" id="7098386">!=</span>&nbsp;<span class="num" id="7098389">1</span>&nbsp;<span class="op" id="7098391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098395">t</span><span class="op" id="7098396">.</span><span class="ident" id="7098397">Fatalf</span><span class="op" id="7098403">(</span><span class="string" id="7098404">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7098430">,</span>&nbsp;<span class="builtinfunc" id="7098432">len</span><span class="op" id="7098435">(</span><span class="ident" id="7098436">out</span><span class="op" id="7098439">)</span><span class="op" id="7098440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7098443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098446">var</span>&nbsp;<span class="ident" id="7098450">zero</span>&nbsp;<span class="ident" id="7098455">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7098460">if</span>&nbsp;<span class="ident" id="7098463">out</span><span class="op" id="7098466">[</span><span class="num" id="7098467">0</span><span class="op" id="7098468">]</span><span class="op" id="7098469">.</span><span class="ident" id="7098470">Cmp</span><span class="op" id="7098473">(</span><span class="op" id="7098474">&amp;</span><span class="ident" id="7098475">zero</span><span class="op" id="7098479">)</span>&nbsp;<span class="op" id="7098481">!=</span>&nbsp;<span class="num" id="7098484">0</span>&nbsp;<span class="op" id="7098486">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7098490">t</span><span class="op" id="7098491">.</span><span class="ident" id="7098492">Errorf</span><span class="op" id="7098498">(</span><span class="string" id="7098499">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7098551">,</span>&nbsp;<span class="ident" id="7098553">out</span><span class="op" id="7098556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7098559">}</span><br>
<span class="lineno"></span><span class="op" id="7098561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7098564">var</span>&nbsp;<span class="ident" id="7098568">ratNums</span>&nbsp;<span class="op" id="7098576">=</span>&nbsp;<span class="op" id="7098578">[</span><span class="op" id="7098579">]</span><span class="builtintype" id="7098580">string</span><span class="op" id="7098586">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098589">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7098667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098670">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7098713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098716">&#34;-141592653589793&#34;</span><span class="op" id="7098734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098737">&#34;-1&#34;</span><span class="op" id="7098741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098744">&#34;0&#34;</span><span class="op" id="7098747">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098750">&#34;1&#34;</span><span class="op" id="7098753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098756">&#34;141592653589793&#34;</span><span class="op" id="7098773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098776">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7098818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098821">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7098898">,</span><br>
<span class="lineno"></span><span class="op" id="7098900">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7098903">var</span>&nbsp;<span class="ident" id="7098907">ratDenoms</span>&nbsp;<span class="op" id="7098917">=</span>&nbsp;<span class="op" id="7098919">[</span><span class="op" id="7098920">]</span><span class="builtintype" id="7098921">string</span><span class="op" id="7098927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098930">&#34;1&#34;</span><span class="op" id="7098933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098936">&#34;718281828459045&#34;</span><span class="op" id="7098953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7098956">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7098998">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7099001">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7099078">,</span><br>
<span class="lineno"></span><span class="op" id="7099080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7099083">func</span>&nbsp;<span class="ident" id="7099088">TestRatJSONEncoding</span><span class="op" id="7099107">(</span><span class="ident" id="7099108">t</span>&nbsp;<span class="op" id="7099110">*</span><span class="ident" id="7099111">testing</span><span class="op" id="7099118">.</span><span class="ident" id="7099119">T</span><span class="op" id="7099120">)</span>&nbsp;<span class="op" id="7099122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099125">for</span>&nbsp;<span class="ident" id="7099129">_</span><span class="op" id="7099130">,</span>&nbsp;<span class="ident" id="7099132">num</span>&nbsp;<span class="op" id="7099136">:=</span>&nbsp;<span class="keyword" id="7099139">range</span>&nbsp;<span class="ident" id="7099145">ratNums</span>&nbsp;<span class="op" id="7099153">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099157">for</span>&nbsp;<span class="ident" id="7099161">_</span><span class="op" id="7099162">,</span>&nbsp;<span class="ident" id="7099164">denom</span>&nbsp;<span class="op" id="7099170">:=</span>&nbsp;<span class="keyword" id="7099173">range</span>&nbsp;<span class="ident" id="7099179">ratDenoms</span>&nbsp;<span class="op" id="7099189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099194">var</span>&nbsp;<span class="ident" id="7099198">tx</span>&nbsp;<span class="ident" id="7099201">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099208">tx</span><span class="op" id="7099210">.</span><span class="ident" id="7099211">SetString</span><span class="op" id="7099220">(</span><span class="ident" id="7099221">num</span>&nbsp;<span class="op" id="7099225">+</span>&nbsp;<span class="string" id="7099227">&#34;/&#34;</span>&nbsp;<span class="op" id="7099231">+</span>&nbsp;<span class="ident" id="7099233">denom</span><span class="op" id="7099238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099243">b</span><span class="op" id="7099244">,</span>&nbsp;<span class="ident" id="7099246">err</span>&nbsp;<span class="op" id="7099250">:=</span>&nbsp;<span class="ident" id="7099253">json</span><span class="op" id="7099257">.</span><span class="ident" id="7099258">Marshal</span><span class="op" id="7099265">(</span><span class="op" id="7099266">&amp;</span><span class="ident" id="7099267">tx</span><span class="op" id="7099269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099274">if</span>&nbsp;<span class="ident" id="7099277">err</span>&nbsp;<span class="op" id="7099281">!=</span>&nbsp;<span class="ident" id="7099284">nil</span>&nbsp;<span class="op" id="7099288">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099294">t</span><span class="op" id="7099295">.</span><span class="ident" id="7099296">Errorf</span><span class="op" id="7099302">(</span><span class="string" id="7099303">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7099332">,</span>&nbsp;<span class="op" id="7099334">&amp;</span><span class="ident" id="7099335">tx</span><span class="op" id="7099337">,</span>&nbsp;<span class="ident" id="7099339">err</span><span class="op" id="7099342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099348">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099365">var</span>&nbsp;<span class="ident" id="7099369">rx</span>&nbsp;<span class="ident" id="7099372">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099379">if</span>&nbsp;<span class="ident" id="7099382">err</span>&nbsp;<span class="op" id="7099386">:=</span>&nbsp;<span class="ident" id="7099389">json</span><span class="op" id="7099393">.</span><span class="ident" id="7099394">Unmarshal</span><span class="op" id="7099403">(</span><span class="ident" id="7099404">b</span><span class="op" id="7099405">,</span>&nbsp;<span class="op" id="7099407">&amp;</span><span class="ident" id="7099408">rx</span><span class="op" id="7099410">)</span><span class="op" id="7099411">;</span>&nbsp;<span class="ident" id="7099413">err</span>&nbsp;<span class="op" id="7099417">!=</span>&nbsp;<span class="ident" id="7099420">nil</span>&nbsp;<span class="op" id="7099424">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099430">t</span><span class="op" id="7099431">.</span><span class="ident" id="7099432">Errorf</span><span class="op" id="7099438">(</span><span class="string" id="7099439">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7099470">,</span>&nbsp;<span class="op" id="7099472">&amp;</span><span class="ident" id="7099473">tx</span><span class="op" id="7099475">,</span>&nbsp;<span class="ident" id="7099477">err</span><span class="op" id="7099480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099486">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099503">if</span>&nbsp;<span class="ident" id="7099506">rx</span><span class="op" id="7099508">.</span><span class="ident" id="7099509">Cmp</span><span class="op" id="7099512">(</span><span class="op" id="7099513">&amp;</span><span class="ident" id="7099514">tx</span><span class="op" id="7099516">)</span>&nbsp;<span class="op" id="7099518">!=</span>&nbsp;<span class="num" id="7099521">0</span>&nbsp;<span class="op" id="7099523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099529">t</span><span class="op" id="7099530">.</span><span class="ident" id="7099531">Errorf</span><span class="op" id="7099537">(</span><span class="string" id="7099538">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7099582">,</span>&nbsp;<span class="op" id="7099584">&amp;</span><span class="ident" id="7099585">tx</span><span class="op" id="7099587">,</span>&nbsp;<span class="op" id="7099589">&amp;</span><span class="ident" id="7099590">rx</span><span class="op" id="7099592">,</span>&nbsp;<span class="op" id="7099594">&amp;</span><span class="ident" id="7099595">tx</span><span class="op" id="7099597">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099609">}</span><br>
<span class="lineno"></span><span class="op" id="7099611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7099614">func</span>&nbsp;<span class="ident" id="7099619">TestRatXMLEncoding</span><span class="op" id="7099637">(</span><span class="ident" id="7099638">t</span>&nbsp;<span class="op" id="7099640">*</span><span class="ident" id="7099641">testing</span><span class="op" id="7099648">.</span><span class="ident" id="7099649">T</span><span class="op" id="7099650">)</span>&nbsp;<span class="op" id="7099652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099655">for</span>&nbsp;<span class="ident" id="7099659">_</span><span class="op" id="7099660">,</span>&nbsp;<span class="ident" id="7099662">num</span>&nbsp;<span class="op" id="7099666">:=</span>&nbsp;<span class="keyword" id="7099669">range</span>&nbsp;<span class="ident" id="7099675">ratNums</span>&nbsp;<span class="op" id="7099683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099687">for</span>&nbsp;<span class="ident" id="7099691">_</span><span class="op" id="7099692">,</span>&nbsp;<span class="ident" id="7099694">denom</span>&nbsp;<span class="op" id="7099700">:=</span>&nbsp;<span class="keyword" id="7099703">range</span>&nbsp;<span class="ident" id="7099709">ratDenoms</span>&nbsp;<span class="op" id="7099719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099724">var</span>&nbsp;<span class="ident" id="7099728">tx</span>&nbsp;<span class="ident" id="7099731">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099738">tx</span><span class="op" id="7099740">.</span><span class="ident" id="7099741">SetString</span><span class="op" id="7099750">(</span><span class="ident" id="7099751">num</span>&nbsp;<span class="op" id="7099755">+</span>&nbsp;<span class="string" id="7099757">&#34;/&#34;</span>&nbsp;<span class="op" id="7099761">+</span>&nbsp;<span class="ident" id="7099763">denom</span><span class="op" id="7099768">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099773">b</span><span class="op" id="7099774">,</span>&nbsp;<span class="ident" id="7099776">err</span>&nbsp;<span class="op" id="7099780">:=</span>&nbsp;<span class="ident" id="7099783">xml</span><span class="op" id="7099786">.</span><span class="ident" id="7099787">Marshal</span><span class="op" id="7099794">(</span><span class="op" id="7099795">&amp;</span><span class="ident" id="7099796">tx</span><span class="op" id="7099798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099803">if</span>&nbsp;<span class="ident" id="7099806">err</span>&nbsp;<span class="op" id="7099810">!=</span>&nbsp;<span class="ident" id="7099813">nil</span>&nbsp;<span class="op" id="7099817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099823">t</span><span class="op" id="7099824">.</span><span class="ident" id="7099825">Errorf</span><span class="op" id="7099831">(</span><span class="string" id="7099832">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7099861">,</span>&nbsp;<span class="op" id="7099863">&amp;</span><span class="ident" id="7099864">tx</span><span class="op" id="7099866">,</span>&nbsp;<span class="ident" id="7099868">err</span><span class="op" id="7099871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099877">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7099889">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099894">var</span>&nbsp;<span class="ident" id="7099898">rx</span>&nbsp;<span class="ident" id="7099901">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7099908">if</span>&nbsp;<span class="ident" id="7099911">err</span>&nbsp;<span class="op" id="7099915">:=</span>&nbsp;<span class="ident" id="7099918">xml</span><span class="op" id="7099921">.</span><span class="ident" id="7099922">Unmarshal</span><span class="op" id="7099931">(</span><span class="ident" id="7099932">b</span><span class="op" id="7099933">,</span>&nbsp;<span class="op" id="7099935">&amp;</span><span class="ident" id="7099936">rx</span><span class="op" id="7099938">)</span><span class="op" id="7099939">;</span>&nbsp;<span class="ident" id="7099941">err</span>&nbsp;<span class="op" id="7099945">!=</span>&nbsp;<span class="ident" id="7099948">nil</span>&nbsp;<span class="op" id="7099952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7099958">t</span><span class="op" id="7099959">.</span><span class="ident" id="7099960">Errorf</span><span class="op" id="7099966">(</span><span class="string" id="7099967">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7099998">,</span>&nbsp;<span class="op" id="7100000">&amp;</span><span class="ident" id="7100001">tx</span><span class="op" id="7100003">,</span>&nbsp;<span class="ident" id="7100005">err</span><span class="op" id="7100008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100014">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100026">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100031">if</span>&nbsp;<span class="ident" id="7100034">rx</span><span class="op" id="7100036">.</span><span class="ident" id="7100037">Cmp</span><span class="op" id="7100040">(</span><span class="op" id="7100041">&amp;</span><span class="ident" id="7100042">tx</span><span class="op" id="7100044">)</span>&nbsp;<span class="op" id="7100046">!=</span>&nbsp;<span class="num" id="7100049">0</span>&nbsp;<span class="op" id="7100051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100057">t</span><span class="op" id="7100058">.</span><span class="ident" id="7100059">Errorf</span><span class="op" id="7100065">(</span><span class="string" id="7100066">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100109">,</span>&nbsp;<span class="op" id="7100111">&amp;</span><span class="ident" id="7100112">tx</span><span class="op" id="7100114">,</span>&nbsp;<span class="op" id="7100116">&amp;</span><span class="ident" id="7100117">rx</span><span class="op" id="7100119">,</span>&nbsp;<span class="op" id="7100121">&amp;</span><span class="ident" id="7100122">tx</span><span class="op" id="7100124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100136">}</span><br>
<span class="lineno">500</span><span class="op" id="7100138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7100141">func</span>&nbsp;<span class="ident" id="7100146">TestIssue2379</span><span class="op" id="7100159">(</span><span class="ident" id="7100160">t</span>&nbsp;<span class="op" id="7100162">*</span><span class="ident" id="7100163">testing</span><span class="op" id="7100170">.</span><span class="ident" id="7100171">T</span><span class="op" id="7100172">)</span>&nbsp;<span class="op" id="7100174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7100177">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100196">q</span>&nbsp;<span class="op" id="7100198">:=</span>&nbsp;<span class="ident" id="7100201">NewRat</span><span class="op" id="7100207">(</span><span class="num" id="7100208">3</span><span class="op" id="7100209">,</span>&nbsp;<span class="num" id="7100211">2</span><span class="op" id="7100212">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100215">x</span>&nbsp;<span class="op" id="7100217">:=</span>&nbsp;<span class="builtinfunc" id="7100220">new</span><span class="op" id="7100223">(</span><span class="ident" id="7100224">Rat</span><span class="op" id="7100227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100230">x</span><span class="op" id="7100231">.</span><span class="ident" id="7100232">SetFrac</span><span class="op" id="7100239">(</span><span class="ident" id="7100240">NewInt</span><span class="op" id="7100246">(</span><span class="num" id="7100247">3</span><span class="op" id="7100248">)</span><span class="op" id="7100249">,</span>&nbsp;<span class="ident" id="7100251">NewInt</span><span class="op" id="7100257">(</span><span class="num" id="7100258">2</span><span class="op" id="7100259">)</span><span class="op" id="7100260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100263">if</span>&nbsp;<span class="ident" id="7100266">x</span><span class="op" id="7100267">.</span><span class="ident" id="7100268">Cmp</span><span class="op" id="7100271">(</span><span class="ident" id="7100272">q</span><span class="op" id="7100273">)</span>&nbsp;<span class="op" id="7100275">!=</span>&nbsp;<span class="num" id="7100278">0</span>&nbsp;<span class="op" id="7100280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100284">t</span><span class="op" id="7100285">.</span><span class="ident" id="7100286">Errorf</span><span class="op" id="7100292">(</span><span class="string" id="7100293">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100312">,</span>&nbsp;<span class="ident" id="7100314">x</span><span class="op" id="7100315">,</span>&nbsp;<span class="ident" id="7100317">q</span><span class="op" id="7100318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100321">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7100325">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100354">x</span>&nbsp;<span class="op" id="7100356">=</span>&nbsp;<span class="ident" id="7100358">NewRat</span><span class="op" id="7100364">(</span><span class="num" id="7100365">2</span><span class="op" id="7100366">,</span>&nbsp;<span class="num" id="7100368">3</span><span class="op" id="7100369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100372">x</span><span class="op" id="7100373">.</span><span class="ident" id="7100374">SetFrac</span><span class="op" id="7100381">(</span><span class="ident" id="7100382">NewInt</span><span class="op" id="7100388">(</span><span class="num" id="7100389">3</span><span class="op" id="7100390">)</span><span class="op" id="7100391">,</span>&nbsp;<span class="ident" id="7100393">x</span><span class="op" id="7100394">.</span><span class="ident" id="7100395">Num</span><span class="op" id="7100398">(</span><span class="op" id="7100399">)</span><span class="op" id="7100400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100403">if</span>&nbsp;<span class="ident" id="7100406">x</span><span class="op" id="7100407">.</span><span class="ident" id="7100408">Cmp</span><span class="op" id="7100411">(</span><span class="ident" id="7100412">q</span><span class="op" id="7100413">)</span>&nbsp;<span class="op" id="7100415">!=</span>&nbsp;<span class="num" id="7100418">0</span>&nbsp;<span class="op" id="7100420">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100424">t</span><span class="op" id="7100425">.</span><span class="ident" id="7100426">Errorf</span><span class="op" id="7100432">(</span><span class="string" id="7100433">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100452">,</span>&nbsp;<span class="ident" id="7100454">x</span><span class="op" id="7100455">,</span>&nbsp;<span class="ident" id="7100457">q</span><span class="op" id="7100458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7100465">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100496">x</span>&nbsp;<span class="op" id="7100498">=</span>&nbsp;<span class="ident" id="7100500">NewRat</span><span class="op" id="7100506">(</span><span class="num" id="7100507">2</span><span class="op" id="7100508">,</span>&nbsp;<span class="num" id="7100510">3</span><span class="op" id="7100511">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100514">x</span><span class="op" id="7100515">.</span><span class="ident" id="7100516">SetFrac</span><span class="op" id="7100523">(</span><span class="ident" id="7100524">x</span><span class="op" id="7100525">.</span><span class="ident" id="7100526">Denom</span><span class="op" id="7100531">(</span><span class="op" id="7100532">)</span><span class="op" id="7100533">,</span>&nbsp;<span class="ident" id="7100535">NewInt</span><span class="op" id="7100541">(</span><span class="num" id="7100542">2</span><span class="op" id="7100543">)</span><span class="op" id="7100544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100547">if</span>&nbsp;<span class="ident" id="7100550">x</span><span class="op" id="7100551">.</span><span class="ident" id="7100552">Cmp</span><span class="op" id="7100555">(</span><span class="ident" id="7100556">q</span><span class="op" id="7100557">)</span>&nbsp;<span class="op" id="7100559">!=</span>&nbsp;<span class="num" id="7100562">0</span>&nbsp;<span class="op" id="7100564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100568">t</span><span class="op" id="7100569">.</span><span class="ident" id="7100570">Errorf</span><span class="op" id="7100576">(</span><span class="string" id="7100577">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100596">,</span>&nbsp;<span class="ident" id="7100598">x</span><span class="op" id="7100599">,</span>&nbsp;<span class="ident" id="7100601">q</span><span class="op" id="7100602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7100609">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100654">x</span>&nbsp;<span class="op" id="7100656">=</span>&nbsp;<span class="ident" id="7100658">NewRat</span><span class="op" id="7100664">(</span><span class="num" id="7100665">2</span><span class="op" id="7100666">,</span>&nbsp;<span class="num" id="7100668">3</span><span class="op" id="7100669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100672">x</span><span class="op" id="7100673">.</span><span class="ident" id="7100674">SetFrac</span><span class="op" id="7100681">(</span><span class="ident" id="7100682">x</span><span class="op" id="7100683">.</span><span class="ident" id="7100684">Denom</span><span class="op" id="7100689">(</span><span class="op" id="7100690">)</span><span class="op" id="7100691">,</span>&nbsp;<span class="ident" id="7100693">x</span><span class="op" id="7100694">.</span><span class="ident" id="7100695">Num</span><span class="op" id="7100698">(</span><span class="op" id="7100699">)</span><span class="op" id="7100700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100703">if</span>&nbsp;<span class="ident" id="7100706">x</span><span class="op" id="7100707">.</span><span class="ident" id="7100708">Cmp</span><span class="op" id="7100711">(</span><span class="ident" id="7100712">q</span><span class="op" id="7100713">)</span>&nbsp;<span class="op" id="7100715">!=</span>&nbsp;<span class="num" id="7100718">0</span>&nbsp;<span class="op" id="7100720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100724">t</span><span class="op" id="7100725">.</span><span class="ident" id="7100726">Errorf</span><span class="op" id="7100732">(</span><span class="string" id="7100733">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100752">,</span>&nbsp;<span class="ident" id="7100754">x</span><span class="op" id="7100755">,</span>&nbsp;<span class="ident" id="7100757">q</span><span class="op" id="7100758">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7100765">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100811">q</span>&nbsp;<span class="op" id="7100813">=</span>&nbsp;<span class="ident" id="7100815">NewRat</span><span class="op" id="7100821">(</span><span class="num" id="7100822">1</span><span class="op" id="7100823">,</span>&nbsp;<span class="num" id="7100825">1</span><span class="op" id="7100826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100829">x</span>&nbsp;<span class="op" id="7100831">=</span>&nbsp;<span class="builtinfunc" id="7100833">new</span><span class="op" id="7100836">(</span><span class="ident" id="7100837">Rat</span><span class="op" id="7100840">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100843">n</span>&nbsp;<span class="op" id="7100845">:=</span>&nbsp;<span class="ident" id="7100848">NewInt</span><span class="op" id="7100854">(</span><span class="num" id="7100855">7</span><span class="op" id="7100856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100859">x</span><span class="op" id="7100860">.</span><span class="ident" id="7100861">SetFrac</span><span class="op" id="7100868">(</span><span class="ident" id="7100869">n</span><span class="op" id="7100870">,</span>&nbsp;<span class="ident" id="7100872">n</span><span class="op" id="7100873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7100876">if</span>&nbsp;<span class="ident" id="7100879">x</span><span class="op" id="7100880">.</span><span class="ident" id="7100881">Cmp</span><span class="op" id="7100884">(</span><span class="ident" id="7100885">q</span><span class="op" id="7100886">)</span>&nbsp;<span class="op" id="7100888">!=</span>&nbsp;<span class="num" id="7100891">0</span>&nbsp;<span class="op" id="7100893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100897">t</span><span class="op" id="7100898">.</span><span class="ident" id="7100899">Errorf</span><span class="op" id="7100905">(</span><span class="string" id="7100906">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7100925">,</span>&nbsp;<span class="ident" id="7100927">x</span><span class="op" id="7100928">,</span>&nbsp;<span class="ident" id="7100930">q</span><span class="op" id="7100931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7100934">}</span><br>
<span class="lineno">540</span><span class="op" id="7100936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7100939">func</span>&nbsp;<span class="ident" id="7100944">TestIssue3521</span><span class="op" id="7100957">(</span><span class="ident" id="7100958">t</span>&nbsp;<span class="op" id="7100960">*</span><span class="ident" id="7100961">testing</span><span class="op" id="7100968">.</span><span class="ident" id="7100969">T</span><span class="op" id="7100970">)</span>&nbsp;<span class="op" id="7100972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100975">a</span>&nbsp;<span class="op" id="7100977">:=</span>&nbsp;<span class="builtinfunc" id="7100980">new</span><span class="op" id="7100983">(</span><span class="ident" id="7100984">Int</span><span class="op" id="7100987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7100990">b</span>&nbsp;<span class="op" id="7100992">:=</span>&nbsp;<span class="builtinfunc" id="7100995">new</span><span class="op" id="7100998">(</span><span class="ident" id="7100999">Int</span><span class="op" id="7101002">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101005">a</span><span class="op" id="7101006">.</span><span class="ident" id="7101007">SetString</span><span class="op" id="7101016">(</span><span class="string" id="7101017">&#34;64375784358435883458348587&#34;</span><span class="op" id="7101045">,</span>&nbsp;<span class="num" id="7101047">0</span><span class="op" id="7101048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101051">b</span><span class="op" id="7101052">.</span><span class="ident" id="7101053">SetString</span><span class="op" id="7101062">(</span><span class="string" id="7101063">&#34;4789759874531&#34;</span><span class="op" id="7101078">,</span>&nbsp;<span class="num" id="7101080">0</span><span class="op" id="7101081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101085">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101130">zero</span>&nbsp;<span class="op" id="7101135">:=</span>&nbsp;<span class="builtinfunc" id="7101138">new</span><span class="op" id="7101141">(</span><span class="ident" id="7101142">Rat</span><span class="op" id="7101145">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101148">one</span>&nbsp;<span class="op" id="7101152">:=</span>&nbsp;<span class="ident" id="7101155">NewInt</span><span class="op" id="7101161">(</span><span class="num" id="7101162">1</span><span class="op" id="7101163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7101166">if</span>&nbsp;<span class="ident" id="7101169">zero</span><span class="op" id="7101173">.</span><span class="ident" id="7101174">Denom</span><span class="op" id="7101179">(</span><span class="op" id="7101180">)</span><span class="op" id="7101181">.</span><span class="ident" id="7101182">Cmp</span><span class="op" id="7101185">(</span><span class="ident" id="7101186">one</span><span class="op" id="7101189">)</span>&nbsp;<span class="op" id="7101191">!=</span>&nbsp;<span class="num" id="7101194">0</span>&nbsp;<span class="op" id="7101196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101200">t</span><span class="op" id="7101201">.</span><span class="ident" id="7101202">Errorf</span><span class="op" id="7101208">(</span><span class="string" id="7101209">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7101228">,</span>&nbsp;<span class="ident" id="7101230">zero</span><span class="op" id="7101234">.</span><span class="ident" id="7101235">Denom</span><span class="op" id="7101240">(</span><span class="op" id="7101241">)</span><span class="op" id="7101242">,</span>&nbsp;<span class="ident" id="7101244">one</span><span class="op" id="7101247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7101250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101254">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101315">x</span>&nbsp;<span class="op" id="7101317">:=</span>&nbsp;<span class="builtinfunc" id="7101320">new</span><span class="op" id="7101323">(</span><span class="ident" id="7101324">Rat</span><span class="op" id="7101327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101330">x</span><span class="op" id="7101331">.</span><span class="ident" id="7101332">Denom</span><span class="op" id="7101337">(</span><span class="op" id="7101338">)</span><span class="op" id="7101339">.</span><span class="ident" id="7101340">Set</span><span class="op" id="7101343">(</span><span class="builtinfunc" id="7101344">new</span><span class="op" id="7101347">(</span><span class="ident" id="7101348">Int</span><span class="op" id="7101351">)</span><span class="op" id="7101352">.</span><span class="ident" id="7101353">Neg</span><span class="op" id="7101356">(</span><span class="ident" id="7101357">b</span><span class="op" id="7101358">)</span><span class="op" id="7101359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7101362">if</span>&nbsp;<span class="ident" id="7101365">x</span><span class="op" id="7101366">.</span><span class="ident" id="7101367">Cmp</span><span class="op" id="7101370">(</span><span class="ident" id="7101371">zero</span><span class="op" id="7101375">)</span>&nbsp;<span class="op" id="7101377">!=</span>&nbsp;<span class="num" id="7101380">0</span>&nbsp;<span class="op" id="7101382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101386">t</span><span class="op" id="7101387">.</span><span class="ident" id="7101388">Errorf</span><span class="op" id="7101394">(</span><span class="string" id="7101395">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7101415">,</span>&nbsp;<span class="ident" id="7101417">x</span><span class="op" id="7101418">,</span>&nbsp;<span class="ident" id="7101420">zero</span><span class="op" id="7101424">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7101427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101431">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101489">x</span><span class="op" id="7101490">.</span><span class="ident" id="7101491">Num</span><span class="op" id="7101494">(</span><span class="op" id="7101495">)</span><span class="op" id="7101496">.</span><span class="ident" id="7101497">Set</span><span class="op" id="7101500">(</span><span class="ident" id="7101501">a</span><span class="op" id="7101502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101505">qab</span>&nbsp;<span class="op" id="7101509">:=</span>&nbsp;<span class="builtinfunc" id="7101512">new</span><span class="op" id="7101515">(</span><span class="ident" id="7101516">Rat</span><span class="op" id="7101519">)</span><span class="op" id="7101520">.</span><span class="ident" id="7101521">SetFrac</span><span class="op" id="7101528">(</span><span class="ident" id="7101529">a</span><span class="op" id="7101530">,</span>&nbsp;<span class="ident" id="7101532">b</span><span class="op" id="7101533">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7101536">if</span>&nbsp;<span class="ident" id="7101539">x</span><span class="op" id="7101540">.</span><span class="ident" id="7101541">Cmp</span><span class="op" id="7101544">(</span><span class="ident" id="7101545">qab</span><span class="op" id="7101548">)</span>&nbsp;<span class="op" id="7101550">!=</span>&nbsp;<span class="num" id="7101553">0</span>&nbsp;<span class="op" id="7101555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101559">t</span><span class="op" id="7101560">.</span><span class="ident" id="7101561">Errorf</span><span class="op" id="7101567">(</span><span class="string" id="7101568">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7101588">,</span>&nbsp;<span class="ident" id="7101590">x</span><span class="op" id="7101591">,</span>&nbsp;<span class="ident" id="7101593">qab</span><span class="op" id="7101596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7101599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101603">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101673">x</span><span class="op" id="7101674">.</span><span class="ident" id="7101675">SetFrac64</span><span class="op" id="7101684">(</span><span class="num" id="7101685">10</span><span class="op" id="7101687">,</span>&nbsp;<span class="num" id="7101689">2</span><span class="op" id="7101690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101693">x</span><span class="op" id="7101694">.</span><span class="ident" id="7101695">Denom</span><span class="op" id="7101700">(</span><span class="op" id="7101701">)</span><span class="op" id="7101702">.</span><span class="ident" id="7101703">SetInt64</span><span class="op" id="7101711">(</span><span class="num" id="7101712">3</span><span class="op" id="7101713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101716">q53</span>&nbsp;<span class="op" id="7101720">:=</span>&nbsp;<span class="ident" id="7101723">NewRat</span><span class="op" id="7101729">(</span><span class="num" id="7101730">5</span><span class="op" id="7101731">,</span>&nbsp;<span class="num" id="7101733">3</span><span class="op" id="7101734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7101737">if</span>&nbsp;<span class="ident" id="7101740">x</span><span class="op" id="7101741">.</span><span class="ident" id="7101742">Cmp</span><span class="op" id="7101745">(</span><span class="ident" id="7101746">q53</span><span class="op" id="7101749">)</span>&nbsp;<span class="op" id="7101751">!=</span>&nbsp;<span class="num" id="7101754">0</span>&nbsp;<span class="op" id="7101756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101760">t</span><span class="op" id="7101761">.</span><span class="ident" id="7101762">Errorf</span><span class="op" id="7101768">(</span><span class="string" id="7101769">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7101789">,</span>&nbsp;<span class="ident" id="7101791">x</span><span class="op" id="7101792">,</span>&nbsp;<span class="ident" id="7101794">q53</span><span class="op" id="7101797">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7101800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101804">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101874">x</span>&nbsp;<span class="op" id="7101876">=</span>&nbsp;<span class="ident" id="7101878">NewRat</span><span class="op" id="7101884">(</span><span class="num" id="7101885">10</span><span class="op" id="7101887">,</span>&nbsp;<span class="num" id="7101889">2</span><span class="op" id="7101890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101893">x</span><span class="op" id="7101894">.</span><span class="ident" id="7101895">Denom</span><span class="op" id="7101900">(</span><span class="op" id="7101901">)</span><span class="op" id="7101902">.</span><span class="ident" id="7101903">SetInt64</span><span class="op" id="7101911">(</span><span class="num" id="7101912">3</span><span class="op" id="7101913">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7101916">if</span>&nbsp;<span class="ident" id="7101919">x</span><span class="op" id="7101920">.</span><span class="ident" id="7101921">Cmp</span><span class="op" id="7101924">(</span><span class="ident" id="7101925">q53</span><span class="op" id="7101928">)</span>&nbsp;<span class="op" id="7101930">!=</span>&nbsp;<span class="num" id="7101933">0</span>&nbsp;<span class="op" id="7101935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7101939">t</span><span class="op" id="7101940">.</span><span class="ident" id="7101941">Errorf</span><span class="op" id="7101947">(</span><span class="string" id="7101948">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7101968">,</span>&nbsp;<span class="ident" id="7101970">x</span><span class="op" id="7101971">,</span>&nbsp;<span class="ident" id="7101973">q53</span><span class="op" id="7101976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7101979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7101983">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102050">x</span><span class="op" id="7102051">.</span><span class="ident" id="7102052">SetFrac</span><span class="op" id="7102059">(</span><span class="ident" id="7102060">a</span><span class="op" id="7102061">,</span>&nbsp;<span class="ident" id="7102063">b</span><span class="op" id="7102064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102067">a</span>&nbsp;<span class="op" id="7102069">=</span>&nbsp;<span class="ident" id="7102071">x</span><span class="op" id="7102072">.</span><span class="ident" id="7102073">Num</span><span class="op" id="7102076">(</span><span class="op" id="7102077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102080">b</span>&nbsp;<span class="op" id="7102082">=</span>&nbsp;<span class="ident" id="7102084">x</span><span class="op" id="7102085">.</span><span class="ident" id="7102086">Denom</span><span class="op" id="7102091">(</span><span class="op" id="7102092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102095">a</span><span class="op" id="7102096">.</span><span class="ident" id="7102097">SetInt64</span><span class="op" id="7102105">(</span><span class="num" id="7102106">5</span><span class="op" id="7102107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102110">b</span><span class="op" id="7102111">.</span><span class="ident" id="7102112">SetInt64</span><span class="op" id="7102120">(</span><span class="num" id="7102121">3</span><span class="op" id="7102122">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7102125">if</span>&nbsp;<span class="ident" id="7102128">x</span><span class="op" id="7102129">.</span><span class="ident" id="7102130">Cmp</span><span class="op" id="7102133">(</span><span class="ident" id="7102134">q53</span><span class="op" id="7102137">)</span>&nbsp;<span class="op" id="7102139">!=</span>&nbsp;<span class="num" id="7102142">0</span>&nbsp;<span class="op" id="7102144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7102148">t</span><span class="op" id="7102149">.</span><span class="ident" id="7102150">Errorf</span><span class="op" id="7102156">(</span><span class="string" id="7102157">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7102176">,</span>&nbsp;<span class="ident" id="7102178">x</span><span class="op" id="7102179">,</span>&nbsp;<span class="ident" id="7102181">q53</span><span class="op" id="7102184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7102187">}</span><br>
<span class="lineno"></span><span class="op" id="7102189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7102192">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7102261">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7102333">var</span>&nbsp;<span class="ident" id="7102337">float64inputs</span>&nbsp;<span class="op" id="7102351">=</span>&nbsp;<span class="op" id="7102353">[</span><span class="op" id="7102354">]</span><span class="builtintype" id="7102355">string</span><span class="op" id="7102361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7102364">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7102414">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102484">&#34;5e+125&#34;</span><span class="op" id="7102492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102495">&#34;69e+267&#34;</span><span class="op" id="7102504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102507">&#34;999e-026&#34;</span><span class="op" id="7102517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102520">&#34;7861e-034&#34;</span><span class="op" id="7102531">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102534">&#34;75569e-254&#34;</span><span class="op" id="7102546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102549">&#34;928609e-261&#34;</span><span class="op" id="7102562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102565">&#34;9210917e+080&#34;</span><span class="op" id="7102579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102582">&#34;84863171e+114&#34;</span><span class="op" id="7102597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102600">&#34;653777767e+273&#34;</span><span class="op" id="7102616">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102619">&#34;5232604057e-298&#34;</span><span class="op" id="7102636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102639">&#34;27235667517e-109&#34;</span><span class="op" id="7102657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102660">&#34;653532977297e-123&#34;</span><span class="op" id="7102679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102682">&#34;3142213164987e-294&#34;</span><span class="op" id="7102702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102705">&#34;46202199371337e-072&#34;</span><span class="op" id="7102726">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102729">&#34;231010996856685e-073&#34;</span><span class="op" id="7102751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102754">&#34;9324754620109615e+212&#34;</span><span class="op" id="7102777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102780">&#34;78459735791271921e+049&#34;</span><span class="op" id="7102804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102807">&#34;272104041512242479e+200&#34;</span><span class="op" id="7102832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102835">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7102861">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102864">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7102891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102894">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7102922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102925">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7102954">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7102958">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103028">&#34;9e-265&#34;</span><span class="op" id="7103036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103039">&#34;85e-037&#34;</span><span class="op" id="7103048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103051">&#34;623e+100&#34;</span><span class="op" id="7103061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103064">&#34;3571e+263&#34;</span><span class="op" id="7103075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103078">&#34;81661e+153&#34;</span><span class="op" id="7103090">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103093">&#34;920657e-023&#34;</span><span class="op" id="7103106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103109">&#34;4603285e-024&#34;</span><span class="op" id="7103123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103126">&#34;87575437e-309&#34;</span><span class="op" id="7103141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103144">&#34;245540327e+122&#34;</span><span class="op" id="7103160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103163">&#34;6138508175e+120&#34;</span><span class="op" id="7103180">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103183">&#34;83356057653e+193&#34;</span><span class="op" id="7103201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103204">&#34;619534293513e+124&#34;</span><span class="op" id="7103223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103226">&#34;2335141086879e+218&#34;</span><span class="op" id="7103246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103249">&#34;36167929443327e-159&#34;</span><span class="op" id="7103270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103273">&#34;609610927149051e-255&#34;</span><span class="op" id="7103295">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103298">&#34;3743626360493413e-165&#34;</span><span class="op" id="7103321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103324">&#34;94080055902682397e-242&#34;</span><span class="op" id="7103348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103351">&#34;899810892172646163e+283&#34;</span><span class="op" id="7103376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103379">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7103405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103408">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7103435">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103438">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7103466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103469">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7103498">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7103502">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103572">&#34;5e-20&#34;</span><span class="op" id="7103579">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103582">&#34;67e+14&#34;</span><span class="op" id="7103590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103593">&#34;985e+15&#34;</span><span class="op" id="7103602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103605">&#34;7693e-42&#34;</span><span class="op" id="7103615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103618">&#34;55895e-16&#34;</span><span class="op" id="7103629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103632">&#34;996622e-44&#34;</span><span class="op" id="7103644">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103647">&#34;7038531e-32&#34;</span><span class="op" id="7103660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103663">&#34;60419369e-46&#34;</span><span class="op" id="7103677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103680">&#34;702990899e-20&#34;</span><span class="op" id="7103695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103698">&#34;6930161142e-48&#34;</span><span class="op" id="7103714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103717">&#34;25933168707e+13&#34;</span><span class="op" id="7103734">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103737">&#34;596428896559e+20&#34;</span><span class="op" id="7103755">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7103759">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103829">&#34;3e-23&#34;</span><span class="op" id="7103836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103839">&#34;57e+18&#34;</span><span class="op" id="7103847">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103850">&#34;789e-35&#34;</span><span class="op" id="7103859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103862">&#34;2539e-18&#34;</span><span class="op" id="7103872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103875">&#34;76173e+28&#34;</span><span class="op" id="7103886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103889">&#34;887745e-11&#34;</span><span class="op" id="7103901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103904">&#34;5382571e-37&#34;</span><span class="op" id="7103917">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103920">&#34;82381273e-35&#34;</span><span class="op" id="7103934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103937">&#34;750486563e-38&#34;</span><span class="op" id="7103952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103955">&#34;3752432815e-39&#34;</span><span class="op" id="7103971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103974">&#34;75224575729e-45&#34;</span><span class="op" id="7103991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103994">&#34;459926601011e+15&#34;</span><span class="op" id="7104012">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104016">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104068">&#34;0&#34;</span><span class="op" id="7104071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104074">&#34;1&#34;</span><span class="op" id="7104077">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104080">&#34;+1&#34;</span><span class="op" id="7104084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104087">&#34;1e23&#34;</span><span class="op" id="7104093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104096">&#34;1E23&#34;</span><span class="op" id="7104102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104105">&#34;100000000000000000000000&#34;</span><span class="op" id="7104131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104134">&#34;1e-100&#34;</span><span class="op" id="7104142">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104145">&#34;123456700&#34;</span><span class="op" id="7104156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104159">&#34;99999999999999974834176&#34;</span><span class="op" id="7104184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104187">&#34;100000000000000000000001&#34;</span><span class="op" id="7104213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104216">&#34;100000000000000008388608&#34;</span><span class="op" id="7104242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104245">&#34;100000000000000016777215&#34;</span><span class="op" id="7104271">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104274">&#34;100000000000000016777216&#34;</span><span class="op" id="7104300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104303">&#34;-1&#34;</span><span class="op" id="7104307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104310">&#34;-0.1&#34;</span><span class="op" id="7104316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104319">&#34;-0&#34;</span><span class="op" id="7104323">,</span>&nbsp;<span class="comment" id="7104325">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104363">&#34;1e-20&#34;</span><span class="op" id="7104370">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104373">&#34;625e-3&#34;</span><span class="op" id="7104381">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104385">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104405">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7104429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104432">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7104457">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104460">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104489">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7104513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104516">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7104541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104544">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104572">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104594">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7104618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104621">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7104646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104649">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104676">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7104702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104705">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7104732">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104736">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104759">&#34;1e308&#34;</span><span class="op" id="7104766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104769">&#34;2e308&#34;</span><span class="op" id="7104776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104779">&#34;1e309&#34;</span><span class="op" id="7104786">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104790">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104808">&#34;1e310&#34;</span><span class="op" id="7104815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104818">&#34;-1e310&#34;</span><span class="op" id="7104826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104829">&#34;1e400&#34;</span><span class="op" id="7104836">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104839">&#34;-1e400&#34;</span><span class="op" id="7104847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104850">&#34;long:1e400000&#34;</span><span class="op" id="7104865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104868">&#34;long:-1e400000&#34;</span><span class="op" id="7104884">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104888">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104905">&#34;1e-305&#34;</span><span class="op" id="7104913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104916">&#34;1e-306&#34;</span><span class="op" id="7104924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104927">&#34;1e-307&#34;</span><span class="op" id="7104935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104938">&#34;1e-308&#34;</span><span class="op" id="7104946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104949">&#34;1e-309&#34;</span><span class="op" id="7104957">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104960">&#34;1e-310&#34;</span><span class="op" id="7104968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104971">&#34;1e-322&#34;</span><span class="op" id="7104979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7104982">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105004">&#34;5e-324&#34;</span><span class="op" id="7105012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105015">&#34;4e-324&#34;</span><span class="op" id="7105023">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105026">&#34;3e-324&#34;</span><span class="op" id="7105034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105037">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105051">&#34;2e-324&#34;</span><span class="op" id="7105059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105062">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105080">&#34;1e-350&#34;</span><span class="op" id="7105088">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105091">&#34;long:1e-400000&#34;</span><span class="op" id="7105107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105110">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105138">&#34;-1e-350&#34;</span><span class="op" id="7105147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105150">&#34;long:-1e-400000&#34;</span><span class="op" id="7105167">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105171">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105200">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105259">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105280">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105301">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105332">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105364">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105451">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7105476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105479">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105566">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7105591">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105595">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105669">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7105693">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105697">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105740">&#34;22.222222222222222&#34;</span><span class="op" id="7105760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105763">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7105773">+</span>&nbsp;<span class="ident" id="7105775">strings</span><span class="op" id="7105782">.</span><span class="ident" id="7105783">Repeat</span><span class="op" id="7105789">(</span><span class="string" id="7105790">&#34;2&#34;</span><span class="op" id="7105793">,</span>&nbsp;<span class="num" id="7105795">4000</span><span class="op" id="7105799">)</span>&nbsp;<span class="op" id="7105801">+</span>&nbsp;<span class="string" id="7105803">&#34;e+1&#34;</span><span class="op" id="7105808">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105812">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105868">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105894">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7105951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7105954">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105992">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7106049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106052">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106083">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7106140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106143">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106209">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7106272">+</span>&nbsp;<span class="ident" id="7106274">strings</span><span class="op" id="7106281">.</span><span class="ident" id="7106282">Repeat</span><span class="op" id="7106288">(</span><span class="string" id="7106289">&#34;0&#34;</span><span class="op" id="7106292">,</span>&nbsp;<span class="num" id="7106294">10000</span><span class="op" id="7106299">)</span>&nbsp;<span class="op" id="7106301">+</span>&nbsp;<span class="string" id="7106303">&#34;1&#34;</span><span class="op" id="7106306">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106310">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106346">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7106394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106397">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106441">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7106489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106492">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106551">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106596">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7106644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106647">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106715">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106760">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7106808">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106812">&#34;1152921504606846975&#34;</span><span class="op" id="7106833">,</span>&nbsp;&nbsp;<span class="comment" id="7106836">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106852">&#34;-1152921504606846975&#34;</span><span class="op" id="7106874">,</span>&nbsp;<span class="comment" id="7106876">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106893">&#34;1152921504606846977&#34;</span><span class="op" id="7106914">,</span>&nbsp;&nbsp;<span class="comment" id="7106917">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106933">&#34;-1152921504606846977&#34;</span><span class="op" id="7106955">,</span>&nbsp;<span class="comment" id="7106957">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106975">&#34;1/3&#34;</span><span class="op" id="7106980">,</span><br>
<span class="lineno"></span><span class="op" id="7106982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7106985">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7107051">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7107111">func</span>&nbsp;<span class="ident" id="7107116">isFinite</span><span class="op" id="7107124">(</span><span class="ident" id="7107125">f</span>&nbsp;<span class="builtintype" id="7107127">float64</span><span class="op" id="7107134">)</span>&nbsp;<span class="builtintype" id="7107136">bool</span>&nbsp;<span class="op" id="7107141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107144">return</span>&nbsp;<span class="ident" id="7107151">math</span><span class="op" id="7107155">.</span><span class="ident" id="7107156">Abs</span><span class="op" id="7107159">(</span><span class="ident" id="7107160">f</span><span class="op" id="7107161">)</span>&nbsp;<span class="op" id="7107163">&lt;=</span>&nbsp;<span class="ident" id="7107166">math</span><span class="op" id="7107170">.</span><span class="ident" id="7107171">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7107182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7107185">func</span>&nbsp;<span class="ident" id="7107190">TestFloat32SpecialCases</span><span class="op" id="7107213">(</span><span class="ident" id="7107214">t</span>&nbsp;<span class="op" id="7107216">*</span><span class="ident" id="7107217">testing</span><span class="op" id="7107224">.</span><span class="ident" id="7107225">T</span><span class="op" id="7107226">)</span>&nbsp;<span class="op" id="7107228">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107231">for</span>&nbsp;<span class="ident" id="7107235">_</span><span class="op" id="7107236">,</span>&nbsp;<span class="ident" id="7107238">input</span>&nbsp;<span class="op" id="7107244">:=</span>&nbsp;<span class="keyword" id="7107247">range</span>&nbsp;<span class="ident" id="7107253">float64inputs</span>&nbsp;<span class="op" id="7107267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107271">if</span>&nbsp;<span class="ident" id="7107274">strings</span><span class="op" id="7107281">.</span><span class="ident" id="7107282">HasPrefix</span><span class="op" id="7107291">(</span><span class="ident" id="7107292">input</span><span class="op" id="7107297">,</span>&nbsp;<span class="string" id="7107299">&#34;long:&#34;</span><span class="op" id="7107306">)</span>&nbsp;<span class="op" id="7107308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107313">if</span>&nbsp;<span class="ident" id="7107316">testing</span><span class="op" id="7107323">.</span><span class="ident" id="7107324">Short</span><span class="op" id="7107329">(</span><span class="op" id="7107330">)</span>&nbsp;<span class="op" id="7107332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107338">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107350">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107355">input</span>&nbsp;<span class="op" id="7107361">=</span>&nbsp;<span class="ident" id="7107363">input</span><span class="op" id="7107368">[</span><span class="builtinfunc" id="7107369">len</span><span class="op" id="7107372">(</span><span class="string" id="7107373">&#34;long:&#34;</span><span class="op" id="7107380">)</span><span class="op" id="7107381">:</span><span class="op" id="7107382">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107391">r</span><span class="op" id="7107392">,</span>&nbsp;<span class="ident" id="7107394">ok</span>&nbsp;<span class="op" id="7107397">:=</span>&nbsp;<span class="builtinfunc" id="7107400">new</span><span class="op" id="7107403">(</span><span class="ident" id="7107404">Rat</span><span class="op" id="7107407">)</span><span class="op" id="7107408">.</span><span class="ident" id="7107409">SetString</span><span class="op" id="7107418">(</span><span class="ident" id="7107419">input</span><span class="op" id="7107424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107428">if</span>&nbsp;<span class="op" id="7107431">!</span><span class="ident" id="7107432">ok</span>&nbsp;<span class="op" id="7107435">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107440">t</span><span class="op" id="7107441">.</span><span class="ident" id="7107442">Errorf</span><span class="op" id="7107448">(</span><span class="string" id="7107449">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7107475">,</span>&nbsp;<span class="ident" id="7107477">input</span><span class="op" id="7107482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107487">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107502">f</span><span class="op" id="7107503">,</span>&nbsp;<span class="ident" id="7107505">exact</span>&nbsp;<span class="op" id="7107511">:=</span>&nbsp;<span class="ident" id="7107514">r</span><span class="op" id="7107515">.</span><span class="ident" id="7107516">Float32</span><span class="op" id="7107523">(</span><span class="op" id="7107524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107529">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107584">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107625">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107687">if</span>&nbsp;<span class="op" id="7107690">!</span><span class="ident" id="7107691">strings</span><span class="op" id="7107698">.</span><span class="ident" id="7107699">Contains</span><span class="op" id="7107707">(</span><span class="ident" id="7107708">input</span><span class="op" id="7107713">,</span>&nbsp;<span class="string" id="7107715">&#34;/&#34;</span><span class="op" id="7107718">)</span>&nbsp;<span class="op" id="7107720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107725">e64</span><span class="op" id="7107728">,</span>&nbsp;<span class="ident" id="7107730">_</span>&nbsp;<span class="op" id="7107732">:=</span>&nbsp;<span class="ident" id="7107735">strconv</span><span class="op" id="7107742">.</span><span class="ident" id="7107743">ParseFloat</span><span class="op" id="7107753">(</span><span class="ident" id="7107754">input</span><span class="op" id="7107759">,</span>&nbsp;<span class="num" id="7107761">32</span><span class="op" id="7107763">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107768">e</span>&nbsp;<span class="op" id="7107770">:=</span>&nbsp;<span class="builtintype" id="7107773">float32</span><span class="op" id="7107780">(</span><span class="ident" id="7107781">e64</span><span class="op" id="7107784">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107790">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107833">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107883">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107929">switch</span>&nbsp;<span class="op" id="7107936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107941">case</span>&nbsp;<span class="ident" id="7107946">math</span><span class="op" id="7107950">.</span><span class="ident" id="7107951">Float32bits</span><span class="op" id="7107962">(</span><span class="ident" id="7107963">e</span><span class="op" id="7107964">)</span>&nbsp;<span class="op" id="7107966">==</span>&nbsp;<span class="ident" id="7107969">math</span><span class="op" id="7107973">.</span><span class="ident" id="7107974">Float32bits</span><span class="op" id="7107985">(</span><span class="ident" id="7107986">f</span><span class="op" id="7107987">)</span><span class="op" id="7107988">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7107994">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108019">case</span>&nbsp;<span class="ident" id="7108024">f</span>&nbsp;<span class="op" id="7108026">==</span>&nbsp;<span class="num" id="7108029">0</span>&nbsp;<span class="op" id="7108031">&amp;&amp;</span>&nbsp;<span class="ident" id="7108034">r</span><span class="op" id="7108035">.</span><span class="ident" id="7108036">Num</span><span class="op" id="7108039">(</span><span class="op" id="7108040">)</span><span class="op" id="7108041">.</span><span class="ident" id="7108042">BitLen</span><span class="op" id="7108048">(</span><span class="op" id="7108049">)</span>&nbsp;<span class="op" id="7108051">==</span>&nbsp;<span class="num" id="7108054">0</span><span class="op" id="7108055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7108061">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108116">default</span><span class="op" id="7108123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108129">t</span><span class="op" id="7108130">.</span><span class="ident" id="7108131">Errorf</span><span class="op" id="7108137">(</span><span class="string" id="7108138">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7108198">,</span>&nbsp;<span class="ident" id="7108200">input</span><span class="op" id="7108205">,</span>&nbsp;<span class="ident" id="7108207">e</span><span class="op" id="7108208">,</span>&nbsp;<span class="ident" id="7108210">e</span><span class="op" id="7108211">,</span>&nbsp;<span class="ident" id="7108213">f</span><span class="op" id="7108214">,</span>&nbsp;<span class="ident" id="7108216">f</span><span class="op" id="7108217">,</span>&nbsp;<span class="ident" id="7108219">f</span><span class="op" id="7108220">-</span><span class="ident" id="7108221">e</span><span class="op" id="7108222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108236">if</span>&nbsp;<span class="op" id="7108239">!</span><span class="ident" id="7108240">isFinite</span><span class="op" id="7108248">(</span><span class="builtintype" id="7108249">float64</span><span class="op" id="7108256">(</span><span class="ident" id="7108257">f</span><span class="op" id="7108258">)</span><span class="op" id="7108259">)</span>&nbsp;<span class="op" id="7108261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108266">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7108282">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108326">if</span>&nbsp;<span class="op" id="7108329">!</span><span class="ident" id="7108330">checkIsBestApprox32</span><span class="op" id="7108349">(</span><span class="ident" id="7108350">t</span><span class="op" id="7108351">,</span>&nbsp;<span class="ident" id="7108353">f</span><span class="op" id="7108354">,</span>&nbsp;<span class="ident" id="7108356">r</span><span class="op" id="7108357">)</span>&nbsp;<span class="op" id="7108359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7108364">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108398">t</span><span class="op" id="7108399">.</span><span class="ident" id="7108400">Errorf</span><span class="op" id="7108406">(</span><span class="string" id="7108407">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7108423">,</span>&nbsp;<span class="ident" id="7108425">input</span><span class="op" id="7108430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7108439">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108485">checkNonLossyRoundtrip32</span><span class="op" id="7108509">(</span><span class="ident" id="7108510">t</span><span class="op" id="7108511">,</span>&nbsp;<span class="ident" id="7108513">f</span><span class="op" id="7108514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7108519">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108565">if</span>&nbsp;<span class="ident" id="7108568">wasExact</span>&nbsp;<span class="op" id="7108577">:=</span>&nbsp;<span class="builtinfunc" id="7108580">new</span><span class="op" id="7108583">(</span><span class="ident" id="7108584">Rat</span><span class="op" id="7108587">)</span><span class="op" id="7108588">.</span><span class="ident" id="7108589">SetFloat64</span><span class="op" id="7108599">(</span><span class="builtintype" id="7108600">float64</span><span class="op" id="7108607">(</span><span class="ident" id="7108608">f</span><span class="op" id="7108609">)</span><span class="op" id="7108610">)</span><span class="op" id="7108611">.</span><span class="ident" id="7108612">Cmp</span><span class="op" id="7108615">(</span><span class="ident" id="7108616">r</span><span class="op" id="7108617">)</span>&nbsp;<span class="op" id="7108619">==</span>&nbsp;<span class="num" id="7108622">0</span><span class="op" id="7108623">;</span>&nbsp;<span class="ident" id="7108625">wasExact</span>&nbsp;<span class="op" id="7108634">!=</span>&nbsp;<span class="ident" id="7108637">exact</span>&nbsp;<span class="op" id="7108643">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108648">t</span><span class="op" id="7108649">.</span><span class="ident" id="7108650">Errorf</span><span class="op" id="7108656">(</span><span class="string" id="7108657">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7108706">,</span>&nbsp;<span class="ident" id="7108708">input</span><span class="op" id="7108713">,</span>&nbsp;<span class="ident" id="7108715">exact</span><span class="op" id="7108720">,</span>&nbsp;<span class="ident" id="7108722">wasExact</span><span class="op" id="7108730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108737">}</span><br>
<span class="lineno"></span><span class="op" id="7108739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7108742">func</span>&nbsp;<span class="ident" id="7108747">TestFloat64SpecialCases</span><span class="op" id="7108770">(</span><span class="ident" id="7108771">t</span>&nbsp;<span class="op" id="7108773">*</span><span class="ident" id="7108774">testing</span><span class="op" id="7108781">.</span><span class="ident" id="7108782">T</span><span class="op" id="7108783">)</span>&nbsp;<span class="op" id="7108785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108788">for</span>&nbsp;<span class="ident" id="7108792">_</span><span class="op" id="7108793">,</span>&nbsp;<span class="ident" id="7108795">input</span>&nbsp;<span class="op" id="7108801">:=</span>&nbsp;<span class="keyword" id="7108804">range</span>&nbsp;<span class="ident" id="7108810">float64inputs</span>&nbsp;<span class="op" id="7108824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108828">if</span>&nbsp;<span class="ident" id="7108831">strings</span><span class="op" id="7108838">.</span><span class="ident" id="7108839">HasPrefix</span><span class="op" id="7108848">(</span><span class="ident" id="7108849">input</span><span class="op" id="7108854">,</span>&nbsp;<span class="string" id="7108856">&#34;long:&#34;</span><span class="op" id="7108863">)</span>&nbsp;<span class="op" id="7108865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108870">if</span>&nbsp;<span class="ident" id="7108873">testing</span><span class="op" id="7108880">.</span><span class="ident" id="7108881">Short</span><span class="op" id="7108886">(</span><span class="op" id="7108887">)</span>&nbsp;<span class="op" id="7108889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108895">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108912">input</span>&nbsp;<span class="op" id="7108918">=</span>&nbsp;<span class="ident" id="7108920">input</span><span class="op" id="7108925">[</span><span class="builtinfunc" id="7108926">len</span><span class="op" id="7108929">(</span><span class="string" id="7108930">&#34;long:&#34;</span><span class="op" id="7108937">)</span><span class="op" id="7108938">:</span><span class="op" id="7108939">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108948">r</span><span class="op" id="7108949">,</span>&nbsp;<span class="ident" id="7108951">ok</span>&nbsp;<span class="op" id="7108954">:=</span>&nbsp;<span class="builtinfunc" id="7108957">new</span><span class="op" id="7108960">(</span><span class="ident" id="7108961">Rat</span><span class="op" id="7108964">)</span><span class="op" id="7108965">.</span><span class="ident" id="7108966">SetString</span><span class="op" id="7108975">(</span><span class="ident" id="7108976">input</span><span class="op" id="7108981">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108985">if</span>&nbsp;<span class="op" id="7108988">!</span><span class="ident" id="7108989">ok</span>&nbsp;<span class="op" id="7108992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108997">t</span><span class="op" id="7108998">.</span><span class="ident" id="7108999">Errorf</span><span class="op" id="7109005">(</span><span class="string" id="7109006">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7109032">,</span>&nbsp;<span class="ident" id="7109034">input</span><span class="op" id="7109039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109044">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109059">f</span><span class="op" id="7109060">,</span>&nbsp;<span class="ident" id="7109062">exact</span>&nbsp;<span class="op" id="7109068">:=</span>&nbsp;<span class="ident" id="7109071">r</span><span class="op" id="7109072">.</span><span class="ident" id="7109073">Float64</span><span class="op" id="7109080">(</span><span class="op" id="7109081">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109086">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109141">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109182">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109244">if</span>&nbsp;<span class="op" id="7109247">!</span><span class="ident" id="7109248">strings</span><span class="op" id="7109255">.</span><span class="ident" id="7109256">Contains</span><span class="op" id="7109264">(</span><span class="ident" id="7109265">input</span><span class="op" id="7109270">,</span>&nbsp;<span class="string" id="7109272">&#34;/&#34;</span><span class="op" id="7109275">)</span>&nbsp;<span class="op" id="7109277">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109282">e</span><span class="op" id="7109283">,</span>&nbsp;<span class="ident" id="7109285">_</span>&nbsp;<span class="op" id="7109287">:=</span>&nbsp;<span class="ident" id="7109290">strconv</span><span class="op" id="7109297">.</span><span class="ident" id="7109298">ParseFloat</span><span class="op" id="7109308">(</span><span class="ident" id="7109309">input</span><span class="op" id="7109314">,</span>&nbsp;<span class="num" id="7109316">64</span><span class="op" id="7109318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109324">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109367">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109417">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109463">switch</span>&nbsp;<span class="op" id="7109470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109475">case</span>&nbsp;<span class="ident" id="7109480">math</span><span class="op" id="7109484">.</span><span class="ident" id="7109485">Float64bits</span><span class="op" id="7109496">(</span><span class="ident" id="7109497">e</span><span class="op" id="7109498">)</span>&nbsp;<span class="op" id="7109500">==</span>&nbsp;<span class="ident" id="7109503">math</span><span class="op" id="7109507">.</span><span class="ident" id="7109508">Float64bits</span><span class="op" id="7109519">(</span><span class="ident" id="7109520">f</span><span class="op" id="7109521">)</span><span class="op" id="7109522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109528">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109553">case</span>&nbsp;<span class="ident" id="7109558">f</span>&nbsp;<span class="op" id="7109560">==</span>&nbsp;<span class="num" id="7109563">0</span>&nbsp;<span class="op" id="7109565">&amp;&amp;</span>&nbsp;<span class="ident" id="7109568">r</span><span class="op" id="7109569">.</span><span class="ident" id="7109570">Num</span><span class="op" id="7109573">(</span><span class="op" id="7109574">)</span><span class="op" id="7109575">.</span><span class="ident" id="7109576">BitLen</span><span class="op" id="7109582">(</span><span class="op" id="7109583">)</span>&nbsp;<span class="op" id="7109585">==</span>&nbsp;<span class="num" id="7109588">0</span><span class="op" id="7109589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109595">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109650">default</span><span class="op" id="7109657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109663">t</span><span class="op" id="7109664">.</span><span class="ident" id="7109665">Errorf</span><span class="op" id="7109671">(</span><span class="string" id="7109672">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7109732">,</span>&nbsp;<span class="ident" id="7109734">input</span><span class="op" id="7109739">,</span>&nbsp;<span class="ident" id="7109741">e</span><span class="op" id="7109742">,</span>&nbsp;<span class="ident" id="7109744">e</span><span class="op" id="7109745">,</span>&nbsp;<span class="ident" id="7109747">f</span><span class="op" id="7109748">,</span>&nbsp;<span class="ident" id="7109750">f</span><span class="op" id="7109751">,</span>&nbsp;<span class="ident" id="7109753">f</span><span class="op" id="7109754">-</span><span class="ident" id="7109755">e</span><span class="op" id="7109756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109770">if</span>&nbsp;<span class="op" id="7109773">!</span><span class="ident" id="7109774">isFinite</span><span class="op" id="7109782">(</span><span class="ident" id="7109783">f</span><span class="op" id="7109784">)</span>&nbsp;<span class="op" id="7109786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109807">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109851">if</span>&nbsp;<span class="op" id="7109854">!</span><span class="ident" id="7109855">checkIsBestApprox64</span><span class="op" id="7109874">(</span><span class="ident" id="7109875">t</span><span class="op" id="7109876">,</span>&nbsp;<span class="ident" id="7109878">f</span><span class="op" id="7109879">,</span>&nbsp;<span class="ident" id="7109881">r</span><span class="op" id="7109882">)</span>&nbsp;<span class="op" id="7109884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109889">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109923">t</span><span class="op" id="7109924">.</span><span class="ident" id="7109925">Errorf</span><span class="op" id="7109931">(</span><span class="string" id="7109932">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7109948">,</span>&nbsp;<span class="ident" id="7109950">input</span><span class="op" id="7109955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7109964">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110010">checkNonLossyRoundtrip64</span><span class="op" id="7110034">(</span><span class="ident" id="7110035">t</span><span class="op" id="7110036">,</span>&nbsp;<span class="ident" id="7110038">f</span><span class="op" id="7110039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7110044">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110090">if</span>&nbsp;<span class="ident" id="7110093">wasExact</span>&nbsp;<span class="op" id="7110102">:=</span>&nbsp;<span class="builtinfunc" id="7110105">new</span><span class="op" id="7110108">(</span><span class="ident" id="7110109">Rat</span><span class="op" id="7110112">)</span><span class="op" id="7110113">.</span><span class="ident" id="7110114">SetFloat64</span><span class="op" id="7110124">(</span><span class="ident" id="7110125">f</span><span class="op" id="7110126">)</span><span class="op" id="7110127">.</span><span class="ident" id="7110128">Cmp</span><span class="op" id="7110131">(</span><span class="ident" id="7110132">r</span><span class="op" id="7110133">)</span>&nbsp;<span class="op" id="7110135">==</span>&nbsp;<span class="num" id="7110138">0</span><span class="op" id="7110139">;</span>&nbsp;<span class="ident" id="7110141">wasExact</span>&nbsp;<span class="op" id="7110150">!=</span>&nbsp;<span class="ident" id="7110153">exact</span>&nbsp;<span class="op" id="7110159">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110164">t</span><span class="op" id="7110165">.</span><span class="ident" id="7110166">Errorf</span><span class="op" id="7110172">(</span><span class="string" id="7110173">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7110222">,</span>&nbsp;<span class="ident" id="7110224">input</span><span class="op" id="7110229">,</span>&nbsp;<span class="ident" id="7110231">exact</span><span class="op" id="7110236">,</span>&nbsp;<span class="ident" id="7110238">wasExact</span><span class="op" id="7110246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110253">}</span><br>
<span class="lineno"></span><span class="op" id="7110255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7110258">func</span>&nbsp;<span class="ident" id="7110263">TestFloat32Distribution</span><span class="op" id="7110286">(</span><span class="ident" id="7110287">t</span>&nbsp;<span class="op" id="7110289">*</span><span class="ident" id="7110290">testing</span><span class="op" id="7110297">.</span><span class="ident" id="7110298">T</span><span class="op" id="7110299">)</span>&nbsp;<span class="op" id="7110301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7110304">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7110364">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7110424">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110476">var</span>&nbsp;<span class="ident" id="7110480">add</span>&nbsp;<span class="op" id="7110484">=</span>&nbsp;<span class="op" id="7110486">[</span><span class="op" id="7110487">]</span><span class="ident" id="7110488">int64</span><span class="op" id="7110493">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110497">0</span><span class="op" id="7110498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110502">1</span><span class="op" id="7110503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110507">3</span><span class="op" id="7110508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110512">5</span><span class="op" id="7110513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110517">7</span><span class="op" id="7110518">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110522">9</span><span class="op" id="7110523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7110527">11</span><span class="op" id="7110529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110535">var</span>&nbsp;<span class="ident" id="7110539">winc</span><span class="op" id="7110543">,</span>&nbsp;<span class="ident" id="7110545">einc</span>&nbsp;<span class="op" id="7110550">=</span>&nbsp;<span class="ident" id="7110552">uint64</span><span class="op" id="7110558">(</span><span class="num" id="7110559">1</span><span class="op" id="7110560">)</span><span class="op" id="7110561">,</span>&nbsp;<span class="num" id="7110563">1</span>&nbsp;<span class="comment" id="7110565">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110597">if</span>&nbsp;<span class="ident" id="7110600">testing</span><span class="op" id="7110607">.</span><span class="ident" id="7110608">Short</span><span class="op" id="7110613">(</span><span class="op" id="7110614">)</span>&nbsp;<span class="op" id="7110616">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110620">winc</span><span class="op" id="7110624">,</span>&nbsp;<span class="ident" id="7110626">einc</span>&nbsp;<span class="op" id="7110631">=</span>&nbsp;<span class="num" id="7110633">5</span><span class="op" id="7110634">,</span>&nbsp;<span class="num" id="7110636">15</span>&nbsp;<span class="comment" id="7110639">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110676">for</span>&nbsp;<span class="ident" id="7110680">_</span><span class="op" id="7110681">,</span>&nbsp;<span class="ident" id="7110683">sign</span>&nbsp;<span class="op" id="7110688">:=</span>&nbsp;<span class="keyword" id="7110691">range</span>&nbsp;<span class="string" id="7110697">&#34;+-&#34;</span>&nbsp;<span class="op" id="7110702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110706">for</span>&nbsp;<span class="ident" id="7110710">_</span><span class="op" id="7110711">,</span>&nbsp;<span class="ident" id="7110713">a</span>&nbsp;<span class="op" id="7110715">:=</span>&nbsp;<span class="keyword" id="7110718">range</span>&nbsp;<span class="ident" id="7110724">add</span>&nbsp;<span class="op" id="7110728">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110733">for</span>&nbsp;<span class="ident" id="7110737">wid</span>&nbsp;<span class="op" id="7110741">:=</span>&nbsp;<span class="ident" id="7110744">uint64</span><span class="op" id="7110750">(</span><span class="num" id="7110751">0</span><span class="op" id="7110752">)</span><span class="op" id="7110753">;</span>&nbsp;<span class="ident" id="7110755">wid</span>&nbsp;<span class="op" id="7110759">&lt;</span>&nbsp;<span class="num" id="7110761">30</span><span class="op" id="7110763">;</span>&nbsp;<span class="ident" id="7110765">wid</span>&nbsp;<span class="op" id="7110769">+=</span>&nbsp;<span class="ident" id="7110772">winc</span>&nbsp;<span class="op" id="7110777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110783">b</span>&nbsp;<span class="op" id="7110785">:=</span>&nbsp;<span class="num" id="7110788">1</span><span class="op" id="7110789">&lt;&lt;</span><span class="ident" id="7110791">wid</span>&nbsp;<span class="op" id="7110795">+</span>&nbsp;<span class="ident" id="7110797">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110803">if</span>&nbsp;<span class="ident" id="7110806">sign</span>&nbsp;<span class="op" id="7110811">==</span>&nbsp;<span class="string" id="7110814">&#39;-&#39;</span>&nbsp;<span class="op" id="7110818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110825">b</span>&nbsp;<span class="op" id="7110827">=</span>&nbsp;<span class="op" id="7110829">-</span><span class="ident" id="7110830">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110836">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110842">for</span>&nbsp;<span class="ident" id="7110846">exp</span>&nbsp;<span class="op" id="7110850">:=</span>&nbsp;<span class="op" id="7110853">-</span><span class="num" id="7110854">150</span><span class="op" id="7110857">;</span>&nbsp;<span class="ident" id="7110859">exp</span>&nbsp;<span class="op" id="7110863">&lt;</span>&nbsp;<span class="num" id="7110865">150</span><span class="op" id="7110868">;</span>&nbsp;<span class="ident" id="7110870">exp</span>&nbsp;<span class="op" id="7110874">+=</span>&nbsp;<span class="ident" id="7110877">einc</span>&nbsp;<span class="op" id="7110882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110889">num</span><span class="op" id="7110892">,</span>&nbsp;<span class="ident" id="7110894">den</span>&nbsp;<span class="op" id="7110898">:=</span>&nbsp;<span class="ident" id="7110901">NewInt</span><span class="op" id="7110907">(</span><span class="ident" id="7110908">b</span><span class="op" id="7110909">)</span><span class="op" id="7110910">,</span>&nbsp;<span class="ident" id="7110912">NewInt</span><span class="op" id="7110918">(</span><span class="num" id="7110919">1</span><span class="op" id="7110920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110927">if</span>&nbsp;<span class="ident" id="7110930">exp</span>&nbsp;<span class="op" id="7110934">&gt;</span>&nbsp;<span class="num" id="7110936">0</span>&nbsp;<span class="op" id="7110938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110946">num</span><span class="op" id="7110949">.</span><span class="ident" id="7110950">Lsh</span><span class="op" id="7110953">(</span><span class="ident" id="7110954">num</span><span class="op" id="7110957">,</span>&nbsp;<span class="builtintype" id="7110959">uint</span><span class="op" id="7110963">(</span><span class="ident" id="7110964">exp</span><span class="op" id="7110967">)</span><span class="op" id="7110968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110975">}</span>&nbsp;<span class="keyword" id="7110977">else</span>&nbsp;<span class="op" id="7110982">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110990">den</span><span class="op" id="7110993">.</span><span class="ident" id="7110994">Lsh</span><span class="op" id="7110997">(</span><span class="ident" id="7110998">den</span><span class="op" id="7111001">,</span>&nbsp;<span class="builtintype" id="7111003">uint</span><span class="op" id="7111007">(</span><span class="op" id="7111008">-</span><span class="ident" id="7111009">exp</span><span class="op" id="7111012">)</span><span class="op" id="7111013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111027">r</span>&nbsp;<span class="op" id="7111029">:=</span>&nbsp;<span class="builtinfunc" id="7111032">new</span><span class="op" id="7111035">(</span><span class="ident" id="7111036">Rat</span><span class="op" id="7111039">)</span><span class="op" id="7111040">.</span><span class="ident" id="7111041">SetFrac</span><span class="op" id="7111048">(</span><span class="ident" id="7111049">num</span><span class="op" id="7111052">,</span>&nbsp;<span class="ident" id="7111054">den</span><span class="op" id="7111057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111064">f</span><span class="op" id="7111065">,</span>&nbsp;<span class="ident" id="7111067">_</span>&nbsp;<span class="op" id="7111069">:=</span>&nbsp;<span class="ident" id="7111072">r</span><span class="op" id="7111073">.</span><span class="ident" id="7111074">Float32</span><span class="op" id="7111081">(</span><span class="op" id="7111082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111090">if</span>&nbsp;<span class="op" id="7111093">!</span><span class="ident" id="7111094">checkIsBestApprox32</span><span class="op" id="7111113">(</span><span class="ident" id="7111114">t</span><span class="op" id="7111115">,</span>&nbsp;<span class="ident" id="7111117">f</span><span class="op" id="7111118">,</span>&nbsp;<span class="ident" id="7111120">r</span><span class="op" id="7111121">)</span>&nbsp;<span class="op" id="7111123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111131">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111168">t</span><span class="op" id="7111169">.</span><span class="ident" id="7111170">Errorf</span><span class="op" id="7111176">(</span><span class="string" id="7111177">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7111240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111249">b</span><span class="op" id="7111250">,</span>&nbsp;<span class="ident" id="7111252">exp</span><span class="op" id="7111255">,</span>&nbsp;<span class="ident" id="7111257">f</span><span class="op" id="7111258">,</span>&nbsp;<span class="ident" id="7111260">f</span><span class="op" id="7111261">,</span>&nbsp;<span class="ident" id="7111263">math</span><span class="op" id="7111267">.</span><span class="ident" id="7111268">Ldexp</span><span class="op" id="7111273">(</span><span class="builtintype" id="7111274">float64</span><span class="op" id="7111281">(</span><span class="ident" id="7111282">b</span><span class="op" id="7111283">)</span><span class="op" id="7111284">,</span>&nbsp;<span class="ident" id="7111286">exp</span><span class="op" id="7111289">)</span><span class="op" id="7111290">,</span>&nbsp;<span class="ident" id="7111292">r</span><span class="op" id="7111293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111300">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111308">checkNonLossyRoundtrip32</span><span class="op" id="7111332">(</span><span class="ident" id="7111333">t</span><span class="op" id="7111334">,</span>&nbsp;<span class="ident" id="7111336">f</span><span class="op" id="7111337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111352">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111355">}</span><br>
<span class="lineno"></span><span class="op" id="7111357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7111360">func</span>&nbsp;<span class="ident" id="7111365">TestFloat64Distribution</span><span class="op" id="7111388">(</span><span class="ident" id="7111389">t</span>&nbsp;<span class="op" id="7111391">*</span><span class="ident" id="7111392">testing</span><span class="op" id="7111399">.</span><span class="ident" id="7111400">T</span><span class="op" id="7111401">)</span>&nbsp;<span class="op" id="7111403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111406">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111466">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111526">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111578">var</span>&nbsp;<span class="ident" id="7111582">add</span>&nbsp;<span class="op" id="7111586">=</span>&nbsp;<span class="op" id="7111588">[</span><span class="op" id="7111589">]</span><span class="ident" id="7111590">int64</span><span class="op" id="7111595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111599">0</span><span class="op" id="7111600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111604">1</span><span class="op" id="7111605">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111609">3</span><span class="op" id="7111610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111614">5</span><span class="op" id="7111615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111619">7</span><span class="op" id="7111620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111624">9</span><span class="op" id="7111625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111629">11</span><span class="op" id="7111631">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111637">var</span>&nbsp;<span class="ident" id="7111641">winc</span><span class="op" id="7111645">,</span>&nbsp;<span class="ident" id="7111647">einc</span>&nbsp;<span class="op" id="7111652">=</span>&nbsp;<span class="ident" id="7111654">uint64</span><span class="op" id="7111660">(</span><span class="num" id="7111661">1</span><span class="op" id="7111662">)</span><span class="op" id="7111663">,</span>&nbsp;<span class="num" id="7111665">1</span>&nbsp;<span class="comment" id="7111667">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111698">if</span>&nbsp;<span class="ident" id="7111701">testing</span><span class="op" id="7111708">.</span><span class="ident" id="7111709">Short</span><span class="op" id="7111714">(</span><span class="op" id="7111715">)</span>&nbsp;<span class="op" id="7111717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111721">winc</span><span class="op" id="7111725">,</span>&nbsp;<span class="ident" id="7111727">einc</span>&nbsp;<span class="op" id="7111732">=</span>&nbsp;<span class="num" id="7111734">10</span><span class="op" id="7111736">,</span>&nbsp;<span class="num" id="7111738">500</span>&nbsp;<span class="comment" id="7111742">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111775">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111779">for</span>&nbsp;<span class="ident" id="7111783">_</span><span class="op" id="7111784">,</span>&nbsp;<span class="ident" id="7111786">sign</span>&nbsp;<span class="op" id="7111791">:=</span>&nbsp;<span class="keyword" id="7111794">range</span>&nbsp;<span class="string" id="7111800">&#34;+-&#34;</span>&nbsp;<span class="op" id="7111805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111809">for</span>&nbsp;<span class="ident" id="7111813">_</span><span class="op" id="7111814">,</span>&nbsp;<span class="ident" id="7111816">a</span>&nbsp;<span class="op" id="7111818">:=</span>&nbsp;<span class="keyword" id="7111821">range</span>&nbsp;<span class="ident" id="7111827">add</span>&nbsp;<span class="op" id="7111831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111836">for</span>&nbsp;<span class="ident" id="7111840">wid</span>&nbsp;<span class="op" id="7111844">:=</span>&nbsp;<span class="ident" id="7111847">uint64</span><span class="op" id="7111853">(</span><span class="num" id="7111854">0</span><span class="op" id="7111855">)</span><span class="op" id="7111856">;</span>&nbsp;<span class="ident" id="7111858">wid</span>&nbsp;<span class="op" id="7111862">&lt;</span>&nbsp;<span class="num" id="7111864">60</span><span class="op" id="7111866">;</span>&nbsp;<span class="ident" id="7111868">wid</span>&nbsp;<span class="op" id="7111872">+=</span>&nbsp;<span class="ident" id="7111875">winc</span>&nbsp;<span class="op" id="7111880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111886">b</span>&nbsp;<span class="op" id="7111888">:=</span>&nbsp;<span class="num" id="7111891">1</span><span class="op" id="7111892">&lt;&lt;</span><span class="ident" id="7111894">wid</span>&nbsp;<span class="op" id="7111898">+</span>&nbsp;<span class="ident" id="7111900">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111906">if</span>&nbsp;<span class="ident" id="7111909">sign</span>&nbsp;<span class="op" id="7111914">==</span>&nbsp;<span class="string" id="7111917">&#39;-&#39;</span>&nbsp;<span class="op" id="7111921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111928">b</span>&nbsp;<span class="op" id="7111930">=</span>&nbsp;<span class="op" id="7111932">-</span><span class="ident" id="7111933">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111945">for</span>&nbsp;<span class="ident" id="7111949">exp</span>&nbsp;<span class="op" id="7111953">:=</span>&nbsp;<span class="op" id="7111956">-</span><span class="num" id="7111957">1100</span><span class="op" id="7111961">;</span>&nbsp;<span class="ident" id="7111963">exp</span>&nbsp;<span class="op" id="7111967">&lt;</span>&nbsp;<span class="num" id="7111969">1100</span><span class="op" id="7111973">;</span>&nbsp;<span class="ident" id="7111975">exp</span>&nbsp;<span class="op" id="7111979">+=</span>&nbsp;<span class="ident" id="7111982">einc</span>&nbsp;<span class="op" id="7111987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111994">num</span><span class="op" id="7111997">,</span>&nbsp;<span class="ident" id="7111999">den</span>&nbsp;<span class="op" id="7112003">:=</span>&nbsp;<span class="ident" id="7112006">NewInt</span><span class="op" id="7112012">(</span><span class="ident" id="7112013">b</span><span class="op" id="7112014">)</span><span class="op" id="7112015">,</span>&nbsp;<span class="ident" id="7112017">NewInt</span><span class="op" id="7112023">(</span><span class="num" id="7112024">1</span><span class="op" id="7112025">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112032">if</span>&nbsp;<span class="ident" id="7112035">exp</span>&nbsp;<span class="op" id="7112039">&gt;</span>&nbsp;<span class="num" id="7112041">0</span>&nbsp;<span class="op" id="7112043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112051">num</span><span class="op" id="7112054">.</span><span class="ident" id="7112055">Lsh</span><span class="op" id="7112058">(</span><span class="ident" id="7112059">num</span><span class="op" id="7112062">,</span>&nbsp;<span class="builtintype" id="7112064">uint</span><span class="op" id="7112068">(</span><span class="ident" id="7112069">exp</span><span class="op" id="7112072">)</span><span class="op" id="7112073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112080">}</span>&nbsp;<span class="keyword" id="7112082">else</span>&nbsp;<span class="op" id="7112087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112095">den</span><span class="op" id="7112098">.</span><span class="ident" id="7112099">Lsh</span><span class="op" id="7112102">(</span><span class="ident" id="7112103">den</span><span class="op" id="7112106">,</span>&nbsp;<span class="builtintype" id="7112108">uint</span><span class="op" id="7112112">(</span><span class="op" id="7112113">-</span><span class="ident" id="7112114">exp</span><span class="op" id="7112117">)</span><span class="op" id="7112118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112125">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112132">r</span>&nbsp;<span class="op" id="7112134">:=</span>&nbsp;<span class="builtinfunc" id="7112137">new</span><span class="op" id="7112140">(</span><span class="ident" id="7112141">Rat</span><span class="op" id="7112144">)</span><span class="op" id="7112145">.</span><span class="ident" id="7112146">SetFrac</span><span class="op" id="7112153">(</span><span class="ident" id="7112154">num</span><span class="op" id="7112157">,</span>&nbsp;<span class="ident" id="7112159">den</span><span class="op" id="7112162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112169">f</span><span class="op" id="7112170">,</span>&nbsp;<span class="ident" id="7112172">_</span>&nbsp;<span class="op" id="7112174">:=</span>&nbsp;<span class="ident" id="7112177">r</span><span class="op" id="7112178">.</span><span class="ident" id="7112179">Float64</span><span class="op" id="7112186">(</span><span class="op" id="7112187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112195">if</span>&nbsp;<span class="op" id="7112198">!</span><span class="ident" id="7112199">checkIsBestApprox64</span><span class="op" id="7112218">(</span><span class="ident" id="7112219">t</span><span class="op" id="7112220">,</span>&nbsp;<span class="ident" id="7112222">f</span><span class="op" id="7112223">,</span>&nbsp;<span class="ident" id="7112225">r</span><span class="op" id="7112226">)</span>&nbsp;<span class="op" id="7112228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7112236">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112273">t</span><span class="op" id="7112274">.</span><span class="ident" id="7112275">Errorf</span><span class="op" id="7112281">(</span><span class="string" id="7112282">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7112345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112354">b</span><span class="op" id="7112355">,</span>&nbsp;<span class="ident" id="7112357">exp</span><span class="op" id="7112360">,</span>&nbsp;<span class="ident" id="7112362">f</span><span class="op" id="7112363">,</span>&nbsp;<span class="ident" id="7112365">f</span><span class="op" id="7112366">,</span>&nbsp;<span class="ident" id="7112368">math</span><span class="op" id="7112372">.</span><span class="ident" id="7112373">Ldexp</span><span class="op" id="7112378">(</span><span class="builtintype" id="7112379">float64</span><span class="op" id="7112386">(</span><span class="ident" id="7112387">b</span><span class="op" id="7112388">)</span><span class="op" id="7112389">,</span>&nbsp;<span class="ident" id="7112391">exp</span><span class="op" id="7112394">)</span><span class="op" id="7112395">,</span>&nbsp;<span class="ident" id="7112397">r</span><span class="op" id="7112398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112413">checkNonLossyRoundtrip64</span><span class="op" id="7112437">(</span><span class="ident" id="7112438">t</span><span class="op" id="7112439">,</span>&nbsp;<span class="ident" id="7112441">f</span><span class="op" id="7112442">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112460">}</span><br>
<span class="lineno"></span><span class="op" id="7112462">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7112465">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7112537">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7112553">func</span>&nbsp;<span class="ident" id="7112558">TestSetFloat64NonFinite</span><span class="op" id="7112581">(</span><span class="ident" id="7112582">t</span>&nbsp;<span class="op" id="7112584">*</span><span class="ident" id="7112585">testing</span><span class="op" id="7112592">.</span><span class="ident" id="7112593">T</span><span class="op" id="7112594">)</span>&nbsp;<span class="op" id="7112596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112599">for</span>&nbsp;<span class="ident" id="7112603">_</span><span class="op" id="7112604">,</span>&nbsp;<span class="ident" id="7112606">f</span>&nbsp;<span class="op" id="7112608">:=</span>&nbsp;<span class="keyword" id="7112611">range</span>&nbsp;<span class="op" id="7112617">[</span><span class="op" id="7112618">]</span><span class="builtintype" id="7112619">float64</span><span class="op" id="7112626">{</span><span class="ident" id="7112627">math</span><span class="op" id="7112631">.</span><span class="ident" id="7112632">NaN</span><span class="op" id="7112635">(</span><span class="op" id="7112636">)</span><span class="op" id="7112637">,</span>&nbsp;<span class="ident" id="7112639">math</span><span class="op" id="7112643">.</span><span class="ident" id="7112644">Inf</span><span class="op" id="7112647">(</span><span class="op" id="7112648">+</span><span class="num" id="7112649">1</span><span class="op" id="7112650">)</span><span class="op" id="7112651">,</span>&nbsp;<span class="ident" id="7112653">math</span><span class="op" id="7112657">.</span><span class="ident" id="7112658">Inf</span><span class="op" id="7112661">(</span><span class="op" id="7112662">-</span><span class="num" id="7112663">1</span><span class="op" id="7112664">)</span><span class="op" id="7112665">}</span>&nbsp;<span class="op" id="7112667">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112671">var</span>&nbsp;<span class="ident" id="7112675">r</span>&nbsp;<span class="ident" id="7112677">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112683">if</span>&nbsp;<span class="ident" id="7112686">r2</span>&nbsp;<span class="op" id="7112689">:=</span>&nbsp;<span class="ident" id="7112692">r</span><span class="op" id="7112693">.</span><span class="ident" id="7112694">SetFloat64</span><span class="op" id="7112704">(</span><span class="ident" id="7112705">f</span><span class="op" id="7112706">)</span><span class="op" id="7112707">;</span>&nbsp;<span class="ident" id="7112709">r2</span>&nbsp;<span class="op" id="7112712">!=</span>&nbsp;<span class="ident" id="7112715">nil</span>&nbsp;<span class="op" id="7112719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112724">t</span><span class="op" id="7112725">.</span><span class="ident" id="7112726">Errorf</span><span class="op" id="7112732">(</span><span class="string" id="7112733">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7112766">,</span>&nbsp;<span class="ident" id="7112768">f</span><span class="op" id="7112769">,</span>&nbsp;<span class="ident" id="7112771">r2</span><span class="op" id="7112773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112780">}</span><br>
<span class="lineno">1015</span><span class="op" id="7112782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7112785">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7112858">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7112885">func</span>&nbsp;<span class="ident" id="7112890">checkNonLossyRoundtrip32</span><span class="op" id="7112914">(</span><span class="ident" id="7112915">t</span>&nbsp;<span class="op" id="7112917">*</span><span class="ident" id="7112918">testing</span><span class="op" id="7112925">.</span><span class="ident" id="7112926">T</span><span class="op" id="7112927">,</span>&nbsp;<span class="ident" id="7112929">f</span>&nbsp;<span class="builtintype" id="7112931">float32</span><span class="op" id="7112938">)</span>&nbsp;<span class="op" id="7112940">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112943">if</span>&nbsp;<span class="op" id="7112946">!</span><span class="ident" id="7112947">isFinite</span><span class="op" id="7112955">(</span><span class="builtintype" id="7112956">float64</span><span class="op" id="7112963">(</span><span class="ident" id="7112964">f</span><span class="op" id="7112965">)</span><span class="op" id="7112966">)</span>&nbsp;<span class="op" id="7112968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112972">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112983">r</span>&nbsp;<span class="op" id="7112985">:=</span>&nbsp;<span class="builtinfunc" id="7112988">new</span><span class="op" id="7112991">(</span><span class="ident" id="7112992">Rat</span><span class="op" id="7112995">)</span><span class="op" id="7112996">.</span><span class="ident" id="7112997">SetFloat64</span><span class="op" id="7113007">(</span><span class="builtintype" id="7113008">float64</span><span class="op" id="7113015">(</span><span class="ident" id="7113016">f</span><span class="op" id="7113017">)</span><span class="op" id="7113018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113021">if</span>&nbsp;<span class="ident" id="7113024">r</span>&nbsp;<span class="op" id="7113026">==</span>&nbsp;<span class="ident" id="7113029">nil</span>&nbsp;<span class="op" id="7113033">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113037">t</span><span class="op" id="7113038">.</span><span class="ident" id="7113039">Errorf</span><span class="op" id="7113045">(</span><span class="string" id="7113046">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7113087">,</span>&nbsp;<span class="ident" id="7113089">f</span><span class="op" id="7113090">,</span>&nbsp;<span class="ident" id="7113092">f</span><span class="op" id="7113093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113097">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113108">f2</span><span class="op" id="7113110">,</span>&nbsp;<span class="ident" id="7113112">exact</span>&nbsp;<span class="op" id="7113118">:=</span>&nbsp;<span class="ident" id="7113121">r</span><span class="op" id="7113122">.</span><span class="ident" id="7113123">Float32</span><span class="op" id="7113130">(</span><span class="op" id="7113131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113134">if</span>&nbsp;<span class="ident" id="7113137">f</span>&nbsp;<span class="op" id="7113139">!=</span>&nbsp;<span class="ident" id="7113142">f2</span>&nbsp;<span class="op" id="7113145">||</span>&nbsp;<span class="op" id="7113148">!</span><span class="ident" id="7113149">exact</span>&nbsp;<span class="op" id="7113155">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113159">t</span><span class="op" id="7113160">.</span><span class="ident" id="7113161">Errorf</span><span class="op" id="7113167">(</span><span class="string" id="7113168">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7113251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113256">f</span><span class="op" id="7113257">,</span>&nbsp;<span class="ident" id="7113259">f2</span><span class="op" id="7113261">,</span>&nbsp;<span class="ident" id="7113263">f2</span><span class="op" id="7113265">,</span>&nbsp;<span class="ident" id="7113267">exact</span><span class="op" id="7113272">,</span>&nbsp;<span class="ident" id="7113274">f</span><span class="op" id="7113275">,</span>&nbsp;<span class="ident" id="7113277">f</span><span class="op" id="7113278">,</span>&nbsp;<span class="builtintype" id="7113280">true</span><span class="op" id="7113284">,</span>&nbsp;<span class="ident" id="7113286">f2</span><span class="op" id="7113288">-</span><span class="ident" id="7113289">f</span><span class="op" id="7113290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113293">}</span><br>
<span class="lineno"></span><span class="op" id="7113295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7113298">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7113371">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7113398">func</span>&nbsp;<span class="ident" id="7113403">checkNonLossyRoundtrip64</span><span class="op" id="7113427">(</span><span class="ident" id="7113428">t</span>&nbsp;<span class="op" id="7113430">*</span><span class="ident" id="7113431">testing</span><span class="op" id="7113438">.</span><span class="ident" id="7113439">T</span><span class="op" id="7113440">,</span>&nbsp;<span class="ident" id="7113442">f</span>&nbsp;<span class="builtintype" id="7113444">float64</span><span class="op" id="7113451">)</span>&nbsp;<span class="op" id="7113453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113456">if</span>&nbsp;<span class="op" id="7113459">!</span><span class="ident" id="7113460">isFinite</span><span class="op" id="7113468">(</span><span class="ident" id="7113469">f</span><span class="op" id="7113470">)</span>&nbsp;<span class="op" id="7113472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113476">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113487">r</span>&nbsp;<span class="op" id="7113489">:=</span>&nbsp;<span class="builtinfunc" id="7113492">new</span><span class="op" id="7113495">(</span><span class="ident" id="7113496">Rat</span><span class="op" id="7113499">)</span><span class="op" id="7113500">.</span><span class="ident" id="7113501">SetFloat64</span><span class="op" id="7113511">(</span><span class="ident" id="7113512">f</span><span class="op" id="7113513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113516">if</span>&nbsp;<span class="ident" id="7113519">r</span>&nbsp;<span class="op" id="7113521">==</span>&nbsp;<span class="ident" id="7113524">nil</span>&nbsp;<span class="op" id="7113528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113532">t</span><span class="op" id="7113533">.</span><span class="ident" id="7113534">Errorf</span><span class="op" id="7113540">(</span><span class="string" id="7113541">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7113573">,</span>&nbsp;<span class="ident" id="7113575">f</span><span class="op" id="7113576">,</span>&nbsp;<span class="ident" id="7113578">f</span><span class="op" id="7113579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113583">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113594">f2</span><span class="op" id="7113596">,</span>&nbsp;<span class="ident" id="7113598">exact</span>&nbsp;<span class="op" id="7113604">:=</span>&nbsp;<span class="ident" id="7113607">r</span><span class="op" id="7113608">.</span><span class="ident" id="7113609">Float64</span><span class="op" id="7113616">(</span><span class="op" id="7113617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113620">if</span>&nbsp;<span class="ident" id="7113623">f</span>&nbsp;<span class="op" id="7113625">!=</span>&nbsp;<span class="ident" id="7113628">f2</span>&nbsp;<span class="op" id="7113631">||</span>&nbsp;<span class="op" id="7113634">!</span><span class="ident" id="7113635">exact</span>&nbsp;<span class="op" id="7113641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113645">t</span><span class="op" id="7113646">.</span><span class="ident" id="7113647">Errorf</span><span class="op" id="7113653">(</span><span class="string" id="7113654">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7113728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113733">f</span><span class="op" id="7113734">,</span>&nbsp;<span class="ident" id="7113736">f2</span><span class="op" id="7113738">,</span>&nbsp;<span class="ident" id="7113740">f2</span><span class="op" id="7113742">,</span>&nbsp;<span class="ident" id="7113744">exact</span><span class="op" id="7113749">,</span>&nbsp;<span class="ident" id="7113751">f</span><span class="op" id="7113752">,</span>&nbsp;<span class="ident" id="7113754">f</span><span class="op" id="7113755">,</span>&nbsp;<span class="builtintype" id="7113757">true</span><span class="op" id="7113761">,</span>&nbsp;<span class="ident" id="7113763">f2</span><span class="op" id="7113765">-</span><span class="ident" id="7113766">f</span><span class="op" id="7113767">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113770">}</span><br>
<span class="lineno"></span><span class="op" id="7113772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7113775">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7113833">func</span>&nbsp;<span class="ident" id="7113838">delta</span><span class="op" id="7113843">(</span><span class="ident" id="7113844">r</span>&nbsp;<span class="op" id="7113846">*</span><span class="ident" id="7113847">Rat</span><span class="op" id="7113850">,</span>&nbsp;<span class="ident" id="7113852">f</span>&nbsp;<span class="builtintype" id="7113854">float64</span><span class="op" id="7113861">)</span>&nbsp;<span class="op" id="7113863">*</span><span class="ident" id="7113864">Rat</span>&nbsp;<span class="op" id="7113868">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113871">d</span>&nbsp;<span class="op" id="7113873">:=</span>&nbsp;<span class="builtinfunc" id="7113876">new</span><span class="op" id="7113879">(</span><span class="ident" id="7113880">Rat</span><span class="op" id="7113883">)</span><span class="op" id="7113884">.</span><span class="ident" id="7113885">Sub</span><span class="op" id="7113888">(</span><span class="ident" id="7113889">r</span><span class="op" id="7113890">,</span>&nbsp;<span class="builtinfunc" id="7113892">new</span><span class="op" id="7113895">(</span><span class="ident" id="7113896">Rat</span><span class="op" id="7113899">)</span><span class="op" id="7113900">.</span><span class="ident" id="7113901">SetFloat64</span><span class="op" id="7113911">(</span><span class="ident" id="7113912">f</span><span class="op" id="7113913">)</span><span class="op" id="7113914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113917">return</span>&nbsp;<span class="ident" id="7113924">d</span><span class="op" id="7113925">.</span><span class="ident" id="7113926">Abs</span><span class="op" id="7113929">(</span><span class="ident" id="7113930">d</span><span class="op" id="7113931">)</span><br>
<span class="lineno"></span><span class="op" id="7113933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7113936">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7114002">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7114025">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7114053">func</span>&nbsp;<span class="ident" id="7114058">checkIsBestApprox32</span><span class="op" id="7114077">(</span><span class="ident" id="7114078">t</span>&nbsp;<span class="op" id="7114080">*</span><span class="ident" id="7114081">testing</span><span class="op" id="7114088">.</span><span class="ident" id="7114089">T</span><span class="op" id="7114090">,</span>&nbsp;<span class="ident" id="7114092">f</span>&nbsp;<span class="builtintype" id="7114094">float32</span><span class="op" id="7114101">,</span>&nbsp;<span class="ident" id="7114103">r</span>&nbsp;<span class="op" id="7114105">*</span><span class="ident" id="7114106">Rat</span><span class="op" id="7114109">)</span>&nbsp;<span class="builtintype" id="7114111">bool</span>&nbsp;<span class="op" id="7114116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114119">if</span>&nbsp;<span class="ident" id="7114122">math</span><span class="op" id="7114126">.</span><span class="ident" id="7114127">Abs</span><span class="op" id="7114130">(</span><span class="builtintype" id="7114131">float64</span><span class="op" id="7114138">(</span><span class="ident" id="7114139">f</span><span class="op" id="7114140">)</span><span class="op" id="7114141">)</span>&nbsp;<span class="op" id="7114143">&gt;=</span>&nbsp;<span class="ident" id="7114146">math</span><span class="op" id="7114150">.</span><span class="ident" id="7114151">MaxFloat32</span>&nbsp;<span class="op" id="7114162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7114166">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7114237">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114285">return</span>&nbsp;<span class="builtintype" id="7114292">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7114302">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114369">f0</span>&nbsp;<span class="op" id="7114372">:=</span>&nbsp;<span class="ident" id="7114375">math</span><span class="op" id="7114379">.</span><span class="ident" id="7114380">Nextafter32</span><span class="op" id="7114391">(</span><span class="ident" id="7114392">f</span><span class="op" id="7114393">,</span>&nbsp;<span class="builtintype" id="7114395">float32</span><span class="op" id="7114402">(</span><span class="ident" id="7114403">math</span><span class="op" id="7114407">.</span><span class="ident" id="7114408">Inf</span><span class="op" id="7114411">(</span><span class="op" id="7114412">-</span><span class="num" id="7114413">1</span><span class="op" id="7114414">)</span><span class="op" id="7114415">)</span><span class="op" id="7114416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114419">f1</span>&nbsp;<span class="op" id="7114422">:=</span>&nbsp;<span class="ident" id="7114425">math</span><span class="op" id="7114429">.</span><span class="ident" id="7114430">Nextafter32</span><span class="op" id="7114441">(</span><span class="ident" id="7114442">f</span><span class="op" id="7114443">,</span>&nbsp;<span class="builtintype" id="7114445">float32</span><span class="op" id="7114452">(</span><span class="ident" id="7114453">math</span><span class="op" id="7114457">.</span><span class="ident" id="7114458">Inf</span><span class="op" id="7114461">(</span><span class="op" id="7114462">+</span><span class="num" id="7114463">1</span><span class="op" id="7114464">)</span><span class="op" id="7114465">)</span><span class="op" id="7114466">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7114470">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114535">df</span>&nbsp;<span class="op" id="7114538">:=</span>&nbsp;<span class="ident" id="7114541">delta</span><span class="op" id="7114546">(</span><span class="ident" id="7114547">r</span><span class="op" id="7114548">,</span>&nbsp;<span class="builtintype" id="7114550">float64</span><span class="op" id="7114557">(</span><span class="ident" id="7114558">f</span><span class="op" id="7114559">)</span><span class="op" id="7114560">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114563">df0</span>&nbsp;<span class="op" id="7114567">:=</span>&nbsp;<span class="ident" id="7114570">delta</span><span class="op" id="7114575">(</span><span class="ident" id="7114576">r</span><span class="op" id="7114577">,</span>&nbsp;<span class="builtintype" id="7114579">float64</span><span class="op" id="7114586">(</span><span class="ident" id="7114587">f0</span><span class="op" id="7114589">)</span><span class="op" id="7114590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114593">df1</span>&nbsp;<span class="op" id="7114597">:=</span>&nbsp;<span class="ident" id="7114600">delta</span><span class="op" id="7114605">(</span><span class="ident" id="7114606">r</span><span class="op" id="7114607">,</span>&nbsp;<span class="builtintype" id="7114609">float64</span><span class="op" id="7114616">(</span><span class="ident" id="7114617">f1</span><span class="op" id="7114619">)</span><span class="op" id="7114620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114623">if</span>&nbsp;<span class="ident" id="7114626">df</span><span class="op" id="7114628">.</span><span class="ident" id="7114629">Cmp</span><span class="op" id="7114632">(</span><span class="ident" id="7114633">df0</span><span class="op" id="7114636">)</span>&nbsp;<span class="op" id="7114638">&gt;</span>&nbsp;<span class="num" id="7114640">0</span>&nbsp;<span class="op" id="7114642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114646">t</span><span class="op" id="7114647">.</span><span class="ident" id="7114648">Errorf</span><span class="op" id="7114654">(</span><span class="string" id="7114655">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7114724">,</span>&nbsp;<span class="ident" id="7114726">r</span><span class="op" id="7114727">,</span>&nbsp;<span class="ident" id="7114729">f</span><span class="op" id="7114730">,</span>&nbsp;<span class="ident" id="7114732">f</span><span class="op" id="7114733">,</span>&nbsp;<span class="ident" id="7114735">f0</span><span class="op" id="7114737">,</span>&nbsp;<span class="ident" id="7114739">f0</span><span class="op" id="7114741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114745">return</span>&nbsp;<span class="builtintype" id="7114752">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114762">if</span>&nbsp;<span class="ident" id="7114765">df</span><span class="op" id="7114767">.</span><span class="ident" id="7114768">Cmp</span><span class="op" id="7114771">(</span><span class="ident" id="7114772">df1</span><span class="op" id="7114775">)</span>&nbsp;<span class="op" id="7114777">&gt;</span>&nbsp;<span class="num" id="7114779">0</span>&nbsp;<span class="op" id="7114781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114785">t</span><span class="op" id="7114786">.</span><span class="ident" id="7114787">Errorf</span><span class="op" id="7114793">(</span><span class="string" id="7114794">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7114859">,</span>&nbsp;<span class="ident" id="7114861">r</span><span class="op" id="7114862">,</span>&nbsp;<span class="ident" id="7114864">f</span><span class="op" id="7114865">,</span>&nbsp;<span class="ident" id="7114867">f</span><span class="op" id="7114868">,</span>&nbsp;<span class="ident" id="7114870">f1</span><span class="op" id="7114872">,</span>&nbsp;<span class="ident" id="7114874">f1</span><span class="op" id="7114876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114880">return</span>&nbsp;<span class="builtintype" id="7114887">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114894">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114897">if</span>&nbsp;<span class="ident" id="7114900">df</span><span class="op" id="7114902">.</span><span class="ident" id="7114903">Cmp</span><span class="op" id="7114906">(</span><span class="ident" id="7114907">df0</span><span class="op" id="7114910">)</span>&nbsp;<span class="op" id="7114912">==</span>&nbsp;<span class="num" id="7114915">0</span>&nbsp;<span class="op" id="7114917">&amp;&amp;</span>&nbsp;<span class="op" id="7114920">!</span><span class="ident" id="7114921">isEven32</span><span class="op" id="7114929">(</span><span class="ident" id="7114930">f</span><span class="op" id="7114931">)</span>&nbsp;<span class="op" id="7114933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114937">t</span><span class="op" id="7114938">.</span><span class="ident" id="7114939">Errorf</span><span class="op" id="7114945">(</span><span class="string" id="7114946">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7115023">,</span>&nbsp;<span class="ident" id="7115025">r</span><span class="op" id="7115026">,</span>&nbsp;<span class="ident" id="7115028">f</span><span class="op" id="7115029">,</span>&nbsp;<span class="ident" id="7115031">f</span><span class="op" id="7115032">,</span>&nbsp;<span class="ident" id="7115034">f0</span><span class="op" id="7115036">,</span>&nbsp;<span class="ident" id="7115038">f0</span><span class="op" id="7115040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115044">return</span>&nbsp;<span class="builtintype" id="7115051">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115061">if</span>&nbsp;<span class="ident" id="7115064">df</span><span class="op" id="7115066">.</span><span class="ident" id="7115067">Cmp</span><span class="op" id="7115070">(</span><span class="ident" id="7115071">df1</span><span class="op" id="7115074">)</span>&nbsp;<span class="op" id="7115076">==</span>&nbsp;<span class="num" id="7115079">0</span>&nbsp;<span class="op" id="7115081">&amp;&amp;</span>&nbsp;<span class="op" id="7115084">!</span><span class="ident" id="7115085">isEven32</span><span class="op" id="7115093">(</span><span class="ident" id="7115094">f</span><span class="op" id="7115095">)</span>&nbsp;<span class="op" id="7115097">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115101">t</span><span class="op" id="7115102">.</span><span class="ident" id="7115103">Errorf</span><span class="op" id="7115109">(</span><span class="string" id="7115110">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7115187">,</span>&nbsp;<span class="ident" id="7115189">r</span><span class="op" id="7115190">,</span>&nbsp;<span class="ident" id="7115192">f</span><span class="op" id="7115193">,</span>&nbsp;<span class="ident" id="7115195">f</span><span class="op" id="7115196">,</span>&nbsp;<span class="ident" id="7115198">f1</span><span class="op" id="7115200">,</span>&nbsp;<span class="ident" id="7115202">f1</span><span class="op" id="7115204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115208">return</span>&nbsp;<span class="builtintype" id="7115215">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115225">return</span>&nbsp;<span class="builtintype" id="7115232">true</span><br>
<span class="lineno"></span><span class="op" id="7115237">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7115240">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7115306">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7115329">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7115357">func</span>&nbsp;<span class="ident" id="7115362">checkIsBestApprox64</span><span class="op" id="7115381">(</span><span class="ident" id="7115382">t</span>&nbsp;<span class="op" id="7115384">*</span><span class="ident" id="7115385">testing</span><span class="op" id="7115392">.</span><span class="ident" id="7115393">T</span><span class="op" id="7115394">,</span>&nbsp;<span class="ident" id="7115396">f</span>&nbsp;<span class="builtintype" id="7115398">float64</span><span class="op" id="7115405">,</span>&nbsp;<span class="ident" id="7115407">r</span>&nbsp;<span class="op" id="7115409">*</span><span class="ident" id="7115410">Rat</span><span class="op" id="7115413">)</span>&nbsp;<span class="builtintype" id="7115415">bool</span>&nbsp;<span class="op" id="7115420">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115423">if</span>&nbsp;<span class="ident" id="7115426">math</span><span class="op" id="7115430">.</span><span class="ident" id="7115431">Abs</span><span class="op" id="7115434">(</span><span class="ident" id="7115435">f</span><span class="op" id="7115436">)</span>&nbsp;<span class="op" id="7115438">&gt;=</span>&nbsp;<span class="ident" id="7115441">math</span><span class="op" id="7115445">.</span><span class="ident" id="7115446">MaxFloat64</span>&nbsp;<span class="op" id="7115457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7115461">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7115532">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115580">return</span>&nbsp;<span class="builtintype" id="7115587">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115593">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7115597">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115664">f0</span>&nbsp;<span class="op" id="7115667">:=</span>&nbsp;<span class="ident" id="7115670">math</span><span class="op" id="7115674">.</span><span class="ident" id="7115675">Nextafter</span><span class="op" id="7115684">(</span><span class="ident" id="7115685">f</span><span class="op" id="7115686">,</span>&nbsp;<span class="ident" id="7115688">math</span><span class="op" id="7115692">.</span><span class="ident" id="7115693">Inf</span><span class="op" id="7115696">(</span><span class="op" id="7115697">-</span><span class="num" id="7115698">1</span><span class="op" id="7115699">)</span><span class="op" id="7115700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115703">f1</span>&nbsp;<span class="op" id="7115706">:=</span>&nbsp;<span class="ident" id="7115709">math</span><span class="op" id="7115713">.</span><span class="ident" id="7115714">Nextafter</span><span class="op" id="7115723">(</span><span class="ident" id="7115724">f</span><span class="op" id="7115725">,</span>&nbsp;<span class="ident" id="7115727">math</span><span class="op" id="7115731">.</span><span class="ident" id="7115732">Inf</span><span class="op" id="7115735">(</span><span class="op" id="7115736">+</span><span class="num" id="7115737">1</span><span class="op" id="7115738">)</span><span class="op" id="7115739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7115743">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115808">df</span>&nbsp;<span class="op" id="7115811">:=</span>&nbsp;<span class="ident" id="7115814">delta</span><span class="op" id="7115819">(</span><span class="ident" id="7115820">r</span><span class="op" id="7115821">,</span>&nbsp;<span class="ident" id="7115823">f</span><span class="op" id="7115824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115827">df0</span>&nbsp;<span class="op" id="7115831">:=</span>&nbsp;<span class="ident" id="7115834">delta</span><span class="op" id="7115839">(</span><span class="ident" id="7115840">r</span><span class="op" id="7115841">,</span>&nbsp;<span class="ident" id="7115843">f0</span><span class="op" id="7115845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115848">df1</span>&nbsp;<span class="op" id="7115852">:=</span>&nbsp;<span class="ident" id="7115855">delta</span><span class="op" id="7115860">(</span><span class="ident" id="7115861">r</span><span class="op" id="7115862">,</span>&nbsp;<span class="ident" id="7115864">f1</span><span class="op" id="7115866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115869">if</span>&nbsp;<span class="ident" id="7115872">df</span><span class="op" id="7115874">.</span><span class="ident" id="7115875">Cmp</span><span class="op" id="7115878">(</span><span class="ident" id="7115879">df0</span><span class="op" id="7115882">)</span>&nbsp;<span class="op" id="7115884">&gt;</span>&nbsp;<span class="num" id="7115886">0</span>&nbsp;<span class="op" id="7115888">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115892">t</span><span class="op" id="7115893">.</span><span class="ident" id="7115894">Errorf</span><span class="op" id="7115900">(</span><span class="string" id="7115901">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7115970">,</span>&nbsp;<span class="ident" id="7115972">r</span><span class="op" id="7115973">,</span>&nbsp;<span class="ident" id="7115975">f</span><span class="op" id="7115976">,</span>&nbsp;<span class="ident" id="7115978">f</span><span class="op" id="7115979">,</span>&nbsp;<span class="ident" id="7115981">f0</span><span class="op" id="7115983">,</span>&nbsp;<span class="ident" id="7115985">f0</span><span class="op" id="7115987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115991">return</span>&nbsp;<span class="builtintype" id="7115998">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116008">if</span>&nbsp;<span class="ident" id="7116011">df</span><span class="op" id="7116013">.</span><span class="ident" id="7116014">Cmp</span><span class="op" id="7116017">(</span><span class="ident" id="7116018">df1</span><span class="op" id="7116021">)</span>&nbsp;<span class="op" id="7116023">&gt;</span>&nbsp;<span class="num" id="7116025">0</span>&nbsp;<span class="op" id="7116027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116031">t</span><span class="op" id="7116032">.</span><span class="ident" id="7116033">Errorf</span><span class="op" id="7116039">(</span><span class="string" id="7116040">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7116105">,</span>&nbsp;<span class="ident" id="7116107">r</span><span class="op" id="7116108">,</span>&nbsp;<span class="ident" id="7116110">f</span><span class="op" id="7116111">,</span>&nbsp;<span class="ident" id="7116113">f</span><span class="op" id="7116114">,</span>&nbsp;<span class="ident" id="7116116">f1</span><span class="op" id="7116118">,</span>&nbsp;<span class="ident" id="7116120">f1</span><span class="op" id="7116122">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116126">return</span>&nbsp;<span class="builtintype" id="7116133">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116143">if</span>&nbsp;<span class="ident" id="7116146">df</span><span class="op" id="7116148">.</span><span class="ident" id="7116149">Cmp</span><span class="op" id="7116152">(</span><span class="ident" id="7116153">df0</span><span class="op" id="7116156">)</span>&nbsp;<span class="op" id="7116158">==</span>&nbsp;<span class="num" id="7116161">0</span>&nbsp;<span class="op" id="7116163">&amp;&amp;</span>&nbsp;<span class="op" id="7116166">!</span><span class="ident" id="7116167">isEven64</span><span class="op" id="7116175">(</span><span class="ident" id="7116176">f</span><span class="op" id="7116177">)</span>&nbsp;<span class="op" id="7116179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116183">t</span><span class="op" id="7116184">.</span><span class="ident" id="7116185">Errorf</span><span class="op" id="7116191">(</span><span class="string" id="7116192">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7116269">,</span>&nbsp;<span class="ident" id="7116271">r</span><span class="op" id="7116272">,</span>&nbsp;<span class="ident" id="7116274">f</span><span class="op" id="7116275">,</span>&nbsp;<span class="ident" id="7116277">f</span><span class="op" id="7116278">,</span>&nbsp;<span class="ident" id="7116280">f0</span><span class="op" id="7116282">,</span>&nbsp;<span class="ident" id="7116284">f0</span><span class="op" id="7116286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116290">return</span>&nbsp;<span class="builtintype" id="7116297">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116307">if</span>&nbsp;<span class="ident" id="7116310">df</span><span class="op" id="7116312">.</span><span class="ident" id="7116313">Cmp</span><span class="op" id="7116316">(</span><span class="ident" id="7116317">df1</span><span class="op" id="7116320">)</span>&nbsp;<span class="op" id="7116322">==</span>&nbsp;<span class="num" id="7116325">0</span>&nbsp;<span class="op" id="7116327">&amp;&amp;</span>&nbsp;<span class="op" id="7116330">!</span><span class="ident" id="7116331">isEven64</span><span class="op" id="7116339">(</span><span class="ident" id="7116340">f</span><span class="op" id="7116341">)</span>&nbsp;<span class="op" id="7116343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116347">t</span><span class="op" id="7116348">.</span><span class="ident" id="7116349">Errorf</span><span class="op" id="7116355">(</span><span class="string" id="7116356">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7116433">,</span>&nbsp;<span class="ident" id="7116435">r</span><span class="op" id="7116436">,</span>&nbsp;<span class="ident" id="7116438">f</span><span class="op" id="7116439">,</span>&nbsp;<span class="ident" id="7116441">f</span><span class="op" id="7116442">,</span>&nbsp;<span class="ident" id="7116444">f1</span><span class="op" id="7116446">,</span>&nbsp;<span class="ident" id="7116448">f1</span><span class="op" id="7116450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116454">return</span>&nbsp;<span class="builtintype" id="7116461">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116468">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116471">return</span>&nbsp;<span class="builtintype" id="7116478">true</span><br>
<span class="lineno"></span><span class="op" id="7116483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7116486">func</span>&nbsp;<span class="ident" id="7116491">isEven32</span><span class="op" id="7116499">(</span><span class="ident" id="7116500">f</span>&nbsp;<span class="builtintype" id="7116502">float32</span><span class="op" id="7116509">)</span>&nbsp;<span class="builtintype" id="7116511">bool</span>&nbsp;<span class="op" id="7116516">{</span>&nbsp;<span class="keyword" id="7116518">return</span>&nbsp;<span class="ident" id="7116525">math</span><span class="op" id="7116529">.</span><span class="ident" id="7116530">Float32bits</span><span class="op" id="7116541">(</span><span class="ident" id="7116542">f</span><span class="op" id="7116543">)</span><span class="op" id="7116544">&amp;</span><span class="num" id="7116545">1</span>&nbsp;<span class="op" id="7116547">==</span>&nbsp;<span class="num" id="7116550">0</span>&nbsp;<span class="op" id="7116552">}</span><br>
<span class="lineno"></span><span class="keyword" id="7116554">func</span>&nbsp;<span class="ident" id="7116559">isEven64</span><span class="op" id="7116567">(</span><span class="ident" id="7116568">f</span>&nbsp;<span class="builtintype" id="7116570">float64</span><span class="op" id="7116577">)</span>&nbsp;<span class="builtintype" id="7116579">bool</span>&nbsp;<span class="op" id="7116584">{</span>&nbsp;<span class="keyword" id="7116586">return</span>&nbsp;<span class="ident" id="7116593">math</span><span class="op" id="7116597">.</span><span class="ident" id="7116598">Float64bits</span><span class="op" id="7116609">(</span><span class="ident" id="7116610">f</span><span class="op" id="7116611">)</span><span class="op" id="7116612">&amp;</span><span class="num" id="7116613">1</span>&nbsp;<span class="op" id="7116615">==</span>&nbsp;<span class="num" id="7116618">0</span>&nbsp;<span class="op" id="7116620">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7116623">func</span>&nbsp;<span class="ident" id="7116628">TestIsFinite</span><span class="op" id="7116640">(</span><span class="ident" id="7116641">t</span>&nbsp;<span class="op" id="7116643">*</span><span class="ident" id="7116644">testing</span><span class="op" id="7116651">.</span><span class="ident" id="7116652">T</span><span class="op" id="7116653">)</span>&nbsp;<span class="op" id="7116655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116658">finites</span>&nbsp;<span class="op" id="7116666">:=</span>&nbsp;<span class="op" id="7116669">[</span><span class="op" id="7116670">]</span><span class="builtintype" id="7116671">float64</span><span class="op" id="7116678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7116682">1.0</span>&nbsp;<span class="op" id="7116686">/</span>&nbsp;<span class="num" id="7116688">3</span><span class="op" id="7116689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7116693">4891559871276714924261e+222</span><span class="op" id="7116720">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116724">math</span><span class="op" id="7116728">.</span><span class="ident" id="7116729">MaxFloat64</span><span class="op" id="7116739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116743">math</span><span class="op" id="7116747">.</span><span class="ident" id="7116748">SmallestNonzeroFloat64</span><span class="op" id="7116770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116774">-</span><span class="ident" id="7116775">math</span><span class="op" id="7116779">.</span><span class="ident" id="7116780">MaxFloat64</span><span class="op" id="7116790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116794">-</span><span class="ident" id="7116795">math</span><span class="op" id="7116799">.</span><span class="ident" id="7116800">SmallestNonzeroFloat64</span><span class="op" id="7116822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116825">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116828">for</span>&nbsp;<span class="ident" id="7116832">_</span><span class="op" id="7116833">,</span>&nbsp;<span class="ident" id="7116835">f</span>&nbsp;<span class="op" id="7116837">:=</span>&nbsp;<span class="keyword" id="7116840">range</span>&nbsp;<span class="ident" id="7116846">finites</span>&nbsp;<span class="op" id="7116854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116858">if</span>&nbsp;<span class="op" id="7116861">!</span><span class="ident" id="7116862">isFinite</span><span class="op" id="7116870">(</span><span class="ident" id="7116871">f</span><span class="op" id="7116872">)</span>&nbsp;<span class="op" id="7116874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116879">t</span><span class="op" id="7116880">.</span><span class="ident" id="7116881">Errorf</span><span class="op" id="7116887">(</span><span class="string" id="7116888">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7116908">,</span>&nbsp;<span class="ident" id="7116910">f</span><span class="op" id="7116911">,</span>&nbsp;<span class="ident" id="7116913">f</span><span class="op" id="7116914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116921">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116924">nonfinites</span>&nbsp;<span class="op" id="7116935">:=</span>&nbsp;<span class="op" id="7116938">[</span><span class="op" id="7116939">]</span><span class="builtintype" id="7116940">float64</span><span class="op" id="7116947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116951">math</span><span class="op" id="7116955">.</span><span class="ident" id="7116956">NaN</span><span class="op" id="7116959">(</span><span class="op" id="7116960">)</span><span class="op" id="7116961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116965">math</span><span class="op" id="7116969">.</span><span class="ident" id="7116970">Inf</span><span class="op" id="7116973">(</span><span class="op" id="7116974">-</span><span class="num" id="7116975">1</span><span class="op" id="7116976">)</span><span class="op" id="7116977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116981">math</span><span class="op" id="7116985">.</span><span class="ident" id="7116986">Inf</span><span class="op" id="7116989">(</span><span class="op" id="7116990">+</span><span class="num" id="7116991">1</span><span class="op" id="7116992">)</span><span class="op" id="7116993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116996">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116999">for</span>&nbsp;<span class="ident" id="7117003">_</span><span class="op" id="7117004">,</span>&nbsp;<span class="ident" id="7117006">f</span>&nbsp;<span class="op" id="7117008">:=</span>&nbsp;<span class="keyword" id="7117011">range</span>&nbsp;<span class="ident" id="7117017">nonfinites</span>&nbsp;<span class="op" id="7117028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7117032">if</span>&nbsp;<span class="ident" id="7117035">isFinite</span><span class="op" id="7117043">(</span><span class="ident" id="7117044">f</span><span class="op" id="7117045">)</span>&nbsp;<span class="op" id="7117047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7117052">t</span><span class="op" id="7117053">.</span><span class="ident" id="7117054">Errorf</span><span class="op" id="7117060">(</span><span class="string" id="7117061">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7117081">,</span>&nbsp;<span class="ident" id="7117083">f</span><span class="op" id="7117084">,</span>&nbsp;<span class="ident" id="7117086">f</span><span class="op" id="7117087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7117091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7117094">}</span><br>
<span class="lineno">1160</span><span class="op" id="7117096">}</span>
</div>
</body>
</html>
