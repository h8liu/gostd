<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8338036">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8338092">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8338146">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8338197">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="8338276">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338285">package</span>&nbsp;<span class="ident" id="8338293">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="8338298">import</span>&nbsp;<span class="op" id="8338305">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338308">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338314">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338325">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8338336">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8338343">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338346">var</span>&nbsp;<span class="ident" id="8338350">connTests</span>&nbsp;<span class="op" id="8338360">=</span>&nbsp;<span class="op" id="8338362">[</span><span class="op" id="8338363">]</span><span class="keyword" id="8338364">struct</span>&nbsp;<span class="op" id="8338371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338374">net</span>&nbsp;&nbsp;<span class="builtintype" id="8338379">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338387">addr</span>&nbsp;<span class="builtintype" id="8338392">string</span><br>
<span class="lineno">20</span><span class="op" id="8338399">}</span><span class="op" id="8338400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338403">{</span><span class="string" id="8338404">&#34;tcp&#34;</span><span class="op" id="8338409">,</span>&nbsp;<span class="string" id="8338411">&#34;127.0.0.1:0&#34;</span><span class="op" id="8338424">}</span><span class="op" id="8338425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338428">{</span><span class="string" id="8338429">&#34;unix&#34;</span><span class="op" id="8338435">,</span>&nbsp;<span class="ident" id="8338437">testUnixAddr</span><span class="op" id="8338449">(</span><span class="op" id="8338450">)</span><span class="op" id="8338451">}</span><span class="op" id="8338452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338455">{</span><span class="string" id="8338456">&#34;unixpacket&#34;</span><span class="op" id="8338468">,</span>&nbsp;<span class="ident" id="8338470">testUnixAddr</span><span class="op" id="8338482">(</span><span class="op" id="8338483">)</span><span class="op" id="8338484">}</span><span class="op" id="8338485">,</span><br>
<span class="lineno"></span><span class="op" id="8338487">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="8338490">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="8338556">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="8338619">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="8338667">const</span>&nbsp;<span class="ident" id="8338673">someTimeout</span>&nbsp;<span class="op" id="8338685">=</span>&nbsp;<span class="num" id="8338687">10</span>&nbsp;<span class="op" id="8338690">*</span>&nbsp;<span class="ident" id="8338692">time</span><span class="op" id="8338696">.</span><span class="ident" id="8338697">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="8338705">func</span>&nbsp;<span class="ident" id="8338710">TestConnAndListener</span><span class="op" id="8338729">(</span><span class="ident" id="8338730">t</span>&nbsp;<span class="op" id="8338732">*</span><span class="ident" id="8338733">testing</span><span class="op" id="8338740">.</span><span class="ident" id="8338741">T</span><span class="op" id="8338742">)</span>&nbsp;<span class="op" id="8338744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338747">for</span>&nbsp;<span class="ident" id="8338751">_</span><span class="op" id="8338752">,</span>&nbsp;<span class="ident" id="8338754">tt</span>&nbsp;<span class="op" id="8338757">:=</span>&nbsp;<span class="keyword" id="8338760">range</span>&nbsp;<span class="ident" id="8338766">connTests</span>&nbsp;<span class="op" id="8338776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338780">switch</span>&nbsp;<span class="ident" id="8338787">tt</span><span class="op" id="8338789">.</span><span class="ident" id="8338790">net</span>&nbsp;<span class="op" id="8338794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338798">case</span>&nbsp;<span class="string" id="8338803">&#34;unix&#34;</span><span class="op" id="8338809">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338814">switch</span>&nbsp;<span class="ident" id="8338821">runtime</span><span class="op" id="8338828">.</span><span class="ident" id="8338829">GOOS</span>&nbsp;<span class="op" id="8338834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338839">case</span>&nbsp;<span class="string" id="8338844">&#34;nacl&#34;</span><span class="op" id="8338850">,</span>&nbsp;<span class="string" id="8338852">&#34;plan9&#34;</span><span class="op" id="8338859">,</span>&nbsp;<span class="string" id="8338861">&#34;windows&#34;</span><span class="op" id="8338870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338876">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338892">case</span>&nbsp;<span class="string" id="8338897">&#34;unixpacket&#34;</span><span class="op" id="8338909">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338914">switch</span>&nbsp;<span class="ident" id="8338921">runtime</span><span class="op" id="8338928">.</span><span class="ident" id="8338929">GOOS</span>&nbsp;<span class="op" id="8338934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338939">case</span>&nbsp;<span class="string" id="8338944">&#34;android&#34;</span><span class="op" id="8338953">,</span>&nbsp;<span class="string" id="8338955">&#34;darwin&#34;</span><span class="op" id="8338963">,</span>&nbsp;<span class="string" id="8338965">&#34;nacl&#34;</span><span class="op" id="8338971">,</span>&nbsp;<span class="string" id="8338973">&#34;openbsd&#34;</span><span class="op" id="8338982">,</span>&nbsp;<span class="string" id="8338984">&#34;plan9&#34;</span><span class="op" id="8338991">,</span>&nbsp;<span class="string" id="8338993">&#34;windows&#34;</span><span class="op" id="8339002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339008">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339020">case</span>&nbsp;<span class="string" id="8339025">&#34;freebsd&#34;</span><span class="op" id="8339034">:</span>&nbsp;<span class="comment" id="8339036">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339080">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339101">ln</span><span class="op" id="8339103">,</span>&nbsp;<span class="ident" id="8339105">err</span>&nbsp;<span class="op" id="8339109">:=</span>&nbsp;<span class="ident" id="8339112">Listen</span><span class="op" id="8339118">(</span><span class="ident" id="8339119">tt</span><span class="op" id="8339121">.</span><span class="ident" id="8339122">net</span><span class="op" id="8339125">,</span>&nbsp;<span class="ident" id="8339127">tt</span><span class="op" id="8339129">.</span><span class="ident" id="8339130">addr</span><span class="op" id="8339134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339138">if</span>&nbsp;<span class="ident" id="8339141">err</span>&nbsp;<span class="op" id="8339145">!=</span>&nbsp;<span class="ident" id="8339148">nil</span>&nbsp;<span class="op" id="8339152">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339157">t</span><span class="op" id="8339158">.</span><span class="ident" id="8339159">Fatalf</span><span class="op" id="8339165">(</span><span class="string" id="8339166">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8339185">,</span>&nbsp;<span class="ident" id="8339187">err</span><span class="op" id="8339190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339198">defer</span>&nbsp;<span class="keyword" id="8339204">func</span><span class="op" id="8339208">(</span><span class="ident" id="8339209">ln</span>&nbsp;<span class="ident" id="8339212">Listener</span><span class="op" id="8339220">,</span>&nbsp;<span class="ident" id="8339222">net</span><span class="op" id="8339225">,</span>&nbsp;<span class="ident" id="8339227">addr</span>&nbsp;<span class="builtintype" id="8339232">string</span><span class="op" id="8339238">)</span>&nbsp;<span class="op" id="8339240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339245">ln</span><span class="op" id="8339247">.</span><span class="ident" id="8339248">Close</span><span class="op" id="8339253">(</span><span class="op" id="8339254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339259">switch</span>&nbsp;<span class="ident" id="8339266">net</span>&nbsp;<span class="op" id="8339270">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339275">case</span>&nbsp;<span class="string" id="8339280">&#34;unix&#34;</span><span class="op" id="8339286">,</span>&nbsp;<span class="string" id="8339288">&#34;unixpacket&#34;</span><span class="op" id="8339300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339306">os</span><span class="op" id="8339308">.</span><span class="ident" id="8339309">Remove</span><span class="op" id="8339315">(</span><span class="ident" id="8339316">addr</span><span class="op" id="8339320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339329">}</span><span class="op" id="8339330">(</span><span class="ident" id="8339331">ln</span><span class="op" id="8339333">,</span>&nbsp;<span class="ident" id="8339335">tt</span><span class="op" id="8339337">.</span><span class="ident" id="8339338">net</span><span class="op" id="8339341">,</span>&nbsp;<span class="ident" id="8339343">tt</span><span class="op" id="8339345">.</span><span class="ident" id="8339346">addr</span><span class="op" id="8339350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339354">if</span>&nbsp;<span class="ident" id="8339357">ln</span><span class="op" id="8339359">.</span><span class="ident" id="8339360">Addr</span><span class="op" id="8339364">(</span><span class="op" id="8339365">)</span><span class="op" id="8339366">.</span><span class="ident" id="8339367">Network</span><span class="op" id="8339374">(</span><span class="op" id="8339375">)</span>&nbsp;<span class="op" id="8339377">!=</span>&nbsp;<span class="ident" id="8339380">tt</span><span class="op" id="8339382">.</span><span class="ident" id="8339383">net</span>&nbsp;<span class="op" id="8339387">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339392">t</span><span class="op" id="8339393">.</span><span class="ident" id="8339394">Fatalf</span><span class="op" id="8339400">(</span><span class="string" id="8339401">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8339422">,</span>&nbsp;<span class="ident" id="8339424">ln</span><span class="op" id="8339426">.</span><span class="ident" id="8339427">Addr</span><span class="op" id="8339431">(</span><span class="op" id="8339432">)</span><span class="op" id="8339433">.</span><span class="ident" id="8339434">Network</span><span class="op" id="8339441">(</span><span class="op" id="8339442">)</span><span class="op" id="8339443">,</span>&nbsp;<span class="ident" id="8339445">tt</span><span class="op" id="8339447">.</span><span class="ident" id="8339448">net</span><span class="op" id="8339451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339460">done</span>&nbsp;<span class="op" id="8339465">:=</span>&nbsp;<span class="builtinfunc" id="8339468">make</span><span class="op" id="8339472">(</span><span class="keyword" id="8339473">chan</span>&nbsp;<span class="builtintype" id="8339478">int</span><span class="op" id="8339481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339485">go</span>&nbsp;<span class="ident" id="8339488">transponder</span><span class="op" id="8339499">(</span><span class="ident" id="8339500">t</span><span class="op" id="8339501">,</span>&nbsp;<span class="ident" id="8339503">ln</span><span class="op" id="8339505">,</span>&nbsp;<span class="ident" id="8339507">done</span><span class="op" id="8339511">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339516">c</span><span class="op" id="8339517">,</span>&nbsp;<span class="ident" id="8339519">err</span>&nbsp;<span class="op" id="8339523">:=</span>&nbsp;<span class="ident" id="8339526">Dial</span><span class="op" id="8339530">(</span><span class="ident" id="8339531">tt</span><span class="op" id="8339533">.</span><span class="ident" id="8339534">net</span><span class="op" id="8339537">,</span>&nbsp;<span class="ident" id="8339539">ln</span><span class="op" id="8339541">.</span><span class="ident" id="8339542">Addr</span><span class="op" id="8339546">(</span><span class="op" id="8339547">)</span><span class="op" id="8339548">.</span><span class="ident" id="8339549">String</span><span class="op" id="8339555">(</span><span class="op" id="8339556">)</span><span class="op" id="8339557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339561">if</span>&nbsp;<span class="ident" id="8339564">err</span>&nbsp;<span class="op" id="8339568">!=</span>&nbsp;<span class="ident" id="8339571">nil</span>&nbsp;<span class="op" id="8339575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339580">t</span><span class="op" id="8339581">.</span><span class="ident" id="8339582">Fatalf</span><span class="op" id="8339588">(</span><span class="string" id="8339589">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8339606">,</span>&nbsp;<span class="ident" id="8339608">err</span><span class="op" id="8339611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339615">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339619">defer</span>&nbsp;<span class="ident" id="8339625">c</span><span class="op" id="8339626">.</span><span class="ident" id="8339627">Close</span><span class="op" id="8339632">(</span><span class="op" id="8339633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339637">if</span>&nbsp;<span class="ident" id="8339640">c</span><span class="op" id="8339641">.</span><span class="ident" id="8339642">LocalAddr</span><span class="op" id="8339651">(</span><span class="op" id="8339652">)</span><span class="op" id="8339653">.</span><span class="ident" id="8339654">Network</span><span class="op" id="8339661">(</span><span class="op" id="8339662">)</span>&nbsp;<span class="op" id="8339664">!=</span>&nbsp;<span class="ident" id="8339667">tt</span><span class="op" id="8339669">.</span><span class="ident" id="8339670">net</span>&nbsp;<span class="op" id="8339674">||</span>&nbsp;<span class="ident" id="8339677">c</span><span class="op" id="8339678">.</span><span class="ident" id="8339679">LocalAddr</span><span class="op" id="8339688">(</span><span class="op" id="8339689">)</span><span class="op" id="8339690">.</span><span class="ident" id="8339691">Network</span><span class="op" id="8339698">(</span><span class="op" id="8339699">)</span>&nbsp;<span class="op" id="8339701">!=</span>&nbsp;<span class="ident" id="8339704">tt</span><span class="op" id="8339706">.</span><span class="ident" id="8339707">net</span>&nbsp;<span class="op" id="8339711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339716">t</span><span class="op" id="8339717">.</span><span class="ident" id="8339718">Fatalf</span><span class="op" id="8339724">(</span><span class="string" id="8339725">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="8339754">,</span>&nbsp;<span class="ident" id="8339756">c</span><span class="op" id="8339757">.</span><span class="ident" id="8339758">LocalAddr</span><span class="op" id="8339767">(</span><span class="op" id="8339768">)</span><span class="op" id="8339769">.</span><span class="ident" id="8339770">Network</span><span class="op" id="8339777">(</span><span class="op" id="8339778">)</span><span class="op" id="8339779">,</span>&nbsp;<span class="ident" id="8339781">c</span><span class="op" id="8339782">.</span><span class="ident" id="8339783">RemoteAddr</span><span class="op" id="8339793">(</span><span class="op" id="8339794">)</span><span class="op" id="8339795">.</span><span class="ident" id="8339796">Network</span><span class="op" id="8339803">(</span><span class="op" id="8339804">)</span><span class="op" id="8339805">,</span>&nbsp;<span class="ident" id="8339807">tt</span><span class="op" id="8339809">.</span><span class="ident" id="8339810">net</span><span class="op" id="8339813">,</span>&nbsp;<span class="ident" id="8339815">tt</span><span class="op" id="8339817">.</span><span class="ident" id="8339818">net</span><span class="op" id="8339821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8339825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339829">c</span><span class="op" id="8339830">.</span><span class="ident" id="8339831">SetDeadline</span><span class="op" id="8339842">(</span><span class="ident" id="8339843">time</span><span class="op" id="8339847">.</span><span class="ident" id="8339848">Now</span><span class="op" id="8339851">(</span><span class="op" id="8339852">)</span><span class="op" id="8339853">.</span><span class="ident" id="8339854">Add</span><span class="op" id="8339857">(</span><span class="ident" id="8339858">someTimeout</span><span class="op" id="8339869">)</span><span class="op" id="8339870">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339874">c</span><span class="op" id="8339875">.</span><span class="ident" id="8339876">SetReadDeadline</span><span class="op" id="8339891">(</span><span class="ident" id="8339892">time</span><span class="op" id="8339896">.</span><span class="ident" id="8339897">Now</span><span class="op" id="8339900">(</span><span class="op" id="8339901">)</span><span class="op" id="8339902">.</span><span class="ident" id="8339903">Add</span><span class="op" id="8339906">(</span><span class="ident" id="8339907">someTimeout</span><span class="op" id="8339918">)</span><span class="op" id="8339919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8339923">c</span><span class="op" id="8339924">.</span><span class="ident" id="8339925">SetWriteDeadline</span><span class="op" id="8339941">(</span><span class="ident" id="8339942">time</span><span class="op" id="8339946">.</span><span class="ident" id="8339947">Now</span><span class="op" id="8339950">(</span><span class="op" id="8339951">)</span><span class="op" id="8339952">.</span><span class="ident" id="8339953">Add</span><span class="op" id="8339956">(</span><span class="ident" id="8339957">someTimeout</span><span class="op" id="8339968">)</span><span class="op" id="8339969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8339974">if</span>&nbsp;<span class="ident" id="8339977">_</span><span class="op" id="8339978">,</span>&nbsp;<span class="ident" id="8339980">err</span>&nbsp;<span class="op" id="8339984">:=</span>&nbsp;<span class="ident" id="8339987">c</span><span class="op" id="8339988">.</span><span class="ident" id="8339989">Write</span><span class="op" id="8339994">(</span><span class="op" id="8339995">[</span><span class="op" id="8339996">]</span><span class="builtintype" id="8339997">byte</span><span class="op" id="8340001">(</span><span class="string" id="8340002">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="8340013">)</span><span class="op" id="8340014">)</span><span class="op" id="8340015">;</span>&nbsp;<span class="ident" id="8340017">err</span>&nbsp;<span class="op" id="8340021">!=</span>&nbsp;<span class="ident" id="8340024">nil</span>&nbsp;<span class="op" id="8340028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340033">t</span><span class="op" id="8340034">.</span><span class="ident" id="8340035">Fatalf</span><span class="op" id="8340041">(</span><span class="string" id="8340042">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8340065">,</span>&nbsp;<span class="ident" id="8340067">err</span><span class="op" id="8340070">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340078">rb</span>&nbsp;<span class="op" id="8340081">:=</span>&nbsp;<span class="builtinfunc" id="8340084">make</span><span class="op" id="8340088">(</span><span class="op" id="8340089">[</span><span class="op" id="8340090">]</span><span class="builtintype" id="8340091">byte</span><span class="op" id="8340095">,</span>&nbsp;<span class="num" id="8340097">128</span><span class="op" id="8340100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340104">if</span>&nbsp;<span class="ident" id="8340107">_</span><span class="op" id="8340108">,</span>&nbsp;<span class="ident" id="8340110">err</span>&nbsp;<span class="op" id="8340114">:=</span>&nbsp;<span class="ident" id="8340117">c</span><span class="op" id="8340118">.</span><span class="ident" id="8340119">Read</span><span class="op" id="8340123">(</span><span class="ident" id="8340124">rb</span><span class="op" id="8340126">)</span><span class="op" id="8340127">;</span>&nbsp;<span class="ident" id="8340129">err</span>&nbsp;<span class="op" id="8340133">!=</span>&nbsp;<span class="ident" id="8340136">nil</span>&nbsp;<span class="op" id="8340140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340145">t</span><span class="op" id="8340146">.</span><span class="ident" id="8340147">Fatalf</span><span class="op" id="8340153">(</span><span class="string" id="8340154">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8340176">,</span>&nbsp;<span class="ident" id="8340178">err</span><span class="op" id="8340181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340185">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340190">&lt;-</span><span class="ident" id="8340192">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340198">}</span><br>
<span class="lineno"></span><span class="op" id="8340200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="8340203">func</span>&nbsp;<span class="ident" id="8340208">transponder</span><span class="op" id="8340219">(</span><span class="ident" id="8340220">t</span>&nbsp;<span class="op" id="8340222">*</span><span class="ident" id="8340223">testing</span><span class="op" id="8340230">.</span><span class="ident" id="8340231">T</span><span class="op" id="8340232">,</span>&nbsp;<span class="ident" id="8340234">ln</span>&nbsp;<span class="ident" id="8340237">Listener</span><span class="op" id="8340245">,</span>&nbsp;<span class="ident" id="8340247">done</span>&nbsp;<span class="keyword" id="8340252">chan</span><span class="op" id="8340256">&lt;-</span>&nbsp;<span class="builtintype" id="8340259">int</span><span class="op" id="8340262">)</span>&nbsp;<span class="op" id="8340264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340267">defer</span>&nbsp;<span class="keyword" id="8340273">func</span><span class="op" id="8340277">(</span><span class="op" id="8340278">)</span>&nbsp;<span class="op" id="8340280">{</span>&nbsp;<span class="ident" id="8340282">done</span>&nbsp;<span class="op" id="8340287">&lt;-</span>&nbsp;<span class="num" id="8340290">1</span>&nbsp;<span class="op" id="8340292">}</span><span class="op" id="8340293">(</span><span class="op" id="8340294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340298">switch</span>&nbsp;<span class="ident" id="8340305">ln</span>&nbsp;<span class="op" id="8340308">:=</span>&nbsp;<span class="ident" id="8340311">ln</span><span class="op" id="8340313">.</span><span class="op" id="8340314">(</span><span class="keyword" id="8340315">type</span><span class="op" id="8340319">)</span>&nbsp;<span class="op" id="8340321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340324">case</span>&nbsp;<span class="op" id="8340329">*</span><span class="ident" id="8340330">TCPListener</span><span class="op" id="8340341">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340345">ln</span><span class="op" id="8340347">.</span><span class="ident" id="8340348">SetDeadline</span><span class="op" id="8340359">(</span><span class="ident" id="8340360">time</span><span class="op" id="8340364">.</span><span class="ident" id="8340365">Now</span><span class="op" id="8340368">(</span><span class="op" id="8340369">)</span><span class="op" id="8340370">.</span><span class="ident" id="8340371">Add</span><span class="op" id="8340374">(</span><span class="ident" id="8340375">someTimeout</span><span class="op" id="8340386">)</span><span class="op" id="8340387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340390">case</span>&nbsp;<span class="op" id="8340395">*</span><span class="ident" id="8340396">UnixListener</span><span class="op" id="8340408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340412">ln</span><span class="op" id="8340414">.</span><span class="ident" id="8340415">SetDeadline</span><span class="op" id="8340426">(</span><span class="ident" id="8340427">time</span><span class="op" id="8340431">.</span><span class="ident" id="8340432">Now</span><span class="op" id="8340435">(</span><span class="op" id="8340436">)</span><span class="op" id="8340437">.</span><span class="ident" id="8340438">Add</span><span class="op" id="8340441">(</span><span class="ident" id="8340442">someTimeout</span><span class="op" id="8340453">)</span><span class="op" id="8340454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340460">c</span><span class="op" id="8340461">,</span>&nbsp;<span class="ident" id="8340463">err</span>&nbsp;<span class="op" id="8340467">:=</span>&nbsp;<span class="ident" id="8340470">ln</span><span class="op" id="8340472">.</span><span class="ident" id="8340473">Accept</span><span class="op" id="8340479">(</span><span class="op" id="8340480">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340483">if</span>&nbsp;<span class="ident" id="8340486">err</span>&nbsp;<span class="op" id="8340490">!=</span>&nbsp;<span class="ident" id="8340493">nil</span>&nbsp;<span class="op" id="8340497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340501">t</span><span class="op" id="8340502">.</span><span class="ident" id="8340503">Errorf</span><span class="op" id="8340509">(</span><span class="string" id="8340510">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8340538">,</span>&nbsp;<span class="ident" id="8340540">err</span><span class="op" id="8340543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340547">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340558">defer</span>&nbsp;<span class="ident" id="8340564">c</span><span class="op" id="8340565">.</span><span class="ident" id="8340566">Close</span><span class="op" id="8340571">(</span><span class="op" id="8340572">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340575">network</span>&nbsp;<span class="op" id="8340583">:=</span>&nbsp;<span class="ident" id="8340586">ln</span><span class="op" id="8340588">.</span><span class="ident" id="8340589">Addr</span><span class="op" id="8340593">(</span><span class="op" id="8340594">)</span><span class="op" id="8340595">.</span><span class="ident" id="8340596">Network</span><span class="op" id="8340603">(</span><span class="op" id="8340604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340607">if</span>&nbsp;<span class="ident" id="8340610">c</span><span class="op" id="8340611">.</span><span class="ident" id="8340612">LocalAddr</span><span class="op" id="8340621">(</span><span class="op" id="8340622">)</span><span class="op" id="8340623">.</span><span class="ident" id="8340624">Network</span><span class="op" id="8340631">(</span><span class="op" id="8340632">)</span>&nbsp;<span class="op" id="8340634">!=</span>&nbsp;<span class="ident" id="8340637">network</span>&nbsp;<span class="op" id="8340645">||</span>&nbsp;<span class="ident" id="8340648">c</span><span class="op" id="8340649">.</span><span class="ident" id="8340650">LocalAddr</span><span class="op" id="8340659">(</span><span class="op" id="8340660">)</span><span class="op" id="8340661">.</span><span class="ident" id="8340662">Network</span><span class="op" id="8340669">(</span><span class="op" id="8340670">)</span>&nbsp;<span class="op" id="8340672">!=</span>&nbsp;<span class="ident" id="8340675">network</span>&nbsp;<span class="op" id="8340683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340687">t</span><span class="op" id="8340688">.</span><span class="ident" id="8340689">Errorf</span><span class="op" id="8340695">(</span><span class="string" id="8340696">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="8340725">,</span>&nbsp;<span class="ident" id="8340727">c</span><span class="op" id="8340728">.</span><span class="ident" id="8340729">LocalAddr</span><span class="op" id="8340738">(</span><span class="op" id="8340739">)</span><span class="op" id="8340740">.</span><span class="ident" id="8340741">Network</span><span class="op" id="8340748">(</span><span class="op" id="8340749">)</span><span class="op" id="8340750">,</span>&nbsp;<span class="ident" id="8340752">c</span><span class="op" id="8340753">.</span><span class="ident" id="8340754">RemoteAddr</span><span class="op" id="8340764">(</span><span class="op" id="8340765">)</span><span class="op" id="8340766">.</span><span class="ident" id="8340767">Network</span><span class="op" id="8340774">(</span><span class="op" id="8340775">)</span><span class="op" id="8340776">,</span>&nbsp;<span class="ident" id="8340778">network</span><span class="op" id="8340785">,</span>&nbsp;<span class="ident" id="8340787">network</span><span class="op" id="8340794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8340806">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340809">c</span><span class="op" id="8340810">.</span><span class="ident" id="8340811">SetDeadline</span><span class="op" id="8340822">(</span><span class="ident" id="8340823">time</span><span class="op" id="8340827">.</span><span class="ident" id="8340828">Now</span><span class="op" id="8340831">(</span><span class="op" id="8340832">)</span><span class="op" id="8340833">.</span><span class="ident" id="8340834">Add</span><span class="op" id="8340837">(</span><span class="ident" id="8340838">someTimeout</span><span class="op" id="8340849">)</span><span class="op" id="8340850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340853">c</span><span class="op" id="8340854">.</span><span class="ident" id="8340855">SetReadDeadline</span><span class="op" id="8340870">(</span><span class="ident" id="8340871">time</span><span class="op" id="8340875">.</span><span class="ident" id="8340876">Now</span><span class="op" id="8340879">(</span><span class="op" id="8340880">)</span><span class="op" id="8340881">.</span><span class="ident" id="8340882">Add</span><span class="op" id="8340885">(</span><span class="ident" id="8340886">someTimeout</span><span class="op" id="8340897">)</span><span class="op" id="8340898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340901">c</span><span class="op" id="8340902">.</span><span class="ident" id="8340903">SetWriteDeadline</span><span class="op" id="8340919">(</span><span class="ident" id="8340920">time</span><span class="op" id="8340924">.</span><span class="ident" id="8340925">Now</span><span class="op" id="8340928">(</span><span class="op" id="8340929">)</span><span class="op" id="8340930">.</span><span class="ident" id="8340931">Add</span><span class="op" id="8340934">(</span><span class="ident" id="8340935">someTimeout</span><span class="op" id="8340946">)</span><span class="op" id="8340947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340951">b</span>&nbsp;<span class="op" id="8340953">:=</span>&nbsp;<span class="builtinfunc" id="8340956">make</span><span class="op" id="8340960">(</span><span class="op" id="8340961">[</span><span class="op" id="8340962">]</span><span class="builtintype" id="8340963">byte</span><span class="op" id="8340967">,</span>&nbsp;<span class="num" id="8340969">128</span><span class="op" id="8340972">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8340975">n</span><span class="op" id="8340976">,</span>&nbsp;<span class="ident" id="8340978">err</span>&nbsp;<span class="op" id="8340982">:=</span>&nbsp;<span class="ident" id="8340985">c</span><span class="op" id="8340986">.</span><span class="ident" id="8340987">Read</span><span class="op" id="8340991">(</span><span class="ident" id="8340992">b</span><span class="op" id="8340993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8340996">if</span>&nbsp;<span class="ident" id="8340999">err</span>&nbsp;<span class="op" id="8341003">!=</span>&nbsp;<span class="ident" id="8341006">nil</span>&nbsp;<span class="op" id="8341010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341014">t</span><span class="op" id="8341015">.</span><span class="ident" id="8341016">Errorf</span><span class="op" id="8341022">(</span><span class="string" id="8341023">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8341045">,</span>&nbsp;<span class="ident" id="8341047">err</span><span class="op" id="8341050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341054">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341062">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341065">if</span>&nbsp;<span class="ident" id="8341068">_</span><span class="op" id="8341069">,</span>&nbsp;<span class="ident" id="8341071">err</span>&nbsp;<span class="op" id="8341075">:=</span>&nbsp;<span class="ident" id="8341078">c</span><span class="op" id="8341079">.</span><span class="ident" id="8341080">Write</span><span class="op" id="8341085">(</span><span class="ident" id="8341086">b</span><span class="op" id="8341087">[</span><span class="op" id="8341088">:</span><span class="ident" id="8341089">n</span><span class="op" id="8341090">]</span><span class="op" id="8341091">)</span><span class="op" id="8341092">;</span>&nbsp;<span class="ident" id="8341094">err</span>&nbsp;<span class="op" id="8341098">!=</span>&nbsp;<span class="ident" id="8341101">nil</span>&nbsp;<span class="op" id="8341105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341109">t</span><span class="op" id="8341110">.</span><span class="ident" id="8341111">Errorf</span><span class="op" id="8341117">(</span><span class="string" id="8341118">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8341141">,</span>&nbsp;<span class="ident" id="8341143">err</span><span class="op" id="8341146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8341150">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341158">}</span><br>
<span class="lineno"></span><span class="op" id="8341160">}</span>
</div>
</body>
</html>
