<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4661767">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4661822">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4661876">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4661927">//&nbsp;Package&nbsp;suffixarray&nbsp;implements&nbsp;substring&nbsp;search&nbsp;in&nbsp;logarithmic&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="4662004">//&nbsp;an&nbsp;in-memory&nbsp;suffix&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4662034">//</span><br>
<span class="lineno"></span><span class="comment" id="4662037">//&nbsp;Example&nbsp;use:</span><br>
<span class="lineno"></span><span class="comment" id="4662053">//</span><br>
<span class="lineno">10</span><span class="comment" id="4662056">//&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;create&nbsp;index&nbsp;for&nbsp;some&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4662089">//&nbsp;&nbsp;&nbsp;&nbspindex&nbsp;:=&nbsp;suffixarray.New(data)</span><br>
<span class="lineno"></span><span class="comment" id="4662123">//</span><br>
<span class="lineno"></span><span class="comment" id="4662126">//&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;lookup&nbsp;byte&nbsp;slice&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="4662152">//&nbsp;&nbsp;&nbsp;&nbspoffsets1&nbsp;:=&nbsp;index.Lookup(s,&nbsp;-1)&nbsp;//&nbsp;the&nbsp;list&nbsp;of&nbsp;all&nbsp;indices&nbsp;where&nbsp;s&nbsp;occurs&nbsp;in&nbsp;data</span><br>
<span class="lineno">15</span><span class="comment" id="4662237">//&nbsp;&nbsp;&nbsp;&nbspoffsets2&nbsp;:=&nbsp;index.Lookup(s,&nbsp;3)&nbsp;&nbsp;//&nbsp;the&nbsp;list&nbsp;of&nbsp;at&nbsp;most&nbsp;3&nbsp;indices&nbsp;where&nbsp;s&nbsp;occurs&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4662328">//</span><br>
<span class="lineno"></span><span class="keyword" id="4662331">package</span>&nbsp;<span class="ident" id="4662339">suffixarray</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4662352">import</span>&nbsp;<span class="op" id="4662359">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4662362">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4662371">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4662390">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4662396">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4662406">&#34;sort&#34;</span><br>
<span class="lineno">25</span><span class="op" id="4662413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4662416">//&nbsp;Index&nbsp;implements&nbsp;a&nbsp;suffix&nbsp;array&nbsp;for&nbsp;fast&nbsp;substring&nbsp;search.</span><br>
<span class="lineno"></span><span class="keyword" id="4662478">type</span>&nbsp;<span class="ident" id="4662483">Index</span>&nbsp;<span class="keyword" id="4662489">struct</span>&nbsp;<span class="op" id="4662496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4662499">data</span>&nbsp;<span class="op" id="4662504">[</span><span class="op" id="4662505">]</span><span class="builtintype" id="4662506">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4662512">sa</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4662517">[</span><span class="op" id="4662518">]</span><span class="builtintype" id="4662519">int</span>&nbsp;<span class="comment" id="4662523">//&nbsp;suffix&nbsp;array&nbsp;for&nbsp;data;&nbsp;len(sa)&nbsp;==&nbsp;len(data)</span><br>
<span class="lineno"></span><span class="op" id="4662570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4662573">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;Index&nbsp;for&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4662610">//&nbsp;Index&nbsp;creation&nbsp;time&nbsp;is&nbsp;O(N*log(N))&nbsp;for&nbsp;N&nbsp;=&nbsp;len(data).</span><br>
<span class="lineno">35</span><span class="keyword" id="4662667">func</span>&nbsp;<span class="ident" id="4662672">New</span><span class="op" id="4662675">(</span><span class="ident" id="4662676">data</span>&nbsp;<span class="op" id="4662681">[</span><span class="op" id="4662682">]</span><span class="builtintype" id="4662683">byte</span><span class="op" id="4662687">)</span>&nbsp;<span class="op" id="4662689">*</span><span class="ident" id="4662690"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span>&nbsp;<span class="op" id="4662696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4662699">return</span>&nbsp;<span class="op" id="4662706">&amp;</span><span class="ident" id="4662707"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4662712">{</span><span class="ident" id="4662713"><a href="/index/suffixarray/suffixarray.go.html#4662676">data</a></span><span class="op" id="4662717">,</span>&nbsp;<span class="ident" id="4662719"><a href="/index/suffixarray/qsufsort.go.html#4658215">qsufsort</a></span><span class="op" id="4662727">(</span><span class="ident" id="4662728"><a href="/index/suffixarray/suffixarray.go.html#4662676">data</a></span><span class="op" id="4662732">)</span><span class="op" id="4662733">}</span><br>
<span class="lineno"></span><span class="op" id="4662735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4662738">//&nbsp;writeInt&nbsp;writes&nbsp;an&nbsp;int&nbsp;x&nbsp;to&nbsp;w&nbsp;using&nbsp;buf&nbsp;to&nbsp;buffer&nbsp;the&nbsp;write.</span><br>
<span class="lineno">40</span><span class="keyword" id="4662802">func</span>&nbsp;<span class="ident" id="4662807">writeInt</span><span class="op" id="4662815">(</span><span class="ident" id="4662816">w</span>&nbsp;<span class="ident" id="4662818"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4662820">.</span><span class="ident" id="4662821">Writer</span><span class="op" id="4662827">,</span>&nbsp;<span class="ident" id="4662829">buf</span>&nbsp;<span class="op" id="4662833">[</span><span class="op" id="4662834">]</span><span class="builtintype" id="4662835">byte</span><span class="op" id="4662839">,</span>&nbsp;<span class="ident" id="4662841">x</span>&nbsp;<span class="builtintype" id="4662843">int</span><span class="op" id="4662846">)</span>&nbsp;<span class="builtintype" id="4662848">error</span>&nbsp;<span class="op" id="4662854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4662857"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4662863">.</span><span class="ident" id="4662864">PutVarint</span><span class="op" id="4662873">(</span><span class="ident" id="4662874"><a href="/index/suffixarray/suffixarray.go.html#4662829">buf</a></span><span class="op" id="4662877">,</span>&nbsp;<span class="ident" id="4662879">int64</span><span class="op" id="4662884">(</span><span class="ident" id="4662885"><a href="/index/suffixarray/suffixarray.go.html#4662841">x</a></span><span class="op" id="4662886">)</span><span class="op" id="4662887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4662890">_</span><span class="op" id="4662891">,</span>&nbsp;<span class="ident" id="4662893">err</span>&nbsp;<span class="op" id="4662897">:=</span>&nbsp;<span class="ident" id="4662900"><a href="/index/suffixarray/suffixarray.go.html#4662816">w</a></span><span class="op" id="4662901">.</span><span class="ident" id="4662902">Write</span><span class="op" id="4662907">(</span><span class="ident" id="4662908"><a href="/index/suffixarray/suffixarray.go.html#4662829">buf</a></span><span class="op" id="4662911">[</span><span class="num" id="4662912">0</span><span class="op" id="4662913">:</span><span class="ident" id="4662914"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4662920">.</span><span class="ident" id="4662921">MaxVarintLen64</span><span class="op" id="4662935">]</span><span class="op" id="4662936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4662939">return</span>&nbsp;<span class="ident" id="4662946"><a href="/index/suffixarray/suffixarray.go.html#4662893">err</a></span><br>
<span class="lineno"></span><span class="op" id="4662950">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4662953">//&nbsp;readInt&nbsp;reads&nbsp;an&nbsp;int&nbsp;x&nbsp;from&nbsp;r&nbsp;using&nbsp;buf&nbsp;to&nbsp;buffer&nbsp;the&nbsp;read&nbsp;and&nbsp;returns&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="4663030">func</span>&nbsp;<span class="ident" id="4663035">readInt</span><span class="op" id="4663042">(</span><span class="ident" id="4663043">r</span>&nbsp;<span class="ident" id="4663045"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4663047">.</span><span class="ident" id="4663048">Reader</span><span class="op" id="4663054">,</span>&nbsp;<span class="ident" id="4663056">buf</span>&nbsp;<span class="op" id="4663060">[</span><span class="op" id="4663061">]</span><span class="builtintype" id="4663062">byte</span><span class="op" id="4663066">)</span>&nbsp;<span class="op" id="4663068">(</span><span class="builtintype" id="4663069">int</span><span class="op" id="4663072">,</span>&nbsp;<span class="builtintype" id="4663074">error</span><span class="op" id="4663079">)</span>&nbsp;<span class="op" id="4663081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663084">_</span><span class="op" id="4663085">,</span>&nbsp;<span class="ident" id="4663087">err</span>&nbsp;<span class="op" id="4663091">:=</span>&nbsp;<span class="ident" id="4663094"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4663096">.</span><span class="ident" id="4663097">ReadFull</span><span class="op" id="4663105">(</span><span class="ident" id="4663106"><a href="/index/suffixarray/suffixarray.go.html#4663043">r</a></span><span class="op" id="4663107">,</span>&nbsp;<span class="ident" id="4663109"><a href="/index/suffixarray/suffixarray.go.html#4663056">buf</a></span><span class="op" id="4663112">[</span><span class="num" id="4663113">0</span><span class="op" id="4663114">:</span><span class="ident" id="4663115"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663121">.</span><span class="ident" id="4663122">MaxVarintLen64</span><span class="op" id="4663136">]</span><span class="op" id="4663137">)</span>&nbsp;<span class="comment" id="4663139">//&nbsp;ok&nbsp;to&nbsp;continue&nbsp;with&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663169">x</span><span class="op" id="4663170">,</span>&nbsp;<span class="ident" id="4663172">_</span>&nbsp;<span class="op" id="4663174">:=</span>&nbsp;<span class="ident" id="4663177"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663183">.</span><span class="ident" id="4663184">Varint</span><span class="op" id="4663190">(</span><span class="ident" id="4663191"><a href="/index/suffixarray/suffixarray.go.html#4663056">buf</a></span><span class="op" id="4663194">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663197">return</span>&nbsp;<span class="builtintype" id="4663204">int</span><span class="op" id="4663207">(</span><span class="ident" id="4663208"><a href="/index/suffixarray/suffixarray.go.html#4663169">x</a></span><span class="op" id="4663209">)</span><span class="op" id="4663210">,</span>&nbsp;<span class="ident" id="4663212"><a href="/index/suffixarray/suffixarray.go.html#4663087">err</a></span><br>
<span class="lineno"></span><span class="op" id="4663216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4663219">//&nbsp;writeSlice&nbsp;writes&nbsp;data[:n]&nbsp;to&nbsp;w&nbsp;and&nbsp;returns&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="4663269">//&nbsp;It&nbsp;uses&nbsp;buf&nbsp;to&nbsp;buffer&nbsp;the&nbsp;write.</span><br>
<span class="lineno">55</span><span class="keyword" id="4663305">func</span>&nbsp;<span class="ident" id="4663310">writeSlice</span><span class="op" id="4663320">(</span><span class="ident" id="4663321">w</span>&nbsp;<span class="ident" id="4663323"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4663325">.</span><span class="ident" id="4663326">Writer</span><span class="op" id="4663332">,</span>&nbsp;<span class="ident" id="4663334">buf</span>&nbsp;<span class="op" id="4663338">[</span><span class="op" id="4663339">]</span><span class="builtintype" id="4663340">byte</span><span class="op" id="4663344">,</span>&nbsp;<span class="ident" id="4663346">data</span>&nbsp;<span class="op" id="4663351">[</span><span class="op" id="4663352">]</span><span class="builtintype" id="4663353">int</span><span class="op" id="4663356">)</span>&nbsp;<span class="op" id="4663358">(</span><span class="ident" id="4663359">n</span>&nbsp;<span class="builtintype" id="4663361">int</span><span class="op" id="4663364">,</span>&nbsp;<span class="ident" id="4663366">err</span>&nbsp;<span class="builtintype" id="4663370">error</span><span class="op" id="4663375">)</span>&nbsp;<span class="op" id="4663377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4663380">//&nbsp;encode&nbsp;as&nbsp;many&nbsp;elements&nbsp;as&nbsp;fit&nbsp;into&nbsp;buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663424">p</span>&nbsp;<span class="op" id="4663426">:=</span>&nbsp;<span class="ident" id="4663429"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663435">.</span><span class="ident" id="4663436">MaxVarintLen64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663452">for</span>&nbsp;<span class="op" id="4663456">;</span>&nbsp;<span class="ident" id="4663458"><a href="/index/suffixarray/suffixarray.go.html#4663359">n</a></span>&nbsp;<span class="op" id="4663460">&lt;</span>&nbsp;<span class="builtinfunc" id="4663462">len</span><span class="op" id="4663465">(</span><span class="ident" id="4663466"><a href="/index/suffixarray/suffixarray.go.html#4663346">data</a></span><span class="op" id="4663470">)</span>&nbsp;<span class="op" id="4663472">&amp;&amp;</span>&nbsp;<span class="ident" id="4663475"><a href="/index/suffixarray/suffixarray.go.html#4663424">p</a></span><span class="op" id="4663476">+</span><span class="ident" id="4663477"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663483">.</span><span class="ident" id="4663484">MaxVarintLen64</span>&nbsp;<span class="op" id="4663499">&lt;=</span>&nbsp;<span class="builtinfunc" id="4663502">len</span><span class="op" id="4663505">(</span><span class="ident" id="4663506"><a href="/index/suffixarray/suffixarray.go.html#4663334">buf</a></span><span class="op" id="4663509">)</span><span class="op" id="4663510">;</span>&nbsp;<span class="ident" id="4663512"><a href="/index/suffixarray/suffixarray.go.html#4663359">n</a></span><span class="op" id="4663513">++</span>&nbsp;<span class="op" id="4663516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663520"><a href="/index/suffixarray/suffixarray.go.html#4663424">p</a></span>&nbsp;<span class="op" id="4663522">+=</span>&nbsp;<span class="ident" id="4663525"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663531">.</span><span class="ident" id="4663532">PutUvarint</span><span class="op" id="4663542">(</span><span class="ident" id="4663543"><a href="/index/suffixarray/suffixarray.go.html#4663334">buf</a></span><span class="op" id="4663546">[</span><span class="ident" id="4663547"><a href="/index/suffixarray/suffixarray.go.html#4663424">p</a></span><span class="op" id="4663548">:</span><span class="op" id="4663549">]</span><span class="op" id="4663550">,</span>&nbsp;<span class="ident" id="4663552">uint64</span><span class="op" id="4663558">(</span><span class="ident" id="4663559"><a href="/index/suffixarray/suffixarray.go.html#4663346">data</a></span><span class="op" id="4663563">[</span><span class="ident" id="4663564"><a href="/index/suffixarray/suffixarray.go.html#4663359">n</a></span><span class="op" id="4663565">]</span><span class="op" id="4663566">)</span><span class="op" id="4663567">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4663570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4663574">//&nbsp;update&nbsp;buffer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663597"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4663603">.</span><span class="ident" id="4663604">PutVarint</span><span class="op" id="4663613">(</span><span class="ident" id="4663614"><a href="/index/suffixarray/suffixarray.go.html#4663334">buf</a></span><span class="op" id="4663617">,</span>&nbsp;<span class="ident" id="4663619">int64</span><span class="op" id="4663624">(</span><span class="ident" id="4663625"><a href="/index/suffixarray/suffixarray.go.html#4663424">p</a></span><span class="op" id="4663626">)</span><span class="op" id="4663627">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4663631">//&nbsp;write&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663648">_</span><span class="op" id="4663649">,</span>&nbsp;<span class="ident" id="4663651"><a href="/index/suffixarray/suffixarray.go.html#4663366">err</a></span>&nbsp;<span class="op" id="4663655">=</span>&nbsp;<span class="ident" id="4663657"><a href="/index/suffixarray/suffixarray.go.html#4663321">w</a></span><span class="op" id="4663658">.</span><span class="ident" id="4663659">Write</span><span class="op" id="4663664">(</span><span class="ident" id="4663665"><a href="/index/suffixarray/suffixarray.go.html#4663334">buf</a></span><span class="op" id="4663668">[</span><span class="num" id="4663669">0</span><span class="op" id="4663670">:</span><span class="ident" id="4663671"><a href="/index/suffixarray/suffixarray.go.html#4663424">p</a></span><span class="op" id="4663672">]</span><span class="op" id="4663673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663676">return</span><br>
<span class="lineno"></span><span class="op" id="4663683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="4663686">//&nbsp;readSlice&nbsp;reads&nbsp;data[:n]&nbsp;from&nbsp;r&nbsp;and&nbsp;returns&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="4663736">//&nbsp;It&nbsp;uses&nbsp;buf&nbsp;to&nbsp;buffer&nbsp;the&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="4663771">func</span>&nbsp;<span class="ident" id="4663776">readSlice</span><span class="op" id="4663785">(</span><span class="ident" id="4663786">r</span>&nbsp;<span class="ident" id="4663788"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4663790">.</span><span class="ident" id="4663791">Reader</span><span class="op" id="4663797">,</span>&nbsp;<span class="ident" id="4663799">buf</span>&nbsp;<span class="op" id="4663803">[</span><span class="op" id="4663804">]</span><span class="builtintype" id="4663805">byte</span><span class="op" id="4663809">,</span>&nbsp;<span class="ident" id="4663811">data</span>&nbsp;<span class="op" id="4663816">[</span><span class="op" id="4663817">]</span><span class="builtintype" id="4663818">int</span><span class="op" id="4663821">)</span>&nbsp;<span class="op" id="4663823">(</span><span class="ident" id="4663824">n</span>&nbsp;<span class="builtintype" id="4663826">int</span><span class="op" id="4663829">,</span>&nbsp;<span class="ident" id="4663831">err</span>&nbsp;<span class="builtintype" id="4663835">error</span><span class="op" id="4663840">)</span>&nbsp;<span class="op" id="4663842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4663845">//&nbsp;read&nbsp;buffer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663866">var</span>&nbsp;<span class="ident" id="4663870">size</span>&nbsp;<span class="builtintype" id="4663875">int</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4663880"><a href="/index/suffixarray/suffixarray.go.html#4663870">size</a></span><span class="op" id="4663884">,</span>&nbsp;<span class="ident" id="4663886"><a href="/index/suffixarray/suffixarray.go.html#4663831">err</a></span>&nbsp;<span class="op" id="4663890">=</span>&nbsp;<span class="ident" id="4663892"><a href="/index/suffixarray/suffixarray.go.html#4663035">readInt</a></span><span class="op" id="4663899">(</span><span class="ident" id="4663900"><a href="/index/suffixarray/suffixarray.go.html#4663786">r</a></span><span class="op" id="4663901">,</span>&nbsp;<span class="ident" id="4663903"><a href="/index/suffixarray/suffixarray.go.html#4663799">buf</a></span><span class="op" id="4663906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663909">if</span>&nbsp;<span class="ident" id="4663912"><a href="/index/suffixarray/suffixarray.go.html#4663831">err</a></span>&nbsp;<span class="op" id="4663916">!=</span>&nbsp;<span class="ident" id="4663919">nil</span>&nbsp;<span class="op" id="4663923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663927">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4663935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4663939">//&nbsp;read&nbsp;buffer&nbsp;w/o&nbsp;the&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4663968">if</span>&nbsp;<span class="ident" id="4663971">_</span><span class="op" id="4663972">,</span>&nbsp;<span class="ident" id="4663974"><a href="/index/suffixarray/suffixarray.go.html#4663831">err</a></span>&nbsp;<span class="op" id="4663978">=</span>&nbsp;<span class="ident" id="4663980"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4663982">.</span><span class="ident" id="4663983">ReadFull</span><span class="op" id="4663991">(</span><span class="ident" id="4663992"><a href="/index/suffixarray/suffixarray.go.html#4663786">r</a></span><span class="op" id="4663993">,</span>&nbsp;<span class="ident" id="4663995"><a href="/index/suffixarray/suffixarray.go.html#4663799">buf</a></span><span class="op" id="4663998">[</span><span class="ident" id="4663999"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4664005">.</span><span class="ident" id="4664006">MaxVarintLen64</span><span class="op" id="4664020">:</span><span class="ident" id="4664021"><a href="/index/suffixarray/suffixarray.go.html#4663870">size</a></span><span class="op" id="4664025">]</span><span class="op" id="4664026">)</span><span class="op" id="4664027">;</span>&nbsp;<span class="ident" id="4664029"><a href="/index/suffixarray/suffixarray.go.html#4663831">err</a></span>&nbsp;<span class="op" id="4664033">!=</span>&nbsp;<span class="ident" id="4664036">nil</span>&nbsp;<span class="op" id="4664040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664044">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664056">//&nbsp;decode&nbsp;as&nbsp;many&nbsp;elements&nbsp;as&nbsp;present&nbsp;in&nbsp;buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664102">for</span>&nbsp;<span class="ident" id="4664106">p</span>&nbsp;<span class="op" id="4664108">:=</span>&nbsp;<span class="ident" id="4664111"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4664117">.</span><span class="ident" id="4664118">MaxVarintLen64</span><span class="op" id="4664132">;</span>&nbsp;<span class="ident" id="4664134"><a href="/index/suffixarray/suffixarray.go.html#4664106">p</a></span>&nbsp;<span class="op" id="4664136">&lt;</span>&nbsp;<span class="ident" id="4664138"><a href="/index/suffixarray/suffixarray.go.html#4663870">size</a></span><span class="op" id="4664142">;</span>&nbsp;<span class="ident" id="4664144"><a href="/index/suffixarray/suffixarray.go.html#4663824">n</a></span><span class="op" id="4664145">++</span>&nbsp;<span class="op" id="4664148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664152">x</span><span class="op" id="4664153">,</span>&nbsp;<span class="ident" id="4664155">w</span>&nbsp;<span class="op" id="4664157">:=</span>&nbsp;<span class="ident" id="4664160"><a href="/index/suffixarray/suffixarray.go.html#4662371">binary</a></span><span class="op" id="4664166">.</span><span class="ident" id="4664167">Uvarint</span><span class="op" id="4664174">(</span><span class="ident" id="4664175"><a href="/index/suffixarray/suffixarray.go.html#4663799">buf</a></span><span class="op" id="4664178">[</span><span class="ident" id="4664179"><a href="/index/suffixarray/suffixarray.go.html#4664106">p</a></span><span class="op" id="4664180">:</span><span class="op" id="4664181">]</span><span class="op" id="4664182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664186"><a href="/index/suffixarray/suffixarray.go.html#4663811">data</a></span><span class="op" id="4664190">[</span><span class="ident" id="4664191"><a href="/index/suffixarray/suffixarray.go.html#4663824">n</a></span><span class="op" id="4664192">]</span>&nbsp;<span class="op" id="4664194">=</span>&nbsp;<span class="builtintype" id="4664196">int</span><span class="op" id="4664199">(</span><span class="ident" id="4664200"><a href="/index/suffixarray/suffixarray.go.html#4664152">x</a></span><span class="op" id="4664201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664205"><a href="/index/suffixarray/suffixarray.go.html#4664106">p</a></span>&nbsp;<span class="op" id="4664207">+=</span>&nbsp;<span class="ident" id="4664210"><a href="/index/suffixarray/suffixarray.go.html#4664155">w</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664217">return</span><br>
<span class="lineno"></span><span class="op" id="4664224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="4664227">const</span>&nbsp;<span class="ident" id="4664233">bufSize</span>&nbsp;<span class="op" id="4664241">=</span>&nbsp;<span class="num" id="4664243">16</span>&nbsp;<span class="op" id="4664246">&lt;&lt;</span>&nbsp;<span class="num" id="4664249">10</span>&nbsp;<span class="comment" id="4664252">//&nbsp;reasonable&nbsp;for&nbsp;BenchmarkSaveRestore</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4664292">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;index&nbsp;from&nbsp;r&nbsp;into&nbsp;x;&nbsp;x&nbsp;must&nbsp;not&nbsp;be&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4664350">func</span>&nbsp;<span class="op" id="4664355">(</span><span class="ident" id="4664356">x</span>&nbsp;<span class="op" id="4664358">*</span><span class="ident" id="4664359"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4664364">)</span>&nbsp;<span class="ident" id="4664366">Read</span><span class="op" id="4664370">(</span><span class="ident" id="4664371">r</span>&nbsp;<span class="ident" id="4664373"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4664375">.</span><span class="ident" id="4664376">Reader</span><span class="op" id="4664382">)</span>&nbsp;<span class="builtintype" id="4664384">error</span>&nbsp;<span class="op" id="4664390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664393">//&nbsp;buffer&nbsp;for&nbsp;all&nbsp;reads</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664418">buf</span>&nbsp;<span class="op" id="4664422">:=</span>&nbsp;<span class="builtinfunc" id="4664425">make</span><span class="op" id="4664429">(</span><span class="op" id="4664430">[</span><span class="op" id="4664431">]</span><span class="builtintype" id="4664432">byte</span><span class="op" id="4664436">,</span>&nbsp;<span class="ident" id="4664438"><a href="/index/suffixarray/suffixarray.go.html#4664233">bufSize</a></span><span class="op" id="4664445">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664449">//&nbsp;read&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664465">n</span><span class="op" id="4664466">,</span>&nbsp;<span class="ident" id="4664468">err</span>&nbsp;<span class="op" id="4664472">:=</span>&nbsp;<span class="ident" id="4664475"><a href="/index/suffixarray/suffixarray.go.html#4663035">readInt</a></span><span class="op" id="4664482">(</span><span class="ident" id="4664483"><a href="/index/suffixarray/suffixarray.go.html#4664371">r</a></span><span class="op" id="4664484">,</span>&nbsp;<span class="ident" id="4664486"><a href="/index/suffixarray/suffixarray.go.html#4664418">buf</a></span><span class="op" id="4664489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664492">if</span>&nbsp;<span class="ident" id="4664495"><a href="/index/suffixarray/suffixarray.go.html#4664468">err</a></span>&nbsp;<span class="op" id="4664499">!=</span>&nbsp;<span class="ident" id="4664502">nil</span>&nbsp;<span class="op" id="4664506">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664510">return</span>&nbsp;<span class="ident" id="4664517"><a href="/index/suffixarray/suffixarray.go.html#4664468">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664526">//&nbsp;allocate&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664545">if</span>&nbsp;<span class="num" id="4664548">2</span><span class="op" id="4664549">*</span><span class="ident" id="4664550"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span>&nbsp;<span class="op" id="4664552">&lt;</span>&nbsp;<span class="builtinfunc" id="4664554">cap</span><span class="op" id="4664557">(</span><span class="ident" id="4664558"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664559">.</span><span class="ident" id="4664560">data</span><span class="op" id="4664564">)</span>&nbsp;<span class="op" id="4664566">||</span>&nbsp;<span class="builtinfunc" id="4664569">cap</span><span class="op" id="4664572">(</span><span class="ident" id="4664573"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664574">.</span><span class="ident" id="4664575">data</span><span class="op" id="4664579">)</span>&nbsp;<span class="op" id="4664581">&lt;</span>&nbsp;<span class="ident" id="4664583"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span>&nbsp;<span class="op" id="4664585">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664589">//&nbsp;new&nbsp;data&nbsp;is&nbsp;significantly&nbsp;smaller&nbsp;or&nbsp;larger&nbsp;then</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664643">//&nbsp;existing&nbsp;buffers&nbsp;-&nbsp;allocate&nbsp;new&nbsp;ones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664685"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664686">.</span><span class="ident" id="4664687">data</span>&nbsp;<span class="op" id="4664692">=</span>&nbsp;<span class="builtinfunc" id="4664694">make</span><span class="op" id="4664698">(</span><span class="op" id="4664699">[</span><span class="op" id="4664700">]</span><span class="builtintype" id="4664701">byte</span><span class="op" id="4664705">,</span>&nbsp;<span class="ident" id="4664707"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span><span class="op" id="4664708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664712"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664713">.</span><span class="ident" id="4664714">sa</span>&nbsp;<span class="op" id="4664717">=</span>&nbsp;<span class="builtinfunc" id="4664719">make</span><span class="op" id="4664723">(</span><span class="op" id="4664724">[</span><span class="op" id="4664725">]</span><span class="builtintype" id="4664726">int</span><span class="op" id="4664729">,</span>&nbsp;<span class="ident" id="4664731"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span><span class="op" id="4664732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664735">}</span>&nbsp;<span class="keyword" id="4664737">else</span>&nbsp;<span class="op" id="4664742">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664746">//&nbsp;re-use&nbsp;existing&nbsp;buffers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664775"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664776">.</span><span class="ident" id="4664777">data</span>&nbsp;<span class="op" id="4664782">=</span>&nbsp;<span class="ident" id="4664784"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664785">.</span><span class="ident" id="4664786">data</span><span class="op" id="4664790">[</span><span class="num" id="4664791">0</span><span class="op" id="4664792">:</span><span class="ident" id="4664793"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span><span class="op" id="4664794">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664798"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664799">.</span><span class="ident" id="4664800">sa</span>&nbsp;<span class="op" id="4664803">=</span>&nbsp;<span class="ident" id="4664805"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664806">.</span><span class="ident" id="4664807">sa</span><span class="op" id="4664809">[</span><span class="num" id="4664810">0</span><span class="op" id="4664811">:</span><span class="ident" id="4664812"><a href="/index/suffixarray/suffixarray.go.html#4664465">n</a></span><span class="op" id="4664813">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664820">//&nbsp;read&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664834">if</span>&nbsp;<span class="ident" id="4664837">_</span><span class="op" id="4664838">,</span>&nbsp;<span class="ident" id="4664840">err</span>&nbsp;<span class="op" id="4664844">:=</span>&nbsp;<span class="ident" id="4664847"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4664849">.</span><span class="ident" id="4664850">ReadFull</span><span class="op" id="4664858">(</span><span class="ident" id="4664859"><a href="/index/suffixarray/suffixarray.go.html#4664371">r</a></span><span class="op" id="4664860">,</span>&nbsp;<span class="ident" id="4664862"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664863">.</span><span class="ident" id="4664864">data</span><span class="op" id="4664868">)</span><span class="op" id="4664869">;</span>&nbsp;<span class="ident" id="4664871"><a href="/index/suffixarray/suffixarray.go.html#4664840">err</a></span>&nbsp;<span class="op" id="4664875">!=</span>&nbsp;<span class="ident" id="4664878">nil</span>&nbsp;<span class="op" id="4664882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664886">return</span>&nbsp;<span class="ident" id="4664893"><a href="/index/suffixarray/suffixarray.go.html#4664840">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4664898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4664902">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664917">for</span>&nbsp;<span class="ident" id="4664921">sa</span>&nbsp;<span class="op" id="4664924">:=</span>&nbsp;<span class="ident" id="4664927"><a href="/index/suffixarray/suffixarray.go.html#4664356">x</a></span><span class="op" id="4664928">.</span><span class="ident" id="4664929">sa</span><span class="op" id="4664931">;</span>&nbsp;<span class="builtinfunc" id="4664933">len</span><span class="op" id="4664936">(</span><span class="ident" id="4664937"><a href="/index/suffixarray/suffixarray.go.html#4664921">sa</a></span><span class="op" id="4664939">)</span>&nbsp;<span class="op" id="4664941">&gt;</span>&nbsp;<span class="num" id="4664943">0</span><span class="op" id="4664944">;</span>&nbsp;<span class="op" id="4664946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4664950">n</span><span class="op" id="4664951">,</span>&nbsp;<span class="ident" id="4664953">err</span>&nbsp;<span class="op" id="4664957">:=</span>&nbsp;<span class="ident" id="4664960"><a href="/index/suffixarray/suffixarray.go.html#4663776">readSlice</a></span><span class="op" id="4664969">(</span><span class="ident" id="4664970"><a href="/index/suffixarray/suffixarray.go.html#4664371">r</a></span><span class="op" id="4664971">,</span>&nbsp;<span class="ident" id="4664973"><a href="/index/suffixarray/suffixarray.go.html#4664418">buf</a></span><span class="op" id="4664976">,</span>&nbsp;<span class="ident" id="4664978"><a href="/index/suffixarray/suffixarray.go.html#4664921">sa</a></span><span class="op" id="4664980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4664984">if</span>&nbsp;<span class="ident" id="4664987"><a href="/index/suffixarray/suffixarray.go.html#4664953">err</a></span>&nbsp;<span class="op" id="4664991">!=</span>&nbsp;<span class="ident" id="4664994">nil</span>&nbsp;<span class="op" id="4664998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665003">return</span>&nbsp;<span class="ident" id="4665010"><a href="/index/suffixarray/suffixarray.go.html#4664953">err</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4665020"><a href="/index/suffixarray/suffixarray.go.html#4664921">sa</a></span>&nbsp;<span class="op" id="4665023">=</span>&nbsp;<span class="ident" id="4665025"><a href="/index/suffixarray/suffixarray.go.html#4664921">sa</a></span><span class="op" id="4665027">[</span><span class="ident" id="4665028"><a href="/index/suffixarray/suffixarray.go.html#4664950">n</a></span><span class="op" id="4665029">:</span><span class="op" id="4665030">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665036">return</span>&nbsp;<span class="ident" id="4665043">nil</span><br>
<span class="lineno"></span><span class="op" id="4665047">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4665050">//&nbsp;Write&nbsp;writes&nbsp;the&nbsp;index&nbsp;x&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4665084">func</span>&nbsp;<span class="op" id="4665089">(</span><span class="ident" id="4665090">x</span>&nbsp;<span class="op" id="4665092">*</span><span class="ident" id="4665093"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4665098">)</span>&nbsp;<span class="ident" id="4665100">Write</span><span class="op" id="4665105">(</span><span class="ident" id="4665106">w</span>&nbsp;<span class="ident" id="4665108"><a href="/index/suffixarray/suffixarray.go.html#4662390">io</a></span><span class="op" id="4665110">.</span><span class="ident" id="4665111">Writer</span><span class="op" id="4665117">)</span>&nbsp;<span class="builtintype" id="4665119">error</span>&nbsp;<span class="op" id="4665125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665128">//&nbsp;buffer&nbsp;for&nbsp;all&nbsp;writes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4665154">buf</span>&nbsp;<span class="op" id="4665158">:=</span>&nbsp;<span class="builtinfunc" id="4665161">make</span><span class="op" id="4665165">(</span><span class="op" id="4665166">[</span><span class="op" id="4665167">]</span><span class="builtintype" id="4665168">byte</span><span class="op" id="4665172">,</span>&nbsp;<span class="ident" id="4665174"><a href="/index/suffixarray/suffixarray.go.html#4664233">bufSize</a></span><span class="op" id="4665181">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665185">//&nbsp;write&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665202">if</span>&nbsp;<span class="ident" id="4665205">err</span>&nbsp;<span class="op" id="4665209">:=</span>&nbsp;<span class="ident" id="4665212"><a href="/index/suffixarray/suffixarray.go.html#4662807">writeInt</a></span><span class="op" id="4665220">(</span><span class="ident" id="4665221"><a href="/index/suffixarray/suffixarray.go.html#4665106">w</a></span><span class="op" id="4665222">,</span>&nbsp;<span class="ident" id="4665224"><a href="/index/suffixarray/suffixarray.go.html#4665154">buf</a></span><span class="op" id="4665227">,</span>&nbsp;<span class="builtinfunc" id="4665229">len</span><span class="op" id="4665232">(</span><span class="ident" id="4665233"><a href="/index/suffixarray/suffixarray.go.html#4665090">x</a></span><span class="op" id="4665234">.</span><span class="ident" id="4665235">data</span><span class="op" id="4665239">)</span><span class="op" id="4665240">)</span><span class="op" id="4665241">;</span>&nbsp;<span class="ident" id="4665243"><a href="/index/suffixarray/suffixarray.go.html#4665205">err</a></span>&nbsp;<span class="op" id="4665247">!=</span>&nbsp;<span class="ident" id="4665250">nil</span>&nbsp;<span class="op" id="4665254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665258">return</span>&nbsp;<span class="ident" id="4665265"><a href="/index/suffixarray/suffixarray.go.html#4665205">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665270">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665274">//&nbsp;write&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665289">if</span>&nbsp;<span class="ident" id="4665292">_</span><span class="op" id="4665293">,</span>&nbsp;<span class="ident" id="4665295">err</span>&nbsp;<span class="op" id="4665299">:=</span>&nbsp;<span class="ident" id="4665302"><a href="/index/suffixarray/suffixarray.go.html#4665106">w</a></span><span class="op" id="4665303">.</span><span class="ident" id="4665304">Write</span><span class="op" id="4665309">(</span><span class="ident" id="4665310"><a href="/index/suffixarray/suffixarray.go.html#4665090">x</a></span><span class="op" id="4665311">.</span><span class="ident" id="4665312">data</span><span class="op" id="4665316">)</span><span class="op" id="4665317">;</span>&nbsp;<span class="ident" id="4665319"><a href="/index/suffixarray/suffixarray.go.html#4665295">err</a></span>&nbsp;<span class="op" id="4665323">!=</span>&nbsp;<span class="ident" id="4665326">nil</span>&nbsp;<span class="op" id="4665330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665334">return</span>&nbsp;<span class="ident" id="4665341"><a href="/index/suffixarray/suffixarray.go.html#4665295">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665346">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665350">//&nbsp;write&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665366">for</span>&nbsp;<span class="ident" id="4665370">sa</span>&nbsp;<span class="op" id="4665373">:=</span>&nbsp;<span class="ident" id="4665376"><a href="/index/suffixarray/suffixarray.go.html#4665090">x</a></span><span class="op" id="4665377">.</span><span class="ident" id="4665378">sa</span><span class="op" id="4665380">;</span>&nbsp;<span class="builtinfunc" id="4665382">len</span><span class="op" id="4665385">(</span><span class="ident" id="4665386"><a href="/index/suffixarray/suffixarray.go.html#4665370">sa</a></span><span class="op" id="4665388">)</span>&nbsp;<span class="op" id="4665390">&gt;</span>&nbsp;<span class="num" id="4665392">0</span><span class="op" id="4665393">;</span>&nbsp;<span class="op" id="4665395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4665399">n</span><span class="op" id="4665400">,</span>&nbsp;<span class="ident" id="4665402">err</span>&nbsp;<span class="op" id="4665406">:=</span>&nbsp;<span class="ident" id="4665409"><a href="/index/suffixarray/suffixarray.go.html#4663310">writeSlice</a></span><span class="op" id="4665419">(</span><span class="ident" id="4665420"><a href="/index/suffixarray/suffixarray.go.html#4665106">w</a></span><span class="op" id="4665421">,</span>&nbsp;<span class="ident" id="4665423"><a href="/index/suffixarray/suffixarray.go.html#4665154">buf</a></span><span class="op" id="4665426">,</span>&nbsp;<span class="ident" id="4665428"><a href="/index/suffixarray/suffixarray.go.html#4665370">sa</a></span><span class="op" id="4665430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665434">if</span>&nbsp;<span class="ident" id="4665437"><a href="/index/suffixarray/suffixarray.go.html#4665402">err</a></span>&nbsp;<span class="op" id="4665441">!=</span>&nbsp;<span class="ident" id="4665444">nil</span>&nbsp;<span class="op" id="4665448">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665453">return</span>&nbsp;<span class="ident" id="4665460"><a href="/index/suffixarray/suffixarray.go.html#4665402">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4665470"><a href="/index/suffixarray/suffixarray.go.html#4665370">sa</a></span>&nbsp;<span class="op" id="4665473">=</span>&nbsp;<span class="ident" id="4665475"><a href="/index/suffixarray/suffixarray.go.html#4665370">sa</a></span><span class="op" id="4665477">[</span><span class="ident" id="4665478"><a href="/index/suffixarray/suffixarray.go.html#4665399">n</a></span><span class="op" id="4665479">:</span><span class="op" id="4665480">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4665483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665486">return</span>&nbsp;<span class="ident" id="4665493">nil</span><br>
<span class="lineno">160</span><span class="op" id="4665497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4665500">//&nbsp;Bytes&nbsp;returns&nbsp;the&nbsp;data&nbsp;over&nbsp;which&nbsp;the&nbsp;index&nbsp;was&nbsp;created.</span><br>
<span class="lineno"></span><span class="comment" id="4665560">//&nbsp;It&nbsp;must&nbsp;not&nbsp;be&nbsp;modified.</span><br>
<span class="lineno"></span><span class="comment" id="4665588">//</span><br>
<span class="lineno">165</span><span class="keyword" id="4665591">func</span>&nbsp;<span class="op" id="4665596">(</span><span class="ident" id="4665597">x</span>&nbsp;<span class="op" id="4665599">*</span><span class="ident" id="4665600"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4665605">)</span>&nbsp;<span class="ident" id="4665607">Bytes</span><span class="op" id="4665612">(</span><span class="op" id="4665613">)</span>&nbsp;<span class="op" id="4665615">[</span><span class="op" id="4665616">]</span><span class="builtintype" id="4665617">byte</span>&nbsp;<span class="op" id="4665622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665625">return</span>&nbsp;<span class="ident" id="4665632"><a href="/index/suffixarray/suffixarray.go.html#4665597">x</a></span><span class="op" id="4665633">.</span><span class="ident" id="4665634">data</span><br>
<span class="lineno"></span><span class="op" id="4665639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4665642">func</span>&nbsp;<span class="op" id="4665647">(</span><span class="ident" id="4665648">x</span>&nbsp;<span class="op" id="4665650">*</span><span class="ident" id="4665651"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4665656">)</span>&nbsp;<span class="ident" id="4665658">at</span><span class="op" id="4665660">(</span><span class="ident" id="4665661">i</span>&nbsp;<span class="builtintype" id="4665663">int</span><span class="op" id="4665666">)</span>&nbsp;<span class="op" id="4665668">[</span><span class="op" id="4665669">]</span><span class="builtintype" id="4665670">byte</span>&nbsp;<span class="op" id="4665675">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4665678">return</span>&nbsp;<span class="ident" id="4665685"><a href="/index/suffixarray/suffixarray.go.html#4665648">x</a></span><span class="op" id="4665686">.</span><span class="ident" id="4665687">data</span><span class="op" id="4665691">[</span><span class="ident" id="4665692"><a href="/index/suffixarray/suffixarray.go.html#4665648">x</a></span><span class="op" id="4665693">.</span><span class="ident" id="4665694">sa</span><span class="op" id="4665696">[</span><span class="ident" id="4665697"><a href="/index/suffixarray/suffixarray.go.html#4665661">i</a></span><span class="op" id="4665698">]</span><span class="op" id="4665699">:</span><span class="op" id="4665700">]</span><br>
<span class="lineno"></span><span class="op" id="4665702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4665705">//&nbsp;lookupAll&nbsp;returns&nbsp;a&nbsp;slice&nbsp;into&nbsp;the&nbsp;matching&nbsp;region&nbsp;of&nbsp;the&nbsp;index.</span><br>
<span class="lineno"></span><span class="comment" id="4665773">//&nbsp;The&nbsp;runtime&nbsp;is&nbsp;O(log(N)*len(s)).</span><br>
<span class="lineno">175</span><span class="keyword" id="4665809">func</span>&nbsp;<span class="op" id="4665814">(</span><span class="ident" id="4665815">x</span>&nbsp;<span class="op" id="4665817">*</span><span class="ident" id="4665818"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4665823">)</span>&nbsp;<span class="ident" id="4665825">lookupAll</span><span class="op" id="4665834">(</span><span class="ident" id="4665835">s</span>&nbsp;<span class="op" id="4665837">[</span><span class="op" id="4665838">]</span><span class="builtintype" id="4665839">byte</span><span class="op" id="4665843">)</span>&nbsp;<span class="op" id="4665845">[</span><span class="op" id="4665846">]</span><span class="builtintype" id="4665847">int</span>&nbsp;<span class="op" id="4665851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665854">//&nbsp;find&nbsp;matching&nbsp;suffix&nbsp;index&nbsp;range&nbsp;[i:j]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4665897">//&nbsp;find&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;s&nbsp;would&nbsp;be&nbsp;the&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4665950">i</span>&nbsp;<span class="op" id="4665952">:=</span>&nbsp;<span class="ident" id="4665955"><a href="/index/suffixarray/suffixarray.go.html#4662406">sort</a></span><span class="op" id="4665959">.</span><span class="ident" id="4665960">Search</span><span class="op" id="4665966">(</span><span class="builtinfunc" id="4665967">len</span><span class="op" id="4665970">(</span><span class="ident" id="4665971"><a href="/index/suffixarray/suffixarray.go.html#4665815">x</a></span><span class="op" id="4665972">.</span><span class="ident" id="4665973">sa</span><span class="op" id="4665975">)</span><span class="op" id="4665976">,</span>&nbsp;<span class="keyword" id="4665978">func</span><span class="op" id="4665982">(</span><span class="ident" id="4665983">i</span>&nbsp;<span class="builtintype" id="4665985">int</span><span class="op" id="4665988">)</span>&nbsp;<span class="builtintype" id="4665990">bool</span>&nbsp;<span class="op" id="4665995">{</span>&nbsp;<span class="keyword" id="4665997">return</span>&nbsp;<span class="ident" id="4666004"><a href="/index/suffixarray/suffixarray.go.html#4662362">bytes</a></span><span class="op" id="4666009">.</span><span class="ident" id="4666010">Compare</span><span class="op" id="4666017">(</span><span class="ident" id="4666018"><a href="/index/suffixarray/suffixarray.go.html#4665815">x</a></span><span class="op" id="4666019">.</span><span class="ident" id="4666020">at</span><span class="op" id="4666022">(</span><span class="ident" id="4666023"><a href="/index/suffixarray/suffixarray.go.html#4665983">i</a></span><span class="op" id="4666024">)</span><span class="op" id="4666025">,</span>&nbsp;<span class="ident" id="4666027"><a href="/index/suffixarray/suffixarray.go.html#4665835">s</a></span><span class="op" id="4666028">)</span>&nbsp;<span class="op" id="4666030">&gt;=</span>&nbsp;<span class="num" id="4666033">0</span>&nbsp;<span class="op" id="4666035">}</span><span class="op" id="4666036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4666039">//&nbsp;starting&nbsp;at&nbsp;i,&nbsp;find&nbsp;the&nbsp;first&nbsp;index&nbsp;at&nbsp;which&nbsp;s&nbsp;is&nbsp;not&nbsp;a&nbsp;prefix</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4666106">j</span>&nbsp;<span class="op" id="4666108">:=</span>&nbsp;<span class="ident" id="4666111"><a href="/index/suffixarray/suffixarray.go.html#4665950">i</a></span>&nbsp;<span class="op" id="4666113">+</span>&nbsp;<span class="ident" id="4666115"><a href="/index/suffixarray/suffixarray.go.html#4662406">sort</a></span><span class="op" id="4666119">.</span><span class="ident" id="4666120">Search</span><span class="op" id="4666126">(</span><span class="builtinfunc" id="4666127">len</span><span class="op" id="4666130">(</span><span class="ident" id="4666131"><a href="/index/suffixarray/suffixarray.go.html#4665815">x</a></span><span class="op" id="4666132">.</span><span class="ident" id="4666133">sa</span><span class="op" id="4666135">)</span><span class="op" id="4666136">-</span><span class="ident" id="4666137"><a href="/index/suffixarray/suffixarray.go.html#4665950">i</a></span><span class="op" id="4666138">,</span>&nbsp;<span class="keyword" id="4666140">func</span><span class="op" id="4666144">(</span><span class="ident" id="4666145">j</span>&nbsp;<span class="builtintype" id="4666147">int</span><span class="op" id="4666150">)</span>&nbsp;<span class="builtintype" id="4666152">bool</span>&nbsp;<span class="op" id="4666157">{</span>&nbsp;<span class="keyword" id="4666159">return</span>&nbsp;<span class="op" id="4666166">!</span><span class="ident" id="4666167"><a href="/index/suffixarray/suffixarray.go.html#4662362">bytes</a></span><span class="op" id="4666172">.</span><span class="ident" id="4666173">HasPrefix</span><span class="op" id="4666182">(</span><span class="ident" id="4666183"><a href="/index/suffixarray/suffixarray.go.html#4665815">x</a></span><span class="op" id="4666184">.</span><span class="ident" id="4666185">at</span><span class="op" id="4666187">(</span><span class="ident" id="4666188"><a href="/index/suffixarray/suffixarray.go.html#4666145">j</a></span><span class="op" id="4666189">+</span><span class="ident" id="4666190"><a href="/index/suffixarray/suffixarray.go.html#4665950">i</a></span><span class="op" id="4666191">)</span><span class="op" id="4666192">,</span>&nbsp;<span class="ident" id="4666194"><a href="/index/suffixarray/suffixarray.go.html#4665835">s</a></span><span class="op" id="4666195">)</span>&nbsp;<span class="op" id="4666197">}</span><span class="op" id="4666198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4666201">return</span>&nbsp;<span class="ident" id="4666208"><a href="/index/suffixarray/suffixarray.go.html#4665815">x</a></span><span class="op" id="4666209">.</span><span class="ident" id="4666210">sa</span><span class="op" id="4666212">[</span><span class="ident" id="4666213"><a href="/index/suffixarray/suffixarray.go.html#4665950">i</a></span><span class="op" id="4666214">:</span><span class="ident" id="4666215"><a href="/index/suffixarray/suffixarray.go.html#4666106">j</a></span><span class="op" id="4666216">]</span><br>
<span class="lineno"></span><span class="op" id="4666218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4666221">//&nbsp;Lookup&nbsp;returns&nbsp;an&nbsp;unsorted&nbsp;list&nbsp;of&nbsp;at&nbsp;most&nbsp;n&nbsp;indices&nbsp;where&nbsp;the&nbsp;byte&nbsp;string&nbsp;s</span><br>
<span class="lineno">185</span><span class="comment" id="4666301">//&nbsp;occurs&nbsp;in&nbsp;the&nbsp;indexed&nbsp;data.&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;all&nbsp;occurrences&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="4666372">//&nbsp;The&nbsp;result&nbsp;is&nbsp;nil&nbsp;if&nbsp;s&nbsp;is&nbsp;empty,&nbsp;s&nbsp;is&nbsp;not&nbsp;found,&nbsp;or&nbsp;n&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="4666435">//&nbsp;Lookup&nbsp;time&nbsp;is&nbsp;O(log(N)*len(s)&nbsp;+&nbsp;len(result))&nbsp;where&nbsp;N&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4666499">//&nbsp;size&nbsp;of&nbsp;the&nbsp;indexed&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4666528">//</span><br>
<span class="lineno">190</span><span class="keyword" id="4666531">func</span>&nbsp;<span class="op" id="4666536">(</span><span class="ident" id="4666537">x</span>&nbsp;<span class="op" id="4666539">*</span><span class="ident" id="4666540"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4666545">)</span>&nbsp;<span class="ident" id="4666547">Lookup</span><span class="op" id="4666553">(</span><span class="ident" id="4666554">s</span>&nbsp;<span class="op" id="4666556">[</span><span class="op" id="4666557">]</span><span class="builtintype" id="4666558">byte</span><span class="op" id="4666562">,</span>&nbsp;<span class="ident" id="4666564">n</span>&nbsp;<span class="builtintype" id="4666566">int</span><span class="op" id="4666569">)</span>&nbsp;<span class="op" id="4666571">(</span><span class="ident" id="4666572">result</span>&nbsp;<span class="op" id="4666579">[</span><span class="op" id="4666580">]</span><span class="builtintype" id="4666581">int</span><span class="op" id="4666584">)</span>&nbsp;<span class="op" id="4666586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4666589">if</span>&nbsp;<span class="builtinfunc" id="4666592">len</span><span class="op" id="4666595">(</span><span class="ident" id="4666596"><a href="/index/suffixarray/suffixarray.go.html#4666554">s</a></span><span class="op" id="4666597">)</span>&nbsp;<span class="op" id="4666599">&gt;</span>&nbsp;<span class="num" id="4666601">0</span>&nbsp;<span class="op" id="4666603">&amp;&amp;</span>&nbsp;<span class="ident" id="4666606"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span>&nbsp;<span class="op" id="4666608">!=</span>&nbsp;<span class="num" id="4666611">0</span>&nbsp;<span class="op" id="4666613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4666617">matches</span>&nbsp;<span class="op" id="4666625">:=</span>&nbsp;<span class="ident" id="4666628"><a href="/index/suffixarray/suffixarray.go.html#4666537">x</a></span><span class="op" id="4666629">.</span><span class="ident" id="4666630">lookupAll</span><span class="op" id="4666639">(</span><span class="ident" id="4666640"><a href="/index/suffixarray/suffixarray.go.html#4666554">s</a></span><span class="op" id="4666641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4666645">if</span>&nbsp;<span class="ident" id="4666648"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span>&nbsp;<span class="op" id="4666650">&lt;</span>&nbsp;<span class="num" id="4666652">0</span>&nbsp;<span class="op" id="4666654">||</span>&nbsp;<span class="builtinfunc" id="4666657">len</span><span class="op" id="4666660">(</span><span class="ident" id="4666661"><a href="/index/suffixarray/suffixarray.go.html#4666617">matches</a></span><span class="op" id="4666668">)</span>&nbsp;<span class="op" id="4666670">&lt;</span>&nbsp;<span class="ident" id="4666672"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span>&nbsp;<span class="op" id="4666674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4666679"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span>&nbsp;<span class="op" id="4666681">=</span>&nbsp;<span class="builtinfunc" id="4666683">len</span><span class="op" id="4666686">(</span><span class="ident" id="4666687"><a href="/index/suffixarray/suffixarray.go.html#4666617">matches</a></span><span class="op" id="4666694">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4666698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4666702">//&nbsp;0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(matches)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4666730">if</span>&nbsp;<span class="ident" id="4666733"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span>&nbsp;<span class="op" id="4666735">&gt;</span>&nbsp;<span class="num" id="4666737">0</span>&nbsp;<span class="op" id="4666739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4666744"><a href="/index/suffixarray/suffixarray.go.html#4666572">result</a></span>&nbsp;<span class="op" id="4666751">=</span>&nbsp;<span class="builtinfunc" id="4666753">make</span><span class="op" id="4666757">(</span><span class="op" id="4666758">[</span><span class="op" id="4666759">]</span><span class="builtintype" id="4666760">int</span><span class="op" id="4666763">,</span>&nbsp;<span class="ident" id="4666765"><a href="/index/suffixarray/suffixarray.go.html#4666564">n</a></span><span class="op" id="4666766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4666771">copy</span><span class="op" id="4666775">(</span><span class="ident" id="4666776"><a href="/index/suffixarray/suffixarray.go.html#4666572">result</a></span><span class="op" id="4666782">,</span>&nbsp;<span class="ident" id="4666784"><a href="/index/suffixarray/suffixarray.go.html#4666617">matches</a></span><span class="op" id="4666791">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4666795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4666798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4666801">return</span><br>
<span class="lineno"></span><span class="op" id="4666808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="4666811">//&nbsp;FindAllIndex&nbsp;returns&nbsp;a&nbsp;sorted&nbsp;list&nbsp;of&nbsp;non-overlapping&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4666883">//&nbsp;regular&nbsp;expression&nbsp;r,&nbsp;where&nbsp;a&nbsp;match&nbsp;is&nbsp;a&nbsp;pair&nbsp;of&nbsp;indices&nbsp;specifying</span><br>
<span class="lineno"></span><span class="comment" id="4666954">//&nbsp;the&nbsp;matched&nbsp;slice&nbsp;of&nbsp;x.Bytes().&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;all&nbsp;matches&nbsp;are&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="4667024">//&nbsp;in&nbsp;successive&nbsp;order.&nbsp;Otherwise,&nbsp;at&nbsp;most&nbsp;n&nbsp;matches&nbsp;are&nbsp;returned&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4667094">//&nbsp;they&nbsp;may&nbsp;not&nbsp;be&nbsp;successive.&nbsp;The&nbsp;result&nbsp;is&nbsp;nil&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;matches,</span><br>
<span class="lineno">210</span><span class="comment" id="4667168">//&nbsp;or&nbsp;if&nbsp;n&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="4667185">//</span><br>
<span class="lineno"></span><span class="keyword" id="4667188">func</span>&nbsp;<span class="op" id="4667193">(</span><span class="ident" id="4667194">x</span>&nbsp;<span class="op" id="4667196">*</span><span class="ident" id="4667197"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="4667202">)</span>&nbsp;<span class="ident" id="4667204">FindAllIndex</span><span class="op" id="4667216">(</span><span class="ident" id="4667217">r</span>&nbsp;<span class="op" id="4667219">*</span><span class="ident" id="4667220"><a href="/index/suffixarray/suffixarray.go.html#4662396">regexp</a></span><span class="op" id="4667226">.</span><span class="ident" id="4667227">Regexp</span><span class="op" id="4667233">,</span>&nbsp;<span class="ident" id="4667235">n</span>&nbsp;<span class="builtintype" id="4667237">int</span><span class="op" id="4667240">)</span>&nbsp;<span class="op" id="4667242">(</span><span class="ident" id="4667243">result</span>&nbsp;<span class="op" id="4667250">[</span><span class="op" id="4667251">]</span><span class="op" id="4667252">[</span><span class="op" id="4667253">]</span><span class="builtintype" id="4667254">int</span><span class="op" id="4667257">)</span>&nbsp;<span class="op" id="4667259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667262">//&nbsp;a&nbsp;non-empty&nbsp;literal&nbsp;prefix&nbsp;is&nbsp;used&nbsp;to&nbsp;determine&nbsp;possible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667323">//&nbsp;match&nbsp;start&nbsp;indices&nbsp;with&nbsp;Lookup</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4667359">prefix</span><span class="op" id="4667365">,</span>&nbsp;<span class="ident" id="4667367">complete</span>&nbsp;<span class="op" id="4667376">:=</span>&nbsp;<span class="ident" id="4667379"><a href="/index/suffixarray/suffixarray.go.html#4667217">r</a></span><span class="op" id="4667380">.</span><span class="ident" id="4667381">LiteralPrefix</span><span class="op" id="4667394">(</span><span class="op" id="4667395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4667398">lit</span>&nbsp;<span class="op" id="4667402">:=</span>&nbsp;<span class="op" id="4667405">[</span><span class="op" id="4667406">]</span><span class="builtintype" id="4667407">byte</span><span class="op" id="4667411">(</span><span class="ident" id="4667412"><a href="/index/suffixarray/suffixarray.go.html#4667359">prefix</a></span><span class="op" id="4667418">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667422">//&nbsp;worst-case&nbsp;scenario:&nbsp;no&nbsp;literal&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4667465">if</span>&nbsp;<span class="ident" id="4667468"><a href="/index/suffixarray/suffixarray.go.html#4667359">prefix</a></span>&nbsp;<span class="op" id="4667475">==</span>&nbsp;<span class="string" id="4667478">&#34;&#34;</span>&nbsp;<span class="op" id="4667481">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4667485">return</span>&nbsp;<span class="ident" id="4667492"><a href="/index/suffixarray/suffixarray.go.html#4667217">r</a></span><span class="op" id="4667493">.</span><span class="ident" id="4667494">FindAllIndex</span><span class="op" id="4667506">(</span><span class="ident" id="4667507"><a href="/index/suffixarray/suffixarray.go.html#4667194">x</a></span><span class="op" id="4667508">.</span><span class="ident" id="4667509">data</span><span class="op" id="4667513">,</span>&nbsp;<span class="ident" id="4667515"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span><span class="op" id="4667516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4667519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667523">//&nbsp;if&nbsp;regexp&nbsp;is&nbsp;a&nbsp;literal&nbsp;just&nbsp;use&nbsp;Lookup&nbsp;and&nbsp;convert&nbsp;its</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667582">//&nbsp;result&nbsp;into&nbsp;match&nbsp;pairs</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4667610">if</span>&nbsp;<span class="ident" id="4667613"><a href="/index/suffixarray/suffixarray.go.html#4667367">complete</a></span>&nbsp;<span class="op" id="4667622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667626">//&nbsp;Lookup&nbsp;returns&nbsp;indices&nbsp;that&nbsp;may&nbsp;belong&nbsp;to&nbsp;overlapping&nbsp;matches.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667694">//&nbsp;After&nbsp;eliminating&nbsp;them,&nbsp;we&nbsp;may&nbsp;end&nbsp;up&nbsp;with&nbsp;fewer&nbsp;than&nbsp;n&nbsp;matches.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667764">//&nbsp;If&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;enough&nbsp;at&nbsp;the&nbsp;end,&nbsp;redo&nbsp;the&nbsp;search&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667829">//&nbsp;increased&nbsp;value&nbsp;n1,&nbsp;but&nbsp;only&nbsp;if&nbsp;Lookup&nbsp;returned&nbsp;all&nbsp;the&nbsp;requested</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667900">//&nbsp;indices&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;(if&nbsp;it&nbsp;returned&nbsp;fewer&nbsp;than&nbsp;that&nbsp;then</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4667969">//&nbsp;there&nbsp;cannot&nbsp;be&nbsp;more).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4667997">for</span>&nbsp;<span class="ident" id="4668001">n1</span>&nbsp;<span class="op" id="4668004">:=</span>&nbsp;<span class="ident" id="4668007"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span><span class="op" id="4668008">;</span>&nbsp;<span class="op" id="4668010">;</span>&nbsp;<span class="ident" id="4668012"><a href="/index/suffixarray/suffixarray.go.html#4668001">n1</a></span>&nbsp;<span class="op" id="4668015">+=</span>&nbsp;<span class="num" id="4668018">2</span>&nbsp;<span class="op" id="4668020">*</span>&nbsp;<span class="op" id="4668022">(</span><span class="ident" id="4668023"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4668025">-</span>&nbsp;<span class="builtinfunc" id="4668027">len</span><span class="op" id="4668030">(</span><span class="ident" id="4668031"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4668037">)</span><span class="op" id="4668038">)</span>&nbsp;<span class="comment" id="4668040">/*&nbsp;overflow&nbsp;ok&nbsp;*/</span>&nbsp;<span class="op" id="4668058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668063">indices</span>&nbsp;<span class="op" id="4668071">:=</span>&nbsp;<span class="ident" id="4668074"><a href="/index/suffixarray/suffixarray.go.html#4667194">x</a></span><span class="op" id="4668075">.</span><span class="ident" id="4668076">Lookup</span><span class="op" id="4668082">(</span><span class="ident" id="4668083"><a href="/index/suffixarray/suffixarray.go.html#4667398">lit</a></span><span class="op" id="4668086">,</span>&nbsp;<span class="ident" id="4668088"><a href="/index/suffixarray/suffixarray.go.html#4668001">n1</a></span><span class="op" id="4668090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668095">if</span>&nbsp;<span class="builtinfunc" id="4668098">len</span><span class="op" id="4668101">(</span><span class="ident" id="4668102"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span><span class="op" id="4668109">)</span>&nbsp;<span class="op" id="4668111">==</span>&nbsp;<span class="num" id="4668114">0</span>&nbsp;<span class="op" id="4668116">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668122">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668137"><a href="/index/suffixarray/suffixarray.go.html#4662406">sort</a></span><span class="op" id="4668141">.</span><span class="ident" id="4668142">Ints</span><span class="op" id="4668146">(</span><span class="ident" id="4668147"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span><span class="op" id="4668154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668159">pairs</span>&nbsp;<span class="op" id="4668165">:=</span>&nbsp;<span class="builtinfunc" id="4668168">make</span><span class="op" id="4668172">(</span><span class="op" id="4668173">[</span><span class="op" id="4668174">]</span><span class="builtintype" id="4668175">int</span><span class="op" id="4668178">,</span>&nbsp;<span class="num" id="4668180">2</span><span class="op" id="4668181">*</span><span class="builtinfunc" id="4668182">len</span><span class="op" id="4668185">(</span><span class="ident" id="4668186"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span><span class="op" id="4668193">)</span><span class="op" id="4668194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668199"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4668206">=</span>&nbsp;<span class="builtinfunc" id="4668208">make</span><span class="op" id="4668212">(</span><span class="op" id="4668213">[</span><span class="op" id="4668214">]</span><span class="op" id="4668215">[</span><span class="op" id="4668216">]</span><span class="builtintype" id="4668217">int</span><span class="op" id="4668220">,</span>&nbsp;<span class="builtinfunc" id="4668222">len</span><span class="op" id="4668225">(</span><span class="ident" id="4668226"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span><span class="op" id="4668233">)</span><span class="op" id="4668234">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668239">count</span>&nbsp;<span class="op" id="4668245">:=</span>&nbsp;<span class="num" id="4668248">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668253">prev</span>&nbsp;<span class="op" id="4668258">:=</span>&nbsp;<span class="num" id="4668261">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668266">for</span>&nbsp;<span class="ident" id="4668270">_</span><span class="op" id="4668271">,</span>&nbsp;<span class="ident" id="4668273">i</span>&nbsp;<span class="op" id="4668275">:=</span>&nbsp;<span class="keyword" id="4668278">range</span>&nbsp;<span class="ident" id="4668284"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span>&nbsp;<span class="op" id="4668292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668298">if</span>&nbsp;<span class="ident" id="4668301"><a href="/index/suffixarray/suffixarray.go.html#4668239">count</a></span>&nbsp;<span class="op" id="4668307">==</span>&nbsp;<span class="ident" id="4668310"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4668312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668319">break</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668335">//&nbsp;ignore&nbsp;indices&nbsp;leading&nbsp;to&nbsp;overlapping&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668388">if</span>&nbsp;<span class="ident" id="4668391"><a href="/index/suffixarray/suffixarray.go.html#4668253">prev</a></span>&nbsp;<span class="op" id="4668396">&lt;=</span>&nbsp;<span class="ident" id="4668399"><a href="/index/suffixarray/suffixarray.go.html#4668273">i</a></span>&nbsp;<span class="op" id="4668401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668408">j</span>&nbsp;<span class="op" id="4668410">:=</span>&nbsp;<span class="num" id="4668413">2</span>&nbsp;<span class="op" id="4668415">*</span>&nbsp;<span class="ident" id="4668417"><a href="/index/suffixarray/suffixarray.go.html#4668239">count</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668428"><a href="/index/suffixarray/suffixarray.go.html#4668159">pairs</a></span><span class="op" id="4668433">[</span><span class="ident" id="4668434"><a href="/index/suffixarray/suffixarray.go.html#4668408">j</a></span><span class="op" id="4668435">+</span><span class="num" id="4668436">0</span><span class="op" id="4668437">]</span>&nbsp;<span class="op" id="4668439">=</span>&nbsp;<span class="ident" id="4668441"><a href="/index/suffixarray/suffixarray.go.html#4668273">i</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668448"><a href="/index/suffixarray/suffixarray.go.html#4668159">pairs</a></span><span class="op" id="4668453">[</span><span class="ident" id="4668454"><a href="/index/suffixarray/suffixarray.go.html#4668408">j</a></span><span class="op" id="4668455">+</span><span class="num" id="4668456">1</span><span class="op" id="4668457">]</span>&nbsp;<span class="op" id="4668459">=</span>&nbsp;<span class="ident" id="4668461"><a href="/index/suffixarray/suffixarray.go.html#4668273">i</a></span>&nbsp;<span class="op" id="4668463">+</span>&nbsp;<span class="builtinfunc" id="4668465">len</span><span class="op" id="4668468">(</span><span class="ident" id="4668469"><a href="/index/suffixarray/suffixarray.go.html#4667398">lit</a></span><span class="op" id="4668472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668479"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4668485">[</span><span class="ident" id="4668486"><a href="/index/suffixarray/suffixarray.go.html#4668239">count</a></span><span class="op" id="4668491">]</span>&nbsp;<span class="op" id="4668493">=</span>&nbsp;<span class="ident" id="4668495"><a href="/index/suffixarray/suffixarray.go.html#4668159">pairs</a></span><span class="op" id="4668500">[</span><span class="ident" id="4668501"><a href="/index/suffixarray/suffixarray.go.html#4668408">j</a></span>&nbsp;<span class="op" id="4668503">:</span>&nbsp;<span class="ident" id="4668505"><a href="/index/suffixarray/suffixarray.go.html#4668408">j</a></span><span class="op" id="4668506">+</span><span class="num" id="4668507">2</span><span class="op" id="4668508">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668515"><a href="/index/suffixarray/suffixarray.go.html#4668239">count</a></span><span class="op" id="4668520">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668528"><a href="/index/suffixarray/suffixarray.go.html#4668253">prev</a></span>&nbsp;<span class="op" id="4668533">=</span>&nbsp;<span class="ident" id="4668535"><a href="/index/suffixarray/suffixarray.go.html#4668273">i</a></span>&nbsp;<span class="op" id="4668537">+</span>&nbsp;<span class="builtinfunc" id="4668539">len</span><span class="op" id="4668542">(</span><span class="ident" id="4668543"><a href="/index/suffixarray/suffixarray.go.html#4667398">lit</a></span><span class="op" id="4668546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668552">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668562"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4668569">=</span>&nbsp;<span class="ident" id="4668571"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4668577">[</span><span class="num" id="4668578">0</span><span class="op" id="4668579">:</span><span class="ident" id="4668580"><a href="/index/suffixarray/suffixarray.go.html#4668239">count</a></span><span class="op" id="4668585">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668590">if</span>&nbsp;<span class="builtinfunc" id="4668593">len</span><span class="op" id="4668596">(</span><span class="ident" id="4668597"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4668603">)</span>&nbsp;<span class="op" id="4668605">&gt;=</span>&nbsp;<span class="ident" id="4668608"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4668610">||</span>&nbsp;<span class="builtinfunc" id="4668613">len</span><span class="op" id="4668616">(</span><span class="ident" id="4668617"><a href="/index/suffixarray/suffixarray.go.html#4668063">indices</a></span><span class="op" id="4668624">)</span>&nbsp;<span class="op" id="4668626">!=</span>&nbsp;<span class="ident" id="4668629"><a href="/index/suffixarray/suffixarray.go.html#4668001">n1</a></span>&nbsp;<span class="op" id="4668632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668638">//&nbsp;found&nbsp;all&nbsp;matches&nbsp;or&nbsp;there&#39;s&nbsp;no&nbsp;chance&nbsp;to&nbsp;find&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668697">//&nbsp;(n&nbsp;and&nbsp;n1&nbsp;can&nbsp;be&nbsp;negative)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668731">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668748">if</span>&nbsp;<span class="builtinfunc" id="4668751">len</span><span class="op" id="4668754">(</span><span class="ident" id="4668755"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4668761">)</span>&nbsp;<span class="op" id="4668763">==</span>&nbsp;<span class="num" id="4668766">0</span>&nbsp;<span class="op" id="4668768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4668773"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4668780">=</span>&nbsp;<span class="ident" id="4668782">nil</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4668792">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4668800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668804">//&nbsp;regexp&nbsp;has&nbsp;a&nbsp;non-empty&nbsp;literal&nbsp;prefix;&nbsp;Lookup(lit)&nbsp;computes</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668868">//&nbsp;the&nbsp;indices&nbsp;of&nbsp;possible&nbsp;complete&nbsp;matches;&nbsp;use&nbsp;these&nbsp;as&nbsp;starting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668936">//&nbsp;points&nbsp;for&nbsp;anchored&nbsp;searches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4668969">//&nbsp;(regexp&nbsp;&#34;^&#34;&nbsp;matches&nbsp;beginning&nbsp;of&nbsp;input,&nbsp;not&nbsp;beginning&nbsp;of&nbsp;line)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669036"><a href="/index/suffixarray/suffixarray.go.html#4667217">r</a></span>&nbsp;<span class="op" id="4669038">=</span>&nbsp;<span class="ident" id="4669040"><a href="/index/suffixarray/suffixarray.go.html#4662396">regexp</a></span><span class="op" id="4669046">.</span><span class="ident" id="4669047">MustCompile</span><span class="op" id="4669058">(</span><span class="string" id="4669059">&#34;^&#34;</span>&nbsp;<span class="op" id="4669063">+</span>&nbsp;<span class="ident" id="4669065"><a href="/index/suffixarray/suffixarray.go.html#4667217">r</a></span><span class="op" id="4669066">.</span><span class="ident" id="4669067">String</span><span class="op" id="4669073">(</span><span class="op" id="4669074">)</span><span class="op" id="4669075">)</span>&nbsp;<span class="comment" id="4669077">//&nbsp;compiles&nbsp;because&nbsp;r&nbsp;compiled</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4669110">//&nbsp;same&nbsp;comment&nbsp;about&nbsp;Lookup&nbsp;applies&nbsp;here&nbsp;as&nbsp;in&nbsp;the&nbsp;loop&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669174">for</span>&nbsp;<span class="ident" id="4669178">n1</span>&nbsp;<span class="op" id="4669181">:=</span>&nbsp;<span class="ident" id="4669184"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span><span class="op" id="4669185">;</span>&nbsp;<span class="op" id="4669187">;</span>&nbsp;<span class="ident" id="4669189"><a href="/index/suffixarray/suffixarray.go.html#4669178">n1</a></span>&nbsp;<span class="op" id="4669192">+=</span>&nbsp;<span class="num" id="4669195">2</span>&nbsp;<span class="op" id="4669197">*</span>&nbsp;<span class="op" id="4669199">(</span><span class="ident" id="4669200"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4669202">-</span>&nbsp;<span class="builtinfunc" id="4669204">len</span><span class="op" id="4669207">(</span><span class="ident" id="4669208"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669214">)</span><span class="op" id="4669215">)</span>&nbsp;<span class="comment" id="4669217">/*&nbsp;overflow&nbsp;ok&nbsp;*/</span>&nbsp;<span class="op" id="4669235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669239">indices</span>&nbsp;<span class="op" id="4669247">:=</span>&nbsp;<span class="ident" id="4669250"><a href="/index/suffixarray/suffixarray.go.html#4667194">x</a></span><span class="op" id="4669251">.</span><span class="ident" id="4669252">Lookup</span><span class="op" id="4669258">(</span><span class="ident" id="4669259"><a href="/index/suffixarray/suffixarray.go.html#4667398">lit</a></span><span class="op" id="4669262">,</span>&nbsp;<span class="ident" id="4669264"><a href="/index/suffixarray/suffixarray.go.html#4669178">n1</a></span><span class="op" id="4669266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669270">if</span>&nbsp;<span class="builtinfunc" id="4669273">len</span><span class="op" id="4669276">(</span><span class="ident" id="4669277"><a href="/index/suffixarray/suffixarray.go.html#4669239">indices</a></span><span class="op" id="4669284">)</span>&nbsp;<span class="op" id="4669286">==</span>&nbsp;<span class="num" id="4669289">0</span>&nbsp;<span class="op" id="4669291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669296">return</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669309"><a href="/index/suffixarray/suffixarray.go.html#4662406">sort</a></span><span class="op" id="4669313">.</span><span class="ident" id="4669314">Ints</span><span class="op" id="4669318">(</span><span class="ident" id="4669319"><a href="/index/suffixarray/suffixarray.go.html#4669239">indices</a></span><span class="op" id="4669326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669330"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4669337">=</span>&nbsp;<span class="ident" id="4669339"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669345">[</span><span class="num" id="4669346">0</span><span class="op" id="4669347">:</span><span class="num" id="4669348">0</span><span class="op" id="4669349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669353">prev</span>&nbsp;<span class="op" id="4669358">:=</span>&nbsp;<span class="num" id="4669361">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669365">for</span>&nbsp;<span class="ident" id="4669369">_</span><span class="op" id="4669370">,</span>&nbsp;<span class="ident" id="4669372">i</span>&nbsp;<span class="op" id="4669374">:=</span>&nbsp;<span class="keyword" id="4669377">range</span>&nbsp;<span class="ident" id="4669383"><a href="/index/suffixarray/suffixarray.go.html#4669239">indices</a></span>&nbsp;<span class="op" id="4669391">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669396">if</span>&nbsp;<span class="builtinfunc" id="4669399">len</span><span class="op" id="4669402">(</span><span class="ident" id="4669403"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669409">)</span>&nbsp;<span class="op" id="4669411">==</span>&nbsp;<span class="ident" id="4669414"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4669416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669422">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669436">m</span>&nbsp;<span class="op" id="4669438">:=</span>&nbsp;<span class="ident" id="4669441"><a href="/index/suffixarray/suffixarray.go.html#4667217">r</a></span><span class="op" id="4669442">.</span><span class="ident" id="4669443">FindIndex</span><span class="op" id="4669452">(</span><span class="ident" id="4669453"><a href="/index/suffixarray/suffixarray.go.html#4667194">x</a></span><span class="op" id="4669454">.</span><span class="ident" id="4669455">data</span><span class="op" id="4669459">[</span><span class="ident" id="4669460"><a href="/index/suffixarray/suffixarray.go.html#4669372">i</a></span><span class="op" id="4669461">:</span><span class="op" id="4669462">]</span><span class="op" id="4669463">)</span>&nbsp;<span class="comment" id="4669465">//&nbsp;anchored&nbsp;search&nbsp;-&nbsp;will&nbsp;not&nbsp;run&nbsp;off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4669506">//&nbsp;ignore&nbsp;indices&nbsp;leading&nbsp;to&nbsp;overlapping&nbsp;matches</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669558">if</span>&nbsp;<span class="ident" id="4669561"><a href="/index/suffixarray/suffixarray.go.html#4669436">m</a></span>&nbsp;<span class="op" id="4669563">!=</span>&nbsp;<span class="ident" id="4669566">nil</span>&nbsp;<span class="op" id="4669570">&amp;&amp;</span>&nbsp;<span class="ident" id="4669573"><a href="/index/suffixarray/suffixarray.go.html#4669353">prev</a></span>&nbsp;<span class="op" id="4669578">&lt;=</span>&nbsp;<span class="ident" id="4669581"><a href="/index/suffixarray/suffixarray.go.html#4669372">i</a></span>&nbsp;<span class="op" id="4669583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669589"><a href="/index/suffixarray/suffixarray.go.html#4669436">m</a></span><span class="op" id="4669590">[</span><span class="num" id="4669591">0</span><span class="op" id="4669592">]</span>&nbsp;<span class="op" id="4669594">=</span>&nbsp;<span class="ident" id="4669596"><a href="/index/suffixarray/suffixarray.go.html#4669372">i</a></span>&nbsp;<span class="comment" id="4669598">//&nbsp;correct&nbsp;m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669615"><a href="/index/suffixarray/suffixarray.go.html#4669436">m</a></span><span class="op" id="4669616">[</span><span class="num" id="4669617">1</span><span class="op" id="4669618">]</span>&nbsp;<span class="op" id="4669620">+=</span>&nbsp;<span class="ident" id="4669623"><a href="/index/suffixarray/suffixarray.go.html#4669372">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669629"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4669636">=</span>&nbsp;<span class="builtinfunc" id="4669638">append</span><span class="op" id="4669644">(</span><span class="ident" id="4669645"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669651">,</span>&nbsp;<span class="ident" id="4669653"><a href="/index/suffixarray/suffixarray.go.html#4669436">m</a></span><span class="op" id="4669654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669660"><a href="/index/suffixarray/suffixarray.go.html#4669353">prev</a></span>&nbsp;<span class="op" id="4669665">=</span>&nbsp;<span class="ident" id="4669667"><a href="/index/suffixarray/suffixarray.go.html#4669436">m</a></span><span class="op" id="4669668">[</span><span class="num" id="4669669">1</span><span class="op" id="4669670">]</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669683">if</span>&nbsp;<span class="builtinfunc" id="4669686">len</span><span class="op" id="4669689">(</span><span class="ident" id="4669690"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669696">)</span>&nbsp;<span class="op" id="4669698">&gt;=</span>&nbsp;<span class="ident" id="4669701"><a href="/index/suffixarray/suffixarray.go.html#4667235">n</a></span>&nbsp;<span class="op" id="4669703">||</span>&nbsp;<span class="builtinfunc" id="4669706">len</span><span class="op" id="4669709">(</span><span class="ident" id="4669710"><a href="/index/suffixarray/suffixarray.go.html#4669239">indices</a></span><span class="op" id="4669717">)</span>&nbsp;<span class="op" id="4669719">!=</span>&nbsp;<span class="ident" id="4669722"><a href="/index/suffixarray/suffixarray.go.html#4669178">n1</a></span>&nbsp;<span class="op" id="4669725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4669730">//&nbsp;found&nbsp;all&nbsp;matches&nbsp;or&nbsp;there&#39;s&nbsp;no&nbsp;chance&nbsp;to&nbsp;find&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4669788">//&nbsp;(n&nbsp;and&nbsp;n1&nbsp;can&nbsp;be&nbsp;negative)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669821">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669835">if</span>&nbsp;<span class="builtinfunc" id="4669838">len</span><span class="op" id="4669841">(</span><span class="ident" id="4669842"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span><span class="op" id="4669848">)</span>&nbsp;<span class="op" id="4669850">==</span>&nbsp;<span class="num" id="4669853">0</span>&nbsp;<span class="op" id="4669855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4669859"><a href="/index/suffixarray/suffixarray.go.html#4667243">result</a></span>&nbsp;<span class="op" id="4669866">=</span>&nbsp;<span class="ident" id="4669868">nil</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4669873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4669876">return</span><br>
<span class="lineno"></span><span class="op" id="4669883">}</span>
</div>
</body>
</html>
