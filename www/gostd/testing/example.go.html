<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6190571">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6190626">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6190680">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6190731">package</span>&nbsp;<span class="ident" id="6190739">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6190748">import</span>&nbsp;<span class="op" id="6190755">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190758">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190767">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190774">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190780">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190786">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6190797">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6190804">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6190807">type</span>&nbsp;<span class="ident" id="6190812">InternalExample</span>&nbsp;<span class="keyword" id="6190828">struct</span>&nbsp;<span class="op" id="6190835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190838">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6190845">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190853">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190860">func</span><span class="op" id="6190864">(</span><span class="op" id="6190865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190868">Output</span>&nbsp;<span class="builtintype" id="6190875">string</span><br>
<span class="lineno">20</span><span class="op" id="6190882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6190885">func</span>&nbsp;<span class="ident" id="6190890">RunExamples</span><span class="op" id="6190901">(</span><span class="ident" id="6190902">matchString</span>&nbsp;<span class="keyword" id="6190914">func</span><span class="op" id="6190918">(</span><span class="ident" id="6190919">pat</span><span class="op" id="6190922">,</span>&nbsp;<span class="ident" id="6190924">str</span>&nbsp;<span class="builtintype" id="6190928">string</span><span class="op" id="6190934">)</span>&nbsp;<span class="op" id="6190936">(</span><span class="builtintype" id="6190937">bool</span><span class="op" id="6190941">,</span>&nbsp;<span class="builtintype" id="6190943">error</span><span class="op" id="6190948">)</span><span class="op" id="6190949">,</span>&nbsp;<span class="ident" id="6190951">examples</span>&nbsp;<span class="op" id="6190960">[</span><span class="op" id="6190961">]</span><span class="ident" id="6190962">InternalExample</span><span class="op" id="6190977">)</span>&nbsp;<span class="op" id="6190979">(</span><span class="ident" id="6190980">ok</span>&nbsp;<span class="builtintype" id="6190983">bool</span><span class="op" id="6190987">)</span>&nbsp;<span class="op" id="6190989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190992">ok</span>&nbsp;<span class="op" id="6190995">=</span>&nbsp;<span class="builtintype" id="6190997">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191004">var</span>&nbsp;<span class="ident" id="6191008">eg</span>&nbsp;<span class="ident" id="6191011">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191029">for</span>&nbsp;<span class="ident" id="6191033">_</span><span class="op" id="6191034">,</span>&nbsp;<span class="ident" id="6191036">eg</span>&nbsp;<span class="op" id="6191039">=</span>&nbsp;<span class="keyword" id="6191041">range</span>&nbsp;<span class="ident" id="6191047">examples</span>&nbsp;<span class="op" id="6191056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191060">matched</span><span class="op" id="6191067">,</span>&nbsp;<span class="ident" id="6191069">err</span>&nbsp;<span class="op" id="6191073">:=</span>&nbsp;<span class="ident" id="6191076">matchString</span><span class="op" id="6191087">(</span><span class="op" id="6191088">*</span><span class="ident" id="6191089">match</span><span class="op" id="6191094">,</span>&nbsp;<span class="ident" id="6191096">eg</span><span class="op" id="6191098">.</span><span class="ident" id="6191099">Name</span><span class="op" id="6191103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191107">if</span>&nbsp;<span class="ident" id="6191110">err</span>&nbsp;<span class="op" id="6191114">!=</span>&nbsp;<span class="ident" id="6191117">nil</span>&nbsp;<span class="op" id="6191121">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191126">fmt</span><span class="op" id="6191129">.</span><span class="ident" id="6191130">Fprintf</span><span class="op" id="6191137">(</span><span class="ident" id="6191138">os</span><span class="op" id="6191140">.</span><span class="ident" id="6191141">Stderr</span><span class="op" id="6191147">,</span>&nbsp;<span class="string" id="6191149">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6191194">,</span>&nbsp;<span class="ident" id="6191196">err</span><span class="op" id="6191199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191204">os</span><span class="op" id="6191206">.</span><span class="ident" id="6191207">Exit</span><span class="op" id="6191211">(</span><span class="num" id="6191212">1</span><span class="op" id="6191213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191221">if</span>&nbsp;<span class="op" id="6191224">!</span><span class="ident" id="6191225">matched</span>&nbsp;<span class="op" id="6191233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191238">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191253">if</span>&nbsp;<span class="op" id="6191256">!</span><span class="ident" id="6191257">runExample</span><span class="op" id="6191267">(</span><span class="ident" id="6191268">eg</span><span class="op" id="6191270">)</span>&nbsp;<span class="op" id="6191272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191277">ok</span>&nbsp;<span class="op" id="6191280">=</span>&nbsp;<span class="builtintype" id="6191282">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191293">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191297">return</span><br>
<span class="lineno"></span><span class="op" id="6191304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6191307">func</span>&nbsp;<span class="ident" id="6191312">runExample</span><span class="op" id="6191322">(</span><span class="ident" id="6191323">eg</span>&nbsp;<span class="ident" id="6191326">InternalExample</span><span class="op" id="6191341">)</span>&nbsp;<span class="op" id="6191343">(</span><span class="ident" id="6191344">ok</span>&nbsp;<span class="builtintype" id="6191347">bool</span><span class="op" id="6191351">)</span>&nbsp;<span class="op" id="6191353">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191356">if</span>&nbsp;<span class="op" id="6191359">*</span><span class="ident" id="6191360">chatty</span>&nbsp;<span class="op" id="6191367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191371">fmt</span><span class="op" id="6191374">.</span><span class="ident" id="6191375">Printf</span><span class="op" id="6191381">(</span><span class="string" id="6191382">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6191397">,</span>&nbsp;<span class="ident" id="6191399">eg</span><span class="op" id="6191401">.</span><span class="ident" id="6191402">Name</span><span class="op" id="6191406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191413">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191433">stdout</span>&nbsp;<span class="op" id="6191440">:=</span>&nbsp;<span class="ident" id="6191443">os</span><span class="op" id="6191445">.</span><span class="ident" id="6191446">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191454">r</span><span class="op" id="6191455">,</span>&nbsp;<span class="ident" id="6191457">w</span><span class="op" id="6191458">,</span>&nbsp;<span class="ident" id="6191460">err</span>&nbsp;<span class="op" id="6191464">:=</span>&nbsp;<span class="ident" id="6191467">os</span><span class="op" id="6191469">.</span><span class="ident" id="6191470">Pipe</span><span class="op" id="6191474">(</span><span class="op" id="6191475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191478">if</span>&nbsp;<span class="ident" id="6191481">err</span>&nbsp;<span class="op" id="6191485">!=</span>&nbsp;<span class="ident" id="6191488">nil</span>&nbsp;<span class="op" id="6191492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191496">fmt</span><span class="op" id="6191499">.</span><span class="ident" id="6191500">Fprintln</span><span class="op" id="6191508">(</span><span class="ident" id="6191509">os</span><span class="op" id="6191511">.</span><span class="ident" id="6191512">Stderr</span><span class="op" id="6191518">,</span>&nbsp;<span class="ident" id="6191520">err</span><span class="op" id="6191523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191527">os</span><span class="op" id="6191529">.</span><span class="ident" id="6191530">Exit</span><span class="op" id="6191534">(</span><span class="num" id="6191535">1</span><span class="op" id="6191536">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191542">os</span><span class="op" id="6191544">.</span><span class="ident" id="6191545">Stdout</span>&nbsp;<span class="op" id="6191552">=</span>&nbsp;<span class="ident" id="6191554">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191557">outC</span>&nbsp;<span class="op" id="6191562">:=</span>&nbsp;<span class="builtinfunc" id="6191565">make</span><span class="op" id="6191569">(</span><span class="keyword" id="6191570">chan</span>&nbsp;<span class="builtintype" id="6191575">string</span><span class="op" id="6191581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191584">go</span>&nbsp;<span class="keyword" id="6191587">func</span><span class="op" id="6191591">(</span><span class="op" id="6191592">)</span>&nbsp;<span class="op" id="6191594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191598">buf</span>&nbsp;<span class="op" id="6191602">:=</span>&nbsp;<span class="builtinfunc" id="6191605">new</span><span class="op" id="6191608">(</span><span class="ident" id="6191609">bytes</span><span class="op" id="6191614">.</span><span class="ident" id="6191615">Buffer</span><span class="op" id="6191621">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191625">_</span><span class="op" id="6191626">,</span>&nbsp;<span class="ident" id="6191628">err</span>&nbsp;<span class="op" id="6191632">:=</span>&nbsp;<span class="ident" id="6191635">io</span><span class="op" id="6191637">.</span><span class="ident" id="6191638">Copy</span><span class="op" id="6191642">(</span><span class="ident" id="6191643">buf</span><span class="op" id="6191646">,</span>&nbsp;<span class="ident" id="6191648">r</span><span class="op" id="6191649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191653">r</span><span class="op" id="6191654">.</span><span class="ident" id="6191655">Close</span><span class="op" id="6191660">(</span><span class="op" id="6191661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191665">if</span>&nbsp;<span class="ident" id="6191668">err</span>&nbsp;<span class="op" id="6191672">!=</span>&nbsp;<span class="ident" id="6191675">nil</span>&nbsp;<span class="op" id="6191679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191684">fmt</span><span class="op" id="6191687">.</span><span class="ident" id="6191688">Fprintf</span><span class="op" id="6191695">(</span><span class="ident" id="6191696">os</span><span class="op" id="6191698">.</span><span class="ident" id="6191699">Stderr</span><span class="op" id="6191705">,</span>&nbsp;<span class="string" id="6191707">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6191736">,</span>&nbsp;<span class="ident" id="6191738">err</span><span class="op" id="6191741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191746">os</span><span class="op" id="6191748">.</span><span class="ident" id="6191749">Exit</span><span class="op" id="6191753">(</span><span class="num" id="6191754">1</span><span class="op" id="6191755">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191763">outC</span>&nbsp;<span class="op" id="6191768">&lt;-</span>&nbsp;<span class="ident" id="6191771">buf</span><span class="op" id="6191774">.</span><span class="ident" id="6191775">String</span><span class="op" id="6191781">(</span><span class="op" id="6191782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191785">}</span><span class="op" id="6191786">(</span><span class="op" id="6191787">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191791">start</span>&nbsp;<span class="op" id="6191797">:=</span>&nbsp;<span class="ident" id="6191800">time</span><span class="op" id="6191804">.</span><span class="ident" id="6191805">Now</span><span class="op" id="6191808">(</span><span class="op" id="6191809">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191812">ok</span>&nbsp;<span class="op" id="6191815">=</span>&nbsp;<span class="builtintype" id="6191817">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191824">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191897">defer</span>&nbsp;<span class="keyword" id="6191903">func</span><span class="op" id="6191907">(</span><span class="op" id="6191908">)</span>&nbsp;<span class="op" id="6191910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191914">dstr</span>&nbsp;<span class="op" id="6191919">:=</span>&nbsp;<span class="ident" id="6191922">fmtDuration</span><span class="op" id="6191933">(</span><span class="ident" id="6191934">time</span><span class="op" id="6191938">.</span><span class="ident" id="6191939">Now</span><span class="op" id="6191942">(</span><span class="op" id="6191943">)</span><span class="op" id="6191944">.</span><span class="ident" id="6191945">Sub</span><span class="op" id="6191948">(</span><span class="ident" id="6191949">start</span><span class="op" id="6191954">)</span><span class="op" id="6191955">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191960">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192005">w</span><span class="op" id="6192006">.</span><span class="ident" id="6192007">Close</span><span class="op" id="6192012">(</span><span class="op" id="6192013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192017">os</span><span class="op" id="6192019">.</span><span class="ident" id="6192020">Stdout</span>&nbsp;<span class="op" id="6192027">=</span>&nbsp;<span class="ident" id="6192029">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192038">out</span>&nbsp;<span class="op" id="6192042">:=</span>&nbsp;<span class="op" id="6192045">&lt;-</span><span class="ident" id="6192047">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192055">var</span>&nbsp;<span class="ident" id="6192059">fail</span>&nbsp;<span class="builtintype" id="6192064">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192073">err</span>&nbsp;<span class="op" id="6192077">:=</span>&nbsp;<span class="builtinfunc" id="6192080">recover</span><span class="op" id="6192087">(</span><span class="op" id="6192088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192092">if</span>&nbsp;<span class="ident" id="6192095">g</span><span class="op" id="6192096">,</span>&nbsp;<span class="ident" id="6192098">e</span>&nbsp;<span class="op" id="6192100">:=</span>&nbsp;<span class="ident" id="6192103">strings</span><span class="op" id="6192110">.</span><span class="ident" id="6192111">TrimSpace</span><span class="op" id="6192120">(</span><span class="ident" id="6192121">out</span><span class="op" id="6192124">)</span><span class="op" id="6192125">,</span>&nbsp;<span class="ident" id="6192127">strings</span><span class="op" id="6192134">.</span><span class="ident" id="6192135">TrimSpace</span><span class="op" id="6192144">(</span><span class="ident" id="6192145">eg</span><span class="op" id="6192147">.</span><span class="ident" id="6192148">Output</span><span class="op" id="6192154">)</span><span class="op" id="6192155">;</span>&nbsp;<span class="ident" id="6192157">g</span>&nbsp;<span class="op" id="6192159">!=</span>&nbsp;<span class="ident" id="6192162">e</span>&nbsp;<span class="op" id="6192164">&amp;&amp;</span>&nbsp;<span class="ident" id="6192167">err</span>&nbsp;<span class="op" id="6192171">==</span>&nbsp;<span class="ident" id="6192174">nil</span>&nbsp;<span class="op" id="6192178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192183">fail</span>&nbsp;<span class="op" id="6192188">=</span>&nbsp;<span class="ident" id="6192190">fmt</span><span class="op" id="6192193">.</span><span class="ident" id="6192194">Sprintf</span><span class="op" id="6192201">(</span><span class="string" id="6192202">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6192225">,</span>&nbsp;<span class="ident" id="6192227">g</span><span class="op" id="6192228">,</span>&nbsp;<span class="ident" id="6192230">e</span><span class="op" id="6192231">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192239">if</span>&nbsp;<span class="ident" id="6192242">fail</span>&nbsp;<span class="op" id="6192247">!=</span>&nbsp;<span class="string" id="6192250">&#34;&#34;</span>&nbsp;<span class="op" id="6192253">||</span>&nbsp;<span class="ident" id="6192256">err</span>&nbsp;<span class="op" id="6192260">!=</span>&nbsp;<span class="ident" id="6192263">nil</span>&nbsp;<span class="op" id="6192267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192272">fmt</span><span class="op" id="6192275">.</span><span class="ident" id="6192276">Printf</span><span class="op" id="6192282">(</span><span class="string" id="6192283">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6192306">,</span>&nbsp;<span class="ident" id="6192308">eg</span><span class="op" id="6192310">.</span><span class="ident" id="6192311">Name</span><span class="op" id="6192315">,</span>&nbsp;<span class="ident" id="6192317">dstr</span><span class="op" id="6192321">,</span>&nbsp;<span class="ident" id="6192323">fail</span><span class="op" id="6192327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192332">ok</span>&nbsp;<span class="op" id="6192335">=</span>&nbsp;<span class="builtintype" id="6192337">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192345">}</span>&nbsp;<span class="keyword" id="6192347">else</span>&nbsp;<span class="keyword" id="6192352">if</span>&nbsp;<span class="op" id="6192355">*</span><span class="ident" id="6192356">chatty</span>&nbsp;<span class="op" id="6192363">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192368">fmt</span><span class="op" id="6192371">.</span><span class="ident" id="6192372">Printf</span><span class="op" id="6192378">(</span><span class="string" id="6192379">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6192400">,</span>&nbsp;<span class="ident" id="6192402">eg</span><span class="op" id="6192404">.</span><span class="ident" id="6192405">Name</span><span class="op" id="6192409">,</span>&nbsp;<span class="ident" id="6192411">dstr</span><span class="op" id="6192415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192423">if</span>&nbsp;<span class="ident" id="6192426">err</span>&nbsp;<span class="op" id="6192430">!=</span>&nbsp;<span class="ident" id="6192433">nil</span>&nbsp;<span class="op" id="6192437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6192442">panic</span><span class="op" id="6192447">(</span><span class="ident" id="6192448">err</span><span class="op" id="6192451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192455">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192458">}</span><span class="op" id="6192459">(</span><span class="op" id="6192460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6192464">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192481">eg</span><span class="op" id="6192483">.</span><span class="ident" id="6192484">F</span><span class="op" id="6192485">(</span><span class="op" id="6192486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192489">return</span><br>
<span class="lineno">100</span><span class="op" id="6192496">}</span>
</div>
</body>
</html>
