<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2938874">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2938929">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2938983">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2939034">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2939106">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2939122">package</span>&nbsp;<span class="ident" id="2939130">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939136">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2939208">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2939281">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2939346">type</span>&nbsp;<span class="ident" id="2939351">Interface</span>&nbsp;<span class="keyword" id="2939361">interface</span>&nbsp;<span class="op" id="2939371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939374">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939427">Len</span><span class="op" id="2939430">(</span><span class="op" id="2939431">)</span>&nbsp;<span class="builtintype" id="2939433">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939438">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939480">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939537">Less</span><span class="op" id="2939541">(</span><span class="ident" id="2939542">i</span><span class="op" id="2939543">,</span>&nbsp;<span class="ident" id="2939545">j</span>&nbsp;<span class="builtintype" id="2939547">int</span><span class="op" id="2939550">)</span>&nbsp;<span class="builtintype" id="2939552">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939558">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939608">Swap</span><span class="op" id="2939612">(</span><span class="ident" id="2939613">i</span><span class="op" id="2939614">,</span>&nbsp;<span class="ident" id="2939616">j</span>&nbsp;<span class="builtintype" id="2939618">int</span><span class="op" id="2939621">)</span><br>
<span class="lineno">20</span><span class="op" id="2939623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2939626">func</span>&nbsp;<span class="ident" id="2939631">min</span><span class="op" id="2939634">(</span><span class="ident" id="2939635">a</span><span class="op" id="2939636">,</span>&nbsp;<span class="ident" id="2939638">b</span>&nbsp;<span class="builtintype" id="2939640">int</span><span class="op" id="2939643">)</span>&nbsp;<span class="builtintype" id="2939645">int</span>&nbsp;<span class="op" id="2939649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939652">if</span>&nbsp;<span class="ident" id="2939655">a</span>&nbsp;<span class="op" id="2939657">&lt;</span>&nbsp;<span class="ident" id="2939659">b</span>&nbsp;<span class="op" id="2939661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939665">return</span>&nbsp;<span class="ident" id="2939672">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939678">return</span>&nbsp;<span class="ident" id="2939685">b</span><br>
<span class="lineno"></span><span class="op" id="2939687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939690">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2939708">func</span>&nbsp;<span class="ident" id="2939713">insertionSort</span><span class="op" id="2939726">(</span><span class="ident" id="2939727">data</span>&nbsp;<span class="ident" id="2939732">Interface</span><span class="op" id="2939741">,</span>&nbsp;<span class="ident" id="2939743">a</span><span class="op" id="2939744">,</span>&nbsp;<span class="ident" id="2939746">b</span>&nbsp;<span class="builtintype" id="2939748">int</span><span class="op" id="2939751">)</span>&nbsp;<span class="op" id="2939753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939756">for</span>&nbsp;<span class="ident" id="2939760">i</span>&nbsp;<span class="op" id="2939762">:=</span>&nbsp;<span class="ident" id="2939765">a</span>&nbsp;<span class="op" id="2939767">+</span>&nbsp;<span class="num" id="2939769">1</span><span class="op" id="2939770">;</span>&nbsp;<span class="ident" id="2939772">i</span>&nbsp;<span class="op" id="2939774">&lt;</span>&nbsp;<span class="ident" id="2939776">b</span><span class="op" id="2939777">;</span>&nbsp;<span class="ident" id="2939779">i</span><span class="op" id="2939780">++</span>&nbsp;<span class="op" id="2939783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939787">for</span>&nbsp;<span class="ident" id="2939791">j</span>&nbsp;<span class="op" id="2939793">:=</span>&nbsp;<span class="ident" id="2939796">i</span><span class="op" id="2939797">;</span>&nbsp;<span class="ident" id="2939799">j</span>&nbsp;<span class="op" id="2939801">&gt;</span>&nbsp;<span class="ident" id="2939803">a</span>&nbsp;<span class="op" id="2939805">&amp;&amp;</span>&nbsp;<span class="ident" id="2939808">data</span><span class="op" id="2939812">.</span><span class="ident" id="2939813">Less</span><span class="op" id="2939817">(</span><span class="ident" id="2939818">j</span><span class="op" id="2939819">,</span>&nbsp;<span class="ident" id="2939821">j</span><span class="op" id="2939822">-</span><span class="num" id="2939823">1</span><span class="op" id="2939824">)</span><span class="op" id="2939825">;</span>&nbsp;<span class="ident" id="2939827">j</span><span class="op" id="2939828">--</span>&nbsp;<span class="op" id="2939831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939836">data</span><span class="op" id="2939840">.</span><span class="ident" id="2939841">Swap</span><span class="op" id="2939845">(</span><span class="ident" id="2939846">j</span><span class="op" id="2939847">,</span>&nbsp;<span class="ident" id="2939849">j</span><span class="op" id="2939850">-</span><span class="num" id="2939851">1</span><span class="op" id="2939852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939856">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939859">}</span><br>
<span class="lineno"></span><span class="op" id="2939861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939864">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2939922">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2939992">func</span>&nbsp;<span class="ident" id="2939997">siftDown</span><span class="op" id="2940005">(</span><span class="ident" id="2940006">data</span>&nbsp;<span class="ident" id="2940011">Interface</span><span class="op" id="2940020">,</span>&nbsp;<span class="ident" id="2940022">lo</span><span class="op" id="2940024">,</span>&nbsp;<span class="ident" id="2940026">hi</span><span class="op" id="2940028">,</span>&nbsp;<span class="ident" id="2940030">first</span>&nbsp;<span class="builtintype" id="2940036">int</span><span class="op" id="2940039">)</span>&nbsp;<span class="op" id="2940041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940044">root</span>&nbsp;<span class="op" id="2940049">:=</span>&nbsp;<span class="ident" id="2940052">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940056">for</span>&nbsp;<span class="op" id="2940060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940064">child</span>&nbsp;<span class="op" id="2940070">:=</span>&nbsp;<span class="num" id="2940073">2</span><span class="op" id="2940074">*</span><span class="ident" id="2940075">root</span>&nbsp;<span class="op" id="2940080">+</span>&nbsp;<span class="num" id="2940082">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940086">if</span>&nbsp;<span class="ident" id="2940089">child</span>&nbsp;<span class="op" id="2940095">&gt;=</span>&nbsp;<span class="ident" id="2940098">hi</span>&nbsp;<span class="op" id="2940101">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940106">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940118">if</span>&nbsp;<span class="ident" id="2940121">child</span><span class="op" id="2940126">+</span><span class="num" id="2940127">1</span>&nbsp;<span class="op" id="2940129">&lt;</span>&nbsp;<span class="ident" id="2940131">hi</span>&nbsp;<span class="op" id="2940134">&amp;&amp;</span>&nbsp;<span class="ident" id="2940137">data</span><span class="op" id="2940141">.</span><span class="ident" id="2940142">Less</span><span class="op" id="2940146">(</span><span class="ident" id="2940147">first</span><span class="op" id="2940152">+</span><span class="ident" id="2940153">child</span><span class="op" id="2940158">,</span>&nbsp;<span class="ident" id="2940160">first</span><span class="op" id="2940165">+</span><span class="ident" id="2940166">child</span><span class="op" id="2940171">+</span><span class="num" id="2940172">1</span><span class="op" id="2940173">)</span>&nbsp;<span class="op" id="2940175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940180">child</span><span class="op" id="2940185">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940190">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940194">if</span>&nbsp;<span class="op" id="2940197">!</span><span class="ident" id="2940198">data</span><span class="op" id="2940202">.</span><span class="ident" id="2940203">Less</span><span class="op" id="2940207">(</span><span class="ident" id="2940208">first</span><span class="op" id="2940213">+</span><span class="ident" id="2940214">root</span><span class="op" id="2940218">,</span>&nbsp;<span class="ident" id="2940220">first</span><span class="op" id="2940225">+</span><span class="ident" id="2940226">child</span><span class="op" id="2940231">)</span>&nbsp;<span class="op" id="2940233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940238">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940251">data</span><span class="op" id="2940255">.</span><span class="ident" id="2940256">Swap</span><span class="op" id="2940260">(</span><span class="ident" id="2940261">first</span><span class="op" id="2940266">+</span><span class="ident" id="2940267">root</span><span class="op" id="2940271">,</span>&nbsp;<span class="ident" id="2940273">first</span><span class="op" id="2940278">+</span><span class="ident" id="2940279">child</span><span class="op" id="2940284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940288">root</span>&nbsp;<span class="op" id="2940293">=</span>&nbsp;<span class="ident" id="2940295">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940302">}</span><br>
<span class="lineno"></span><span class="op" id="2940304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2940307">func</span>&nbsp;<span class="ident" id="2940312">heapSort</span><span class="op" id="2940320">(</span><span class="ident" id="2940321">data</span>&nbsp;<span class="ident" id="2940326">Interface</span><span class="op" id="2940335">,</span>&nbsp;<span class="ident" id="2940337">a</span><span class="op" id="2940338">,</span>&nbsp;<span class="ident" id="2940340">b</span>&nbsp;<span class="builtintype" id="2940342">int</span><span class="op" id="2940345">)</span>&nbsp;<span class="op" id="2940347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940350">first</span>&nbsp;<span class="op" id="2940356">:=</span>&nbsp;<span class="ident" id="2940359">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940362">lo</span>&nbsp;<span class="op" id="2940365">:=</span>&nbsp;<span class="num" id="2940368">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940371">hi</span>&nbsp;<span class="op" id="2940374">:=</span>&nbsp;<span class="ident" id="2940377">b</span>&nbsp;<span class="op" id="2940379">-</span>&nbsp;<span class="ident" id="2940381">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2940385">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940430">for</span>&nbsp;<span class="ident" id="2940434">i</span>&nbsp;<span class="op" id="2940436">:=</span>&nbsp;<span class="op" id="2940439">(</span><span class="ident" id="2940440">hi</span>&nbsp;<span class="op" id="2940443">-</span>&nbsp;<span class="num" id="2940445">1</span><span class="op" id="2940446">)</span>&nbsp;<span class="op" id="2940448">/</span>&nbsp;<span class="num" id="2940450">2</span><span class="op" id="2940451">;</span>&nbsp;<span class="ident" id="2940453">i</span>&nbsp;<span class="op" id="2940455">&gt;=</span>&nbsp;<span class="num" id="2940458">0</span><span class="op" id="2940459">;</span>&nbsp;<span class="ident" id="2940461">i</span><span class="op" id="2940462">--</span>&nbsp;<span class="op" id="2940465">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940469">siftDown</span><span class="op" id="2940477">(</span><span class="ident" id="2940478">data</span><span class="op" id="2940482">,</span>&nbsp;<span class="ident" id="2940484">i</span><span class="op" id="2940485">,</span>&nbsp;<span class="ident" id="2940487">hi</span><span class="op" id="2940489">,</span>&nbsp;<span class="ident" id="2940491">first</span><span class="op" id="2940496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2940503">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940554">for</span>&nbsp;<span class="ident" id="2940558">i</span>&nbsp;<span class="op" id="2940560">:=</span>&nbsp;<span class="ident" id="2940563">hi</span>&nbsp;<span class="op" id="2940566">-</span>&nbsp;<span class="num" id="2940568">1</span><span class="op" id="2940569">;</span>&nbsp;<span class="ident" id="2940571">i</span>&nbsp;<span class="op" id="2940573">&gt;=</span>&nbsp;<span class="num" id="2940576">0</span><span class="op" id="2940577">;</span>&nbsp;<span class="ident" id="2940579">i</span><span class="op" id="2940580">--</span>&nbsp;<span class="op" id="2940583">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940587">data</span><span class="op" id="2940591">.</span><span class="ident" id="2940592">Swap</span><span class="op" id="2940596">(</span><span class="ident" id="2940597">first</span><span class="op" id="2940602">,</span>&nbsp;<span class="ident" id="2940604">first</span><span class="op" id="2940609">+</span><span class="ident" id="2940610">i</span><span class="op" id="2940611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940615">siftDown</span><span class="op" id="2940623">(</span><span class="ident" id="2940624">data</span><span class="op" id="2940628">,</span>&nbsp;<span class="ident" id="2940630">lo</span><span class="op" id="2940632">,</span>&nbsp;<span class="ident" id="2940634">i</span><span class="op" id="2940635">,</span>&nbsp;<span class="ident" id="2940637">first</span><span class="op" id="2940642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940645">}</span><br>
<span class="lineno"></span><span class="op" id="2940647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2940650">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2940695">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2940752">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2940846">func</span>&nbsp;<span class="ident" id="2940851">medianOfThree</span><span class="op" id="2940864">(</span><span class="ident" id="2940865">data</span>&nbsp;<span class="ident" id="2940870">Interface</span><span class="op" id="2940879">,</span>&nbsp;<span class="ident" id="2940881">a</span><span class="op" id="2940882">,</span>&nbsp;<span class="ident" id="2940884">b</span><span class="op" id="2940885">,</span>&nbsp;<span class="ident" id="2940887">c</span>&nbsp;<span class="builtintype" id="2940889">int</span><span class="op" id="2940892">)</span>&nbsp;<span class="op" id="2940894">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940897">m0</span>&nbsp;<span class="op" id="2940900">:=</span>&nbsp;<span class="ident" id="2940903">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940906">m1</span>&nbsp;<span class="op" id="2940909">:=</span>&nbsp;<span class="ident" id="2940912">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940915">m2</span>&nbsp;<span class="op" id="2940918">:=</span>&nbsp;<span class="ident" id="2940921">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2940924">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940954">if</span>&nbsp;<span class="ident" id="2940957">data</span><span class="op" id="2940961">.</span><span class="ident" id="2940962">Less</span><span class="op" id="2940966">(</span><span class="ident" id="2940967">m1</span><span class="op" id="2940969">,</span>&nbsp;<span class="ident" id="2940971">m0</span><span class="op" id="2940973">)</span>&nbsp;<span class="op" id="2940975">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940979">data</span><span class="op" id="2940983">.</span><span class="ident" id="2940984">Swap</span><span class="op" id="2940988">(</span><span class="ident" id="2940989">m1</span><span class="op" id="2940991">,</span>&nbsp;<span class="ident" id="2940993">m0</span><span class="op" id="2940995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941001">if</span>&nbsp;<span class="ident" id="2941004">data</span><span class="op" id="2941008">.</span><span class="ident" id="2941009">Less</span><span class="op" id="2941013">(</span><span class="ident" id="2941014">m2</span><span class="op" id="2941016">,</span>&nbsp;<span class="ident" id="2941018">m1</span><span class="op" id="2941020">)</span>&nbsp;<span class="op" id="2941022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941026">data</span><span class="op" id="2941030">.</span><span class="ident" id="2941031">Swap</span><span class="op" id="2941035">(</span><span class="ident" id="2941036">m2</span><span class="op" id="2941038">,</span>&nbsp;<span class="ident" id="2941040">m1</span><span class="op" id="2941042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941045">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941048">if</span>&nbsp;<span class="ident" id="2941051">data</span><span class="op" id="2941055">.</span><span class="ident" id="2941056">Less</span><span class="op" id="2941060">(</span><span class="ident" id="2941061">m1</span><span class="op" id="2941063">,</span>&nbsp;<span class="ident" id="2941065">m0</span><span class="op" id="2941067">)</span>&nbsp;<span class="op" id="2941069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941073">data</span><span class="op" id="2941077">.</span><span class="ident" id="2941078">Swap</span><span class="op" id="2941082">(</span><span class="ident" id="2941083">m1</span><span class="op" id="2941085">,</span>&nbsp;<span class="ident" id="2941087">m0</span><span class="op" id="2941089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941095">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2941135">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2941138">func</span>&nbsp;<span class="ident" id="2941143">swapRange</span><span class="op" id="2941152">(</span><span class="ident" id="2941153">data</span>&nbsp;<span class="ident" id="2941158">Interface</span><span class="op" id="2941167">,</span>&nbsp;<span class="ident" id="2941169">a</span><span class="op" id="2941170">,</span>&nbsp;<span class="ident" id="2941172">b</span><span class="op" id="2941173">,</span>&nbsp;<span class="ident" id="2941175">n</span>&nbsp;<span class="builtintype" id="2941177">int</span><span class="op" id="2941180">)</span>&nbsp;<span class="op" id="2941182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941185">for</span>&nbsp;<span class="ident" id="2941189">i</span>&nbsp;<span class="op" id="2941191">:=</span>&nbsp;<span class="num" id="2941194">0</span><span class="op" id="2941195">;</span>&nbsp;<span class="ident" id="2941197">i</span>&nbsp;<span class="op" id="2941199">&lt;</span>&nbsp;<span class="ident" id="2941201">n</span><span class="op" id="2941202">;</span>&nbsp;<span class="ident" id="2941204">i</span><span class="op" id="2941205">++</span>&nbsp;<span class="op" id="2941208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941212">data</span><span class="op" id="2941216">.</span><span class="ident" id="2941217">Swap</span><span class="op" id="2941221">(</span><span class="ident" id="2941222">a</span><span class="op" id="2941223">+</span><span class="ident" id="2941224">i</span><span class="op" id="2941225">,</span>&nbsp;<span class="ident" id="2941227">b</span><span class="op" id="2941228">+</span><span class="ident" id="2941229">i</span><span class="op" id="2941230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941233">}</span><br>
<span class="lineno">100</span><span class="op" id="2941235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2941238">func</span>&nbsp;<span class="ident" id="2941243">doPivot</span><span class="op" id="2941250">(</span><span class="ident" id="2941251">data</span>&nbsp;<span class="ident" id="2941256">Interface</span><span class="op" id="2941265">,</span>&nbsp;<span class="ident" id="2941267">lo</span><span class="op" id="2941269">,</span>&nbsp;<span class="ident" id="2941271">hi</span>&nbsp;<span class="builtintype" id="2941274">int</span><span class="op" id="2941277">)</span>&nbsp;<span class="op" id="2941279">(</span><span class="ident" id="2941280">midlo</span><span class="op" id="2941285">,</span>&nbsp;<span class="ident" id="2941287">midhi</span>&nbsp;<span class="builtintype" id="2941293">int</span><span class="op" id="2941296">)</span>&nbsp;<span class="op" id="2941298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941301">m</span>&nbsp;<span class="op" id="2941303">:=</span>&nbsp;<span class="ident" id="2941306">lo</span>&nbsp;<span class="op" id="2941309">+</span>&nbsp;<span class="op" id="2941311">(</span><span class="ident" id="2941312">hi</span><span class="op" id="2941314">-</span><span class="ident" id="2941315">lo</span><span class="op" id="2941317">)</span><span class="op" id="2941318">/</span><span class="num" id="2941319">2</span>&nbsp;<span class="comment" id="2941321">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941370">if</span>&nbsp;<span class="ident" id="2941373">hi</span><span class="op" id="2941375">-</span><span class="ident" id="2941376">lo</span>&nbsp;<span class="op" id="2941379">&gt;</span>&nbsp;<span class="num" id="2941381">40</span>&nbsp;<span class="op" id="2941384">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941388">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941448">s</span>&nbsp;<span class="op" id="2941450">:=</span>&nbsp;<span class="op" id="2941453">(</span><span class="ident" id="2941454">hi</span>&nbsp;<span class="op" id="2941457">-</span>&nbsp;<span class="ident" id="2941459">lo</span><span class="op" id="2941461">)</span>&nbsp;<span class="op" id="2941463">/</span>&nbsp;<span class="num" id="2941465">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941469">medianOfThree</span><span class="op" id="2941482">(</span><span class="ident" id="2941483">data</span><span class="op" id="2941487">,</span>&nbsp;<span class="ident" id="2941489">lo</span><span class="op" id="2941491">,</span>&nbsp;<span class="ident" id="2941493">lo</span><span class="op" id="2941495">+</span><span class="ident" id="2941496">s</span><span class="op" id="2941497">,</span>&nbsp;<span class="ident" id="2941499">lo</span><span class="op" id="2941501">+</span><span class="num" id="2941502">2</span><span class="op" id="2941503">*</span><span class="ident" id="2941504">s</span><span class="op" id="2941505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941509">medianOfThree</span><span class="op" id="2941522">(</span><span class="ident" id="2941523">data</span><span class="op" id="2941527">,</span>&nbsp;<span class="ident" id="2941529">m</span><span class="op" id="2941530">,</span>&nbsp;<span class="ident" id="2941532">m</span><span class="op" id="2941533">-</span><span class="ident" id="2941534">s</span><span class="op" id="2941535">,</span>&nbsp;<span class="ident" id="2941537">m</span><span class="op" id="2941538">+</span><span class="ident" id="2941539">s</span><span class="op" id="2941540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941544">medianOfThree</span><span class="op" id="2941557">(</span><span class="ident" id="2941558">data</span><span class="op" id="2941562">,</span>&nbsp;<span class="ident" id="2941564">hi</span><span class="op" id="2941566">-</span><span class="num" id="2941567">1</span><span class="op" id="2941568">,</span>&nbsp;<span class="ident" id="2941570">hi</span><span class="op" id="2941572">-</span><span class="num" id="2941573">1</span><span class="op" id="2941574">-</span><span class="ident" id="2941575">s</span><span class="op" id="2941576">,</span>&nbsp;<span class="ident" id="2941578">hi</span><span class="op" id="2941580">-</span><span class="num" id="2941581">1</span><span class="op" id="2941582">-</span><span class="num" id="2941583">2</span><span class="op" id="2941584">*</span><span class="ident" id="2941585">s</span><span class="op" id="2941586">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941592">medianOfThree</span><span class="op" id="2941605">(</span><span class="ident" id="2941606">data</span><span class="op" id="2941610">,</span>&nbsp;<span class="ident" id="2941612">lo</span><span class="op" id="2941614">,</span>&nbsp;<span class="ident" id="2941616">m</span><span class="op" id="2941617">,</span>&nbsp;<span class="ident" id="2941619">hi</span><span class="op" id="2941621">-</span><span class="num" id="2941622">1</span><span class="op" id="2941623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941627">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941647">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941692">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941722">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941751">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941786">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941815">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941845">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941849">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941901">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941935">pivot</span>&nbsp;<span class="op" id="2941941">:=</span>&nbsp;<span class="ident" id="2941944">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941948">a</span><span class="op" id="2941949">,</span>&nbsp;<span class="ident" id="2941951">b</span><span class="op" id="2941952">,</span>&nbsp;<span class="ident" id="2941954">c</span><span class="op" id="2941955">,</span>&nbsp;<span class="ident" id="2941957">d</span>&nbsp;<span class="op" id="2941959">:=</span>&nbsp;<span class="ident" id="2941962">lo</span><span class="op" id="2941964">+</span><span class="num" id="2941965">1</span><span class="op" id="2941966">,</span>&nbsp;<span class="ident" id="2941968">lo</span><span class="op" id="2941970">+</span><span class="num" id="2941971">1</span><span class="op" id="2941972">,</span>&nbsp;<span class="ident" id="2941974">hi</span><span class="op" id="2941976">,</span>&nbsp;<span class="ident" id="2941978">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941982">for</span>&nbsp;<span class="op" id="2941986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941990">for</span>&nbsp;<span class="ident" id="2941994">b</span>&nbsp;<span class="op" id="2941996">&lt;</span>&nbsp;<span class="ident" id="2941998">c</span>&nbsp;<span class="op" id="2942000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942005">if</span>&nbsp;<span class="ident" id="2942008">data</span><span class="op" id="2942012">.</span><span class="ident" id="2942013">Less</span><span class="op" id="2942017">(</span><span class="ident" id="2942018">b</span><span class="op" id="2942019">,</span>&nbsp;<span class="ident" id="2942021">pivot</span><span class="op" id="2942026">)</span>&nbsp;<span class="op" id="2942028">{</span>&nbsp;<span class="comment" id="2942030">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942053">b</span><span class="op" id="2942054">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942060">}</span>&nbsp;<span class="keyword" id="2942062">else</span>&nbsp;<span class="keyword" id="2942067">if</span>&nbsp;<span class="op" id="2942070">!</span><span class="ident" id="2942071">data</span><span class="op" id="2942075">.</span><span class="ident" id="2942076">Less</span><span class="op" id="2942080">(</span><span class="ident" id="2942081">pivot</span><span class="op" id="2942086">,</span>&nbsp;<span class="ident" id="2942088">b</span><span class="op" id="2942089">)</span>&nbsp;<span class="op" id="2942091">{</span>&nbsp;<span class="comment" id="2942093">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942116">data</span><span class="op" id="2942120">.</span><span class="ident" id="2942121">Swap</span><span class="op" id="2942125">(</span><span class="ident" id="2942126">a</span><span class="op" id="2942127">,</span>&nbsp;<span class="ident" id="2942129">b</span><span class="op" id="2942130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942136">a</span><span class="op" id="2942137">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942144">b</span><span class="op" id="2942145">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942151">}</span>&nbsp;<span class="keyword" id="2942153">else</span>&nbsp;<span class="op" id="2942158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942164">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942181">for</span>&nbsp;<span class="ident" id="2942185">b</span>&nbsp;<span class="op" id="2942187">&lt;</span>&nbsp;<span class="ident" id="2942189">c</span>&nbsp;<span class="op" id="2942191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942196">if</span>&nbsp;<span class="ident" id="2942199">data</span><span class="op" id="2942203">.</span><span class="ident" id="2942204">Less</span><span class="op" id="2942208">(</span><span class="ident" id="2942209">pivot</span><span class="op" id="2942214">,</span>&nbsp;<span class="ident" id="2942216">c</span><span class="op" id="2942217">-</span><span class="num" id="2942218">1</span><span class="op" id="2942219">)</span>&nbsp;<span class="op" id="2942221">{</span>&nbsp;<span class="comment" id="2942223">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942248">c</span><span class="op" id="2942249">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942255">}</span>&nbsp;<span class="keyword" id="2942257">else</span>&nbsp;<span class="keyword" id="2942262">if</span>&nbsp;<span class="op" id="2942265">!</span><span class="ident" id="2942266">data</span><span class="op" id="2942270">.</span><span class="ident" id="2942271">Less</span><span class="op" id="2942275">(</span><span class="ident" id="2942276">c</span><span class="op" id="2942277">-</span><span class="num" id="2942278">1</span><span class="op" id="2942279">,</span>&nbsp;<span class="ident" id="2942281">pivot</span><span class="op" id="2942286">)</span>&nbsp;<span class="op" id="2942288">{</span>&nbsp;<span class="comment" id="2942290">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942315">data</span><span class="op" id="2942319">.</span><span class="ident" id="2942320">Swap</span><span class="op" id="2942324">(</span><span class="ident" id="2942325">c</span><span class="op" id="2942326">-</span><span class="num" id="2942327">1</span><span class="op" id="2942328">,</span>&nbsp;<span class="ident" id="2942330">d</span><span class="op" id="2942331">-</span><span class="num" id="2942332">1</span><span class="op" id="2942333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942339">c</span><span class="op" id="2942340">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942347">d</span><span class="op" id="2942348">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942354">}</span>&nbsp;<span class="keyword" id="2942356">else</span>&nbsp;<span class="op" id="2942361">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942367">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942384">if</span>&nbsp;<span class="ident" id="2942387">b</span>&nbsp;<span class="op" id="2942389">&gt;=</span>&nbsp;<span class="ident" id="2942392">c</span>&nbsp;<span class="op" id="2942394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942399">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2942411">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942451">data</span><span class="op" id="2942455">.</span><span class="ident" id="2942456">Swap</span><span class="op" id="2942460">(</span><span class="ident" id="2942461">b</span><span class="op" id="2942462">,</span>&nbsp;<span class="ident" id="2942464">c</span><span class="op" id="2942465">-</span><span class="num" id="2942466">1</span><span class="op" id="2942467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942471">b</span><span class="op" id="2942472">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942477">c</span><span class="op" id="2942478">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942486">n</span>&nbsp;<span class="op" id="2942488">:=</span>&nbsp;<span class="ident" id="2942491">min</span><span class="op" id="2942494">(</span><span class="ident" id="2942495">b</span><span class="op" id="2942496">-</span><span class="ident" id="2942497">a</span><span class="op" id="2942498">,</span>&nbsp;<span class="ident" id="2942500">a</span><span class="op" id="2942501">-</span><span class="ident" id="2942502">lo</span><span class="op" id="2942504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942507">swapRange</span><span class="op" id="2942516">(</span><span class="ident" id="2942517">data</span><span class="op" id="2942521">,</span>&nbsp;<span class="ident" id="2942523">lo</span><span class="op" id="2942525">,</span>&nbsp;<span class="ident" id="2942527">b</span><span class="op" id="2942528">-</span><span class="ident" id="2942529">n</span><span class="op" id="2942530">,</span>&nbsp;<span class="ident" id="2942532">n</span><span class="op" id="2942533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942537">n</span>&nbsp;<span class="op" id="2942539">=</span>&nbsp;<span class="ident" id="2942541">min</span><span class="op" id="2942544">(</span><span class="ident" id="2942545">hi</span><span class="op" id="2942547">-</span><span class="ident" id="2942548">d</span><span class="op" id="2942549">,</span>&nbsp;<span class="ident" id="2942551">d</span><span class="op" id="2942552">-</span><span class="ident" id="2942553">c</span><span class="op" id="2942554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942557">swapRange</span><span class="op" id="2942566">(</span><span class="ident" id="2942567">data</span><span class="op" id="2942571">,</span>&nbsp;<span class="ident" id="2942573">c</span><span class="op" id="2942574">,</span>&nbsp;<span class="ident" id="2942576">hi</span><span class="op" id="2942578">-</span><span class="ident" id="2942579">n</span><span class="op" id="2942580">,</span>&nbsp;<span class="ident" id="2942582">n</span><span class="op" id="2942583">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942587">return</span>&nbsp;<span class="ident" id="2942594">lo</span>&nbsp;<span class="op" id="2942597">+</span>&nbsp;<span class="ident" id="2942599">b</span>&nbsp;<span class="op" id="2942601">-</span>&nbsp;<span class="ident" id="2942603">a</span><span class="op" id="2942604">,</span>&nbsp;<span class="ident" id="2942606">hi</span>&nbsp;<span class="op" id="2942609">-</span>&nbsp;<span class="op" id="2942611">(</span><span class="ident" id="2942612">d</span>&nbsp;<span class="op" id="2942614">-</span>&nbsp;<span class="ident" id="2942616">c</span><span class="op" id="2942617">)</span><br>
<span class="lineno"></span><span class="op" id="2942619">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2942622">func</span>&nbsp;<span class="ident" id="2942627">quickSort</span><span class="op" id="2942636">(</span><span class="ident" id="2942637">data</span>&nbsp;<span class="ident" id="2942642">Interface</span><span class="op" id="2942651">,</span>&nbsp;<span class="ident" id="2942653">a</span><span class="op" id="2942654">,</span>&nbsp;<span class="ident" id="2942656">b</span><span class="op" id="2942657">,</span>&nbsp;<span class="ident" id="2942659">maxDepth</span>&nbsp;<span class="builtintype" id="2942668">int</span><span class="op" id="2942671">)</span>&nbsp;<span class="op" id="2942673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942676">for</span>&nbsp;<span class="ident" id="2942680">b</span><span class="op" id="2942681">-</span><span class="ident" id="2942682">a</span>&nbsp;<span class="op" id="2942684">&gt;</span>&nbsp;<span class="num" id="2942686">7</span>&nbsp;<span class="op" id="2942688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942692">if</span>&nbsp;<span class="ident" id="2942695">maxDepth</span>&nbsp;<span class="op" id="2942704">==</span>&nbsp;<span class="num" id="2942707">0</span>&nbsp;<span class="op" id="2942709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942714">heapSort</span><span class="op" id="2942722">(</span><span class="ident" id="2942723">data</span><span class="op" id="2942727">,</span>&nbsp;<span class="ident" id="2942729">a</span><span class="op" id="2942730">,</span>&nbsp;<span class="ident" id="2942732">b</span><span class="op" id="2942733">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942738">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942751">maxDepth</span><span class="op" id="2942759">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942764">mlo</span><span class="op" id="2942767">,</span>&nbsp;<span class="ident" id="2942769">mhi</span>&nbsp;<span class="op" id="2942773">:=</span>&nbsp;<span class="ident" id="2942776">doPivot</span><span class="op" id="2942783">(</span><span class="ident" id="2942784">data</span><span class="op" id="2942788">,</span>&nbsp;<span class="ident" id="2942790">a</span><span class="op" id="2942791">,</span>&nbsp;<span class="ident" id="2942793">b</span><span class="op" id="2942794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2942798">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2942858">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942897">if</span>&nbsp;<span class="ident" id="2942900">mlo</span><span class="op" id="2942903">-</span><span class="ident" id="2942904">a</span>&nbsp;<span class="op" id="2942906">&lt;</span>&nbsp;<span class="ident" id="2942908">b</span><span class="op" id="2942909">-</span><span class="ident" id="2942910">mhi</span>&nbsp;<span class="op" id="2942914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942919">quickSort</span><span class="op" id="2942928">(</span><span class="ident" id="2942929">data</span><span class="op" id="2942933">,</span>&nbsp;<span class="ident" id="2942935">a</span><span class="op" id="2942936">,</span>&nbsp;<span class="ident" id="2942938">mlo</span><span class="op" id="2942941">,</span>&nbsp;<span class="ident" id="2942943">maxDepth</span><span class="op" id="2942951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2942956">a</span>&nbsp;<span class="op" id="2942958">=</span>&nbsp;<span class="ident" id="2942960">mhi</span>&nbsp;<span class="comment" id="2942964">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942999">}</span>&nbsp;<span class="keyword" id="2943001">else</span>&nbsp;<span class="op" id="2943006">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943011">quickSort</span><span class="op" id="2943020">(</span><span class="ident" id="2943021">data</span><span class="op" id="2943025">,</span>&nbsp;<span class="ident" id="2943027">mhi</span><span class="op" id="2943030">,</span>&nbsp;<span class="ident" id="2943032">b</span><span class="op" id="2943033">,</span>&nbsp;<span class="ident" id="2943035">maxDepth</span><span class="op" id="2943043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943048">b</span>&nbsp;<span class="op" id="2943050">=</span>&nbsp;<span class="ident" id="2943052">mlo</span>&nbsp;<span class="comment" id="2943056">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943097">if</span>&nbsp;<span class="ident" id="2943100">b</span><span class="op" id="2943101">-</span><span class="ident" id="2943102">a</span>&nbsp;<span class="op" id="2943104">&gt;</span>&nbsp;<span class="num" id="2943106">1</span>&nbsp;<span class="op" id="2943108">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943112">insertionSort</span><span class="op" id="2943125">(</span><span class="ident" id="2943126">data</span><span class="op" id="2943130">,</span>&nbsp;<span class="ident" id="2943132">a</span><span class="op" id="2943133">,</span>&nbsp;<span class="ident" id="2943135">b</span><span class="op" id="2943136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943139">}</span><br>
<span class="lineno"></span><span class="op" id="2943141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943144">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2943164">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2943238">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2943307">func</span>&nbsp;<span class="ident" id="2943312">Sort</span><span class="op" id="2943316">(</span><span class="ident" id="2943317">data</span>&nbsp;<span class="ident" id="2943322">Interface</span><span class="op" id="2943331">)</span>&nbsp;<span class="op" id="2943333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2943336">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943399">n</span>&nbsp;<span class="op" id="2943401">:=</span>&nbsp;<span class="ident" id="2943404">data</span><span class="op" id="2943408">.</span><span class="ident" id="2943409">Len</span><span class="op" id="2943412">(</span><span class="op" id="2943413">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943416">maxDepth</span>&nbsp;<span class="op" id="2943425">:=</span>&nbsp;<span class="num" id="2943428">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943431">for</span>&nbsp;<span class="ident" id="2943435">i</span>&nbsp;<span class="op" id="2943437">:=</span>&nbsp;<span class="ident" id="2943440">n</span><span class="op" id="2943441">;</span>&nbsp;<span class="ident" id="2943443">i</span>&nbsp;<span class="op" id="2943445">&gt;</span>&nbsp;<span class="num" id="2943447">0</span><span class="op" id="2943448">;</span>&nbsp;<span class="ident" id="2943450">i</span>&nbsp;<span class="op" id="2943452">&gt;&gt;=</span>&nbsp;<span class="num" id="2943456">1</span>&nbsp;<span class="op" id="2943458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943462">maxDepth</span><span class="op" id="2943470">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943477">maxDepth</span>&nbsp;<span class="op" id="2943486">*=</span>&nbsp;<span class="num" id="2943489">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943492">quickSort</span><span class="op" id="2943501">(</span><span class="ident" id="2943502">data</span><span class="op" id="2943506">,</span>&nbsp;<span class="num" id="2943508">0</span><span class="op" id="2943509">,</span>&nbsp;<span class="ident" id="2943511">n</span><span class="op" id="2943512">,</span>&nbsp;<span class="ident" id="2943514">maxDepth</span><span class="op" id="2943522">)</span><br>
<span class="lineno"></span><span class="op" id="2943524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2943527">type</span>&nbsp;<span class="ident" id="2943532">reverse</span>&nbsp;<span class="keyword" id="2943540">struct</span>&nbsp;<span class="op" id="2943547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2943550">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2943616">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943654">Interface</span><br>
<span class="lineno"></span><span class="op" id="2943664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943667">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2943742">func</span>&nbsp;<span class="op" id="2943747">(</span><span class="ident" id="2943748">r</span>&nbsp;<span class="ident" id="2943750">reverse</span><span class="op" id="2943757">)</span>&nbsp;<span class="ident" id="2943759">Less</span><span class="op" id="2943763">(</span><span class="ident" id="2943764">i</span><span class="op" id="2943765">,</span>&nbsp;<span class="ident" id="2943767">j</span>&nbsp;<span class="builtintype" id="2943769">int</span><span class="op" id="2943772">)</span>&nbsp;<span class="builtintype" id="2943774">bool</span>&nbsp;<span class="op" id="2943779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943782">return</span>&nbsp;<span class="ident" id="2943789">r</span><span class="op" id="2943790">.</span><span class="ident" id="2943791">Interface</span><span class="op" id="2943800">.</span><span class="ident" id="2943801">Less</span><span class="op" id="2943805">(</span><span class="ident" id="2943806">j</span><span class="op" id="2943807">,</span>&nbsp;<span class="ident" id="2943809">i</span><span class="op" id="2943810">)</span><br>
<span class="lineno"></span><span class="op" id="2943812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943815">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2943862">func</span>&nbsp;<span class="ident" id="2943867">Reverse</span><span class="op" id="2943874">(</span><span class="ident" id="2943875">data</span>&nbsp;<span class="ident" id="2943880">Interface</span><span class="op" id="2943889">)</span>&nbsp;<span class="ident" id="2943891">Interface</span>&nbsp;<span class="op" id="2943901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943904">return</span>&nbsp;<span class="op" id="2943911">&amp;</span><span class="ident" id="2943912">reverse</span><span class="op" id="2943919">{</span><span class="ident" id="2943920">data</span><span class="op" id="2943924">}</span><br>
<span class="lineno"></span><span class="op" id="2943926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943929">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2943973">func</span>&nbsp;<span class="ident" id="2943978">IsSorted</span><span class="op" id="2943986">(</span><span class="ident" id="2943987">data</span>&nbsp;<span class="ident" id="2943992">Interface</span><span class="op" id="2944001">)</span>&nbsp;<span class="builtintype" id="2944003">bool</span>&nbsp;<span class="op" id="2944008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944011">n</span>&nbsp;<span class="op" id="2944013">:=</span>&nbsp;<span class="ident" id="2944016">data</span><span class="op" id="2944020">.</span><span class="ident" id="2944021">Len</span><span class="op" id="2944024">(</span><span class="op" id="2944025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944028">for</span>&nbsp;<span class="ident" id="2944032">i</span>&nbsp;<span class="op" id="2944034">:=</span>&nbsp;<span class="ident" id="2944037">n</span>&nbsp;<span class="op" id="2944039">-</span>&nbsp;<span class="num" id="2944041">1</span><span class="op" id="2944042">;</span>&nbsp;<span class="ident" id="2944044">i</span>&nbsp;<span class="op" id="2944046">&gt;</span>&nbsp;<span class="num" id="2944048">0</span><span class="op" id="2944049">;</span>&nbsp;<span class="ident" id="2944051">i</span><span class="op" id="2944052">--</span>&nbsp;<span class="op" id="2944055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944059">if</span>&nbsp;<span class="ident" id="2944062">data</span><span class="op" id="2944066">.</span><span class="ident" id="2944067">Less</span><span class="op" id="2944071">(</span><span class="ident" id="2944072">i</span><span class="op" id="2944073">,</span>&nbsp;<span class="ident" id="2944075">i</span><span class="op" id="2944076">-</span><span class="num" id="2944077">1</span><span class="op" id="2944078">)</span>&nbsp;<span class="op" id="2944080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944085">return</span>&nbsp;<span class="builtintype" id="2944092">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2944100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2944103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944106">return</span>&nbsp;<span class="builtintype" id="2944113">true</span><br>
<span class="lineno"></span><span class="op" id="2944118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2944121">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944160">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2944245">type</span>&nbsp;<span class="ident" id="2944250">IntSlice</span>&nbsp;<span class="op" id="2944259">[</span><span class="op" id="2944260">]</span><span class="builtintype" id="2944261">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2944266">func</span>&nbsp;<span class="op" id="2944271">(</span><span class="ident" id="2944272">p</span>&nbsp;<span class="ident" id="2944274">IntSlice</span><span class="op" id="2944282">)</span>&nbsp;<span class="ident" id="2944284">Len</span><span class="op" id="2944287">(</span><span class="op" id="2944288">)</span>&nbsp;<span class="builtintype" id="2944290">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944304">{</span>&nbsp;<span class="keyword" id="2944306">return</span>&nbsp;<span class="builtinfunc" id="2944313">len</span><span class="op" id="2944316">(</span><span class="ident" id="2944317">p</span><span class="op" id="2944318">)</span>&nbsp;<span class="op" id="2944320">}</span><br>
<span class="lineno"></span><span class="keyword" id="2944322">func</span>&nbsp;<span class="op" id="2944327">(</span><span class="ident" id="2944328">p</span>&nbsp;<span class="ident" id="2944330">IntSlice</span><span class="op" id="2944338">)</span>&nbsp;<span class="ident" id="2944340">Less</span><span class="op" id="2944344">(</span><span class="ident" id="2944345">i</span><span class="op" id="2944346">,</span>&nbsp;<span class="ident" id="2944348">j</span>&nbsp;<span class="builtintype" id="2944350">int</span><span class="op" id="2944353">)</span>&nbsp;<span class="builtintype" id="2944355">bool</span>&nbsp;<span class="op" id="2944360">{</span>&nbsp;<span class="keyword" id="2944362">return</span>&nbsp;<span class="ident" id="2944369">p</span><span class="op" id="2944370">[</span><span class="ident" id="2944371">i</span><span class="op" id="2944372">]</span>&nbsp;<span class="op" id="2944374">&lt;</span>&nbsp;<span class="ident" id="2944376">p</span><span class="op" id="2944377">[</span><span class="ident" id="2944378">j</span><span class="op" id="2944379">]</span>&nbsp;<span class="op" id="2944381">}</span><br>
<span class="lineno"></span><span class="keyword" id="2944383">func</span>&nbsp;<span class="op" id="2944388">(</span><span class="ident" id="2944389">p</span>&nbsp;<span class="ident" id="2944391">IntSlice</span><span class="op" id="2944399">)</span>&nbsp;<span class="ident" id="2944401">Swap</span><span class="op" id="2944405">(</span><span class="ident" id="2944406">i</span><span class="op" id="2944407">,</span>&nbsp;<span class="ident" id="2944409">j</span>&nbsp;<span class="builtintype" id="2944411">int</span><span class="op" id="2944414">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944421">{</span>&nbsp;<span class="ident" id="2944423">p</span><span class="op" id="2944424">[</span><span class="ident" id="2944425">i</span><span class="op" id="2944426">]</span><span class="op" id="2944427">,</span>&nbsp;<span class="ident" id="2944429">p</span><span class="op" id="2944430">[</span><span class="ident" id="2944431">j</span><span class="op" id="2944432">]</span>&nbsp;<span class="op" id="2944434">=</span>&nbsp;<span class="ident" id="2944436">p</span><span class="op" id="2944437">[</span><span class="ident" id="2944438">j</span><span class="op" id="2944439">]</span><span class="op" id="2944440">,</span>&nbsp;<span class="ident" id="2944442">p</span><span class="op" id="2944443">[</span><span class="ident" id="2944444">i</span><span class="op" id="2944445">]</span>&nbsp;<span class="op" id="2944447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944450">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2944483">func</span>&nbsp;<span class="op" id="2944488">(</span><span class="ident" id="2944489">p</span>&nbsp;<span class="ident" id="2944491">IntSlice</span><span class="op" id="2944499">)</span>&nbsp;<span class="ident" id="2944501">Sort</span><span class="op" id="2944505">(</span><span class="op" id="2944506">)</span>&nbsp;<span class="op" id="2944508">{</span>&nbsp;<span class="ident" id="2944510">Sort</span><span class="op" id="2944514">(</span><span class="ident" id="2944515">p</span><span class="op" id="2944516">)</span>&nbsp;<span class="op" id="2944518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944521">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2944614">type</span>&nbsp;<span class="ident" id="2944619">Float64Slice</span>&nbsp;<span class="op" id="2944632">[</span><span class="op" id="2944633">]</span><span class="builtintype" id="2944634">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2944643">func</span>&nbsp;<span class="op" id="2944648">(</span><span class="ident" id="2944649">p</span>&nbsp;<span class="ident" id="2944651">Float64Slice</span><span class="op" id="2944663">)</span>&nbsp;<span class="ident" id="2944665">Len</span><span class="op" id="2944668">(</span><span class="op" id="2944669">)</span>&nbsp;<span class="builtintype" id="2944671">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944685">{</span>&nbsp;<span class="keyword" id="2944687">return</span>&nbsp;<span class="builtinfunc" id="2944694">len</span><span class="op" id="2944697">(</span><span class="ident" id="2944698">p</span><span class="op" id="2944699">)</span>&nbsp;<span class="op" id="2944701">}</span><br>
<span class="lineno"></span><span class="keyword" id="2944703">func</span>&nbsp;<span class="op" id="2944708">(</span><span class="ident" id="2944709">p</span>&nbsp;<span class="ident" id="2944711">Float64Slice</span><span class="op" id="2944723">)</span>&nbsp;<span class="ident" id="2944725">Less</span><span class="op" id="2944729">(</span><span class="ident" id="2944730">i</span><span class="op" id="2944731">,</span>&nbsp;<span class="ident" id="2944733">j</span>&nbsp;<span class="builtintype" id="2944735">int</span><span class="op" id="2944738">)</span>&nbsp;<span class="builtintype" id="2944740">bool</span>&nbsp;<span class="op" id="2944745">{</span>&nbsp;<span class="keyword" id="2944747">return</span>&nbsp;<span class="ident" id="2944754">p</span><span class="op" id="2944755">[</span><span class="ident" id="2944756">i</span><span class="op" id="2944757">]</span>&nbsp;<span class="op" id="2944759">&lt;</span>&nbsp;<span class="ident" id="2944761">p</span><span class="op" id="2944762">[</span><span class="ident" id="2944763">j</span><span class="op" id="2944764">]</span>&nbsp;<span class="op" id="2944766">||</span>&nbsp;<span class="ident" id="2944769">isNaN</span><span class="op" id="2944774">(</span><span class="ident" id="2944775">p</span><span class="op" id="2944776">[</span><span class="ident" id="2944777">i</span><span class="op" id="2944778">]</span><span class="op" id="2944779">)</span>&nbsp;<span class="op" id="2944781">&amp;&amp;</span>&nbsp;<span class="op" id="2944784">!</span><span class="ident" id="2944785">isNaN</span><span class="op" id="2944790">(</span><span class="ident" id="2944791">p</span><span class="op" id="2944792">[</span><span class="ident" id="2944793">j</span><span class="op" id="2944794">]</span><span class="op" id="2944795">)</span>&nbsp;<span class="op" id="2944797">}</span><br>
<span class="lineno"></span><span class="keyword" id="2944799">func</span>&nbsp;<span class="op" id="2944804">(</span><span class="ident" id="2944805">p</span>&nbsp;<span class="ident" id="2944807">Float64Slice</span><span class="op" id="2944819">)</span>&nbsp;<span class="ident" id="2944821">Swap</span><span class="op" id="2944825">(</span><span class="ident" id="2944826">i</span><span class="op" id="2944827">,</span>&nbsp;<span class="ident" id="2944829">j</span>&nbsp;<span class="builtintype" id="2944831">int</span><span class="op" id="2944834">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944841">{</span>&nbsp;<span class="ident" id="2944843">p</span><span class="op" id="2944844">[</span><span class="ident" id="2944845">i</span><span class="op" id="2944846">]</span><span class="op" id="2944847">,</span>&nbsp;<span class="ident" id="2944849">p</span><span class="op" id="2944850">[</span><span class="ident" id="2944851">j</span><span class="op" id="2944852">]</span>&nbsp;<span class="op" id="2944854">=</span>&nbsp;<span class="ident" id="2944856">p</span><span class="op" id="2944857">[</span><span class="ident" id="2944858">j</span><span class="op" id="2944859">]</span><span class="op" id="2944860">,</span>&nbsp;<span class="ident" id="2944862">p</span><span class="op" id="2944863">[</span><span class="ident" id="2944864">i</span><span class="op" id="2944865">]</span>&nbsp;<span class="op" id="2944867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944870">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2944946">func</span>&nbsp;<span class="ident" id="2944951">isNaN</span><span class="op" id="2944956">(</span><span class="ident" id="2944957">f</span>&nbsp;<span class="builtintype" id="2944959">float64</span><span class="op" id="2944966">)</span>&nbsp;<span class="builtintype" id="2944968">bool</span>&nbsp;<span class="op" id="2944973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944976">return</span>&nbsp;<span class="ident" id="2944983">f</span>&nbsp;<span class="op" id="2944985">!=</span>&nbsp;<span class="ident" id="2944988">f</span><br>
<span class="lineno"></span><span class="op" id="2944990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944993">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2945026">func</span>&nbsp;<span class="op" id="2945031">(</span><span class="ident" id="2945032">p</span>&nbsp;<span class="ident" id="2945034">Float64Slice</span><span class="op" id="2945046">)</span>&nbsp;<span class="ident" id="2945048">Sort</span><span class="op" id="2945052">(</span><span class="op" id="2945053">)</span>&nbsp;<span class="op" id="2945055">{</span>&nbsp;<span class="ident" id="2945057">Sort</span><span class="op" id="2945061">(</span><span class="ident" id="2945062">p</span><span class="op" id="2945063">)</span>&nbsp;<span class="op" id="2945065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945068">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2945159">type</span>&nbsp;<span class="ident" id="2945164">StringSlice</span>&nbsp;<span class="op" id="2945176">[</span><span class="op" id="2945177">]</span><span class="builtintype" id="2945178">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2945186">func</span>&nbsp;<span class="op" id="2945191">(</span><span class="ident" id="2945192">p</span>&nbsp;<span class="ident" id="2945194">StringSlice</span><span class="op" id="2945205">)</span>&nbsp;<span class="ident" id="2945207">Len</span><span class="op" id="2945210">(</span><span class="op" id="2945211">)</span>&nbsp;<span class="builtintype" id="2945213">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945227">{</span>&nbsp;<span class="keyword" id="2945229">return</span>&nbsp;<span class="builtinfunc" id="2945236">len</span><span class="op" id="2945239">(</span><span class="ident" id="2945240">p</span><span class="op" id="2945241">)</span>&nbsp;<span class="op" id="2945243">}</span><br>
<span class="lineno"></span><span class="keyword" id="2945245">func</span>&nbsp;<span class="op" id="2945250">(</span><span class="ident" id="2945251">p</span>&nbsp;<span class="ident" id="2945253">StringSlice</span><span class="op" id="2945264">)</span>&nbsp;<span class="ident" id="2945266">Less</span><span class="op" id="2945270">(</span><span class="ident" id="2945271">i</span><span class="op" id="2945272">,</span>&nbsp;<span class="ident" id="2945274">j</span>&nbsp;<span class="builtintype" id="2945276">int</span><span class="op" id="2945279">)</span>&nbsp;<span class="builtintype" id="2945281">bool</span>&nbsp;<span class="op" id="2945286">{</span>&nbsp;<span class="keyword" id="2945288">return</span>&nbsp;<span class="ident" id="2945295">p</span><span class="op" id="2945296">[</span><span class="ident" id="2945297">i</span><span class="op" id="2945298">]</span>&nbsp;<span class="op" id="2945300">&lt;</span>&nbsp;<span class="ident" id="2945302">p</span><span class="op" id="2945303">[</span><span class="ident" id="2945304">j</span><span class="op" id="2945305">]</span>&nbsp;<span class="op" id="2945307">}</span><br>
<span class="lineno"></span><span class="keyword" id="2945309">func</span>&nbsp;<span class="op" id="2945314">(</span><span class="ident" id="2945315">p</span>&nbsp;<span class="ident" id="2945317">StringSlice</span><span class="op" id="2945328">)</span>&nbsp;<span class="ident" id="2945330">Swap</span><span class="op" id="2945334">(</span><span class="ident" id="2945335">i</span><span class="op" id="2945336">,</span>&nbsp;<span class="ident" id="2945338">j</span>&nbsp;<span class="builtintype" id="2945340">int</span><span class="op" id="2945343">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945350">{</span>&nbsp;<span class="ident" id="2945352">p</span><span class="op" id="2945353">[</span><span class="ident" id="2945354">i</span><span class="op" id="2945355">]</span><span class="op" id="2945356">,</span>&nbsp;<span class="ident" id="2945358">p</span><span class="op" id="2945359">[</span><span class="ident" id="2945360">j</span><span class="op" id="2945361">]</span>&nbsp;<span class="op" id="2945363">=</span>&nbsp;<span class="ident" id="2945365">p</span><span class="op" id="2945366">[</span><span class="ident" id="2945367">j</span><span class="op" id="2945368">]</span><span class="op" id="2945369">,</span>&nbsp;<span class="ident" id="2945371">p</span><span class="op" id="2945372">[</span><span class="ident" id="2945373">i</span><span class="op" id="2945374">]</span>&nbsp;<span class="op" id="2945376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945379">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2945412">func</span>&nbsp;<span class="op" id="2945417">(</span><span class="ident" id="2945418">p</span>&nbsp;<span class="ident" id="2945420">StringSlice</span><span class="op" id="2945431">)</span>&nbsp;<span class="ident" id="2945433">Sort</span><span class="op" id="2945437">(</span><span class="op" id="2945438">)</span>&nbsp;<span class="op" id="2945440">{</span>&nbsp;<span class="ident" id="2945442">Sort</span><span class="op" id="2945446">(</span><span class="ident" id="2945447">p</span><span class="op" id="2945448">)</span>&nbsp;<span class="op" id="2945450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945453">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945495">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2945546">func</span>&nbsp;<span class="ident" id="2945551">Ints</span><span class="op" id="2945555">(</span><span class="ident" id="2945556">a</span>&nbsp;<span class="op" id="2945558">[</span><span class="op" id="2945559">]</span><span class="builtintype" id="2945560">int</span><span class="op" id="2945563">)</span>&nbsp;<span class="op" id="2945565">{</span>&nbsp;<span class="ident" id="2945567">Sort</span><span class="op" id="2945571">(</span><span class="ident" id="2945572">IntSlice</span><span class="op" id="2945580">(</span><span class="ident" id="2945581">a</span><span class="op" id="2945582">)</span><span class="op" id="2945583">)</span>&nbsp;<span class="op" id="2945585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945588">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2945647">func</span>&nbsp;<span class="ident" id="2945652">Float64s</span><span class="op" id="2945660">(</span><span class="ident" id="2945661">a</span>&nbsp;<span class="op" id="2945663">[</span><span class="op" id="2945664">]</span><span class="builtintype" id="2945665">float64</span><span class="op" id="2945672">)</span>&nbsp;<span class="op" id="2945674">{</span>&nbsp;<span class="ident" id="2945676">Sort</span><span class="op" id="2945680">(</span><span class="ident" id="2945681">Float64Slice</span><span class="op" id="2945693">(</span><span class="ident" id="2945694">a</span><span class="op" id="2945695">)</span><span class="op" id="2945696">)</span>&nbsp;<span class="op" id="2945698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2945701">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2945758">func</span>&nbsp;<span class="ident" id="2945763">Strings</span><span class="op" id="2945770">(</span><span class="ident" id="2945771">a</span>&nbsp;<span class="op" id="2945773">[</span><span class="op" id="2945774">]</span><span class="builtintype" id="2945775">string</span><span class="op" id="2945781">)</span>&nbsp;<span class="op" id="2945783">{</span>&nbsp;<span class="ident" id="2945785">Sort</span><span class="op" id="2945789">(</span><span class="ident" id="2945790">StringSlice</span><span class="op" id="2945801">(</span><span class="ident" id="2945802">a</span><span class="op" id="2945803">)</span><span class="op" id="2945804">)</span>&nbsp;<span class="op" id="2945806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945809">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2945887">func</span>&nbsp;<span class="ident" id="2945892">IntsAreSorted</span><span class="op" id="2945905">(</span><span class="ident" id="2945906">a</span>&nbsp;<span class="op" id="2945908">[</span><span class="op" id="2945909">]</span><span class="builtintype" id="2945910">int</span><span class="op" id="2945913">)</span>&nbsp;<span class="builtintype" id="2945915">bool</span>&nbsp;<span class="op" id="2945920">{</span>&nbsp;<span class="keyword" id="2945922">return</span>&nbsp;<span class="ident" id="2945929">IsSorted</span><span class="op" id="2945937">(</span><span class="ident" id="2945938">IntSlice</span><span class="op" id="2945946">(</span><span class="ident" id="2945947">a</span><span class="op" id="2945948">)</span><span class="op" id="2945949">)</span>&nbsp;<span class="op" id="2945951">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2945954">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2946040">func</span>&nbsp;<span class="ident" id="2946045">Float64sAreSorted</span><span class="op" id="2946062">(</span><span class="ident" id="2946063">a</span>&nbsp;<span class="op" id="2946065">[</span><span class="op" id="2946066">]</span><span class="builtintype" id="2946067">float64</span><span class="op" id="2946074">)</span>&nbsp;<span class="builtintype" id="2946076">bool</span>&nbsp;<span class="op" id="2946081">{</span>&nbsp;<span class="keyword" id="2946083">return</span>&nbsp;<span class="ident" id="2946090">IsSorted</span><span class="op" id="2946098">(</span><span class="ident" id="2946099">Float64Slice</span><span class="op" id="2946111">(</span><span class="ident" id="2946112">a</span><span class="op" id="2946113">)</span><span class="op" id="2946114">)</span>&nbsp;<span class="op" id="2946116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946119">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2946203">func</span>&nbsp;<span class="ident" id="2946208">StringsAreSorted</span><span class="op" id="2946224">(</span><span class="ident" id="2946225">a</span>&nbsp;<span class="op" id="2946227">[</span><span class="op" id="2946228">]</span><span class="builtintype" id="2946229">string</span><span class="op" id="2946235">)</span>&nbsp;<span class="builtintype" id="2946237">bool</span>&nbsp;<span class="op" id="2946242">{</span>&nbsp;<span class="keyword" id="2946244">return</span>&nbsp;<span class="ident" id="2946251">IsSorted</span><span class="op" id="2946259">(</span><span class="ident" id="2946260">StringSlice</span><span class="op" id="2946271">(</span><span class="ident" id="2946272">a</span><span class="op" id="2946273">)</span><span class="op" id="2946274">)</span>&nbsp;<span class="op" id="2946276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946279">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2946307">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2946383">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2946458">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2946521">//</span><br>
<span class="lineno"></span><span class="comment" id="2946524">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2946566">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2946638">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2946656">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2946710">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2946787">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2946859">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2946931">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2946986">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2947059">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2947110">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2947186">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2947260">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2947326">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2947403">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2947482">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2947560">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2947634">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2947682">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2947756">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947805">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2947878">//</span><br>
<span class="lineno">315</span><span class="comment" id="2947881">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2947951">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2948007">func</span>&nbsp;<span class="ident" id="2948012">Stable</span><span class="op" id="2948018">(</span><span class="ident" id="2948019">data</span>&nbsp;<span class="ident" id="2948024">Interface</span><span class="op" id="2948033">)</span>&nbsp;<span class="op" id="2948035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948038">n</span>&nbsp;<span class="op" id="2948040">:=</span>&nbsp;<span class="ident" id="2948043">data</span><span class="op" id="2948047">.</span><span class="ident" id="2948048">Len</span><span class="op" id="2948051">(</span><span class="op" id="2948052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948055">blockSize</span>&nbsp;<span class="op" id="2948065">:=</span>&nbsp;<span class="num" id="2948068">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948072">a</span><span class="op" id="2948073">,</span>&nbsp;<span class="ident" id="2948075">b</span>&nbsp;<span class="op" id="2948077">:=</span>&nbsp;<span class="num" id="2948080">0</span><span class="op" id="2948081">,</span>&nbsp;<span class="ident" id="2948083">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948094">for</span>&nbsp;<span class="ident" id="2948098">b</span>&nbsp;<span class="op" id="2948100">&lt;=</span>&nbsp;<span class="ident" id="2948103">n</span>&nbsp;<span class="op" id="2948105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948109">insertionSort</span><span class="op" id="2948122">(</span><span class="ident" id="2948123">data</span><span class="op" id="2948127">,</span>&nbsp;<span class="ident" id="2948129">a</span><span class="op" id="2948130">,</span>&nbsp;<span class="ident" id="2948132">b</span><span class="op" id="2948133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948137">a</span>&nbsp;<span class="op" id="2948139">=</span>&nbsp;<span class="ident" id="2948141">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948145">b</span>&nbsp;<span class="op" id="2948147">+=</span>&nbsp;<span class="ident" id="2948150">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948164">insertionSort</span><span class="op" id="2948177">(</span><span class="ident" id="2948178">data</span><span class="op" id="2948182">,</span>&nbsp;<span class="ident" id="2948184">a</span><span class="op" id="2948185">,</span>&nbsp;<span class="ident" id="2948187">n</span><span class="op" id="2948188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948192">for</span>&nbsp;<span class="ident" id="2948196">blockSize</span>&nbsp;<span class="op" id="2948206">&lt;</span>&nbsp;<span class="ident" id="2948208">n</span>&nbsp;<span class="op" id="2948210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948214">a</span><span class="op" id="2948215">,</span>&nbsp;<span class="ident" id="2948217">b</span>&nbsp;<span class="op" id="2948219">=</span>&nbsp;<span class="num" id="2948221">0</span><span class="op" id="2948222">,</span>&nbsp;<span class="num" id="2948224">2</span><span class="op" id="2948225">*</span><span class="ident" id="2948226">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948238">for</span>&nbsp;<span class="ident" id="2948242">b</span>&nbsp;<span class="op" id="2948244">&lt;=</span>&nbsp;<span class="ident" id="2948247">n</span>&nbsp;<span class="op" id="2948249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948254">symMerge</span><span class="op" id="2948262">(</span><span class="ident" id="2948263">data</span><span class="op" id="2948267">,</span>&nbsp;<span class="ident" id="2948269">a</span><span class="op" id="2948270">,</span>&nbsp;<span class="ident" id="2948272">a</span><span class="op" id="2948273">+</span><span class="ident" id="2948274">blockSize</span><span class="op" id="2948283">,</span>&nbsp;<span class="ident" id="2948285">b</span><span class="op" id="2948286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948291">a</span>&nbsp;<span class="op" id="2948293">=</span>&nbsp;<span class="ident" id="2948295">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948300">b</span>&nbsp;<span class="op" id="2948302">+=</span>&nbsp;<span class="num" id="2948305">2</span>&nbsp;<span class="op" id="2948307">*</span>&nbsp;<span class="ident" id="2948309">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948321">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948325">symMerge</span><span class="op" id="2948333">(</span><span class="ident" id="2948334">data</span><span class="op" id="2948338">,</span>&nbsp;<span class="ident" id="2948340">a</span><span class="op" id="2948341">,</span>&nbsp;<span class="ident" id="2948343">a</span><span class="op" id="2948344">+</span><span class="ident" id="2948345">blockSize</span><span class="op" id="2948354">,</span>&nbsp;<span class="ident" id="2948356">n</span><span class="op" id="2948357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948361">blockSize</span>&nbsp;<span class="op" id="2948371">*=</span>&nbsp;<span class="num" id="2948374">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948377">}</span><br>
<span class="lineno"></span><span class="op" id="2948379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2948382">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2948459">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2948536">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2948611">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2948686">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2948738">//</span><br>
<span class="lineno"></span><span class="comment" id="2948741">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2948782">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2948833">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2948894">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2948953">//</span><br>
<span class="lineno"></span><span class="comment" id="2948956">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2949031">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2949111">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2949188">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2949231">func</span>&nbsp;<span class="ident" id="2949236">symMerge</span><span class="op" id="2949244">(</span><span class="ident" id="2949245">data</span>&nbsp;<span class="ident" id="2949250">Interface</span><span class="op" id="2949259">,</span>&nbsp;<span class="ident" id="2949261">a</span><span class="op" id="2949262">,</span>&nbsp;<span class="ident" id="2949264">m</span><span class="op" id="2949265">,</span>&nbsp;<span class="ident" id="2949267">b</span>&nbsp;<span class="builtintype" id="2949269">int</span><span class="op" id="2949272">)</span>&nbsp;<span class="op" id="2949274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949277">if</span>&nbsp;<span class="ident" id="2949280">a</span>&nbsp;<span class="op" id="2949282">&gt;=</span>&nbsp;<span class="ident" id="2949285">m</span>&nbsp;<span class="op" id="2949287">||</span>&nbsp;<span class="ident" id="2949290">m</span>&nbsp;<span class="op" id="2949292">&gt;=</span>&nbsp;<span class="ident" id="2949295">b</span>&nbsp;<span class="op" id="2949297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949301">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949313">mid</span>&nbsp;<span class="op" id="2949317">:=</span>&nbsp;<span class="ident" id="2949320">a</span>&nbsp;<span class="op" id="2949322">+</span>&nbsp;<span class="op" id="2949324">(</span><span class="ident" id="2949325">b</span><span class="op" id="2949326">-</span><span class="ident" id="2949327">a</span><span class="op" id="2949328">)</span><span class="op" id="2949329">/</span><span class="num" id="2949330">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949333">n</span>&nbsp;<span class="op" id="2949335">:=</span>&nbsp;<span class="ident" id="2949338">mid</span>&nbsp;<span class="op" id="2949342">+</span>&nbsp;<span class="ident" id="2949344">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949347">start</span>&nbsp;<span class="op" id="2949353">:=</span>&nbsp;<span class="num" id="2949356">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949359">if</span>&nbsp;<span class="ident" id="2949362">m</span>&nbsp;<span class="op" id="2949364">&gt;</span>&nbsp;<span class="ident" id="2949366">mid</span>&nbsp;<span class="op" id="2949370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949374">start</span>&nbsp;<span class="op" id="2949380">=</span>&nbsp;<span class="ident" id="2949382">n</span>&nbsp;<span class="op" id="2949384">-</span>&nbsp;<span class="ident" id="2949386">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949390">r</span><span class="op" id="2949391">,</span>&nbsp;<span class="ident" id="2949393">p</span>&nbsp;<span class="op" id="2949395">:=</span>&nbsp;<span class="ident" id="2949398">mid</span><span class="op" id="2949401">,</span>&nbsp;<span class="ident" id="2949403">n</span><span class="op" id="2949404">-</span><span class="num" id="2949405">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949409">for</span>&nbsp;<span class="ident" id="2949413">start</span>&nbsp;<span class="op" id="2949419">&lt;</span>&nbsp;<span class="ident" id="2949421">r</span>&nbsp;<span class="op" id="2949423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949428">c</span>&nbsp;<span class="op" id="2949430">:=</span>&nbsp;<span class="ident" id="2949433">start</span>&nbsp;<span class="op" id="2949439">+</span>&nbsp;<span class="op" id="2949441">(</span><span class="ident" id="2949442">r</span><span class="op" id="2949443">-</span><span class="ident" id="2949444">start</span><span class="op" id="2949449">)</span><span class="op" id="2949450">/</span><span class="num" id="2949451">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949456">if</span>&nbsp;<span class="op" id="2949459">!</span><span class="ident" id="2949460">data</span><span class="op" id="2949464">.</span><span class="ident" id="2949465">Less</span><span class="op" id="2949469">(</span><span class="ident" id="2949470">p</span><span class="op" id="2949471">-</span><span class="ident" id="2949472">c</span><span class="op" id="2949473">,</span>&nbsp;<span class="ident" id="2949475">c</span><span class="op" id="2949476">)</span>&nbsp;<span class="op" id="2949478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949484">start</span>&nbsp;<span class="op" id="2949490">=</span>&nbsp;<span class="ident" id="2949492">c</span>&nbsp;<span class="op" id="2949494">+</span>&nbsp;<span class="num" id="2949496">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949501">}</span>&nbsp;<span class="keyword" id="2949503">else</span>&nbsp;<span class="op" id="2949508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949514">r</span>&nbsp;<span class="op" id="2949516">=</span>&nbsp;<span class="ident" id="2949518">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949530">}</span>&nbsp;<span class="keyword" id="2949532">else</span>&nbsp;<span class="op" id="2949537">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949541">start</span>&nbsp;<span class="op" id="2949547">=</span>&nbsp;<span class="ident" id="2949549">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949553">r</span><span class="op" id="2949554">,</span>&nbsp;<span class="ident" id="2949556">p</span>&nbsp;<span class="op" id="2949558">:=</span>&nbsp;<span class="ident" id="2949561">m</span><span class="op" id="2949562">,</span>&nbsp;<span class="ident" id="2949564">n</span><span class="op" id="2949565">-</span><span class="num" id="2949566">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949570">for</span>&nbsp;<span class="ident" id="2949574">start</span>&nbsp;<span class="op" id="2949580">&lt;</span>&nbsp;<span class="ident" id="2949582">r</span>&nbsp;<span class="op" id="2949584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949589">c</span>&nbsp;<span class="op" id="2949591">:=</span>&nbsp;<span class="ident" id="2949594">start</span>&nbsp;<span class="op" id="2949600">+</span>&nbsp;<span class="op" id="2949602">(</span><span class="ident" id="2949603">r</span><span class="op" id="2949604">-</span><span class="ident" id="2949605">start</span><span class="op" id="2949610">)</span><span class="op" id="2949611">/</span><span class="num" id="2949612">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949617">if</span>&nbsp;<span class="op" id="2949620">!</span><span class="ident" id="2949621">data</span><span class="op" id="2949625">.</span><span class="ident" id="2949626">Less</span><span class="op" id="2949630">(</span><span class="ident" id="2949631">p</span><span class="op" id="2949632">-</span><span class="ident" id="2949633">c</span><span class="op" id="2949634">,</span>&nbsp;<span class="ident" id="2949636">c</span><span class="op" id="2949637">)</span>&nbsp;<span class="op" id="2949639">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949645">start</span>&nbsp;<span class="op" id="2949651">=</span>&nbsp;<span class="ident" id="2949653">c</span>&nbsp;<span class="op" id="2949655">+</span>&nbsp;<span class="num" id="2949657">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949662">}</span>&nbsp;<span class="keyword" id="2949664">else</span>&nbsp;<span class="op" id="2949669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949675">r</span>&nbsp;<span class="op" id="2949677">=</span>&nbsp;<span class="ident" id="2949679">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949688">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949694">end</span>&nbsp;<span class="op" id="2949698">:=</span>&nbsp;<span class="ident" id="2949701">n</span>&nbsp;<span class="op" id="2949703">-</span>&nbsp;<span class="ident" id="2949705">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949712">rotate</span><span class="op" id="2949718">(</span><span class="ident" id="2949719">data</span><span class="op" id="2949723">,</span>&nbsp;<span class="ident" id="2949725">start</span><span class="op" id="2949730">,</span>&nbsp;<span class="ident" id="2949732">m</span><span class="op" id="2949733">,</span>&nbsp;<span class="ident" id="2949735">end</span><span class="op" id="2949738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949741">symMerge</span><span class="op" id="2949749">(</span><span class="ident" id="2949750">data</span><span class="op" id="2949754">,</span>&nbsp;<span class="ident" id="2949756">a</span><span class="op" id="2949757">,</span>&nbsp;<span class="ident" id="2949759">start</span><span class="op" id="2949764">,</span>&nbsp;<span class="ident" id="2949766">mid</span><span class="op" id="2949769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949772">symMerge</span><span class="op" id="2949780">(</span><span class="ident" id="2949781">data</span><span class="op" id="2949785">,</span>&nbsp;<span class="ident" id="2949787">mid</span><span class="op" id="2949790">,</span>&nbsp;<span class="ident" id="2949792">end</span><span class="op" id="2949795">,</span>&nbsp;<span class="ident" id="2949797">b</span><span class="op" id="2949798">)</span><br>
<span class="lineno">390</span><span class="op" id="2949800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949803">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2949878">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2949933">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2949989">func</span>&nbsp;<span class="ident" id="2949994">rotate</span><span class="op" id="2950000">(</span><span class="ident" id="2950001">data</span>&nbsp;<span class="ident" id="2950006">Interface</span><span class="op" id="2950015">,</span>&nbsp;<span class="ident" id="2950017">a</span><span class="op" id="2950018">,</span>&nbsp;<span class="ident" id="2950020">m</span><span class="op" id="2950021">,</span>&nbsp;<span class="ident" id="2950023">b</span>&nbsp;<span class="builtintype" id="2950025">int</span><span class="op" id="2950028">)</span>&nbsp;<span class="op" id="2950030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950033">i</span>&nbsp;<span class="op" id="2950035">:=</span>&nbsp;<span class="ident" id="2950038">m</span>&nbsp;<span class="op" id="2950040">-</span>&nbsp;<span class="ident" id="2950042">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950045">if</span>&nbsp;<span class="ident" id="2950048">i</span>&nbsp;<span class="op" id="2950050">==</span>&nbsp;<span class="num" id="2950053">0</span>&nbsp;<span class="op" id="2950055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950059">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950067">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950070">j</span>&nbsp;<span class="op" id="2950072">:=</span>&nbsp;<span class="ident" id="2950075">b</span>&nbsp;<span class="op" id="2950077">-</span>&nbsp;<span class="ident" id="2950079">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950082">if</span>&nbsp;<span class="ident" id="2950085">j</span>&nbsp;<span class="op" id="2950087">==</span>&nbsp;<span class="num" id="2950090">0</span>&nbsp;<span class="op" id="2950092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950096">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950108">if</span>&nbsp;<span class="ident" id="2950111">i</span>&nbsp;<span class="op" id="2950113">==</span>&nbsp;<span class="ident" id="2950116">j</span>&nbsp;<span class="op" id="2950118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950122">swapRange</span><span class="op" id="2950131">(</span><span class="ident" id="2950132">data</span><span class="op" id="2950136">,</span>&nbsp;<span class="ident" id="2950138">a</span><span class="op" id="2950139">,</span>&nbsp;<span class="ident" id="2950141">m</span><span class="op" id="2950142">,</span>&nbsp;<span class="ident" id="2950144">i</span><span class="op" id="2950145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950149">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950161">p</span>&nbsp;<span class="op" id="2950163">:=</span>&nbsp;<span class="ident" id="2950166">a</span>&nbsp;<span class="op" id="2950168">+</span>&nbsp;<span class="ident" id="2950170">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950173">for</span>&nbsp;<span class="ident" id="2950177">i</span>&nbsp;<span class="op" id="2950179">!=</span>&nbsp;<span class="ident" id="2950182">j</span>&nbsp;<span class="op" id="2950184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950188">if</span>&nbsp;<span class="ident" id="2950191">i</span>&nbsp;<span class="op" id="2950193">&gt;</span>&nbsp;<span class="ident" id="2950195">j</span>&nbsp;<span class="op" id="2950197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950202">swapRange</span><span class="op" id="2950211">(</span><span class="ident" id="2950212">data</span><span class="op" id="2950216">,</span>&nbsp;<span class="ident" id="2950218">p</span><span class="op" id="2950219">-</span><span class="ident" id="2950220">i</span><span class="op" id="2950221">,</span>&nbsp;<span class="ident" id="2950223">p</span><span class="op" id="2950224">,</span>&nbsp;<span class="ident" id="2950226">j</span><span class="op" id="2950227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950232">i</span>&nbsp;<span class="op" id="2950234">-=</span>&nbsp;<span class="ident" id="2950237">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950241">}</span>&nbsp;<span class="keyword" id="2950243">else</span>&nbsp;<span class="op" id="2950248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950253">swapRange</span><span class="op" id="2950262">(</span><span class="ident" id="2950263">data</span><span class="op" id="2950267">,</span>&nbsp;<span class="ident" id="2950269">p</span><span class="op" id="2950270">-</span><span class="ident" id="2950271">i</span><span class="op" id="2950272">,</span>&nbsp;<span class="ident" id="2950274">p</span><span class="op" id="2950275">+</span><span class="ident" id="2950276">j</span><span class="op" id="2950277">-</span><span class="ident" id="2950278">i</span><span class="op" id="2950279">,</span>&nbsp;<span class="ident" id="2950281">i</span><span class="op" id="2950282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950287">j</span>&nbsp;<span class="op" id="2950289">-=</span>&nbsp;<span class="ident" id="2950292">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950299">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950302">swapRange</span><span class="op" id="2950311">(</span><span class="ident" id="2950312">data</span><span class="op" id="2950316">,</span>&nbsp;<span class="ident" id="2950318">p</span><span class="op" id="2950319">-</span><span class="ident" id="2950320">i</span><span class="op" id="2950321">,</span>&nbsp;<span class="ident" id="2950323">p</span><span class="op" id="2950324">,</span>&nbsp;<span class="ident" id="2950326">i</span><span class="op" id="2950327">)</span><br>
<span class="lineno"></span><span class="op" id="2950329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950332">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
