<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6543738">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6543793">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6543847">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6543898">package</span>&nbsp;<span class="ident" id="6543906">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543911">import</span>&nbsp;<span class="op" id="6543918">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6543921">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6543930">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6543936">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6543942">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6543953">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6543963">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6543966">type</span>&nbsp;<span class="ident" id="6543971">Bench</span>&nbsp;<span class="keyword" id="6543977">struct</span>&nbsp;<span class="op" id="6543984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543987">A</span>&nbsp;<span class="builtintype" id="6543989">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543994">B</span>&nbsp;<span class="builtintype" id="6543996">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544005">C</span>&nbsp;<span class="builtintype" id="6544007">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544015">D</span>&nbsp;<span class="op" id="6544017">[</span><span class="op" id="6544018">]</span><span class="builtintype" id="6544019">byte</span><br>
<span class="lineno">20</span><span class="op" id="6544024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6544027">func</span>&nbsp;<span class="ident" id="6544032">benchmarkEndToEnd</span><span class="op" id="6544049">(</span><span class="ident" id="6544050">b</span>&nbsp;<span class="op" id="6544052">*</span><span class="ident" id="6544053">testing</span><span class="op" id="6544060">.</span><span class="ident" id="6544061">B</span><span class="op" id="6544062">,</span>&nbsp;<span class="ident" id="6544064">ctor</span>&nbsp;<span class="keyword" id="6544069">func</span><span class="op" id="6544073">(</span><span class="op" id="6544074">)</span>&nbsp;<span class="keyword" id="6544076">interface</span><span class="op" id="6544085">{</span><span class="op" id="6544086">}</span><span class="op" id="6544087">,</span>&nbsp;<span class="ident" id="6544089">pipe</span>&nbsp;<span class="keyword" id="6544094">func</span><span class="op" id="6544098">(</span><span class="op" id="6544099">)</span>&nbsp;<span class="op" id="6544101">(</span><span class="ident" id="6544102">r</span>&nbsp;<span class="ident" id="6544104">io</span><span class="op" id="6544106">.</span><span class="ident" id="6544107">Reader</span><span class="op" id="6544113">,</span>&nbsp;<span class="ident" id="6544115">w</span>&nbsp;<span class="ident" id="6544117">io</span><span class="op" id="6544119">.</span><span class="ident" id="6544120">Writer</span><span class="op" id="6544126">,</span>&nbsp;<span class="ident" id="6544128">err</span>&nbsp;<span class="builtintype" id="6544132">error</span><span class="op" id="6544137">)</span><span class="op" id="6544138">)</span>&nbsp;<span class="op" id="6544140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544143">b</span><span class="op" id="6544144">.</span><span class="ident" id="6544145">RunParallel</span><span class="op" id="6544156">(</span><span class="keyword" id="6544157">func</span><span class="op" id="6544161">(</span><span class="ident" id="6544162">pb</span>&nbsp;<span class="op" id="6544165">*</span><span class="ident" id="6544166">testing</span><span class="op" id="6544173">.</span><span class="ident" id="6544174">PB</span><span class="op" id="6544176">)</span>&nbsp;<span class="op" id="6544178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544182">r</span><span class="op" id="6544183">,</span>&nbsp;<span class="ident" id="6544185">w</span><span class="op" id="6544186">,</span>&nbsp;<span class="ident" id="6544188">err</span>&nbsp;<span class="op" id="6544192">:=</span>&nbsp;<span class="ident" id="6544195">pipe</span><span class="op" id="6544199">(</span><span class="op" id="6544200">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544204">if</span>&nbsp;<span class="ident" id="6544207">err</span>&nbsp;<span class="op" id="6544211">!=</span>&nbsp;<span class="builtintype" id="6544214">nil</span>&nbsp;<span class="op" id="6544218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544223">b</span><span class="op" id="6544224">.</span><span class="ident" id="6544225">Fatal</span><span class="op" id="6544230">(</span><span class="string" id="6544231">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="6544248">,</span>&nbsp;<span class="ident" id="6544250">err</span><span class="op" id="6544253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544261">v</span>&nbsp;<span class="op" id="6544263">:=</span>&nbsp;<span class="ident" id="6544266">ctor</span><span class="op" id="6544270">(</span><span class="op" id="6544271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544275">enc</span>&nbsp;<span class="op" id="6544279">:=</span>&nbsp;<span class="ident" id="6544282">NewEncoder</span><span class="op" id="6544292">(</span><span class="ident" id="6544293">w</span><span class="op" id="6544294">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544298">dec</span>&nbsp;<span class="op" id="6544302">:=</span>&nbsp;<span class="ident" id="6544305">NewDecoder</span><span class="op" id="6544315">(</span><span class="ident" id="6544316">r</span><span class="op" id="6544317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544321">for</span>&nbsp;<span class="ident" id="6544325">pb</span><span class="op" id="6544327">.</span><span class="ident" id="6544328">Next</span><span class="op" id="6544332">(</span><span class="op" id="6544333">)</span>&nbsp;<span class="op" id="6544335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544340">if</span>&nbsp;<span class="ident" id="6544343">err</span>&nbsp;<span class="op" id="6544347">:=</span>&nbsp;<span class="ident" id="6544350">enc</span><span class="op" id="6544353">.</span><span class="ident" id="6544354">Encode</span><span class="op" id="6544360">(</span><span class="ident" id="6544361">v</span><span class="op" id="6544362">)</span><span class="op" id="6544363">;</span>&nbsp;<span class="ident" id="6544365">err</span>&nbsp;<span class="op" id="6544369">!=</span>&nbsp;<span class="builtintype" id="6544372">nil</span>&nbsp;<span class="op" id="6544376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544382">b</span><span class="op" id="6544383">.</span><span class="ident" id="6544384">Fatal</span><span class="op" id="6544389">(</span><span class="string" id="6544390">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6544405">,</span>&nbsp;<span class="ident" id="6544407">err</span><span class="op" id="6544410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544415">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544420">if</span>&nbsp;<span class="ident" id="6544423">err</span>&nbsp;<span class="op" id="6544427">:=</span>&nbsp;<span class="ident" id="6544430">dec</span><span class="op" id="6544433">.</span><span class="ident" id="6544434">Decode</span><span class="op" id="6544440">(</span><span class="ident" id="6544441">v</span><span class="op" id="6544442">)</span><span class="op" id="6544443">;</span>&nbsp;<span class="ident" id="6544445">err</span>&nbsp;<span class="op" id="6544449">!=</span>&nbsp;<span class="builtintype" id="6544452">nil</span>&nbsp;<span class="op" id="6544456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544462">b</span><span class="op" id="6544463">.</span><span class="ident" id="6544464">Fatal</span><span class="op" id="6544469">(</span><span class="string" id="6544470">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6544485">,</span>&nbsp;<span class="ident" id="6544487">err</span><span class="op" id="6544490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544502">}</span><span class="op" id="6544503">)</span><br>
<span class="lineno">40</span><span class="op" id="6544505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6544508">func</span>&nbsp;<span class="ident" id="6544513">BenchmarkEndToEndPipe</span><span class="op" id="6544534">(</span><span class="ident" id="6544535">b</span>&nbsp;<span class="op" id="6544537">*</span><span class="ident" id="6544538">testing</span><span class="op" id="6544545">.</span><span class="ident" id="6544546">B</span><span class="op" id="6544547">)</span>&nbsp;<span class="op" id="6544549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544552">benchmarkEndToEnd</span><span class="op" id="6544569">(</span><span class="ident" id="6544570">b</span><span class="op" id="6544571">,</span>&nbsp;<span class="keyword" id="6544573">func</span><span class="op" id="6544577">(</span><span class="op" id="6544578">)</span>&nbsp;<span class="keyword" id="6544580">interface</span><span class="op" id="6544589">{</span><span class="op" id="6544590">}</span>&nbsp;<span class="op" id="6544592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544596">return</span>&nbsp;<span class="op" id="6544603">&amp;</span><span class="ident" id="6544604">Bench</span><span class="op" id="6544609">{</span><span class="num" id="6544610">7</span><span class="op" id="6544611">,</span>&nbsp;<span class="num" id="6544613">3.2</span><span class="op" id="6544616">,</span>&nbsp;<span class="string" id="6544618">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6544635">,</span>&nbsp;<span class="ident" id="6544637">bytes</span><span class="op" id="6544642">.</span><span class="ident" id="6544643">Repeat</span><span class="op" id="6544649">(</span><span class="op" id="6544650">[</span><span class="op" id="6544651">]</span><span class="builtintype" id="6544652">byte</span><span class="op" id="6544656">(</span><span class="string" id="6544657">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6544675">)</span><span class="op" id="6544676">,</span>&nbsp;<span class="num" id="6544678">100</span><span class="op" id="6544681">)</span><span class="op" id="6544682">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544685">}</span><span class="op" id="6544686">,</span>&nbsp;<span class="keyword" id="6544688">func</span><span class="op" id="6544692">(</span><span class="op" id="6544693">)</span>&nbsp;<span class="op" id="6544695">(</span><span class="ident" id="6544696">r</span>&nbsp;<span class="ident" id="6544698">io</span><span class="op" id="6544700">.</span><span class="ident" id="6544701">Reader</span><span class="op" id="6544707">,</span>&nbsp;<span class="ident" id="6544709">w</span>&nbsp;<span class="ident" id="6544711">io</span><span class="op" id="6544713">.</span><span class="ident" id="6544714">Writer</span><span class="op" id="6544720">,</span>&nbsp;<span class="ident" id="6544722">err</span>&nbsp;<span class="builtintype" id="6544726">error</span><span class="op" id="6544731">)</span>&nbsp;<span class="op" id="6544733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544737">r</span><span class="op" id="6544738">,</span>&nbsp;<span class="ident" id="6544740">w</span><span class="op" id="6544741">,</span>&nbsp;<span class="ident" id="6544743">err</span>&nbsp;<span class="op" id="6544747">=</span>&nbsp;<span class="ident" id="6544749">os</span><span class="op" id="6544751">.</span><span class="ident" id="6544752">Pipe</span><span class="op" id="6544756">(</span><span class="op" id="6544757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544761">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544769">}</span><span class="op" id="6544770">)</span><br>
<span class="lineno"></span><span class="op" id="6544772">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6544775">func</span>&nbsp;<span class="ident" id="6544780">BenchmarkEndToEndByteBuffer</span><span class="op" id="6544807">(</span><span class="ident" id="6544808">b</span>&nbsp;<span class="op" id="6544810">*</span><span class="ident" id="6544811">testing</span><span class="op" id="6544818">.</span><span class="ident" id="6544819">B</span><span class="op" id="6544820">)</span>&nbsp;<span class="op" id="6544822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6544825">benchmarkEndToEnd</span><span class="op" id="6544842">(</span><span class="ident" id="6544843">b</span><span class="op" id="6544844">,</span>&nbsp;<span class="keyword" id="6544846">func</span><span class="op" id="6544850">(</span><span class="op" id="6544851">)</span>&nbsp;<span class="keyword" id="6544853">interface</span><span class="op" id="6544862">{</span><span class="op" id="6544863">}</span>&nbsp;<span class="op" id="6544865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6544869">return</span>&nbsp;<span class="op" id="6544876">&amp;</span><span class="ident" id="6544877">Bench</span><span class="op" id="6544882">{</span><span class="num" id="6544883">7</span><span class="op" id="6544884">,</span>&nbsp;<span class="num" id="6544886">3.2</span><span class="op" id="6544889">,</span>&nbsp;<span class="string" id="6544891">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6544908">,</span>&nbsp;<span class="ident" id="6544910">bytes</span><span class="op" id="6544915">.</span><span class="ident" id="6544916">Repeat</span><span class="op" id="6544922">(</span><span class="op" id="6544923">[</span><span class="op" id="6544924">]</span><span class="builtintype" id="6544925">byte</span><span class="op" id="6544929">(</span><span class="string" id="6544930">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6544948">)</span><span class="op" id="6544949">,</span>&nbsp;<span class="num" id="6544951">100</span><span class="op" id="6544954">)</span><span class="op" id="6544955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6544958">}</span><span class="op" id="6544959">,</span>&nbsp;<span class="keyword" id="6544961">func</span><span class="op" id="6544965">(</span><span class="op" id="6544966">)</span>&nbsp;<span class="op" id="6544968">(</span><span class="ident" id="6544969">r</span>&nbsp;<span class="ident" id="6544971">io</span><span class="op" id="6544973">.</span><span class="ident" id="6544974">Reader</span><span class="op" id="6544980">,</span>&nbsp;<span class="ident" id="6544982">w</span>&nbsp;<span class="ident" id="6544984">io</span><span class="op" id="6544986">.</span><span class="ident" id="6544987">Writer</span><span class="op" id="6544993">,</span>&nbsp;<span class="ident" id="6544995">err</span>&nbsp;<span class="builtintype" id="6544999">error</span><span class="op" id="6545004">)</span>&nbsp;<span class="op" id="6545006">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545010">var</span>&nbsp;<span class="ident" id="6545014">buf</span>&nbsp;<span class="ident" id="6545018">bytes</span><span class="op" id="6545023">.</span><span class="ident" id="6545024">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545033">return</span>&nbsp;<span class="op" id="6545040">&amp;</span><span class="ident" id="6545041">buf</span><span class="op" id="6545044">,</span>&nbsp;<span class="op" id="6545046">&amp;</span><span class="ident" id="6545047">buf</span><span class="op" id="6545050">,</span>&nbsp;<span class="builtintype" id="6545052">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545057">}</span><span class="op" id="6545058">)</span><br>
<span class="lineno"></span><span class="op" id="6545060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6545063">func</span>&nbsp;<span class="ident" id="6545068">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="6545100">(</span><span class="ident" id="6545101">b</span>&nbsp;<span class="op" id="6545103">*</span><span class="ident" id="6545104">testing</span><span class="op" id="6545111">.</span><span class="ident" id="6545112">B</span><span class="op" id="6545113">)</span>&nbsp;<span class="op" id="6545115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545118">benchmarkEndToEnd</span><span class="op" id="6545135">(</span><span class="ident" id="6545136">b</span><span class="op" id="6545137">,</span>&nbsp;<span class="keyword" id="6545139">func</span><span class="op" id="6545143">(</span><span class="op" id="6545144">)</span>&nbsp;<span class="keyword" id="6545146">interface</span><span class="op" id="6545155">{</span><span class="op" id="6545156">}</span>&nbsp;<span class="op" id="6545158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545162">v</span>&nbsp;<span class="op" id="6545164">:=</span>&nbsp;<span class="op" id="6545167">&amp;</span><span class="ident" id="6545168">Bench</span><span class="op" id="6545173">{</span><span class="num" id="6545174">7</span><span class="op" id="6545175">,</span>&nbsp;<span class="num" id="6545177">3.2</span><span class="op" id="6545180">,</span>&nbsp;<span class="string" id="6545182">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6545199">,</span>&nbsp;<span class="builtintype" id="6545201">nil</span><span class="op" id="6545204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545208">Register</span><span class="op" id="6545216">(</span><span class="ident" id="6545217">v</span><span class="op" id="6545218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545222">arr</span>&nbsp;<span class="op" id="6545226">:=</span>&nbsp;<span class="builtinfunc" id="6545229">make</span><span class="op" id="6545233">(</span><span class="op" id="6545234">[</span><span class="op" id="6545235">]</span><span class="keyword" id="6545236">interface</span><span class="op" id="6545245">{</span><span class="op" id="6545246">}</span><span class="op" id="6545247">,</span>&nbsp;<span class="num" id="6545249">100</span><span class="op" id="6545252">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545256">for</span>&nbsp;<span class="ident" id="6545260">i</span>&nbsp;<span class="op" id="6545262">:=</span>&nbsp;<span class="keyword" id="6545265">range</span>&nbsp;<span class="ident" id="6545271">arr</span>&nbsp;<span class="op" id="6545275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545280">arr</span><span class="op" id="6545283">[</span><span class="ident" id="6545284">i</span><span class="op" id="6545285">]</span>&nbsp;<span class="op" id="6545287">=</span>&nbsp;<span class="ident" id="6545289">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545297">return</span>&nbsp;<span class="op" id="6545304">&amp;</span><span class="ident" id="6545305">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545310">}</span><span class="op" id="6545311">,</span>&nbsp;<span class="keyword" id="6545313">func</span><span class="op" id="6545317">(</span><span class="op" id="6545318">)</span>&nbsp;<span class="op" id="6545320">(</span><span class="ident" id="6545321">r</span>&nbsp;<span class="ident" id="6545323">io</span><span class="op" id="6545325">.</span><span class="ident" id="6545326">Reader</span><span class="op" id="6545332">,</span>&nbsp;<span class="ident" id="6545334">w</span>&nbsp;<span class="ident" id="6545336">io</span><span class="op" id="6545338">.</span><span class="ident" id="6545339">Writer</span><span class="op" id="6545345">,</span>&nbsp;<span class="ident" id="6545347">err</span>&nbsp;<span class="builtintype" id="6545351">error</span><span class="op" id="6545356">)</span>&nbsp;<span class="op" id="6545358">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545362">var</span>&nbsp;<span class="ident" id="6545366">buf</span>&nbsp;<span class="ident" id="6545370">bytes</span><span class="op" id="6545375">.</span><span class="ident" id="6545376">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545385">return</span>&nbsp;<span class="op" id="6545392">&amp;</span><span class="ident" id="6545393">buf</span><span class="op" id="6545396">,</span>&nbsp;<span class="op" id="6545398">&amp;</span><span class="ident" id="6545399">buf</span><span class="op" id="6545402">,</span>&nbsp;<span class="builtintype" id="6545404">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545409">}</span><span class="op" id="6545410">)</span><br>
<span class="lineno"></span><span class="op" id="6545412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6545415">func</span>&nbsp;<span class="ident" id="6545420">TestCountEncodeMallocs</span><span class="op" id="6545442">(</span><span class="ident" id="6545443">t</span>&nbsp;<span class="op" id="6545445">*</span><span class="ident" id="6545446">testing</span><span class="op" id="6545453">.</span><span class="ident" id="6545454">T</span><span class="op" id="6545455">)</span>&nbsp;<span class="op" id="6545457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545460">if</span>&nbsp;<span class="ident" id="6545463">testing</span><span class="op" id="6545470">.</span><span class="ident" id="6545471">Short</span><span class="op" id="6545476">(</span><span class="op" id="6545477">)</span>&nbsp;<span class="op" id="6545479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545483">t</span><span class="op" id="6545484">.</span><span class="ident" id="6545485">Skip</span><span class="op" id="6545489">(</span><span class="string" id="6545490">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6545527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545533">if</span>&nbsp;<span class="ident" id="6545536">runtime</span><span class="op" id="6545543">.</span><span class="ident" id="6545544">GOMAXPROCS</span><span class="op" id="6545554">(</span><span class="num" id="6545555">0</span><span class="op" id="6545556">)</span>&nbsp;<span class="op" id="6545558">&gt;</span>&nbsp;<span class="num" id="6545560">1</span>&nbsp;<span class="op" id="6545562">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545566">t</span><span class="op" id="6545567">.</span><span class="ident" id="6545568">Skip</span><span class="op" id="6545572">(</span><span class="string" id="6545573">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6545597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545604">const</span>&nbsp;<span class="ident" id="6545610">N</span>&nbsp;<span class="op" id="6545612">=</span>&nbsp;<span class="num" id="6545614">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545621">var</span>&nbsp;<span class="ident" id="6545625">buf</span>&nbsp;<span class="ident" id="6545629">bytes</span><span class="op" id="6545634">.</span><span class="ident" id="6545635">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545643">enc</span>&nbsp;<span class="op" id="6545647">:=</span>&nbsp;<span class="ident" id="6545650">NewEncoder</span><span class="op" id="6545660">(</span><span class="op" id="6545661">&amp;</span><span class="ident" id="6545662">buf</span><span class="op" id="6545665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545668">bench</span>&nbsp;<span class="op" id="6545674">:=</span>&nbsp;<span class="op" id="6545677">&amp;</span><span class="ident" id="6545678">Bench</span><span class="op" id="6545683">{</span><span class="num" id="6545684">7</span><span class="op" id="6545685">,</span>&nbsp;<span class="num" id="6545687">3.2</span><span class="op" id="6545690">,</span>&nbsp;<span class="string" id="6545692">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6545709">,</span>&nbsp;<span class="op" id="6545711">[</span><span class="op" id="6545712">]</span><span class="builtintype" id="6545713">byte</span><span class="op" id="6545717">(</span><span class="string" id="6545718">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6545736">)</span><span class="op" id="6545737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545741">allocs</span>&nbsp;<span class="op" id="6545748">:=</span>&nbsp;<span class="ident" id="6545751">testing</span><span class="op" id="6545758">.</span><span class="ident" id="6545759">AllocsPerRun</span><span class="op" id="6545771">(</span><span class="ident" id="6545772">N</span><span class="op" id="6545773">,</span>&nbsp;<span class="keyword" id="6545775">func</span><span class="op" id="6545779">(</span><span class="op" id="6545780">)</span>&nbsp;<span class="op" id="6545782">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545786">err</span>&nbsp;<span class="op" id="6545790">:=</span>&nbsp;<span class="ident" id="6545793">enc</span><span class="op" id="6545796">.</span><span class="ident" id="6545797">Encode</span><span class="op" id="6545803">(</span><span class="ident" id="6545804">bench</span><span class="op" id="6545809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545813">if</span>&nbsp;<span class="ident" id="6545816">err</span>&nbsp;<span class="op" id="6545820">!=</span>&nbsp;<span class="builtintype" id="6545823">nil</span>&nbsp;<span class="op" id="6545827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545832">t</span><span class="op" id="6545833">.</span><span class="ident" id="6545834">Fatal</span><span class="op" id="6545839">(</span><span class="string" id="6545840">&#34;encode:&#34;</span><span class="op" id="6545849">,</span>&nbsp;<span class="ident" id="6545851">err</span><span class="op" id="6545854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545861">}</span><span class="op" id="6545862">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6545865">if</span>&nbsp;<span class="ident" id="6545868">allocs</span>&nbsp;<span class="op" id="6545875">!=</span>&nbsp;<span class="num" id="6545878">0</span>&nbsp;<span class="op" id="6545880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6545884">t</span><span class="op" id="6545885">.</span><span class="ident" id="6545886">Fatalf</span><span class="op" id="6545892">(</span><span class="string" id="6545893">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="6545943">,</span>&nbsp;<span class="ident" id="6545945">allocs</span><span class="op" id="6545951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6545954">}</span><br>
<span class="lineno"></span><span class="op" id="6545956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6545959">func</span>&nbsp;<span class="ident" id="6545964">TestCountDecodeMallocs</span><span class="op" id="6545986">(</span><span class="ident" id="6545987">t</span>&nbsp;<span class="op" id="6545989">*</span><span class="ident" id="6545990">testing</span><span class="op" id="6545997">.</span><span class="ident" id="6545998">T</span><span class="op" id="6545999">)</span>&nbsp;<span class="op" id="6546001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546004">if</span>&nbsp;<span class="ident" id="6546007">testing</span><span class="op" id="6546014">.</span><span class="ident" id="6546015">Short</span><span class="op" id="6546020">(</span><span class="op" id="6546021">)</span>&nbsp;<span class="op" id="6546023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546027">t</span><span class="op" id="6546028">.</span><span class="ident" id="6546029">Skip</span><span class="op" id="6546033">(</span><span class="string" id="6546034">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6546071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546077">if</span>&nbsp;<span class="ident" id="6546080">runtime</span><span class="op" id="6546087">.</span><span class="ident" id="6546088">GOMAXPROCS</span><span class="op" id="6546098">(</span><span class="num" id="6546099">0</span><span class="op" id="6546100">)</span>&nbsp;<span class="op" id="6546102">&gt;</span>&nbsp;<span class="num" id="6546104">1</span>&nbsp;<span class="op" id="6546106">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546110">t</span><span class="op" id="6546111">.</span><span class="ident" id="6546112">Skip</span><span class="op" id="6546116">(</span><span class="string" id="6546117">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6546141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546148">const</span>&nbsp;<span class="ident" id="6546154">N</span>&nbsp;<span class="op" id="6546156">=</span>&nbsp;<span class="num" id="6546158">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546165">var</span>&nbsp;<span class="ident" id="6546169">buf</span>&nbsp;<span class="ident" id="6546173">bytes</span><span class="op" id="6546178">.</span><span class="ident" id="6546179">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546187">enc</span>&nbsp;<span class="op" id="6546191">:=</span>&nbsp;<span class="ident" id="6546194">NewEncoder</span><span class="op" id="6546204">(</span><span class="op" id="6546205">&amp;</span><span class="ident" id="6546206">buf</span><span class="op" id="6546209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546212">bench</span>&nbsp;<span class="op" id="6546218">:=</span>&nbsp;<span class="op" id="6546221">&amp;</span><span class="ident" id="6546222">Bench</span><span class="op" id="6546227">{</span><span class="num" id="6546228">7</span><span class="op" id="6546229">,</span>&nbsp;<span class="num" id="6546231">3.2</span><span class="op" id="6546234">,</span>&nbsp;<span class="string" id="6546236">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6546253">,</span>&nbsp;<span class="op" id="6546255">[</span><span class="op" id="6546256">]</span><span class="builtintype" id="6546257">byte</span><span class="op" id="6546261">(</span><span class="string" id="6546262">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6546280">)</span><span class="op" id="6546281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6546285">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546327">testing</span><span class="op" id="6546334">.</span><span class="ident" id="6546335">AllocsPerRun</span><span class="op" id="6546347">(</span><span class="ident" id="6546348">N</span><span class="op" id="6546349">,</span>&nbsp;<span class="keyword" id="6546351">func</span><span class="op" id="6546355">(</span><span class="op" id="6546356">)</span>&nbsp;<span class="op" id="6546358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546362">err</span>&nbsp;<span class="op" id="6546366">:=</span>&nbsp;<span class="ident" id="6546369">enc</span><span class="op" id="6546372">.</span><span class="ident" id="6546373">Encode</span><span class="op" id="6546379">(</span><span class="ident" id="6546380">bench</span><span class="op" id="6546385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546389">if</span>&nbsp;<span class="ident" id="6546392">err</span>&nbsp;<span class="op" id="6546396">!=</span>&nbsp;<span class="builtintype" id="6546399">nil</span>&nbsp;<span class="op" id="6546403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546408">t</span><span class="op" id="6546409">.</span><span class="ident" id="6546410">Fatal</span><span class="op" id="6546415">(</span><span class="string" id="6546416">&#34;encode:&#34;</span><span class="op" id="6546425">,</span>&nbsp;<span class="ident" id="6546427">err</span><span class="op" id="6546430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546434">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546437">}</span><span class="op" id="6546438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546442">dec</span>&nbsp;<span class="op" id="6546446">:=</span>&nbsp;<span class="ident" id="6546449">NewDecoder</span><span class="op" id="6546459">(</span><span class="op" id="6546460">&amp;</span><span class="ident" id="6546461">buf</span><span class="op" id="6546464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546467">allocs</span>&nbsp;<span class="op" id="6546474">:=</span>&nbsp;<span class="ident" id="6546477">testing</span><span class="op" id="6546484">.</span><span class="ident" id="6546485">AllocsPerRun</span><span class="op" id="6546497">(</span><span class="ident" id="6546498">N</span><span class="op" id="6546499">,</span>&nbsp;<span class="keyword" id="6546501">func</span><span class="op" id="6546505">(</span><span class="op" id="6546506">)</span>&nbsp;<span class="op" id="6546508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546512">*</span><span class="ident" id="6546513">bench</span>&nbsp;<span class="op" id="6546519">=</span>&nbsp;<span class="ident" id="6546521">Bench</span><span class="op" id="6546526">{</span><span class="op" id="6546527">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546531">err</span>&nbsp;<span class="op" id="6546535">:=</span>&nbsp;<span class="ident" id="6546538">dec</span><span class="op" id="6546541">.</span><span class="ident" id="6546542">Decode</span><span class="op" id="6546548">(</span><span class="op" id="6546549">&amp;</span><span class="ident" id="6546550">bench</span><span class="op" id="6546555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546559">if</span>&nbsp;<span class="ident" id="6546562">err</span>&nbsp;<span class="op" id="6546566">!=</span>&nbsp;<span class="builtintype" id="6546569">nil</span>&nbsp;<span class="op" id="6546573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546578">t</span><span class="op" id="6546579">.</span><span class="ident" id="6546580">Fatal</span><span class="op" id="6546585">(</span><span class="string" id="6546586">&#34;decode:&#34;</span><span class="op" id="6546595">,</span>&nbsp;<span class="ident" id="6546597">err</span><span class="op" id="6546600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546607">}</span><span class="op" id="6546608">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546611">if</span>&nbsp;<span class="ident" id="6546614">allocs</span>&nbsp;<span class="op" id="6546621">!=</span>&nbsp;<span class="num" id="6546624">4</span>&nbsp;<span class="op" id="6546626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546630">t</span><span class="op" id="6546631">.</span><span class="ident" id="6546632">Fatalf</span><span class="op" id="6546638">(</span><span class="string" id="6546639">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="6546689">,</span>&nbsp;<span class="ident" id="6546691">allocs</span><span class="op" id="6546697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546700">}</span><br>
<span class="lineno"></span><span class="op" id="6546702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6546705">func</span>&nbsp;<span class="ident" id="6546710">BenchmarkEncodeComplex128Slice</span><span class="op" id="6546740">(</span><span class="ident" id="6546741">b</span>&nbsp;<span class="op" id="6546743">*</span><span class="ident" id="6546744">testing</span><span class="op" id="6546751">.</span><span class="ident" id="6546752">B</span><span class="op" id="6546753">)</span>&nbsp;<span class="op" id="6546755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546758">var</span>&nbsp;<span class="ident" id="6546762">buf</span>&nbsp;<span class="ident" id="6546766">bytes</span><span class="op" id="6546771">.</span><span class="ident" id="6546772">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546780">enc</span>&nbsp;<span class="op" id="6546784">:=</span>&nbsp;<span class="ident" id="6546787">NewEncoder</span><span class="op" id="6546797">(</span><span class="op" id="6546798">&amp;</span><span class="ident" id="6546799">buf</span><span class="op" id="6546802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546805">a</span>&nbsp;<span class="op" id="6546807">:=</span>&nbsp;<span class="builtinfunc" id="6546810">make</span><span class="op" id="6546814">(</span><span class="op" id="6546815">[</span><span class="op" id="6546816">]</span><span class="builtintype" id="6546817">complex128</span><span class="op" id="6546827">,</span>&nbsp;<span class="num" id="6546829">1000</span><span class="op" id="6546833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546836">for</span>&nbsp;<span class="ident" id="6546840">i</span>&nbsp;<span class="op" id="6546842">:=</span>&nbsp;<span class="keyword" id="6546845">range</span>&nbsp;<span class="ident" id="6546851">a</span>&nbsp;<span class="op" id="6546853">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546857">a</span><span class="op" id="6546858">[</span><span class="ident" id="6546859">i</span><span class="op" id="6546860">]</span>&nbsp;<span class="op" id="6546862">=</span>&nbsp;<span class="num" id="6546864">1.2</span>&nbsp;<span class="op" id="6546868">+</span>&nbsp;<span class="num" id="6546870">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546879">b</span><span class="op" id="6546880">.</span><span class="ident" id="6546881">ResetTimer</span><span class="op" id="6546891">(</span><span class="op" id="6546892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546895">for</span>&nbsp;<span class="ident" id="6546899">i</span>&nbsp;<span class="op" id="6546901">:=</span>&nbsp;<span class="num" id="6546904">0</span><span class="op" id="6546905">;</span>&nbsp;<span class="ident" id="6546907">i</span>&nbsp;<span class="op" id="6546909">&lt;</span>&nbsp;<span class="ident" id="6546911">b</span><span class="op" id="6546912">.</span><span class="ident" id="6546913">N</span><span class="op" id="6546914">;</span>&nbsp;<span class="ident" id="6546916">i</span><span class="op" id="6546917">++</span>&nbsp;<span class="op" id="6546920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546924">buf</span><span class="op" id="6546927">.</span><span class="ident" id="6546928">Reset</span><span class="op" id="6546933">(</span><span class="op" id="6546934">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546938">err</span>&nbsp;<span class="op" id="6546942">:=</span>&nbsp;<span class="ident" id="6546945">enc</span><span class="op" id="6546948">.</span><span class="ident" id="6546949">Encode</span><span class="op" id="6546955">(</span><span class="ident" id="6546956">a</span><span class="op" id="6546957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6546961">if</span>&nbsp;<span class="ident" id="6546964">err</span>&nbsp;<span class="op" id="6546968">!=</span>&nbsp;<span class="builtintype" id="6546971">nil</span>&nbsp;<span class="op" id="6546975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6546980">b</span><span class="op" id="6546981">.</span><span class="ident" id="6546982">Fatal</span><span class="op" id="6546987">(</span><span class="ident" id="6546988">err</span><span class="op" id="6546991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6546998">}</span><br>
<span class="lineno">150</span><span class="op" id="6547000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6547003">func</span>&nbsp;<span class="ident" id="6547008">BenchmarkEncodeFloat64Slice</span><span class="op" id="6547035">(</span><span class="ident" id="6547036">b</span>&nbsp;<span class="op" id="6547038">*</span><span class="ident" id="6547039">testing</span><span class="op" id="6547046">.</span><span class="ident" id="6547047">B</span><span class="op" id="6547048">)</span>&nbsp;<span class="op" id="6547050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547053">var</span>&nbsp;<span class="ident" id="6547057">buf</span>&nbsp;<span class="ident" id="6547061">bytes</span><span class="op" id="6547066">.</span><span class="ident" id="6547067">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547075">enc</span>&nbsp;<span class="op" id="6547079">:=</span>&nbsp;<span class="ident" id="6547082">NewEncoder</span><span class="op" id="6547092">(</span><span class="op" id="6547093">&amp;</span><span class="ident" id="6547094">buf</span><span class="op" id="6547097">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547100">a</span>&nbsp;<span class="op" id="6547102">:=</span>&nbsp;<span class="builtinfunc" id="6547105">make</span><span class="op" id="6547109">(</span><span class="op" id="6547110">[</span><span class="op" id="6547111">]</span><span class="builtintype" id="6547112">float64</span><span class="op" id="6547119">,</span>&nbsp;<span class="num" id="6547121">1000</span><span class="op" id="6547125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547128">for</span>&nbsp;<span class="ident" id="6547132">i</span>&nbsp;<span class="op" id="6547134">:=</span>&nbsp;<span class="keyword" id="6547137">range</span>&nbsp;<span class="ident" id="6547143">a</span>&nbsp;<span class="op" id="6547145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547149">a</span><span class="op" id="6547150">[</span><span class="ident" id="6547151">i</span><span class="op" id="6547152">]</span>&nbsp;<span class="op" id="6547154">=</span>&nbsp;<span class="num" id="6547156">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547167">b</span><span class="op" id="6547168">.</span><span class="ident" id="6547169">ResetTimer</span><span class="op" id="6547179">(</span><span class="op" id="6547180">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547183">for</span>&nbsp;<span class="ident" id="6547187">i</span>&nbsp;<span class="op" id="6547189">:=</span>&nbsp;<span class="num" id="6547192">0</span><span class="op" id="6547193">;</span>&nbsp;<span class="ident" id="6547195">i</span>&nbsp;<span class="op" id="6547197">&lt;</span>&nbsp;<span class="ident" id="6547199">b</span><span class="op" id="6547200">.</span><span class="ident" id="6547201">N</span><span class="op" id="6547202">;</span>&nbsp;<span class="ident" id="6547204">i</span><span class="op" id="6547205">++</span>&nbsp;<span class="op" id="6547208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547212">buf</span><span class="op" id="6547215">.</span><span class="ident" id="6547216">Reset</span><span class="op" id="6547221">(</span><span class="op" id="6547222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547226">err</span>&nbsp;<span class="op" id="6547230">:=</span>&nbsp;<span class="ident" id="6547233">enc</span><span class="op" id="6547236">.</span><span class="ident" id="6547237">Encode</span><span class="op" id="6547243">(</span><span class="ident" id="6547244">a</span><span class="op" id="6547245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547249">if</span>&nbsp;<span class="ident" id="6547252">err</span>&nbsp;<span class="op" id="6547256">!=</span>&nbsp;<span class="builtintype" id="6547259">nil</span>&nbsp;<span class="op" id="6547263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547268">b</span><span class="op" id="6547269">.</span><span class="ident" id="6547270">Fatal</span><span class="op" id="6547275">(</span><span class="ident" id="6547276">err</span><span class="op" id="6547279">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547286">}</span><br>
<span class="lineno"></span><span class="op" id="6547288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6547291">func</span>&nbsp;<span class="ident" id="6547296">BenchmarkEncodeInt32Slice</span><span class="op" id="6547321">(</span><span class="ident" id="6547322">b</span>&nbsp;<span class="op" id="6547324">*</span><span class="ident" id="6547325">testing</span><span class="op" id="6547332">.</span><span class="ident" id="6547333">B</span><span class="op" id="6547334">)</span>&nbsp;<span class="op" id="6547336">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547339">var</span>&nbsp;<span class="ident" id="6547343">buf</span>&nbsp;<span class="ident" id="6547347">bytes</span><span class="op" id="6547352">.</span><span class="ident" id="6547353">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547361">enc</span>&nbsp;<span class="op" id="6547365">:=</span>&nbsp;<span class="ident" id="6547368">NewEncoder</span><span class="op" id="6547378">(</span><span class="op" id="6547379">&amp;</span><span class="ident" id="6547380">buf</span><span class="op" id="6547383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547386">a</span>&nbsp;<span class="op" id="6547388">:=</span>&nbsp;<span class="builtinfunc" id="6547391">make</span><span class="op" id="6547395">(</span><span class="op" id="6547396">[</span><span class="op" id="6547397">]</span><span class="builtintype" id="6547398">int32</span><span class="op" id="6547403">,</span>&nbsp;<span class="num" id="6547405">1000</span><span class="op" id="6547409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547412">for</span>&nbsp;<span class="ident" id="6547416">i</span>&nbsp;<span class="op" id="6547418">:=</span>&nbsp;<span class="keyword" id="6547421">range</span>&nbsp;<span class="ident" id="6547427">a</span>&nbsp;<span class="op" id="6547429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547433">a</span><span class="op" id="6547434">[</span><span class="ident" id="6547435">i</span><span class="op" id="6547436">]</span>&nbsp;<span class="op" id="6547438">=</span>&nbsp;<span class="num" id="6547440">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547449">b</span><span class="op" id="6547450">.</span><span class="ident" id="6547451">ResetTimer</span><span class="op" id="6547461">(</span><span class="op" id="6547462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547465">for</span>&nbsp;<span class="ident" id="6547469">i</span>&nbsp;<span class="op" id="6547471">:=</span>&nbsp;<span class="num" id="6547474">0</span><span class="op" id="6547475">;</span>&nbsp;<span class="ident" id="6547477">i</span>&nbsp;<span class="op" id="6547479">&lt;</span>&nbsp;<span class="ident" id="6547481">b</span><span class="op" id="6547482">.</span><span class="ident" id="6547483">N</span><span class="op" id="6547484">;</span>&nbsp;<span class="ident" id="6547486">i</span><span class="op" id="6547487">++</span>&nbsp;<span class="op" id="6547490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547494">buf</span><span class="op" id="6547497">.</span><span class="ident" id="6547498">Reset</span><span class="op" id="6547503">(</span><span class="op" id="6547504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547508">err</span>&nbsp;<span class="op" id="6547512">:=</span>&nbsp;<span class="ident" id="6547515">enc</span><span class="op" id="6547518">.</span><span class="ident" id="6547519">Encode</span><span class="op" id="6547525">(</span><span class="ident" id="6547526">a</span><span class="op" id="6547527">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547531">if</span>&nbsp;<span class="ident" id="6547534">err</span>&nbsp;<span class="op" id="6547538">!=</span>&nbsp;<span class="builtintype" id="6547541">nil</span>&nbsp;<span class="op" id="6547545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547550">b</span><span class="op" id="6547551">.</span><span class="ident" id="6547552">Fatal</span><span class="op" id="6547557">(</span><span class="ident" id="6547558">err</span><span class="op" id="6547561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547568">}</span><br>
<span class="lineno"></span><span class="op" id="6547570">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="6547573">func</span>&nbsp;<span class="ident" id="6547578">BenchmarkEncodeStringSlice</span><span class="op" id="6547604">(</span><span class="ident" id="6547605">b</span>&nbsp;<span class="op" id="6547607">*</span><span class="ident" id="6547608">testing</span><span class="op" id="6547615">.</span><span class="ident" id="6547616">B</span><span class="op" id="6547617">)</span>&nbsp;<span class="op" id="6547619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547622">var</span>&nbsp;<span class="ident" id="6547626">buf</span>&nbsp;<span class="ident" id="6547630">bytes</span><span class="op" id="6547635">.</span><span class="ident" id="6547636">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547644">enc</span>&nbsp;<span class="op" id="6547648">:=</span>&nbsp;<span class="ident" id="6547651">NewEncoder</span><span class="op" id="6547661">(</span><span class="op" id="6547662">&amp;</span><span class="ident" id="6547663">buf</span><span class="op" id="6547666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547669">a</span>&nbsp;<span class="op" id="6547671">:=</span>&nbsp;<span class="builtinfunc" id="6547674">make</span><span class="op" id="6547678">(</span><span class="op" id="6547679">[</span><span class="op" id="6547680">]</span><span class="builtintype" id="6547681">string</span><span class="op" id="6547687">,</span>&nbsp;<span class="num" id="6547689">1000</span><span class="op" id="6547693">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547696">for</span>&nbsp;<span class="ident" id="6547700">i</span>&nbsp;<span class="op" id="6547702">:=</span>&nbsp;<span class="keyword" id="6547705">range</span>&nbsp;<span class="ident" id="6547711">a</span>&nbsp;<span class="op" id="6547713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547717">a</span><span class="op" id="6547718">[</span><span class="ident" id="6547719">i</span><span class="op" id="6547720">]</span>&nbsp;<span class="op" id="6547722">=</span>&nbsp;<span class="string" id="6547724">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547746">b</span><span class="op" id="6547747">.</span><span class="ident" id="6547748">ResetTimer</span><span class="op" id="6547758">(</span><span class="op" id="6547759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547762">for</span>&nbsp;<span class="ident" id="6547766">i</span>&nbsp;<span class="op" id="6547768">:=</span>&nbsp;<span class="num" id="6547771">0</span><span class="op" id="6547772">;</span>&nbsp;<span class="ident" id="6547774">i</span>&nbsp;<span class="op" id="6547776">&lt;</span>&nbsp;<span class="ident" id="6547778">b</span><span class="op" id="6547779">.</span><span class="ident" id="6547780">N</span><span class="op" id="6547781">;</span>&nbsp;<span class="ident" id="6547783">i</span><span class="op" id="6547784">++</span>&nbsp;<span class="op" id="6547787">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547791">buf</span><span class="op" id="6547794">.</span><span class="ident" id="6547795">Reset</span><span class="op" id="6547800">(</span><span class="op" id="6547801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547805">err</span>&nbsp;<span class="op" id="6547809">:=</span>&nbsp;<span class="ident" id="6547812">enc</span><span class="op" id="6547815">.</span><span class="ident" id="6547816">Encode</span><span class="op" id="6547822">(</span><span class="ident" id="6547823">a</span><span class="op" id="6547824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6547828">if</span>&nbsp;<span class="ident" id="6547831">err</span>&nbsp;<span class="op" id="6547835">!=</span>&nbsp;<span class="builtintype" id="6547838">nil</span>&nbsp;<span class="op" id="6547842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547847">b</span><span class="op" id="6547848">.</span><span class="ident" id="6547849">Fatal</span><span class="op" id="6547854">(</span><span class="ident" id="6547855">err</span><span class="op" id="6547858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547862">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6547865">}</span><br>
<span class="lineno"></span><span class="op" id="6547867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6547870">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="6547916">type</span>&nbsp;<span class="ident" id="6547921">benchmarkBuf</span>&nbsp;<span class="keyword" id="6547934">struct</span>&nbsp;<span class="op" id="6547941">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547944">offset</span>&nbsp;<span class="builtintype" id="6547951">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6547956">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6547963">[</span><span class="op" id="6547964">]</span><span class="builtintype" id="6547965">byte</span><br>
<span class="lineno"></span><span class="op" id="6547970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6547973">func</span>&nbsp;<span class="op" id="6547978">(</span><span class="ident" id="6547979">b</span>&nbsp;<span class="op" id="6547981">*</span><span class="ident" id="6547982">benchmarkBuf</span><span class="op" id="6547994">)</span>&nbsp;<span class="ident" id="6547996">Read</span><span class="op" id="6548000">(</span><span class="ident" id="6548001">p</span>&nbsp;<span class="op" id="6548003">[</span><span class="op" id="6548004">]</span><span class="builtintype" id="6548005">byte</span><span class="op" id="6548009">)</span>&nbsp;<span class="op" id="6548011">(</span><span class="ident" id="6548012">n</span>&nbsp;<span class="builtintype" id="6548014">int</span><span class="op" id="6548017">,</span>&nbsp;<span class="ident" id="6548019">err</span>&nbsp;<span class="builtintype" id="6548023">error</span><span class="op" id="6548028">)</span>&nbsp;<span class="op" id="6548030">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548033">n</span>&nbsp;<span class="op" id="6548035">=</span>&nbsp;<span class="builtinfunc" id="6548037">copy</span><span class="op" id="6548041">(</span><span class="ident" id="6548042">p</span><span class="op" id="6548043">,</span>&nbsp;<span class="ident" id="6548045">b</span><span class="op" id="6548046">.</span><span class="ident" id="6548047">data</span><span class="op" id="6548051">[</span><span class="ident" id="6548052">b</span><span class="op" id="6548053">.</span><span class="ident" id="6548054">offset</span><span class="op" id="6548060">:</span><span class="op" id="6548061">]</span><span class="op" id="6548062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548065">if</span>&nbsp;<span class="ident" id="6548068">n</span>&nbsp;<span class="op" id="6548070">==</span>&nbsp;<span class="num" id="6548073">0</span>&nbsp;<span class="op" id="6548075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548079">return</span>&nbsp;<span class="num" id="6548086">0</span><span class="op" id="6548087">,</span>&nbsp;<span class="ident" id="6548089">io</span><span class="op" id="6548091">.</span><span class="ident" id="6548092">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548100">b</span><span class="op" id="6548101">.</span><span class="ident" id="6548102">offset</span>&nbsp;<span class="op" id="6548109">+=</span>&nbsp;<span class="ident" id="6548112">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548115">return</span><br>
<span class="lineno"></span><span class="op" id="6548122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6548125">func</span>&nbsp;<span class="op" id="6548130">(</span><span class="ident" id="6548131">b</span>&nbsp;<span class="op" id="6548133">*</span><span class="ident" id="6548134">benchmarkBuf</span><span class="op" id="6548146">)</span>&nbsp;<span class="ident" id="6548148">ReadByte</span><span class="op" id="6548156">(</span><span class="op" id="6548157">)</span>&nbsp;<span class="op" id="6548159">(</span><span class="ident" id="6548160">c</span>&nbsp;<span class="builtintype" id="6548162">byte</span><span class="op" id="6548166">,</span>&nbsp;<span class="ident" id="6548168">err</span>&nbsp;<span class="builtintype" id="6548172">error</span><span class="op" id="6548177">)</span>&nbsp;<span class="op" id="6548179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548182">if</span>&nbsp;<span class="ident" id="6548185">b</span><span class="op" id="6548186">.</span><span class="ident" id="6548187">offset</span>&nbsp;<span class="op" id="6548194">&gt;=</span>&nbsp;<span class="builtinfunc" id="6548197">len</span><span class="op" id="6548200">(</span><span class="ident" id="6548201">b</span><span class="op" id="6548202">.</span><span class="ident" id="6548203">data</span><span class="op" id="6548207">)</span>&nbsp;<span class="op" id="6548209">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548213">return</span>&nbsp;<span class="num" id="6548220">0</span><span class="op" id="6548221">,</span>&nbsp;<span class="ident" id="6548223">io</span><span class="op" id="6548225">.</span><span class="ident" id="6548226">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548234">c</span>&nbsp;<span class="op" id="6548236">=</span>&nbsp;<span class="ident" id="6548238">b</span><span class="op" id="6548239">.</span><span class="ident" id="6548240">data</span><span class="op" id="6548244">[</span><span class="ident" id="6548245">b</span><span class="op" id="6548246">.</span><span class="ident" id="6548247">offset</span><span class="op" id="6548253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548256">b</span><span class="op" id="6548257">.</span><span class="ident" id="6548258">offset</span><span class="op" id="6548264">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548268">return</span><br>
<span class="lineno">225</span><span class="op" id="6548275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6548278">func</span>&nbsp;<span class="op" id="6548283">(</span><span class="ident" id="6548284">b</span>&nbsp;<span class="op" id="6548286">*</span><span class="ident" id="6548287">benchmarkBuf</span><span class="op" id="6548299">)</span>&nbsp;<span class="ident" id="6548301">reset</span><span class="op" id="6548306">(</span><span class="op" id="6548307">)</span>&nbsp;<span class="op" id="6548309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548312">b</span><span class="op" id="6548313">.</span><span class="ident" id="6548314">offset</span>&nbsp;<span class="op" id="6548321">=</span>&nbsp;<span class="num" id="6548323">0</span><br>
<span class="lineno"></span><span class="op" id="6548325">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6548328">func</span>&nbsp;<span class="ident" id="6548333">BenchmarkDecodeComplex128Slice</span><span class="op" id="6548363">(</span><span class="ident" id="6548364">b</span>&nbsp;<span class="op" id="6548366">*</span><span class="ident" id="6548367">testing</span><span class="op" id="6548374">.</span><span class="ident" id="6548375">B</span><span class="op" id="6548376">)</span>&nbsp;<span class="op" id="6548378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548381">var</span>&nbsp;<span class="ident" id="6548385">buf</span>&nbsp;<span class="ident" id="6548389">bytes</span><span class="op" id="6548394">.</span><span class="ident" id="6548395">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548403">enc</span>&nbsp;<span class="op" id="6548407">:=</span>&nbsp;<span class="ident" id="6548410">NewEncoder</span><span class="op" id="6548420">(</span><span class="op" id="6548421">&amp;</span><span class="ident" id="6548422">buf</span><span class="op" id="6548425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548428">a</span>&nbsp;<span class="op" id="6548430">:=</span>&nbsp;<span class="builtinfunc" id="6548433">make</span><span class="op" id="6548437">(</span><span class="op" id="6548438">[</span><span class="op" id="6548439">]</span><span class="builtintype" id="6548440">complex128</span><span class="op" id="6548450">,</span>&nbsp;<span class="num" id="6548452">1000</span><span class="op" id="6548456">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548459">for</span>&nbsp;<span class="ident" id="6548463">i</span>&nbsp;<span class="op" id="6548465">:=</span>&nbsp;<span class="keyword" id="6548468">range</span>&nbsp;<span class="ident" id="6548474">a</span>&nbsp;<span class="op" id="6548476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548480">a</span><span class="op" id="6548481">[</span><span class="ident" id="6548482">i</span><span class="op" id="6548483">]</span>&nbsp;<span class="op" id="6548485">=</span>&nbsp;<span class="num" id="6548487">1.2</span>&nbsp;<span class="op" id="6548491">+</span>&nbsp;<span class="num" id="6548493">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548502">err</span>&nbsp;<span class="op" id="6548506">:=</span>&nbsp;<span class="ident" id="6548509">enc</span><span class="op" id="6548512">.</span><span class="ident" id="6548513">Encode</span><span class="op" id="6548519">(</span><span class="ident" id="6548520">a</span><span class="op" id="6548521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548524">if</span>&nbsp;<span class="ident" id="6548527">err</span>&nbsp;<span class="op" id="6548531">!=</span>&nbsp;<span class="builtintype" id="6548534">nil</span>&nbsp;<span class="op" id="6548538">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548542">b</span><span class="op" id="6548543">.</span><span class="ident" id="6548544">Fatal</span><span class="op" id="6548549">(</span><span class="ident" id="6548550">err</span><span class="op" id="6548553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548559">x</span>&nbsp;<span class="op" id="6548561">:=</span>&nbsp;<span class="builtinfunc" id="6548564">make</span><span class="op" id="6548568">(</span><span class="op" id="6548569">[</span><span class="op" id="6548570">]</span><span class="builtintype" id="6548571">complex128</span><span class="op" id="6548581">,</span>&nbsp;<span class="num" id="6548583">1000</span><span class="op" id="6548587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548590">bbuf</span>&nbsp;<span class="op" id="6548595">:=</span>&nbsp;<span class="ident" id="6548598">benchmarkBuf</span><span class="op" id="6548610">{</span><span class="ident" id="6548611">data</span><span class="op" id="6548615">:</span>&nbsp;<span class="ident" id="6548617">buf</span><span class="op" id="6548620">.</span><span class="ident" id="6548621">Bytes</span><span class="op" id="6548626">(</span><span class="op" id="6548627">)</span><span class="op" id="6548628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548631">b</span><span class="op" id="6548632">.</span><span class="ident" id="6548633">ResetTimer</span><span class="op" id="6548643">(</span><span class="op" id="6548644">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548647">for</span>&nbsp;<span class="ident" id="6548651">i</span>&nbsp;<span class="op" id="6548653">:=</span>&nbsp;<span class="num" id="6548656">0</span><span class="op" id="6548657">;</span>&nbsp;<span class="ident" id="6548659">i</span>&nbsp;<span class="op" id="6548661">&lt;</span>&nbsp;<span class="ident" id="6548663">b</span><span class="op" id="6548664">.</span><span class="ident" id="6548665">N</span><span class="op" id="6548666">;</span>&nbsp;<span class="ident" id="6548668">i</span><span class="op" id="6548669">++</span>&nbsp;<span class="op" id="6548672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548676">bbuf</span><span class="op" id="6548680">.</span><span class="ident" id="6548681">reset</span><span class="op" id="6548686">(</span><span class="op" id="6548687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548691">dec</span>&nbsp;<span class="op" id="6548695">:=</span>&nbsp;<span class="ident" id="6548698">NewDecoder</span><span class="op" id="6548708">(</span><span class="op" id="6548709">&amp;</span><span class="ident" id="6548710">bbuf</span><span class="op" id="6548714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548718">err</span>&nbsp;<span class="op" id="6548722">:=</span>&nbsp;<span class="ident" id="6548725">dec</span><span class="op" id="6548728">.</span><span class="ident" id="6548729">Decode</span><span class="op" id="6548735">(</span><span class="op" id="6548736">&amp;</span><span class="ident" id="6548737">x</span><span class="op" id="6548738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548742">if</span>&nbsp;<span class="ident" id="6548745">err</span>&nbsp;<span class="op" id="6548749">!=</span>&nbsp;<span class="builtintype" id="6548752">nil</span>&nbsp;<span class="op" id="6548756">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548761">b</span><span class="op" id="6548762">.</span><span class="ident" id="6548763">Fatal</span><span class="op" id="6548768">(</span><span class="ident" id="6548769">i</span><span class="op" id="6548770">,</span>&nbsp;<span class="ident" id="6548772">err</span><span class="op" id="6548775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548782">}</span><br>
<span class="lineno"></span><span class="op" id="6548784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="6548787">func</span>&nbsp;<span class="ident" id="6548792">BenchmarkDecodeFloat64Slice</span><span class="op" id="6548819">(</span><span class="ident" id="6548820">b</span>&nbsp;<span class="op" id="6548822">*</span><span class="ident" id="6548823">testing</span><span class="op" id="6548830">.</span><span class="ident" id="6548831">B</span><span class="op" id="6548832">)</span>&nbsp;<span class="op" id="6548834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548837">var</span>&nbsp;<span class="ident" id="6548841">buf</span>&nbsp;<span class="ident" id="6548845">bytes</span><span class="op" id="6548850">.</span><span class="ident" id="6548851">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548859">enc</span>&nbsp;<span class="op" id="6548863">:=</span>&nbsp;<span class="ident" id="6548866">NewEncoder</span><span class="op" id="6548876">(</span><span class="op" id="6548877">&amp;</span><span class="ident" id="6548878">buf</span><span class="op" id="6548881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548884">a</span>&nbsp;<span class="op" id="6548886">:=</span>&nbsp;<span class="builtinfunc" id="6548889">make</span><span class="op" id="6548893">(</span><span class="op" id="6548894">[</span><span class="op" id="6548895">]</span><span class="builtintype" id="6548896">float64</span><span class="op" id="6548903">,</span>&nbsp;<span class="num" id="6548905">1000</span><span class="op" id="6548909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548912">for</span>&nbsp;<span class="ident" id="6548916">i</span>&nbsp;<span class="op" id="6548918">:=</span>&nbsp;<span class="keyword" id="6548921">range</span>&nbsp;<span class="ident" id="6548927">a</span>&nbsp;<span class="op" id="6548929">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548933">a</span><span class="op" id="6548934">[</span><span class="ident" id="6548935">i</span><span class="op" id="6548936">]</span>&nbsp;<span class="op" id="6548938">=</span>&nbsp;<span class="num" id="6548940">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6548948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548951">err</span>&nbsp;<span class="op" id="6548955">:=</span>&nbsp;<span class="ident" id="6548958">enc</span><span class="op" id="6548961">.</span><span class="ident" id="6548962">Encode</span><span class="op" id="6548968">(</span><span class="ident" id="6548969">a</span><span class="op" id="6548970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6548973">if</span>&nbsp;<span class="ident" id="6548976">err</span>&nbsp;<span class="op" id="6548980">!=</span>&nbsp;<span class="builtintype" id="6548983">nil</span>&nbsp;<span class="op" id="6548987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6548991">b</span><span class="op" id="6548992">.</span><span class="ident" id="6548993">Fatal</span><span class="op" id="6548998">(</span><span class="ident" id="6548999">err</span><span class="op" id="6549002">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549008">x</span>&nbsp;<span class="op" id="6549010">:=</span>&nbsp;<span class="builtinfunc" id="6549013">make</span><span class="op" id="6549017">(</span><span class="op" id="6549018">[</span><span class="op" id="6549019">]</span><span class="builtintype" id="6549020">float64</span><span class="op" id="6549027">,</span>&nbsp;<span class="num" id="6549029">1000</span><span class="op" id="6549033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549036">bbuf</span>&nbsp;<span class="op" id="6549041">:=</span>&nbsp;<span class="ident" id="6549044">benchmarkBuf</span><span class="op" id="6549056">{</span><span class="ident" id="6549057">data</span><span class="op" id="6549061">:</span>&nbsp;<span class="ident" id="6549063">buf</span><span class="op" id="6549066">.</span><span class="ident" id="6549067">Bytes</span><span class="op" id="6549072">(</span><span class="op" id="6549073">)</span><span class="op" id="6549074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549077">b</span><span class="op" id="6549078">.</span><span class="ident" id="6549079">ResetTimer</span><span class="op" id="6549089">(</span><span class="op" id="6549090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549093">for</span>&nbsp;<span class="ident" id="6549097">i</span>&nbsp;<span class="op" id="6549099">:=</span>&nbsp;<span class="num" id="6549102">0</span><span class="op" id="6549103">;</span>&nbsp;<span class="ident" id="6549105">i</span>&nbsp;<span class="op" id="6549107">&lt;</span>&nbsp;<span class="ident" id="6549109">b</span><span class="op" id="6549110">.</span><span class="ident" id="6549111">N</span><span class="op" id="6549112">;</span>&nbsp;<span class="ident" id="6549114">i</span><span class="op" id="6549115">++</span>&nbsp;<span class="op" id="6549118">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549122">bbuf</span><span class="op" id="6549126">.</span><span class="ident" id="6549127">reset</span><span class="op" id="6549132">(</span><span class="op" id="6549133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549137">dec</span>&nbsp;<span class="op" id="6549141">:=</span>&nbsp;<span class="ident" id="6549144">NewDecoder</span><span class="op" id="6549154">(</span><span class="op" id="6549155">&amp;</span><span class="ident" id="6549156">bbuf</span><span class="op" id="6549160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549164">err</span>&nbsp;<span class="op" id="6549168">:=</span>&nbsp;<span class="ident" id="6549171">dec</span><span class="op" id="6549174">.</span><span class="ident" id="6549175">Decode</span><span class="op" id="6549181">(</span><span class="op" id="6549182">&amp;</span><span class="ident" id="6549183">x</span><span class="op" id="6549184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549188">if</span>&nbsp;<span class="ident" id="6549191">err</span>&nbsp;<span class="op" id="6549195">!=</span>&nbsp;<span class="builtintype" id="6549198">nil</span>&nbsp;<span class="op" id="6549202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549207">b</span><span class="op" id="6549208">.</span><span class="ident" id="6549209">Fatal</span><span class="op" id="6549214">(</span><span class="ident" id="6549215">i</span><span class="op" id="6549216">,</span>&nbsp;<span class="ident" id="6549218">err</span><span class="op" id="6549221">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549228">}</span><br>
<span class="lineno"></span><span class="op" id="6549230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6549233">func</span>&nbsp;<span class="ident" id="6549238">BenchmarkDecodeInt32Slice</span><span class="op" id="6549263">(</span><span class="ident" id="6549264">b</span>&nbsp;<span class="op" id="6549266">*</span><span class="ident" id="6549267">testing</span><span class="op" id="6549274">.</span><span class="ident" id="6549275">B</span><span class="op" id="6549276">)</span>&nbsp;<span class="op" id="6549278">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549281">var</span>&nbsp;<span class="ident" id="6549285">buf</span>&nbsp;<span class="ident" id="6549289">bytes</span><span class="op" id="6549294">.</span><span class="ident" id="6549295">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549303">enc</span>&nbsp;<span class="op" id="6549307">:=</span>&nbsp;<span class="ident" id="6549310">NewEncoder</span><span class="op" id="6549320">(</span><span class="op" id="6549321">&amp;</span><span class="ident" id="6549322">buf</span><span class="op" id="6549325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549328">a</span>&nbsp;<span class="op" id="6549330">:=</span>&nbsp;<span class="builtinfunc" id="6549333">make</span><span class="op" id="6549337">(</span><span class="op" id="6549338">[</span><span class="op" id="6549339">]</span><span class="builtintype" id="6549340">int32</span><span class="op" id="6549345">,</span>&nbsp;<span class="num" id="6549347">1000</span><span class="op" id="6549351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549354">for</span>&nbsp;<span class="ident" id="6549358">i</span>&nbsp;<span class="op" id="6549360">:=</span>&nbsp;<span class="keyword" id="6549363">range</span>&nbsp;<span class="ident" id="6549369">a</span>&nbsp;<span class="op" id="6549371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549375">a</span><span class="op" id="6549376">[</span><span class="ident" id="6549377">i</span><span class="op" id="6549378">]</span>&nbsp;<span class="op" id="6549380">=</span>&nbsp;<span class="num" id="6549382">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549391">err</span>&nbsp;<span class="op" id="6549395">:=</span>&nbsp;<span class="ident" id="6549398">enc</span><span class="op" id="6549401">.</span><span class="ident" id="6549402">Encode</span><span class="op" id="6549408">(</span><span class="ident" id="6549409">a</span><span class="op" id="6549410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549413">if</span>&nbsp;<span class="ident" id="6549416">err</span>&nbsp;<span class="op" id="6549420">!=</span>&nbsp;<span class="builtintype" id="6549423">nil</span>&nbsp;<span class="op" id="6549427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549431">b</span><span class="op" id="6549432">.</span><span class="ident" id="6549433">Fatal</span><span class="op" id="6549438">(</span><span class="ident" id="6549439">err</span><span class="op" id="6549442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549445">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549448">x</span>&nbsp;<span class="op" id="6549450">:=</span>&nbsp;<span class="builtinfunc" id="6549453">make</span><span class="op" id="6549457">(</span><span class="op" id="6549458">[</span><span class="op" id="6549459">]</span><span class="builtintype" id="6549460">int32</span><span class="op" id="6549465">,</span>&nbsp;<span class="num" id="6549467">1000</span><span class="op" id="6549471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549474">bbuf</span>&nbsp;<span class="op" id="6549479">:=</span>&nbsp;<span class="ident" id="6549482">benchmarkBuf</span><span class="op" id="6549494">{</span><span class="ident" id="6549495">data</span><span class="op" id="6549499">:</span>&nbsp;<span class="ident" id="6549501">buf</span><span class="op" id="6549504">.</span><span class="ident" id="6549505">Bytes</span><span class="op" id="6549510">(</span><span class="op" id="6549511">)</span><span class="op" id="6549512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549515">b</span><span class="op" id="6549516">.</span><span class="ident" id="6549517">ResetTimer</span><span class="op" id="6549527">(</span><span class="op" id="6549528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549531">for</span>&nbsp;<span class="ident" id="6549535">i</span>&nbsp;<span class="op" id="6549537">:=</span>&nbsp;<span class="num" id="6549540">0</span><span class="op" id="6549541">;</span>&nbsp;<span class="ident" id="6549543">i</span>&nbsp;<span class="op" id="6549545">&lt;</span>&nbsp;<span class="ident" id="6549547">b</span><span class="op" id="6549548">.</span><span class="ident" id="6549549">N</span><span class="op" id="6549550">;</span>&nbsp;<span class="ident" id="6549552">i</span><span class="op" id="6549553">++</span>&nbsp;<span class="op" id="6549556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549560">bbuf</span><span class="op" id="6549564">.</span><span class="ident" id="6549565">reset</span><span class="op" id="6549570">(</span><span class="op" id="6549571">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549575">dec</span>&nbsp;<span class="op" id="6549579">:=</span>&nbsp;<span class="ident" id="6549582">NewDecoder</span><span class="op" id="6549592">(</span><span class="op" id="6549593">&amp;</span><span class="ident" id="6549594">bbuf</span><span class="op" id="6549598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549602">err</span>&nbsp;<span class="op" id="6549606">:=</span>&nbsp;<span class="ident" id="6549609">dec</span><span class="op" id="6549612">.</span><span class="ident" id="6549613">Decode</span><span class="op" id="6549619">(</span><span class="op" id="6549620">&amp;</span><span class="ident" id="6549621">x</span><span class="op" id="6549622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549626">if</span>&nbsp;<span class="ident" id="6549629">err</span>&nbsp;<span class="op" id="6549633">!=</span>&nbsp;<span class="builtintype" id="6549636">nil</span>&nbsp;<span class="op" id="6549640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549645">b</span><span class="op" id="6549646">.</span><span class="ident" id="6549647">Fatal</span><span class="op" id="6549652">(</span><span class="ident" id="6549653">i</span><span class="op" id="6549654">,</span>&nbsp;<span class="ident" id="6549656">err</span><span class="op" id="6549659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549663">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549666">}</span><br>
<span class="lineno"></span><span class="op" id="6549668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6549671">func</span>&nbsp;<span class="ident" id="6549676">BenchmarkDecodeStringSlice</span><span class="op" id="6549702">(</span><span class="ident" id="6549703">b</span>&nbsp;<span class="op" id="6549705">*</span><span class="ident" id="6549706">testing</span><span class="op" id="6549713">.</span><span class="ident" id="6549714">B</span><span class="op" id="6549715">)</span>&nbsp;<span class="op" id="6549717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549720">var</span>&nbsp;<span class="ident" id="6549724">buf</span>&nbsp;<span class="ident" id="6549728">bytes</span><span class="op" id="6549733">.</span><span class="ident" id="6549734">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549742">enc</span>&nbsp;<span class="op" id="6549746">:=</span>&nbsp;<span class="ident" id="6549749">NewEncoder</span><span class="op" id="6549759">(</span><span class="op" id="6549760">&amp;</span><span class="ident" id="6549761">buf</span><span class="op" id="6549764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549767">a</span>&nbsp;<span class="op" id="6549769">:=</span>&nbsp;<span class="builtinfunc" id="6549772">make</span><span class="op" id="6549776">(</span><span class="op" id="6549777">[</span><span class="op" id="6549778">]</span><span class="builtintype" id="6549779">string</span><span class="op" id="6549785">,</span>&nbsp;<span class="num" id="6549787">1000</span><span class="op" id="6549791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549794">for</span>&nbsp;<span class="ident" id="6549798">i</span>&nbsp;<span class="op" id="6549800">:=</span>&nbsp;<span class="keyword" id="6549803">range</span>&nbsp;<span class="ident" id="6549809">a</span>&nbsp;<span class="op" id="6549811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549815">a</span><span class="op" id="6549816">[</span><span class="ident" id="6549817">i</span><span class="op" id="6549818">]</span>&nbsp;<span class="op" id="6549820">=</span>&nbsp;<span class="string" id="6549822">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549841">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549844">err</span>&nbsp;<span class="op" id="6549848">:=</span>&nbsp;<span class="ident" id="6549851">enc</span><span class="op" id="6549854">.</span><span class="ident" id="6549855">Encode</span><span class="op" id="6549861">(</span><span class="ident" id="6549862">a</span><span class="op" id="6549863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549866">if</span>&nbsp;<span class="ident" id="6549869">err</span>&nbsp;<span class="op" id="6549873">!=</span>&nbsp;<span class="builtintype" id="6549876">nil</span>&nbsp;<span class="op" id="6549880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549884">b</span><span class="op" id="6549885">.</span><span class="ident" id="6549886">Fatal</span><span class="op" id="6549891">(</span><span class="ident" id="6549892">err</span><span class="op" id="6549895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6549898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549901">x</span>&nbsp;<span class="op" id="6549903">:=</span>&nbsp;<span class="builtinfunc" id="6549906">make</span><span class="op" id="6549910">(</span><span class="op" id="6549911">[</span><span class="op" id="6549912">]</span><span class="builtintype" id="6549913">string</span><span class="op" id="6549919">,</span>&nbsp;<span class="num" id="6549921">1000</span><span class="op" id="6549925">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549928">bbuf</span>&nbsp;<span class="op" id="6549933">:=</span>&nbsp;<span class="ident" id="6549936">benchmarkBuf</span><span class="op" id="6549948">{</span><span class="ident" id="6549949">data</span><span class="op" id="6549953">:</span>&nbsp;<span class="ident" id="6549955">buf</span><span class="op" id="6549958">.</span><span class="ident" id="6549959">Bytes</span><span class="op" id="6549964">(</span><span class="op" id="6549965">)</span><span class="op" id="6549966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6549969">b</span><span class="op" id="6549970">.</span><span class="ident" id="6549971">ResetTimer</span><span class="op" id="6549981">(</span><span class="op" id="6549982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6549985">for</span>&nbsp;<span class="ident" id="6549989">i</span>&nbsp;<span class="op" id="6549991">:=</span>&nbsp;<span class="num" id="6549994">0</span><span class="op" id="6549995">;</span>&nbsp;<span class="ident" id="6549997">i</span>&nbsp;<span class="op" id="6549999">&lt;</span>&nbsp;<span class="ident" id="6550001">b</span><span class="op" id="6550002">.</span><span class="ident" id="6550003">N</span><span class="op" id="6550004">;</span>&nbsp;<span class="ident" id="6550006">i</span><span class="op" id="6550007">++</span>&nbsp;<span class="op" id="6550010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550014">bbuf</span><span class="op" id="6550018">.</span><span class="ident" id="6550019">reset</span><span class="op" id="6550024">(</span><span class="op" id="6550025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550029">dec</span>&nbsp;<span class="op" id="6550033">:=</span>&nbsp;<span class="ident" id="6550036">NewDecoder</span><span class="op" id="6550046">(</span><span class="op" id="6550047">&amp;</span><span class="ident" id="6550048">bbuf</span><span class="op" id="6550052">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550056">err</span>&nbsp;<span class="op" id="6550060">:=</span>&nbsp;<span class="ident" id="6550063">dec</span><span class="op" id="6550066">.</span><span class="ident" id="6550067">Decode</span><span class="op" id="6550073">(</span><span class="op" id="6550074">&amp;</span><span class="ident" id="6550075">x</span><span class="op" id="6550076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550080">if</span>&nbsp;<span class="ident" id="6550083">err</span>&nbsp;<span class="op" id="6550087">!=</span>&nbsp;<span class="builtintype" id="6550090">nil</span>&nbsp;<span class="op" id="6550094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550099">b</span><span class="op" id="6550100">.</span><span class="ident" id="6550101">Fatal</span><span class="op" id="6550106">(</span><span class="ident" id="6550107">i</span><span class="op" id="6550108">,</span>&nbsp;<span class="ident" id="6550110">err</span><span class="op" id="6550113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550120">}</span><br>
<span class="lineno">325</span><span class="op" id="6550122">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
