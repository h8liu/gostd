<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1901902">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1901957">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1902011">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1902062">package</span>&nbsp;<span class="ident" id="1902070">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1902079">import</span>&nbsp;<span class="op" id="1902086">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1902089">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1902098">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1902101">func</span>&nbsp;<span class="ident" id="1902106">concatstrings</span><span class="op" id="1902119">(</span><span class="ident" id="1902120">a</span>&nbsp;<span class="op" id="1902122">[</span><span class="op" id="1902123">]</span><span class="builtintype" id="1902124">string</span><span class="op" id="1902130">)</span>&nbsp;<span class="builtintype" id="1902132">string</span>&nbsp;<span class="op" id="1902139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902142">idx</span>&nbsp;<span class="op" id="1902146">:=</span>&nbsp;<span class="num" id="1902149">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902152">l</span>&nbsp;<span class="op" id="1902154">:=</span>&nbsp;<span class="num" id="1902157">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902160">count</span>&nbsp;<span class="op" id="1902166">:=</span>&nbsp;<span class="num" id="1902169">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902172">for</span>&nbsp;<span class="ident" id="1902176">i</span><span class="op" id="1902177">,</span>&nbsp;<span class="ident" id="1902179">x</span>&nbsp;<span class="op" id="1902181">:=</span>&nbsp;<span class="keyword" id="1902184">range</span>&nbsp;<span class="ident" id="1902190">a</span>&nbsp;<span class="op" id="1902192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902196">n</span>&nbsp;<span class="op" id="1902198">:=</span>&nbsp;<span class="builtinfunc" id="1902201">len</span><span class="op" id="1902204">(</span><span class="ident" id="1902205">x</span><span class="op" id="1902206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902210">if</span>&nbsp;<span class="ident" id="1902213">n</span>&nbsp;<span class="op" id="1902215">==</span>&nbsp;<span class="num" id="1902218">0</span>&nbsp;<span class="op" id="1902220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902225">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902236">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902240">if</span>&nbsp;<span class="ident" id="1902243">l</span><span class="op" id="1902244">+</span><span class="ident" id="1902245">n</span>&nbsp;<span class="op" id="1902247">&lt;</span>&nbsp;<span class="ident" id="1902249">l</span>&nbsp;<span class="op" id="1902251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902256">gothrow</span><span class="op" id="1902263">(</span><span class="string" id="1902264">&#34;string&nbsp;concatenation&nbsp;too&nbsp;long&#34;</span><span class="op" id="1902295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902303">l</span>&nbsp;<span class="op" id="1902305">+=</span>&nbsp;<span class="ident" id="1902308">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902312">count</span><span class="op" id="1902317">++</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902322">idx</span>&nbsp;<span class="op" id="1902326">=</span>&nbsp;<span class="ident" id="1902328">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902334">if</span>&nbsp;<span class="ident" id="1902337">count</span>&nbsp;<span class="op" id="1902343">==</span>&nbsp;<span class="num" id="1902346">0</span>&nbsp;<span class="op" id="1902348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902352">return</span>&nbsp;<span class="string" id="1902359">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902363">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902366">if</span>&nbsp;<span class="ident" id="1902369">count</span>&nbsp;<span class="op" id="1902375">==</span>&nbsp;<span class="num" id="1902378">1</span>&nbsp;<span class="op" id="1902380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902384">return</span>&nbsp;<span class="ident" id="1902391">a</span><span class="op" id="1902392">[</span><span class="ident" id="1902393">idx</span><span class="op" id="1902396">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902402">s</span><span class="op" id="1902403">,</span>&nbsp;<span class="ident" id="1902405">b</span>&nbsp;<span class="op" id="1902407">:=</span>&nbsp;<span class="ident" id="1902410">rawstring</span><span class="op" id="1902419">(</span><span class="ident" id="1902420">l</span><span class="op" id="1902421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902424">l</span>&nbsp;<span class="op" id="1902426">=</span>&nbsp;<span class="num" id="1902428">0</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902431">for</span>&nbsp;<span class="ident" id="1902435">_</span><span class="op" id="1902436">,</span>&nbsp;<span class="ident" id="1902438">x</span>&nbsp;<span class="op" id="1902440">:=</span>&nbsp;<span class="keyword" id="1902443">range</span>&nbsp;<span class="ident" id="1902449">a</span>&nbsp;<span class="op" id="1902451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1902455">copy</span><span class="op" id="1902459">(</span><span class="ident" id="1902460">b</span><span class="op" id="1902461">[</span><span class="ident" id="1902462">l</span><span class="op" id="1902463">:</span><span class="op" id="1902464">]</span><span class="op" id="1902465">,</span>&nbsp;<span class="ident" id="1902467">x</span><span class="op" id="1902468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902472">l</span>&nbsp;<span class="op" id="1902474">+=</span>&nbsp;<span class="builtinfunc" id="1902477">len</span><span class="op" id="1902480">(</span><span class="ident" id="1902481">x</span><span class="op" id="1902482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1902485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902488">return</span>&nbsp;<span class="ident" id="1902495">s</span><br>
<span class="lineno">40</span><span class="op" id="1902497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1902500">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1902513">func</span>&nbsp;<span class="ident" id="1902518">concatstring2</span><span class="op" id="1902531">(</span><span class="ident" id="1902532">a</span>&nbsp;<span class="op" id="1902534">[</span><span class="num" id="1902535">2</span><span class="op" id="1902536">]</span><span class="builtintype" id="1902537">string</span><span class="op" id="1902543">)</span>&nbsp;<span class="builtintype" id="1902545">string</span>&nbsp;<span class="op" id="1902552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902555">return</span>&nbsp;<span class="ident" id="1902562">concatstrings</span><span class="op" id="1902575">(</span><span class="ident" id="1902576">a</span><span class="op" id="1902577">[</span><span class="op" id="1902578">:</span><span class="op" id="1902579">]</span><span class="op" id="1902580">)</span><br>
<span class="lineno">45</span><span class="op" id="1902582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1902585">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1902598">func</span>&nbsp;<span class="ident" id="1902603">concatstring3</span><span class="op" id="1902616">(</span><span class="ident" id="1902617">a</span>&nbsp;<span class="op" id="1902619">[</span><span class="num" id="1902620">3</span><span class="op" id="1902621">]</span><span class="builtintype" id="1902622">string</span><span class="op" id="1902628">)</span>&nbsp;<span class="builtintype" id="1902630">string</span>&nbsp;<span class="op" id="1902637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902640">return</span>&nbsp;<span class="ident" id="1902647">concatstrings</span><span class="op" id="1902660">(</span><span class="ident" id="1902661">a</span><span class="op" id="1902662">[</span><span class="op" id="1902663">:</span><span class="op" id="1902664">]</span><span class="op" id="1902665">)</span><br>
<span class="lineno">50</span><span class="op" id="1902667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1902670">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1902683">func</span>&nbsp;<span class="ident" id="1902688">concatstring4</span><span class="op" id="1902701">(</span><span class="ident" id="1902702">a</span>&nbsp;<span class="op" id="1902704">[</span><span class="num" id="1902705">4</span><span class="op" id="1902706">]</span><span class="builtintype" id="1902707">string</span><span class="op" id="1902713">)</span>&nbsp;<span class="builtintype" id="1902715">string</span>&nbsp;<span class="op" id="1902722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902725">return</span>&nbsp;<span class="ident" id="1902732">concatstrings</span><span class="op" id="1902745">(</span><span class="ident" id="1902746">a</span><span class="op" id="1902747">[</span><span class="op" id="1902748">:</span><span class="op" id="1902749">]</span><span class="op" id="1902750">)</span><br>
<span class="lineno">55</span><span class="op" id="1902752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1902755">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1902768">func</span>&nbsp;<span class="ident" id="1902773">concatstring5</span><span class="op" id="1902786">(</span><span class="ident" id="1902787">a</span>&nbsp;<span class="op" id="1902789">[</span><span class="num" id="1902790">5</span><span class="op" id="1902791">]</span><span class="builtintype" id="1902792">string</span><span class="op" id="1902798">)</span>&nbsp;<span class="builtintype" id="1902800">string</span>&nbsp;<span class="op" id="1902807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902810">return</span>&nbsp;<span class="ident" id="1902817">concatstrings</span><span class="op" id="1902830">(</span><span class="ident" id="1902831">a</span><span class="op" id="1902832">[</span><span class="op" id="1902833">:</span><span class="op" id="1902834">]</span><span class="op" id="1902835">)</span><br>
<span class="lineno">60</span><span class="op" id="1902837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1902840">func</span>&nbsp;<span class="ident" id="1902845">slicebytetostring</span><span class="op" id="1902862">(</span><span class="ident" id="1902863">b</span>&nbsp;<span class="op" id="1902865">[</span><span class="op" id="1902866">]</span><span class="builtintype" id="1902867">byte</span><span class="op" id="1902871">)</span>&nbsp;<span class="builtintype" id="1902873">string</span>&nbsp;<span class="op" id="1902880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1902883">if</span>&nbsp;<span class="ident" id="1902886">raceenabled</span>&nbsp;<span class="op" id="1902898">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1902901">len</span><span class="op" id="1902904">(</span><span class="ident" id="1902905">b</span><span class="op" id="1902906">)</span>&nbsp;<span class="op" id="1902908">&gt;</span>&nbsp;<span class="num" id="1902910">0</span>&nbsp;<span class="op" id="1902912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902916">racereadrangepc</span><span class="op" id="1902931">(</span><span class="ident" id="1902932">unsafe</span><span class="op" id="1902938">.</span><span class="ident" id="1902939">Pointer</span><span class="op" id="1902946">(</span><span class="op" id="1902947">&amp;</span><span class="ident" id="1902948">b</span><span class="op" id="1902949">[</span><span class="num" id="1902950">0</span><span class="op" id="1902951">]</span><span class="op" id="1902952">)</span><span class="op" id="1902953">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1902958">uintptr</span><span class="op" id="1902965">(</span><span class="builtinfunc" id="1902966">len</span><span class="op" id="1902969">(</span><span class="ident" id="1902970">b</span><span class="op" id="1902971">)</span><span class="op" id="1902972">)</span><span class="op" id="1902973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1902978">getcallerpc</span><span class="op" id="1902989">(</span><span class="ident" id="1902990">unsafe</span><span class="op" id="1902996">.</span><span class="ident" id="1902997">Pointer</span><span class="op" id="1903004">(</span><span class="op" id="1903005">&amp;</span><span class="ident" id="1903006">b</span><span class="op" id="1903007">)</span><span class="op" id="1903008">)</span><span class="op" id="1903009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903014">funcPC</span><span class="op" id="1903020">(</span><span class="ident" id="1903021">slicebytetostring</span><span class="op" id="1903038">)</span><span class="op" id="1903039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1903042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903045">s</span><span class="op" id="1903046">,</span>&nbsp;<span class="ident" id="1903048">c</span>&nbsp;<span class="op" id="1903050">:=</span>&nbsp;<span class="ident" id="1903053">rawstring</span><span class="op" id="1903062">(</span><span class="builtinfunc" id="1903063">len</span><span class="op" id="1903066">(</span><span class="ident" id="1903067">b</span><span class="op" id="1903068">)</span><span class="op" id="1903069">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1903072">copy</span><span class="op" id="1903076">(</span><span class="ident" id="1903077">c</span><span class="op" id="1903078">,</span>&nbsp;<span class="ident" id="1903080">b</span><span class="op" id="1903081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1903084">return</span>&nbsp;<span class="ident" id="1903091">s</span><br>
<span class="lineno"></span><span class="op" id="1903093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1903096">func</span>&nbsp;<span class="ident" id="1903101">slicebytetostringtmp</span><span class="op" id="1903121">(</span><span class="ident" id="1903122">b</span>&nbsp;<span class="op" id="1903124">[</span><span class="op" id="1903125">]</span><span class="builtintype" id="1903126">byte</span><span class="op" id="1903130">)</span>&nbsp;<span class="builtintype" id="1903132">string</span>&nbsp;<span class="op" id="1903139">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903142">//&nbsp;Return&nbsp;a&nbsp;&#34;string&#34;&nbsp;referring&nbsp;to&nbsp;the&nbsp;actual&nbsp;[]byte&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903202">//&nbsp;This&nbsp;is&nbsp;only&nbsp;for&nbsp;use&nbsp;by&nbsp;internal&nbsp;compiler&nbsp;optimizations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903262">//&nbsp;that&nbsp;know&nbsp;that&nbsp;the&nbsp;string&nbsp;form&nbsp;will&nbsp;be&nbsp;discarded&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903322">//&nbsp;the&nbsp;calling&nbsp;goroutine&nbsp;could&nbsp;possibly&nbsp;modify&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903383">//&nbsp;slice&nbsp;or&nbsp;synchronize&nbsp;with&nbsp;another&nbsp;goroutine.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903432">//&nbsp;Today,&nbsp;the&nbsp;only&nbsp;such&nbsp;case&nbsp;is&nbsp;a&nbsp;m[string(k)]&nbsp;lookup&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903493">//&nbsp;m&nbsp;is&nbsp;a&nbsp;string-keyed&nbsp;map&nbsp;and&nbsp;k&nbsp;is&nbsp;a&nbsp;[]byte.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1903541">if</span>&nbsp;<span class="ident" id="1903544">raceenabled</span>&nbsp;<span class="op" id="1903556">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1903559">len</span><span class="op" id="1903562">(</span><span class="ident" id="1903563">b</span><span class="op" id="1903564">)</span>&nbsp;<span class="op" id="1903566">&gt;</span>&nbsp;<span class="num" id="1903568">0</span>&nbsp;<span class="op" id="1903570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903574">racereadrangepc</span><span class="op" id="1903589">(</span><span class="ident" id="1903590">unsafe</span><span class="op" id="1903596">.</span><span class="ident" id="1903597">Pointer</span><span class="op" id="1903604">(</span><span class="op" id="1903605">&amp;</span><span class="ident" id="1903606">b</span><span class="op" id="1903607">[</span><span class="num" id="1903608">0</span><span class="op" id="1903609">]</span><span class="op" id="1903610">)</span><span class="op" id="1903611">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1903616">uintptr</span><span class="op" id="1903623">(</span><span class="builtinfunc" id="1903624">len</span><span class="op" id="1903627">(</span><span class="ident" id="1903628">b</span><span class="op" id="1903629">)</span><span class="op" id="1903630">)</span><span class="op" id="1903631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903636">getcallerpc</span><span class="op" id="1903647">(</span><span class="ident" id="1903648">unsafe</span><span class="op" id="1903654">.</span><span class="ident" id="1903655">Pointer</span><span class="op" id="1903662">(</span><span class="op" id="1903663">&amp;</span><span class="ident" id="1903664">b</span><span class="op" id="1903665">)</span><span class="op" id="1903666">)</span><span class="op" id="1903667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903672">funcPC</span><span class="op" id="1903678">(</span><span class="ident" id="1903679">slicebytetostringtmp</span><span class="op" id="1903699">)</span><span class="op" id="1903700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1903703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1903706">return</span>&nbsp;<span class="op" id="1903713">*</span><span class="op" id="1903714">(</span><span class="op" id="1903715">*</span><span class="builtintype" id="1903716">string</span><span class="op" id="1903722">)</span><span class="op" id="1903723">(</span><span class="ident" id="1903724">unsafe</span><span class="op" id="1903730">.</span><span class="ident" id="1903731">Pointer</span><span class="op" id="1903738">(</span><span class="op" id="1903739">&amp;</span><span class="ident" id="1903740">b</span><span class="op" id="1903741">)</span><span class="op" id="1903742">)</span><br>
<span class="lineno">90</span><span class="op" id="1903744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1903747">func</span>&nbsp;<span class="ident" id="1903752">stringtoslicebyte</span><span class="op" id="1903769">(</span><span class="ident" id="1903770">s</span>&nbsp;<span class="builtintype" id="1903772">string</span><span class="op" id="1903778">)</span>&nbsp;<span class="op" id="1903780">[</span><span class="op" id="1903781">]</span><span class="builtintype" id="1903782">byte</span>&nbsp;<span class="op" id="1903787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903790">b</span>&nbsp;<span class="op" id="1903792">:=</span>&nbsp;<span class="ident" id="1903795">rawbyteslice</span><span class="op" id="1903807">(</span><span class="builtinfunc" id="1903808">len</span><span class="op" id="1903811">(</span><span class="ident" id="1903812">s</span><span class="op" id="1903813">)</span><span class="op" id="1903814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1903817">copy</span><span class="op" id="1903821">(</span><span class="ident" id="1903822">b</span><span class="op" id="1903823">,</span>&nbsp;<span class="ident" id="1903825">s</span><span class="op" id="1903826">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1903829">return</span>&nbsp;<span class="ident" id="1903836">b</span><br>
<span class="lineno"></span><span class="op" id="1903838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1903841">func</span>&nbsp;<span class="ident" id="1903846">stringtoslicerune</span><span class="op" id="1903863">(</span><span class="ident" id="1903864">s</span>&nbsp;<span class="builtintype" id="1903866">string</span><span class="op" id="1903872">)</span>&nbsp;<span class="op" id="1903874">[</span><span class="op" id="1903875">]</span><span class="builtintype" id="1903876">rune</span>&nbsp;<span class="op" id="1903881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903884">//&nbsp;two&nbsp;passes.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1903900">//&nbsp;unlike&nbsp;slicerunetostring,&nbsp;no&nbsp;race&nbsp;because&nbsp;strings&nbsp;are&nbsp;immutable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903969">n</span>&nbsp;<span class="op" id="1903971">:=</span>&nbsp;<span class="num" id="1903974">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1903977">t</span>&nbsp;<span class="op" id="1903979">:=</span>&nbsp;<span class="ident" id="1903982">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1903985">for</span>&nbsp;<span class="builtinfunc" id="1903989">len</span><span class="op" id="1903992">(</span><span class="ident" id="1903993">s</span><span class="op" id="1903994">)</span>&nbsp;<span class="op" id="1903996">&gt;</span>&nbsp;<span class="num" id="1903998">0</span>&nbsp;<span class="op" id="1904000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904004">_</span><span class="op" id="1904005">,</span>&nbsp;<span class="ident" id="1904007">k</span>&nbsp;<span class="op" id="1904009">:=</span>&nbsp;<span class="ident" id="1904012">charntorune</span><span class="op" id="1904023">(</span><span class="ident" id="1904024">s</span><span class="op" id="1904025">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904029">s</span>&nbsp;<span class="op" id="1904031">=</span>&nbsp;<span class="ident" id="1904033">s</span><span class="op" id="1904034">[</span><span class="ident" id="1904035">k</span><span class="op" id="1904036">:</span><span class="op" id="1904037">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904041">n</span><span class="op" id="1904042">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904049">a</span>&nbsp;<span class="op" id="1904051">:=</span>&nbsp;<span class="ident" id="1904054">rawruneslice</span><span class="op" id="1904066">(</span><span class="ident" id="1904067">n</span><span class="op" id="1904068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904071">n</span>&nbsp;<span class="op" id="1904073">=</span>&nbsp;<span class="num" id="1904075">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904078">for</span>&nbsp;<span class="builtinfunc" id="1904082">len</span><span class="op" id="1904085">(</span><span class="ident" id="1904086">t</span><span class="op" id="1904087">)</span>&nbsp;<span class="op" id="1904089">&gt;</span>&nbsp;<span class="num" id="1904091">0</span>&nbsp;<span class="op" id="1904093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904097">r</span><span class="op" id="1904098">,</span>&nbsp;<span class="ident" id="1904100">k</span>&nbsp;<span class="op" id="1904102">:=</span>&nbsp;<span class="ident" id="1904105">charntorune</span><span class="op" id="1904116">(</span><span class="ident" id="1904117">t</span><span class="op" id="1904118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904122">t</span>&nbsp;<span class="op" id="1904124">=</span>&nbsp;<span class="ident" id="1904126">t</span><span class="op" id="1904127">[</span><span class="ident" id="1904128">k</span><span class="op" id="1904129">:</span><span class="op" id="1904130">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904134">a</span><span class="op" id="1904135">[</span><span class="ident" id="1904136">n</span><span class="op" id="1904137">]</span>&nbsp;<span class="op" id="1904139">=</span>&nbsp;<span class="ident" id="1904141">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904145">n</span><span class="op" id="1904146">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904153">return</span>&nbsp;<span class="ident" id="1904160">a</span><br>
<span class="lineno"></span><span class="op" id="1904162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1904165">func</span>&nbsp;<span class="ident" id="1904170">slicerunetostring</span><span class="op" id="1904187">(</span><span class="ident" id="1904188">a</span>&nbsp;<span class="op" id="1904190">[</span><span class="op" id="1904191">]</span><span class="builtintype" id="1904192">rune</span><span class="op" id="1904196">)</span>&nbsp;<span class="builtintype" id="1904198">string</span>&nbsp;<span class="op" id="1904205">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904208">if</span>&nbsp;<span class="ident" id="1904211">raceenabled</span>&nbsp;<span class="op" id="1904223">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1904226">len</span><span class="op" id="1904229">(</span><span class="ident" id="1904230">a</span><span class="op" id="1904231">)</span>&nbsp;<span class="op" id="1904233">&gt;</span>&nbsp;<span class="num" id="1904235">0</span>&nbsp;<span class="op" id="1904237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904241">racereadrangepc</span><span class="op" id="1904256">(</span><span class="ident" id="1904257">unsafe</span><span class="op" id="1904263">.</span><span class="ident" id="1904264">Pointer</span><span class="op" id="1904271">(</span><span class="op" id="1904272">&amp;</span><span class="ident" id="1904273">a</span><span class="op" id="1904274">[</span><span class="num" id="1904275">0</span><span class="op" id="1904276">]</span><span class="op" id="1904277">)</span><span class="op" id="1904278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1904283">uintptr</span><span class="op" id="1904290">(</span><span class="builtinfunc" id="1904291">len</span><span class="op" id="1904294">(</span><span class="ident" id="1904295">a</span><span class="op" id="1904296">)</span><span class="op" id="1904297">)</span><span class="op" id="1904298">*</span><span class="ident" id="1904299">unsafe</span><span class="op" id="1904305">.</span><span class="ident" id="1904306">Sizeof</span><span class="op" id="1904312">(</span><span class="ident" id="1904313">a</span><span class="op" id="1904314">[</span><span class="num" id="1904315">0</span><span class="op" id="1904316">]</span><span class="op" id="1904317">)</span><span class="op" id="1904318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904323">getcallerpc</span><span class="op" id="1904334">(</span><span class="ident" id="1904335">unsafe</span><span class="op" id="1904341">.</span><span class="ident" id="1904342">Pointer</span><span class="op" id="1904349">(</span><span class="op" id="1904350">&amp;</span><span class="ident" id="1904351">a</span><span class="op" id="1904352">)</span><span class="op" id="1904353">)</span><span class="op" id="1904354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904359">funcPC</span><span class="op" id="1904365">(</span><span class="ident" id="1904366">slicerunetostring</span><span class="op" id="1904383">)</span><span class="op" id="1904384">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904390">var</span>&nbsp;<span class="ident" id="1904394">dum</span>&nbsp;<span class="op" id="1904398">[</span><span class="num" id="1904399">4</span><span class="op" id="1904400">]</span><span class="builtintype" id="1904401">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904407">size1</span>&nbsp;<span class="op" id="1904413">:=</span>&nbsp;<span class="num" id="1904416">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904419">for</span>&nbsp;<span class="ident" id="1904423">_</span><span class="op" id="1904424">,</span>&nbsp;<span class="ident" id="1904426">r</span>&nbsp;<span class="op" id="1904428">:=</span>&nbsp;<span class="keyword" id="1904431">range</span>&nbsp;<span class="ident" id="1904437">a</span>&nbsp;<span class="op" id="1904439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904443">size1</span>&nbsp;<span class="op" id="1904449">+=</span>&nbsp;<span class="ident" id="1904452">runetochar</span><span class="op" id="1904462">(</span><span class="ident" id="1904463">dum</span><span class="op" id="1904466">[</span><span class="op" id="1904467">:</span><span class="op" id="1904468">]</span><span class="op" id="1904469">,</span>&nbsp;<span class="ident" id="1904471">r</span><span class="op" id="1904472">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904478">s</span><span class="op" id="1904479">,</span>&nbsp;<span class="ident" id="1904481">b</span>&nbsp;<span class="op" id="1904483">:=</span>&nbsp;<span class="ident" id="1904486">rawstring</span><span class="op" id="1904495">(</span><span class="ident" id="1904496">size1</span>&nbsp;<span class="op" id="1904502">+</span>&nbsp;<span class="num" id="1904504">3</span><span class="op" id="1904505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904508">size2</span>&nbsp;<span class="op" id="1904514">:=</span>&nbsp;<span class="num" id="1904517">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904520">for</span>&nbsp;<span class="ident" id="1904524">_</span><span class="op" id="1904525">,</span>&nbsp;<span class="ident" id="1904527">r</span>&nbsp;<span class="op" id="1904529">:=</span>&nbsp;<span class="keyword" id="1904532">range</span>&nbsp;<span class="ident" id="1904538">a</span>&nbsp;<span class="op" id="1904540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1904544">//&nbsp;check&nbsp;for&nbsp;race</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904564">if</span>&nbsp;<span class="ident" id="1904567">size2</span>&nbsp;<span class="op" id="1904573">&gt;=</span>&nbsp;<span class="ident" id="1904576">size1</span>&nbsp;<span class="op" id="1904582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904587">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904599">size2</span>&nbsp;<span class="op" id="1904605">+=</span>&nbsp;<span class="ident" id="1904608">runetochar</span><span class="op" id="1904618">(</span><span class="ident" id="1904619">b</span><span class="op" id="1904620">[</span><span class="ident" id="1904621">size2</span><span class="op" id="1904626">:</span><span class="op" id="1904627">]</span><span class="op" id="1904628">,</span>&nbsp;<span class="ident" id="1904630">r</span><span class="op" id="1904631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1904634">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904637">return</span>&nbsp;<span class="ident" id="1904644">s</span><span class="op" id="1904645">[</span><span class="op" id="1904646">:</span><span class="ident" id="1904647">size2</span><span class="op" id="1904652">]</span><br>
<span class="lineno"></span><span class="op" id="1904654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1904657">type</span>&nbsp;<span class="ident" id="1904662">stringStruct</span>&nbsp;<span class="keyword" id="1904675">struct</span>&nbsp;<span class="op" id="1904682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904685">str</span>&nbsp;<span class="ident" id="1904689">unsafe</span><span class="op" id="1904695">.</span><span class="ident" id="1904696">Pointer</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1904705">len</span>&nbsp;<span class="builtintype" id="1904709">int</span><br>
<span class="lineno"></span><span class="op" id="1904713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1904716">func</span>&nbsp;<span class="ident" id="1904721">intstring</span><span class="op" id="1904730">(</span><span class="ident" id="1904731">v</span>&nbsp;<span class="ident" id="1904733">int64</span><span class="op" id="1904738">)</span>&nbsp;<span class="builtintype" id="1904740">string</span>&nbsp;<span class="op" id="1904747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904750">s</span><span class="op" id="1904751">,</span>&nbsp;<span class="ident" id="1904753">b</span>&nbsp;<span class="op" id="1904755">:=</span>&nbsp;<span class="ident" id="1904758">rawstring</span><span class="op" id="1904767">(</span><span class="num" id="1904768">4</span><span class="op" id="1904769">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1904772">n</span>&nbsp;<span class="op" id="1904774">:=</span>&nbsp;<span class="ident" id="1904777">runetochar</span><span class="op" id="1904787">(</span><span class="ident" id="1904788">b</span><span class="op" id="1904789">,</span>&nbsp;<span class="builtintype" id="1904791">rune</span><span class="op" id="1904795">(</span><span class="ident" id="1904796">v</span><span class="op" id="1904797">)</span><span class="op" id="1904798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904801">return</span>&nbsp;<span class="ident" id="1904808">s</span><span class="op" id="1904809">[</span><span class="op" id="1904810">:</span><span class="ident" id="1904811">n</span><span class="op" id="1904812">]</span><br>
<span class="lineno"></span><span class="op" id="1904814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1904817">//&nbsp;stringiter&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;next</span><br>
<span class="lineno">155</span><span class="comment" id="1904861">//&nbsp;rune&nbsp;after&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k].</span><br>
<span class="lineno"></span><span class="keyword" id="1904905">func</span>&nbsp;<span class="ident" id="1904910">stringiter</span><span class="op" id="1904920">(</span><span class="ident" id="1904921">s</span>&nbsp;<span class="builtintype" id="1904923">string</span><span class="op" id="1904929">,</span>&nbsp;<span class="ident" id="1904931">k</span>&nbsp;<span class="builtintype" id="1904933">int</span><span class="op" id="1904936">)</span>&nbsp;<span class="builtintype" id="1904938">int</span>&nbsp;<span class="op" id="1904942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904945">if</span>&nbsp;<span class="ident" id="1904948">k</span>&nbsp;<span class="op" id="1904950">&gt;=</span>&nbsp;<span class="builtinfunc" id="1904953">len</span><span class="op" id="1904956">(</span><span class="ident" id="1904957">s</span><span class="op" id="1904958">)</span>&nbsp;<span class="op" id="1904960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1904964">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1904991">return</span>&nbsp;<span class="num" id="1904998">0</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1905005">c</span>&nbsp;<span class="op" id="1905007">:=</span>&nbsp;<span class="ident" id="1905010">s</span><span class="op" id="1905011">[</span><span class="ident" id="1905012">k</span><span class="op" id="1905013">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905016">if</span>&nbsp;<span class="ident" id="1905019">c</span>&nbsp;<span class="op" id="1905021">&lt;</span>&nbsp;<span class="ident" id="1905023">runeself</span>&nbsp;<span class="op" id="1905032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905036">return</span>&nbsp;<span class="ident" id="1905043">k</span>&nbsp;<span class="op" id="1905045">+</span>&nbsp;<span class="num" id="1905047">1</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1905054">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1905074">_</span><span class="op" id="1905075">,</span>&nbsp;<span class="ident" id="1905077">n</span>&nbsp;<span class="op" id="1905079">:=</span>&nbsp;<span class="ident" id="1905082">charntorune</span><span class="op" id="1905093">(</span><span class="ident" id="1905094">s</span><span class="op" id="1905095">[</span><span class="ident" id="1905096">k</span><span class="op" id="1905097">:</span><span class="op" id="1905098">]</span><span class="op" id="1905099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905102">return</span>&nbsp;<span class="ident" id="1905109">k</span>&nbsp;<span class="op" id="1905111">+</span>&nbsp;<span class="ident" id="1905113">n</span><br>
<span class="lineno">170</span><span class="op" id="1905115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1905118">//&nbsp;stringiter2&nbsp;returns&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k]</span><br>
<span class="lineno"></span><span class="comment" id="1905170">//&nbsp;and&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;next&nbsp;rune&nbsp;starts.</span><br>
<span class="lineno"></span><span class="keyword" id="1905215">func</span>&nbsp;<span class="ident" id="1905220">stringiter2</span><span class="op" id="1905231">(</span><span class="ident" id="1905232">s</span>&nbsp;<span class="builtintype" id="1905234">string</span><span class="op" id="1905240">,</span>&nbsp;<span class="ident" id="1905242">k</span>&nbsp;<span class="builtintype" id="1905244">int</span><span class="op" id="1905247">)</span>&nbsp;<span class="op" id="1905249">(</span><span class="builtintype" id="1905250">int</span><span class="op" id="1905253">,</span>&nbsp;<span class="builtintype" id="1905255">rune</span><span class="op" id="1905259">)</span>&nbsp;<span class="op" id="1905261">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905264">if</span>&nbsp;<span class="ident" id="1905267">k</span>&nbsp;<span class="op" id="1905269">&gt;=</span>&nbsp;<span class="builtinfunc" id="1905272">len</span><span class="op" id="1905275">(</span><span class="ident" id="1905276">s</span><span class="op" id="1905277">)</span>&nbsp;<span class="op" id="1905279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1905283">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905310">return</span>&nbsp;<span class="num" id="1905317">0</span><span class="op" id="1905318">,</span>&nbsp;<span class="num" id="1905320">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1905327">c</span>&nbsp;<span class="op" id="1905329">:=</span>&nbsp;<span class="ident" id="1905332">s</span><span class="op" id="1905333">[</span><span class="ident" id="1905334">k</span><span class="op" id="1905335">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905338">if</span>&nbsp;<span class="ident" id="1905341">c</span>&nbsp;<span class="op" id="1905343">&lt;</span>&nbsp;<span class="ident" id="1905345">runeself</span>&nbsp;<span class="op" id="1905354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905358">return</span>&nbsp;<span class="ident" id="1905365">k</span>&nbsp;<span class="op" id="1905367">+</span>&nbsp;<span class="num" id="1905369">1</span><span class="op" id="1905370">,</span>&nbsp;<span class="builtintype" id="1905372">rune</span><span class="op" id="1905376">(</span><span class="ident" id="1905377">c</span><span class="op" id="1905378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1905385">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1905405">r</span><span class="op" id="1905406">,</span>&nbsp;<span class="ident" id="1905408">n</span>&nbsp;<span class="op" id="1905410">:=</span>&nbsp;<span class="ident" id="1905413">charntorune</span><span class="op" id="1905424">(</span><span class="ident" id="1905425">s</span><span class="op" id="1905426">[</span><span class="ident" id="1905427">k</span><span class="op" id="1905428">:</span><span class="op" id="1905429">]</span><span class="op" id="1905430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1905433">return</span>&nbsp;<span class="ident" id="1905440">k</span>&nbsp;<span class="op" id="1905442">+</span>&nbsp;<span class="ident" id="1905444">n</span><span class="op" id="1905445">,</span>&nbsp;<span class="ident" id="1905447">r</span><br>
<span class="lineno"></span><span class="op" id="1905449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="1905452">//&nbsp;rawstring&nbsp;allocates&nbsp;storage&nbsp;for&nbsp;a&nbsp;new&nbsp;string.&nbsp;The&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="1905514">//&nbsp;string&nbsp;and&nbsp;byte&nbsp;slice&nbsp;both&nbsp;refer&nbsp;to&nbsp;the&nbsp;same&nbsp;storage.</span><br>
<span class="lineno"></span><span class="comment" id="1905571">//&nbsp;The&nbsp;storage&nbsp;is&nbsp;not&nbsp;zeroed.&nbsp;Callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1905620">//&nbsp;b&nbsp;to&nbsp;set&nbsp;the&nbsp;string&nbsp;contents&nbsp;and&nbsp;then&nbsp;drop&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="1905669">func</span>&nbsp;<span class="ident" id="1905674">rawstring</span><span class="op" id="1905683">(</span><span class="ident" id="1905684">size</span>&nbsp;<span class="builtintype" id="1905689">int</span><span class="op" id="1905692">)</span>&nbsp;<span class="op" id="1905694">(</span><span class="ident" id="1905695">s</span>&nbsp;<span class="builtintype" id="1905697">string</span><span class="op" id="1905703">,</span>&nbsp;<span class="ident" id="1905705">b</span>&nbsp;<span class="op" id="1905707">[</span><span class="op" id="1905708">]</span><span class="builtintype" id="1905709">byte</span><span class="op" id="1905713">)</span>&nbsp;<span class="op" id="1905715">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1905718">p</span>&nbsp;<span class="op" id="1905720">:=</span>&nbsp;<span class="ident" id="1905723">mallocgc</span><span class="op" id="1905731">(</span><span class="builtintype" id="1905732">uintptr</span><span class="op" id="1905739">(</span><span class="ident" id="1905740">size</span><span class="op" id="1905744">)</span><span class="op" id="1905745">,</span>&nbsp;<span class="ident" id="1905747">nil</span><span class="op" id="1905750">,</span>&nbsp;<span class="ident" id="1905752">flagNoScan</span><span class="op" id="1905762">|</span><span class="ident" id="1905763">flagNoZero</span><span class="op" id="1905773">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905777">(</span><span class="op" id="1905778">*</span><span class="ident" id="1905779">stringStruct</span><span class="op" id="1905791">)</span><span class="op" id="1905792">(</span><span class="ident" id="1905793">unsafe</span><span class="op" id="1905799">.</span><span class="ident" id="1905800">Pointer</span><span class="op" id="1905807">(</span><span class="op" id="1905808">&amp;</span><span class="ident" id="1905809">s</span><span class="op" id="1905810">)</span><span class="op" id="1905811">)</span><span class="op" id="1905812">.</span><span class="ident" id="1905813">str</span>&nbsp;<span class="op" id="1905817">=</span>&nbsp;<span class="ident" id="1905819">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905822">(</span><span class="op" id="1905823">*</span><span class="ident" id="1905824">stringStruct</span><span class="op" id="1905836">)</span><span class="op" id="1905837">(</span><span class="ident" id="1905838">unsafe</span><span class="op" id="1905844">.</span><span class="ident" id="1905845">Pointer</span><span class="op" id="1905852">(</span><span class="op" id="1905853">&amp;</span><span class="ident" id="1905854">s</span><span class="op" id="1905855">)</span><span class="op" id="1905856">)</span><span class="op" id="1905857">.</span><span class="builtinfunc" id="1905858">len</span>&nbsp;<span class="op" id="1905862">=</span>&nbsp;<span class="ident" id="1905864">size</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905871">(</span><span class="op" id="1905872">*</span><span class="ident" id="1905873">slice</span><span class="op" id="1905878">)</span><span class="op" id="1905879">(</span><span class="ident" id="1905880">unsafe</span><span class="op" id="1905886">.</span><span class="ident" id="1905887">Pointer</span><span class="op" id="1905894">(</span><span class="op" id="1905895">&amp;</span><span class="ident" id="1905896">b</span><span class="op" id="1905897">)</span><span class="op" id="1905898">)</span><span class="op" id="1905899">.</span><span class="ident" id="1905900">array</span>&nbsp;<span class="op" id="1905906">=</span>&nbsp;<span class="op" id="1905908">(</span><span class="op" id="1905909">*</span><span class="builtintype" id="1905910">uint8</span><span class="op" id="1905915">)</span><span class="op" id="1905916">(</span><span class="ident" id="1905917">p</span><span class="op" id="1905918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905921">(</span><span class="op" id="1905922">*</span><span class="ident" id="1905923">slice</span><span class="op" id="1905928">)</span><span class="op" id="1905929">(</span><span class="ident" id="1905930">unsafe</span><span class="op" id="1905936">.</span><span class="ident" id="1905937">Pointer</span><span class="op" id="1905944">(</span><span class="op" id="1905945">&amp;</span><span class="ident" id="1905946">b</span><span class="op" id="1905947">)</span><span class="op" id="1905948">)</span><span class="op" id="1905949">.</span><span class="builtinfunc" id="1905950">len</span>&nbsp;<span class="op" id="1905954">=</span>&nbsp;<span class="builtintype" id="1905956">uint</span><span class="op" id="1905960">(</span><span class="ident" id="1905961">size</span><span class="op" id="1905965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1905968">(</span><span class="op" id="1905969">*</span><span class="ident" id="1905970">slice</span><span class="op" id="1905975">)</span><span class="op" id="1905976">(</span><span class="ident" id="1905977">unsafe</span><span class="op" id="1905983">.</span><span class="ident" id="1905984">Pointer</span><span class="op" id="1905991">(</span><span class="op" id="1905992">&amp;</span><span class="ident" id="1905993">b</span><span class="op" id="1905994">)</span><span class="op" id="1905995">)</span><span class="op" id="1905996">.</span><span class="builtinfunc" id="1905997">cap</span>&nbsp;<span class="op" id="1906001">=</span>&nbsp;<span class="builtintype" id="1906003">uint</span><span class="op" id="1906007">(</span><span class="ident" id="1906008">size</span><span class="op" id="1906012">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906016">for</span>&nbsp;<span class="op" id="1906020">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906024">ms</span>&nbsp;<span class="op" id="1906027">:=</span>&nbsp;<span class="ident" id="1906030">maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906042">if</span>&nbsp;<span class="builtintype" id="1906045">uintptr</span><span class="op" id="1906052">(</span><span class="ident" id="1906053">size</span><span class="op" id="1906057">)</span>&nbsp;<span class="op" id="1906059">&lt;=</span>&nbsp;<span class="builtintype" id="1906062">uintptr</span><span class="op" id="1906069">(</span><span class="ident" id="1906070">ms</span><span class="op" id="1906072">)</span>&nbsp;<span class="op" id="1906074">||</span>&nbsp;<span class="ident" id="1906077">casuintptr</span><span class="op" id="1906087">(</span><span class="op" id="1906088">(</span><span class="op" id="1906089">*</span><span class="builtintype" id="1906090">uintptr</span><span class="op" id="1906097">)</span><span class="op" id="1906098">(</span><span class="ident" id="1906099">unsafe</span><span class="op" id="1906105">.</span><span class="ident" id="1906106">Pointer</span><span class="op" id="1906113">(</span><span class="op" id="1906114">&amp;</span><span class="ident" id="1906115">maxstring</span><span class="op" id="1906124">)</span><span class="op" id="1906125">)</span><span class="op" id="1906126">,</span>&nbsp;<span class="builtintype" id="1906128">uintptr</span><span class="op" id="1906135">(</span><span class="ident" id="1906136">ms</span><span class="op" id="1906138">)</span><span class="op" id="1906139">,</span>&nbsp;<span class="builtintype" id="1906141">uintptr</span><span class="op" id="1906148">(</span><span class="ident" id="1906149">size</span><span class="op" id="1906153">)</span><span class="op" id="1906154">)</span>&nbsp;<span class="op" id="1906156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906161">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906173">}</span><br>
<span class="lineno">210</span><span class="op" id="1906175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1906178">//&nbsp;rawbyteslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;byte&nbsp;slice.&nbsp;The&nbsp;byte&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1906252">func</span>&nbsp;<span class="ident" id="1906257">rawbyteslice</span><span class="op" id="1906269">(</span><span class="ident" id="1906270">size</span>&nbsp;<span class="builtintype" id="1906275">int</span><span class="op" id="1906278">)</span>&nbsp;<span class="op" id="1906280">(</span><span class="ident" id="1906281">b</span>&nbsp;<span class="op" id="1906283">[</span><span class="op" id="1906284">]</span><span class="builtintype" id="1906285">byte</span><span class="op" id="1906289">)</span>&nbsp;<span class="op" id="1906291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1906294">cap</span>&nbsp;<span class="op" id="1906298">:=</span>&nbsp;<span class="ident" id="1906301">goroundupsize</span><span class="op" id="1906314">(</span><span class="builtintype" id="1906315">uintptr</span><span class="op" id="1906322">(</span><span class="ident" id="1906323">size</span><span class="op" id="1906327">)</span><span class="op" id="1906328">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906331">p</span>&nbsp;<span class="op" id="1906333">:=</span>&nbsp;<span class="ident" id="1906336">mallocgc</span><span class="op" id="1906344">(</span><span class="builtinfunc" id="1906345">cap</span><span class="op" id="1906348">,</span>&nbsp;<span class="ident" id="1906350">nil</span><span class="op" id="1906353">,</span>&nbsp;<span class="ident" id="1906355">flagNoScan</span><span class="op" id="1906365">|</span><span class="ident" id="1906366">flagNoZero</span><span class="op" id="1906376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906379">if</span>&nbsp;<span class="builtinfunc" id="1906382">cap</span>&nbsp;<span class="op" id="1906386">!=</span>&nbsp;<span class="builtintype" id="1906389">uintptr</span><span class="op" id="1906396">(</span><span class="ident" id="1906397">size</span><span class="op" id="1906401">)</span>&nbsp;<span class="op" id="1906403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906407">memclr</span><span class="op" id="1906413">(</span><span class="ident" id="1906414">add</span><span class="op" id="1906417">(</span><span class="ident" id="1906418">p</span><span class="op" id="1906419">,</span>&nbsp;<span class="builtintype" id="1906421">uintptr</span><span class="op" id="1906428">(</span><span class="ident" id="1906429">size</span><span class="op" id="1906433">)</span><span class="op" id="1906434">)</span><span class="op" id="1906435">,</span>&nbsp;<span class="builtinfunc" id="1906437">cap</span><span class="op" id="1906440">-</span><span class="builtintype" id="1906441">uintptr</span><span class="op" id="1906448">(</span><span class="ident" id="1906449">size</span><span class="op" id="1906453">)</span><span class="op" id="1906454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906461">(</span><span class="op" id="1906462">*</span><span class="ident" id="1906463">slice</span><span class="op" id="1906468">)</span><span class="op" id="1906469">(</span><span class="ident" id="1906470">unsafe</span><span class="op" id="1906476">.</span><span class="ident" id="1906477">Pointer</span><span class="op" id="1906484">(</span><span class="op" id="1906485">&amp;</span><span class="ident" id="1906486">b</span><span class="op" id="1906487">)</span><span class="op" id="1906488">)</span><span class="op" id="1906489">.</span><span class="ident" id="1906490">array</span>&nbsp;<span class="op" id="1906496">=</span>&nbsp;<span class="op" id="1906498">(</span><span class="op" id="1906499">*</span><span class="builtintype" id="1906500">uint8</span><span class="op" id="1906505">)</span><span class="op" id="1906506">(</span><span class="ident" id="1906507">p</span><span class="op" id="1906508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906511">(</span><span class="op" id="1906512">*</span><span class="ident" id="1906513">slice</span><span class="op" id="1906518">)</span><span class="op" id="1906519">(</span><span class="ident" id="1906520">unsafe</span><span class="op" id="1906526">.</span><span class="ident" id="1906527">Pointer</span><span class="op" id="1906534">(</span><span class="op" id="1906535">&amp;</span><span class="ident" id="1906536">b</span><span class="op" id="1906537">)</span><span class="op" id="1906538">)</span><span class="op" id="1906539">.</span><span class="builtinfunc" id="1906540">len</span>&nbsp;<span class="op" id="1906544">=</span>&nbsp;<span class="builtintype" id="1906546">uint</span><span class="op" id="1906550">(</span><span class="ident" id="1906551">size</span><span class="op" id="1906555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906558">(</span><span class="op" id="1906559">*</span><span class="ident" id="1906560">slice</span><span class="op" id="1906565">)</span><span class="op" id="1906566">(</span><span class="ident" id="1906567">unsafe</span><span class="op" id="1906573">.</span><span class="ident" id="1906574">Pointer</span><span class="op" id="1906581">(</span><span class="op" id="1906582">&amp;</span><span class="ident" id="1906583">b</span><span class="op" id="1906584">)</span><span class="op" id="1906585">)</span><span class="op" id="1906586">.</span><span class="builtinfunc" id="1906587">cap</span>&nbsp;<span class="op" id="1906591">=</span>&nbsp;<span class="builtintype" id="1906593">uint</span><span class="op" id="1906597">(</span><span class="builtinfunc" id="1906598">cap</span><span class="op" id="1906601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906604">return</span><br>
<span class="lineno"></span><span class="op" id="1906611">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1906614">//&nbsp;rawruneslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;rune&nbsp;slice.&nbsp;The&nbsp;rune&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1906688">func</span>&nbsp;<span class="ident" id="1906693">rawruneslice</span><span class="op" id="1906705">(</span><span class="ident" id="1906706">size</span>&nbsp;<span class="builtintype" id="1906711">int</span><span class="op" id="1906714">)</span>&nbsp;<span class="op" id="1906716">(</span><span class="ident" id="1906717">b</span>&nbsp;<span class="op" id="1906719">[</span><span class="op" id="1906720">]</span><span class="builtintype" id="1906721">rune</span><span class="op" id="1906725">)</span>&nbsp;<span class="op" id="1906727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906730">if</span>&nbsp;<span class="builtintype" id="1906733">uintptr</span><span class="op" id="1906740">(</span><span class="ident" id="1906741">size</span><span class="op" id="1906745">)</span>&nbsp;<span class="op" id="1906747">&gt;</span>&nbsp;<span class="ident" id="1906749">maxmem</span><span class="op" id="1906755">/</span><span class="num" id="1906756">4</span>&nbsp;<span class="op" id="1906758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906762">gothrow</span><span class="op" id="1906769">(</span><span class="string" id="1906770">&#34;out&nbsp;of&nbsp;memory&#34;</span><span class="op" id="1906785">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906791">mem</span>&nbsp;<span class="op" id="1906795">:=</span>&nbsp;<span class="ident" id="1906798">goroundupsize</span><span class="op" id="1906811">(</span><span class="builtintype" id="1906812">uintptr</span><span class="op" id="1906819">(</span><span class="ident" id="1906820">size</span><span class="op" id="1906824">)</span>&nbsp;<span class="op" id="1906826">*</span>&nbsp;<span class="num" id="1906828">4</span><span class="op" id="1906829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906832">p</span>&nbsp;<span class="op" id="1906834">:=</span>&nbsp;<span class="ident" id="1906837">mallocgc</span><span class="op" id="1906845">(</span><span class="ident" id="1906846">mem</span><span class="op" id="1906849">,</span>&nbsp;<span class="ident" id="1906851">nil</span><span class="op" id="1906854">,</span>&nbsp;<span class="ident" id="1906856">flagNoScan</span><span class="op" id="1906866">|</span><span class="ident" id="1906867">flagNoZero</span><span class="op" id="1906877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1906880">if</span>&nbsp;<span class="ident" id="1906883">mem</span>&nbsp;<span class="op" id="1906887">!=</span>&nbsp;<span class="builtintype" id="1906890">uintptr</span><span class="op" id="1906897">(</span><span class="ident" id="1906898">size</span><span class="op" id="1906902">)</span><span class="op" id="1906903">*</span><span class="num" id="1906904">4</span>&nbsp;<span class="op" id="1906906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1906910">memclr</span><span class="op" id="1906916">(</span><span class="ident" id="1906917">add</span><span class="op" id="1906920">(</span><span class="ident" id="1906921">p</span><span class="op" id="1906922">,</span>&nbsp;<span class="builtintype" id="1906924">uintptr</span><span class="op" id="1906931">(</span><span class="ident" id="1906932">size</span><span class="op" id="1906936">)</span><span class="op" id="1906937">*</span><span class="num" id="1906938">4</span><span class="op" id="1906939">)</span><span class="op" id="1906940">,</span>&nbsp;<span class="ident" id="1906942">mem</span><span class="op" id="1906945">-</span><span class="builtintype" id="1906946">uintptr</span><span class="op" id="1906953">(</span><span class="ident" id="1906954">size</span><span class="op" id="1906958">)</span><span class="op" id="1906959">*</span><span class="num" id="1906960">4</span><span class="op" id="1906961">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1906968">(</span><span class="op" id="1906969">*</span><span class="ident" id="1906970">slice</span><span class="op" id="1906975">)</span><span class="op" id="1906976">(</span><span class="ident" id="1906977">unsafe</span><span class="op" id="1906983">.</span><span class="ident" id="1906984">Pointer</span><span class="op" id="1906991">(</span><span class="op" id="1906992">&amp;</span><span class="ident" id="1906993">b</span><span class="op" id="1906994">)</span><span class="op" id="1906995">)</span><span class="op" id="1906996">.</span><span class="ident" id="1906997">array</span>&nbsp;<span class="op" id="1907003">=</span>&nbsp;<span class="op" id="1907005">(</span><span class="op" id="1907006">*</span><span class="builtintype" id="1907007">uint8</span><span class="op" id="1907012">)</span><span class="op" id="1907013">(</span><span class="ident" id="1907014">p</span><span class="op" id="1907015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907018">(</span><span class="op" id="1907019">*</span><span class="ident" id="1907020">slice</span><span class="op" id="1907025">)</span><span class="op" id="1907026">(</span><span class="ident" id="1907027">unsafe</span><span class="op" id="1907033">.</span><span class="ident" id="1907034">Pointer</span><span class="op" id="1907041">(</span><span class="op" id="1907042">&amp;</span><span class="ident" id="1907043">b</span><span class="op" id="1907044">)</span><span class="op" id="1907045">)</span><span class="op" id="1907046">.</span><span class="builtinfunc" id="1907047">len</span>&nbsp;<span class="op" id="1907051">=</span>&nbsp;<span class="builtintype" id="1907053">uint</span><span class="op" id="1907057">(</span><span class="ident" id="1907058">size</span><span class="op" id="1907062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907065">(</span><span class="op" id="1907066">*</span><span class="ident" id="1907067">slice</span><span class="op" id="1907072">)</span><span class="op" id="1907073">(</span><span class="ident" id="1907074">unsafe</span><span class="op" id="1907080">.</span><span class="ident" id="1907081">Pointer</span><span class="op" id="1907088">(</span><span class="op" id="1907089">&amp;</span><span class="ident" id="1907090">b</span><span class="op" id="1907091">)</span><span class="op" id="1907092">)</span><span class="op" id="1907093">.</span><span class="builtinfunc" id="1907094">cap</span>&nbsp;<span class="op" id="1907098">=</span>&nbsp;<span class="builtintype" id="1907100">uint</span><span class="op" id="1907104">(</span><span class="ident" id="1907105">mem</span>&nbsp;<span class="op" id="1907109">/</span>&nbsp;<span class="num" id="1907111">4</span><span class="op" id="1907112">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907115">return</span><br>
<span class="lineno"></span><span class="op" id="1907122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1907125">//&nbsp;used&nbsp;by&nbsp;cmd/cgo</span><br>
<span class="lineno"></span><span class="keyword" id="1907144">func</span>&nbsp;<span class="ident" id="1907149">gobytes</span><span class="op" id="1907156">(</span><span class="ident" id="1907157">p</span>&nbsp;<span class="op" id="1907159">*</span><span class="builtintype" id="1907160">byte</span><span class="op" id="1907164">,</span>&nbsp;<span class="ident" id="1907166">n</span>&nbsp;<span class="builtintype" id="1907168">int</span><span class="op" id="1907171">)</span>&nbsp;<span class="op" id="1907173">[</span><span class="op" id="1907174">]</span><span class="builtintype" id="1907175">byte</span>&nbsp;<span class="op" id="1907180">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907183">if</span>&nbsp;<span class="ident" id="1907186">n</span>&nbsp;<span class="op" id="1907188">==</span>&nbsp;<span class="num" id="1907191">0</span>&nbsp;<span class="op" id="1907193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907197">return</span>&nbsp;<span class="builtinfunc" id="1907204">make</span><span class="op" id="1907208">(</span><span class="op" id="1907209">[</span><span class="op" id="1907210">]</span><span class="builtintype" id="1907211">byte</span><span class="op" id="1907215">,</span>&nbsp;<span class="num" id="1907217">0</span><span class="op" id="1907218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907224">x</span>&nbsp;<span class="op" id="1907226">:=</span>&nbsp;<span class="builtinfunc" id="1907229">make</span><span class="op" id="1907233">(</span><span class="op" id="1907234">[</span><span class="op" id="1907235">]</span><span class="builtintype" id="1907236">byte</span><span class="op" id="1907240">,</span>&nbsp;<span class="ident" id="1907242">n</span><span class="op" id="1907243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907246">memmove</span><span class="op" id="1907253">(</span><span class="ident" id="1907254">unsafe</span><span class="op" id="1907260">.</span><span class="ident" id="1907261">Pointer</span><span class="op" id="1907268">(</span><span class="op" id="1907269">&amp;</span><span class="ident" id="1907270">x</span><span class="op" id="1907271">[</span><span class="num" id="1907272">0</span><span class="op" id="1907273">]</span><span class="op" id="1907274">)</span><span class="op" id="1907275">,</span>&nbsp;<span class="ident" id="1907277">unsafe</span><span class="op" id="1907283">.</span><span class="ident" id="1907284">Pointer</span><span class="op" id="1907291">(</span><span class="ident" id="1907292">p</span><span class="op" id="1907293">)</span><span class="op" id="1907294">,</span>&nbsp;<span class="builtintype" id="1907296">uintptr</span><span class="op" id="1907303">(</span><span class="ident" id="1907304">n</span><span class="op" id="1907305">)</span><span class="op" id="1907306">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907309">return</span>&nbsp;<span class="ident" id="1907316">x</span><br>
<span class="lineno"></span><span class="op" id="1907318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1907321">func</span>&nbsp;<span class="ident" id="1907326">gostringsize</span><span class="op" id="1907338">(</span><span class="ident" id="1907339">n</span>&nbsp;<span class="builtintype" id="1907341">int</span><span class="op" id="1907344">)</span>&nbsp;<span class="builtintype" id="1907346">string</span>&nbsp;<span class="op" id="1907353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907356">s</span><span class="op" id="1907357">,</span>&nbsp;<span class="ident" id="1907359">_</span>&nbsp;<span class="op" id="1907361">:=</span>&nbsp;<span class="ident" id="1907364">rawstring</span><span class="op" id="1907373">(</span><span class="ident" id="1907374">n</span><span class="op" id="1907375">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907378">return</span>&nbsp;<span class="ident" id="1907385">s</span><br>
<span class="lineno"></span><span class="op" id="1907387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1907390">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1907404">func</span>&nbsp;<span class="ident" id="1907409">findnull</span><span class="op" id="1907417">(</span><span class="op" id="1907418">*</span><span class="builtintype" id="1907419">byte</span><span class="op" id="1907423">)</span>&nbsp;<span class="builtintype" id="1907425">int</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="1907430">func</span>&nbsp;<span class="ident" id="1907435">gostring</span><span class="op" id="1907443">(</span><span class="ident" id="1907444">p</span>&nbsp;<span class="op" id="1907446">*</span><span class="builtintype" id="1907447">byte</span><span class="op" id="1907451">)</span>&nbsp;<span class="builtintype" id="1907453">string</span>&nbsp;<span class="op" id="1907460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907463">l</span>&nbsp;<span class="op" id="1907465">:=</span>&nbsp;<span class="ident" id="1907468">findnull</span><span class="op" id="1907476">(</span><span class="ident" id="1907477">p</span><span class="op" id="1907478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907481">if</span>&nbsp;<span class="ident" id="1907484">l</span>&nbsp;<span class="op" id="1907486">==</span>&nbsp;<span class="num" id="1907489">0</span>&nbsp;<span class="op" id="1907491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907495">return</span>&nbsp;<span class="string" id="1907502">&#34;&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907509">s</span><span class="op" id="1907510">,</span>&nbsp;<span class="ident" id="1907512">b</span>&nbsp;<span class="op" id="1907514">:=</span>&nbsp;<span class="ident" id="1907517">rawstring</span><span class="op" id="1907526">(</span><span class="ident" id="1907527">l</span><span class="op" id="1907528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907531">memmove</span><span class="op" id="1907538">(</span><span class="ident" id="1907539">unsafe</span><span class="op" id="1907545">.</span><span class="ident" id="1907546">Pointer</span><span class="op" id="1907553">(</span><span class="op" id="1907554">&amp;</span><span class="ident" id="1907555">b</span><span class="op" id="1907556">[</span><span class="num" id="1907557">0</span><span class="op" id="1907558">]</span><span class="op" id="1907559">)</span><span class="op" id="1907560">,</span>&nbsp;<span class="ident" id="1907562">unsafe</span><span class="op" id="1907568">.</span><span class="ident" id="1907569">Pointer</span><span class="op" id="1907576">(</span><span class="ident" id="1907577">p</span><span class="op" id="1907578">)</span><span class="op" id="1907579">,</span>&nbsp;<span class="builtintype" id="1907581">uintptr</span><span class="op" id="1907588">(</span><span class="ident" id="1907589">l</span><span class="op" id="1907590">)</span><span class="op" id="1907591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907594">return</span>&nbsp;<span class="ident" id="1907601">s</span><br>
<span class="lineno"></span><span class="op" id="1907603">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="1907606">func</span>&nbsp;<span class="ident" id="1907611">gostringn</span><span class="op" id="1907620">(</span><span class="ident" id="1907621">p</span>&nbsp;<span class="op" id="1907623">*</span><span class="builtintype" id="1907624">byte</span><span class="op" id="1907628">,</span>&nbsp;<span class="ident" id="1907630">l</span>&nbsp;<span class="builtintype" id="1907632">int</span><span class="op" id="1907635">)</span>&nbsp;<span class="builtintype" id="1907637">string</span>&nbsp;<span class="op" id="1907644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907647">if</span>&nbsp;<span class="ident" id="1907650">l</span>&nbsp;<span class="op" id="1907652">==</span>&nbsp;<span class="num" id="1907655">0</span>&nbsp;<span class="op" id="1907657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907661">return</span>&nbsp;<span class="string" id="1907668">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907672">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907675">s</span><span class="op" id="1907676">,</span>&nbsp;<span class="ident" id="1907678">b</span>&nbsp;<span class="op" id="1907680">:=</span>&nbsp;<span class="ident" id="1907683">rawstring</span><span class="op" id="1907692">(</span><span class="ident" id="1907693">l</span><span class="op" id="1907694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1907697">memmove</span><span class="op" id="1907704">(</span><span class="ident" id="1907705">unsafe</span><span class="op" id="1907711">.</span><span class="ident" id="1907712">Pointer</span><span class="op" id="1907719">(</span><span class="op" id="1907720">&amp;</span><span class="ident" id="1907721">b</span><span class="op" id="1907722">[</span><span class="num" id="1907723">0</span><span class="op" id="1907724">]</span><span class="op" id="1907725">)</span><span class="op" id="1907726">,</span>&nbsp;<span class="ident" id="1907728">unsafe</span><span class="op" id="1907734">.</span><span class="ident" id="1907735">Pointer</span><span class="op" id="1907742">(</span><span class="ident" id="1907743">p</span><span class="op" id="1907744">)</span><span class="op" id="1907745">,</span>&nbsp;<span class="builtintype" id="1907747">uintptr</span><span class="op" id="1907754">(</span><span class="ident" id="1907755">l</span><span class="op" id="1907756">)</span><span class="op" id="1907757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907760">return</span>&nbsp;<span class="ident" id="1907767">s</span><br>
<span class="lineno"></span><span class="op" id="1907769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="1907772">func</span>&nbsp;<span class="ident" id="1907777">index</span><span class="op" id="1907782">(</span><span class="ident" id="1907783">s</span><span class="op" id="1907784">,</span>&nbsp;<span class="ident" id="1907786">t</span>&nbsp;<span class="builtintype" id="1907788">string</span><span class="op" id="1907794">)</span>&nbsp;<span class="builtintype" id="1907796">int</span>&nbsp;<span class="op" id="1907800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907803">if</span>&nbsp;<span class="builtinfunc" id="1907806">len</span><span class="op" id="1907809">(</span><span class="ident" id="1907810">t</span><span class="op" id="1907811">)</span>&nbsp;<span class="op" id="1907813">==</span>&nbsp;<span class="num" id="1907816">0</span>&nbsp;<span class="op" id="1907818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907822">return</span>&nbsp;<span class="num" id="1907829">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907835">for</span>&nbsp;<span class="ident" id="1907839">i</span>&nbsp;<span class="op" id="1907841">:=</span>&nbsp;<span class="num" id="1907844">0</span><span class="op" id="1907845">;</span>&nbsp;<span class="ident" id="1907847">i</span>&nbsp;<span class="op" id="1907849">&lt;</span>&nbsp;<span class="builtinfunc" id="1907851">len</span><span class="op" id="1907854">(</span><span class="ident" id="1907855">s</span><span class="op" id="1907856">)</span><span class="op" id="1907857">;</span>&nbsp;<span class="ident" id="1907859">i</span><span class="op" id="1907860">++</span>&nbsp;<span class="op" id="1907863">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907867">if</span>&nbsp;<span class="ident" id="1907870">s</span><span class="op" id="1907871">[</span><span class="ident" id="1907872">i</span><span class="op" id="1907873">]</span>&nbsp;<span class="op" id="1907875">==</span>&nbsp;<span class="ident" id="1907878">t</span><span class="op" id="1907879">[</span><span class="num" id="1907880">0</span><span class="op" id="1907881">]</span>&nbsp;<span class="op" id="1907883">&amp;&amp;</span>&nbsp;<span class="ident" id="1907886">hasprefix</span><span class="op" id="1907895">(</span><span class="ident" id="1907896">s</span><span class="op" id="1907897">[</span><span class="ident" id="1907898">i</span><span class="op" id="1907899">:</span><span class="op" id="1907900">]</span><span class="op" id="1907901">,</span>&nbsp;<span class="ident" id="1907903">t</span><span class="op" id="1907904">)</span>&nbsp;<span class="op" id="1907906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907911">return</span>&nbsp;<span class="ident" id="1907918">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1907925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907928">return</span>&nbsp;<span class="op" id="1907935">-</span><span class="num" id="1907936">1</span><br>
<span class="lineno">290</span><span class="op" id="1907938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1907941">func</span>&nbsp;<span class="ident" id="1907946">contains</span><span class="op" id="1907954">(</span><span class="ident" id="1907955">s</span><span class="op" id="1907956">,</span>&nbsp;<span class="ident" id="1907958">t</span>&nbsp;<span class="builtintype" id="1907960">string</span><span class="op" id="1907966">)</span>&nbsp;<span class="builtintype" id="1907968">bool</span>&nbsp;<span class="op" id="1907973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1907976">return</span>&nbsp;<span class="ident" id="1907983">index</span><span class="op" id="1907988">(</span><span class="ident" id="1907989">s</span><span class="op" id="1907990">,</span>&nbsp;<span class="ident" id="1907992">t</span><span class="op" id="1907993">)</span>&nbsp;<span class="op" id="1907995">&gt;=</span>&nbsp;<span class="num" id="1907998">0</span><br>
<span class="lineno"></span><span class="op" id="1908000">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span><span class="keyword" id="1908003">func</span>&nbsp;<span class="ident" id="1908008">hasprefix</span><span class="op" id="1908017">(</span><span class="ident" id="1908018">s</span><span class="op" id="1908019">,</span>&nbsp;<span class="ident" id="1908021">t</span>&nbsp;<span class="builtintype" id="1908023">string</span><span class="op" id="1908029">)</span>&nbsp;<span class="builtintype" id="1908031">bool</span>&nbsp;<span class="op" id="1908036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1908039">return</span>&nbsp;<span class="builtinfunc" id="1908046">len</span><span class="op" id="1908049">(</span><span class="ident" id="1908050">s</span><span class="op" id="1908051">)</span>&nbsp;<span class="op" id="1908053">&gt;=</span>&nbsp;<span class="builtinfunc" id="1908056">len</span><span class="op" id="1908059">(</span><span class="ident" id="1908060">t</span><span class="op" id="1908061">)</span>&nbsp;<span class="op" id="1908063">&amp;&amp;</span>&nbsp;<span class="ident" id="1908066">s</span><span class="op" id="1908067">[</span><span class="op" id="1908068">:</span><span class="builtinfunc" id="1908069">len</span><span class="op" id="1908072">(</span><span class="ident" id="1908073">t</span><span class="op" id="1908074">)</span><span class="op" id="1908075">]</span>&nbsp;<span class="op" id="1908077">==</span>&nbsp;<span class="ident" id="1908080">t</span><br>
<span class="lineno"></span><span class="op" id="1908082">}</span>
</div>
</body>
</html>
