<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html" class="current">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2921106">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2921161">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2921215">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2921266">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="2921323">package</span>&nbsp;<span class="ident" id="2921331">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2921339">import</span>&nbsp;<span class="op" id="2921346">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2921349">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2921358">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2921364">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2921370">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2921378">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="2921385">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2921388">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="2921463">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="2921528">func</span>&nbsp;<span class="ident" id="2921533">readAll</span><span class="op" id="2921540">(</span><span class="ident" id="2921541">r</span>&nbsp;<span class="ident" id="2921543">io</span><span class="op" id="2921545">.</span><span class="ident" id="2921546">Reader</span><span class="op" id="2921552">,</span>&nbsp;<span class="ident" id="2921554">capacity</span>&nbsp;<span class="ident" id="2921563">int64</span><span class="op" id="2921568">)</span>&nbsp;<span class="op" id="2921570">(</span><span class="ident" id="2921571">b</span>&nbsp;<span class="op" id="2921573">[</span><span class="op" id="2921574">]</span><span class="builtintype" id="2921575">byte</span><span class="op" id="2921579">,</span>&nbsp;<span class="ident" id="2921581">err</span>&nbsp;<span class="builtintype" id="2921585">error</span><span class="op" id="2921590">)</span>&nbsp;<span class="op" id="2921592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921595">buf</span>&nbsp;<span class="op" id="2921599">:=</span>&nbsp;<span class="ident" id="2921602">bytes</span><span class="op" id="2921607">.</span><span class="ident" id="2921608">NewBuffer</span><span class="op" id="2921617">(</span><span class="builtinfunc" id="2921618">make</span><span class="op" id="2921622">(</span><span class="op" id="2921623">[</span><span class="op" id="2921624">]</span><span class="builtintype" id="2921625">byte</span><span class="op" id="2921629">,</span>&nbsp;<span class="num" id="2921631">0</span><span class="op" id="2921632">,</span>&nbsp;<span class="ident" id="2921634">capacity</span><span class="op" id="2921642">)</span><span class="op" id="2921643">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2921646">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2921706">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921760">defer</span>&nbsp;<span class="keyword" id="2921766">func</span><span class="op" id="2921770">(</span><span class="op" id="2921771">)</span>&nbsp;<span class="op" id="2921773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921777">e</span>&nbsp;<span class="op" id="2921779">:=</span>&nbsp;<span class="builtinfunc" id="2921782">recover</span><span class="op" id="2921789">(</span><span class="op" id="2921790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921794">if</span>&nbsp;<span class="ident" id="2921797">e</span>&nbsp;<span class="op" id="2921799">==</span>&nbsp;<span class="ident" id="2921802">nil</span>&nbsp;<span class="op" id="2921806">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921811">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921824">if</span>&nbsp;<span class="ident" id="2921827">panicErr</span><span class="op" id="2921835">,</span>&nbsp;<span class="ident" id="2921837">ok</span>&nbsp;<span class="op" id="2921840">:=</span>&nbsp;<span class="ident" id="2921843">e</span><span class="op" id="2921844">.</span><span class="op" id="2921845">(</span><span class="builtintype" id="2921846">error</span><span class="op" id="2921851">)</span><span class="op" id="2921852">;</span>&nbsp;<span class="ident" id="2921854">ok</span>&nbsp;<span class="op" id="2921857">&amp;&amp;</span>&nbsp;<span class="ident" id="2921860">panicErr</span>&nbsp;<span class="op" id="2921869">==</span>&nbsp;<span class="ident" id="2921872">bytes</span><span class="op" id="2921877">.</span><span class="ident" id="2921878">ErrTooLarge</span>&nbsp;<span class="op" id="2921890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921895">err</span>&nbsp;<span class="op" id="2921899">=</span>&nbsp;<span class="ident" id="2921901">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921912">}</span>&nbsp;<span class="keyword" id="2921914">else</span>&nbsp;<span class="op" id="2921919">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2921924">panic</span><span class="op" id="2921929">(</span><span class="ident" id="2921930">e</span><span class="op" id="2921931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921938">}</span><span class="op" id="2921939">(</span><span class="op" id="2921940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921943">_</span><span class="op" id="2921944">,</span>&nbsp;<span class="ident" id="2921946">err</span>&nbsp;<span class="op" id="2921950">=</span>&nbsp;<span class="ident" id="2921952">buf</span><span class="op" id="2921955">.</span><span class="ident" id="2921956">ReadFrom</span><span class="op" id="2921964">(</span><span class="ident" id="2921965">r</span><span class="op" id="2921966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921969">return</span>&nbsp;<span class="ident" id="2921976">buf</span><span class="op" id="2921979">.</span><span class="ident" id="2921980">Bytes</span><span class="op" id="2921985">(</span><span class="op" id="2921986">)</span><span class="op" id="2921987">,</span>&nbsp;<span class="ident" id="2921989">err</span><br>
<span class="lineno">35</span><span class="op" id="2921993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921996">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="2922072">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2922148">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="2922222">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="2922253">func</span>&nbsp;<span class="ident" id="2922258">ReadAll</span><span class="op" id="2922265">(</span><span class="ident" id="2922266">r</span>&nbsp;<span class="ident" id="2922268">io</span><span class="op" id="2922270">.</span><span class="ident" id="2922271">Reader</span><span class="op" id="2922277">)</span>&nbsp;<span class="op" id="2922279">(</span><span class="op" id="2922280">[</span><span class="op" id="2922281">]</span><span class="builtintype" id="2922282">byte</span><span class="op" id="2922286">,</span>&nbsp;<span class="builtintype" id="2922288">error</span><span class="op" id="2922293">)</span>&nbsp;<span class="op" id="2922295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922298">return</span>&nbsp;<span class="ident" id="2922305">readAll</span><span class="op" id="2922312">(</span><span class="ident" id="2922313">r</span><span class="op" id="2922314">,</span>&nbsp;<span class="ident" id="2922316">bytes</span><span class="op" id="2922321">.</span><span class="ident" id="2922322">MinRead</span><span class="op" id="2922329">)</span><br>
<span class="lineno"></span><span class="op" id="2922331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="2922334">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="2922405">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="2922479">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="2922551">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="2922570">func</span>&nbsp;<span class="ident" id="2922575">ReadFile</span><span class="op" id="2922583">(</span><span class="ident" id="2922584">filename</span>&nbsp;<span class="builtintype" id="2922593">string</span><span class="op" id="2922599">)</span>&nbsp;<span class="op" id="2922601">(</span><span class="op" id="2922602">[</span><span class="op" id="2922603">]</span><span class="builtintype" id="2922604">byte</span><span class="op" id="2922608">,</span>&nbsp;<span class="builtintype" id="2922610">error</span><span class="op" id="2922615">)</span>&nbsp;<span class="op" id="2922617">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922620">f</span><span class="op" id="2922621">,</span>&nbsp;<span class="ident" id="2922623">err</span>&nbsp;<span class="op" id="2922627">:=</span>&nbsp;<span class="ident" id="2922630">os</span><span class="op" id="2922632">.</span><span class="ident" id="2922633">Open</span><span class="op" id="2922637">(</span><span class="ident" id="2922638">filename</span><span class="op" id="2922646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922649">if</span>&nbsp;<span class="ident" id="2922652">err</span>&nbsp;<span class="op" id="2922656">!=</span>&nbsp;<span class="ident" id="2922659">nil</span>&nbsp;<span class="op" id="2922663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922667">return</span>&nbsp;<span class="ident" id="2922674">nil</span><span class="op" id="2922677">,</span>&nbsp;<span class="ident" id="2922679">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2922684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922687">defer</span>&nbsp;<span class="ident" id="2922693">f</span><span class="op" id="2922694">.</span><span class="ident" id="2922695">Close</span><span class="op" id="2922700">(</span><span class="op" id="2922701">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922704">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922787">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922857">var</span>&nbsp;<span class="ident" id="2922861">n</span>&nbsp;<span class="ident" id="2922863">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922871">if</span>&nbsp;<span class="ident" id="2922874">fi</span><span class="op" id="2922876">,</span>&nbsp;<span class="ident" id="2922878">err</span>&nbsp;<span class="op" id="2922882">:=</span>&nbsp;<span class="ident" id="2922885">f</span><span class="op" id="2922886">.</span><span class="ident" id="2922887">Stat</span><span class="op" id="2922891">(</span><span class="op" id="2922892">)</span><span class="op" id="2922893">;</span>&nbsp;<span class="ident" id="2922895">err</span>&nbsp;<span class="op" id="2922899">==</span>&nbsp;<span class="ident" id="2922902">nil</span>&nbsp;<span class="op" id="2922906">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922910">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2922962">if</span>&nbsp;<span class="ident" id="2922965">size</span>&nbsp;<span class="op" id="2922970">:=</span>&nbsp;<span class="ident" id="2922973">fi</span><span class="op" id="2922975">.</span><span class="ident" id="2922976">Size</span><span class="op" id="2922980">(</span><span class="op" id="2922981">)</span><span class="op" id="2922982">;</span>&nbsp;<span class="ident" id="2922984">size</span>&nbsp;<span class="op" id="2922989">&lt;</span>&nbsp;<span class="num" id="2922991">1e9</span>&nbsp;<span class="op" id="2922995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923000">n</span>&nbsp;<span class="op" id="2923002">=</span>&nbsp;<span class="ident" id="2923004">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2923011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2923014">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923017">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923099">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923182">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923262">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923344">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923407">return</span>&nbsp;<span class="ident" id="2923414">readAll</span><span class="op" id="2923421">(</span><span class="ident" id="2923422">f</span><span class="op" id="2923423">,</span>&nbsp;<span class="ident" id="2923425">n</span><span class="op" id="2923426">+</span><span class="ident" id="2923427">bytes</span><span class="op" id="2923432">.</span><span class="ident" id="2923433">MinRead</span><span class="op" id="2923440">)</span><br>
<span class="lineno"></span><span class="op" id="2923442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923445">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="2923499">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="2923574">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="2923626">func</span>&nbsp;<span class="ident" id="2923631">WriteFile</span><span class="op" id="2923640">(</span><span class="ident" id="2923641">filename</span>&nbsp;<span class="builtintype" id="2923650">string</span><span class="op" id="2923656">,</span>&nbsp;<span class="ident" id="2923658">data</span>&nbsp;<span class="op" id="2923663">[</span><span class="op" id="2923664">]</span><span class="builtintype" id="2923665">byte</span><span class="op" id="2923669">,</span>&nbsp;<span class="ident" id="2923671">perm</span>&nbsp;<span class="ident" id="2923676">os</span><span class="op" id="2923678">.</span><span class="ident" id="2923679">FileMode</span><span class="op" id="2923687">)</span>&nbsp;<span class="builtintype" id="2923689">error</span>&nbsp;<span class="op" id="2923695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923698">f</span><span class="op" id="2923699">,</span>&nbsp;<span class="ident" id="2923701">err</span>&nbsp;<span class="op" id="2923705">:=</span>&nbsp;<span class="ident" id="2923708">os</span><span class="op" id="2923710">.</span><span class="ident" id="2923711">OpenFile</span><span class="op" id="2923719">(</span><span class="ident" id="2923720">filename</span><span class="op" id="2923728">,</span>&nbsp;<span class="ident" id="2923730">os</span><span class="op" id="2923732">.</span><span class="ident" id="2923733">O_WRONLY</span><span class="op" id="2923741">|</span><span class="ident" id="2923742">os</span><span class="op" id="2923744">.</span><span class="ident" id="2923745">O_CREATE</span><span class="op" id="2923753">|</span><span class="ident" id="2923754">os</span><span class="op" id="2923756">.</span><span class="ident" id="2923757">O_TRUNC</span><span class="op" id="2923764">,</span>&nbsp;<span class="ident" id="2923766">perm</span><span class="op" id="2923770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923773">if</span>&nbsp;<span class="ident" id="2923776">err</span>&nbsp;<span class="op" id="2923780">!=</span>&nbsp;<span class="ident" id="2923783">nil</span>&nbsp;<span class="op" id="2923787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923791">return</span>&nbsp;<span class="ident" id="2923798">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2923803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923806">n</span><span class="op" id="2923807">,</span>&nbsp;<span class="ident" id="2923809">err</span>&nbsp;<span class="op" id="2923813">:=</span>&nbsp;<span class="ident" id="2923816">f</span><span class="op" id="2923817">.</span><span class="ident" id="2923818">Write</span><span class="op" id="2923823">(</span><span class="ident" id="2923824">data</span><span class="op" id="2923828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923831">if</span>&nbsp;<span class="ident" id="2923834">err</span>&nbsp;<span class="op" id="2923838">==</span>&nbsp;<span class="ident" id="2923841">nil</span>&nbsp;<span class="op" id="2923845">&amp;&amp;</span>&nbsp;<span class="ident" id="2923848">n</span>&nbsp;<span class="op" id="2923850">&lt;</span>&nbsp;<span class="builtinfunc" id="2923852">len</span><span class="op" id="2923855">(</span><span class="ident" id="2923856">data</span><span class="op" id="2923860">)</span>&nbsp;<span class="op" id="2923862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923866">err</span>&nbsp;<span class="op" id="2923870">=</span>&nbsp;<span class="ident" id="2923872">io</span><span class="op" id="2923874">.</span><span class="ident" id="2923875">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2923890">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923893">if</span>&nbsp;<span class="ident" id="2923896">err1</span>&nbsp;<span class="op" id="2923901">:=</span>&nbsp;<span class="ident" id="2923904">f</span><span class="op" id="2923905">.</span><span class="ident" id="2923906">Close</span><span class="op" id="2923911">(</span><span class="op" id="2923912">)</span><span class="op" id="2923913">;</span>&nbsp;<span class="ident" id="2923915">err</span>&nbsp;<span class="op" id="2923919">==</span>&nbsp;<span class="ident" id="2923922">nil</span>&nbsp;<span class="op" id="2923926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923930">err</span>&nbsp;<span class="op" id="2923934">=</span>&nbsp;<span class="ident" id="2923936">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2923942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2923945">return</span>&nbsp;<span class="ident" id="2923952">err</span><br>
<span class="lineno"></span><span class="op" id="2923956">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="2923959">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2923996">type</span>&nbsp;<span class="ident" id="2924001">byName</span>&nbsp;<span class="op" id="2924008">[</span><span class="op" id="2924009">]</span><span class="ident" id="2924010">os</span><span class="op" id="2924012">.</span><span class="ident" id="2924013">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2924023">func</span>&nbsp;<span class="op" id="2924028">(</span><span class="ident" id="2924029">f</span>&nbsp;<span class="ident" id="2924031">byName</span><span class="op" id="2924037">)</span>&nbsp;<span class="ident" id="2924039">Len</span><span class="op" id="2924042">(</span><span class="op" id="2924043">)</span>&nbsp;<span class="builtintype" id="2924045">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924059">{</span>&nbsp;<span class="keyword" id="2924061">return</span>&nbsp;<span class="builtinfunc" id="2924068">len</span><span class="op" id="2924071">(</span><span class="ident" id="2924072">f</span><span class="op" id="2924073">)</span>&nbsp;<span class="op" id="2924075">}</span><br>
<span class="lineno">95</span><span class="keyword" id="2924077">func</span>&nbsp;<span class="op" id="2924082">(</span><span class="ident" id="2924083">f</span>&nbsp;<span class="ident" id="2924085">byName</span><span class="op" id="2924091">)</span>&nbsp;<span class="ident" id="2924093">Less</span><span class="op" id="2924097">(</span><span class="ident" id="2924098">i</span><span class="op" id="2924099">,</span>&nbsp;<span class="ident" id="2924101">j</span>&nbsp;<span class="builtintype" id="2924103">int</span><span class="op" id="2924106">)</span>&nbsp;<span class="builtintype" id="2924108">bool</span>&nbsp;<span class="op" id="2924113">{</span>&nbsp;<span class="keyword" id="2924115">return</span>&nbsp;<span class="ident" id="2924122">f</span><span class="op" id="2924123">[</span><span class="ident" id="2924124">i</span><span class="op" id="2924125">]</span><span class="op" id="2924126">.</span><span class="ident" id="2924127">Name</span><span class="op" id="2924131">(</span><span class="op" id="2924132">)</span>&nbsp;<span class="op" id="2924134">&lt;</span>&nbsp;<span class="ident" id="2924136">f</span><span class="op" id="2924137">[</span><span class="ident" id="2924138">j</span><span class="op" id="2924139">]</span><span class="op" id="2924140">.</span><span class="ident" id="2924141">Name</span><span class="op" id="2924145">(</span><span class="op" id="2924146">)</span>&nbsp;<span class="op" id="2924148">}</span><br>
<span class="lineno"></span><span class="keyword" id="2924150">func</span>&nbsp;<span class="op" id="2924155">(</span><span class="ident" id="2924156">f</span>&nbsp;<span class="ident" id="2924158">byName</span><span class="op" id="2924164">)</span>&nbsp;<span class="ident" id="2924166">Swap</span><span class="op" id="2924170">(</span><span class="ident" id="2924171">i</span><span class="op" id="2924172">,</span>&nbsp;<span class="ident" id="2924174">j</span>&nbsp;<span class="builtintype" id="2924176">int</span><span class="op" id="2924179">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924186">{</span>&nbsp;<span class="ident" id="2924188">f</span><span class="op" id="2924189">[</span><span class="ident" id="2924190">i</span><span class="op" id="2924191">]</span><span class="op" id="2924192">,</span>&nbsp;<span class="ident" id="2924194">f</span><span class="op" id="2924195">[</span><span class="ident" id="2924196">j</span><span class="op" id="2924197">]</span>&nbsp;<span class="op" id="2924199">=</span>&nbsp;<span class="ident" id="2924201">f</span><span class="op" id="2924202">[</span><span class="ident" id="2924203">j</span><span class="op" id="2924204">]</span><span class="op" id="2924205">,</span>&nbsp;<span class="ident" id="2924207">f</span><span class="op" id="2924208">[</span><span class="ident" id="2924209">i</span><span class="op" id="2924210">]</span>&nbsp;<span class="op" id="2924212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2924215">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="2924275">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="2924314">func</span>&nbsp;<span class="ident" id="2924319">ReadDir</span><span class="op" id="2924326">(</span><span class="ident" id="2924327">dirname</span>&nbsp;<span class="builtintype" id="2924335">string</span><span class="op" id="2924341">)</span>&nbsp;<span class="op" id="2924343">(</span><span class="op" id="2924344">[</span><span class="op" id="2924345">]</span><span class="ident" id="2924346">os</span><span class="op" id="2924348">.</span><span class="ident" id="2924349">FileInfo</span><span class="op" id="2924357">,</span>&nbsp;<span class="builtintype" id="2924359">error</span><span class="op" id="2924364">)</span>&nbsp;<span class="op" id="2924366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924369">f</span><span class="op" id="2924370">,</span>&nbsp;<span class="ident" id="2924372">err</span>&nbsp;<span class="op" id="2924376">:=</span>&nbsp;<span class="ident" id="2924379">os</span><span class="op" id="2924381">.</span><span class="ident" id="2924382">Open</span><span class="op" id="2924386">(</span><span class="ident" id="2924387">dirname</span><span class="op" id="2924394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924397">if</span>&nbsp;<span class="ident" id="2924400">err</span>&nbsp;<span class="op" id="2924404">!=</span>&nbsp;<span class="ident" id="2924407">nil</span>&nbsp;<span class="op" id="2924411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924415">return</span>&nbsp;<span class="ident" id="2924422">nil</span><span class="op" id="2924425">,</span>&nbsp;<span class="ident" id="2924427">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924432">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924435">list</span><span class="op" id="2924439">,</span>&nbsp;<span class="ident" id="2924441">err</span>&nbsp;<span class="op" id="2924445">:=</span>&nbsp;<span class="ident" id="2924448">f</span><span class="op" id="2924449">.</span><span class="ident" id="2924450">Readdir</span><span class="op" id="2924457">(</span><span class="op" id="2924458">-</span><span class="num" id="2924459">1</span><span class="op" id="2924460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924463">f</span><span class="op" id="2924464">.</span><span class="ident" id="2924465">Close</span><span class="op" id="2924470">(</span><span class="op" id="2924471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924474">if</span>&nbsp;<span class="ident" id="2924477">err</span>&nbsp;<span class="op" id="2924481">!=</span>&nbsp;<span class="ident" id="2924484">nil</span>&nbsp;<span class="op" id="2924488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924492">return</span>&nbsp;<span class="ident" id="2924499">nil</span><span class="op" id="2924502">,</span>&nbsp;<span class="ident" id="2924504">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924509">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924512">sort</span><span class="op" id="2924516">.</span><span class="ident" id="2924517">Sort</span><span class="op" id="2924521">(</span><span class="ident" id="2924522">byName</span><span class="op" id="2924528">(</span><span class="ident" id="2924529">list</span><span class="op" id="2924533">)</span><span class="op" id="2924534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924537">return</span>&nbsp;<span class="ident" id="2924544">list</span><span class="op" id="2924548">,</span>&nbsp;<span class="ident" id="2924550">nil</span><br>
<span class="lineno"></span><span class="op" id="2924554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2924557">type</span>&nbsp;<span class="ident" id="2924562">nopCloser</span>&nbsp;<span class="keyword" id="2924572">struct</span>&nbsp;<span class="op" id="2924579">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924582">io</span><span class="op" id="2924584">.</span><span class="ident" id="2924585">Reader</span><br>
<span class="lineno"></span><span class="op" id="2924592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2924595">func</span>&nbsp;<span class="op" id="2924600">(</span><span class="ident" id="2924601">nopCloser</span><span class="op" id="2924610">)</span>&nbsp;<span class="ident" id="2924612">Close</span><span class="op" id="2924617">(</span><span class="op" id="2924618">)</span>&nbsp;<span class="builtintype" id="2924620">error</span>&nbsp;<span class="op" id="2924626">{</span>&nbsp;<span class="keyword" id="2924628">return</span>&nbsp;<span class="ident" id="2924635">nil</span>&nbsp;<span class="op" id="2924639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="2924642">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="2924711">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="2924737">func</span>&nbsp;<span class="ident" id="2924742">NopCloser</span><span class="op" id="2924751">(</span><span class="ident" id="2924752">r</span>&nbsp;<span class="ident" id="2924754">io</span><span class="op" id="2924756">.</span><span class="ident" id="2924757">Reader</span><span class="op" id="2924763">)</span>&nbsp;<span class="ident" id="2924765">io</span><span class="op" id="2924767">.</span><span class="ident" id="2924768">ReadCloser</span>&nbsp;<span class="op" id="2924779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924782">return</span>&nbsp;<span class="ident" id="2924789">nopCloser</span><span class="op" id="2924798">{</span><span class="ident" id="2924799">r</span><span class="op" id="2924800">}</span><br>
<span class="lineno"></span><span class="op" id="2924802">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="2924805">type</span>&nbsp;<span class="ident" id="2924810">devNull</span>&nbsp;<span class="builtintype" id="2924818">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2924823">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2924889">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="2924941">var</span>&nbsp;<span class="ident" id="2924945">_</span>&nbsp;<span class="ident" id="2924947">io</span><span class="op" id="2924949">.</span><span class="ident" id="2924950">ReaderFrom</span>&nbsp;<span class="op" id="2924961">=</span>&nbsp;<span class="ident" id="2924963">devNull</span><span class="op" id="2924970">(</span><span class="num" id="2924971">0</span><span class="op" id="2924972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2924975">func</span>&nbsp;<span class="op" id="2924980">(</span><span class="ident" id="2924981">devNull</span><span class="op" id="2924988">)</span>&nbsp;<span class="ident" id="2924990">Write</span><span class="op" id="2924995">(</span><span class="ident" id="2924996">p</span>&nbsp;<span class="op" id="2924998">[</span><span class="op" id="2924999">]</span><span class="builtintype" id="2925000">byte</span><span class="op" id="2925004">)</span>&nbsp;<span class="op" id="2925006">(</span><span class="builtintype" id="2925007">int</span><span class="op" id="2925010">,</span>&nbsp;<span class="builtintype" id="2925012">error</span><span class="op" id="2925017">)</span>&nbsp;<span class="op" id="2925019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925022">return</span>&nbsp;<span class="builtinfunc" id="2925029">len</span><span class="op" id="2925032">(</span><span class="ident" id="2925033">p</span><span class="op" id="2925034">)</span><span class="op" id="2925035">,</span>&nbsp;<span class="ident" id="2925037">nil</span><br>
<span class="lineno"></span><span class="op" id="2925041">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="2925044">func</span>&nbsp;<span class="op" id="2925049">(</span><span class="ident" id="2925050">devNull</span><span class="op" id="2925057">)</span>&nbsp;<span class="ident" id="2925059">WriteString</span><span class="op" id="2925070">(</span><span class="ident" id="2925071">s</span>&nbsp;<span class="builtintype" id="2925073">string</span><span class="op" id="2925079">)</span>&nbsp;<span class="op" id="2925081">(</span><span class="builtintype" id="2925082">int</span><span class="op" id="2925085">,</span>&nbsp;<span class="builtintype" id="2925087">error</span><span class="op" id="2925092">)</span>&nbsp;<span class="op" id="2925094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925097">return</span>&nbsp;<span class="builtinfunc" id="2925104">len</span><span class="op" id="2925107">(</span><span class="ident" id="2925108">s</span><span class="op" id="2925109">)</span><span class="op" id="2925110">,</span>&nbsp;<span class="ident" id="2925112">nil</span><br>
<span class="lineno"></span><span class="op" id="2925116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="2925119">var</span>&nbsp;<span class="ident" id="2925123">blackHolePool</span>&nbsp;<span class="op" id="2925137">=</span>&nbsp;<span class="ident" id="2925139">sync</span><span class="op" id="2925143">.</span><span class="ident" id="2925144">Pool</span><span class="op" id="2925148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925151">New</span><span class="op" id="2925154">:</span>&nbsp;<span class="keyword" id="2925156">func</span><span class="op" id="2925160">(</span><span class="op" id="2925161">)</span>&nbsp;<span class="keyword" id="2925163">interface</span><span class="op" id="2925172">{</span><span class="op" id="2925173">}</span>&nbsp;<span class="op" id="2925175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925179">b</span>&nbsp;<span class="op" id="2925181">:=</span>&nbsp;<span class="builtinfunc" id="2925184">make</span><span class="op" id="2925188">(</span><span class="op" id="2925189">[</span><span class="op" id="2925190">]</span><span class="builtintype" id="2925191">byte</span><span class="op" id="2925195">,</span>&nbsp;<span class="num" id="2925197">8192</span><span class="op" id="2925201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925205">return</span>&nbsp;<span class="op" id="2925212">&amp;</span><span class="ident" id="2925213">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925216">}</span><span class="op" id="2925217">,</span><br>
<span class="lineno">145</span><span class="op" id="2925219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2925222">func</span>&nbsp;<span class="op" id="2925227">(</span><span class="ident" id="2925228">devNull</span><span class="op" id="2925235">)</span>&nbsp;<span class="ident" id="2925237">ReadFrom</span><span class="op" id="2925245">(</span><span class="ident" id="2925246">r</span>&nbsp;<span class="ident" id="2925248">io</span><span class="op" id="2925250">.</span><span class="ident" id="2925251">Reader</span><span class="op" id="2925257">)</span>&nbsp;<span class="op" id="2925259">(</span><span class="ident" id="2925260">n</span>&nbsp;<span class="ident" id="2925262">int64</span><span class="op" id="2925267">,</span>&nbsp;<span class="ident" id="2925269">err</span>&nbsp;<span class="builtintype" id="2925273">error</span><span class="op" id="2925278">)</span>&nbsp;<span class="op" id="2925280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925283">bufp</span>&nbsp;<span class="op" id="2925288">:=</span>&nbsp;<span class="ident" id="2925291">blackHolePool</span><span class="op" id="2925304">.</span><span class="ident" id="2925305">Get</span><span class="op" id="2925308">(</span><span class="op" id="2925309">)</span><span class="op" id="2925310">.</span><span class="op" id="2925311">(</span><span class="op" id="2925312">*</span><span class="op" id="2925313">[</span><span class="op" id="2925314">]</span><span class="builtintype" id="2925315">byte</span><span class="op" id="2925319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925322">readSize</span>&nbsp;<span class="op" id="2925331">:=</span>&nbsp;<span class="num" id="2925334">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925337">for</span>&nbsp;<span class="op" id="2925341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925345">readSize</span><span class="op" id="2925353">,</span>&nbsp;<span class="ident" id="2925355">err</span>&nbsp;<span class="op" id="2925359">=</span>&nbsp;<span class="ident" id="2925361">r</span><span class="op" id="2925362">.</span><span class="ident" id="2925363">Read</span><span class="op" id="2925367">(</span><span class="op" id="2925368">*</span><span class="ident" id="2925369">bufp</span><span class="op" id="2925373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925377">n</span>&nbsp;<span class="op" id="2925379">+=</span>&nbsp;<span class="ident" id="2925382">int64</span><span class="op" id="2925387">(</span><span class="ident" id="2925388">readSize</span><span class="op" id="2925396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925400">if</span>&nbsp;<span class="ident" id="2925403">err</span>&nbsp;<span class="op" id="2925407">!=</span>&nbsp;<span class="ident" id="2925410">nil</span>&nbsp;<span class="op" id="2925414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925419">blackHolePool</span><span class="op" id="2925432">.</span><span class="ident" id="2925433">Put</span><span class="op" id="2925436">(</span><span class="ident" id="2925437">bufp</span><span class="op" id="2925441">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925446">if</span>&nbsp;<span class="ident" id="2925449">err</span>&nbsp;<span class="op" id="2925453">==</span>&nbsp;<span class="ident" id="2925456">io</span><span class="op" id="2925458">.</span><span class="ident" id="2925459">EOF</span>&nbsp;<span class="op" id="2925463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925469">return</span>&nbsp;<span class="ident" id="2925476">n</span><span class="op" id="2925477">,</span>&nbsp;<span class="ident" id="2925479">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925491">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925500">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925503">}</span><br>
<span class="lineno"></span><span class="op" id="2925505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2925508">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="2925568">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="2925595">var</span>&nbsp;<span class="ident" id="2925599">Discard</span>&nbsp;<span class="ident" id="2925607">io</span><span class="op" id="2925609">.</span><span class="ident" id="2925610">Writer</span>&nbsp;<span class="op" id="2925617">=</span>&nbsp;<span class="ident" id="2925619">devNull</span><span class="op" id="2925626">(</span><span class="num" id="2925627">0</span><span class="op" id="2925628">)</span>
</div>
</body>
</html>
