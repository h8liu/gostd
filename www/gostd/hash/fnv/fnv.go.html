<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html" class="current">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6222194">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6222249">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6222303">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6222354">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="6222431">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="6222491">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="6222498">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="6222576">package</span>&nbsp;<span class="ident" id="6222584">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6222589">import</span>&nbsp;<span class="op" id="6222596">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6222599">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="6222606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6222609">type</span>&nbsp;<span class="op" id="6222614">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222617">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="6222624">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222632">sum32a</span>&nbsp;<span class="builtintype" id="6222639">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222647">sum64</span>&nbsp;&nbsp;<span class="ident" id="6222654">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222662">sum64a</span>&nbsp;<span class="ident" id="6222669">uint64</span><br>
<span class="lineno">20</span><span class="op" id="6222676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6222679">const</span>&nbsp;<span class="op" id="6222685">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222688">offset32</span>&nbsp;<span class="op" id="6222697">=</span>&nbsp;<span class="num" id="6222699">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222711">offset64</span>&nbsp;<span class="op" id="6222720">=</span>&nbsp;<span class="num" id="6222722">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222744">prime32</span>&nbsp;&nbsp;<span class="op" id="6222753">=</span>&nbsp;<span class="num" id="6222755">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222765">prime64</span>&nbsp;&nbsp;<span class="op" id="6222774">=</span>&nbsp;<span class="num" id="6222776">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="6222790">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6222793">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="6222840">func</span>&nbsp;<span class="ident" id="6222845">New32</span><span class="op" id="6222850">(</span><span class="op" id="6222851">)</span>&nbsp;<span class="ident" id="6222853">hash</span><span class="op" id="6222857">.</span><span class="ident" id="6222858">Hash32</span>&nbsp;<span class="op" id="6222865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222868">var</span>&nbsp;<span class="ident" id="6222872">s</span>&nbsp;<span class="ident" id="6222874">sum32</span>&nbsp;<span class="op" id="6222880">=</span>&nbsp;<span class="ident" id="6222882">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222892">return</span>&nbsp;<span class="op" id="6222899">&amp;</span><span class="ident" id="6222900">s</span><br>
<span class="lineno"></span><span class="op" id="6222902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="6222905">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6222954">func</span>&nbsp;<span class="ident" id="6222959">New32a</span><span class="op" id="6222965">(</span><span class="op" id="6222966">)</span>&nbsp;<span class="ident" id="6222968">hash</span><span class="op" id="6222972">.</span><span class="ident" id="6222973">Hash32</span>&nbsp;<span class="op" id="6222980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222983">var</span>&nbsp;<span class="ident" id="6222987">s</span>&nbsp;<span class="ident" id="6222989">sum32a</span>&nbsp;<span class="op" id="6222996">=</span>&nbsp;<span class="ident" id="6222998">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223008">return</span>&nbsp;<span class="op" id="6223015">&amp;</span><span class="ident" id="6223016">s</span><br>
<span class="lineno"></span><span class="op" id="6223018">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6223021">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6223068">func</span>&nbsp;<span class="ident" id="6223073">New64</span><span class="op" id="6223078">(</span><span class="op" id="6223079">)</span>&nbsp;<span class="ident" id="6223081">hash</span><span class="op" id="6223085">.</span><span class="ident" id="6223086">Hash64</span>&nbsp;<span class="op" id="6223093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223096">var</span>&nbsp;<span class="ident" id="6223100">s</span>&nbsp;<span class="ident" id="6223102">sum64</span>&nbsp;<span class="op" id="6223108">=</span>&nbsp;<span class="ident" id="6223110">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223120">return</span>&nbsp;<span class="op" id="6223127">&amp;</span><span class="ident" id="6223128">s</span><br>
<span class="lineno">45</span><span class="op" id="6223130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6223133">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6223182">func</span>&nbsp;<span class="ident" id="6223187">New64a</span><span class="op" id="6223193">(</span><span class="op" id="6223194">)</span>&nbsp;<span class="ident" id="6223196">hash</span><span class="op" id="6223200">.</span><span class="ident" id="6223201">Hash64</span>&nbsp;<span class="op" id="6223208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223211">var</span>&nbsp;<span class="ident" id="6223215">s</span>&nbsp;<span class="ident" id="6223217">sum64a</span>&nbsp;<span class="op" id="6223224">=</span>&nbsp;<span class="ident" id="6223226">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223236">return</span>&nbsp;<span class="op" id="6223243">&amp;</span><span class="ident" id="6223244">s</span><br>
<span class="lineno"></span><span class="op" id="6223246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223249">func</span>&nbsp;<span class="op" id="6223254">(</span><span class="ident" id="6223255">s</span>&nbsp;<span class="op" id="6223257">*</span><span class="ident" id="6223258">sum32</span><span class="op" id="6223263">)</span>&nbsp;<span class="ident" id="6223265">Reset</span><span class="op" id="6223270">(</span><span class="op" id="6223271">)</span>&nbsp;&nbsp;<span class="op" id="6223274">{</span>&nbsp;<span class="op" id="6223276">*</span><span class="ident" id="6223277">s</span>&nbsp;<span class="op" id="6223279">=</span>&nbsp;<span class="ident" id="6223281">offset32</span>&nbsp;<span class="op" id="6223290">}</span><br>
<span class="lineno"></span><span class="keyword" id="6223292">func</span>&nbsp;<span class="op" id="6223297">(</span><span class="ident" id="6223298">s</span>&nbsp;<span class="op" id="6223300">*</span><span class="ident" id="6223301">sum32a</span><span class="op" id="6223307">)</span>&nbsp;<span class="ident" id="6223309">Reset</span><span class="op" id="6223314">(</span><span class="op" id="6223315">)</span>&nbsp;<span class="op" id="6223317">{</span>&nbsp;<span class="op" id="6223319">*</span><span class="ident" id="6223320">s</span>&nbsp;<span class="op" id="6223322">=</span>&nbsp;<span class="ident" id="6223324">offset32</span>&nbsp;<span class="op" id="6223333">}</span><br>
<span class="lineno">55</span><span class="keyword" id="6223335">func</span>&nbsp;<span class="op" id="6223340">(</span><span class="ident" id="6223341">s</span>&nbsp;<span class="op" id="6223343">*</span><span class="ident" id="6223344">sum64</span><span class="op" id="6223349">)</span>&nbsp;<span class="ident" id="6223351">Reset</span><span class="op" id="6223356">(</span><span class="op" id="6223357">)</span>&nbsp;&nbsp;<span class="op" id="6223360">{</span>&nbsp;<span class="op" id="6223362">*</span><span class="ident" id="6223363">s</span>&nbsp;<span class="op" id="6223365">=</span>&nbsp;<span class="ident" id="6223367">offset64</span>&nbsp;<span class="op" id="6223376">}</span><br>
<span class="lineno"></span><span class="keyword" id="6223378">func</span>&nbsp;<span class="op" id="6223383">(</span><span class="ident" id="6223384">s</span>&nbsp;<span class="op" id="6223386">*</span><span class="ident" id="6223387">sum64a</span><span class="op" id="6223393">)</span>&nbsp;<span class="ident" id="6223395">Reset</span><span class="op" id="6223400">(</span><span class="op" id="6223401">)</span>&nbsp;<span class="op" id="6223403">{</span>&nbsp;<span class="op" id="6223405">*</span><span class="ident" id="6223406">s</span>&nbsp;<span class="op" id="6223408">=</span>&nbsp;<span class="ident" id="6223410">offset64</span>&nbsp;<span class="op" id="6223419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223422">func</span>&nbsp;<span class="op" id="6223427">(</span><span class="ident" id="6223428">s</span>&nbsp;<span class="op" id="6223430">*</span><span class="ident" id="6223431">sum32</span><span class="op" id="6223436">)</span>&nbsp;<span class="ident" id="6223438">Sum32</span><span class="op" id="6223443">(</span><span class="op" id="6223444">)</span>&nbsp;<span class="builtintype" id="6223446">uint32</span>&nbsp;&nbsp;<span class="op" id="6223454">{</span>&nbsp;<span class="keyword" id="6223456">return</span>&nbsp;<span class="builtintype" id="6223463">uint32</span><span class="op" id="6223469">(</span><span class="op" id="6223470">*</span><span class="ident" id="6223471">s</span><span class="op" id="6223472">)</span>&nbsp;<span class="op" id="6223474">}</span><br>
<span class="lineno"></span><span class="keyword" id="6223476">func</span>&nbsp;<span class="op" id="6223481">(</span><span class="ident" id="6223482">s</span>&nbsp;<span class="op" id="6223484">*</span><span class="ident" id="6223485">sum32a</span><span class="op" id="6223491">)</span>&nbsp;<span class="ident" id="6223493">Sum32</span><span class="op" id="6223498">(</span><span class="op" id="6223499">)</span>&nbsp;<span class="builtintype" id="6223501">uint32</span>&nbsp;<span class="op" id="6223508">{</span>&nbsp;<span class="keyword" id="6223510">return</span>&nbsp;<span class="builtintype" id="6223517">uint32</span><span class="op" id="6223523">(</span><span class="op" id="6223524">*</span><span class="ident" id="6223525">s</span><span class="op" id="6223526">)</span>&nbsp;<span class="op" id="6223528">}</span><br>
<span class="lineno">60</span><span class="keyword" id="6223530">func</span>&nbsp;<span class="op" id="6223535">(</span><span class="ident" id="6223536">s</span>&nbsp;<span class="op" id="6223538">*</span><span class="ident" id="6223539">sum64</span><span class="op" id="6223544">)</span>&nbsp;<span class="ident" id="6223546">Sum64</span><span class="op" id="6223551">(</span><span class="op" id="6223552">)</span>&nbsp;<span class="ident" id="6223554">uint64</span>&nbsp;&nbsp;<span class="op" id="6223562">{</span>&nbsp;<span class="keyword" id="6223564">return</span>&nbsp;<span class="ident" id="6223571">uint64</span><span class="op" id="6223577">(</span><span class="op" id="6223578">*</span><span class="ident" id="6223579">s</span><span class="op" id="6223580">)</span>&nbsp;<span class="op" id="6223582">}</span><br>
<span class="lineno"></span><span class="keyword" id="6223584">func</span>&nbsp;<span class="op" id="6223589">(</span><span class="ident" id="6223590">s</span>&nbsp;<span class="op" id="6223592">*</span><span class="ident" id="6223593">sum64a</span><span class="op" id="6223599">)</span>&nbsp;<span class="ident" id="6223601">Sum64</span><span class="op" id="6223606">(</span><span class="op" id="6223607">)</span>&nbsp;<span class="ident" id="6223609">uint64</span>&nbsp;<span class="op" id="6223616">{</span>&nbsp;<span class="keyword" id="6223618">return</span>&nbsp;<span class="ident" id="6223625">uint64</span><span class="op" id="6223631">(</span><span class="op" id="6223632">*</span><span class="ident" id="6223633">s</span><span class="op" id="6223634">)</span>&nbsp;<span class="op" id="6223636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223639">func</span>&nbsp;<span class="op" id="6223644">(</span><span class="ident" id="6223645">s</span>&nbsp;<span class="op" id="6223647">*</span><span class="ident" id="6223648">sum32</span><span class="op" id="6223653">)</span>&nbsp;<span class="ident" id="6223655">Write</span><span class="op" id="6223660">(</span><span class="ident" id="6223661">data</span>&nbsp;<span class="op" id="6223666">[</span><span class="op" id="6223667">]</span><span class="builtintype" id="6223668">byte</span><span class="op" id="6223672">)</span>&nbsp;<span class="op" id="6223674">(</span><span class="builtintype" id="6223675">int</span><span class="op" id="6223678">,</span>&nbsp;<span class="builtintype" id="6223680">error</span><span class="op" id="6223685">)</span>&nbsp;<span class="op" id="6223687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223690">hash</span>&nbsp;<span class="op" id="6223695">:=</span>&nbsp;<span class="op" id="6223698">*</span><span class="ident" id="6223699">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223702">for</span>&nbsp;<span class="ident" id="6223706">_</span><span class="op" id="6223707">,</span>&nbsp;<span class="ident" id="6223709">c</span>&nbsp;<span class="op" id="6223711">:=</span>&nbsp;<span class="keyword" id="6223714">range</span>&nbsp;<span class="ident" id="6223720">data</span>&nbsp;<span class="op" id="6223725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223729">hash</span>&nbsp;<span class="op" id="6223734">*=</span>&nbsp;<span class="ident" id="6223737">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223747">hash</span>&nbsp;<span class="op" id="6223752">^=</span>&nbsp;<span class="ident" id="6223755">sum32</span><span class="op" id="6223760">(</span><span class="ident" id="6223761">c</span><span class="op" id="6223762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223768">*</span><span class="ident" id="6223769">s</span>&nbsp;<span class="op" id="6223771">=</span>&nbsp;<span class="ident" id="6223773">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223779">return</span>&nbsp;<span class="builtinfunc" id="6223786">len</span><span class="op" id="6223789">(</span><span class="ident" id="6223790">data</span><span class="op" id="6223794">)</span><span class="op" id="6223795">,</span>&nbsp;<span class="ident" id="6223797">nil</span><br>
<span class="lineno"></span><span class="op" id="6223801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223804">func</span>&nbsp;<span class="op" id="6223809">(</span><span class="ident" id="6223810">s</span>&nbsp;<span class="op" id="6223812">*</span><span class="ident" id="6223813">sum32a</span><span class="op" id="6223819">)</span>&nbsp;<span class="ident" id="6223821">Write</span><span class="op" id="6223826">(</span><span class="ident" id="6223827">data</span>&nbsp;<span class="op" id="6223832">[</span><span class="op" id="6223833">]</span><span class="builtintype" id="6223834">byte</span><span class="op" id="6223838">)</span>&nbsp;<span class="op" id="6223840">(</span><span class="builtintype" id="6223841">int</span><span class="op" id="6223844">,</span>&nbsp;<span class="builtintype" id="6223846">error</span><span class="op" id="6223851">)</span>&nbsp;<span class="op" id="6223853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223856">hash</span>&nbsp;<span class="op" id="6223861">:=</span>&nbsp;<span class="op" id="6223864">*</span><span class="ident" id="6223865">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223868">for</span>&nbsp;<span class="ident" id="6223872">_</span><span class="op" id="6223873">,</span>&nbsp;<span class="ident" id="6223875">c</span>&nbsp;<span class="op" id="6223877">:=</span>&nbsp;<span class="keyword" id="6223880">range</span>&nbsp;<span class="ident" id="6223886">data</span>&nbsp;<span class="op" id="6223891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223895">hash</span>&nbsp;<span class="op" id="6223900">^=</span>&nbsp;<span class="ident" id="6223903">sum32a</span><span class="op" id="6223909">(</span><span class="ident" id="6223910">c</span><span class="op" id="6223911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223915">hash</span>&nbsp;<span class="op" id="6223920">*=</span>&nbsp;<span class="ident" id="6223923">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223935">*</span><span class="ident" id="6223936">s</span>&nbsp;<span class="op" id="6223938">=</span>&nbsp;<span class="ident" id="6223940">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223946">return</span>&nbsp;<span class="builtinfunc" id="6223953">len</span><span class="op" id="6223956">(</span><span class="ident" id="6223957">data</span><span class="op" id="6223961">)</span><span class="op" id="6223962">,</span>&nbsp;<span class="ident" id="6223964">nil</span><br>
<span class="lineno"></span><span class="op" id="6223968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223971">func</span>&nbsp;<span class="op" id="6223976">(</span><span class="ident" id="6223977">s</span>&nbsp;<span class="op" id="6223979">*</span><span class="ident" id="6223980">sum64</span><span class="op" id="6223985">)</span>&nbsp;<span class="ident" id="6223987">Write</span><span class="op" id="6223992">(</span><span class="ident" id="6223993">data</span>&nbsp;<span class="op" id="6223998">[</span><span class="op" id="6223999">]</span><span class="builtintype" id="6224000">byte</span><span class="op" id="6224004">)</span>&nbsp;<span class="op" id="6224006">(</span><span class="builtintype" id="6224007">int</span><span class="op" id="6224010">,</span>&nbsp;<span class="builtintype" id="6224012">error</span><span class="op" id="6224017">)</span>&nbsp;<span class="op" id="6224019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224022">hash</span>&nbsp;<span class="op" id="6224027">:=</span>&nbsp;<span class="op" id="6224030">*</span><span class="ident" id="6224031">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224034">for</span>&nbsp;<span class="ident" id="6224038">_</span><span class="op" id="6224039">,</span>&nbsp;<span class="ident" id="6224041">c</span>&nbsp;<span class="op" id="6224043">:=</span>&nbsp;<span class="keyword" id="6224046">range</span>&nbsp;<span class="ident" id="6224052">data</span>&nbsp;<span class="op" id="6224057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224061">hash</span>&nbsp;<span class="op" id="6224066">*=</span>&nbsp;<span class="ident" id="6224069">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224079">hash</span>&nbsp;<span class="op" id="6224084">^=</span>&nbsp;<span class="ident" id="6224087">sum64</span><span class="op" id="6224092">(</span><span class="ident" id="6224093">c</span><span class="op" id="6224094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224100">*</span><span class="ident" id="6224101">s</span>&nbsp;<span class="op" id="6224103">=</span>&nbsp;<span class="ident" id="6224105">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224111">return</span>&nbsp;<span class="builtinfunc" id="6224118">len</span><span class="op" id="6224121">(</span><span class="ident" id="6224122">data</span><span class="op" id="6224126">)</span><span class="op" id="6224127">,</span>&nbsp;<span class="ident" id="6224129">nil</span><br>
<span class="lineno"></span><span class="op" id="6224133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224136">func</span>&nbsp;<span class="op" id="6224141">(</span><span class="ident" id="6224142">s</span>&nbsp;<span class="op" id="6224144">*</span><span class="ident" id="6224145">sum64a</span><span class="op" id="6224151">)</span>&nbsp;<span class="ident" id="6224153">Write</span><span class="op" id="6224158">(</span><span class="ident" id="6224159">data</span>&nbsp;<span class="op" id="6224164">[</span><span class="op" id="6224165">]</span><span class="builtintype" id="6224166">byte</span><span class="op" id="6224170">)</span>&nbsp;<span class="op" id="6224172">(</span><span class="builtintype" id="6224173">int</span><span class="op" id="6224176">,</span>&nbsp;<span class="builtintype" id="6224178">error</span><span class="op" id="6224183">)</span>&nbsp;<span class="op" id="6224185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224188">hash</span>&nbsp;<span class="op" id="6224193">:=</span>&nbsp;<span class="op" id="6224196">*</span><span class="ident" id="6224197">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224200">for</span>&nbsp;<span class="ident" id="6224204">_</span><span class="op" id="6224205">,</span>&nbsp;<span class="ident" id="6224207">c</span>&nbsp;<span class="op" id="6224209">:=</span>&nbsp;<span class="keyword" id="6224212">range</span>&nbsp;<span class="ident" id="6224218">data</span>&nbsp;<span class="op" id="6224223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224227">hash</span>&nbsp;<span class="op" id="6224232">^=</span>&nbsp;<span class="ident" id="6224235">sum64a</span><span class="op" id="6224241">(</span><span class="ident" id="6224242">c</span><span class="op" id="6224243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224247">hash</span>&nbsp;<span class="op" id="6224252">*=</span>&nbsp;<span class="ident" id="6224255">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224267">*</span><span class="ident" id="6224268">s</span>&nbsp;<span class="op" id="6224270">=</span>&nbsp;<span class="ident" id="6224272">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224278">return</span>&nbsp;<span class="builtinfunc" id="6224285">len</span><span class="op" id="6224288">(</span><span class="ident" id="6224289">data</span><span class="op" id="6224293">)</span><span class="op" id="6224294">,</span>&nbsp;<span class="ident" id="6224296">nil</span><br>
<span class="lineno"></span><span class="op" id="6224300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224303">func</span>&nbsp;<span class="op" id="6224308">(</span><span class="ident" id="6224309">s</span>&nbsp;<span class="op" id="6224311">*</span><span class="ident" id="6224312">sum32</span><span class="op" id="6224317">)</span>&nbsp;<span class="ident" id="6224319">Size</span><span class="op" id="6224323">(</span><span class="op" id="6224324">)</span>&nbsp;<span class="builtintype" id="6224326">int</span>&nbsp;&nbsp;<span class="op" id="6224331">{</span>&nbsp;<span class="keyword" id="6224333">return</span>&nbsp;<span class="num" id="6224340">4</span>&nbsp;<span class="op" id="6224342">}</span><br>
<span class="lineno"></span><span class="keyword" id="6224344">func</span>&nbsp;<span class="op" id="6224349">(</span><span class="ident" id="6224350">s</span>&nbsp;<span class="op" id="6224352">*</span><span class="ident" id="6224353">sum32a</span><span class="op" id="6224359">)</span>&nbsp;<span class="ident" id="6224361">Size</span><span class="op" id="6224365">(</span><span class="op" id="6224366">)</span>&nbsp;<span class="builtintype" id="6224368">int</span>&nbsp;<span class="op" id="6224372">{</span>&nbsp;<span class="keyword" id="6224374">return</span>&nbsp;<span class="num" id="6224381">4</span>&nbsp;<span class="op" id="6224383">}</span><br>
<span class="lineno">105</span><span class="keyword" id="6224385">func</span>&nbsp;<span class="op" id="6224390">(</span><span class="ident" id="6224391">s</span>&nbsp;<span class="op" id="6224393">*</span><span class="ident" id="6224394">sum64</span><span class="op" id="6224399">)</span>&nbsp;<span class="ident" id="6224401">Size</span><span class="op" id="6224405">(</span><span class="op" id="6224406">)</span>&nbsp;<span class="builtintype" id="6224408">int</span>&nbsp;&nbsp;<span class="op" id="6224413">{</span>&nbsp;<span class="keyword" id="6224415">return</span>&nbsp;<span class="num" id="6224422">8</span>&nbsp;<span class="op" id="6224424">}</span><br>
<span class="lineno"></span><span class="keyword" id="6224426">func</span>&nbsp;<span class="op" id="6224431">(</span><span class="ident" id="6224432">s</span>&nbsp;<span class="op" id="6224434">*</span><span class="ident" id="6224435">sum64a</span><span class="op" id="6224441">)</span>&nbsp;<span class="ident" id="6224443">Size</span><span class="op" id="6224447">(</span><span class="op" id="6224448">)</span>&nbsp;<span class="builtintype" id="6224450">int</span>&nbsp;<span class="op" id="6224454">{</span>&nbsp;<span class="keyword" id="6224456">return</span>&nbsp;<span class="num" id="6224463">8</span>&nbsp;<span class="op" id="6224465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224468">func</span>&nbsp;<span class="op" id="6224473">(</span><span class="ident" id="6224474">s</span>&nbsp;<span class="op" id="6224476">*</span><span class="ident" id="6224477">sum32</span><span class="op" id="6224482">)</span>&nbsp;<span class="ident" id="6224484">BlockSize</span><span class="op" id="6224493">(</span><span class="op" id="6224494">)</span>&nbsp;<span class="builtintype" id="6224496">int</span>&nbsp;&nbsp;<span class="op" id="6224501">{</span>&nbsp;<span class="keyword" id="6224503">return</span>&nbsp;<span class="num" id="6224510">1</span>&nbsp;<span class="op" id="6224512">}</span><br>
<span class="lineno"></span><span class="keyword" id="6224514">func</span>&nbsp;<span class="op" id="6224519">(</span><span class="ident" id="6224520">s</span>&nbsp;<span class="op" id="6224522">*</span><span class="ident" id="6224523">sum32a</span><span class="op" id="6224529">)</span>&nbsp;<span class="ident" id="6224531">BlockSize</span><span class="op" id="6224540">(</span><span class="op" id="6224541">)</span>&nbsp;<span class="builtintype" id="6224543">int</span>&nbsp;<span class="op" id="6224547">{</span>&nbsp;<span class="keyword" id="6224549">return</span>&nbsp;<span class="num" id="6224556">1</span>&nbsp;<span class="op" id="6224558">}</span><br>
<span class="lineno">110</span><span class="keyword" id="6224560">func</span>&nbsp;<span class="op" id="6224565">(</span><span class="ident" id="6224566">s</span>&nbsp;<span class="op" id="6224568">*</span><span class="ident" id="6224569">sum64</span><span class="op" id="6224574">)</span>&nbsp;<span class="ident" id="6224576">BlockSize</span><span class="op" id="6224585">(</span><span class="op" id="6224586">)</span>&nbsp;<span class="builtintype" id="6224588">int</span>&nbsp;&nbsp;<span class="op" id="6224593">{</span>&nbsp;<span class="keyword" id="6224595">return</span>&nbsp;<span class="num" id="6224602">1</span>&nbsp;<span class="op" id="6224604">}</span><br>
<span class="lineno"></span><span class="keyword" id="6224606">func</span>&nbsp;<span class="op" id="6224611">(</span><span class="ident" id="6224612">s</span>&nbsp;<span class="op" id="6224614">*</span><span class="ident" id="6224615">sum64a</span><span class="op" id="6224621">)</span>&nbsp;<span class="ident" id="6224623">BlockSize</span><span class="op" id="6224632">(</span><span class="op" id="6224633">)</span>&nbsp;<span class="builtintype" id="6224635">int</span>&nbsp;<span class="op" id="6224639">{</span>&nbsp;<span class="keyword" id="6224641">return</span>&nbsp;<span class="num" id="6224648">1</span>&nbsp;<span class="op" id="6224650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224653">func</span>&nbsp;<span class="op" id="6224658">(</span><span class="ident" id="6224659">s</span>&nbsp;<span class="op" id="6224661">*</span><span class="ident" id="6224662">sum32</span><span class="op" id="6224667">)</span>&nbsp;<span class="ident" id="6224669">Sum</span><span class="op" id="6224672">(</span><span class="ident" id="6224673">in</span>&nbsp;<span class="op" id="6224676">[</span><span class="op" id="6224677">]</span><span class="builtintype" id="6224678">byte</span><span class="op" id="6224682">)</span>&nbsp;<span class="op" id="6224684">[</span><span class="op" id="6224685">]</span><span class="builtintype" id="6224686">byte</span>&nbsp;<span class="op" id="6224691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224694">v</span>&nbsp;<span class="op" id="6224696">:=</span>&nbsp;<span class="builtintype" id="6224699">uint32</span><span class="op" id="6224705">(</span><span class="op" id="6224706">*</span><span class="ident" id="6224707">s</span><span class="op" id="6224708">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224711">return</span>&nbsp;<span class="builtinfunc" id="6224718">append</span><span class="op" id="6224724">(</span><span class="ident" id="6224725">in</span><span class="op" id="6224727">,</span>&nbsp;<span class="builtintype" id="6224729">byte</span><span class="op" id="6224733">(</span><span class="ident" id="6224734">v</span><span class="op" id="6224735">&gt;&gt;</span><span class="num" id="6224737">24</span><span class="op" id="6224739">)</span><span class="op" id="6224740">,</span>&nbsp;<span class="builtintype" id="6224742">byte</span><span class="op" id="6224746">(</span><span class="ident" id="6224747">v</span><span class="op" id="6224748">&gt;&gt;</span><span class="num" id="6224750">16</span><span class="op" id="6224752">)</span><span class="op" id="6224753">,</span>&nbsp;<span class="builtintype" id="6224755">byte</span><span class="op" id="6224759">(</span><span class="ident" id="6224760">v</span><span class="op" id="6224761">&gt;&gt;</span><span class="num" id="6224763">8</span><span class="op" id="6224764">)</span><span class="op" id="6224765">,</span>&nbsp;<span class="builtintype" id="6224767">byte</span><span class="op" id="6224771">(</span><span class="ident" id="6224772">v</span><span class="op" id="6224773">)</span><span class="op" id="6224774">)</span><br>
<span class="lineno"></span><span class="op" id="6224776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224779">func</span>&nbsp;<span class="op" id="6224784">(</span><span class="ident" id="6224785">s</span>&nbsp;<span class="op" id="6224787">*</span><span class="ident" id="6224788">sum32a</span><span class="op" id="6224794">)</span>&nbsp;<span class="ident" id="6224796">Sum</span><span class="op" id="6224799">(</span><span class="ident" id="6224800">in</span>&nbsp;<span class="op" id="6224803">[</span><span class="op" id="6224804">]</span><span class="builtintype" id="6224805">byte</span><span class="op" id="6224809">)</span>&nbsp;<span class="op" id="6224811">[</span><span class="op" id="6224812">]</span><span class="builtintype" id="6224813">byte</span>&nbsp;<span class="op" id="6224818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224821">v</span>&nbsp;<span class="op" id="6224823">:=</span>&nbsp;<span class="builtintype" id="6224826">uint32</span><span class="op" id="6224832">(</span><span class="op" id="6224833">*</span><span class="ident" id="6224834">s</span><span class="op" id="6224835">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224838">return</span>&nbsp;<span class="builtinfunc" id="6224845">append</span><span class="op" id="6224851">(</span><span class="ident" id="6224852">in</span><span class="op" id="6224854">,</span>&nbsp;<span class="builtintype" id="6224856">byte</span><span class="op" id="6224860">(</span><span class="ident" id="6224861">v</span><span class="op" id="6224862">&gt;&gt;</span><span class="num" id="6224864">24</span><span class="op" id="6224866">)</span><span class="op" id="6224867">,</span>&nbsp;<span class="builtintype" id="6224869">byte</span><span class="op" id="6224873">(</span><span class="ident" id="6224874">v</span><span class="op" id="6224875">&gt;&gt;</span><span class="num" id="6224877">16</span><span class="op" id="6224879">)</span><span class="op" id="6224880">,</span>&nbsp;<span class="builtintype" id="6224882">byte</span><span class="op" id="6224886">(</span><span class="ident" id="6224887">v</span><span class="op" id="6224888">&gt;&gt;</span><span class="num" id="6224890">8</span><span class="op" id="6224891">)</span><span class="op" id="6224892">,</span>&nbsp;<span class="builtintype" id="6224894">byte</span><span class="op" id="6224898">(</span><span class="ident" id="6224899">v</span><span class="op" id="6224900">)</span><span class="op" id="6224901">)</span><br>
<span class="lineno"></span><span class="op" id="6224903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6224906">func</span>&nbsp;<span class="op" id="6224911">(</span><span class="ident" id="6224912">s</span>&nbsp;<span class="op" id="6224914">*</span><span class="ident" id="6224915">sum64</span><span class="op" id="6224920">)</span>&nbsp;<span class="ident" id="6224922">Sum</span><span class="op" id="6224925">(</span><span class="ident" id="6224926">in</span>&nbsp;<span class="op" id="6224929">[</span><span class="op" id="6224930">]</span><span class="builtintype" id="6224931">byte</span><span class="op" id="6224935">)</span>&nbsp;<span class="op" id="6224937">[</span><span class="op" id="6224938">]</span><span class="builtintype" id="6224939">byte</span>&nbsp;<span class="op" id="6224944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224947">v</span>&nbsp;<span class="op" id="6224949">:=</span>&nbsp;<span class="ident" id="6224952">uint64</span><span class="op" id="6224958">(</span><span class="op" id="6224959">*</span><span class="ident" id="6224960">s</span><span class="op" id="6224961">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224964">return</span>&nbsp;<span class="builtinfunc" id="6224971">append</span><span class="op" id="6224977">(</span><span class="ident" id="6224978">in</span><span class="op" id="6224980">,</span>&nbsp;<span class="builtintype" id="6224982">byte</span><span class="op" id="6224986">(</span><span class="ident" id="6224987">v</span><span class="op" id="6224988">&gt;&gt;</span><span class="num" id="6224990">56</span><span class="op" id="6224992">)</span><span class="op" id="6224993">,</span>&nbsp;<span class="builtintype" id="6224995">byte</span><span class="op" id="6224999">(</span><span class="ident" id="6225000">v</span><span class="op" id="6225001">&gt;&gt;</span><span class="num" id="6225003">48</span><span class="op" id="6225005">)</span><span class="op" id="6225006">,</span>&nbsp;<span class="builtintype" id="6225008">byte</span><span class="op" id="6225012">(</span><span class="ident" id="6225013">v</span><span class="op" id="6225014">&gt;&gt;</span><span class="num" id="6225016">40</span><span class="op" id="6225018">)</span><span class="op" id="6225019">,</span>&nbsp;<span class="builtintype" id="6225021">byte</span><span class="op" id="6225025">(</span><span class="ident" id="6225026">v</span><span class="op" id="6225027">&gt;&gt;</span><span class="num" id="6225029">32</span><span class="op" id="6225031">)</span><span class="op" id="6225032">,</span>&nbsp;<span class="builtintype" id="6225034">byte</span><span class="op" id="6225038">(</span><span class="ident" id="6225039">v</span><span class="op" id="6225040">&gt;&gt;</span><span class="num" id="6225042">24</span><span class="op" id="6225044">)</span><span class="op" id="6225045">,</span>&nbsp;<span class="builtintype" id="6225047">byte</span><span class="op" id="6225051">(</span><span class="ident" id="6225052">v</span><span class="op" id="6225053">&gt;&gt;</span><span class="num" id="6225055">16</span><span class="op" id="6225057">)</span><span class="op" id="6225058">,</span>&nbsp;<span class="builtintype" id="6225060">byte</span><span class="op" id="6225064">(</span><span class="ident" id="6225065">v</span><span class="op" id="6225066">&gt;&gt;</span><span class="num" id="6225068">8</span><span class="op" id="6225069">)</span><span class="op" id="6225070">,</span>&nbsp;<span class="builtintype" id="6225072">byte</span><span class="op" id="6225076">(</span><span class="ident" id="6225077">v</span><span class="op" id="6225078">)</span><span class="op" id="6225079">)</span><br>
<span class="lineno"></span><span class="op" id="6225081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6225084">func</span>&nbsp;<span class="op" id="6225089">(</span><span class="ident" id="6225090">s</span>&nbsp;<span class="op" id="6225092">*</span><span class="ident" id="6225093">sum64a</span><span class="op" id="6225099">)</span>&nbsp;<span class="ident" id="6225101">Sum</span><span class="op" id="6225104">(</span><span class="ident" id="6225105">in</span>&nbsp;<span class="op" id="6225108">[</span><span class="op" id="6225109">]</span><span class="builtintype" id="6225110">byte</span><span class="op" id="6225114">)</span>&nbsp;<span class="op" id="6225116">[</span><span class="op" id="6225117">]</span><span class="builtintype" id="6225118">byte</span>&nbsp;<span class="op" id="6225123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225126">v</span>&nbsp;<span class="op" id="6225128">:=</span>&nbsp;<span class="ident" id="6225131">uint64</span><span class="op" id="6225137">(</span><span class="op" id="6225138">*</span><span class="ident" id="6225139">s</span><span class="op" id="6225140">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225143">return</span>&nbsp;<span class="builtinfunc" id="6225150">append</span><span class="op" id="6225156">(</span><span class="ident" id="6225157">in</span><span class="op" id="6225159">,</span>&nbsp;<span class="builtintype" id="6225161">byte</span><span class="op" id="6225165">(</span><span class="ident" id="6225166">v</span><span class="op" id="6225167">&gt;&gt;</span><span class="num" id="6225169">56</span><span class="op" id="6225171">)</span><span class="op" id="6225172">,</span>&nbsp;<span class="builtintype" id="6225174">byte</span><span class="op" id="6225178">(</span><span class="ident" id="6225179">v</span><span class="op" id="6225180">&gt;&gt;</span><span class="num" id="6225182">48</span><span class="op" id="6225184">)</span><span class="op" id="6225185">,</span>&nbsp;<span class="builtintype" id="6225187">byte</span><span class="op" id="6225191">(</span><span class="ident" id="6225192">v</span><span class="op" id="6225193">&gt;&gt;</span><span class="num" id="6225195">40</span><span class="op" id="6225197">)</span><span class="op" id="6225198">,</span>&nbsp;<span class="builtintype" id="6225200">byte</span><span class="op" id="6225204">(</span><span class="ident" id="6225205">v</span><span class="op" id="6225206">&gt;&gt;</span><span class="num" id="6225208">32</span><span class="op" id="6225210">)</span><span class="op" id="6225211">,</span>&nbsp;<span class="builtintype" id="6225213">byte</span><span class="op" id="6225217">(</span><span class="ident" id="6225218">v</span><span class="op" id="6225219">&gt;&gt;</span><span class="num" id="6225221">24</span><span class="op" id="6225223">)</span><span class="op" id="6225224">,</span>&nbsp;<span class="builtintype" id="6225226">byte</span><span class="op" id="6225230">(</span><span class="ident" id="6225231">v</span><span class="op" id="6225232">&gt;&gt;</span><span class="num" id="6225234">16</span><span class="op" id="6225236">)</span><span class="op" id="6225237">,</span>&nbsp;<span class="builtintype" id="6225239">byte</span><span class="op" id="6225243">(</span><span class="ident" id="6225244">v</span><span class="op" id="6225245">&gt;&gt;</span><span class="num" id="6225247">8</span><span class="op" id="6225248">)</span><span class="op" id="6225249">,</span>&nbsp;<span class="builtintype" id="6225251">byte</span><span class="op" id="6225255">(</span><span class="ident" id="6225256">v</span><span class="op" id="6225257">)</span><span class="op" id="6225258">)</span><br>
<span class="lineno"></span><span class="op" id="6225260">}</span>
</div>
</body>
</html>
