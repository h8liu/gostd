<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html" class="current">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5473525">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5473580">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5473634">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5473685">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5473763">package</span>&nbsp;<span class="ident" id="5473771">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5473779">import</span>&nbsp;<span class="op" id="5473786">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5473789">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5473795">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="5473805">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5473808">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="5473824">func</span>&nbsp;<span class="ident" id="5473829">signal_disable</span><span class="op" id="5473843">(</span><span class="builtintype" id="5473844">uint32</span><span class="op" id="5473850">)</span><br>
<span class="lineno"></span><span class="keyword" id="5473852">func</span>&nbsp;<span class="ident" id="5473857">signal_enable</span><span class="op" id="5473870">(</span><span class="builtintype" id="5473871">uint32</span><span class="op" id="5473877">)</span><br>
<span class="lineno"></span><span class="keyword" id="5473879">func</span>&nbsp;<span class="ident" id="5473884">signal_recv</span><span class="op" id="5473895">(</span><span class="op" id="5473896">)</span>&nbsp;<span class="builtintype" id="5473898">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5473906">func</span>&nbsp;<span class="ident" id="5473911">loop</span><span class="op" id="5473915">(</span><span class="op" id="5473916">)</span>&nbsp;<span class="op" id="5473918">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5473921">for</span>&nbsp;<span class="op" id="5473925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473929">process</span><span class="op" id="5473936">(</span><span class="ident" id="5473937">syscall</span><span class="op" id="5473944">.</span><span class="ident" id="5473945">Signal</span><span class="op" id="5473951">(</span><span class="ident" id="5473952">signal_recv</span><span class="op" id="5473963">(</span><span class="op" id="5473964">)</span><span class="op" id="5473965">)</span><span class="op" id="5473966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5473969">}</span><br>
<span class="lineno"></span><span class="op" id="5473971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5473974">func</span>&nbsp;<span class="ident" id="5473979">init</span><span class="op" id="5473983">(</span><span class="op" id="5473984">)</span>&nbsp;<span class="op" id="5473986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473989">signal_enable</span><span class="op" id="5474002">(</span><span class="num" id="5474003">0</span><span class="op" id="5474004">)</span>&nbsp;<span class="comment" id="5474006">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474034">go</span>&nbsp;<span class="ident" id="5474037">loop</span><span class="op" id="5474041">(</span><span class="op" id="5474042">)</span><br>
<span class="lineno"></span><span class="op" id="5474044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5474047">const</span>&nbsp;<span class="op" id="5474053">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474056">numSig</span>&nbsp;<span class="op" id="5474063">=</span>&nbsp;<span class="num" id="5474065">65</span>&nbsp;<span class="comment" id="5474068">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="5474094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5474097">func</span>&nbsp;<span class="ident" id="5474102">signum</span><span class="op" id="5474108">(</span><span class="ident" id="5474109">sig</span>&nbsp;<span class="ident" id="5474113">os</span><span class="op" id="5474115">.</span><span class="ident" id="5474116">Signal</span><span class="op" id="5474122">)</span>&nbsp;<span class="builtintype" id="5474124">int</span>&nbsp;<span class="op" id="5474128">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474131">switch</span>&nbsp;<span class="ident" id="5474138">sig</span>&nbsp;<span class="op" id="5474142">:=</span>&nbsp;<span class="ident" id="5474145">sig</span><span class="op" id="5474148">.</span><span class="op" id="5474149">(</span><span class="keyword" id="5474150">type</span><span class="op" id="5474154">)</span>&nbsp;<span class="op" id="5474156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474159">case</span>&nbsp;<span class="ident" id="5474164">syscall</span><span class="op" id="5474171">.</span><span class="ident" id="5474172">Signal</span><span class="op" id="5474178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474182">i</span>&nbsp;<span class="op" id="5474184">:=</span>&nbsp;<span class="builtintype" id="5474187">int</span><span class="op" id="5474190">(</span><span class="ident" id="5474191">sig</span><span class="op" id="5474194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474198">if</span>&nbsp;<span class="ident" id="5474201">i</span>&nbsp;<span class="op" id="5474203">&lt;</span>&nbsp;<span class="num" id="5474205">0</span>&nbsp;<span class="op" id="5474207">||</span>&nbsp;<span class="ident" id="5474210">i</span>&nbsp;<span class="op" id="5474212">&gt;=</span>&nbsp;<span class="ident" id="5474215">numSig</span>&nbsp;<span class="op" id="5474222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474227">return</span>&nbsp;<span class="op" id="5474234">-</span><span class="num" id="5474235">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474243">return</span>&nbsp;<span class="ident" id="5474250">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474253">default</span><span class="op" id="5474260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5474264">return</span>&nbsp;<span class="op" id="5474271">-</span><span class="num" id="5474272">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474275">}</span><br>
<span class="lineno">45</span><span class="op" id="5474277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5474280">func</span>&nbsp;<span class="ident" id="5474285">enableSignal</span><span class="op" id="5474297">(</span><span class="ident" id="5474298">sig</span>&nbsp;<span class="builtintype" id="5474302">int</span><span class="op" id="5474305">)</span>&nbsp;<span class="op" id="5474307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474310">signal_enable</span><span class="op" id="5474323">(</span><span class="builtintype" id="5474324">uint32</span><span class="op" id="5474330">(</span><span class="ident" id="5474331">sig</span><span class="op" id="5474334">)</span><span class="op" id="5474335">)</span><br>
<span class="lineno"></span><span class="op" id="5474337">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5474340">func</span>&nbsp;<span class="ident" id="5474345">disableSignal</span><span class="op" id="5474358">(</span><span class="ident" id="5474359">sig</span>&nbsp;<span class="builtintype" id="5474363">int</span><span class="op" id="5474366">)</span>&nbsp;<span class="op" id="5474368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474371">signal_disable</span><span class="op" id="5474385">(</span><span class="builtintype" id="5474386">uint32</span><span class="op" id="5474392">(</span><span class="ident" id="5474393">sig</span><span class="op" id="5474396">)</span><span class="op" id="5474397">)</span><br>
<span class="lineno"></span><span class="op" id="5474399">}</span>
</div>
</body>
</html>
