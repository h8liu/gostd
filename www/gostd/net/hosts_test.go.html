<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6599995">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6600050">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6600104">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6600155">package</span>&nbsp;<span class="ident" id="6600163">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6600168">import</span>&nbsp;<span class="op" id="6600175">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6600178">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6600186">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6600196">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6600199">type</span>&nbsp;<span class="ident" id="6600204">hostTest</span>&nbsp;<span class="keyword" id="6600213">struct</span>&nbsp;<span class="op" id="6600220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600223">host</span>&nbsp;<span class="builtintype" id="6600228">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600236">ips</span>&nbsp;&nbsp;<span class="op" id="6600241">[</span><span class="op" id="6600242">]</span><span class="ident" id="6600243">IP</span><br>
<span class="lineno">15</span><span class="op" id="6600246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6600249">var</span>&nbsp;<span class="ident" id="6600253">hosttests</span>&nbsp;<span class="op" id="6600263">=</span>&nbsp;<span class="op" id="6600265">[</span><span class="op" id="6600266">]</span><span class="ident" id="6600267">hostTest</span><span class="op" id="6600275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600278">{</span><span class="string" id="6600279">&#34;odin&#34;</span><span class="op" id="6600285">,</span>&nbsp;<span class="op" id="6600287">[</span><span class="op" id="6600288">]</span><span class="ident" id="6600289">IP</span><span class="op" id="6600291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600295">IPv4</span><span class="op" id="6600299">(</span><span class="num" id="6600300">127</span><span class="op" id="6600303">,</span>&nbsp;<span class="num" id="6600305">0</span><span class="op" id="6600306">,</span>&nbsp;<span class="num" id="6600308">0</span><span class="op" id="6600309">,</span>&nbsp;<span class="num" id="6600311">2</span><span class="op" id="6600312">)</span><span class="op" id="6600313">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600317">IPv4</span><span class="op" id="6600321">(</span><span class="num" id="6600322">127</span><span class="op" id="6600325">,</span>&nbsp;<span class="num" id="6600327">0</span><span class="op" id="6600328">,</span>&nbsp;<span class="num" id="6600330">0</span><span class="op" id="6600331">,</span>&nbsp;<span class="num" id="6600333">3</span><span class="op" id="6600334">)</span><span class="op" id="6600335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600339">ParseIP</span><span class="op" id="6600346">(</span><span class="string" id="6600347">&#34;::2&#34;</span><span class="op" id="6600352">)</span><span class="op" id="6600353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600356">}</span><span class="op" id="6600357">}</span><span class="op" id="6600358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600361">{</span><span class="string" id="6600362">&#34;thor&#34;</span><span class="op" id="6600368">,</span>&nbsp;<span class="op" id="6600370">[</span><span class="op" id="6600371">]</span><span class="ident" id="6600372">IP</span><span class="op" id="6600374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600378">IPv4</span><span class="op" id="6600382">(</span><span class="num" id="6600383">127</span><span class="op" id="6600386">,</span>&nbsp;<span class="num" id="6600388">1</span><span class="op" id="6600389">,</span>&nbsp;<span class="num" id="6600391">1</span><span class="op" id="6600392">,</span>&nbsp;<span class="num" id="6600394">1</span><span class="op" id="6600395">)</span><span class="op" id="6600396">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600399">}</span><span class="op" id="6600400">}</span><span class="op" id="6600401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600404">{</span><span class="string" id="6600405">&#34;loki&#34;</span><span class="op" id="6600411">,</span>&nbsp;<span class="op" id="6600413">[</span><span class="op" id="6600414">]</span><span class="ident" id="6600415">IP</span><span class="op" id="6600417">{</span><span class="op" id="6600418">}</span><span class="op" id="6600419">}</span><span class="op" id="6600420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600423">{</span><span class="string" id="6600424">&#34;ullr&#34;</span><span class="op" id="6600430">,</span>&nbsp;<span class="op" id="6600432">[</span><span class="op" id="6600433">]</span><span class="ident" id="6600434">IP</span><span class="op" id="6600436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600440">IPv4</span><span class="op" id="6600444">(</span><span class="num" id="6600445">127</span><span class="op" id="6600448">,</span>&nbsp;<span class="num" id="6600450">1</span><span class="op" id="6600451">,</span>&nbsp;<span class="num" id="6600453">1</span><span class="op" id="6600454">,</span>&nbsp;<span class="num" id="6600456">2</span><span class="op" id="6600457">)</span><span class="op" id="6600458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600461">}</span><span class="op" id="6600462">}</span><span class="op" id="6600463">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600466">{</span><span class="string" id="6600467">&#34;ullrhost&#34;</span><span class="op" id="6600477">,</span>&nbsp;<span class="op" id="6600479">[</span><span class="op" id="6600480">]</span><span class="ident" id="6600481">IP</span><span class="op" id="6600483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600487">IPv4</span><span class="op" id="6600491">(</span><span class="num" id="6600492">127</span><span class="op" id="6600495">,</span>&nbsp;<span class="num" id="6600497">1</span><span class="op" id="6600498">,</span>&nbsp;<span class="num" id="6600500">1</span><span class="op" id="6600501">,</span>&nbsp;<span class="num" id="6600503">2</span><span class="op" id="6600504">)</span><span class="op" id="6600505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600508">}</span><span class="op" id="6600509">}</span><span class="op" id="6600510">,</span><br>
<span class="lineno"></span><span class="op" id="6600512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6600515">func</span>&nbsp;<span class="ident" id="6600520">TestLookupStaticHost</span><span class="op" id="6600540">(</span><span class="ident" id="6600541">t</span>&nbsp;<span class="op" id="6600543">*</span><span class="ident" id="6600544">testing</span><span class="op" id="6600551">.</span><span class="ident" id="6600552">T</span><span class="op" id="6600553">)</span>&nbsp;<span class="op" id="6600555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600558">p</span>&nbsp;<span class="op" id="6600560">:=</span>&nbsp;<span class="ident" id="6600563">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600574">hostsPath</span>&nbsp;<span class="op" id="6600584">=</span>&nbsp;<span class="string" id="6600586">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600604">for</span>&nbsp;<span class="ident" id="6600608">i</span>&nbsp;<span class="op" id="6600610">:=</span>&nbsp;<span class="num" id="6600613">0</span><span class="op" id="6600614">;</span>&nbsp;<span class="ident" id="6600616">i</span>&nbsp;<span class="op" id="6600618">&lt;</span>&nbsp;<span class="builtinfunc" id="6600620">len</span><span class="op" id="6600623">(</span><span class="ident" id="6600624">hosttests</span><span class="op" id="6600633">)</span><span class="op" id="6600634">;</span>&nbsp;<span class="ident" id="6600636">i</span><span class="op" id="6600637">++</span>&nbsp;<span class="op" id="6600640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600644">tt</span>&nbsp;<span class="op" id="6600647">:=</span>&nbsp;<span class="ident" id="6600650">hosttests</span><span class="op" id="6600659">[</span><span class="ident" id="6600660">i</span><span class="op" id="6600661">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600665">ips</span>&nbsp;<span class="op" id="6600669">:=</span>&nbsp;<span class="ident" id="6600672">lookupStaticHost</span><span class="op" id="6600688">(</span><span class="ident" id="6600689">tt</span><span class="op" id="6600691">.</span><span class="ident" id="6600692">host</span><span class="op" id="6600696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600700">if</span>&nbsp;<span class="builtinfunc" id="6600703">len</span><span class="op" id="6600706">(</span><span class="ident" id="6600707">ips</span><span class="op" id="6600710">)</span>&nbsp;<span class="op" id="6600712">!=</span>&nbsp;<span class="builtinfunc" id="6600715">len</span><span class="op" id="6600718">(</span><span class="ident" id="6600719">tt</span><span class="op" id="6600721">.</span><span class="ident" id="6600722">ips</span><span class="op" id="6600725">)</span>&nbsp;<span class="op" id="6600727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600732">t</span><span class="op" id="6600733">.</span><span class="ident" id="6600734">Errorf</span><span class="op" id="6600740">(</span><span class="string" id="6600741">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6600767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6600773">len</span><span class="op" id="6600776">(</span><span class="ident" id="6600777">ips</span><span class="op" id="6600780">)</span><span class="op" id="6600781">,</span>&nbsp;<span class="builtinfunc" id="6600783">len</span><span class="op" id="6600786">(</span><span class="ident" id="6600787">tt</span><span class="op" id="6600789">.</span><span class="ident" id="6600790">ips</span><span class="op" id="6600793">)</span><span class="op" id="6600794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600799">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600814">for</span>&nbsp;<span class="ident" id="6600818">k</span><span class="op" id="6600819">,</span>&nbsp;<span class="ident" id="6600821">v</span>&nbsp;<span class="op" id="6600823">:=</span>&nbsp;<span class="keyword" id="6600826">range</span>&nbsp;<span class="ident" id="6600832">ips</span>&nbsp;<span class="op" id="6600836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6600841">if</span>&nbsp;<span class="ident" id="6600844">tt</span><span class="op" id="6600846">.</span><span class="ident" id="6600847">ips</span><span class="op" id="6600850">[</span><span class="ident" id="6600851">k</span><span class="op" id="6600852">]</span><span class="op" id="6600853">.</span><span class="ident" id="6600854">String</span><span class="op" id="6600860">(</span><span class="op" id="6600861">)</span>&nbsp;<span class="op" id="6600863">!=</span>&nbsp;<span class="ident" id="6600866">v</span>&nbsp;<span class="op" id="6600868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600874">t</span><span class="op" id="6600875">.</span><span class="ident" id="6600876">Errorf</span><span class="op" id="6600882">(</span><span class="string" id="6600883">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6600919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600926">tt</span><span class="op" id="6600928">.</span><span class="ident" id="6600929">host</span><span class="op" id="6600933">,</span>&nbsp;<span class="ident" id="6600935">v</span><span class="op" id="6600936">,</span>&nbsp;<span class="ident" id="6600938">tt</span><span class="op" id="6600940">.</span><span class="ident" id="6600941">ips</span><span class="op" id="6600944">[</span><span class="ident" id="6600945">k</span><span class="op" id="6600946">]</span><span class="op" id="6600947">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6600959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6600962">hostsPath</span>&nbsp;<span class="op" id="6600972">=</span>&nbsp;<span class="ident" id="6600974">p</span><br>
<span class="lineno"></span><span class="op" id="6600976">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6600979">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6601033">func</span>&nbsp;<span class="ident" id="6601038">TestSingleLineHostsFile</span><span class="op" id="6601061">(</span><span class="ident" id="6601062">t</span>&nbsp;<span class="op" id="6601064">*</span><span class="ident" id="6601065">testing</span><span class="op" id="6601072">.</span><span class="ident" id="6601073">T</span><span class="op" id="6601074">)</span>&nbsp;<span class="op" id="6601076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601079">p</span>&nbsp;<span class="op" id="6601081">:=</span>&nbsp;<span class="ident" id="6601084">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601095">hostsPath</span>&nbsp;<span class="op" id="6601105">=</span>&nbsp;<span class="string" id="6601107">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601137">ips</span>&nbsp;<span class="op" id="6601141">:=</span>&nbsp;<span class="ident" id="6601144">lookupStaticHost</span><span class="op" id="6601160">(</span><span class="string" id="6601161">&#34;odin&#34;</span><span class="op" id="6601167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6601170">if</span>&nbsp;<span class="builtinfunc" id="6601173">len</span><span class="op" id="6601176">(</span><span class="ident" id="6601177">ips</span><span class="op" id="6601180">)</span>&nbsp;<span class="op" id="6601182">!=</span>&nbsp;<span class="num" id="6601185">1</span>&nbsp;<span class="op" id="6601187">||</span>&nbsp;<span class="ident" id="6601190">ips</span><span class="op" id="6601193">[</span><span class="num" id="6601194">0</span><span class="op" id="6601195">]</span>&nbsp;<span class="op" id="6601197">!=</span>&nbsp;<span class="string" id="6601200">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6601212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601216">t</span><span class="op" id="6601217">.</span><span class="ident" id="6601218">Errorf</span><span class="op" id="6601224">(</span><span class="string" id="6601225">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6601257">,</span>&nbsp;<span class="ident" id="6601259">ips</span><span class="op" id="6601262">,</span>&nbsp;<span class="op" id="6601264">[</span><span class="op" id="6601265">]</span><span class="builtintype" id="6601266">string</span><span class="op" id="6601272">{</span><span class="string" id="6601273">&#34;127.0.0.2&#34;</span><span class="op" id="6601284">}</span><span class="op" id="6601285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6601288">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601292">hostsPath</span>&nbsp;<span class="op" id="6601302">=</span>&nbsp;<span class="ident" id="6601304">p</span><br>
<span class="lineno"></span><span class="op" id="6601306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6601309">func</span>&nbsp;<span class="ident" id="6601314">TestLookupHost</span><span class="op" id="6601328">(</span><span class="ident" id="6601329">t</span>&nbsp;<span class="op" id="6601331">*</span><span class="ident" id="6601332">testing</span><span class="op" id="6601339">.</span><span class="ident" id="6601340">T</span><span class="op" id="6601341">)</span>&nbsp;<span class="op" id="6601343">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6601346">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6601405">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6601463">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6601516">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601540">addrs</span><span class="op" id="6601545">,</span>&nbsp;<span class="ident" id="6601547">_</span>&nbsp;<span class="op" id="6601549">:=</span>&nbsp;<span class="ident" id="6601552">LookupHost</span><span class="op" id="6601562">(</span><span class="string" id="6601563">&#34;localhost&#34;</span><span class="op" id="6601574">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601577">sort</span><span class="op" id="6601581">.</span><span class="ident" id="6601582">Strings</span><span class="op" id="6601589">(</span><span class="ident" id="6601590">addrs</span><span class="op" id="6601595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6601598">for</span>&nbsp;<span class="ident" id="6601602">i</span>&nbsp;<span class="op" id="6601604">:=</span>&nbsp;<span class="num" id="6601607">0</span><span class="op" id="6601608">;</span>&nbsp;<span class="ident" id="6601610">i</span><span class="op" id="6601611">+</span><span class="num" id="6601612">1</span>&nbsp;<span class="op" id="6601614">&lt;</span>&nbsp;<span class="builtinfunc" id="6601616">len</span><span class="op" id="6601619">(</span><span class="ident" id="6601620">addrs</span><span class="op" id="6601625">)</span><span class="op" id="6601626">;</span>&nbsp;<span class="ident" id="6601628">i</span><span class="op" id="6601629">++</span>&nbsp;<span class="op" id="6601632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6601636">if</span>&nbsp;<span class="ident" id="6601639">addrs</span><span class="op" id="6601644">[</span><span class="ident" id="6601645">i</span><span class="op" id="6601646">]</span>&nbsp;<span class="op" id="6601648">==</span>&nbsp;<span class="ident" id="6601651">addrs</span><span class="op" id="6601656">[</span><span class="ident" id="6601657">i</span><span class="op" id="6601658">+</span><span class="num" id="6601659">1</span><span class="op" id="6601660">]</span>&nbsp;<span class="op" id="6601662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6601667">t</span><span class="op" id="6601668">.</span><span class="ident" id="6601669">Fatalf</span><span class="op" id="6601675">(</span><span class="string" id="6601676">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6601733">,</span>&nbsp;<span class="ident" id="6601735">addrs</span><span class="op" id="6601740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6601744">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6601747">}</span><br>
<span class="lineno"></span><span class="op" id="6601749">}</span>
</div>
</body>
</html>
