<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7820531">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7820587">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7820641">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7820692">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7820771">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7820780">package</span>&nbsp;<span class="ident" id="7820788">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7820793">import</span>&nbsp;<span class="op" id="7820800">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7820803">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7820809">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7820820">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7820831">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7820838">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7820841">var</span>&nbsp;<span class="ident" id="7820845">connTests</span>&nbsp;<span class="op" id="7820855">=</span>&nbsp;<span class="op" id="7820857">[</span><span class="op" id="7820858">]</span><span class="keyword" id="7820859">struct</span>&nbsp;<span class="op" id="7820866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820869">net</span>&nbsp;&nbsp;<span class="builtintype" id="7820874">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7820882">addr</span>&nbsp;<span class="builtintype" id="7820887">string</span><br>
<span class="lineno">20</span><span class="op" id="7820894">}</span><span class="op" id="7820895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820898">{</span><span class="string" id="7820899">&#34;tcp&#34;</span><span class="op" id="7820904">,</span>&nbsp;<span class="string" id="7820906">&#34;127.0.0.1:0&#34;</span><span class="op" id="7820919">}</span><span class="op" id="7820920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820923">{</span><span class="string" id="7820924">&#34;unix&#34;</span><span class="op" id="7820930">,</span>&nbsp;<span class="ident" id="7820932">testUnixAddr</span><span class="op" id="7820944">(</span><span class="op" id="7820945">)</span><span class="op" id="7820946">}</span><span class="op" id="7820947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7820950">{</span><span class="string" id="7820951">&#34;unixpacket&#34;</span><span class="op" id="7820963">,</span>&nbsp;<span class="ident" id="7820965">testUnixAddr</span><span class="op" id="7820977">(</span><span class="op" id="7820978">)</span><span class="op" id="7820979">}</span><span class="op" id="7820980">,</span><br>
<span class="lineno"></span><span class="op" id="7820982">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="7820985">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="7821051">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="7821114">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="7821162">const</span>&nbsp;<span class="ident" id="7821168">someTimeout</span>&nbsp;<span class="op" id="7821180">=</span>&nbsp;<span class="num" id="7821182">10</span>&nbsp;<span class="op" id="7821185">*</span>&nbsp;<span class="ident" id="7821187">time</span><span class="op" id="7821191">.</span><span class="ident" id="7821192">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="7821200">func</span>&nbsp;<span class="ident" id="7821205">TestConnAndListener</span><span class="op" id="7821224">(</span><span class="ident" id="7821225">t</span>&nbsp;<span class="op" id="7821227">*</span><span class="ident" id="7821228">testing</span><span class="op" id="7821235">.</span><span class="ident" id="7821236">T</span><span class="op" id="7821237">)</span>&nbsp;<span class="op" id="7821239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821242">for</span>&nbsp;<span class="ident" id="7821246">_</span><span class="op" id="7821247">,</span>&nbsp;<span class="ident" id="7821249">tt</span>&nbsp;<span class="op" id="7821252">:=</span>&nbsp;<span class="keyword" id="7821255">range</span>&nbsp;<span class="ident" id="7821261">connTests</span>&nbsp;<span class="op" id="7821271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821275">switch</span>&nbsp;<span class="ident" id="7821282">tt</span><span class="op" id="7821284">.</span><span class="ident" id="7821285">net</span>&nbsp;<span class="op" id="7821289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821293">case</span>&nbsp;<span class="string" id="7821298">&#34;unix&#34;</span><span class="op" id="7821304">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821309">switch</span>&nbsp;<span class="ident" id="7821316">runtime</span><span class="op" id="7821323">.</span><span class="ident" id="7821324">GOOS</span>&nbsp;<span class="op" id="7821329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821334">case</span>&nbsp;<span class="string" id="7821339">&#34;nacl&#34;</span><span class="op" id="7821345">,</span>&nbsp;<span class="string" id="7821347">&#34;plan9&#34;</span><span class="op" id="7821354">,</span>&nbsp;<span class="string" id="7821356">&#34;windows&#34;</span><span class="op" id="7821365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821371">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821387">case</span>&nbsp;<span class="string" id="7821392">&#34;unixpacket&#34;</span><span class="op" id="7821404">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821409">switch</span>&nbsp;<span class="ident" id="7821416">runtime</span><span class="op" id="7821423">.</span><span class="ident" id="7821424">GOOS</span>&nbsp;<span class="op" id="7821429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821434">case</span>&nbsp;<span class="string" id="7821439">&#34;android&#34;</span><span class="op" id="7821448">,</span>&nbsp;<span class="string" id="7821450">&#34;darwin&#34;</span><span class="op" id="7821458">,</span>&nbsp;<span class="string" id="7821460">&#34;nacl&#34;</span><span class="op" id="7821466">,</span>&nbsp;<span class="string" id="7821468">&#34;openbsd&#34;</span><span class="op" id="7821477">,</span>&nbsp;<span class="string" id="7821479">&#34;plan9&#34;</span><span class="op" id="7821486">,</span>&nbsp;<span class="string" id="7821488">&#34;windows&#34;</span><span class="op" id="7821497">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821503">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821515">case</span>&nbsp;<span class="string" id="7821520">&#34;freebsd&#34;</span><span class="op" id="7821529">:</span>&nbsp;<span class="comment" id="7821531">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821575">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821596">ln</span><span class="op" id="7821598">,</span>&nbsp;<span class="ident" id="7821600">err</span>&nbsp;<span class="op" id="7821604">:=</span>&nbsp;<span class="ident" id="7821607">Listen</span><span class="op" id="7821613">(</span><span class="ident" id="7821614">tt</span><span class="op" id="7821616">.</span><span class="ident" id="7821617">net</span><span class="op" id="7821620">,</span>&nbsp;<span class="ident" id="7821622">tt</span><span class="op" id="7821624">.</span><span class="ident" id="7821625">addr</span><span class="op" id="7821629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821633">if</span>&nbsp;<span class="ident" id="7821636">err</span>&nbsp;<span class="op" id="7821640">!=</span>&nbsp;<span class="ident" id="7821643">nil</span>&nbsp;<span class="op" id="7821647">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821652">t</span><span class="op" id="7821653">.</span><span class="ident" id="7821654">Fatalf</span><span class="op" id="7821660">(</span><span class="string" id="7821661">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7821680">,</span>&nbsp;<span class="ident" id="7821682">err</span><span class="op" id="7821685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821693">defer</span>&nbsp;<span class="keyword" id="7821699">func</span><span class="op" id="7821703">(</span><span class="ident" id="7821704">ln</span>&nbsp;<span class="ident" id="7821707">Listener</span><span class="op" id="7821715">,</span>&nbsp;<span class="ident" id="7821717">net</span><span class="op" id="7821720">,</span>&nbsp;<span class="ident" id="7821722">addr</span>&nbsp;<span class="builtintype" id="7821727">string</span><span class="op" id="7821733">)</span>&nbsp;<span class="op" id="7821735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821740">ln</span><span class="op" id="7821742">.</span><span class="ident" id="7821743">Close</span><span class="op" id="7821748">(</span><span class="op" id="7821749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821754">switch</span>&nbsp;<span class="ident" id="7821761">net</span>&nbsp;<span class="op" id="7821765">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821770">case</span>&nbsp;<span class="string" id="7821775">&#34;unix&#34;</span><span class="op" id="7821781">,</span>&nbsp;<span class="string" id="7821783">&#34;unixpacket&#34;</span><span class="op" id="7821795">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821801">os</span><span class="op" id="7821803">.</span><span class="ident" id="7821804">Remove</span><span class="op" id="7821810">(</span><span class="ident" id="7821811">addr</span><span class="op" id="7821815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821824">}</span><span class="op" id="7821825">(</span><span class="ident" id="7821826">ln</span><span class="op" id="7821828">,</span>&nbsp;<span class="ident" id="7821830">tt</span><span class="op" id="7821832">.</span><span class="ident" id="7821833">net</span><span class="op" id="7821836">,</span>&nbsp;<span class="ident" id="7821838">tt</span><span class="op" id="7821840">.</span><span class="ident" id="7821841">addr</span><span class="op" id="7821845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821849">if</span>&nbsp;<span class="ident" id="7821852">ln</span><span class="op" id="7821854">.</span><span class="ident" id="7821855">Addr</span><span class="op" id="7821859">(</span><span class="op" id="7821860">)</span><span class="op" id="7821861">.</span><span class="ident" id="7821862">Network</span><span class="op" id="7821869">(</span><span class="op" id="7821870">)</span>&nbsp;<span class="op" id="7821872">!=</span>&nbsp;<span class="ident" id="7821875">tt</span><span class="op" id="7821877">.</span><span class="ident" id="7821878">net</span>&nbsp;<span class="op" id="7821882">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821887">t</span><span class="op" id="7821888">.</span><span class="ident" id="7821889">Fatalf</span><span class="op" id="7821895">(</span><span class="string" id="7821896">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7821917">,</span>&nbsp;<span class="ident" id="7821919">ln</span><span class="op" id="7821921">.</span><span class="ident" id="7821922">Addr</span><span class="op" id="7821926">(</span><span class="op" id="7821927">)</span><span class="op" id="7821928">.</span><span class="ident" id="7821929">Network</span><span class="op" id="7821936">(</span><span class="op" id="7821937">)</span><span class="op" id="7821938">,</span>&nbsp;<span class="ident" id="7821940">tt</span><span class="op" id="7821942">.</span><span class="ident" id="7821943">net</span><span class="op" id="7821946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7821950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7821955">done</span>&nbsp;<span class="op" id="7821960">:=</span>&nbsp;<span class="builtinfunc" id="7821963">make</span><span class="op" id="7821967">(</span><span class="keyword" id="7821968">chan</span>&nbsp;<span class="builtintype" id="7821973">int</span><span class="op" id="7821976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7821980">go</span>&nbsp;<span class="ident" id="7821983">transponder</span><span class="op" id="7821994">(</span><span class="ident" id="7821995">t</span><span class="op" id="7821996">,</span>&nbsp;<span class="ident" id="7821998">ln</span><span class="op" id="7822000">,</span>&nbsp;<span class="ident" id="7822002">done</span><span class="op" id="7822006">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822011">c</span><span class="op" id="7822012">,</span>&nbsp;<span class="ident" id="7822014">err</span>&nbsp;<span class="op" id="7822018">:=</span>&nbsp;<span class="ident" id="7822021">Dial</span><span class="op" id="7822025">(</span><span class="ident" id="7822026">tt</span><span class="op" id="7822028">.</span><span class="ident" id="7822029">net</span><span class="op" id="7822032">,</span>&nbsp;<span class="ident" id="7822034">ln</span><span class="op" id="7822036">.</span><span class="ident" id="7822037">Addr</span><span class="op" id="7822041">(</span><span class="op" id="7822042">)</span><span class="op" id="7822043">.</span><span class="ident" id="7822044">String</span><span class="op" id="7822050">(</span><span class="op" id="7822051">)</span><span class="op" id="7822052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822056">if</span>&nbsp;<span class="ident" id="7822059">err</span>&nbsp;<span class="op" id="7822063">!=</span>&nbsp;<span class="ident" id="7822066">nil</span>&nbsp;<span class="op" id="7822070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822075">t</span><span class="op" id="7822076">.</span><span class="ident" id="7822077">Fatalf</span><span class="op" id="7822083">(</span><span class="string" id="7822084">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7822101">,</span>&nbsp;<span class="ident" id="7822103">err</span><span class="op" id="7822106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822110">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822114">defer</span>&nbsp;<span class="ident" id="7822120">c</span><span class="op" id="7822121">.</span><span class="ident" id="7822122">Close</span><span class="op" id="7822127">(</span><span class="op" id="7822128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822132">if</span>&nbsp;<span class="ident" id="7822135">c</span><span class="op" id="7822136">.</span><span class="ident" id="7822137">LocalAddr</span><span class="op" id="7822146">(</span><span class="op" id="7822147">)</span><span class="op" id="7822148">.</span><span class="ident" id="7822149">Network</span><span class="op" id="7822156">(</span><span class="op" id="7822157">)</span>&nbsp;<span class="op" id="7822159">!=</span>&nbsp;<span class="ident" id="7822162">tt</span><span class="op" id="7822164">.</span><span class="ident" id="7822165">net</span>&nbsp;<span class="op" id="7822169">||</span>&nbsp;<span class="ident" id="7822172">c</span><span class="op" id="7822173">.</span><span class="ident" id="7822174">LocalAddr</span><span class="op" id="7822183">(</span><span class="op" id="7822184">)</span><span class="op" id="7822185">.</span><span class="ident" id="7822186">Network</span><span class="op" id="7822193">(</span><span class="op" id="7822194">)</span>&nbsp;<span class="op" id="7822196">!=</span>&nbsp;<span class="ident" id="7822199">tt</span><span class="op" id="7822201">.</span><span class="ident" id="7822202">net</span>&nbsp;<span class="op" id="7822206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822211">t</span><span class="op" id="7822212">.</span><span class="ident" id="7822213">Fatalf</span><span class="op" id="7822219">(</span><span class="string" id="7822220">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7822249">,</span>&nbsp;<span class="ident" id="7822251">c</span><span class="op" id="7822252">.</span><span class="ident" id="7822253">LocalAddr</span><span class="op" id="7822262">(</span><span class="op" id="7822263">)</span><span class="op" id="7822264">.</span><span class="ident" id="7822265">Network</span><span class="op" id="7822272">(</span><span class="op" id="7822273">)</span><span class="op" id="7822274">,</span>&nbsp;<span class="ident" id="7822276">c</span><span class="op" id="7822277">.</span><span class="ident" id="7822278">RemoteAddr</span><span class="op" id="7822288">(</span><span class="op" id="7822289">)</span><span class="op" id="7822290">.</span><span class="ident" id="7822291">Network</span><span class="op" id="7822298">(</span><span class="op" id="7822299">)</span><span class="op" id="7822300">,</span>&nbsp;<span class="ident" id="7822302">tt</span><span class="op" id="7822304">.</span><span class="ident" id="7822305">net</span><span class="op" id="7822308">,</span>&nbsp;<span class="ident" id="7822310">tt</span><span class="op" id="7822312">.</span><span class="ident" id="7822313">net</span><span class="op" id="7822316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822324">c</span><span class="op" id="7822325">.</span><span class="ident" id="7822326">SetDeadline</span><span class="op" id="7822337">(</span><span class="ident" id="7822338">time</span><span class="op" id="7822342">.</span><span class="ident" id="7822343">Now</span><span class="op" id="7822346">(</span><span class="op" id="7822347">)</span><span class="op" id="7822348">.</span><span class="ident" id="7822349">Add</span><span class="op" id="7822352">(</span><span class="ident" id="7822353">someTimeout</span><span class="op" id="7822364">)</span><span class="op" id="7822365">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822369">c</span><span class="op" id="7822370">.</span><span class="ident" id="7822371">SetReadDeadline</span><span class="op" id="7822386">(</span><span class="ident" id="7822387">time</span><span class="op" id="7822391">.</span><span class="ident" id="7822392">Now</span><span class="op" id="7822395">(</span><span class="op" id="7822396">)</span><span class="op" id="7822397">.</span><span class="ident" id="7822398">Add</span><span class="op" id="7822401">(</span><span class="ident" id="7822402">someTimeout</span><span class="op" id="7822413">)</span><span class="op" id="7822414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822418">c</span><span class="op" id="7822419">.</span><span class="ident" id="7822420">SetWriteDeadline</span><span class="op" id="7822436">(</span><span class="ident" id="7822437">time</span><span class="op" id="7822441">.</span><span class="ident" id="7822442">Now</span><span class="op" id="7822445">(</span><span class="op" id="7822446">)</span><span class="op" id="7822447">.</span><span class="ident" id="7822448">Add</span><span class="op" id="7822451">(</span><span class="ident" id="7822452">someTimeout</span><span class="op" id="7822463">)</span><span class="op" id="7822464">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822469">if</span>&nbsp;<span class="ident" id="7822472">_</span><span class="op" id="7822473">,</span>&nbsp;<span class="ident" id="7822475">err</span>&nbsp;<span class="op" id="7822479">:=</span>&nbsp;<span class="ident" id="7822482">c</span><span class="op" id="7822483">.</span><span class="ident" id="7822484">Write</span><span class="op" id="7822489">(</span><span class="op" id="7822490">[</span><span class="op" id="7822491">]</span><span class="builtintype" id="7822492">byte</span><span class="op" id="7822496">(</span><span class="string" id="7822497">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="7822508">)</span><span class="op" id="7822509">)</span><span class="op" id="7822510">;</span>&nbsp;<span class="ident" id="7822512">err</span>&nbsp;<span class="op" id="7822516">!=</span>&nbsp;<span class="ident" id="7822519">nil</span>&nbsp;<span class="op" id="7822523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822528">t</span><span class="op" id="7822529">.</span><span class="ident" id="7822530">Fatalf</span><span class="op" id="7822536">(</span><span class="string" id="7822537">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7822560">,</span>&nbsp;<span class="ident" id="7822562">err</span><span class="op" id="7822565">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822573">rb</span>&nbsp;<span class="op" id="7822576">:=</span>&nbsp;<span class="builtinfunc" id="7822579">make</span><span class="op" id="7822583">(</span><span class="op" id="7822584">[</span><span class="op" id="7822585">]</span><span class="builtintype" id="7822586">byte</span><span class="op" id="7822590">,</span>&nbsp;<span class="num" id="7822592">128</span><span class="op" id="7822595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822599">if</span>&nbsp;<span class="ident" id="7822602">_</span><span class="op" id="7822603">,</span>&nbsp;<span class="ident" id="7822605">err</span>&nbsp;<span class="op" id="7822609">:=</span>&nbsp;<span class="ident" id="7822612">c</span><span class="op" id="7822613">.</span><span class="ident" id="7822614">Read</span><span class="op" id="7822618">(</span><span class="ident" id="7822619">rb</span><span class="op" id="7822621">)</span><span class="op" id="7822622">;</span>&nbsp;<span class="ident" id="7822624">err</span>&nbsp;<span class="op" id="7822628">!=</span>&nbsp;<span class="ident" id="7822631">nil</span>&nbsp;<span class="op" id="7822635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822640">t</span><span class="op" id="7822641">.</span><span class="ident" id="7822642">Fatalf</span><span class="op" id="7822648">(</span><span class="string" id="7822649">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7822671">,</span>&nbsp;<span class="ident" id="7822673">err</span><span class="op" id="7822676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822680">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822685">&lt;-</span><span class="ident" id="7822687">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822693">}</span><br>
<span class="lineno"></span><span class="op" id="7822695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7822698">func</span>&nbsp;<span class="ident" id="7822703">transponder</span><span class="op" id="7822714">(</span><span class="ident" id="7822715">t</span>&nbsp;<span class="op" id="7822717">*</span><span class="ident" id="7822718">testing</span><span class="op" id="7822725">.</span><span class="ident" id="7822726">T</span><span class="op" id="7822727">,</span>&nbsp;<span class="ident" id="7822729">ln</span>&nbsp;<span class="ident" id="7822732">Listener</span><span class="op" id="7822740">,</span>&nbsp;<span class="ident" id="7822742">done</span>&nbsp;<span class="keyword" id="7822747">chan</span><span class="op" id="7822751">&lt;-</span>&nbsp;<span class="builtintype" id="7822754">int</span><span class="op" id="7822757">)</span>&nbsp;<span class="op" id="7822759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822762">defer</span>&nbsp;<span class="keyword" id="7822768">func</span><span class="op" id="7822772">(</span><span class="op" id="7822773">)</span>&nbsp;<span class="op" id="7822775">{</span>&nbsp;<span class="ident" id="7822777">done</span>&nbsp;<span class="op" id="7822782">&lt;-</span>&nbsp;<span class="num" id="7822785">1</span>&nbsp;<span class="op" id="7822787">}</span><span class="op" id="7822788">(</span><span class="op" id="7822789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822793">switch</span>&nbsp;<span class="ident" id="7822800">ln</span>&nbsp;<span class="op" id="7822803">:=</span>&nbsp;<span class="ident" id="7822806">ln</span><span class="op" id="7822808">.</span><span class="op" id="7822809">(</span><span class="keyword" id="7822810">type</span><span class="op" id="7822814">)</span>&nbsp;<span class="op" id="7822816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822819">case</span>&nbsp;<span class="op" id="7822824">*</span><span class="ident" id="7822825">TCPListener</span><span class="op" id="7822836">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822840">ln</span><span class="op" id="7822842">.</span><span class="ident" id="7822843">SetDeadline</span><span class="op" id="7822854">(</span><span class="ident" id="7822855">time</span><span class="op" id="7822859">.</span><span class="ident" id="7822860">Now</span><span class="op" id="7822863">(</span><span class="op" id="7822864">)</span><span class="op" id="7822865">.</span><span class="ident" id="7822866">Add</span><span class="op" id="7822869">(</span><span class="ident" id="7822870">someTimeout</span><span class="op" id="7822881">)</span><span class="op" id="7822882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822885">case</span>&nbsp;<span class="op" id="7822890">*</span><span class="ident" id="7822891">UnixListener</span><span class="op" id="7822903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822907">ln</span><span class="op" id="7822909">.</span><span class="ident" id="7822910">SetDeadline</span><span class="op" id="7822921">(</span><span class="ident" id="7822922">time</span><span class="op" id="7822926">.</span><span class="ident" id="7822927">Now</span><span class="op" id="7822930">(</span><span class="op" id="7822931">)</span><span class="op" id="7822932">.</span><span class="ident" id="7822933">Add</span><span class="op" id="7822936">(</span><span class="ident" id="7822937">someTimeout</span><span class="op" id="7822948">)</span><span class="op" id="7822949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7822952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822955">c</span><span class="op" id="7822956">,</span>&nbsp;<span class="ident" id="7822958">err</span>&nbsp;<span class="op" id="7822962">:=</span>&nbsp;<span class="ident" id="7822965">ln</span><span class="op" id="7822967">.</span><span class="ident" id="7822968">Accept</span><span class="op" id="7822974">(</span><span class="op" id="7822975">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7822978">if</span>&nbsp;<span class="ident" id="7822981">err</span>&nbsp;<span class="op" id="7822985">!=</span>&nbsp;<span class="ident" id="7822988">nil</span>&nbsp;<span class="op" id="7822992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7822996">t</span><span class="op" id="7822997">.</span><span class="ident" id="7822998">Errorf</span><span class="op" id="7823004">(</span><span class="string" id="7823005">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7823033">,</span>&nbsp;<span class="ident" id="7823035">err</span><span class="op" id="7823038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7823050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823053">defer</span>&nbsp;<span class="ident" id="7823059">c</span><span class="op" id="7823060">.</span><span class="ident" id="7823061">Close</span><span class="op" id="7823066">(</span><span class="op" id="7823067">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823070">network</span>&nbsp;<span class="op" id="7823078">:=</span>&nbsp;<span class="ident" id="7823081">ln</span><span class="op" id="7823083">.</span><span class="ident" id="7823084">Addr</span><span class="op" id="7823088">(</span><span class="op" id="7823089">)</span><span class="op" id="7823090">.</span><span class="ident" id="7823091">Network</span><span class="op" id="7823098">(</span><span class="op" id="7823099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823102">if</span>&nbsp;<span class="ident" id="7823105">c</span><span class="op" id="7823106">.</span><span class="ident" id="7823107">LocalAddr</span><span class="op" id="7823116">(</span><span class="op" id="7823117">)</span><span class="op" id="7823118">.</span><span class="ident" id="7823119">Network</span><span class="op" id="7823126">(</span><span class="op" id="7823127">)</span>&nbsp;<span class="op" id="7823129">!=</span>&nbsp;<span class="ident" id="7823132">network</span>&nbsp;<span class="op" id="7823140">||</span>&nbsp;<span class="ident" id="7823143">c</span><span class="op" id="7823144">.</span><span class="ident" id="7823145">LocalAddr</span><span class="op" id="7823154">(</span><span class="op" id="7823155">)</span><span class="op" id="7823156">.</span><span class="ident" id="7823157">Network</span><span class="op" id="7823164">(</span><span class="op" id="7823165">)</span>&nbsp;<span class="op" id="7823167">!=</span>&nbsp;<span class="ident" id="7823170">network</span>&nbsp;<span class="op" id="7823178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823182">t</span><span class="op" id="7823183">.</span><span class="ident" id="7823184">Errorf</span><span class="op" id="7823190">(</span><span class="string" id="7823191">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7823220">,</span>&nbsp;<span class="ident" id="7823222">c</span><span class="op" id="7823223">.</span><span class="ident" id="7823224">LocalAddr</span><span class="op" id="7823233">(</span><span class="op" id="7823234">)</span><span class="op" id="7823235">.</span><span class="ident" id="7823236">Network</span><span class="op" id="7823243">(</span><span class="op" id="7823244">)</span><span class="op" id="7823245">,</span>&nbsp;<span class="ident" id="7823247">c</span><span class="op" id="7823248">.</span><span class="ident" id="7823249">RemoteAddr</span><span class="op" id="7823259">(</span><span class="op" id="7823260">)</span><span class="op" id="7823261">.</span><span class="ident" id="7823262">Network</span><span class="op" id="7823269">(</span><span class="op" id="7823270">)</span><span class="op" id="7823271">,</span>&nbsp;<span class="ident" id="7823273">network</span><span class="op" id="7823280">,</span>&nbsp;<span class="ident" id="7823282">network</span><span class="op" id="7823289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823293">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7823301">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823304">c</span><span class="op" id="7823305">.</span><span class="ident" id="7823306">SetDeadline</span><span class="op" id="7823317">(</span><span class="ident" id="7823318">time</span><span class="op" id="7823322">.</span><span class="ident" id="7823323">Now</span><span class="op" id="7823326">(</span><span class="op" id="7823327">)</span><span class="op" id="7823328">.</span><span class="ident" id="7823329">Add</span><span class="op" id="7823332">(</span><span class="ident" id="7823333">someTimeout</span><span class="op" id="7823344">)</span><span class="op" id="7823345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823348">c</span><span class="op" id="7823349">.</span><span class="ident" id="7823350">SetReadDeadline</span><span class="op" id="7823365">(</span><span class="ident" id="7823366">time</span><span class="op" id="7823370">.</span><span class="ident" id="7823371">Now</span><span class="op" id="7823374">(</span><span class="op" id="7823375">)</span><span class="op" id="7823376">.</span><span class="ident" id="7823377">Add</span><span class="op" id="7823380">(</span><span class="ident" id="7823381">someTimeout</span><span class="op" id="7823392">)</span><span class="op" id="7823393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823396">c</span><span class="op" id="7823397">.</span><span class="ident" id="7823398">SetWriteDeadline</span><span class="op" id="7823414">(</span><span class="ident" id="7823415">time</span><span class="op" id="7823419">.</span><span class="ident" id="7823420">Now</span><span class="op" id="7823423">(</span><span class="op" id="7823424">)</span><span class="op" id="7823425">.</span><span class="ident" id="7823426">Add</span><span class="op" id="7823429">(</span><span class="ident" id="7823430">someTimeout</span><span class="op" id="7823441">)</span><span class="op" id="7823442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823446">b</span>&nbsp;<span class="op" id="7823448">:=</span>&nbsp;<span class="builtinfunc" id="7823451">make</span><span class="op" id="7823455">(</span><span class="op" id="7823456">[</span><span class="op" id="7823457">]</span><span class="builtintype" id="7823458">byte</span><span class="op" id="7823462">,</span>&nbsp;<span class="num" id="7823464">128</span><span class="op" id="7823467">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823470">n</span><span class="op" id="7823471">,</span>&nbsp;<span class="ident" id="7823473">err</span>&nbsp;<span class="op" id="7823477">:=</span>&nbsp;<span class="ident" id="7823480">c</span><span class="op" id="7823481">.</span><span class="ident" id="7823482">Read</span><span class="op" id="7823486">(</span><span class="ident" id="7823487">b</span><span class="op" id="7823488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823491">if</span>&nbsp;<span class="ident" id="7823494">err</span>&nbsp;<span class="op" id="7823498">!=</span>&nbsp;<span class="ident" id="7823501">nil</span>&nbsp;<span class="op" id="7823505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823509">t</span><span class="op" id="7823510">.</span><span class="ident" id="7823511">Errorf</span><span class="op" id="7823517">(</span><span class="string" id="7823518">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7823540">,</span>&nbsp;<span class="ident" id="7823542">err</span><span class="op" id="7823545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823549">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7823557">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823560">if</span>&nbsp;<span class="ident" id="7823563">_</span><span class="op" id="7823564">,</span>&nbsp;<span class="ident" id="7823566">err</span>&nbsp;<span class="op" id="7823570">:=</span>&nbsp;<span class="ident" id="7823573">c</span><span class="op" id="7823574">.</span><span class="ident" id="7823575">Write</span><span class="op" id="7823580">(</span><span class="ident" id="7823581">b</span><span class="op" id="7823582">[</span><span class="op" id="7823583">:</span><span class="ident" id="7823584">n</span><span class="op" id="7823585">]</span><span class="op" id="7823586">)</span><span class="op" id="7823587">;</span>&nbsp;<span class="ident" id="7823589">err</span>&nbsp;<span class="op" id="7823593">!=</span>&nbsp;<span class="ident" id="7823596">nil</span>&nbsp;<span class="op" id="7823600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7823604">t</span><span class="op" id="7823605">.</span><span class="ident" id="7823606">Errorf</span><span class="op" id="7823612">(</span><span class="string" id="7823613">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7823636">,</span>&nbsp;<span class="ident" id="7823638">err</span><span class="op" id="7823641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7823645">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7823653">}</span><br>
<span class="lineno"></span><span class="op" id="7823655">}</span>
</div>
</body>
</html>
