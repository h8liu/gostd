<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3095455">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3095510">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3095564">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3095615">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3095680">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3095729">package</span>&nbsp;<span class="ident" id="3095737">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3095742">import</span>&nbsp;<span class="string" id="3095749">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3095757">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3095827">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3095900">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3095927">var</span>&nbsp;<span class="ident" id="3095931">services</span>&nbsp;<span class="op" id="3095940">=</span>&nbsp;<span class="keyword" id="3095942">map</span><span class="op" id="3095945">[</span><span class="builtintype" id="3095946">string</span><span class="op" id="3095952">]</span><span class="keyword" id="3095953">map</span><span class="op" id="3095956">[</span><span class="builtintype" id="3095957">string</span><span class="op" id="3095963">]</span><span class="builtintype" id="3095964">int</span><span class="op" id="3095967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3095970">&#34;tcp&#34;</span><span class="op" id="3095975">:</span>&nbsp;<span class="op" id="3095977">{</span><span class="string" id="3095978">&#34;http&#34;</span><span class="op" id="3095984">:</span>&nbsp;<span class="num" id="3095986">80</span><span class="op" id="3095988">}</span><span class="op" id="3095989">,</span><br>
<span class="lineno"></span><span class="op" id="3095991">}</span><br>
<span class="lineno"></span><span class="keyword" id="3095993">var</span>&nbsp;<span class="ident" id="3095997">servicesError</span>&nbsp;<span class="builtintype" id="3096011">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3096017">var</span>&nbsp;<span class="ident" id="3096021">onceReadServices</span>&nbsp;<span class="ident" id="3096038">sync</span><span class="op" id="3096042">.</span><span class="ident" id="3096043">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3096049">func</span>&nbsp;<span class="ident" id="3096054">readServices</span><span class="op" id="3096066">(</span><span class="op" id="3096067">)</span>&nbsp;<span class="op" id="3096069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096072">var</span>&nbsp;<span class="ident" id="3096076">file</span>&nbsp;<span class="op" id="3096081">*</span><span class="ident" id="3096082">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096088">if</span>&nbsp;<span class="ident" id="3096091">file</span><span class="op" id="3096095">,</span>&nbsp;<span class="ident" id="3096097">servicesError</span>&nbsp;<span class="op" id="3096111">=</span>&nbsp;<span class="ident" id="3096113">open</span><span class="op" id="3096117">(</span><span class="string" id="3096118">&#34;/etc/services&#34;</span><span class="op" id="3096133">)</span><span class="op" id="3096134">;</span>&nbsp;<span class="ident" id="3096136">servicesError</span>&nbsp;<span class="op" id="3096150">!=</span>&nbsp;<span class="ident" id="3096153">nil</span>&nbsp;<span class="op" id="3096157">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096161">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096172">for</span>&nbsp;<span class="ident" id="3096176">line</span><span class="op" id="3096180">,</span>&nbsp;<span class="ident" id="3096182">ok</span>&nbsp;<span class="op" id="3096185">:=</span>&nbsp;<span class="ident" id="3096188">file</span><span class="op" id="3096192">.</span><span class="ident" id="3096193">readLine</span><span class="op" id="3096201">(</span><span class="op" id="3096202">)</span><span class="op" id="3096203">;</span>&nbsp;<span class="ident" id="3096205">ok</span><span class="op" id="3096207">;</span>&nbsp;<span class="ident" id="3096209">line</span><span class="op" id="3096213">,</span>&nbsp;<span class="ident" id="3096215">ok</span>&nbsp;<span class="op" id="3096218">=</span>&nbsp;<span class="ident" id="3096220">file</span><span class="op" id="3096224">.</span><span class="ident" id="3096225">readLine</span><span class="op" id="3096233">(</span><span class="op" id="3096234">)</span>&nbsp;<span class="op" id="3096236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3096240">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096294">if</span>&nbsp;<span class="ident" id="3096297">i</span>&nbsp;<span class="op" id="3096299">:=</span>&nbsp;<span class="ident" id="3096302">byteIndex</span><span class="op" id="3096311">(</span><span class="ident" id="3096312">line</span><span class="op" id="3096316">,</span>&nbsp;<span class="string" id="3096318">&#39;#&#39;</span><span class="op" id="3096321">)</span><span class="op" id="3096322">;</span>&nbsp;<span class="ident" id="3096324">i</span>&nbsp;<span class="op" id="3096326">&gt;=</span>&nbsp;<span class="num" id="3096329">0</span>&nbsp;<span class="op" id="3096331">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096336">line</span>&nbsp;<span class="op" id="3096341">=</span>&nbsp;<span class="ident" id="3096343">line</span><span class="op" id="3096347">[</span><span class="num" id="3096348">0</span><span class="op" id="3096349">:</span><span class="ident" id="3096350">i</span><span class="op" id="3096351">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096359">f</span>&nbsp;<span class="op" id="3096361">:=</span>&nbsp;<span class="ident" id="3096364">getFields</span><span class="op" id="3096373">(</span><span class="ident" id="3096374">line</span><span class="op" id="3096378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096382">if</span>&nbsp;<span class="builtinfunc" id="3096385">len</span><span class="op" id="3096388">(</span><span class="ident" id="3096389">f</span><span class="op" id="3096390">)</span>&nbsp;<span class="op" id="3096392">&lt;</span>&nbsp;<span class="num" id="3096394">2</span>&nbsp;<span class="op" id="3096396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096401">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096416">portnet</span>&nbsp;<span class="op" id="3096424">:=</span>&nbsp;<span class="ident" id="3096427">f</span><span class="op" id="3096428">[</span><span class="num" id="3096429">1</span><span class="op" id="3096430">]</span>&nbsp;<span class="comment" id="3096432">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096446">port</span><span class="op" id="3096450">,</span>&nbsp;<span class="ident" id="3096452">j</span><span class="op" id="3096453">,</span>&nbsp;<span class="ident" id="3096455">ok</span>&nbsp;<span class="op" id="3096458">:=</span>&nbsp;<span class="ident" id="3096461">dtoi</span><span class="op" id="3096465">(</span><span class="ident" id="3096466">portnet</span><span class="op" id="3096473">,</span>&nbsp;<span class="num" id="3096475">0</span><span class="op" id="3096476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096480">if</span>&nbsp;<span class="op" id="3096483">!</span><span class="ident" id="3096484">ok</span>&nbsp;<span class="op" id="3096487">||</span>&nbsp;<span class="ident" id="3096490">port</span>&nbsp;<span class="op" id="3096495">&lt;=</span>&nbsp;<span class="num" id="3096498">0</span>&nbsp;<span class="op" id="3096500">||</span>&nbsp;<span class="ident" id="3096503">j</span>&nbsp;<span class="op" id="3096505">&gt;=</span>&nbsp;<span class="builtinfunc" id="3096508">len</span><span class="op" id="3096511">(</span><span class="ident" id="3096512">portnet</span><span class="op" id="3096519">)</span>&nbsp;<span class="op" id="3096521">||</span>&nbsp;<span class="ident" id="3096524">portnet</span><span class="op" id="3096531">[</span><span class="ident" id="3096532">j</span><span class="op" id="3096533">]</span>&nbsp;<span class="op" id="3096535">!=</span>&nbsp;<span class="string" id="3096538">&#39;/&#39;</span>&nbsp;<span class="op" id="3096542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096547">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096562">netw</span>&nbsp;<span class="op" id="3096567">:=</span>&nbsp;<span class="ident" id="3096570">portnet</span><span class="op" id="3096577">[</span><span class="ident" id="3096578">j</span><span class="op" id="3096579">+</span><span class="num" id="3096580">1</span><span class="op" id="3096581">:</span><span class="op" id="3096582">]</span>&nbsp;<span class="comment" id="3096584">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096595">m</span><span class="op" id="3096596">,</span>&nbsp;<span class="ident" id="3096598">ok1</span>&nbsp;<span class="op" id="3096602">:=</span>&nbsp;<span class="ident" id="3096605">services</span><span class="op" id="3096613">[</span><span class="ident" id="3096614">netw</span><span class="op" id="3096618">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096622">if</span>&nbsp;<span class="op" id="3096625">!</span><span class="ident" id="3096626">ok1</span>&nbsp;<span class="op" id="3096630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096635">m</span>&nbsp;<span class="op" id="3096637">=</span>&nbsp;<span class="builtinfunc" id="3096639">make</span><span class="op" id="3096643">(</span><span class="keyword" id="3096644">map</span><span class="op" id="3096647">[</span><span class="builtintype" id="3096648">string</span><span class="op" id="3096654">]</span><span class="builtintype" id="3096655">int</span><span class="op" id="3096658">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096663">services</span><span class="op" id="3096671">[</span><span class="ident" id="3096672">netw</span><span class="op" id="3096676">]</span>&nbsp;<span class="op" id="3096678">=</span>&nbsp;<span class="ident" id="3096680">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096688">for</span>&nbsp;<span class="ident" id="3096692">i</span>&nbsp;<span class="op" id="3096694">:=</span>&nbsp;<span class="num" id="3096697">0</span><span class="op" id="3096698">;</span>&nbsp;<span class="ident" id="3096700">i</span>&nbsp;<span class="op" id="3096702">&lt;</span>&nbsp;<span class="builtinfunc" id="3096704">len</span><span class="op" id="3096707">(</span><span class="ident" id="3096708">f</span><span class="op" id="3096709">)</span><span class="op" id="3096710">;</span>&nbsp;<span class="ident" id="3096712">i</span><span class="op" id="3096713">++</span>&nbsp;<span class="op" id="3096716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096721">if</span>&nbsp;<span class="ident" id="3096724">i</span>&nbsp;<span class="op" id="3096726">!=</span>&nbsp;<span class="num" id="3096729">1</span>&nbsp;<span class="op" id="3096731">{</span>&nbsp;<span class="comment" id="3096733">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096758">m</span><span class="op" id="3096759">[</span><span class="ident" id="3096760">f</span><span class="op" id="3096761">[</span><span class="ident" id="3096762">i</span><span class="op" id="3096763">]</span><span class="op" id="3096764">]</span>&nbsp;<span class="op" id="3096766">=</span>&nbsp;<span class="ident" id="3096768">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096786">file</span><span class="op" id="3096790">.</span><span class="builtinfunc" id="3096791">close</span><span class="op" id="3096796">(</span><span class="op" id="3096797">)</span><br>
<span class="lineno"></span><span class="op" id="3096799">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3096802">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3096865">func</span>&nbsp;<span class="ident" id="3096870">goLookupPort</span><span class="op" id="3096882">(</span><span class="ident" id="3096883">network</span><span class="op" id="3096890">,</span>&nbsp;<span class="ident" id="3096892">service</span>&nbsp;<span class="builtintype" id="3096900">string</span><span class="op" id="3096906">)</span>&nbsp;<span class="op" id="3096908">(</span><span class="ident" id="3096909">port</span>&nbsp;<span class="builtintype" id="3096914">int</span><span class="op" id="3096917">,</span>&nbsp;<span class="ident" id="3096919">err</span>&nbsp;<span class="builtintype" id="3096923">error</span><span class="op" id="3096928">)</span>&nbsp;<span class="op" id="3096930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096933">onceReadServices</span><span class="op" id="3096949">.</span><span class="ident" id="3096950">Do</span><span class="op" id="3096952">(</span><span class="ident" id="3096953">readServices</span><span class="op" id="3096965">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096969">switch</span>&nbsp;<span class="ident" id="3096976">network</span>&nbsp;<span class="op" id="3096984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096987">case</span>&nbsp;<span class="string" id="3096992">&#34;tcp4&#34;</span><span class="op" id="3096998">,</span>&nbsp;<span class="string" id="3097000">&#34;tcp6&#34;</span><span class="op" id="3097006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097010">network</span>&nbsp;<span class="op" id="3097018">=</span>&nbsp;<span class="string" id="3097020">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097027">case</span>&nbsp;<span class="string" id="3097032">&#34;udp4&#34;</span><span class="op" id="3097038">,</span>&nbsp;<span class="string" id="3097040">&#34;udp6&#34;</span><span class="op" id="3097046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097050">network</span>&nbsp;<span class="op" id="3097058">=</span>&nbsp;<span class="string" id="3097060">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097071">if</span>&nbsp;<span class="ident" id="3097074">m</span><span class="op" id="3097075">,</span>&nbsp;<span class="ident" id="3097077">ok</span>&nbsp;<span class="op" id="3097080">:=</span>&nbsp;<span class="ident" id="3097083">services</span><span class="op" id="3097091">[</span><span class="ident" id="3097092">network</span><span class="op" id="3097099">]</span><span class="op" id="3097100">;</span>&nbsp;<span class="ident" id="3097102">ok</span>&nbsp;<span class="op" id="3097105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097109">if</span>&nbsp;<span class="ident" id="3097112">port</span><span class="op" id="3097116">,</span>&nbsp;<span class="ident" id="3097118">ok</span>&nbsp;<span class="op" id="3097121">=</span>&nbsp;<span class="ident" id="3097123">m</span><span class="op" id="3097124">[</span><span class="ident" id="3097125">service</span><span class="op" id="3097132">]</span><span class="op" id="3097133">;</span>&nbsp;<span class="ident" id="3097135">ok</span>&nbsp;<span class="op" id="3097138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097143">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097158">return</span>&nbsp;<span class="num" id="3097165">0</span><span class="op" id="3097166">,</span>&nbsp;<span class="op" id="3097168">&amp;</span><span class="ident" id="3097169">AddrError</span><span class="op" id="3097178">{</span><span class="string" id="3097179">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3097193">,</span>&nbsp;<span class="ident" id="3097195">network</span>&nbsp;<span class="op" id="3097203">+</span>&nbsp;<span class="string" id="3097205">&#34;/&#34;</span>&nbsp;<span class="op" id="3097209">+</span>&nbsp;<span class="ident" id="3097211">service</span><span class="op" id="3097218">}</span><br>
<span class="lineno"></span><span class="op" id="3097220">}</span>
</div>
</body>
</html>
