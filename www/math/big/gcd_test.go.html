<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8464608">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8464663">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8464717">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8464768">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;a&nbsp;GCD&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="8464809">//&nbsp;Usage:&nbsp;go&nbsp;test&nbsp;math/big&nbsp;-test.bench&nbsp;GCD</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8464853">package</span>&nbsp;<span class="ident" id="8464861">big</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="8464866">import</span>&nbsp;<span class="op" id="8464873">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8464876">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8464889">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8464899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8464902">//&nbsp;randInt&nbsp;returns&nbsp;a&nbsp;pseudo-random&nbsp;Int&nbsp;in&nbsp;the&nbsp;range&nbsp;[1&lt;&lt;(size-1),&nbsp;(1&lt;&lt;size)&nbsp;-&nbsp;1]</span><br>
<span class="lineno"></span><span class="keyword" id="8464983">func</span>&nbsp;<span class="ident" id="8464988">randInt</span><span class="op" id="8464995">(</span><span class="ident" id="8464996">r</span>&nbsp;<span class="op" id="8464998">*</span><span class="ident" id="8464999">rand</span><span class="op" id="8465003">.</span><span class="ident" id="8465004">Rand</span><span class="op" id="8465008">,</span>&nbsp;<span class="ident" id="8465010">size</span>&nbsp;<span class="builtintype" id="8465015">uint</span><span class="op" id="8465019">)</span>&nbsp;<span class="op" id="8465021">*</span><span class="ident" id="8465022">Int</span>&nbsp;<span class="op" id="8465026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465029">n</span>&nbsp;<span class="op" id="8465031">:=</span>&nbsp;<span class="builtinfunc" id="8465034">new</span><span class="op" id="8465037">(</span><span class="ident" id="8465038">Int</span><span class="op" id="8465041">)</span><span class="op" id="8465042">.</span><span class="ident" id="8465043">Lsh</span><span class="op" id="8465046">(</span><span class="ident" id="8465047">intOne</span><span class="op" id="8465053">,</span>&nbsp;<span class="ident" id="8465055">size</span><span class="op" id="8465059">-</span><span class="num" id="8465060">1</span><span class="op" id="8465061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465064">x</span>&nbsp;<span class="op" id="8465066">:=</span>&nbsp;<span class="builtinfunc" id="8465069">new</span><span class="op" id="8465072">(</span><span class="ident" id="8465073">Int</span><span class="op" id="8465076">)</span><span class="op" id="8465077">.</span><span class="ident" id="8465078">Rand</span><span class="op" id="8465082">(</span><span class="ident" id="8465083">r</span><span class="op" id="8465084">,</span>&nbsp;<span class="ident" id="8465086">n</span><span class="op" id="8465087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8465090">return</span>&nbsp;<span class="ident" id="8465097">x</span><span class="op" id="8465098">.</span><span class="ident" id="8465099">Add</span><span class="op" id="8465102">(</span><span class="ident" id="8465103">x</span><span class="op" id="8465104">,</span>&nbsp;<span class="ident" id="8465106">n</span><span class="op" id="8465107">)</span>&nbsp;<span class="comment" id="8465109">//&nbsp;make&nbsp;sure&nbsp;result&nbsp;&gt;&nbsp;1&lt;&lt;(size-1)</span><br>
<span class="lineno">20</span><span class="op" id="8465143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8465146">func</span>&nbsp;<span class="ident" id="8465151">runGCD</span><span class="op" id="8465157">(</span><span class="ident" id="8465158">b</span>&nbsp;<span class="op" id="8465160">*</span><span class="ident" id="8465161">testing</span><span class="op" id="8465168">.</span><span class="ident" id="8465169">B</span><span class="op" id="8465170">,</span>&nbsp;<span class="ident" id="8465172">aSize</span><span class="op" id="8465177">,</span>&nbsp;<span class="ident" id="8465179">bSize</span>&nbsp;<span class="builtintype" id="8465185">uint</span><span class="op" id="8465189">)</span>&nbsp;<span class="op" id="8465191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465194">b</span><span class="op" id="8465195">.</span><span class="ident" id="8465196">StopTimer</span><span class="op" id="8465205">(</span><span class="op" id="8465206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8465209">var</span>&nbsp;<span class="ident" id="8465213">r</span>&nbsp;<span class="op" id="8465215">=</span>&nbsp;<span class="ident" id="8465217">rand</span><span class="op" id="8465221">.</span><span class="ident" id="8465222">New</span><span class="op" id="8465225">(</span><span class="ident" id="8465226">rand</span><span class="op" id="8465230">.</span><span class="ident" id="8465231">NewSource</span><span class="op" id="8465240">(</span><span class="num" id="8465241">1234</span><span class="op" id="8465245">)</span><span class="op" id="8465246">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465249">aa</span>&nbsp;<span class="op" id="8465252">:=</span>&nbsp;<span class="ident" id="8465255">randInt</span><span class="op" id="8465262">(</span><span class="ident" id="8465263">r</span><span class="op" id="8465264">,</span>&nbsp;<span class="ident" id="8465266">aSize</span><span class="op" id="8465271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465274">bb</span>&nbsp;<span class="op" id="8465277">:=</span>&nbsp;<span class="ident" id="8465280">randInt</span><span class="op" id="8465287">(</span><span class="ident" id="8465288">r</span><span class="op" id="8465289">,</span>&nbsp;<span class="ident" id="8465291">bSize</span><span class="op" id="8465296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8465299">b</span><span class="op" id="8465300">.</span><span class="ident" id="8465301">StartTimer</span><span class="op" id="8465311">(</span><span class="op" id="8465312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8465315">for</span>&nbsp;<span class="ident" id="8465319">i</span>&nbsp;<span class="op" id="8465321">:=</span>&nbsp;<span class="num" id="8465324">0</span><span class="op" id="8465325">;</span>&nbsp;<span class="ident" id="8465327">i</span>&nbsp;<span class="op" id="8465329">&lt;</span>&nbsp;<span class="ident" id="8465331">b</span><span class="op" id="8465332">.</span><span class="ident" id="8465333">N</span><span class="op" id="8465334">;</span>&nbsp;<span class="ident" id="8465336">i</span><span class="op" id="8465337">++</span>&nbsp;<span class="op" id="8465340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8465344">new</span><span class="op" id="8465347">(</span><span class="ident" id="8465348">Int</span><span class="op" id="8465351">)</span><span class="op" id="8465352">.</span><span class="ident" id="8465353">GCD</span><span class="op" id="8465356">(</span><span class="ident" id="8465357">nil</span><span class="op" id="8465360">,</span>&nbsp;<span class="ident" id="8465362">nil</span><span class="op" id="8465365">,</span>&nbsp;<span class="ident" id="8465367">aa</span><span class="op" id="8465369">,</span>&nbsp;<span class="ident" id="8465371">bb</span><span class="op" id="8465373">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8465376">}</span><br>
<span class="lineno"></span><span class="op" id="8465378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8465381">func</span>&nbsp;<span class="ident" id="8465386">BenchmarkGCD10x10</span><span class="op" id="8465403">(</span><span class="ident" id="8465404">b</span>&nbsp;<span class="op" id="8465406">*</span><span class="ident" id="8465407">testing</span><span class="op" id="8465414">.</span><span class="ident" id="8465415">B</span><span class="op" id="8465416">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465426">{</span>&nbsp;<span class="ident" id="8465428">runGCD</span><span class="op" id="8465434">(</span><span class="ident" id="8465435">b</span><span class="op" id="8465436">,</span>&nbsp;<span class="num" id="8465438">10</span><span class="op" id="8465440">,</span>&nbsp;<span class="num" id="8465442">10</span><span class="op" id="8465444">)</span>&nbsp;<span class="op" id="8465446">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465448">func</span>&nbsp;<span class="ident" id="8465453">BenchmarkGCD10x100</span><span class="op" id="8465471">(</span><span class="ident" id="8465472">b</span>&nbsp;<span class="op" id="8465474">*</span><span class="ident" id="8465475">testing</span><span class="op" id="8465482">.</span><span class="ident" id="8465483">B</span><span class="op" id="8465484">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465493">{</span>&nbsp;<span class="ident" id="8465495">runGCD</span><span class="op" id="8465501">(</span><span class="ident" id="8465502">b</span><span class="op" id="8465503">,</span>&nbsp;<span class="num" id="8465505">10</span><span class="op" id="8465507">,</span>&nbsp;<span class="num" id="8465509">100</span><span class="op" id="8465512">)</span>&nbsp;<span class="op" id="8465514">}</span><br>
<span class="lineno">35</span><span class="keyword" id="8465516">func</span>&nbsp;<span class="ident" id="8465521">BenchmarkGCD10x1000</span><span class="op" id="8465540">(</span><span class="ident" id="8465541">b</span>&nbsp;<span class="op" id="8465543">*</span><span class="ident" id="8465544">testing</span><span class="op" id="8465551">.</span><span class="ident" id="8465552">B</span><span class="op" id="8465553">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465561">{</span>&nbsp;<span class="ident" id="8465563">runGCD</span><span class="op" id="8465569">(</span><span class="ident" id="8465570">b</span><span class="op" id="8465571">,</span>&nbsp;<span class="num" id="8465573">10</span><span class="op" id="8465575">,</span>&nbsp;<span class="num" id="8465577">1000</span><span class="op" id="8465581">)</span>&nbsp;<span class="op" id="8465583">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465585">func</span>&nbsp;<span class="ident" id="8465590">BenchmarkGCD10x10000</span><span class="op" id="8465610">(</span><span class="ident" id="8465611">b</span>&nbsp;<span class="op" id="8465613">*</span><span class="ident" id="8465614">testing</span><span class="op" id="8465621">.</span><span class="ident" id="8465622">B</span><span class="op" id="8465623">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465630">{</span>&nbsp;<span class="ident" id="8465632">runGCD</span><span class="op" id="8465638">(</span><span class="ident" id="8465639">b</span><span class="op" id="8465640">,</span>&nbsp;<span class="num" id="8465642">10</span><span class="op" id="8465644">,</span>&nbsp;<span class="num" id="8465646">10000</span><span class="op" id="8465651">)</span>&nbsp;<span class="op" id="8465653">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465655">func</span>&nbsp;<span class="ident" id="8465660">BenchmarkGCD10x100000</span><span class="op" id="8465681">(</span><span class="ident" id="8465682">b</span>&nbsp;<span class="op" id="8465684">*</span><span class="ident" id="8465685">testing</span><span class="op" id="8465692">.</span><span class="ident" id="8465693">B</span><span class="op" id="8465694">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465700">{</span>&nbsp;<span class="ident" id="8465702">runGCD</span><span class="op" id="8465708">(</span><span class="ident" id="8465709">b</span><span class="op" id="8465710">,</span>&nbsp;<span class="num" id="8465712">10</span><span class="op" id="8465714">,</span>&nbsp;<span class="num" id="8465716">100000</span><span class="op" id="8465722">)</span>&nbsp;<span class="op" id="8465724">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465726">func</span>&nbsp;<span class="ident" id="8465731">BenchmarkGCD100x100</span><span class="op" id="8465750">(</span><span class="ident" id="8465751">b</span>&nbsp;<span class="op" id="8465753">*</span><span class="ident" id="8465754">testing</span><span class="op" id="8465761">.</span><span class="ident" id="8465762">B</span><span class="op" id="8465763">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465771">{</span>&nbsp;<span class="ident" id="8465773">runGCD</span><span class="op" id="8465779">(</span><span class="ident" id="8465780">b</span><span class="op" id="8465781">,</span>&nbsp;<span class="num" id="8465783">100</span><span class="op" id="8465786">,</span>&nbsp;<span class="num" id="8465788">100</span><span class="op" id="8465791">)</span>&nbsp;<span class="op" id="8465793">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465795">func</span>&nbsp;<span class="ident" id="8465800">BenchmarkGCD100x1000</span><span class="op" id="8465820">(</span><span class="ident" id="8465821">b</span>&nbsp;<span class="op" id="8465823">*</span><span class="ident" id="8465824">testing</span><span class="op" id="8465831">.</span><span class="ident" id="8465832">B</span><span class="op" id="8465833">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465840">{</span>&nbsp;<span class="ident" id="8465842">runGCD</span><span class="op" id="8465848">(</span><span class="ident" id="8465849">b</span><span class="op" id="8465850">,</span>&nbsp;<span class="num" id="8465852">100</span><span class="op" id="8465855">,</span>&nbsp;<span class="num" id="8465857">1000</span><span class="op" id="8465861">)</span>&nbsp;<span class="op" id="8465863">}</span><br>
<span class="lineno">40</span><span class="keyword" id="8465865">func</span>&nbsp;<span class="ident" id="8465870">BenchmarkGCD100x10000</span><span class="op" id="8465891">(</span><span class="ident" id="8465892">b</span>&nbsp;<span class="op" id="8465894">*</span><span class="ident" id="8465895">testing</span><span class="op" id="8465902">.</span><span class="ident" id="8465903">B</span><span class="op" id="8465904">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465910">{</span>&nbsp;<span class="ident" id="8465912">runGCD</span><span class="op" id="8465918">(</span><span class="ident" id="8465919">b</span><span class="op" id="8465920">,</span>&nbsp;<span class="num" id="8465922">100</span><span class="op" id="8465925">,</span>&nbsp;<span class="num" id="8465927">10000</span><span class="op" id="8465932">)</span>&nbsp;<span class="op" id="8465934">}</span><br>
<span class="lineno"></span><span class="keyword" id="8465936">func</span>&nbsp;<span class="ident" id="8465941">BenchmarkGCD100x100000</span><span class="op" id="8465963">(</span><span class="ident" id="8465964">b</span>&nbsp;<span class="op" id="8465966">*</span><span class="ident" id="8465967">testing</span><span class="op" id="8465974">.</span><span class="ident" id="8465975">B</span><span class="op" id="8465976">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8465981">{</span>&nbsp;<span class="ident" id="8465983">runGCD</span><span class="op" id="8465989">(</span><span class="ident" id="8465990">b</span><span class="op" id="8465991">,</span>&nbsp;<span class="num" id="8465993">100</span><span class="op" id="8465996">,</span>&nbsp;<span class="num" id="8465998">100000</span><span class="op" id="8466004">)</span>&nbsp;<span class="op" id="8466006">}</span><br>
<span class="lineno"></span><span class="keyword" id="8466008">func</span>&nbsp;<span class="ident" id="8466013">BenchmarkGCD1000x1000</span><span class="op" id="8466034">(</span><span class="ident" id="8466035">b</span>&nbsp;<span class="op" id="8466037">*</span><span class="ident" id="8466038">testing</span><span class="op" id="8466045">.</span><span class="ident" id="8466046">B</span><span class="op" id="8466047">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466053">{</span>&nbsp;<span class="ident" id="8466055">runGCD</span><span class="op" id="8466061">(</span><span class="ident" id="8466062">b</span><span class="op" id="8466063">,</span>&nbsp;<span class="num" id="8466065">1000</span><span class="op" id="8466069">,</span>&nbsp;<span class="num" id="8466071">1000</span><span class="op" id="8466075">)</span>&nbsp;<span class="op" id="8466077">}</span><br>
<span class="lineno"></span><span class="keyword" id="8466079">func</span>&nbsp;<span class="ident" id="8466084">BenchmarkGCD1000x10000</span><span class="op" id="8466106">(</span><span class="ident" id="8466107">b</span>&nbsp;<span class="op" id="8466109">*</span><span class="ident" id="8466110">testing</span><span class="op" id="8466117">.</span><span class="ident" id="8466118">B</span><span class="op" id="8466119">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8466124">{</span>&nbsp;<span class="ident" id="8466126">runGCD</span><span class="op" id="8466132">(</span><span class="ident" id="8466133">b</span><span class="op" id="8466134">,</span>&nbsp;<span class="num" id="8466136">1000</span><span class="op" id="8466140">,</span>&nbsp;<span class="num" id="8466142">10000</span><span class="op" id="8466147">)</span>&nbsp;<span class="op" id="8466149">}</span><br>
<span class="lineno"></span><span class="keyword" id="8466151">func</span>&nbsp;<span class="ident" id="8466156">BenchmarkGCD1000x100000</span><span class="op" id="8466179">(</span><span class="ident" id="8466180">b</span>&nbsp;<span class="op" id="8466182">*</span><span class="ident" id="8466183">testing</span><span class="op" id="8466190">.</span><span class="ident" id="8466191">B</span><span class="op" id="8466192">)</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8466196">{</span>&nbsp;<span class="ident" id="8466198">runGCD</span><span class="op" id="8466204">(</span><span class="ident" id="8466205">b</span><span class="op" id="8466206">,</span>&nbsp;<span class="num" id="8466208">1000</span><span class="op" id="8466212">,</span>&nbsp;<span class="num" id="8466214">100000</span><span class="op" id="8466220">)</span>&nbsp;<span class="op" id="8466222">}</span><br>
<span class="lineno">45</span><span class="keyword" id="8466224">func</span>&nbsp;<span class="ident" id="8466229">BenchmarkGCD10000x10000</span><span class="op" id="8466252">(</span><span class="ident" id="8466253">b</span>&nbsp;<span class="op" id="8466255">*</span><span class="ident" id="8466256">testing</span><span class="op" id="8466263">.</span><span class="ident" id="8466264">B</span><span class="op" id="8466265">)</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8466269">{</span>&nbsp;<span class="ident" id="8466271">runGCD</span><span class="op" id="8466277">(</span><span class="ident" id="8466278">b</span><span class="op" id="8466279">,</span>&nbsp;<span class="num" id="8466281">10000</span><span class="op" id="8466286">,</span>&nbsp;<span class="num" id="8466288">10000</span><span class="op" id="8466293">)</span>&nbsp;<span class="op" id="8466295">}</span><br>
<span class="lineno"></span><span class="keyword" id="8466297">func</span>&nbsp;<span class="ident" id="8466302">BenchmarkGCD10000x100000</span><span class="op" id="8466326">(</span><span class="ident" id="8466327">b</span>&nbsp;<span class="op" id="8466329">*</span><span class="ident" id="8466330">testing</span><span class="op" id="8466337">.</span><span class="ident" id="8466338">B</span><span class="op" id="8466339">)</span>&nbsp;&nbsp;<span class="op" id="8466342">{</span>&nbsp;<span class="ident" id="8466344">runGCD</span><span class="op" id="8466350">(</span><span class="ident" id="8466351">b</span><span class="op" id="8466352">,</span>&nbsp;<span class="num" id="8466354">10000</span><span class="op" id="8466359">,</span>&nbsp;<span class="num" id="8466361">100000</span><span class="op" id="8466367">)</span>&nbsp;<span class="op" id="8466369">}</span><br>
<span class="lineno"></span><span class="keyword" id="8466371">func</span>&nbsp;<span class="ident" id="8466376">BenchmarkGCD100000x100000</span><span class="op" id="8466401">(</span><span class="ident" id="8466402">b</span>&nbsp;<span class="op" id="8466404">*</span><span class="ident" id="8466405">testing</span><span class="op" id="8466412">.</span><span class="ident" id="8466413">B</span><span class="op" id="8466414">)</span>&nbsp;<span class="op" id="8466416">{</span>&nbsp;<span class="ident" id="8466418">runGCD</span><span class="op" id="8466424">(</span><span class="ident" id="8466425">b</span><span class="op" id="8466426">,</span>&nbsp;<span class="num" id="8466428">100000</span><span class="op" id="8466434">,</span>&nbsp;<span class="num" id="8466436">100000</span><span class="op" id="8466442">)</span>&nbsp;<span class="op" id="8466444">}</span>
</div>
</body>
</html>
