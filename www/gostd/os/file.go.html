<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2461830">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2461885">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2461939">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2461990">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2462066">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2462140">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2462221">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2462292">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2462367">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2462438">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2462497">//</span><br>
<span class="lineno"></span><span class="comment" id="2462500">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2462576">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2462659">//</span><br>
<span class="lineno"></span><span class="comment" id="2462662">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2462730">//</span><br>
<span class="lineno"></span><span class="comment" id="2462733">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2462788">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2462807">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2462826">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2462831">//</span><br>
<span class="lineno"></span><span class="comment" id="2462834">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2462904">//</span><br>
<span class="lineno">25</span><span class="comment" id="2462907">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2462950">//</span><br>
<span class="lineno"></span><span class="comment" id="2462953">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2463021">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2463092">//</span><br>
<span class="lineno">30</span><span class="comment" id="2463095">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2463124">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2463157">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2463176">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2463195">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2463200">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2463258">//</span><br>
<span class="lineno"></span><span class="keyword" id="2463261">package</span>&nbsp;<span class="ident" id="2463269">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2463273">import</span>&nbsp;<span class="op" id="2463280">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2463283">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2463289">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2463299">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2463302">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2463361">func</span>&nbsp;<span class="op" id="2463366">(</span><span class="ident" id="2463367">f</span>&nbsp;<span class="op" id="2463369">*</span><span class="ident" id="2463370">File</span><span class="op" id="2463374">)</span>&nbsp;<span class="ident" id="2463376">Name</span><span class="op" id="2463380">(</span><span class="op" id="2463381">)</span>&nbsp;<span class="builtintype" id="2463383">string</span>&nbsp;<span class="op" id="2463390">{</span>&nbsp;<span class="keyword" id="2463392">return</span>&nbsp;<span class="ident" id="2463399">f</span><span class="op" id="2463400">.</span><span class="ident" id="2463401">name</span>&nbsp;<span class="op" id="2463406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2463409">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2463485">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2463542">var</span>&nbsp;<span class="op" id="2463546">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463549">Stdin</span>&nbsp;&nbsp;<span class="op" id="2463556">=</span>&nbsp;<span class="ident" id="2463558">NewFile</span><span class="op" id="2463565">(</span><span class="builtintype" id="2463566">uintptr</span><span class="op" id="2463573">(</span><span class="ident" id="2463574">syscall</span><span class="op" id="2463581">.</span><span class="ident" id="2463582">Stdin</span><span class="op" id="2463587">)</span><span class="op" id="2463588">,</span>&nbsp;<span class="string" id="2463590">&#34;/dev/stdin&#34;</span><span class="op" id="2463602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463605">Stdout</span>&nbsp;<span class="op" id="2463612">=</span>&nbsp;<span class="ident" id="2463614">NewFile</span><span class="op" id="2463621">(</span><span class="builtintype" id="2463622">uintptr</span><span class="op" id="2463629">(</span><span class="ident" id="2463630">syscall</span><span class="op" id="2463637">.</span><span class="ident" id="2463638">Stdout</span><span class="op" id="2463644">)</span><span class="op" id="2463645">,</span>&nbsp;<span class="string" id="2463647">&#34;/dev/stdout&#34;</span><span class="op" id="2463660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463663">Stderr</span>&nbsp;<span class="op" id="2463670">=</span>&nbsp;<span class="ident" id="2463672">NewFile</span><span class="op" id="2463679">(</span><span class="builtintype" id="2463680">uintptr</span><span class="op" id="2463687">(</span><span class="ident" id="2463688">syscall</span><span class="op" id="2463695">.</span><span class="ident" id="2463696">Stderr</span><span class="op" id="2463702">)</span><span class="op" id="2463703">,</span>&nbsp;<span class="string" id="2463705">&#34;/dev/stderr&#34;</span><span class="op" id="2463718">)</span><br>
<span class="lineno"></span><span class="op" id="2463720">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2463723">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2463795">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2463836">const</span>&nbsp;<span class="op" id="2463842">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463845">O_RDONLY</span>&nbsp;<span class="builtintype" id="2463854">int</span>&nbsp;<span class="op" id="2463858">=</span>&nbsp;<span class="ident" id="2463860">syscall</span><span class="op" id="2463867">.</span><span class="ident" id="2463868">O_RDONLY</span>&nbsp;<span class="comment" id="2463877">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463906">O_WRONLY</span>&nbsp;<span class="builtintype" id="2463915">int</span>&nbsp;<span class="op" id="2463919">=</span>&nbsp;<span class="ident" id="2463921">syscall</span><span class="op" id="2463928">.</span><span class="ident" id="2463929">O_WRONLY</span>&nbsp;<span class="comment" id="2463938">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2463968">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2463977">int</span>&nbsp;<span class="op" id="2463981">=</span>&nbsp;<span class="ident" id="2463983">syscall</span><span class="op" id="2463990">.</span><span class="ident" id="2463991">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2464000">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464030">O_APPEND</span>&nbsp;<span class="builtintype" id="2464039">int</span>&nbsp;<span class="op" id="2464043">=</span>&nbsp;<span class="ident" id="2464045">syscall</span><span class="op" id="2464052">.</span><span class="ident" id="2464053">O_APPEND</span>&nbsp;<span class="comment" id="2464062">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464104">O_CREATE</span>&nbsp;<span class="builtintype" id="2464113">int</span>&nbsp;<span class="op" id="2464117">=</span>&nbsp;<span class="ident" id="2464119">syscall</span><span class="op" id="2464126">.</span><span class="ident" id="2464127">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2464136">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464174">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2464183">int</span>&nbsp;<span class="op" id="2464187">=</span>&nbsp;<span class="ident" id="2464189">syscall</span><span class="op" id="2464196">.</span><span class="ident" id="2464197">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2464206">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464250">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2464259">int</span>&nbsp;<span class="op" id="2464263">=</span>&nbsp;<span class="ident" id="2464265">syscall</span><span class="op" id="2464272">.</span><span class="ident" id="2464273">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2464282">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464312">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2464321">int</span>&nbsp;<span class="op" id="2464325">=</span>&nbsp;<span class="ident" id="2464327">syscall</span><span class="op" id="2464334">.</span><span class="ident" id="2464335">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2464344">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2464387">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2464390">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2464413">const</span>&nbsp;<span class="op" id="2464419">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464422">SEEK_SET</span>&nbsp;<span class="builtintype" id="2464431">int</span>&nbsp;<span class="op" id="2464435">=</span>&nbsp;<span class="num" id="2464437">0</span>&nbsp;<span class="comment" id="2464439">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464483">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2464492">int</span>&nbsp;<span class="op" id="2464496">=</span>&nbsp;<span class="num" id="2464498">1</span>&nbsp;<span class="comment" id="2464500">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464540">SEEK_END</span>&nbsp;<span class="builtintype" id="2464549">int</span>&nbsp;<span class="op" id="2464553">=</span>&nbsp;<span class="num" id="2464555">2</span>&nbsp;<span class="comment" id="2464557">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2464585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2464588">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2464653">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2464698">type</span>&nbsp;<span class="ident" id="2464703">LinkError</span>&nbsp;<span class="keyword" id="2464713">struct</span>&nbsp;<span class="op" id="2464720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464723">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2464727">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464735">Old</span>&nbsp;<span class="builtintype" id="2464739">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464747">New</span>&nbsp;<span class="builtintype" id="2464751">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2464759">Err</span>&nbsp;<span class="builtintype" id="2464763">error</span><br>
<span class="lineno"></span><span class="op" id="2464769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2464772">func</span>&nbsp;<span class="op" id="2464777">(</span><span class="ident" id="2464778">e</span>&nbsp;<span class="op" id="2464780">*</span><span class="ident" id="2464781">LinkError</span><span class="op" id="2464790">)</span>&nbsp;<span class="ident" id="2464792">Error</span><span class="op" id="2464797">(</span><span class="op" id="2464798">)</span>&nbsp;<span class="builtintype" id="2464800">string</span>&nbsp;<span class="op" id="2464807">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2464810">return</span>&nbsp;<span class="ident" id="2464817">e</span><span class="op" id="2464818">.</span><span class="ident" id="2464819">Op</span>&nbsp;<span class="op" id="2464822">+</span>&nbsp;<span class="string" id="2464824">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2464828">+</span>&nbsp;<span class="ident" id="2464830">e</span><span class="op" id="2464831">.</span><span class="ident" id="2464832">Old</span>&nbsp;<span class="op" id="2464836">+</span>&nbsp;<span class="string" id="2464838">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2464842">+</span>&nbsp;<span class="ident" id="2464844">e</span><span class="op" id="2464845">.</span><span class="ident" id="2464846">New</span>&nbsp;<span class="op" id="2464850">+</span>&nbsp;<span class="string" id="2464852">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2464857">+</span>&nbsp;<span class="ident" id="2464859">e</span><span class="op" id="2464860">.</span><span class="ident" id="2464861">Err</span><span class="op" id="2464864">.</span><span class="ident" id="2464865">Error</span><span class="op" id="2464870">(</span><span class="op" id="2464871">)</span><br>
<span class="lineno"></span><span class="op" id="2464873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2464876">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2464924">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2464985">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2465044">func</span>&nbsp;<span class="op" id="2465049">(</span><span class="ident" id="2465050">f</span>&nbsp;<span class="op" id="2465052">*</span><span class="ident" id="2465053">File</span><span class="op" id="2465057">)</span>&nbsp;<span class="ident" id="2465059">Read</span><span class="op" id="2465063">(</span><span class="ident" id="2465064">b</span>&nbsp;<span class="op" id="2465066">[</span><span class="op" id="2465067">]</span><span class="builtintype" id="2465068">byte</span><span class="op" id="2465072">)</span>&nbsp;<span class="op" id="2465074">(</span><span class="ident" id="2465075">n</span>&nbsp;<span class="builtintype" id="2465077">int</span><span class="op" id="2465080">,</span>&nbsp;<span class="ident" id="2465082">err</span>&nbsp;<span class="builtintype" id="2465086">error</span><span class="op" id="2465091">)</span>&nbsp;<span class="op" id="2465093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465096">if</span>&nbsp;<span class="ident" id="2465099">f</span>&nbsp;<span class="op" id="2465101">==</span>&nbsp;<span class="ident" id="2465104">nil</span>&nbsp;<span class="op" id="2465108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465112">return</span>&nbsp;<span class="num" id="2465119">0</span><span class="op" id="2465120">,</span>&nbsp;<span class="ident" id="2465122">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465134">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465137">n</span><span class="op" id="2465138">,</span>&nbsp;<span class="ident" id="2465140">e</span>&nbsp;<span class="op" id="2465142">:=</span>&nbsp;<span class="ident" id="2465145">f</span><span class="op" id="2465146">.</span><span class="ident" id="2465147">read</span><span class="op" id="2465151">(</span><span class="ident" id="2465152">b</span><span class="op" id="2465153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465156">if</span>&nbsp;<span class="ident" id="2465159">n</span>&nbsp;<span class="op" id="2465161">&lt;</span>&nbsp;<span class="num" id="2465163">0</span>&nbsp;<span class="op" id="2465165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465169">n</span>&nbsp;<span class="op" id="2465171">=</span>&nbsp;<span class="num" id="2465173">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465179">if</span>&nbsp;<span class="ident" id="2465182">n</span>&nbsp;<span class="op" id="2465184">==</span>&nbsp;<span class="num" id="2465187">0</span>&nbsp;<span class="op" id="2465189">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2465192">len</span><span class="op" id="2465195">(</span><span class="ident" id="2465196">b</span><span class="op" id="2465197">)</span>&nbsp;<span class="op" id="2465199">&gt;</span>&nbsp;<span class="num" id="2465201">0</span>&nbsp;<span class="op" id="2465203">&amp;&amp;</span>&nbsp;<span class="ident" id="2465206">e</span>&nbsp;<span class="op" id="2465208">==</span>&nbsp;<span class="ident" id="2465211">nil</span>&nbsp;<span class="op" id="2465215">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465219">return</span>&nbsp;<span class="num" id="2465226">0</span><span class="op" id="2465227">,</span>&nbsp;<span class="ident" id="2465229">io</span><span class="op" id="2465231">.</span><span class="ident" id="2465232">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465240">if</span>&nbsp;<span class="ident" id="2465243">e</span>&nbsp;<span class="op" id="2465245">!=</span>&nbsp;<span class="ident" id="2465248">nil</span>&nbsp;<span class="op" id="2465252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465256">err</span>&nbsp;<span class="op" id="2465260">=</span>&nbsp;<span class="op" id="2465262">&amp;</span><span class="ident" id="2465263">PathError</span><span class="op" id="2465272">{</span><span class="string" id="2465273">&#34;read&#34;</span><span class="op" id="2465279">,</span>&nbsp;<span class="ident" id="2465281">f</span><span class="op" id="2465282">.</span><span class="ident" id="2465283">name</span><span class="op" id="2465287">,</span>&nbsp;<span class="ident" id="2465289">e</span><span class="op" id="2465290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465293">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465296">return</span>&nbsp;<span class="ident" id="2465303">n</span><span class="op" id="2465304">,</span>&nbsp;<span class="ident" id="2465306">err</span><br>
<span class="lineno"></span><span class="op" id="2465310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465313">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2465385">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2465447">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2465505">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2465546">func</span>&nbsp;<span class="op" id="2465551">(</span><span class="ident" id="2465552">f</span>&nbsp;<span class="op" id="2465554">*</span><span class="ident" id="2465555">File</span><span class="op" id="2465559">)</span>&nbsp;<span class="ident" id="2465561">ReadAt</span><span class="op" id="2465567">(</span><span class="ident" id="2465568">b</span>&nbsp;<span class="op" id="2465570">[</span><span class="op" id="2465571">]</span><span class="builtintype" id="2465572">byte</span><span class="op" id="2465576">,</span>&nbsp;<span class="ident" id="2465578">off</span>&nbsp;<span class="ident" id="2465582">int64</span><span class="op" id="2465587">)</span>&nbsp;<span class="op" id="2465589">(</span><span class="ident" id="2465590">n</span>&nbsp;<span class="builtintype" id="2465592">int</span><span class="op" id="2465595">,</span>&nbsp;<span class="ident" id="2465597">err</span>&nbsp;<span class="builtintype" id="2465601">error</span><span class="op" id="2465606">)</span>&nbsp;<span class="op" id="2465608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465611">if</span>&nbsp;<span class="ident" id="2465614">f</span>&nbsp;<span class="op" id="2465616">==</span>&nbsp;<span class="ident" id="2465619">nil</span>&nbsp;<span class="op" id="2465623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465627">return</span>&nbsp;<span class="num" id="2465634">0</span><span class="op" id="2465635">,</span>&nbsp;<span class="ident" id="2465637">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465652">for</span>&nbsp;<span class="builtinfunc" id="2465656">len</span><span class="op" id="2465659">(</span><span class="ident" id="2465660">b</span><span class="op" id="2465661">)</span>&nbsp;<span class="op" id="2465663">&gt;</span>&nbsp;<span class="num" id="2465665">0</span>&nbsp;<span class="op" id="2465667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465671">m</span><span class="op" id="2465672">,</span>&nbsp;<span class="ident" id="2465674">e</span>&nbsp;<span class="op" id="2465676">:=</span>&nbsp;<span class="ident" id="2465679">f</span><span class="op" id="2465680">.</span><span class="ident" id="2465681">pread</span><span class="op" id="2465686">(</span><span class="ident" id="2465687">b</span><span class="op" id="2465688">,</span>&nbsp;<span class="ident" id="2465690">off</span><span class="op" id="2465693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465697">if</span>&nbsp;<span class="ident" id="2465700">m</span>&nbsp;<span class="op" id="2465702">==</span>&nbsp;<span class="num" id="2465705">0</span>&nbsp;<span class="op" id="2465707">&amp;&amp;</span>&nbsp;<span class="ident" id="2465710">e</span>&nbsp;<span class="op" id="2465712">==</span>&nbsp;<span class="ident" id="2465715">nil</span>&nbsp;<span class="op" id="2465719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465724">return</span>&nbsp;<span class="ident" id="2465731">n</span><span class="op" id="2465732">,</span>&nbsp;<span class="ident" id="2465734">io</span><span class="op" id="2465736">.</span><span class="ident" id="2465737">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465747">if</span>&nbsp;<span class="ident" id="2465750">e</span>&nbsp;<span class="op" id="2465752">!=</span>&nbsp;<span class="ident" id="2465755">nil</span>&nbsp;<span class="op" id="2465759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465764">err</span>&nbsp;<span class="op" id="2465768">=</span>&nbsp;<span class="op" id="2465770">&amp;</span><span class="ident" id="2465771">PathError</span><span class="op" id="2465780">{</span><span class="string" id="2465781">&#34;read&#34;</span><span class="op" id="2465787">,</span>&nbsp;<span class="ident" id="2465789">f</span><span class="op" id="2465790">.</span><span class="ident" id="2465791">name</span><span class="op" id="2465795">,</span>&nbsp;<span class="ident" id="2465797">e</span><span class="op" id="2465798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465803">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465811">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465815">n</span>&nbsp;<span class="op" id="2465817">+=</span>&nbsp;<span class="ident" id="2465820">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465824">b</span>&nbsp;<span class="op" id="2465826">=</span>&nbsp;<span class="ident" id="2465828">b</span><span class="op" id="2465829">[</span><span class="ident" id="2465830">m</span><span class="op" id="2465831">:</span><span class="op" id="2465832">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2465836">off</span>&nbsp;<span class="op" id="2465840">+=</span>&nbsp;<span class="ident" id="2465843">int64</span><span class="op" id="2465848">(</span><span class="ident" id="2465849">m</span><span class="op" id="2465850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2465853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2465856">return</span><br>
<span class="lineno">130</span><span class="op" id="2465863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465866">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2465908">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2465972">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2466023">func</span>&nbsp;<span class="op" id="2466028">(</span><span class="ident" id="2466029">f</span>&nbsp;<span class="op" id="2466031">*</span><span class="ident" id="2466032">File</span><span class="op" id="2466036">)</span>&nbsp;<span class="ident" id="2466038">Write</span><span class="op" id="2466043">(</span><span class="ident" id="2466044">b</span>&nbsp;<span class="op" id="2466046">[</span><span class="op" id="2466047">]</span><span class="builtintype" id="2466048">byte</span><span class="op" id="2466052">)</span>&nbsp;<span class="op" id="2466054">(</span><span class="ident" id="2466055">n</span>&nbsp;<span class="builtintype" id="2466057">int</span><span class="op" id="2466060">,</span>&nbsp;<span class="ident" id="2466062">err</span>&nbsp;<span class="builtintype" id="2466066">error</span><span class="op" id="2466071">)</span>&nbsp;<span class="op" id="2466073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466076">if</span>&nbsp;<span class="ident" id="2466079">f</span>&nbsp;<span class="op" id="2466081">==</span>&nbsp;<span class="ident" id="2466084">nil</span>&nbsp;<span class="op" id="2466088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466092">return</span>&nbsp;<span class="num" id="2466099">0</span><span class="op" id="2466100">,</span>&nbsp;<span class="ident" id="2466102">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466117">n</span><span class="op" id="2466118">,</span>&nbsp;<span class="ident" id="2466120">e</span>&nbsp;<span class="op" id="2466122">:=</span>&nbsp;<span class="ident" id="2466125">f</span><span class="op" id="2466126">.</span><span class="ident" id="2466127">write</span><span class="op" id="2466132">(</span><span class="ident" id="2466133">b</span><span class="op" id="2466134">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466137">if</span>&nbsp;<span class="ident" id="2466140">n</span>&nbsp;<span class="op" id="2466142">&lt;</span>&nbsp;<span class="num" id="2466144">0</span>&nbsp;<span class="op" id="2466146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466150">n</span>&nbsp;<span class="op" id="2466152">=</span>&nbsp;<span class="num" id="2466154">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466160">if</span>&nbsp;<span class="ident" id="2466163">n</span>&nbsp;<span class="op" id="2466165">!=</span>&nbsp;<span class="builtinfunc" id="2466168">len</span><span class="op" id="2466171">(</span><span class="ident" id="2466172">b</span><span class="op" id="2466173">)</span>&nbsp;<span class="op" id="2466175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466179">err</span>&nbsp;<span class="op" id="2466183">=</span>&nbsp;<span class="ident" id="2466185">io</span><span class="op" id="2466187">.</span><span class="ident" id="2466188">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466207">epipecheck</span><span class="op" id="2466217">(</span><span class="ident" id="2466218">f</span><span class="op" id="2466219">,</span>&nbsp;<span class="ident" id="2466221">e</span><span class="op" id="2466222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466226">if</span>&nbsp;<span class="ident" id="2466229">e</span>&nbsp;<span class="op" id="2466231">!=</span>&nbsp;<span class="ident" id="2466234">nil</span>&nbsp;<span class="op" id="2466238">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466242">err</span>&nbsp;<span class="op" id="2466246">=</span>&nbsp;<span class="op" id="2466248">&amp;</span><span class="ident" id="2466249">PathError</span><span class="op" id="2466258">{</span><span class="string" id="2466259">&#34;write&#34;</span><span class="op" id="2466266">,</span>&nbsp;<span class="ident" id="2466268">f</span><span class="op" id="2466269">.</span><span class="ident" id="2466270">name</span><span class="op" id="2466274">,</span>&nbsp;<span class="ident" id="2466276">e</span><span class="op" id="2466277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466283">return</span>&nbsp;<span class="ident" id="2466290">n</span><span class="op" id="2466291">,</span>&nbsp;<span class="ident" id="2466293">err</span><br>
<span class="lineno"></span><span class="op" id="2466297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2466300">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2466372">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2466436">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2466489">func</span>&nbsp;<span class="op" id="2466494">(</span><span class="ident" id="2466495">f</span>&nbsp;<span class="op" id="2466497">*</span><span class="ident" id="2466498">File</span><span class="op" id="2466502">)</span>&nbsp;<span class="ident" id="2466504">WriteAt</span><span class="op" id="2466511">(</span><span class="ident" id="2466512">b</span>&nbsp;<span class="op" id="2466514">[</span><span class="op" id="2466515">]</span><span class="builtintype" id="2466516">byte</span><span class="op" id="2466520">,</span>&nbsp;<span class="ident" id="2466522">off</span>&nbsp;<span class="ident" id="2466526">int64</span><span class="op" id="2466531">)</span>&nbsp;<span class="op" id="2466533">(</span><span class="ident" id="2466534">n</span>&nbsp;<span class="builtintype" id="2466536">int</span><span class="op" id="2466539">,</span>&nbsp;<span class="ident" id="2466541">err</span>&nbsp;<span class="builtintype" id="2466545">error</span><span class="op" id="2466550">)</span>&nbsp;<span class="op" id="2466552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466555">if</span>&nbsp;<span class="ident" id="2466558">f</span>&nbsp;<span class="op" id="2466560">==</span>&nbsp;<span class="ident" id="2466563">nil</span>&nbsp;<span class="op" id="2466567">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466571">return</span>&nbsp;<span class="num" id="2466578">0</span><span class="op" id="2466579">,</span>&nbsp;<span class="ident" id="2466581">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466596">for</span>&nbsp;<span class="builtinfunc" id="2466600">len</span><span class="op" id="2466603">(</span><span class="ident" id="2466604">b</span><span class="op" id="2466605">)</span>&nbsp;<span class="op" id="2466607">&gt;</span>&nbsp;<span class="num" id="2466609">0</span>&nbsp;<span class="op" id="2466611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466615">m</span><span class="op" id="2466616">,</span>&nbsp;<span class="ident" id="2466618">e</span>&nbsp;<span class="op" id="2466620">:=</span>&nbsp;<span class="ident" id="2466623">f</span><span class="op" id="2466624">.</span><span class="ident" id="2466625">pwrite</span><span class="op" id="2466631">(</span><span class="ident" id="2466632">b</span><span class="op" id="2466633">,</span>&nbsp;<span class="ident" id="2466635">off</span><span class="op" id="2466638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466642">if</span>&nbsp;<span class="ident" id="2466645">e</span>&nbsp;<span class="op" id="2466647">!=</span>&nbsp;<span class="ident" id="2466650">nil</span>&nbsp;<span class="op" id="2466654">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466659">err</span>&nbsp;<span class="op" id="2466663">=</span>&nbsp;<span class="op" id="2466665">&amp;</span><span class="ident" id="2466666">PathError</span><span class="op" id="2466675">{</span><span class="string" id="2466676">&#34;write&#34;</span><span class="op" id="2466683">,</span>&nbsp;<span class="ident" id="2466685">f</span><span class="op" id="2466686">.</span><span class="ident" id="2466687">name</span><span class="op" id="2466691">,</span>&nbsp;<span class="ident" id="2466693">e</span><span class="op" id="2466694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466699">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466711">n</span>&nbsp;<span class="op" id="2466713">+=</span>&nbsp;<span class="ident" id="2466716">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466720">b</span>&nbsp;<span class="op" id="2466722">=</span>&nbsp;<span class="ident" id="2466724">b</span><span class="op" id="2466725">[</span><span class="ident" id="2466726">m</span><span class="op" id="2466727">:</span><span class="op" id="2466728">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2466732">off</span>&nbsp;<span class="op" id="2466736">+=</span>&nbsp;<span class="ident" id="2466739">int64</span><span class="op" id="2466744">(</span><span class="ident" id="2466745">m</span><span class="op" id="2466746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2466749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2466752">return</span><br>
<span class="lineno"></span><span class="op" id="2466759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2466762">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2466844">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2466920">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2466988">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2467039">func</span>&nbsp;<span class="op" id="2467044">(</span><span class="ident" id="2467045">f</span>&nbsp;<span class="op" id="2467047">*</span><span class="ident" id="2467048">File</span><span class="op" id="2467052">)</span>&nbsp;<span class="ident" id="2467054">Seek</span><span class="op" id="2467058">(</span><span class="ident" id="2467059">offset</span>&nbsp;<span class="ident" id="2467066">int64</span><span class="op" id="2467071">,</span>&nbsp;<span class="ident" id="2467073">whence</span>&nbsp;<span class="builtintype" id="2467080">int</span><span class="op" id="2467083">)</span>&nbsp;<span class="op" id="2467085">(</span><span class="ident" id="2467086">ret</span>&nbsp;<span class="ident" id="2467090">int64</span><span class="op" id="2467095">,</span>&nbsp;<span class="ident" id="2467097">err</span>&nbsp;<span class="builtintype" id="2467101">error</span><span class="op" id="2467106">)</span>&nbsp;<span class="op" id="2467108">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467111">if</span>&nbsp;<span class="ident" id="2467114">f</span>&nbsp;<span class="op" id="2467116">==</span>&nbsp;<span class="ident" id="2467119">nil</span>&nbsp;<span class="op" id="2467123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467127">return</span>&nbsp;<span class="num" id="2467134">0</span><span class="op" id="2467135">,</span>&nbsp;<span class="ident" id="2467137">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467152">r</span><span class="op" id="2467153">,</span>&nbsp;<span class="ident" id="2467155">e</span>&nbsp;<span class="op" id="2467157">:=</span>&nbsp;<span class="ident" id="2467160">f</span><span class="op" id="2467161">.</span><span class="ident" id="2467162">seek</span><span class="op" id="2467166">(</span><span class="ident" id="2467167">offset</span><span class="op" id="2467173">,</span>&nbsp;<span class="ident" id="2467175">whence</span><span class="op" id="2467181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467184">if</span>&nbsp;<span class="ident" id="2467187">e</span>&nbsp;<span class="op" id="2467189">==</span>&nbsp;<span class="ident" id="2467192">nil</span>&nbsp;<span class="op" id="2467196">&amp;&amp;</span>&nbsp;<span class="ident" id="2467199">f</span><span class="op" id="2467200">.</span><span class="ident" id="2467201">dirinfo</span>&nbsp;<span class="op" id="2467209">!=</span>&nbsp;<span class="ident" id="2467212">nil</span>&nbsp;<span class="op" id="2467216">&amp;&amp;</span>&nbsp;<span class="ident" id="2467219">r</span>&nbsp;<span class="op" id="2467221">!=</span>&nbsp;<span class="num" id="2467224">0</span>&nbsp;<span class="op" id="2467226">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467230">e</span>&nbsp;<span class="op" id="2467232">=</span>&nbsp;<span class="ident" id="2467234">syscall</span><span class="op" id="2467241">.</span><span class="ident" id="2467242">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467253">if</span>&nbsp;<span class="ident" id="2467256">e</span>&nbsp;<span class="op" id="2467258">!=</span>&nbsp;<span class="ident" id="2467261">nil</span>&nbsp;<span class="op" id="2467265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467269">return</span>&nbsp;<span class="num" id="2467276">0</span><span class="op" id="2467277">,</span>&nbsp;<span class="op" id="2467279">&amp;</span><span class="ident" id="2467280">PathError</span><span class="op" id="2467289">{</span><span class="string" id="2467290">&#34;seek&#34;</span><span class="op" id="2467296">,</span>&nbsp;<span class="ident" id="2467298">f</span><span class="op" id="2467299">.</span><span class="ident" id="2467300">name</span><span class="op" id="2467304">,</span>&nbsp;<span class="ident" id="2467306">e</span><span class="op" id="2467307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467310">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467313">return</span>&nbsp;<span class="ident" id="2467320">r</span><span class="op" id="2467321">,</span>&nbsp;<span class="ident" id="2467323">nil</span><br>
<span class="lineno"></span><span class="op" id="2467327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2467330">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2467408">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2467429">func</span>&nbsp;<span class="op" id="2467434">(</span><span class="ident" id="2467435">f</span>&nbsp;<span class="op" id="2467437">*</span><span class="ident" id="2467438">File</span><span class="op" id="2467442">)</span>&nbsp;<span class="ident" id="2467444">WriteString</span><span class="op" id="2467455">(</span><span class="ident" id="2467456">s</span>&nbsp;<span class="builtintype" id="2467458">string</span><span class="op" id="2467464">)</span>&nbsp;<span class="op" id="2467466">(</span><span class="ident" id="2467467">ret</span>&nbsp;<span class="builtintype" id="2467471">int</span><span class="op" id="2467474">,</span>&nbsp;<span class="ident" id="2467476">err</span>&nbsp;<span class="builtintype" id="2467480">error</span><span class="op" id="2467485">)</span>&nbsp;<span class="op" id="2467487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467490">if</span>&nbsp;<span class="ident" id="2467493">f</span>&nbsp;<span class="op" id="2467495">==</span>&nbsp;<span class="ident" id="2467498">nil</span>&nbsp;<span class="op" id="2467502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467506">return</span>&nbsp;<span class="num" id="2467513">0</span><span class="op" id="2467514">,</span>&nbsp;<span class="ident" id="2467516">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467531">return</span>&nbsp;<span class="ident" id="2467538">f</span><span class="op" id="2467539">.</span><span class="ident" id="2467540">Write</span><span class="op" id="2467545">(</span><span class="op" id="2467546">[</span><span class="op" id="2467547">]</span><span class="builtintype" id="2467548">byte</span><span class="op" id="2467552">(</span><span class="ident" id="2467553">s</span><span class="op" id="2467554">)</span><span class="op" id="2467555">)</span><br>
<span class="lineno">200</span><span class="op" id="2467557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2467560">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2467638">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2467694">func</span>&nbsp;<span class="ident" id="2467699">Mkdir</span><span class="op" id="2467704">(</span><span class="ident" id="2467705">name</span>&nbsp;<span class="builtintype" id="2467710">string</span><span class="op" id="2467716">,</span>&nbsp;<span class="ident" id="2467718">perm</span>&nbsp;<span class="ident" id="2467723">FileMode</span><span class="op" id="2467731">)</span>&nbsp;<span class="builtintype" id="2467733">error</span>&nbsp;<span class="op" id="2467739">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467742">e</span>&nbsp;<span class="op" id="2467744">:=</span>&nbsp;<span class="ident" id="2467747">syscall</span><span class="op" id="2467754">.</span><span class="ident" id="2467755">Mkdir</span><span class="op" id="2467760">(</span><span class="ident" id="2467761">name</span><span class="op" id="2467765">,</span>&nbsp;<span class="ident" id="2467767">syscallMode</span><span class="op" id="2467778">(</span><span class="ident" id="2467779">perm</span><span class="op" id="2467783">)</span><span class="op" id="2467784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467787">if</span>&nbsp;<span class="ident" id="2467790">e</span>&nbsp;<span class="op" id="2467792">!=</span>&nbsp;<span class="ident" id="2467795">nil</span>&nbsp;<span class="op" id="2467799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467803">return</span>&nbsp;<span class="op" id="2467810">&amp;</span><span class="ident" id="2467811">PathError</span><span class="op" id="2467820">{</span><span class="string" id="2467821">&#34;mkdir&#34;</span><span class="op" id="2467828">,</span>&nbsp;<span class="ident" id="2467830">name</span><span class="op" id="2467834">,</span>&nbsp;<span class="ident" id="2467836">e</span><span class="op" id="2467837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467843">return</span>&nbsp;<span class="ident" id="2467850">nil</span><br>
<span class="lineno">210</span><span class="op" id="2467854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2467857">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2467928">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2467984">func</span>&nbsp;<span class="ident" id="2467989">Chdir</span><span class="op" id="2467994">(</span><span class="ident" id="2467995">dir</span>&nbsp;<span class="builtintype" id="2467999">string</span><span class="op" id="2468005">)</span>&nbsp;<span class="builtintype" id="2468007">error</span>&nbsp;<span class="op" id="2468013">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468016">if</span>&nbsp;<span class="ident" id="2468019">e</span>&nbsp;<span class="op" id="2468021">:=</span>&nbsp;<span class="ident" id="2468024">syscall</span><span class="op" id="2468031">.</span><span class="ident" id="2468032">Chdir</span><span class="op" id="2468037">(</span><span class="ident" id="2468038">dir</span><span class="op" id="2468041">)</span><span class="op" id="2468042">;</span>&nbsp;<span class="ident" id="2468044">e</span>&nbsp;<span class="op" id="2468046">!=</span>&nbsp;<span class="ident" id="2468049">nil</span>&nbsp;<span class="op" id="2468053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468057">return</span>&nbsp;<span class="op" id="2468064">&amp;</span><span class="ident" id="2468065">PathError</span><span class="op" id="2468074">{</span><span class="string" id="2468075">&#34;chdir&#34;</span><span class="op" id="2468082">,</span>&nbsp;<span class="ident" id="2468084">dir</span><span class="op" id="2468087">,</span>&nbsp;<span class="ident" id="2468089">e</span><span class="op" id="2468090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468096">return</span>&nbsp;<span class="ident" id="2468103">nil</span><br>
<span class="lineno"></span><span class="op" id="2468107">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2468110">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2468170">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2468200">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2468256">func</span>&nbsp;<span class="op" id="2468261">(</span><span class="ident" id="2468262">f</span>&nbsp;<span class="op" id="2468264">*</span><span class="ident" id="2468265">File</span><span class="op" id="2468269">)</span>&nbsp;<span class="ident" id="2468271">Chdir</span><span class="op" id="2468276">(</span><span class="op" id="2468277">)</span>&nbsp;<span class="builtintype" id="2468279">error</span>&nbsp;<span class="op" id="2468285">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468288">if</span>&nbsp;<span class="ident" id="2468291">f</span>&nbsp;<span class="op" id="2468293">==</span>&nbsp;<span class="ident" id="2468296">nil</span>&nbsp;<span class="op" id="2468300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468304">return</span>&nbsp;<span class="ident" id="2468311">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468326">if</span>&nbsp;<span class="ident" id="2468329">e</span>&nbsp;<span class="op" id="2468331">:=</span>&nbsp;<span class="ident" id="2468334">syscall</span><span class="op" id="2468341">.</span><span class="ident" id="2468342">Fchdir</span><span class="op" id="2468348">(</span><span class="ident" id="2468349">f</span><span class="op" id="2468350">.</span><span class="ident" id="2468351">fd</span><span class="op" id="2468353">)</span><span class="op" id="2468354">;</span>&nbsp;<span class="ident" id="2468356">e</span>&nbsp;<span class="op" id="2468358">!=</span>&nbsp;<span class="ident" id="2468361">nil</span>&nbsp;<span class="op" id="2468365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468369">return</span>&nbsp;<span class="op" id="2468376">&amp;</span><span class="ident" id="2468377">PathError</span><span class="op" id="2468386">{</span><span class="string" id="2468387">&#34;chdir&#34;</span><span class="op" id="2468394">,</span>&nbsp;<span class="ident" id="2468396">f</span><span class="op" id="2468397">.</span><span class="ident" id="2468398">name</span><span class="op" id="2468402">,</span>&nbsp;<span class="ident" id="2468404">e</span><span class="op" id="2468405">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468411">return</span>&nbsp;<span class="ident" id="2468418">nil</span><br>
<span class="lineno"></span><span class="op" id="2468422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2468425">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2468494">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2468560">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2468593">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2468649">func</span>&nbsp;<span class="ident" id="2468654">Open</span><span class="op" id="2468658">(</span><span class="ident" id="2468659">name</span>&nbsp;<span class="builtintype" id="2468664">string</span><span class="op" id="2468670">)</span>&nbsp;<span class="op" id="2468672">(</span><span class="ident" id="2468673">file</span>&nbsp;<span class="op" id="2468678">*</span><span class="ident" id="2468679">File</span><span class="op" id="2468683">,</span>&nbsp;<span class="ident" id="2468685">err</span>&nbsp;<span class="builtintype" id="2468689">error</span><span class="op" id="2468694">)</span>&nbsp;<span class="op" id="2468696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468699">return</span>&nbsp;<span class="ident" id="2468706">OpenFile</span><span class="op" id="2468714">(</span><span class="ident" id="2468715">name</span><span class="op" id="2468719">,</span>&nbsp;<span class="ident" id="2468721">O_RDONLY</span><span class="op" id="2468729">,</span>&nbsp;<span class="num" id="2468731">0</span><span class="op" id="2468732">)</span><br>
<span class="lineno">240</span><span class="op" id="2468734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2468737">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2468807">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2468875">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2468944">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2468955">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2469011">func</span>&nbsp;<span class="ident" id="2469016">Create</span><span class="op" id="2469022">(</span><span class="ident" id="2469023">name</span>&nbsp;<span class="builtintype" id="2469028">string</span><span class="op" id="2469034">)</span>&nbsp;<span class="op" id="2469036">(</span><span class="ident" id="2469037">file</span>&nbsp;<span class="op" id="2469042">*</span><span class="ident" id="2469043">File</span><span class="op" id="2469047">,</span>&nbsp;<span class="ident" id="2469049">err</span>&nbsp;<span class="builtintype" id="2469053">error</span><span class="op" id="2469058">)</span>&nbsp;<span class="op" id="2469060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469063">return</span>&nbsp;<span class="ident" id="2469070">OpenFile</span><span class="op" id="2469078">(</span><span class="ident" id="2469079">name</span><span class="op" id="2469083">,</span>&nbsp;<span class="ident" id="2469085">O_RDWR</span><span class="op" id="2469091">|</span><span class="ident" id="2469092">O_CREATE</span><span class="op" id="2469100">|</span><span class="ident" id="2469101">O_TRUNC</span><span class="op" id="2469108">,</span>&nbsp;<span class="num" id="2469110">0666</span><span class="op" id="2469114">)</span><br>
<span class="lineno"></span><span class="op" id="2469116">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2469119">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2469152">var</span>&nbsp;<span class="ident" id="2469156">lstat</span>&nbsp;<span class="op" id="2469162">=</span>&nbsp;<span class="ident" id="2469164">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2469171">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2469243">func</span>&nbsp;<span class="ident" id="2469248">Rename</span><span class="op" id="2469254">(</span><span class="ident" id="2469255">oldpath</span><span class="op" id="2469262">,</span>&nbsp;<span class="ident" id="2469264">newpath</span>&nbsp;<span class="builtintype" id="2469272">string</span><span class="op" id="2469278">)</span>&nbsp;<span class="builtintype" id="2469280">error</span>&nbsp;<span class="op" id="2469286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469289">return</span>&nbsp;<span class="ident" id="2469296">rename</span><span class="op" id="2469302">(</span><span class="ident" id="2469303">oldpath</span><span class="op" id="2469310">,</span>&nbsp;<span class="ident" id="2469312">newpath</span><span class="op" id="2469319">)</span><br>
<span class="lineno"></span><span class="op" id="2469321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2469324">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2469396">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2469460">func</span>&nbsp;<span class="ident" id="2469465">fixCount</span><span class="op" id="2469473">(</span><span class="ident" id="2469474">n</span>&nbsp;<span class="builtintype" id="2469476">int</span><span class="op" id="2469479">,</span>&nbsp;<span class="ident" id="2469481">err</span>&nbsp;<span class="builtintype" id="2469485">error</span><span class="op" id="2469490">)</span>&nbsp;<span class="op" id="2469492">(</span><span class="builtintype" id="2469493">int</span><span class="op" id="2469496">,</span>&nbsp;<span class="builtintype" id="2469498">error</span><span class="op" id="2469503">)</span>&nbsp;<span class="op" id="2469505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469508">if</span>&nbsp;<span class="ident" id="2469511">n</span>&nbsp;<span class="op" id="2469513">&lt;</span>&nbsp;<span class="num" id="2469515">0</span>&nbsp;<span class="op" id="2469517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469521">n</span>&nbsp;<span class="op" id="2469523">=</span>&nbsp;<span class="num" id="2469525">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469528">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469531">return</span>&nbsp;<span class="ident" id="2469538">n</span><span class="op" id="2469539">,</span>&nbsp;<span class="ident" id="2469541">err</span><br>
<span class="lineno"></span><span class="op" id="2469545">}</span>
</div>
</body>
</html>
