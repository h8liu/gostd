<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4391855">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4391910">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4391964">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4392015">package</span>&nbsp;<span class="ident" id="4392023">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4392033">import</span>&nbsp;<span class="op" id="4392040">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4392043">&#34;fmt&#34;</span><br>
<span class="lineno"></span><span class="op" id="4392049">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4392052">//&nbsp;context&nbsp;describes&nbsp;the&nbsp;state&nbsp;an&nbsp;HTML&nbsp;parser&nbsp;must&nbsp;be&nbsp;in&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4392129">//&nbsp;portion&nbsp;of&nbsp;HTML&nbsp;produced&nbsp;by&nbsp;evaluating&nbsp;a&nbsp;particular&nbsp;template&nbsp;node.</span><br>
<span class="lineno"></span><span class="comment" id="4392199">//</span><br>
<span class="lineno"></span><span class="comment" id="4392202">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;context&nbsp;is&nbsp;the&nbsp;start&nbsp;context&nbsp;for&nbsp;a&nbsp;template&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="4392277">//&nbsp;produces&nbsp;an&nbsp;HTML&nbsp;fragment&nbsp;as&nbsp;defined&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4392320">//&nbsp;http://www.w3.org/TR/html5/syntax.html#the-end</span><br>
<span class="lineno"></span><span class="comment" id="4392370">//&nbsp;where&nbsp;the&nbsp;context&nbsp;element&nbsp;is&nbsp;null.</span><br>
<span class="lineno"></span><span class="keyword" id="4392408">type</span>&nbsp;<span class="ident" id="4392413">context</span>&nbsp;<span class="keyword" id="4392421">struct</span>&nbsp;<span class="op" id="4392428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392431">state</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4392439"><a href="/html/template/context.go.html#4394112">state</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392446">delim</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4392454"><a href="/html/template/context.go.html#4397978">delim</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392461">urlPart</span>&nbsp;<span class="ident" id="4392469"><a href="/html/template/context.go.html#4398812">urlPart</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392478">jsCtx</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4392486"><a href="/html/template/context.go.html#4399789">jsCtx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392493">attr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4392501"><a href="/html/template/context.go.html#4401517">attr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392507">element</span>&nbsp;<span class="ident" id="4392515"><a href="/html/template/context.go.html#4400644">element</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392524">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4392532">*</span><span class="ident" id="4392533"><a href="/html/template/error.go.html#4415791">Error</a></span><br>
<span class="lineno"></span><span class="op" id="4392539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4392542">func</span>&nbsp;<span class="op" id="4392547">(</span><span class="ident" id="4392548">c</span>&nbsp;<span class="ident" id="4392550"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4392557">)</span>&nbsp;<span class="ident" id="4392559">String</span><span class="op" id="4392565">(</span><span class="op" id="4392566">)</span>&nbsp;<span class="builtintype" id="4392568">string</span>&nbsp;<span class="op" id="4392575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4392578">return</span>&nbsp;<span class="ident" id="4392585"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4392588">.</span><span class="ident" id="4392589">Sprintf</span><span class="op" id="4392596">(</span><span class="string" id="4392597">&#34;{%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v}&#34;</span><span class="op" id="4392621">,</span>&nbsp;<span class="ident" id="4392623"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392624">.</span><span class="ident" id="4392625">state</span><span class="op" id="4392630">,</span>&nbsp;<span class="ident" id="4392632"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392633">.</span><span class="ident" id="4392634">delim</span><span class="op" id="4392639">,</span>&nbsp;<span class="ident" id="4392641"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392642">.</span><span class="ident" id="4392643">urlPart</span><span class="op" id="4392650">,</span>&nbsp;<span class="ident" id="4392652"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392653">.</span><span class="ident" id="4392654">jsCtx</span><span class="op" id="4392659">,</span>&nbsp;<span class="ident" id="4392661"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392662">.</span><span class="ident" id="4392663">attr</span><span class="op" id="4392667">,</span>&nbsp;<span class="ident" id="4392669"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392670">.</span><span class="ident" id="4392671">element</span><span class="op" id="4392678">,</span>&nbsp;<span class="ident" id="4392680"><a href="/html/template/context.go.html#4392548">c</a></span><span class="op" id="4392681">.</span><span class="ident" id="4392682">err</span><span class="op" id="4392685">)</span><br>
<span class="lineno">30</span><span class="op" id="4392687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4392690">//&nbsp;eq&nbsp;reports&nbsp;whether&nbsp;two&nbsp;contexts&nbsp;are&nbsp;equal.</span><br>
<span class="lineno"></span><span class="keyword" id="4392736">func</span>&nbsp;<span class="op" id="4392741">(</span><span class="ident" id="4392742">c</span>&nbsp;<span class="ident" id="4392744"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4392751">)</span>&nbsp;<span class="ident" id="4392753">eq</span><span class="op" id="4392755">(</span><span class="ident" id="4392756">d</span>&nbsp;<span class="ident" id="4392758"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4392765">)</span>&nbsp;<span class="builtintype" id="4392767">bool</span>&nbsp;<span class="op" id="4392772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4392775">return</span>&nbsp;<span class="ident" id="4392782"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392783">.</span><span class="ident" id="4392784">state</span>&nbsp;<span class="op" id="4392790">==</span>&nbsp;<span class="ident" id="4392793"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392794">.</span><span class="ident" id="4392795">state</span>&nbsp;<span class="op" id="4392801">&amp;&amp;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392806"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392807">.</span><span class="ident" id="4392808">delim</span>&nbsp;<span class="op" id="4392814">==</span>&nbsp;<span class="ident" id="4392817"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392818">.</span><span class="ident" id="4392819">delim</span>&nbsp;<span class="op" id="4392825">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392830"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392831">.</span><span class="ident" id="4392832">urlPart</span>&nbsp;<span class="op" id="4392840">==</span>&nbsp;<span class="ident" id="4392843"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392844">.</span><span class="ident" id="4392845">urlPart</span>&nbsp;<span class="op" id="4392853">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392858"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392859">.</span><span class="ident" id="4392860">jsCtx</span>&nbsp;<span class="op" id="4392866">==</span>&nbsp;<span class="ident" id="4392869"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392870">.</span><span class="ident" id="4392871">jsCtx</span>&nbsp;<span class="op" id="4392877">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392882"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392883">.</span><span class="ident" id="4392884">attr</span>&nbsp;<span class="op" id="4392889">==</span>&nbsp;<span class="ident" id="4392892"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392893">.</span><span class="ident" id="4392894">attr</span>&nbsp;<span class="op" id="4392899">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392904"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392905">.</span><span class="ident" id="4392906">element</span>&nbsp;<span class="op" id="4392914">==</span>&nbsp;<span class="ident" id="4392917"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392918">.</span><span class="ident" id="4392919">element</span>&nbsp;<span class="op" id="4392927">&amp;&amp;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4392932"><a href="/html/template/context.go.html#4392742">c</a></span><span class="op" id="4392933">.</span><span class="ident" id="4392934">err</span>&nbsp;<span class="op" id="4392938">==</span>&nbsp;<span class="ident" id="4392941"><a href="/html/template/context.go.html#4392756">d</a></span><span class="op" id="4392942">.</span><span class="ident" id="4392943">err</span><br>
<span class="lineno"></span><span class="op" id="4392947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4392950">//&nbsp;mangle&nbsp;produces&nbsp;an&nbsp;identifier&nbsp;that&nbsp;includes&nbsp;a&nbsp;suffix&nbsp;that&nbsp;distinguishes&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4393028">//&nbsp;from&nbsp;template&nbsp;names&nbsp;mangled&nbsp;with&nbsp;different&nbsp;contexts.</span><br>
<span class="lineno">45</span><span class="keyword" id="4393084">func</span>&nbsp;<span class="op" id="4393089">(</span><span class="ident" id="4393090">c</span>&nbsp;<span class="ident" id="4393092"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4393099">)</span>&nbsp;<span class="ident" id="4393101">mangle</span><span class="op" id="4393107">(</span><span class="ident" id="4393108">templateName</span>&nbsp;<span class="builtintype" id="4393121">string</span><span class="op" id="4393127">)</span>&nbsp;<span class="builtintype" id="4393129">string</span>&nbsp;<span class="op" id="4393136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4393139">//&nbsp;The&nbsp;mangled&nbsp;name&nbsp;for&nbsp;the&nbsp;default&nbsp;context&nbsp;is&nbsp;the&nbsp;input&nbsp;templateName.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393211">if</span>&nbsp;<span class="ident" id="4393214"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393215">.</span><span class="ident" id="4393216">state</span>&nbsp;<span class="op" id="4393222">==</span>&nbsp;<span class="ident" id="4393225"><a href="/html/template/context.go.html#4394308">stateText</a></span>&nbsp;<span class="op" id="4393235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393239">return</span>&nbsp;<span class="ident" id="4393246"><a href="/html/template/context.go.html#4393108">templateName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393260">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393263">s</span>&nbsp;<span class="op" id="4393265">:=</span>&nbsp;<span class="ident" id="4393268"><a href="/html/template/context.go.html#4393108">templateName</a></span>&nbsp;<span class="op" id="4393281">+</span>&nbsp;<span class="string" id="4393283">&#34;$htmltemplate_&#34;</span>&nbsp;<span class="op" id="4393300">+</span>&nbsp;<span class="ident" id="4393302"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393303">.</span><span class="ident" id="4393304">state</span><span class="op" id="4393309">.</span><span class="ident" id="4393310">String</span><span class="op" id="4393316">(</span><span class="op" id="4393317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393320">if</span>&nbsp;<span class="ident" id="4393323"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393324">.</span><span class="ident" id="4393325">delim</span>&nbsp;<span class="op" id="4393331">!=</span>&nbsp;<span class="num" id="4393334">0</span>&nbsp;<span class="op" id="4393336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393340"><a href="/html/template/context.go.html#4393263">s</a></span>&nbsp;<span class="op" id="4393342">+=</span>&nbsp;<span class="string" id="4393345">&#34;_&#34;</span>&nbsp;<span class="op" id="4393349">+</span>&nbsp;<span class="ident" id="4393351"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393352">.</span><span class="ident" id="4393353">delim</span><span class="op" id="4393358">.</span><span class="ident" id="4393359">String</span><span class="op" id="4393365">(</span><span class="op" id="4393366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393372">if</span>&nbsp;<span class="ident" id="4393375"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393376">.</span><span class="ident" id="4393377">urlPart</span>&nbsp;<span class="op" id="4393385">!=</span>&nbsp;<span class="num" id="4393388">0</span>&nbsp;<span class="op" id="4393390">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393394"><a href="/html/template/context.go.html#4393263">s</a></span>&nbsp;<span class="op" id="4393396">+=</span>&nbsp;<span class="string" id="4393399">&#34;_&#34;</span>&nbsp;<span class="op" id="4393403">+</span>&nbsp;<span class="ident" id="4393405"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393406">.</span><span class="ident" id="4393407">urlPart</span><span class="op" id="4393414">.</span><span class="ident" id="4393415">String</span><span class="op" id="4393421">(</span><span class="op" id="4393422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393428">if</span>&nbsp;<span class="ident" id="4393431"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393432">.</span><span class="ident" id="4393433">jsCtx</span>&nbsp;<span class="op" id="4393439">!=</span>&nbsp;<span class="num" id="4393442">0</span>&nbsp;<span class="op" id="4393444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393448"><a href="/html/template/context.go.html#4393263">s</a></span>&nbsp;<span class="op" id="4393450">+=</span>&nbsp;<span class="string" id="4393453">&#34;_&#34;</span>&nbsp;<span class="op" id="4393457">+</span>&nbsp;<span class="ident" id="4393459"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393460">.</span><span class="ident" id="4393461">jsCtx</span><span class="op" id="4393466">.</span><span class="ident" id="4393467">String</span><span class="op" id="4393473">(</span><span class="op" id="4393474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393477">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393480">if</span>&nbsp;<span class="ident" id="4393483"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393484">.</span><span class="ident" id="4393485">attr</span>&nbsp;<span class="op" id="4393490">!=</span>&nbsp;<span class="num" id="4393493">0</span>&nbsp;<span class="op" id="4393495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393499"><a href="/html/template/context.go.html#4393263">s</a></span>&nbsp;<span class="op" id="4393501">+=</span>&nbsp;<span class="string" id="4393504">&#34;_&#34;</span>&nbsp;<span class="op" id="4393508">+</span>&nbsp;<span class="ident" id="4393510"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393511">.</span><span class="ident" id="4393512">attr</span><span class="op" id="4393516">.</span><span class="ident" id="4393517">String</span><span class="op" id="4393523">(</span><span class="op" id="4393524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393530">if</span>&nbsp;<span class="ident" id="4393533"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393534">.</span><span class="ident" id="4393535">element</span>&nbsp;<span class="op" id="4393543">!=</span>&nbsp;<span class="num" id="4393546">0</span>&nbsp;<span class="op" id="4393548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4393552"><a href="/html/template/context.go.html#4393263">s</a></span>&nbsp;<span class="op" id="4393554">+=</span>&nbsp;<span class="string" id="4393557">&#34;_&#34;</span>&nbsp;<span class="op" id="4393561">+</span>&nbsp;<span class="ident" id="4393563"><a href="/html/template/context.go.html#4393090">c</a></span><span class="op" id="4393564">.</span><span class="ident" id="4393565">element</span><span class="op" id="4393572">.</span><span class="ident" id="4393573">String</span><span class="op" id="4393579">(</span><span class="op" id="4393580">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4393583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4393586">return</span>&nbsp;<span class="ident" id="4393593"><a href="/html/template/context.go.html#4393263">s</a></span><br>
<span class="lineno"></span><span class="op" id="4393595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4393598">//&nbsp;state&nbsp;describes&nbsp;a&nbsp;high-level&nbsp;HTML&nbsp;parser&nbsp;state.</span><br>
<span class="lineno">70</span><span class="comment" id="4393649">//</span><br>
<span class="lineno"></span><span class="comment" id="4393652">//&nbsp;It&nbsp;bounds&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;element&nbsp;stack,&nbsp;and&nbsp;by&nbsp;extension&nbsp;the&nbsp;HTML&nbsp;insertion</span><br>
<span class="lineno"></span><span class="comment" id="4393731">//&nbsp;mode,&nbsp;but&nbsp;also&nbsp;contains&nbsp;state&nbsp;that&nbsp;does&nbsp;not&nbsp;correspond&nbsp;to&nbsp;anything&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4393808">//&nbsp;HTML5&nbsp;parsing&nbsp;algorithm&nbsp;because&nbsp;a&nbsp;single&nbsp;token&nbsp;production&nbsp;in&nbsp;the&nbsp;HTML</span><br>
<span class="lineno"></span><span class="comment" id="4393881">//&nbsp;grammar&nbsp;may&nbsp;contain&nbsp;embedded&nbsp;actions&nbsp;in&nbsp;a&nbsp;template.&nbsp;For&nbsp;instance,&nbsp;the&nbsp;quoted</span><br>
<span class="lineno">75</span><span class="comment" id="4393961">//&nbsp;HTML&nbsp;attribute&nbsp;produced&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4393991">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;title=&#34;Hello&nbsp;{{.World}}&#34;&gt;</span><br>
<span class="lineno"></span><span class="comment" id="4394029">//&nbsp;is&nbsp;a&nbsp;single&nbsp;token&nbsp;in&nbsp;HTML&#39;s&nbsp;grammar&nbsp;but&nbsp;in&nbsp;a&nbsp;template&nbsp;spans&nbsp;several&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="4394107">type</span>&nbsp;<span class="ident" id="4394112">state</span>&nbsp;<span class="builtintype" id="4394118">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="4394125">const</span>&nbsp;<span class="op" id="4394131">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394134">//&nbsp;stateText&nbsp;is&nbsp;parsed&nbsp;character&nbsp;data.&nbsp;An&nbsp;HTML&nbsp;parser&nbsp;is&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394195">//&nbsp;this&nbsp;state&nbsp;when&nbsp;its&nbsp;parse&nbsp;position&nbsp;is&nbsp;outside&nbsp;an&nbsp;HTML&nbsp;tag,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394258">//&nbsp;directive,&nbsp;comment,&nbsp;and&nbsp;special&nbsp;element&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394308">stateText</span>&nbsp;<span class="ident" id="4394318"><a href="/html/template/context.go.html#4394112">state</a></span>&nbsp;<span class="op" id="4394324">=</span>&nbsp;<span class="ident" id="4394326">iota</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394332">//&nbsp;stateTag&nbsp;occurs&nbsp;before&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;or&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394398">stateTag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394408">//&nbsp;stateAttrName&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394459">//&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;^name^&nbsp;=&nbsp;value`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394511">stateAttrName</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394526">//&nbsp;stateAfterName&nbsp;occurs&nbsp;after&nbsp;an&nbsp;attr&nbsp;name&nbsp;has&nbsp;ended&nbsp;but&nbsp;before&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394596">//&nbsp;equals&nbsp;sign.&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;name^&nbsp;^=&nbsp;value`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394661">stateAfterName</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394677">//&nbsp;stateBeforeValue&nbsp;occurs&nbsp;after&nbsp;the&nbsp;equals&nbsp;sign&nbsp;but&nbsp;before&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394749">//&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;name&nbsp;=^&nbsp;^value`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394801">stateBeforeValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394819">//&nbsp;stateHTMLCmt&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;&lt;!--&nbsp;HTML&nbsp;comment&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394876">stateHTMLCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394890">//&nbsp;stateRCDATA&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;RCDATA&nbsp;element&nbsp;(&lt;textarea&gt;&nbsp;or&nbsp;&lt;title&gt;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4394962">//&nbsp;as&nbsp;described&nbsp;at&nbsp;http://www.w3.org/TR/html5/syntax.html#elements-0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395032">stateRCDATA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395045">//&nbsp;stateAttr&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;whose&nbsp;content&nbsp;is&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395114">stateAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395125">//&nbsp;stateURL&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;whose&nbsp;content&nbsp;is&nbsp;a&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395194">stateURL</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395204">//&nbsp;stateJS&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;event&nbsp;handler&nbsp;or&nbsp;script&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395266">stateJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395275">//&nbsp;stateJSDqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;double&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395341">stateJSDqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395355">//&nbsp;stateJSSqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;single&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395421">stateJSSqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395435">//&nbsp;stateJSRegexp&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;regexp&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395496">stateJSRegexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395511">//&nbsp;stateJSBlockCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;/*&nbsp;block&nbsp;comment&nbsp;*/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395579">stateJSBlockCmt</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395596">//&nbsp;stateJSLineCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;//&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395659">stateJSLineCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395675">//&nbsp;stateCSS&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;&lt;style&gt;&nbsp;element&nbsp;or&nbsp;style&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395740">stateCSS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395750">//&nbsp;stateCSSDqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;double&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395810">stateCSSDqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395825">//&nbsp;stateCSSSqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;single&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395885">stateCSSSqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395900">//&nbsp;stateCSSDqURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;double&nbsp;quoted&nbsp;url(&#34;...&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395964">stateCSSDqURL</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4395979">//&nbsp;stateCSSSqURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;single&nbsp;quoted&nbsp;url(&#39;...&#39;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396043">stateCSSSqURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4396058">//&nbsp;stateCSSURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;unquoted&nbsp;url(...).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396113">stateCSSURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4396126">//&nbsp;stateCSSBlockCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;/*&nbsp;block&nbsp;comment&nbsp;*/.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396188">stateCSSBlockCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4396206">//&nbsp;stateCSSLineCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;//&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396263">stateCSSLineCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4396280">//&nbsp;stateError&nbsp;is&nbsp;an&nbsp;infectious&nbsp;error&nbsp;state&nbsp;outside&nbsp;any&nbsp;valid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4396342">//&nbsp;HTML/CSS/JS&nbsp;construct.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396369">stateError</span><br>
<span class="lineno"></span><span class="op" id="4396380">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4396383">var</span>&nbsp;<span class="ident" id="4396387">stateNames</span>&nbsp;<span class="op" id="4396398">=</span>&nbsp;<span class="op" id="4396400">[</span><span class="op" id="4396401">...</span><span class="op" id="4396404">]</span><span class="builtintype" id="4396405">string</span><span class="op" id="4396411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396414"><a href="/html/template/context.go.html#4394308">stateText</a></span><span class="op" id="4396423">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396432">&#34;stateText&#34;</span><span class="op" id="4396443">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396446"><a href="/html/template/context.go.html#4394398">stateTag</a></span><span class="op" id="4396454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396464">&#34;stateTag&#34;</span><span class="op" id="4396474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396477"><a href="/html/template/context.go.html#4394511">stateAttrName</a></span><span class="op" id="4396490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396495">&#34;stateAttrName&#34;</span><span class="op" id="4396510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396513"><a href="/html/template/context.go.html#4394661">stateAfterName</a></span><span class="op" id="4396527">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4396531">&#34;stateAfterName&#34;</span><span class="op" id="4396547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396550"><a href="/html/template/context.go.html#4394801">stateBeforeValue</a></span><span class="op" id="4396566">:</span>&nbsp;<span class="string" id="4396568">&#34;stateBeforeValue&#34;</span><span class="op" id="4396586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396589"><a href="/html/template/context.go.html#4394876">stateHTMLCmt</a></span><span class="op" id="4396601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396607">&#34;stateHTMLCmt&#34;</span><span class="op" id="4396621">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396624"><a href="/html/template/context.go.html#4395032">stateRCDATA</a></span><span class="op" id="4396635">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396642">&#34;stateRCDATA&#34;</span><span class="op" id="4396655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396658"><a href="/html/template/context.go.html#4395114">stateAttr</a></span><span class="op" id="4396667">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396676">&#34;stateAttr&#34;</span><span class="op" id="4396687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396690"><a href="/html/template/context.go.html#4395194">stateURL</a></span><span class="op" id="4396698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396708">&#34;stateURL&#34;</span><span class="op" id="4396718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396721"><a href="/html/template/context.go.html#4395266">stateJS</a></span><span class="op" id="4396728">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396739">&#34;stateJS&#34;</span><span class="op" id="4396748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396751"><a href="/html/template/context.go.html#4395341">stateJSDqStr</a></span><span class="op" id="4396763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396769">&#34;stateJSDqStr&#34;</span><span class="op" id="4396783">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396786"><a href="/html/template/context.go.html#4395421">stateJSSqStr</a></span><span class="op" id="4396798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396804">&#34;stateJSSqStr&#34;</span><span class="op" id="4396818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396821"><a href="/html/template/context.go.html#4395496">stateJSRegexp</a></span><span class="op" id="4396834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396839">&#34;stateJSRegexp&#34;</span><span class="op" id="4396854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396857"><a href="/html/template/context.go.html#4395579">stateJSBlockCmt</a></span><span class="op" id="4396872">:</span>&nbsp;&nbsp;<span class="string" id="4396875">&#34;stateJSBlockCmt&#34;</span><span class="op" id="4396892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396895"><a href="/html/template/context.go.html#4395659">stateJSLineCmt</a></span><span class="op" id="4396909">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4396913">&#34;stateJSLineCmt&#34;</span><span class="op" id="4396929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396932"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><span class="op" id="4396940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396950">&#34;stateCSS&#34;</span><span class="op" id="4396960">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396963"><a href="/html/template/context.go.html#4395810">stateCSSDqStr</a></span><span class="op" id="4396976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4396981">&#34;stateCSSDqStr&#34;</span><span class="op" id="4396996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396999"><a href="/html/template/context.go.html#4395885">stateCSSSqStr</a></span><span class="op" id="4397012">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4397017">&#34;stateCSSSqStr&#34;</span><span class="op" id="4397032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397035"><a href="/html/template/context.go.html#4395964">stateCSSDqURL</a></span><span class="op" id="4397048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4397053">&#34;stateCSSDqURL&#34;</span><span class="op" id="4397068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397071"><a href="/html/template/context.go.html#4396043">stateCSSSqURL</a></span><span class="op" id="4397084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4397089">&#34;stateCSSSqURL&#34;</span><span class="op" id="4397104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397107"><a href="/html/template/context.go.html#4396113">stateCSSURL</a></span><span class="op" id="4397118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4397125">&#34;stateCSSURL&#34;</span><span class="op" id="4397138">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397141"><a href="/html/template/context.go.html#4396188">stateCSSBlockCmt</a></span><span class="op" id="4397157">:</span>&nbsp;<span class="string" id="4397159">&#34;stateCSSBlockCmt&#34;</span><span class="op" id="4397177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397180"><a href="/html/template/context.go.html#4396263">stateCSSLineCmt</a></span><span class="op" id="4397195">:</span>&nbsp;&nbsp;<span class="string" id="4397198">&#34;stateCSSLineCmt&#34;</span><span class="op" id="4397215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397218"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4397228">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4397236">&#34;stateError&#34;</span><span class="op" id="4397248">,</span><br>
<span class="lineno"></span><span class="op" id="4397250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="4397253">func</span>&nbsp;<span class="op" id="4397258">(</span><span class="ident" id="4397259">s</span>&nbsp;<span class="ident" id="4397261"><a href="/html/template/context.go.html#4394112">state</a></span><span class="op" id="4397266">)</span>&nbsp;<span class="ident" id="4397268">String</span><span class="op" id="4397274">(</span><span class="op" id="4397275">)</span>&nbsp;<span class="builtintype" id="4397277">string</span>&nbsp;<span class="op" id="4397284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397287">if</span>&nbsp;<span class="builtintype" id="4397290">int</span><span class="op" id="4397293">(</span><span class="ident" id="4397294"><a href="/html/template/context.go.html#4397259">s</a></span><span class="op" id="4397295">)</span>&nbsp;<span class="op" id="4397297">&lt;</span>&nbsp;<span class="builtinfunc" id="4397299">len</span><span class="op" id="4397302">(</span><span class="ident" id="4397303"><a href="/html/template/context.go.html#4396387">stateNames</a></span><span class="op" id="4397313">)</span>&nbsp;<span class="op" id="4397315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397319">return</span>&nbsp;<span class="ident" id="4397326"><a href="/html/template/context.go.html#4396387">stateNames</a></span><span class="op" id="4397336">[</span><span class="ident" id="4397337"><a href="/html/template/context.go.html#4397259">s</a></span><span class="op" id="4397338">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397344">return</span>&nbsp;<span class="ident" id="4397351"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4397354">.</span><span class="ident" id="4397355">Sprintf</span><span class="op" id="4397362">(</span><span class="string" id="4397363">&#34;illegal&nbsp;state&nbsp;%d&#34;</span><span class="op" id="4397381">,</span>&nbsp;<span class="builtintype" id="4397383">int</span><span class="op" id="4397386">(</span><span class="ident" id="4397387"><a href="/html/template/context.go.html#4397259">s</a></span><span class="op" id="4397388">)</span><span class="op" id="4397389">)</span><br>
<span class="lineno">170</span><span class="op" id="4397391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397394">//&nbsp;isComment&nbsp;is&nbsp;true&nbsp;for&nbsp;any&nbsp;state&nbsp;that&nbsp;contains&nbsp;content&nbsp;meant&nbsp;for&nbsp;template</span><br>
<span class="lineno"></span><span class="comment" id="4397470">//&nbsp;authors&nbsp;&amp;&nbsp;maintainers,&nbsp;not&nbsp;for&nbsp;end-users&nbsp;or&nbsp;machines.</span><br>
<span class="lineno"></span><span class="keyword" id="4397527">func</span>&nbsp;<span class="ident" id="4397532">isComment</span><span class="op" id="4397541">(</span><span class="ident" id="4397542">s</span>&nbsp;<span class="ident" id="4397544"><a href="/html/template/context.go.html#4394112">state</a></span><span class="op" id="4397549">)</span>&nbsp;<span class="builtintype" id="4397551">bool</span>&nbsp;<span class="op" id="4397556">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397559">switch</span>&nbsp;<span class="ident" id="4397566"><a href="/html/template/context.go.html#4397542">s</a></span>&nbsp;<span class="op" id="4397568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397571">case</span>&nbsp;<span class="ident" id="4397576"><a href="/html/template/context.go.html#4394876">stateHTMLCmt</a></span><span class="op" id="4397588">,</span>&nbsp;<span class="ident" id="4397590"><a href="/html/template/context.go.html#4395579">stateJSBlockCmt</a></span><span class="op" id="4397605">,</span>&nbsp;<span class="ident" id="4397607"><a href="/html/template/context.go.html#4395659">stateJSLineCmt</a></span><span class="op" id="4397621">,</span>&nbsp;<span class="ident" id="4397623"><a href="/html/template/context.go.html#4396188">stateCSSBlockCmt</a></span><span class="op" id="4397639">,</span>&nbsp;<span class="ident" id="4397641"><a href="/html/template/context.go.html#4396263">stateCSSLineCmt</a></span><span class="op" id="4397656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397660">return</span>&nbsp;<span class="builtintype" id="4397667">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397676">return</span>&nbsp;<span class="builtintype" id="4397683">false</span><br>
<span class="lineno">180</span><span class="op" id="4397689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397692">//&nbsp;isInTag&nbsp;return&nbsp;whether&nbsp;s&nbsp;occurs&nbsp;solely&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="4397754">func</span>&nbsp;<span class="ident" id="4397759">isInTag</span><span class="op" id="4397766">(</span><span class="ident" id="4397767">s</span>&nbsp;<span class="ident" id="4397769"><a href="/html/template/context.go.html#4394112">state</a></span><span class="op" id="4397774">)</span>&nbsp;<span class="builtintype" id="4397776">bool</span>&nbsp;<span class="op" id="4397781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397784">switch</span>&nbsp;<span class="ident" id="4397791"><a href="/html/template/context.go.html#4397767">s</a></span>&nbsp;<span class="op" id="4397793">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397796">case</span>&nbsp;<span class="ident" id="4397801"><a href="/html/template/context.go.html#4394398">stateTag</a></span><span class="op" id="4397809">,</span>&nbsp;<span class="ident" id="4397811"><a href="/html/template/context.go.html#4394511">stateAttrName</a></span><span class="op" id="4397824">,</span>&nbsp;<span class="ident" id="4397826"><a href="/html/template/context.go.html#4394661">stateAfterName</a></span><span class="op" id="4397840">,</span>&nbsp;<span class="ident" id="4397842"><a href="/html/template/context.go.html#4394801">stateBeforeValue</a></span><span class="op" id="4397858">,</span>&nbsp;<span class="ident" id="4397860"><a href="/html/template/context.go.html#4395114">stateAttr</a></span><span class="op" id="4397869">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397873">return</span>&nbsp;<span class="builtintype" id="4397880">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397889">return</span>&nbsp;<span class="builtintype" id="4397896">false</span><br>
<span class="lineno"></span><span class="op" id="4397902">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4397905">//&nbsp;delim&nbsp;is&nbsp;the&nbsp;delimiter&nbsp;that&nbsp;will&nbsp;end&nbsp;the&nbsp;current&nbsp;HTML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="keyword" id="4397973">type</span>&nbsp;<span class="ident" id="4397978">delim</span>&nbsp;<span class="builtintype" id="4397984">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4397991">const</span>&nbsp;<span class="op" id="4397997">(</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398000">//&nbsp;delimNone&nbsp;occurs&nbsp;outside&nbsp;any&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398044">delimNone</span>&nbsp;<span class="ident" id="4398054"><a href="/html/template/context.go.html#4397978">delim</a></span>&nbsp;<span class="op" id="4398060">=</span>&nbsp;<span class="ident" id="4398062">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398068">//&nbsp;delimDoubleQuote&nbsp;occurs&nbsp;when&nbsp;a&nbsp;double&nbsp;quote&nbsp;(&#34;)&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398142">delimDoubleQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398160">//&nbsp;delimSingleQuote&nbsp;occurs&nbsp;when&nbsp;a&nbsp;single&nbsp;quote&nbsp;(&#39;)&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398234">delimSingleQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398252">//&nbsp;delimSpaceOrTagEnd&nbsp;occurs&nbsp;when&nbsp;a&nbsp;space&nbsp;or&nbsp;right&nbsp;angle&nbsp;bracket&nbsp;(&gt;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398322">//&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398348">delimSpaceOrTagEnd</span><br>
<span class="lineno"></span><span class="op" id="4398367">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="4398370">var</span>&nbsp;<span class="ident" id="4398374">delimNames</span>&nbsp;<span class="op" id="4398385">=</span>&nbsp;<span class="op" id="4398387">[</span><span class="op" id="4398388">...</span><span class="op" id="4398391">]</span><span class="builtintype" id="4398392">string</span><span class="op" id="4398398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398401"><a href="/html/template/context.go.html#4398044">delimNone</a></span><span class="op" id="4398410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4398421">&#34;delimNone&#34;</span><span class="op" id="4398432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398435"><a href="/html/template/context.go.html#4398142">delimDoubleQuote</a></span><span class="op" id="4398451">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4398455">&#34;delimDoubleQuote&#34;</span><span class="op" id="4398473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398476"><a href="/html/template/context.go.html#4398234">delimSingleQuote</a></span><span class="op" id="4398492">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4398496">&#34;delimSingleQuote&#34;</span><span class="op" id="4398514">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398517"><a href="/html/template/context.go.html#4398348">delimSpaceOrTagEnd</a></span><span class="op" id="4398535">:</span>&nbsp;<span class="string" id="4398537">&#34;delimSpaceOrTagEnd&#34;</span><span class="op" id="4398557">,</span><br>
<span class="lineno"></span><span class="op" id="4398559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4398562">func</span>&nbsp;<span class="op" id="4398567">(</span><span class="ident" id="4398568">d</span>&nbsp;<span class="ident" id="4398570"><a href="/html/template/context.go.html#4397978">delim</a></span><span class="op" id="4398575">)</span>&nbsp;<span class="ident" id="4398577">String</span><span class="op" id="4398583">(</span><span class="op" id="4398584">)</span>&nbsp;<span class="builtintype" id="4398586">string</span>&nbsp;<span class="op" id="4398593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4398596">if</span>&nbsp;<span class="builtintype" id="4398599">int</span><span class="op" id="4398602">(</span><span class="ident" id="4398603"><a href="/html/template/context.go.html#4398568">d</a></span><span class="op" id="4398604">)</span>&nbsp;<span class="op" id="4398606">&lt;</span>&nbsp;<span class="builtinfunc" id="4398608">len</span><span class="op" id="4398611">(</span><span class="ident" id="4398612"><a href="/html/template/context.go.html#4398374">delimNames</a></span><span class="op" id="4398622">)</span>&nbsp;<span class="op" id="4398624">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4398628">return</span>&nbsp;<span class="ident" id="4398635"><a href="/html/template/context.go.html#4398374">delimNames</a></span><span class="op" id="4398645">[</span><span class="ident" id="4398646"><a href="/html/template/context.go.html#4398568">d</a></span><span class="op" id="4398647">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4398650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4398653">return</span>&nbsp;<span class="ident" id="4398660"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4398663">.</span><span class="ident" id="4398664">Sprintf</span><span class="op" id="4398671">(</span><span class="string" id="4398672">&#34;illegal&nbsp;delim&nbsp;%d&#34;</span><span class="op" id="4398690">,</span>&nbsp;<span class="builtintype" id="4398692">int</span><span class="op" id="4398695">(</span><span class="ident" id="4398696"><a href="/html/template/context.go.html#4398568">d</a></span><span class="op" id="4398697">)</span><span class="op" id="4398698">)</span><br>
<span class="lineno"></span><span class="op" id="4398700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="4398703">//&nbsp;urlPart&nbsp;identifies&nbsp;a&nbsp;part&nbsp;in&nbsp;an&nbsp;RFC&nbsp;3986&nbsp;hierarchical&nbsp;URL&nbsp;to&nbsp;allow&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="4398783">//&nbsp;encoding&nbsp;strategies.</span><br>
<span class="lineno"></span><span class="keyword" id="4398807">type</span>&nbsp;<span class="ident" id="4398812">urlPart</span>&nbsp;<span class="builtintype" id="4398820">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4398827">const</span>&nbsp;<span class="op" id="4398833">(</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398836">//&nbsp;urlPartNone&nbsp;occurs&nbsp;when&nbsp;not&nbsp;in&nbsp;a&nbsp;URL,&nbsp;or&nbsp;possibly&nbsp;at&nbsp;the&nbsp;start:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398904">//&nbsp;^&nbsp;in&nbsp;&#34;^http://auth/path?k=v#frag&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398943">urlPartNone</span>&nbsp;<span class="ident" id="4398955"><a href="/html/template/context.go.html#4398812">urlPart</a></span>&nbsp;<span class="op" id="4398963">=</span>&nbsp;<span class="ident" id="4398965">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4398971">//&nbsp;urlPartPreQuery&nbsp;occurs&nbsp;in&nbsp;the&nbsp;scheme,&nbsp;authority,&nbsp;or&nbsp;path;&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399045">//&nbsp;^s&nbsp;in&nbsp;&#34;h^ttp://auth/path^?k=v#frag&#34;.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399086">urlPartPreQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399103">//&nbsp;urlPartQueryOrFrag&nbsp;occurs&nbsp;in&nbsp;the&nbsp;query&nbsp;portion&nbsp;between&nbsp;the&nbsp;^s&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399172">//&nbsp;&#34;http://auth/path?^k=v#frag^&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399207">urlPartQueryOrFrag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399227">//&nbsp;urlPartUnknown&nbsp;occurs&nbsp;due&nbsp;to&nbsp;joining&nbsp;of&nbsp;contexts&nbsp;both&nbsp;before&nbsp;and</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399296">//&nbsp;after&nbsp;the&nbsp;query&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399327">urlPartUnknown</span><br>
<span class="lineno"></span><span class="op" id="4399342">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4399345">var</span>&nbsp;<span class="ident" id="4399349">urlPartNames</span>&nbsp;<span class="op" id="4399362">=</span>&nbsp;<span class="op" id="4399364">[</span><span class="op" id="4399365">...</span><span class="op" id="4399368">]</span><span class="builtintype" id="4399369">string</span><span class="op" id="4399375">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399378"><a href="/html/template/context.go.html#4398943">urlPartNone</a></span><span class="op" id="4399389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4399398">&#34;urlPartNone&#34;</span><span class="op" id="4399411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399414"><a href="/html/template/context.go.html#4399086">urlPartPreQuery</a></span><span class="op" id="4399429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4399434">&#34;urlPartPreQuery&#34;</span><span class="op" id="4399451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399454"><a href="/html/template/context.go.html#4399207">urlPartQueryOrFrag</a></span><span class="op" id="4399472">:</span>&nbsp;<span class="string" id="4399474">&#34;urlPartQueryOrFrag&#34;</span><span class="op" id="4399494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399497"><a href="/html/template/context.go.html#4399327">urlPartUnknown</a></span><span class="op" id="4399511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4399517">&#34;urlPartUnknown&#34;</span><span class="op" id="4399533">,</span><br>
<span class="lineno"></span><span class="op" id="4399535">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="4399538">func</span>&nbsp;<span class="op" id="4399543">(</span><span class="ident" id="4399544">u</span>&nbsp;<span class="ident" id="4399546"><a href="/html/template/context.go.html#4398812">urlPart</a></span><span class="op" id="4399553">)</span>&nbsp;<span class="ident" id="4399555">String</span><span class="op" id="4399561">(</span><span class="op" id="4399562">)</span>&nbsp;<span class="builtintype" id="4399564">string</span>&nbsp;<span class="op" id="4399571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4399574">if</span>&nbsp;<span class="builtintype" id="4399577">int</span><span class="op" id="4399580">(</span><span class="ident" id="4399581"><a href="/html/template/context.go.html#4399544">u</a></span><span class="op" id="4399582">)</span>&nbsp;<span class="op" id="4399584">&lt;</span>&nbsp;<span class="builtinfunc" id="4399586">len</span><span class="op" id="4399589">(</span><span class="ident" id="4399590"><a href="/html/template/context.go.html#4399349">urlPartNames</a></span><span class="op" id="4399602">)</span>&nbsp;<span class="op" id="4399604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4399608">return</span>&nbsp;<span class="ident" id="4399615"><a href="/html/template/context.go.html#4399349">urlPartNames</a></span><span class="op" id="4399627">[</span><span class="ident" id="4399628"><a href="/html/template/context.go.html#4399544">u</a></span><span class="op" id="4399629">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4399632">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4399635">return</span>&nbsp;<span class="ident" id="4399642"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4399645">.</span><span class="ident" id="4399646">Sprintf</span><span class="op" id="4399653">(</span><span class="string" id="4399654">&#34;illegal&nbsp;urlPart&nbsp;%d&#34;</span><span class="op" id="4399674">,</span>&nbsp;<span class="builtintype" id="4399676">int</span><span class="op" id="4399679">(</span><span class="ident" id="4399680"><a href="/html/template/context.go.html#4399544">u</a></span><span class="op" id="4399681">)</span><span class="op" id="4399682">)</span><br>
<span class="lineno"></span><span class="op" id="4399684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4399687">//&nbsp;jsCtx&nbsp;determines&nbsp;whether&nbsp;a&nbsp;&#39;/&#39;&nbsp;starts&nbsp;a&nbsp;regular&nbsp;expression&nbsp;literal&nbsp;or&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4399762">//&nbsp;division&nbsp;operator.</span><br>
<span class="lineno">255</span><span class="keyword" id="4399784">type</span>&nbsp;<span class="ident" id="4399789">jsCtx</span>&nbsp;<span class="builtintype" id="4399795">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4399802">const</span>&nbsp;<span class="op" id="4399808">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399811">//&nbsp;jsCtxRegexp&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;would&nbsp;start&nbsp;a&nbsp;regexp&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399876">jsCtxRegexp</span>&nbsp;<span class="ident" id="4399888"><a href="/html/template/context.go.html#4399789">jsCtx</a></span>&nbsp;<span class="op" id="4399894">=</span>&nbsp;<span class="ident" id="4399896">iota</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399902">//&nbsp;jsCtxDivOp&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;would&nbsp;start&nbsp;a&nbsp;division&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4399969">jsCtxDivOp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4399981">//&nbsp;jsCtxUnknown&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;is&nbsp;ambiguous&nbsp;due&nbsp;to&nbsp;context&nbsp;joining.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4400054">jsCtxUnknown</span><br>
<span class="lineno"></span><span class="op" id="4400067">)</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="4400070">func</span>&nbsp;<span class="op" id="4400075">(</span><span class="ident" id="4400076">c</span>&nbsp;<span class="ident" id="4400078"><a href="/html/template/context.go.html#4399789">jsCtx</a></span><span class="op" id="4400083">)</span>&nbsp;<span class="ident" id="4400085">String</span><span class="op" id="4400091">(</span><span class="op" id="4400092">)</span>&nbsp;<span class="builtintype" id="4400094">string</span>&nbsp;<span class="op" id="4400101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400104">switch</span>&nbsp;<span class="ident" id="4400111"><a href="/html/template/context.go.html#4400076">c</a></span>&nbsp;<span class="op" id="4400113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400116">case</span>&nbsp;<span class="ident" id="4400121"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="4400132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400136">return</span>&nbsp;<span class="string" id="4400143">&#34;jsCtxRegexp&#34;</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400158">case</span>&nbsp;<span class="ident" id="4400163"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="4400173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400177">return</span>&nbsp;<span class="string" id="4400184">&#34;jsCtxDivOp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400198">case</span>&nbsp;<span class="ident" id="4400203"><a href="/html/template/context.go.html#4400054">jsCtxUnknown</a></span><span class="op" id="4400215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400219">return</span>&nbsp;<span class="string" id="4400226">&#34;jsCtxUnknown&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4400242">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4400245">return</span>&nbsp;<span class="ident" id="4400252"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4400255">.</span><span class="ident" id="4400256">Sprintf</span><span class="op" id="4400263">(</span><span class="string" id="4400264">&#34;illegal&nbsp;jsCtx&nbsp;%d&#34;</span><span class="op" id="4400282">,</span>&nbsp;<span class="builtintype" id="4400284">int</span><span class="op" id="4400287">(</span><span class="ident" id="4400288"><a href="/html/template/context.go.html#4400076">c</a></span><span class="op" id="4400289">)</span><span class="op" id="4400290">)</span><br>
<span class="lineno"></span><span class="op" id="4400292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4400295">//&nbsp;element&nbsp;identifies&nbsp;the&nbsp;HTML&nbsp;element&nbsp;when&nbsp;inside&nbsp;a&nbsp;start&nbsp;tag&nbsp;or&nbsp;special&nbsp;body.</span><br>
<span class="lineno"></span><span class="comment" id="4400375">//&nbsp;Certain&nbsp;HTML&nbsp;element&nbsp;(for&nbsp;example&nbsp;&lt;script&gt;&nbsp;and&nbsp;&lt;style&gt;)&nbsp;have&nbsp;bodies&nbsp;that&nbsp;are</span><br>
<span class="lineno">280</span><span class="comment" id="4400455">//&nbsp;treated&nbsp;differently&nbsp;from&nbsp;stateText&nbsp;so&nbsp;the&nbsp;element&nbsp;type&nbsp;is&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4400529">//&nbsp;transition&nbsp;into&nbsp;the&nbsp;correct&nbsp;context&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;tag&nbsp;and&nbsp;to&nbsp;identify&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4400608">//&nbsp;end&nbsp;delimiter&nbsp;for&nbsp;the&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="4400639">type</span>&nbsp;<span class="ident" id="4400644">element</span>&nbsp;<span class="builtintype" id="4400652">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4400659">const</span>&nbsp;<span class="op" id="4400665">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4400668">//&nbsp;elementNone&nbsp;occurs&nbsp;outside&nbsp;a&nbsp;special&nbsp;tag&nbsp;or&nbsp;special&nbsp;element&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4400738">elementNone</span>&nbsp;<span class="ident" id="4400750"><a href="/html/template/context.go.html#4400644">element</a></span>&nbsp;<span class="op" id="4400758">=</span>&nbsp;<span class="ident" id="4400760">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4400766">//&nbsp;elementScript&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;raw&nbsp;text&nbsp;&lt;script&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4400830">elementScript</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4400845">//&nbsp;elementStyle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;raw&nbsp;text&nbsp;&lt;style&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4400907">elementStyle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4400921">//&nbsp;elementTextarea&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;RCDATA&nbsp;&lt;textarea&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4400987">elementTextarea</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4401004">//&nbsp;elementTitle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;RCDATA&nbsp;&lt;title&gt;&nbsp;element.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401064">elementTitle</span><br>
<span class="lineno"></span><span class="op" id="4401077">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4401080">var</span>&nbsp;<span class="ident" id="4401084">elementNames</span>&nbsp;<span class="op" id="4401097">=</span>&nbsp;<span class="op" id="4401099">[</span><span class="op" id="4401100">...</span><span class="op" id="4401103">]</span><span class="builtintype" id="4401104">string</span><span class="op" id="4401110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401113"><a href="/html/template/context.go.html#4400738">elementNone</a></span><span class="op" id="4401124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401130">&#34;elementNone&#34;</span><span class="op" id="4401143">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401146"><a href="/html/template/context.go.html#4400830">elementScript</a></span><span class="op" id="4401159">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4401163">&#34;elementScript&#34;</span><span class="op" id="4401178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401181"><a href="/html/template/context.go.html#4400907">elementStyle</a></span><span class="op" id="4401193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401198">&#34;elementStyle&#34;</span><span class="op" id="4401212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401215"><a href="/html/template/context.go.html#4400987">elementTextarea</a></span><span class="op" id="4401230">:</span>&nbsp;<span class="string" id="4401232">&#34;elementTextarea&#34;</span><span class="op" id="4401249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401252"><a href="/html/template/context.go.html#4401064">elementTitle</a></span><span class="op" id="4401264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401269">&#34;elementTitle&#34;</span><span class="op" id="4401283">,</span><br>
<span class="lineno"></span><span class="op" id="4401285">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="4401288">func</span>&nbsp;<span class="op" id="4401293">(</span><span class="ident" id="4401294">e</span>&nbsp;<span class="ident" id="4401296"><a href="/html/template/context.go.html#4400644">element</a></span><span class="op" id="4401303">)</span>&nbsp;<span class="ident" id="4401305">String</span><span class="op" id="4401311">(</span><span class="op" id="4401312">)</span>&nbsp;<span class="builtintype" id="4401314">string</span>&nbsp;<span class="op" id="4401321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4401324">if</span>&nbsp;<span class="builtintype" id="4401327">int</span><span class="op" id="4401330">(</span><span class="ident" id="4401331"><a href="/html/template/context.go.html#4401294">e</a></span><span class="op" id="4401332">)</span>&nbsp;<span class="op" id="4401334">&lt;</span>&nbsp;<span class="builtinfunc" id="4401336">len</span><span class="op" id="4401339">(</span><span class="ident" id="4401340"><a href="/html/template/context.go.html#4401084">elementNames</a></span><span class="op" id="4401352">)</span>&nbsp;<span class="op" id="4401354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4401358">return</span>&nbsp;<span class="ident" id="4401365"><a href="/html/template/context.go.html#4401084">elementNames</a></span><span class="op" id="4401377">[</span><span class="ident" id="4401378"><a href="/html/template/context.go.html#4401294">e</a></span><span class="op" id="4401379">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4401382">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4401385">return</span>&nbsp;<span class="ident" id="4401392"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4401395">.</span><span class="ident" id="4401396">Sprintf</span><span class="op" id="4401403">(</span><span class="string" id="4401404">&#34;illegal&nbsp;element&nbsp;%d&#34;</span><span class="op" id="4401424">,</span>&nbsp;<span class="builtintype" id="4401426">int</span><span class="op" id="4401429">(</span><span class="ident" id="4401430"><a href="/html/template/context.go.html#4401294">e</a></span><span class="op" id="4401431">)</span><span class="op" id="4401432">)</span><br>
<span class="lineno"></span><span class="op" id="4401434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4401437">//&nbsp;attr&nbsp;identifies&nbsp;the&nbsp;most&nbsp;recent&nbsp;HTML&nbsp;attribute&nbsp;when&nbsp;inside&nbsp;a&nbsp;start&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="4401512">type</span>&nbsp;<span class="ident" id="4401517">attr</span>&nbsp;<span class="builtintype" id="4401522">uint8</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="4401529">const</span>&nbsp;<span class="op" id="4401535">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4401538">//&nbsp;attrNone&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;normal&nbsp;attribute&nbsp;or&nbsp;no&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401602">attrNone</span>&nbsp;<span class="ident" id="4401611"><a href="/html/template/context.go.html#4401517">attr</a></span>&nbsp;<span class="op" id="4401616">=</span>&nbsp;<span class="ident" id="4401618">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4401624">//&nbsp;attrScript&nbsp;corresponds&nbsp;to&nbsp;an&nbsp;event&nbsp;handler&nbsp;attribute.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401682">attrScript</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4401694">//&nbsp;attrStyle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;style&nbsp;attribute&nbsp;whose&nbsp;value&nbsp;is&nbsp;CSS.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401763">attrStyle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4401774">//&nbsp;attrURL&nbsp;corresponds&nbsp;to&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;value&nbsp;is&nbsp;a&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401836">attrURL</span><br>
<span class="lineno">325</span><span class="op" id="4401844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4401847">var</span>&nbsp;<span class="ident" id="4401851">attrNames</span>&nbsp;<span class="op" id="4401861">=</span>&nbsp;<span class="op" id="4401863">[</span><span class="op" id="4401864">...</span><span class="op" id="4401867">]</span><span class="builtintype" id="4401868">string</span><span class="op" id="4401874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401877"><a href="/html/template/context.go.html#4401602">attrNone</a></span><span class="op" id="4401885">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4401889">&#34;attrNone&#34;</span><span class="op" id="4401899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401902"><a href="/html/template/context.go.html#4401682">attrScript</a></span><span class="op" id="4401912">:</span>&nbsp;<span class="string" id="4401914">&#34;attrScript&#34;</span><span class="op" id="4401926">,</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401929"><a href="/html/template/context.go.html#4401763">attrStyle</a></span><span class="op" id="4401938">:</span>&nbsp;&nbsp;<span class="string" id="4401941">&#34;attrStyle&#34;</span><span class="op" id="4401952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4401955"><a href="/html/template/context.go.html#4401836">attrURL</a></span><span class="op" id="4401962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401967">&#34;attrURL&#34;</span><span class="op" id="4401976">,</span><br>
<span class="lineno"></span><span class="op" id="4401978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4401981">func</span>&nbsp;<span class="op" id="4401986">(</span><span class="ident" id="4401987">a</span>&nbsp;<span class="ident" id="4401989"><a href="/html/template/context.go.html#4401517">attr</a></span><span class="op" id="4401993">)</span>&nbsp;<span class="ident" id="4401995">String</span><span class="op" id="4402001">(</span><span class="op" id="4402002">)</span>&nbsp;<span class="builtintype" id="4402004">string</span>&nbsp;<span class="op" id="4402011">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402014">if</span>&nbsp;<span class="builtintype" id="4402017">int</span><span class="op" id="4402020">(</span><span class="ident" id="4402021"><a href="/html/template/context.go.html#4401987">a</a></span><span class="op" id="4402022">)</span>&nbsp;<span class="op" id="4402024">&lt;</span>&nbsp;<span class="builtinfunc" id="4402026">len</span><span class="op" id="4402029">(</span><span class="ident" id="4402030"><a href="/html/template/context.go.html#4401851">attrNames</a></span><span class="op" id="4402039">)</span>&nbsp;<span class="op" id="4402041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402045">return</span>&nbsp;<span class="ident" id="4402052"><a href="/html/template/context.go.html#4401851">attrNames</a></span><span class="op" id="4402061">[</span><span class="ident" id="4402062"><a href="/html/template/context.go.html#4401987">a</a></span><span class="op" id="4402063">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4402066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402069">return</span>&nbsp;<span class="ident" id="4402076"><a href="/html/template/context.go.html#4392043">fmt</a></span><span class="op" id="4402079">.</span><span class="ident" id="4402080">Sprintf</span><span class="op" id="4402087">(</span><span class="string" id="4402088">&#34;illegal&nbsp;attr&nbsp;%d&#34;</span><span class="op" id="4402105">,</span>&nbsp;<span class="builtintype" id="4402107">int</span><span class="op" id="4402110">(</span><span class="ident" id="4402111"><a href="/html/template/context.go.html#4401987">a</a></span><span class="op" id="4402112">)</span><span class="op" id="4402113">)</span><br>
<span class="lineno"></span><span class="op" id="4402115">}</span>
</div>
</body>
</html>
