<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7158465">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7158520">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7158574">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7158625">package</span>&nbsp;<span class="ident" id="7158633">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7158643">import</span>&nbsp;<span class="op" id="7158650">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158653">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158662">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158670">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158681">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7158691">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7158694">func</span>&nbsp;<span class="ident" id="7158699">TestNextJsCtx</span><span class="op" id="7158712">(</span><span class="ident" id="7158713">t</span>&nbsp;<span class="op" id="7158715">*</span><span class="ident" id="7158716">testing</span><span class="op" id="7158723">.</span><span class="ident" id="7158724">T</span><span class="op" id="7158725">)</span>&nbsp;<span class="op" id="7158727">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158730">tests</span>&nbsp;<span class="op" id="7158736">:=</span>&nbsp;<span class="op" id="7158739">[</span><span class="op" id="7158740">]</span><span class="keyword" id="7158741">struct</span>&nbsp;<span class="op" id="7158748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158752">jsCtx</span>&nbsp;<span class="ident" id="7158758">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158766">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7158772">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7158780">}</span><span class="op" id="7158781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158785">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7158829">{</span><span class="ident" id="7158830">jsCtxRegexp</span><span class="op" id="7158841">,</span>&nbsp;<span class="string" id="7158843">&#34;;&#34;</span><span class="op" id="7158846">}</span><span class="op" id="7158847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158851">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158878">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158931">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158994">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159057">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159080">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159130">{</span><span class="ident" id="7159131">jsCtxRegexp</span><span class="op" id="7159142">,</span>&nbsp;<span class="string" id="7159144">&#34;}&#34;</span><span class="op" id="7159147">}</span><span class="op" id="7159148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159152">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159218">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159240">{</span><span class="ident" id="7159241">jsCtxDivOp</span><span class="op" id="7159251">,</span>&nbsp;<span class="string" id="7159253">&#34;)&#34;</span><span class="op" id="7159256">}</span><span class="op" id="7159257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159261">{</span><span class="ident" id="7159262">jsCtxDivOp</span><span class="op" id="7159272">,</span>&nbsp;<span class="string" id="7159274">&#34;]&#34;</span><span class="op" id="7159277">}</span><span class="op" id="7159278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159282">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159346">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159379">{</span><span class="ident" id="7159380">jsCtxRegexp</span><span class="op" id="7159391">,</span>&nbsp;<span class="string" id="7159393">&#34;(&#34;</span><span class="op" id="7159396">}</span><span class="op" id="7159397">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159401">{</span><span class="ident" id="7159402">jsCtxRegexp</span><span class="op" id="7159413">,</span>&nbsp;<span class="string" id="7159415">&#34;[&#34;</span><span class="op" id="7159418">}</span><span class="op" id="7159419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159423">{</span><span class="ident" id="7159424">jsCtxRegexp</span><span class="op" id="7159435">,</span>&nbsp;<span class="string" id="7159437">&#34;{&#34;</span><span class="op" id="7159440">}</span><span class="op" id="7159441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159445">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159509">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159543">{</span><span class="ident" id="7159544">jsCtxRegexp</span><span class="op" id="7159555">,</span>&nbsp;<span class="string" id="7159557">&#34;=&#34;</span><span class="op" id="7159560">}</span><span class="op" id="7159561">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159565">{</span><span class="ident" id="7159566">jsCtxRegexp</span><span class="op" id="7159577">,</span>&nbsp;<span class="string" id="7159579">&#34;+=&#34;</span><span class="op" id="7159583">}</span><span class="op" id="7159584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159588">{</span><span class="ident" id="7159589">jsCtxRegexp</span><span class="op" id="7159600">,</span>&nbsp;<span class="string" id="7159602">&#34;*=&#34;</span><span class="op" id="7159606">}</span><span class="op" id="7159607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159611">{</span><span class="ident" id="7159612">jsCtxRegexp</span><span class="op" id="7159623">,</span>&nbsp;<span class="string" id="7159625">&#34;*&#34;</span><span class="op" id="7159628">}</span><span class="op" id="7159629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159633">{</span><span class="ident" id="7159634">jsCtxRegexp</span><span class="op" id="7159645">,</span>&nbsp;<span class="string" id="7159647">&#34;!&#34;</span><span class="op" id="7159650">}</span><span class="op" id="7159651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159655">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159719">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159732">{</span><span class="ident" id="7159733">jsCtxRegexp</span><span class="op" id="7159744">,</span>&nbsp;<span class="string" id="7159746">&#34;+&#34;</span><span class="op" id="7159749">}</span><span class="op" id="7159750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159754">{</span><span class="ident" id="7159755">jsCtxRegexp</span><span class="op" id="7159766">,</span>&nbsp;<span class="string" id="7159768">&#34;-&#34;</span><span class="op" id="7159771">}</span><span class="op" id="7159772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159776">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159822">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159884">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159948">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159997">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160061">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160074">{</span><span class="ident" id="7160075">jsCtxDivOp</span><span class="op" id="7160085">,</span>&nbsp;<span class="string" id="7160087">&#34;--&#34;</span><span class="op" id="7160091">}</span><span class="op" id="7160092">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160096">{</span><span class="ident" id="7160097">jsCtxDivOp</span><span class="op" id="7160107">,</span>&nbsp;<span class="string" id="7160109">&#34;++&#34;</span><span class="op" id="7160113">}</span><span class="op" id="7160114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160118">{</span><span class="ident" id="7160119">jsCtxDivOp</span><span class="op" id="7160129">,</span>&nbsp;<span class="string" id="7160131">&#34;x--&#34;</span><span class="op" id="7160136">}</span><span class="op" id="7160137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160141">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160204">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160224">{</span><span class="ident" id="7160225">jsCtxRegexp</span><span class="op" id="7160236">,</span>&nbsp;<span class="string" id="7160238">&#34;x---&#34;</span><span class="op" id="7160244">}</span><span class="op" id="7160245">,</span>&nbsp;<span class="comment" id="7160247">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160275">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160341">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160408">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160427">{</span><span class="ident" id="7160428">jsCtxRegexp</span><span class="op" id="7160439">,</span>&nbsp;<span class="string" id="7160441">&#34;return&#34;</span><span class="op" id="7160449">}</span><span class="op" id="7160450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160454">{</span><span class="ident" id="7160455">jsCtxRegexp</span><span class="op" id="7160466">,</span>&nbsp;<span class="string" id="7160468">&#34;return&nbsp;&#34;</span><span class="op" id="7160477">}</span><span class="op" id="7160478">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160482">{</span><span class="ident" id="7160483">jsCtxRegexp</span><span class="op" id="7160494">,</span>&nbsp;<span class="string" id="7160496">&#34;return\t&#34;</span><span class="op" id="7160506">}</span><span class="op" id="7160507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160511">{</span><span class="ident" id="7160512">jsCtxRegexp</span><span class="op" id="7160523">,</span>&nbsp;<span class="string" id="7160525">&#34;return\n&#34;</span><span class="op" id="7160535">}</span><span class="op" id="7160536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160540">{</span><span class="ident" id="7160541">jsCtxRegexp</span><span class="op" id="7160552">,</span>&nbsp;<span class="string" id="7160554">&#34;return\u2028&#34;</span><span class="op" id="7160568">}</span><span class="op" id="7160569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160573">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160639">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160701">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160767">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160832">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160898">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160909">{</span><span class="ident" id="7160910">jsCtxDivOp</span><span class="op" id="7160920">,</span>&nbsp;<span class="string" id="7160922">&#34;x&#34;</span><span class="op" id="7160925">}</span><span class="op" id="7160926">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160930">{</span><span class="ident" id="7160931">jsCtxDivOp</span><span class="op" id="7160941">,</span>&nbsp;<span class="string" id="7160943">&#34;x&nbsp;&#34;</span><span class="op" id="7160947">}</span><span class="op" id="7160948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160952">{</span><span class="ident" id="7160953">jsCtxDivOp</span><span class="op" id="7160963">,</span>&nbsp;<span class="string" id="7160965">&#34;x\t&#34;</span><span class="op" id="7160970">}</span><span class="op" id="7160971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160975">{</span><span class="ident" id="7160976">jsCtxDivOp</span><span class="op" id="7160986">,</span>&nbsp;<span class="string" id="7160988">&#34;x\n&#34;</span><span class="op" id="7160993">}</span><span class="op" id="7160994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160998">{</span><span class="ident" id="7160999">jsCtxDivOp</span><span class="op" id="7161009">,</span>&nbsp;<span class="string" id="7161011">&#34;x\u2028&#34;</span><span class="op" id="7161020">}</span><span class="op" id="7161021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161025">{</span><span class="ident" id="7161026">jsCtxDivOp</span><span class="op" id="7161036">,</span>&nbsp;<span class="string" id="7161038">&#34;preturn&#34;</span><span class="op" id="7161047">}</span><span class="op" id="7161048">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161052">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161082">{</span><span class="ident" id="7161083">jsCtxDivOp</span><span class="op" id="7161093">,</span>&nbsp;<span class="string" id="7161095">&#34;0&#34;</span><span class="op" id="7161098">}</span><span class="op" id="7161099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161103">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161158">{</span><span class="ident" id="7161159">jsCtxDivOp</span><span class="op" id="7161169">,</span>&nbsp;<span class="string" id="7161171">&#34;0.&#34;</span><span class="op" id="7161175">}</span><span class="op" id="7161176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161179">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7161183">for</span>&nbsp;<span class="ident" id="7161187">_</span><span class="op" id="7161188">,</span>&nbsp;<span class="ident" id="7161190">test</span>&nbsp;<span class="op" id="7161195">:=</span>&nbsp;<span class="keyword" id="7161198">range</span>&nbsp;<span class="ident" id="7161204">tests</span>&nbsp;<span class="op" id="7161210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7161214">if</span>&nbsp;<span class="ident" id="7161217">nextJSCtx</span><span class="op" id="7161226">(</span><span class="op" id="7161227">[</span><span class="op" id="7161228">]</span><span class="builtintype" id="7161229">byte</span><span class="op" id="7161233">(</span><span class="ident" id="7161234">test</span><span class="op" id="7161238">.</span><span class="ident" id="7161239">s</span><span class="op" id="7161240">)</span><span class="op" id="7161241">,</span>&nbsp;<span class="ident" id="7161243">jsCtxRegexp</span><span class="op" id="7161254">)</span>&nbsp;<span class="op" id="7161256">!=</span>&nbsp;<span class="ident" id="7161259">test</span><span class="op" id="7161263">.</span><span class="ident" id="7161264">jsCtx</span>&nbsp;<span class="op" id="7161270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161275">t</span><span class="op" id="7161276">.</span><span class="ident" id="7161277">Errorf</span><span class="op" id="7161283">(</span><span class="string" id="7161284">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7161300">,</span>&nbsp;<span class="ident" id="7161302">test</span><span class="op" id="7161306">.</span><span class="ident" id="7161307">jsCtx</span><span class="op" id="7161312">,</span>&nbsp;<span class="ident" id="7161314">test</span><span class="op" id="7161318">.</span><span class="ident" id="7161319">s</span><span class="op" id="7161320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161324">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7161328">if</span>&nbsp;<span class="ident" id="7161331">nextJSCtx</span><span class="op" id="7161340">(</span><span class="op" id="7161341">[</span><span class="op" id="7161342">]</span><span class="builtintype" id="7161343">byte</span><span class="op" id="7161347">(</span><span class="ident" id="7161348">test</span><span class="op" id="7161352">.</span><span class="ident" id="7161353">s</span><span class="op" id="7161354">)</span><span class="op" id="7161355">,</span>&nbsp;<span class="ident" id="7161357">jsCtxDivOp</span><span class="op" id="7161367">)</span>&nbsp;<span class="op" id="7161369">!=</span>&nbsp;<span class="ident" id="7161372">test</span><span class="op" id="7161376">.</span><span class="ident" id="7161377">jsCtx</span>&nbsp;<span class="op" id="7161383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161388">t</span><span class="op" id="7161389">.</span><span class="ident" id="7161390">Errorf</span><span class="op" id="7161396">(</span><span class="string" id="7161397">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7161413">,</span>&nbsp;<span class="ident" id="7161415">test</span><span class="op" id="7161419">.</span><span class="ident" id="7161420">jsCtx</span><span class="op" id="7161425">,</span>&nbsp;<span class="ident" id="7161427">test</span><span class="op" id="7161431">.</span><span class="ident" id="7161432">s</span><span class="op" id="7161433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7161444">if</span>&nbsp;<span class="ident" id="7161447">nextJSCtx</span><span class="op" id="7161456">(</span><span class="op" id="7161457">[</span><span class="op" id="7161458">]</span><span class="builtintype" id="7161459">byte</span><span class="op" id="7161463">(</span><span class="string" id="7161464">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7161469">)</span><span class="op" id="7161470">,</span>&nbsp;<span class="ident" id="7161472">jsCtxRegexp</span><span class="op" id="7161483">)</span>&nbsp;<span class="op" id="7161485">!=</span>&nbsp;<span class="ident" id="7161488">jsCtxRegexp</span>&nbsp;<span class="op" id="7161500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161504">t</span><span class="op" id="7161505">.</span><span class="ident" id="7161506">Error</span><span class="op" id="7161511">(</span><span class="string" id="7161512">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7161526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7161533">if</span>&nbsp;<span class="ident" id="7161536">nextJSCtx</span><span class="op" id="7161545">(</span><span class="op" id="7161546">[</span><span class="op" id="7161547">]</span><span class="builtintype" id="7161548">byte</span><span class="op" id="7161552">(</span><span class="string" id="7161553">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7161558">)</span><span class="op" id="7161559">,</span>&nbsp;<span class="ident" id="7161561">jsCtxDivOp</span><span class="op" id="7161571">)</span>&nbsp;<span class="op" id="7161573">!=</span>&nbsp;<span class="ident" id="7161576">jsCtxDivOp</span>&nbsp;<span class="op" id="7161587">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161591">t</span><span class="op" id="7161592">.</span><span class="ident" id="7161593">Error</span><span class="op" id="7161598">(</span><span class="string" id="7161599">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7161613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161616">}</span><br>
<span class="lineno"></span><span class="op" id="7161618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7161621">func</span>&nbsp;<span class="ident" id="7161626">TestJSValEscaper</span><span class="op" id="7161642">(</span><span class="ident" id="7161643">t</span>&nbsp;<span class="op" id="7161645">*</span><span class="ident" id="7161646">testing</span><span class="op" id="7161653">.</span><span class="ident" id="7161654">T</span><span class="op" id="7161655">)</span>&nbsp;<span class="op" id="7161657">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161660">tests</span>&nbsp;<span class="op" id="7161666">:=</span>&nbsp;<span class="op" id="7161669">[</span><span class="op" id="7161670">]</span><span class="keyword" id="7161671">struct</span>&nbsp;<span class="op" id="7161678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161682">x</span>&nbsp;&nbsp;<span class="keyword" id="7161685">interface</span><span class="op" id="7161694">{</span><span class="op" id="7161695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161699">js</span>&nbsp;<span class="builtintype" id="7161702">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161710">}</span><span class="op" id="7161711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161715">{</span><span class="builtintype" id="7161716">int</span><span class="op" id="7161719">(</span><span class="num" id="7161720">42</span><span class="op" id="7161722">)</span><span class="op" id="7161723">,</span>&nbsp;<span class="string" id="7161725">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161731">}</span><span class="op" id="7161732">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161736">{</span><span class="builtintype" id="7161737">uint</span><span class="op" id="7161741">(</span><span class="num" id="7161742">42</span><span class="op" id="7161744">)</span><span class="op" id="7161745">,</span>&nbsp;<span class="string" id="7161747">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161753">}</span><span class="op" id="7161754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161758">{</span><span class="builtintype" id="7161759">int16</span><span class="op" id="7161764">(</span><span class="num" id="7161765">42</span><span class="op" id="7161767">)</span><span class="op" id="7161768">,</span>&nbsp;<span class="string" id="7161770">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161776">}</span><span class="op" id="7161777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161781">{</span><span class="builtintype" id="7161782">uint16</span><span class="op" id="7161788">(</span><span class="num" id="7161789">42</span><span class="op" id="7161791">)</span><span class="op" id="7161792">,</span>&nbsp;<span class="string" id="7161794">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161800">}</span><span class="op" id="7161801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161805">{</span><span class="builtintype" id="7161806">int32</span><span class="op" id="7161811">(</span><span class="op" id="7161812">-</span><span class="num" id="7161813">42</span><span class="op" id="7161815">)</span><span class="op" id="7161816">,</span>&nbsp;<span class="string" id="7161818">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7161825">}</span><span class="op" id="7161826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161830">{</span><span class="builtintype" id="7161831">uint32</span><span class="op" id="7161837">(</span><span class="num" id="7161838">42</span><span class="op" id="7161840">)</span><span class="op" id="7161841">,</span>&nbsp;<span class="string" id="7161843">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161849">}</span><span class="op" id="7161850">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161854">{</span><span class="builtintype" id="7161855">int16</span><span class="op" id="7161860">(</span><span class="op" id="7161861">-</span><span class="num" id="7161862">42</span><span class="op" id="7161864">)</span><span class="op" id="7161865">,</span>&nbsp;<span class="string" id="7161867">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7161874">}</span><span class="op" id="7161875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161879">{</span><span class="builtintype" id="7161880">uint16</span><span class="op" id="7161886">(</span><span class="num" id="7161887">42</span><span class="op" id="7161889">)</span><span class="op" id="7161890">,</span>&nbsp;<span class="string" id="7161892">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161898">}</span><span class="op" id="7161899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161903">{</span><span class="ident" id="7161904">int64</span><span class="op" id="7161909">(</span><span class="op" id="7161910">-</span><span class="num" id="7161911">42</span><span class="op" id="7161913">)</span><span class="op" id="7161914">,</span>&nbsp;<span class="string" id="7161916">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7161923">}</span><span class="op" id="7161924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161928">{</span><span class="ident" id="7161929">uint64</span><span class="op" id="7161935">(</span><span class="num" id="7161936">42</span><span class="op" id="7161938">)</span><span class="op" id="7161939">,</span>&nbsp;<span class="string" id="7161941">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7161947">}</span><span class="op" id="7161948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161952">{</span><span class="ident" id="7161953">uint64</span><span class="op" id="7161959">(</span><span class="num" id="7161960">1</span><span class="op" id="7161961">)</span>&nbsp;<span class="op" id="7161963">&lt;&lt;</span>&nbsp;<span class="num" id="7161966">53</span><span class="op" id="7161968">,</span>&nbsp;<span class="string" id="7161970">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7161990">}</span><span class="op" id="7161991">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161995">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7162047">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162101">{</span><span class="ident" id="7162102">uint64</span><span class="op" id="7162108">(</span><span class="num" id="7162109">1</span><span class="op" id="7162110">)</span><span class="op" id="7162111">&lt;&lt;</span><span class="num" id="7162113">53</span>&nbsp;<span class="op" id="7162116">+</span>&nbsp;<span class="num" id="7162118">1</span><span class="op" id="7162119">,</span>&nbsp;<span class="string" id="7162121">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7162141">}</span><span class="op" id="7162142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162146">{</span><span class="builtintype" id="7162147">float32</span><span class="op" id="7162154">(</span><span class="num" id="7162155">1.0</span><span class="op" id="7162158">)</span><span class="op" id="7162159">,</span>&nbsp;<span class="string" id="7162161">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7162166">}</span><span class="op" id="7162167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162171">{</span><span class="builtintype" id="7162172">float32</span><span class="op" id="7162179">(</span><span class="op" id="7162180">-</span><span class="num" id="7162181">1.0</span><span class="op" id="7162184">)</span><span class="op" id="7162185">,</span>&nbsp;<span class="string" id="7162187">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7162193">}</span><span class="op" id="7162194">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162198">{</span><span class="builtintype" id="7162199">float32</span><span class="op" id="7162206">(</span><span class="num" id="7162207">0.5</span><span class="op" id="7162210">)</span><span class="op" id="7162211">,</span>&nbsp;<span class="string" id="7162213">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7162220">}</span><span class="op" id="7162221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162225">{</span><span class="builtintype" id="7162226">float32</span><span class="op" id="7162233">(</span><span class="op" id="7162234">-</span><span class="num" id="7162235">0.5</span><span class="op" id="7162238">)</span><span class="op" id="7162239">,</span>&nbsp;<span class="string" id="7162241">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7162249">}</span><span class="op" id="7162250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162254">{</span><span class="builtintype" id="7162255">float32</span><span class="op" id="7162262">(</span><span class="num" id="7162263">1.0</span><span class="op" id="7162266">)</span>&nbsp;<span class="op" id="7162268">/</span>&nbsp;<span class="builtintype" id="7162270">float32</span><span class="op" id="7162277">(</span><span class="num" id="7162278">256</span><span class="op" id="7162281">)</span><span class="op" id="7162282">,</span>&nbsp;<span class="string" id="7162284">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7162298">}</span><span class="op" id="7162299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162303">{</span><span class="builtintype" id="7162304">float32</span><span class="op" id="7162311">(</span><span class="num" id="7162312">0</span><span class="op" id="7162313">)</span><span class="op" id="7162314">,</span>&nbsp;<span class="string" id="7162316">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7162321">}</span><span class="op" id="7162322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162326">{</span><span class="ident" id="7162327">math</span><span class="op" id="7162331">.</span><span class="ident" id="7162332">Copysign</span><span class="op" id="7162340">(</span><span class="num" id="7162341">0</span><span class="op" id="7162342">,</span>&nbsp;<span class="op" id="7162344">-</span><span class="num" id="7162345">1</span><span class="op" id="7162346">)</span><span class="op" id="7162347">,</span>&nbsp;<span class="string" id="7162349">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7162355">}</span><span class="op" id="7162356">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162360">{</span><span class="builtintype" id="7162361">float64</span><span class="op" id="7162368">(</span><span class="num" id="7162369">1.0</span><span class="op" id="7162372">)</span><span class="op" id="7162373">,</span>&nbsp;<span class="string" id="7162375">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7162380">}</span><span class="op" id="7162381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162385">{</span><span class="builtintype" id="7162386">float64</span><span class="op" id="7162393">(</span><span class="op" id="7162394">-</span><span class="num" id="7162395">1.0</span><span class="op" id="7162398">)</span><span class="op" id="7162399">,</span>&nbsp;<span class="string" id="7162401">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7162407">}</span><span class="op" id="7162408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162412">{</span><span class="builtintype" id="7162413">float64</span><span class="op" id="7162420">(</span><span class="num" id="7162421">0.5</span><span class="op" id="7162424">)</span><span class="op" id="7162425">,</span>&nbsp;<span class="string" id="7162427">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7162434">}</span><span class="op" id="7162435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162439">{</span><span class="builtintype" id="7162440">float64</span><span class="op" id="7162447">(</span><span class="op" id="7162448">-</span><span class="num" id="7162449">0.5</span><span class="op" id="7162452">)</span><span class="op" id="7162453">,</span>&nbsp;<span class="string" id="7162455">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7162463">}</span><span class="op" id="7162464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162468">{</span><span class="builtintype" id="7162469">float64</span><span class="op" id="7162476">(</span><span class="num" id="7162477">0</span><span class="op" id="7162478">)</span><span class="op" id="7162479">,</span>&nbsp;<span class="string" id="7162481">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7162486">}</span><span class="op" id="7162487">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162491">{</span><span class="ident" id="7162492">math</span><span class="op" id="7162496">.</span><span class="ident" id="7162497">Copysign</span><span class="op" id="7162505">(</span><span class="num" id="7162506">0</span><span class="op" id="7162507">,</span>&nbsp;<span class="op" id="7162509">-</span><span class="num" id="7162510">1</span><span class="op" id="7162511">)</span><span class="op" id="7162512">,</span>&nbsp;<span class="string" id="7162514">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7162520">}</span><span class="op" id="7162521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162525">{</span><span class="string" id="7162526">&#34;&#34;</span><span class="op" id="7162528">,</span>&nbsp;<span class="string" id="7162530">`&#34;&#34;`</span><span class="op" id="7162534">}</span><span class="op" id="7162535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162539">{</span><span class="string" id="7162540">&#34;foo&#34;</span><span class="op" id="7162545">,</span>&nbsp;<span class="string" id="7162547">`&#34;foo&#34;`</span><span class="op" id="7162554">}</span><span class="op" id="7162555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7162559">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162574">{</span><span class="string" id="7162575">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7162593">,</span>&nbsp;<span class="string" id="7162595">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7162615">}</span><span class="op" id="7162616">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7162620">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162668">{</span><span class="string" id="7162669">&#34;\t\x0b&#34;</span><span class="op" id="7162677">,</span>&nbsp;<span class="string" id="7162679">`&#34;\t\u000b&#34;`</span><span class="op" id="7162691">}</span><span class="op" id="7162692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162696">{</span><span class="keyword" id="7162697">struct</span><span class="op" id="7162703">{</span>&nbsp;<span class="ident" id="7162705">X</span><span class="op" id="7162706">,</span>&nbsp;<span class="ident" id="7162708">Y</span>&nbsp;<span class="builtintype" id="7162710">int</span>&nbsp;<span class="op" id="7162714">}</span><span class="op" id="7162715">{</span><span class="num" id="7162716">1</span><span class="op" id="7162717">,</span>&nbsp;<span class="num" id="7162719">2</span><span class="op" id="7162720">}</span><span class="op" id="7162721">,</span>&nbsp;<span class="string" id="7162723">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7162738">}</span><span class="op" id="7162739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162743">{</span><span class="op" id="7162744">[</span><span class="op" id="7162745">]</span><span class="keyword" id="7162746">interface</span><span class="op" id="7162755">{</span><span class="op" id="7162756">}</span><span class="op" id="7162757">{</span><span class="op" id="7162758">}</span><span class="op" id="7162759">,</span>&nbsp;<span class="string" id="7162761">&#34;[]&#34;</span><span class="op" id="7162765">}</span><span class="op" id="7162766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162770">{</span><span class="op" id="7162771">[</span><span class="op" id="7162772">]</span><span class="keyword" id="7162773">interface</span><span class="op" id="7162782">{</span><span class="op" id="7162783">}</span><span class="op" id="7162784">{</span><span class="num" id="7162785">42</span><span class="op" id="7162787">,</span>&nbsp;<span class="string" id="7162789">&#34;foo&#34;</span><span class="op" id="7162794">,</span>&nbsp;<span class="ident" id="7162796">nil</span><span class="op" id="7162799">}</span><span class="op" id="7162800">,</span>&nbsp;<span class="string" id="7162802">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7162819">}</span><span class="op" id="7162820">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162824">{</span><span class="op" id="7162825">[</span><span class="op" id="7162826">]</span><span class="builtintype" id="7162827">string</span><span class="op" id="7162833">{</span><span class="string" id="7162834">&#34;&lt;!--&#34;</span><span class="op" id="7162840">,</span>&nbsp;<span class="string" id="7162842">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7162853">,</span>&nbsp;<span class="string" id="7162855">&#34;--&gt;&#34;</span><span class="op" id="7162860">}</span><span class="op" id="7162861">,</span>&nbsp;<span class="string" id="7162863">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7162911">}</span><span class="op" id="7162912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162916">{</span><span class="string" id="7162917">&#34;&lt;!--&#34;</span><span class="op" id="7162923">,</span>&nbsp;<span class="string" id="7162925">`&#34;\u003c!--&#34;`</span><span class="op" id="7162938">}</span><span class="op" id="7162939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162943">{</span><span class="string" id="7162944">&#34;--&gt;&#34;</span><span class="op" id="7162949">,</span>&nbsp;<span class="string" id="7162951">`&#34;--\u003e&#34;`</span><span class="op" id="7162963">}</span><span class="op" id="7162964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162968">{</span><span class="string" id="7162969">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7162980">,</span>&nbsp;<span class="string" id="7162982">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7163000">}</span><span class="op" id="7163001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163005">{</span><span class="string" id="7163006">&#34;]]&gt;&#34;</span><span class="op" id="7163011">,</span>&nbsp;<span class="string" id="7163013">`&#34;]]\u003e&#34;`</span><span class="op" id="7163025">}</span><span class="op" id="7163026">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163030">{</span><span class="string" id="7163031">&#34;&lt;/script&#34;</span><span class="op" id="7163041">,</span>&nbsp;<span class="string" id="7163043">`&#34;\u003c/script&#34;`</span><span class="op" id="7163060">}</span><span class="op" id="7163061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163065">{</span><span class="string" id="7163066">&#34;\U0001D11E&#34;</span><span class="op" id="7163078">,</span>&nbsp;<span class="string" id="7163080">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7163096">}</span><span class="op" id="7163097">,</span>&nbsp;<span class="comment" id="7163099">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7163125">for</span>&nbsp;<span class="ident" id="7163129">_</span><span class="op" id="7163130">,</span>&nbsp;<span class="ident" id="7163132">test</span>&nbsp;<span class="op" id="7163137">:=</span>&nbsp;<span class="keyword" id="7163140">range</span>&nbsp;<span class="ident" id="7163146">tests</span>&nbsp;<span class="op" id="7163152">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7163156">if</span>&nbsp;<span class="ident" id="7163159">js</span>&nbsp;<span class="op" id="7163162">:=</span>&nbsp;<span class="ident" id="7163165">jsValEscaper</span><span class="op" id="7163177">(</span><span class="ident" id="7163178">test</span><span class="op" id="7163182">.</span><span class="ident" id="7163183">x</span><span class="op" id="7163184">)</span><span class="op" id="7163185">;</span>&nbsp;<span class="ident" id="7163187">js</span>&nbsp;<span class="op" id="7163190">!=</span>&nbsp;<span class="ident" id="7163193">test</span><span class="op" id="7163197">.</span><span class="ident" id="7163198">js</span>&nbsp;<span class="op" id="7163201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163206">t</span><span class="op" id="7163207">.</span><span class="ident" id="7163208">Errorf</span><span class="op" id="7163214">(</span><span class="string" id="7163215">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7163243">,</span>&nbsp;<span class="ident" id="7163245">test</span><span class="op" id="7163249">.</span><span class="ident" id="7163250">x</span><span class="op" id="7163251">,</span>&nbsp;<span class="ident" id="7163253">test</span><span class="op" id="7163257">.</span><span class="ident" id="7163258">js</span><span class="op" id="7163260">,</span>&nbsp;<span class="ident" id="7163262">js</span><span class="op" id="7163264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163272">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163329">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163346">a</span>&nbsp;<span class="op" id="7163348">:=</span>&nbsp;<span class="op" id="7163351">[</span><span class="op" id="7163352">]</span><span class="keyword" id="7163353">interface</span><span class="op" id="7163362">{</span><span class="op" id="7163363">}</span><span class="op" id="7163364">{</span><span class="ident" id="7163365">test</span><span class="op" id="7163369">.</span><span class="ident" id="7163370">x</span><span class="op" id="7163371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163375">want</span>&nbsp;<span class="op" id="7163380">:=</span>&nbsp;<span class="string" id="7163383">&#34;[&#34;</span>&nbsp;<span class="op" id="7163387">+</span>&nbsp;<span class="ident" id="7163389">strings</span><span class="op" id="7163396">.</span><span class="ident" id="7163397">TrimSpace</span><span class="op" id="7163406">(</span><span class="ident" id="7163407">test</span><span class="op" id="7163411">.</span><span class="ident" id="7163412">js</span><span class="op" id="7163414">)</span>&nbsp;<span class="op" id="7163416">+</span>&nbsp;<span class="string" id="7163418">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7163424">if</span>&nbsp;<span class="ident" id="7163427">js</span>&nbsp;<span class="op" id="7163430">:=</span>&nbsp;<span class="ident" id="7163433">jsValEscaper</span><span class="op" id="7163445">(</span><span class="ident" id="7163446">a</span><span class="op" id="7163447">)</span><span class="op" id="7163448">;</span>&nbsp;<span class="ident" id="7163450">js</span>&nbsp;<span class="op" id="7163453">!=</span>&nbsp;<span class="ident" id="7163456">want</span>&nbsp;<span class="op" id="7163461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163466">t</span><span class="op" id="7163467">.</span><span class="ident" id="7163468">Errorf</span><span class="op" id="7163474">(</span><span class="string" id="7163475">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7163503">,</span>&nbsp;<span class="ident" id="7163505">a</span><span class="op" id="7163506">,</span>&nbsp;<span class="ident" id="7163508">want</span><span class="op" id="7163512">,</span>&nbsp;<span class="ident" id="7163514">js</span><span class="op" id="7163516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163520">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163523">}</span><br>
<span class="lineno"></span><span class="op" id="7163525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7163528">func</span>&nbsp;<span class="ident" id="7163533">TestJSStrEscaper</span><span class="op" id="7163549">(</span><span class="ident" id="7163550">t</span>&nbsp;<span class="op" id="7163552">*</span><span class="ident" id="7163553">testing</span><span class="op" id="7163560">.</span><span class="ident" id="7163561">T</span><span class="op" id="7163562">)</span>&nbsp;<span class="op" id="7163564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163567">tests</span>&nbsp;<span class="op" id="7163573">:=</span>&nbsp;<span class="op" id="7163576">[</span><span class="op" id="7163577">]</span><span class="keyword" id="7163578">struct</span>&nbsp;<span class="op" id="7163585">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163589">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7163593">interface</span><span class="op" id="7163602">{</span><span class="op" id="7163603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163607">esc</span>&nbsp;<span class="builtintype" id="7163611">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163619">}</span><span class="op" id="7163620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163624">{</span><span class="string" id="7163625">&#34;&#34;</span><span class="op" id="7163627">,</span>&nbsp;<span class="string" id="7163629">``</span><span class="op" id="7163631">}</span><span class="op" id="7163632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163636">{</span><span class="string" id="7163637">&#34;foo&#34;</span><span class="op" id="7163642">,</span>&nbsp;<span class="string" id="7163644">`foo`</span><span class="op" id="7163649">}</span><span class="op" id="7163650">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163654">{</span><span class="string" id="7163655">&#34;\u0000&#34;</span><span class="op" id="7163663">,</span>&nbsp;<span class="string" id="7163665">`\0`</span><span class="op" id="7163669">}</span><span class="op" id="7163670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163674">{</span><span class="string" id="7163675">&#34;\t&#34;</span><span class="op" id="7163679">,</span>&nbsp;<span class="string" id="7163681">`\t`</span><span class="op" id="7163685">}</span><span class="op" id="7163686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163690">{</span><span class="string" id="7163691">&#34;\n&#34;</span><span class="op" id="7163695">,</span>&nbsp;<span class="string" id="7163697">`\n`</span><span class="op" id="7163701">}</span><span class="op" id="7163702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163706">{</span><span class="string" id="7163707">&#34;\r&#34;</span><span class="op" id="7163711">,</span>&nbsp;<span class="string" id="7163713">`\r`</span><span class="op" id="7163717">}</span><span class="op" id="7163718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163722">{</span><span class="string" id="7163723">&#34;\u2028&#34;</span><span class="op" id="7163731">,</span>&nbsp;<span class="string" id="7163733">`\u2028`</span><span class="op" id="7163741">}</span><span class="op" id="7163742">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163746">{</span><span class="string" id="7163747">&#34;\u2029&#34;</span><span class="op" id="7163755">,</span>&nbsp;<span class="string" id="7163757">`\u2029`</span><span class="op" id="7163765">}</span><span class="op" id="7163766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163770">{</span><span class="string" id="7163771">&#34;\\&#34;</span><span class="op" id="7163775">,</span>&nbsp;<span class="string" id="7163777">`\\`</span><span class="op" id="7163781">}</span><span class="op" id="7163782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163786">{</span><span class="string" id="7163787">&#34;\\n&#34;</span><span class="op" id="7163792">,</span>&nbsp;<span class="string" id="7163794">`\\n`</span><span class="op" id="7163799">}</span><span class="op" id="7163800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163804">{</span><span class="string" id="7163805">&#34;foo\r\nbar&#34;</span><span class="op" id="7163817">,</span>&nbsp;<span class="string" id="7163819">`foo\r\nbar`</span><span class="op" id="7163831">}</span><span class="op" id="7163832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163836">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163872">{</span><span class="string" id="7163873">`&#34;`</span><span class="op" id="7163876">,</span>&nbsp;<span class="string" id="7163878">`\x22`</span><span class="op" id="7163884">}</span><span class="op" id="7163885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163889">{</span><span class="string" id="7163890">`&#39;`</span><span class="op" id="7163893">,</span>&nbsp;<span class="string" id="7163895">`\x27`</span><span class="op" id="7163901">}</span><span class="op" id="7163902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163906">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163961">{</span><span class="string" id="7163962">`&amp;amp;`</span><span class="op" id="7163969">,</span>&nbsp;<span class="string" id="7163971">`\x26amp;`</span><span class="op" id="7163981">}</span><span class="op" id="7163982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163986">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164049">{</span><span class="string" id="7164050">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7164061">,</span>&nbsp;<span class="string" id="7164063">`\x3c\/script\x3e`</span><span class="op" id="7164081">}</span><span class="op" id="7164082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164086">{</span><span class="string" id="7164087">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7164098">,</span>&nbsp;<span class="string" id="7164100">`\x3c![CDATA[`</span><span class="op" id="7164114">}</span><span class="op" id="7164115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164119">{</span><span class="string" id="7164120">&#34;]]&gt;&#34;</span><span class="op" id="7164125">,</span>&nbsp;<span class="string" id="7164127">`]]\x3e`</span><span class="op" id="7164135">}</span><span class="op" id="7164136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164140">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164212">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164276">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164337">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164384">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164448">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164515">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164581">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164641">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164705">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164756">{</span><span class="string" id="7164757">&#34;&lt;!--&#34;</span><span class="op" id="7164763">,</span>&nbsp;<span class="string" id="7164765">`\x3c!--`</span><span class="op" id="7164774">}</span><span class="op" id="7164775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164779">{</span><span class="string" id="7164780">&#34;--&gt;&#34;</span><span class="op" id="7164785">,</span>&nbsp;<span class="string" id="7164787">`--\x3e`</span><span class="op" id="7164795">}</span><span class="op" id="7164796">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164800">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164860">{</span><span class="string" id="7164861">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7164904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7164909">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7164965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164969">}</span><span class="op" id="7164970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7164974">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165002">{</span><span class="string" id="7165003">&#34;foo\xA0bar&#34;</span><span class="op" id="7165015">,</span>&nbsp;<span class="string" id="7165017">&#34;foo\xA0bar&#34;</span><span class="op" id="7165029">}</span><span class="op" id="7165030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7165034">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165069">{</span><span class="string" id="7165070">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7165090">,</span>&nbsp;<span class="string" id="7165092">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7165112">}</span><span class="op" id="7165113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165120">for</span>&nbsp;<span class="ident" id="7165124">_</span><span class="op" id="7165125">,</span>&nbsp;<span class="ident" id="7165127">test</span>&nbsp;<span class="op" id="7165132">:=</span>&nbsp;<span class="keyword" id="7165135">range</span>&nbsp;<span class="ident" id="7165141">tests</span>&nbsp;<span class="op" id="7165147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165151">esc</span>&nbsp;<span class="op" id="7165155">:=</span>&nbsp;<span class="ident" id="7165158">jsStrEscaper</span><span class="op" id="7165170">(</span><span class="ident" id="7165171">test</span><span class="op" id="7165175">.</span><span class="ident" id="7165176">x</span><span class="op" id="7165177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165181">if</span>&nbsp;<span class="ident" id="7165184">esc</span>&nbsp;<span class="op" id="7165188">!=</span>&nbsp;<span class="ident" id="7165191">test</span><span class="op" id="7165195">.</span><span class="ident" id="7165196">esc</span>&nbsp;<span class="op" id="7165200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165205">t</span><span class="op" id="7165206">.</span><span class="ident" id="7165207">Errorf</span><span class="op" id="7165213">(</span><span class="string" id="7165214">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7165234">,</span>&nbsp;<span class="ident" id="7165236">test</span><span class="op" id="7165240">.</span><span class="ident" id="7165241">x</span><span class="op" id="7165242">,</span>&nbsp;<span class="ident" id="7165244">test</span><span class="op" id="7165248">.</span><span class="ident" id="7165249">esc</span><span class="op" id="7165252">,</span>&nbsp;<span class="ident" id="7165254">esc</span><span class="op" id="7165257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165261">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165264">}</span><br>
<span class="lineno"></span><span class="op" id="7165266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7165269">func</span>&nbsp;<span class="ident" id="7165274">TestJSRegexpEscaper</span><span class="op" id="7165293">(</span><span class="ident" id="7165294">t</span>&nbsp;<span class="op" id="7165296">*</span><span class="ident" id="7165297">testing</span><span class="op" id="7165304">.</span><span class="ident" id="7165305">T</span><span class="op" id="7165306">)</span>&nbsp;<span class="op" id="7165308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165311">tests</span>&nbsp;<span class="op" id="7165317">:=</span>&nbsp;<span class="op" id="7165320">[</span><span class="op" id="7165321">]</span><span class="keyword" id="7165322">struct</span>&nbsp;<span class="op" id="7165329">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165333">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7165337">interface</span><span class="op" id="7165346">{</span><span class="op" id="7165347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165351">esc</span>&nbsp;<span class="builtintype" id="7165355">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165363">}</span><span class="op" id="7165364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165368">{</span><span class="string" id="7165369">&#34;&#34;</span><span class="op" id="7165371">,</span>&nbsp;<span class="string" id="7165373">`(?:)`</span><span class="op" id="7165379">}</span><span class="op" id="7165380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165384">{</span><span class="string" id="7165385">&#34;foo&#34;</span><span class="op" id="7165390">,</span>&nbsp;<span class="string" id="7165392">`foo`</span><span class="op" id="7165397">}</span><span class="op" id="7165398">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165402">{</span><span class="string" id="7165403">&#34;\u0000&#34;</span><span class="op" id="7165411">,</span>&nbsp;<span class="string" id="7165413">`\0`</span><span class="op" id="7165417">}</span><span class="op" id="7165418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165422">{</span><span class="string" id="7165423">&#34;\t&#34;</span><span class="op" id="7165427">,</span>&nbsp;<span class="string" id="7165429">`\t`</span><span class="op" id="7165433">}</span><span class="op" id="7165434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165438">{</span><span class="string" id="7165439">&#34;\n&#34;</span><span class="op" id="7165443">,</span>&nbsp;<span class="string" id="7165445">`\n`</span><span class="op" id="7165449">}</span><span class="op" id="7165450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165454">{</span><span class="string" id="7165455">&#34;\r&#34;</span><span class="op" id="7165459">,</span>&nbsp;<span class="string" id="7165461">`\r`</span><span class="op" id="7165465">}</span><span class="op" id="7165466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165470">{</span><span class="string" id="7165471">&#34;\u2028&#34;</span><span class="op" id="7165479">,</span>&nbsp;<span class="string" id="7165481">`\u2028`</span><span class="op" id="7165489">}</span><span class="op" id="7165490">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165494">{</span><span class="string" id="7165495">&#34;\u2029&#34;</span><span class="op" id="7165503">,</span>&nbsp;<span class="string" id="7165505">`\u2029`</span><span class="op" id="7165513">}</span><span class="op" id="7165514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165518">{</span><span class="string" id="7165519">&#34;\\&#34;</span><span class="op" id="7165523">,</span>&nbsp;<span class="string" id="7165525">`\\`</span><span class="op" id="7165529">}</span><span class="op" id="7165530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165534">{</span><span class="string" id="7165535">&#34;\\n&#34;</span><span class="op" id="7165540">,</span>&nbsp;<span class="string" id="7165542">`\\n`</span><span class="op" id="7165547">}</span><span class="op" id="7165548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165552">{</span><span class="string" id="7165553">&#34;foo\r\nbar&#34;</span><span class="op" id="7165565">,</span>&nbsp;<span class="string" id="7165567">`foo\r\nbar`</span><span class="op" id="7165579">}</span><span class="op" id="7165580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7165584">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165620">{</span><span class="string" id="7165621">`&#34;`</span><span class="op" id="7165624">,</span>&nbsp;<span class="string" id="7165626">`\x22`</span><span class="op" id="7165632">}</span><span class="op" id="7165633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165637">{</span><span class="string" id="7165638">`&#39;`</span><span class="op" id="7165641">,</span>&nbsp;<span class="string" id="7165643">`\x27`</span><span class="op" id="7165649">}</span><span class="op" id="7165650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7165654">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165709">{</span><span class="string" id="7165710">`&amp;amp;`</span><span class="op" id="7165717">,</span>&nbsp;<span class="string" id="7165719">`\x26amp;`</span><span class="op" id="7165729">}</span><span class="op" id="7165730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7165734">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165797">{</span><span class="string" id="7165798">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7165809">,</span>&nbsp;<span class="string" id="7165811">`\x3c\/script\x3e`</span><span class="op" id="7165829">}</span><span class="op" id="7165830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165834">{</span><span class="string" id="7165835">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7165846">,</span>&nbsp;<span class="string" id="7165848">`\x3c!\[CDATA\[`</span><span class="op" id="7165864">}</span><span class="op" id="7165865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165869">{</span><span class="string" id="7165870">&#34;]]&gt;&#34;</span><span class="op" id="7165875">,</span>&nbsp;<span class="string" id="7165877">`\]\]\x3e`</span><span class="op" id="7165887">}</span><span class="op" id="7165888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7165892">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165918">{</span><span class="string" id="7165919">&#34;&lt;!--&#34;</span><span class="op" id="7165925">,</span>&nbsp;<span class="string" id="7165927">`\x3c!\-\-`</span><span class="op" id="7165938">}</span><span class="op" id="7165939">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165943">{</span><span class="string" id="7165944">&#34;--&gt;&#34;</span><span class="op" id="7165949">,</span>&nbsp;<span class="string" id="7165951">`\-\-\x3e`</span><span class="op" id="7165961">}</span><span class="op" id="7165962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165966">{</span><span class="string" id="7165967">&#34;*&#34;</span><span class="op" id="7165970">,</span>&nbsp;<span class="string" id="7165972">`\*`</span><span class="op" id="7165976">}</span><span class="op" id="7165977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165981">{</span><span class="string" id="7165982">&#34;+&#34;</span><span class="op" id="7165985">,</span>&nbsp;<span class="string" id="7165987">`\x2b`</span><span class="op" id="7165993">}</span><span class="op" id="7165994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165998">{</span><span class="string" id="7165999">&#34;?&#34;</span><span class="op" id="7166002">,</span>&nbsp;<span class="string" id="7166004">`\?`</span><span class="op" id="7166008">}</span><span class="op" id="7166009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166013">{</span><span class="string" id="7166014">&#34;[](){}&#34;</span><span class="op" id="7166022">,</span>&nbsp;<span class="string" id="7166024">`\[\]\(\)\{\}`</span><span class="op" id="7166038">}</span><span class="op" id="7166039">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166043">{</span><span class="string" id="7166044">&#34;$foo|x.y&#34;</span><span class="op" id="7166054">,</span>&nbsp;<span class="string" id="7166056">`\$foo\|x\.y`</span><span class="op" id="7166069">}</span><span class="op" id="7166070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166074">{</span><span class="string" id="7166075">&#34;x^y&#34;</span><span class="op" id="7166080">,</span>&nbsp;<span class="string" id="7166082">`x\^y`</span><span class="op" id="7166088">}</span><span class="op" id="7166089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166096">for</span>&nbsp;<span class="ident" id="7166100">_</span><span class="op" id="7166101">,</span>&nbsp;<span class="ident" id="7166103">test</span>&nbsp;<span class="op" id="7166108">:=</span>&nbsp;<span class="keyword" id="7166111">range</span>&nbsp;<span class="ident" id="7166117">tests</span>&nbsp;<span class="op" id="7166123">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166127">esc</span>&nbsp;<span class="op" id="7166131">:=</span>&nbsp;<span class="ident" id="7166134">jsRegexpEscaper</span><span class="op" id="7166149">(</span><span class="ident" id="7166150">test</span><span class="op" id="7166154">.</span><span class="ident" id="7166155">x</span><span class="op" id="7166156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166160">if</span>&nbsp;<span class="ident" id="7166163">esc</span>&nbsp;<span class="op" id="7166167">!=</span>&nbsp;<span class="ident" id="7166170">test</span><span class="op" id="7166174">.</span><span class="ident" id="7166175">esc</span>&nbsp;<span class="op" id="7166179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166184">t</span><span class="op" id="7166185">.</span><span class="ident" id="7166186">Errorf</span><span class="op" id="7166192">(</span><span class="string" id="7166193">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7166213">,</span>&nbsp;<span class="ident" id="7166215">test</span><span class="op" id="7166219">.</span><span class="ident" id="7166220">x</span><span class="op" id="7166221">,</span>&nbsp;<span class="ident" id="7166223">test</span><span class="op" id="7166227">.</span><span class="ident" id="7166228">esc</span><span class="op" id="7166231">,</span>&nbsp;<span class="ident" id="7166233">esc</span><span class="op" id="7166236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166243">}</span><br>
<span class="lineno">265</span><span class="op" id="7166245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7166248">func</span>&nbsp;<span class="ident" id="7166253">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7166296">(</span><span class="ident" id="7166297">t</span>&nbsp;<span class="op" id="7166299">*</span><span class="ident" id="7166300">testing</span><span class="op" id="7166307">.</span><span class="ident" id="7166308">T</span><span class="op" id="7166309">)</span>&nbsp;<span class="op" id="7166311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166314">input</span>&nbsp;<span class="op" id="7166320">:=</span>&nbsp;<span class="op" id="7166323">(</span><span class="string" id="7166324">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7166385">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166389">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7166456">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166460">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7166479">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166483">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7166502">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166506">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7166525">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166529">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7166548">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166552">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7166571">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166575">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7166597">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166601">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7166643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166647">tests</span>&nbsp;<span class="op" id="7166653">:=</span>&nbsp;<span class="op" id="7166656">[</span><span class="op" id="7166657">]</span><span class="keyword" id="7166658">struct</span>&nbsp;<span class="op" id="7166665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166669">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7166677">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166686">escaper</span>&nbsp;<span class="keyword" id="7166694">func</span><span class="op" id="7166698">(</span><span class="op" id="7166699">...</span><span class="keyword" id="7166702">interface</span><span class="op" id="7166711">{</span><span class="op" id="7166712">}</span><span class="op" id="7166713">)</span>&nbsp;<span class="builtintype" id="7166715">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166724">escaped</span>&nbsp;<span class="builtintype" id="7166732">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166740">}</span><span class="op" id="7166741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166750">&#34;jsStrEscaper&#34;</span><span class="op" id="7166764">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166769">jsStrEscaper</span><span class="op" id="7166781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166786">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7166820">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166826">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7166858">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166864">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7166899">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166905">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7166940">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166946">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7166978">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7166984">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7167009">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167015">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7167034">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167040">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7167060">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167066">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7167085">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167091">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7167113">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167119">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7167163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167167">}</span><span class="op" id="7167168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167177">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7167194">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167199">jsRegexpEscaper</span><span class="op" id="7167214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167219">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7167253">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167259">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7167291">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167297">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7167332">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167338">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7167373">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167379">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7167417">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167423">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7167449">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167455">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7167474">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167480">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7167503">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167509">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7167528">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167534">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7167555">+</span>&nbsp;<span class="string" id="7167557">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7167566">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167572">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7167616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167620">}</span><span class="op" id="7167621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167628">for</span>&nbsp;<span class="ident" id="7167632">_</span><span class="op" id="7167633">,</span>&nbsp;<span class="ident" id="7167635">test</span>&nbsp;<span class="op" id="7167640">:=</span>&nbsp;<span class="keyword" id="7167643">range</span>&nbsp;<span class="ident" id="7167649">tests</span>&nbsp;<span class="op" id="7167655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167659">if</span>&nbsp;<span class="ident" id="7167662">s</span>&nbsp;<span class="op" id="7167664">:=</span>&nbsp;<span class="ident" id="7167667">test</span><span class="op" id="7167671">.</span><span class="ident" id="7167672">escaper</span><span class="op" id="7167679">(</span><span class="ident" id="7167680">input</span><span class="op" id="7167685">)</span><span class="op" id="7167686">;</span>&nbsp;<span class="ident" id="7167688">s</span>&nbsp;<span class="op" id="7167690">!=</span>&nbsp;<span class="ident" id="7167693">test</span><span class="op" id="7167697">.</span><span class="ident" id="7167698">escaped</span>&nbsp;<span class="op" id="7167706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167711">t</span><span class="op" id="7167712">.</span><span class="ident" id="7167713">Errorf</span><span class="op" id="7167719">(</span><span class="string" id="7167720">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7167752">,</span>&nbsp;<span class="ident" id="7167754">test</span><span class="op" id="7167758">.</span><span class="ident" id="7167759">name</span><span class="op" id="7167763">,</span>&nbsp;<span class="ident" id="7167765">test</span><span class="op" id="7167769">.</span><span class="ident" id="7167770">escaped</span><span class="op" id="7167777">,</span>&nbsp;<span class="ident" id="7167779">s</span><span class="op" id="7167780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167785">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167796">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7167801">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7167851">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167900">var</span>&nbsp;<span class="ident" id="7167904">buf</span>&nbsp;<span class="ident" id="7167908">bytes</span><span class="op" id="7167913">.</span><span class="ident" id="7167914">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167923">for</span>&nbsp;<span class="ident" id="7167927">_</span><span class="op" id="7167928">,</span>&nbsp;<span class="ident" id="7167930">c</span>&nbsp;<span class="op" id="7167932">:=</span>&nbsp;<span class="keyword" id="7167935">range</span>&nbsp;<span class="ident" id="7167941">input</span>&nbsp;<span class="op" id="7167947">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167952">buf</span><span class="op" id="7167955">.</span><span class="ident" id="7167956">WriteString</span><span class="op" id="7167967">(</span><span class="ident" id="7167968">test</span><span class="op" id="7167972">.</span><span class="ident" id="7167973">escaper</span><span class="op" id="7167980">(</span><span class="builtintype" id="7167981">string</span><span class="op" id="7167987">(</span><span class="ident" id="7167988">c</span><span class="op" id="7167989">)</span><span class="op" id="7167990">)</span><span class="op" id="7167991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168000">if</span>&nbsp;<span class="ident" id="7168003">s</span>&nbsp;<span class="op" id="7168005">:=</span>&nbsp;<span class="ident" id="7168008">buf</span><span class="op" id="7168011">.</span><span class="ident" id="7168012">String</span><span class="op" id="7168018">(</span><span class="op" id="7168019">)</span><span class="op" id="7168020">;</span>&nbsp;<span class="ident" id="7168022">s</span>&nbsp;<span class="op" id="7168024">!=</span>&nbsp;<span class="ident" id="7168027">test</span><span class="op" id="7168031">.</span><span class="ident" id="7168032">escaped</span>&nbsp;<span class="op" id="7168040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168045">t</span><span class="op" id="7168046">.</span><span class="ident" id="7168047">Errorf</span><span class="op" id="7168053">(</span><span class="string" id="7168054">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7168091">,</span>&nbsp;<span class="ident" id="7168093">test</span><span class="op" id="7168097">.</span><span class="ident" id="7168098">name</span><span class="op" id="7168102">,</span>&nbsp;<span class="ident" id="7168104">test</span><span class="op" id="7168108">.</span><span class="ident" id="7168109">escaped</span><span class="op" id="7168116">,</span>&nbsp;<span class="ident" id="7168118">s</span><span class="op" id="7168119">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168124">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168138">}</span><br>
<span class="lineno"></span><span class="op" id="7168140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7168143">func</span>&nbsp;<span class="ident" id="7168148">BenchmarkJSValEscaperWithNum</span><span class="op" id="7168176">(</span><span class="ident" id="7168177">b</span>&nbsp;<span class="op" id="7168179">*</span><span class="ident" id="7168180">testing</span><span class="op" id="7168187">.</span><span class="ident" id="7168188">B</span><span class="op" id="7168189">)</span>&nbsp;<span class="op" id="7168191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168194">for</span>&nbsp;<span class="ident" id="7168198">i</span>&nbsp;<span class="op" id="7168200">:=</span>&nbsp;<span class="num" id="7168203">0</span><span class="op" id="7168204">;</span>&nbsp;<span class="ident" id="7168206">i</span>&nbsp;<span class="op" id="7168208">&lt;</span>&nbsp;<span class="ident" id="7168210">b</span><span class="op" id="7168211">.</span><span class="ident" id="7168212">N</span><span class="op" id="7168213">;</span>&nbsp;<span class="ident" id="7168215">i</span><span class="op" id="7168216">++</span>&nbsp;<span class="op" id="7168219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168223">jsValEscaper</span><span class="op" id="7168235">(</span><span class="num" id="7168236">3.141592654</span><span class="op" id="7168247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168250">}</span><br>
<span class="lineno"></span><span class="op" id="7168252">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7168255">func</span>&nbsp;<span class="ident" id="7168260">BenchmarkJSValEscaperWithStr</span><span class="op" id="7168288">(</span><span class="ident" id="7168289">b</span>&nbsp;<span class="op" id="7168291">*</span><span class="ident" id="7168292">testing</span><span class="op" id="7168299">.</span><span class="ident" id="7168300">B</span><span class="op" id="7168301">)</span>&nbsp;<span class="op" id="7168303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168306">for</span>&nbsp;<span class="ident" id="7168310">i</span>&nbsp;<span class="op" id="7168312">:=</span>&nbsp;<span class="num" id="7168315">0</span><span class="op" id="7168316">;</span>&nbsp;<span class="ident" id="7168318">i</span>&nbsp;<span class="op" id="7168320">&lt;</span>&nbsp;<span class="ident" id="7168322">b</span><span class="op" id="7168323">.</span><span class="ident" id="7168324">N</span><span class="op" id="7168325">;</span>&nbsp;<span class="ident" id="7168327">i</span><span class="op" id="7168328">++</span>&nbsp;<span class="op" id="7168331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168335">jsValEscaper</span><span class="op" id="7168347">(</span><span class="string" id="7168348">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7168469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168472">}</span><br>
<span class="lineno">345</span><span class="op" id="7168474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7168477">func</span>&nbsp;<span class="ident" id="7168482">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7168520">(</span><span class="ident" id="7168521">b</span>&nbsp;<span class="op" id="7168523">*</span><span class="ident" id="7168524">testing</span><span class="op" id="7168531">.</span><span class="ident" id="7168532">B</span><span class="op" id="7168533">)</span>&nbsp;<span class="op" id="7168535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168538">for</span>&nbsp;<span class="ident" id="7168542">i</span>&nbsp;<span class="op" id="7168544">:=</span>&nbsp;<span class="num" id="7168547">0</span><span class="op" id="7168548">;</span>&nbsp;<span class="ident" id="7168550">i</span>&nbsp;<span class="op" id="7168552">&lt;</span>&nbsp;<span class="ident" id="7168554">b</span><span class="op" id="7168555">.</span><span class="ident" id="7168556">N</span><span class="op" id="7168557">;</span>&nbsp;<span class="ident" id="7168559">i</span><span class="op" id="7168560">++</span>&nbsp;<span class="op" id="7168563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168567">jsValEscaper</span><span class="op" id="7168579">(</span><span class="string" id="7168580">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7168626">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168629">}</span><br>
<span class="lineno"></span><span class="op" id="7168631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7168634">func</span>&nbsp;<span class="ident" id="7168639">BenchmarkJSValEscaperWithObj</span><span class="op" id="7168667">(</span><span class="ident" id="7168668">b</span>&nbsp;<span class="op" id="7168670">*</span><span class="ident" id="7168671">testing</span><span class="op" id="7168678">.</span><span class="ident" id="7168679">B</span><span class="op" id="7168680">)</span>&nbsp;<span class="op" id="7168682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168685">o</span>&nbsp;<span class="op" id="7168687">:=</span>&nbsp;<span class="keyword" id="7168690">struct</span>&nbsp;<span class="op" id="7168697">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168701">S</span>&nbsp;<span class="builtintype" id="7168703">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168712">N</span>&nbsp;<span class="builtintype" id="7168714">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168719">}</span><span class="op" id="7168720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168724">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7168851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7168855">42</span><span class="op" id="7168857">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168863">for</span>&nbsp;<span class="ident" id="7168867">i</span>&nbsp;<span class="op" id="7168869">:=</span>&nbsp;<span class="num" id="7168872">0</span><span class="op" id="7168873">;</span>&nbsp;<span class="ident" id="7168875">i</span>&nbsp;<span class="op" id="7168877">&lt;</span>&nbsp;<span class="ident" id="7168879">b</span><span class="op" id="7168880">.</span><span class="ident" id="7168881">N</span><span class="op" id="7168882">;</span>&nbsp;<span class="ident" id="7168884">i</span><span class="op" id="7168885">++</span>&nbsp;<span class="op" id="7168888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168892">jsValEscaper</span><span class="op" id="7168904">(</span><span class="ident" id="7168905">o</span><span class="op" id="7168906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168909">}</span><br>
<span class="lineno"></span><span class="op" id="7168911">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7168914">func</span>&nbsp;<span class="ident" id="7168919">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7168957">(</span><span class="ident" id="7168958">b</span>&nbsp;<span class="op" id="7168960">*</span><span class="ident" id="7168961">testing</span><span class="op" id="7168968">.</span><span class="ident" id="7168969">B</span><span class="op" id="7168970">)</span>&nbsp;<span class="op" id="7168972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168975">o</span>&nbsp;<span class="op" id="7168977">:=</span>&nbsp;<span class="keyword" id="7168980">struct</span>&nbsp;<span class="op" id="7168987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168991">S</span>&nbsp;<span class="builtintype" id="7168993">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169002">N</span>&nbsp;<span class="builtintype" id="7169004">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169009">}</span><span class="op" id="7169010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7169014">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7169060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7169064">42</span><span class="op" id="7169066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169072">for</span>&nbsp;<span class="ident" id="7169076">i</span>&nbsp;<span class="op" id="7169078">:=</span>&nbsp;<span class="num" id="7169081">0</span><span class="op" id="7169082">;</span>&nbsp;<span class="ident" id="7169084">i</span>&nbsp;<span class="op" id="7169086">&lt;</span>&nbsp;<span class="ident" id="7169088">b</span><span class="op" id="7169089">.</span><span class="ident" id="7169090">N</span><span class="op" id="7169091">;</span>&nbsp;<span class="ident" id="7169093">i</span><span class="op" id="7169094">++</span>&nbsp;<span class="op" id="7169097">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169101">jsValEscaper</span><span class="op" id="7169113">(</span><span class="ident" id="7169114">o</span><span class="op" id="7169115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169118">}</span><br>
<span class="lineno"></span><span class="op" id="7169120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7169123">func</span>&nbsp;<span class="ident" id="7169128">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7169159">(</span><span class="ident" id="7169160">b</span>&nbsp;<span class="op" id="7169162">*</span><span class="ident" id="7169163">testing</span><span class="op" id="7169170">.</span><span class="ident" id="7169171">B</span><span class="op" id="7169172">)</span>&nbsp;<span class="op" id="7169174">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169177">for</span>&nbsp;<span class="ident" id="7169181">i</span>&nbsp;<span class="op" id="7169183">:=</span>&nbsp;<span class="num" id="7169186">0</span><span class="op" id="7169187">;</span>&nbsp;<span class="ident" id="7169189">i</span>&nbsp;<span class="op" id="7169191">&lt;</span>&nbsp;<span class="ident" id="7169193">b</span><span class="op" id="7169194">.</span><span class="ident" id="7169195">N</span><span class="op" id="7169196">;</span>&nbsp;<span class="ident" id="7169198">i</span><span class="op" id="7169199">++</span>&nbsp;<span class="op" id="7169202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169206">jsStrEscaper</span><span class="op" id="7169218">(</span><span class="string" id="7169219">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7169266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169269">}</span><br>
<span class="lineno"></span><span class="op" id="7169271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7169274">func</span>&nbsp;<span class="ident" id="7169279">BenchmarkJSStrEscaper</span><span class="op" id="7169300">(</span><span class="ident" id="7169301">b</span>&nbsp;<span class="op" id="7169303">*</span><span class="ident" id="7169304">testing</span><span class="op" id="7169311">.</span><span class="ident" id="7169312">B</span><span class="op" id="7169313">)</span>&nbsp;<span class="op" id="7169315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169318">for</span>&nbsp;<span class="ident" id="7169322">i</span>&nbsp;<span class="op" id="7169324">:=</span>&nbsp;<span class="num" id="7169327">0</span><span class="op" id="7169328">;</span>&nbsp;<span class="ident" id="7169330">i</span>&nbsp;<span class="op" id="7169332">&lt;</span>&nbsp;<span class="ident" id="7169334">b</span><span class="op" id="7169335">.</span><span class="ident" id="7169336">N</span><span class="op" id="7169337">;</span>&nbsp;<span class="ident" id="7169339">i</span><span class="op" id="7169340">++</span>&nbsp;<span class="op" id="7169343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169347">jsStrEscaper</span><span class="op" id="7169359">(</span><span class="string" id="7169360">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7169481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169484">}</span><br>
<span class="lineno"></span><span class="op" id="7169486">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7169489">func</span>&nbsp;<span class="ident" id="7169494">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7169528">(</span><span class="ident" id="7169529">b</span>&nbsp;<span class="op" id="7169531">*</span><span class="ident" id="7169532">testing</span><span class="op" id="7169539">.</span><span class="ident" id="7169540">B</span><span class="op" id="7169541">)</span>&nbsp;<span class="op" id="7169543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169546">for</span>&nbsp;<span class="ident" id="7169550">i</span>&nbsp;<span class="op" id="7169552">:=</span>&nbsp;<span class="num" id="7169555">0</span><span class="op" id="7169556">;</span>&nbsp;<span class="ident" id="7169558">i</span>&nbsp;<span class="op" id="7169560">&lt;</span>&nbsp;<span class="ident" id="7169562">b</span><span class="op" id="7169563">.</span><span class="ident" id="7169564">N</span><span class="op" id="7169565">;</span>&nbsp;<span class="ident" id="7169567">i</span><span class="op" id="7169568">++</span>&nbsp;<span class="op" id="7169571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169575">jsRegexpEscaper</span><span class="op" id="7169590">(</span><span class="string" id="7169591">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7169637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169640">}</span><br>
<span class="lineno">395</span><span class="op" id="7169642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7169645">func</span>&nbsp;<span class="ident" id="7169650">BenchmarkJSRegexpEscaper</span><span class="op" id="7169674">(</span><span class="ident" id="7169675">b</span>&nbsp;<span class="op" id="7169677">*</span><span class="ident" id="7169678">testing</span><span class="op" id="7169685">.</span><span class="ident" id="7169686">B</span><span class="op" id="7169687">)</span>&nbsp;<span class="op" id="7169689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169692">for</span>&nbsp;<span class="ident" id="7169696">i</span>&nbsp;<span class="op" id="7169698">:=</span>&nbsp;<span class="num" id="7169701">0</span><span class="op" id="7169702">;</span>&nbsp;<span class="ident" id="7169704">i</span>&nbsp;<span class="op" id="7169706">&lt;</span>&nbsp;<span class="ident" id="7169708">b</span><span class="op" id="7169709">.</span><span class="ident" id="7169710">N</span><span class="op" id="7169711">;</span>&nbsp;<span class="ident" id="7169713">i</span><span class="op" id="7169714">++</span>&nbsp;<span class="op" id="7169717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169721">jsRegexpEscaper</span><span class="op" id="7169736">(</span><span class="string" id="7169737">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7169858">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169861">}</span><br>
<span class="lineno"></span><span class="op" id="7169863">}</span>
</div>
</body>
</html>
