<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html" class="current">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5420248">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5420304">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5420358">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5420409">package</span>&nbsp;<span class="ident" id="5420417">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5420424">import</span>&nbsp;<span class="op" id="5420431">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5420434">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5420441">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5420451">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5420454">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5420525">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5420593">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5420659">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5420727">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5420767">type</span>&nbsp;<span class="ident" id="5420772">typeUnit</span>&nbsp;<span class="keyword" id="5420781">struct</span>&nbsp;<span class="op" id="5420788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420791">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420797">toff</span>&nbsp;&nbsp;<span class="ident" id="5420803">Offset</span>&nbsp;<span class="comment" id="5420810">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420852">name</span>&nbsp;&nbsp;<span class="builtintype" id="5420858">string</span>&nbsp;<span class="comment" id="5420865">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420898">cache</span>&nbsp;<span class="ident" id="5420904">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5420911">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5420944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5420947">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5420980">func</span>&nbsp;<span class="op" id="5420985">(</span><span class="ident" id="5420986">d</span>&nbsp;<span class="op" id="5420988">*</span><span class="ident" id="5420989">Data</span><span class="op" id="5420993">)</span>&nbsp;<span class="ident" id="5420995">parseTypes</span><span class="op" id="5421005">(</span><span class="ident" id="5421006">name</span>&nbsp;<span class="builtintype" id="5421011">string</span><span class="op" id="5421017">,</span>&nbsp;<span class="ident" id="5421019">types</span>&nbsp;<span class="op" id="5421025">[</span><span class="op" id="5421026">]</span><span class="builtintype" id="5421027">byte</span><span class="op" id="5421031">)</span>&nbsp;<span class="builtintype" id="5421033">error</span>&nbsp;<span class="op" id="5421039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421042">b</span>&nbsp;<span class="op" id="5421044">:=</span>&nbsp;<span class="ident" id="5421047">makeBuf</span><span class="op" id="5421054">(</span><span class="ident" id="5421055">d</span><span class="op" id="5421056">,</span>&nbsp;<span class="ident" id="5421058">unknownFormat</span><span class="op" id="5421071">{</span><span class="op" id="5421072">}</span><span class="op" id="5421073">,</span>&nbsp;<span class="ident" id="5421075">name</span><span class="op" id="5421079">,</span>&nbsp;<span class="num" id="5421081">0</span><span class="op" id="5421082">,</span>&nbsp;<span class="ident" id="5421084">types</span><span class="op" id="5421089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421092">for</span>&nbsp;<span class="builtinfunc" id="5421096">len</span><span class="op" id="5421099">(</span><span class="ident" id="5421100">b</span><span class="op" id="5421101">.</span><span class="ident" id="5421102">data</span><span class="op" id="5421106">)</span>&nbsp;<span class="op" id="5421108">&gt;</span>&nbsp;<span class="num" id="5421110">0</span>&nbsp;<span class="op" id="5421112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421116">base</span>&nbsp;<span class="op" id="5421121">:=</span>&nbsp;<span class="ident" id="5421124">b</span><span class="op" id="5421125">.</span><span class="ident" id="5421126">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421132">dwarf64</span>&nbsp;<span class="op" id="5421140">:=</span>&nbsp;<span class="builtintype" id="5421143">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421151">n</span>&nbsp;<span class="op" id="5421153">:=</span>&nbsp;<span class="ident" id="5421156">b</span><span class="op" id="5421157">.</span><span class="builtintype" id="5421158">uint32</span><span class="op" id="5421164">(</span><span class="op" id="5421165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421169">if</span>&nbsp;<span class="ident" id="5421172">n</span>&nbsp;<span class="op" id="5421174">==</span>&nbsp;<span class="num" id="5421177">0xffffffff</span>&nbsp;<span class="op" id="5421188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421193">n64</span>&nbsp;<span class="op" id="5421197">:=</span>&nbsp;<span class="ident" id="5421200">b</span><span class="op" id="5421201">.</span><span class="ident" id="5421202">uint64</span><span class="op" id="5421208">(</span><span class="op" id="5421209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421214">if</span>&nbsp;<span class="ident" id="5421217">n64</span>&nbsp;<span class="op" id="5421221">!=</span>&nbsp;<span class="ident" id="5421224">uint64</span><span class="op" id="5421230">(</span><span class="builtintype" id="5421231">uint32</span><span class="op" id="5421237">(</span><span class="ident" id="5421238">n64</span><span class="op" id="5421241">)</span><span class="op" id="5421242">)</span>&nbsp;<span class="op" id="5421244">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421250">b</span><span class="op" id="5421251">.</span><span class="builtintype" id="5421252">error</span><span class="op" id="5421257">(</span><span class="string" id="5421258">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5421285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421291">return</span>&nbsp;<span class="ident" id="5421298">b</span><span class="op" id="5421299">.</span><span class="ident" id="5421300">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421312">n</span>&nbsp;<span class="op" id="5421314">=</span>&nbsp;<span class="builtintype" id="5421316">uint32</span><span class="op" id="5421322">(</span><span class="ident" id="5421323">n64</span><span class="op" id="5421326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421331">dwarf64</span>&nbsp;<span class="op" id="5421339">=</span>&nbsp;<span class="builtintype" id="5421341">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421352">hdroff</span>&nbsp;<span class="op" id="5421359">:=</span>&nbsp;<span class="ident" id="5421362">b</span><span class="op" id="5421363">.</span><span class="ident" id="5421364">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421370">vers</span>&nbsp;<span class="op" id="5421375">:=</span>&nbsp;<span class="ident" id="5421378">b</span><span class="op" id="5421379">.</span><span class="builtintype" id="5421380">uint16</span><span class="op" id="5421386">(</span><span class="op" id="5421387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421391">if</span>&nbsp;<span class="ident" id="5421394">vers</span>&nbsp;<span class="op" id="5421399">!=</span>&nbsp;<span class="num" id="5421402">4</span>&nbsp;<span class="op" id="5421404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421409">b</span><span class="op" id="5421410">.</span><span class="builtintype" id="5421411">error</span><span class="op" id="5421416">(</span><span class="string" id="5421417">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5421446">+</span>&nbsp;<span class="ident" id="5421448">strconv</span><span class="op" id="5421455">.</span><span class="ident" id="5421456">Itoa</span><span class="op" id="5421460">(</span><span class="builtintype" id="5421461">int</span><span class="op" id="5421464">(</span><span class="ident" id="5421465">vers</span><span class="op" id="5421469">)</span><span class="op" id="5421470">)</span><span class="op" id="5421471">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421476">return</span>&nbsp;<span class="ident" id="5421483">b</span><span class="op" id="5421484">.</span><span class="ident" id="5421485">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421495">var</span>&nbsp;<span class="ident" id="5421499">ao</span>&nbsp;<span class="builtintype" id="5421502">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421511">if</span>&nbsp;<span class="op" id="5421514">!</span><span class="ident" id="5421515">dwarf64</span>&nbsp;<span class="op" id="5421523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421528">ao</span>&nbsp;<span class="op" id="5421531">=</span>&nbsp;<span class="ident" id="5421533">b</span><span class="op" id="5421534">.</span><span class="builtintype" id="5421535">uint32</span><span class="op" id="5421541">(</span><span class="op" id="5421542">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421546">}</span>&nbsp;<span class="keyword" id="5421548">else</span>&nbsp;<span class="op" id="5421553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421558">ao64</span>&nbsp;<span class="op" id="5421563">:=</span>&nbsp;<span class="ident" id="5421566">b</span><span class="op" id="5421567">.</span><span class="ident" id="5421568">uint64</span><span class="op" id="5421574">(</span><span class="op" id="5421575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421580">if</span>&nbsp;<span class="ident" id="5421583">ao64</span>&nbsp;<span class="op" id="5421588">!=</span>&nbsp;<span class="ident" id="5421591">uint64</span><span class="op" id="5421597">(</span><span class="builtintype" id="5421598">uint32</span><span class="op" id="5421604">(</span><span class="ident" id="5421605">ao64</span><span class="op" id="5421609">)</span><span class="op" id="5421610">)</span>&nbsp;<span class="op" id="5421612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421618">b</span><span class="op" id="5421619">.</span><span class="builtintype" id="5421620">error</span><span class="op" id="5421625">(</span><span class="string" id="5421626">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5421660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421666">return</span>&nbsp;<span class="ident" id="5421673">b</span><span class="op" id="5421674">.</span><span class="ident" id="5421675">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421687">ao</span>&nbsp;<span class="op" id="5421690">=</span>&nbsp;<span class="builtintype" id="5421692">uint32</span><span class="op" id="5421698">(</span><span class="ident" id="5421699">ao64</span><span class="op" id="5421703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421711">atable</span><span class="op" id="5421717">,</span>&nbsp;<span class="ident" id="5421719">err</span>&nbsp;<span class="op" id="5421723">:=</span>&nbsp;<span class="ident" id="5421726">d</span><span class="op" id="5421727">.</span><span class="ident" id="5421728">parseAbbrev</span><span class="op" id="5421739">(</span><span class="ident" id="5421740">ao</span><span class="op" id="5421742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421746">if</span>&nbsp;<span class="ident" id="5421749">err</span>&nbsp;<span class="op" id="5421753">!=</span>&nbsp;<span class="ident" id="5421756">nil</span>&nbsp;<span class="op" id="5421760">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421765">return</span>&nbsp;<span class="ident" id="5421772">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421782">asize</span>&nbsp;<span class="op" id="5421788">:=</span>&nbsp;<span class="ident" id="5421791">b</span><span class="op" id="5421792">.</span><span class="builtintype" id="5421793">uint8</span><span class="op" id="5421798">(</span><span class="op" id="5421799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421803">sig</span>&nbsp;<span class="op" id="5421807">:=</span>&nbsp;<span class="ident" id="5421810">b</span><span class="op" id="5421811">.</span><span class="ident" id="5421812">uint64</span><span class="op" id="5421818">(</span><span class="op" id="5421819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421824">var</span>&nbsp;<span class="ident" id="5421828">toff</span>&nbsp;<span class="builtintype" id="5421833">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421842">if</span>&nbsp;<span class="op" id="5421845">!</span><span class="ident" id="5421846">dwarf64</span>&nbsp;<span class="op" id="5421854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421859">toff</span>&nbsp;<span class="op" id="5421864">=</span>&nbsp;<span class="ident" id="5421866">b</span><span class="op" id="5421867">.</span><span class="builtintype" id="5421868">uint32</span><span class="op" id="5421874">(</span><span class="op" id="5421875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421879">}</span>&nbsp;<span class="keyword" id="5421881">else</span>&nbsp;<span class="op" id="5421886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421891">to64</span>&nbsp;<span class="op" id="5421896">:=</span>&nbsp;<span class="ident" id="5421899">b</span><span class="op" id="5421900">.</span><span class="ident" id="5421901">uint64</span><span class="op" id="5421907">(</span><span class="op" id="5421908">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421913">if</span>&nbsp;<span class="ident" id="5421916">to64</span>&nbsp;<span class="op" id="5421921">!=</span>&nbsp;<span class="ident" id="5421924">uint64</span><span class="op" id="5421930">(</span><span class="builtintype" id="5421931">uint32</span><span class="op" id="5421937">(</span><span class="ident" id="5421938">to64</span><span class="op" id="5421942">)</span><span class="op" id="5421943">)</span>&nbsp;<span class="op" id="5421945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421951">b</span><span class="op" id="5421952">.</span><span class="builtintype" id="5421953">error</span><span class="op" id="5421958">(</span><span class="string" id="5421959">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5421991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421997">return</span>&nbsp;<span class="ident" id="5422004">b</span><span class="op" id="5422005">.</span><span class="ident" id="5422006">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422018">toff</span>&nbsp;<span class="op" id="5422023">=</span>&nbsp;<span class="builtintype" id="5422025">uint32</span><span class="op" id="5422031">(</span><span class="ident" id="5422032">to64</span><span class="op" id="5422036">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422045">boff</span>&nbsp;<span class="op" id="5422050">:=</span>&nbsp;<span class="ident" id="5422053">b</span><span class="op" id="5422054">.</span><span class="ident" id="5422055">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422061">d</span><span class="op" id="5422062">.</span><span class="ident" id="5422063">typeSigs</span><span class="op" id="5422071">[</span><span class="ident" id="5422072">sig</span><span class="op" id="5422075">]</span>&nbsp;<span class="op" id="5422077">=</span>&nbsp;<span class="op" id="5422079">&amp;</span><span class="ident" id="5422080">typeUnit</span><span class="op" id="5422088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422093">unit</span><span class="op" id="5422097">:</span>&nbsp;<span class="ident" id="5422099">unit</span><span class="op" id="5422103">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422109">base</span><span class="op" id="5422113">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5422117">base</span><span class="op" id="5422121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422127">off</span><span class="op" id="5422130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422135">boff</span><span class="op" id="5422139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422145">data</span><span class="op" id="5422149">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5422153">b</span><span class="op" id="5422154">.</span><span class="ident" id="5422155">bytes</span><span class="op" id="5422160">(</span><span class="builtintype" id="5422161">int</span><span class="op" id="5422164">(</span><span class="ident" id="5422165">Offset</span><span class="op" id="5422171">(</span><span class="ident" id="5422172">n</span><span class="op" id="5422173">)</span>&nbsp;<span class="op" id="5422175">-</span>&nbsp;<span class="op" id="5422177">(</span><span class="ident" id="5422178">b</span><span class="op" id="5422179">.</span><span class="ident" id="5422180">off</span>&nbsp;<span class="op" id="5422184">-</span>&nbsp;<span class="ident" id="5422186">hdroff</span><span class="op" id="5422192">)</span><span class="op" id="5422193">)</span><span class="op" id="5422194">)</span><span class="op" id="5422195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422201">atable</span><span class="op" id="5422207">:</span>&nbsp;<span class="ident" id="5422209">atable</span><span class="op" id="5422215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422221">asize</span><span class="op" id="5422226">:</span>&nbsp;&nbsp;<span class="builtintype" id="5422229">int</span><span class="op" id="5422232">(</span><span class="ident" id="5422233">asize</span><span class="op" id="5422238">)</span><span class="op" id="5422239">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422245">vers</span><span class="op" id="5422249">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5422253">int</span><span class="op" id="5422256">(</span><span class="ident" id="5422257">vers</span><span class="op" id="5422261">)</span><span class="op" id="5422262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422268">is64</span><span class="op" id="5422272">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5422276">dwarf64</span><span class="op" id="5422283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422288">}</span><span class="op" id="5422289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422294">toff</span><span class="op" id="5422298">:</span>&nbsp;<span class="ident" id="5422300">Offset</span><span class="op" id="5422306">(</span><span class="ident" id="5422307">toff</span><span class="op" id="5422311">)</span><span class="op" id="5422312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422317">name</span><span class="op" id="5422321">:</span>&nbsp;<span class="ident" id="5422323">name</span><span class="op" id="5422327">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422335">if</span>&nbsp;<span class="ident" id="5422338">b</span><span class="op" id="5422339">.</span><span class="ident" id="5422340">err</span>&nbsp;<span class="op" id="5422344">!=</span>&nbsp;<span class="ident" id="5422347">nil</span>&nbsp;<span class="op" id="5422351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422356">return</span>&nbsp;<span class="ident" id="5422363">b</span><span class="op" id="5422364">.</span><span class="ident" id="5422365">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422374">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422377">return</span>&nbsp;<span class="ident" id="5422384">nil</span><br>
<span class="lineno"></span><span class="op" id="5422388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5422391">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5422432">func</span>&nbsp;<span class="op" id="5422437">(</span><span class="ident" id="5422438">d</span>&nbsp;<span class="op" id="5422440">*</span><span class="ident" id="5422441">Data</span><span class="op" id="5422445">)</span>&nbsp;<span class="ident" id="5422447">sigToType</span><span class="op" id="5422456">(</span><span class="ident" id="5422457">sig</span>&nbsp;<span class="ident" id="5422461">uint64</span><span class="op" id="5422467">)</span>&nbsp;<span class="op" id="5422469">(</span><span class="ident" id="5422470">Type</span><span class="op" id="5422474">,</span>&nbsp;<span class="builtintype" id="5422476">error</span><span class="op" id="5422481">)</span>&nbsp;<span class="op" id="5422483">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422486">tu</span>&nbsp;<span class="op" id="5422489">:=</span>&nbsp;<span class="ident" id="5422492">d</span><span class="op" id="5422493">.</span><span class="ident" id="5422494">typeSigs</span><span class="op" id="5422502">[</span><span class="ident" id="5422503">sig</span><span class="op" id="5422506">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422509">if</span>&nbsp;<span class="ident" id="5422512">tu</span>&nbsp;<span class="op" id="5422515">==</span>&nbsp;<span class="ident" id="5422518">nil</span>&nbsp;<span class="op" id="5422522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422526">return</span>&nbsp;<span class="ident" id="5422533">nil</span><span class="op" id="5422536">,</span>&nbsp;<span class="ident" id="5422538">fmt</span><span class="op" id="5422541">.</span><span class="ident" id="5422542">Errorf</span><span class="op" id="5422548">(</span><span class="string" id="5422549">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5422581">,</span>&nbsp;<span class="ident" id="5422583">sig</span><span class="op" id="5422586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422592">if</span>&nbsp;<span class="ident" id="5422595">tu</span><span class="op" id="5422597">.</span><span class="ident" id="5422598">cache</span>&nbsp;<span class="op" id="5422604">!=</span>&nbsp;<span class="ident" id="5422607">nil</span>&nbsp;<span class="op" id="5422611">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422615">return</span>&nbsp;<span class="ident" id="5422622">tu</span><span class="op" id="5422624">.</span><span class="ident" id="5422625">cache</span><span class="op" id="5422630">,</span>&nbsp;<span class="ident" id="5422632">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422641">b</span>&nbsp;<span class="op" id="5422643">:=</span>&nbsp;<span class="ident" id="5422646">makeBuf</span><span class="op" id="5422653">(</span><span class="ident" id="5422654">d</span><span class="op" id="5422655">,</span>&nbsp;<span class="ident" id="5422657">tu</span><span class="op" id="5422659">,</span>&nbsp;<span class="ident" id="5422661">tu</span><span class="op" id="5422663">.</span><span class="ident" id="5422664">name</span><span class="op" id="5422668">,</span>&nbsp;<span class="ident" id="5422670">tu</span><span class="op" id="5422672">.</span><span class="ident" id="5422673">off</span><span class="op" id="5422676">,</span>&nbsp;<span class="ident" id="5422678">tu</span><span class="op" id="5422680">.</span><span class="ident" id="5422681">data</span><span class="op" id="5422685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422688">r</span>&nbsp;<span class="op" id="5422690">:=</span>&nbsp;<span class="op" id="5422693">&amp;</span><span class="ident" id="5422694">typeUnitReader</span><span class="op" id="5422708">{</span><span class="ident" id="5422709">d</span><span class="op" id="5422710">:</span>&nbsp;<span class="ident" id="5422712">d</span><span class="op" id="5422713">,</span>&nbsp;<span class="ident" id="5422715">tu</span><span class="op" id="5422717">:</span>&nbsp;<span class="ident" id="5422719">tu</span><span class="op" id="5422721">,</span>&nbsp;<span class="ident" id="5422723">b</span><span class="op" id="5422724">:</span>&nbsp;<span class="ident" id="5422726">b</span><span class="op" id="5422727">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422730">t</span><span class="op" id="5422731">,</span>&nbsp;<span class="ident" id="5422733">err</span>&nbsp;<span class="op" id="5422737">:=</span>&nbsp;<span class="ident" id="5422740">d</span><span class="op" id="5422741">.</span><span class="ident" id="5422742">readType</span><span class="op" id="5422750">(</span><span class="ident" id="5422751">tu</span><span class="op" id="5422753">.</span><span class="ident" id="5422754">name</span><span class="op" id="5422758">,</span>&nbsp;<span class="ident" id="5422760">r</span><span class="op" id="5422761">,</span>&nbsp;<span class="ident" id="5422763">Offset</span><span class="op" id="5422769">(</span><span class="ident" id="5422770">tu</span><span class="op" id="5422772">.</span><span class="ident" id="5422773">toff</span><span class="op" id="5422777">)</span><span class="op" id="5422778">,</span>&nbsp;<span class="builtinfunc" id="5422780">make</span><span class="op" id="5422784">(</span><span class="keyword" id="5422785">map</span><span class="op" id="5422788">[</span><span class="ident" id="5422789">Offset</span><span class="op" id="5422795">]</span><span class="ident" id="5422796">Type</span><span class="op" id="5422800">)</span><span class="op" id="5422801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422804">if</span>&nbsp;<span class="ident" id="5422807">err</span>&nbsp;<span class="op" id="5422811">!=</span>&nbsp;<span class="ident" id="5422814">nil</span>&nbsp;<span class="op" id="5422818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422822">return</span>&nbsp;<span class="ident" id="5422829">nil</span><span class="op" id="5422832">,</span>&nbsp;<span class="ident" id="5422834">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422843">tu</span><span class="op" id="5422845">.</span><span class="ident" id="5422846">cache</span>&nbsp;<span class="op" id="5422852">=</span>&nbsp;<span class="ident" id="5422854">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422857">return</span>&nbsp;<span class="ident" id="5422864">t</span><span class="op" id="5422865">,</span>&nbsp;<span class="ident" id="5422867">nil</span><br>
<span class="lineno"></span><span class="op" id="5422871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5422874">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5422927">type</span>&nbsp;<span class="ident" id="5422932">typeUnitReader</span>&nbsp;<span class="keyword" id="5422947">struct</span>&nbsp;<span class="op" id="5422954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422957">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5422961">*</span><span class="ident" id="5422962">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422968">tu</span>&nbsp;&nbsp;<span class="op" id="5422972">*</span><span class="ident" id="5422973">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422983">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5422987">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422992">err</span>&nbsp;<span class="builtintype" id="5422996">error</span><br>
<span class="lineno">125</span><span class="op" id="5423002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423005">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5423049">func</span>&nbsp;<span class="op" id="5423054">(</span><span class="ident" id="5423055">tur</span>&nbsp;<span class="op" id="5423059">*</span><span class="ident" id="5423060">typeUnitReader</span><span class="op" id="5423074">)</span>&nbsp;<span class="ident" id="5423076">Seek</span><span class="op" id="5423080">(</span><span class="ident" id="5423081">off</span>&nbsp;<span class="ident" id="5423085">Offset</span><span class="op" id="5423091">)</span>&nbsp;<span class="op" id="5423093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423096">tur</span><span class="op" id="5423099">.</span><span class="ident" id="5423100">err</span>&nbsp;<span class="op" id="5423104">=</span>&nbsp;<span class="ident" id="5423106">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423111">doff</span>&nbsp;<span class="op" id="5423116">:=</span>&nbsp;<span class="ident" id="5423119">off</span>&nbsp;<span class="op" id="5423123">-</span>&nbsp;<span class="ident" id="5423125">tur</span><span class="op" id="5423128">.</span><span class="ident" id="5423129">tu</span><span class="op" id="5423131">.</span><span class="ident" id="5423132">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423137">if</span>&nbsp;<span class="ident" id="5423140">doff</span>&nbsp;<span class="op" id="5423145">&lt;</span>&nbsp;<span class="num" id="5423147">0</span>&nbsp;<span class="op" id="5423149">||</span>&nbsp;<span class="ident" id="5423152">doff</span>&nbsp;<span class="op" id="5423157">&gt;=</span>&nbsp;<span class="ident" id="5423160">Offset</span><span class="op" id="5423166">(</span><span class="builtinfunc" id="5423167">len</span><span class="op" id="5423170">(</span><span class="ident" id="5423171">tur</span><span class="op" id="5423174">.</span><span class="ident" id="5423175">tu</span><span class="op" id="5423177">.</span><span class="ident" id="5423178">data</span><span class="op" id="5423182">)</span><span class="op" id="5423183">)</span>&nbsp;<span class="op" id="5423185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423189">tur</span><span class="op" id="5423192">.</span><span class="ident" id="5423193">err</span>&nbsp;<span class="op" id="5423197">=</span>&nbsp;<span class="ident" id="5423199">fmt</span><span class="op" id="5423202">.</span><span class="ident" id="5423203">Errorf</span><span class="op" id="5423209">(</span><span class="string" id="5423210">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5423246">,</span>&nbsp;<span class="ident" id="5423248">tur</span><span class="op" id="5423251">.</span><span class="ident" id="5423252">tu</span><span class="op" id="5423254">.</span><span class="ident" id="5423255">name</span><span class="op" id="5423259">,</span>&nbsp;<span class="ident" id="5423261">doff</span><span class="op" id="5423265">,</span>&nbsp;<span class="builtinfunc" id="5423267">len</span><span class="op" id="5423270">(</span><span class="ident" id="5423271">tur</span><span class="op" id="5423274">.</span><span class="ident" id="5423275">tu</span><span class="op" id="5423277">.</span><span class="ident" id="5423278">data</span><span class="op" id="5423282">)</span><span class="op" id="5423283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423287">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423295">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423298">tur</span><span class="op" id="5423301">.</span><span class="ident" id="5423302">b</span>&nbsp;<span class="op" id="5423304">=</span>&nbsp;<span class="ident" id="5423306">makeBuf</span><span class="op" id="5423313">(</span><span class="ident" id="5423314">tur</span><span class="op" id="5423317">.</span><span class="ident" id="5423318">d</span><span class="op" id="5423319">,</span>&nbsp;<span class="ident" id="5423321">tur</span><span class="op" id="5423324">.</span><span class="ident" id="5423325">tu</span><span class="op" id="5423327">,</span>&nbsp;<span class="ident" id="5423329">tur</span><span class="op" id="5423332">.</span><span class="ident" id="5423333">tu</span><span class="op" id="5423335">.</span><span class="ident" id="5423336">name</span><span class="op" id="5423340">,</span>&nbsp;<span class="ident" id="5423342">off</span><span class="op" id="5423345">,</span>&nbsp;<span class="ident" id="5423347">tur</span><span class="op" id="5423350">.</span><span class="ident" id="5423351">tu</span><span class="op" id="5423353">.</span><span class="ident" id="5423354">data</span><span class="op" id="5423358">[</span><span class="ident" id="5423359">doff</span><span class="op" id="5423363">:</span><span class="op" id="5423364">]</span><span class="op" id="5423365">)</span><br>
<span class="lineno"></span><span class="op" id="5423367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423370">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5423419">func</span>&nbsp;<span class="op" id="5423424">(</span><span class="ident" id="5423425">tur</span>&nbsp;<span class="op" id="5423429">*</span><span class="ident" id="5423430">typeUnitReader</span><span class="op" id="5423444">)</span>&nbsp;<span class="ident" id="5423446">Next</span><span class="op" id="5423450">(</span><span class="op" id="5423451">)</span>&nbsp;<span class="op" id="5423453">(</span><span class="op" id="5423454">*</span><span class="ident" id="5423455">Entry</span><span class="op" id="5423460">,</span>&nbsp;<span class="builtintype" id="5423462">error</span><span class="op" id="5423467">)</span>&nbsp;<span class="op" id="5423469">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423472">if</span>&nbsp;<span class="ident" id="5423475">tur</span><span class="op" id="5423478">.</span><span class="ident" id="5423479">err</span>&nbsp;<span class="op" id="5423483">!=</span>&nbsp;<span class="ident" id="5423486">nil</span>&nbsp;<span class="op" id="5423490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423494">return</span>&nbsp;<span class="ident" id="5423501">nil</span><span class="op" id="5423504">,</span>&nbsp;<span class="ident" id="5423506">tur</span><span class="op" id="5423509">.</span><span class="ident" id="5423510">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423518">if</span>&nbsp;<span class="builtinfunc" id="5423521">len</span><span class="op" id="5423524">(</span><span class="ident" id="5423525">tur</span><span class="op" id="5423528">.</span><span class="ident" id="5423529">tu</span><span class="op" id="5423531">.</span><span class="ident" id="5423532">data</span><span class="op" id="5423536">)</span>&nbsp;<span class="op" id="5423538">==</span>&nbsp;<span class="num" id="5423541">0</span>&nbsp;<span class="op" id="5423543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423547">return</span>&nbsp;<span class="ident" id="5423554">nil</span><span class="op" id="5423557">,</span>&nbsp;<span class="ident" id="5423559">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423567">e</span>&nbsp;<span class="op" id="5423569">:=</span>&nbsp;<span class="ident" id="5423572">tur</span><span class="op" id="5423575">.</span><span class="ident" id="5423576">b</span><span class="op" id="5423577">.</span><span class="ident" id="5423578">entry</span><span class="op" id="5423583">(</span><span class="ident" id="5423584">tur</span><span class="op" id="5423587">.</span><span class="ident" id="5423588">tu</span><span class="op" id="5423590">.</span><span class="ident" id="5423591">atable</span><span class="op" id="5423597">,</span>&nbsp;<span class="ident" id="5423599">tur</span><span class="op" id="5423602">.</span><span class="ident" id="5423603">tu</span><span class="op" id="5423605">.</span><span class="ident" id="5423606">base</span><span class="op" id="5423610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423613">if</span>&nbsp;<span class="ident" id="5423616">tur</span><span class="op" id="5423619">.</span><span class="ident" id="5423620">b</span><span class="op" id="5423621">.</span><span class="ident" id="5423622">err</span>&nbsp;<span class="op" id="5423626">!=</span>&nbsp;<span class="ident" id="5423629">nil</span>&nbsp;<span class="op" id="5423633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423637">tur</span><span class="op" id="5423640">.</span><span class="ident" id="5423641">err</span>&nbsp;<span class="op" id="5423645">=</span>&nbsp;<span class="ident" id="5423647">tur</span><span class="op" id="5423650">.</span><span class="ident" id="5423651">b</span><span class="op" id="5423652">.</span><span class="ident" id="5423653">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423659">return</span>&nbsp;<span class="ident" id="5423666">nil</span><span class="op" id="5423669">,</span>&nbsp;<span class="ident" id="5423671">tur</span><span class="op" id="5423674">.</span><span class="ident" id="5423675">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423683">return</span>&nbsp;<span class="ident" id="5423690">e</span><span class="op" id="5423691">,</span>&nbsp;<span class="ident" id="5423693">nil</span><br>
<span class="lineno"></span><span class="op" id="5423697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423700">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5423749">func</span>&nbsp;<span class="op" id="5423754">(</span><span class="ident" id="5423755">tur</span>&nbsp;<span class="op" id="5423759">*</span><span class="ident" id="5423760">typeUnitReader</span><span class="op" id="5423774">)</span>&nbsp;<span class="ident" id="5423776">clone</span><span class="op" id="5423781">(</span><span class="op" id="5423782">)</span>&nbsp;<span class="ident" id="5423784">typeReader</span>&nbsp;<span class="op" id="5423795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423798">return</span>&nbsp;<span class="op" id="5423805">&amp;</span><span class="ident" id="5423806">typeUnitReader</span><span class="op" id="5423820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423824">d</span><span class="op" id="5423825">:</span>&nbsp;&nbsp;<span class="ident" id="5423828">tur</span><span class="op" id="5423831">.</span><span class="ident" id="5423832">d</span><span class="op" id="5423833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423837">tu</span><span class="op" id="5423839">:</span>&nbsp;<span class="ident" id="5423841">tur</span><span class="op" id="5423844">.</span><span class="ident" id="5423845">tu</span><span class="op" id="5423847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423851">b</span><span class="op" id="5423852">:</span>&nbsp;&nbsp;<span class="ident" id="5423855">makeBuf</span><span class="op" id="5423862">(</span><span class="ident" id="5423863">tur</span><span class="op" id="5423866">.</span><span class="ident" id="5423867">d</span><span class="op" id="5423868">,</span>&nbsp;<span class="ident" id="5423870">tur</span><span class="op" id="5423873">.</span><span class="ident" id="5423874">tu</span><span class="op" id="5423876">,</span>&nbsp;<span class="ident" id="5423878">tur</span><span class="op" id="5423881">.</span><span class="ident" id="5423882">tu</span><span class="op" id="5423884">.</span><span class="ident" id="5423885">name</span><span class="op" id="5423889">,</span>&nbsp;<span class="ident" id="5423891">tur</span><span class="op" id="5423894">.</span><span class="ident" id="5423895">tu</span><span class="op" id="5423897">.</span><span class="ident" id="5423898">off</span><span class="op" id="5423901">,</span>&nbsp;<span class="ident" id="5423903">tur</span><span class="op" id="5423906">.</span><span class="ident" id="5423907">tu</span><span class="op" id="5423909">.</span><span class="ident" id="5423910">data</span><span class="op" id="5423914">)</span><span class="op" id="5423915">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423918">}</span><br>
<span class="lineno"></span><span class="op" id="5423920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423923">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5423961">func</span>&nbsp;<span class="op" id="5423966">(</span><span class="ident" id="5423967">tur</span>&nbsp;<span class="op" id="5423971">*</span><span class="ident" id="5423972">typeUnitReader</span><span class="op" id="5423986">)</span>&nbsp;<span class="ident" id="5423988">offset</span><span class="op" id="5423994">(</span><span class="op" id="5423995">)</span>&nbsp;<span class="ident" id="5423997">Offset</span>&nbsp;<span class="op" id="5424004">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424007">return</span>&nbsp;<span class="ident" id="5424014">tur</span><span class="op" id="5424017">.</span><span class="ident" id="5424018">b</span><span class="op" id="5424019">.</span><span class="ident" id="5424020">off</span><br>
<span class="lineno"></span><span class="op" id="5424024">}</span>
</div>
</body>
</html>
