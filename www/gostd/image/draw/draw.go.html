<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html" class="current">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5766365">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5766421">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5766475">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5766526">//&nbsp;Package&nbsp;draw&nbsp;provides&nbsp;image&nbsp;composition&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5766580">//</span><br>
<span class="lineno"></span><span class="comment" id="5766583">//&nbsp;See&nbsp;&#34;The&nbsp;Go&nbsp;image/draw&nbsp;package&#34;&nbsp;for&nbsp;an&nbsp;introduction&nbsp;to&nbsp;this&nbsp;package:</span><br>
<span class="lineno"></span><span class="comment" id="5766655">//&nbsp;http://golang.org/doc/articles/image_draw.html</span><br>
<span class="lineno"></span><span class="keyword" id="5766705">package</span>&nbsp;<span class="ident" id="5766713">draw</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5766719">import</span>&nbsp;<span class="op" id="5766726">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766729">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5766738">&#34;image/color&#34;</span><br>
<span class="lineno"></span><span class="op" id="5766752">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5766755">//&nbsp;m&nbsp;is&nbsp;the&nbsp;maximum&nbsp;color&nbsp;value&nbsp;returned&nbsp;by&nbsp;image.Color.RGBA.</span><br>
<span class="lineno"></span><span class="keyword" id="5766817">const</span>&nbsp;<span class="ident" id="5766823">m</span>&nbsp;<span class="op" id="5766825">=</span>&nbsp;<span class="num" id="5766827">1</span><span class="op" id="5766828">&lt;&lt;</span><span class="num" id="5766830">16</span>&nbsp;<span class="op" id="5766833">-</span>&nbsp;<span class="num" id="5766835">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5766838">//&nbsp;Image&nbsp;is&nbsp;an&nbsp;image.Image&nbsp;with&nbsp;a&nbsp;Set&nbsp;method&nbsp;to&nbsp;change&nbsp;a&nbsp;single&nbsp;pixel.</span><br>
<span class="lineno">20</span><span class="keyword" id="5766909">type</span>&nbsp;<span class="ident" id="5766914">Image</span>&nbsp;<span class="keyword" id="5766920">interface</span>&nbsp;<span class="op" id="5766930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766933"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5766938">.</span><span class="ident" id="5766939"><a href="/gostd/image/image.go.html#5154907">Image</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5766946">Set</span><span class="op" id="5766949">(</span><span class="ident" id="5766950">x</span><span class="op" id="5766951">,</span>&nbsp;<span class="ident" id="5766953">y</span>&nbsp;<span class="builtintype" id="5766955">int</span><span class="op" id="5766958">,</span>&nbsp;<span class="ident" id="5766960">c</span>&nbsp;<span class="ident" id="5766962"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5766967">.</span><span class="ident" id="5766968"><a href="/gostd/image/color/color.go.html#5185193">Color</a></span><span class="op" id="5766973">)</span><br>
<span class="lineno"></span><span class="op" id="5766975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5766978">//&nbsp;Quantizer&nbsp;produces&nbsp;a&nbsp;palette&nbsp;for&nbsp;an&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5767024">type</span>&nbsp;<span class="ident" id="5767029">Quantizer</span>&nbsp;<span class="keyword" id="5767039">interface</span>&nbsp;<span class="op" id="5767049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767052">//&nbsp;Quantize&nbsp;appends&nbsp;up&nbsp;to&nbsp;cap(p)&nbsp;-&nbsp;len(p)&nbsp;colors&nbsp;to&nbsp;p&nbsp;and&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767123">//&nbsp;updated&nbsp;palette&nbsp;suitable&nbsp;for&nbsp;converting&nbsp;m&nbsp;to&nbsp;a&nbsp;paletted&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767190">Quantize</span><span class="op" id="5767198">(</span><span class="ident" id="5767199">p</span>&nbsp;<span class="ident" id="5767201"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5767206">.</span><span class="ident" id="5767207"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="5767214">,</span>&nbsp;<span class="ident" id="5767216">m</span>&nbsp;<span class="ident" id="5767218"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767223">.</span><span class="ident" id="5767224"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5767229">)</span>&nbsp;<span class="ident" id="5767231"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5767236">.</span><span class="ident" id="5767237"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><br>
<span class="lineno">30</span><span class="op" id="5767245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767248">//&nbsp;Op&nbsp;is&nbsp;a&nbsp;Porter-Duff&nbsp;compositing&nbsp;operator.</span><br>
<span class="lineno"></span><span class="keyword" id="5767293">type</span>&nbsp;<span class="ident" id="5767298">Op</span>&nbsp;<span class="builtintype" id="5767301">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5767306">const</span>&nbsp;<span class="op" id="5767312">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767315">//&nbsp;Over&nbsp;specifies&nbsp;``(src&nbsp;in&nbsp;mask)&nbsp;over&nbsp;dst&#39;&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767362">Over</span>&nbsp;<span class="ident" id="5767367"><a href="/gostd/image/draw/draw.go.html#5767298">Op</a></span>&nbsp;<span class="op" id="5767370">=</span>&nbsp;<span class="ident" id="5767372">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767378">//&nbsp;Src&nbsp;specifies&nbsp;``src&nbsp;in&nbsp;mask&#39;&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767413">Src</span><br>
<span class="lineno">40</span><span class="op" id="5767417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767420">//&nbsp;Draw&nbsp;implements&nbsp;the&nbsp;Drawer&nbsp;interface&nbsp;by&nbsp;calling&nbsp;the&nbsp;Draw&nbsp;function&nbsp;with&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="5767499">//&nbsp;Op.</span><br>
<span class="lineno"></span><span class="keyword" id="5767506">func</span>&nbsp;<span class="op" id="5767511">(</span><span class="ident" id="5767512">op</span>&nbsp;<span class="ident" id="5767515"><a href="/gostd/image/draw/draw.go.html#5767298">Op</a></span><span class="op" id="5767517">)</span>&nbsp;<span class="ident" id="5767519">Draw</span><span class="op" id="5767523">(</span><span class="ident" id="5767524">dst</span>&nbsp;<span class="ident" id="5767528"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5767533">,</span>&nbsp;<span class="ident" id="5767535">r</span>&nbsp;<span class="ident" id="5767537"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767542">.</span><span class="ident" id="5767543"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5767552">,</span>&nbsp;<span class="ident" id="5767554">src</span>&nbsp;<span class="ident" id="5767558"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767563">.</span><span class="ident" id="5767564"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5767569">,</span>&nbsp;<span class="ident" id="5767571">sp</span>&nbsp;<span class="ident" id="5767574"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767579">.</span><span class="ident" id="5767580"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5767585">)</span>&nbsp;<span class="op" id="5767587">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767590"><a href="/gostd/image/draw/draw.go.html#5769479">DrawMask</a></span><span class="op" id="5767598">(</span><span class="ident" id="5767599"><a href="/gostd/image/draw/draw.go.html#5767524">dst</a></span><span class="op" id="5767602">,</span>&nbsp;<span class="ident" id="5767604"><a href="/gostd/image/draw/draw.go.html#5767535">r</a></span><span class="op" id="5767605">,</span>&nbsp;<span class="ident" id="5767607"><a href="/gostd/image/draw/draw.go.html#5767554">src</a></span><span class="op" id="5767610">,</span>&nbsp;<span class="ident" id="5767612"><a href="/gostd/image/draw/draw.go.html#5767571">sp</a></span><span class="op" id="5767614">,</span>&nbsp;<span class="builtintype" id="5767616">nil</span><span class="op" id="5767619">,</span>&nbsp;<span class="ident" id="5767621"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767626">.</span><span class="ident" id="5767627"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5767632">{</span><span class="op" id="5767633">}</span><span class="op" id="5767634">,</span>&nbsp;<span class="ident" id="5767636"><a href="/gostd/image/draw/draw.go.html#5767512">op</a></span><span class="op" id="5767638">)</span><br>
<span class="lineno"></span><span class="op" id="5767640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5767643">//&nbsp;Drawer&nbsp;contains&nbsp;the&nbsp;Draw&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="5767679">type</span>&nbsp;<span class="ident" id="5767684">Drawer</span>&nbsp;<span class="keyword" id="5767691">interface</span>&nbsp;<span class="op" id="5767701">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767704">//&nbsp;Draw&nbsp;aligns&nbsp;r.Min&nbsp;in&nbsp;dst&nbsp;with&nbsp;sp&nbsp;in&nbsp;src&nbsp;and&nbsp;then&nbsp;replaces&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5767770">//&nbsp;rectangle&nbsp;r&nbsp;in&nbsp;dst&nbsp;with&nbsp;the&nbsp;result&nbsp;of&nbsp;drawing&nbsp;src&nbsp;on&nbsp;dst.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5767832">Draw</span><span class="op" id="5767836">(</span><span class="ident" id="5767837">dst</span>&nbsp;<span class="ident" id="5767841"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5767846">,</span>&nbsp;<span class="ident" id="5767848">r</span>&nbsp;<span class="ident" id="5767850"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767855">.</span><span class="ident" id="5767856"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5767865">,</span>&nbsp;<span class="ident" id="5767867">src</span>&nbsp;<span class="ident" id="5767871"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767876">.</span><span class="ident" id="5767877"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5767882">,</span>&nbsp;<span class="ident" id="5767884">sp</span>&nbsp;<span class="ident" id="5767887"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5767892">.</span><span class="ident" id="5767893"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5767898">)</span><br>
<span class="lineno"></span><span class="op" id="5767900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="5767903">//&nbsp;FloydSteinberg&nbsp;is&nbsp;a&nbsp;Drawer&nbsp;that&nbsp;is&nbsp;the&nbsp;Src&nbsp;Op&nbsp;with&nbsp;Floyd-Steinberg&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5767979">//&nbsp;diffusion.</span><br>
<span class="lineno"></span><span class="keyword" id="5767993">var</span>&nbsp;<span class="ident" id="5767997">FloydSteinberg</span>&nbsp;<span class="ident" id="5768012"><a href="/gostd/image/draw/draw.go.html#5767684">Drawer</a></span>&nbsp;<span class="op" id="5768019">=</span>&nbsp;<span class="ident" id="5768021"><a href="/gostd/image/draw/draw.go.html#5768044">floydSteinberg</a></span><span class="op" id="5768035">{</span><span class="op" id="5768036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5768039">type</span>&nbsp;<span class="ident" id="5768044">floydSteinberg</span>&nbsp;<span class="keyword" id="5768059">struct</span><span class="op" id="5768065">{</span><span class="op" id="5768066">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="5768069">func</span>&nbsp;<span class="op" id="5768074">(</span><span class="ident" id="5768075"><a href="/gostd/image/draw/draw.go.html#5768044">floydSteinberg</a></span><span class="op" id="5768089">)</span>&nbsp;<span class="ident" id="5768091">Draw</span><span class="op" id="5768095">(</span><span class="ident" id="5768096">dst</span>&nbsp;<span class="ident" id="5768100"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5768105">,</span>&nbsp;<span class="ident" id="5768107">r</span>&nbsp;<span class="ident" id="5768109"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768114">.</span><span class="ident" id="5768115"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5768124">,</span>&nbsp;<span class="ident" id="5768126">src</span>&nbsp;<span class="ident" id="5768130"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768135">.</span><span class="ident" id="5768136"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5768141">,</span>&nbsp;<span class="ident" id="5768143">sp</span>&nbsp;<span class="ident" id="5768146"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768151">.</span><span class="ident" id="5768152"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5768157">)</span>&nbsp;<span class="op" id="5768159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768162"><a href="/gostd/image/draw/draw.go.html#5768461">clip</a></span><span class="op" id="5768166">(</span><span class="ident" id="5768167"><a href="/gostd/image/draw/draw.go.html#5768096">dst</a></span><span class="op" id="5768170">,</span>&nbsp;<span class="op" id="5768172">&amp;</span><span class="ident" id="5768173"><a href="/gostd/image/draw/draw.go.html#5768107">r</a></span><span class="op" id="5768174">,</span>&nbsp;<span class="ident" id="5768176"><a href="/gostd/image/draw/draw.go.html#5768126">src</a></span><span class="op" id="5768179">,</span>&nbsp;<span class="op" id="5768181">&amp;</span><span class="ident" id="5768182"><a href="/gostd/image/draw/draw.go.html#5768143">sp</a></span><span class="op" id="5768184">,</span>&nbsp;<span class="builtintype" id="5768186">nil</span><span class="op" id="5768189">,</span>&nbsp;<span class="builtintype" id="5768191">nil</span><span class="op" id="5768194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768197">if</span>&nbsp;<span class="ident" id="5768200"><a href="/gostd/image/draw/draw.go.html#5768107">r</a></span><span class="op" id="5768201">.</span><span class="ident" id="5768202"><a href="/gostd/image/geom.go.html#5152221">Empty</a></span><span class="op" id="5768207">(</span><span class="op" id="5768208">)</span>&nbsp;<span class="op" id="5768210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768214">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768225"><a href="/gostd/image/draw/draw.go.html#5783081">drawPaletted</a></span><span class="op" id="5768237">(</span><span class="ident" id="5768238"><a href="/gostd/image/draw/draw.go.html#5768096">dst</a></span><span class="op" id="5768241">,</span>&nbsp;<span class="ident" id="5768243"><a href="/gostd/image/draw/draw.go.html#5768107">r</a></span><span class="op" id="5768244">,</span>&nbsp;<span class="ident" id="5768246"><a href="/gostd/image/draw/draw.go.html#5768126">src</a></span><span class="op" id="5768249">,</span>&nbsp;<span class="ident" id="5768251"><a href="/gostd/image/draw/draw.go.html#5768143">sp</a></span><span class="op" id="5768253">,</span>&nbsp;<span class="builtintype" id="5768255">true</span><span class="op" id="5768259">)</span><br>
<span class="lineno"></span><span class="op" id="5768261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5768264">//&nbsp;clip&nbsp;clips&nbsp;r&nbsp;against&nbsp;each&nbsp;image&#39;s&nbsp;bounds&nbsp;(after&nbsp;translating&nbsp;into&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="5768336">//&nbsp;destination&nbsp;image&#39;s&nbsp;co-ordinate&nbsp;space)&nbsp;and&nbsp;shifts&nbsp;the&nbsp;points&nbsp;sp&nbsp;and&nbsp;mp&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5768413">//&nbsp;the&nbsp;same&nbsp;amount&nbsp;as&nbsp;the&nbsp;change&nbsp;in&nbsp;r.Min.</span><br>
<span class="lineno"></span><span class="keyword" id="5768456">func</span>&nbsp;<span class="ident" id="5768461">clip</span><span class="op" id="5768465">(</span><span class="ident" id="5768466">dst</span>&nbsp;<span class="ident" id="5768470"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5768475">,</span>&nbsp;<span class="ident" id="5768477">r</span>&nbsp;<span class="op" id="5768479">*</span><span class="ident" id="5768480"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768485">.</span><span class="ident" id="5768486"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5768495">,</span>&nbsp;<span class="ident" id="5768497">src</span>&nbsp;<span class="ident" id="5768501"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768506">.</span><span class="ident" id="5768507"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5768512">,</span>&nbsp;<span class="ident" id="5768514">sp</span>&nbsp;<span class="op" id="5768517">*</span><span class="ident" id="5768518"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768523">.</span><span class="ident" id="5768524"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5768529">,</span>&nbsp;<span class="ident" id="5768531">mask</span>&nbsp;<span class="ident" id="5768536"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768541">.</span><span class="ident" id="5768542"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5768547">,</span>&nbsp;<span class="ident" id="5768549">mp</span>&nbsp;<span class="op" id="5768552">*</span><span class="ident" id="5768553"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768558">.</span><span class="ident" id="5768559"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5768564">)</span>&nbsp;<span class="op" id="5768566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768569">orig</span>&nbsp;<span class="op" id="5768574">:=</span>&nbsp;<span class="ident" id="5768577"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768578">.</span><span class="ident" id="5768579"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768584">*</span><span class="ident" id="5768585"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span>&nbsp;<span class="op" id="5768587">=</span>&nbsp;<span class="ident" id="5768589"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768590">.</span><span class="ident" id="5768591"><a href="/gostd/image/geom.go.html#5151528">Intersect</a></span><span class="op" id="5768600">(</span><span class="ident" id="5768601"><a href="/gostd/image/draw/draw.go.html#5768466">dst</a></span><span class="op" id="5768604">.</span><span class="ident" id="5768605"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="5768611">(</span><span class="op" id="5768612">)</span><span class="op" id="5768613">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768616">*</span><span class="ident" id="5768617"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span>&nbsp;<span class="op" id="5768619">=</span>&nbsp;<span class="ident" id="5768621"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768622">.</span><span class="ident" id="5768623"><a href="/gostd/image/geom.go.html#5151528">Intersect</a></span><span class="op" id="5768632">(</span><span class="ident" id="5768633"><a href="/gostd/image/draw/draw.go.html#5768497">src</a></span><span class="op" id="5768636">.</span><span class="ident" id="5768637"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="5768643">(</span><span class="op" id="5768644">)</span><span class="op" id="5768645">.</span><span class="ident" id="5768646"><a href="/gostd/image/geom.go.html#5150558">Add</a></span><span class="op" id="5768649">(</span><span class="ident" id="5768650"><a href="/gostd/image/draw/draw.go.html#5768569">orig</a></span><span class="op" id="5768654">.</span><span class="ident" id="5768655"><a href="/gostd/image/geom.go.html#5148776">Sub</a></span><span class="op" id="5768658">(</span><span class="op" id="5768659">*</span><span class="ident" id="5768660"><a href="/gostd/image/draw/draw.go.html#5768514">sp</a></span><span class="op" id="5768662">)</span><span class="op" id="5768663">)</span><span class="op" id="5768664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768667">if</span>&nbsp;<span class="ident" id="5768670"><a href="/gostd/image/draw/draw.go.html#5768531">mask</a></span>&nbsp;<span class="op" id="5768675">!=</span>&nbsp;<span class="builtintype" id="5768678">nil</span>&nbsp;<span class="op" id="5768682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768686">*</span><span class="ident" id="5768687"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span>&nbsp;<span class="op" id="5768689">=</span>&nbsp;<span class="ident" id="5768691"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768692">.</span><span class="ident" id="5768693"><a href="/gostd/image/geom.go.html#5151528">Intersect</a></span><span class="op" id="5768702">(</span><span class="ident" id="5768703"><a href="/gostd/image/draw/draw.go.html#5768531">mask</a></span><span class="op" id="5768707">.</span><span class="ident" id="5768708"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="5768714">(</span><span class="op" id="5768715">)</span><span class="op" id="5768716">.</span><span class="ident" id="5768717"><a href="/gostd/image/geom.go.html#5150558">Add</a></span><span class="op" id="5768720">(</span><span class="ident" id="5768721"><a href="/gostd/image/draw/draw.go.html#5768569">orig</a></span><span class="op" id="5768725">.</span><span class="ident" id="5768726"><a href="/gostd/image/geom.go.html#5148776">Sub</a></span><span class="op" id="5768729">(</span><span class="op" id="5768730">*</span><span class="ident" id="5768731"><a href="/gostd/image/draw/draw.go.html#5768549">mp</a></span><span class="op" id="5768733">)</span><span class="op" id="5768734">)</span><span class="op" id="5768735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768741">dx</span>&nbsp;<span class="op" id="5768744">:=</span>&nbsp;<span class="ident" id="5768747"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768748">.</span><span class="ident" id="5768749"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5768752">.</span><span class="ident" id="5768753"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5768755">-</span>&nbsp;<span class="ident" id="5768757"><a href="/gostd/image/draw/draw.go.html#5768569">orig</a></span><span class="op" id="5768761">.</span><span class="ident" id="5768762"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5768765">dy</span>&nbsp;<span class="op" id="5768768">:=</span>&nbsp;<span class="ident" id="5768771"><a href="/gostd/image/draw/draw.go.html#5768477">r</a></span><span class="op" id="5768772">.</span><span class="ident" id="5768773"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5768776">.</span><span class="ident" id="5768777"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5768779">-</span>&nbsp;<span class="ident" id="5768781"><a href="/gostd/image/draw/draw.go.html#5768569">orig</a></span><span class="op" id="5768785">.</span><span class="ident" id="5768786"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768789">if</span>&nbsp;<span class="ident" id="5768792"><a href="/gostd/image/draw/draw.go.html#5768741">dx</a></span>&nbsp;<span class="op" id="5768795">==</span>&nbsp;<span class="num" id="5768798">0</span>&nbsp;<span class="op" id="5768800">&amp;&amp;</span>&nbsp;<span class="ident" id="5768803"><a href="/gostd/image/draw/draw.go.html#5768765">dy</a></span>&nbsp;<span class="op" id="5768806">==</span>&nbsp;<span class="num" id="5768809">0</span>&nbsp;<span class="op" id="5768811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768815">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768826">(</span><span class="op" id="5768827">*</span><span class="ident" id="5768828"><a href="/gostd/image/draw/draw.go.html#5768514">sp</a></span><span class="op" id="5768830">)</span><span class="op" id="5768831">.</span><span class="ident" id="5768832"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5768834">+=</span>&nbsp;<span class="ident" id="5768837"><a href="/gostd/image/draw/draw.go.html#5768741">dx</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768841">(</span><span class="op" id="5768842">*</span><span class="ident" id="5768843"><a href="/gostd/image/draw/draw.go.html#5768514">sp</a></span><span class="op" id="5768845">)</span><span class="op" id="5768846">.</span><span class="ident" id="5768847"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5768849">+=</span>&nbsp;<span class="ident" id="5768852"><a href="/gostd/image/draw/draw.go.html#5768765">dy</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768856">(</span><span class="op" id="5768857">*</span><span class="ident" id="5768858"><a href="/gostd/image/draw/draw.go.html#5768549">mp</a></span><span class="op" id="5768860">)</span><span class="op" id="5768861">.</span><span class="ident" id="5768862"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5768864">+=</span>&nbsp;<span class="ident" id="5768867"><a href="/gostd/image/draw/draw.go.html#5768741">dx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5768871">(</span><span class="op" id="5768872">*</span><span class="ident" id="5768873"><a href="/gostd/image/draw/draw.go.html#5768549">mp</a></span><span class="op" id="5768875">)</span><span class="op" id="5768876">.</span><span class="ident" id="5768877"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5768879">+=</span>&nbsp;<span class="ident" id="5768882"><a href="/gostd/image/draw/draw.go.html#5768765">dy</a></span><br>
<span class="lineno"></span><span class="op" id="5768885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="5768888">func</span>&nbsp;<span class="ident" id="5768893">processBackward</span><span class="op" id="5768908">(</span><span class="ident" id="5768909">dst</span>&nbsp;<span class="ident" id="5768913"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5768918">,</span>&nbsp;<span class="ident" id="5768920">r</span>&nbsp;<span class="ident" id="5768922"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768927">.</span><span class="ident" id="5768928"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5768937">,</span>&nbsp;<span class="ident" id="5768939">src</span>&nbsp;<span class="ident" id="5768943"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768948">.</span><span class="ident" id="5768949"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5768954">,</span>&nbsp;<span class="ident" id="5768956">sp</span>&nbsp;<span class="ident" id="5768959"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768964">.</span><span class="ident" id="5768965"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5768970">)</span>&nbsp;<span class="builtintype" id="5768972">bool</span>&nbsp;<span class="op" id="5768977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5768980">return</span>&nbsp;<span class="ident" id="5768987"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5768992">.</span><span class="ident" id="5768993"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5768998">(</span><span class="ident" id="5768999"><a href="/gostd/image/draw/draw.go.html#5768909">dst</a></span><span class="op" id="5769002">)</span>&nbsp;<span class="op" id="5769004">==</span>&nbsp;<span class="ident" id="5769007"><a href="/gostd/image/draw/draw.go.html#5768939">src</a></span>&nbsp;<span class="op" id="5769011">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769016"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769017">.</span><span class="ident" id="5769018"><a href="/gostd/image/geom.go.html#5152555">Overlaps</a></span><span class="op" id="5769026">(</span><span class="ident" id="5769027"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769028">.</span><span class="ident" id="5769029"><a href="/gostd/image/geom.go.html#5150558">Add</a></span><span class="op" id="5769032">(</span><span class="ident" id="5769033"><a href="/gostd/image/draw/draw.go.html#5768956">sp</a></span><span class="op" id="5769035">.</span><span class="ident" id="5769036"><a href="/gostd/image/geom.go.html#5148776">Sub</a></span><span class="op" id="5769039">(</span><span class="ident" id="5769040"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769041">.</span><span class="ident" id="5769042"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5769045">)</span><span class="op" id="5769046">)</span><span class="op" id="5769047">)</span>&nbsp;<span class="op" id="5769049">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5769054">(</span><span class="ident" id="5769055"><a href="/gostd/image/draw/draw.go.html#5768956">sp</a></span><span class="op" id="5769057">.</span><span class="ident" id="5769058"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5769060">&lt;</span>&nbsp;<span class="ident" id="5769062"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769063">.</span><span class="ident" id="5769064"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5769067">.</span><span class="ident" id="5769068"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5769070">||</span>&nbsp;<span class="op" id="5769073">(</span><span class="ident" id="5769074"><a href="/gostd/image/draw/draw.go.html#5768956">sp</a></span><span class="op" id="5769076">.</span><span class="ident" id="5769077"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5769079">==</span>&nbsp;<span class="ident" id="5769082"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769083">.</span><span class="ident" id="5769084"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5769087">.</span><span class="ident" id="5769088"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5769090">&amp;&amp;</span>&nbsp;<span class="ident" id="5769093"><a href="/gostd/image/draw/draw.go.html#5768956">sp</a></span><span class="op" id="5769095">.</span><span class="ident" id="5769096"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5769098">&lt;</span>&nbsp;<span class="ident" id="5769100"><a href="/gostd/image/draw/draw.go.html#5768920">r</a></span><span class="op" id="5769101">.</span><span class="ident" id="5769102"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5769105">.</span><span class="ident" id="5769106"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5769107">)</span><span class="op" id="5769108">)</span><br>
<span class="lineno"></span><span class="op" id="5769110">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="comment" id="5769113">//&nbsp;Draw&nbsp;calls&nbsp;DrawMask&nbsp;with&nbsp;a&nbsp;nil&nbsp;mask.</span><br>
<span class="lineno"></span><span class="keyword" id="5769153">func</span>&nbsp;<span class="ident" id="5769158">Draw</span><span class="op" id="5769162">(</span><span class="ident" id="5769163">dst</span>&nbsp;<span class="ident" id="5769167"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5769172">,</span>&nbsp;<span class="ident" id="5769174">r</span>&nbsp;<span class="ident" id="5769176"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769181">.</span><span class="ident" id="5769182"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5769191">,</span>&nbsp;<span class="ident" id="5769193">src</span>&nbsp;<span class="ident" id="5769197"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769202">.</span><span class="ident" id="5769203"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5769208">,</span>&nbsp;<span class="ident" id="5769210">sp</span>&nbsp;<span class="ident" id="5769213"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769218">.</span><span class="ident" id="5769219"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5769224">,</span>&nbsp;<span class="ident" id="5769226">op</span>&nbsp;<span class="ident" id="5769229"><a href="/gostd/image/draw/draw.go.html#5767298">Op</a></span><span class="op" id="5769231">)</span>&nbsp;<span class="op" id="5769233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769236"><a href="/gostd/image/draw/draw.go.html#5769479">DrawMask</a></span><span class="op" id="5769244">(</span><span class="ident" id="5769245"><a href="/gostd/image/draw/draw.go.html#5769163">dst</a></span><span class="op" id="5769248">,</span>&nbsp;<span class="ident" id="5769250"><a href="/gostd/image/draw/draw.go.html#5769174">r</a></span><span class="op" id="5769251">,</span>&nbsp;<span class="ident" id="5769253"><a href="/gostd/image/draw/draw.go.html#5769193">src</a></span><span class="op" id="5769256">,</span>&nbsp;<span class="ident" id="5769258"><a href="/gostd/image/draw/draw.go.html#5769210">sp</a></span><span class="op" id="5769260">,</span>&nbsp;<span class="builtintype" id="5769262">nil</span><span class="op" id="5769265">,</span>&nbsp;<span class="ident" id="5769267"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769272">.</span><span class="ident" id="5769273"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5769278">{</span><span class="op" id="5769279">}</span><span class="op" id="5769280">,</span>&nbsp;<span class="ident" id="5769282"><a href="/gostd/image/draw/draw.go.html#5769226">op</a></span><span class="op" id="5769284">)</span><br>
<span class="lineno"></span><span class="op" id="5769286">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5769289">//&nbsp;DrawMask&nbsp;aligns&nbsp;r.Min&nbsp;in&nbsp;dst&nbsp;with&nbsp;sp&nbsp;in&nbsp;src&nbsp;and&nbsp;mp&nbsp;in&nbsp;mask&nbsp;and&nbsp;then&nbsp;replaces&nbsp;the&nbsp;rectangle&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="5769385">//&nbsp;in&nbsp;dst&nbsp;with&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;Porter-Duff&nbsp;composition.&nbsp;A&nbsp;nil&nbsp;mask&nbsp;is&nbsp;treated&nbsp;as&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5769474">func</span>&nbsp;<span class="ident" id="5769479">DrawMask</span><span class="op" id="5769487">(</span><span class="ident" id="5769488">dst</span>&nbsp;<span class="ident" id="5769492"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5769497">,</span>&nbsp;<span class="ident" id="5769499">r</span>&nbsp;<span class="ident" id="5769501"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769506">.</span><span class="ident" id="5769507"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5769516">,</span>&nbsp;<span class="ident" id="5769518">src</span>&nbsp;<span class="ident" id="5769522"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769527">.</span><span class="ident" id="5769528"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5769533">,</span>&nbsp;<span class="ident" id="5769535">sp</span>&nbsp;<span class="ident" id="5769538"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769543">.</span><span class="ident" id="5769544"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5769549">,</span>&nbsp;<span class="ident" id="5769551">mask</span>&nbsp;<span class="ident" id="5769556"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769561">.</span><span class="ident" id="5769562"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5769567">,</span>&nbsp;<span class="ident" id="5769569">mp</span>&nbsp;<span class="ident" id="5769572"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769577">.</span><span class="ident" id="5769578"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5769583">,</span>&nbsp;<span class="ident" id="5769585">op</span>&nbsp;<span class="ident" id="5769588"><a href="/gostd/image/draw/draw.go.html#5767298">Op</a></span><span class="op" id="5769590">)</span>&nbsp;<span class="op" id="5769592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769595"><a href="/gostd/image/draw/draw.go.html#5768461">clip</a></span><span class="op" id="5769599">(</span><span class="ident" id="5769600"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5769603">,</span>&nbsp;<span class="op" id="5769605">&amp;</span><span class="ident" id="5769606"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5769607">,</span>&nbsp;<span class="ident" id="5769609"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5769612">,</span>&nbsp;<span class="op" id="5769614">&amp;</span><span class="ident" id="5769615"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5769617">,</span>&nbsp;<span class="ident" id="5769619"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span><span class="op" id="5769623">,</span>&nbsp;<span class="op" id="5769625">&amp;</span><span class="ident" id="5769626"><a href="/gostd/image/draw/draw.go.html#5769569">mp</a></span><span class="op" id="5769628">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769631">if</span>&nbsp;<span class="ident" id="5769634"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5769635">.</span><span class="ident" id="5769636"><a href="/gostd/image/geom.go.html#5152221">Empty</a></span><span class="op" id="5769641">(</span><span class="op" id="5769642">)</span>&nbsp;<span class="op" id="5769644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769648">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5769656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5769660">//&nbsp;Fast&nbsp;paths&nbsp;for&nbsp;special&nbsp;cases.&nbsp;If&nbsp;none&nbsp;of&nbsp;them&nbsp;apply,&nbsp;then&nbsp;we&nbsp;fall&nbsp;back&nbsp;to&nbsp;a&nbsp;general&nbsp;but&nbsp;slow&nbsp;implementation.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769773">switch</span>&nbsp;<span class="ident" id="5769780">dst0</span>&nbsp;<span class="op" id="5769785">:=</span>&nbsp;<span class="ident" id="5769788"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5769791">.</span><span class="op" id="5769792">(</span><span class="keyword" id="5769793">type</span><span class="op" id="5769797">)</span>&nbsp;<span class="op" id="5769799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769802">case</span>&nbsp;<span class="op" id="5769807">*</span><span class="ident" id="5769808"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769813">.</span><span class="ident" id="5769814"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5769818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769822">if</span>&nbsp;<span class="ident" id="5769825"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span>&nbsp;<span class="op" id="5769828">==</span>&nbsp;<span class="ident" id="5769831"><a href="/gostd/image/draw/draw.go.html#5767362">Over</a></span>&nbsp;<span class="op" id="5769836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769841">if</span>&nbsp;<span class="ident" id="5769844"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span>&nbsp;<span class="op" id="5769849">==</span>&nbsp;<span class="builtintype" id="5769852">nil</span>&nbsp;<span class="op" id="5769856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769862">switch</span>&nbsp;<span class="ident" id="5769869">src0</span>&nbsp;<span class="op" id="5769874">:=</span>&nbsp;<span class="ident" id="5769877"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5769880">.</span><span class="op" id="5769881">(</span><span class="keyword" id="5769882">type</span><span class="op" id="5769886">)</span>&nbsp;<span class="op" id="5769888">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769894">case</span>&nbsp;<span class="op" id="5769899">*</span><span class="ident" id="5769900"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769905">.</span><span class="ident" id="5769906"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5769913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769920"><a href="/gostd/image/draw/draw.go.html#5772373">drawFillOver</a></span><span class="op" id="5769932">(</span><span class="ident" id="5769933"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5769937">,</span>&nbsp;<span class="ident" id="5769939"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5769940">,</span>&nbsp;<span class="ident" id="5769942"><a href="/gostd/image/draw/draw.go.html#5769869">src0</a></span><span class="op" id="5769946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769953">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5769964">case</span>&nbsp;<span class="op" id="5769969">*</span><span class="ident" id="5769970"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5769975">.</span><span class="ident" id="5769976"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5769980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5769987"><a href="/gostd/image/draw/draw.go.html#5773787">drawCopyOver</a></span><span class="op" id="5769999">(</span><span class="ident" id="5770000"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770004">,</span>&nbsp;<span class="ident" id="5770006"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770007">,</span>&nbsp;<span class="ident" id="5770009"><a href="/gostd/image/draw/draw.go.html#5769869">src0</a></span><span class="op" id="5770013">,</span>&nbsp;<span class="ident" id="5770015"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770017">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770024">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770035">case</span>&nbsp;<span class="op" id="5770040">*</span><span class="ident" id="5770041"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770046">.</span><span class="ident" id="5770047"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="5770052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770059"><a href="/gostd/image/draw/draw.go.html#5775958">drawNRGBAOver</a></span><span class="op" id="5770072">(</span><span class="ident" id="5770073"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770077">,</span>&nbsp;<span class="ident" id="5770079"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770080">,</span>&nbsp;<span class="ident" id="5770082"><a href="/gostd/image/draw/draw.go.html#5769869">src0</a></span><span class="op" id="5770086">,</span>&nbsp;<span class="ident" id="5770088"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770097">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770108">case</span>&nbsp;<span class="op" id="5770113">*</span><span class="ident" id="5770114"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770119">.</span><span class="ident" id="5770120"><a href="/gostd/image/ycbcr.go.html#5181913">YCbCr</a></span><span class="op" id="5770125">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770132">if</span>&nbsp;<span class="ident" id="5770135"><a href="/gostd/image/draw/draw.go.html#5777818">drawYCbCr</a></span><span class="op" id="5770144">(</span><span class="ident" id="5770145"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770149">,</span>&nbsp;<span class="ident" id="5770151"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770152">,</span>&nbsp;<span class="ident" id="5770154"><a href="/gostd/image/draw/draw.go.html#5769869">src0</a></span><span class="op" id="5770158">,</span>&nbsp;<span class="ident" id="5770160"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770162">)</span>&nbsp;<span class="op" id="5770164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770172">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770195">}</span>&nbsp;<span class="keyword" id="5770197">else</span>&nbsp;<span class="keyword" id="5770202">if</span>&nbsp;<span class="ident" id="5770205">mask0</span><span class="op" id="5770210">,</span>&nbsp;<span class="ident" id="5770212">ok</span>&nbsp;<span class="op" id="5770215">:=</span>&nbsp;<span class="ident" id="5770218"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span><span class="op" id="5770222">.</span><span class="op" id="5770223">(</span><span class="op" id="5770224">*</span><span class="ident" id="5770225"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770230">.</span><span class="ident" id="5770231"><a href="/gostd/image/image.go.html#5167078">Alpha</a></span><span class="op" id="5770236">)</span><span class="op" id="5770237">;</span>&nbsp;<span class="ident" id="5770239"><a href="/gostd/image/draw/draw.go.html#5770212">ok</a></span>&nbsp;<span class="op" id="5770242">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770248">switch</span>&nbsp;<span class="ident" id="5770255">src0</span>&nbsp;<span class="op" id="5770260">:=</span>&nbsp;<span class="ident" id="5770263"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5770266">.</span><span class="op" id="5770267">(</span><span class="keyword" id="5770268">type</span><span class="op" id="5770272">)</span>&nbsp;<span class="op" id="5770274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770280">case</span>&nbsp;<span class="op" id="5770285">*</span><span class="ident" id="5770286"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770291">.</span><span class="ident" id="5770292"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5770299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770306"><a href="/gostd/image/draw/draw.go.html#5780217">drawGlyphOver</a></span><span class="op" id="5770319">(</span><span class="ident" id="5770320"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770324">,</span>&nbsp;<span class="ident" id="5770326"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770327">,</span>&nbsp;<span class="ident" id="5770329"><a href="/gostd/image/draw/draw.go.html#5770255">src0</a></span><span class="op" id="5770333">,</span>&nbsp;<span class="ident" id="5770335"><a href="/gostd/image/draw/draw.go.html#5770205">mask0</a></span><span class="op" id="5770340">,</span>&nbsp;<span class="ident" id="5770342"><a href="/gostd/image/draw/draw.go.html#5769569">mp</a></span><span class="op" id="5770344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770351">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770362">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770371">}</span>&nbsp;<span class="keyword" id="5770373">else</span>&nbsp;<span class="op" id="5770378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770383">if</span>&nbsp;<span class="ident" id="5770386"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span>&nbsp;<span class="op" id="5770391">==</span>&nbsp;<span class="builtintype" id="5770394">nil</span>&nbsp;<span class="op" id="5770398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770404">switch</span>&nbsp;<span class="ident" id="5770411">src0</span>&nbsp;<span class="op" id="5770416">:=</span>&nbsp;<span class="ident" id="5770419"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5770422">.</span><span class="op" id="5770423">(</span><span class="keyword" id="5770424">type</span><span class="op" id="5770428">)</span>&nbsp;<span class="op" id="5770430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770436">case</span>&nbsp;<span class="op" id="5770441">*</span><span class="ident" id="5770442"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770447">.</span><span class="ident" id="5770448"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5770455">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770462"><a href="/gostd/image/draw/draw.go.html#5773036">drawFillSrc</a></span><span class="op" id="5770473">(</span><span class="ident" id="5770474"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770478">,</span>&nbsp;<span class="ident" id="5770480"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770481">,</span>&nbsp;<span class="ident" id="5770483"><a href="/gostd/image/draw/draw.go.html#5770411">src0</a></span><span class="op" id="5770487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770494">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770505">case</span>&nbsp;<span class="op" id="5770510">*</span><span class="ident" id="5770511"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770516">.</span><span class="ident" id="5770517"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5770521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770528"><a href="/gostd/image/draw/draw.go.html#5775169">drawCopySrc</a></span><span class="op" id="5770539">(</span><span class="ident" id="5770540"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770544">,</span>&nbsp;<span class="ident" id="5770546"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770547">,</span>&nbsp;<span class="ident" id="5770549"><a href="/gostd/image/draw/draw.go.html#5770411">src0</a></span><span class="op" id="5770553">,</span>&nbsp;<span class="ident" id="5770555"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770564">return</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770575">case</span>&nbsp;<span class="op" id="5770580">*</span><span class="ident" id="5770581"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770586">.</span><span class="ident" id="5770587"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="5770592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770599"><a href="/gostd/image/draw/draw.go.html#5777008">drawNRGBASrc</a></span><span class="op" id="5770611">(</span><span class="ident" id="5770612"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770616">,</span>&nbsp;<span class="ident" id="5770618"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770619">,</span>&nbsp;<span class="ident" id="5770621"><a href="/gostd/image/draw/draw.go.html#5770411">src0</a></span><span class="op" id="5770625">,</span>&nbsp;<span class="ident" id="5770627"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770636">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770647">case</span>&nbsp;<span class="op" id="5770652">*</span><span class="ident" id="5770653"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770658">.</span><span class="ident" id="5770659"><a href="/gostd/image/ycbcr.go.html#5181913">YCbCr</a></span><span class="op" id="5770664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770671">if</span>&nbsp;<span class="ident" id="5770674"><a href="/gostd/image/draw/draw.go.html#5777818">drawYCbCr</a></span><span class="op" id="5770683">(</span><span class="ident" id="5770684"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770688">,</span>&nbsp;<span class="ident" id="5770690"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770691">,</span>&nbsp;<span class="ident" id="5770693"><a href="/gostd/image/draw/draw.go.html#5770411">src0</a></span><span class="op" id="5770697">,</span>&nbsp;<span class="ident" id="5770699"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770701">)</span>&nbsp;<span class="op" id="5770703">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770711">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770738">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770742"><a href="/gostd/image/draw/draw.go.html#5781134">drawRGBA</a></span><span class="op" id="5770750">(</span><span class="ident" id="5770751"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770755">,</span>&nbsp;<span class="ident" id="5770757"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770758">,</span>&nbsp;<span class="ident" id="5770760"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5770763">,</span>&nbsp;<span class="ident" id="5770765"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770767">,</span>&nbsp;<span class="ident" id="5770769"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span><span class="op" id="5770773">,</span>&nbsp;<span class="ident" id="5770775"><a href="/gostd/image/draw/draw.go.html#5769569">mp</a></span><span class="op" id="5770777">,</span>&nbsp;<span class="ident" id="5770779"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span><span class="op" id="5770781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770785">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770793">case</span>&nbsp;<span class="op" id="5770798">*</span><span class="ident" id="5770799"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5770804">.</span><span class="ident" id="5770805"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="5770813">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5770817">if</span>&nbsp;<span class="ident" id="5770820"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span>&nbsp;<span class="op" id="5770823">==</span>&nbsp;<span class="ident" id="5770826"><a href="/gostd/image/draw/draw.go.html#5767413">Src</a></span>&nbsp;<span class="op" id="5770830">&amp;&amp;</span>&nbsp;<span class="ident" id="5770833"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span>&nbsp;<span class="op" id="5770838">==</span>&nbsp;<span class="builtintype" id="5770841">nil</span>&nbsp;<span class="op" id="5770845">&amp;&amp;</span>&nbsp;<span class="op" id="5770848">!</span><span class="ident" id="5770849"><a href="/gostd/image/draw/draw.go.html#5768893">processBackward</a></span><span class="op" id="5770864">(</span><span class="ident" id="5770865"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5770868">,</span>&nbsp;<span class="ident" id="5770870"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770871">,</span>&nbsp;<span class="ident" id="5770873"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5770876">,</span>&nbsp;<span class="ident" id="5770878"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770880">)</span>&nbsp;<span class="op" id="5770882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770887"><a href="/gostd/image/draw/draw.go.html#5783081">drawPaletted</a></span><span class="op" id="5770899">(</span><span class="ident" id="5770900"><a href="/gostd/image/draw/draw.go.html#5769780">dst0</a></span><span class="op" id="5770904">,</span>&nbsp;<span class="ident" id="5770906"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770907">,</span>&nbsp;<span class="ident" id="5770909"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5770912">,</span>&nbsp;<span class="ident" id="5770914"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5770916">,</span>&nbsp;<span class="builtintype" id="5770918">false</span><span class="op" id="5770923">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5770930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770934">x0</span><span class="op" id="5770936">,</span>&nbsp;<span class="ident" id="5770938">x1</span><span class="op" id="5770940">,</span>&nbsp;<span class="ident" id="5770942">dx</span>&nbsp;<span class="op" id="5770945">:=</span>&nbsp;<span class="ident" id="5770948"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770949">.</span><span class="ident" id="5770950"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5770953">.</span><span class="ident" id="5770954"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5770955">,</span>&nbsp;<span class="ident" id="5770957"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770958">.</span><span class="ident" id="5770959"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5770962">.</span><span class="ident" id="5770963"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5770964">,</span>&nbsp;<span class="num" id="5770966">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5770969">y0</span><span class="op" id="5770971">,</span>&nbsp;<span class="ident" id="5770973">y1</span><span class="op" id="5770975">,</span>&nbsp;<span class="ident" id="5770977">dy</span>&nbsp;<span class="op" id="5770980">:=</span>&nbsp;<span class="ident" id="5770983"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770984">.</span><span class="ident" id="5770985"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5770988">.</span><span class="ident" id="5770989"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5770990">,</span>&nbsp;<span class="ident" id="5770992"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5770993">.</span><span class="ident" id="5770994"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5770997">.</span><span class="ident" id="5770998"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5770999">,</span>&nbsp;<span class="num" id="5771001">1</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771004">if</span>&nbsp;<span class="ident" id="5771007"><a href="/gostd/image/draw/draw.go.html#5768893">processBackward</a></span><span class="op" id="5771022">(</span><span class="ident" id="5771023"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5771026">,</span>&nbsp;<span class="ident" id="5771028"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5771029">,</span>&nbsp;<span class="ident" id="5771031"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5771034">,</span>&nbsp;<span class="ident" id="5771036"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5771038">)</span>&nbsp;<span class="op" id="5771040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771044"><a href="/gostd/image/draw/draw.go.html#5770934">x0</a></span><span class="op" id="5771046">,</span>&nbsp;<span class="ident" id="5771048"><a href="/gostd/image/draw/draw.go.html#5770938">x1</a></span><span class="op" id="5771050">,</span>&nbsp;<span class="ident" id="5771052"><a href="/gostd/image/draw/draw.go.html#5770942">dx</a></span>&nbsp;<span class="op" id="5771055">=</span>&nbsp;<span class="ident" id="5771057"><a href="/gostd/image/draw/draw.go.html#5770938">x1</a></span><span class="op" id="5771059">-</span><span class="num" id="5771060">1</span><span class="op" id="5771061">,</span>&nbsp;<span class="ident" id="5771063"><a href="/gostd/image/draw/draw.go.html#5770934">x0</a></span><span class="op" id="5771065">-</span><span class="num" id="5771066">1</span><span class="op" id="5771067">,</span>&nbsp;<span class="op" id="5771069">-</span><span class="num" id="5771070">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771074"><a href="/gostd/image/draw/draw.go.html#5770969">y0</a></span><span class="op" id="5771076">,</span>&nbsp;<span class="ident" id="5771078"><a href="/gostd/image/draw/draw.go.html#5770973">y1</a></span><span class="op" id="5771080">,</span>&nbsp;<span class="ident" id="5771082"><a href="/gostd/image/draw/draw.go.html#5770977">dy</a></span>&nbsp;<span class="op" id="5771085">=</span>&nbsp;<span class="ident" id="5771087"><a href="/gostd/image/draw/draw.go.html#5770973">y1</a></span><span class="op" id="5771089">-</span><span class="num" id="5771090">1</span><span class="op" id="5771091">,</span>&nbsp;<span class="ident" id="5771093"><a href="/gostd/image/draw/draw.go.html#5770969">y0</a></span><span class="op" id="5771095">-</span><span class="num" id="5771096">1</span><span class="op" id="5771097">,</span>&nbsp;<span class="op" id="5771099">-</span><span class="num" id="5771100">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771107">var</span>&nbsp;<span class="ident" id="5771111">out</span>&nbsp;<span class="ident" id="5771115"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5771120">.</span><span class="ident" id="5771121"><a href="/gostd/image/color/color.go.html#5185941">RGBA64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771129">sy</span>&nbsp;<span class="op" id="5771132">:=</span>&nbsp;<span class="ident" id="5771135"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5771137">.</span><span class="ident" id="5771138"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5771140">+</span>&nbsp;<span class="ident" id="5771142"><a href="/gostd/image/draw/draw.go.html#5770969">y0</a></span>&nbsp;<span class="op" id="5771145">-</span>&nbsp;<span class="ident" id="5771147"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5771148">.</span><span class="ident" id="5771149"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5771152">.</span><span class="ident" id="5771153"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771156">my</span>&nbsp;<span class="op" id="5771159">:=</span>&nbsp;<span class="ident" id="5771162"><a href="/gostd/image/draw/draw.go.html#5769569">mp</a></span><span class="op" id="5771164">.</span><span class="ident" id="5771165"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5771167">+</span>&nbsp;<span class="ident" id="5771169"><a href="/gostd/image/draw/draw.go.html#5770969">y0</a></span>&nbsp;<span class="op" id="5771172">-</span>&nbsp;<span class="ident" id="5771174"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5771175">.</span><span class="ident" id="5771176"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5771179">.</span><span class="ident" id="5771180"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771183">for</span>&nbsp;<span class="ident" id="5771187">y</span>&nbsp;<span class="op" id="5771189">:=</span>&nbsp;<span class="ident" id="5771192"><a href="/gostd/image/draw/draw.go.html#5770969">y0</a></span><span class="op" id="5771194">;</span>&nbsp;<span class="ident" id="5771196"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span>&nbsp;<span class="op" id="5771198">!=</span>&nbsp;<span class="ident" id="5771201"><a href="/gostd/image/draw/draw.go.html#5770973">y1</a></span><span class="op" id="5771203">;</span>&nbsp;<span class="ident" id="5771205"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5771206">,</span>&nbsp;<span class="ident" id="5771208"><a href="/gostd/image/draw/draw.go.html#5771129">sy</a></span><span class="op" id="5771210">,</span>&nbsp;<span class="ident" id="5771212"><a href="/gostd/image/draw/draw.go.html#5771156">my</a></span>&nbsp;<span class="op" id="5771215">=</span>&nbsp;<span class="ident" id="5771217"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5771218">+</span><span class="ident" id="5771219"><a href="/gostd/image/draw/draw.go.html#5770977">dy</a></span><span class="op" id="5771221">,</span>&nbsp;<span class="ident" id="5771223"><a href="/gostd/image/draw/draw.go.html#5771129">sy</a></span><span class="op" id="5771225">+</span><span class="ident" id="5771226"><a href="/gostd/image/draw/draw.go.html#5770977">dy</a></span><span class="op" id="5771228">,</span>&nbsp;<span class="ident" id="5771230"><a href="/gostd/image/draw/draw.go.html#5771156">my</a></span><span class="op" id="5771232">+</span><span class="ident" id="5771233"><a href="/gostd/image/draw/draw.go.html#5770977">dy</a></span>&nbsp;<span class="op" id="5771236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771240">sx</span>&nbsp;<span class="op" id="5771243">:=</span>&nbsp;<span class="ident" id="5771246"><a href="/gostd/image/draw/draw.go.html#5769535">sp</a></span><span class="op" id="5771248">.</span><span class="ident" id="5771249"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5771251">+</span>&nbsp;<span class="ident" id="5771253"><a href="/gostd/image/draw/draw.go.html#5770934">x0</a></span>&nbsp;<span class="op" id="5771256">-</span>&nbsp;<span class="ident" id="5771258"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5771259">.</span><span class="ident" id="5771260"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5771263">.</span><span class="ident" id="5771264"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771268">mx</span>&nbsp;<span class="op" id="5771271">:=</span>&nbsp;<span class="ident" id="5771274"><a href="/gostd/image/draw/draw.go.html#5769569">mp</a></span><span class="op" id="5771276">.</span><span class="ident" id="5771277"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5771279">+</span>&nbsp;<span class="ident" id="5771281"><a href="/gostd/image/draw/draw.go.html#5770934">x0</a></span>&nbsp;<span class="op" id="5771284">-</span>&nbsp;<span class="ident" id="5771286"><a href="/gostd/image/draw/draw.go.html#5769499">r</a></span><span class="op" id="5771287">.</span><span class="ident" id="5771288"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5771291">.</span><span class="ident" id="5771292"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771296">for</span>&nbsp;<span class="ident" id="5771300">x</span>&nbsp;<span class="op" id="5771302">:=</span>&nbsp;<span class="ident" id="5771305"><a href="/gostd/image/draw/draw.go.html#5770934">x0</a></span><span class="op" id="5771307">;</span>&nbsp;<span class="ident" id="5771309"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span>&nbsp;<span class="op" id="5771311">!=</span>&nbsp;<span class="ident" id="5771314"><a href="/gostd/image/draw/draw.go.html#5770938">x1</a></span><span class="op" id="5771316">;</span>&nbsp;<span class="ident" id="5771318"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5771319">,</span>&nbsp;<span class="ident" id="5771321"><a href="/gostd/image/draw/draw.go.html#5771240">sx</a></span><span class="op" id="5771323">,</span>&nbsp;<span class="ident" id="5771325"><a href="/gostd/image/draw/draw.go.html#5771268">mx</a></span>&nbsp;<span class="op" id="5771328">=</span>&nbsp;<span class="ident" id="5771330"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5771331">+</span><span class="ident" id="5771332"><a href="/gostd/image/draw/draw.go.html#5770942">dx</a></span><span class="op" id="5771334">,</span>&nbsp;<span class="ident" id="5771336"><a href="/gostd/image/draw/draw.go.html#5771240">sx</a></span><span class="op" id="5771338">+</span><span class="ident" id="5771339"><a href="/gostd/image/draw/draw.go.html#5770942">dx</a></span><span class="op" id="5771341">,</span>&nbsp;<span class="ident" id="5771343"><a href="/gostd/image/draw/draw.go.html#5771268">mx</a></span><span class="op" id="5771345">+</span><span class="ident" id="5771346"><a href="/gostd/image/draw/draw.go.html#5770942">dx</a></span>&nbsp;<span class="op" id="5771349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771354">ma</span>&nbsp;<span class="op" id="5771357">:=</span>&nbsp;<span class="builtintype" id="5771360">uint32</span><span class="op" id="5771366">(</span><span class="ident" id="5771367"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771373">if</span>&nbsp;<span class="ident" id="5771376"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span>&nbsp;<span class="op" id="5771381">!=</span>&nbsp;<span class="builtintype" id="5771384">nil</span>&nbsp;<span class="op" id="5771388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771394">_</span><span class="op" id="5771395">,</span>&nbsp;<span class="ident" id="5771397">_</span><span class="op" id="5771398">,</span>&nbsp;<span class="ident" id="5771400">_</span><span class="op" id="5771401">,</span>&nbsp;<span class="ident" id="5771403"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5771406">=</span>&nbsp;<span class="ident" id="5771408"><a href="/gostd/image/draw/draw.go.html#5769551">mask</a></span><span class="op" id="5771412">.</span><span class="ident" id="5771413"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5771415">(</span><span class="ident" id="5771416"><a href="/gostd/image/draw/draw.go.html#5771268">mx</a></span><span class="op" id="5771418">,</span>&nbsp;<span class="ident" id="5771420"><a href="/gostd/image/draw/draw.go.html#5771156">my</a></span><span class="op" id="5771422">)</span><span class="op" id="5771423">.</span><span class="ident" id="5771424"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5771428">(</span><span class="op" id="5771429">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771439">switch</span>&nbsp;<span class="op" id="5771446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771451">case</span>&nbsp;<span class="ident" id="5771456"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5771459">==</span>&nbsp;<span class="num" id="5771462">0</span><span class="op" id="5771463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771469">if</span>&nbsp;<span class="ident" id="5771472"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span>&nbsp;<span class="op" id="5771475">==</span>&nbsp;<span class="ident" id="5771478"><a href="/gostd/image/draw/draw.go.html#5767362">Over</a></span>&nbsp;<span class="op" id="5771483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5771490">//&nbsp;No-op.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771504">}</span>&nbsp;<span class="keyword" id="5771506">else</span>&nbsp;<span class="op" id="5771511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771518"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5771521">.</span><span class="ident" id="5771522"><a href="/gostd/image/draw/draw.go.html#5766946">Set</a></span><span class="op" id="5771525">(</span><span class="ident" id="5771526"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5771527">,</span>&nbsp;<span class="ident" id="5771529"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5771530">,</span>&nbsp;<span class="ident" id="5771532"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5771537">.</span><span class="ident" id="5771538"><a href="/gostd/image/color/color.go.html#5191456">Transparent</a></span><span class="op" id="5771549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771560">case</span>&nbsp;<span class="ident" id="5771565"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5771568">==</span>&nbsp;<span class="ident" id="5771571"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5771573">&amp;&amp;</span>&nbsp;<span class="ident" id="5771576"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span>&nbsp;<span class="op" id="5771579">==</span>&nbsp;<span class="ident" id="5771582"><a href="/gostd/image/draw/draw.go.html#5767413">Src</a></span><span class="op" id="5771585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771591"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5771594">.</span><span class="ident" id="5771595"><a href="/gostd/image/draw/draw.go.html#5766946">Set</a></span><span class="op" id="5771598">(</span><span class="ident" id="5771599"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5771600">,</span>&nbsp;<span class="ident" id="5771602"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5771603">,</span>&nbsp;<span class="ident" id="5771605"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5771608">.</span><span class="ident" id="5771609"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5771611">(</span><span class="ident" id="5771612"><a href="/gostd/image/draw/draw.go.html#5771240">sx</a></span><span class="op" id="5771614">,</span>&nbsp;<span class="ident" id="5771616"><a href="/gostd/image/draw/draw.go.html#5771129">sy</a></span><span class="op" id="5771618">)</span><span class="op" id="5771619">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771624">default</span><span class="op" id="5771631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771637">sr</span><span class="op" id="5771639">,</span>&nbsp;<span class="ident" id="5771641">sg</span><span class="op" id="5771643">,</span>&nbsp;<span class="ident" id="5771645">sb</span><span class="op" id="5771647">,</span>&nbsp;<span class="ident" id="5771649">sa</span>&nbsp;<span class="op" id="5771652">:=</span>&nbsp;<span class="ident" id="5771655"><a href="/gostd/image/draw/draw.go.html#5769518">src</a></span><span class="op" id="5771658">.</span><span class="ident" id="5771659"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5771661">(</span><span class="ident" id="5771662"><a href="/gostd/image/draw/draw.go.html#5771240">sx</a></span><span class="op" id="5771664">,</span>&nbsp;<span class="ident" id="5771666"><a href="/gostd/image/draw/draw.go.html#5771129">sy</a></span><span class="op" id="5771668">)</span><span class="op" id="5771669">.</span><span class="ident" id="5771670"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5771674">(</span><span class="op" id="5771675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5771681">if</span>&nbsp;<span class="ident" id="5771684"><a href="/gostd/image/draw/draw.go.html#5769585">op</a></span>&nbsp;<span class="op" id="5771687">==</span>&nbsp;<span class="ident" id="5771690"><a href="/gostd/image/draw/draw.go.html#5767362">Over</a></span>&nbsp;<span class="op" id="5771695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771702">dr</span><span class="op" id="5771704">,</span>&nbsp;<span class="ident" id="5771706">dg</span><span class="op" id="5771708">,</span>&nbsp;<span class="ident" id="5771710">db</span><span class="op" id="5771712">,</span>&nbsp;<span class="ident" id="5771714">da</span>&nbsp;<span class="op" id="5771717">:=</span>&nbsp;<span class="ident" id="5771720"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5771723">.</span><span class="ident" id="5771724"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5771726">(</span><span class="ident" id="5771727"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5771728">,</span>&nbsp;<span class="ident" id="5771730"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5771731">)</span><span class="op" id="5771732">.</span><span class="ident" id="5771733"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5771737">(</span><span class="op" id="5771738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771745">a</span>&nbsp;<span class="op" id="5771747">:=</span>&nbsp;<span class="ident" id="5771750"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5771752">-</span>&nbsp;<span class="op" id="5771754">(</span><span class="ident" id="5771755"><a href="/gostd/image/draw/draw.go.html#5771649">sa</a></span>&nbsp;<span class="op" id="5771758">*</span>&nbsp;<span class="ident" id="5771760"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5771763">/</span>&nbsp;<span class="ident" id="5771765"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771766">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771773"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771776">.</span><span class="ident" id="5771777"><a href="/gostd/image/color/color.go.html#5185958">R</a></span>&nbsp;<span class="op" id="5771779">=</span>&nbsp;<span class="builtintype" id="5771781">uint16</span><span class="op" id="5771787">(</span><span class="op" id="5771788">(</span><span class="ident" id="5771789"><a href="/gostd/image/draw/draw.go.html#5771702">dr</a></span><span class="op" id="5771791">*</span><span class="ident" id="5771792"><a href="/gostd/image/draw/draw.go.html#5771745">a</a></span>&nbsp;<span class="op" id="5771794">+</span>&nbsp;<span class="ident" id="5771796"><a href="/gostd/image/draw/draw.go.html#5771637">sr</a></span><span class="op" id="5771798">*</span><span class="ident" id="5771799"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span><span class="op" id="5771801">)</span>&nbsp;<span class="op" id="5771803">/</span>&nbsp;<span class="ident" id="5771805"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771813"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771816">.</span><span class="ident" id="5771817"><a href="/gostd/image/color/color.go.html#5185961">G</a></span>&nbsp;<span class="op" id="5771819">=</span>&nbsp;<span class="builtintype" id="5771821">uint16</span><span class="op" id="5771827">(</span><span class="op" id="5771828">(</span><span class="ident" id="5771829"><a href="/gostd/image/draw/draw.go.html#5771706">dg</a></span><span class="op" id="5771831">*</span><span class="ident" id="5771832"><a href="/gostd/image/draw/draw.go.html#5771745">a</a></span>&nbsp;<span class="op" id="5771834">+</span>&nbsp;<span class="ident" id="5771836"><a href="/gostd/image/draw/draw.go.html#5771641">sg</a></span><span class="op" id="5771838">*</span><span class="ident" id="5771839"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span><span class="op" id="5771841">)</span>&nbsp;<span class="op" id="5771843">/</span>&nbsp;<span class="ident" id="5771845"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771853"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771856">.</span><span class="ident" id="5771857"><a href="/gostd/image/color/color.go.html#5185964">B</a></span>&nbsp;<span class="op" id="5771859">=</span>&nbsp;<span class="builtintype" id="5771861">uint16</span><span class="op" id="5771867">(</span><span class="op" id="5771868">(</span><span class="ident" id="5771869"><a href="/gostd/image/draw/draw.go.html#5771710">db</a></span><span class="op" id="5771871">*</span><span class="ident" id="5771872"><a href="/gostd/image/draw/draw.go.html#5771745">a</a></span>&nbsp;<span class="op" id="5771874">+</span>&nbsp;<span class="ident" id="5771876"><a href="/gostd/image/draw/draw.go.html#5771645">sb</a></span><span class="op" id="5771878">*</span><span class="ident" id="5771879"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span><span class="op" id="5771881">)</span>&nbsp;<span class="op" id="5771883">/</span>&nbsp;<span class="ident" id="5771885"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771893"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771896">.</span><span class="ident" id="5771897"><a href="/gostd/image/color/color.go.html#5185967">A</a></span>&nbsp;<span class="op" id="5771899">=</span>&nbsp;<span class="builtintype" id="5771901">uint16</span><span class="op" id="5771907">(</span><span class="op" id="5771908">(</span><span class="ident" id="5771909"><a href="/gostd/image/draw/draw.go.html#5771714">da</a></span><span class="op" id="5771911">*</span><span class="ident" id="5771912"><a href="/gostd/image/draw/draw.go.html#5771745">a</a></span>&nbsp;<span class="op" id="5771914">+</span>&nbsp;<span class="ident" id="5771916"><a href="/gostd/image/draw/draw.go.html#5771649">sa</a></span><span class="op" id="5771918">*</span><span class="ident" id="5771919"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span><span class="op" id="5771921">)</span>&nbsp;<span class="op" id="5771923">/</span>&nbsp;<span class="ident" id="5771925"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5771932">}</span>&nbsp;<span class="keyword" id="5771934">else</span>&nbsp;<span class="op" id="5771939">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771946"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771949">.</span><span class="ident" id="5771950"><a href="/gostd/image/color/color.go.html#5185958">R</a></span>&nbsp;<span class="op" id="5771952">=</span>&nbsp;<span class="builtintype" id="5771954">uint16</span><span class="op" id="5771960">(</span><span class="ident" id="5771961"><a href="/gostd/image/draw/draw.go.html#5771637">sr</a></span>&nbsp;<span class="op" id="5771964">*</span>&nbsp;<span class="ident" id="5771966"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5771969">/</span>&nbsp;<span class="ident" id="5771971"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5771972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5771979"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5771982">.</span><span class="ident" id="5771983"><a href="/gostd/image/color/color.go.html#5185961">G</a></span>&nbsp;<span class="op" id="5771985">=</span>&nbsp;<span class="builtintype" id="5771987">uint16</span><span class="op" id="5771993">(</span><span class="ident" id="5771994"><a href="/gostd/image/draw/draw.go.html#5771641">sg</a></span>&nbsp;<span class="op" id="5771997">*</span>&nbsp;<span class="ident" id="5771999"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5772002">/</span>&nbsp;<span class="ident" id="5772004"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5772005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772012"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5772015">.</span><span class="ident" id="5772016"><a href="/gostd/image/color/color.go.html#5185964">B</a></span>&nbsp;<span class="op" id="5772018">=</span>&nbsp;<span class="builtintype" id="5772020">uint16</span><span class="op" id="5772026">(</span><span class="ident" id="5772027"><a href="/gostd/image/draw/draw.go.html#5771645">sb</a></span>&nbsp;<span class="op" id="5772030">*</span>&nbsp;<span class="ident" id="5772032"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5772035">/</span>&nbsp;<span class="ident" id="5772037"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5772038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772045"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5772048">.</span><span class="ident" id="5772049"><a href="/gostd/image/color/color.go.html#5185967">A</a></span>&nbsp;<span class="op" id="5772051">=</span>&nbsp;<span class="builtintype" id="5772053">uint16</span><span class="op" id="5772059">(</span><span class="ident" id="5772060"><a href="/gostd/image/draw/draw.go.html#5771649">sa</a></span>&nbsp;<span class="op" id="5772063">*</span>&nbsp;<span class="ident" id="5772065"><a href="/gostd/image/draw/draw.go.html#5771354">ma</a></span>&nbsp;<span class="op" id="5772068">/</span>&nbsp;<span class="ident" id="5772070"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5772071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772077">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5772083">//&nbsp;The&nbsp;third&nbsp;argument&nbsp;is&nbsp;&amp;out&nbsp;instead&nbsp;of&nbsp;out&nbsp;(and&nbsp;out&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5772144">//&nbsp;declared&nbsp;outside&nbsp;of&nbsp;the&nbsp;inner&nbsp;loop)&nbsp;to&nbsp;avoid&nbsp;the&nbsp;implicit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5772209">//&nbsp;conversion&nbsp;to&nbsp;color.Color&nbsp;here&nbsp;allocating&nbsp;memory&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5772272">//&nbsp;inner&nbsp;loop&nbsp;if&nbsp;sizeof(color.RGBA64)&nbsp;&gt;&nbsp;sizeof(uintptr).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772333"><a href="/gostd/image/draw/draw.go.html#5769488">dst</a></span><span class="op" id="5772336">.</span><span class="ident" id="5772337"><a href="/gostd/image/draw/draw.go.html#5766946">Set</a></span><span class="op" id="5772340">(</span><span class="ident" id="5772341"><a href="/gostd/image/draw/draw.go.html#5771300">x</a></span><span class="op" id="5772342">,</span>&nbsp;<span class="ident" id="5772344"><a href="/gostd/image/draw/draw.go.html#5771187">y</a></span><span class="op" id="5772345">,</span>&nbsp;<span class="op" id="5772347">&amp;</span><span class="ident" id="5772348"><a href="/gostd/image/draw/draw.go.html#5771111">out</a></span><span class="op" id="5772351">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772363">}</span><br>
<span class="lineno"></span><span class="op" id="5772365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="5772368">func</span>&nbsp;<span class="ident" id="5772373">drawFillOver</span><span class="op" id="5772385">(</span><span class="ident" id="5772386">dst</span>&nbsp;<span class="op" id="5772390">*</span><span class="ident" id="5772391"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5772396">.</span><span class="ident" id="5772397"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5772401">,</span>&nbsp;<span class="ident" id="5772403">r</span>&nbsp;<span class="ident" id="5772405"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5772410">.</span><span class="ident" id="5772411"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5772420">,</span>&nbsp;<span class="ident" id="5772422">src</span>&nbsp;<span class="op" id="5772426">*</span><span class="ident" id="5772427"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5772432">.</span><span class="ident" id="5772433"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5772440">)</span>&nbsp;<span class="op" id="5772442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772445">sr</span><span class="op" id="5772447">,</span>&nbsp;<span class="ident" id="5772449">sg</span><span class="op" id="5772451">,</span>&nbsp;<span class="ident" id="5772453">sb</span><span class="op" id="5772455">,</span>&nbsp;<span class="ident" id="5772457">sa</span>&nbsp;<span class="op" id="5772460">:=</span>&nbsp;<span class="ident" id="5772463"><a href="/gostd/image/draw/draw.go.html#5772422">src</a></span><span class="op" id="5772466">.</span><span class="ident" id="5772467"><a href="/gostd/image/names.go.html#5179842">RGBA</a></span><span class="op" id="5772471">(</span><span class="op" id="5772472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5772475">//&nbsp;The&nbsp;0x101&nbsp;is&nbsp;here&nbsp;for&nbsp;the&nbsp;same&nbsp;reason&nbsp;as&nbsp;in&nbsp;drawRGBA.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772533">a</span>&nbsp;<span class="op" id="5772535">:=</span>&nbsp;<span class="op" id="5772538">(</span><span class="ident" id="5772539"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5772541">-</span>&nbsp;<span class="ident" id="5772543"><a href="/gostd/image/draw/draw.go.html#5772457">sa</a></span><span class="op" id="5772545">)</span>&nbsp;<span class="op" id="5772547">*</span>&nbsp;<span class="num" id="5772549">0x101</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772556">i0</span>&nbsp;<span class="op" id="5772559">:=</span>&nbsp;<span class="ident" id="5772562"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772565">.</span><span class="ident" id="5772566"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5772575">(</span><span class="ident" id="5772576"><a href="/gostd/image/draw/draw.go.html#5772403">r</a></span><span class="op" id="5772577">.</span><span class="ident" id="5772578"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5772581">.</span><span class="ident" id="5772582"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5772583">,</span>&nbsp;<span class="ident" id="5772585"><a href="/gostd/image/draw/draw.go.html#5772403">r</a></span><span class="op" id="5772586">.</span><span class="ident" id="5772587"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5772590">.</span><span class="ident" id="5772591"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5772592">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772595">i1</span>&nbsp;<span class="op" id="5772598">:=</span>&nbsp;<span class="ident" id="5772601"><a href="/gostd/image/draw/draw.go.html#5772556">i0</a></span>&nbsp;<span class="op" id="5772604">+</span>&nbsp;<span class="ident" id="5772606"><a href="/gostd/image/draw/draw.go.html#5772403">r</a></span><span class="op" id="5772607">.</span><span class="ident" id="5772608"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5772610">(</span><span class="op" id="5772611">)</span><span class="op" id="5772612">*</span><span class="num" id="5772613">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772616">for</span>&nbsp;<span class="ident" id="5772620">y</span>&nbsp;<span class="op" id="5772622">:=</span>&nbsp;<span class="ident" id="5772625"><a href="/gostd/image/draw/draw.go.html#5772403">r</a></span><span class="op" id="5772626">.</span><span class="ident" id="5772627"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5772630">.</span><span class="ident" id="5772631"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5772632">;</span>&nbsp;<span class="ident" id="5772634"><a href="/gostd/image/draw/draw.go.html#5772620">y</a></span>&nbsp;<span class="op" id="5772636">!=</span>&nbsp;<span class="ident" id="5772639"><a href="/gostd/image/draw/draw.go.html#5772403">r</a></span><span class="op" id="5772640">.</span><span class="ident" id="5772641"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5772644">.</span><span class="ident" id="5772645"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5772646">;</span>&nbsp;<span class="ident" id="5772648"><a href="/gostd/image/draw/draw.go.html#5772620">y</a></span><span class="op" id="5772649">++</span>&nbsp;<span class="op" id="5772652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5772656">for</span>&nbsp;<span class="ident" id="5772660">i</span>&nbsp;<span class="op" id="5772662">:=</span>&nbsp;<span class="ident" id="5772665"><a href="/gostd/image/draw/draw.go.html#5772556">i0</a></span><span class="op" id="5772667">;</span>&nbsp;<span class="ident" id="5772669"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span>&nbsp;<span class="op" id="5772671">&lt;</span>&nbsp;<span class="ident" id="5772673"><a href="/gostd/image/draw/draw.go.html#5772595">i1</a></span><span class="op" id="5772675">;</span>&nbsp;<span class="ident" id="5772677"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span>&nbsp;<span class="op" id="5772679">+=</span>&nbsp;<span class="num" id="5772682">4</span>&nbsp;<span class="op" id="5772684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772689">dr</span>&nbsp;<span class="op" id="5772692">:=</span>&nbsp;<span class="builtintype" id="5772695">uint32</span><span class="op" id="5772701">(</span><span class="ident" id="5772702"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772705">.</span><span class="ident" id="5772706"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772709">[</span><span class="ident" id="5772710"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772711">+</span><span class="num" id="5772712">0</span><span class="op" id="5772713">]</span><span class="op" id="5772714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772719">dg</span>&nbsp;<span class="op" id="5772722">:=</span>&nbsp;<span class="builtintype" id="5772725">uint32</span><span class="op" id="5772731">(</span><span class="ident" id="5772732"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772735">.</span><span class="ident" id="5772736"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772739">[</span><span class="ident" id="5772740"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772741">+</span><span class="num" id="5772742">1</span><span class="op" id="5772743">]</span><span class="op" id="5772744">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772749">db</span>&nbsp;<span class="op" id="5772752">:=</span>&nbsp;<span class="builtintype" id="5772755">uint32</span><span class="op" id="5772761">(</span><span class="ident" id="5772762"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772765">.</span><span class="ident" id="5772766"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772769">[</span><span class="ident" id="5772770"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772771">+</span><span class="num" id="5772772">2</span><span class="op" id="5772773">]</span><span class="op" id="5772774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772779">da</span>&nbsp;<span class="op" id="5772782">:=</span>&nbsp;<span class="builtintype" id="5772785">uint32</span><span class="op" id="5772791">(</span><span class="ident" id="5772792"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772795">.</span><span class="ident" id="5772796"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772799">[</span><span class="ident" id="5772800"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772801">+</span><span class="num" id="5772802">3</span><span class="op" id="5772803">]</span><span class="op" id="5772804">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772810"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772813">.</span><span class="ident" id="5772814"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772817">[</span><span class="ident" id="5772818"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772819">+</span><span class="num" id="5772820">0</span><span class="op" id="5772821">]</span>&nbsp;<span class="op" id="5772823">=</span>&nbsp;<span class="builtintype" id="5772825">uint8</span><span class="op" id="5772830">(</span><span class="op" id="5772831">(</span><span class="ident" id="5772832"><a href="/gostd/image/draw/draw.go.html#5772689">dr</a></span><span class="op" id="5772834">*</span><span class="ident" id="5772835"><a href="/gostd/image/draw/draw.go.html#5772533">a</a></span><span class="op" id="5772836">/</span><span class="ident" id="5772837"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5772839">+</span>&nbsp;<span class="ident" id="5772841"><a href="/gostd/image/draw/draw.go.html#5772445">sr</a></span><span class="op" id="5772843">)</span>&nbsp;<span class="op" id="5772845">&gt;&gt;</span>&nbsp;<span class="num" id="5772848">8</span><span class="op" id="5772849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772854"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772857">.</span><span class="ident" id="5772858"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772861">[</span><span class="ident" id="5772862"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772863">+</span><span class="num" id="5772864">1</span><span class="op" id="5772865">]</span>&nbsp;<span class="op" id="5772867">=</span>&nbsp;<span class="builtintype" id="5772869">uint8</span><span class="op" id="5772874">(</span><span class="op" id="5772875">(</span><span class="ident" id="5772876"><a href="/gostd/image/draw/draw.go.html#5772719">dg</a></span><span class="op" id="5772878">*</span><span class="ident" id="5772879"><a href="/gostd/image/draw/draw.go.html#5772533">a</a></span><span class="op" id="5772880">/</span><span class="ident" id="5772881"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5772883">+</span>&nbsp;<span class="ident" id="5772885"><a href="/gostd/image/draw/draw.go.html#5772449">sg</a></span><span class="op" id="5772887">)</span>&nbsp;<span class="op" id="5772889">&gt;&gt;</span>&nbsp;<span class="num" id="5772892">8</span><span class="op" id="5772893">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772898"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772901">.</span><span class="ident" id="5772902"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772905">[</span><span class="ident" id="5772906"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772907">+</span><span class="num" id="5772908">2</span><span class="op" id="5772909">]</span>&nbsp;<span class="op" id="5772911">=</span>&nbsp;<span class="builtintype" id="5772913">uint8</span><span class="op" id="5772918">(</span><span class="op" id="5772919">(</span><span class="ident" id="5772920"><a href="/gostd/image/draw/draw.go.html#5772749">db</a></span><span class="op" id="5772922">*</span><span class="ident" id="5772923"><a href="/gostd/image/draw/draw.go.html#5772533">a</a></span><span class="op" id="5772924">/</span><span class="ident" id="5772925"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5772927">+</span>&nbsp;<span class="ident" id="5772929"><a href="/gostd/image/draw/draw.go.html#5772453">sb</a></span><span class="op" id="5772931">)</span>&nbsp;<span class="op" id="5772933">&gt;&gt;</span>&nbsp;<span class="num" id="5772936">8</span><span class="op" id="5772937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772942"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772945">.</span><span class="ident" id="5772946"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5772949">[</span><span class="ident" id="5772950"><a href="/gostd/image/draw/draw.go.html#5772660">i</a></span><span class="op" id="5772951">+</span><span class="num" id="5772952">3</span><span class="op" id="5772953">]</span>&nbsp;<span class="op" id="5772955">=</span>&nbsp;<span class="builtintype" id="5772957">uint8</span><span class="op" id="5772962">(</span><span class="op" id="5772963">(</span><span class="ident" id="5772964"><a href="/gostd/image/draw/draw.go.html#5772779">da</a></span><span class="op" id="5772966">*</span><span class="ident" id="5772967"><a href="/gostd/image/draw/draw.go.html#5772533">a</a></span><span class="op" id="5772968">/</span><span class="ident" id="5772969"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5772971">+</span>&nbsp;<span class="ident" id="5772973"><a href="/gostd/image/draw/draw.go.html#5772457">sa</a></span><span class="op" id="5772975">)</span>&nbsp;<span class="op" id="5772977">&gt;&gt;</span>&nbsp;<span class="num" id="5772980">8</span><span class="op" id="5772981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5772985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5772989"><a href="/gostd/image/draw/draw.go.html#5772556">i0</a></span>&nbsp;<span class="op" id="5772992">+=</span>&nbsp;<span class="ident" id="5772995"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5772998">.</span><span class="ident" id="5772999"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773008"><a href="/gostd/image/draw/draw.go.html#5772595">i1</a></span>&nbsp;<span class="op" id="5773011">+=</span>&nbsp;<span class="ident" id="5773014"><a href="/gostd/image/draw/draw.go.html#5772386">dst</a></span><span class="op" id="5773017">.</span><span class="ident" id="5773018"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773026">}</span><br>
<span class="lineno"></span><span class="op" id="5773028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5773031">func</span>&nbsp;<span class="ident" id="5773036">drawFillSrc</span><span class="op" id="5773047">(</span><span class="ident" id="5773048">dst</span>&nbsp;<span class="op" id="5773052">*</span><span class="ident" id="5773053"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773058">.</span><span class="ident" id="5773059"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5773063">,</span>&nbsp;<span class="ident" id="5773065">r</span>&nbsp;<span class="ident" id="5773067"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773072">.</span><span class="ident" id="5773073"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5773082">,</span>&nbsp;<span class="ident" id="5773084">src</span>&nbsp;<span class="op" id="5773088">*</span><span class="ident" id="5773089"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773094">.</span><span class="ident" id="5773095"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5773102">)</span>&nbsp;<span class="op" id="5773104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773107">sr</span><span class="op" id="5773109">,</span>&nbsp;<span class="ident" id="5773111">sg</span><span class="op" id="5773113">,</span>&nbsp;<span class="ident" id="5773115">sb</span><span class="op" id="5773117">,</span>&nbsp;<span class="ident" id="5773119">sa</span>&nbsp;<span class="op" id="5773122">:=</span>&nbsp;<span class="ident" id="5773125"><a href="/gostd/image/draw/draw.go.html#5773084">src</a></span><span class="op" id="5773128">.</span><span class="ident" id="5773129"><a href="/gostd/image/names.go.html#5179842">RGBA</a></span><span class="op" id="5773133">(</span><span class="op" id="5773134">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5773137">//&nbsp;The&nbsp;built-in&nbsp;copy&nbsp;function&nbsp;is&nbsp;faster&nbsp;than&nbsp;a&nbsp;straightforward&nbsp;for&nbsp;loop&nbsp;to&nbsp;fill&nbsp;the&nbsp;destination&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5773239">//&nbsp;the&nbsp;color,&nbsp;but&nbsp;copy&nbsp;requires&nbsp;a&nbsp;slice&nbsp;source.&nbsp;We&nbsp;therefore&nbsp;use&nbsp;a&nbsp;for&nbsp;loop&nbsp;to&nbsp;fill&nbsp;the&nbsp;first&nbsp;row,&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5773343">//&nbsp;then&nbsp;use&nbsp;the&nbsp;first&nbsp;row&nbsp;as&nbsp;the&nbsp;slice&nbsp;source&nbsp;for&nbsp;the&nbsp;remaining&nbsp;rows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773414">i0</span>&nbsp;<span class="op" id="5773417">:=</span>&nbsp;<span class="ident" id="5773420"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773423">.</span><span class="ident" id="5773424"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5773433">(</span><span class="ident" id="5773434"><a href="/gostd/image/draw/draw.go.html#5773065">r</a></span><span class="op" id="5773435">.</span><span class="ident" id="5773436"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5773439">.</span><span class="ident" id="5773440"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5773441">,</span>&nbsp;<span class="ident" id="5773443"><a href="/gostd/image/draw/draw.go.html#5773065">r</a></span><span class="op" id="5773444">.</span><span class="ident" id="5773445"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5773448">.</span><span class="ident" id="5773449"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5773450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773453">i1</span>&nbsp;<span class="op" id="5773456">:=</span>&nbsp;<span class="ident" id="5773459"><a href="/gostd/image/draw/draw.go.html#5773414">i0</a></span>&nbsp;<span class="op" id="5773462">+</span>&nbsp;<span class="ident" id="5773464"><a href="/gostd/image/draw/draw.go.html#5773065">r</a></span><span class="op" id="5773465">.</span><span class="ident" id="5773466"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5773468">(</span><span class="op" id="5773469">)</span><span class="op" id="5773470">*</span><span class="num" id="5773471">4</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773474">for</span>&nbsp;<span class="ident" id="5773478">i</span>&nbsp;<span class="op" id="5773480">:=</span>&nbsp;<span class="ident" id="5773483"><a href="/gostd/image/draw/draw.go.html#5773414">i0</a></span><span class="op" id="5773485">;</span>&nbsp;<span class="ident" id="5773487"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span>&nbsp;<span class="op" id="5773489">&lt;</span>&nbsp;<span class="ident" id="5773491"><a href="/gostd/image/draw/draw.go.html#5773453">i1</a></span><span class="op" id="5773493">;</span>&nbsp;<span class="ident" id="5773495"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span>&nbsp;<span class="op" id="5773497">+=</span>&nbsp;<span class="num" id="5773500">4</span>&nbsp;<span class="op" id="5773502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773506"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773509">.</span><span class="ident" id="5773510"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773513">[</span><span class="ident" id="5773514"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span><span class="op" id="5773515">+</span><span class="num" id="5773516">0</span><span class="op" id="5773517">]</span>&nbsp;<span class="op" id="5773519">=</span>&nbsp;<span class="builtintype" id="5773521">uint8</span><span class="op" id="5773526">(</span><span class="ident" id="5773527"><a href="/gostd/image/draw/draw.go.html#5773107">sr</a></span>&nbsp;<span class="op" id="5773530">&gt;&gt;</span>&nbsp;<span class="num" id="5773533">8</span><span class="op" id="5773534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773538"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773541">.</span><span class="ident" id="5773542"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773545">[</span><span class="ident" id="5773546"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span><span class="op" id="5773547">+</span><span class="num" id="5773548">1</span><span class="op" id="5773549">]</span>&nbsp;<span class="op" id="5773551">=</span>&nbsp;<span class="builtintype" id="5773553">uint8</span><span class="op" id="5773558">(</span><span class="ident" id="5773559"><a href="/gostd/image/draw/draw.go.html#5773111">sg</a></span>&nbsp;<span class="op" id="5773562">&gt;&gt;</span>&nbsp;<span class="num" id="5773565">8</span><span class="op" id="5773566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773570"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773573">.</span><span class="ident" id="5773574"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773577">[</span><span class="ident" id="5773578"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span><span class="op" id="5773579">+</span><span class="num" id="5773580">2</span><span class="op" id="5773581">]</span>&nbsp;<span class="op" id="5773583">=</span>&nbsp;<span class="builtintype" id="5773585">uint8</span><span class="op" id="5773590">(</span><span class="ident" id="5773591"><a href="/gostd/image/draw/draw.go.html#5773115">sb</a></span>&nbsp;<span class="op" id="5773594">&gt;&gt;</span>&nbsp;<span class="num" id="5773597">8</span><span class="op" id="5773598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773602"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773605">.</span><span class="ident" id="5773606"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773609">[</span><span class="ident" id="5773610"><a href="/gostd/image/draw/draw.go.html#5773478">i</a></span><span class="op" id="5773611">+</span><span class="num" id="5773612">3</span><span class="op" id="5773613">]</span>&nbsp;<span class="op" id="5773615">=</span>&nbsp;<span class="builtintype" id="5773617">uint8</span><span class="op" id="5773622">(</span><span class="ident" id="5773623"><a href="/gostd/image/draw/draw.go.html#5773119">sa</a></span>&nbsp;<span class="op" id="5773626">&gt;&gt;</span>&nbsp;<span class="num" id="5773629">8</span><span class="op" id="5773630">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773636">firstRow</span>&nbsp;<span class="op" id="5773645">:=</span>&nbsp;<span class="ident" id="5773648"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773651">.</span><span class="ident" id="5773652"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773655">[</span><span class="ident" id="5773656"><a href="/gostd/image/draw/draw.go.html#5773414">i0</a></span><span class="op" id="5773658">:</span><span class="ident" id="5773659"><a href="/gostd/image/draw/draw.go.html#5773453">i1</a></span><span class="op" id="5773661">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773664">for</span>&nbsp;<span class="ident" id="5773668">y</span>&nbsp;<span class="op" id="5773670">:=</span>&nbsp;<span class="ident" id="5773673"><a href="/gostd/image/draw/draw.go.html#5773065">r</a></span><span class="op" id="5773674">.</span><span class="ident" id="5773675"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5773678">.</span><span class="ident" id="5773679"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5773681">+</span>&nbsp;<span class="num" id="5773683">1</span><span class="op" id="5773684">;</span>&nbsp;<span class="ident" id="5773686"><a href="/gostd/image/draw/draw.go.html#5773668">y</a></span>&nbsp;<span class="op" id="5773688">&lt;</span>&nbsp;<span class="ident" id="5773690"><a href="/gostd/image/draw/draw.go.html#5773065">r</a></span><span class="op" id="5773691">.</span><span class="ident" id="5773692"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5773695">.</span><span class="ident" id="5773696"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5773697">;</span>&nbsp;<span class="ident" id="5773699"><a href="/gostd/image/draw/draw.go.html#5773668">y</a></span><span class="op" id="5773700">++</span>&nbsp;<span class="op" id="5773703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773707"><a href="/gostd/image/draw/draw.go.html#5773414">i0</a></span>&nbsp;<span class="op" id="5773710">+=</span>&nbsp;<span class="ident" id="5773713"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773716">.</span><span class="ident" id="5773717"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773726"><a href="/gostd/image/draw/draw.go.html#5773453">i1</a></span>&nbsp;<span class="op" id="5773729">+=</span>&nbsp;<span class="ident" id="5773732"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773735">.</span><span class="ident" id="5773736"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5773745">copy</span><span class="op" id="5773749">(</span><span class="ident" id="5773750"><a href="/gostd/image/draw/draw.go.html#5773048">dst</a></span><span class="op" id="5773753">.</span><span class="ident" id="5773754"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5773757">[</span><span class="ident" id="5773758"><a href="/gostd/image/draw/draw.go.html#5773414">i0</a></span><span class="op" id="5773760">:</span><span class="ident" id="5773761"><a href="/gostd/image/draw/draw.go.html#5773453">i1</a></span><span class="op" id="5773763">]</span><span class="op" id="5773764">,</span>&nbsp;<span class="ident" id="5773766"><a href="/gostd/image/draw/draw.go.html#5773636">firstRow</a></span><span class="op" id="5773774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5773777">}</span><br>
<span class="lineno"></span><span class="op" id="5773779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5773782">func</span>&nbsp;<span class="ident" id="5773787">drawCopyOver</span><span class="op" id="5773799">(</span><span class="ident" id="5773800">dst</span>&nbsp;<span class="op" id="5773804">*</span><span class="ident" id="5773805"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773810">.</span><span class="ident" id="5773811"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5773815">,</span>&nbsp;<span class="ident" id="5773817">r</span>&nbsp;<span class="ident" id="5773819"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773824">.</span><span class="ident" id="5773825"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5773834">,</span>&nbsp;<span class="ident" id="5773836">src</span>&nbsp;<span class="op" id="5773840">*</span><span class="ident" id="5773841"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773846">.</span><span class="ident" id="5773847"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5773851">,</span>&nbsp;<span class="ident" id="5773853">sp</span>&nbsp;<span class="ident" id="5773856"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5773861">.</span><span class="ident" id="5773862"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5773867">)</span>&nbsp;<span class="op" id="5773869">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773872">dx</span><span class="op" id="5773874">,</span>&nbsp;<span class="ident" id="5773876">dy</span>&nbsp;<span class="op" id="5773879">:=</span>&nbsp;<span class="ident" id="5773882"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5773883">.</span><span class="ident" id="5773884"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5773886">(</span><span class="op" id="5773887">)</span><span class="op" id="5773888">,</span>&nbsp;<span class="ident" id="5773890"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5773891">.</span><span class="ident" id="5773892"><a href="/gostd/image/geom.go.html#5150316">Dy</a></span><span class="op" id="5773894">(</span><span class="op" id="5773895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773898">d0</span>&nbsp;<span class="op" id="5773901">:=</span>&nbsp;<span class="ident" id="5773904"><a href="/gostd/image/draw/draw.go.html#5773800">dst</a></span><span class="op" id="5773907">.</span><span class="ident" id="5773908"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5773917">(</span><span class="ident" id="5773918"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5773919">.</span><span class="ident" id="5773920"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5773923">.</span><span class="ident" id="5773924"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5773925">,</span>&nbsp;<span class="ident" id="5773927"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5773928">.</span><span class="ident" id="5773929"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5773932">.</span><span class="ident" id="5773933"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5773934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773937">s0</span>&nbsp;<span class="op" id="5773940">:=</span>&nbsp;<span class="ident" id="5773943"><a href="/gostd/image/draw/draw.go.html#5773836">src</a></span><span class="op" id="5773946">.</span><span class="ident" id="5773947"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5773956">(</span><span class="ident" id="5773957"><a href="/gostd/image/draw/draw.go.html#5773853">sp</a></span><span class="op" id="5773959">.</span><span class="ident" id="5773960"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5773961">,</span>&nbsp;<span class="ident" id="5773963"><a href="/gostd/image/draw/draw.go.html#5773853">sp</a></span><span class="op" id="5773965">.</span><span class="ident" id="5773966"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5773967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5773970">var</span>&nbsp;<span class="op" id="5773974">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773978">ddelta</span><span class="op" id="5773984">,</span>&nbsp;<span class="ident" id="5773986">sdelta</span>&nbsp;<span class="builtintype" id="5773993">int</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5773999">i0</span><span class="op" id="5774001">,</span>&nbsp;<span class="ident" id="5774003">i1</span><span class="op" id="5774005">,</span>&nbsp;<span class="ident" id="5774007">idelta</span>&nbsp;<span class="builtintype" id="5774014">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774022">if</span>&nbsp;<span class="ident" id="5774025"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5774026">.</span><span class="ident" id="5774027"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5774030">.</span><span class="ident" id="5774031"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5774033">&lt;</span>&nbsp;<span class="ident" id="5774035"><a href="/gostd/image/draw/draw.go.html#5773853">sp</a></span><span class="op" id="5774037">.</span><span class="ident" id="5774038"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5774040">||</span>&nbsp;<span class="ident" id="5774043"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5774044">.</span><span class="ident" id="5774045"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5774048">.</span><span class="ident" id="5774049"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5774051">==</span>&nbsp;<span class="ident" id="5774054"><a href="/gostd/image/draw/draw.go.html#5773853">sp</a></span><span class="op" id="5774056">.</span><span class="ident" id="5774057"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5774059">&amp;&amp;</span>&nbsp;<span class="ident" id="5774062"><a href="/gostd/image/draw/draw.go.html#5773817">r</a></span><span class="op" id="5774063">.</span><span class="ident" id="5774064"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5774067">.</span><span class="ident" id="5774068"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5774070">&lt;=</span>&nbsp;<span class="ident" id="5774073"><a href="/gostd/image/draw/draw.go.html#5773853">sp</a></span><span class="op" id="5774075">.</span><span class="ident" id="5774076"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5774078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774082"><a href="/gostd/image/draw/draw.go.html#5773978">ddelta</a></span>&nbsp;<span class="op" id="5774089">=</span>&nbsp;<span class="ident" id="5774091"><a href="/gostd/image/draw/draw.go.html#5773800">dst</a></span><span class="op" id="5774094">.</span><span class="ident" id="5774095"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774104"><a href="/gostd/image/draw/draw.go.html#5773986">sdelta</a></span>&nbsp;<span class="op" id="5774111">=</span>&nbsp;<span class="ident" id="5774113"><a href="/gostd/image/draw/draw.go.html#5773836">src</a></span><span class="op" id="5774116">.</span><span class="ident" id="5774117"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774126"><a href="/gostd/image/draw/draw.go.html#5773999">i0</a></span><span class="op" id="5774128">,</span>&nbsp;<span class="ident" id="5774130"><a href="/gostd/image/draw/draw.go.html#5774003">i1</a></span><span class="op" id="5774132">,</span>&nbsp;<span class="ident" id="5774134"><a href="/gostd/image/draw/draw.go.html#5774007">idelta</a></span>&nbsp;<span class="op" id="5774141">=</span>&nbsp;<span class="num" id="5774143">0</span><span class="op" id="5774144">,</span>&nbsp;<span class="ident" id="5774146"><a href="/gostd/image/draw/draw.go.html#5773872">dx</a></span><span class="op" id="5774148">*</span><span class="num" id="5774149">4</span><span class="op" id="5774150">,</span>&nbsp;<span class="op" id="5774152">+</span><span class="num" id="5774153">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774156">}</span>&nbsp;<span class="keyword" id="5774158">else</span>&nbsp;<span class="op" id="5774163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5774167">//&nbsp;If&nbsp;the&nbsp;source&nbsp;start&nbsp;point&nbsp;is&nbsp;higher&nbsp;than&nbsp;the&nbsp;destination&nbsp;start&nbsp;point,&nbsp;or&nbsp;equal&nbsp;height&nbsp;but&nbsp;to&nbsp;the&nbsp;left,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5774275">//&nbsp;then&nbsp;we&nbsp;compose&nbsp;the&nbsp;rows&nbsp;in&nbsp;right-to-left,&nbsp;bottom-up&nbsp;order&nbsp;instead&nbsp;of&nbsp;left-to-right,&nbsp;top-down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774375"><a href="/gostd/image/draw/draw.go.html#5773898">d0</a></span>&nbsp;<span class="op" id="5774378">+=</span>&nbsp;<span class="op" id="5774381">(</span><span class="ident" id="5774382"><a href="/gostd/image/draw/draw.go.html#5773876">dy</a></span>&nbsp;<span class="op" id="5774385">-</span>&nbsp;<span class="num" id="5774387">1</span><span class="op" id="5774388">)</span>&nbsp;<span class="op" id="5774390">*</span>&nbsp;<span class="ident" id="5774392"><a href="/gostd/image/draw/draw.go.html#5773800">dst</a></span><span class="op" id="5774395">.</span><span class="ident" id="5774396"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774405"><a href="/gostd/image/draw/draw.go.html#5773937">s0</a></span>&nbsp;<span class="op" id="5774408">+=</span>&nbsp;<span class="op" id="5774411">(</span><span class="ident" id="5774412"><a href="/gostd/image/draw/draw.go.html#5773876">dy</a></span>&nbsp;<span class="op" id="5774415">-</span>&nbsp;<span class="num" id="5774417">1</span><span class="op" id="5774418">)</span>&nbsp;<span class="op" id="5774420">*</span>&nbsp;<span class="ident" id="5774422"><a href="/gostd/image/draw/draw.go.html#5773836">src</a></span><span class="op" id="5774425">.</span><span class="ident" id="5774426"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774435"><a href="/gostd/image/draw/draw.go.html#5773978">ddelta</a></span>&nbsp;<span class="op" id="5774442">=</span>&nbsp;<span class="op" id="5774444">-</span><span class="ident" id="5774445"><a href="/gostd/image/draw/draw.go.html#5773800">dst</a></span><span class="op" id="5774448">.</span><span class="ident" id="5774449"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774458"><a href="/gostd/image/draw/draw.go.html#5773986">sdelta</a></span>&nbsp;<span class="op" id="5774465">=</span>&nbsp;<span class="op" id="5774467">-</span><span class="ident" id="5774468"><a href="/gostd/image/draw/draw.go.html#5773836">src</a></span><span class="op" id="5774471">.</span><span class="ident" id="5774472"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774481"><a href="/gostd/image/draw/draw.go.html#5773999">i0</a></span><span class="op" id="5774483">,</span>&nbsp;<span class="ident" id="5774485"><a href="/gostd/image/draw/draw.go.html#5774003">i1</a></span><span class="op" id="5774487">,</span>&nbsp;<span class="ident" id="5774489"><a href="/gostd/image/draw/draw.go.html#5774007">idelta</a></span>&nbsp;<span class="op" id="5774496">=</span>&nbsp;<span class="op" id="5774498">(</span><span class="ident" id="5774499"><a href="/gostd/image/draw/draw.go.html#5773872">dx</a></span><span class="op" id="5774501">-</span><span class="num" id="5774502">1</span><span class="op" id="5774503">)</span><span class="op" id="5774504">*</span><span class="num" id="5774505">4</span><span class="op" id="5774506">,</span>&nbsp;<span class="op" id="5774508">-</span><span class="num" id="5774509">4</span><span class="op" id="5774510">,</span>&nbsp;<span class="op" id="5774512">-</span><span class="num" id="5774513">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5774516">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774519">for</span>&nbsp;<span class="op" id="5774523">;</span>&nbsp;<span class="ident" id="5774525"><a href="/gostd/image/draw/draw.go.html#5773876">dy</a></span>&nbsp;<span class="op" id="5774528">&gt;</span>&nbsp;<span class="num" id="5774530">0</span><span class="op" id="5774531">;</span>&nbsp;<span class="ident" id="5774533"><a href="/gostd/image/draw/draw.go.html#5773876">dy</a></span><span class="op" id="5774535">--</span>&nbsp;<span class="op" id="5774538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774542">dpix</span>&nbsp;<span class="op" id="5774547">:=</span>&nbsp;<span class="ident" id="5774550"><a href="/gostd/image/draw/draw.go.html#5773800">dst</a></span><span class="op" id="5774553">.</span><span class="ident" id="5774554"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5774557">[</span><span class="ident" id="5774558"><a href="/gostd/image/draw/draw.go.html#5773898">d0</a></span><span class="op" id="5774560">:</span><span class="op" id="5774561">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774565">spix</span>&nbsp;<span class="op" id="5774570">:=</span>&nbsp;<span class="ident" id="5774573"><a href="/gostd/image/draw/draw.go.html#5773836">src</a></span><span class="op" id="5774576">.</span><span class="ident" id="5774577"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5774580">[</span><span class="ident" id="5774581"><a href="/gostd/image/draw/draw.go.html#5773937">s0</a></span><span class="op" id="5774583">:</span><span class="op" id="5774584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5774588">for</span>&nbsp;<span class="ident" id="5774592">i</span>&nbsp;<span class="op" id="5774594">:=</span>&nbsp;<span class="ident" id="5774597"><a href="/gostd/image/draw/draw.go.html#5773999">i0</a></span><span class="op" id="5774599">;</span>&nbsp;<span class="ident" id="5774601"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span>&nbsp;<span class="op" id="5774603">!=</span>&nbsp;<span class="ident" id="5774606"><a href="/gostd/image/draw/draw.go.html#5774003">i1</a></span><span class="op" id="5774608">;</span>&nbsp;<span class="ident" id="5774610"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span>&nbsp;<span class="op" id="5774612">+=</span>&nbsp;<span class="ident" id="5774615"><a href="/gostd/image/draw/draw.go.html#5774007">idelta</a></span>&nbsp;<span class="op" id="5774622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774627">sr</span>&nbsp;<span class="op" id="5774630">:=</span>&nbsp;<span class="builtintype" id="5774633">uint32</span><span class="op" id="5774639">(</span><span class="ident" id="5774640"><a href="/gostd/image/draw/draw.go.html#5774565">spix</a></span><span class="op" id="5774644">[</span><span class="ident" id="5774645"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774646">+</span><span class="num" id="5774647">0</span><span class="op" id="5774648">]</span><span class="op" id="5774649">)</span>&nbsp;<span class="op" id="5774651">*</span>&nbsp;<span class="num" id="5774653">0x101</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774662">sg</span>&nbsp;<span class="op" id="5774665">:=</span>&nbsp;<span class="builtintype" id="5774668">uint32</span><span class="op" id="5774674">(</span><span class="ident" id="5774675"><a href="/gostd/image/draw/draw.go.html#5774565">spix</a></span><span class="op" id="5774679">[</span><span class="ident" id="5774680"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774681">+</span><span class="num" id="5774682">1</span><span class="op" id="5774683">]</span><span class="op" id="5774684">)</span>&nbsp;<span class="op" id="5774686">*</span>&nbsp;<span class="num" id="5774688">0x101</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774697">sb</span>&nbsp;<span class="op" id="5774700">:=</span>&nbsp;<span class="builtintype" id="5774703">uint32</span><span class="op" id="5774709">(</span><span class="ident" id="5774710"><a href="/gostd/image/draw/draw.go.html#5774565">spix</a></span><span class="op" id="5774714">[</span><span class="ident" id="5774715"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774716">+</span><span class="num" id="5774717">2</span><span class="op" id="5774718">]</span><span class="op" id="5774719">)</span>&nbsp;<span class="op" id="5774721">*</span>&nbsp;<span class="num" id="5774723">0x101</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774732">sa</span>&nbsp;<span class="op" id="5774735">:=</span>&nbsp;<span class="builtintype" id="5774738">uint32</span><span class="op" id="5774744">(</span><span class="ident" id="5774745"><a href="/gostd/image/draw/draw.go.html#5774565">spix</a></span><span class="op" id="5774749">[</span><span class="ident" id="5774750"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774751">+</span><span class="num" id="5774752">3</span><span class="op" id="5774753">]</span><span class="op" id="5774754">)</span>&nbsp;<span class="op" id="5774756">*</span>&nbsp;<span class="num" id="5774758">0x101</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774768">dr</span>&nbsp;<span class="op" id="5774771">:=</span>&nbsp;<span class="builtintype" id="5774774">uint32</span><span class="op" id="5774780">(</span><span class="ident" id="5774781"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5774785">[</span><span class="ident" id="5774786"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774787">+</span><span class="num" id="5774788">0</span><span class="op" id="5774789">]</span><span class="op" id="5774790">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774795">dg</span>&nbsp;<span class="op" id="5774798">:=</span>&nbsp;<span class="builtintype" id="5774801">uint32</span><span class="op" id="5774807">(</span><span class="ident" id="5774808"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5774812">[</span><span class="ident" id="5774813"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774814">+</span><span class="num" id="5774815">1</span><span class="op" id="5774816">]</span><span class="op" id="5774817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774822">db</span>&nbsp;<span class="op" id="5774825">:=</span>&nbsp;<span class="builtintype" id="5774828">uint32</span><span class="op" id="5774834">(</span><span class="ident" id="5774835"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5774839">[</span><span class="ident" id="5774840"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774841">+</span><span class="num" id="5774842">2</span><span class="op" id="5774843">]</span><span class="op" id="5774844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774849">da</span>&nbsp;<span class="op" id="5774852">:=</span>&nbsp;<span class="builtintype" id="5774855">uint32</span><span class="op" id="5774861">(</span><span class="ident" id="5774862"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5774866">[</span><span class="ident" id="5774867"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774868">+</span><span class="num" id="5774869">3</span><span class="op" id="5774870">]</span><span class="op" id="5774871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5774877">//&nbsp;The&nbsp;0x101&nbsp;is&nbsp;here&nbsp;for&nbsp;the&nbsp;same&nbsp;reason&nbsp;as&nbsp;in&nbsp;drawRGBA.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774937">a</span>&nbsp;<span class="op" id="5774939">:=</span>&nbsp;<span class="op" id="5774942">(</span><span class="ident" id="5774943"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5774945">-</span>&nbsp;<span class="ident" id="5774947"><a href="/gostd/image/draw/draw.go.html#5774732">sa</a></span><span class="op" id="5774949">)</span>&nbsp;<span class="op" id="5774951">*</span>&nbsp;<span class="num" id="5774953">0x101</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5774963"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5774967">[</span><span class="ident" id="5774968"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5774969">+</span><span class="num" id="5774970">0</span><span class="op" id="5774971">]</span>&nbsp;<span class="op" id="5774973">=</span>&nbsp;<span class="builtintype" id="5774975">uint8</span><span class="op" id="5774980">(</span><span class="op" id="5774981">(</span><span class="ident" id="5774982"><a href="/gostd/image/draw/draw.go.html#5774768">dr</a></span><span class="op" id="5774984">*</span><span class="ident" id="5774985"><a href="/gostd/image/draw/draw.go.html#5774937">a</a></span><span class="op" id="5774986">/</span><span class="ident" id="5774987"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5774989">+</span>&nbsp;<span class="ident" id="5774991"><a href="/gostd/image/draw/draw.go.html#5774627">sr</a></span><span class="op" id="5774993">)</span>&nbsp;<span class="op" id="5774995">&gt;&gt;</span>&nbsp;<span class="num" id="5774998">8</span><span class="op" id="5774999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775004"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5775008">[</span><span class="ident" id="5775009"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5775010">+</span><span class="num" id="5775011">1</span><span class="op" id="5775012">]</span>&nbsp;<span class="op" id="5775014">=</span>&nbsp;<span class="builtintype" id="5775016">uint8</span><span class="op" id="5775021">(</span><span class="op" id="5775022">(</span><span class="ident" id="5775023"><a href="/gostd/image/draw/draw.go.html#5774795">dg</a></span><span class="op" id="5775025">*</span><span class="ident" id="5775026"><a href="/gostd/image/draw/draw.go.html#5774937">a</a></span><span class="op" id="5775027">/</span><span class="ident" id="5775028"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5775030">+</span>&nbsp;<span class="ident" id="5775032"><a href="/gostd/image/draw/draw.go.html#5774662">sg</a></span><span class="op" id="5775034">)</span>&nbsp;<span class="op" id="5775036">&gt;&gt;</span>&nbsp;<span class="num" id="5775039">8</span><span class="op" id="5775040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775045"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5775049">[</span><span class="ident" id="5775050"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5775051">+</span><span class="num" id="5775052">2</span><span class="op" id="5775053">]</span>&nbsp;<span class="op" id="5775055">=</span>&nbsp;<span class="builtintype" id="5775057">uint8</span><span class="op" id="5775062">(</span><span class="op" id="5775063">(</span><span class="ident" id="5775064"><a href="/gostd/image/draw/draw.go.html#5774822">db</a></span><span class="op" id="5775066">*</span><span class="ident" id="5775067"><a href="/gostd/image/draw/draw.go.html#5774937">a</a></span><span class="op" id="5775068">/</span><span class="ident" id="5775069"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5775071">+</span>&nbsp;<span class="ident" id="5775073"><a href="/gostd/image/draw/draw.go.html#5774697">sb</a></span><span class="op" id="5775075">)</span>&nbsp;<span class="op" id="5775077">&gt;&gt;</span>&nbsp;<span class="num" id="5775080">8</span><span class="op" id="5775081">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775086"><a href="/gostd/image/draw/draw.go.html#5774542">dpix</a></span><span class="op" id="5775090">[</span><span class="ident" id="5775091"><a href="/gostd/image/draw/draw.go.html#5774592">i</a></span><span class="op" id="5775092">+</span><span class="num" id="5775093">3</span><span class="op" id="5775094">]</span>&nbsp;<span class="op" id="5775096">=</span>&nbsp;<span class="builtintype" id="5775098">uint8</span><span class="op" id="5775103">(</span><span class="op" id="5775104">(</span><span class="ident" id="5775105"><a href="/gostd/image/draw/draw.go.html#5774849">da</a></span><span class="op" id="5775107">*</span><span class="ident" id="5775108"><a href="/gostd/image/draw/draw.go.html#5774937">a</a></span><span class="op" id="5775109">/</span><span class="ident" id="5775110"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5775112">+</span>&nbsp;<span class="ident" id="5775114"><a href="/gostd/image/draw/draw.go.html#5774732">sa</a></span><span class="op" id="5775116">)</span>&nbsp;<span class="op" id="5775118">&gt;&gt;</span>&nbsp;<span class="num" id="5775121">8</span><span class="op" id="5775122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775130"><a href="/gostd/image/draw/draw.go.html#5773898">d0</a></span>&nbsp;<span class="op" id="5775133">+=</span>&nbsp;<span class="ident" id="5775136"><a href="/gostd/image/draw/draw.go.html#5773978">ddelta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775145"><a href="/gostd/image/draw/draw.go.html#5773937">s0</a></span>&nbsp;<span class="op" id="5775148">+=</span>&nbsp;<span class="ident" id="5775151"><a href="/gostd/image/draw/draw.go.html#5773986">sdelta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775159">}</span><br>
<span class="lineno">305</span><span class="op" id="5775161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5775164">func</span>&nbsp;<span class="ident" id="5775169">drawCopySrc</span><span class="op" id="5775180">(</span><span class="ident" id="5775181">dst</span>&nbsp;<span class="op" id="5775185">*</span><span class="ident" id="5775186"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775191">.</span><span class="ident" id="5775192"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5775196">,</span>&nbsp;<span class="ident" id="5775198">r</span>&nbsp;<span class="ident" id="5775200"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775205">.</span><span class="ident" id="5775206"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5775215">,</span>&nbsp;<span class="ident" id="5775217">src</span>&nbsp;<span class="op" id="5775221">*</span><span class="ident" id="5775222"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775227">.</span><span class="ident" id="5775228"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5775232">,</span>&nbsp;<span class="ident" id="5775234">sp</span>&nbsp;<span class="ident" id="5775237"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775242">.</span><span class="ident" id="5775243"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5775248">)</span>&nbsp;<span class="op" id="5775250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775253">n</span><span class="op" id="5775254">,</span>&nbsp;<span class="ident" id="5775256">dy</span>&nbsp;<span class="op" id="5775259">:=</span>&nbsp;<span class="num" id="5775262">4</span><span class="op" id="5775263">*</span><span class="ident" id="5775264"><a href="/gostd/image/draw/draw.go.html#5775198">r</a></span><span class="op" id="5775265">.</span><span class="ident" id="5775266"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5775268">(</span><span class="op" id="5775269">)</span><span class="op" id="5775270">,</span>&nbsp;<span class="ident" id="5775272"><a href="/gostd/image/draw/draw.go.html#5775198">r</a></span><span class="op" id="5775273">.</span><span class="ident" id="5775274"><a href="/gostd/image/geom.go.html#5150316">Dy</a></span><span class="op" id="5775276">(</span><span class="op" id="5775277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775280">d0</span>&nbsp;<span class="op" id="5775283">:=</span>&nbsp;<span class="ident" id="5775286"><a href="/gostd/image/draw/draw.go.html#5775181">dst</a></span><span class="op" id="5775289">.</span><span class="ident" id="5775290"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5775299">(</span><span class="ident" id="5775300"><a href="/gostd/image/draw/draw.go.html#5775198">r</a></span><span class="op" id="5775301">.</span><span class="ident" id="5775302"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5775305">.</span><span class="ident" id="5775306"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5775307">,</span>&nbsp;<span class="ident" id="5775309"><a href="/gostd/image/draw/draw.go.html#5775198">r</a></span><span class="op" id="5775310">.</span><span class="ident" id="5775311"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5775314">.</span><span class="ident" id="5775315"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5775316">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775319">s0</span>&nbsp;<span class="op" id="5775322">:=</span>&nbsp;<span class="ident" id="5775325"><a href="/gostd/image/draw/draw.go.html#5775217">src</a></span><span class="op" id="5775328">.</span><span class="ident" id="5775329"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5775338">(</span><span class="ident" id="5775339"><a href="/gostd/image/draw/draw.go.html#5775234">sp</a></span><span class="op" id="5775341">.</span><span class="ident" id="5775342"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5775343">,</span>&nbsp;<span class="ident" id="5775345"><a href="/gostd/image/draw/draw.go.html#5775234">sp</a></span><span class="op" id="5775347">.</span><span class="ident" id="5775348"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5775349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775352">var</span>&nbsp;<span class="ident" id="5775356">ddelta</span><span class="op" id="5775362">,</span>&nbsp;<span class="ident" id="5775364">sdelta</span>&nbsp;<span class="builtintype" id="5775371">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775376">if</span>&nbsp;<span class="ident" id="5775379"><a href="/gostd/image/draw/draw.go.html#5775198">r</a></span><span class="op" id="5775380">.</span><span class="ident" id="5775381"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5775384">.</span><span class="ident" id="5775385"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5775387">&lt;=</span>&nbsp;<span class="ident" id="5775390"><a href="/gostd/image/draw/draw.go.html#5775234">sp</a></span><span class="op" id="5775392">.</span><span class="ident" id="5775393"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5775395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775399"><a href="/gostd/image/draw/draw.go.html#5775356">ddelta</a></span>&nbsp;<span class="op" id="5775406">=</span>&nbsp;<span class="ident" id="5775408"><a href="/gostd/image/draw/draw.go.html#5775181">dst</a></span><span class="op" id="5775411">.</span><span class="ident" id="5775412"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775421"><a href="/gostd/image/draw/draw.go.html#5775364">sdelta</a></span>&nbsp;<span class="op" id="5775428">=</span>&nbsp;<span class="ident" id="5775430"><a href="/gostd/image/draw/draw.go.html#5775217">src</a></span><span class="op" id="5775433">.</span><span class="ident" id="5775434"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775442">}</span>&nbsp;<span class="keyword" id="5775444">else</span>&nbsp;<span class="op" id="5775449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5775453">//&nbsp;If&nbsp;the&nbsp;source&nbsp;start&nbsp;point&nbsp;is&nbsp;higher&nbsp;than&nbsp;the&nbsp;destination&nbsp;start&nbsp;point,&nbsp;then&nbsp;we&nbsp;compose&nbsp;the&nbsp;rows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5775553">//&nbsp;in&nbsp;bottom-up&nbsp;order&nbsp;instead&nbsp;of&nbsp;top-down.&nbsp;Unlike&nbsp;the&nbsp;drawCopyOver&nbsp;function,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5775649">//&nbsp;check&nbsp;the&nbsp;x&nbsp;co-ordinates&nbsp;because&nbsp;the&nbsp;built-in&nbsp;copy&nbsp;function&nbsp;can&nbsp;handle&nbsp;overlapping&nbsp;slices.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775745"><a href="/gostd/image/draw/draw.go.html#5775280">d0</a></span>&nbsp;<span class="op" id="5775748">+=</span>&nbsp;<span class="op" id="5775751">(</span><span class="ident" id="5775752"><a href="/gostd/image/draw/draw.go.html#5775256">dy</a></span>&nbsp;<span class="op" id="5775755">-</span>&nbsp;<span class="num" id="5775757">1</span><span class="op" id="5775758">)</span>&nbsp;<span class="op" id="5775760">*</span>&nbsp;<span class="ident" id="5775762"><a href="/gostd/image/draw/draw.go.html#5775181">dst</a></span><span class="op" id="5775765">.</span><span class="ident" id="5775766"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775775"><a href="/gostd/image/draw/draw.go.html#5775319">s0</a></span>&nbsp;<span class="op" id="5775778">+=</span>&nbsp;<span class="op" id="5775781">(</span><span class="ident" id="5775782"><a href="/gostd/image/draw/draw.go.html#5775256">dy</a></span>&nbsp;<span class="op" id="5775785">-</span>&nbsp;<span class="num" id="5775787">1</span><span class="op" id="5775788">)</span>&nbsp;<span class="op" id="5775790">*</span>&nbsp;<span class="ident" id="5775792"><a href="/gostd/image/draw/draw.go.html#5775217">src</a></span><span class="op" id="5775795">.</span><span class="ident" id="5775796"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775805"><a href="/gostd/image/draw/draw.go.html#5775356">ddelta</a></span>&nbsp;<span class="op" id="5775812">=</span>&nbsp;<span class="op" id="5775814">-</span><span class="ident" id="5775815"><a href="/gostd/image/draw/draw.go.html#5775181">dst</a></span><span class="op" id="5775818">.</span><span class="ident" id="5775819"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775828"><a href="/gostd/image/draw/draw.go.html#5775364">sdelta</a></span>&nbsp;<span class="op" id="5775835">=</span>&nbsp;<span class="op" id="5775837">-</span><span class="ident" id="5775838"><a href="/gostd/image/draw/draw.go.html#5775217">src</a></span><span class="op" id="5775841">.</span><span class="ident" id="5775842"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5775853">for</span>&nbsp;<span class="op" id="5775857">;</span>&nbsp;<span class="ident" id="5775859"><a href="/gostd/image/draw/draw.go.html#5775256">dy</a></span>&nbsp;<span class="op" id="5775862">&gt;</span>&nbsp;<span class="num" id="5775864">0</span><span class="op" id="5775865">;</span>&nbsp;<span class="ident" id="5775867"><a href="/gostd/image/draw/draw.go.html#5775256">dy</a></span><span class="op" id="5775869">--</span>&nbsp;<span class="op" id="5775872">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5775876">copy</span><span class="op" id="5775880">(</span><span class="ident" id="5775881"><a href="/gostd/image/draw/draw.go.html#5775181">dst</a></span><span class="op" id="5775884">.</span><span class="ident" id="5775885"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5775888">[</span><span class="ident" id="5775889"><a href="/gostd/image/draw/draw.go.html#5775280">d0</a></span><span class="op" id="5775891">:</span><span class="ident" id="5775892"><a href="/gostd/image/draw/draw.go.html#5775280">d0</a></span><span class="op" id="5775894">+</span><span class="ident" id="5775895"><a href="/gostd/image/draw/draw.go.html#5775253">n</a></span><span class="op" id="5775896">]</span><span class="op" id="5775897">,</span>&nbsp;<span class="ident" id="5775899"><a href="/gostd/image/draw/draw.go.html#5775217">src</a></span><span class="op" id="5775902">.</span><span class="ident" id="5775903"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5775906">[</span><span class="ident" id="5775907"><a href="/gostd/image/draw/draw.go.html#5775319">s0</a></span><span class="op" id="5775909">:</span><span class="ident" id="5775910"><a href="/gostd/image/draw/draw.go.html#5775319">s0</a></span><span class="op" id="5775912">+</span><span class="ident" id="5775913"><a href="/gostd/image/draw/draw.go.html#5775253">n</a></span><span class="op" id="5775914">]</span><span class="op" id="5775915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775919"><a href="/gostd/image/draw/draw.go.html#5775280">d0</a></span>&nbsp;<span class="op" id="5775922">+=</span>&nbsp;<span class="ident" id="5775925"><a href="/gostd/image/draw/draw.go.html#5775356">ddelta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5775934"><a href="/gostd/image/draw/draw.go.html#5775319">s0</a></span>&nbsp;<span class="op" id="5775937">+=</span>&nbsp;<span class="ident" id="5775940"><a href="/gostd/image/draw/draw.go.html#5775364">sdelta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5775948">}</span><br>
<span class="lineno"></span><span class="op" id="5775950">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="5775953">func</span>&nbsp;<span class="ident" id="5775958">drawNRGBAOver</span><span class="op" id="5775971">(</span><span class="ident" id="5775972">dst</span>&nbsp;<span class="op" id="5775976">*</span><span class="ident" id="5775977"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775982">.</span><span class="ident" id="5775983"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5775987">,</span>&nbsp;<span class="ident" id="5775989">r</span>&nbsp;<span class="ident" id="5775991"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5775996">.</span><span class="ident" id="5775997"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5776006">,</span>&nbsp;<span class="ident" id="5776008">src</span>&nbsp;<span class="op" id="5776012">*</span><span class="ident" id="5776013"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5776018">.</span><span class="ident" id="5776019"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="5776024">,</span>&nbsp;<span class="ident" id="5776026">sp</span>&nbsp;<span class="ident" id="5776029"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5776034">.</span><span class="ident" id="5776035"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5776040">)</span>&nbsp;<span class="op" id="5776042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776045">i0</span>&nbsp;<span class="op" id="5776048">:=</span>&nbsp;<span class="op" id="5776051">(</span><span class="ident" id="5776052"><a href="/gostd/image/draw/draw.go.html#5775989">r</a></span><span class="op" id="5776053">.</span><span class="ident" id="5776054"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776057">.</span><span class="ident" id="5776058"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5776060">-</span>&nbsp;<span class="ident" id="5776062"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776065">.</span><span class="ident" id="5776066"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5776070">.</span><span class="ident" id="5776071"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776074">.</span><span class="ident" id="5776075"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5776076">)</span>&nbsp;<span class="op" id="5776078">*</span>&nbsp;<span class="num" id="5776080">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776083">i1</span>&nbsp;<span class="op" id="5776086">:=</span>&nbsp;<span class="op" id="5776089">(</span><span class="ident" id="5776090"><a href="/gostd/image/draw/draw.go.html#5775989">r</a></span><span class="op" id="5776091">.</span><span class="ident" id="5776092"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5776095">.</span><span class="ident" id="5776096"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5776098">-</span>&nbsp;<span class="ident" id="5776100"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776103">.</span><span class="ident" id="5776104"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5776108">.</span><span class="ident" id="5776109"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776112">.</span><span class="ident" id="5776113"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5776114">)</span>&nbsp;<span class="op" id="5776116">*</span>&nbsp;<span class="num" id="5776118">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776121">si0</span>&nbsp;<span class="op" id="5776125">:=</span>&nbsp;<span class="op" id="5776128">(</span><span class="ident" id="5776129"><a href="/gostd/image/draw/draw.go.html#5776026">sp</a></span><span class="op" id="5776131">.</span><span class="ident" id="5776132"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5776134">-</span>&nbsp;<span class="ident" id="5776136"><a href="/gostd/image/draw/draw.go.html#5776008">src</a></span><span class="op" id="5776139">.</span><span class="ident" id="5776140"><a href="/gostd/image/image.go.html#5161753">Rect</a></span><span class="op" id="5776144">.</span><span class="ident" id="5776145"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776148">.</span><span class="ident" id="5776149"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5776150">)</span>&nbsp;<span class="op" id="5776152">*</span>&nbsp;<span class="num" id="5776154">4</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776157">yMax</span>&nbsp;<span class="op" id="5776162">:=</span>&nbsp;<span class="ident" id="5776165"><a href="/gostd/image/draw/draw.go.html#5775989">r</a></span><span class="op" id="5776166">.</span><span class="ident" id="5776167"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5776170">.</span><span class="ident" id="5776171"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5776173">-</span>&nbsp;<span class="ident" id="5776175"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776178">.</span><span class="ident" id="5776179"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5776183">.</span><span class="ident" id="5776184"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776187">.</span><span class="ident" id="5776188"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776192">y</span>&nbsp;<span class="op" id="5776194">:=</span>&nbsp;<span class="ident" id="5776197"><a href="/gostd/image/draw/draw.go.html#5775989">r</a></span><span class="op" id="5776198">.</span><span class="ident" id="5776199"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776202">.</span><span class="ident" id="5776203"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5776205">-</span>&nbsp;<span class="ident" id="5776207"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776210">.</span><span class="ident" id="5776211"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5776215">.</span><span class="ident" id="5776216"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776219">.</span><span class="ident" id="5776220"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776223">sy</span>&nbsp;<span class="op" id="5776226">:=</span>&nbsp;<span class="ident" id="5776229"><a href="/gostd/image/draw/draw.go.html#5776026">sp</a></span><span class="op" id="5776231">.</span><span class="ident" id="5776232"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5776234">-</span>&nbsp;<span class="ident" id="5776236"><a href="/gostd/image/draw/draw.go.html#5776008">src</a></span><span class="op" id="5776239">.</span><span class="ident" id="5776240"><a href="/gostd/image/image.go.html#5161753">Rect</a></span><span class="op" id="5776244">.</span><span class="ident" id="5776245"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5776248">.</span><span class="ident" id="5776249"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776252">for</span>&nbsp;<span class="op" id="5776256">;</span>&nbsp;<span class="ident" id="5776258"><a href="/gostd/image/draw/draw.go.html#5776192">y</a></span>&nbsp;<span class="op" id="5776260">!=</span>&nbsp;<span class="ident" id="5776263"><a href="/gostd/image/draw/draw.go.html#5776157">yMax</a></span><span class="op" id="5776267">;</span>&nbsp;<span class="ident" id="5776269"><a href="/gostd/image/draw/draw.go.html#5776192">y</a></span><span class="op" id="5776270">,</span>&nbsp;<span class="ident" id="5776272"><a href="/gostd/image/draw/draw.go.html#5776223">sy</a></span>&nbsp;<span class="op" id="5776275">=</span>&nbsp;<span class="ident" id="5776277"><a href="/gostd/image/draw/draw.go.html#5776192">y</a></span><span class="op" id="5776278">+</span><span class="num" id="5776279">1</span><span class="op" id="5776280">,</span>&nbsp;<span class="ident" id="5776282"><a href="/gostd/image/draw/draw.go.html#5776223">sy</a></span><span class="op" id="5776284">+</span><span class="num" id="5776285">1</span>&nbsp;<span class="op" id="5776287">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776291">dpix</span>&nbsp;<span class="op" id="5776296">:=</span>&nbsp;<span class="ident" id="5776299"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776302">.</span><span class="ident" id="5776303"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5776306">[</span><span class="ident" id="5776307"><a href="/gostd/image/draw/draw.go.html#5776192">y</a></span><span class="op" id="5776308">*</span><span class="ident" id="5776309"><a href="/gostd/image/draw/draw.go.html#5775972">dst</a></span><span class="op" id="5776312">.</span><span class="ident" id="5776313"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5776319">:</span><span class="op" id="5776320">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776324">spix</span>&nbsp;<span class="op" id="5776329">:=</span>&nbsp;<span class="ident" id="5776332"><a href="/gostd/image/draw/draw.go.html#5776008">src</a></span><span class="op" id="5776335">.</span><span class="ident" id="5776336"><a href="/gostd/image/image.go.html#5161620">Pix</a></span><span class="op" id="5776339">[</span><span class="ident" id="5776340"><a href="/gostd/image/draw/draw.go.html#5776223">sy</a></span><span class="op" id="5776342">*</span><span class="ident" id="5776343"><a href="/gostd/image/draw/draw.go.html#5776008">src</a></span><span class="op" id="5776346">.</span><span class="ident" id="5776347"><a href="/gostd/image/image.go.html#5161709">Stride</a></span><span class="op" id="5776353">:</span><span class="op" id="5776354">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5776359">for</span>&nbsp;<span class="ident" id="5776363">i</span><span class="op" id="5776364">,</span>&nbsp;<span class="ident" id="5776366">si</span>&nbsp;<span class="op" id="5776369">:=</span>&nbsp;<span class="ident" id="5776372"><a href="/gostd/image/draw/draw.go.html#5776045">i0</a></span><span class="op" id="5776374">,</span>&nbsp;<span class="ident" id="5776376"><a href="/gostd/image/draw/draw.go.html#5776121">si0</a></span><span class="op" id="5776379">;</span>&nbsp;<span class="ident" id="5776381"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span>&nbsp;<span class="op" id="5776383">&lt;</span>&nbsp;<span class="ident" id="5776385"><a href="/gostd/image/draw/draw.go.html#5776083">i1</a></span><span class="op" id="5776387">;</span>&nbsp;<span class="ident" id="5776389"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776390">,</span>&nbsp;<span class="ident" id="5776392"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span>&nbsp;<span class="op" id="5776395">=</span>&nbsp;<span class="ident" id="5776397"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776398">+</span><span class="num" id="5776399">4</span><span class="op" id="5776400">,</span>&nbsp;<span class="ident" id="5776402"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span><span class="op" id="5776404">+</span><span class="num" id="5776405">4</span>&nbsp;<span class="op" id="5776407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5776412">//&nbsp;Convert&nbsp;from&nbsp;non-premultiplied&nbsp;color&nbsp;to&nbsp;pre-multiplied&nbsp;color.</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776480">sa</span>&nbsp;<span class="op" id="5776483">:=</span>&nbsp;<span class="builtintype" id="5776486">uint32</span><span class="op" id="5776492">(</span><span class="ident" id="5776493"><a href="/gostd/image/draw/draw.go.html#5776324">spix</a></span><span class="op" id="5776497">[</span><span class="ident" id="5776498"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span><span class="op" id="5776500">+</span><span class="num" id="5776501">3</span><span class="op" id="5776502">]</span><span class="op" id="5776503">)</span>&nbsp;<span class="op" id="5776505">*</span>&nbsp;<span class="num" id="5776507">0x101</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776516">sr</span>&nbsp;<span class="op" id="5776519">:=</span>&nbsp;<span class="builtintype" id="5776522">uint32</span><span class="op" id="5776528">(</span><span class="ident" id="5776529"><a href="/gostd/image/draw/draw.go.html#5776324">spix</a></span><span class="op" id="5776533">[</span><span class="ident" id="5776534"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span><span class="op" id="5776536">+</span><span class="num" id="5776537">0</span><span class="op" id="5776538">]</span><span class="op" id="5776539">)</span>&nbsp;<span class="op" id="5776541">*</span>&nbsp;<span class="ident" id="5776543"><a href="/gostd/image/draw/draw.go.html#5776480">sa</a></span>&nbsp;<span class="op" id="5776546">/</span>&nbsp;<span class="num" id="5776548">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776556">sg</span>&nbsp;<span class="op" id="5776559">:=</span>&nbsp;<span class="builtintype" id="5776562">uint32</span><span class="op" id="5776568">(</span><span class="ident" id="5776569"><a href="/gostd/image/draw/draw.go.html#5776324">spix</a></span><span class="op" id="5776573">[</span><span class="ident" id="5776574"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span><span class="op" id="5776576">+</span><span class="num" id="5776577">1</span><span class="op" id="5776578">]</span><span class="op" id="5776579">)</span>&nbsp;<span class="op" id="5776581">*</span>&nbsp;<span class="ident" id="5776583"><a href="/gostd/image/draw/draw.go.html#5776480">sa</a></span>&nbsp;<span class="op" id="5776586">/</span>&nbsp;<span class="num" id="5776588">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776596">sb</span>&nbsp;<span class="op" id="5776599">:=</span>&nbsp;<span class="builtintype" id="5776602">uint32</span><span class="op" id="5776608">(</span><span class="ident" id="5776609"><a href="/gostd/image/draw/draw.go.html#5776324">spix</a></span><span class="op" id="5776613">[</span><span class="ident" id="5776614"><a href="/gostd/image/draw/draw.go.html#5776366">si</a></span><span class="op" id="5776616">+</span><span class="num" id="5776617">2</span><span class="op" id="5776618">]</span><span class="op" id="5776619">)</span>&nbsp;<span class="op" id="5776621">*</span>&nbsp;<span class="ident" id="5776623"><a href="/gostd/image/draw/draw.go.html#5776480">sa</a></span>&nbsp;<span class="op" id="5776626">/</span>&nbsp;<span class="num" id="5776628">0xff</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776637">dr</span>&nbsp;<span class="op" id="5776640">:=</span>&nbsp;<span class="builtintype" id="5776643">uint32</span><span class="op" id="5776649">(</span><span class="ident" id="5776650"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776654">[</span><span class="ident" id="5776655"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776656">+</span><span class="num" id="5776657">0</span><span class="op" id="5776658">]</span><span class="op" id="5776659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776664">dg</span>&nbsp;<span class="op" id="5776667">:=</span>&nbsp;<span class="builtintype" id="5776670">uint32</span><span class="op" id="5776676">(</span><span class="ident" id="5776677"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776681">[</span><span class="ident" id="5776682"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776683">+</span><span class="num" id="5776684">1</span><span class="op" id="5776685">]</span><span class="op" id="5776686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776691">db</span>&nbsp;<span class="op" id="5776694">:=</span>&nbsp;<span class="builtintype" id="5776697">uint32</span><span class="op" id="5776703">(</span><span class="ident" id="5776704"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776708">[</span><span class="ident" id="5776709"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776710">+</span><span class="num" id="5776711">2</span><span class="op" id="5776712">]</span><span class="op" id="5776713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776718">da</span>&nbsp;<span class="op" id="5776721">:=</span>&nbsp;<span class="builtintype" id="5776724">uint32</span><span class="op" id="5776730">(</span><span class="ident" id="5776731"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776735">[</span><span class="ident" id="5776736"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776737">+</span><span class="num" id="5776738">3</span><span class="op" id="5776739">]</span><span class="op" id="5776740">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5776746">//&nbsp;The&nbsp;0x101&nbsp;is&nbsp;here&nbsp;for&nbsp;the&nbsp;same&nbsp;reason&nbsp;as&nbsp;in&nbsp;drawRGBA.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776806">a</span>&nbsp;<span class="op" id="5776808">:=</span>&nbsp;<span class="op" id="5776811">(</span><span class="ident" id="5776812"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5776814">-</span>&nbsp;<span class="ident" id="5776816"><a href="/gostd/image/draw/draw.go.html#5776480">sa</a></span><span class="op" id="5776818">)</span>&nbsp;<span class="op" id="5776820">*</span>&nbsp;<span class="num" id="5776822">0x101</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776832"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776836">[</span><span class="ident" id="5776837"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776838">+</span><span class="num" id="5776839">0</span><span class="op" id="5776840">]</span>&nbsp;<span class="op" id="5776842">=</span>&nbsp;<span class="builtintype" id="5776844">uint8</span><span class="op" id="5776849">(</span><span class="op" id="5776850">(</span><span class="ident" id="5776851"><a href="/gostd/image/draw/draw.go.html#5776637">dr</a></span><span class="op" id="5776853">*</span><span class="ident" id="5776854"><a href="/gostd/image/draw/draw.go.html#5776806">a</a></span><span class="op" id="5776855">/</span><span class="ident" id="5776856"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5776858">+</span>&nbsp;<span class="ident" id="5776860"><a href="/gostd/image/draw/draw.go.html#5776516">sr</a></span><span class="op" id="5776862">)</span>&nbsp;<span class="op" id="5776864">&gt;&gt;</span>&nbsp;<span class="num" id="5776867">8</span><span class="op" id="5776868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776873"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776877">[</span><span class="ident" id="5776878"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776879">+</span><span class="num" id="5776880">1</span><span class="op" id="5776881">]</span>&nbsp;<span class="op" id="5776883">=</span>&nbsp;<span class="builtintype" id="5776885">uint8</span><span class="op" id="5776890">(</span><span class="op" id="5776891">(</span><span class="ident" id="5776892"><a href="/gostd/image/draw/draw.go.html#5776664">dg</a></span><span class="op" id="5776894">*</span><span class="ident" id="5776895"><a href="/gostd/image/draw/draw.go.html#5776806">a</a></span><span class="op" id="5776896">/</span><span class="ident" id="5776897"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5776899">+</span>&nbsp;<span class="ident" id="5776901"><a href="/gostd/image/draw/draw.go.html#5776556">sg</a></span><span class="op" id="5776903">)</span>&nbsp;<span class="op" id="5776905">&gt;&gt;</span>&nbsp;<span class="num" id="5776908">8</span><span class="op" id="5776909">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776914"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776918">[</span><span class="ident" id="5776919"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776920">+</span><span class="num" id="5776921">2</span><span class="op" id="5776922">]</span>&nbsp;<span class="op" id="5776924">=</span>&nbsp;<span class="builtintype" id="5776926">uint8</span><span class="op" id="5776931">(</span><span class="op" id="5776932">(</span><span class="ident" id="5776933"><a href="/gostd/image/draw/draw.go.html#5776691">db</a></span><span class="op" id="5776935">*</span><span class="ident" id="5776936"><a href="/gostd/image/draw/draw.go.html#5776806">a</a></span><span class="op" id="5776937">/</span><span class="ident" id="5776938"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5776940">+</span>&nbsp;<span class="ident" id="5776942"><a href="/gostd/image/draw/draw.go.html#5776596">sb</a></span><span class="op" id="5776944">)</span>&nbsp;<span class="op" id="5776946">&gt;&gt;</span>&nbsp;<span class="num" id="5776949">8</span><span class="op" id="5776950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5776955"><a href="/gostd/image/draw/draw.go.html#5776291">dpix</a></span><span class="op" id="5776959">[</span><span class="ident" id="5776960"><a href="/gostd/image/draw/draw.go.html#5776363">i</a></span><span class="op" id="5776961">+</span><span class="num" id="5776962">3</span><span class="op" id="5776963">]</span>&nbsp;<span class="op" id="5776965">=</span>&nbsp;<span class="builtintype" id="5776967">uint8</span><span class="op" id="5776972">(</span><span class="op" id="5776973">(</span><span class="ident" id="5776974"><a href="/gostd/image/draw/draw.go.html#5776718">da</a></span><span class="op" id="5776976">*</span><span class="ident" id="5776977"><a href="/gostd/image/draw/draw.go.html#5776806">a</a></span><span class="op" id="5776978">/</span><span class="ident" id="5776979"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5776981">+</span>&nbsp;<span class="ident" id="5776983"><a href="/gostd/image/draw/draw.go.html#5776480">sa</a></span><span class="op" id="5776985">)</span>&nbsp;<span class="op" id="5776987">&gt;&gt;</span>&nbsp;<span class="num" id="5776990">8</span><span class="op" id="5776991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5776998">}</span><br>
<span class="lineno"></span><span class="op" id="5777000">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="5777003">func</span>&nbsp;<span class="ident" id="5777008">drawNRGBASrc</span><span class="op" id="5777020">(</span><span class="ident" id="5777021">dst</span>&nbsp;<span class="op" id="5777025">*</span><span class="ident" id="5777026"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777031">.</span><span class="ident" id="5777032"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5777036">,</span>&nbsp;<span class="ident" id="5777038">r</span>&nbsp;<span class="ident" id="5777040"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777045">.</span><span class="ident" id="5777046"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5777055">,</span>&nbsp;<span class="ident" id="5777057">src</span>&nbsp;<span class="op" id="5777061">*</span><span class="ident" id="5777062"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777067">.</span><span class="ident" id="5777068"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="5777073">,</span>&nbsp;<span class="ident" id="5777075">sp</span>&nbsp;<span class="ident" id="5777078"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777083">.</span><span class="ident" id="5777084"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5777089">)</span>&nbsp;<span class="op" id="5777091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777094">i0</span>&nbsp;<span class="op" id="5777097">:=</span>&nbsp;<span class="op" id="5777100">(</span><span class="ident" id="5777101"><a href="/gostd/image/draw/draw.go.html#5777038">r</a></span><span class="op" id="5777102">.</span><span class="ident" id="5777103"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777106">.</span><span class="ident" id="5777107"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5777109">-</span>&nbsp;<span class="ident" id="5777111"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777114">.</span><span class="ident" id="5777115"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5777119">.</span><span class="ident" id="5777120"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777123">.</span><span class="ident" id="5777124"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5777125">)</span>&nbsp;<span class="op" id="5777127">*</span>&nbsp;<span class="num" id="5777129">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777132">i1</span>&nbsp;<span class="op" id="5777135">:=</span>&nbsp;<span class="op" id="5777138">(</span><span class="ident" id="5777139"><a href="/gostd/image/draw/draw.go.html#5777038">r</a></span><span class="op" id="5777140">.</span><span class="ident" id="5777141"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5777144">.</span><span class="ident" id="5777145"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5777147">-</span>&nbsp;<span class="ident" id="5777149"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777152">.</span><span class="ident" id="5777153"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5777157">.</span><span class="ident" id="5777158"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777161">.</span><span class="ident" id="5777162"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5777163">)</span>&nbsp;<span class="op" id="5777165">*</span>&nbsp;<span class="num" id="5777167">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777170">si0</span>&nbsp;<span class="op" id="5777174">:=</span>&nbsp;<span class="op" id="5777177">(</span><span class="ident" id="5777178"><a href="/gostd/image/draw/draw.go.html#5777075">sp</a></span><span class="op" id="5777180">.</span><span class="ident" id="5777181"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5777183">-</span>&nbsp;<span class="ident" id="5777185"><a href="/gostd/image/draw/draw.go.html#5777057">src</a></span><span class="op" id="5777188">.</span><span class="ident" id="5777189"><a href="/gostd/image/image.go.html#5161753">Rect</a></span><span class="op" id="5777193">.</span><span class="ident" id="5777194"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777197">.</span><span class="ident" id="5777198"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5777199">)</span>&nbsp;<span class="op" id="5777201">*</span>&nbsp;<span class="num" id="5777203">4</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777206">yMax</span>&nbsp;<span class="op" id="5777211">:=</span>&nbsp;<span class="ident" id="5777214"><a href="/gostd/image/draw/draw.go.html#5777038">r</a></span><span class="op" id="5777215">.</span><span class="ident" id="5777216"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5777219">.</span><span class="ident" id="5777220"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5777222">-</span>&nbsp;<span class="ident" id="5777224"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777227">.</span><span class="ident" id="5777228"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5777232">.</span><span class="ident" id="5777233"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777236">.</span><span class="ident" id="5777237"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777241">y</span>&nbsp;<span class="op" id="5777243">:=</span>&nbsp;<span class="ident" id="5777246"><a href="/gostd/image/draw/draw.go.html#5777038">r</a></span><span class="op" id="5777247">.</span><span class="ident" id="5777248"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777251">.</span><span class="ident" id="5777252"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5777254">-</span>&nbsp;<span class="ident" id="5777256"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777259">.</span><span class="ident" id="5777260"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5777264">.</span><span class="ident" id="5777265"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777268">.</span><span class="ident" id="5777269"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777272">sy</span>&nbsp;<span class="op" id="5777275">:=</span>&nbsp;<span class="ident" id="5777278"><a href="/gostd/image/draw/draw.go.html#5777075">sp</a></span><span class="op" id="5777280">.</span><span class="ident" id="5777281"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5777283">-</span>&nbsp;<span class="ident" id="5777285"><a href="/gostd/image/draw/draw.go.html#5777057">src</a></span><span class="op" id="5777288">.</span><span class="ident" id="5777289"><a href="/gostd/image/image.go.html#5161753">Rect</a></span><span class="op" id="5777293">.</span><span class="ident" id="5777294"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5777297">.</span><span class="ident" id="5777298"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777301">for</span>&nbsp;<span class="op" id="5777305">;</span>&nbsp;<span class="ident" id="5777307"><a href="/gostd/image/draw/draw.go.html#5777241">y</a></span>&nbsp;<span class="op" id="5777309">!=</span>&nbsp;<span class="ident" id="5777312"><a href="/gostd/image/draw/draw.go.html#5777206">yMax</a></span><span class="op" id="5777316">;</span>&nbsp;<span class="ident" id="5777318"><a href="/gostd/image/draw/draw.go.html#5777241">y</a></span><span class="op" id="5777319">,</span>&nbsp;<span class="ident" id="5777321"><a href="/gostd/image/draw/draw.go.html#5777272">sy</a></span>&nbsp;<span class="op" id="5777324">=</span>&nbsp;<span class="ident" id="5777326"><a href="/gostd/image/draw/draw.go.html#5777241">y</a></span><span class="op" id="5777327">+</span><span class="num" id="5777328">1</span><span class="op" id="5777329">,</span>&nbsp;<span class="ident" id="5777331"><a href="/gostd/image/draw/draw.go.html#5777272">sy</a></span><span class="op" id="5777333">+</span><span class="num" id="5777334">1</span>&nbsp;<span class="op" id="5777336">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777340">dpix</span>&nbsp;<span class="op" id="5777345">:=</span>&nbsp;<span class="ident" id="5777348"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777351">.</span><span class="ident" id="5777352"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5777355">[</span><span class="ident" id="5777356"><a href="/gostd/image/draw/draw.go.html#5777241">y</a></span><span class="op" id="5777357">*</span><span class="ident" id="5777358"><a href="/gostd/image/draw/draw.go.html#5777021">dst</a></span><span class="op" id="5777361">.</span><span class="ident" id="5777362"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5777368">:</span><span class="op" id="5777369">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777373">spix</span>&nbsp;<span class="op" id="5777378">:=</span>&nbsp;<span class="ident" id="5777381"><a href="/gostd/image/draw/draw.go.html#5777057">src</a></span><span class="op" id="5777384">.</span><span class="ident" id="5777385"><a href="/gostd/image/image.go.html#5161620">Pix</a></span><span class="op" id="5777388">[</span><span class="ident" id="5777389"><a href="/gostd/image/draw/draw.go.html#5777272">sy</a></span><span class="op" id="5777391">*</span><span class="ident" id="5777392"><a href="/gostd/image/draw/draw.go.html#5777057">src</a></span><span class="op" id="5777395">.</span><span class="ident" id="5777396"><a href="/gostd/image/image.go.html#5161709">Stride</a></span><span class="op" id="5777402">:</span><span class="op" id="5777403">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5777408">for</span>&nbsp;<span class="ident" id="5777412">i</span><span class="op" id="5777413">,</span>&nbsp;<span class="ident" id="5777415">si</span>&nbsp;<span class="op" id="5777418">:=</span>&nbsp;<span class="ident" id="5777421"><a href="/gostd/image/draw/draw.go.html#5777094">i0</a></span><span class="op" id="5777423">,</span>&nbsp;<span class="ident" id="5777425"><a href="/gostd/image/draw/draw.go.html#5777170">si0</a></span><span class="op" id="5777428">;</span>&nbsp;<span class="ident" id="5777430"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span>&nbsp;<span class="op" id="5777432">&lt;</span>&nbsp;<span class="ident" id="5777434"><a href="/gostd/image/draw/draw.go.html#5777132">i1</a></span><span class="op" id="5777436">;</span>&nbsp;<span class="ident" id="5777438"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777439">,</span>&nbsp;<span class="ident" id="5777441"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span>&nbsp;<span class="op" id="5777444">=</span>&nbsp;<span class="ident" id="5777446"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777447">+</span><span class="num" id="5777448">4</span><span class="op" id="5777449">,</span>&nbsp;<span class="ident" id="5777451"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span><span class="op" id="5777453">+</span><span class="num" id="5777454">4</span>&nbsp;<span class="op" id="5777456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777461">//&nbsp;Convert&nbsp;from&nbsp;non-premultiplied&nbsp;color&nbsp;to&nbsp;pre-multiplied&nbsp;color.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777529">sa</span>&nbsp;<span class="op" id="5777532">:=</span>&nbsp;<span class="builtintype" id="5777535">uint32</span><span class="op" id="5777541">(</span><span class="ident" id="5777542"><a href="/gostd/image/draw/draw.go.html#5777373">spix</a></span><span class="op" id="5777546">[</span><span class="ident" id="5777547"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span><span class="op" id="5777549">+</span><span class="num" id="5777550">3</span><span class="op" id="5777551">]</span><span class="op" id="5777552">)</span>&nbsp;<span class="op" id="5777554">*</span>&nbsp;<span class="num" id="5777556">0x101</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777565">sr</span>&nbsp;<span class="op" id="5777568">:=</span>&nbsp;<span class="builtintype" id="5777571">uint32</span><span class="op" id="5777577">(</span><span class="ident" id="5777578"><a href="/gostd/image/draw/draw.go.html#5777373">spix</a></span><span class="op" id="5777582">[</span><span class="ident" id="5777583"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span><span class="op" id="5777585">+</span><span class="num" id="5777586">0</span><span class="op" id="5777587">]</span><span class="op" id="5777588">)</span>&nbsp;<span class="op" id="5777590">*</span>&nbsp;<span class="ident" id="5777592"><a href="/gostd/image/draw/draw.go.html#5777529">sa</a></span>&nbsp;<span class="op" id="5777595">/</span>&nbsp;<span class="num" id="5777597">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777605">sg</span>&nbsp;<span class="op" id="5777608">:=</span>&nbsp;<span class="builtintype" id="5777611">uint32</span><span class="op" id="5777617">(</span><span class="ident" id="5777618"><a href="/gostd/image/draw/draw.go.html#5777373">spix</a></span><span class="op" id="5777622">[</span><span class="ident" id="5777623"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span><span class="op" id="5777625">+</span><span class="num" id="5777626">1</span><span class="op" id="5777627">]</span><span class="op" id="5777628">)</span>&nbsp;<span class="op" id="5777630">*</span>&nbsp;<span class="ident" id="5777632"><a href="/gostd/image/draw/draw.go.html#5777529">sa</a></span>&nbsp;<span class="op" id="5777635">/</span>&nbsp;<span class="num" id="5777637">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777645">sb</span>&nbsp;<span class="op" id="5777648">:=</span>&nbsp;<span class="builtintype" id="5777651">uint32</span><span class="op" id="5777657">(</span><span class="ident" id="5777658"><a href="/gostd/image/draw/draw.go.html#5777373">spix</a></span><span class="op" id="5777662">[</span><span class="ident" id="5777663"><a href="/gostd/image/draw/draw.go.html#5777415">si</a></span><span class="op" id="5777665">+</span><span class="num" id="5777666">2</span><span class="op" id="5777667">]</span><span class="op" id="5777668">)</span>&nbsp;<span class="op" id="5777670">*</span>&nbsp;<span class="ident" id="5777672"><a href="/gostd/image/draw/draw.go.html#5777529">sa</a></span>&nbsp;<span class="op" id="5777675">/</span>&nbsp;<span class="num" id="5777677">0xff</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777686"><a href="/gostd/image/draw/draw.go.html#5777340">dpix</a></span><span class="op" id="5777690">[</span><span class="ident" id="5777691"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777692">+</span><span class="num" id="5777693">0</span><span class="op" id="5777694">]</span>&nbsp;<span class="op" id="5777696">=</span>&nbsp;<span class="builtintype" id="5777698">uint8</span><span class="op" id="5777703">(</span><span class="ident" id="5777704"><a href="/gostd/image/draw/draw.go.html#5777565">sr</a></span>&nbsp;<span class="op" id="5777707">&gt;&gt;</span>&nbsp;<span class="num" id="5777710">8</span><span class="op" id="5777711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777716"><a href="/gostd/image/draw/draw.go.html#5777340">dpix</a></span><span class="op" id="5777720">[</span><span class="ident" id="5777721"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777722">+</span><span class="num" id="5777723">1</span><span class="op" id="5777724">]</span>&nbsp;<span class="op" id="5777726">=</span>&nbsp;<span class="builtintype" id="5777728">uint8</span><span class="op" id="5777733">(</span><span class="ident" id="5777734"><a href="/gostd/image/draw/draw.go.html#5777605">sg</a></span>&nbsp;<span class="op" id="5777737">&gt;&gt;</span>&nbsp;<span class="num" id="5777740">8</span><span class="op" id="5777741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777746"><a href="/gostd/image/draw/draw.go.html#5777340">dpix</a></span><span class="op" id="5777750">[</span><span class="ident" id="5777751"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777752">+</span><span class="num" id="5777753">2</span><span class="op" id="5777754">]</span>&nbsp;<span class="op" id="5777756">=</span>&nbsp;<span class="builtintype" id="5777758">uint8</span><span class="op" id="5777763">(</span><span class="ident" id="5777764"><a href="/gostd/image/draw/draw.go.html#5777645">sb</a></span>&nbsp;<span class="op" id="5777767">&gt;&gt;</span>&nbsp;<span class="num" id="5777770">8</span><span class="op" id="5777771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5777776"><a href="/gostd/image/draw/draw.go.html#5777340">dpix</a></span><span class="op" id="5777780">[</span><span class="ident" id="5777781"><a href="/gostd/image/draw/draw.go.html#5777412">i</a></span><span class="op" id="5777782">+</span><span class="num" id="5777783">3</span><span class="op" id="5777784">]</span>&nbsp;<span class="op" id="5777786">=</span>&nbsp;<span class="builtintype" id="5777788">uint8</span><span class="op" id="5777793">(</span><span class="ident" id="5777794"><a href="/gostd/image/draw/draw.go.html#5777529">sa</a></span>&nbsp;<span class="op" id="5777797">&gt;&gt;</span>&nbsp;<span class="num" id="5777800">8</span><span class="op" id="5777801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777805">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5777808">}</span><br>
<span class="lineno"></span><span class="op" id="5777810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5777813">func</span>&nbsp;<span class="ident" id="5777818">drawYCbCr</span><span class="op" id="5777827">(</span><span class="ident" id="5777828">dst</span>&nbsp;<span class="op" id="5777832">*</span><span class="ident" id="5777833"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777838">.</span><span class="ident" id="5777839"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5777843">,</span>&nbsp;<span class="ident" id="5777845">r</span>&nbsp;<span class="ident" id="5777847"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777852">.</span><span class="ident" id="5777853"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5777862">,</span>&nbsp;<span class="ident" id="5777864">src</span>&nbsp;<span class="op" id="5777868">*</span><span class="ident" id="5777869"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777874">.</span><span class="ident" id="5777875"><a href="/gostd/image/ycbcr.go.html#5181913">YCbCr</a></span><span class="op" id="5777880">,</span>&nbsp;<span class="ident" id="5777882">sp</span>&nbsp;<span class="ident" id="5777885"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5777890">.</span><span class="ident" id="5777891"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5777896">)</span>&nbsp;<span class="op" id="5777898">(</span><span class="ident" id="5777899">ok</span>&nbsp;<span class="builtintype" id="5777902">bool</span><span class="op" id="5777906">)</span>&nbsp;<span class="op" id="5777908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777911">//&nbsp;An&nbsp;image.YCbCr&nbsp;is&nbsp;always&nbsp;fully&nbsp;opaque,&nbsp;and&nbsp;so&nbsp;if&nbsp;the&nbsp;mask&nbsp;is&nbsp;implicitly&nbsp;nil</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5777991">//&nbsp;(i.e.&nbsp;fully&nbsp;opaque)&nbsp;then&nbsp;the&nbsp;op&nbsp;is&nbsp;effectively&nbsp;always&nbsp;Src.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778054">x0</span>&nbsp;<span class="op" id="5778057">:=</span>&nbsp;<span class="op" id="5778060">(</span><span class="ident" id="5778061"><a href="/gostd/image/draw/draw.go.html#5777845">r</a></span><span class="op" id="5778062">.</span><span class="ident" id="5778063"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778066">.</span><span class="ident" id="5778067"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5778069">-</span>&nbsp;<span class="ident" id="5778071"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778074">.</span><span class="ident" id="5778075"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5778079">.</span><span class="ident" id="5778080"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778083">.</span><span class="ident" id="5778084"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778085">)</span>&nbsp;<span class="op" id="5778087">*</span>&nbsp;<span class="num" id="5778089">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778092">x1</span>&nbsp;<span class="op" id="5778095">:=</span>&nbsp;<span class="op" id="5778098">(</span><span class="ident" id="5778099"><a href="/gostd/image/draw/draw.go.html#5777845">r</a></span><span class="op" id="5778100">.</span><span class="ident" id="5778101"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5778104">.</span><span class="ident" id="5778105"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5778107">-</span>&nbsp;<span class="ident" id="5778109"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778112">.</span><span class="ident" id="5778113"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5778117">.</span><span class="ident" id="5778118"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778121">.</span><span class="ident" id="5778122"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778123">)</span>&nbsp;<span class="op" id="5778125">*</span>&nbsp;<span class="num" id="5778127">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778130">y0</span>&nbsp;<span class="op" id="5778133">:=</span>&nbsp;<span class="ident" id="5778136"><a href="/gostd/image/draw/draw.go.html#5777845">r</a></span><span class="op" id="5778137">.</span><span class="ident" id="5778138"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778141">.</span><span class="ident" id="5778142"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5778144">-</span>&nbsp;<span class="ident" id="5778146"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778149">.</span><span class="ident" id="5778150"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5778154">.</span><span class="ident" id="5778155"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778158">.</span><span class="ident" id="5778159"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778162">y1</span>&nbsp;<span class="op" id="5778165">:=</span>&nbsp;<span class="ident" id="5778168"><a href="/gostd/image/draw/draw.go.html#5777845">r</a></span><span class="op" id="5778169">.</span><span class="ident" id="5778170"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5778173">.</span><span class="ident" id="5778174"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5778176">-</span>&nbsp;<span class="ident" id="5778178"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778181">.</span><span class="ident" id="5778182"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><span class="op" id="5778186">.</span><span class="ident" id="5778187"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778190">.</span><span class="ident" id="5778191"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778194">switch</span>&nbsp;<span class="ident" id="5778201"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778204">.</span><span class="ident" id="5778205"><a href="/gostd/image/ycbcr.go.html#5181993">SubsampleRatio</a></span>&nbsp;<span class="op" id="5778220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778223">case</span>&nbsp;<span class="ident" id="5778228"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5778233">.</span><span class="ident" id="5778234"><a href="/gostd/image/ycbcr.go.html#5180711">YCbCrSubsampleRatio444</a></span><span class="op" id="5778256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778260">for</span>&nbsp;<span class="ident" id="5778264">y</span><span class="op" id="5778265">,</span>&nbsp;<span class="ident" id="5778267">sy</span>&nbsp;<span class="op" id="5778270">:=</span>&nbsp;<span class="ident" id="5778273"><a href="/gostd/image/draw/draw.go.html#5778130">y0</a></span><span class="op" id="5778275">,</span>&nbsp;<span class="ident" id="5778277"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778279">.</span><span class="ident" id="5778280"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778281">;</span>&nbsp;<span class="ident" id="5778283"><a href="/gostd/image/draw/draw.go.html#5778264">y</a></span>&nbsp;<span class="op" id="5778285">!=</span>&nbsp;<span class="ident" id="5778288"><a href="/gostd/image/draw/draw.go.html#5778162">y1</a></span><span class="op" id="5778290">;</span>&nbsp;<span class="ident" id="5778292"><a href="/gostd/image/draw/draw.go.html#5778264">y</a></span><span class="op" id="5778293">,</span>&nbsp;<span class="ident" id="5778295"><a href="/gostd/image/draw/draw.go.html#5778267">sy</a></span>&nbsp;<span class="op" id="5778298">=</span>&nbsp;<span class="ident" id="5778300"><a href="/gostd/image/draw/draw.go.html#5778264">y</a></span><span class="op" id="5778301">+</span><span class="num" id="5778302">1</span><span class="op" id="5778303">,</span>&nbsp;<span class="ident" id="5778305"><a href="/gostd/image/draw/draw.go.html#5778267">sy</a></span><span class="op" id="5778307">+</span><span class="num" id="5778308">1</span>&nbsp;<span class="op" id="5778310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778315">dpix</span>&nbsp;<span class="op" id="5778320">:=</span>&nbsp;<span class="ident" id="5778323"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778326">.</span><span class="ident" id="5778327"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5778330">[</span><span class="ident" id="5778331"><a href="/gostd/image/draw/draw.go.html#5778264">y</a></span><span class="op" id="5778332">*</span><span class="ident" id="5778333"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778336">.</span><span class="ident" id="5778337"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5778343">:</span><span class="op" id="5778344">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778349">yi</span>&nbsp;<span class="op" id="5778352">:=</span>&nbsp;<span class="op" id="5778355">(</span><span class="ident" id="5778356"><a href="/gostd/image/draw/draw.go.html#5778267">sy</a></span><span class="op" id="5778358">-</span><span class="ident" id="5778359"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778362">.</span><span class="ident" id="5778363"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778367">.</span><span class="ident" id="5778368"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778371">.</span><span class="ident" id="5778372"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778373">)</span><span class="op" id="5778374">*</span><span class="ident" id="5778375"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778378">.</span><span class="ident" id="5778379"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span>&nbsp;<span class="op" id="5778387">+</span>&nbsp;<span class="op" id="5778389">(</span><span class="ident" id="5778390"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778392">.</span><span class="ident" id="5778393"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5778395">-</span>&nbsp;<span class="ident" id="5778397"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778400">.</span><span class="ident" id="5778401"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778405">.</span><span class="ident" id="5778406"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778409">.</span><span class="ident" id="5778410"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778411">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778416">ci</span>&nbsp;<span class="op" id="5778419">:=</span>&nbsp;<span class="op" id="5778422">(</span><span class="ident" id="5778423"><a href="/gostd/image/draw/draw.go.html#5778267">sy</a></span><span class="op" id="5778425">-</span><span class="ident" id="5778426"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778429">.</span><span class="ident" id="5778430"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778434">.</span><span class="ident" id="5778435"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778438">.</span><span class="ident" id="5778439"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778440">)</span><span class="op" id="5778441">*</span><span class="ident" id="5778442"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778445">.</span><span class="ident" id="5778446"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span>&nbsp;<span class="op" id="5778454">+</span>&nbsp;<span class="op" id="5778456">(</span><span class="ident" id="5778457"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778459">.</span><span class="ident" id="5778460"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5778462">-</span>&nbsp;<span class="ident" id="5778464"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778467">.</span><span class="ident" id="5778468"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778472">.</span><span class="ident" id="5778473"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778476">.</span><span class="ident" id="5778477"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778483">for</span>&nbsp;<span class="ident" id="5778487">x</span>&nbsp;<span class="op" id="5778489">:=</span>&nbsp;<span class="ident" id="5778492"><a href="/gostd/image/draw/draw.go.html#5778054">x0</a></span><span class="op" id="5778494">;</span>&nbsp;<span class="ident" id="5778496"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span>&nbsp;<span class="op" id="5778498">!=</span>&nbsp;<span class="ident" id="5778501"><a href="/gostd/image/draw/draw.go.html#5778092">x1</a></span><span class="op" id="5778503">;</span>&nbsp;<span class="ident" id="5778505"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778506">,</span>&nbsp;<span class="ident" id="5778508"><a href="/gostd/image/draw/draw.go.html#5778349">yi</a></span><span class="op" id="5778510">,</span>&nbsp;<span class="ident" id="5778512"><a href="/gostd/image/draw/draw.go.html#5778416">ci</a></span>&nbsp;<span class="op" id="5778515">=</span>&nbsp;<span class="ident" id="5778517"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778518">+</span><span class="num" id="5778519">4</span><span class="op" id="5778520">,</span>&nbsp;<span class="ident" id="5778522"><a href="/gostd/image/draw/draw.go.html#5778349">yi</a></span><span class="op" id="5778524">+</span><span class="num" id="5778525">1</span><span class="op" id="5778526">,</span>&nbsp;<span class="ident" id="5778528"><a href="/gostd/image/draw/draw.go.html#5778416">ci</a></span><span class="op" id="5778530">+</span><span class="num" id="5778531">1</span>&nbsp;<span class="op" id="5778533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778539">rr</span><span class="op" id="5778541">,</span>&nbsp;<span class="ident" id="5778543">gg</span><span class="op" id="5778545">,</span>&nbsp;<span class="ident" id="5778547">bb</span>&nbsp;<span class="op" id="5778550">:=</span>&nbsp;<span class="ident" id="5778553"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5778558">.</span><span class="ident" id="5778559"><a href="/gostd/image/color/ycbcr.go.html#5192523">YCbCrToRGB</a></span><span class="op" id="5778569">(</span><span class="ident" id="5778570"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778573">.</span><span class="ident" id="5778574"><a href="/gostd/image/ycbcr.go.html#5181929">Y</a></span><span class="op" id="5778575">[</span><span class="ident" id="5778576"><a href="/gostd/image/draw/draw.go.html#5778349">yi</a></span><span class="op" id="5778578">]</span><span class="op" id="5778579">,</span>&nbsp;<span class="ident" id="5778581"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778584">.</span><span class="ident" id="5778585"><a href="/gostd/image/ycbcr.go.html#5181932">Cb</a></span><span class="op" id="5778587">[</span><span class="ident" id="5778588"><a href="/gostd/image/draw/draw.go.html#5778416">ci</a></span><span class="op" id="5778590">]</span><span class="op" id="5778591">,</span>&nbsp;<span class="ident" id="5778593"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778596">.</span><span class="ident" id="5778597"><a href="/gostd/image/ycbcr.go.html#5181936">Cr</a></span><span class="op" id="5778599">[</span><span class="ident" id="5778600"><a href="/gostd/image/draw/draw.go.html#5778416">ci</a></span><span class="op" id="5778602">]</span><span class="op" id="5778603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778609"><a href="/gostd/image/draw/draw.go.html#5778315">dpix</a></span><span class="op" id="5778613">[</span><span class="ident" id="5778614"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778615">+</span><span class="num" id="5778616">0</span><span class="op" id="5778617">]</span>&nbsp;<span class="op" id="5778619">=</span>&nbsp;<span class="ident" id="5778621"><a href="/gostd/image/draw/draw.go.html#5778539">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778628"><a href="/gostd/image/draw/draw.go.html#5778315">dpix</a></span><span class="op" id="5778632">[</span><span class="ident" id="5778633"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778634">+</span><span class="num" id="5778635">1</span><span class="op" id="5778636">]</span>&nbsp;<span class="op" id="5778638">=</span>&nbsp;<span class="ident" id="5778640"><a href="/gostd/image/draw/draw.go.html#5778543">gg</a></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778647"><a href="/gostd/image/draw/draw.go.html#5778315">dpix</a></span><span class="op" id="5778651">[</span><span class="ident" id="5778652"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778653">+</span><span class="num" id="5778654">2</span><span class="op" id="5778655">]</span>&nbsp;<span class="op" id="5778657">=</span>&nbsp;<span class="ident" id="5778659"><a href="/gostd/image/draw/draw.go.html#5778547">bb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778666"><a href="/gostd/image/draw/draw.go.html#5778315">dpix</a></span><span class="op" id="5778670">[</span><span class="ident" id="5778671"><a href="/gostd/image/draw/draw.go.html#5778487">x</a></span><span class="op" id="5778672">+</span><span class="num" id="5778673">3</span><span class="op" id="5778674">]</span>&nbsp;<span class="op" id="5778676">=</span>&nbsp;<span class="num" id="5778678">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5778689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778692">case</span>&nbsp;<span class="ident" id="5778697"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5778702">.</span><span class="ident" id="5778703"><a href="/gostd/image/ycbcr.go.html#5180762">YCbCrSubsampleRatio422</a></span><span class="op" id="5778725">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778729">for</span>&nbsp;<span class="ident" id="5778733">y</span><span class="op" id="5778734">,</span>&nbsp;<span class="ident" id="5778736">sy</span>&nbsp;<span class="op" id="5778739">:=</span>&nbsp;<span class="ident" id="5778742"><a href="/gostd/image/draw/draw.go.html#5778130">y0</a></span><span class="op" id="5778744">,</span>&nbsp;<span class="ident" id="5778746"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778748">.</span><span class="ident" id="5778749"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778750">;</span>&nbsp;<span class="ident" id="5778752"><a href="/gostd/image/draw/draw.go.html#5778733">y</a></span>&nbsp;<span class="op" id="5778754">!=</span>&nbsp;<span class="ident" id="5778757"><a href="/gostd/image/draw/draw.go.html#5778162">y1</a></span><span class="op" id="5778759">;</span>&nbsp;<span class="ident" id="5778761"><a href="/gostd/image/draw/draw.go.html#5778733">y</a></span><span class="op" id="5778762">,</span>&nbsp;<span class="ident" id="5778764"><a href="/gostd/image/draw/draw.go.html#5778736">sy</a></span>&nbsp;<span class="op" id="5778767">=</span>&nbsp;<span class="ident" id="5778769"><a href="/gostd/image/draw/draw.go.html#5778733">y</a></span><span class="op" id="5778770">+</span><span class="num" id="5778771">1</span><span class="op" id="5778772">,</span>&nbsp;<span class="ident" id="5778774"><a href="/gostd/image/draw/draw.go.html#5778736">sy</a></span><span class="op" id="5778776">+</span><span class="num" id="5778777">1</span>&nbsp;<span class="op" id="5778779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778784">dpix</span>&nbsp;<span class="op" id="5778789">:=</span>&nbsp;<span class="ident" id="5778792"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778795">.</span><span class="ident" id="5778796"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5778799">[</span><span class="ident" id="5778800"><a href="/gostd/image/draw/draw.go.html#5778733">y</a></span><span class="op" id="5778801">*</span><span class="ident" id="5778802"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5778805">.</span><span class="ident" id="5778806"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5778812">:</span><span class="op" id="5778813">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778818">yi</span>&nbsp;<span class="op" id="5778821">:=</span>&nbsp;<span class="op" id="5778824">(</span><span class="ident" id="5778825"><a href="/gostd/image/draw/draw.go.html#5778736">sy</a></span><span class="op" id="5778827">-</span><span class="ident" id="5778828"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778831">.</span><span class="ident" id="5778832"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778836">.</span><span class="ident" id="5778837"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778840">.</span><span class="ident" id="5778841"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778842">)</span><span class="op" id="5778843">*</span><span class="ident" id="5778844"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778847">.</span><span class="ident" id="5778848"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span>&nbsp;<span class="op" id="5778856">+</span>&nbsp;<span class="op" id="5778858">(</span><span class="ident" id="5778859"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778861">.</span><span class="ident" id="5778862"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5778864">-</span>&nbsp;<span class="ident" id="5778866"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778869">.</span><span class="ident" id="5778870"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778874">.</span><span class="ident" id="5778875"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778878">.</span><span class="ident" id="5778879"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5778885">ciBase</span>&nbsp;<span class="op" id="5778892">:=</span>&nbsp;<span class="op" id="5778895">(</span><span class="ident" id="5778896"><a href="/gostd/image/draw/draw.go.html#5778736">sy</a></span><span class="op" id="5778898">-</span><span class="ident" id="5778899"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778902">.</span><span class="ident" id="5778903"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778907">.</span><span class="ident" id="5778908"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778911">.</span><span class="ident" id="5778912"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5778913">)</span><span class="op" id="5778914">*</span><span class="ident" id="5778915"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778918">.</span><span class="ident" id="5778919"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span>&nbsp;<span class="op" id="5778927">-</span>&nbsp;<span class="ident" id="5778929"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5778932">.</span><span class="ident" id="5778933"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5778937">.</span><span class="ident" id="5778938"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5778941">.</span><span class="ident" id="5778942"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778943">/</span><span class="num" id="5778944">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5778949">for</span>&nbsp;<span class="ident" id="5778953">x</span><span class="op" id="5778954">,</span>&nbsp;<span class="ident" id="5778956">sx</span>&nbsp;<span class="op" id="5778959">:=</span>&nbsp;<span class="ident" id="5778962"><a href="/gostd/image/draw/draw.go.html#5778054">x0</a></span><span class="op" id="5778964">,</span>&nbsp;<span class="ident" id="5778966"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5778968">.</span><span class="ident" id="5778969"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5778970">;</span>&nbsp;<span class="ident" id="5778972"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span>&nbsp;<span class="op" id="5778974">!=</span>&nbsp;<span class="ident" id="5778977"><a href="/gostd/image/draw/draw.go.html#5778092">x1</a></span><span class="op" id="5778979">;</span>&nbsp;<span class="ident" id="5778981"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5778982">,</span>&nbsp;<span class="ident" id="5778984"><a href="/gostd/image/draw/draw.go.html#5778956">sx</a></span><span class="op" id="5778986">,</span>&nbsp;<span class="ident" id="5778988"><a href="/gostd/image/draw/draw.go.html#5778818">yi</a></span>&nbsp;<span class="op" id="5778991">=</span>&nbsp;<span class="ident" id="5778993"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5778994">+</span><span class="num" id="5778995">4</span><span class="op" id="5778996">,</span>&nbsp;<span class="ident" id="5778998"><a href="/gostd/image/draw/draw.go.html#5778956">sx</a></span><span class="op" id="5779000">+</span><span class="num" id="5779001">1</span><span class="op" id="5779002">,</span>&nbsp;<span class="ident" id="5779004"><a href="/gostd/image/draw/draw.go.html#5778818">yi</a></span><span class="op" id="5779006">+</span><span class="num" id="5779007">1</span>&nbsp;<span class="op" id="5779009">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779015">ci</span>&nbsp;<span class="op" id="5779018">:=</span>&nbsp;<span class="ident" id="5779021"><a href="/gostd/image/draw/draw.go.html#5778885">ciBase</a></span>&nbsp;<span class="op" id="5779028">+</span>&nbsp;<span class="ident" id="5779030"><a href="/gostd/image/draw/draw.go.html#5778956">sx</a></span><span class="op" id="5779032">/</span><span class="num" id="5779033">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779039">rr</span><span class="op" id="5779041">,</span>&nbsp;<span class="ident" id="5779043">gg</span><span class="op" id="5779045">,</span>&nbsp;<span class="ident" id="5779047">bb</span>&nbsp;<span class="op" id="5779050">:=</span>&nbsp;<span class="ident" id="5779053"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5779058">.</span><span class="ident" id="5779059"><a href="/gostd/image/color/ycbcr.go.html#5192523">YCbCrToRGB</a></span><span class="op" id="5779069">(</span><span class="ident" id="5779070"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779073">.</span><span class="ident" id="5779074"><a href="/gostd/image/ycbcr.go.html#5181929">Y</a></span><span class="op" id="5779075">[</span><span class="ident" id="5779076"><a href="/gostd/image/draw/draw.go.html#5778818">yi</a></span><span class="op" id="5779078">]</span><span class="op" id="5779079">,</span>&nbsp;<span class="ident" id="5779081"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779084">.</span><span class="ident" id="5779085"><a href="/gostd/image/ycbcr.go.html#5181932">Cb</a></span><span class="op" id="5779087">[</span><span class="ident" id="5779088"><a href="/gostd/image/draw/draw.go.html#5779015">ci</a></span><span class="op" id="5779090">]</span><span class="op" id="5779091">,</span>&nbsp;<span class="ident" id="5779093"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779096">.</span><span class="ident" id="5779097"><a href="/gostd/image/ycbcr.go.html#5181936">Cr</a></span><span class="op" id="5779099">[</span><span class="ident" id="5779100"><a href="/gostd/image/draw/draw.go.html#5779015">ci</a></span><span class="op" id="5779102">]</span><span class="op" id="5779103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779109"><a href="/gostd/image/draw/draw.go.html#5778784">dpix</a></span><span class="op" id="5779113">[</span><span class="ident" id="5779114"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5779115">+</span><span class="num" id="5779116">0</span><span class="op" id="5779117">]</span>&nbsp;<span class="op" id="5779119">=</span>&nbsp;<span class="ident" id="5779121"><a href="/gostd/image/draw/draw.go.html#5779039">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779128"><a href="/gostd/image/draw/draw.go.html#5778784">dpix</a></span><span class="op" id="5779132">[</span><span class="ident" id="5779133"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5779134">+</span><span class="num" id="5779135">1</span><span class="op" id="5779136">]</span>&nbsp;<span class="op" id="5779138">=</span>&nbsp;<span class="ident" id="5779140"><a href="/gostd/image/draw/draw.go.html#5779043">gg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779147"><a href="/gostd/image/draw/draw.go.html#5778784">dpix</a></span><span class="op" id="5779151">[</span><span class="ident" id="5779152"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5779153">+</span><span class="num" id="5779154">2</span><span class="op" id="5779155">]</span>&nbsp;<span class="op" id="5779157">=</span>&nbsp;<span class="ident" id="5779159"><a href="/gostd/image/draw/draw.go.html#5779047">bb</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779166"><a href="/gostd/image/draw/draw.go.html#5778784">dpix</a></span><span class="op" id="5779170">[</span><span class="ident" id="5779171"><a href="/gostd/image/draw/draw.go.html#5778953">x</a></span><span class="op" id="5779172">+</span><span class="num" id="5779173">3</span><span class="op" id="5779174">]</span>&nbsp;<span class="op" id="5779176">=</span>&nbsp;<span class="num" id="5779178">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779192">case</span>&nbsp;<span class="ident" id="5779197"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5779202">.</span><span class="ident" id="5779203"><a href="/gostd/image/ycbcr.go.html#5180786">YCbCrSubsampleRatio420</a></span><span class="op" id="5779225">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779229">for</span>&nbsp;<span class="ident" id="5779233">y</span><span class="op" id="5779234">,</span>&nbsp;<span class="ident" id="5779236">sy</span>&nbsp;<span class="op" id="5779239">:=</span>&nbsp;<span class="ident" id="5779242"><a href="/gostd/image/draw/draw.go.html#5778130">y0</a></span><span class="op" id="5779244">,</span>&nbsp;<span class="ident" id="5779246"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779248">.</span><span class="ident" id="5779249"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779250">;</span>&nbsp;<span class="ident" id="5779252"><a href="/gostd/image/draw/draw.go.html#5779233">y</a></span>&nbsp;<span class="op" id="5779254">!=</span>&nbsp;<span class="ident" id="5779257"><a href="/gostd/image/draw/draw.go.html#5778162">y1</a></span><span class="op" id="5779259">;</span>&nbsp;<span class="ident" id="5779261"><a href="/gostd/image/draw/draw.go.html#5779233">y</a></span><span class="op" id="5779262">,</span>&nbsp;<span class="ident" id="5779264"><a href="/gostd/image/draw/draw.go.html#5779236">sy</a></span>&nbsp;<span class="op" id="5779267">=</span>&nbsp;<span class="ident" id="5779269"><a href="/gostd/image/draw/draw.go.html#5779233">y</a></span><span class="op" id="5779270">+</span><span class="num" id="5779271">1</span><span class="op" id="5779272">,</span>&nbsp;<span class="ident" id="5779274"><a href="/gostd/image/draw/draw.go.html#5779236">sy</a></span><span class="op" id="5779276">+</span><span class="num" id="5779277">1</span>&nbsp;<span class="op" id="5779279">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779284">dpix</span>&nbsp;<span class="op" id="5779289">:=</span>&nbsp;<span class="ident" id="5779292"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5779295">.</span><span class="ident" id="5779296"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5779299">[</span><span class="ident" id="5779300"><a href="/gostd/image/draw/draw.go.html#5779233">y</a></span><span class="op" id="5779301">*</span><span class="ident" id="5779302"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5779305">.</span><span class="ident" id="5779306"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5779312">:</span><span class="op" id="5779313">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779318">yi</span>&nbsp;<span class="op" id="5779321">:=</span>&nbsp;<span class="op" id="5779324">(</span><span class="ident" id="5779325"><a href="/gostd/image/draw/draw.go.html#5779236">sy</a></span><span class="op" id="5779327">-</span><span class="ident" id="5779328"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779331">.</span><span class="ident" id="5779332"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779336">.</span><span class="ident" id="5779337"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779340">.</span><span class="ident" id="5779341"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779342">)</span><span class="op" id="5779343">*</span><span class="ident" id="5779344"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779347">.</span><span class="ident" id="5779348"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span>&nbsp;<span class="op" id="5779356">+</span>&nbsp;<span class="op" id="5779358">(</span><span class="ident" id="5779359"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779361">.</span><span class="ident" id="5779362"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5779364">-</span>&nbsp;<span class="ident" id="5779366"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779369">.</span><span class="ident" id="5779370"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779374">.</span><span class="ident" id="5779375"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779378">.</span><span class="ident" id="5779379"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5779380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779385">ciBase</span>&nbsp;<span class="op" id="5779392">:=</span>&nbsp;<span class="op" id="5779395">(</span><span class="ident" id="5779396"><a href="/gostd/image/draw/draw.go.html#5779236">sy</a></span><span class="op" id="5779398">/</span><span class="num" id="5779399">2</span><span class="op" id="5779400">-</span><span class="ident" id="5779401"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779404">.</span><span class="ident" id="5779405"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779409">.</span><span class="ident" id="5779410"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779413">.</span><span class="ident" id="5779414"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779415">/</span><span class="num" id="5779416">2</span><span class="op" id="5779417">)</span><span class="op" id="5779418">*</span><span class="ident" id="5779419"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779422">.</span><span class="ident" id="5779423"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span>&nbsp;<span class="op" id="5779431">-</span>&nbsp;<span class="ident" id="5779433"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779436">.</span><span class="ident" id="5779437"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779441">.</span><span class="ident" id="5779442"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779445">.</span><span class="ident" id="5779446"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5779447">/</span><span class="num" id="5779448">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779453">for</span>&nbsp;<span class="ident" id="5779457">x</span><span class="op" id="5779458">,</span>&nbsp;<span class="ident" id="5779460">sx</span>&nbsp;<span class="op" id="5779463">:=</span>&nbsp;<span class="ident" id="5779466"><a href="/gostd/image/draw/draw.go.html#5778054">x0</a></span><span class="op" id="5779468">,</span>&nbsp;<span class="ident" id="5779470"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779472">.</span><span class="ident" id="5779473"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5779474">;</span>&nbsp;<span class="ident" id="5779476"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span>&nbsp;<span class="op" id="5779478">!=</span>&nbsp;<span class="ident" id="5779481"><a href="/gostd/image/draw/draw.go.html#5778092">x1</a></span><span class="op" id="5779483">;</span>&nbsp;<span class="ident" id="5779485"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779486">,</span>&nbsp;<span class="ident" id="5779488"><a href="/gostd/image/draw/draw.go.html#5779460">sx</a></span><span class="op" id="5779490">,</span>&nbsp;<span class="ident" id="5779492"><a href="/gostd/image/draw/draw.go.html#5779318">yi</a></span>&nbsp;<span class="op" id="5779495">=</span>&nbsp;<span class="ident" id="5779497"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779498">+</span><span class="num" id="5779499">4</span><span class="op" id="5779500">,</span>&nbsp;<span class="ident" id="5779502"><a href="/gostd/image/draw/draw.go.html#5779460">sx</a></span><span class="op" id="5779504">+</span><span class="num" id="5779505">1</span><span class="op" id="5779506">,</span>&nbsp;<span class="ident" id="5779508"><a href="/gostd/image/draw/draw.go.html#5779318">yi</a></span><span class="op" id="5779510">+</span><span class="num" id="5779511">1</span>&nbsp;<span class="op" id="5779513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779519">ci</span>&nbsp;<span class="op" id="5779522">:=</span>&nbsp;<span class="ident" id="5779525"><a href="/gostd/image/draw/draw.go.html#5779385">ciBase</a></span>&nbsp;<span class="op" id="5779532">+</span>&nbsp;<span class="ident" id="5779534"><a href="/gostd/image/draw/draw.go.html#5779460">sx</a></span><span class="op" id="5779536">/</span><span class="num" id="5779537">2</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779543">rr</span><span class="op" id="5779545">,</span>&nbsp;<span class="ident" id="5779547">gg</span><span class="op" id="5779549">,</span>&nbsp;<span class="ident" id="5779551">bb</span>&nbsp;<span class="op" id="5779554">:=</span>&nbsp;<span class="ident" id="5779557"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5779562">.</span><span class="ident" id="5779563"><a href="/gostd/image/color/ycbcr.go.html#5192523">YCbCrToRGB</a></span><span class="op" id="5779573">(</span><span class="ident" id="5779574"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779577">.</span><span class="ident" id="5779578"><a href="/gostd/image/ycbcr.go.html#5181929">Y</a></span><span class="op" id="5779579">[</span><span class="ident" id="5779580"><a href="/gostd/image/draw/draw.go.html#5779318">yi</a></span><span class="op" id="5779582">]</span><span class="op" id="5779583">,</span>&nbsp;<span class="ident" id="5779585"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779588">.</span><span class="ident" id="5779589"><a href="/gostd/image/ycbcr.go.html#5181932">Cb</a></span><span class="op" id="5779591">[</span><span class="ident" id="5779592"><a href="/gostd/image/draw/draw.go.html#5779519">ci</a></span><span class="op" id="5779594">]</span><span class="op" id="5779595">,</span>&nbsp;<span class="ident" id="5779597"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779600">.</span><span class="ident" id="5779601"><a href="/gostd/image/ycbcr.go.html#5181936">Cr</a></span><span class="op" id="5779603">[</span><span class="ident" id="5779604"><a href="/gostd/image/draw/draw.go.html#5779519">ci</a></span><span class="op" id="5779606">]</span><span class="op" id="5779607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779613"><a href="/gostd/image/draw/draw.go.html#5779284">dpix</a></span><span class="op" id="5779617">[</span><span class="ident" id="5779618"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779619">+</span><span class="num" id="5779620">0</span><span class="op" id="5779621">]</span>&nbsp;<span class="op" id="5779623">=</span>&nbsp;<span class="ident" id="5779625"><a href="/gostd/image/draw/draw.go.html#5779543">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779632"><a href="/gostd/image/draw/draw.go.html#5779284">dpix</a></span><span class="op" id="5779636">[</span><span class="ident" id="5779637"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779638">+</span><span class="num" id="5779639">1</span><span class="op" id="5779640">]</span>&nbsp;<span class="op" id="5779642">=</span>&nbsp;<span class="ident" id="5779644"><a href="/gostd/image/draw/draw.go.html#5779547">gg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779651"><a href="/gostd/image/draw/draw.go.html#5779284">dpix</a></span><span class="op" id="5779655">[</span><span class="ident" id="5779656"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779657">+</span><span class="num" id="5779658">2</span><span class="op" id="5779659">]</span>&nbsp;<span class="op" id="5779661">=</span>&nbsp;<span class="ident" id="5779663"><a href="/gostd/image/draw/draw.go.html#5779551">bb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779670"><a href="/gostd/image/draw/draw.go.html#5779284">dpix</a></span><span class="op" id="5779674">[</span><span class="ident" id="5779675"><a href="/gostd/image/draw/draw.go.html#5779457">x</a></span><span class="op" id="5779676">+</span><span class="num" id="5779677">3</span><span class="op" id="5779678">]</span>&nbsp;<span class="op" id="5779680">=</span>&nbsp;<span class="num" id="5779682">255</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5779693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779696">case</span>&nbsp;<span class="ident" id="5779701"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5779706">.</span><span class="ident" id="5779707"><a href="/gostd/image/ycbcr.go.html#5180810">YCbCrSubsampleRatio440</a></span><span class="op" id="5779729">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779733">for</span>&nbsp;<span class="ident" id="5779737">y</span><span class="op" id="5779738">,</span>&nbsp;<span class="ident" id="5779740">sy</span>&nbsp;<span class="op" id="5779743">:=</span>&nbsp;<span class="ident" id="5779746"><a href="/gostd/image/draw/draw.go.html#5778130">y0</a></span><span class="op" id="5779748">,</span>&nbsp;<span class="ident" id="5779750"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779752">.</span><span class="ident" id="5779753"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779754">;</span>&nbsp;<span class="ident" id="5779756"><a href="/gostd/image/draw/draw.go.html#5779737">y</a></span>&nbsp;<span class="op" id="5779758">!=</span>&nbsp;<span class="ident" id="5779761"><a href="/gostd/image/draw/draw.go.html#5778162">y1</a></span><span class="op" id="5779763">;</span>&nbsp;<span class="ident" id="5779765"><a href="/gostd/image/draw/draw.go.html#5779737">y</a></span><span class="op" id="5779766">,</span>&nbsp;<span class="ident" id="5779768"><a href="/gostd/image/draw/draw.go.html#5779740">sy</a></span>&nbsp;<span class="op" id="5779771">=</span>&nbsp;<span class="ident" id="5779773"><a href="/gostd/image/draw/draw.go.html#5779737">y</a></span><span class="op" id="5779774">+</span><span class="num" id="5779775">1</span><span class="op" id="5779776">,</span>&nbsp;<span class="ident" id="5779778"><a href="/gostd/image/draw/draw.go.html#5779740">sy</a></span><span class="op" id="5779780">+</span><span class="num" id="5779781">1</span>&nbsp;<span class="op" id="5779783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779788">dpix</span>&nbsp;<span class="op" id="5779793">:=</span>&nbsp;<span class="ident" id="5779796"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5779799">.</span><span class="ident" id="5779800"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5779803">[</span><span class="ident" id="5779804"><a href="/gostd/image/draw/draw.go.html#5779737">y</a></span><span class="op" id="5779805">*</span><span class="ident" id="5779806"><a href="/gostd/image/draw/draw.go.html#5777828">dst</a></span><span class="op" id="5779809">.</span><span class="ident" id="5779810"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="5779816">:</span><span class="op" id="5779817">]</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779822">yi</span>&nbsp;<span class="op" id="5779825">:=</span>&nbsp;<span class="op" id="5779828">(</span><span class="ident" id="5779829"><a href="/gostd/image/draw/draw.go.html#5779740">sy</a></span><span class="op" id="5779831">-</span><span class="ident" id="5779832"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779835">.</span><span class="ident" id="5779836"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779840">.</span><span class="ident" id="5779841"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779844">.</span><span class="ident" id="5779845"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779846">)</span><span class="op" id="5779847">*</span><span class="ident" id="5779848"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779851">.</span><span class="ident" id="5779852"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span>&nbsp;<span class="op" id="5779860">+</span>&nbsp;<span class="op" id="5779862">(</span><span class="ident" id="5779863"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779865">.</span><span class="ident" id="5779866"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5779868">-</span>&nbsp;<span class="ident" id="5779870"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779873">.</span><span class="ident" id="5779874"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779878">.</span><span class="ident" id="5779879"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779882">.</span><span class="ident" id="5779883"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5779884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5779889">ci</span>&nbsp;<span class="op" id="5779892">:=</span>&nbsp;<span class="op" id="5779895">(</span><span class="ident" id="5779896"><a href="/gostd/image/draw/draw.go.html#5779740">sy</a></span><span class="op" id="5779898">/</span><span class="num" id="5779899">2</span><span class="op" id="5779900">-</span><span class="ident" id="5779901"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779904">.</span><span class="ident" id="5779905"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779909">.</span><span class="ident" id="5779910"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779913">.</span><span class="ident" id="5779914"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5779915">/</span><span class="num" id="5779916">2</span><span class="op" id="5779917">)</span><span class="op" id="5779918">*</span><span class="ident" id="5779919"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779922">.</span><span class="ident" id="5779923"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span>&nbsp;<span class="op" id="5779931">+</span>&nbsp;<span class="op" id="5779933">(</span><span class="ident" id="5779934"><a href="/gostd/image/draw/draw.go.html#5777882">sp</a></span><span class="op" id="5779936">.</span><span class="ident" id="5779937"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5779939">-</span>&nbsp;<span class="ident" id="5779941"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5779944">.</span><span class="ident" id="5779945"><a href="/gostd/image/ycbcr.go.html#5182029">Rect</a></span><span class="op" id="5779949">.</span><span class="ident" id="5779950"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5779953">.</span><span class="ident" id="5779954"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5779955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5779960">for</span>&nbsp;<span class="ident" id="5779964">x</span>&nbsp;<span class="op" id="5779966">:=</span>&nbsp;<span class="ident" id="5779969"><a href="/gostd/image/draw/draw.go.html#5778054">x0</a></span><span class="op" id="5779971">;</span>&nbsp;<span class="ident" id="5779973"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span>&nbsp;<span class="op" id="5779975">!=</span>&nbsp;<span class="ident" id="5779978"><a href="/gostd/image/draw/draw.go.html#5778092">x1</a></span><span class="op" id="5779980">;</span>&nbsp;<span class="ident" id="5779982"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5779983">,</span>&nbsp;<span class="ident" id="5779985"><a href="/gostd/image/draw/draw.go.html#5779822">yi</a></span><span class="op" id="5779987">,</span>&nbsp;<span class="ident" id="5779989"><a href="/gostd/image/draw/draw.go.html#5779889">ci</a></span>&nbsp;<span class="op" id="5779992">=</span>&nbsp;<span class="ident" id="5779994"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5779995">+</span><span class="num" id="5779996">4</span><span class="op" id="5779997">,</span>&nbsp;<span class="ident" id="5779999"><a href="/gostd/image/draw/draw.go.html#5779822">yi</a></span><span class="op" id="5780001">+</span><span class="num" id="5780002">1</span><span class="op" id="5780003">,</span>&nbsp;<span class="ident" id="5780005"><a href="/gostd/image/draw/draw.go.html#5779889">ci</a></span><span class="op" id="5780007">+</span><span class="num" id="5780008">1</span>&nbsp;<span class="op" id="5780010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780016">rr</span><span class="op" id="5780018">,</span>&nbsp;<span class="ident" id="5780020">gg</span><span class="op" id="5780022">,</span>&nbsp;<span class="ident" id="5780024">bb</span>&nbsp;<span class="op" id="5780027">:=</span>&nbsp;<span class="ident" id="5780030"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5780035">.</span><span class="ident" id="5780036"><a href="/gostd/image/color/ycbcr.go.html#5192523">YCbCrToRGB</a></span><span class="op" id="5780046">(</span><span class="ident" id="5780047"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5780050">.</span><span class="ident" id="5780051"><a href="/gostd/image/ycbcr.go.html#5181929">Y</a></span><span class="op" id="5780052">[</span><span class="ident" id="5780053"><a href="/gostd/image/draw/draw.go.html#5779822">yi</a></span><span class="op" id="5780055">]</span><span class="op" id="5780056">,</span>&nbsp;<span class="ident" id="5780058"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5780061">.</span><span class="ident" id="5780062"><a href="/gostd/image/ycbcr.go.html#5181932">Cb</a></span><span class="op" id="5780064">[</span><span class="ident" id="5780065"><a href="/gostd/image/draw/draw.go.html#5779889">ci</a></span><span class="op" id="5780067">]</span><span class="op" id="5780068">,</span>&nbsp;<span class="ident" id="5780070"><a href="/gostd/image/draw/draw.go.html#5777864">src</a></span><span class="op" id="5780073">.</span><span class="ident" id="5780074"><a href="/gostd/image/ycbcr.go.html#5181936">Cr</a></span><span class="op" id="5780076">[</span><span class="ident" id="5780077"><a href="/gostd/image/draw/draw.go.html#5779889">ci</a></span><span class="op" id="5780079">]</span><span class="op" id="5780080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780086"><a href="/gostd/image/draw/draw.go.html#5779788">dpix</a></span><span class="op" id="5780090">[</span><span class="ident" id="5780091"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5780092">+</span><span class="num" id="5780093">0</span><span class="op" id="5780094">]</span>&nbsp;<span class="op" id="5780096">=</span>&nbsp;<span class="ident" id="5780098"><a href="/gostd/image/draw/draw.go.html#5780016">rr</a></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780105"><a href="/gostd/image/draw/draw.go.html#5779788">dpix</a></span><span class="op" id="5780109">[</span><span class="ident" id="5780110"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5780111">+</span><span class="num" id="5780112">1</span><span class="op" id="5780113">]</span>&nbsp;<span class="op" id="5780115">=</span>&nbsp;<span class="ident" id="5780117"><a href="/gostd/image/draw/draw.go.html#5780020">gg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780124"><a href="/gostd/image/draw/draw.go.html#5779788">dpix</a></span><span class="op" id="5780128">[</span><span class="ident" id="5780129"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5780130">+</span><span class="num" id="5780131">2</span><span class="op" id="5780132">]</span>&nbsp;<span class="op" id="5780134">=</span>&nbsp;<span class="ident" id="5780136"><a href="/gostd/image/draw/draw.go.html#5780024">bb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780143"><a href="/gostd/image/draw/draw.go.html#5779788">dpix</a></span><span class="op" id="5780147">[</span><span class="ident" id="5780148"><a href="/gostd/image/draw/draw.go.html#5779964">x</a></span><span class="op" id="5780149">+</span><span class="num" id="5780150">3</span><span class="op" id="5780151">]</span>&nbsp;<span class="op" id="5780153">=</span>&nbsp;<span class="num" id="5780155">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5780162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5780166">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780169">default</span><span class="op" id="5780176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780180">return</span>&nbsp;<span class="builtintype" id="5780187">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5780194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780197">return</span>&nbsp;<span class="builtintype" id="5780204">true</span><br>
<span class="lineno"></span><span class="op" id="5780209">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="keyword" id="5780212">func</span>&nbsp;<span class="ident" id="5780217">drawGlyphOver</span><span class="op" id="5780230">(</span><span class="ident" id="5780231">dst</span>&nbsp;<span class="op" id="5780235">*</span><span class="ident" id="5780236"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5780241">.</span><span class="ident" id="5780242"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5780246">,</span>&nbsp;<span class="ident" id="5780248">r</span>&nbsp;<span class="ident" id="5780250"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5780255">.</span><span class="ident" id="5780256"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5780265">,</span>&nbsp;<span class="ident" id="5780267">src</span>&nbsp;<span class="op" id="5780271">*</span><span class="ident" id="5780272"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5780277">.</span><span class="ident" id="5780278"><a href="/gostd/image/names.go.html#5179789">Uniform</a></span><span class="op" id="5780285">,</span>&nbsp;<span class="ident" id="5780287">mask</span>&nbsp;<span class="op" id="5780292">*</span><span class="ident" id="5780293"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5780298">.</span><span class="ident" id="5780299"><a href="/gostd/image/image.go.html#5167078">Alpha</a></span><span class="op" id="5780304">,</span>&nbsp;<span class="ident" id="5780306">mp</span>&nbsp;<span class="ident" id="5780309"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5780314">.</span><span class="ident" id="5780315"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5780320">)</span>&nbsp;<span class="op" id="5780322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780325">i0</span>&nbsp;<span class="op" id="5780328">:=</span>&nbsp;<span class="ident" id="5780331"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780334">.</span><span class="ident" id="5780335"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5780344">(</span><span class="ident" id="5780345"><a href="/gostd/image/draw/draw.go.html#5780248">r</a></span><span class="op" id="5780346">.</span><span class="ident" id="5780347"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5780350">.</span><span class="ident" id="5780351"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5780352">,</span>&nbsp;<span class="ident" id="5780354"><a href="/gostd/image/draw/draw.go.html#5780248">r</a></span><span class="op" id="5780355">.</span><span class="ident" id="5780356"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5780359">.</span><span class="ident" id="5780360"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5780361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780364">i1</span>&nbsp;<span class="op" id="5780367">:=</span>&nbsp;<span class="ident" id="5780370"><a href="/gostd/image/draw/draw.go.html#5780325">i0</a></span>&nbsp;<span class="op" id="5780373">+</span>&nbsp;<span class="ident" id="5780375"><a href="/gostd/image/draw/draw.go.html#5780248">r</a></span><span class="op" id="5780376">.</span><span class="ident" id="5780377"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5780379">(</span><span class="op" id="5780380">)</span><span class="op" id="5780381">*</span><span class="num" id="5780382">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780385">mi0</span>&nbsp;<span class="op" id="5780389">:=</span>&nbsp;<span class="ident" id="5780392"><a href="/gostd/image/draw/draw.go.html#5780287">mask</a></span><span class="op" id="5780396">.</span><span class="ident" id="5780397"><a href="/gostd/image/image.go.html#5167853">PixOffset</a></span><span class="op" id="5780406">(</span><span class="ident" id="5780407"><a href="/gostd/image/draw/draw.go.html#5780306">mp</a></span><span class="op" id="5780409">.</span><span class="ident" id="5780410"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5780411">,</span>&nbsp;<span class="ident" id="5780413"><a href="/gostd/image/draw/draw.go.html#5780306">mp</a></span><span class="op" id="5780415">.</span><span class="ident" id="5780416"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5780417">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780420">sr</span><span class="op" id="5780422">,</span>&nbsp;<span class="ident" id="5780424">sg</span><span class="op" id="5780426">,</span>&nbsp;<span class="ident" id="5780428">sb</span><span class="op" id="5780430">,</span>&nbsp;<span class="ident" id="5780432">sa</span>&nbsp;<span class="op" id="5780435">:=</span>&nbsp;<span class="ident" id="5780438"><a href="/gostd/image/draw/draw.go.html#5780267">src</a></span><span class="op" id="5780441">.</span><span class="ident" id="5780442"><a href="/gostd/image/names.go.html#5179842">RGBA</a></span><span class="op" id="5780446">(</span><span class="op" id="5780447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780450">for</span>&nbsp;<span class="ident" id="5780454">y</span><span class="op" id="5780455">,</span>&nbsp;<span class="ident" id="5780457">my</span>&nbsp;<span class="op" id="5780460">:=</span>&nbsp;<span class="ident" id="5780463"><a href="/gostd/image/draw/draw.go.html#5780248">r</a></span><span class="op" id="5780464">.</span><span class="ident" id="5780465"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5780468">.</span><span class="ident" id="5780469"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5780470">,</span>&nbsp;<span class="ident" id="5780472"><a href="/gostd/image/draw/draw.go.html#5780306">mp</a></span><span class="op" id="5780474">.</span><span class="ident" id="5780475"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5780476">;</span>&nbsp;<span class="ident" id="5780478"><a href="/gostd/image/draw/draw.go.html#5780454">y</a></span>&nbsp;<span class="op" id="5780480">!=</span>&nbsp;<span class="ident" id="5780483"><a href="/gostd/image/draw/draw.go.html#5780248">r</a></span><span class="op" id="5780484">.</span><span class="ident" id="5780485"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5780488">.</span><span class="ident" id="5780489"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5780490">;</span>&nbsp;<span class="ident" id="5780492"><a href="/gostd/image/draw/draw.go.html#5780454">y</a></span><span class="op" id="5780493">,</span>&nbsp;<span class="ident" id="5780495"><a href="/gostd/image/draw/draw.go.html#5780457">my</a></span>&nbsp;<span class="op" id="5780498">=</span>&nbsp;<span class="ident" id="5780500"><a href="/gostd/image/draw/draw.go.html#5780454">y</a></span><span class="op" id="5780501">+</span><span class="num" id="5780502">1</span><span class="op" id="5780503">,</span>&nbsp;<span class="ident" id="5780505"><a href="/gostd/image/draw/draw.go.html#5780457">my</a></span><span class="op" id="5780507">+</span><span class="num" id="5780508">1</span>&nbsp;<span class="op" id="5780510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780514">for</span>&nbsp;<span class="ident" id="5780518">i</span><span class="op" id="5780519">,</span>&nbsp;<span class="ident" id="5780521">mi</span>&nbsp;<span class="op" id="5780524">:=</span>&nbsp;<span class="ident" id="5780527"><a href="/gostd/image/draw/draw.go.html#5780325">i0</a></span><span class="op" id="5780529">,</span>&nbsp;<span class="ident" id="5780531"><a href="/gostd/image/draw/draw.go.html#5780385">mi0</a></span><span class="op" id="5780534">;</span>&nbsp;<span class="ident" id="5780536"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span>&nbsp;<span class="op" id="5780538">&lt;</span>&nbsp;<span class="ident" id="5780540"><a href="/gostd/image/draw/draw.go.html#5780364">i1</a></span><span class="op" id="5780542">;</span>&nbsp;<span class="ident" id="5780544"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780545">,</span>&nbsp;<span class="ident" id="5780547"><a href="/gostd/image/draw/draw.go.html#5780521">mi</a></span>&nbsp;<span class="op" id="5780550">=</span>&nbsp;<span class="ident" id="5780552"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780553">+</span><span class="num" id="5780554">4</span><span class="op" id="5780555">,</span>&nbsp;<span class="ident" id="5780557"><a href="/gostd/image/draw/draw.go.html#5780521">mi</a></span><span class="op" id="5780559">+</span><span class="num" id="5780560">1</span>&nbsp;<span class="op" id="5780562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780567">ma</span>&nbsp;<span class="op" id="5780570">:=</span>&nbsp;<span class="builtintype" id="5780573">uint32</span><span class="op" id="5780579">(</span><span class="ident" id="5780580"><a href="/gostd/image/draw/draw.go.html#5780287">mask</a></span><span class="op" id="5780584">.</span><span class="ident" id="5780585"><a href="/gostd/image/image.go.html#5167226">Pix</a></span><span class="op" id="5780588">[</span><span class="ident" id="5780589"><a href="/gostd/image/draw/draw.go.html#5780521">mi</a></span><span class="op" id="5780591">]</span><span class="op" id="5780592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780597">if</span>&nbsp;<span class="ident" id="5780600"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span>&nbsp;<span class="op" id="5780603">==</span>&nbsp;<span class="num" id="5780606">0</span>&nbsp;<span class="op" id="5780608">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5780614">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5780626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780631"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span>&nbsp;<span class="op" id="5780634">|=</span>&nbsp;<span class="ident" id="5780637"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span>&nbsp;<span class="op" id="5780640">&lt;&lt;</span>&nbsp;<span class="num" id="5780643">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780649">dr</span>&nbsp;<span class="op" id="5780652">:=</span>&nbsp;<span class="builtintype" id="5780655">uint32</span><span class="op" id="5780661">(</span><span class="ident" id="5780662"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780665">.</span><span class="ident" id="5780666"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780669">[</span><span class="ident" id="5780670"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780671">+</span><span class="num" id="5780672">0</span><span class="op" id="5780673">]</span><span class="op" id="5780674">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780679">dg</span>&nbsp;<span class="op" id="5780682">:=</span>&nbsp;<span class="builtintype" id="5780685">uint32</span><span class="op" id="5780691">(</span><span class="ident" id="5780692"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780695">.</span><span class="ident" id="5780696"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780699">[</span><span class="ident" id="5780700"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780701">+</span><span class="num" id="5780702">1</span><span class="op" id="5780703">]</span><span class="op" id="5780704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780709">db</span>&nbsp;<span class="op" id="5780712">:=</span>&nbsp;<span class="builtintype" id="5780715">uint32</span><span class="op" id="5780721">(</span><span class="ident" id="5780722"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780725">.</span><span class="ident" id="5780726"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780729">[</span><span class="ident" id="5780730"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780731">+</span><span class="num" id="5780732">2</span><span class="op" id="5780733">]</span><span class="op" id="5780734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780739">da</span>&nbsp;<span class="op" id="5780742">:=</span>&nbsp;<span class="builtintype" id="5780745">uint32</span><span class="op" id="5780751">(</span><span class="ident" id="5780752"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780755">.</span><span class="ident" id="5780756"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780759">[</span><span class="ident" id="5780760"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780761">+</span><span class="num" id="5780762">3</span><span class="op" id="5780763">]</span><span class="op" id="5780764">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5780770">//&nbsp;The&nbsp;0x101&nbsp;is&nbsp;here&nbsp;for&nbsp;the&nbsp;same&nbsp;reason&nbsp;as&nbsp;in&nbsp;drawRGBA.</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780830">a</span>&nbsp;<span class="op" id="5780832">:=</span>&nbsp;<span class="op" id="5780835">(</span><span class="ident" id="5780836"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5780838">-</span>&nbsp;<span class="op" id="5780840">(</span><span class="ident" id="5780841"><a href="/gostd/image/draw/draw.go.html#5780432">sa</a></span>&nbsp;<span class="op" id="5780844">*</span>&nbsp;<span class="ident" id="5780846"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span>&nbsp;<span class="op" id="5780849">/</span>&nbsp;<span class="ident" id="5780851"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5780852">)</span><span class="op" id="5780853">)</span>&nbsp;<span class="op" id="5780855">*</span>&nbsp;<span class="num" id="5780857">0x101</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780867"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780870">.</span><span class="ident" id="5780871"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780874">[</span><span class="ident" id="5780875"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780876">+</span><span class="num" id="5780877">0</span><span class="op" id="5780878">]</span>&nbsp;<span class="op" id="5780880">=</span>&nbsp;<span class="builtintype" id="5780882">uint8</span><span class="op" id="5780887">(</span><span class="op" id="5780888">(</span><span class="ident" id="5780889"><a href="/gostd/image/draw/draw.go.html#5780649">dr</a></span><span class="op" id="5780891">*</span><span class="ident" id="5780892"><a href="/gostd/image/draw/draw.go.html#5780830">a</a></span>&nbsp;<span class="op" id="5780894">+</span>&nbsp;<span class="ident" id="5780896"><a href="/gostd/image/draw/draw.go.html#5780420">sr</a></span><span class="op" id="5780898">*</span><span class="ident" id="5780899"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span><span class="op" id="5780901">)</span>&nbsp;<span class="op" id="5780903">/</span>&nbsp;<span class="ident" id="5780905"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5780907">&gt;&gt;</span>&nbsp;<span class="num" id="5780910">8</span><span class="op" id="5780911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780916"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780919">.</span><span class="ident" id="5780920"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780923">[</span><span class="ident" id="5780924"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780925">+</span><span class="num" id="5780926">1</span><span class="op" id="5780927">]</span>&nbsp;<span class="op" id="5780929">=</span>&nbsp;<span class="builtintype" id="5780931">uint8</span><span class="op" id="5780936">(</span><span class="op" id="5780937">(</span><span class="ident" id="5780938"><a href="/gostd/image/draw/draw.go.html#5780679">dg</a></span><span class="op" id="5780940">*</span><span class="ident" id="5780941"><a href="/gostd/image/draw/draw.go.html#5780830">a</a></span>&nbsp;<span class="op" id="5780943">+</span>&nbsp;<span class="ident" id="5780945"><a href="/gostd/image/draw/draw.go.html#5780424">sg</a></span><span class="op" id="5780947">*</span><span class="ident" id="5780948"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span><span class="op" id="5780950">)</span>&nbsp;<span class="op" id="5780952">/</span>&nbsp;<span class="ident" id="5780954"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5780956">&gt;&gt;</span>&nbsp;<span class="num" id="5780959">8</span><span class="op" id="5780960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5780965"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5780968">.</span><span class="ident" id="5780969"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5780972">[</span><span class="ident" id="5780973"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5780974">+</span><span class="num" id="5780975">2</span><span class="op" id="5780976">]</span>&nbsp;<span class="op" id="5780978">=</span>&nbsp;<span class="builtintype" id="5780980">uint8</span><span class="op" id="5780985">(</span><span class="op" id="5780986">(</span><span class="ident" id="5780987"><a href="/gostd/image/draw/draw.go.html#5780709">db</a></span><span class="op" id="5780989">*</span><span class="ident" id="5780990"><a href="/gostd/image/draw/draw.go.html#5780830">a</a></span>&nbsp;<span class="op" id="5780992">+</span>&nbsp;<span class="ident" id="5780994"><a href="/gostd/image/draw/draw.go.html#5780428">sb</a></span><span class="op" id="5780996">*</span><span class="ident" id="5780997"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span><span class="op" id="5780999">)</span>&nbsp;<span class="op" id="5781001">/</span>&nbsp;<span class="ident" id="5781003"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5781005">&gt;&gt;</span>&nbsp;<span class="num" id="5781008">8</span><span class="op" id="5781009">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781014"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5781017">.</span><span class="ident" id="5781018"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5781021">[</span><span class="ident" id="5781022"><a href="/gostd/image/draw/draw.go.html#5780518">i</a></span><span class="op" id="5781023">+</span><span class="num" id="5781024">3</span><span class="op" id="5781025">]</span>&nbsp;<span class="op" id="5781027">=</span>&nbsp;<span class="builtintype" id="5781029">uint8</span><span class="op" id="5781034">(</span><span class="op" id="5781035">(</span><span class="ident" id="5781036"><a href="/gostd/image/draw/draw.go.html#5780739">da</a></span><span class="op" id="5781038">*</span><span class="ident" id="5781039"><a href="/gostd/image/draw/draw.go.html#5780830">a</a></span>&nbsp;<span class="op" id="5781041">+</span>&nbsp;<span class="ident" id="5781043"><a href="/gostd/image/draw/draw.go.html#5780432">sa</a></span><span class="op" id="5781045">*</span><span class="ident" id="5781046"><a href="/gostd/image/draw/draw.go.html#5780567">ma</a></span><span class="op" id="5781048">)</span>&nbsp;<span class="op" id="5781050">/</span>&nbsp;<span class="ident" id="5781052"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5781054">&gt;&gt;</span>&nbsp;<span class="num" id="5781057">8</span><span class="op" id="5781058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5781062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781066"><a href="/gostd/image/draw/draw.go.html#5780325">i0</a></span>&nbsp;<span class="op" id="5781069">+=</span>&nbsp;<span class="ident" id="5781072"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5781075">.</span><span class="ident" id="5781076"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781085"><a href="/gostd/image/draw/draw.go.html#5780364">i1</a></span>&nbsp;<span class="op" id="5781088">+=</span>&nbsp;<span class="ident" id="5781091"><a href="/gostd/image/draw/draw.go.html#5780231">dst</a></span><span class="op" id="5781094">.</span><span class="ident" id="5781095"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781104"><a href="/gostd/image/draw/draw.go.html#5780385">mi0</a></span>&nbsp;<span class="op" id="5781108">+=</span>&nbsp;<span class="ident" id="5781111"><a href="/gostd/image/draw/draw.go.html#5780287">mask</a></span><span class="op" id="5781115">.</span><span class="ident" id="5781116"><a href="/gostd/image/image.go.html#5167315">Stride</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5781124">}</span><br>
<span class="lineno"></span><span class="op" id="5781126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5781129">func</span>&nbsp;<span class="ident" id="5781134">drawRGBA</span><span class="op" id="5781142">(</span><span class="ident" id="5781143">dst</span>&nbsp;<span class="op" id="5781147">*</span><span class="ident" id="5781148"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781153">.</span><span class="ident" id="5781154"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="5781158">,</span>&nbsp;<span class="ident" id="5781160">r</span>&nbsp;<span class="ident" id="5781162"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781167">.</span><span class="ident" id="5781168"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5781177">,</span>&nbsp;<span class="ident" id="5781179">src</span>&nbsp;<span class="ident" id="5781183"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781188">.</span><span class="ident" id="5781189"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5781194">,</span>&nbsp;<span class="ident" id="5781196">sp</span>&nbsp;<span class="ident" id="5781199"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781204">.</span><span class="ident" id="5781205"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5781210">,</span>&nbsp;<span class="ident" id="5781212">mask</span>&nbsp;<span class="ident" id="5781217"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781222">.</span><span class="ident" id="5781223"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5781228">,</span>&nbsp;<span class="ident" id="5781230">mp</span>&nbsp;<span class="ident" id="5781233"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781238">.</span><span class="ident" id="5781239"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5781244">,</span>&nbsp;<span class="ident" id="5781246">op</span>&nbsp;<span class="ident" id="5781249"><a href="/gostd/image/draw/draw.go.html#5767298">Op</a></span><span class="op" id="5781251">)</span>&nbsp;<span class="op" id="5781253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781256">x0</span><span class="op" id="5781258">,</span>&nbsp;<span class="ident" id="5781260">x1</span><span class="op" id="5781262">,</span>&nbsp;<span class="ident" id="5781264">dx</span>&nbsp;<span class="op" id="5781267">:=</span>&nbsp;<span class="ident" id="5781270"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781271">.</span><span class="ident" id="5781272"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781275">.</span><span class="ident" id="5781276"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5781277">,</span>&nbsp;<span class="ident" id="5781279"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781280">.</span><span class="ident" id="5781281"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5781284">.</span><span class="ident" id="5781285"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5781286">,</span>&nbsp;<span class="num" id="5781288">1</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781291">y0</span><span class="op" id="5781293">,</span>&nbsp;<span class="ident" id="5781295">y1</span><span class="op" id="5781297">,</span>&nbsp;<span class="ident" id="5781299">dy</span>&nbsp;<span class="op" id="5781302">:=</span>&nbsp;<span class="ident" id="5781305"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781306">.</span><span class="ident" id="5781307"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781310">.</span><span class="ident" id="5781311"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5781312">,</span>&nbsp;<span class="ident" id="5781314"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781315">.</span><span class="ident" id="5781316"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="5781319">.</span><span class="ident" id="5781320"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5781321">,</span>&nbsp;<span class="num" id="5781323">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781326">if</span>&nbsp;<span class="ident" id="5781329"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5781334">.</span><span class="ident" id="5781335"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5781340">(</span><span class="ident" id="5781341"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5781344">)</span>&nbsp;<span class="op" id="5781346">==</span>&nbsp;<span class="ident" id="5781349"><a href="/gostd/image/draw/draw.go.html#5781179">src</a></span>&nbsp;<span class="op" id="5781353">&amp;&amp;</span>&nbsp;<span class="ident" id="5781356"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781357">.</span><span class="ident" id="5781358"><a href="/gostd/image/geom.go.html#5152555">Overlaps</a></span><span class="op" id="5781366">(</span><span class="ident" id="5781367"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781368">.</span><span class="ident" id="5781369"><a href="/gostd/image/geom.go.html#5150558">Add</a></span><span class="op" id="5781372">(</span><span class="ident" id="5781373"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781375">.</span><span class="ident" id="5781376"><a href="/gostd/image/geom.go.html#5148776">Sub</a></span><span class="op" id="5781379">(</span><span class="ident" id="5781380"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781381">.</span><span class="ident" id="5781382"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781385">)</span><span class="op" id="5781386">)</span><span class="op" id="5781387">)</span>&nbsp;<span class="op" id="5781389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781393">if</span>&nbsp;<span class="ident" id="5781396"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781398">.</span><span class="ident" id="5781399"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781401">&lt;</span>&nbsp;<span class="ident" id="5781403"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781404">.</span><span class="ident" id="5781405"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781408">.</span><span class="ident" id="5781409"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781411">||</span>&nbsp;<span class="ident" id="5781414"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781416">.</span><span class="ident" id="5781417"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781419">==</span>&nbsp;<span class="ident" id="5781422"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781423">.</span><span class="ident" id="5781424"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781427">.</span><span class="ident" id="5781428"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781430">&amp;&amp;</span>&nbsp;<span class="ident" id="5781433"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781435">.</span><span class="ident" id="5781436"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5781438">&lt;</span>&nbsp;<span class="ident" id="5781440"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781441">.</span><span class="ident" id="5781442"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781445">.</span><span class="ident" id="5781446"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5781448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781453"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span><span class="op" id="5781455">,</span>&nbsp;<span class="ident" id="5781457"><a href="/gostd/image/draw/draw.go.html#5781260">x1</a></span><span class="op" id="5781459">,</span>&nbsp;<span class="ident" id="5781461"><a href="/gostd/image/draw/draw.go.html#5781264">dx</a></span>&nbsp;<span class="op" id="5781464">=</span>&nbsp;<span class="ident" id="5781466"><a href="/gostd/image/draw/draw.go.html#5781260">x1</a></span><span class="op" id="5781468">-</span><span class="num" id="5781469">1</span><span class="op" id="5781470">,</span>&nbsp;<span class="ident" id="5781472"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span><span class="op" id="5781474">-</span><span class="num" id="5781475">1</span><span class="op" id="5781476">,</span>&nbsp;<span class="op" id="5781478">-</span><span class="num" id="5781479">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781484"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span><span class="op" id="5781486">,</span>&nbsp;<span class="ident" id="5781488"><a href="/gostd/image/draw/draw.go.html#5781295">y1</a></span><span class="op" id="5781490">,</span>&nbsp;<span class="ident" id="5781492"><a href="/gostd/image/draw/draw.go.html#5781299">dy</a></span>&nbsp;<span class="op" id="5781495">=</span>&nbsp;<span class="ident" id="5781497"><a href="/gostd/image/draw/draw.go.html#5781295">y1</a></span><span class="op" id="5781499">-</span><span class="num" id="5781500">1</span><span class="op" id="5781501">,</span>&nbsp;<span class="ident" id="5781503"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span><span class="op" id="5781505">-</span><span class="num" id="5781506">1</span><span class="op" id="5781507">,</span>&nbsp;<span class="op" id="5781509">-</span><span class="num" id="5781510">1</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5781514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5781517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781521">sy</span>&nbsp;<span class="op" id="5781524">:=</span>&nbsp;<span class="ident" id="5781527"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781529">.</span><span class="ident" id="5781530"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781532">+</span>&nbsp;<span class="ident" id="5781534"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span>&nbsp;<span class="op" id="5781537">-</span>&nbsp;<span class="ident" id="5781539"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781540">.</span><span class="ident" id="5781541"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781544">.</span><span class="ident" id="5781545"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781548">my</span>&nbsp;<span class="op" id="5781551">:=</span>&nbsp;<span class="ident" id="5781554"><a href="/gostd/image/draw/draw.go.html#5781230">mp</a></span><span class="op" id="5781556">.</span><span class="ident" id="5781557"><a href="/gostd/image/geom.go.html#5148454">Y</a></span>&nbsp;<span class="op" id="5781559">+</span>&nbsp;<span class="ident" id="5781561"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span>&nbsp;<span class="op" id="5781564">-</span>&nbsp;<span class="ident" id="5781566"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781567">.</span><span class="ident" id="5781568"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781571">.</span><span class="ident" id="5781572"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781575">sx0</span>&nbsp;<span class="op" id="5781579">:=</span>&nbsp;<span class="ident" id="5781582"><a href="/gostd/image/draw/draw.go.html#5781196">sp</a></span><span class="op" id="5781584">.</span><span class="ident" id="5781585"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5781587">+</span>&nbsp;<span class="ident" id="5781589"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span>&nbsp;<span class="op" id="5781592">-</span>&nbsp;<span class="ident" id="5781594"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781595">.</span><span class="ident" id="5781596"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781599">.</span><span class="ident" id="5781600"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781603">mx0</span>&nbsp;<span class="op" id="5781607">:=</span>&nbsp;<span class="ident" id="5781610"><a href="/gostd/image/draw/draw.go.html#5781230">mp</a></span><span class="op" id="5781612">.</span><span class="ident" id="5781613"><a href="/gostd/image/geom.go.html#5148451">X</a></span>&nbsp;<span class="op" id="5781615">+</span>&nbsp;<span class="ident" id="5781617"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span>&nbsp;<span class="op" id="5781620">-</span>&nbsp;<span class="ident" id="5781622"><a href="/gostd/image/draw/draw.go.html#5781160">r</a></span><span class="op" id="5781623">.</span><span class="ident" id="5781624"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5781627">.</span><span class="ident" id="5781628"><a href="/gostd/image/geom.go.html#5148451">X</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781631">sx1</span>&nbsp;<span class="op" id="5781635">:=</span>&nbsp;<span class="ident" id="5781638"><a href="/gostd/image/draw/draw.go.html#5781575">sx0</a></span>&nbsp;<span class="op" id="5781642">+</span>&nbsp;<span class="op" id="5781644">(</span><span class="ident" id="5781645"><a href="/gostd/image/draw/draw.go.html#5781260">x1</a></span>&nbsp;<span class="op" id="5781648">-</span>&nbsp;<span class="ident" id="5781650"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span><span class="op" id="5781652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781655">i0</span>&nbsp;<span class="op" id="5781658">:=</span>&nbsp;<span class="ident" id="5781661"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5781664">.</span><span class="ident" id="5781665"><a href="/gostd/image/image.go.html#5156719">PixOffset</a></span><span class="op" id="5781674">(</span><span class="ident" id="5781675"><a href="/gostd/image/draw/draw.go.html#5781256">x0</a></span><span class="op" id="5781677">,</span>&nbsp;<span class="ident" id="5781679"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span><span class="op" id="5781681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781684">di</span>&nbsp;<span class="op" id="5781687">:=</span>&nbsp;<span class="ident" id="5781690"><a href="/gostd/image/draw/draw.go.html#5781264">dx</a></span>&nbsp;<span class="op" id="5781693">*</span>&nbsp;<span class="num" id="5781695">4</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781698">for</span>&nbsp;<span class="ident" id="5781702">y</span>&nbsp;<span class="op" id="5781704">:=</span>&nbsp;<span class="ident" id="5781707"><a href="/gostd/image/draw/draw.go.html#5781291">y0</a></span><span class="op" id="5781709">;</span>&nbsp;<span class="ident" id="5781711"><a href="/gostd/image/draw/draw.go.html#5781702">y</a></span>&nbsp;<span class="op" id="5781713">!=</span>&nbsp;<span class="ident" id="5781716"><a href="/gostd/image/draw/draw.go.html#5781295">y1</a></span><span class="op" id="5781718">;</span>&nbsp;<span class="ident" id="5781720"><a href="/gostd/image/draw/draw.go.html#5781702">y</a></span><span class="op" id="5781721">,</span>&nbsp;<span class="ident" id="5781723"><a href="/gostd/image/draw/draw.go.html#5781521">sy</a></span><span class="op" id="5781725">,</span>&nbsp;<span class="ident" id="5781727"><a href="/gostd/image/draw/draw.go.html#5781548">my</a></span>&nbsp;<span class="op" id="5781730">=</span>&nbsp;<span class="ident" id="5781732"><a href="/gostd/image/draw/draw.go.html#5781702">y</a></span><span class="op" id="5781733">+</span><span class="ident" id="5781734"><a href="/gostd/image/draw/draw.go.html#5781299">dy</a></span><span class="op" id="5781736">,</span>&nbsp;<span class="ident" id="5781738"><a href="/gostd/image/draw/draw.go.html#5781521">sy</a></span><span class="op" id="5781740">+</span><span class="ident" id="5781741"><a href="/gostd/image/draw/draw.go.html#5781299">dy</a></span><span class="op" id="5781743">,</span>&nbsp;<span class="ident" id="5781745"><a href="/gostd/image/draw/draw.go.html#5781548">my</a></span><span class="op" id="5781747">+</span><span class="ident" id="5781748"><a href="/gostd/image/draw/draw.go.html#5781299">dy</a></span>&nbsp;<span class="op" id="5781751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781755">for</span>&nbsp;<span class="ident" id="5781759">i</span><span class="op" id="5781760">,</span>&nbsp;<span class="ident" id="5781762">sx</span><span class="op" id="5781764">,</span>&nbsp;<span class="ident" id="5781766">mx</span>&nbsp;<span class="op" id="5781769">:=</span>&nbsp;<span class="ident" id="5781772"><a href="/gostd/image/draw/draw.go.html#5781655">i0</a></span><span class="op" id="5781774">,</span>&nbsp;<span class="ident" id="5781776"><a href="/gostd/image/draw/draw.go.html#5781575">sx0</a></span><span class="op" id="5781779">,</span>&nbsp;<span class="ident" id="5781781"><a href="/gostd/image/draw/draw.go.html#5781603">mx0</a></span><span class="op" id="5781784">;</span>&nbsp;<span class="ident" id="5781786"><a href="/gostd/image/draw/draw.go.html#5781762">sx</a></span>&nbsp;<span class="op" id="5781789">!=</span>&nbsp;<span class="ident" id="5781792"><a href="/gostd/image/draw/draw.go.html#5781631">sx1</a></span><span class="op" id="5781795">;</span>&nbsp;<span class="ident" id="5781797"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5781798">,</span>&nbsp;<span class="ident" id="5781800"><a href="/gostd/image/draw/draw.go.html#5781762">sx</a></span><span class="op" id="5781802">,</span>&nbsp;<span class="ident" id="5781804"><a href="/gostd/image/draw/draw.go.html#5781766">mx</a></span>&nbsp;<span class="op" id="5781807">=</span>&nbsp;<span class="ident" id="5781809"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5781810">+</span><span class="ident" id="5781811"><a href="/gostd/image/draw/draw.go.html#5781684">di</a></span><span class="op" id="5781813">,</span>&nbsp;<span class="ident" id="5781815"><a href="/gostd/image/draw/draw.go.html#5781762">sx</a></span><span class="op" id="5781817">+</span><span class="ident" id="5781818"><a href="/gostd/image/draw/draw.go.html#5781264">dx</a></span><span class="op" id="5781820">,</span>&nbsp;<span class="ident" id="5781822"><a href="/gostd/image/draw/draw.go.html#5781766">mx</a></span><span class="op" id="5781824">+</span><span class="ident" id="5781825"><a href="/gostd/image/draw/draw.go.html#5781264">dx</a></span>&nbsp;<span class="op" id="5781828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781833">ma</span>&nbsp;<span class="op" id="5781836">:=</span>&nbsp;<span class="builtintype" id="5781839">uint32</span><span class="op" id="5781845">(</span><span class="ident" id="5781846"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5781847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781852">if</span>&nbsp;<span class="ident" id="5781855"><a href="/gostd/image/draw/draw.go.html#5781212">mask</a></span>&nbsp;<span class="op" id="5781860">!=</span>&nbsp;<span class="builtintype" id="5781863">nil</span>&nbsp;<span class="op" id="5781867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781873">_</span><span class="op" id="5781874">,</span>&nbsp;<span class="ident" id="5781876">_</span><span class="op" id="5781877">,</span>&nbsp;<span class="ident" id="5781879">_</span><span class="op" id="5781880">,</span>&nbsp;<span class="ident" id="5781882"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5781885">=</span>&nbsp;<span class="ident" id="5781887"><a href="/gostd/image/draw/draw.go.html#5781212">mask</a></span><span class="op" id="5781891">.</span><span class="ident" id="5781892"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5781894">(</span><span class="ident" id="5781895"><a href="/gostd/image/draw/draw.go.html#5781766">mx</a></span><span class="op" id="5781897">,</span>&nbsp;<span class="ident" id="5781899"><a href="/gostd/image/draw/draw.go.html#5781548">my</a></span><span class="op" id="5781901">)</span><span class="op" id="5781902">.</span><span class="ident" id="5781903"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5781907">(</span><span class="op" id="5781908">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5781913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781918">sr</span><span class="op" id="5781920">,</span>&nbsp;<span class="ident" id="5781922">sg</span><span class="op" id="5781924">,</span>&nbsp;<span class="ident" id="5781926">sb</span><span class="op" id="5781928">,</span>&nbsp;<span class="ident" id="5781930">sa</span>&nbsp;<span class="op" id="5781933">:=</span>&nbsp;<span class="ident" id="5781936"><a href="/gostd/image/draw/draw.go.html#5781179">src</a></span><span class="op" id="5781939">.</span><span class="ident" id="5781940"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5781942">(</span><span class="ident" id="5781943"><a href="/gostd/image/draw/draw.go.html#5781762">sx</a></span><span class="op" id="5781945">,</span>&nbsp;<span class="ident" id="5781947"><a href="/gostd/image/draw/draw.go.html#5781521">sy</a></span><span class="op" id="5781949">)</span><span class="op" id="5781950">.</span><span class="ident" id="5781951"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5781955">(</span><span class="op" id="5781956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5781961">if</span>&nbsp;<span class="ident" id="5781964"><a href="/gostd/image/draw/draw.go.html#5781246">op</a></span>&nbsp;<span class="op" id="5781967">==</span>&nbsp;<span class="ident" id="5781970"><a href="/gostd/image/draw/draw.go.html#5767362">Over</a></span>&nbsp;<span class="op" id="5781975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5781981">dr</span>&nbsp;<span class="op" id="5781984">:=</span>&nbsp;<span class="builtintype" id="5781987">uint32</span><span class="op" id="5781993">(</span><span class="ident" id="5781994"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5781997">.</span><span class="ident" id="5781998"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782001">[</span><span class="ident" id="5782002"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782003">+</span><span class="num" id="5782004">0</span><span class="op" id="5782005">]</span><span class="op" id="5782006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782012">dg</span>&nbsp;<span class="op" id="5782015">:=</span>&nbsp;<span class="builtintype" id="5782018">uint32</span><span class="op" id="5782024">(</span><span class="ident" id="5782025"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782028">.</span><span class="ident" id="5782029"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782032">[</span><span class="ident" id="5782033"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782034">+</span><span class="num" id="5782035">1</span><span class="op" id="5782036">]</span><span class="op" id="5782037">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782043">db</span>&nbsp;<span class="op" id="5782046">:=</span>&nbsp;<span class="builtintype" id="5782049">uint32</span><span class="op" id="5782055">(</span><span class="ident" id="5782056"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782059">.</span><span class="ident" id="5782060"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782063">[</span><span class="ident" id="5782064"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782065">+</span><span class="num" id="5782066">2</span><span class="op" id="5782067">]</span><span class="op" id="5782068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782074">da</span>&nbsp;<span class="op" id="5782077">:=</span>&nbsp;<span class="builtintype" id="5782080">uint32</span><span class="op" id="5782086">(</span><span class="ident" id="5782087"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782090">.</span><span class="ident" id="5782091"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782094">[</span><span class="ident" id="5782095"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782096">+</span><span class="num" id="5782097">3</span><span class="op" id="5782098">]</span><span class="op" id="5782099">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782106">//&nbsp;dr,&nbsp;dg,&nbsp;db&nbsp;and&nbsp;da&nbsp;are&nbsp;all&nbsp;8-bit&nbsp;color&nbsp;at&nbsp;the&nbsp;moment,&nbsp;ranging&nbsp;in&nbsp;[0,255].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782186">//&nbsp;We&nbsp;work&nbsp;in&nbsp;16-bit&nbsp;color,&nbsp;and&nbsp;so&nbsp;would&nbsp;normally&nbsp;do:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782244">//&nbsp;dr&nbsp;|=&nbsp;dr&nbsp;&lt;&lt;&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782265">//&nbsp;and&nbsp;similarly&nbsp;for&nbsp;dg,&nbsp;db&nbsp;and&nbsp;da,&nbsp;but&nbsp;instead&nbsp;we&nbsp;multiply&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782331">//&nbsp;(which&nbsp;is&nbsp;a&nbsp;16-bit&nbsp;color,&nbsp;ranging&nbsp;in&nbsp;[0,65535])&nbsp;by&nbsp;0x101.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782396">//&nbsp;This&nbsp;yields&nbsp;the&nbsp;same&nbsp;result,&nbsp;but&nbsp;is&nbsp;fewer&nbsp;arithmetic&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782468">a</span>&nbsp;<span class="op" id="5782470">:=</span>&nbsp;<span class="op" id="5782473">(</span><span class="ident" id="5782474"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782476">-</span>&nbsp;<span class="op" id="5782478">(</span><span class="ident" id="5782479"><a href="/gostd/image/draw/draw.go.html#5781930">sa</a></span>&nbsp;<span class="op" id="5782482">*</span>&nbsp;<span class="ident" id="5782484"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5782487">/</span>&nbsp;<span class="ident" id="5782489"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span><span class="op" id="5782490">)</span><span class="op" id="5782491">)</span>&nbsp;<span class="op" id="5782493">*</span>&nbsp;<span class="num" id="5782495">0x101</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782506"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782509">.</span><span class="ident" id="5782510"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782513">[</span><span class="ident" id="5782514"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782515">+</span><span class="num" id="5782516">0</span><span class="op" id="5782517">]</span>&nbsp;<span class="op" id="5782519">=</span>&nbsp;<span class="builtintype" id="5782521">uint8</span><span class="op" id="5782526">(</span><span class="op" id="5782527">(</span><span class="ident" id="5782528"><a href="/gostd/image/draw/draw.go.html#5781981">dr</a></span><span class="op" id="5782530">*</span><span class="ident" id="5782531"><a href="/gostd/image/draw/draw.go.html#5782468">a</a></span>&nbsp;<span class="op" id="5782533">+</span>&nbsp;<span class="ident" id="5782535"><a href="/gostd/image/draw/draw.go.html#5781918">sr</a></span><span class="op" id="5782537">*</span><span class="ident" id="5782538"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span><span class="op" id="5782540">)</span>&nbsp;<span class="op" id="5782542">/</span>&nbsp;<span class="ident" id="5782544"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782546">&gt;&gt;</span>&nbsp;<span class="num" id="5782549">8</span><span class="op" id="5782550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782556"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782559">.</span><span class="ident" id="5782560"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782563">[</span><span class="ident" id="5782564"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782565">+</span><span class="num" id="5782566">1</span><span class="op" id="5782567">]</span>&nbsp;<span class="op" id="5782569">=</span>&nbsp;<span class="builtintype" id="5782571">uint8</span><span class="op" id="5782576">(</span><span class="op" id="5782577">(</span><span class="ident" id="5782578"><a href="/gostd/image/draw/draw.go.html#5782012">dg</a></span><span class="op" id="5782580">*</span><span class="ident" id="5782581"><a href="/gostd/image/draw/draw.go.html#5782468">a</a></span>&nbsp;<span class="op" id="5782583">+</span>&nbsp;<span class="ident" id="5782585"><a href="/gostd/image/draw/draw.go.html#5781922">sg</a></span><span class="op" id="5782587">*</span><span class="ident" id="5782588"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span><span class="op" id="5782590">)</span>&nbsp;<span class="op" id="5782592">/</span>&nbsp;<span class="ident" id="5782594"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782596">&gt;&gt;</span>&nbsp;<span class="num" id="5782599">8</span><span class="op" id="5782600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782606"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782609">.</span><span class="ident" id="5782610"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782613">[</span><span class="ident" id="5782614"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782615">+</span><span class="num" id="5782616">2</span><span class="op" id="5782617">]</span>&nbsp;<span class="op" id="5782619">=</span>&nbsp;<span class="builtintype" id="5782621">uint8</span><span class="op" id="5782626">(</span><span class="op" id="5782627">(</span><span class="ident" id="5782628"><a href="/gostd/image/draw/draw.go.html#5782043">db</a></span><span class="op" id="5782630">*</span><span class="ident" id="5782631"><a href="/gostd/image/draw/draw.go.html#5782468">a</a></span>&nbsp;<span class="op" id="5782633">+</span>&nbsp;<span class="ident" id="5782635"><a href="/gostd/image/draw/draw.go.html#5781926">sb</a></span><span class="op" id="5782637">*</span><span class="ident" id="5782638"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span><span class="op" id="5782640">)</span>&nbsp;<span class="op" id="5782642">/</span>&nbsp;<span class="ident" id="5782644"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782646">&gt;&gt;</span>&nbsp;<span class="num" id="5782649">8</span><span class="op" id="5782650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782656"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782659">.</span><span class="ident" id="5782660"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782663">[</span><span class="ident" id="5782664"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782665">+</span><span class="num" id="5782666">3</span><span class="op" id="5782667">]</span>&nbsp;<span class="op" id="5782669">=</span>&nbsp;<span class="builtintype" id="5782671">uint8</span><span class="op" id="5782676">(</span><span class="op" id="5782677">(</span><span class="ident" id="5782678"><a href="/gostd/image/draw/draw.go.html#5782074">da</a></span><span class="op" id="5782680">*</span><span class="ident" id="5782681"><a href="/gostd/image/draw/draw.go.html#5782468">a</a></span>&nbsp;<span class="op" id="5782683">+</span>&nbsp;<span class="ident" id="5782685"><a href="/gostd/image/draw/draw.go.html#5781930">sa</a></span><span class="op" id="5782687">*</span><span class="ident" id="5782688"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span><span class="op" id="5782690">)</span>&nbsp;<span class="op" id="5782692">/</span>&nbsp;<span class="ident" id="5782694"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782696">&gt;&gt;</span>&nbsp;<span class="num" id="5782699">8</span><span class="op" id="5782700">)</span><br>
<span class="lineno">535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5782706">}</span>&nbsp;<span class="keyword" id="5782708">else</span>&nbsp;<span class="op" id="5782713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782719"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782722">.</span><span class="ident" id="5782723"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782726">[</span><span class="ident" id="5782727"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782728">+</span><span class="num" id="5782729">0</span><span class="op" id="5782730">]</span>&nbsp;<span class="op" id="5782732">=</span>&nbsp;<span class="builtintype" id="5782734">uint8</span><span class="op" id="5782739">(</span><span class="ident" id="5782740"><a href="/gostd/image/draw/draw.go.html#5781918">sr</a></span>&nbsp;<span class="op" id="5782743">*</span>&nbsp;<span class="ident" id="5782745"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5782748">/</span>&nbsp;<span class="ident" id="5782750"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782752">&gt;&gt;</span>&nbsp;<span class="num" id="5782755">8</span><span class="op" id="5782756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782762"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782765">.</span><span class="ident" id="5782766"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782769">[</span><span class="ident" id="5782770"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782771">+</span><span class="num" id="5782772">1</span><span class="op" id="5782773">]</span>&nbsp;<span class="op" id="5782775">=</span>&nbsp;<span class="builtintype" id="5782777">uint8</span><span class="op" id="5782782">(</span><span class="ident" id="5782783"><a href="/gostd/image/draw/draw.go.html#5781922">sg</a></span>&nbsp;<span class="op" id="5782786">*</span>&nbsp;<span class="ident" id="5782788"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5782791">/</span>&nbsp;<span class="ident" id="5782793"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782795">&gt;&gt;</span>&nbsp;<span class="num" id="5782798">8</span><span class="op" id="5782799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782805"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782808">.</span><span class="ident" id="5782809"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782812">[</span><span class="ident" id="5782813"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782814">+</span><span class="num" id="5782815">2</span><span class="op" id="5782816">]</span>&nbsp;<span class="op" id="5782818">=</span>&nbsp;<span class="builtintype" id="5782820">uint8</span><span class="op" id="5782825">(</span><span class="ident" id="5782826"><a href="/gostd/image/draw/draw.go.html#5781926">sb</a></span>&nbsp;<span class="op" id="5782829">*</span>&nbsp;<span class="ident" id="5782831"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5782834">/</span>&nbsp;<span class="ident" id="5782836"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782838">&gt;&gt;</span>&nbsp;<span class="num" id="5782841">8</span><span class="op" id="5782842">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782848"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782851">.</span><span class="ident" id="5782852"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="5782855">[</span><span class="ident" id="5782856"><a href="/gostd/image/draw/draw.go.html#5781759">i</a></span><span class="op" id="5782857">+</span><span class="num" id="5782858">3</span><span class="op" id="5782859">]</span>&nbsp;<span class="op" id="5782861">=</span>&nbsp;<span class="builtintype" id="5782863">uint8</span><span class="op" id="5782868">(</span><span class="ident" id="5782869"><a href="/gostd/image/draw/draw.go.html#5781930">sa</a></span>&nbsp;<span class="op" id="5782872">*</span>&nbsp;<span class="ident" id="5782874"><a href="/gostd/image/draw/draw.go.html#5781833">ma</a></span>&nbsp;<span class="op" id="5782877">/</span>&nbsp;<span class="ident" id="5782879"><a href="/gostd/image/draw/draw.go.html#5766823">m</a></span>&nbsp;<span class="op" id="5782881">&gt;&gt;</span>&nbsp;<span class="num" id="5782884">8</span><span class="op" id="5782885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5782890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5782894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5782898"><a href="/gostd/image/draw/draw.go.html#5781655">i0</a></span>&nbsp;<span class="op" id="5782901">+=</span>&nbsp;<span class="ident" id="5782904"><a href="/gostd/image/draw/draw.go.html#5781299">dy</a></span>&nbsp;<span class="op" id="5782907">*</span>&nbsp;<span class="ident" id="5782909"><a href="/gostd/image/draw/draw.go.html#5781143">dst</a></span><span class="op" id="5782912">.</span><span class="ident" id="5782913"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5782921">}</span><br>
<span class="lineno">545</span><span class="op" id="5782923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5782926">//&nbsp;clamp&nbsp;clamps&nbsp;i&nbsp;to&nbsp;the&nbsp;interval&nbsp;[0,&nbsp;0xffff].</span><br>
<span class="lineno"></span><span class="keyword" id="5782973">func</span>&nbsp;<span class="ident" id="5782978">clamp</span><span class="op" id="5782983">(</span><span class="ident" id="5782984">i</span>&nbsp;<span class="builtintype" id="5782986">int32</span><span class="op" id="5782991">)</span>&nbsp;<span class="builtintype" id="5782993">int32</span>&nbsp;<span class="op" id="5782999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783002">if</span>&nbsp;<span class="ident" id="5783005"><a href="/gostd/image/draw/draw.go.html#5782984">i</a></span>&nbsp;<span class="op" id="5783007">&lt;</span>&nbsp;<span class="num" id="5783009">0</span>&nbsp;<span class="op" id="5783011">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783015">return</span>&nbsp;<span class="num" id="5783022">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5783025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783028">if</span>&nbsp;<span class="ident" id="5783031"><a href="/gostd/image/draw/draw.go.html#5782984">i</a></span>&nbsp;<span class="op" id="5783033">&gt;</span>&nbsp;<span class="num" id="5783035">0xffff</span>&nbsp;<span class="op" id="5783042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783046">return</span>&nbsp;<span class="num" id="5783053">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5783061">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783064">return</span>&nbsp;<span class="ident" id="5783071"><a href="/gostd/image/draw/draw.go.html#5782984">i</a></span><br>
<span class="lineno"></span><span class="op" id="5783073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5783076">func</span>&nbsp;<span class="ident" id="5783081">drawPaletted</span><span class="op" id="5783093">(</span><span class="ident" id="5783094">dst</span>&nbsp;<span class="ident" id="5783098"><a href="/gostd/image/draw/draw.go.html#5766914">Image</a></span><span class="op" id="5783103">,</span>&nbsp;<span class="ident" id="5783105">r</span>&nbsp;<span class="ident" id="5783107"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5783112">.</span><span class="ident" id="5783113"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><span class="op" id="5783122">,</span>&nbsp;<span class="ident" id="5783124">src</span>&nbsp;<span class="ident" id="5783128"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5783133">.</span><span class="ident" id="5783134"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5783139">,</span>&nbsp;<span class="ident" id="5783141">sp</span>&nbsp;<span class="ident" id="5783144"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5783149">.</span><span class="ident" id="5783150"><a href="/gostd/image/geom.go.html#5148435">Point</a></span><span class="op" id="5783155">,</span>&nbsp;<span class="ident" id="5783157">floydSteinberg</span>&nbsp;<span class="builtintype" id="5783172">bool</span><span class="op" id="5783176">)</span>&nbsp;<span class="op" id="5783178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783181">//&nbsp;TODO(nigeltao):&nbsp;handle&nbsp;the&nbsp;case&nbsp;where&nbsp;the&nbsp;dst&nbsp;and&nbsp;src&nbsp;overlap.</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783248">//&nbsp;Does&nbsp;it&nbsp;even&nbsp;make&nbsp;sense&nbsp;to&nbsp;try&nbsp;and&nbsp;do&nbsp;Floyd-Steinberg&nbsp;whilst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783313">//&nbsp;walking&nbsp;the&nbsp;image&nbsp;backward&nbsp;(right-to-left&nbsp;bottom-to-top)?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783376">//&nbsp;If&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted,&nbsp;we&nbsp;have&nbsp;a&nbsp;fast&nbsp;path&nbsp;for&nbsp;dst.Set&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783446">//&nbsp;dst.At.&nbsp;The&nbsp;dst.Set&nbsp;equivalent&nbsp;is&nbsp;a&nbsp;batch&nbsp;version&nbsp;of&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783517">//&nbsp;used&nbsp;by&nbsp;color.Palette&#39;s&nbsp;Index&nbsp;method&nbsp;in&nbsp;image/color/color.go,&nbsp;plus</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783588">//&nbsp;optional&nbsp;Floyd-Steinberg&nbsp;error&nbsp;diffusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783634">palette</span><span class="op" id="5783641">,</span>&nbsp;<span class="ident" id="5783643">pix</span><span class="op" id="5783646">,</span>&nbsp;<span class="ident" id="5783648">stride</span>&nbsp;<span class="op" id="5783655">:=</span>&nbsp;<span class="op" id="5783658">[</span><span class="op" id="5783659">]</span><span class="op" id="5783660">[</span><span class="num" id="5783661">3</span><span class="op" id="5783662">]</span><span class="builtintype" id="5783663">int32</span><span class="op" id="5783668">(</span><span class="builtintype" id="5783669">nil</span><span class="op" id="5783672">)</span><span class="op" id="5783673">,</span>&nbsp;<span class="op" id="5783675">[</span><span class="op" id="5783676">]</span><span class="builtintype" id="5783677">byte</span><span class="op" id="5783681">(</span><span class="builtintype" id="5783682">nil</span><span class="op" id="5783685">)</span><span class="op" id="5783686">,</span>&nbsp;<span class="num" id="5783688">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783691">if</span>&nbsp;<span class="ident" id="5783694">p</span><span class="op" id="5783695">,</span>&nbsp;<span class="ident" id="5783697">ok</span>&nbsp;<span class="op" id="5783700">:=</span>&nbsp;<span class="ident" id="5783703"><a href="/gostd/image/draw/draw.go.html#5783094">dst</a></span><span class="op" id="5783706">.</span><span class="op" id="5783707">(</span><span class="op" id="5783708">*</span><span class="ident" id="5783709"><a href="/gostd/image/draw/draw.go.html#5766729">image</a></span><span class="op" id="5783714">.</span><span class="ident" id="5783715"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="5783723">)</span><span class="op" id="5783724">;</span>&nbsp;<span class="ident" id="5783726"><a href="/gostd/image/draw/draw.go.html#5783697">ok</a></span>&nbsp;<span class="op" id="5783729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783733"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span>&nbsp;<span class="op" id="5783741">=</span>&nbsp;<span class="builtinfunc" id="5783743">make</span><span class="op" id="5783747">(</span><span class="op" id="5783748">[</span><span class="op" id="5783749">]</span><span class="op" id="5783750">[</span><span class="num" id="5783751">3</span><span class="op" id="5783752">]</span><span class="builtintype" id="5783753">int32</span><span class="op" id="5783758">,</span>&nbsp;<span class="builtinfunc" id="5783760">len</span><span class="op" id="5783763">(</span><span class="ident" id="5783764"><a href="/gostd/image/draw/draw.go.html#5783694">p</a></span><span class="op" id="5783765">.</span><span class="ident" id="5783766"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="5783773">)</span><span class="op" id="5783774">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783778">for</span>&nbsp;<span class="ident" id="5783782">i</span><span class="op" id="5783783">,</span>&nbsp;<span class="ident" id="5783785">col</span>&nbsp;<span class="op" id="5783789">:=</span>&nbsp;<span class="keyword" id="5783792">range</span>&nbsp;<span class="ident" id="5783798"><a href="/gostd/image/draw/draw.go.html#5783694">p</a></span><span class="op" id="5783799">.</span><span class="ident" id="5783800"><a href="/gostd/image/image.go.html#5176774">Palette</a></span>&nbsp;<span class="op" id="5783808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783813">r</span><span class="op" id="5783814">,</span>&nbsp;<span class="ident" id="5783816">g</span><span class="op" id="5783817">,</span>&nbsp;<span class="ident" id="5783819">b</span><span class="op" id="5783820">,</span>&nbsp;<span class="ident" id="5783822">_</span>&nbsp;<span class="op" id="5783824">:=</span>&nbsp;<span class="ident" id="5783827"><a href="/gostd/image/draw/draw.go.html#5783785">col</a></span><span class="op" id="5783830">.</span><span class="ident" id="5783831"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5783835">(</span><span class="op" id="5783836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783841"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5783848">[</span><span class="ident" id="5783849"><a href="/gostd/image/draw/draw.go.html#5783782">i</a></span><span class="op" id="5783850">]</span><span class="op" id="5783851">[</span><span class="num" id="5783852">0</span><span class="op" id="5783853">]</span>&nbsp;<span class="op" id="5783855">=</span>&nbsp;<span class="builtintype" id="5783857">int32</span><span class="op" id="5783862">(</span><span class="ident" id="5783863"><a href="/gostd/image/draw/draw.go.html#5783813">r</a></span><span class="op" id="5783864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783869"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5783876">[</span><span class="ident" id="5783877"><a href="/gostd/image/draw/draw.go.html#5783782">i</a></span><span class="op" id="5783878">]</span><span class="op" id="5783879">[</span><span class="num" id="5783880">1</span><span class="op" id="5783881">]</span>&nbsp;<span class="op" id="5783883">=</span>&nbsp;<span class="builtintype" id="5783885">int32</span><span class="op" id="5783890">(</span><span class="ident" id="5783891"><a href="/gostd/image/draw/draw.go.html#5783816">g</a></span><span class="op" id="5783892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783897"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5783904">[</span><span class="ident" id="5783905"><a href="/gostd/image/draw/draw.go.html#5783782">i</a></span><span class="op" id="5783906">]</span><span class="op" id="5783907">[</span><span class="num" id="5783908">2</span><span class="op" id="5783909">]</span>&nbsp;<span class="op" id="5783911">=</span>&nbsp;<span class="builtintype" id="5783913">int32</span><span class="op" id="5783918">(</span><span class="ident" id="5783919"><a href="/gostd/image/draw/draw.go.html#5783819">b</a></span><span class="op" id="5783920">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5783924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5783928"><a href="/gostd/image/draw/draw.go.html#5783643">pix</a></span><span class="op" id="5783931">,</span>&nbsp;<span class="ident" id="5783933"><a href="/gostd/image/draw/draw.go.html#5783648">stride</a></span>&nbsp;<span class="op" id="5783940">=</span>&nbsp;<span class="ident" id="5783942"><a href="/gostd/image/draw/draw.go.html#5783694">p</a></span><span class="op" id="5783943">.</span><span class="ident" id="5783944"><a href="/gostd/image/image.go.html#5176589">Pix</a></span><span class="op" id="5783947">[</span><span class="ident" id="5783948"><a href="/gostd/image/draw/draw.go.html#5783694">p</a></span><span class="op" id="5783949">.</span><span class="ident" id="5783950"><a href="/gostd/image/image.go.html#5177244">PixOffset</a></span><span class="op" id="5783959">(</span><span class="ident" id="5783960"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5783961">.</span><span class="ident" id="5783962"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5783965">.</span><span class="ident" id="5783966"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5783967">,</span>&nbsp;<span class="ident" id="5783969"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5783970">.</span><span class="ident" id="5783971"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5783974">.</span><span class="ident" id="5783975"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5783976">)</span><span class="op" id="5783977">:</span><span class="op" id="5783978">]</span><span class="op" id="5783979">,</span>&nbsp;<span class="ident" id="5783981"><a href="/gostd/image/draw/draw.go.html#5783694">p</a></span><span class="op" id="5783982">.</span><span class="ident" id="5783983"><a href="/gostd/image/image.go.html#5176678">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5783991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5783995">//&nbsp;quantErrorCurr&nbsp;and&nbsp;quantErrorNext&nbsp;are&nbsp;the&nbsp;Floyd-Steinberg&nbsp;quantization</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784070">//&nbsp;errors&nbsp;that&nbsp;have&nbsp;been&nbsp;propagated&nbsp;to&nbsp;the&nbsp;pixels&nbsp;in&nbsp;the&nbsp;current&nbsp;and&nbsp;next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784145">//&nbsp;rows.&nbsp;The&nbsp;+2&nbsp;simplifies&nbsp;calculation&nbsp;near&nbsp;the&nbsp;edges.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784201">var</span>&nbsp;<span class="ident" id="5784205">quantErrorCurr</span><span class="op" id="5784219">,</span>&nbsp;<span class="ident" id="5784221">quantErrorNext</span>&nbsp;<span class="op" id="5784236">[</span><span class="op" id="5784237">]</span><span class="op" id="5784238">[</span><span class="num" id="5784239">3</span><span class="op" id="5784240">]</span><span class="builtintype" id="5784241">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784248">if</span>&nbsp;<span class="ident" id="5784251"><a href="/gostd/image/draw/draw.go.html#5783157">floydSteinberg</a></span>&nbsp;<span class="op" id="5784266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784270"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span>&nbsp;<span class="op" id="5784285">=</span>&nbsp;<span class="builtinfunc" id="5784287">make</span><span class="op" id="5784291">(</span><span class="op" id="5784292">[</span><span class="op" id="5784293">]</span><span class="op" id="5784294">[</span><span class="num" id="5784295">3</span><span class="op" id="5784296">]</span><span class="builtintype" id="5784297">int32</span><span class="op" id="5784302">,</span>&nbsp;<span class="ident" id="5784304"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5784305">.</span><span class="ident" id="5784306"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5784308">(</span><span class="op" id="5784309">)</span><span class="op" id="5784310">+</span><span class="num" id="5784311">2</span><span class="op" id="5784312">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784316"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span>&nbsp;<span class="op" id="5784331">=</span>&nbsp;<span class="builtinfunc" id="5784333">make</span><span class="op" id="5784337">(</span><span class="op" id="5784338">[</span><span class="op" id="5784339">]</span><span class="op" id="5784340">[</span><span class="num" id="5784341">3</span><span class="op" id="5784342">]</span><span class="builtintype" id="5784343">int32</span><span class="op" id="5784348">,</span>&nbsp;<span class="ident" id="5784350"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5784351">.</span><span class="ident" id="5784352"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5784354">(</span><span class="op" id="5784355">)</span><span class="op" id="5784356">+</span><span class="num" id="5784357">2</span><span class="op" id="5784358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5784361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784365">//&nbsp;Loop&nbsp;over&nbsp;each&nbsp;source&nbsp;pixel.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784398">out</span>&nbsp;<span class="op" id="5784402">:=</span>&nbsp;<span class="ident" id="5784405"><a href="/gostd/image/draw/draw.go.html#5766738">color</a></span><span class="op" id="5784410">.</span><span class="ident" id="5784411"><a href="/gostd/image/color/color.go.html#5185941">RGBA64</a></span><span class="op" id="5784417">{</span><span class="ident" id="5784418"><a href="/gostd/image/color/color.go.html#5185967">A</a></span><span class="op" id="5784419">:</span>&nbsp;<span class="num" id="5784421">0xffff</span><span class="op" id="5784427">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784430">for</span>&nbsp;<span class="ident" id="5784434">y</span>&nbsp;<span class="op" id="5784436">:=</span>&nbsp;<span class="num" id="5784439">0</span><span class="op" id="5784440">;</span>&nbsp;<span class="ident" id="5784442"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span>&nbsp;<span class="op" id="5784444">!=</span>&nbsp;<span class="ident" id="5784447"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5784448">.</span><span class="ident" id="5784449"><a href="/gostd/image/geom.go.html#5150316">Dy</a></span><span class="op" id="5784451">(</span><span class="op" id="5784452">)</span><span class="op" id="5784453">;</span>&nbsp;<span class="ident" id="5784455"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span><span class="op" id="5784456">++</span>&nbsp;<span class="op" id="5784459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784463">for</span>&nbsp;<span class="ident" id="5784467">x</span>&nbsp;<span class="op" id="5784469">:=</span>&nbsp;<span class="num" id="5784472">0</span><span class="op" id="5784473">;</span>&nbsp;<span class="ident" id="5784475"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span>&nbsp;<span class="op" id="5784477">!=</span>&nbsp;<span class="ident" id="5784480"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5784481">.</span><span class="ident" id="5784482"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="5784484">(</span><span class="op" id="5784485">)</span><span class="op" id="5784486">;</span>&nbsp;<span class="ident" id="5784488"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5784489">++</span>&nbsp;<span class="op" id="5784492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784497">//&nbsp;er,&nbsp;eg&nbsp;and&nbsp;eb&nbsp;are&nbsp;the&nbsp;pixel&#39;s&nbsp;R,G,B&nbsp;values&nbsp;plus&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784555">//&nbsp;optional&nbsp;Floyd-Steinberg&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784593">sr</span><span class="op" id="5784595">,</span>&nbsp;<span class="ident" id="5784597">sg</span><span class="op" id="5784599">,</span>&nbsp;<span class="ident" id="5784601">sb</span><span class="op" id="5784603">,</span>&nbsp;<span class="ident" id="5784605">_</span>&nbsp;<span class="op" id="5784607">:=</span>&nbsp;<span class="ident" id="5784610"><a href="/gostd/image/draw/draw.go.html#5783124">src</a></span><span class="op" id="5784613">.</span><span class="ident" id="5784614"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5784616">(</span><span class="ident" id="5784617"><a href="/gostd/image/draw/draw.go.html#5783141">sp</a></span><span class="op" id="5784619">.</span><span class="ident" id="5784620"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5784621">+</span><span class="ident" id="5784622"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5784623">,</span>&nbsp;<span class="ident" id="5784625"><a href="/gostd/image/draw/draw.go.html#5783141">sp</a></span><span class="op" id="5784627">.</span><span class="ident" id="5784628"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5784629">+</span><span class="ident" id="5784630"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span><span class="op" id="5784631">)</span><span class="op" id="5784632">.</span><span class="ident" id="5784633"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5784637">(</span><span class="op" id="5784638">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784643">er</span><span class="op" id="5784645">,</span>&nbsp;<span class="ident" id="5784647">eg</span><span class="op" id="5784649">,</span>&nbsp;<span class="ident" id="5784651">eb</span>&nbsp;<span class="op" id="5784654">:=</span>&nbsp;<span class="builtintype" id="5784657">int32</span><span class="op" id="5784662">(</span><span class="ident" id="5784663"><a href="/gostd/image/draw/draw.go.html#5784593">sr</a></span><span class="op" id="5784665">)</span><span class="op" id="5784666">,</span>&nbsp;<span class="builtintype" id="5784668">int32</span><span class="op" id="5784673">(</span><span class="ident" id="5784674"><a href="/gostd/image/draw/draw.go.html#5784597">sg</a></span><span class="op" id="5784676">)</span><span class="op" id="5784677">,</span>&nbsp;<span class="builtintype" id="5784679">int32</span><span class="op" id="5784684">(</span><span class="ident" id="5784685"><a href="/gostd/image/draw/draw.go.html#5784601">sb</a></span><span class="op" id="5784687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784692">if</span>&nbsp;<span class="ident" id="5784695"><a href="/gostd/image/draw/draw.go.html#5783157">floydSteinberg</a></span>&nbsp;<span class="op" id="5784710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784716"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5784719">=</span>&nbsp;<span class="ident" id="5784721"><a href="/gostd/image/draw/draw.go.html#5782978">clamp</a></span><span class="op" id="5784726">(</span><span class="ident" id="5784727"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5784730">+</span>&nbsp;<span class="ident" id="5784732"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5784746">[</span><span class="ident" id="5784747"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5784748">+</span><span class="num" id="5784749">1</span><span class="op" id="5784750">]</span><span class="op" id="5784751">[</span><span class="num" id="5784752">0</span><span class="op" id="5784753">]</span><span class="op" id="5784754">/</span><span class="num" id="5784755">16</span><span class="op" id="5784757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784763"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5784766">=</span>&nbsp;<span class="ident" id="5784768"><a href="/gostd/image/draw/draw.go.html#5782978">clamp</a></span><span class="op" id="5784773">(</span><span class="ident" id="5784774"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5784777">+</span>&nbsp;<span class="ident" id="5784779"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5784793">[</span><span class="ident" id="5784794"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5784795">+</span><span class="num" id="5784796">1</span><span class="op" id="5784797">]</span><span class="op" id="5784798">[</span><span class="num" id="5784799">1</span><span class="op" id="5784800">]</span><span class="op" id="5784801">/</span><span class="num" id="5784802">16</span><span class="op" id="5784804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784810"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5784813">=</span>&nbsp;<span class="ident" id="5784815"><a href="/gostd/image/draw/draw.go.html#5782978">clamp</a></span><span class="op" id="5784820">(</span><span class="ident" id="5784821"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5784824">+</span>&nbsp;<span class="ident" id="5784826"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5784840">[</span><span class="ident" id="5784841"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5784842">+</span><span class="num" id="5784843">1</span><span class="op" id="5784844">]</span><span class="op" id="5784845">[</span><span class="num" id="5784846">2</span><span class="op" id="5784847">]</span><span class="op" id="5784848">/</span><span class="num" id="5784849">16</span><span class="op" id="5784851">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5784856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5784862">if</span>&nbsp;<span class="ident" id="5784865"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span>&nbsp;<span class="op" id="5784873">!=</span>&nbsp;<span class="builtintype" id="5784876">nil</span>&nbsp;<span class="op" id="5784880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784886">//&nbsp;Find&nbsp;the&nbsp;closest&nbsp;palette&nbsp;color&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space:&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784954">//&nbsp;one&nbsp;that&nbsp;minimizes&nbsp;sum-squared-difference.&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5785022">//&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in&nbsp;sum-squared-difference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5785091">//&nbsp;TODO(nigeltao):&nbsp;consider&nbsp;smarter&nbsp;algorithms.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785143">bestIndex</span><span class="op" id="5785152">,</span>&nbsp;<span class="ident" id="5785154">bestSSD</span>&nbsp;<span class="op" id="5785162">:=</span>&nbsp;<span class="num" id="5785165">0</span><span class="op" id="5785166">,</span>&nbsp;<span class="builtintype" id="5785168">uint32</span><span class="op" id="5785174">(</span><span class="num" id="5785175">1</span><span class="op" id="5785176">&lt;&lt;</span><span class="num" id="5785178">32</span><span class="op" id="5785180">-</span><span class="num" id="5785181">1</span><span class="op" id="5785182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785188">for</span>&nbsp;<span class="ident" id="5785192">index</span><span class="op" id="5785197">,</span>&nbsp;<span class="ident" id="5785199">p</span>&nbsp;<span class="op" id="5785201">:=</span>&nbsp;<span class="keyword" id="5785204">range</span>&nbsp;<span class="ident" id="5785210"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span>&nbsp;<span class="op" id="5785218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785225">delta</span>&nbsp;<span class="op" id="5785231">:=</span>&nbsp;<span class="op" id="5785234">(</span><span class="ident" id="5785235"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5785238">-</span>&nbsp;<span class="ident" id="5785240"><a href="/gostd/image/draw/draw.go.html#5785199">p</a></span><span class="op" id="5785241">[</span><span class="num" id="5785242">0</span><span class="op" id="5785243">]</span><span class="op" id="5785244">)</span>&nbsp;<span class="op" id="5785246">&gt;&gt;</span>&nbsp;<span class="num" id="5785249">1</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785256">ssd</span>&nbsp;<span class="op" id="5785260">:=</span>&nbsp;<span class="builtintype" id="5785263">uint32</span><span class="op" id="5785269">(</span><span class="ident" id="5785270"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span>&nbsp;<span class="op" id="5785276">*</span>&nbsp;<span class="ident" id="5785278"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span><span class="op" id="5785283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785290"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span>&nbsp;<span class="op" id="5785296">=</span>&nbsp;<span class="op" id="5785298">(</span><span class="ident" id="5785299"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5785302">-</span>&nbsp;<span class="ident" id="5785304"><a href="/gostd/image/draw/draw.go.html#5785199">p</a></span><span class="op" id="5785305">[</span><span class="num" id="5785306">1</span><span class="op" id="5785307">]</span><span class="op" id="5785308">)</span>&nbsp;<span class="op" id="5785310">&gt;&gt;</span>&nbsp;<span class="num" id="5785313">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785320"><a href="/gostd/image/draw/draw.go.html#5785256">ssd</a></span>&nbsp;<span class="op" id="5785324">+=</span>&nbsp;<span class="builtintype" id="5785327">uint32</span><span class="op" id="5785333">(</span><span class="ident" id="5785334"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span>&nbsp;<span class="op" id="5785340">*</span>&nbsp;<span class="ident" id="5785342"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span><span class="op" id="5785347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785354"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span>&nbsp;<span class="op" id="5785360">=</span>&nbsp;<span class="op" id="5785362">(</span><span class="ident" id="5785363"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5785366">-</span>&nbsp;<span class="ident" id="5785368"><a href="/gostd/image/draw/draw.go.html#5785199">p</a></span><span class="op" id="5785369">[</span><span class="num" id="5785370">2</span><span class="op" id="5785371">]</span><span class="op" id="5785372">)</span>&nbsp;<span class="op" id="5785374">&gt;&gt;</span>&nbsp;<span class="num" id="5785377">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785384"><a href="/gostd/image/draw/draw.go.html#5785256">ssd</a></span>&nbsp;<span class="op" id="5785388">+=</span>&nbsp;<span class="builtintype" id="5785391">uint32</span><span class="op" id="5785397">(</span><span class="ident" id="5785398"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span>&nbsp;<span class="op" id="5785404">*</span>&nbsp;<span class="ident" id="5785406"><a href="/gostd/image/draw/draw.go.html#5785225">delta</a></span><span class="op" id="5785411">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785418">if</span>&nbsp;<span class="ident" id="5785421"><a href="/gostd/image/draw/draw.go.html#5785256">ssd</a></span>&nbsp;<span class="op" id="5785425">&lt;</span>&nbsp;<span class="ident" id="5785427"><a href="/gostd/image/draw/draw.go.html#5785154">bestSSD</a></span>&nbsp;<span class="op" id="5785435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785443"><a href="/gostd/image/draw/draw.go.html#5785143">bestIndex</a></span><span class="op" id="5785452">,</span>&nbsp;<span class="ident" id="5785454"><a href="/gostd/image/draw/draw.go.html#5785154">bestSSD</a></span>&nbsp;<span class="op" id="5785462">=</span>&nbsp;<span class="ident" id="5785464"><a href="/gostd/image/draw/draw.go.html#5785192">index</a></span><span class="op" id="5785469">,</span>&nbsp;<span class="ident" id="5785471"><a href="/gostd/image/draw/draw.go.html#5785256">ssd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785481">if</span>&nbsp;<span class="ident" id="5785484"><a href="/gostd/image/draw/draw.go.html#5785256">ssd</a></span>&nbsp;<span class="op" id="5785488">==</span>&nbsp;<span class="num" id="5785491">0</span>&nbsp;<span class="op" id="5785493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785502">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5785514">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5785521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5785527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785533"><a href="/gostd/image/draw/draw.go.html#5783643">pix</a></span><span class="op" id="5785536">[</span><span class="ident" id="5785537"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span><span class="op" id="5785538">*</span><span class="ident" id="5785539"><a href="/gostd/image/draw/draw.go.html#5783648">stride</a></span><span class="op" id="5785545">+</span><span class="ident" id="5785546"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5785547">]</span>&nbsp;<span class="op" id="5785549">=</span>&nbsp;<span class="builtintype" id="5785551">byte</span><span class="op" id="5785555">(</span><span class="ident" id="5785556"><a href="/gostd/image/draw/draw.go.html#5785143">bestIndex</a></span><span class="op" id="5785565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785572">if</span>&nbsp;<span class="op" id="5785575">!</span><span class="ident" id="5785576"><a href="/gostd/image/draw/draw.go.html#5783157">floydSteinberg</a></span>&nbsp;<span class="op" id="5785591">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5785598">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5785611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785617"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5785620">-=</span>&nbsp;<span class="builtintype" id="5785623">int32</span><span class="op" id="5785628">(</span><span class="ident" id="5785629"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5785636">[</span><span class="ident" id="5785637"><a href="/gostd/image/draw/draw.go.html#5785143">bestIndex</a></span><span class="op" id="5785646">]</span><span class="op" id="5785647">[</span><span class="num" id="5785648">0</span><span class="op" id="5785649">]</span><span class="op" id="5785650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785656"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5785659">-=</span>&nbsp;<span class="builtintype" id="5785662">int32</span><span class="op" id="5785667">(</span><span class="ident" id="5785668"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5785675">[</span><span class="ident" id="5785676"><a href="/gostd/image/draw/draw.go.html#5785143">bestIndex</a></span><span class="op" id="5785685">]</span><span class="op" id="5785686">[</span><span class="num" id="5785687">1</span><span class="op" id="5785688">]</span><span class="op" id="5785689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785695"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5785698">-=</span>&nbsp;<span class="builtintype" id="5785701">int32</span><span class="op" id="5785706">(</span><span class="ident" id="5785707"><a href="/gostd/image/draw/draw.go.html#5783634">palette</a></span><span class="op" id="5785714">[</span><span class="ident" id="5785715"><a href="/gostd/image/draw/draw.go.html#5785143">bestIndex</a></span><span class="op" id="5785724">]</span><span class="op" id="5785725">[</span><span class="num" id="5785726">2</span><span class="op" id="5785727">]</span><span class="op" id="5785728">)</span><br>
<span class="lineno">630</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5785734">}</span>&nbsp;<span class="keyword" id="5785736">else</span>&nbsp;<span class="op" id="5785741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785747"><a href="/gostd/image/draw/draw.go.html#5784398">out</a></span><span class="op" id="5785750">.</span><span class="ident" id="5785751"><a href="/gostd/image/color/color.go.html#5185958">R</a></span>&nbsp;<span class="op" id="5785753">=</span>&nbsp;<span class="builtintype" id="5785755">uint16</span><span class="op" id="5785761">(</span><span class="ident" id="5785762"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span><span class="op" id="5785764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785770"><a href="/gostd/image/draw/draw.go.html#5784398">out</a></span><span class="op" id="5785773">.</span><span class="ident" id="5785774"><a href="/gostd/image/color/color.go.html#5185961">G</a></span>&nbsp;<span class="op" id="5785776">=</span>&nbsp;<span class="builtintype" id="5785778">uint16</span><span class="op" id="5785784">(</span><span class="ident" id="5785785"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span><span class="op" id="5785787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5785793"><a href="/gostd/image/draw/draw.go.html#5784398">out</a></span><span class="op" id="5785796">.</span><span class="ident" id="5785797"><a href="/gostd/image/color/color.go.html#5185964">B</a></span>&nbsp;<span class="op" id="5785799">=</span>&nbsp;<span class="builtintype" id="5785801">uint16</span><span class="op" id="5785807">(</span><span class="ident" id="5785808"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span><span class="op" id="5785810">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5785816">//&nbsp;The&nbsp;third&nbsp;argument&nbsp;is&nbsp;&amp;out&nbsp;instead&nbsp;of&nbsp;out&nbsp;(and&nbsp;out&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5785877">//&nbsp;declared&nbsp;outside&nbsp;of&nbsp;the&nbsp;inner&nbsp;loop)&nbsp;to&nbsp;avoid&nbsp;the&nbsp;implicit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5785942">//&nbsp;conversion&nbsp;to&nbsp;color.Color&nbsp;here&nbsp;allocating&nbsp;memory&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5786005">//&nbsp;inner&nbsp;loop&nbsp;if&nbsp;sizeof(color.RGBA64)&nbsp;&gt;&nbsp;sizeof(uintptr).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786066"><a href="/gostd/image/draw/draw.go.html#5783094">dst</a></span><span class="op" id="5786069">.</span><span class="ident" id="5786070"><a href="/gostd/image/draw/draw.go.html#5766946">Set</a></span><span class="op" id="5786073">(</span><span class="ident" id="5786074"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5786075">.</span><span class="ident" id="5786076"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5786079">.</span><span class="ident" id="5786080"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5786081">+</span><span class="ident" id="5786082"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786083">,</span>&nbsp;<span class="ident" id="5786085"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5786086">.</span><span class="ident" id="5786087"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5786090">.</span><span class="ident" id="5786091"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5786092">+</span><span class="ident" id="5786093"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span><span class="op" id="5786094">,</span>&nbsp;<span class="op" id="5786096">&amp;</span><span class="ident" id="5786097"><a href="/gostd/image/draw/draw.go.html#5784398">out</a></span><span class="op" id="5786100">)</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5786107">if</span>&nbsp;<span class="op" id="5786110">!</span><span class="ident" id="5786111"><a href="/gostd/image/draw/draw.go.html#5783157">floydSteinberg</a></span>&nbsp;<span class="op" id="5786126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5786133">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786152"><a href="/gostd/image/draw/draw.go.html#5784593">sr</a></span><span class="op" id="5786154">,</span>&nbsp;<span class="ident" id="5786156"><a href="/gostd/image/draw/draw.go.html#5784597">sg</a></span><span class="op" id="5786158">,</span>&nbsp;<span class="ident" id="5786160"><a href="/gostd/image/draw/draw.go.html#5784601">sb</a></span><span class="op" id="5786162">,</span>&nbsp;<span class="ident" id="5786164">_</span>&nbsp;<span class="op" id="5786166">=</span>&nbsp;<span class="ident" id="5786168"><a href="/gostd/image/draw/draw.go.html#5783094">dst</a></span><span class="op" id="5786171">.</span><span class="ident" id="5786172"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="5786174">(</span><span class="ident" id="5786175"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5786176">.</span><span class="ident" id="5786177"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5786180">.</span><span class="ident" id="5786181"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="5786182">+</span><span class="ident" id="5786183"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786184">,</span>&nbsp;<span class="ident" id="5786186"><a href="/gostd/image/draw/draw.go.html#5783105">r</a></span><span class="op" id="5786187">.</span><span class="ident" id="5786188"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="5786191">.</span><span class="ident" id="5786192"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="5786193">+</span><span class="ident" id="5786194"><a href="/gostd/image/draw/draw.go.html#5784434">y</a></span><span class="op" id="5786195">)</span><span class="op" id="5786196">.</span><span class="ident" id="5786197"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5786201">(</span><span class="op" id="5786202">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786208"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5786211">-=</span>&nbsp;<span class="builtintype" id="5786214">int32</span><span class="op" id="5786219">(</span><span class="ident" id="5786220"><a href="/gostd/image/draw/draw.go.html#5784593">sr</a></span><span class="op" id="5786222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786228"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5786231">-=</span>&nbsp;<span class="builtintype" id="5786234">int32</span><span class="op" id="5786239">(</span><span class="ident" id="5786240"><a href="/gostd/image/draw/draw.go.html#5784597">sg</a></span><span class="op" id="5786242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786248"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5786251">-=</span>&nbsp;<span class="builtintype" id="5786254">int32</span><span class="op" id="5786259">(</span><span class="ident" id="5786260"><a href="/gostd/image/draw/draw.go.html#5784601">sb</a></span><span class="op" id="5786262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5786273">//&nbsp;Propagate&nbsp;the&nbsp;Floyd-Steinberg&nbsp;quantization&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786329"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786343">[</span><span class="ident" id="5786344"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786345">+</span><span class="num" id="5786346">0</span><span class="op" id="5786347">]</span><span class="op" id="5786348">[</span><span class="num" id="5786349">0</span><span class="op" id="5786350">]</span>&nbsp;<span class="op" id="5786352">+=</span>&nbsp;<span class="ident" id="5786355"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5786358">*</span>&nbsp;<span class="num" id="5786360">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786365"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786379">[</span><span class="ident" id="5786380"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786381">+</span><span class="num" id="5786382">0</span><span class="op" id="5786383">]</span><span class="op" id="5786384">[</span><span class="num" id="5786385">1</span><span class="op" id="5786386">]</span>&nbsp;<span class="op" id="5786388">+=</span>&nbsp;<span class="ident" id="5786391"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5786394">*</span>&nbsp;<span class="num" id="5786396">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786401"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786415">[</span><span class="ident" id="5786416"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786417">+</span><span class="num" id="5786418">0</span><span class="op" id="5786419">]</span><span class="op" id="5786420">[</span><span class="num" id="5786421">2</span><span class="op" id="5786422">]</span>&nbsp;<span class="op" id="5786424">+=</span>&nbsp;<span class="ident" id="5786427"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5786430">*</span>&nbsp;<span class="num" id="5786432">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786437"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786451">[</span><span class="ident" id="5786452"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786453">+</span><span class="num" id="5786454">1</span><span class="op" id="5786455">]</span><span class="op" id="5786456">[</span><span class="num" id="5786457">0</span><span class="op" id="5786458">]</span>&nbsp;<span class="op" id="5786460">+=</span>&nbsp;<span class="ident" id="5786463"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5786466">*</span>&nbsp;<span class="num" id="5786468">5</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786473"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786487">[</span><span class="ident" id="5786488"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786489">+</span><span class="num" id="5786490">1</span><span class="op" id="5786491">]</span><span class="op" id="5786492">[</span><span class="num" id="5786493">1</span><span class="op" id="5786494">]</span>&nbsp;<span class="op" id="5786496">+=</span>&nbsp;<span class="ident" id="5786499"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5786502">*</span>&nbsp;<span class="num" id="5786504">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786509"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786523">[</span><span class="ident" id="5786524"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786525">+</span><span class="num" id="5786526">1</span><span class="op" id="5786527">]</span><span class="op" id="5786528">[</span><span class="num" id="5786529">2</span><span class="op" id="5786530">]</span>&nbsp;<span class="op" id="5786532">+=</span>&nbsp;<span class="ident" id="5786535"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5786538">*</span>&nbsp;<span class="num" id="5786540">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786545"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786559">[</span><span class="ident" id="5786560"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786561">+</span><span class="num" id="5786562">2</span><span class="op" id="5786563">]</span><span class="op" id="5786564">[</span><span class="num" id="5786565">0</span><span class="op" id="5786566">]</span>&nbsp;<span class="op" id="5786568">+=</span>&nbsp;<span class="ident" id="5786571"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5786574">*</span>&nbsp;<span class="num" id="5786576">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786581"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786595">[</span><span class="ident" id="5786596"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786597">+</span><span class="num" id="5786598">2</span><span class="op" id="5786599">]</span><span class="op" id="5786600">[</span><span class="num" id="5786601">1</span><span class="op" id="5786602">]</span>&nbsp;<span class="op" id="5786604">+=</span>&nbsp;<span class="ident" id="5786607"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5786610">*</span>&nbsp;<span class="num" id="5786612">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786617"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786631">[</span><span class="ident" id="5786632"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786633">+</span><span class="num" id="5786634">2</span><span class="op" id="5786635">]</span><span class="op" id="5786636">[</span><span class="num" id="5786637">2</span><span class="op" id="5786638">]</span>&nbsp;<span class="op" id="5786640">+=</span>&nbsp;<span class="ident" id="5786643"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5786646">*</span>&nbsp;<span class="num" id="5786648">1</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786653"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5786667">[</span><span class="ident" id="5786668"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786669">+</span><span class="num" id="5786670">2</span><span class="op" id="5786671">]</span><span class="op" id="5786672">[</span><span class="num" id="5786673">0</span><span class="op" id="5786674">]</span>&nbsp;<span class="op" id="5786676">+=</span>&nbsp;<span class="ident" id="5786679"><a href="/gostd/image/draw/draw.go.html#5784643">er</a></span>&nbsp;<span class="op" id="5786682">*</span>&nbsp;<span class="num" id="5786684">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786689"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5786703">[</span><span class="ident" id="5786704"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786705">+</span><span class="num" id="5786706">2</span><span class="op" id="5786707">]</span><span class="op" id="5786708">[</span><span class="num" id="5786709">1</span><span class="op" id="5786710">]</span>&nbsp;<span class="op" id="5786712">+=</span>&nbsp;<span class="ident" id="5786715"><a href="/gostd/image/draw/draw.go.html#5784647">eg</a></span>&nbsp;<span class="op" id="5786718">*</span>&nbsp;<span class="num" id="5786720">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786725"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5786739">[</span><span class="ident" id="5786740"><a href="/gostd/image/draw/draw.go.html#5784467">x</a></span><span class="op" id="5786741">+</span><span class="num" id="5786742">2</span><span class="op" id="5786743">]</span><span class="op" id="5786744">[</span><span class="num" id="5786745">2</span><span class="op" id="5786746">]</span>&nbsp;<span class="op" id="5786748">+=</span>&nbsp;<span class="ident" id="5786751"><a href="/gostd/image/draw/draw.go.html#5784651">eb</a></span>&nbsp;<span class="op" id="5786754">*</span>&nbsp;<span class="num" id="5786756">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5786765">//&nbsp;Recycle&nbsp;the&nbsp;quantization&nbsp;error&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5786810">if</span>&nbsp;<span class="ident" id="5786813"><a href="/gostd/image/draw/draw.go.html#5783157">floydSteinberg</a></span>&nbsp;<span class="op" id="5786828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786833"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><span class="op" id="5786847">,</span>&nbsp;<span class="ident" id="5786849"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span>&nbsp;<span class="op" id="5786864">=</span>&nbsp;<span class="ident" id="5786866"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786880">,</span>&nbsp;<span class="ident" id="5786882"><a href="/gostd/image/draw/draw.go.html#5784205">quantErrorCurr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5786900">for</span>&nbsp;<span class="ident" id="5786904">i</span>&nbsp;<span class="op" id="5786906">:=</span>&nbsp;<span class="keyword" id="5786909">range</span>&nbsp;<span class="ident" id="5786915"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span>&nbsp;<span class="op" id="5786930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5786936"><a href="/gostd/image/draw/draw.go.html#5784221">quantErrorNext</a></span><span class="op" id="5786950">[</span><span class="ident" id="5786951"><a href="/gostd/image/draw/draw.go.html#5786904">i</a></span><span class="op" id="5786952">]</span>&nbsp;<span class="op" id="5786954">=</span>&nbsp;<span class="op" id="5786956">[</span><span class="num" id="5786957">3</span><span class="op" id="5786958">]</span><span class="builtintype" id="5786959">int32</span><span class="op" id="5786964">{</span><span class="op" id="5786965">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5786977">}</span><br>
<span class="lineno"></span><span class="op" id="5786979">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
