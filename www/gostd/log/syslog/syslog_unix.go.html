<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6260917">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6260972">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6261026">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6261077">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6261110">package</span>&nbsp;<span class="ident" id="6261118">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6261126">import</span>&nbsp;<span class="op" id="6261133">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6261136">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6261146">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6261152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6261155">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6261224">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6261270">func</span>&nbsp;<span class="ident" id="6261275">unixSyslog</span><span class="op" id="6261285">(</span><span class="op" id="6261286">)</span>&nbsp;<span class="op" id="6261288">(</span><span class="ident" id="6261289">conn</span>&nbsp;<span class="ident" id="6261294">serverConn</span><span class="op" id="6261304">,</span>&nbsp;<span class="ident" id="6261306">err</span>&nbsp;<span class="builtintype" id="6261310">error</span><span class="op" id="6261315">)</span>&nbsp;<span class="op" id="6261317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261320">logTypes</span>&nbsp;<span class="op" id="6261329">:=</span>&nbsp;<span class="op" id="6261332">[</span><span class="op" id="6261333">]</span><span class="builtintype" id="6261334">string</span><span class="op" id="6261340">{</span><span class="string" id="6261341">&#34;unixgram&#34;</span><span class="op" id="6261351">,</span>&nbsp;<span class="string" id="6261353">&#34;unix&#34;</span><span class="op" id="6261359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261362">logPaths</span>&nbsp;<span class="op" id="6261371">:=</span>&nbsp;<span class="op" id="6261374">[</span><span class="op" id="6261375">]</span><span class="builtintype" id="6261376">string</span><span class="op" id="6261382">{</span><span class="string" id="6261383">&#34;/dev/log&#34;</span><span class="op" id="6261393">,</span>&nbsp;<span class="string" id="6261395">&#34;/var/run/syslog&#34;</span><span class="op" id="6261412">,</span>&nbsp;<span class="string" id="6261414">&#34;/var/run/log&#34;</span><span class="op" id="6261428">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261431">for</span>&nbsp;<span class="ident" id="6261435">_</span><span class="op" id="6261436">,</span>&nbsp;<span class="ident" id="6261438">network</span>&nbsp;<span class="op" id="6261446">:=</span>&nbsp;<span class="keyword" id="6261449">range</span>&nbsp;<span class="ident" id="6261455">logTypes</span>&nbsp;<span class="op" id="6261464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261468">for</span>&nbsp;<span class="ident" id="6261472">_</span><span class="op" id="6261473">,</span>&nbsp;<span class="ident" id="6261475">path</span>&nbsp;<span class="op" id="6261480">:=</span>&nbsp;<span class="keyword" id="6261483">range</span>&nbsp;<span class="ident" id="6261489">logPaths</span>&nbsp;<span class="op" id="6261498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6261503">conn</span><span class="op" id="6261507">,</span>&nbsp;<span class="ident" id="6261509">err</span>&nbsp;<span class="op" id="6261513">:=</span>&nbsp;<span class="ident" id="6261516">net</span><span class="op" id="6261519">.</span><span class="ident" id="6261520">Dial</span><span class="op" id="6261524">(</span><span class="ident" id="6261525">network</span><span class="op" id="6261532">,</span>&nbsp;<span class="ident" id="6261534">path</span><span class="op" id="6261538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261543">if</span>&nbsp;<span class="ident" id="6261546">err</span>&nbsp;<span class="op" id="6261550">!=</span>&nbsp;<span class="ident" id="6261553">nil</span>&nbsp;<span class="op" id="6261557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261563">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261575">}</span>&nbsp;<span class="keyword" id="6261577">else</span>&nbsp;<span class="op" id="6261582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261588">return</span>&nbsp;<span class="op" id="6261595">&amp;</span><span class="ident" id="6261596">netConn</span><span class="op" id="6261603">{</span><span class="ident" id="6261604">conn</span><span class="op" id="6261608">:</span>&nbsp;<span class="ident" id="6261610">conn</span><span class="op" id="6261614">,</span>&nbsp;<span class="ident" id="6261616">local</span><span class="op" id="6261621">:</span>&nbsp;<span class="builtintype" id="6261623">true</span><span class="op" id="6261627">}</span><span class="op" id="6261628">,</span>&nbsp;<span class="ident" id="6261630">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6261644">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6261647">return</span>&nbsp;<span class="ident" id="6261654">nil</span><span class="op" id="6261657">,</span>&nbsp;<span class="ident" id="6261659">errors</span><span class="op" id="6261665">.</span><span class="ident" id="6261666">New</span><span class="op" id="6261669">(</span><span class="string" id="6261670">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6261698">)</span><br>
<span class="lineno"></span><span class="op" id="6261700">}</span>
</div>
</body>
</html>
