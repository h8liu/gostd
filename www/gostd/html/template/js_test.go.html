<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8042773">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8042828">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8042882">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8042933">package</span>&nbsp;<span class="ident" id="8042941">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8042951">import</span>&nbsp;<span class="op" id="8042958">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8042961">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8042970">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8042978">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8042989">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8042999">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8043002">func</span>&nbsp;<span class="ident" id="8043007">TestNextJsCtx</span><span class="op" id="8043020">(</span><span class="ident" id="8043021">t</span>&nbsp;<span class="op" id="8043023">*</span><span class="ident" id="8043024">testing</span><span class="op" id="8043031">.</span><span class="ident" id="8043032">T</span><span class="op" id="8043033">)</span>&nbsp;<span class="op" id="8043035">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8043038">tests</span>&nbsp;<span class="op" id="8043044">:=</span>&nbsp;<span class="op" id="8043047">[</span><span class="op" id="8043048">]</span><span class="keyword" id="8043049">struct</span>&nbsp;<span class="op" id="8043056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8043060">jsCtx</span>&nbsp;<span class="ident" id="8043066">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8043074">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8043080">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043088">}</span><span class="op" id="8043089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043093">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043137">{</span><span class="ident" id="8043138">jsCtxRegexp</span><span class="op" id="8043149">,</span>&nbsp;<span class="string" id="8043151">&#34;;&#34;</span><span class="op" id="8043154">}</span><span class="op" id="8043155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043159">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043186">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043239">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043302">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043365">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043388">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043438">{</span><span class="ident" id="8043439">jsCtxRegexp</span><span class="op" id="8043450">,</span>&nbsp;<span class="string" id="8043452">&#34;}&#34;</span><span class="op" id="8043455">}</span><span class="op" id="8043456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043460">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043526">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043548">{</span><span class="ident" id="8043549">jsCtxDivOp</span><span class="op" id="8043559">,</span>&nbsp;<span class="string" id="8043561">&#34;)&#34;</span><span class="op" id="8043564">}</span><span class="op" id="8043565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043569">{</span><span class="ident" id="8043570">jsCtxDivOp</span><span class="op" id="8043580">,</span>&nbsp;<span class="string" id="8043582">&#34;]&#34;</span><span class="op" id="8043585">}</span><span class="op" id="8043586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043590">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043654">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043687">{</span><span class="ident" id="8043688">jsCtxRegexp</span><span class="op" id="8043699">,</span>&nbsp;<span class="string" id="8043701">&#34;(&#34;</span><span class="op" id="8043704">}</span><span class="op" id="8043705">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043709">{</span><span class="ident" id="8043710">jsCtxRegexp</span><span class="op" id="8043721">,</span>&nbsp;<span class="string" id="8043723">&#34;[&#34;</span><span class="op" id="8043726">}</span><span class="op" id="8043727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043731">{</span><span class="ident" id="8043732">jsCtxRegexp</span><span class="op" id="8043743">,</span>&nbsp;<span class="string" id="8043745">&#34;{&#34;</span><span class="op" id="8043748">}</span><span class="op" id="8043749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043753">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043817">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043851">{</span><span class="ident" id="8043852">jsCtxRegexp</span><span class="op" id="8043863">,</span>&nbsp;<span class="string" id="8043865">&#34;=&#34;</span><span class="op" id="8043868">}</span><span class="op" id="8043869">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043873">{</span><span class="ident" id="8043874">jsCtxRegexp</span><span class="op" id="8043885">,</span>&nbsp;<span class="string" id="8043887">&#34;+=&#34;</span><span class="op" id="8043891">}</span><span class="op" id="8043892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043896">{</span><span class="ident" id="8043897">jsCtxRegexp</span><span class="op" id="8043908">,</span>&nbsp;<span class="string" id="8043910">&#34;*=&#34;</span><span class="op" id="8043914">}</span><span class="op" id="8043915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043919">{</span><span class="ident" id="8043920">jsCtxRegexp</span><span class="op" id="8043931">,</span>&nbsp;<span class="string" id="8043933">&#34;*&#34;</span><span class="op" id="8043936">}</span><span class="op" id="8043937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043941">{</span><span class="ident" id="8043942">jsCtxRegexp</span><span class="op" id="8043953">,</span>&nbsp;<span class="string" id="8043955">&#34;!&#34;</span><span class="op" id="8043958">}</span><span class="op" id="8043959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043963">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044027">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044040">{</span><span class="ident" id="8044041">jsCtxRegexp</span><span class="op" id="8044052">,</span>&nbsp;<span class="string" id="8044054">&#34;+&#34;</span><span class="op" id="8044057">}</span><span class="op" id="8044058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044062">{</span><span class="ident" id="8044063">jsCtxRegexp</span><span class="op" id="8044074">,</span>&nbsp;<span class="string" id="8044076">&#34;-&#34;</span><span class="op" id="8044079">}</span><span class="op" id="8044080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044084">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044130">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044192">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044256">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044305">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044369">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044382">{</span><span class="ident" id="8044383">jsCtxDivOp</span><span class="op" id="8044393">,</span>&nbsp;<span class="string" id="8044395">&#34;--&#34;</span><span class="op" id="8044399">}</span><span class="op" id="8044400">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044404">{</span><span class="ident" id="8044405">jsCtxDivOp</span><span class="op" id="8044415">,</span>&nbsp;<span class="string" id="8044417">&#34;++&#34;</span><span class="op" id="8044421">}</span><span class="op" id="8044422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044426">{</span><span class="ident" id="8044427">jsCtxDivOp</span><span class="op" id="8044437">,</span>&nbsp;<span class="string" id="8044439">&#34;x--&#34;</span><span class="op" id="8044444">}</span><span class="op" id="8044445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044449">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044512">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044532">{</span><span class="ident" id="8044533">jsCtxRegexp</span><span class="op" id="8044544">,</span>&nbsp;<span class="string" id="8044546">&#34;x---&#34;</span><span class="op" id="8044552">}</span><span class="op" id="8044553">,</span>&nbsp;<span class="comment" id="8044555">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044583">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044649">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044716">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044735">{</span><span class="ident" id="8044736">jsCtxRegexp</span><span class="op" id="8044747">,</span>&nbsp;<span class="string" id="8044749">&#34;return&#34;</span><span class="op" id="8044757">}</span><span class="op" id="8044758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044762">{</span><span class="ident" id="8044763">jsCtxRegexp</span><span class="op" id="8044774">,</span>&nbsp;<span class="string" id="8044776">&#34;return&nbsp;&#34;</span><span class="op" id="8044785">}</span><span class="op" id="8044786">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044790">{</span><span class="ident" id="8044791">jsCtxRegexp</span><span class="op" id="8044802">,</span>&nbsp;<span class="string" id="8044804">&#34;return\t&#34;</span><span class="op" id="8044814">}</span><span class="op" id="8044815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044819">{</span><span class="ident" id="8044820">jsCtxRegexp</span><span class="op" id="8044831">,</span>&nbsp;<span class="string" id="8044833">&#34;return\n&#34;</span><span class="op" id="8044843">}</span><span class="op" id="8044844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044848">{</span><span class="ident" id="8044849">jsCtxRegexp</span><span class="op" id="8044860">,</span>&nbsp;<span class="string" id="8044862">&#34;return\u2028&#34;</span><span class="op" id="8044876">}</span><span class="op" id="8044877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044881">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8044947">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045009">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045075">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045140">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045206">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045217">{</span><span class="ident" id="8045218">jsCtxDivOp</span><span class="op" id="8045228">,</span>&nbsp;<span class="string" id="8045230">&#34;x&#34;</span><span class="op" id="8045233">}</span><span class="op" id="8045234">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045238">{</span><span class="ident" id="8045239">jsCtxDivOp</span><span class="op" id="8045249">,</span>&nbsp;<span class="string" id="8045251">&#34;x&nbsp;&#34;</span><span class="op" id="8045255">}</span><span class="op" id="8045256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045260">{</span><span class="ident" id="8045261">jsCtxDivOp</span><span class="op" id="8045271">,</span>&nbsp;<span class="string" id="8045273">&#34;x\t&#34;</span><span class="op" id="8045278">}</span><span class="op" id="8045279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045283">{</span><span class="ident" id="8045284">jsCtxDivOp</span><span class="op" id="8045294">,</span>&nbsp;<span class="string" id="8045296">&#34;x\n&#34;</span><span class="op" id="8045301">}</span><span class="op" id="8045302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045306">{</span><span class="ident" id="8045307">jsCtxDivOp</span><span class="op" id="8045317">,</span>&nbsp;<span class="string" id="8045319">&#34;x\u2028&#34;</span><span class="op" id="8045328">}</span><span class="op" id="8045329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045333">{</span><span class="ident" id="8045334">jsCtxDivOp</span><span class="op" id="8045344">,</span>&nbsp;<span class="string" id="8045346">&#34;preturn&#34;</span><span class="op" id="8045355">}</span><span class="op" id="8045356">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045360">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045390">{</span><span class="ident" id="8045391">jsCtxDivOp</span><span class="op" id="8045401">,</span>&nbsp;<span class="string" id="8045403">&#34;0&#34;</span><span class="op" id="8045406">}</span><span class="op" id="8045407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8045411">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045466">{</span><span class="ident" id="8045467">jsCtxDivOp</span><span class="op" id="8045477">,</span>&nbsp;<span class="string" id="8045479">&#34;0.&#34;</span><span class="op" id="8045483">}</span><span class="op" id="8045484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045487">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045491">for</span>&nbsp;<span class="ident" id="8045495">_</span><span class="op" id="8045496">,</span>&nbsp;<span class="ident" id="8045498">test</span>&nbsp;<span class="op" id="8045503">:=</span>&nbsp;<span class="keyword" id="8045506">range</span>&nbsp;<span class="ident" id="8045512">tests</span>&nbsp;<span class="op" id="8045518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045522">if</span>&nbsp;<span class="ident" id="8045525">nextJSCtx</span><span class="op" id="8045534">(</span><span class="op" id="8045535">[</span><span class="op" id="8045536">]</span><span class="builtintype" id="8045537">byte</span><span class="op" id="8045541">(</span><span class="ident" id="8045542">test</span><span class="op" id="8045546">.</span><span class="ident" id="8045547">s</span><span class="op" id="8045548">)</span><span class="op" id="8045549">,</span>&nbsp;<span class="ident" id="8045551">jsCtxRegexp</span><span class="op" id="8045562">)</span>&nbsp;<span class="op" id="8045564">!=</span>&nbsp;<span class="ident" id="8045567">test</span><span class="op" id="8045571">.</span><span class="ident" id="8045572">jsCtx</span>&nbsp;<span class="op" id="8045578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045583">t</span><span class="op" id="8045584">.</span><span class="ident" id="8045585">Errorf</span><span class="op" id="8045591">(</span><span class="string" id="8045592">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8045608">,</span>&nbsp;<span class="ident" id="8045610">test</span><span class="op" id="8045614">.</span><span class="ident" id="8045615">jsCtx</span><span class="op" id="8045620">,</span>&nbsp;<span class="ident" id="8045622">test</span><span class="op" id="8045626">.</span><span class="ident" id="8045627">s</span><span class="op" id="8045628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045632">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045636">if</span>&nbsp;<span class="ident" id="8045639">nextJSCtx</span><span class="op" id="8045648">(</span><span class="op" id="8045649">[</span><span class="op" id="8045650">]</span><span class="builtintype" id="8045651">byte</span><span class="op" id="8045655">(</span><span class="ident" id="8045656">test</span><span class="op" id="8045660">.</span><span class="ident" id="8045661">s</span><span class="op" id="8045662">)</span><span class="op" id="8045663">,</span>&nbsp;<span class="ident" id="8045665">jsCtxDivOp</span><span class="op" id="8045675">)</span>&nbsp;<span class="op" id="8045677">!=</span>&nbsp;<span class="ident" id="8045680">test</span><span class="op" id="8045684">.</span><span class="ident" id="8045685">jsCtx</span>&nbsp;<span class="op" id="8045691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045696">t</span><span class="op" id="8045697">.</span><span class="ident" id="8045698">Errorf</span><span class="op" id="8045704">(</span><span class="string" id="8045705">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8045721">,</span>&nbsp;<span class="ident" id="8045723">test</span><span class="op" id="8045727">.</span><span class="ident" id="8045728">jsCtx</span><span class="op" id="8045733">,</span>&nbsp;<span class="ident" id="8045735">test</span><span class="op" id="8045739">.</span><span class="ident" id="8045740">s</span><span class="op" id="8045741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045752">if</span>&nbsp;<span class="ident" id="8045755">nextJSCtx</span><span class="op" id="8045764">(</span><span class="op" id="8045765">[</span><span class="op" id="8045766">]</span><span class="builtintype" id="8045767">byte</span><span class="op" id="8045771">(</span><span class="string" id="8045772">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8045777">)</span><span class="op" id="8045778">,</span>&nbsp;<span class="ident" id="8045780">jsCtxRegexp</span><span class="op" id="8045791">)</span>&nbsp;<span class="op" id="8045793">!=</span>&nbsp;<span class="ident" id="8045796">jsCtxRegexp</span>&nbsp;<span class="op" id="8045808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045812">t</span><span class="op" id="8045813">.</span><span class="ident" id="8045814">Error</span><span class="op" id="8045819">(</span><span class="string" id="8045820">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8045834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045841">if</span>&nbsp;<span class="ident" id="8045844">nextJSCtx</span><span class="op" id="8045853">(</span><span class="op" id="8045854">[</span><span class="op" id="8045855">]</span><span class="builtintype" id="8045856">byte</span><span class="op" id="8045860">(</span><span class="string" id="8045861">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8045866">)</span><span class="op" id="8045867">,</span>&nbsp;<span class="ident" id="8045869">jsCtxDivOp</span><span class="op" id="8045879">)</span>&nbsp;<span class="op" id="8045881">!=</span>&nbsp;<span class="ident" id="8045884">jsCtxDivOp</span>&nbsp;<span class="op" id="8045895">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045899">t</span><span class="op" id="8045900">.</span><span class="ident" id="8045901">Error</span><span class="op" id="8045906">(</span><span class="string" id="8045907">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8045921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045924">}</span><br>
<span class="lineno"></span><span class="op" id="8045926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8045929">func</span>&nbsp;<span class="ident" id="8045934">TestJSValEscaper</span><span class="op" id="8045950">(</span><span class="ident" id="8045951">t</span>&nbsp;<span class="op" id="8045953">*</span><span class="ident" id="8045954">testing</span><span class="op" id="8045961">.</span><span class="ident" id="8045962">T</span><span class="op" id="8045963">)</span>&nbsp;<span class="op" id="8045965">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045968">tests</span>&nbsp;<span class="op" id="8045974">:=</span>&nbsp;<span class="op" id="8045977">[</span><span class="op" id="8045978">]</span><span class="keyword" id="8045979">struct</span>&nbsp;<span class="op" id="8045986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045990">x</span>&nbsp;&nbsp;<span class="keyword" id="8045993">interface</span><span class="op" id="8046002">{</span><span class="op" id="8046003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046007">js</span>&nbsp;<span class="builtintype" id="8046010">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046018">}</span><span class="op" id="8046019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046023">{</span><span class="builtintype" id="8046024">int</span><span class="op" id="8046027">(</span><span class="num" id="8046028">42</span><span class="op" id="8046030">)</span><span class="op" id="8046031">,</span>&nbsp;<span class="string" id="8046033">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046039">}</span><span class="op" id="8046040">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046044">{</span><span class="builtintype" id="8046045">uint</span><span class="op" id="8046049">(</span><span class="num" id="8046050">42</span><span class="op" id="8046052">)</span><span class="op" id="8046053">,</span>&nbsp;<span class="string" id="8046055">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046061">}</span><span class="op" id="8046062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046066">{</span><span class="builtintype" id="8046067">int16</span><span class="op" id="8046072">(</span><span class="num" id="8046073">42</span><span class="op" id="8046075">)</span><span class="op" id="8046076">,</span>&nbsp;<span class="string" id="8046078">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046084">}</span><span class="op" id="8046085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046089">{</span><span class="builtintype" id="8046090">uint16</span><span class="op" id="8046096">(</span><span class="num" id="8046097">42</span><span class="op" id="8046099">)</span><span class="op" id="8046100">,</span>&nbsp;<span class="string" id="8046102">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046108">}</span><span class="op" id="8046109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046113">{</span><span class="builtintype" id="8046114">int32</span><span class="op" id="8046119">(</span><span class="op" id="8046120">-</span><span class="num" id="8046121">42</span><span class="op" id="8046123">)</span><span class="op" id="8046124">,</span>&nbsp;<span class="string" id="8046126">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8046133">}</span><span class="op" id="8046134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046138">{</span><span class="builtintype" id="8046139">uint32</span><span class="op" id="8046145">(</span><span class="num" id="8046146">42</span><span class="op" id="8046148">)</span><span class="op" id="8046149">,</span>&nbsp;<span class="string" id="8046151">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046157">}</span><span class="op" id="8046158">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046162">{</span><span class="builtintype" id="8046163">int16</span><span class="op" id="8046168">(</span><span class="op" id="8046169">-</span><span class="num" id="8046170">42</span><span class="op" id="8046172">)</span><span class="op" id="8046173">,</span>&nbsp;<span class="string" id="8046175">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8046182">}</span><span class="op" id="8046183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046187">{</span><span class="builtintype" id="8046188">uint16</span><span class="op" id="8046194">(</span><span class="num" id="8046195">42</span><span class="op" id="8046197">)</span><span class="op" id="8046198">,</span>&nbsp;<span class="string" id="8046200">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046206">}</span><span class="op" id="8046207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046211">{</span><span class="ident" id="8046212">int64</span><span class="op" id="8046217">(</span><span class="op" id="8046218">-</span><span class="num" id="8046219">42</span><span class="op" id="8046221">)</span><span class="op" id="8046222">,</span>&nbsp;<span class="string" id="8046224">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8046231">}</span><span class="op" id="8046232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046236">{</span><span class="ident" id="8046237">uint64</span><span class="op" id="8046243">(</span><span class="num" id="8046244">42</span><span class="op" id="8046246">)</span><span class="op" id="8046247">,</span>&nbsp;<span class="string" id="8046249">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8046255">}</span><span class="op" id="8046256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046260">{</span><span class="ident" id="8046261">uint64</span><span class="op" id="8046267">(</span><span class="num" id="8046268">1</span><span class="op" id="8046269">)</span>&nbsp;<span class="op" id="8046271">&lt;&lt;</span>&nbsp;<span class="num" id="8046274">53</span><span class="op" id="8046276">,</span>&nbsp;<span class="string" id="8046278">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8046298">}</span><span class="op" id="8046299">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046303">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046355">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046409">{</span><span class="ident" id="8046410">uint64</span><span class="op" id="8046416">(</span><span class="num" id="8046417">1</span><span class="op" id="8046418">)</span><span class="op" id="8046419">&lt;&lt;</span><span class="num" id="8046421">53</span>&nbsp;<span class="op" id="8046424">+</span>&nbsp;<span class="num" id="8046426">1</span><span class="op" id="8046427">,</span>&nbsp;<span class="string" id="8046429">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8046449">}</span><span class="op" id="8046450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046454">{</span><span class="builtintype" id="8046455">float32</span><span class="op" id="8046462">(</span><span class="num" id="8046463">1.0</span><span class="op" id="8046466">)</span><span class="op" id="8046467">,</span>&nbsp;<span class="string" id="8046469">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8046474">}</span><span class="op" id="8046475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046479">{</span><span class="builtintype" id="8046480">float32</span><span class="op" id="8046487">(</span><span class="op" id="8046488">-</span><span class="num" id="8046489">1.0</span><span class="op" id="8046492">)</span><span class="op" id="8046493">,</span>&nbsp;<span class="string" id="8046495">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8046501">}</span><span class="op" id="8046502">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046506">{</span><span class="builtintype" id="8046507">float32</span><span class="op" id="8046514">(</span><span class="num" id="8046515">0.5</span><span class="op" id="8046518">)</span><span class="op" id="8046519">,</span>&nbsp;<span class="string" id="8046521">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8046528">}</span><span class="op" id="8046529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046533">{</span><span class="builtintype" id="8046534">float32</span><span class="op" id="8046541">(</span><span class="op" id="8046542">-</span><span class="num" id="8046543">0.5</span><span class="op" id="8046546">)</span><span class="op" id="8046547">,</span>&nbsp;<span class="string" id="8046549">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8046557">}</span><span class="op" id="8046558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046562">{</span><span class="builtintype" id="8046563">float32</span><span class="op" id="8046570">(</span><span class="num" id="8046571">1.0</span><span class="op" id="8046574">)</span>&nbsp;<span class="op" id="8046576">/</span>&nbsp;<span class="builtintype" id="8046578">float32</span><span class="op" id="8046585">(</span><span class="num" id="8046586">256</span><span class="op" id="8046589">)</span><span class="op" id="8046590">,</span>&nbsp;<span class="string" id="8046592">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8046606">}</span><span class="op" id="8046607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046611">{</span><span class="builtintype" id="8046612">float32</span><span class="op" id="8046619">(</span><span class="num" id="8046620">0</span><span class="op" id="8046621">)</span><span class="op" id="8046622">,</span>&nbsp;<span class="string" id="8046624">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8046629">}</span><span class="op" id="8046630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046634">{</span><span class="ident" id="8046635">math</span><span class="op" id="8046639">.</span><span class="ident" id="8046640">Copysign</span><span class="op" id="8046648">(</span><span class="num" id="8046649">0</span><span class="op" id="8046650">,</span>&nbsp;<span class="op" id="8046652">-</span><span class="num" id="8046653">1</span><span class="op" id="8046654">)</span><span class="op" id="8046655">,</span>&nbsp;<span class="string" id="8046657">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8046663">}</span><span class="op" id="8046664">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046668">{</span><span class="builtintype" id="8046669">float64</span><span class="op" id="8046676">(</span><span class="num" id="8046677">1.0</span><span class="op" id="8046680">)</span><span class="op" id="8046681">,</span>&nbsp;<span class="string" id="8046683">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8046688">}</span><span class="op" id="8046689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046693">{</span><span class="builtintype" id="8046694">float64</span><span class="op" id="8046701">(</span><span class="op" id="8046702">-</span><span class="num" id="8046703">1.0</span><span class="op" id="8046706">)</span><span class="op" id="8046707">,</span>&nbsp;<span class="string" id="8046709">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8046715">}</span><span class="op" id="8046716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046720">{</span><span class="builtintype" id="8046721">float64</span><span class="op" id="8046728">(</span><span class="num" id="8046729">0.5</span><span class="op" id="8046732">)</span><span class="op" id="8046733">,</span>&nbsp;<span class="string" id="8046735">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8046742">}</span><span class="op" id="8046743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046747">{</span><span class="builtintype" id="8046748">float64</span><span class="op" id="8046755">(</span><span class="op" id="8046756">-</span><span class="num" id="8046757">0.5</span><span class="op" id="8046760">)</span><span class="op" id="8046761">,</span>&nbsp;<span class="string" id="8046763">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8046771">}</span><span class="op" id="8046772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046776">{</span><span class="builtintype" id="8046777">float64</span><span class="op" id="8046784">(</span><span class="num" id="8046785">0</span><span class="op" id="8046786">)</span><span class="op" id="8046787">,</span>&nbsp;<span class="string" id="8046789">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8046794">}</span><span class="op" id="8046795">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046799">{</span><span class="ident" id="8046800">math</span><span class="op" id="8046804">.</span><span class="ident" id="8046805">Copysign</span><span class="op" id="8046813">(</span><span class="num" id="8046814">0</span><span class="op" id="8046815">,</span>&nbsp;<span class="op" id="8046817">-</span><span class="num" id="8046818">1</span><span class="op" id="8046819">)</span><span class="op" id="8046820">,</span>&nbsp;<span class="string" id="8046822">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8046828">}</span><span class="op" id="8046829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046833">{</span><span class="string" id="8046834">&#34;&#34;</span><span class="op" id="8046836">,</span>&nbsp;<span class="string" id="8046838">`&#34;&#34;`</span><span class="op" id="8046842">}</span><span class="op" id="8046843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046847">{</span><span class="string" id="8046848">&#34;foo&#34;</span><span class="op" id="8046853">,</span>&nbsp;<span class="string" id="8046855">`&#34;foo&#34;`</span><span class="op" id="8046862">}</span><span class="op" id="8046863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046867">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046882">{</span><span class="string" id="8046883">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8046901">,</span>&nbsp;<span class="string" id="8046903">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8046923">}</span><span class="op" id="8046924">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046928">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046976">{</span><span class="string" id="8046977">&#34;\t\x0b&#34;</span><span class="op" id="8046985">,</span>&nbsp;<span class="string" id="8046987">`&#34;\t\u000b&#34;`</span><span class="op" id="8046999">}</span><span class="op" id="8047000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047004">{</span><span class="keyword" id="8047005">struct</span><span class="op" id="8047011">{</span>&nbsp;<span class="ident" id="8047013">X</span><span class="op" id="8047014">,</span>&nbsp;<span class="ident" id="8047016">Y</span>&nbsp;<span class="builtintype" id="8047018">int</span>&nbsp;<span class="op" id="8047022">}</span><span class="op" id="8047023">{</span><span class="num" id="8047024">1</span><span class="op" id="8047025">,</span>&nbsp;<span class="num" id="8047027">2</span><span class="op" id="8047028">}</span><span class="op" id="8047029">,</span>&nbsp;<span class="string" id="8047031">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8047046">}</span><span class="op" id="8047047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047051">{</span><span class="op" id="8047052">[</span><span class="op" id="8047053">]</span><span class="keyword" id="8047054">interface</span><span class="op" id="8047063">{</span><span class="op" id="8047064">}</span><span class="op" id="8047065">{</span><span class="op" id="8047066">}</span><span class="op" id="8047067">,</span>&nbsp;<span class="string" id="8047069">&#34;[]&#34;</span><span class="op" id="8047073">}</span><span class="op" id="8047074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047078">{</span><span class="op" id="8047079">[</span><span class="op" id="8047080">]</span><span class="keyword" id="8047081">interface</span><span class="op" id="8047090">{</span><span class="op" id="8047091">}</span><span class="op" id="8047092">{</span><span class="num" id="8047093">42</span><span class="op" id="8047095">,</span>&nbsp;<span class="string" id="8047097">&#34;foo&#34;</span><span class="op" id="8047102">,</span>&nbsp;<span class="ident" id="8047104">nil</span><span class="op" id="8047107">}</span><span class="op" id="8047108">,</span>&nbsp;<span class="string" id="8047110">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8047127">}</span><span class="op" id="8047128">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047132">{</span><span class="op" id="8047133">[</span><span class="op" id="8047134">]</span><span class="builtintype" id="8047135">string</span><span class="op" id="8047141">{</span><span class="string" id="8047142">&#34;&lt;!--&#34;</span><span class="op" id="8047148">,</span>&nbsp;<span class="string" id="8047150">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8047161">,</span>&nbsp;<span class="string" id="8047163">&#34;--&gt;&#34;</span><span class="op" id="8047168">}</span><span class="op" id="8047169">,</span>&nbsp;<span class="string" id="8047171">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8047219">}</span><span class="op" id="8047220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047224">{</span><span class="string" id="8047225">&#34;&lt;!--&#34;</span><span class="op" id="8047231">,</span>&nbsp;<span class="string" id="8047233">`&#34;\u003c!--&#34;`</span><span class="op" id="8047246">}</span><span class="op" id="8047247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047251">{</span><span class="string" id="8047252">&#34;--&gt;&#34;</span><span class="op" id="8047257">,</span>&nbsp;<span class="string" id="8047259">`&#34;--\u003e&#34;`</span><span class="op" id="8047271">}</span><span class="op" id="8047272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047276">{</span><span class="string" id="8047277">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8047288">,</span>&nbsp;<span class="string" id="8047290">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8047308">}</span><span class="op" id="8047309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047313">{</span><span class="string" id="8047314">&#34;]]&gt;&#34;</span><span class="op" id="8047319">,</span>&nbsp;<span class="string" id="8047321">`&#34;]]\u003e&#34;`</span><span class="op" id="8047333">}</span><span class="op" id="8047334">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047338">{</span><span class="string" id="8047339">&#34;&lt;/script&#34;</span><span class="op" id="8047349">,</span>&nbsp;<span class="string" id="8047351">`&#34;\u003c/script&#34;`</span><span class="op" id="8047368">}</span><span class="op" id="8047369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047373">{</span><span class="string" id="8047374">&#34;\U0001D11E&#34;</span><span class="op" id="8047386">,</span>&nbsp;<span class="string" id="8047388">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8047404">}</span><span class="op" id="8047405">,</span>&nbsp;<span class="comment" id="8047407">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047433">for</span>&nbsp;<span class="ident" id="8047437">_</span><span class="op" id="8047438">,</span>&nbsp;<span class="ident" id="8047440">test</span>&nbsp;<span class="op" id="8047445">:=</span>&nbsp;<span class="keyword" id="8047448">range</span>&nbsp;<span class="ident" id="8047454">tests</span>&nbsp;<span class="op" id="8047460">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047464">if</span>&nbsp;<span class="ident" id="8047467">js</span>&nbsp;<span class="op" id="8047470">:=</span>&nbsp;<span class="ident" id="8047473">jsValEscaper</span><span class="op" id="8047485">(</span><span class="ident" id="8047486">test</span><span class="op" id="8047490">.</span><span class="ident" id="8047491">x</span><span class="op" id="8047492">)</span><span class="op" id="8047493">;</span>&nbsp;<span class="ident" id="8047495">js</span>&nbsp;<span class="op" id="8047498">!=</span>&nbsp;<span class="ident" id="8047501">test</span><span class="op" id="8047505">.</span><span class="ident" id="8047506">js</span>&nbsp;<span class="op" id="8047509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047514">t</span><span class="op" id="8047515">.</span><span class="ident" id="8047516">Errorf</span><span class="op" id="8047522">(</span><span class="string" id="8047523">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8047551">,</span>&nbsp;<span class="ident" id="8047553">test</span><span class="op" id="8047557">.</span><span class="ident" id="8047558">x</span><span class="op" id="8047559">,</span>&nbsp;<span class="ident" id="8047561">test</span><span class="op" id="8047565">.</span><span class="ident" id="8047566">js</span><span class="op" id="8047568">,</span>&nbsp;<span class="ident" id="8047570">js</span><span class="op" id="8047572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8047580">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8047637">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047654">a</span>&nbsp;<span class="op" id="8047656">:=</span>&nbsp;<span class="op" id="8047659">[</span><span class="op" id="8047660">]</span><span class="keyword" id="8047661">interface</span><span class="op" id="8047670">{</span><span class="op" id="8047671">}</span><span class="op" id="8047672">{</span><span class="ident" id="8047673">test</span><span class="op" id="8047677">.</span><span class="ident" id="8047678">x</span><span class="op" id="8047679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047683">want</span>&nbsp;<span class="op" id="8047688">:=</span>&nbsp;<span class="string" id="8047691">&#34;[&#34;</span>&nbsp;<span class="op" id="8047695">+</span>&nbsp;<span class="ident" id="8047697">strings</span><span class="op" id="8047704">.</span><span class="ident" id="8047705">TrimSpace</span><span class="op" id="8047714">(</span><span class="ident" id="8047715">test</span><span class="op" id="8047719">.</span><span class="ident" id="8047720">js</span><span class="op" id="8047722">)</span>&nbsp;<span class="op" id="8047724">+</span>&nbsp;<span class="string" id="8047726">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047732">if</span>&nbsp;<span class="ident" id="8047735">js</span>&nbsp;<span class="op" id="8047738">:=</span>&nbsp;<span class="ident" id="8047741">jsValEscaper</span><span class="op" id="8047753">(</span><span class="ident" id="8047754">a</span><span class="op" id="8047755">)</span><span class="op" id="8047756">;</span>&nbsp;<span class="ident" id="8047758">js</span>&nbsp;<span class="op" id="8047761">!=</span>&nbsp;<span class="ident" id="8047764">want</span>&nbsp;<span class="op" id="8047769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047774">t</span><span class="op" id="8047775">.</span><span class="ident" id="8047776">Errorf</span><span class="op" id="8047782">(</span><span class="string" id="8047783">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8047811">,</span>&nbsp;<span class="ident" id="8047813">a</span><span class="op" id="8047814">,</span>&nbsp;<span class="ident" id="8047816">want</span><span class="op" id="8047820">,</span>&nbsp;<span class="ident" id="8047822">js</span><span class="op" id="8047824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047828">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047831">}</span><br>
<span class="lineno"></span><span class="op" id="8047833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8047836">func</span>&nbsp;<span class="ident" id="8047841">TestJSStrEscaper</span><span class="op" id="8047857">(</span><span class="ident" id="8047858">t</span>&nbsp;<span class="op" id="8047860">*</span><span class="ident" id="8047861">testing</span><span class="op" id="8047868">.</span><span class="ident" id="8047869">T</span><span class="op" id="8047870">)</span>&nbsp;<span class="op" id="8047872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047875">tests</span>&nbsp;<span class="op" id="8047881">:=</span>&nbsp;<span class="op" id="8047884">[</span><span class="op" id="8047885">]</span><span class="keyword" id="8047886">struct</span>&nbsp;<span class="op" id="8047893">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047897">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8047901">interface</span><span class="op" id="8047910">{</span><span class="op" id="8047911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047915">esc</span>&nbsp;<span class="builtintype" id="8047919">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047927">}</span><span class="op" id="8047928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047932">{</span><span class="string" id="8047933">&#34;&#34;</span><span class="op" id="8047935">,</span>&nbsp;<span class="string" id="8047937">``</span><span class="op" id="8047939">}</span><span class="op" id="8047940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047944">{</span><span class="string" id="8047945">&#34;foo&#34;</span><span class="op" id="8047950">,</span>&nbsp;<span class="string" id="8047952">`foo`</span><span class="op" id="8047957">}</span><span class="op" id="8047958">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047962">{</span><span class="string" id="8047963">&#34;\u0000&#34;</span><span class="op" id="8047971">,</span>&nbsp;<span class="string" id="8047973">`\0`</span><span class="op" id="8047977">}</span><span class="op" id="8047978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047982">{</span><span class="string" id="8047983">&#34;\t&#34;</span><span class="op" id="8047987">,</span>&nbsp;<span class="string" id="8047989">`\t`</span><span class="op" id="8047993">}</span><span class="op" id="8047994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047998">{</span><span class="string" id="8047999">&#34;\n&#34;</span><span class="op" id="8048003">,</span>&nbsp;<span class="string" id="8048005">`\n`</span><span class="op" id="8048009">}</span><span class="op" id="8048010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048014">{</span><span class="string" id="8048015">&#34;\r&#34;</span><span class="op" id="8048019">,</span>&nbsp;<span class="string" id="8048021">`\r`</span><span class="op" id="8048025">}</span><span class="op" id="8048026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048030">{</span><span class="string" id="8048031">&#34;\u2028&#34;</span><span class="op" id="8048039">,</span>&nbsp;<span class="string" id="8048041">`\u2028`</span><span class="op" id="8048049">}</span><span class="op" id="8048050">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048054">{</span><span class="string" id="8048055">&#34;\u2029&#34;</span><span class="op" id="8048063">,</span>&nbsp;<span class="string" id="8048065">`\u2029`</span><span class="op" id="8048073">}</span><span class="op" id="8048074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048078">{</span><span class="string" id="8048079">&#34;\\&#34;</span><span class="op" id="8048083">,</span>&nbsp;<span class="string" id="8048085">`\\`</span><span class="op" id="8048089">}</span><span class="op" id="8048090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048094">{</span><span class="string" id="8048095">&#34;\\n&#34;</span><span class="op" id="8048100">,</span>&nbsp;<span class="string" id="8048102">`\\n`</span><span class="op" id="8048107">}</span><span class="op" id="8048108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048112">{</span><span class="string" id="8048113">&#34;foo\r\nbar&#34;</span><span class="op" id="8048125">,</span>&nbsp;<span class="string" id="8048127">`foo\r\nbar`</span><span class="op" id="8048139">}</span><span class="op" id="8048140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048144">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048180">{</span><span class="string" id="8048181">`&#34;`</span><span class="op" id="8048184">,</span>&nbsp;<span class="string" id="8048186">`\x22`</span><span class="op" id="8048192">}</span><span class="op" id="8048193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048197">{</span><span class="string" id="8048198">`&#39;`</span><span class="op" id="8048201">,</span>&nbsp;<span class="string" id="8048203">`\x27`</span><span class="op" id="8048209">}</span><span class="op" id="8048210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048214">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048269">{</span><span class="string" id="8048270">`&amp;amp;`</span><span class="op" id="8048277">,</span>&nbsp;<span class="string" id="8048279">`\x26amp;`</span><span class="op" id="8048289">}</span><span class="op" id="8048290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048294">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048357">{</span><span class="string" id="8048358">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8048369">,</span>&nbsp;<span class="string" id="8048371">`\x3c\/script\x3e`</span><span class="op" id="8048389">}</span><span class="op" id="8048390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048394">{</span><span class="string" id="8048395">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8048406">,</span>&nbsp;<span class="string" id="8048408">`\x3c![CDATA[`</span><span class="op" id="8048422">}</span><span class="op" id="8048423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048427">{</span><span class="string" id="8048428">&#34;]]&gt;&#34;</span><span class="op" id="8048433">,</span>&nbsp;<span class="string" id="8048435">`]]\x3e`</span><span class="op" id="8048443">}</span><span class="op" id="8048444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048448">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048520">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048584">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048645">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048692">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048756">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048823">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048889">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8048949">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049013">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049064">{</span><span class="string" id="8049065">&#34;&lt;!--&#34;</span><span class="op" id="8049071">,</span>&nbsp;<span class="string" id="8049073">`\x3c!--`</span><span class="op" id="8049082">}</span><span class="op" id="8049083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049087">{</span><span class="string" id="8049088">&#34;--&gt;&#34;</span><span class="op" id="8049093">,</span>&nbsp;<span class="string" id="8049095">`--\x3e`</span><span class="op" id="8049103">}</span><span class="op" id="8049104">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049108">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049168">{</span><span class="string" id="8049169">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8049212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8049217">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8049273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049277">}</span><span class="op" id="8049278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049282">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049310">{</span><span class="string" id="8049311">&#34;foo\xA0bar&#34;</span><span class="op" id="8049323">,</span>&nbsp;<span class="string" id="8049325">&#34;foo\xA0bar&#34;</span><span class="op" id="8049337">}</span><span class="op" id="8049338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049342">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049377">{</span><span class="string" id="8049378">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8049398">,</span>&nbsp;<span class="string" id="8049400">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8049420">}</span><span class="op" id="8049421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049428">for</span>&nbsp;<span class="ident" id="8049432">_</span><span class="op" id="8049433">,</span>&nbsp;<span class="ident" id="8049435">test</span>&nbsp;<span class="op" id="8049440">:=</span>&nbsp;<span class="keyword" id="8049443">range</span>&nbsp;<span class="ident" id="8049449">tests</span>&nbsp;<span class="op" id="8049455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049459">esc</span>&nbsp;<span class="op" id="8049463">:=</span>&nbsp;<span class="ident" id="8049466">jsStrEscaper</span><span class="op" id="8049478">(</span><span class="ident" id="8049479">test</span><span class="op" id="8049483">.</span><span class="ident" id="8049484">x</span><span class="op" id="8049485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049489">if</span>&nbsp;<span class="ident" id="8049492">esc</span>&nbsp;<span class="op" id="8049496">!=</span>&nbsp;<span class="ident" id="8049499">test</span><span class="op" id="8049503">.</span><span class="ident" id="8049504">esc</span>&nbsp;<span class="op" id="8049508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049513">t</span><span class="op" id="8049514">.</span><span class="ident" id="8049515">Errorf</span><span class="op" id="8049521">(</span><span class="string" id="8049522">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8049542">,</span>&nbsp;<span class="ident" id="8049544">test</span><span class="op" id="8049548">.</span><span class="ident" id="8049549">x</span><span class="op" id="8049550">,</span>&nbsp;<span class="ident" id="8049552">test</span><span class="op" id="8049556">.</span><span class="ident" id="8049557">esc</span><span class="op" id="8049560">,</span>&nbsp;<span class="ident" id="8049562">esc</span><span class="op" id="8049565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049569">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049572">}</span><br>
<span class="lineno"></span><span class="op" id="8049574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8049577">func</span>&nbsp;<span class="ident" id="8049582">TestJSRegexpEscaper</span><span class="op" id="8049601">(</span><span class="ident" id="8049602">t</span>&nbsp;<span class="op" id="8049604">*</span><span class="ident" id="8049605">testing</span><span class="op" id="8049612">.</span><span class="ident" id="8049613">T</span><span class="op" id="8049614">)</span>&nbsp;<span class="op" id="8049616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049619">tests</span>&nbsp;<span class="op" id="8049625">:=</span>&nbsp;<span class="op" id="8049628">[</span><span class="op" id="8049629">]</span><span class="keyword" id="8049630">struct</span>&nbsp;<span class="op" id="8049637">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049641">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8049645">interface</span><span class="op" id="8049654">{</span><span class="op" id="8049655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049659">esc</span>&nbsp;<span class="builtintype" id="8049663">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049671">}</span><span class="op" id="8049672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049676">{</span><span class="string" id="8049677">&#34;&#34;</span><span class="op" id="8049679">,</span>&nbsp;<span class="string" id="8049681">`(?:)`</span><span class="op" id="8049687">}</span><span class="op" id="8049688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049692">{</span><span class="string" id="8049693">&#34;foo&#34;</span><span class="op" id="8049698">,</span>&nbsp;<span class="string" id="8049700">`foo`</span><span class="op" id="8049705">}</span><span class="op" id="8049706">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049710">{</span><span class="string" id="8049711">&#34;\u0000&#34;</span><span class="op" id="8049719">,</span>&nbsp;<span class="string" id="8049721">`\0`</span><span class="op" id="8049725">}</span><span class="op" id="8049726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049730">{</span><span class="string" id="8049731">&#34;\t&#34;</span><span class="op" id="8049735">,</span>&nbsp;<span class="string" id="8049737">`\t`</span><span class="op" id="8049741">}</span><span class="op" id="8049742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049746">{</span><span class="string" id="8049747">&#34;\n&#34;</span><span class="op" id="8049751">,</span>&nbsp;<span class="string" id="8049753">`\n`</span><span class="op" id="8049757">}</span><span class="op" id="8049758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049762">{</span><span class="string" id="8049763">&#34;\r&#34;</span><span class="op" id="8049767">,</span>&nbsp;<span class="string" id="8049769">`\r`</span><span class="op" id="8049773">}</span><span class="op" id="8049774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049778">{</span><span class="string" id="8049779">&#34;\u2028&#34;</span><span class="op" id="8049787">,</span>&nbsp;<span class="string" id="8049789">`\u2028`</span><span class="op" id="8049797">}</span><span class="op" id="8049798">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049802">{</span><span class="string" id="8049803">&#34;\u2029&#34;</span><span class="op" id="8049811">,</span>&nbsp;<span class="string" id="8049813">`\u2029`</span><span class="op" id="8049821">}</span><span class="op" id="8049822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049826">{</span><span class="string" id="8049827">&#34;\\&#34;</span><span class="op" id="8049831">,</span>&nbsp;<span class="string" id="8049833">`\\`</span><span class="op" id="8049837">}</span><span class="op" id="8049838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049842">{</span><span class="string" id="8049843">&#34;\\n&#34;</span><span class="op" id="8049848">,</span>&nbsp;<span class="string" id="8049850">`\\n`</span><span class="op" id="8049855">}</span><span class="op" id="8049856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049860">{</span><span class="string" id="8049861">&#34;foo\r\nbar&#34;</span><span class="op" id="8049873">,</span>&nbsp;<span class="string" id="8049875">`foo\r\nbar`</span><span class="op" id="8049887">}</span><span class="op" id="8049888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049892">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049928">{</span><span class="string" id="8049929">`&#34;`</span><span class="op" id="8049932">,</span>&nbsp;<span class="string" id="8049934">`\x22`</span><span class="op" id="8049940">}</span><span class="op" id="8049941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049945">{</span><span class="string" id="8049946">`&#39;`</span><span class="op" id="8049949">,</span>&nbsp;<span class="string" id="8049951">`\x27`</span><span class="op" id="8049957">}</span><span class="op" id="8049958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8049962">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050017">{</span><span class="string" id="8050018">`&amp;amp;`</span><span class="op" id="8050025">,</span>&nbsp;<span class="string" id="8050027">`\x26amp;`</span><span class="op" id="8050037">}</span><span class="op" id="8050038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8050042">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050105">{</span><span class="string" id="8050106">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8050117">,</span>&nbsp;<span class="string" id="8050119">`\x3c\/script\x3e`</span><span class="op" id="8050137">}</span><span class="op" id="8050138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050142">{</span><span class="string" id="8050143">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8050154">,</span>&nbsp;<span class="string" id="8050156">`\x3c!\[CDATA\[`</span><span class="op" id="8050172">}</span><span class="op" id="8050173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050177">{</span><span class="string" id="8050178">&#34;]]&gt;&#34;</span><span class="op" id="8050183">,</span>&nbsp;<span class="string" id="8050185">`\]\]\x3e`</span><span class="op" id="8050195">}</span><span class="op" id="8050196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8050200">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050226">{</span><span class="string" id="8050227">&#34;&lt;!--&#34;</span><span class="op" id="8050233">,</span>&nbsp;<span class="string" id="8050235">`\x3c!\-\-`</span><span class="op" id="8050246">}</span><span class="op" id="8050247">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050251">{</span><span class="string" id="8050252">&#34;--&gt;&#34;</span><span class="op" id="8050257">,</span>&nbsp;<span class="string" id="8050259">`\-\-\x3e`</span><span class="op" id="8050269">}</span><span class="op" id="8050270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050274">{</span><span class="string" id="8050275">&#34;*&#34;</span><span class="op" id="8050278">,</span>&nbsp;<span class="string" id="8050280">`\*`</span><span class="op" id="8050284">}</span><span class="op" id="8050285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050289">{</span><span class="string" id="8050290">&#34;+&#34;</span><span class="op" id="8050293">,</span>&nbsp;<span class="string" id="8050295">`\x2b`</span><span class="op" id="8050301">}</span><span class="op" id="8050302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050306">{</span><span class="string" id="8050307">&#34;?&#34;</span><span class="op" id="8050310">,</span>&nbsp;<span class="string" id="8050312">`\?`</span><span class="op" id="8050316">}</span><span class="op" id="8050317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050321">{</span><span class="string" id="8050322">&#34;[](){}&#34;</span><span class="op" id="8050330">,</span>&nbsp;<span class="string" id="8050332">`\[\]\(\)\{\}`</span><span class="op" id="8050346">}</span><span class="op" id="8050347">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050351">{</span><span class="string" id="8050352">&#34;$foo|x.y&#34;</span><span class="op" id="8050362">,</span>&nbsp;<span class="string" id="8050364">`\$foo\|x\.y`</span><span class="op" id="8050377">}</span><span class="op" id="8050378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050382">{</span><span class="string" id="8050383">&#34;x^y&#34;</span><span class="op" id="8050388">,</span>&nbsp;<span class="string" id="8050390">`x\^y`</span><span class="op" id="8050396">}</span><span class="op" id="8050397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050404">for</span>&nbsp;<span class="ident" id="8050408">_</span><span class="op" id="8050409">,</span>&nbsp;<span class="ident" id="8050411">test</span>&nbsp;<span class="op" id="8050416">:=</span>&nbsp;<span class="keyword" id="8050419">range</span>&nbsp;<span class="ident" id="8050425">tests</span>&nbsp;<span class="op" id="8050431">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050435">esc</span>&nbsp;<span class="op" id="8050439">:=</span>&nbsp;<span class="ident" id="8050442">jsRegexpEscaper</span><span class="op" id="8050457">(</span><span class="ident" id="8050458">test</span><span class="op" id="8050462">.</span><span class="ident" id="8050463">x</span><span class="op" id="8050464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050468">if</span>&nbsp;<span class="ident" id="8050471">esc</span>&nbsp;<span class="op" id="8050475">!=</span>&nbsp;<span class="ident" id="8050478">test</span><span class="op" id="8050482">.</span><span class="ident" id="8050483">esc</span>&nbsp;<span class="op" id="8050487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050492">t</span><span class="op" id="8050493">.</span><span class="ident" id="8050494">Errorf</span><span class="op" id="8050500">(</span><span class="string" id="8050501">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8050521">,</span>&nbsp;<span class="ident" id="8050523">test</span><span class="op" id="8050527">.</span><span class="ident" id="8050528">x</span><span class="op" id="8050529">,</span>&nbsp;<span class="ident" id="8050531">test</span><span class="op" id="8050535">.</span><span class="ident" id="8050536">esc</span><span class="op" id="8050539">,</span>&nbsp;<span class="ident" id="8050541">esc</span><span class="op" id="8050544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050551">}</span><br>
<span class="lineno">265</span><span class="op" id="8050553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050556">func</span>&nbsp;<span class="ident" id="8050561">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8050604">(</span><span class="ident" id="8050605">t</span>&nbsp;<span class="op" id="8050607">*</span><span class="ident" id="8050608">testing</span><span class="op" id="8050615">.</span><span class="ident" id="8050616">T</span><span class="op" id="8050617">)</span>&nbsp;<span class="op" id="8050619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050622">input</span>&nbsp;<span class="op" id="8050628">:=</span>&nbsp;<span class="op" id="8050631">(</span><span class="string" id="8050632">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8050693">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050697">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8050764">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050768">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8050787">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050791">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8050810">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050814">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8050833">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050837">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8050856">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050860">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8050879">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050883">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8050905">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050909">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8050951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050955">tests</span>&nbsp;<span class="op" id="8050961">:=</span>&nbsp;<span class="op" id="8050964">[</span><span class="op" id="8050965">]</span><span class="keyword" id="8050966">struct</span>&nbsp;<span class="op" id="8050973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050977">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8050985">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050994">escaper</span>&nbsp;<span class="keyword" id="8051002">func</span><span class="op" id="8051006">(</span><span class="op" id="8051007">...</span><span class="keyword" id="8051010">interface</span><span class="op" id="8051019">{</span><span class="op" id="8051020">}</span><span class="op" id="8051021">)</span>&nbsp;<span class="builtintype" id="8051023">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051032">escaped</span>&nbsp;<span class="builtintype" id="8051040">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051048">}</span><span class="op" id="8051049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051058">&#34;jsStrEscaper&#34;</span><span class="op" id="8051072">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051077">jsStrEscaper</span><span class="op" id="8051089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051094">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8051128">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051134">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8051166">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051172">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8051207">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051213">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8051248">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051254">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8051286">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051292">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8051317">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051323">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8051342">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051348">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8051368">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051374">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8051393">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051399">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8051421">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051427">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8051471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051475">}</span><span class="op" id="8051476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051485">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8051502">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051507">jsRegexpEscaper</span><span class="op" id="8051522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051527">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8051561">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051567">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8051599">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051605">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8051640">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051646">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8051681">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051687">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8051725">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051731">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8051757">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051763">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8051782">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051788">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8051811">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051817">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8051836">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051842">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8051863">+</span>&nbsp;<span class="string" id="8051865">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8051874">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8051880">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8051924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051928">}</span><span class="op" id="8051929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051936">for</span>&nbsp;<span class="ident" id="8051940">_</span><span class="op" id="8051941">,</span>&nbsp;<span class="ident" id="8051943">test</span>&nbsp;<span class="op" id="8051948">:=</span>&nbsp;<span class="keyword" id="8051951">range</span>&nbsp;<span class="ident" id="8051957">tests</span>&nbsp;<span class="op" id="8051963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051967">if</span>&nbsp;<span class="ident" id="8051970">s</span>&nbsp;<span class="op" id="8051972">:=</span>&nbsp;<span class="ident" id="8051975">test</span><span class="op" id="8051979">.</span><span class="ident" id="8051980">escaper</span><span class="op" id="8051987">(</span><span class="ident" id="8051988">input</span><span class="op" id="8051993">)</span><span class="op" id="8051994">;</span>&nbsp;<span class="ident" id="8051996">s</span>&nbsp;<span class="op" id="8051998">!=</span>&nbsp;<span class="ident" id="8052001">test</span><span class="op" id="8052005">.</span><span class="ident" id="8052006">escaped</span>&nbsp;<span class="op" id="8052014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052019">t</span><span class="op" id="8052020">.</span><span class="ident" id="8052021">Errorf</span><span class="op" id="8052027">(</span><span class="string" id="8052028">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8052060">,</span>&nbsp;<span class="ident" id="8052062">test</span><span class="op" id="8052066">.</span><span class="ident" id="8052067">name</span><span class="op" id="8052071">,</span>&nbsp;<span class="ident" id="8052073">test</span><span class="op" id="8052077">.</span><span class="ident" id="8052078">escaped</span><span class="op" id="8052085">,</span>&nbsp;<span class="ident" id="8052087">s</span><span class="op" id="8052088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052093">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052104">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8052109">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8052159">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052208">var</span>&nbsp;<span class="ident" id="8052212">buf</span>&nbsp;<span class="ident" id="8052216">bytes</span><span class="op" id="8052221">.</span><span class="ident" id="8052222">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052231">for</span>&nbsp;<span class="ident" id="8052235">_</span><span class="op" id="8052236">,</span>&nbsp;<span class="ident" id="8052238">c</span>&nbsp;<span class="op" id="8052240">:=</span>&nbsp;<span class="keyword" id="8052243">range</span>&nbsp;<span class="ident" id="8052249">input</span>&nbsp;<span class="op" id="8052255">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052260">buf</span><span class="op" id="8052263">.</span><span class="ident" id="8052264">WriteString</span><span class="op" id="8052275">(</span><span class="ident" id="8052276">test</span><span class="op" id="8052280">.</span><span class="ident" id="8052281">escaper</span><span class="op" id="8052288">(</span><span class="builtintype" id="8052289">string</span><span class="op" id="8052295">(</span><span class="ident" id="8052296">c</span><span class="op" id="8052297">)</span><span class="op" id="8052298">)</span><span class="op" id="8052299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052308">if</span>&nbsp;<span class="ident" id="8052311">s</span>&nbsp;<span class="op" id="8052313">:=</span>&nbsp;<span class="ident" id="8052316">buf</span><span class="op" id="8052319">.</span><span class="ident" id="8052320">String</span><span class="op" id="8052326">(</span><span class="op" id="8052327">)</span><span class="op" id="8052328">;</span>&nbsp;<span class="ident" id="8052330">s</span>&nbsp;<span class="op" id="8052332">!=</span>&nbsp;<span class="ident" id="8052335">test</span><span class="op" id="8052339">.</span><span class="ident" id="8052340">escaped</span>&nbsp;<span class="op" id="8052348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052353">t</span><span class="op" id="8052354">.</span><span class="ident" id="8052355">Errorf</span><span class="op" id="8052361">(</span><span class="string" id="8052362">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8052399">,</span>&nbsp;<span class="ident" id="8052401">test</span><span class="op" id="8052405">.</span><span class="ident" id="8052406">name</span><span class="op" id="8052410">,</span>&nbsp;<span class="ident" id="8052412">test</span><span class="op" id="8052416">.</span><span class="ident" id="8052417">escaped</span><span class="op" id="8052424">,</span>&nbsp;<span class="ident" id="8052426">s</span><span class="op" id="8052427">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052432">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052446">}</span><br>
<span class="lineno"></span><span class="op" id="8052448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8052451">func</span>&nbsp;<span class="ident" id="8052456">BenchmarkJSValEscaperWithNum</span><span class="op" id="8052484">(</span><span class="ident" id="8052485">b</span>&nbsp;<span class="op" id="8052487">*</span><span class="ident" id="8052488">testing</span><span class="op" id="8052495">.</span><span class="ident" id="8052496">B</span><span class="op" id="8052497">)</span>&nbsp;<span class="op" id="8052499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052502">for</span>&nbsp;<span class="ident" id="8052506">i</span>&nbsp;<span class="op" id="8052508">:=</span>&nbsp;<span class="num" id="8052511">0</span><span class="op" id="8052512">;</span>&nbsp;<span class="ident" id="8052514">i</span>&nbsp;<span class="op" id="8052516">&lt;</span>&nbsp;<span class="ident" id="8052518">b</span><span class="op" id="8052519">.</span><span class="ident" id="8052520">N</span><span class="op" id="8052521">;</span>&nbsp;<span class="ident" id="8052523">i</span><span class="op" id="8052524">++</span>&nbsp;<span class="op" id="8052527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052531">jsValEscaper</span><span class="op" id="8052543">(</span><span class="num" id="8052544">3.141592654</span><span class="op" id="8052555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052558">}</span><br>
<span class="lineno"></span><span class="op" id="8052560">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8052563">func</span>&nbsp;<span class="ident" id="8052568">BenchmarkJSValEscaperWithStr</span><span class="op" id="8052596">(</span><span class="ident" id="8052597">b</span>&nbsp;<span class="op" id="8052599">*</span><span class="ident" id="8052600">testing</span><span class="op" id="8052607">.</span><span class="ident" id="8052608">B</span><span class="op" id="8052609">)</span>&nbsp;<span class="op" id="8052611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052614">for</span>&nbsp;<span class="ident" id="8052618">i</span>&nbsp;<span class="op" id="8052620">:=</span>&nbsp;<span class="num" id="8052623">0</span><span class="op" id="8052624">;</span>&nbsp;<span class="ident" id="8052626">i</span>&nbsp;<span class="op" id="8052628">&lt;</span>&nbsp;<span class="ident" id="8052630">b</span><span class="op" id="8052631">.</span><span class="ident" id="8052632">N</span><span class="op" id="8052633">;</span>&nbsp;<span class="ident" id="8052635">i</span><span class="op" id="8052636">++</span>&nbsp;<span class="op" id="8052639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052643">jsValEscaper</span><span class="op" id="8052655">(</span><span class="string" id="8052656">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8052777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052780">}</span><br>
<span class="lineno">345</span><span class="op" id="8052782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8052785">func</span>&nbsp;<span class="ident" id="8052790">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8052828">(</span><span class="ident" id="8052829">b</span>&nbsp;<span class="op" id="8052831">*</span><span class="ident" id="8052832">testing</span><span class="op" id="8052839">.</span><span class="ident" id="8052840">B</span><span class="op" id="8052841">)</span>&nbsp;<span class="op" id="8052843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052846">for</span>&nbsp;<span class="ident" id="8052850">i</span>&nbsp;<span class="op" id="8052852">:=</span>&nbsp;<span class="num" id="8052855">0</span><span class="op" id="8052856">;</span>&nbsp;<span class="ident" id="8052858">i</span>&nbsp;<span class="op" id="8052860">&lt;</span>&nbsp;<span class="ident" id="8052862">b</span><span class="op" id="8052863">.</span><span class="ident" id="8052864">N</span><span class="op" id="8052865">;</span>&nbsp;<span class="ident" id="8052867">i</span><span class="op" id="8052868">++</span>&nbsp;<span class="op" id="8052871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052875">jsValEscaper</span><span class="op" id="8052887">(</span><span class="string" id="8052888">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8052934">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052937">}</span><br>
<span class="lineno"></span><span class="op" id="8052939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8052942">func</span>&nbsp;<span class="ident" id="8052947">BenchmarkJSValEscaperWithObj</span><span class="op" id="8052975">(</span><span class="ident" id="8052976">b</span>&nbsp;<span class="op" id="8052978">*</span><span class="ident" id="8052979">testing</span><span class="op" id="8052986">.</span><span class="ident" id="8052987">B</span><span class="op" id="8052988">)</span>&nbsp;<span class="op" id="8052990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052993">o</span>&nbsp;<span class="op" id="8052995">:=</span>&nbsp;<span class="keyword" id="8052998">struct</span>&nbsp;<span class="op" id="8053005">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053009">S</span>&nbsp;<span class="builtintype" id="8053011">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053020">N</span>&nbsp;<span class="builtintype" id="8053022">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053027">}</span><span class="op" id="8053028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8053032">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8053159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8053163">42</span><span class="op" id="8053165">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053171">for</span>&nbsp;<span class="ident" id="8053175">i</span>&nbsp;<span class="op" id="8053177">:=</span>&nbsp;<span class="num" id="8053180">0</span><span class="op" id="8053181">;</span>&nbsp;<span class="ident" id="8053183">i</span>&nbsp;<span class="op" id="8053185">&lt;</span>&nbsp;<span class="ident" id="8053187">b</span><span class="op" id="8053188">.</span><span class="ident" id="8053189">N</span><span class="op" id="8053190">;</span>&nbsp;<span class="ident" id="8053192">i</span><span class="op" id="8053193">++</span>&nbsp;<span class="op" id="8053196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053200">jsValEscaper</span><span class="op" id="8053212">(</span><span class="ident" id="8053213">o</span><span class="op" id="8053214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053217">}</span><br>
<span class="lineno"></span><span class="op" id="8053219">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8053222">func</span>&nbsp;<span class="ident" id="8053227">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8053265">(</span><span class="ident" id="8053266">b</span>&nbsp;<span class="op" id="8053268">*</span><span class="ident" id="8053269">testing</span><span class="op" id="8053276">.</span><span class="ident" id="8053277">B</span><span class="op" id="8053278">)</span>&nbsp;<span class="op" id="8053280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053283">o</span>&nbsp;<span class="op" id="8053285">:=</span>&nbsp;<span class="keyword" id="8053288">struct</span>&nbsp;<span class="op" id="8053295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053299">S</span>&nbsp;<span class="builtintype" id="8053301">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053310">N</span>&nbsp;<span class="builtintype" id="8053312">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053317">}</span><span class="op" id="8053318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8053322">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8053368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8053372">42</span><span class="op" id="8053374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053380">for</span>&nbsp;<span class="ident" id="8053384">i</span>&nbsp;<span class="op" id="8053386">:=</span>&nbsp;<span class="num" id="8053389">0</span><span class="op" id="8053390">;</span>&nbsp;<span class="ident" id="8053392">i</span>&nbsp;<span class="op" id="8053394">&lt;</span>&nbsp;<span class="ident" id="8053396">b</span><span class="op" id="8053397">.</span><span class="ident" id="8053398">N</span><span class="op" id="8053399">;</span>&nbsp;<span class="ident" id="8053401">i</span><span class="op" id="8053402">++</span>&nbsp;<span class="op" id="8053405">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053409">jsValEscaper</span><span class="op" id="8053421">(</span><span class="ident" id="8053422">o</span><span class="op" id="8053423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053426">}</span><br>
<span class="lineno"></span><span class="op" id="8053428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8053431">func</span>&nbsp;<span class="ident" id="8053436">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8053467">(</span><span class="ident" id="8053468">b</span>&nbsp;<span class="op" id="8053470">*</span><span class="ident" id="8053471">testing</span><span class="op" id="8053478">.</span><span class="ident" id="8053479">B</span><span class="op" id="8053480">)</span>&nbsp;<span class="op" id="8053482">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053485">for</span>&nbsp;<span class="ident" id="8053489">i</span>&nbsp;<span class="op" id="8053491">:=</span>&nbsp;<span class="num" id="8053494">0</span><span class="op" id="8053495">;</span>&nbsp;<span class="ident" id="8053497">i</span>&nbsp;<span class="op" id="8053499">&lt;</span>&nbsp;<span class="ident" id="8053501">b</span><span class="op" id="8053502">.</span><span class="ident" id="8053503">N</span><span class="op" id="8053504">;</span>&nbsp;<span class="ident" id="8053506">i</span><span class="op" id="8053507">++</span>&nbsp;<span class="op" id="8053510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053514">jsStrEscaper</span><span class="op" id="8053526">(</span><span class="string" id="8053527">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8053574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053577">}</span><br>
<span class="lineno"></span><span class="op" id="8053579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8053582">func</span>&nbsp;<span class="ident" id="8053587">BenchmarkJSStrEscaper</span><span class="op" id="8053608">(</span><span class="ident" id="8053609">b</span>&nbsp;<span class="op" id="8053611">*</span><span class="ident" id="8053612">testing</span><span class="op" id="8053619">.</span><span class="ident" id="8053620">B</span><span class="op" id="8053621">)</span>&nbsp;<span class="op" id="8053623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053626">for</span>&nbsp;<span class="ident" id="8053630">i</span>&nbsp;<span class="op" id="8053632">:=</span>&nbsp;<span class="num" id="8053635">0</span><span class="op" id="8053636">;</span>&nbsp;<span class="ident" id="8053638">i</span>&nbsp;<span class="op" id="8053640">&lt;</span>&nbsp;<span class="ident" id="8053642">b</span><span class="op" id="8053643">.</span><span class="ident" id="8053644">N</span><span class="op" id="8053645">;</span>&nbsp;<span class="ident" id="8053647">i</span><span class="op" id="8053648">++</span>&nbsp;<span class="op" id="8053651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053655">jsStrEscaper</span><span class="op" id="8053667">(</span><span class="string" id="8053668">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8053789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053792">}</span><br>
<span class="lineno"></span><span class="op" id="8053794">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8053797">func</span>&nbsp;<span class="ident" id="8053802">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8053836">(</span><span class="ident" id="8053837">b</span>&nbsp;<span class="op" id="8053839">*</span><span class="ident" id="8053840">testing</span><span class="op" id="8053847">.</span><span class="ident" id="8053848">B</span><span class="op" id="8053849">)</span>&nbsp;<span class="op" id="8053851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053854">for</span>&nbsp;<span class="ident" id="8053858">i</span>&nbsp;<span class="op" id="8053860">:=</span>&nbsp;<span class="num" id="8053863">0</span><span class="op" id="8053864">;</span>&nbsp;<span class="ident" id="8053866">i</span>&nbsp;<span class="op" id="8053868">&lt;</span>&nbsp;<span class="ident" id="8053870">b</span><span class="op" id="8053871">.</span><span class="ident" id="8053872">N</span><span class="op" id="8053873">;</span>&nbsp;<span class="ident" id="8053875">i</span><span class="op" id="8053876">++</span>&nbsp;<span class="op" id="8053879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053883">jsRegexpEscaper</span><span class="op" id="8053898">(</span><span class="string" id="8053899">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8053945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053948">}</span><br>
<span class="lineno">395</span><span class="op" id="8053950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8053953">func</span>&nbsp;<span class="ident" id="8053958">BenchmarkJSRegexpEscaper</span><span class="op" id="8053982">(</span><span class="ident" id="8053983">b</span>&nbsp;<span class="op" id="8053985">*</span><span class="ident" id="8053986">testing</span><span class="op" id="8053993">.</span><span class="ident" id="8053994">B</span><span class="op" id="8053995">)</span>&nbsp;<span class="op" id="8053997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8054000">for</span>&nbsp;<span class="ident" id="8054004">i</span>&nbsp;<span class="op" id="8054006">:=</span>&nbsp;<span class="num" id="8054009">0</span><span class="op" id="8054010">;</span>&nbsp;<span class="ident" id="8054012">i</span>&nbsp;<span class="op" id="8054014">&lt;</span>&nbsp;<span class="ident" id="8054016">b</span><span class="op" id="8054017">.</span><span class="ident" id="8054018">N</span><span class="op" id="8054019">;</span>&nbsp;<span class="ident" id="8054021">i</span><span class="op" id="8054022">++</span>&nbsp;<span class="op" id="8054025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054029">jsRegexpEscaper</span><span class="op" id="8054044">(</span><span class="string" id="8054045">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8054166">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054169">}</span><br>
<span class="lineno"></span><span class="op" id="8054171">}</span>
</div>
</body>
</html>
