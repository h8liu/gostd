<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7416232">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7416287">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7416341">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7416392">package</span>&nbsp;<span class="ident" id="7416400">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7416409">func</span>&nbsp;<span class="op" id="7416414">(</span><span class="ident" id="7416415">r</span>&nbsp;<span class="op" id="7416417">*</span><span class="ident" id="7416418">Replacer</span><span class="op" id="7416426">)</span>&nbsp;<span class="ident" id="7416428">Replacer</span><span class="op" id="7416436">(</span><span class="op" id="7416437">)</span>&nbsp;<span class="keyword" id="7416439">interface</span><span class="op" id="7416448">{</span><span class="op" id="7416449">}</span>&nbsp;<span class="op" id="7416451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416454">return</span>&nbsp;<span class="ident" id="7416461">r</span><span class="op" id="7416462">.</span><span class="ident" id="7416463">r</span><br>
<span class="lineno"></span><span class="op" id="7416465">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7416468">func</span>&nbsp;<span class="op" id="7416473">(</span><span class="ident" id="7416474">r</span>&nbsp;<span class="op" id="7416476">*</span><span class="ident" id="7416477">Replacer</span><span class="op" id="7416485">)</span>&nbsp;<span class="ident" id="7416487">PrintTrie</span><span class="op" id="7416496">(</span><span class="op" id="7416497">)</span>&nbsp;<span class="builtintype" id="7416499">string</span>&nbsp;<span class="op" id="7416506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416509">gen</span>&nbsp;<span class="op" id="7416513">:=</span>&nbsp;<span class="ident" id="7416516">r</span><span class="op" id="7416517">.</span><span class="ident" id="7416518">r</span><span class="op" id="7416519">.</span><span class="op" id="7416520">(</span><span class="op" id="7416521">*</span><span class="ident" id="7416522">genericReplacer</span><span class="op" id="7416537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416540">return</span>&nbsp;<span class="ident" id="7416547">gen</span><span class="op" id="7416550">.</span><span class="ident" id="7416551">printNode</span><span class="op" id="7416560">(</span><span class="op" id="7416561">&amp;</span><span class="ident" id="7416562">gen</span><span class="op" id="7416565">.</span><span class="ident" id="7416566">root</span><span class="op" id="7416570">,</span>&nbsp;<span class="num" id="7416572">0</span><span class="op" id="7416573">)</span><br>
<span class="lineno"></span><span class="op" id="7416575">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7416578">func</span>&nbsp;<span class="op" id="7416583">(</span><span class="ident" id="7416584">r</span>&nbsp;<span class="op" id="7416586">*</span><span class="ident" id="7416587">genericReplacer</span><span class="op" id="7416602">)</span>&nbsp;<span class="ident" id="7416604">printNode</span><span class="op" id="7416613">(</span><span class="ident" id="7416614">t</span>&nbsp;<span class="op" id="7416616">*</span><span class="ident" id="7416617">trieNode</span><span class="op" id="7416625">,</span>&nbsp;<span class="ident" id="7416627">depth</span>&nbsp;<span class="builtintype" id="7416633">int</span><span class="op" id="7416636">)</span>&nbsp;<span class="op" id="7416638">(</span><span class="ident" id="7416639">s</span>&nbsp;<span class="builtintype" id="7416641">string</span><span class="op" id="7416647">)</span>&nbsp;<span class="op" id="7416649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416652">if</span>&nbsp;<span class="ident" id="7416655">t</span><span class="op" id="7416656">.</span><span class="ident" id="7416657">priority</span>&nbsp;<span class="op" id="7416666">&gt;</span>&nbsp;<span class="num" id="7416668">0</span>&nbsp;<span class="op" id="7416670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416674">s</span>&nbsp;<span class="op" id="7416676">+=</span>&nbsp;<span class="string" id="7416679">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7416684">}</span>&nbsp;<span class="keyword" id="7416686">else</span>&nbsp;<span class="op" id="7416691">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416695">s</span>&nbsp;<span class="op" id="7416697">+=</span>&nbsp;<span class="string" id="7416700">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7416705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416708">s</span>&nbsp;<span class="op" id="7416710">+=</span>&nbsp;<span class="string" id="7416713">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416720">if</span>&nbsp;<span class="ident" id="7416723">t</span><span class="op" id="7416724">.</span><span class="ident" id="7416725">prefix</span>&nbsp;<span class="op" id="7416732">!=</span>&nbsp;<span class="string" id="7416735">&#34;&#34;</span>&nbsp;<span class="op" id="7416738">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416742">s</span>&nbsp;<span class="op" id="7416744">+=</span>&nbsp;<span class="ident" id="7416747">Repeat</span><span class="op" id="7416753">(</span><span class="string" id="7416754">&#34;.&#34;</span><span class="op" id="7416757">,</span>&nbsp;<span class="ident" id="7416759">depth</span><span class="op" id="7416764">)</span>&nbsp;<span class="op" id="7416766">+</span>&nbsp;<span class="ident" id="7416768">t</span><span class="op" id="7416769">.</span><span class="ident" id="7416770">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416779">s</span>&nbsp;<span class="op" id="7416781">+=</span>&nbsp;<span class="ident" id="7416784">r</span><span class="op" id="7416785">.</span><span class="ident" id="7416786">printNode</span><span class="op" id="7416795">(</span><span class="ident" id="7416796">t</span><span class="op" id="7416797">.</span><span class="ident" id="7416798">next</span><span class="op" id="7416802">,</span>&nbsp;<span class="ident" id="7416804">depth</span><span class="op" id="7416809">+</span><span class="builtinfunc" id="7416810">len</span><span class="op" id="7416813">(</span><span class="ident" id="7416814">t</span><span class="op" id="7416815">.</span><span class="ident" id="7416816">prefix</span><span class="op" id="7416822">)</span><span class="op" id="7416823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7416826">}</span>&nbsp;<span class="keyword" id="7416828">else</span>&nbsp;<span class="keyword" id="7416833">if</span>&nbsp;<span class="ident" id="7416836">t</span><span class="op" id="7416837">.</span><span class="ident" id="7416838">table</span>&nbsp;<span class="op" id="7416844">!=</span>&nbsp;<span class="ident" id="7416847">nil</span>&nbsp;<span class="op" id="7416851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416855">for</span>&nbsp;<span class="ident" id="7416859">b</span><span class="op" id="7416860">,</span>&nbsp;<span class="ident" id="7416862">m</span>&nbsp;<span class="op" id="7416864">:=</span>&nbsp;<span class="keyword" id="7416867">range</span>&nbsp;<span class="ident" id="7416873">r</span><span class="op" id="7416874">.</span><span class="ident" id="7416875">mapping</span>&nbsp;<span class="op" id="7416883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7416888">if</span>&nbsp;<span class="builtintype" id="7416891">int</span><span class="op" id="7416894">(</span><span class="ident" id="7416895">m</span><span class="op" id="7416896">)</span>&nbsp;<span class="op" id="7416898">!=</span>&nbsp;<span class="ident" id="7416901">r</span><span class="op" id="7416902">.</span><span class="ident" id="7416903">tableSize</span>&nbsp;<span class="op" id="7416913">&amp;&amp;</span>&nbsp;<span class="ident" id="7416916">t</span><span class="op" id="7416917">.</span><span class="ident" id="7416918">table</span><span class="op" id="7416923">[</span><span class="ident" id="7416924">m</span><span class="op" id="7416925">]</span>&nbsp;<span class="op" id="7416927">!=</span>&nbsp;<span class="ident" id="7416930">nil</span>&nbsp;<span class="op" id="7416934">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416940">s</span>&nbsp;<span class="op" id="7416942">+=</span>&nbsp;<span class="ident" id="7416945">Repeat</span><span class="op" id="7416951">(</span><span class="string" id="7416952">&#34;.&#34;</span><span class="op" id="7416955">,</span>&nbsp;<span class="ident" id="7416957">depth</span><span class="op" id="7416962">)</span>&nbsp;<span class="op" id="7416964">+</span>&nbsp;<span class="builtintype" id="7416966">string</span><span class="op" id="7416972">(</span><span class="op" id="7416973">[</span><span class="op" id="7416974">]</span><span class="builtintype" id="7416975">byte</span><span class="op" id="7416979">{</span><span class="builtintype" id="7416980">byte</span><span class="op" id="7416984">(</span><span class="ident" id="7416985">b</span><span class="op" id="7416986">)</span><span class="op" id="7416987">}</span><span class="op" id="7416988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7416994">s</span>&nbsp;<span class="op" id="7416996">+=</span>&nbsp;<span class="ident" id="7416999">r</span><span class="op" id="7417000">.</span><span class="ident" id="7417001">printNode</span><span class="op" id="7417010">(</span><span class="ident" id="7417011">t</span><span class="op" id="7417012">.</span><span class="ident" id="7417013">table</span><span class="op" id="7417018">[</span><span class="ident" id="7417019">m</span><span class="op" id="7417020">]</span><span class="op" id="7417021">,</span>&nbsp;<span class="ident" id="7417023">depth</span><span class="op" id="7417028">+</span><span class="num" id="7417029">1</span><span class="op" id="7417030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7417035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7417039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7417042">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7417045">return</span><br>
<span class="lineno"></span><span class="op" id="7417052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7417055">func</span>&nbsp;<span class="ident" id="7417060">StringFind</span><span class="op" id="7417070">(</span><span class="ident" id="7417071">pattern</span><span class="op" id="7417078">,</span>&nbsp;<span class="ident" id="7417080">text</span>&nbsp;<span class="builtintype" id="7417085">string</span><span class="op" id="7417091">)</span>&nbsp;<span class="builtintype" id="7417093">int</span>&nbsp;<span class="op" id="7417097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7417100">return</span>&nbsp;<span class="ident" id="7417107">makeStringFinder</span><span class="op" id="7417123">(</span><span class="ident" id="7417124">pattern</span><span class="op" id="7417131">)</span><span class="op" id="7417132">.</span><span class="ident" id="7417133">next</span><span class="op" id="7417137">(</span><span class="ident" id="7417138">text</span><span class="op" id="7417142">)</span><br>
<span class="lineno">40</span><span class="op" id="7417144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7417147">func</span>&nbsp;<span class="ident" id="7417152">DumpTables</span><span class="op" id="7417162">(</span><span class="ident" id="7417163">pattern</span>&nbsp;<span class="builtintype" id="7417171">string</span><span class="op" id="7417177">)</span>&nbsp;<span class="op" id="7417179">(</span><span class="op" id="7417180">[</span><span class="op" id="7417181">]</span><span class="builtintype" id="7417182">int</span><span class="op" id="7417185">,</span>&nbsp;<span class="op" id="7417187">[</span><span class="op" id="7417188">]</span><span class="builtintype" id="7417189">int</span><span class="op" id="7417192">)</span>&nbsp;<span class="op" id="7417194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7417197">finder</span>&nbsp;<span class="op" id="7417204">:=</span>&nbsp;<span class="ident" id="7417207">makeStringFinder</span><span class="op" id="7417223">(</span><span class="ident" id="7417224">pattern</span><span class="op" id="7417231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7417234">return</span>&nbsp;<span class="ident" id="7417241">finder</span><span class="op" id="7417247">.</span><span class="ident" id="7417248">badCharSkip</span><span class="op" id="7417259">[</span><span class="op" id="7417260">:</span><span class="op" id="7417261">]</span><span class="op" id="7417262">,</span>&nbsp;<span class="ident" id="7417264">finder</span><span class="op" id="7417270">.</span><span class="ident" id="7417271">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7417286">}</span>
</div>
</body>
</html>
