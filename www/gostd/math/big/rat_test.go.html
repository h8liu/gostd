<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7831321">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7831376">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7831430">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7831481">package</span>&nbsp;<span class="ident" id="7831489">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7831494">import</span>&nbsp;<span class="op" id="7831501">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831504">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831513">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831529">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831546">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831562">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831569">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831577">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831588">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7831599">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7831609">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7831612">func</span>&nbsp;<span class="ident" id="7831617">TestZeroRat</span><span class="op" id="7831628">(</span><span class="ident" id="7831629">t</span>&nbsp;<span class="op" id="7831631">*</span><span class="ident" id="7831632">testing</span><span class="op" id="7831639">.</span><span class="ident" id="7831640">T</span><span class="op" id="7831641">)</span>&nbsp;<span class="op" id="7831643">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7831646">var</span>&nbsp;<span class="ident" id="7831650">x</span><span class="op" id="7831651">,</span>&nbsp;<span class="ident" id="7831653">y</span><span class="op" id="7831654">,</span>&nbsp;<span class="ident" id="7831656">z</span>&nbsp;<span class="ident" id="7831658">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831663">y</span><span class="op" id="7831664">.</span><span class="ident" id="7831665">SetFrac64</span><span class="op" id="7831674">(</span><span class="num" id="7831675">0</span><span class="op" id="7831676">,</span>&nbsp;<span class="num" id="7831678">42</span><span class="op" id="7831680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7831684">if</span>&nbsp;<span class="ident" id="7831687">x</span><span class="op" id="7831688">.</span><span class="ident" id="7831689">Cmp</span><span class="op" id="7831692">(</span><span class="op" id="7831693">&amp;</span><span class="ident" id="7831694">y</span><span class="op" id="7831695">)</span>&nbsp;<span class="op" id="7831697">!=</span>&nbsp;<span class="num" id="7831700">0</span>&nbsp;<span class="op" id="7831702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831706">t</span><span class="op" id="7831707">.</span><span class="ident" id="7831708">Errorf</span><span class="op" id="7831714">(</span><span class="string" id="7831715">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7831754">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7831757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7831761">if</span>&nbsp;<span class="ident" id="7831764">s</span>&nbsp;<span class="op" id="7831766">:=</span>&nbsp;<span class="ident" id="7831769">x</span><span class="op" id="7831770">.</span><span class="ident" id="7831771">String</span><span class="op" id="7831777">(</span><span class="op" id="7831778">)</span><span class="op" id="7831779">;</span>&nbsp;<span class="ident" id="7831781">s</span>&nbsp;<span class="op" id="7831783">!=</span>&nbsp;<span class="string" id="7831786">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7831792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831796">t</span><span class="op" id="7831797">.</span><span class="ident" id="7831798">Errorf</span><span class="op" id="7831804">(</span><span class="string" id="7831805">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7831827">,</span>&nbsp;<span class="ident" id="7831829">s</span><span class="op" id="7831830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7831833">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7831837">if</span>&nbsp;<span class="ident" id="7831840">s</span>&nbsp;<span class="op" id="7831842">:=</span>&nbsp;<span class="ident" id="7831845">x</span><span class="op" id="7831846">.</span><span class="ident" id="7831847">RatString</span><span class="op" id="7831856">(</span><span class="op" id="7831857">)</span><span class="op" id="7831858">;</span>&nbsp;<span class="ident" id="7831860">s</span>&nbsp;<span class="op" id="7831862">!=</span>&nbsp;<span class="string" id="7831865">&#34;0&#34;</span>&nbsp;<span class="op" id="7831869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831873">t</span><span class="op" id="7831874">.</span><span class="ident" id="7831875">Errorf</span><span class="op" id="7831881">(</span><span class="string" id="7831882">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7831902">,</span>&nbsp;<span class="ident" id="7831904">s</span><span class="op" id="7831905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7831908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831912">z</span><span class="op" id="7831913">.</span><span class="ident" id="7831914">Add</span><span class="op" id="7831917">(</span><span class="op" id="7831918">&amp;</span><span class="ident" id="7831919">x</span><span class="op" id="7831920">,</span>&nbsp;<span class="op" id="7831922">&amp;</span><span class="ident" id="7831923">y</span><span class="op" id="7831924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7831927">if</span>&nbsp;<span class="ident" id="7831930">s</span>&nbsp;<span class="op" id="7831932">:=</span>&nbsp;<span class="ident" id="7831935">z</span><span class="op" id="7831936">.</span><span class="ident" id="7831937">RatString</span><span class="op" id="7831946">(</span><span class="op" id="7831947">)</span><span class="op" id="7831948">;</span>&nbsp;<span class="ident" id="7831950">s</span>&nbsp;<span class="op" id="7831952">!=</span>&nbsp;<span class="string" id="7831955">&#34;0&#34;</span>&nbsp;<span class="op" id="7831959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7831963">t</span><span class="op" id="7831964">.</span><span class="ident" id="7831965">Errorf</span><span class="op" id="7831971">(</span><span class="string" id="7831972">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7831994">,</span>&nbsp;<span class="ident" id="7831996">s</span><span class="op" id="7831997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832004">z</span><span class="op" id="7832005">.</span><span class="ident" id="7832006">Sub</span><span class="op" id="7832009">(</span><span class="op" id="7832010">&amp;</span><span class="ident" id="7832011">x</span><span class="op" id="7832012">,</span>&nbsp;<span class="op" id="7832014">&amp;</span><span class="ident" id="7832015">y</span><span class="op" id="7832016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832019">if</span>&nbsp;<span class="ident" id="7832022">s</span>&nbsp;<span class="op" id="7832024">:=</span>&nbsp;<span class="ident" id="7832027">z</span><span class="op" id="7832028">.</span><span class="ident" id="7832029">RatString</span><span class="op" id="7832038">(</span><span class="op" id="7832039">)</span><span class="op" id="7832040">;</span>&nbsp;<span class="ident" id="7832042">s</span>&nbsp;<span class="op" id="7832044">!=</span>&nbsp;<span class="string" id="7832047">&#34;0&#34;</span>&nbsp;<span class="op" id="7832051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832055">t</span><span class="op" id="7832056">.</span><span class="ident" id="7832057">Errorf</span><span class="op" id="7832063">(</span><span class="string" id="7832064">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832086">,</span>&nbsp;<span class="ident" id="7832088">s</span><span class="op" id="7832089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832096">z</span><span class="op" id="7832097">.</span><span class="ident" id="7832098">Mul</span><span class="op" id="7832101">(</span><span class="op" id="7832102">&amp;</span><span class="ident" id="7832103">x</span><span class="op" id="7832104">,</span>&nbsp;<span class="op" id="7832106">&amp;</span><span class="ident" id="7832107">y</span><span class="op" id="7832108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832111">if</span>&nbsp;<span class="ident" id="7832114">s</span>&nbsp;<span class="op" id="7832116">:=</span>&nbsp;<span class="ident" id="7832119">z</span><span class="op" id="7832120">.</span><span class="ident" id="7832121">RatString</span><span class="op" id="7832130">(</span><span class="op" id="7832131">)</span><span class="op" id="7832132">;</span>&nbsp;<span class="ident" id="7832134">s</span>&nbsp;<span class="op" id="7832136">!=</span>&nbsp;<span class="string" id="7832139">&#34;0&#34;</span>&nbsp;<span class="op" id="7832143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832147">t</span><span class="op" id="7832148">.</span><span class="ident" id="7832149">Errorf</span><span class="op" id="7832155">(</span><span class="string" id="7832156">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832178">,</span>&nbsp;<span class="ident" id="7832180">s</span><span class="op" id="7832181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7832188">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832219">defer</span>&nbsp;<span class="keyword" id="7832225">func</span><span class="op" id="7832229">(</span><span class="op" id="7832230">)</span>&nbsp;<span class="op" id="7832232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832236">if</span>&nbsp;<span class="ident" id="7832239">s</span>&nbsp;<span class="op" id="7832241">:=</span>&nbsp;<span class="builtinfunc" id="7832244">recover</span><span class="op" id="7832251">(</span><span class="op" id="7832252">)</span><span class="op" id="7832253">;</span>&nbsp;<span class="ident" id="7832255">s</span>&nbsp;<span class="op" id="7832257">==</span>&nbsp;<span class="ident" id="7832260">nil</span>&nbsp;<span class="op" id="7832264">||</span>&nbsp;<span class="ident" id="7832267">s</span><span class="op" id="7832268">.</span><span class="op" id="7832269">(</span><span class="builtintype" id="7832270">string</span><span class="op" id="7832276">)</span>&nbsp;<span class="op" id="7832278">!=</span>&nbsp;<span class="string" id="7832281">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7832300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7832305">panic</span><span class="op" id="7832310">(</span><span class="ident" id="7832311">s</span><span class="op" id="7832312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832316">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832319">}</span><span class="op" id="7832320">(</span><span class="op" id="7832321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832324">z</span><span class="op" id="7832325">.</span><span class="ident" id="7832326">Quo</span><span class="op" id="7832329">(</span><span class="op" id="7832330">&amp;</span><span class="ident" id="7832331">x</span><span class="op" id="7832332">,</span>&nbsp;<span class="op" id="7832334">&amp;</span><span class="ident" id="7832335">y</span><span class="op" id="7832336">)</span><br>
<span class="lineno"></span><span class="op" id="7832338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7832341">var</span>&nbsp;<span class="ident" id="7832345">setStringTests</span>&nbsp;<span class="op" id="7832360">=</span>&nbsp;<span class="op" id="7832362">[</span><span class="op" id="7832363">]</span><span class="keyword" id="7832364">struct</span>&nbsp;<span class="op" id="7832371">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832374">in</span><span class="op" id="7832376">,</span>&nbsp;<span class="ident" id="7832378">out</span>&nbsp;<span class="builtintype" id="7832382">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832390">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7832398">bool</span><br>
<span class="lineno"></span><span class="op" id="7832403">}</span><span class="op" id="7832404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832407">{</span><span class="string" id="7832408">&#34;0&#34;</span><span class="op" id="7832411">,</span>&nbsp;<span class="string" id="7832413">&#34;0&#34;</span><span class="op" id="7832416">,</span>&nbsp;<span class="builtintype" id="7832418">true</span><span class="op" id="7832422">}</span><span class="op" id="7832423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832426">{</span><span class="string" id="7832427">&#34;-0&#34;</span><span class="op" id="7832431">,</span>&nbsp;<span class="string" id="7832433">&#34;0&#34;</span><span class="op" id="7832436">,</span>&nbsp;<span class="builtintype" id="7832438">true</span><span class="op" id="7832442">}</span><span class="op" id="7832443">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832446">{</span><span class="string" id="7832447">&#34;1&#34;</span><span class="op" id="7832450">,</span>&nbsp;<span class="string" id="7832452">&#34;1&#34;</span><span class="op" id="7832455">,</span>&nbsp;<span class="builtintype" id="7832457">true</span><span class="op" id="7832461">}</span><span class="op" id="7832462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832465">{</span><span class="string" id="7832466">&#34;-1&#34;</span><span class="op" id="7832470">,</span>&nbsp;<span class="string" id="7832472">&#34;-1&#34;</span><span class="op" id="7832476">,</span>&nbsp;<span class="builtintype" id="7832478">true</span><span class="op" id="7832482">}</span><span class="op" id="7832483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832486">{</span><span class="string" id="7832487">&#34;1.&#34;</span><span class="op" id="7832491">,</span>&nbsp;<span class="string" id="7832493">&#34;1&#34;</span><span class="op" id="7832496">,</span>&nbsp;<span class="builtintype" id="7832498">true</span><span class="op" id="7832502">}</span><span class="op" id="7832503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832506">{</span><span class="string" id="7832507">&#34;1e0&#34;</span><span class="op" id="7832512">,</span>&nbsp;<span class="string" id="7832514">&#34;1&#34;</span><span class="op" id="7832517">,</span>&nbsp;<span class="builtintype" id="7832519">true</span><span class="op" id="7832523">}</span><span class="op" id="7832524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832527">{</span><span class="string" id="7832528">&#34;1.e1&#34;</span><span class="op" id="7832534">,</span>&nbsp;<span class="string" id="7832536">&#34;10&#34;</span><span class="op" id="7832540">,</span>&nbsp;<span class="builtintype" id="7832542">true</span><span class="op" id="7832546">}</span><span class="op" id="7832547">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832550">{</span><span class="ident" id="7832551">in</span><span class="op" id="7832553">:</span>&nbsp;<span class="string" id="7832555">&#34;1e&#34;</span><span class="op" id="7832559">,</span>&nbsp;<span class="ident" id="7832561">ok</span><span class="op" id="7832563">:</span>&nbsp;<span class="builtintype" id="7832565">false</span><span class="op" id="7832570">}</span><span class="op" id="7832571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832574">{</span><span class="ident" id="7832575">in</span><span class="op" id="7832577">:</span>&nbsp;<span class="string" id="7832579">&#34;1.e&#34;</span><span class="op" id="7832584">,</span>&nbsp;<span class="ident" id="7832586">ok</span><span class="op" id="7832588">:</span>&nbsp;<span class="builtintype" id="7832590">false</span><span class="op" id="7832595">}</span><span class="op" id="7832596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832599">{</span><span class="ident" id="7832600">in</span><span class="op" id="7832602">:</span>&nbsp;<span class="string" id="7832604">&#34;1e+14e-5&#34;</span><span class="op" id="7832614">,</span>&nbsp;<span class="ident" id="7832616">ok</span><span class="op" id="7832618">:</span>&nbsp;<span class="builtintype" id="7832620">false</span><span class="op" id="7832625">}</span><span class="op" id="7832626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832629">{</span><span class="ident" id="7832630">in</span><span class="op" id="7832632">:</span>&nbsp;<span class="string" id="7832634">&#34;1e4.5&#34;</span><span class="op" id="7832641">,</span>&nbsp;<span class="ident" id="7832643">ok</span><span class="op" id="7832645">:</span>&nbsp;<span class="builtintype" id="7832647">false</span><span class="op" id="7832652">}</span><span class="op" id="7832653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832656">{</span><span class="ident" id="7832657">in</span><span class="op" id="7832659">:</span>&nbsp;<span class="string" id="7832661">&#34;r&#34;</span><span class="op" id="7832664">,</span>&nbsp;<span class="ident" id="7832666">ok</span><span class="op" id="7832668">:</span>&nbsp;<span class="builtintype" id="7832670">false</span><span class="op" id="7832675">}</span><span class="op" id="7832676">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832679">{</span><span class="ident" id="7832680">in</span><span class="op" id="7832682">:</span>&nbsp;<span class="string" id="7832684">&#34;a/b&#34;</span><span class="op" id="7832689">,</span>&nbsp;<span class="ident" id="7832691">ok</span><span class="op" id="7832693">:</span>&nbsp;<span class="builtintype" id="7832695">false</span><span class="op" id="7832700">}</span><span class="op" id="7832701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832704">{</span><span class="ident" id="7832705">in</span><span class="op" id="7832707">:</span>&nbsp;<span class="string" id="7832709">&#34;a.b&#34;</span><span class="op" id="7832714">,</span>&nbsp;<span class="ident" id="7832716">ok</span><span class="op" id="7832718">:</span>&nbsp;<span class="builtintype" id="7832720">false</span><span class="op" id="7832725">}</span><span class="op" id="7832726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832729">{</span><span class="string" id="7832730">&#34;-0.1&#34;</span><span class="op" id="7832736">,</span>&nbsp;<span class="string" id="7832738">&#34;-1/10&#34;</span><span class="op" id="7832745">,</span>&nbsp;<span class="builtintype" id="7832747">true</span><span class="op" id="7832751">}</span><span class="op" id="7832752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832755">{</span><span class="string" id="7832756">&#34;-.1&#34;</span><span class="op" id="7832761">,</span>&nbsp;<span class="string" id="7832763">&#34;-1/10&#34;</span><span class="op" id="7832770">,</span>&nbsp;<span class="builtintype" id="7832772">true</span><span class="op" id="7832776">}</span><span class="op" id="7832777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832780">{</span><span class="string" id="7832781">&#34;2/4&#34;</span><span class="op" id="7832786">,</span>&nbsp;<span class="string" id="7832788">&#34;1/2&#34;</span><span class="op" id="7832793">,</span>&nbsp;<span class="builtintype" id="7832795">true</span><span class="op" id="7832799">}</span><span class="op" id="7832800">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832803">{</span><span class="string" id="7832804">&#34;.25&#34;</span><span class="op" id="7832809">,</span>&nbsp;<span class="string" id="7832811">&#34;1/4&#34;</span><span class="op" id="7832816">,</span>&nbsp;<span class="builtintype" id="7832818">true</span><span class="op" id="7832822">}</span><span class="op" id="7832823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832826">{</span><span class="string" id="7832827">&#34;-1/5&#34;</span><span class="op" id="7832833">,</span>&nbsp;<span class="string" id="7832835">&#34;-1/5&#34;</span><span class="op" id="7832841">,</span>&nbsp;<span class="builtintype" id="7832843">true</span><span class="op" id="7832847">}</span><span class="op" id="7832848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832851">{</span><span class="string" id="7832852">&#34;8129567.7690E14&#34;</span><span class="op" id="7832869">,</span>&nbsp;<span class="string" id="7832871">&#34;812956776900000000000&#34;</span><span class="op" id="7832894">,</span>&nbsp;<span class="builtintype" id="7832896">true</span><span class="op" id="7832900">}</span><span class="op" id="7832901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832904">{</span><span class="string" id="7832905">&#34;78189e+4&#34;</span><span class="op" id="7832915">,</span>&nbsp;<span class="string" id="7832917">&#34;781890000&#34;</span><span class="op" id="7832928">,</span>&nbsp;<span class="builtintype" id="7832930">true</span><span class="op" id="7832934">}</span><span class="op" id="7832935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832938">{</span><span class="string" id="7832939">&#34;553019.8935e+8&#34;</span><span class="op" id="7832955">,</span>&nbsp;<span class="string" id="7832957">&#34;55301989350000&#34;</span><span class="op" id="7832973">,</span>&nbsp;<span class="builtintype" id="7832975">true</span><span class="op" id="7832979">}</span><span class="op" id="7832980">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832983">{</span><span class="string" id="7832984">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7833019">,</span>&nbsp;<span class="string" id="7833021">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7833064">,</span>&nbsp;<span class="builtintype" id="7833066">true</span><span class="op" id="7833070">}</span><span class="op" id="7833071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833074">{</span><span class="string" id="7833075">&#34;9877861857500000E-7&#34;</span><span class="op" id="7833096">,</span>&nbsp;<span class="string" id="7833098">&#34;3951144743/4&#34;</span><span class="op" id="7833112">,</span>&nbsp;<span class="builtintype" id="7833114">true</span><span class="op" id="7833118">}</span><span class="op" id="7833119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833122">{</span><span class="string" id="7833123">&#34;2169378.417e-3&#34;</span><span class="op" id="7833139">,</span>&nbsp;<span class="string" id="7833141">&#34;2169378417/1000000&#34;</span><span class="op" id="7833161">,</span>&nbsp;<span class="builtintype" id="7833163">true</span><span class="op" id="7833167">}</span><span class="op" id="7833168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833171">{</span><span class="string" id="7833172">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7833210">,</span>&nbsp;<span class="string" id="7833212">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7833250">,</span>&nbsp;<span class="builtintype" id="7833252">true</span><span class="op" id="7833256">}</span><span class="op" id="7833257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833260">{</span><span class="string" id="7833261">&#34;53/70893980658822810696&#34;</span><span class="op" id="7833286">,</span>&nbsp;<span class="string" id="7833288">&#34;53/70893980658822810696&#34;</span><span class="op" id="7833313">,</span>&nbsp;<span class="builtintype" id="7833315">true</span><span class="op" id="7833319">}</span><span class="op" id="7833320">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833323">{</span><span class="string" id="7833324">&#34;106/141787961317645621392&#34;</span><span class="op" id="7833351">,</span>&nbsp;<span class="string" id="7833353">&#34;53/70893980658822810696&#34;</span><span class="op" id="7833378">,</span>&nbsp;<span class="builtintype" id="7833380">true</span><span class="op" id="7833384">}</span><span class="op" id="7833385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833388">{</span><span class="string" id="7833389">&#34;204211327800791583.81095&#34;</span><span class="op" id="7833415">,</span>&nbsp;<span class="string" id="7833417">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7833447">,</span>&nbsp;<span class="builtintype" id="7833449">true</span><span class="op" id="7833453">}</span><span class="op" id="7833454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833457">{</span><span class="ident" id="7833458">in</span><span class="op" id="7833460">:</span>&nbsp;<span class="string" id="7833462">&#34;1/0&#34;</span><span class="op" id="7833467">,</span>&nbsp;<span class="ident" id="7833469">ok</span><span class="op" id="7833471">:</span>&nbsp;<span class="builtintype" id="7833473">false</span><span class="op" id="7833478">}</span><span class="op" id="7833479">,</span><br>
<span class="lineno"></span><span class="op" id="7833481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7833484">func</span>&nbsp;<span class="ident" id="7833489">TestRatSetString</span><span class="op" id="7833505">(</span><span class="ident" id="7833506">t</span>&nbsp;<span class="op" id="7833508">*</span><span class="ident" id="7833509">testing</span><span class="op" id="7833516">.</span><span class="ident" id="7833517">T</span><span class="op" id="7833518">)</span>&nbsp;<span class="op" id="7833520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833523">for</span>&nbsp;<span class="ident" id="7833527">i</span><span class="op" id="7833528">,</span>&nbsp;<span class="ident" id="7833530">test</span>&nbsp;<span class="op" id="7833535">:=</span>&nbsp;<span class="keyword" id="7833538">range</span>&nbsp;<span class="ident" id="7833544">setStringTests</span>&nbsp;<span class="op" id="7833559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833563">x</span><span class="op" id="7833564">,</span>&nbsp;<span class="ident" id="7833566">ok</span>&nbsp;<span class="op" id="7833569">:=</span>&nbsp;<span class="builtinfunc" id="7833572">new</span><span class="op" id="7833575">(</span><span class="ident" id="7833576">Rat</span><span class="op" id="7833579">)</span><span class="op" id="7833580">.</span><span class="ident" id="7833581">SetString</span><span class="op" id="7833590">(</span><span class="ident" id="7833591">test</span><span class="op" id="7833595">.</span><span class="ident" id="7833596">in</span><span class="op" id="7833598">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833603">if</span>&nbsp;<span class="ident" id="7833606">ok</span>&nbsp;<span class="op" id="7833609">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833614">if</span>&nbsp;<span class="op" id="7833617">!</span><span class="ident" id="7833618">test</span><span class="op" id="7833622">.</span><span class="ident" id="7833623">ok</span>&nbsp;<span class="op" id="7833626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833632">t</span><span class="op" id="7833633">.</span><span class="ident" id="7833634">Errorf</span><span class="op" id="7833640">(</span><span class="string" id="7833641">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7833677">,</span>&nbsp;<span class="ident" id="7833679">i</span><span class="op" id="7833680">,</span>&nbsp;<span class="ident" id="7833682">test</span><span class="op" id="7833686">.</span><span class="ident" id="7833687">in</span><span class="op" id="7833689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833694">}</span>&nbsp;<span class="keyword" id="7833696">else</span>&nbsp;<span class="keyword" id="7833701">if</span>&nbsp;<span class="ident" id="7833704">x</span><span class="op" id="7833705">.</span><span class="ident" id="7833706">RatString</span><span class="op" id="7833715">(</span><span class="op" id="7833716">)</span>&nbsp;<span class="op" id="7833718">!=</span>&nbsp;<span class="ident" id="7833721">test</span><span class="op" id="7833725">.</span><span class="ident" id="7833726">out</span>&nbsp;<span class="op" id="7833730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833736">t</span><span class="op" id="7833737">.</span><span class="ident" id="7833738">Errorf</span><span class="op" id="7833744">(</span><span class="string" id="7833745">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7833779">,</span>&nbsp;<span class="ident" id="7833781">i</span><span class="op" id="7833782">,</span>&nbsp;<span class="ident" id="7833784">test</span><span class="op" id="7833788">.</span><span class="ident" id="7833789">in</span><span class="op" id="7833791">,</span>&nbsp;<span class="ident" id="7833793">x</span><span class="op" id="7833794">.</span><span class="ident" id="7833795">RatString</span><span class="op" id="7833804">(</span><span class="op" id="7833805">)</span><span class="op" id="7833806">,</span>&nbsp;<span class="ident" id="7833808">test</span><span class="op" id="7833812">.</span><span class="ident" id="7833813">out</span><span class="op" id="7833816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833821">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833825">}</span>&nbsp;<span class="keyword" id="7833827">else</span>&nbsp;<span class="keyword" id="7833832">if</span>&nbsp;<span class="ident" id="7833835">x</span>&nbsp;<span class="op" id="7833837">!=</span>&nbsp;<span class="ident" id="7833840">nil</span>&nbsp;<span class="op" id="7833844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833849">t</span><span class="op" id="7833850">.</span><span class="ident" id="7833851">Errorf</span><span class="op" id="7833857">(</span><span class="string" id="7833858">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7833893">,</span>&nbsp;<span class="ident" id="7833895">i</span><span class="op" id="7833896">,</span>&nbsp;<span class="ident" id="7833898">test</span><span class="op" id="7833902">.</span><span class="ident" id="7833903">in</span><span class="op" id="7833905">,</span>&nbsp;<span class="ident" id="7833907">x</span><span class="op" id="7833908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833915">}</span><br>
<span class="lineno"></span><span class="op" id="7833917">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7833920">func</span>&nbsp;<span class="ident" id="7833925">TestRatScan</span><span class="op" id="7833936">(</span><span class="ident" id="7833937">t</span>&nbsp;<span class="op" id="7833939">*</span><span class="ident" id="7833940">testing</span><span class="op" id="7833947">.</span><span class="ident" id="7833948">T</span><span class="op" id="7833949">)</span>&nbsp;<span class="op" id="7833951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833954">var</span>&nbsp;<span class="ident" id="7833958">buf</span>&nbsp;<span class="ident" id="7833962">bytes</span><span class="op" id="7833967">.</span><span class="ident" id="7833968">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833976">for</span>&nbsp;<span class="ident" id="7833980">i</span><span class="op" id="7833981">,</span>&nbsp;<span class="ident" id="7833983">test</span>&nbsp;<span class="op" id="7833988">:=</span>&nbsp;<span class="keyword" id="7833991">range</span>&nbsp;<span class="ident" id="7833997">setStringTests</span>&nbsp;<span class="op" id="7834012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834016">x</span>&nbsp;<span class="op" id="7834018">:=</span>&nbsp;<span class="builtinfunc" id="7834021">new</span><span class="op" id="7834024">(</span><span class="ident" id="7834025">Rat</span><span class="op" id="7834028">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834032">buf</span><span class="op" id="7834035">.</span><span class="ident" id="7834036">Reset</span><span class="op" id="7834041">(</span><span class="op" id="7834042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834046">buf</span><span class="op" id="7834049">.</span><span class="ident" id="7834050">WriteString</span><span class="op" id="7834061">(</span><span class="ident" id="7834062">test</span><span class="op" id="7834066">.</span><span class="ident" id="7834067">in</span><span class="op" id="7834069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834074">_</span><span class="op" id="7834075">,</span>&nbsp;<span class="ident" id="7834077">err</span>&nbsp;<span class="op" id="7834081">:=</span>&nbsp;<span class="ident" id="7834084">fmt</span><span class="op" id="7834087">.</span><span class="ident" id="7834088">Fscanf</span><span class="op" id="7834094">(</span><span class="op" id="7834095">&amp;</span><span class="ident" id="7834096">buf</span><span class="op" id="7834099">,</span>&nbsp;<span class="string" id="7834101">&#34;%v&#34;</span><span class="op" id="7834105">,</span>&nbsp;<span class="ident" id="7834107">x</span><span class="op" id="7834108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834112">if</span>&nbsp;<span class="ident" id="7834115">err</span>&nbsp;<span class="op" id="7834119">==</span>&nbsp;<span class="ident" id="7834122">nil</span>&nbsp;<span class="op" id="7834126">!=</span>&nbsp;<span class="ident" id="7834129">test</span><span class="op" id="7834133">.</span><span class="ident" id="7834134">ok</span>&nbsp;<span class="op" id="7834137">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834142">if</span>&nbsp;<span class="ident" id="7834145">test</span><span class="op" id="7834149">.</span><span class="ident" id="7834150">ok</span>&nbsp;<span class="op" id="7834153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834159">t</span><span class="op" id="7834160">.</span><span class="ident" id="7834161">Errorf</span><span class="op" id="7834167">(</span><span class="string" id="7834168">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7834183">,</span>&nbsp;<span class="ident" id="7834185">i</span><span class="op" id="7834186">,</span>&nbsp;<span class="ident" id="7834188">err</span><span class="op" id="7834191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834196">}</span>&nbsp;<span class="keyword" id="7834198">else</span>&nbsp;<span class="op" id="7834203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834209">t</span><span class="op" id="7834210">.</span><span class="ident" id="7834211">Errorf</span><span class="op" id="7834217">(</span><span class="string" id="7834218">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7834238">,</span>&nbsp;<span class="ident" id="7834240">i</span><span class="op" id="7834241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834246">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834251">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834266">if</span>&nbsp;<span class="ident" id="7834269">err</span>&nbsp;<span class="op" id="7834273">==</span>&nbsp;<span class="ident" id="7834276">nil</span>&nbsp;<span class="op" id="7834280">&amp;&amp;</span>&nbsp;<span class="ident" id="7834283">x</span><span class="op" id="7834284">.</span><span class="ident" id="7834285">RatString</span><span class="op" id="7834294">(</span><span class="op" id="7834295">)</span>&nbsp;<span class="op" id="7834297">!=</span>&nbsp;<span class="ident" id="7834300">test</span><span class="op" id="7834304">.</span><span class="ident" id="7834305">out</span>&nbsp;<span class="op" id="7834309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834314">t</span><span class="op" id="7834315">.</span><span class="ident" id="7834316">Errorf</span><span class="op" id="7834322">(</span><span class="string" id="7834323">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7834343">,</span>&nbsp;<span class="ident" id="7834345">i</span><span class="op" id="7834346">,</span>&nbsp;<span class="ident" id="7834348">x</span><span class="op" id="7834349">.</span><span class="ident" id="7834350">RatString</span><span class="op" id="7834359">(</span><span class="op" id="7834360">)</span><span class="op" id="7834361">,</span>&nbsp;<span class="ident" id="7834363">test</span><span class="op" id="7834367">.</span><span class="ident" id="7834368">out</span><span class="op" id="7834371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834375">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834378">}</span><br>
<span class="lineno"></span><span class="op" id="7834380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7834383">var</span>&nbsp;<span class="ident" id="7834387">floatStringTests</span>&nbsp;<span class="op" id="7834404">=</span>&nbsp;<span class="op" id="7834406">[</span><span class="op" id="7834407">]</span><span class="keyword" id="7834408">struct</span>&nbsp;<span class="op" id="7834415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834418">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7834423">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834431">prec</span>&nbsp;<span class="builtintype" id="7834436">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834441">out</span>&nbsp;&nbsp;<span class="builtintype" id="7834446">string</span><br>
<span class="lineno"></span><span class="op" id="7834453">}</span><span class="op" id="7834454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834457">{</span><span class="string" id="7834458">&#34;0&#34;</span><span class="op" id="7834461">,</span>&nbsp;<span class="num" id="7834463">0</span><span class="op" id="7834464">,</span>&nbsp;<span class="string" id="7834466">&#34;0&#34;</span><span class="op" id="7834469">}</span><span class="op" id="7834470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834473">{</span><span class="string" id="7834474">&#34;0&#34;</span><span class="op" id="7834477">,</span>&nbsp;<span class="num" id="7834479">4</span><span class="op" id="7834480">,</span>&nbsp;<span class="string" id="7834482">&#34;0.0000&#34;</span><span class="op" id="7834490">}</span><span class="op" id="7834491">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834494">{</span><span class="string" id="7834495">&#34;1&#34;</span><span class="op" id="7834498">,</span>&nbsp;<span class="num" id="7834500">0</span><span class="op" id="7834501">,</span>&nbsp;<span class="string" id="7834503">&#34;1&#34;</span><span class="op" id="7834506">}</span><span class="op" id="7834507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834510">{</span><span class="string" id="7834511">&#34;1&#34;</span><span class="op" id="7834514">,</span>&nbsp;<span class="num" id="7834516">2</span><span class="op" id="7834517">,</span>&nbsp;<span class="string" id="7834519">&#34;1.00&#34;</span><span class="op" id="7834525">}</span><span class="op" id="7834526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834529">{</span><span class="string" id="7834530">&#34;-1&#34;</span><span class="op" id="7834534">,</span>&nbsp;<span class="num" id="7834536">0</span><span class="op" id="7834537">,</span>&nbsp;<span class="string" id="7834539">&#34;-1&#34;</span><span class="op" id="7834543">}</span><span class="op" id="7834544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834547">{</span><span class="string" id="7834548">&#34;.25&#34;</span><span class="op" id="7834553">,</span>&nbsp;<span class="num" id="7834555">2</span><span class="op" id="7834556">,</span>&nbsp;<span class="string" id="7834558">&#34;0.25&#34;</span><span class="op" id="7834564">}</span><span class="op" id="7834565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834568">{</span><span class="string" id="7834569">&#34;.25&#34;</span><span class="op" id="7834574">,</span>&nbsp;<span class="num" id="7834576">1</span><span class="op" id="7834577">,</span>&nbsp;<span class="string" id="7834579">&#34;0.3&#34;</span><span class="op" id="7834584">}</span><span class="op" id="7834585">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834588">{</span><span class="string" id="7834589">&#34;.25&#34;</span><span class="op" id="7834594">,</span>&nbsp;<span class="num" id="7834596">3</span><span class="op" id="7834597">,</span>&nbsp;<span class="string" id="7834599">&#34;0.250&#34;</span><span class="op" id="7834606">}</span><span class="op" id="7834607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834610">{</span><span class="string" id="7834611">&#34;-1/3&#34;</span><span class="op" id="7834617">,</span>&nbsp;<span class="num" id="7834619">3</span><span class="op" id="7834620">,</span>&nbsp;<span class="string" id="7834622">&#34;-0.333&#34;</span><span class="op" id="7834630">}</span><span class="op" id="7834631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834634">{</span><span class="string" id="7834635">&#34;-2/3&#34;</span><span class="op" id="7834641">,</span>&nbsp;<span class="num" id="7834643">4</span><span class="op" id="7834644">,</span>&nbsp;<span class="string" id="7834646">&#34;-0.6667&#34;</span><span class="op" id="7834655">}</span><span class="op" id="7834656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834659">{</span><span class="string" id="7834660">&#34;0.96&#34;</span><span class="op" id="7834666">,</span>&nbsp;<span class="num" id="7834668">1</span><span class="op" id="7834669">,</span>&nbsp;<span class="string" id="7834671">&#34;1.0&#34;</span><span class="op" id="7834676">}</span><span class="op" id="7834677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834680">{</span><span class="string" id="7834681">&#34;0.999&#34;</span><span class="op" id="7834688">,</span>&nbsp;<span class="num" id="7834690">2</span><span class="op" id="7834691">,</span>&nbsp;<span class="string" id="7834693">&#34;1.00&#34;</span><span class="op" id="7834699">}</span><span class="op" id="7834700">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834703">{</span><span class="string" id="7834704">&#34;0.9&#34;</span><span class="op" id="7834709">,</span>&nbsp;<span class="num" id="7834711">0</span><span class="op" id="7834712">,</span>&nbsp;<span class="string" id="7834714">&#34;1&#34;</span><span class="op" id="7834717">}</span><span class="op" id="7834718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834721">{</span><span class="string" id="7834722">&#34;.25&#34;</span><span class="op" id="7834727">,</span>&nbsp;<span class="op" id="7834729">-</span><span class="num" id="7834730">1</span><span class="op" id="7834731">,</span>&nbsp;<span class="string" id="7834733">&#34;0&#34;</span><span class="op" id="7834736">}</span><span class="op" id="7834737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834740">{</span><span class="string" id="7834741">&#34;.55&#34;</span><span class="op" id="7834746">,</span>&nbsp;<span class="op" id="7834748">-</span><span class="num" id="7834749">1</span><span class="op" id="7834750">,</span>&nbsp;<span class="string" id="7834752">&#34;1&#34;</span><span class="op" id="7834755">}</span><span class="op" id="7834756">,</span><br>
<span class="lineno"></span><span class="op" id="7834758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7834761">func</span>&nbsp;<span class="ident" id="7834766">TestFloatString</span><span class="op" id="7834781">(</span><span class="ident" id="7834782">t</span>&nbsp;<span class="op" id="7834784">*</span><span class="ident" id="7834785">testing</span><span class="op" id="7834792">.</span><span class="ident" id="7834793">T</span><span class="op" id="7834794">)</span>&nbsp;<span class="op" id="7834796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834799">for</span>&nbsp;<span class="ident" id="7834803">i</span><span class="op" id="7834804">,</span>&nbsp;<span class="ident" id="7834806">test</span>&nbsp;<span class="op" id="7834811">:=</span>&nbsp;<span class="keyword" id="7834814">range</span>&nbsp;<span class="ident" id="7834820">floatStringTests</span>&nbsp;<span class="op" id="7834837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834841">x</span><span class="op" id="7834842">,</span>&nbsp;<span class="ident" id="7834844">_</span>&nbsp;<span class="op" id="7834846">:=</span>&nbsp;<span class="builtinfunc" id="7834849">new</span><span class="op" id="7834852">(</span><span class="ident" id="7834853">Rat</span><span class="op" id="7834856">)</span><span class="op" id="7834857">.</span><span class="ident" id="7834858">SetString</span><span class="op" id="7834867">(</span><span class="ident" id="7834868">test</span><span class="op" id="7834872">.</span><span class="ident" id="7834873">in</span><span class="op" id="7834875">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834880">if</span>&nbsp;<span class="ident" id="7834883">x</span><span class="op" id="7834884">.</span><span class="ident" id="7834885">FloatString</span><span class="op" id="7834896">(</span><span class="ident" id="7834897">test</span><span class="op" id="7834901">.</span><span class="ident" id="7834902">prec</span><span class="op" id="7834906">)</span>&nbsp;<span class="op" id="7834908">!=</span>&nbsp;<span class="ident" id="7834911">test</span><span class="op" id="7834915">.</span><span class="ident" id="7834916">out</span>&nbsp;<span class="op" id="7834920">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834925">t</span><span class="op" id="7834926">.</span><span class="ident" id="7834927">Errorf</span><span class="op" id="7834933">(</span><span class="string" id="7834934">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7834954">,</span>&nbsp;<span class="ident" id="7834956">i</span><span class="op" id="7834957">,</span>&nbsp;<span class="ident" id="7834959">x</span><span class="op" id="7834960">.</span><span class="ident" id="7834961">FloatString</span><span class="op" id="7834972">(</span><span class="ident" id="7834973">test</span><span class="op" id="7834977">.</span><span class="ident" id="7834978">prec</span><span class="op" id="7834982">)</span><span class="op" id="7834983">,</span>&nbsp;<span class="ident" id="7834985">test</span><span class="op" id="7834989">.</span><span class="ident" id="7834990">out</span><span class="op" id="7834993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835000">}</span><br>
<span class="lineno"></span><span class="op" id="7835002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7835005">func</span>&nbsp;<span class="ident" id="7835010">TestRatSign</span><span class="op" id="7835021">(</span><span class="ident" id="7835022">t</span>&nbsp;<span class="op" id="7835024">*</span><span class="ident" id="7835025">testing</span><span class="op" id="7835032">.</span><span class="ident" id="7835033">T</span><span class="op" id="7835034">)</span>&nbsp;<span class="op" id="7835036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835039">zero</span>&nbsp;<span class="op" id="7835044">:=</span>&nbsp;<span class="ident" id="7835047">NewRat</span><span class="op" id="7835053">(</span><span class="num" id="7835054">0</span><span class="op" id="7835055">,</span>&nbsp;<span class="num" id="7835057">1</span><span class="op" id="7835058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835061">for</span>&nbsp;<span class="ident" id="7835065">_</span><span class="op" id="7835066">,</span>&nbsp;<span class="ident" id="7835068">a</span>&nbsp;<span class="op" id="7835070">:=</span>&nbsp;<span class="keyword" id="7835073">range</span>&nbsp;<span class="ident" id="7835079">setStringTests</span>&nbsp;<span class="op" id="7835094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835098">x</span><span class="op" id="7835099">,</span>&nbsp;<span class="ident" id="7835101">ok</span>&nbsp;<span class="op" id="7835104">:=</span>&nbsp;<span class="builtinfunc" id="7835107">new</span><span class="op" id="7835110">(</span><span class="ident" id="7835111">Rat</span><span class="op" id="7835114">)</span><span class="op" id="7835115">.</span><span class="ident" id="7835116">SetString</span><span class="op" id="7835125">(</span><span class="ident" id="7835126">a</span><span class="op" id="7835127">.</span><span class="ident" id="7835128">in</span><span class="op" id="7835130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835134">if</span>&nbsp;<span class="op" id="7835137">!</span><span class="ident" id="7835138">ok</span>&nbsp;<span class="op" id="7835141">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835146">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835161">s</span>&nbsp;<span class="op" id="7835163">:=</span>&nbsp;<span class="ident" id="7835166">x</span><span class="op" id="7835167">.</span><span class="ident" id="7835168">Sign</span><span class="op" id="7835172">(</span><span class="op" id="7835173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835177">e</span>&nbsp;<span class="op" id="7835179">:=</span>&nbsp;<span class="ident" id="7835182">x</span><span class="op" id="7835183">.</span><span class="ident" id="7835184">Cmp</span><span class="op" id="7835187">(</span><span class="ident" id="7835188">zero</span><span class="op" id="7835192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835196">if</span>&nbsp;<span class="ident" id="7835199">s</span>&nbsp;<span class="op" id="7835201">!=</span>&nbsp;<span class="ident" id="7835204">e</span>&nbsp;<span class="op" id="7835206">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835211">t</span><span class="op" id="7835212">.</span><span class="ident" id="7835213">Errorf</span><span class="op" id="7835219">(</span><span class="string" id="7835220">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7835248">,</span>&nbsp;<span class="ident" id="7835250">s</span><span class="op" id="7835251">,</span>&nbsp;<span class="ident" id="7835253">e</span><span class="op" id="7835254">,</span>&nbsp;<span class="op" id="7835256">&amp;</span><span class="ident" id="7835257">x</span><span class="op" id="7835258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835265">}</span><br>
<span class="lineno"></span><span class="op" id="7835267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7835270">var</span>&nbsp;<span class="ident" id="7835274">ratCmpTests</span>&nbsp;<span class="op" id="7835286">=</span>&nbsp;<span class="op" id="7835288">[</span><span class="op" id="7835289">]</span><span class="keyword" id="7835290">struct</span>&nbsp;<span class="op" id="7835297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835300">rat1</span><span class="op" id="7835304">,</span>&nbsp;<span class="ident" id="7835306">rat2</span>&nbsp;<span class="builtintype" id="7835311">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835319">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7835330">int</span><br>
<span class="lineno"></span><span class="op" id="7835334">}</span><span class="op" id="7835335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835338">{</span><span class="string" id="7835339">&#34;0&#34;</span><span class="op" id="7835342">,</span>&nbsp;<span class="string" id="7835344">&#34;0/1&#34;</span><span class="op" id="7835349">,</span>&nbsp;<span class="num" id="7835351">0</span><span class="op" id="7835352">}</span><span class="op" id="7835353">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835356">{</span><span class="string" id="7835357">&#34;1/1&#34;</span><span class="op" id="7835362">,</span>&nbsp;<span class="string" id="7835364">&#34;1&#34;</span><span class="op" id="7835367">,</span>&nbsp;<span class="num" id="7835369">0</span><span class="op" id="7835370">}</span><span class="op" id="7835371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835374">{</span><span class="string" id="7835375">&#34;-1&#34;</span><span class="op" id="7835379">,</span>&nbsp;<span class="string" id="7835381">&#34;-2/2&#34;</span><span class="op" id="7835387">,</span>&nbsp;<span class="num" id="7835389">0</span><span class="op" id="7835390">}</span><span class="op" id="7835391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835394">{</span><span class="string" id="7835395">&#34;1&#34;</span><span class="op" id="7835398">,</span>&nbsp;<span class="string" id="7835400">&#34;0&#34;</span><span class="op" id="7835403">,</span>&nbsp;<span class="num" id="7835405">1</span><span class="op" id="7835406">}</span><span class="op" id="7835407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835410">{</span><span class="string" id="7835411">&#34;0/1&#34;</span><span class="op" id="7835416">,</span>&nbsp;<span class="string" id="7835418">&#34;1/1&#34;</span><span class="op" id="7835423">,</span>&nbsp;<span class="op" id="7835425">-</span><span class="num" id="7835426">1</span><span class="op" id="7835427">}</span><span class="op" id="7835428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835431">{</span><span class="string" id="7835432">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7835459">,</span>&nbsp;<span class="string" id="7835461">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7835488">,</span>&nbsp;<span class="op" id="7835490">-</span><span class="num" id="7835491">1</span><span class="op" id="7835492">}</span><span class="op" id="7835493">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835496">{</span><span class="string" id="7835497">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7835530">,</span>&nbsp;<span class="string" id="7835532">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7835565">,</span>&nbsp;<span class="op" id="7835567">-</span><span class="num" id="7835568">1</span><span class="op" id="7835569">}</span><span class="op" id="7835570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835573">{</span><span class="string" id="7835574">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7835611">,</span>&nbsp;<span class="string" id="7835613">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7835649">,</span>&nbsp;<span class="op" id="7835651">-</span><span class="num" id="7835652">1</span><span class="op" id="7835653">}</span><span class="op" id="7835654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835657">{</span><span class="string" id="7835658">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7835694">,</span>&nbsp;<span class="string" id="7835696">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7835733">,</span>&nbsp;<span class="num" id="7835735">0</span><span class="op" id="7835736">}</span><span class="op" id="7835737">,</span><br>
<span class="lineno"></span><span class="op" id="7835739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7835742">func</span>&nbsp;<span class="ident" id="7835747">TestRatCmp</span><span class="op" id="7835757">(</span><span class="ident" id="7835758">t</span>&nbsp;<span class="op" id="7835760">*</span><span class="ident" id="7835761">testing</span><span class="op" id="7835768">.</span><span class="ident" id="7835769">T</span><span class="op" id="7835770">)</span>&nbsp;<span class="op" id="7835772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835775">for</span>&nbsp;<span class="ident" id="7835779">i</span><span class="op" id="7835780">,</span>&nbsp;<span class="ident" id="7835782">test</span>&nbsp;<span class="op" id="7835787">:=</span>&nbsp;<span class="keyword" id="7835790">range</span>&nbsp;<span class="ident" id="7835796">ratCmpTests</span>&nbsp;<span class="op" id="7835808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835812">x</span><span class="op" id="7835813">,</span>&nbsp;<span class="ident" id="7835815">_</span>&nbsp;<span class="op" id="7835817">:=</span>&nbsp;<span class="builtinfunc" id="7835820">new</span><span class="op" id="7835823">(</span><span class="ident" id="7835824">Rat</span><span class="op" id="7835827">)</span><span class="op" id="7835828">.</span><span class="ident" id="7835829">SetString</span><span class="op" id="7835838">(</span><span class="ident" id="7835839">test</span><span class="op" id="7835843">.</span><span class="ident" id="7835844">rat1</span><span class="op" id="7835848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835852">y</span><span class="op" id="7835853">,</span>&nbsp;<span class="ident" id="7835855">_</span>&nbsp;<span class="op" id="7835857">:=</span>&nbsp;<span class="builtinfunc" id="7835860">new</span><span class="op" id="7835863">(</span><span class="ident" id="7835864">Rat</span><span class="op" id="7835867">)</span><span class="op" id="7835868">.</span><span class="ident" id="7835869">SetString</span><span class="op" id="7835878">(</span><span class="ident" id="7835879">test</span><span class="op" id="7835883">.</span><span class="ident" id="7835884">rat2</span><span class="op" id="7835888">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835893">out</span>&nbsp;<span class="op" id="7835897">:=</span>&nbsp;<span class="ident" id="7835900">x</span><span class="op" id="7835901">.</span><span class="ident" id="7835902">Cmp</span><span class="op" id="7835905">(</span><span class="ident" id="7835906">y</span><span class="op" id="7835907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835911">if</span>&nbsp;<span class="ident" id="7835914">out</span>&nbsp;<span class="op" id="7835918">!=</span>&nbsp;<span class="ident" id="7835921">test</span><span class="op" id="7835925">.</span><span class="ident" id="7835926">out</span>&nbsp;<span class="op" id="7835930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835935">t</span><span class="op" id="7835936">.</span><span class="ident" id="7835937">Errorf</span><span class="op" id="7835943">(</span><span class="string" id="7835944">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7835971">,</span>&nbsp;<span class="ident" id="7835973">i</span><span class="op" id="7835974">,</span>&nbsp;<span class="ident" id="7835976">out</span><span class="op" id="7835979">,</span>&nbsp;<span class="ident" id="7835981">test</span><span class="op" id="7835985">.</span><span class="ident" id="7835986">out</span><span class="op" id="7835989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835996">}</span><br>
<span class="lineno">205</span><span class="op" id="7835998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7836001">func</span>&nbsp;<span class="ident" id="7836006">TestIsInt</span><span class="op" id="7836015">(</span><span class="ident" id="7836016">t</span>&nbsp;<span class="op" id="7836018">*</span><span class="ident" id="7836019">testing</span><span class="op" id="7836026">.</span><span class="ident" id="7836027">T</span><span class="op" id="7836028">)</span>&nbsp;<span class="op" id="7836030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836033">one</span>&nbsp;<span class="op" id="7836037">:=</span>&nbsp;<span class="ident" id="7836040">NewInt</span><span class="op" id="7836046">(</span><span class="num" id="7836047">1</span><span class="op" id="7836048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836051">for</span>&nbsp;<span class="ident" id="7836055">_</span><span class="op" id="7836056">,</span>&nbsp;<span class="ident" id="7836058">a</span>&nbsp;<span class="op" id="7836060">:=</span>&nbsp;<span class="keyword" id="7836063">range</span>&nbsp;<span class="ident" id="7836069">setStringTests</span>&nbsp;<span class="op" id="7836084">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836088">x</span><span class="op" id="7836089">,</span>&nbsp;<span class="ident" id="7836091">ok</span>&nbsp;<span class="op" id="7836094">:=</span>&nbsp;<span class="builtinfunc" id="7836097">new</span><span class="op" id="7836100">(</span><span class="ident" id="7836101">Rat</span><span class="op" id="7836104">)</span><span class="op" id="7836105">.</span><span class="ident" id="7836106">SetString</span><span class="op" id="7836115">(</span><span class="ident" id="7836116">a</span><span class="op" id="7836117">.</span><span class="ident" id="7836118">in</span><span class="op" id="7836120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836124">if</span>&nbsp;<span class="op" id="7836127">!</span><span class="ident" id="7836128">ok</span>&nbsp;<span class="op" id="7836131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836136">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836151">i</span>&nbsp;<span class="op" id="7836153">:=</span>&nbsp;<span class="ident" id="7836156">x</span><span class="op" id="7836157">.</span><span class="ident" id="7836158">IsInt</span><span class="op" id="7836163">(</span><span class="op" id="7836164">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836168">e</span>&nbsp;<span class="op" id="7836170">:=</span>&nbsp;<span class="ident" id="7836173">x</span><span class="op" id="7836174">.</span><span class="ident" id="7836175">Denom</span><span class="op" id="7836180">(</span><span class="op" id="7836181">)</span><span class="op" id="7836182">.</span><span class="ident" id="7836183">Cmp</span><span class="op" id="7836186">(</span><span class="ident" id="7836187">one</span><span class="op" id="7836190">)</span>&nbsp;<span class="op" id="7836192">==</span>&nbsp;<span class="num" id="7836195">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836199">if</span>&nbsp;<span class="ident" id="7836202">i</span>&nbsp;<span class="op" id="7836204">!=</span>&nbsp;<span class="ident" id="7836207">e</span>&nbsp;<span class="op" id="7836209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836214">t</span><span class="op" id="7836215">.</span><span class="ident" id="7836216">Errorf</span><span class="op" id="7836222">(</span><span class="string" id="7836223">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7836253">,</span>&nbsp;<span class="ident" id="7836255">x</span><span class="op" id="7836256">,</span>&nbsp;<span class="ident" id="7836258">i</span><span class="op" id="7836259">,</span>&nbsp;<span class="ident" id="7836261">e</span><span class="op" id="7836262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836269">}</span><br>
<span class="lineno">220</span><span class="op" id="7836271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7836274">func</span>&nbsp;<span class="ident" id="7836279">TestRatAbs</span><span class="op" id="7836289">(</span><span class="ident" id="7836290">t</span>&nbsp;<span class="op" id="7836292">*</span><span class="ident" id="7836293">testing</span><span class="op" id="7836300">.</span><span class="ident" id="7836301">T</span><span class="op" id="7836302">)</span>&nbsp;<span class="op" id="7836304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836307">zero</span>&nbsp;<span class="op" id="7836312">:=</span>&nbsp;<span class="builtinfunc" id="7836315">new</span><span class="op" id="7836318">(</span><span class="ident" id="7836319">Rat</span><span class="op" id="7836322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836325">for</span>&nbsp;<span class="ident" id="7836329">_</span><span class="op" id="7836330">,</span>&nbsp;<span class="ident" id="7836332">a</span>&nbsp;<span class="op" id="7836334">:=</span>&nbsp;<span class="keyword" id="7836337">range</span>&nbsp;<span class="ident" id="7836343">setStringTests</span>&nbsp;<span class="op" id="7836358">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836362">x</span><span class="op" id="7836363">,</span>&nbsp;<span class="ident" id="7836365">ok</span>&nbsp;<span class="op" id="7836368">:=</span>&nbsp;<span class="builtinfunc" id="7836371">new</span><span class="op" id="7836374">(</span><span class="ident" id="7836375">Rat</span><span class="op" id="7836378">)</span><span class="op" id="7836379">.</span><span class="ident" id="7836380">SetString</span><span class="op" id="7836389">(</span><span class="ident" id="7836390">a</span><span class="op" id="7836391">.</span><span class="ident" id="7836392">in</span><span class="op" id="7836394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836398">if</span>&nbsp;<span class="op" id="7836401">!</span><span class="ident" id="7836402">ok</span>&nbsp;<span class="op" id="7836405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836425">e</span>&nbsp;<span class="op" id="7836427">:=</span>&nbsp;<span class="builtinfunc" id="7836430">new</span><span class="op" id="7836433">(</span><span class="ident" id="7836434">Rat</span><span class="op" id="7836437">)</span><span class="op" id="7836438">.</span><span class="ident" id="7836439">Set</span><span class="op" id="7836442">(</span><span class="ident" id="7836443">x</span><span class="op" id="7836444">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836448">if</span>&nbsp;<span class="ident" id="7836451">e</span><span class="op" id="7836452">.</span><span class="ident" id="7836453">Cmp</span><span class="op" id="7836456">(</span><span class="ident" id="7836457">zero</span><span class="op" id="7836461">)</span>&nbsp;<span class="op" id="7836463">&lt;</span>&nbsp;<span class="num" id="7836465">0</span>&nbsp;<span class="op" id="7836467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836472">e</span><span class="op" id="7836473">.</span><span class="ident" id="7836474">Sub</span><span class="op" id="7836477">(</span><span class="ident" id="7836478">zero</span><span class="op" id="7836482">,</span>&nbsp;<span class="ident" id="7836484">e</span><span class="op" id="7836485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836493">z</span>&nbsp;<span class="op" id="7836495">:=</span>&nbsp;<span class="builtinfunc" id="7836498">new</span><span class="op" id="7836501">(</span><span class="ident" id="7836502">Rat</span><span class="op" id="7836505">)</span><span class="op" id="7836506">.</span><span class="ident" id="7836507">Abs</span><span class="op" id="7836510">(</span><span class="ident" id="7836511">x</span><span class="op" id="7836512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836516">if</span>&nbsp;<span class="ident" id="7836519">z</span><span class="op" id="7836520">.</span><span class="ident" id="7836521">Cmp</span><span class="op" id="7836524">(</span><span class="ident" id="7836525">e</span><span class="op" id="7836526">)</span>&nbsp;<span class="op" id="7836528">!=</span>&nbsp;<span class="num" id="7836531">0</span>&nbsp;<span class="op" id="7836533">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836538">t</span><span class="op" id="7836539">.</span><span class="ident" id="7836540">Errorf</span><span class="op" id="7836546">(</span><span class="string" id="7836547">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7836574">,</span>&nbsp;<span class="ident" id="7836576">x</span><span class="op" id="7836577">,</span>&nbsp;<span class="ident" id="7836579">z</span><span class="op" id="7836580">,</span>&nbsp;<span class="ident" id="7836582">e</span><span class="op" id="7836583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836590">}</span><br>
<span class="lineno"></span><span class="op" id="7836592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7836595">func</span>&nbsp;<span class="ident" id="7836600">TestRatNeg</span><span class="op" id="7836610">(</span><span class="ident" id="7836611">t</span>&nbsp;<span class="op" id="7836613">*</span><span class="ident" id="7836614">testing</span><span class="op" id="7836621">.</span><span class="ident" id="7836622">T</span><span class="op" id="7836623">)</span>&nbsp;<span class="op" id="7836625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836628">zero</span>&nbsp;<span class="op" id="7836633">:=</span>&nbsp;<span class="builtinfunc" id="7836636">new</span><span class="op" id="7836639">(</span><span class="ident" id="7836640">Rat</span><span class="op" id="7836643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836646">for</span>&nbsp;<span class="ident" id="7836650">_</span><span class="op" id="7836651">,</span>&nbsp;<span class="ident" id="7836653">a</span>&nbsp;<span class="op" id="7836655">:=</span>&nbsp;<span class="keyword" id="7836658">range</span>&nbsp;<span class="ident" id="7836664">setStringTests</span>&nbsp;<span class="op" id="7836679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836683">x</span><span class="op" id="7836684">,</span>&nbsp;<span class="ident" id="7836686">ok</span>&nbsp;<span class="op" id="7836689">:=</span>&nbsp;<span class="builtinfunc" id="7836692">new</span><span class="op" id="7836695">(</span><span class="ident" id="7836696">Rat</span><span class="op" id="7836699">)</span><span class="op" id="7836700">.</span><span class="ident" id="7836701">SetString</span><span class="op" id="7836710">(</span><span class="ident" id="7836711">a</span><span class="op" id="7836712">.</span><span class="ident" id="7836713">in</span><span class="op" id="7836715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836719">if</span>&nbsp;<span class="op" id="7836722">!</span><span class="ident" id="7836723">ok</span>&nbsp;<span class="op" id="7836726">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836731">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836746">e</span>&nbsp;<span class="op" id="7836748">:=</span>&nbsp;<span class="builtinfunc" id="7836751">new</span><span class="op" id="7836754">(</span><span class="ident" id="7836755">Rat</span><span class="op" id="7836758">)</span><span class="op" id="7836759">.</span><span class="ident" id="7836760">Sub</span><span class="op" id="7836763">(</span><span class="ident" id="7836764">zero</span><span class="op" id="7836768">,</span>&nbsp;<span class="ident" id="7836770">x</span><span class="op" id="7836771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836775">z</span>&nbsp;<span class="op" id="7836777">:=</span>&nbsp;<span class="builtinfunc" id="7836780">new</span><span class="op" id="7836783">(</span><span class="ident" id="7836784">Rat</span><span class="op" id="7836787">)</span><span class="op" id="7836788">.</span><span class="ident" id="7836789">Neg</span><span class="op" id="7836792">(</span><span class="ident" id="7836793">x</span><span class="op" id="7836794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836798">if</span>&nbsp;<span class="ident" id="7836801">z</span><span class="op" id="7836802">.</span><span class="ident" id="7836803">Cmp</span><span class="op" id="7836806">(</span><span class="ident" id="7836807">e</span><span class="op" id="7836808">)</span>&nbsp;<span class="op" id="7836810">!=</span>&nbsp;<span class="num" id="7836813">0</span>&nbsp;<span class="op" id="7836815">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836820">t</span><span class="op" id="7836821">.</span><span class="ident" id="7836822">Errorf</span><span class="op" id="7836828">(</span><span class="string" id="7836829">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7836856">,</span>&nbsp;<span class="ident" id="7836858">x</span><span class="op" id="7836859">,</span>&nbsp;<span class="ident" id="7836861">z</span><span class="op" id="7836862">,</span>&nbsp;<span class="ident" id="7836864">e</span><span class="op" id="7836865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836872">}</span><br>
<span class="lineno"></span><span class="op" id="7836874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7836877">func</span>&nbsp;<span class="ident" id="7836882">TestRatInv</span><span class="op" id="7836892">(</span><span class="ident" id="7836893">t</span>&nbsp;<span class="op" id="7836895">*</span><span class="ident" id="7836896">testing</span><span class="op" id="7836903">.</span><span class="ident" id="7836904">T</span><span class="op" id="7836905">)</span>&nbsp;<span class="op" id="7836907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836910">zero</span>&nbsp;<span class="op" id="7836915">:=</span>&nbsp;<span class="builtinfunc" id="7836918">new</span><span class="op" id="7836921">(</span><span class="ident" id="7836922">Rat</span><span class="op" id="7836925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836928">for</span>&nbsp;<span class="ident" id="7836932">_</span><span class="op" id="7836933">,</span>&nbsp;<span class="ident" id="7836935">a</span>&nbsp;<span class="op" id="7836937">:=</span>&nbsp;<span class="keyword" id="7836940">range</span>&nbsp;<span class="ident" id="7836946">setStringTests</span>&nbsp;<span class="op" id="7836961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836965">x</span><span class="op" id="7836966">,</span>&nbsp;<span class="ident" id="7836968">ok</span>&nbsp;<span class="op" id="7836971">:=</span>&nbsp;<span class="builtinfunc" id="7836974">new</span><span class="op" id="7836977">(</span><span class="ident" id="7836978">Rat</span><span class="op" id="7836981">)</span><span class="op" id="7836982">.</span><span class="ident" id="7836983">SetString</span><span class="op" id="7836992">(</span><span class="ident" id="7836993">a</span><span class="op" id="7836994">.</span><span class="ident" id="7836995">in</span><span class="op" id="7836997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837001">if</span>&nbsp;<span class="op" id="7837004">!</span><span class="ident" id="7837005">ok</span>&nbsp;<span class="op" id="7837008">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837013">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837028">if</span>&nbsp;<span class="ident" id="7837031">x</span><span class="op" id="7837032">.</span><span class="ident" id="7837033">Cmp</span><span class="op" id="7837036">(</span><span class="ident" id="7837037">zero</span><span class="op" id="7837041">)</span>&nbsp;<span class="op" id="7837043">==</span>&nbsp;<span class="num" id="7837046">0</span>&nbsp;<span class="op" id="7837048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837053">continue</span>&nbsp;<span class="comment" id="7837062">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837090">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837094">e</span>&nbsp;<span class="op" id="7837096">:=</span>&nbsp;<span class="builtinfunc" id="7837099">new</span><span class="op" id="7837102">(</span><span class="ident" id="7837103">Rat</span><span class="op" id="7837106">)</span><span class="op" id="7837107">.</span><span class="ident" id="7837108">SetFrac</span><span class="op" id="7837115">(</span><span class="ident" id="7837116">x</span><span class="op" id="7837117">.</span><span class="ident" id="7837118">Denom</span><span class="op" id="7837123">(</span><span class="op" id="7837124">)</span><span class="op" id="7837125">,</span>&nbsp;<span class="ident" id="7837127">x</span><span class="op" id="7837128">.</span><span class="ident" id="7837129">Num</span><span class="op" id="7837132">(</span><span class="op" id="7837133">)</span><span class="op" id="7837134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837138">z</span>&nbsp;<span class="op" id="7837140">:=</span>&nbsp;<span class="builtinfunc" id="7837143">new</span><span class="op" id="7837146">(</span><span class="ident" id="7837147">Rat</span><span class="op" id="7837150">)</span><span class="op" id="7837151">.</span><span class="ident" id="7837152">Inv</span><span class="op" id="7837155">(</span><span class="ident" id="7837156">x</span><span class="op" id="7837157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837161">if</span>&nbsp;<span class="ident" id="7837164">z</span><span class="op" id="7837165">.</span><span class="ident" id="7837166">Cmp</span><span class="op" id="7837169">(</span><span class="ident" id="7837170">e</span><span class="op" id="7837171">)</span>&nbsp;<span class="op" id="7837173">!=</span>&nbsp;<span class="num" id="7837176">0</span>&nbsp;<span class="op" id="7837178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837183">t</span><span class="op" id="7837184">.</span><span class="ident" id="7837185">Errorf</span><span class="op" id="7837191">(</span><span class="string" id="7837192">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7837219">,</span>&nbsp;<span class="ident" id="7837221">x</span><span class="op" id="7837222">,</span>&nbsp;<span class="ident" id="7837224">z</span><span class="op" id="7837225">,</span>&nbsp;<span class="ident" id="7837227">e</span><span class="op" id="7837228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837232">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837235">}</span><br>
<span class="lineno"></span><span class="op" id="7837237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7837240">type</span>&nbsp;<span class="ident" id="7837245">ratBinFun</span>&nbsp;<span class="keyword" id="7837255">func</span><span class="op" id="7837259">(</span><span class="ident" id="7837260">z</span><span class="op" id="7837261">,</span>&nbsp;<span class="ident" id="7837263">x</span><span class="op" id="7837264">,</span>&nbsp;<span class="ident" id="7837266">y</span>&nbsp;<span class="op" id="7837268">*</span><span class="ident" id="7837269">Rat</span><span class="op" id="7837272">)</span>&nbsp;<span class="op" id="7837274">*</span><span class="ident" id="7837275">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7837279">type</span>&nbsp;<span class="ident" id="7837284">ratBinArg</span>&nbsp;<span class="keyword" id="7837294">struct</span>&nbsp;<span class="op" id="7837301">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837304">x</span><span class="op" id="7837305">,</span>&nbsp;<span class="ident" id="7837307">y</span><span class="op" id="7837308">,</span>&nbsp;<span class="ident" id="7837310">z</span>&nbsp;<span class="builtintype" id="7837312">string</span><br>
<span class="lineno"></span><span class="op" id="7837319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7837322">func</span>&nbsp;<span class="ident" id="7837327">testRatBin</span><span class="op" id="7837337">(</span><span class="ident" id="7837338">t</span>&nbsp;<span class="op" id="7837340">*</span><span class="ident" id="7837341">testing</span><span class="op" id="7837348">.</span><span class="ident" id="7837349">T</span><span class="op" id="7837350">,</span>&nbsp;<span class="ident" id="7837352">i</span>&nbsp;<span class="builtintype" id="7837354">int</span><span class="op" id="7837357">,</span>&nbsp;<span class="ident" id="7837359">name</span>&nbsp;<span class="builtintype" id="7837364">string</span><span class="op" id="7837370">,</span>&nbsp;<span class="ident" id="7837372">f</span>&nbsp;<span class="ident" id="7837374">ratBinFun</span><span class="op" id="7837383">,</span>&nbsp;<span class="ident" id="7837385">a</span>&nbsp;<span class="ident" id="7837387">ratBinArg</span><span class="op" id="7837396">)</span>&nbsp;<span class="op" id="7837398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837401">x</span><span class="op" id="7837402">,</span>&nbsp;<span class="ident" id="7837404">_</span>&nbsp;<span class="op" id="7837406">:=</span>&nbsp;<span class="builtinfunc" id="7837409">new</span><span class="op" id="7837412">(</span><span class="ident" id="7837413">Rat</span><span class="op" id="7837416">)</span><span class="op" id="7837417">.</span><span class="ident" id="7837418">SetString</span><span class="op" id="7837427">(</span><span class="ident" id="7837428">a</span><span class="op" id="7837429">.</span><span class="ident" id="7837430">x</span><span class="op" id="7837431">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837434">y</span><span class="op" id="7837435">,</span>&nbsp;<span class="ident" id="7837437">_</span>&nbsp;<span class="op" id="7837439">:=</span>&nbsp;<span class="builtinfunc" id="7837442">new</span><span class="op" id="7837445">(</span><span class="ident" id="7837446">Rat</span><span class="op" id="7837449">)</span><span class="op" id="7837450">.</span><span class="ident" id="7837451">SetString</span><span class="op" id="7837460">(</span><span class="ident" id="7837461">a</span><span class="op" id="7837462">.</span><span class="ident" id="7837463">y</span><span class="op" id="7837464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837467">z</span><span class="op" id="7837468">,</span>&nbsp;<span class="ident" id="7837470">_</span>&nbsp;<span class="op" id="7837472">:=</span>&nbsp;<span class="builtinfunc" id="7837475">new</span><span class="op" id="7837478">(</span><span class="ident" id="7837479">Rat</span><span class="op" id="7837482">)</span><span class="op" id="7837483">.</span><span class="ident" id="7837484">SetString</span><span class="op" id="7837493">(</span><span class="ident" id="7837494">a</span><span class="op" id="7837495">.</span><span class="ident" id="7837496">z</span><span class="op" id="7837497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837500">out</span>&nbsp;<span class="op" id="7837504">:=</span>&nbsp;<span class="ident" id="7837507">f</span><span class="op" id="7837508">(</span><span class="builtinfunc" id="7837509">new</span><span class="op" id="7837512">(</span><span class="ident" id="7837513">Rat</span><span class="op" id="7837516">)</span><span class="op" id="7837517">,</span>&nbsp;<span class="ident" id="7837519">x</span><span class="op" id="7837520">,</span>&nbsp;<span class="ident" id="7837522">y</span><span class="op" id="7837523">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837527">if</span>&nbsp;<span class="ident" id="7837530">out</span><span class="op" id="7837533">.</span><span class="ident" id="7837534">Cmp</span><span class="op" id="7837537">(</span><span class="ident" id="7837538">z</span><span class="op" id="7837539">)</span>&nbsp;<span class="op" id="7837541">!=</span>&nbsp;<span class="num" id="7837544">0</span>&nbsp;<span class="op" id="7837546">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837550">t</span><span class="op" id="7837551">.</span><span class="ident" id="7837552">Errorf</span><span class="op" id="7837558">(</span><span class="string" id="7837559">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7837582">,</span>&nbsp;<span class="ident" id="7837584">name</span><span class="op" id="7837588">,</span>&nbsp;<span class="ident" id="7837590">i</span><span class="op" id="7837591">,</span>&nbsp;<span class="ident" id="7837593">out</span><span class="op" id="7837596">,</span>&nbsp;<span class="ident" id="7837598">z</span><span class="op" id="7837599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837602">}</span><br>
<span class="lineno"></span><span class="op" id="7837604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7837607">var</span>&nbsp;<span class="ident" id="7837611">ratBinTests</span>&nbsp;<span class="op" id="7837623">=</span>&nbsp;<span class="op" id="7837625">[</span><span class="op" id="7837626">]</span><span class="keyword" id="7837627">struct</span>&nbsp;<span class="op" id="7837634">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837637">x</span><span class="op" id="7837638">,</span>&nbsp;<span class="ident" id="7837640">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7837647">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837655">sum</span><span class="op" id="7837658">,</span>&nbsp;<span class="ident" id="7837660">prod</span>&nbsp;<span class="builtintype" id="7837665">string</span><br>
<span class="lineno"></span><span class="op" id="7837672">}</span><span class="op" id="7837673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837676">{</span><span class="string" id="7837677">&#34;0&#34;</span><span class="op" id="7837680">,</span>&nbsp;<span class="string" id="7837682">&#34;0&#34;</span><span class="op" id="7837685">,</span>&nbsp;<span class="string" id="7837687">&#34;0&#34;</span><span class="op" id="7837690">,</span>&nbsp;<span class="string" id="7837692">&#34;0&#34;</span><span class="op" id="7837695">}</span><span class="op" id="7837696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837699">{</span><span class="string" id="7837700">&#34;0&#34;</span><span class="op" id="7837703">,</span>&nbsp;<span class="string" id="7837705">&#34;1&#34;</span><span class="op" id="7837708">,</span>&nbsp;<span class="string" id="7837710">&#34;1&#34;</span><span class="op" id="7837713">,</span>&nbsp;<span class="string" id="7837715">&#34;0&#34;</span><span class="op" id="7837718">}</span><span class="op" id="7837719">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837722">{</span><span class="string" id="7837723">&#34;-1&#34;</span><span class="op" id="7837727">,</span>&nbsp;<span class="string" id="7837729">&#34;0&#34;</span><span class="op" id="7837732">,</span>&nbsp;<span class="string" id="7837734">&#34;-1&#34;</span><span class="op" id="7837738">,</span>&nbsp;<span class="string" id="7837740">&#34;0&#34;</span><span class="op" id="7837743">}</span><span class="op" id="7837744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837747">{</span><span class="string" id="7837748">&#34;-1&#34;</span><span class="op" id="7837752">,</span>&nbsp;<span class="string" id="7837754">&#34;1&#34;</span><span class="op" id="7837757">,</span>&nbsp;<span class="string" id="7837759">&#34;0&#34;</span><span class="op" id="7837762">,</span>&nbsp;<span class="string" id="7837764">&#34;-1&#34;</span><span class="op" id="7837768">}</span><span class="op" id="7837769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837772">{</span><span class="string" id="7837773">&#34;1&#34;</span><span class="op" id="7837776">,</span>&nbsp;<span class="string" id="7837778">&#34;1&#34;</span><span class="op" id="7837781">,</span>&nbsp;<span class="string" id="7837783">&#34;2&#34;</span><span class="op" id="7837786">,</span>&nbsp;<span class="string" id="7837788">&#34;1&#34;</span><span class="op" id="7837791">}</span><span class="op" id="7837792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837795">{</span><span class="string" id="7837796">&#34;1/2&#34;</span><span class="op" id="7837801">,</span>&nbsp;<span class="string" id="7837803">&#34;1/2&#34;</span><span class="op" id="7837808">,</span>&nbsp;<span class="string" id="7837810">&#34;1&#34;</span><span class="op" id="7837813">,</span>&nbsp;<span class="string" id="7837815">&#34;1/4&#34;</span><span class="op" id="7837820">}</span><span class="op" id="7837821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837824">{</span><span class="string" id="7837825">&#34;1/4&#34;</span><span class="op" id="7837830">,</span>&nbsp;<span class="string" id="7837832">&#34;1/3&#34;</span><span class="op" id="7837837">,</span>&nbsp;<span class="string" id="7837839">&#34;7/12&#34;</span><span class="op" id="7837845">,</span>&nbsp;<span class="string" id="7837847">&#34;1/12&#34;</span><span class="op" id="7837853">}</span><span class="op" id="7837854">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837857">{</span><span class="string" id="7837858">&#34;2/5&#34;</span><span class="op" id="7837863">,</span>&nbsp;<span class="string" id="7837865">&#34;-14/3&#34;</span><span class="op" id="7837872">,</span>&nbsp;<span class="string" id="7837874">&#34;-64/15&#34;</span><span class="op" id="7837882">,</span>&nbsp;<span class="string" id="7837884">&#34;-28/15&#34;</span><span class="op" id="7837892">}</span><span class="op" id="7837893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837896">{</span><span class="string" id="7837897">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7837924">,</span>&nbsp;<span class="string" id="7837926">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7837954">,</span>&nbsp;<span class="string" id="7837956">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7838022">,</span>&nbsp;<span class="string" id="7838024">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7838074">}</span><span class="op" id="7838075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838078">{</span><span class="string" id="7838079">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7838104">,</span>&nbsp;<span class="string" id="7838106">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7838131">,</span>&nbsp;<span class="string" id="7838133">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7838159">,</span>&nbsp;<span class="string" id="7838161">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7838204">}</span><span class="op" id="7838205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838208">{</span><span class="string" id="7838209">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7838271">,</span>&nbsp;<span class="string" id="7838273">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7838299">,</span>&nbsp;<span class="string" id="7838301">&#34;-27/133467566250814981&#34;</span><span class="op" id="7838325">,</span>&nbsp;<span class="string" id="7838327">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7838410">}</span><span class="op" id="7838411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838414">{</span><span class="string" id="7838415">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7838474">,</span>&nbsp;<span class="string" id="7838476">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7838509">,</span>&nbsp;<span class="string" id="7838511">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7838545">,</span>&nbsp;<span class="string" id="7838547">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7838634">}</span><span class="op" id="7838635">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838638">{</span><span class="string" id="7838639">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7838664">,</span>&nbsp;<span class="string" id="7838666">&#34;5/2848423294177090248&#34;</span><span class="op" id="7838689">,</span>&nbsp;<span class="string" id="7838691">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7838751">,</span>&nbsp;<span class="string" id="7838753">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7838796">}</span><span class="op" id="7838797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838800">{</span><span class="string" id="7838801">&#34;26946729/330400702820&#34;</span><span class="op" id="7838824">,</span>&nbsp;<span class="string" id="7838826">&#34;41563965/225583428284&#34;</span><span class="op" id="7838849">,</span>&nbsp;<span class="string" id="7838851">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7838895">,</span>&nbsp;<span class="string" id="7838897">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7838938">}</span><span class="op" id="7838939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838942">{</span><span class="string" id="7838943">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7838967">,</span>&nbsp;<span class="string" id="7838969">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7839013">,</span>&nbsp;<span class="string" id="7839015">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7839079">,</span>&nbsp;<span class="string" id="7839081">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7839144">}</span><span class="op" id="7839145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839148">{</span><span class="string" id="7839149">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7839189">,</span>&nbsp;<span class="string" id="7839191">&#34;29/712593081308&#34;</span><span class="op" id="7839208">,</span>&nbsp;<span class="string" id="7839210">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7839273">,</span>&nbsp;<span class="string" id="7839275">&#34;808/45524274987585732633&#34;</span><span class="op" id="7839301">}</span><span class="op" id="7839302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839305">{</span><span class="string" id="7839306">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7839347">,</span>&nbsp;<span class="string" id="7839349">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7839375">,</span>&nbsp;<span class="string" id="7839377">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7839448">,</span>&nbsp;<span class="string" id="7839450">&#34;8967230/3296219033&#34;</span><span class="op" id="7839470">}</span><span class="op" id="7839471">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839474">{</span><span class="string" id="7839475">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7839522">,</span>&nbsp;<span class="string" id="7839524">&#34;9381566963714/9633539&#34;</span><span class="op" id="7839547">,</span>&nbsp;<span class="string" id="7839549">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7839618">,</span>&nbsp;<span class="string" id="7839620">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7839647">}</span><span class="op" id="7839648">,</span><br>
<span class="lineno"></span><span class="op" id="7839650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839653">func</span>&nbsp;<span class="ident" id="7839658">TestRatBin</span><span class="op" id="7839668">(</span><span class="ident" id="7839669">t</span>&nbsp;<span class="op" id="7839671">*</span><span class="ident" id="7839672">testing</span><span class="op" id="7839679">.</span><span class="ident" id="7839680">T</span><span class="op" id="7839681">)</span>&nbsp;<span class="op" id="7839683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839686">for</span>&nbsp;<span class="ident" id="7839690">i</span><span class="op" id="7839691">,</span>&nbsp;<span class="ident" id="7839693">test</span>&nbsp;<span class="op" id="7839698">:=</span>&nbsp;<span class="keyword" id="7839701">range</span>&nbsp;<span class="ident" id="7839707">ratBinTests</span>&nbsp;<span class="op" id="7839719">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839723">arg</span>&nbsp;<span class="op" id="7839727">:=</span>&nbsp;<span class="ident" id="7839730">ratBinArg</span><span class="op" id="7839739">{</span><span class="ident" id="7839740">test</span><span class="op" id="7839744">.</span><span class="ident" id="7839745">x</span><span class="op" id="7839746">,</span>&nbsp;<span class="ident" id="7839748">test</span><span class="op" id="7839752">.</span><span class="ident" id="7839753">y</span><span class="op" id="7839754">,</span>&nbsp;<span class="ident" id="7839756">test</span><span class="op" id="7839760">.</span><span class="ident" id="7839761">sum</span><span class="op" id="7839764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839768">testRatBin</span><span class="op" id="7839778">(</span><span class="ident" id="7839779">t</span><span class="op" id="7839780">,</span>&nbsp;<span class="ident" id="7839782">i</span><span class="op" id="7839783">,</span>&nbsp;<span class="string" id="7839785">&#34;Add&#34;</span><span class="op" id="7839790">,</span>&nbsp;<span class="op" id="7839792">(</span><span class="op" id="7839793">*</span><span class="ident" id="7839794">Rat</span><span class="op" id="7839797">)</span><span class="op" id="7839798">.</span><span class="ident" id="7839799">Add</span><span class="op" id="7839802">,</span>&nbsp;<span class="ident" id="7839804">arg</span><span class="op" id="7839807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839812">arg</span>&nbsp;<span class="op" id="7839816">=</span>&nbsp;<span class="ident" id="7839818">ratBinArg</span><span class="op" id="7839827">{</span><span class="ident" id="7839828">test</span><span class="op" id="7839832">.</span><span class="ident" id="7839833">y</span><span class="op" id="7839834">,</span>&nbsp;<span class="ident" id="7839836">test</span><span class="op" id="7839840">.</span><span class="ident" id="7839841">x</span><span class="op" id="7839842">,</span>&nbsp;<span class="ident" id="7839844">test</span><span class="op" id="7839848">.</span><span class="ident" id="7839849">sum</span><span class="op" id="7839852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839856">testRatBin</span><span class="op" id="7839866">(</span><span class="ident" id="7839867">t</span><span class="op" id="7839868">,</span>&nbsp;<span class="ident" id="7839870">i</span><span class="op" id="7839871">,</span>&nbsp;<span class="string" id="7839873">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7839888">,</span>&nbsp;<span class="op" id="7839890">(</span><span class="op" id="7839891">*</span><span class="ident" id="7839892">Rat</span><span class="op" id="7839895">)</span><span class="op" id="7839896">.</span><span class="ident" id="7839897">Add</span><span class="op" id="7839900">,</span>&nbsp;<span class="ident" id="7839902">arg</span><span class="op" id="7839905">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839910">arg</span>&nbsp;<span class="op" id="7839914">=</span>&nbsp;<span class="ident" id="7839916">ratBinArg</span><span class="op" id="7839925">{</span><span class="ident" id="7839926">test</span><span class="op" id="7839930">.</span><span class="ident" id="7839931">sum</span><span class="op" id="7839934">,</span>&nbsp;<span class="ident" id="7839936">test</span><span class="op" id="7839940">.</span><span class="ident" id="7839941">x</span><span class="op" id="7839942">,</span>&nbsp;<span class="ident" id="7839944">test</span><span class="op" id="7839948">.</span><span class="ident" id="7839949">y</span><span class="op" id="7839950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839954">testRatBin</span><span class="op" id="7839964">(</span><span class="ident" id="7839965">t</span><span class="op" id="7839966">,</span>&nbsp;<span class="ident" id="7839968">i</span><span class="op" id="7839969">,</span>&nbsp;<span class="string" id="7839971">&#34;Sub&#34;</span><span class="op" id="7839976">,</span>&nbsp;<span class="op" id="7839978">(</span><span class="op" id="7839979">*</span><span class="ident" id="7839980">Rat</span><span class="op" id="7839983">)</span><span class="op" id="7839984">.</span><span class="ident" id="7839985">Sub</span><span class="op" id="7839988">,</span>&nbsp;<span class="ident" id="7839990">arg</span><span class="op" id="7839993">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839998">arg</span>&nbsp;<span class="op" id="7840002">=</span>&nbsp;<span class="ident" id="7840004">ratBinArg</span><span class="op" id="7840013">{</span><span class="ident" id="7840014">test</span><span class="op" id="7840018">.</span><span class="ident" id="7840019">sum</span><span class="op" id="7840022">,</span>&nbsp;<span class="ident" id="7840024">test</span><span class="op" id="7840028">.</span><span class="ident" id="7840029">y</span><span class="op" id="7840030">,</span>&nbsp;<span class="ident" id="7840032">test</span><span class="op" id="7840036">.</span><span class="ident" id="7840037">x</span><span class="op" id="7840038">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840042">testRatBin</span><span class="op" id="7840052">(</span><span class="ident" id="7840053">t</span><span class="op" id="7840054">,</span>&nbsp;<span class="ident" id="7840056">i</span><span class="op" id="7840057">,</span>&nbsp;<span class="string" id="7840059">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7840074">,</span>&nbsp;<span class="op" id="7840076">(</span><span class="op" id="7840077">*</span><span class="ident" id="7840078">Rat</span><span class="op" id="7840081">)</span><span class="op" id="7840082">.</span><span class="ident" id="7840083">Sub</span><span class="op" id="7840086">,</span>&nbsp;<span class="ident" id="7840088">arg</span><span class="op" id="7840091">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840096">arg</span>&nbsp;<span class="op" id="7840100">=</span>&nbsp;<span class="ident" id="7840102">ratBinArg</span><span class="op" id="7840111">{</span><span class="ident" id="7840112">test</span><span class="op" id="7840116">.</span><span class="ident" id="7840117">x</span><span class="op" id="7840118">,</span>&nbsp;<span class="ident" id="7840120">test</span><span class="op" id="7840124">.</span><span class="ident" id="7840125">y</span><span class="op" id="7840126">,</span>&nbsp;<span class="ident" id="7840128">test</span><span class="op" id="7840132">.</span><span class="ident" id="7840133">prod</span><span class="op" id="7840137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840141">testRatBin</span><span class="op" id="7840151">(</span><span class="ident" id="7840152">t</span><span class="op" id="7840153">,</span>&nbsp;<span class="ident" id="7840155">i</span><span class="op" id="7840156">,</span>&nbsp;<span class="string" id="7840158">&#34;Mul&#34;</span><span class="op" id="7840163">,</span>&nbsp;<span class="op" id="7840165">(</span><span class="op" id="7840166">*</span><span class="ident" id="7840167">Rat</span><span class="op" id="7840170">)</span><span class="op" id="7840171">.</span><span class="ident" id="7840172">Mul</span><span class="op" id="7840175">,</span>&nbsp;<span class="ident" id="7840177">arg</span><span class="op" id="7840180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840185">arg</span>&nbsp;<span class="op" id="7840189">=</span>&nbsp;<span class="ident" id="7840191">ratBinArg</span><span class="op" id="7840200">{</span><span class="ident" id="7840201">test</span><span class="op" id="7840205">.</span><span class="ident" id="7840206">y</span><span class="op" id="7840207">,</span>&nbsp;<span class="ident" id="7840209">test</span><span class="op" id="7840213">.</span><span class="ident" id="7840214">x</span><span class="op" id="7840215">,</span>&nbsp;<span class="ident" id="7840217">test</span><span class="op" id="7840221">.</span><span class="ident" id="7840222">prod</span><span class="op" id="7840226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840230">testRatBin</span><span class="op" id="7840240">(</span><span class="ident" id="7840241">t</span><span class="op" id="7840242">,</span>&nbsp;<span class="ident" id="7840244">i</span><span class="op" id="7840245">,</span>&nbsp;<span class="string" id="7840247">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7840262">,</span>&nbsp;<span class="op" id="7840264">(</span><span class="op" id="7840265">*</span><span class="ident" id="7840266">Rat</span><span class="op" id="7840269">)</span><span class="op" id="7840270">.</span><span class="ident" id="7840271">Mul</span><span class="op" id="7840274">,</span>&nbsp;<span class="ident" id="7840276">arg</span><span class="op" id="7840279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840284">if</span>&nbsp;<span class="ident" id="7840287">test</span><span class="op" id="7840291">.</span><span class="ident" id="7840292">x</span>&nbsp;<span class="op" id="7840294">!=</span>&nbsp;<span class="string" id="7840297">&#34;0&#34;</span>&nbsp;<span class="op" id="7840301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840306">arg</span>&nbsp;<span class="op" id="7840310">=</span>&nbsp;<span class="ident" id="7840312">ratBinArg</span><span class="op" id="7840321">{</span><span class="ident" id="7840322">test</span><span class="op" id="7840326">.</span><span class="ident" id="7840327">prod</span><span class="op" id="7840331">,</span>&nbsp;<span class="ident" id="7840333">test</span><span class="op" id="7840337">.</span><span class="ident" id="7840338">x</span><span class="op" id="7840339">,</span>&nbsp;<span class="ident" id="7840341">test</span><span class="op" id="7840345">.</span><span class="ident" id="7840346">y</span><span class="op" id="7840347">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840352">testRatBin</span><span class="op" id="7840362">(</span><span class="ident" id="7840363">t</span><span class="op" id="7840364">,</span>&nbsp;<span class="ident" id="7840366">i</span><span class="op" id="7840367">,</span>&nbsp;<span class="string" id="7840369">&#34;Quo&#34;</span><span class="op" id="7840374">,</span>&nbsp;<span class="op" id="7840376">(</span><span class="op" id="7840377">*</span><span class="ident" id="7840378">Rat</span><span class="op" id="7840381">)</span><span class="op" id="7840382">.</span><span class="ident" id="7840383">Quo</span><span class="op" id="7840386">,</span>&nbsp;<span class="ident" id="7840388">arg</span><span class="op" id="7840391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840400">if</span>&nbsp;<span class="ident" id="7840403">test</span><span class="op" id="7840407">.</span><span class="ident" id="7840408">y</span>&nbsp;<span class="op" id="7840410">!=</span>&nbsp;<span class="string" id="7840413">&#34;0&#34;</span>&nbsp;<span class="op" id="7840417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840422">arg</span>&nbsp;<span class="op" id="7840426">=</span>&nbsp;<span class="ident" id="7840428">ratBinArg</span><span class="op" id="7840437">{</span><span class="ident" id="7840438">test</span><span class="op" id="7840442">.</span><span class="ident" id="7840443">prod</span><span class="op" id="7840447">,</span>&nbsp;<span class="ident" id="7840449">test</span><span class="op" id="7840453">.</span><span class="ident" id="7840454">y</span><span class="op" id="7840455">,</span>&nbsp;<span class="ident" id="7840457">test</span><span class="op" id="7840461">.</span><span class="ident" id="7840462">x</span><span class="op" id="7840463">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840468">testRatBin</span><span class="op" id="7840478">(</span><span class="ident" id="7840479">t</span><span class="op" id="7840480">,</span>&nbsp;<span class="ident" id="7840482">i</span><span class="op" id="7840483">,</span>&nbsp;<span class="string" id="7840485">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7840500">,</span>&nbsp;<span class="op" id="7840502">(</span><span class="op" id="7840503">*</span><span class="ident" id="7840504">Rat</span><span class="op" id="7840507">)</span><span class="op" id="7840508">.</span><span class="ident" id="7840509">Quo</span><span class="op" id="7840512">,</span>&nbsp;<span class="ident" id="7840514">arg</span><span class="op" id="7840517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840524">}</span><br>
<span class="lineno"></span><span class="op" id="7840526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7840529">func</span>&nbsp;<span class="ident" id="7840534">TestIssue820</span><span class="op" id="7840546">(</span><span class="ident" id="7840547">t</span>&nbsp;<span class="op" id="7840549">*</span><span class="ident" id="7840550">testing</span><span class="op" id="7840557">.</span><span class="ident" id="7840558">T</span><span class="op" id="7840559">)</span>&nbsp;<span class="op" id="7840561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840564">x</span>&nbsp;<span class="op" id="7840566">:=</span>&nbsp;<span class="ident" id="7840569">NewRat</span><span class="op" id="7840575">(</span><span class="num" id="7840576">3</span><span class="op" id="7840577">,</span>&nbsp;<span class="num" id="7840579">1</span><span class="op" id="7840580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840583">y</span>&nbsp;<span class="op" id="7840585">:=</span>&nbsp;<span class="ident" id="7840588">NewRat</span><span class="op" id="7840594">(</span><span class="num" id="7840595">2</span><span class="op" id="7840596">,</span>&nbsp;<span class="num" id="7840598">1</span><span class="op" id="7840599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840602">z</span>&nbsp;<span class="op" id="7840604">:=</span>&nbsp;<span class="ident" id="7840607">y</span><span class="op" id="7840608">.</span><span class="ident" id="7840609">Quo</span><span class="op" id="7840612">(</span><span class="ident" id="7840613">x</span><span class="op" id="7840614">,</span>&nbsp;<span class="ident" id="7840616">y</span><span class="op" id="7840617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840620">q</span>&nbsp;<span class="op" id="7840622">:=</span>&nbsp;<span class="ident" id="7840625">NewRat</span><span class="op" id="7840631">(</span><span class="num" id="7840632">3</span><span class="op" id="7840633">,</span>&nbsp;<span class="num" id="7840635">2</span><span class="op" id="7840636">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840639">if</span>&nbsp;<span class="ident" id="7840642">z</span><span class="op" id="7840643">.</span><span class="ident" id="7840644">Cmp</span><span class="op" id="7840647">(</span><span class="ident" id="7840648">q</span><span class="op" id="7840649">)</span>&nbsp;<span class="op" id="7840651">!=</span>&nbsp;<span class="num" id="7840654">0</span>&nbsp;<span class="op" id="7840656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840660">t</span><span class="op" id="7840661">.</span><span class="ident" id="7840662">Errorf</span><span class="op" id="7840668">(</span><span class="string" id="7840669">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7840685">,</span>&nbsp;<span class="ident" id="7840687">z</span><span class="op" id="7840688">,</span>&nbsp;<span class="ident" id="7840690">q</span><span class="op" id="7840691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840698">y</span>&nbsp;<span class="op" id="7840700">=</span>&nbsp;<span class="ident" id="7840702">NewRat</span><span class="op" id="7840708">(</span><span class="num" id="7840709">3</span><span class="op" id="7840710">,</span>&nbsp;<span class="num" id="7840712">1</span><span class="op" id="7840713">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840716">x</span>&nbsp;<span class="op" id="7840718">=</span>&nbsp;<span class="ident" id="7840720">NewRat</span><span class="op" id="7840726">(</span><span class="num" id="7840727">2</span><span class="op" id="7840728">,</span>&nbsp;<span class="num" id="7840730">1</span><span class="op" id="7840731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840734">z</span>&nbsp;<span class="op" id="7840736">=</span>&nbsp;<span class="ident" id="7840738">y</span><span class="op" id="7840739">.</span><span class="ident" id="7840740">Quo</span><span class="op" id="7840743">(</span><span class="ident" id="7840744">x</span><span class="op" id="7840745">,</span>&nbsp;<span class="ident" id="7840747">y</span><span class="op" id="7840748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840751">q</span>&nbsp;<span class="op" id="7840753">=</span>&nbsp;<span class="ident" id="7840755">NewRat</span><span class="op" id="7840761">(</span><span class="num" id="7840762">2</span><span class="op" id="7840763">,</span>&nbsp;<span class="num" id="7840765">3</span><span class="op" id="7840766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840769">if</span>&nbsp;<span class="ident" id="7840772">z</span><span class="op" id="7840773">.</span><span class="ident" id="7840774">Cmp</span><span class="op" id="7840777">(</span><span class="ident" id="7840778">q</span><span class="op" id="7840779">)</span>&nbsp;<span class="op" id="7840781">!=</span>&nbsp;<span class="num" id="7840784">0</span>&nbsp;<span class="op" id="7840786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840790">t</span><span class="op" id="7840791">.</span><span class="ident" id="7840792">Errorf</span><span class="op" id="7840798">(</span><span class="string" id="7840799">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7840815">,</span>&nbsp;<span class="ident" id="7840817">z</span><span class="op" id="7840818">,</span>&nbsp;<span class="ident" id="7840820">q</span><span class="op" id="7840821">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840828">x</span>&nbsp;<span class="op" id="7840830">=</span>&nbsp;<span class="ident" id="7840832">NewRat</span><span class="op" id="7840838">(</span><span class="num" id="7840839">3</span><span class="op" id="7840840">,</span>&nbsp;<span class="num" id="7840842">1</span><span class="op" id="7840843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840846">z</span>&nbsp;<span class="op" id="7840848">=</span>&nbsp;<span class="ident" id="7840850">x</span><span class="op" id="7840851">.</span><span class="ident" id="7840852">Quo</span><span class="op" id="7840855">(</span><span class="ident" id="7840856">x</span><span class="op" id="7840857">,</span>&nbsp;<span class="ident" id="7840859">x</span><span class="op" id="7840860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840863">q</span>&nbsp;<span class="op" id="7840865">=</span>&nbsp;<span class="ident" id="7840867">NewRat</span><span class="op" id="7840873">(</span><span class="num" id="7840874">3</span><span class="op" id="7840875">,</span>&nbsp;<span class="num" id="7840877">3</span><span class="op" id="7840878">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840881">if</span>&nbsp;<span class="ident" id="7840884">z</span><span class="op" id="7840885">.</span><span class="ident" id="7840886">Cmp</span><span class="op" id="7840889">(</span><span class="ident" id="7840890">q</span><span class="op" id="7840891">)</span>&nbsp;<span class="op" id="7840893">!=</span>&nbsp;<span class="num" id="7840896">0</span>&nbsp;<span class="op" id="7840898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840902">t</span><span class="op" id="7840903">.</span><span class="ident" id="7840904">Errorf</span><span class="op" id="7840910">(</span><span class="string" id="7840911">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7840927">,</span>&nbsp;<span class="ident" id="7840929">z</span><span class="op" id="7840930">,</span>&nbsp;<span class="ident" id="7840932">q</span><span class="op" id="7840933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840936">}</span><br>
<span class="lineno"></span><span class="op" id="7840938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7840941">var</span>&nbsp;<span class="ident" id="7840945">setFrac64Tests</span>&nbsp;<span class="op" id="7840960">=</span>&nbsp;<span class="op" id="7840962">[</span><span class="op" id="7840963">]</span><span class="keyword" id="7840964">struct</span>&nbsp;<span class="op" id="7840971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840974">a</span><span class="op" id="7840975">,</span>&nbsp;<span class="ident" id="7840977">b</span>&nbsp;<span class="ident" id="7840979">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840986">out</span>&nbsp;&nbsp;<span class="builtintype" id="7840991">string</span><br>
<span class="lineno"></span><span class="op" id="7840998">}</span><span class="op" id="7840999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841002">{</span><span class="num" id="7841003">0</span><span class="op" id="7841004">,</span>&nbsp;<span class="num" id="7841006">1</span><span class="op" id="7841007">,</span>&nbsp;<span class="string" id="7841009">&#34;0&#34;</span><span class="op" id="7841012">}</span><span class="op" id="7841013">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841016">{</span><span class="num" id="7841017">0</span><span class="op" id="7841018">,</span>&nbsp;<span class="op" id="7841020">-</span><span class="num" id="7841021">1</span><span class="op" id="7841022">,</span>&nbsp;<span class="string" id="7841024">&#34;0&#34;</span><span class="op" id="7841027">}</span><span class="op" id="7841028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841031">{</span><span class="num" id="7841032">1</span><span class="op" id="7841033">,</span>&nbsp;<span class="num" id="7841035">1</span><span class="op" id="7841036">,</span>&nbsp;<span class="string" id="7841038">&#34;1&#34;</span><span class="op" id="7841041">}</span><span class="op" id="7841042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841045">{</span><span class="op" id="7841046">-</span><span class="num" id="7841047">1</span><span class="op" id="7841048">,</span>&nbsp;<span class="num" id="7841050">1</span><span class="op" id="7841051">,</span>&nbsp;<span class="string" id="7841053">&#34;-1&#34;</span><span class="op" id="7841057">}</span><span class="op" id="7841058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841061">{</span><span class="num" id="7841062">1</span><span class="op" id="7841063">,</span>&nbsp;<span class="op" id="7841065">-</span><span class="num" id="7841066">1</span><span class="op" id="7841067">,</span>&nbsp;<span class="string" id="7841069">&#34;-1&#34;</span><span class="op" id="7841073">}</span><span class="op" id="7841074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841077">{</span><span class="op" id="7841078">-</span><span class="num" id="7841079">1</span><span class="op" id="7841080">,</span>&nbsp;<span class="op" id="7841082">-</span><span class="num" id="7841083">1</span><span class="op" id="7841084">,</span>&nbsp;<span class="string" id="7841086">&#34;1&#34;</span><span class="op" id="7841089">}</span><span class="op" id="7841090">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841093">{</span><span class="op" id="7841094">-</span><span class="num" id="7841095">9223372036854775808</span><span class="op" id="7841114">,</span>&nbsp;<span class="op" id="7841116">-</span><span class="num" id="7841117">9223372036854775808</span><span class="op" id="7841136">,</span>&nbsp;<span class="string" id="7841138">&#34;1&#34;</span><span class="op" id="7841141">}</span><span class="op" id="7841142">,</span><br>
<span class="lineno"></span><span class="op" id="7841144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7841147">func</span>&nbsp;<span class="ident" id="7841152">TestRatSetFrac64Rat</span><span class="op" id="7841171">(</span><span class="ident" id="7841172">t</span>&nbsp;<span class="op" id="7841174">*</span><span class="ident" id="7841175">testing</span><span class="op" id="7841182">.</span><span class="ident" id="7841183">T</span><span class="op" id="7841184">)</span>&nbsp;<span class="op" id="7841186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841189">for</span>&nbsp;<span class="ident" id="7841193">i</span><span class="op" id="7841194">,</span>&nbsp;<span class="ident" id="7841196">test</span>&nbsp;<span class="op" id="7841201">:=</span>&nbsp;<span class="keyword" id="7841204">range</span>&nbsp;<span class="ident" id="7841210">setFrac64Tests</span>&nbsp;<span class="op" id="7841225">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841229">x</span>&nbsp;<span class="op" id="7841231">:=</span>&nbsp;<span class="builtinfunc" id="7841234">new</span><span class="op" id="7841237">(</span><span class="ident" id="7841238">Rat</span><span class="op" id="7841241">)</span><span class="op" id="7841242">.</span><span class="ident" id="7841243">SetFrac64</span><span class="op" id="7841252">(</span><span class="ident" id="7841253">test</span><span class="op" id="7841257">.</span><span class="ident" id="7841258">a</span><span class="op" id="7841259">,</span>&nbsp;<span class="ident" id="7841261">test</span><span class="op" id="7841265">.</span><span class="ident" id="7841266">b</span><span class="op" id="7841267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841271">if</span>&nbsp;<span class="ident" id="7841274">x</span><span class="op" id="7841275">.</span><span class="ident" id="7841276">RatString</span><span class="op" id="7841285">(</span><span class="op" id="7841286">)</span>&nbsp;<span class="op" id="7841288">!=</span>&nbsp;<span class="ident" id="7841291">test</span><span class="op" id="7841295">.</span><span class="ident" id="7841296">out</span>&nbsp;<span class="op" id="7841300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841305">t</span><span class="op" id="7841306">.</span><span class="ident" id="7841307">Errorf</span><span class="op" id="7841313">(</span><span class="string" id="7841314">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7841334">,</span>&nbsp;<span class="ident" id="7841336">i</span><span class="op" id="7841337">,</span>&nbsp;<span class="ident" id="7841339">x</span><span class="op" id="7841340">.</span><span class="ident" id="7841341">RatString</span><span class="op" id="7841350">(</span><span class="op" id="7841351">)</span><span class="op" id="7841352">,</span>&nbsp;<span class="ident" id="7841354">test</span><span class="op" id="7841358">.</span><span class="ident" id="7841359">out</span><span class="op" id="7841362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841369">}</span><br>
<span class="lineno">390</span><span class="op" id="7841371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7841374">func</span>&nbsp;<span class="ident" id="7841379">TestRatGobEncoding</span><span class="op" id="7841397">(</span><span class="ident" id="7841398">t</span>&nbsp;<span class="op" id="7841400">*</span><span class="ident" id="7841401">testing</span><span class="op" id="7841408">.</span><span class="ident" id="7841409">T</span><span class="op" id="7841410">)</span>&nbsp;<span class="op" id="7841412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841415">var</span>&nbsp;<span class="ident" id="7841419">medium</span>&nbsp;<span class="ident" id="7841426">bytes</span><span class="op" id="7841431">.</span><span class="ident" id="7841432">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841440">enc</span>&nbsp;<span class="op" id="7841444">:=</span>&nbsp;<span class="ident" id="7841447">gob</span><span class="op" id="7841450">.</span><span class="ident" id="7841451">NewEncoder</span><span class="op" id="7841461">(</span><span class="op" id="7841462">&amp;</span><span class="ident" id="7841463">medium</span><span class="op" id="7841469">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841472">dec</span>&nbsp;<span class="op" id="7841476">:=</span>&nbsp;<span class="ident" id="7841479">gob</span><span class="op" id="7841482">.</span><span class="ident" id="7841483">NewDecoder</span><span class="op" id="7841493">(</span><span class="op" id="7841494">&amp;</span><span class="ident" id="7841495">medium</span><span class="op" id="7841501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841504">for</span>&nbsp;<span class="ident" id="7841508">_</span><span class="op" id="7841509">,</span>&nbsp;<span class="ident" id="7841511">test</span>&nbsp;<span class="op" id="7841516">:=</span>&nbsp;<span class="keyword" id="7841519">range</span>&nbsp;<span class="ident" id="7841525">encodingTests</span>&nbsp;<span class="op" id="7841539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841543">medium</span><span class="op" id="7841549">.</span><span class="ident" id="7841550">Reset</span><span class="op" id="7841555">(</span><span class="op" id="7841556">)</span>&nbsp;<span class="comment" id="7841558">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841617">var</span>&nbsp;<span class="ident" id="7841621">tx</span>&nbsp;<span class="ident" id="7841624">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841630">tx</span><span class="op" id="7841632">.</span><span class="ident" id="7841633">SetString</span><span class="op" id="7841642">(</span><span class="ident" id="7841643">test</span>&nbsp;<span class="op" id="7841648">+</span>&nbsp;<span class="string" id="7841650">&#34;.14159265&#34;</span><span class="op" id="7841661">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841665">if</span>&nbsp;<span class="ident" id="7841668">err</span>&nbsp;<span class="op" id="7841672">:=</span>&nbsp;<span class="ident" id="7841675">enc</span><span class="op" id="7841678">.</span><span class="ident" id="7841679">Encode</span><span class="op" id="7841685">(</span><span class="op" id="7841686">&amp;</span><span class="ident" id="7841687">tx</span><span class="op" id="7841689">)</span><span class="op" id="7841690">;</span>&nbsp;<span class="ident" id="7841692">err</span>&nbsp;<span class="op" id="7841696">!=</span>&nbsp;<span class="ident" id="7841699">nil</span>&nbsp;<span class="op" id="7841703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841708">t</span><span class="op" id="7841709">.</span><span class="ident" id="7841710">Errorf</span><span class="op" id="7841716">(</span><span class="string" id="7841717">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7841744">,</span>&nbsp;<span class="op" id="7841746">&amp;</span><span class="ident" id="7841747">tx</span><span class="op" id="7841749">,</span>&nbsp;<span class="ident" id="7841751">err</span><span class="op" id="7841754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841762">var</span>&nbsp;<span class="ident" id="7841766">rx</span>&nbsp;<span class="ident" id="7841769">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841775">if</span>&nbsp;<span class="ident" id="7841778">err</span>&nbsp;<span class="op" id="7841782">:=</span>&nbsp;<span class="ident" id="7841785">dec</span><span class="op" id="7841788">.</span><span class="ident" id="7841789">Decode</span><span class="op" id="7841795">(</span><span class="op" id="7841796">&amp;</span><span class="ident" id="7841797">rx</span><span class="op" id="7841799">)</span><span class="op" id="7841800">;</span>&nbsp;<span class="ident" id="7841802">err</span>&nbsp;<span class="op" id="7841806">!=</span>&nbsp;<span class="ident" id="7841809">nil</span>&nbsp;<span class="op" id="7841813">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841818">t</span><span class="op" id="7841819">.</span><span class="ident" id="7841820">Errorf</span><span class="op" id="7841826">(</span><span class="string" id="7841827">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7841854">,</span>&nbsp;<span class="op" id="7841856">&amp;</span><span class="ident" id="7841857">tx</span><span class="op" id="7841859">,</span>&nbsp;<span class="ident" id="7841861">err</span><span class="op" id="7841864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841872">if</span>&nbsp;<span class="ident" id="7841875">rx</span><span class="op" id="7841877">.</span><span class="ident" id="7841878">Cmp</span><span class="op" id="7841881">(</span><span class="op" id="7841882">&amp;</span><span class="ident" id="7841883">tx</span><span class="op" id="7841885">)</span>&nbsp;<span class="op" id="7841887">!=</span>&nbsp;<span class="num" id="7841890">0</span>&nbsp;<span class="op" id="7841892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841897">t</span><span class="op" id="7841898">.</span><span class="ident" id="7841899">Errorf</span><span class="op" id="7841905">(</span><span class="string" id="7841906">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7841949">,</span>&nbsp;<span class="op" id="7841951">&amp;</span><span class="ident" id="7841952">tx</span><span class="op" id="7841954">,</span>&nbsp;<span class="op" id="7841956">&amp;</span><span class="ident" id="7841957">rx</span><span class="op" id="7841959">,</span>&nbsp;<span class="op" id="7841961">&amp;</span><span class="ident" id="7841962">tx</span><span class="op" id="7841964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841968">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841971">}</span><br>
<span class="lineno"></span><span class="op" id="7841973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7841976">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7842071">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7842096">func</span>&nbsp;<span class="ident" id="7842101">TestGobEncodingNilRatInSlice</span><span class="op" id="7842129">(</span><span class="ident" id="7842130">t</span>&nbsp;<span class="op" id="7842132">*</span><span class="ident" id="7842133">testing</span><span class="op" id="7842140">.</span><span class="ident" id="7842141">T</span><span class="op" id="7842142">)</span>&nbsp;<span class="op" id="7842144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842147">buf</span>&nbsp;<span class="op" id="7842151">:=</span>&nbsp;<span class="builtinfunc" id="7842154">new</span><span class="op" id="7842157">(</span><span class="ident" id="7842158">bytes</span><span class="op" id="7842163">.</span><span class="ident" id="7842164">Buffer</span><span class="op" id="7842170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842173">enc</span>&nbsp;<span class="op" id="7842177">:=</span>&nbsp;<span class="ident" id="7842180">gob</span><span class="op" id="7842183">.</span><span class="ident" id="7842184">NewEncoder</span><span class="op" id="7842194">(</span><span class="ident" id="7842195">buf</span><span class="op" id="7842198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842201">dec</span>&nbsp;<span class="op" id="7842205">:=</span>&nbsp;<span class="ident" id="7842208">gob</span><span class="op" id="7842211">.</span><span class="ident" id="7842212">NewDecoder</span><span class="op" id="7842222">(</span><span class="ident" id="7842223">buf</span><span class="op" id="7842226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842230">var</span>&nbsp;<span class="ident" id="7842234">in</span>&nbsp;<span class="op" id="7842237">=</span>&nbsp;<span class="builtinfunc" id="7842239">make</span><span class="op" id="7842243">(</span><span class="op" id="7842244">[</span><span class="op" id="7842245">]</span><span class="op" id="7842246">*</span><span class="ident" id="7842247">Rat</span><span class="op" id="7842250">,</span>&nbsp;<span class="num" id="7842252">1</span><span class="op" id="7842253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842256">err</span>&nbsp;<span class="op" id="7842260">:=</span>&nbsp;<span class="ident" id="7842263">enc</span><span class="op" id="7842266">.</span><span class="ident" id="7842267">Encode</span><span class="op" id="7842273">(</span><span class="op" id="7842274">&amp;</span><span class="ident" id="7842275">in</span><span class="op" id="7842277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842280">if</span>&nbsp;<span class="ident" id="7842283">err</span>&nbsp;<span class="op" id="7842287">!=</span>&nbsp;<span class="ident" id="7842290">nil</span>&nbsp;<span class="op" id="7842294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842298">t</span><span class="op" id="7842299">.</span><span class="ident" id="7842300">Errorf</span><span class="op" id="7842306">(</span><span class="string" id="7842307">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7842330">,</span>&nbsp;<span class="ident" id="7842332">err</span><span class="op" id="7842335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842338">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842341">var</span>&nbsp;<span class="ident" id="7842345">out</span>&nbsp;<span class="op" id="7842349">[</span><span class="op" id="7842350">]</span><span class="op" id="7842351">*</span><span class="ident" id="7842352">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842357">err</span>&nbsp;<span class="op" id="7842361">=</span>&nbsp;<span class="ident" id="7842363">dec</span><span class="op" id="7842366">.</span><span class="ident" id="7842367">Decode</span><span class="op" id="7842373">(</span><span class="op" id="7842374">&amp;</span><span class="ident" id="7842375">out</span><span class="op" id="7842378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842381">if</span>&nbsp;<span class="ident" id="7842384">err</span>&nbsp;<span class="op" id="7842388">!=</span>&nbsp;<span class="ident" id="7842391">nil</span>&nbsp;<span class="op" id="7842395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842399">t</span><span class="op" id="7842400">.</span><span class="ident" id="7842401">Fatalf</span><span class="op" id="7842407">(</span><span class="string" id="7842408">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7842431">,</span>&nbsp;<span class="ident" id="7842433">err</span><span class="op" id="7842436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842439">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842442">if</span>&nbsp;<span class="builtinfunc" id="7842445">len</span><span class="op" id="7842448">(</span><span class="ident" id="7842449">out</span><span class="op" id="7842452">)</span>&nbsp;<span class="op" id="7842454">!=</span>&nbsp;<span class="num" id="7842457">1</span>&nbsp;<span class="op" id="7842459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842463">t</span><span class="op" id="7842464">.</span><span class="ident" id="7842465">Fatalf</span><span class="op" id="7842471">(</span><span class="string" id="7842472">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7842498">,</span>&nbsp;<span class="builtinfunc" id="7842500">len</span><span class="op" id="7842503">(</span><span class="ident" id="7842504">out</span><span class="op" id="7842507">)</span><span class="op" id="7842508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842514">var</span>&nbsp;<span class="ident" id="7842518">zero</span>&nbsp;<span class="ident" id="7842523">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842528">if</span>&nbsp;<span class="ident" id="7842531">out</span><span class="op" id="7842534">[</span><span class="num" id="7842535">0</span><span class="op" id="7842536">]</span><span class="op" id="7842537">.</span><span class="ident" id="7842538">Cmp</span><span class="op" id="7842541">(</span><span class="op" id="7842542">&amp;</span><span class="ident" id="7842543">zero</span><span class="op" id="7842547">)</span>&nbsp;<span class="op" id="7842549">!=</span>&nbsp;<span class="num" id="7842552">0</span>&nbsp;<span class="op" id="7842554">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842558">t</span><span class="op" id="7842559">.</span><span class="ident" id="7842560">Errorf</span><span class="op" id="7842566">(</span><span class="string" id="7842567">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7842619">,</span>&nbsp;<span class="ident" id="7842621">out</span><span class="op" id="7842624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842627">}</span><br>
<span class="lineno"></span><span class="op" id="7842629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7842632">var</span>&nbsp;<span class="ident" id="7842636">ratNums</span>&nbsp;<span class="op" id="7842644">=</span>&nbsp;<span class="op" id="7842646">[</span><span class="op" id="7842647">]</span><span class="builtintype" id="7842648">string</span><span class="op" id="7842654">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842657">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7842735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842738">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7842781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842784">&#34;-141592653589793&#34;</span><span class="op" id="7842802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842805">&#34;-1&#34;</span><span class="op" id="7842809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842812">&#34;0&#34;</span><span class="op" id="7842815">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842818">&#34;1&#34;</span><span class="op" id="7842821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842824">&#34;141592653589793&#34;</span><span class="op" id="7842841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842844">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7842886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842889">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7842966">,</span><br>
<span class="lineno"></span><span class="op" id="7842968">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7842971">var</span>&nbsp;<span class="ident" id="7842975">ratDenoms</span>&nbsp;<span class="op" id="7842985">=</span>&nbsp;<span class="op" id="7842987">[</span><span class="op" id="7842988">]</span><span class="builtintype" id="7842989">string</span><span class="op" id="7842995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7842998">&#34;1&#34;</span><span class="op" id="7843001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843004">&#34;718281828459045&#34;</span><span class="op" id="7843021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843024">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7843066">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843069">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7843146">,</span><br>
<span class="lineno"></span><span class="op" id="7843148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843151">func</span>&nbsp;<span class="ident" id="7843156">TestRatJSONEncoding</span><span class="op" id="7843175">(</span><span class="ident" id="7843176">t</span>&nbsp;<span class="op" id="7843178">*</span><span class="ident" id="7843179">testing</span><span class="op" id="7843186">.</span><span class="ident" id="7843187">T</span><span class="op" id="7843188">)</span>&nbsp;<span class="op" id="7843190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843193">for</span>&nbsp;<span class="ident" id="7843197">_</span><span class="op" id="7843198">,</span>&nbsp;<span class="ident" id="7843200">num</span>&nbsp;<span class="op" id="7843204">:=</span>&nbsp;<span class="keyword" id="7843207">range</span>&nbsp;<span class="ident" id="7843213">ratNums</span>&nbsp;<span class="op" id="7843221">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843225">for</span>&nbsp;<span class="ident" id="7843229">_</span><span class="op" id="7843230">,</span>&nbsp;<span class="ident" id="7843232">denom</span>&nbsp;<span class="op" id="7843238">:=</span>&nbsp;<span class="keyword" id="7843241">range</span>&nbsp;<span class="ident" id="7843247">ratDenoms</span>&nbsp;<span class="op" id="7843257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843262">var</span>&nbsp;<span class="ident" id="7843266">tx</span>&nbsp;<span class="ident" id="7843269">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843276">tx</span><span class="op" id="7843278">.</span><span class="ident" id="7843279">SetString</span><span class="op" id="7843288">(</span><span class="ident" id="7843289">num</span>&nbsp;<span class="op" id="7843293">+</span>&nbsp;<span class="string" id="7843295">&#34;/&#34;</span>&nbsp;<span class="op" id="7843299">+</span>&nbsp;<span class="ident" id="7843301">denom</span><span class="op" id="7843306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843311">b</span><span class="op" id="7843312">,</span>&nbsp;<span class="ident" id="7843314">err</span>&nbsp;<span class="op" id="7843318">:=</span>&nbsp;<span class="ident" id="7843321">json</span><span class="op" id="7843325">.</span><span class="ident" id="7843326">Marshal</span><span class="op" id="7843333">(</span><span class="op" id="7843334">&amp;</span><span class="ident" id="7843335">tx</span><span class="op" id="7843337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843342">if</span>&nbsp;<span class="ident" id="7843345">err</span>&nbsp;<span class="op" id="7843349">!=</span>&nbsp;<span class="ident" id="7843352">nil</span>&nbsp;<span class="op" id="7843356">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843362">t</span><span class="op" id="7843363">.</span><span class="ident" id="7843364">Errorf</span><span class="op" id="7843370">(</span><span class="string" id="7843371">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7843400">,</span>&nbsp;<span class="op" id="7843402">&amp;</span><span class="ident" id="7843403">tx</span><span class="op" id="7843405">,</span>&nbsp;<span class="ident" id="7843407">err</span><span class="op" id="7843410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843416">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843433">var</span>&nbsp;<span class="ident" id="7843437">rx</span>&nbsp;<span class="ident" id="7843440">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843447">if</span>&nbsp;<span class="ident" id="7843450">err</span>&nbsp;<span class="op" id="7843454">:=</span>&nbsp;<span class="ident" id="7843457">json</span><span class="op" id="7843461">.</span><span class="ident" id="7843462">Unmarshal</span><span class="op" id="7843471">(</span><span class="ident" id="7843472">b</span><span class="op" id="7843473">,</span>&nbsp;<span class="op" id="7843475">&amp;</span><span class="ident" id="7843476">rx</span><span class="op" id="7843478">)</span><span class="op" id="7843479">;</span>&nbsp;<span class="ident" id="7843481">err</span>&nbsp;<span class="op" id="7843485">!=</span>&nbsp;<span class="ident" id="7843488">nil</span>&nbsp;<span class="op" id="7843492">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843498">t</span><span class="op" id="7843499">.</span><span class="ident" id="7843500">Errorf</span><span class="op" id="7843506">(</span><span class="string" id="7843507">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7843538">,</span>&nbsp;<span class="op" id="7843540">&amp;</span><span class="ident" id="7843541">tx</span><span class="op" id="7843543">,</span>&nbsp;<span class="ident" id="7843545">err</span><span class="op" id="7843548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843554">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843571">if</span>&nbsp;<span class="ident" id="7843574">rx</span><span class="op" id="7843576">.</span><span class="ident" id="7843577">Cmp</span><span class="op" id="7843580">(</span><span class="op" id="7843581">&amp;</span><span class="ident" id="7843582">tx</span><span class="op" id="7843584">)</span>&nbsp;<span class="op" id="7843586">!=</span>&nbsp;<span class="num" id="7843589">0</span>&nbsp;<span class="op" id="7843591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843597">t</span><span class="op" id="7843598">.</span><span class="ident" id="7843599">Errorf</span><span class="op" id="7843605">(</span><span class="string" id="7843606">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7843650">,</span>&nbsp;<span class="op" id="7843652">&amp;</span><span class="ident" id="7843653">tx</span><span class="op" id="7843655">,</span>&nbsp;<span class="op" id="7843657">&amp;</span><span class="ident" id="7843658">rx</span><span class="op" id="7843660">,</span>&nbsp;<span class="op" id="7843662">&amp;</span><span class="ident" id="7843663">tx</span><span class="op" id="7843665">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843677">}</span><br>
<span class="lineno"></span><span class="op" id="7843679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7843682">func</span>&nbsp;<span class="ident" id="7843687">TestRatXMLEncoding</span><span class="op" id="7843705">(</span><span class="ident" id="7843706">t</span>&nbsp;<span class="op" id="7843708">*</span><span class="ident" id="7843709">testing</span><span class="op" id="7843716">.</span><span class="ident" id="7843717">T</span><span class="op" id="7843718">)</span>&nbsp;<span class="op" id="7843720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843723">for</span>&nbsp;<span class="ident" id="7843727">_</span><span class="op" id="7843728">,</span>&nbsp;<span class="ident" id="7843730">num</span>&nbsp;<span class="op" id="7843734">:=</span>&nbsp;<span class="keyword" id="7843737">range</span>&nbsp;<span class="ident" id="7843743">ratNums</span>&nbsp;<span class="op" id="7843751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843755">for</span>&nbsp;<span class="ident" id="7843759">_</span><span class="op" id="7843760">,</span>&nbsp;<span class="ident" id="7843762">denom</span>&nbsp;<span class="op" id="7843768">:=</span>&nbsp;<span class="keyword" id="7843771">range</span>&nbsp;<span class="ident" id="7843777">ratDenoms</span>&nbsp;<span class="op" id="7843787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843792">var</span>&nbsp;<span class="ident" id="7843796">tx</span>&nbsp;<span class="ident" id="7843799">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843806">tx</span><span class="op" id="7843808">.</span><span class="ident" id="7843809">SetString</span><span class="op" id="7843818">(</span><span class="ident" id="7843819">num</span>&nbsp;<span class="op" id="7843823">+</span>&nbsp;<span class="string" id="7843825">&#34;/&#34;</span>&nbsp;<span class="op" id="7843829">+</span>&nbsp;<span class="ident" id="7843831">denom</span><span class="op" id="7843836">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843841">b</span><span class="op" id="7843842">,</span>&nbsp;<span class="ident" id="7843844">err</span>&nbsp;<span class="op" id="7843848">:=</span>&nbsp;<span class="ident" id="7843851">xml</span><span class="op" id="7843854">.</span><span class="ident" id="7843855">Marshal</span><span class="op" id="7843862">(</span><span class="op" id="7843863">&amp;</span><span class="ident" id="7843864">tx</span><span class="op" id="7843866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843871">if</span>&nbsp;<span class="ident" id="7843874">err</span>&nbsp;<span class="op" id="7843878">!=</span>&nbsp;<span class="ident" id="7843881">nil</span>&nbsp;<span class="op" id="7843885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843891">t</span><span class="op" id="7843892">.</span><span class="ident" id="7843893">Errorf</span><span class="op" id="7843899">(</span><span class="string" id="7843900">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7843929">,</span>&nbsp;<span class="op" id="7843931">&amp;</span><span class="ident" id="7843932">tx</span><span class="op" id="7843934">,</span>&nbsp;<span class="ident" id="7843936">err</span><span class="op" id="7843939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843945">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843957">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843962">var</span>&nbsp;<span class="ident" id="7843966">rx</span>&nbsp;<span class="ident" id="7843969">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843976">if</span>&nbsp;<span class="ident" id="7843979">err</span>&nbsp;<span class="op" id="7843983">:=</span>&nbsp;<span class="ident" id="7843986">xml</span><span class="op" id="7843989">.</span><span class="ident" id="7843990">Unmarshal</span><span class="op" id="7843999">(</span><span class="ident" id="7844000">b</span><span class="op" id="7844001">,</span>&nbsp;<span class="op" id="7844003">&amp;</span><span class="ident" id="7844004">rx</span><span class="op" id="7844006">)</span><span class="op" id="7844007">;</span>&nbsp;<span class="ident" id="7844009">err</span>&nbsp;<span class="op" id="7844013">!=</span>&nbsp;<span class="ident" id="7844016">nil</span>&nbsp;<span class="op" id="7844020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844026">t</span><span class="op" id="7844027">.</span><span class="ident" id="7844028">Errorf</span><span class="op" id="7844034">(</span><span class="string" id="7844035">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7844066">,</span>&nbsp;<span class="op" id="7844068">&amp;</span><span class="ident" id="7844069">tx</span><span class="op" id="7844071">,</span>&nbsp;<span class="ident" id="7844073">err</span><span class="op" id="7844076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844082">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844094">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844099">if</span>&nbsp;<span class="ident" id="7844102">rx</span><span class="op" id="7844104">.</span><span class="ident" id="7844105">Cmp</span><span class="op" id="7844108">(</span><span class="op" id="7844109">&amp;</span><span class="ident" id="7844110">tx</span><span class="op" id="7844112">)</span>&nbsp;<span class="op" id="7844114">!=</span>&nbsp;<span class="num" id="7844117">0</span>&nbsp;<span class="op" id="7844119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844125">t</span><span class="op" id="7844126">.</span><span class="ident" id="7844127">Errorf</span><span class="op" id="7844133">(</span><span class="string" id="7844134">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844177">,</span>&nbsp;<span class="op" id="7844179">&amp;</span><span class="ident" id="7844180">tx</span><span class="op" id="7844182">,</span>&nbsp;<span class="op" id="7844184">&amp;</span><span class="ident" id="7844185">rx</span><span class="op" id="7844187">,</span>&nbsp;<span class="op" id="7844189">&amp;</span><span class="ident" id="7844190">tx</span><span class="op" id="7844192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844204">}</span><br>
<span class="lineno">500</span><span class="op" id="7844206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7844209">func</span>&nbsp;<span class="ident" id="7844214">TestIssue2379</span><span class="op" id="7844227">(</span><span class="ident" id="7844228">t</span>&nbsp;<span class="op" id="7844230">*</span><span class="ident" id="7844231">testing</span><span class="op" id="7844238">.</span><span class="ident" id="7844239">T</span><span class="op" id="7844240">)</span>&nbsp;<span class="op" id="7844242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844245">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844264">q</span>&nbsp;<span class="op" id="7844266">:=</span>&nbsp;<span class="ident" id="7844269">NewRat</span><span class="op" id="7844275">(</span><span class="num" id="7844276">3</span><span class="op" id="7844277">,</span>&nbsp;<span class="num" id="7844279">2</span><span class="op" id="7844280">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844283">x</span>&nbsp;<span class="op" id="7844285">:=</span>&nbsp;<span class="builtinfunc" id="7844288">new</span><span class="op" id="7844291">(</span><span class="ident" id="7844292">Rat</span><span class="op" id="7844295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844298">x</span><span class="op" id="7844299">.</span><span class="ident" id="7844300">SetFrac</span><span class="op" id="7844307">(</span><span class="ident" id="7844308">NewInt</span><span class="op" id="7844314">(</span><span class="num" id="7844315">3</span><span class="op" id="7844316">)</span><span class="op" id="7844317">,</span>&nbsp;<span class="ident" id="7844319">NewInt</span><span class="op" id="7844325">(</span><span class="num" id="7844326">2</span><span class="op" id="7844327">)</span><span class="op" id="7844328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844331">if</span>&nbsp;<span class="ident" id="7844334">x</span><span class="op" id="7844335">.</span><span class="ident" id="7844336">Cmp</span><span class="op" id="7844339">(</span><span class="ident" id="7844340">q</span><span class="op" id="7844341">)</span>&nbsp;<span class="op" id="7844343">!=</span>&nbsp;<span class="num" id="7844346">0</span>&nbsp;<span class="op" id="7844348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844352">t</span><span class="op" id="7844353">.</span><span class="ident" id="7844354">Errorf</span><span class="op" id="7844360">(</span><span class="string" id="7844361">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844380">,</span>&nbsp;<span class="ident" id="7844382">x</span><span class="op" id="7844383">,</span>&nbsp;<span class="ident" id="7844385">q</span><span class="op" id="7844386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844389">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844393">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844422">x</span>&nbsp;<span class="op" id="7844424">=</span>&nbsp;<span class="ident" id="7844426">NewRat</span><span class="op" id="7844432">(</span><span class="num" id="7844433">2</span><span class="op" id="7844434">,</span>&nbsp;<span class="num" id="7844436">3</span><span class="op" id="7844437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844440">x</span><span class="op" id="7844441">.</span><span class="ident" id="7844442">SetFrac</span><span class="op" id="7844449">(</span><span class="ident" id="7844450">NewInt</span><span class="op" id="7844456">(</span><span class="num" id="7844457">3</span><span class="op" id="7844458">)</span><span class="op" id="7844459">,</span>&nbsp;<span class="ident" id="7844461">x</span><span class="op" id="7844462">.</span><span class="ident" id="7844463">Num</span><span class="op" id="7844466">(</span><span class="op" id="7844467">)</span><span class="op" id="7844468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844471">if</span>&nbsp;<span class="ident" id="7844474">x</span><span class="op" id="7844475">.</span><span class="ident" id="7844476">Cmp</span><span class="op" id="7844479">(</span><span class="ident" id="7844480">q</span><span class="op" id="7844481">)</span>&nbsp;<span class="op" id="7844483">!=</span>&nbsp;<span class="num" id="7844486">0</span>&nbsp;<span class="op" id="7844488">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844492">t</span><span class="op" id="7844493">.</span><span class="ident" id="7844494">Errorf</span><span class="op" id="7844500">(</span><span class="string" id="7844501">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844520">,</span>&nbsp;<span class="ident" id="7844522">x</span><span class="op" id="7844523">,</span>&nbsp;<span class="ident" id="7844525">q</span><span class="op" id="7844526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844533">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844564">x</span>&nbsp;<span class="op" id="7844566">=</span>&nbsp;<span class="ident" id="7844568">NewRat</span><span class="op" id="7844574">(</span><span class="num" id="7844575">2</span><span class="op" id="7844576">,</span>&nbsp;<span class="num" id="7844578">3</span><span class="op" id="7844579">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844582">x</span><span class="op" id="7844583">.</span><span class="ident" id="7844584">SetFrac</span><span class="op" id="7844591">(</span><span class="ident" id="7844592">x</span><span class="op" id="7844593">.</span><span class="ident" id="7844594">Denom</span><span class="op" id="7844599">(</span><span class="op" id="7844600">)</span><span class="op" id="7844601">,</span>&nbsp;<span class="ident" id="7844603">NewInt</span><span class="op" id="7844609">(</span><span class="num" id="7844610">2</span><span class="op" id="7844611">)</span><span class="op" id="7844612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844615">if</span>&nbsp;<span class="ident" id="7844618">x</span><span class="op" id="7844619">.</span><span class="ident" id="7844620">Cmp</span><span class="op" id="7844623">(</span><span class="ident" id="7844624">q</span><span class="op" id="7844625">)</span>&nbsp;<span class="op" id="7844627">!=</span>&nbsp;<span class="num" id="7844630">0</span>&nbsp;<span class="op" id="7844632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844636">t</span><span class="op" id="7844637">.</span><span class="ident" id="7844638">Errorf</span><span class="op" id="7844644">(</span><span class="string" id="7844645">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844664">,</span>&nbsp;<span class="ident" id="7844666">x</span><span class="op" id="7844667">,</span>&nbsp;<span class="ident" id="7844669">q</span><span class="op" id="7844670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844677">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844722">x</span>&nbsp;<span class="op" id="7844724">=</span>&nbsp;<span class="ident" id="7844726">NewRat</span><span class="op" id="7844732">(</span><span class="num" id="7844733">2</span><span class="op" id="7844734">,</span>&nbsp;<span class="num" id="7844736">3</span><span class="op" id="7844737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844740">x</span><span class="op" id="7844741">.</span><span class="ident" id="7844742">SetFrac</span><span class="op" id="7844749">(</span><span class="ident" id="7844750">x</span><span class="op" id="7844751">.</span><span class="ident" id="7844752">Denom</span><span class="op" id="7844757">(</span><span class="op" id="7844758">)</span><span class="op" id="7844759">,</span>&nbsp;<span class="ident" id="7844761">x</span><span class="op" id="7844762">.</span><span class="ident" id="7844763">Num</span><span class="op" id="7844766">(</span><span class="op" id="7844767">)</span><span class="op" id="7844768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844771">if</span>&nbsp;<span class="ident" id="7844774">x</span><span class="op" id="7844775">.</span><span class="ident" id="7844776">Cmp</span><span class="op" id="7844779">(</span><span class="ident" id="7844780">q</span><span class="op" id="7844781">)</span>&nbsp;<span class="op" id="7844783">!=</span>&nbsp;<span class="num" id="7844786">0</span>&nbsp;<span class="op" id="7844788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844792">t</span><span class="op" id="7844793">.</span><span class="ident" id="7844794">Errorf</span><span class="op" id="7844800">(</span><span class="string" id="7844801">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844820">,</span>&nbsp;<span class="ident" id="7844822">x</span><span class="op" id="7844823">,</span>&nbsp;<span class="ident" id="7844825">q</span><span class="op" id="7844826">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7844833">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844879">q</span>&nbsp;<span class="op" id="7844881">=</span>&nbsp;<span class="ident" id="7844883">NewRat</span><span class="op" id="7844889">(</span><span class="num" id="7844890">1</span><span class="op" id="7844891">,</span>&nbsp;<span class="num" id="7844893">1</span><span class="op" id="7844894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844897">x</span>&nbsp;<span class="op" id="7844899">=</span>&nbsp;<span class="builtinfunc" id="7844901">new</span><span class="op" id="7844904">(</span><span class="ident" id="7844905">Rat</span><span class="op" id="7844908">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844911">n</span>&nbsp;<span class="op" id="7844913">:=</span>&nbsp;<span class="ident" id="7844916">NewInt</span><span class="op" id="7844922">(</span><span class="num" id="7844923">7</span><span class="op" id="7844924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844927">x</span><span class="op" id="7844928">.</span><span class="ident" id="7844929">SetFrac</span><span class="op" id="7844936">(</span><span class="ident" id="7844937">n</span><span class="op" id="7844938">,</span>&nbsp;<span class="ident" id="7844940">n</span><span class="op" id="7844941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844944">if</span>&nbsp;<span class="ident" id="7844947">x</span><span class="op" id="7844948">.</span><span class="ident" id="7844949">Cmp</span><span class="op" id="7844952">(</span><span class="ident" id="7844953">q</span><span class="op" id="7844954">)</span>&nbsp;<span class="op" id="7844956">!=</span>&nbsp;<span class="num" id="7844959">0</span>&nbsp;<span class="op" id="7844961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844965">t</span><span class="op" id="7844966">.</span><span class="ident" id="7844967">Errorf</span><span class="op" id="7844973">(</span><span class="string" id="7844974">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844993">,</span>&nbsp;<span class="ident" id="7844995">x</span><span class="op" id="7844996">,</span>&nbsp;<span class="ident" id="7844998">q</span><span class="op" id="7844999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845002">}</span><br>
<span class="lineno">540</span><span class="op" id="7845004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7845007">func</span>&nbsp;<span class="ident" id="7845012">TestIssue3521</span><span class="op" id="7845025">(</span><span class="ident" id="7845026">t</span>&nbsp;<span class="op" id="7845028">*</span><span class="ident" id="7845029">testing</span><span class="op" id="7845036">.</span><span class="ident" id="7845037">T</span><span class="op" id="7845038">)</span>&nbsp;<span class="op" id="7845040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845043">a</span>&nbsp;<span class="op" id="7845045">:=</span>&nbsp;<span class="builtinfunc" id="7845048">new</span><span class="op" id="7845051">(</span><span class="ident" id="7845052">Int</span><span class="op" id="7845055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845058">b</span>&nbsp;<span class="op" id="7845060">:=</span>&nbsp;<span class="builtinfunc" id="7845063">new</span><span class="op" id="7845066">(</span><span class="ident" id="7845067">Int</span><span class="op" id="7845070">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845073">a</span><span class="op" id="7845074">.</span><span class="ident" id="7845075">SetString</span><span class="op" id="7845084">(</span><span class="string" id="7845085">&#34;64375784358435883458348587&#34;</span><span class="op" id="7845113">,</span>&nbsp;<span class="num" id="7845115">0</span><span class="op" id="7845116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845119">b</span><span class="op" id="7845120">.</span><span class="ident" id="7845121">SetString</span><span class="op" id="7845130">(</span><span class="string" id="7845131">&#34;4789759874531&#34;</span><span class="op" id="7845146">,</span>&nbsp;<span class="num" id="7845148">0</span><span class="op" id="7845149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845153">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845198">zero</span>&nbsp;<span class="op" id="7845203">:=</span>&nbsp;<span class="builtinfunc" id="7845206">new</span><span class="op" id="7845209">(</span><span class="ident" id="7845210">Rat</span><span class="op" id="7845213">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845216">one</span>&nbsp;<span class="op" id="7845220">:=</span>&nbsp;<span class="ident" id="7845223">NewInt</span><span class="op" id="7845229">(</span><span class="num" id="7845230">1</span><span class="op" id="7845231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845234">if</span>&nbsp;<span class="ident" id="7845237">zero</span><span class="op" id="7845241">.</span><span class="ident" id="7845242">Denom</span><span class="op" id="7845247">(</span><span class="op" id="7845248">)</span><span class="op" id="7845249">.</span><span class="ident" id="7845250">Cmp</span><span class="op" id="7845253">(</span><span class="ident" id="7845254">one</span><span class="op" id="7845257">)</span>&nbsp;<span class="op" id="7845259">!=</span>&nbsp;<span class="num" id="7845262">0</span>&nbsp;<span class="op" id="7845264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845268">t</span><span class="op" id="7845269">.</span><span class="ident" id="7845270">Errorf</span><span class="op" id="7845276">(</span><span class="string" id="7845277">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845296">,</span>&nbsp;<span class="ident" id="7845298">zero</span><span class="op" id="7845302">.</span><span class="ident" id="7845303">Denom</span><span class="op" id="7845308">(</span><span class="op" id="7845309">)</span><span class="op" id="7845310">,</span>&nbsp;<span class="ident" id="7845312">one</span><span class="op" id="7845315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845322">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845383">x</span>&nbsp;<span class="op" id="7845385">:=</span>&nbsp;<span class="builtinfunc" id="7845388">new</span><span class="op" id="7845391">(</span><span class="ident" id="7845392">Rat</span><span class="op" id="7845395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845398">x</span><span class="op" id="7845399">.</span><span class="ident" id="7845400">Denom</span><span class="op" id="7845405">(</span><span class="op" id="7845406">)</span><span class="op" id="7845407">.</span><span class="ident" id="7845408">Set</span><span class="op" id="7845411">(</span><span class="builtinfunc" id="7845412">new</span><span class="op" id="7845415">(</span><span class="ident" id="7845416">Int</span><span class="op" id="7845419">)</span><span class="op" id="7845420">.</span><span class="ident" id="7845421">Neg</span><span class="op" id="7845424">(</span><span class="ident" id="7845425">b</span><span class="op" id="7845426">)</span><span class="op" id="7845427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845430">if</span>&nbsp;<span class="ident" id="7845433">x</span><span class="op" id="7845434">.</span><span class="ident" id="7845435">Cmp</span><span class="op" id="7845438">(</span><span class="ident" id="7845439">zero</span><span class="op" id="7845443">)</span>&nbsp;<span class="op" id="7845445">!=</span>&nbsp;<span class="num" id="7845448">0</span>&nbsp;<span class="op" id="7845450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845454">t</span><span class="op" id="7845455">.</span><span class="ident" id="7845456">Errorf</span><span class="op" id="7845462">(</span><span class="string" id="7845463">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845483">,</span>&nbsp;<span class="ident" id="7845485">x</span><span class="op" id="7845486">,</span>&nbsp;<span class="ident" id="7845488">zero</span><span class="op" id="7845492">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845499">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845557">x</span><span class="op" id="7845558">.</span><span class="ident" id="7845559">Num</span><span class="op" id="7845562">(</span><span class="op" id="7845563">)</span><span class="op" id="7845564">.</span><span class="ident" id="7845565">Set</span><span class="op" id="7845568">(</span><span class="ident" id="7845569">a</span><span class="op" id="7845570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845573">qab</span>&nbsp;<span class="op" id="7845577">:=</span>&nbsp;<span class="builtinfunc" id="7845580">new</span><span class="op" id="7845583">(</span><span class="ident" id="7845584">Rat</span><span class="op" id="7845587">)</span><span class="op" id="7845588">.</span><span class="ident" id="7845589">SetFrac</span><span class="op" id="7845596">(</span><span class="ident" id="7845597">a</span><span class="op" id="7845598">,</span>&nbsp;<span class="ident" id="7845600">b</span><span class="op" id="7845601">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845604">if</span>&nbsp;<span class="ident" id="7845607">x</span><span class="op" id="7845608">.</span><span class="ident" id="7845609">Cmp</span><span class="op" id="7845612">(</span><span class="ident" id="7845613">qab</span><span class="op" id="7845616">)</span>&nbsp;<span class="op" id="7845618">!=</span>&nbsp;<span class="num" id="7845621">0</span>&nbsp;<span class="op" id="7845623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845627">t</span><span class="op" id="7845628">.</span><span class="ident" id="7845629">Errorf</span><span class="op" id="7845635">(</span><span class="string" id="7845636">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845656">,</span>&nbsp;<span class="ident" id="7845658">x</span><span class="op" id="7845659">,</span>&nbsp;<span class="ident" id="7845661">qab</span><span class="op" id="7845664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845671">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845741">x</span><span class="op" id="7845742">.</span><span class="ident" id="7845743">SetFrac64</span><span class="op" id="7845752">(</span><span class="num" id="7845753">10</span><span class="op" id="7845755">,</span>&nbsp;<span class="num" id="7845757">2</span><span class="op" id="7845758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845761">x</span><span class="op" id="7845762">.</span><span class="ident" id="7845763">Denom</span><span class="op" id="7845768">(</span><span class="op" id="7845769">)</span><span class="op" id="7845770">.</span><span class="ident" id="7845771">SetInt64</span><span class="op" id="7845779">(</span><span class="num" id="7845780">3</span><span class="op" id="7845781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845784">q53</span>&nbsp;<span class="op" id="7845788">:=</span>&nbsp;<span class="ident" id="7845791">NewRat</span><span class="op" id="7845797">(</span><span class="num" id="7845798">5</span><span class="op" id="7845799">,</span>&nbsp;<span class="num" id="7845801">3</span><span class="op" id="7845802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845805">if</span>&nbsp;<span class="ident" id="7845808">x</span><span class="op" id="7845809">.</span><span class="ident" id="7845810">Cmp</span><span class="op" id="7845813">(</span><span class="ident" id="7845814">q53</span><span class="op" id="7845817">)</span>&nbsp;<span class="op" id="7845819">!=</span>&nbsp;<span class="num" id="7845822">0</span>&nbsp;<span class="op" id="7845824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845828">t</span><span class="op" id="7845829">.</span><span class="ident" id="7845830">Errorf</span><span class="op" id="7845836">(</span><span class="string" id="7845837">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845857">,</span>&nbsp;<span class="ident" id="7845859">x</span><span class="op" id="7845860">,</span>&nbsp;<span class="ident" id="7845862">q53</span><span class="op" id="7845865">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845872">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845942">x</span>&nbsp;<span class="op" id="7845944">=</span>&nbsp;<span class="ident" id="7845946">NewRat</span><span class="op" id="7845952">(</span><span class="num" id="7845953">10</span><span class="op" id="7845955">,</span>&nbsp;<span class="num" id="7845957">2</span><span class="op" id="7845958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845961">x</span><span class="op" id="7845962">.</span><span class="ident" id="7845963">Denom</span><span class="op" id="7845968">(</span><span class="op" id="7845969">)</span><span class="op" id="7845970">.</span><span class="ident" id="7845971">SetInt64</span><span class="op" id="7845979">(</span><span class="num" id="7845980">3</span><span class="op" id="7845981">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845984">if</span>&nbsp;<span class="ident" id="7845987">x</span><span class="op" id="7845988">.</span><span class="ident" id="7845989">Cmp</span><span class="op" id="7845992">(</span><span class="ident" id="7845993">q53</span><span class="op" id="7845996">)</span>&nbsp;<span class="op" id="7845998">!=</span>&nbsp;<span class="num" id="7846001">0</span>&nbsp;<span class="op" id="7846003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846007">t</span><span class="op" id="7846008">.</span><span class="ident" id="7846009">Errorf</span><span class="op" id="7846015">(</span><span class="string" id="7846016">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846036">,</span>&nbsp;<span class="ident" id="7846038">x</span><span class="op" id="7846039">,</span>&nbsp;<span class="ident" id="7846041">q53</span><span class="op" id="7846044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846051">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846118">x</span><span class="op" id="7846119">.</span><span class="ident" id="7846120">SetFrac</span><span class="op" id="7846127">(</span><span class="ident" id="7846128">a</span><span class="op" id="7846129">,</span>&nbsp;<span class="ident" id="7846131">b</span><span class="op" id="7846132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846135">a</span>&nbsp;<span class="op" id="7846137">=</span>&nbsp;<span class="ident" id="7846139">x</span><span class="op" id="7846140">.</span><span class="ident" id="7846141">Num</span><span class="op" id="7846144">(</span><span class="op" id="7846145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846148">b</span>&nbsp;<span class="op" id="7846150">=</span>&nbsp;<span class="ident" id="7846152">x</span><span class="op" id="7846153">.</span><span class="ident" id="7846154">Denom</span><span class="op" id="7846159">(</span><span class="op" id="7846160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846163">a</span><span class="op" id="7846164">.</span><span class="ident" id="7846165">SetInt64</span><span class="op" id="7846173">(</span><span class="num" id="7846174">5</span><span class="op" id="7846175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846178">b</span><span class="op" id="7846179">.</span><span class="ident" id="7846180">SetInt64</span><span class="op" id="7846188">(</span><span class="num" id="7846189">3</span><span class="op" id="7846190">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846193">if</span>&nbsp;<span class="ident" id="7846196">x</span><span class="op" id="7846197">.</span><span class="ident" id="7846198">Cmp</span><span class="op" id="7846201">(</span><span class="ident" id="7846202">q53</span><span class="op" id="7846205">)</span>&nbsp;<span class="op" id="7846207">!=</span>&nbsp;<span class="num" id="7846210">0</span>&nbsp;<span class="op" id="7846212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846216">t</span><span class="op" id="7846217">.</span><span class="ident" id="7846218">Errorf</span><span class="op" id="7846224">(</span><span class="string" id="7846225">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846244">,</span>&nbsp;<span class="ident" id="7846246">x</span><span class="op" id="7846247">,</span>&nbsp;<span class="ident" id="7846249">q53</span><span class="op" id="7846252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846255">}</span><br>
<span class="lineno"></span><span class="op" id="7846257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7846260">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7846329">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7846401">var</span>&nbsp;<span class="ident" id="7846405">float64inputs</span>&nbsp;<span class="op" id="7846419">=</span>&nbsp;<span class="op" id="7846421">[</span><span class="op" id="7846422">]</span><span class="builtintype" id="7846423">string</span><span class="op" id="7846429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846432">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846482">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846552">&#34;5e+125&#34;</span><span class="op" id="7846560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846563">&#34;69e+267&#34;</span><span class="op" id="7846572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846575">&#34;999e-026&#34;</span><span class="op" id="7846585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846588">&#34;7861e-034&#34;</span><span class="op" id="7846599">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846602">&#34;75569e-254&#34;</span><span class="op" id="7846614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846617">&#34;928609e-261&#34;</span><span class="op" id="7846630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846633">&#34;9210917e+080&#34;</span><span class="op" id="7846647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846650">&#34;84863171e+114&#34;</span><span class="op" id="7846665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846668">&#34;653777767e+273&#34;</span><span class="op" id="7846684">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846687">&#34;5232604057e-298&#34;</span><span class="op" id="7846704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846707">&#34;27235667517e-109&#34;</span><span class="op" id="7846725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846728">&#34;653532977297e-123&#34;</span><span class="op" id="7846747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846750">&#34;3142213164987e-294&#34;</span><span class="op" id="7846770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846773">&#34;46202199371337e-072&#34;</span><span class="op" id="7846794">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846797">&#34;231010996856685e-073&#34;</span><span class="op" id="7846819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846822">&#34;9324754620109615e+212&#34;</span><span class="op" id="7846845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846848">&#34;78459735791271921e+049&#34;</span><span class="op" id="7846872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846875">&#34;272104041512242479e+200&#34;</span><span class="op" id="7846900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846903">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7846929">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846932">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7846959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846962">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7846990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7846993">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7847022">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847026">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847096">&#34;9e-265&#34;</span><span class="op" id="7847104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847107">&#34;85e-037&#34;</span><span class="op" id="7847116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847119">&#34;623e+100&#34;</span><span class="op" id="7847129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847132">&#34;3571e+263&#34;</span><span class="op" id="7847143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847146">&#34;81661e+153&#34;</span><span class="op" id="7847158">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847161">&#34;920657e-023&#34;</span><span class="op" id="7847174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847177">&#34;4603285e-024&#34;</span><span class="op" id="7847191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847194">&#34;87575437e-309&#34;</span><span class="op" id="7847209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847212">&#34;245540327e+122&#34;</span><span class="op" id="7847228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847231">&#34;6138508175e+120&#34;</span><span class="op" id="7847248">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847251">&#34;83356057653e+193&#34;</span><span class="op" id="7847269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847272">&#34;619534293513e+124&#34;</span><span class="op" id="7847291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847294">&#34;2335141086879e+218&#34;</span><span class="op" id="7847314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847317">&#34;36167929443327e-159&#34;</span><span class="op" id="7847338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847341">&#34;609610927149051e-255&#34;</span><span class="op" id="7847363">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847366">&#34;3743626360493413e-165&#34;</span><span class="op" id="7847389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847392">&#34;94080055902682397e-242&#34;</span><span class="op" id="7847416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847419">&#34;899810892172646163e+283&#34;</span><span class="op" id="7847444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847447">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7847473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847476">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7847503">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847506">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7847534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847537">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7847566">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847570">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847640">&#34;5e-20&#34;</span><span class="op" id="7847647">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847650">&#34;67e+14&#34;</span><span class="op" id="7847658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847661">&#34;985e+15&#34;</span><span class="op" id="7847670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847673">&#34;7693e-42&#34;</span><span class="op" id="7847683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847686">&#34;55895e-16&#34;</span><span class="op" id="7847697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847700">&#34;996622e-44&#34;</span><span class="op" id="7847712">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847715">&#34;7038531e-32&#34;</span><span class="op" id="7847728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847731">&#34;60419369e-46&#34;</span><span class="op" id="7847745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847748">&#34;702990899e-20&#34;</span><span class="op" id="7847763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847766">&#34;6930161142e-48&#34;</span><span class="op" id="7847782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847785">&#34;25933168707e+13&#34;</span><span class="op" id="7847802">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847805">&#34;596428896559e+20&#34;</span><span class="op" id="7847823">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847827">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847897">&#34;3e-23&#34;</span><span class="op" id="7847904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847907">&#34;57e+18&#34;</span><span class="op" id="7847915">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847918">&#34;789e-35&#34;</span><span class="op" id="7847927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847930">&#34;2539e-18&#34;</span><span class="op" id="7847940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847943">&#34;76173e+28&#34;</span><span class="op" id="7847954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847957">&#34;887745e-11&#34;</span><span class="op" id="7847969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847972">&#34;5382571e-37&#34;</span><span class="op" id="7847985">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847988">&#34;82381273e-35&#34;</span><span class="op" id="7848002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848005">&#34;750486563e-38&#34;</span><span class="op" id="7848020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848023">&#34;3752432815e-39&#34;</span><span class="op" id="7848039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848042">&#34;75224575729e-45&#34;</span><span class="op" id="7848059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848062">&#34;459926601011e+15&#34;</span><span class="op" id="7848080">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848084">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848136">&#34;0&#34;</span><span class="op" id="7848139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848142">&#34;1&#34;</span><span class="op" id="7848145">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848148">&#34;+1&#34;</span><span class="op" id="7848152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848155">&#34;1e23&#34;</span><span class="op" id="7848161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848164">&#34;1E23&#34;</span><span class="op" id="7848170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848173">&#34;100000000000000000000000&#34;</span><span class="op" id="7848199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848202">&#34;1e-100&#34;</span><span class="op" id="7848210">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848213">&#34;123456700&#34;</span><span class="op" id="7848224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848227">&#34;99999999999999974834176&#34;</span><span class="op" id="7848252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848255">&#34;100000000000000000000001&#34;</span><span class="op" id="7848281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848284">&#34;100000000000000008388608&#34;</span><span class="op" id="7848310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848313">&#34;100000000000000016777215&#34;</span><span class="op" id="7848339">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848342">&#34;100000000000000016777216&#34;</span><span class="op" id="7848368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848371">&#34;-1&#34;</span><span class="op" id="7848375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848378">&#34;-0.1&#34;</span><span class="op" id="7848384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848387">&#34;-0&#34;</span><span class="op" id="7848391">,</span>&nbsp;<span class="comment" id="7848393">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848431">&#34;1e-20&#34;</span><span class="op" id="7848438">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848441">&#34;625e-3&#34;</span><span class="op" id="7848449">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848453">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848473">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7848497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848500">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7848525">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848528">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848557">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7848581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848584">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7848609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848612">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848640">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848662">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7848686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848689">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7848714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848717">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848744">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7848770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848773">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7848800">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848804">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848827">&#34;1e308&#34;</span><span class="op" id="7848834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848837">&#34;2e308&#34;</span><span class="op" id="7848844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848847">&#34;1e309&#34;</span><span class="op" id="7848854">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848858">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848876">&#34;1e310&#34;</span><span class="op" id="7848883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848886">&#34;-1e310&#34;</span><span class="op" id="7848894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848897">&#34;1e400&#34;</span><span class="op" id="7848904">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848907">&#34;-1e400&#34;</span><span class="op" id="7848915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848918">&#34;long:1e400000&#34;</span><span class="op" id="7848933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848936">&#34;long:-1e400000&#34;</span><span class="op" id="7848952">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848956">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848973">&#34;1e-305&#34;</span><span class="op" id="7848981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848984">&#34;1e-306&#34;</span><span class="op" id="7848992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848995">&#34;1e-307&#34;</span><span class="op" id="7849003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849006">&#34;1e-308&#34;</span><span class="op" id="7849014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849017">&#34;1e-309&#34;</span><span class="op" id="7849025">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849028">&#34;1e-310&#34;</span><span class="op" id="7849036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849039">&#34;1e-322&#34;</span><span class="op" id="7849047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849050">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849072">&#34;5e-324&#34;</span><span class="op" id="7849080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849083">&#34;4e-324&#34;</span><span class="op" id="7849091">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849094">&#34;3e-324&#34;</span><span class="op" id="7849102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849105">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849119">&#34;2e-324&#34;</span><span class="op" id="7849127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849130">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849148">&#34;1e-350&#34;</span><span class="op" id="7849156">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849159">&#34;long:1e-400000&#34;</span><span class="op" id="7849175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849178">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849206">&#34;-1e-350&#34;</span><span class="op" id="7849215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849218">&#34;long:-1e-400000&#34;</span><span class="op" id="7849235">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849239">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849268">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849327">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849348">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849369">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849400">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849432">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849519">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7849544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849547">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849634">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7849659">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849663">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849737">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7849761">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849765">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849808">&#34;22.222222222222222&#34;</span><span class="op" id="7849828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849831">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7849841">+</span>&nbsp;<span class="ident" id="7849843">strings</span><span class="op" id="7849850">.</span><span class="ident" id="7849851">Repeat</span><span class="op" id="7849857">(</span><span class="string" id="7849858">&#34;2&#34;</span><span class="op" id="7849861">,</span>&nbsp;<span class="num" id="7849863">4000</span><span class="op" id="7849867">)</span>&nbsp;<span class="op" id="7849869">+</span>&nbsp;<span class="string" id="7849871">&#34;e+1&#34;</span><span class="op" id="7849876">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849880">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849936">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849962">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7850019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850022">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850060">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7850117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850120">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850151">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7850208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850211">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850277">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7850340">+</span>&nbsp;<span class="ident" id="7850342">strings</span><span class="op" id="7850349">.</span><span class="ident" id="7850350">Repeat</span><span class="op" id="7850356">(</span><span class="string" id="7850357">&#34;0&#34;</span><span class="op" id="7850360">,</span>&nbsp;<span class="num" id="7850362">10000</span><span class="op" id="7850367">)</span>&nbsp;<span class="op" id="7850369">+</span>&nbsp;<span class="string" id="7850371">&#34;1&#34;</span><span class="op" id="7850374">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850378">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850414">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7850462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850465">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850509">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7850557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850560">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850619">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850664">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7850712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850715">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850783">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850828">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7850876">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850880">&#34;1152921504606846975&#34;</span><span class="op" id="7850901">,</span>&nbsp;&nbsp;<span class="comment" id="7850904">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850920">&#34;-1152921504606846975&#34;</span><span class="op" id="7850942">,</span>&nbsp;<span class="comment" id="7850944">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850961">&#34;1152921504606846977&#34;</span><span class="op" id="7850982">,</span>&nbsp;&nbsp;<span class="comment" id="7850985">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851001">&#34;-1152921504606846977&#34;</span><span class="op" id="7851023">,</span>&nbsp;<span class="comment" id="7851025">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851043">&#34;1/3&#34;</span><span class="op" id="7851048">,</span><br>
<span class="lineno"></span><span class="op" id="7851050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7851053">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7851119">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7851179">func</span>&nbsp;<span class="ident" id="7851184">isFinite</span><span class="op" id="7851192">(</span><span class="ident" id="7851193">f</span>&nbsp;<span class="builtintype" id="7851195">float64</span><span class="op" id="7851202">)</span>&nbsp;<span class="builtintype" id="7851204">bool</span>&nbsp;<span class="op" id="7851209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851212">return</span>&nbsp;<span class="ident" id="7851219">math</span><span class="op" id="7851223">.</span><span class="ident" id="7851224">Abs</span><span class="op" id="7851227">(</span><span class="ident" id="7851228">f</span><span class="op" id="7851229">)</span>&nbsp;<span class="op" id="7851231">&lt;=</span>&nbsp;<span class="ident" id="7851234">math</span><span class="op" id="7851238">.</span><span class="ident" id="7851239">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7851250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7851253">func</span>&nbsp;<span class="ident" id="7851258">TestFloat32SpecialCases</span><span class="op" id="7851281">(</span><span class="ident" id="7851282">t</span>&nbsp;<span class="op" id="7851284">*</span><span class="ident" id="7851285">testing</span><span class="op" id="7851292">.</span><span class="ident" id="7851293">T</span><span class="op" id="7851294">)</span>&nbsp;<span class="op" id="7851296">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851299">for</span>&nbsp;<span class="ident" id="7851303">_</span><span class="op" id="7851304">,</span>&nbsp;<span class="ident" id="7851306">input</span>&nbsp;<span class="op" id="7851312">:=</span>&nbsp;<span class="keyword" id="7851315">range</span>&nbsp;<span class="ident" id="7851321">float64inputs</span>&nbsp;<span class="op" id="7851335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851339">if</span>&nbsp;<span class="ident" id="7851342">strings</span><span class="op" id="7851349">.</span><span class="ident" id="7851350">HasPrefix</span><span class="op" id="7851359">(</span><span class="ident" id="7851360">input</span><span class="op" id="7851365">,</span>&nbsp;<span class="string" id="7851367">&#34;long:&#34;</span><span class="op" id="7851374">)</span>&nbsp;<span class="op" id="7851376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851381">if</span>&nbsp;<span class="ident" id="7851384">testing</span><span class="op" id="7851391">.</span><span class="ident" id="7851392">Short</span><span class="op" id="7851397">(</span><span class="op" id="7851398">)</span>&nbsp;<span class="op" id="7851400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851406">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851418">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851423">input</span>&nbsp;<span class="op" id="7851429">=</span>&nbsp;<span class="ident" id="7851431">input</span><span class="op" id="7851436">[</span><span class="builtinfunc" id="7851437">len</span><span class="op" id="7851440">(</span><span class="string" id="7851441">&#34;long:&#34;</span><span class="op" id="7851448">)</span><span class="op" id="7851449">:</span><span class="op" id="7851450">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851459">r</span><span class="op" id="7851460">,</span>&nbsp;<span class="ident" id="7851462">ok</span>&nbsp;<span class="op" id="7851465">:=</span>&nbsp;<span class="builtinfunc" id="7851468">new</span><span class="op" id="7851471">(</span><span class="ident" id="7851472">Rat</span><span class="op" id="7851475">)</span><span class="op" id="7851476">.</span><span class="ident" id="7851477">SetString</span><span class="op" id="7851486">(</span><span class="ident" id="7851487">input</span><span class="op" id="7851492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851496">if</span>&nbsp;<span class="op" id="7851499">!</span><span class="ident" id="7851500">ok</span>&nbsp;<span class="op" id="7851503">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851508">t</span><span class="op" id="7851509">.</span><span class="ident" id="7851510">Errorf</span><span class="op" id="7851516">(</span><span class="string" id="7851517">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7851543">,</span>&nbsp;<span class="ident" id="7851545">input</span><span class="op" id="7851550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851555">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851570">f</span><span class="op" id="7851571">,</span>&nbsp;<span class="ident" id="7851573">exact</span>&nbsp;<span class="op" id="7851579">:=</span>&nbsp;<span class="ident" id="7851582">r</span><span class="op" id="7851583">.</span><span class="ident" id="7851584">Float32</span><span class="op" id="7851591">(</span><span class="op" id="7851592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851597">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851652">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851693">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851755">if</span>&nbsp;<span class="op" id="7851758">!</span><span class="ident" id="7851759">strings</span><span class="op" id="7851766">.</span><span class="ident" id="7851767">Contains</span><span class="op" id="7851775">(</span><span class="ident" id="7851776">input</span><span class="op" id="7851781">,</span>&nbsp;<span class="string" id="7851783">&#34;/&#34;</span><span class="op" id="7851786">)</span>&nbsp;<span class="op" id="7851788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851793">e64</span><span class="op" id="7851796">,</span>&nbsp;<span class="ident" id="7851798">_</span>&nbsp;<span class="op" id="7851800">:=</span>&nbsp;<span class="ident" id="7851803">strconv</span><span class="op" id="7851810">.</span><span class="ident" id="7851811">ParseFloat</span><span class="op" id="7851821">(</span><span class="ident" id="7851822">input</span><span class="op" id="7851827">,</span>&nbsp;<span class="num" id="7851829">32</span><span class="op" id="7851831">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851836">e</span>&nbsp;<span class="op" id="7851838">:=</span>&nbsp;<span class="builtintype" id="7851841">float32</span><span class="op" id="7851848">(</span><span class="ident" id="7851849">e64</span><span class="op" id="7851852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851858">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851901">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851951">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851997">switch</span>&nbsp;<span class="op" id="7852004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852009">case</span>&nbsp;<span class="ident" id="7852014">math</span><span class="op" id="7852018">.</span><span class="ident" id="7852019">Float32bits</span><span class="op" id="7852030">(</span><span class="ident" id="7852031">e</span><span class="op" id="7852032">)</span>&nbsp;<span class="op" id="7852034">==</span>&nbsp;<span class="ident" id="7852037">math</span><span class="op" id="7852041">.</span><span class="ident" id="7852042">Float32bits</span><span class="op" id="7852053">(</span><span class="ident" id="7852054">f</span><span class="op" id="7852055">)</span><span class="op" id="7852056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852062">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852087">case</span>&nbsp;<span class="ident" id="7852092">f</span>&nbsp;<span class="op" id="7852094">==</span>&nbsp;<span class="num" id="7852097">0</span>&nbsp;<span class="op" id="7852099">&amp;&amp;</span>&nbsp;<span class="ident" id="7852102">r</span><span class="op" id="7852103">.</span><span class="ident" id="7852104">Num</span><span class="op" id="7852107">(</span><span class="op" id="7852108">)</span><span class="op" id="7852109">.</span><span class="ident" id="7852110">BitLen</span><span class="op" id="7852116">(</span><span class="op" id="7852117">)</span>&nbsp;<span class="op" id="7852119">==</span>&nbsp;<span class="num" id="7852122">0</span><span class="op" id="7852123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852129">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852184">default</span><span class="op" id="7852191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852197">t</span><span class="op" id="7852198">.</span><span class="ident" id="7852199">Errorf</span><span class="op" id="7852205">(</span><span class="string" id="7852206">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7852266">,</span>&nbsp;<span class="ident" id="7852268">input</span><span class="op" id="7852273">,</span>&nbsp;<span class="ident" id="7852275">e</span><span class="op" id="7852276">,</span>&nbsp;<span class="ident" id="7852278">e</span><span class="op" id="7852279">,</span>&nbsp;<span class="ident" id="7852281">f</span><span class="op" id="7852282">,</span>&nbsp;<span class="ident" id="7852284">f</span><span class="op" id="7852285">,</span>&nbsp;<span class="ident" id="7852287">f</span><span class="op" id="7852288">-</span><span class="ident" id="7852289">e</span><span class="op" id="7852290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852304">if</span>&nbsp;<span class="op" id="7852307">!</span><span class="ident" id="7852308">isFinite</span><span class="op" id="7852316">(</span><span class="builtintype" id="7852317">float64</span><span class="op" id="7852324">(</span><span class="ident" id="7852325">f</span><span class="op" id="7852326">)</span><span class="op" id="7852327">)</span>&nbsp;<span class="op" id="7852329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852334">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852350">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852394">if</span>&nbsp;<span class="op" id="7852397">!</span><span class="ident" id="7852398">checkIsBestApprox32</span><span class="op" id="7852417">(</span><span class="ident" id="7852418">t</span><span class="op" id="7852419">,</span>&nbsp;<span class="ident" id="7852421">f</span><span class="op" id="7852422">,</span>&nbsp;<span class="ident" id="7852424">r</span><span class="op" id="7852425">)</span>&nbsp;<span class="op" id="7852427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852432">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852466">t</span><span class="op" id="7852467">.</span><span class="ident" id="7852468">Errorf</span><span class="op" id="7852474">(</span><span class="string" id="7852475">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7852491">,</span>&nbsp;<span class="ident" id="7852493">input</span><span class="op" id="7852498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852507">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852553">checkNonLossyRoundtrip32</span><span class="op" id="7852577">(</span><span class="ident" id="7852578">t</span><span class="op" id="7852579">,</span>&nbsp;<span class="ident" id="7852581">f</span><span class="op" id="7852582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852587">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852633">if</span>&nbsp;<span class="ident" id="7852636">wasExact</span>&nbsp;<span class="op" id="7852645">:=</span>&nbsp;<span class="builtinfunc" id="7852648">new</span><span class="op" id="7852651">(</span><span class="ident" id="7852652">Rat</span><span class="op" id="7852655">)</span><span class="op" id="7852656">.</span><span class="ident" id="7852657">SetFloat64</span><span class="op" id="7852667">(</span><span class="builtintype" id="7852668">float64</span><span class="op" id="7852675">(</span><span class="ident" id="7852676">f</span><span class="op" id="7852677">)</span><span class="op" id="7852678">)</span><span class="op" id="7852679">.</span><span class="ident" id="7852680">Cmp</span><span class="op" id="7852683">(</span><span class="ident" id="7852684">r</span><span class="op" id="7852685">)</span>&nbsp;<span class="op" id="7852687">==</span>&nbsp;<span class="num" id="7852690">0</span><span class="op" id="7852691">;</span>&nbsp;<span class="ident" id="7852693">wasExact</span>&nbsp;<span class="op" id="7852702">!=</span>&nbsp;<span class="ident" id="7852705">exact</span>&nbsp;<span class="op" id="7852711">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852716">t</span><span class="op" id="7852717">.</span><span class="ident" id="7852718">Errorf</span><span class="op" id="7852724">(</span><span class="string" id="7852725">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7852774">,</span>&nbsp;<span class="ident" id="7852776">input</span><span class="op" id="7852781">,</span>&nbsp;<span class="ident" id="7852783">exact</span><span class="op" id="7852788">,</span>&nbsp;<span class="ident" id="7852790">wasExact</span><span class="op" id="7852798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852805">}</span><br>
<span class="lineno"></span><span class="op" id="7852807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7852810">func</span>&nbsp;<span class="ident" id="7852815">TestFloat64SpecialCases</span><span class="op" id="7852838">(</span><span class="ident" id="7852839">t</span>&nbsp;<span class="op" id="7852841">*</span><span class="ident" id="7852842">testing</span><span class="op" id="7852849">.</span><span class="ident" id="7852850">T</span><span class="op" id="7852851">)</span>&nbsp;<span class="op" id="7852853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852856">for</span>&nbsp;<span class="ident" id="7852860">_</span><span class="op" id="7852861">,</span>&nbsp;<span class="ident" id="7852863">input</span>&nbsp;<span class="op" id="7852869">:=</span>&nbsp;<span class="keyword" id="7852872">range</span>&nbsp;<span class="ident" id="7852878">float64inputs</span>&nbsp;<span class="op" id="7852892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852896">if</span>&nbsp;<span class="ident" id="7852899">strings</span><span class="op" id="7852906">.</span><span class="ident" id="7852907">HasPrefix</span><span class="op" id="7852916">(</span><span class="ident" id="7852917">input</span><span class="op" id="7852922">,</span>&nbsp;<span class="string" id="7852924">&#34;long:&#34;</span><span class="op" id="7852931">)</span>&nbsp;<span class="op" id="7852933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852938">if</span>&nbsp;<span class="ident" id="7852941">testing</span><span class="op" id="7852948">.</span><span class="ident" id="7852949">Short</span><span class="op" id="7852954">(</span><span class="op" id="7852955">)</span>&nbsp;<span class="op" id="7852957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852963">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852980">input</span>&nbsp;<span class="op" id="7852986">=</span>&nbsp;<span class="ident" id="7852988">input</span><span class="op" id="7852993">[</span><span class="builtinfunc" id="7852994">len</span><span class="op" id="7852997">(</span><span class="string" id="7852998">&#34;long:&#34;</span><span class="op" id="7853005">)</span><span class="op" id="7853006">:</span><span class="op" id="7853007">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853016">r</span><span class="op" id="7853017">,</span>&nbsp;<span class="ident" id="7853019">ok</span>&nbsp;<span class="op" id="7853022">:=</span>&nbsp;<span class="builtinfunc" id="7853025">new</span><span class="op" id="7853028">(</span><span class="ident" id="7853029">Rat</span><span class="op" id="7853032">)</span><span class="op" id="7853033">.</span><span class="ident" id="7853034">SetString</span><span class="op" id="7853043">(</span><span class="ident" id="7853044">input</span><span class="op" id="7853049">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853053">if</span>&nbsp;<span class="op" id="7853056">!</span><span class="ident" id="7853057">ok</span>&nbsp;<span class="op" id="7853060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853065">t</span><span class="op" id="7853066">.</span><span class="ident" id="7853067">Errorf</span><span class="op" id="7853073">(</span><span class="string" id="7853074">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7853100">,</span>&nbsp;<span class="ident" id="7853102">input</span><span class="op" id="7853107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853112">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853127">f</span><span class="op" id="7853128">,</span>&nbsp;<span class="ident" id="7853130">exact</span>&nbsp;<span class="op" id="7853136">:=</span>&nbsp;<span class="ident" id="7853139">r</span><span class="op" id="7853140">.</span><span class="ident" id="7853141">Float64</span><span class="op" id="7853148">(</span><span class="op" id="7853149">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853154">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853209">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853250">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853312">if</span>&nbsp;<span class="op" id="7853315">!</span><span class="ident" id="7853316">strings</span><span class="op" id="7853323">.</span><span class="ident" id="7853324">Contains</span><span class="op" id="7853332">(</span><span class="ident" id="7853333">input</span><span class="op" id="7853338">,</span>&nbsp;<span class="string" id="7853340">&#34;/&#34;</span><span class="op" id="7853343">)</span>&nbsp;<span class="op" id="7853345">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853350">e</span><span class="op" id="7853351">,</span>&nbsp;<span class="ident" id="7853353">_</span>&nbsp;<span class="op" id="7853355">:=</span>&nbsp;<span class="ident" id="7853358">strconv</span><span class="op" id="7853365">.</span><span class="ident" id="7853366">ParseFloat</span><span class="op" id="7853376">(</span><span class="ident" id="7853377">input</span><span class="op" id="7853382">,</span>&nbsp;<span class="num" id="7853384">64</span><span class="op" id="7853386">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853392">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853435">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853485">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853531">switch</span>&nbsp;<span class="op" id="7853538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853543">case</span>&nbsp;<span class="ident" id="7853548">math</span><span class="op" id="7853552">.</span><span class="ident" id="7853553">Float64bits</span><span class="op" id="7853564">(</span><span class="ident" id="7853565">e</span><span class="op" id="7853566">)</span>&nbsp;<span class="op" id="7853568">==</span>&nbsp;<span class="ident" id="7853571">math</span><span class="op" id="7853575">.</span><span class="ident" id="7853576">Float64bits</span><span class="op" id="7853587">(</span><span class="ident" id="7853588">f</span><span class="op" id="7853589">)</span><span class="op" id="7853590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853596">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853621">case</span>&nbsp;<span class="ident" id="7853626">f</span>&nbsp;<span class="op" id="7853628">==</span>&nbsp;<span class="num" id="7853631">0</span>&nbsp;<span class="op" id="7853633">&amp;&amp;</span>&nbsp;<span class="ident" id="7853636">r</span><span class="op" id="7853637">.</span><span class="ident" id="7853638">Num</span><span class="op" id="7853641">(</span><span class="op" id="7853642">)</span><span class="op" id="7853643">.</span><span class="ident" id="7853644">BitLen</span><span class="op" id="7853650">(</span><span class="op" id="7853651">)</span>&nbsp;<span class="op" id="7853653">==</span>&nbsp;<span class="num" id="7853656">0</span><span class="op" id="7853657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853663">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853718">default</span><span class="op" id="7853725">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853731">t</span><span class="op" id="7853732">.</span><span class="ident" id="7853733">Errorf</span><span class="op" id="7853739">(</span><span class="string" id="7853740">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7853800">,</span>&nbsp;<span class="ident" id="7853802">input</span><span class="op" id="7853807">,</span>&nbsp;<span class="ident" id="7853809">e</span><span class="op" id="7853810">,</span>&nbsp;<span class="ident" id="7853812">e</span><span class="op" id="7853813">,</span>&nbsp;<span class="ident" id="7853815">f</span><span class="op" id="7853816">,</span>&nbsp;<span class="ident" id="7853818">f</span><span class="op" id="7853819">,</span>&nbsp;<span class="ident" id="7853821">f</span><span class="op" id="7853822">-</span><span class="ident" id="7853823">e</span><span class="op" id="7853824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853838">if</span>&nbsp;<span class="op" id="7853841">!</span><span class="ident" id="7853842">isFinite</span><span class="op" id="7853850">(</span><span class="ident" id="7853851">f</span><span class="op" id="7853852">)</span>&nbsp;<span class="op" id="7853854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853859">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853875">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853919">if</span>&nbsp;<span class="op" id="7853922">!</span><span class="ident" id="7853923">checkIsBestApprox64</span><span class="op" id="7853942">(</span><span class="ident" id="7853943">t</span><span class="op" id="7853944">,</span>&nbsp;<span class="ident" id="7853946">f</span><span class="op" id="7853947">,</span>&nbsp;<span class="ident" id="7853949">r</span><span class="op" id="7853950">)</span>&nbsp;<span class="op" id="7853952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853957">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853991">t</span><span class="op" id="7853992">.</span><span class="ident" id="7853993">Errorf</span><span class="op" id="7853999">(</span><span class="string" id="7854000">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7854016">,</span>&nbsp;<span class="ident" id="7854018">input</span><span class="op" id="7854023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854032">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854078">checkNonLossyRoundtrip64</span><span class="op" id="7854102">(</span><span class="ident" id="7854103">t</span><span class="op" id="7854104">,</span>&nbsp;<span class="ident" id="7854106">f</span><span class="op" id="7854107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854112">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854158">if</span>&nbsp;<span class="ident" id="7854161">wasExact</span>&nbsp;<span class="op" id="7854170">:=</span>&nbsp;<span class="builtinfunc" id="7854173">new</span><span class="op" id="7854176">(</span><span class="ident" id="7854177">Rat</span><span class="op" id="7854180">)</span><span class="op" id="7854181">.</span><span class="ident" id="7854182">SetFloat64</span><span class="op" id="7854192">(</span><span class="ident" id="7854193">f</span><span class="op" id="7854194">)</span><span class="op" id="7854195">.</span><span class="ident" id="7854196">Cmp</span><span class="op" id="7854199">(</span><span class="ident" id="7854200">r</span><span class="op" id="7854201">)</span>&nbsp;<span class="op" id="7854203">==</span>&nbsp;<span class="num" id="7854206">0</span><span class="op" id="7854207">;</span>&nbsp;<span class="ident" id="7854209">wasExact</span>&nbsp;<span class="op" id="7854218">!=</span>&nbsp;<span class="ident" id="7854221">exact</span>&nbsp;<span class="op" id="7854227">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854232">t</span><span class="op" id="7854233">.</span><span class="ident" id="7854234">Errorf</span><span class="op" id="7854240">(</span><span class="string" id="7854241">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7854290">,</span>&nbsp;<span class="ident" id="7854292">input</span><span class="op" id="7854297">,</span>&nbsp;<span class="ident" id="7854299">exact</span><span class="op" id="7854304">,</span>&nbsp;<span class="ident" id="7854306">wasExact</span><span class="op" id="7854314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854321">}</span><br>
<span class="lineno"></span><span class="op" id="7854323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7854326">func</span>&nbsp;<span class="ident" id="7854331">TestFloat32Distribution</span><span class="op" id="7854354">(</span><span class="ident" id="7854355">t</span>&nbsp;<span class="op" id="7854357">*</span><span class="ident" id="7854358">testing</span><span class="op" id="7854365">.</span><span class="ident" id="7854366">T</span><span class="op" id="7854367">)</span>&nbsp;<span class="op" id="7854369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854372">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854432">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854492">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854544">var</span>&nbsp;<span class="ident" id="7854548">add</span>&nbsp;<span class="op" id="7854552">=</span>&nbsp;<span class="op" id="7854554">[</span><span class="op" id="7854555">]</span><span class="ident" id="7854556">int64</span><span class="op" id="7854561">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854565">0</span><span class="op" id="7854566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854570">1</span><span class="op" id="7854571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854575">3</span><span class="op" id="7854576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854580">5</span><span class="op" id="7854581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854585">7</span><span class="op" id="7854586">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854590">9</span><span class="op" id="7854591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7854595">11</span><span class="op" id="7854597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854603">var</span>&nbsp;<span class="ident" id="7854607">winc</span><span class="op" id="7854611">,</span>&nbsp;<span class="ident" id="7854613">einc</span>&nbsp;<span class="op" id="7854618">=</span>&nbsp;<span class="ident" id="7854620">uint64</span><span class="op" id="7854626">(</span><span class="num" id="7854627">1</span><span class="op" id="7854628">)</span><span class="op" id="7854629">,</span>&nbsp;<span class="num" id="7854631">1</span>&nbsp;<span class="comment" id="7854633">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854665">if</span>&nbsp;<span class="ident" id="7854668">testing</span><span class="op" id="7854675">.</span><span class="ident" id="7854676">Short</span><span class="op" id="7854681">(</span><span class="op" id="7854682">)</span>&nbsp;<span class="op" id="7854684">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854688">winc</span><span class="op" id="7854692">,</span>&nbsp;<span class="ident" id="7854694">einc</span>&nbsp;<span class="op" id="7854699">=</span>&nbsp;<span class="num" id="7854701">5</span><span class="op" id="7854702">,</span>&nbsp;<span class="num" id="7854704">15</span>&nbsp;<span class="comment" id="7854707">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854744">for</span>&nbsp;<span class="ident" id="7854748">_</span><span class="op" id="7854749">,</span>&nbsp;<span class="ident" id="7854751">sign</span>&nbsp;<span class="op" id="7854756">:=</span>&nbsp;<span class="keyword" id="7854759">range</span>&nbsp;<span class="string" id="7854765">&#34;+-&#34;</span>&nbsp;<span class="op" id="7854770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854774">for</span>&nbsp;<span class="ident" id="7854778">_</span><span class="op" id="7854779">,</span>&nbsp;<span class="ident" id="7854781">a</span>&nbsp;<span class="op" id="7854783">:=</span>&nbsp;<span class="keyword" id="7854786">range</span>&nbsp;<span class="ident" id="7854792">add</span>&nbsp;<span class="op" id="7854796">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854801">for</span>&nbsp;<span class="ident" id="7854805">wid</span>&nbsp;<span class="op" id="7854809">:=</span>&nbsp;<span class="ident" id="7854812">uint64</span><span class="op" id="7854818">(</span><span class="num" id="7854819">0</span><span class="op" id="7854820">)</span><span class="op" id="7854821">;</span>&nbsp;<span class="ident" id="7854823">wid</span>&nbsp;<span class="op" id="7854827">&lt;</span>&nbsp;<span class="num" id="7854829">30</span><span class="op" id="7854831">;</span>&nbsp;<span class="ident" id="7854833">wid</span>&nbsp;<span class="op" id="7854837">+=</span>&nbsp;<span class="ident" id="7854840">winc</span>&nbsp;<span class="op" id="7854845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854851">b</span>&nbsp;<span class="op" id="7854853">:=</span>&nbsp;<span class="num" id="7854856">1</span><span class="op" id="7854857">&lt;&lt;</span><span class="ident" id="7854859">wid</span>&nbsp;<span class="op" id="7854863">+</span>&nbsp;<span class="ident" id="7854865">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854871">if</span>&nbsp;<span class="ident" id="7854874">sign</span>&nbsp;<span class="op" id="7854879">==</span>&nbsp;<span class="string" id="7854882">&#39;-&#39;</span>&nbsp;<span class="op" id="7854886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854893">b</span>&nbsp;<span class="op" id="7854895">=</span>&nbsp;<span class="op" id="7854897">-</span><span class="ident" id="7854898">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854904">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854910">for</span>&nbsp;<span class="ident" id="7854914">exp</span>&nbsp;<span class="op" id="7854918">:=</span>&nbsp;<span class="op" id="7854921">-</span><span class="num" id="7854922">150</span><span class="op" id="7854925">;</span>&nbsp;<span class="ident" id="7854927">exp</span>&nbsp;<span class="op" id="7854931">&lt;</span>&nbsp;<span class="num" id="7854933">150</span><span class="op" id="7854936">;</span>&nbsp;<span class="ident" id="7854938">exp</span>&nbsp;<span class="op" id="7854942">+=</span>&nbsp;<span class="ident" id="7854945">einc</span>&nbsp;<span class="op" id="7854950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854957">num</span><span class="op" id="7854960">,</span>&nbsp;<span class="ident" id="7854962">den</span>&nbsp;<span class="op" id="7854966">:=</span>&nbsp;<span class="ident" id="7854969">NewInt</span><span class="op" id="7854975">(</span><span class="ident" id="7854976">b</span><span class="op" id="7854977">)</span><span class="op" id="7854978">,</span>&nbsp;<span class="ident" id="7854980">NewInt</span><span class="op" id="7854986">(</span><span class="num" id="7854987">1</span><span class="op" id="7854988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854995">if</span>&nbsp;<span class="ident" id="7854998">exp</span>&nbsp;<span class="op" id="7855002">&gt;</span>&nbsp;<span class="num" id="7855004">0</span>&nbsp;<span class="op" id="7855006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855014">num</span><span class="op" id="7855017">.</span><span class="ident" id="7855018">Lsh</span><span class="op" id="7855021">(</span><span class="ident" id="7855022">num</span><span class="op" id="7855025">,</span>&nbsp;<span class="builtintype" id="7855027">uint</span><span class="op" id="7855031">(</span><span class="ident" id="7855032">exp</span><span class="op" id="7855035">)</span><span class="op" id="7855036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855043">}</span>&nbsp;<span class="keyword" id="7855045">else</span>&nbsp;<span class="op" id="7855050">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855058">den</span><span class="op" id="7855061">.</span><span class="ident" id="7855062">Lsh</span><span class="op" id="7855065">(</span><span class="ident" id="7855066">den</span><span class="op" id="7855069">,</span>&nbsp;<span class="builtintype" id="7855071">uint</span><span class="op" id="7855075">(</span><span class="op" id="7855076">-</span><span class="ident" id="7855077">exp</span><span class="op" id="7855080">)</span><span class="op" id="7855081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855095">r</span>&nbsp;<span class="op" id="7855097">:=</span>&nbsp;<span class="builtinfunc" id="7855100">new</span><span class="op" id="7855103">(</span><span class="ident" id="7855104">Rat</span><span class="op" id="7855107">)</span><span class="op" id="7855108">.</span><span class="ident" id="7855109">SetFrac</span><span class="op" id="7855116">(</span><span class="ident" id="7855117">num</span><span class="op" id="7855120">,</span>&nbsp;<span class="ident" id="7855122">den</span><span class="op" id="7855125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855132">f</span><span class="op" id="7855133">,</span>&nbsp;<span class="ident" id="7855135">_</span>&nbsp;<span class="op" id="7855137">:=</span>&nbsp;<span class="ident" id="7855140">r</span><span class="op" id="7855141">.</span><span class="ident" id="7855142">Float32</span><span class="op" id="7855149">(</span><span class="op" id="7855150">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855158">if</span>&nbsp;<span class="op" id="7855161">!</span><span class="ident" id="7855162">checkIsBestApprox32</span><span class="op" id="7855181">(</span><span class="ident" id="7855182">t</span><span class="op" id="7855183">,</span>&nbsp;<span class="ident" id="7855185">f</span><span class="op" id="7855186">,</span>&nbsp;<span class="ident" id="7855188">r</span><span class="op" id="7855189">)</span>&nbsp;<span class="op" id="7855191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855199">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855236">t</span><span class="op" id="7855237">.</span><span class="ident" id="7855238">Errorf</span><span class="op" id="7855244">(</span><span class="string" id="7855245">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7855308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855317">b</span><span class="op" id="7855318">,</span>&nbsp;<span class="ident" id="7855320">exp</span><span class="op" id="7855323">,</span>&nbsp;<span class="ident" id="7855325">f</span><span class="op" id="7855326">,</span>&nbsp;<span class="ident" id="7855328">f</span><span class="op" id="7855329">,</span>&nbsp;<span class="ident" id="7855331">math</span><span class="op" id="7855335">.</span><span class="ident" id="7855336">Ldexp</span><span class="op" id="7855341">(</span><span class="builtintype" id="7855342">float64</span><span class="op" id="7855349">(</span><span class="ident" id="7855350">b</span><span class="op" id="7855351">)</span><span class="op" id="7855352">,</span>&nbsp;<span class="ident" id="7855354">exp</span><span class="op" id="7855357">)</span><span class="op" id="7855358">,</span>&nbsp;<span class="ident" id="7855360">r</span><span class="op" id="7855361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855368">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855376">checkNonLossyRoundtrip32</span><span class="op" id="7855400">(</span><span class="ident" id="7855401">t</span><span class="op" id="7855402">,</span>&nbsp;<span class="ident" id="7855404">f</span><span class="op" id="7855405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855420">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855423">}</span><br>
<span class="lineno"></span><span class="op" id="7855425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7855428">func</span>&nbsp;<span class="ident" id="7855433">TestFloat64Distribution</span><span class="op" id="7855456">(</span><span class="ident" id="7855457">t</span>&nbsp;<span class="op" id="7855459">*</span><span class="ident" id="7855460">testing</span><span class="op" id="7855467">.</span><span class="ident" id="7855468">T</span><span class="op" id="7855469">)</span>&nbsp;<span class="op" id="7855471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855474">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855534">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855594">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855646">var</span>&nbsp;<span class="ident" id="7855650">add</span>&nbsp;<span class="op" id="7855654">=</span>&nbsp;<span class="op" id="7855656">[</span><span class="op" id="7855657">]</span><span class="ident" id="7855658">int64</span><span class="op" id="7855663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855667">0</span><span class="op" id="7855668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855672">1</span><span class="op" id="7855673">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855677">3</span><span class="op" id="7855678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855682">5</span><span class="op" id="7855683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855687">7</span><span class="op" id="7855688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855692">9</span><span class="op" id="7855693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855697">11</span><span class="op" id="7855699">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855705">var</span>&nbsp;<span class="ident" id="7855709">winc</span><span class="op" id="7855713">,</span>&nbsp;<span class="ident" id="7855715">einc</span>&nbsp;<span class="op" id="7855720">=</span>&nbsp;<span class="ident" id="7855722">uint64</span><span class="op" id="7855728">(</span><span class="num" id="7855729">1</span><span class="op" id="7855730">)</span><span class="op" id="7855731">,</span>&nbsp;<span class="num" id="7855733">1</span>&nbsp;<span class="comment" id="7855735">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855766">if</span>&nbsp;<span class="ident" id="7855769">testing</span><span class="op" id="7855776">.</span><span class="ident" id="7855777">Short</span><span class="op" id="7855782">(</span><span class="op" id="7855783">)</span>&nbsp;<span class="op" id="7855785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855789">winc</span><span class="op" id="7855793">,</span>&nbsp;<span class="ident" id="7855795">einc</span>&nbsp;<span class="op" id="7855800">=</span>&nbsp;<span class="num" id="7855802">10</span><span class="op" id="7855804">,</span>&nbsp;<span class="num" id="7855806">500</span>&nbsp;<span class="comment" id="7855810">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855843">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855847">for</span>&nbsp;<span class="ident" id="7855851">_</span><span class="op" id="7855852">,</span>&nbsp;<span class="ident" id="7855854">sign</span>&nbsp;<span class="op" id="7855859">:=</span>&nbsp;<span class="keyword" id="7855862">range</span>&nbsp;<span class="string" id="7855868">&#34;+-&#34;</span>&nbsp;<span class="op" id="7855873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855877">for</span>&nbsp;<span class="ident" id="7855881">_</span><span class="op" id="7855882">,</span>&nbsp;<span class="ident" id="7855884">a</span>&nbsp;<span class="op" id="7855886">:=</span>&nbsp;<span class="keyword" id="7855889">range</span>&nbsp;<span class="ident" id="7855895">add</span>&nbsp;<span class="op" id="7855899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855904">for</span>&nbsp;<span class="ident" id="7855908">wid</span>&nbsp;<span class="op" id="7855912">:=</span>&nbsp;<span class="ident" id="7855915">uint64</span><span class="op" id="7855921">(</span><span class="num" id="7855922">0</span><span class="op" id="7855923">)</span><span class="op" id="7855924">;</span>&nbsp;<span class="ident" id="7855926">wid</span>&nbsp;<span class="op" id="7855930">&lt;</span>&nbsp;<span class="num" id="7855932">60</span><span class="op" id="7855934">;</span>&nbsp;<span class="ident" id="7855936">wid</span>&nbsp;<span class="op" id="7855940">+=</span>&nbsp;<span class="ident" id="7855943">winc</span>&nbsp;<span class="op" id="7855948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855954">b</span>&nbsp;<span class="op" id="7855956">:=</span>&nbsp;<span class="num" id="7855959">1</span><span class="op" id="7855960">&lt;&lt;</span><span class="ident" id="7855962">wid</span>&nbsp;<span class="op" id="7855966">+</span>&nbsp;<span class="ident" id="7855968">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855974">if</span>&nbsp;<span class="ident" id="7855977">sign</span>&nbsp;<span class="op" id="7855982">==</span>&nbsp;<span class="string" id="7855985">&#39;-&#39;</span>&nbsp;<span class="op" id="7855989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855996">b</span>&nbsp;<span class="op" id="7855998">=</span>&nbsp;<span class="op" id="7856000">-</span><span class="ident" id="7856001">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856013">for</span>&nbsp;<span class="ident" id="7856017">exp</span>&nbsp;<span class="op" id="7856021">:=</span>&nbsp;<span class="op" id="7856024">-</span><span class="num" id="7856025">1100</span><span class="op" id="7856029">;</span>&nbsp;<span class="ident" id="7856031">exp</span>&nbsp;<span class="op" id="7856035">&lt;</span>&nbsp;<span class="num" id="7856037">1100</span><span class="op" id="7856041">;</span>&nbsp;<span class="ident" id="7856043">exp</span>&nbsp;<span class="op" id="7856047">+=</span>&nbsp;<span class="ident" id="7856050">einc</span>&nbsp;<span class="op" id="7856055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856062">num</span><span class="op" id="7856065">,</span>&nbsp;<span class="ident" id="7856067">den</span>&nbsp;<span class="op" id="7856071">:=</span>&nbsp;<span class="ident" id="7856074">NewInt</span><span class="op" id="7856080">(</span><span class="ident" id="7856081">b</span><span class="op" id="7856082">)</span><span class="op" id="7856083">,</span>&nbsp;<span class="ident" id="7856085">NewInt</span><span class="op" id="7856091">(</span><span class="num" id="7856092">1</span><span class="op" id="7856093">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856100">if</span>&nbsp;<span class="ident" id="7856103">exp</span>&nbsp;<span class="op" id="7856107">&gt;</span>&nbsp;<span class="num" id="7856109">0</span>&nbsp;<span class="op" id="7856111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856119">num</span><span class="op" id="7856122">.</span><span class="ident" id="7856123">Lsh</span><span class="op" id="7856126">(</span><span class="ident" id="7856127">num</span><span class="op" id="7856130">,</span>&nbsp;<span class="builtintype" id="7856132">uint</span><span class="op" id="7856136">(</span><span class="ident" id="7856137">exp</span><span class="op" id="7856140">)</span><span class="op" id="7856141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856148">}</span>&nbsp;<span class="keyword" id="7856150">else</span>&nbsp;<span class="op" id="7856155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856163">den</span><span class="op" id="7856166">.</span><span class="ident" id="7856167">Lsh</span><span class="op" id="7856170">(</span><span class="ident" id="7856171">den</span><span class="op" id="7856174">,</span>&nbsp;<span class="builtintype" id="7856176">uint</span><span class="op" id="7856180">(</span><span class="op" id="7856181">-</span><span class="ident" id="7856182">exp</span><span class="op" id="7856185">)</span><span class="op" id="7856186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856193">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856200">r</span>&nbsp;<span class="op" id="7856202">:=</span>&nbsp;<span class="builtinfunc" id="7856205">new</span><span class="op" id="7856208">(</span><span class="ident" id="7856209">Rat</span><span class="op" id="7856212">)</span><span class="op" id="7856213">.</span><span class="ident" id="7856214">SetFrac</span><span class="op" id="7856221">(</span><span class="ident" id="7856222">num</span><span class="op" id="7856225">,</span>&nbsp;<span class="ident" id="7856227">den</span><span class="op" id="7856230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856237">f</span><span class="op" id="7856238">,</span>&nbsp;<span class="ident" id="7856240">_</span>&nbsp;<span class="op" id="7856242">:=</span>&nbsp;<span class="ident" id="7856245">r</span><span class="op" id="7856246">.</span><span class="ident" id="7856247">Float64</span><span class="op" id="7856254">(</span><span class="op" id="7856255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856263">if</span>&nbsp;<span class="op" id="7856266">!</span><span class="ident" id="7856267">checkIsBestApprox64</span><span class="op" id="7856286">(</span><span class="ident" id="7856287">t</span><span class="op" id="7856288">,</span>&nbsp;<span class="ident" id="7856290">f</span><span class="op" id="7856291">,</span>&nbsp;<span class="ident" id="7856293">r</span><span class="op" id="7856294">)</span>&nbsp;<span class="op" id="7856296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7856304">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856341">t</span><span class="op" id="7856342">.</span><span class="ident" id="7856343">Errorf</span><span class="op" id="7856349">(</span><span class="string" id="7856350">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7856413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856422">b</span><span class="op" id="7856423">,</span>&nbsp;<span class="ident" id="7856425">exp</span><span class="op" id="7856428">,</span>&nbsp;<span class="ident" id="7856430">f</span><span class="op" id="7856431">,</span>&nbsp;<span class="ident" id="7856433">f</span><span class="op" id="7856434">,</span>&nbsp;<span class="ident" id="7856436">math</span><span class="op" id="7856440">.</span><span class="ident" id="7856441">Ldexp</span><span class="op" id="7856446">(</span><span class="builtintype" id="7856447">float64</span><span class="op" id="7856454">(</span><span class="ident" id="7856455">b</span><span class="op" id="7856456">)</span><span class="op" id="7856457">,</span>&nbsp;<span class="ident" id="7856459">exp</span><span class="op" id="7856462">)</span><span class="op" id="7856463">,</span>&nbsp;<span class="ident" id="7856465">r</span><span class="op" id="7856466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856481">checkNonLossyRoundtrip64</span><span class="op" id="7856505">(</span><span class="ident" id="7856506">t</span><span class="op" id="7856507">,</span>&nbsp;<span class="ident" id="7856509">f</span><span class="op" id="7856510">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856528">}</span><br>
<span class="lineno"></span><span class="op" id="7856530">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7856533">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7856605">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7856621">func</span>&nbsp;<span class="ident" id="7856626">TestSetFloat64NonFinite</span><span class="op" id="7856649">(</span><span class="ident" id="7856650">t</span>&nbsp;<span class="op" id="7856652">*</span><span class="ident" id="7856653">testing</span><span class="op" id="7856660">.</span><span class="ident" id="7856661">T</span><span class="op" id="7856662">)</span>&nbsp;<span class="op" id="7856664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856667">for</span>&nbsp;<span class="ident" id="7856671">_</span><span class="op" id="7856672">,</span>&nbsp;<span class="ident" id="7856674">f</span>&nbsp;<span class="op" id="7856676">:=</span>&nbsp;<span class="keyword" id="7856679">range</span>&nbsp;<span class="op" id="7856685">[</span><span class="op" id="7856686">]</span><span class="builtintype" id="7856687">float64</span><span class="op" id="7856694">{</span><span class="ident" id="7856695">math</span><span class="op" id="7856699">.</span><span class="ident" id="7856700">NaN</span><span class="op" id="7856703">(</span><span class="op" id="7856704">)</span><span class="op" id="7856705">,</span>&nbsp;<span class="ident" id="7856707">math</span><span class="op" id="7856711">.</span><span class="ident" id="7856712">Inf</span><span class="op" id="7856715">(</span><span class="op" id="7856716">+</span><span class="num" id="7856717">1</span><span class="op" id="7856718">)</span><span class="op" id="7856719">,</span>&nbsp;<span class="ident" id="7856721">math</span><span class="op" id="7856725">.</span><span class="ident" id="7856726">Inf</span><span class="op" id="7856729">(</span><span class="op" id="7856730">-</span><span class="num" id="7856731">1</span><span class="op" id="7856732">)</span><span class="op" id="7856733">}</span>&nbsp;<span class="op" id="7856735">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856739">var</span>&nbsp;<span class="ident" id="7856743">r</span>&nbsp;<span class="ident" id="7856745">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856751">if</span>&nbsp;<span class="ident" id="7856754">r2</span>&nbsp;<span class="op" id="7856757">:=</span>&nbsp;<span class="ident" id="7856760">r</span><span class="op" id="7856761">.</span><span class="ident" id="7856762">SetFloat64</span><span class="op" id="7856772">(</span><span class="ident" id="7856773">f</span><span class="op" id="7856774">)</span><span class="op" id="7856775">;</span>&nbsp;<span class="ident" id="7856777">r2</span>&nbsp;<span class="op" id="7856780">!=</span>&nbsp;<span class="ident" id="7856783">nil</span>&nbsp;<span class="op" id="7856787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856792">t</span><span class="op" id="7856793">.</span><span class="ident" id="7856794">Errorf</span><span class="op" id="7856800">(</span><span class="string" id="7856801">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7856834">,</span>&nbsp;<span class="ident" id="7856836">f</span><span class="op" id="7856837">,</span>&nbsp;<span class="ident" id="7856839">r2</span><span class="op" id="7856841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856848">}</span><br>
<span class="lineno">1015</span><span class="op" id="7856850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7856853">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7856926">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7856953">func</span>&nbsp;<span class="ident" id="7856958">checkNonLossyRoundtrip32</span><span class="op" id="7856982">(</span><span class="ident" id="7856983">t</span>&nbsp;<span class="op" id="7856985">*</span><span class="ident" id="7856986">testing</span><span class="op" id="7856993">.</span><span class="ident" id="7856994">T</span><span class="op" id="7856995">,</span>&nbsp;<span class="ident" id="7856997">f</span>&nbsp;<span class="builtintype" id="7856999">float32</span><span class="op" id="7857006">)</span>&nbsp;<span class="op" id="7857008">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857011">if</span>&nbsp;<span class="op" id="7857014">!</span><span class="ident" id="7857015">isFinite</span><span class="op" id="7857023">(</span><span class="builtintype" id="7857024">float64</span><span class="op" id="7857031">(</span><span class="ident" id="7857032">f</span><span class="op" id="7857033">)</span><span class="op" id="7857034">)</span>&nbsp;<span class="op" id="7857036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857040">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857051">r</span>&nbsp;<span class="op" id="7857053">:=</span>&nbsp;<span class="builtinfunc" id="7857056">new</span><span class="op" id="7857059">(</span><span class="ident" id="7857060">Rat</span><span class="op" id="7857063">)</span><span class="op" id="7857064">.</span><span class="ident" id="7857065">SetFloat64</span><span class="op" id="7857075">(</span><span class="builtintype" id="7857076">float64</span><span class="op" id="7857083">(</span><span class="ident" id="7857084">f</span><span class="op" id="7857085">)</span><span class="op" id="7857086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857089">if</span>&nbsp;<span class="ident" id="7857092">r</span>&nbsp;<span class="op" id="7857094">==</span>&nbsp;<span class="ident" id="7857097">nil</span>&nbsp;<span class="op" id="7857101">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857105">t</span><span class="op" id="7857106">.</span><span class="ident" id="7857107">Errorf</span><span class="op" id="7857113">(</span><span class="string" id="7857114">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7857155">,</span>&nbsp;<span class="ident" id="7857157">f</span><span class="op" id="7857158">,</span>&nbsp;<span class="ident" id="7857160">f</span><span class="op" id="7857161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857165">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857176">f2</span><span class="op" id="7857178">,</span>&nbsp;<span class="ident" id="7857180">exact</span>&nbsp;<span class="op" id="7857186">:=</span>&nbsp;<span class="ident" id="7857189">r</span><span class="op" id="7857190">.</span><span class="ident" id="7857191">Float32</span><span class="op" id="7857198">(</span><span class="op" id="7857199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857202">if</span>&nbsp;<span class="ident" id="7857205">f</span>&nbsp;<span class="op" id="7857207">!=</span>&nbsp;<span class="ident" id="7857210">f2</span>&nbsp;<span class="op" id="7857213">||</span>&nbsp;<span class="op" id="7857216">!</span><span class="ident" id="7857217">exact</span>&nbsp;<span class="op" id="7857223">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857227">t</span><span class="op" id="7857228">.</span><span class="ident" id="7857229">Errorf</span><span class="op" id="7857235">(</span><span class="string" id="7857236">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7857319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857324">f</span><span class="op" id="7857325">,</span>&nbsp;<span class="ident" id="7857327">f2</span><span class="op" id="7857329">,</span>&nbsp;<span class="ident" id="7857331">f2</span><span class="op" id="7857333">,</span>&nbsp;<span class="ident" id="7857335">exact</span><span class="op" id="7857340">,</span>&nbsp;<span class="ident" id="7857342">f</span><span class="op" id="7857343">,</span>&nbsp;<span class="ident" id="7857345">f</span><span class="op" id="7857346">,</span>&nbsp;<span class="builtintype" id="7857348">true</span><span class="op" id="7857352">,</span>&nbsp;<span class="ident" id="7857354">f2</span><span class="op" id="7857356">-</span><span class="ident" id="7857357">f</span><span class="op" id="7857358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857361">}</span><br>
<span class="lineno"></span><span class="op" id="7857363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7857366">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7857439">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7857466">func</span>&nbsp;<span class="ident" id="7857471">checkNonLossyRoundtrip64</span><span class="op" id="7857495">(</span><span class="ident" id="7857496">t</span>&nbsp;<span class="op" id="7857498">*</span><span class="ident" id="7857499">testing</span><span class="op" id="7857506">.</span><span class="ident" id="7857507">T</span><span class="op" id="7857508">,</span>&nbsp;<span class="ident" id="7857510">f</span>&nbsp;<span class="builtintype" id="7857512">float64</span><span class="op" id="7857519">)</span>&nbsp;<span class="op" id="7857521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857524">if</span>&nbsp;<span class="op" id="7857527">!</span><span class="ident" id="7857528">isFinite</span><span class="op" id="7857536">(</span><span class="ident" id="7857537">f</span><span class="op" id="7857538">)</span>&nbsp;<span class="op" id="7857540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857544">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857555">r</span>&nbsp;<span class="op" id="7857557">:=</span>&nbsp;<span class="builtinfunc" id="7857560">new</span><span class="op" id="7857563">(</span><span class="ident" id="7857564">Rat</span><span class="op" id="7857567">)</span><span class="op" id="7857568">.</span><span class="ident" id="7857569">SetFloat64</span><span class="op" id="7857579">(</span><span class="ident" id="7857580">f</span><span class="op" id="7857581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857584">if</span>&nbsp;<span class="ident" id="7857587">r</span>&nbsp;<span class="op" id="7857589">==</span>&nbsp;<span class="ident" id="7857592">nil</span>&nbsp;<span class="op" id="7857596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857600">t</span><span class="op" id="7857601">.</span><span class="ident" id="7857602">Errorf</span><span class="op" id="7857608">(</span><span class="string" id="7857609">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7857641">,</span>&nbsp;<span class="ident" id="7857643">f</span><span class="op" id="7857644">,</span>&nbsp;<span class="ident" id="7857646">f</span><span class="op" id="7857647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857651">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857662">f2</span><span class="op" id="7857664">,</span>&nbsp;<span class="ident" id="7857666">exact</span>&nbsp;<span class="op" id="7857672">:=</span>&nbsp;<span class="ident" id="7857675">r</span><span class="op" id="7857676">.</span><span class="ident" id="7857677">Float64</span><span class="op" id="7857684">(</span><span class="op" id="7857685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857688">if</span>&nbsp;<span class="ident" id="7857691">f</span>&nbsp;<span class="op" id="7857693">!=</span>&nbsp;<span class="ident" id="7857696">f2</span>&nbsp;<span class="op" id="7857699">||</span>&nbsp;<span class="op" id="7857702">!</span><span class="ident" id="7857703">exact</span>&nbsp;<span class="op" id="7857709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857713">t</span><span class="op" id="7857714">.</span><span class="ident" id="7857715">Errorf</span><span class="op" id="7857721">(</span><span class="string" id="7857722">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7857796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857801">f</span><span class="op" id="7857802">,</span>&nbsp;<span class="ident" id="7857804">f2</span><span class="op" id="7857806">,</span>&nbsp;<span class="ident" id="7857808">f2</span><span class="op" id="7857810">,</span>&nbsp;<span class="ident" id="7857812">exact</span><span class="op" id="7857817">,</span>&nbsp;<span class="ident" id="7857819">f</span><span class="op" id="7857820">,</span>&nbsp;<span class="ident" id="7857822">f</span><span class="op" id="7857823">,</span>&nbsp;<span class="builtintype" id="7857825">true</span><span class="op" id="7857829">,</span>&nbsp;<span class="ident" id="7857831">f2</span><span class="op" id="7857833">-</span><span class="ident" id="7857834">f</span><span class="op" id="7857835">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857838">}</span><br>
<span class="lineno"></span><span class="op" id="7857840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7857843">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7857901">func</span>&nbsp;<span class="ident" id="7857906">delta</span><span class="op" id="7857911">(</span><span class="ident" id="7857912">r</span>&nbsp;<span class="op" id="7857914">*</span><span class="ident" id="7857915">Rat</span><span class="op" id="7857918">,</span>&nbsp;<span class="ident" id="7857920">f</span>&nbsp;<span class="builtintype" id="7857922">float64</span><span class="op" id="7857929">)</span>&nbsp;<span class="op" id="7857931">*</span><span class="ident" id="7857932">Rat</span>&nbsp;<span class="op" id="7857936">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857939">d</span>&nbsp;<span class="op" id="7857941">:=</span>&nbsp;<span class="builtinfunc" id="7857944">new</span><span class="op" id="7857947">(</span><span class="ident" id="7857948">Rat</span><span class="op" id="7857951">)</span><span class="op" id="7857952">.</span><span class="ident" id="7857953">Sub</span><span class="op" id="7857956">(</span><span class="ident" id="7857957">r</span><span class="op" id="7857958">,</span>&nbsp;<span class="builtinfunc" id="7857960">new</span><span class="op" id="7857963">(</span><span class="ident" id="7857964">Rat</span><span class="op" id="7857967">)</span><span class="op" id="7857968">.</span><span class="ident" id="7857969">SetFloat64</span><span class="op" id="7857979">(</span><span class="ident" id="7857980">f</span><span class="op" id="7857981">)</span><span class="op" id="7857982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857985">return</span>&nbsp;<span class="ident" id="7857992">d</span><span class="op" id="7857993">.</span><span class="ident" id="7857994">Abs</span><span class="op" id="7857997">(</span><span class="ident" id="7857998">d</span><span class="op" id="7857999">)</span><br>
<span class="lineno"></span><span class="op" id="7858001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7858004">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7858070">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7858093">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7858121">func</span>&nbsp;<span class="ident" id="7858126">checkIsBestApprox32</span><span class="op" id="7858145">(</span><span class="ident" id="7858146">t</span>&nbsp;<span class="op" id="7858148">*</span><span class="ident" id="7858149">testing</span><span class="op" id="7858156">.</span><span class="ident" id="7858157">T</span><span class="op" id="7858158">,</span>&nbsp;<span class="ident" id="7858160">f</span>&nbsp;<span class="builtintype" id="7858162">float32</span><span class="op" id="7858169">,</span>&nbsp;<span class="ident" id="7858171">r</span>&nbsp;<span class="op" id="7858173">*</span><span class="ident" id="7858174">Rat</span><span class="op" id="7858177">)</span>&nbsp;<span class="builtintype" id="7858179">bool</span>&nbsp;<span class="op" id="7858184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858187">if</span>&nbsp;<span class="ident" id="7858190">math</span><span class="op" id="7858194">.</span><span class="ident" id="7858195">Abs</span><span class="op" id="7858198">(</span><span class="builtintype" id="7858199">float64</span><span class="op" id="7858206">(</span><span class="ident" id="7858207">f</span><span class="op" id="7858208">)</span><span class="op" id="7858209">)</span>&nbsp;<span class="op" id="7858211">&gt;=</span>&nbsp;<span class="ident" id="7858214">math</span><span class="op" id="7858218">.</span><span class="ident" id="7858219">MaxFloat32</span>&nbsp;<span class="op" id="7858230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7858234">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7858305">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858353">return</span>&nbsp;<span class="builtintype" id="7858360">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7858370">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858437">f0</span>&nbsp;<span class="op" id="7858440">:=</span>&nbsp;<span class="ident" id="7858443">math</span><span class="op" id="7858447">.</span><span class="ident" id="7858448">Nextafter32</span><span class="op" id="7858459">(</span><span class="ident" id="7858460">f</span><span class="op" id="7858461">,</span>&nbsp;<span class="builtintype" id="7858463">float32</span><span class="op" id="7858470">(</span><span class="ident" id="7858471">math</span><span class="op" id="7858475">.</span><span class="ident" id="7858476">Inf</span><span class="op" id="7858479">(</span><span class="op" id="7858480">-</span><span class="num" id="7858481">1</span><span class="op" id="7858482">)</span><span class="op" id="7858483">)</span><span class="op" id="7858484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858487">f1</span>&nbsp;<span class="op" id="7858490">:=</span>&nbsp;<span class="ident" id="7858493">math</span><span class="op" id="7858497">.</span><span class="ident" id="7858498">Nextafter32</span><span class="op" id="7858509">(</span><span class="ident" id="7858510">f</span><span class="op" id="7858511">,</span>&nbsp;<span class="builtintype" id="7858513">float32</span><span class="op" id="7858520">(</span><span class="ident" id="7858521">math</span><span class="op" id="7858525">.</span><span class="ident" id="7858526">Inf</span><span class="op" id="7858529">(</span><span class="op" id="7858530">+</span><span class="num" id="7858531">1</span><span class="op" id="7858532">)</span><span class="op" id="7858533">)</span><span class="op" id="7858534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7858538">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858603">df</span>&nbsp;<span class="op" id="7858606">:=</span>&nbsp;<span class="ident" id="7858609">delta</span><span class="op" id="7858614">(</span><span class="ident" id="7858615">r</span><span class="op" id="7858616">,</span>&nbsp;<span class="builtintype" id="7858618">float64</span><span class="op" id="7858625">(</span><span class="ident" id="7858626">f</span><span class="op" id="7858627">)</span><span class="op" id="7858628">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858631">df0</span>&nbsp;<span class="op" id="7858635">:=</span>&nbsp;<span class="ident" id="7858638">delta</span><span class="op" id="7858643">(</span><span class="ident" id="7858644">r</span><span class="op" id="7858645">,</span>&nbsp;<span class="builtintype" id="7858647">float64</span><span class="op" id="7858654">(</span><span class="ident" id="7858655">f0</span><span class="op" id="7858657">)</span><span class="op" id="7858658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858661">df1</span>&nbsp;<span class="op" id="7858665">:=</span>&nbsp;<span class="ident" id="7858668">delta</span><span class="op" id="7858673">(</span><span class="ident" id="7858674">r</span><span class="op" id="7858675">,</span>&nbsp;<span class="builtintype" id="7858677">float64</span><span class="op" id="7858684">(</span><span class="ident" id="7858685">f1</span><span class="op" id="7858687">)</span><span class="op" id="7858688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858691">if</span>&nbsp;<span class="ident" id="7858694">df</span><span class="op" id="7858696">.</span><span class="ident" id="7858697">Cmp</span><span class="op" id="7858700">(</span><span class="ident" id="7858701">df0</span><span class="op" id="7858704">)</span>&nbsp;<span class="op" id="7858706">&gt;</span>&nbsp;<span class="num" id="7858708">0</span>&nbsp;<span class="op" id="7858710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858714">t</span><span class="op" id="7858715">.</span><span class="ident" id="7858716">Errorf</span><span class="op" id="7858722">(</span><span class="string" id="7858723">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7858792">,</span>&nbsp;<span class="ident" id="7858794">r</span><span class="op" id="7858795">,</span>&nbsp;<span class="ident" id="7858797">f</span><span class="op" id="7858798">,</span>&nbsp;<span class="ident" id="7858800">f</span><span class="op" id="7858801">,</span>&nbsp;<span class="ident" id="7858803">f0</span><span class="op" id="7858805">,</span>&nbsp;<span class="ident" id="7858807">f0</span><span class="op" id="7858809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858813">return</span>&nbsp;<span class="builtintype" id="7858820">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858830">if</span>&nbsp;<span class="ident" id="7858833">df</span><span class="op" id="7858835">.</span><span class="ident" id="7858836">Cmp</span><span class="op" id="7858839">(</span><span class="ident" id="7858840">df1</span><span class="op" id="7858843">)</span>&nbsp;<span class="op" id="7858845">&gt;</span>&nbsp;<span class="num" id="7858847">0</span>&nbsp;<span class="op" id="7858849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858853">t</span><span class="op" id="7858854">.</span><span class="ident" id="7858855">Errorf</span><span class="op" id="7858861">(</span><span class="string" id="7858862">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7858927">,</span>&nbsp;<span class="ident" id="7858929">r</span><span class="op" id="7858930">,</span>&nbsp;<span class="ident" id="7858932">f</span><span class="op" id="7858933">,</span>&nbsp;<span class="ident" id="7858935">f</span><span class="op" id="7858936">,</span>&nbsp;<span class="ident" id="7858938">f1</span><span class="op" id="7858940">,</span>&nbsp;<span class="ident" id="7858942">f1</span><span class="op" id="7858944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858948">return</span>&nbsp;<span class="builtintype" id="7858955">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858962">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858965">if</span>&nbsp;<span class="ident" id="7858968">df</span><span class="op" id="7858970">.</span><span class="ident" id="7858971">Cmp</span><span class="op" id="7858974">(</span><span class="ident" id="7858975">df0</span><span class="op" id="7858978">)</span>&nbsp;<span class="op" id="7858980">==</span>&nbsp;<span class="num" id="7858983">0</span>&nbsp;<span class="op" id="7858985">&amp;&amp;</span>&nbsp;<span class="op" id="7858988">!</span><span class="ident" id="7858989">isEven32</span><span class="op" id="7858997">(</span><span class="ident" id="7858998">f</span><span class="op" id="7858999">)</span>&nbsp;<span class="op" id="7859001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859005">t</span><span class="op" id="7859006">.</span><span class="ident" id="7859007">Errorf</span><span class="op" id="7859013">(</span><span class="string" id="7859014">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7859091">,</span>&nbsp;<span class="ident" id="7859093">r</span><span class="op" id="7859094">,</span>&nbsp;<span class="ident" id="7859096">f</span><span class="op" id="7859097">,</span>&nbsp;<span class="ident" id="7859099">f</span><span class="op" id="7859100">,</span>&nbsp;<span class="ident" id="7859102">f0</span><span class="op" id="7859104">,</span>&nbsp;<span class="ident" id="7859106">f0</span><span class="op" id="7859108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859112">return</span>&nbsp;<span class="builtintype" id="7859119">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859129">if</span>&nbsp;<span class="ident" id="7859132">df</span><span class="op" id="7859134">.</span><span class="ident" id="7859135">Cmp</span><span class="op" id="7859138">(</span><span class="ident" id="7859139">df1</span><span class="op" id="7859142">)</span>&nbsp;<span class="op" id="7859144">==</span>&nbsp;<span class="num" id="7859147">0</span>&nbsp;<span class="op" id="7859149">&amp;&amp;</span>&nbsp;<span class="op" id="7859152">!</span><span class="ident" id="7859153">isEven32</span><span class="op" id="7859161">(</span><span class="ident" id="7859162">f</span><span class="op" id="7859163">)</span>&nbsp;<span class="op" id="7859165">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859169">t</span><span class="op" id="7859170">.</span><span class="ident" id="7859171">Errorf</span><span class="op" id="7859177">(</span><span class="string" id="7859178">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7859255">,</span>&nbsp;<span class="ident" id="7859257">r</span><span class="op" id="7859258">,</span>&nbsp;<span class="ident" id="7859260">f</span><span class="op" id="7859261">,</span>&nbsp;<span class="ident" id="7859263">f</span><span class="op" id="7859264">,</span>&nbsp;<span class="ident" id="7859266">f1</span><span class="op" id="7859268">,</span>&nbsp;<span class="ident" id="7859270">f1</span><span class="op" id="7859272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859276">return</span>&nbsp;<span class="builtintype" id="7859283">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859293">return</span>&nbsp;<span class="builtintype" id="7859300">true</span><br>
<span class="lineno"></span><span class="op" id="7859305">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7859308">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7859374">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7859397">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7859425">func</span>&nbsp;<span class="ident" id="7859430">checkIsBestApprox64</span><span class="op" id="7859449">(</span><span class="ident" id="7859450">t</span>&nbsp;<span class="op" id="7859452">*</span><span class="ident" id="7859453">testing</span><span class="op" id="7859460">.</span><span class="ident" id="7859461">T</span><span class="op" id="7859462">,</span>&nbsp;<span class="ident" id="7859464">f</span>&nbsp;<span class="builtintype" id="7859466">float64</span><span class="op" id="7859473">,</span>&nbsp;<span class="ident" id="7859475">r</span>&nbsp;<span class="op" id="7859477">*</span><span class="ident" id="7859478">Rat</span><span class="op" id="7859481">)</span>&nbsp;<span class="builtintype" id="7859483">bool</span>&nbsp;<span class="op" id="7859488">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859491">if</span>&nbsp;<span class="ident" id="7859494">math</span><span class="op" id="7859498">.</span><span class="ident" id="7859499">Abs</span><span class="op" id="7859502">(</span><span class="ident" id="7859503">f</span><span class="op" id="7859504">)</span>&nbsp;<span class="op" id="7859506">&gt;=</span>&nbsp;<span class="ident" id="7859509">math</span><span class="op" id="7859513">.</span><span class="ident" id="7859514">MaxFloat64</span>&nbsp;<span class="op" id="7859525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859529">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859600">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859648">return</span>&nbsp;<span class="builtintype" id="7859655">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859661">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859665">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859732">f0</span>&nbsp;<span class="op" id="7859735">:=</span>&nbsp;<span class="ident" id="7859738">math</span><span class="op" id="7859742">.</span><span class="ident" id="7859743">Nextafter</span><span class="op" id="7859752">(</span><span class="ident" id="7859753">f</span><span class="op" id="7859754">,</span>&nbsp;<span class="ident" id="7859756">math</span><span class="op" id="7859760">.</span><span class="ident" id="7859761">Inf</span><span class="op" id="7859764">(</span><span class="op" id="7859765">-</span><span class="num" id="7859766">1</span><span class="op" id="7859767">)</span><span class="op" id="7859768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859771">f1</span>&nbsp;<span class="op" id="7859774">:=</span>&nbsp;<span class="ident" id="7859777">math</span><span class="op" id="7859781">.</span><span class="ident" id="7859782">Nextafter</span><span class="op" id="7859791">(</span><span class="ident" id="7859792">f</span><span class="op" id="7859793">,</span>&nbsp;<span class="ident" id="7859795">math</span><span class="op" id="7859799">.</span><span class="ident" id="7859800">Inf</span><span class="op" id="7859803">(</span><span class="op" id="7859804">+</span><span class="num" id="7859805">1</span><span class="op" id="7859806">)</span><span class="op" id="7859807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859811">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859876">df</span>&nbsp;<span class="op" id="7859879">:=</span>&nbsp;<span class="ident" id="7859882">delta</span><span class="op" id="7859887">(</span><span class="ident" id="7859888">r</span><span class="op" id="7859889">,</span>&nbsp;<span class="ident" id="7859891">f</span><span class="op" id="7859892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859895">df0</span>&nbsp;<span class="op" id="7859899">:=</span>&nbsp;<span class="ident" id="7859902">delta</span><span class="op" id="7859907">(</span><span class="ident" id="7859908">r</span><span class="op" id="7859909">,</span>&nbsp;<span class="ident" id="7859911">f0</span><span class="op" id="7859913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859916">df1</span>&nbsp;<span class="op" id="7859920">:=</span>&nbsp;<span class="ident" id="7859923">delta</span><span class="op" id="7859928">(</span><span class="ident" id="7859929">r</span><span class="op" id="7859930">,</span>&nbsp;<span class="ident" id="7859932">f1</span><span class="op" id="7859934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859937">if</span>&nbsp;<span class="ident" id="7859940">df</span><span class="op" id="7859942">.</span><span class="ident" id="7859943">Cmp</span><span class="op" id="7859946">(</span><span class="ident" id="7859947">df0</span><span class="op" id="7859950">)</span>&nbsp;<span class="op" id="7859952">&gt;</span>&nbsp;<span class="num" id="7859954">0</span>&nbsp;<span class="op" id="7859956">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859960">t</span><span class="op" id="7859961">.</span><span class="ident" id="7859962">Errorf</span><span class="op" id="7859968">(</span><span class="string" id="7859969">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7860038">,</span>&nbsp;<span class="ident" id="7860040">r</span><span class="op" id="7860041">,</span>&nbsp;<span class="ident" id="7860043">f</span><span class="op" id="7860044">,</span>&nbsp;<span class="ident" id="7860046">f</span><span class="op" id="7860047">,</span>&nbsp;<span class="ident" id="7860049">f0</span><span class="op" id="7860051">,</span>&nbsp;<span class="ident" id="7860053">f0</span><span class="op" id="7860055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860059">return</span>&nbsp;<span class="builtintype" id="7860066">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860076">if</span>&nbsp;<span class="ident" id="7860079">df</span><span class="op" id="7860081">.</span><span class="ident" id="7860082">Cmp</span><span class="op" id="7860085">(</span><span class="ident" id="7860086">df1</span><span class="op" id="7860089">)</span>&nbsp;<span class="op" id="7860091">&gt;</span>&nbsp;<span class="num" id="7860093">0</span>&nbsp;<span class="op" id="7860095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860099">t</span><span class="op" id="7860100">.</span><span class="ident" id="7860101">Errorf</span><span class="op" id="7860107">(</span><span class="string" id="7860108">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7860173">,</span>&nbsp;<span class="ident" id="7860175">r</span><span class="op" id="7860176">,</span>&nbsp;<span class="ident" id="7860178">f</span><span class="op" id="7860179">,</span>&nbsp;<span class="ident" id="7860181">f</span><span class="op" id="7860182">,</span>&nbsp;<span class="ident" id="7860184">f1</span><span class="op" id="7860186">,</span>&nbsp;<span class="ident" id="7860188">f1</span><span class="op" id="7860190">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860194">return</span>&nbsp;<span class="builtintype" id="7860201">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860211">if</span>&nbsp;<span class="ident" id="7860214">df</span><span class="op" id="7860216">.</span><span class="ident" id="7860217">Cmp</span><span class="op" id="7860220">(</span><span class="ident" id="7860221">df0</span><span class="op" id="7860224">)</span>&nbsp;<span class="op" id="7860226">==</span>&nbsp;<span class="num" id="7860229">0</span>&nbsp;<span class="op" id="7860231">&amp;&amp;</span>&nbsp;<span class="op" id="7860234">!</span><span class="ident" id="7860235">isEven64</span><span class="op" id="7860243">(</span><span class="ident" id="7860244">f</span><span class="op" id="7860245">)</span>&nbsp;<span class="op" id="7860247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860251">t</span><span class="op" id="7860252">.</span><span class="ident" id="7860253">Errorf</span><span class="op" id="7860259">(</span><span class="string" id="7860260">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7860337">,</span>&nbsp;<span class="ident" id="7860339">r</span><span class="op" id="7860340">,</span>&nbsp;<span class="ident" id="7860342">f</span><span class="op" id="7860343">,</span>&nbsp;<span class="ident" id="7860345">f</span><span class="op" id="7860346">,</span>&nbsp;<span class="ident" id="7860348">f0</span><span class="op" id="7860350">,</span>&nbsp;<span class="ident" id="7860352">f0</span><span class="op" id="7860354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860358">return</span>&nbsp;<span class="builtintype" id="7860365">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860375">if</span>&nbsp;<span class="ident" id="7860378">df</span><span class="op" id="7860380">.</span><span class="ident" id="7860381">Cmp</span><span class="op" id="7860384">(</span><span class="ident" id="7860385">df1</span><span class="op" id="7860388">)</span>&nbsp;<span class="op" id="7860390">==</span>&nbsp;<span class="num" id="7860393">0</span>&nbsp;<span class="op" id="7860395">&amp;&amp;</span>&nbsp;<span class="op" id="7860398">!</span><span class="ident" id="7860399">isEven64</span><span class="op" id="7860407">(</span><span class="ident" id="7860408">f</span><span class="op" id="7860409">)</span>&nbsp;<span class="op" id="7860411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860415">t</span><span class="op" id="7860416">.</span><span class="ident" id="7860417">Errorf</span><span class="op" id="7860423">(</span><span class="string" id="7860424">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7860501">,</span>&nbsp;<span class="ident" id="7860503">r</span><span class="op" id="7860504">,</span>&nbsp;<span class="ident" id="7860506">f</span><span class="op" id="7860507">,</span>&nbsp;<span class="ident" id="7860509">f</span><span class="op" id="7860510">,</span>&nbsp;<span class="ident" id="7860512">f1</span><span class="op" id="7860514">,</span>&nbsp;<span class="ident" id="7860516">f1</span><span class="op" id="7860518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860522">return</span>&nbsp;<span class="builtintype" id="7860529">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860536">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860539">return</span>&nbsp;<span class="builtintype" id="7860546">true</span><br>
<span class="lineno"></span><span class="op" id="7860551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7860554">func</span>&nbsp;<span class="ident" id="7860559">isEven32</span><span class="op" id="7860567">(</span><span class="ident" id="7860568">f</span>&nbsp;<span class="builtintype" id="7860570">float32</span><span class="op" id="7860577">)</span>&nbsp;<span class="builtintype" id="7860579">bool</span>&nbsp;<span class="op" id="7860584">{</span>&nbsp;<span class="keyword" id="7860586">return</span>&nbsp;<span class="ident" id="7860593">math</span><span class="op" id="7860597">.</span><span class="ident" id="7860598">Float32bits</span><span class="op" id="7860609">(</span><span class="ident" id="7860610">f</span><span class="op" id="7860611">)</span><span class="op" id="7860612">&amp;</span><span class="num" id="7860613">1</span>&nbsp;<span class="op" id="7860615">==</span>&nbsp;<span class="num" id="7860618">0</span>&nbsp;<span class="op" id="7860620">}</span><br>
<span class="lineno"></span><span class="keyword" id="7860622">func</span>&nbsp;<span class="ident" id="7860627">isEven64</span><span class="op" id="7860635">(</span><span class="ident" id="7860636">f</span>&nbsp;<span class="builtintype" id="7860638">float64</span><span class="op" id="7860645">)</span>&nbsp;<span class="builtintype" id="7860647">bool</span>&nbsp;<span class="op" id="7860652">{</span>&nbsp;<span class="keyword" id="7860654">return</span>&nbsp;<span class="ident" id="7860661">math</span><span class="op" id="7860665">.</span><span class="ident" id="7860666">Float64bits</span><span class="op" id="7860677">(</span><span class="ident" id="7860678">f</span><span class="op" id="7860679">)</span><span class="op" id="7860680">&amp;</span><span class="num" id="7860681">1</span>&nbsp;<span class="op" id="7860683">==</span>&nbsp;<span class="num" id="7860686">0</span>&nbsp;<span class="op" id="7860688">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7860691">func</span>&nbsp;<span class="ident" id="7860696">TestIsFinite</span><span class="op" id="7860708">(</span><span class="ident" id="7860709">t</span>&nbsp;<span class="op" id="7860711">*</span><span class="ident" id="7860712">testing</span><span class="op" id="7860719">.</span><span class="ident" id="7860720">T</span><span class="op" id="7860721">)</span>&nbsp;<span class="op" id="7860723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860726">finites</span>&nbsp;<span class="op" id="7860734">:=</span>&nbsp;<span class="op" id="7860737">[</span><span class="op" id="7860738">]</span><span class="builtintype" id="7860739">float64</span><span class="op" id="7860746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7860750">1.0</span>&nbsp;<span class="op" id="7860754">/</span>&nbsp;<span class="num" id="7860756">3</span><span class="op" id="7860757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7860761">4891559871276714924261e+222</span><span class="op" id="7860788">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860792">math</span><span class="op" id="7860796">.</span><span class="ident" id="7860797">MaxFloat64</span><span class="op" id="7860807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860811">math</span><span class="op" id="7860815">.</span><span class="ident" id="7860816">SmallestNonzeroFloat64</span><span class="op" id="7860838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860842">-</span><span class="ident" id="7860843">math</span><span class="op" id="7860847">.</span><span class="ident" id="7860848">MaxFloat64</span><span class="op" id="7860858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860862">-</span><span class="ident" id="7860863">math</span><span class="op" id="7860867">.</span><span class="ident" id="7860868">SmallestNonzeroFloat64</span><span class="op" id="7860890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860893">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860896">for</span>&nbsp;<span class="ident" id="7860900">_</span><span class="op" id="7860901">,</span>&nbsp;<span class="ident" id="7860903">f</span>&nbsp;<span class="op" id="7860905">:=</span>&nbsp;<span class="keyword" id="7860908">range</span>&nbsp;<span class="ident" id="7860914">finites</span>&nbsp;<span class="op" id="7860922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860926">if</span>&nbsp;<span class="op" id="7860929">!</span><span class="ident" id="7860930">isFinite</span><span class="op" id="7860938">(</span><span class="ident" id="7860939">f</span><span class="op" id="7860940">)</span>&nbsp;<span class="op" id="7860942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860947">t</span><span class="op" id="7860948">.</span><span class="ident" id="7860949">Errorf</span><span class="op" id="7860955">(</span><span class="string" id="7860956">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7860976">,</span>&nbsp;<span class="ident" id="7860978">f</span><span class="op" id="7860979">,</span>&nbsp;<span class="ident" id="7860981">f</span><span class="op" id="7860982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860989">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860992">nonfinites</span>&nbsp;<span class="op" id="7861003">:=</span>&nbsp;<span class="op" id="7861006">[</span><span class="op" id="7861007">]</span><span class="builtintype" id="7861008">float64</span><span class="op" id="7861015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861019">math</span><span class="op" id="7861023">.</span><span class="ident" id="7861024">NaN</span><span class="op" id="7861027">(</span><span class="op" id="7861028">)</span><span class="op" id="7861029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861033">math</span><span class="op" id="7861037">.</span><span class="ident" id="7861038">Inf</span><span class="op" id="7861041">(</span><span class="op" id="7861042">-</span><span class="num" id="7861043">1</span><span class="op" id="7861044">)</span><span class="op" id="7861045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861049">math</span><span class="op" id="7861053">.</span><span class="ident" id="7861054">Inf</span><span class="op" id="7861057">(</span><span class="op" id="7861058">+</span><span class="num" id="7861059">1</span><span class="op" id="7861060">)</span><span class="op" id="7861061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861064">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861067">for</span>&nbsp;<span class="ident" id="7861071">_</span><span class="op" id="7861072">,</span>&nbsp;<span class="ident" id="7861074">f</span>&nbsp;<span class="op" id="7861076">:=</span>&nbsp;<span class="keyword" id="7861079">range</span>&nbsp;<span class="ident" id="7861085">nonfinites</span>&nbsp;<span class="op" id="7861096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861100">if</span>&nbsp;<span class="ident" id="7861103">isFinite</span><span class="op" id="7861111">(</span><span class="ident" id="7861112">f</span><span class="op" id="7861113">)</span>&nbsp;<span class="op" id="7861115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861120">t</span><span class="op" id="7861121">.</span><span class="ident" id="7861122">Errorf</span><span class="op" id="7861128">(</span><span class="string" id="7861129">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7861149">,</span>&nbsp;<span class="ident" id="7861151">f</span><span class="op" id="7861152">,</span>&nbsp;<span class="ident" id="7861154">f</span><span class="op" id="7861155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861162">}</span><br>
<span class="lineno">1160</span><span class="op" id="7861164">}</span>
</div>
</body>
</html>
