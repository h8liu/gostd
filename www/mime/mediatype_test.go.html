<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8225037">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8225092">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8225146">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8225197">package</span>&nbsp;<span class="ident" id="8225205">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8225211">import</span>&nbsp;<span class="op" id="8225218">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8225221">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8225232">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8225242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8225245">func</span>&nbsp;<span class="ident" id="8225250">TestConsumeToken</span><span class="op" id="8225266">(</span><span class="ident" id="8225267">t</span>&nbsp;<span class="op" id="8225269">*</span><span class="ident" id="8225270"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8225277">.</span><span class="ident" id="8225278">T</span><span class="op" id="8225279">)</span>&nbsp;<span class="op" id="8225281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225284">tests</span>&nbsp;<span class="op" id="8225290">:=</span>&nbsp;<span class="op" id="8225293">[</span><span class="op" id="8225294">...</span><span class="op" id="8225297">]</span><span class="op" id="8225298">[</span><span class="num" id="8225299">3</span><span class="op" id="8225300">]</span><span class="builtintype" id="8225301">string</span><span class="op" id="8225307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225311">{</span><span class="string" id="8225312">&#34;foo&nbsp;bar&#34;</span><span class="op" id="8225321">,</span>&nbsp;<span class="string" id="8225323">&#34;foo&#34;</span><span class="op" id="8225328">,</span>&nbsp;<span class="string" id="8225330">&#34;&nbsp;bar&#34;</span><span class="op" id="8225336">}</span><span class="op" id="8225337">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225341">{</span><span class="string" id="8225342">&#34;bar&#34;</span><span class="op" id="8225347">,</span>&nbsp;<span class="string" id="8225349">&#34;bar&#34;</span><span class="op" id="8225354">,</span>&nbsp;<span class="string" id="8225356">&#34;&#34;</span><span class="op" id="8225358">}</span><span class="op" id="8225359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225363">{</span><span class="string" id="8225364">&#34;&#34;</span><span class="op" id="8225366">,</span>&nbsp;<span class="string" id="8225368">&#34;&#34;</span><span class="op" id="8225370">,</span>&nbsp;<span class="string" id="8225372">&#34;&#34;</span><span class="op" id="8225374">}</span><span class="op" id="8225375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225379">{</span><span class="string" id="8225380">&#34;&nbsp;foo&#34;</span><span class="op" id="8225386">,</span>&nbsp;<span class="string" id="8225388">&#34;&#34;</span><span class="op" id="8225390">,</span>&nbsp;<span class="string" id="8225392">&#34;&nbsp;foo&#34;</span><span class="op" id="8225398">}</span><span class="op" id="8225399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225405">for</span>&nbsp;<span class="ident" id="8225409">_</span><span class="op" id="8225410">,</span>&nbsp;<span class="ident" id="8225412">test</span>&nbsp;<span class="op" id="8225417">:=</span>&nbsp;<span class="keyword" id="8225420">range</span>&nbsp;<span class="ident" id="8225426"><a href="/mime/mediatype_test.go.html#8225284">tests</a></span>&nbsp;<span class="op" id="8225432">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225436">token</span><span class="op" id="8225441">,</span>&nbsp;<span class="ident" id="8225443">rest</span>&nbsp;<span class="op" id="8225448">:=</span>&nbsp;<span class="ident" id="8225451"><a href="/mime/mediatype.go.html#3597501">consumeToken</a></span><span class="op" id="8225463">(</span><span class="ident" id="8225464"><a href="/mime/mediatype_test.go.html#8225412">test</a></span><span class="op" id="8225468">[</span><span class="num" id="8225469">0</span><span class="op" id="8225470">]</span><span class="op" id="8225471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225475">expectedToken</span>&nbsp;<span class="op" id="8225489">:=</span>&nbsp;<span class="ident" id="8225492"><a href="/mime/mediatype_test.go.html#8225412">test</a></span><span class="op" id="8225496">[</span><span class="num" id="8225497">1</span><span class="op" id="8225498">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225502">expectedRest</span>&nbsp;<span class="op" id="8225515">:=</span>&nbsp;<span class="ident" id="8225518"><a href="/mime/mediatype_test.go.html#8225412">test</a></span><span class="op" id="8225522">[</span><span class="num" id="8225523">2</span><span class="op" id="8225524">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8225528">if</span>&nbsp;<span class="ident" id="8225531"><a href="/mime/mediatype_test.go.html#8225436">token</a></span>&nbsp;<span class="op" id="8225537">!=</span>&nbsp;<span class="ident" id="8225540"><a href="/mime/mediatype_test.go.html#8225475">expectedToken</a></span>&nbsp;<span class="op" id="8225554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225559"><a href="/mime/mediatype_test.go.html#8225267">t</a></span><span class="op" id="8225560">.</span><span class="ident" id="8225561">Errorf</span><span class="op" id="8225567">(</span><span class="string" id="8225568">&#34;expected&nbsp;to&nbsp;consume&nbsp;token&nbsp;&#39;%s&#39;,&nbsp;not&nbsp;&#39;%s&#39;&nbsp;from&nbsp;&#39;%s&#39;&#34;</span><span class="op" id="8225620">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225626"><a href="/mime/mediatype_test.go.html#8225475">expectedToken</a></span><span class="op" id="8225639">,</span>&nbsp;<span class="ident" id="8225641"><a href="/mime/mediatype_test.go.html#8225436">token</a></span><span class="op" id="8225646">,</span>&nbsp;<span class="ident" id="8225648"><a href="/mime/mediatype_test.go.html#8225412">test</a></span><span class="op" id="8225652">[</span><span class="num" id="8225653">0</span><span class="op" id="8225654">]</span><span class="op" id="8225655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225659">}</span>&nbsp;<span class="keyword" id="8225661">else</span>&nbsp;<span class="keyword" id="8225666">if</span>&nbsp;<span class="ident" id="8225669"><a href="/mime/mediatype_test.go.html#8225443">rest</a></span>&nbsp;<span class="op" id="8225674">!=</span>&nbsp;<span class="ident" id="8225677"><a href="/mime/mediatype_test.go.html#8225502">expectedRest</a></span>&nbsp;<span class="op" id="8225690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225695"><a href="/mime/mediatype_test.go.html#8225267">t</a></span><span class="op" id="8225696">.</span><span class="ident" id="8225697">Errorf</span><span class="op" id="8225703">(</span><span class="string" id="8225704">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;&#39;%s&#39;,&nbsp;not&nbsp;&#39;%s&#39;&nbsp;after&nbsp;reading&nbsp;token&nbsp;&#39;%s&#39;&nbsp;from&nbsp;&#39;%s&#39;&#34;</span><span class="op" id="8225777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225783"><a href="/mime/mediatype_test.go.html#8225502">expectedRest</a></span><span class="op" id="8225795">,</span>&nbsp;<span class="ident" id="8225797"><a href="/mime/mediatype_test.go.html#8225443">rest</a></span><span class="op" id="8225801">,</span>&nbsp;<span class="ident" id="8225803"><a href="/mime/mediatype_test.go.html#8225436">token</a></span><span class="op" id="8225808">,</span>&nbsp;<span class="ident" id="8225810"><a href="/mime/mediatype_test.go.html#8225412">test</a></span><span class="op" id="8225814">[</span><span class="num" id="8225815">0</span><span class="op" id="8225816">]</span><span class="op" id="8225817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225821">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225824">}</span><br>
<span class="lineno"></span><span class="op" id="8225826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8225829">func</span>&nbsp;<span class="ident" id="8225834">TestConsumeValue</span><span class="op" id="8225850">(</span><span class="ident" id="8225851">t</span>&nbsp;<span class="op" id="8225853">*</span><span class="ident" id="8225854"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8225861">.</span><span class="ident" id="8225862">T</span><span class="op" id="8225863">)</span>&nbsp;<span class="op" id="8225865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8225868">tests</span>&nbsp;<span class="op" id="8225874">:=</span>&nbsp;<span class="op" id="8225877">[</span><span class="op" id="8225878">...</span><span class="op" id="8225881">]</span><span class="op" id="8225882">[</span><span class="num" id="8225883">3</span><span class="op" id="8225884">]</span><span class="builtintype" id="8225885">string</span><span class="op" id="8225891">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225895">{</span><span class="string" id="8225896">&#34;foo&nbsp;bar&#34;</span><span class="op" id="8225905">,</span>&nbsp;<span class="string" id="8225907">&#34;foo&#34;</span><span class="op" id="8225912">,</span>&nbsp;<span class="string" id="8225914">&#34;&nbsp;bar&#34;</span><span class="op" id="8225920">}</span><span class="op" id="8225921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225925">{</span><span class="string" id="8225926">&#34;bar&#34;</span><span class="op" id="8225931">,</span>&nbsp;<span class="string" id="8225933">&#34;bar&#34;</span><span class="op" id="8225938">,</span>&nbsp;<span class="string" id="8225940">&#34;&#34;</span><span class="op" id="8225942">}</span><span class="op" id="8225943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225947">{</span><span class="string" id="8225948">&#34;&nbsp;bar&nbsp;&#34;</span><span class="op" id="8225955">,</span>&nbsp;<span class="string" id="8225957">&#34;&#34;</span><span class="op" id="8225959">,</span>&nbsp;<span class="string" id="8225961">&#34;&nbsp;bar&nbsp;&#34;</span><span class="op" id="8225968">}</span><span class="op" id="8225969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8225973">{</span><span class="string" id="8225974">`&#34;My&nbsp;value&#34;end`</span><span class="op" id="8225989">,</span>&nbsp;<span class="string" id="8225991">&#34;My&nbsp;value&#34;</span><span class="op" id="8226001">,</span>&nbsp;<span class="string" id="8226003">&#34;end&#34;</span><span class="op" id="8226008">}</span><span class="op" id="8226009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226013">{</span><span class="string" id="8226014">`&#34;My&nbsp;value&#34;&nbsp;end`</span><span class="op" id="8226030">,</span>&nbsp;<span class="string" id="8226032">&#34;My&nbsp;value&#34;</span><span class="op" id="8226042">,</span>&nbsp;<span class="string" id="8226044">&#34;&nbsp;end&#34;</span><span class="op" id="8226050">}</span><span class="op" id="8226051">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226055">{</span><span class="string" id="8226056">`&#34;\\&#34;&nbsp;rest`</span><span class="op" id="8226067">,</span>&nbsp;<span class="string" id="8226069">&#34;\\&#34;</span><span class="op" id="8226073">,</span>&nbsp;<span class="string" id="8226075">&#34;&nbsp;rest&#34;</span><span class="op" id="8226082">}</span><span class="op" id="8226083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226087">{</span><span class="string" id="8226088">`&#34;My&nbsp;\&#34;&nbsp;value&#34;end`</span><span class="op" id="8226106">,</span>&nbsp;<span class="string" id="8226108">&#34;My&nbsp;\&#34;&nbsp;value&#34;</span><span class="op" id="8226121">,</span>&nbsp;<span class="string" id="8226123">&#34;end&#34;</span><span class="op" id="8226128">}</span><span class="op" id="8226129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226133">{</span><span class="string" id="8226134">`&#34;\&#34;&nbsp;rest`</span><span class="op" id="8226144">,</span>&nbsp;<span class="string" id="8226146">&#34;&#34;</span><span class="op" id="8226148">,</span>&nbsp;<span class="string" id="8226150">`&#34;\&#34;&nbsp;rest`</span><span class="op" id="8226160">}</span><span class="op" id="8226161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226167">for</span>&nbsp;<span class="ident" id="8226171">_</span><span class="op" id="8226172">,</span>&nbsp;<span class="ident" id="8226174">test</span>&nbsp;<span class="op" id="8226179">:=</span>&nbsp;<span class="keyword" id="8226182">range</span>&nbsp;<span class="ident" id="8226188"><a href="/mime/mediatype_test.go.html#8225868">tests</a></span>&nbsp;<span class="op" id="8226194">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226198">value</span><span class="op" id="8226203">,</span>&nbsp;<span class="ident" id="8226205">rest</span>&nbsp;<span class="op" id="8226210">:=</span>&nbsp;<span class="ident" id="8226213"><a href="/mime/mediatype.go.html#3597980">consumeValue</a></span><span class="op" id="8226225">(</span><span class="ident" id="8226226"><a href="/mime/mediatype_test.go.html#8226174">test</a></span><span class="op" id="8226230">[</span><span class="num" id="8226231">0</span><span class="op" id="8226232">]</span><span class="op" id="8226233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226237">expectedValue</span>&nbsp;<span class="op" id="8226251">:=</span>&nbsp;<span class="ident" id="8226254"><a href="/mime/mediatype_test.go.html#8226174">test</a></span><span class="op" id="8226258">[</span><span class="num" id="8226259">1</span><span class="op" id="8226260">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226264">expectedRest</span>&nbsp;<span class="op" id="8226277">:=</span>&nbsp;<span class="ident" id="8226280"><a href="/mime/mediatype_test.go.html#8226174">test</a></span><span class="op" id="8226284">[</span><span class="num" id="8226285">2</span><span class="op" id="8226286">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8226290">if</span>&nbsp;<span class="ident" id="8226293"><a href="/mime/mediatype_test.go.html#8226198">value</a></span>&nbsp;<span class="op" id="8226299">!=</span>&nbsp;<span class="ident" id="8226302"><a href="/mime/mediatype_test.go.html#8226237">expectedValue</a></span>&nbsp;<span class="op" id="8226316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226321"><a href="/mime/mediatype_test.go.html#8225851">t</a></span><span class="op" id="8226322">.</span><span class="ident" id="8226323">Errorf</span><span class="op" id="8226329">(</span><span class="string" id="8226330">&#34;expected&nbsp;to&nbsp;consume&nbsp;value&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="8226382">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226388"><a href="/mime/mediatype_test.go.html#8226237">expectedValue</a></span><span class="op" id="8226401">,</span>&nbsp;<span class="ident" id="8226403"><a href="/mime/mediatype_test.go.html#8226198">value</a></span><span class="op" id="8226408">,</span>&nbsp;<span class="ident" id="8226410"><a href="/mime/mediatype_test.go.html#8226174">test</a></span><span class="op" id="8226414">[</span><span class="num" id="8226415">0</span><span class="op" id="8226416">]</span><span class="op" id="8226417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226421">}</span>&nbsp;<span class="keyword" id="8226423">else</span>&nbsp;<span class="keyword" id="8226428">if</span>&nbsp;<span class="ident" id="8226431"><a href="/mime/mediatype_test.go.html#8226205">rest</a></span>&nbsp;<span class="op" id="8226436">!=</span>&nbsp;<span class="ident" id="8226439"><a href="/mime/mediatype_test.go.html#8226264">expectedRest</a></span>&nbsp;<span class="op" id="8226452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226457"><a href="/mime/mediatype_test.go.html#8225851">t</a></span><span class="op" id="8226458">.</span><span class="ident" id="8226459">Errorf</span><span class="op" id="8226465">(</span><span class="string" id="8226466">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;after&nbsp;reading&nbsp;value&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="8226539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226545"><a href="/mime/mediatype_test.go.html#8226264">expectedRest</a></span><span class="op" id="8226557">,</span>&nbsp;<span class="ident" id="8226559"><a href="/mime/mediatype_test.go.html#8226205">rest</a></span><span class="op" id="8226563">,</span>&nbsp;<span class="ident" id="8226565"><a href="/mime/mediatype_test.go.html#8226198">value</a></span><span class="op" id="8226570">,</span>&nbsp;<span class="ident" id="8226572"><a href="/mime/mediatype_test.go.html#8226174">test</a></span><span class="op" id="8226576">[</span><span class="num" id="8226577">0</span><span class="op" id="8226578">]</span><span class="op" id="8226579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226583">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226586">}</span><br>
<span class="lineno"></span><span class="op" id="8226588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8226591">func</span>&nbsp;<span class="ident" id="8226596">TestConsumeMediaParam</span><span class="op" id="8226617">(</span><span class="ident" id="8226618">t</span>&nbsp;<span class="op" id="8226620">*</span><span class="ident" id="8226621"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8226628">.</span><span class="ident" id="8226629">T</span><span class="op" id="8226630">)</span>&nbsp;<span class="op" id="8226632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8226635">tests</span>&nbsp;<span class="op" id="8226641">:=</span>&nbsp;<span class="op" id="8226644">[</span><span class="op" id="8226645">...</span><span class="op" id="8226648">]</span><span class="op" id="8226649">[</span><span class="num" id="8226650">4</span><span class="op" id="8226651">]</span><span class="builtintype" id="8226652">string</span><span class="op" id="8226658">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226662">{</span><span class="string" id="8226663">&#34;&nbsp;;&nbsp;foo=bar&#34;</span><span class="op" id="8226675">,</span>&nbsp;<span class="string" id="8226677">&#34;foo&#34;</span><span class="op" id="8226682">,</span>&nbsp;<span class="string" id="8226684">&#34;bar&#34;</span><span class="op" id="8226689">,</span>&nbsp;<span class="string" id="8226691">&#34;&#34;</span><span class="op" id="8226693">}</span><span class="op" id="8226694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226698">{</span><span class="string" id="8226699">&#34;;&nbsp;foo=bar&#34;</span><span class="op" id="8226710">,</span>&nbsp;<span class="string" id="8226712">&#34;foo&#34;</span><span class="op" id="8226717">,</span>&nbsp;<span class="string" id="8226719">&#34;bar&#34;</span><span class="op" id="8226724">,</span>&nbsp;<span class="string" id="8226726">&#34;&#34;</span><span class="op" id="8226728">}</span><span class="op" id="8226729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226733">{</span><span class="string" id="8226734">&#34;;foo=bar&#34;</span><span class="op" id="8226744">,</span>&nbsp;<span class="string" id="8226746">&#34;foo&#34;</span><span class="op" id="8226751">,</span>&nbsp;<span class="string" id="8226753">&#34;bar&#34;</span><span class="op" id="8226758">,</span>&nbsp;<span class="string" id="8226760">&#34;&#34;</span><span class="op" id="8226762">}</span><span class="op" id="8226763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226767">{</span><span class="string" id="8226768">&#34;;FOO=bar&#34;</span><span class="op" id="8226778">,</span>&nbsp;<span class="string" id="8226780">&#34;foo&#34;</span><span class="op" id="8226785">,</span>&nbsp;<span class="string" id="8226787">&#34;bar&#34;</span><span class="op" id="8226792">,</span>&nbsp;<span class="string" id="8226794">&#34;&#34;</span><span class="op" id="8226796">}</span><span class="op" id="8226797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226801">{</span><span class="string" id="8226802">`;foo=&#34;bar&#34;`</span><span class="op" id="8226814">,</span>&nbsp;<span class="string" id="8226816">&#34;foo&#34;</span><span class="op" id="8226821">,</span>&nbsp;<span class="string" id="8226823">&#34;bar&#34;</span><span class="op" id="8226828">,</span>&nbsp;<span class="string" id="8226830">&#34;&#34;</span><span class="op" id="8226832">}</span><span class="op" id="8226833">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226837">{</span><span class="string" id="8226838">`;foo=&#34;bar&#34;;&nbsp;`</span><span class="op" id="8226852">,</span>&nbsp;<span class="string" id="8226854">&#34;foo&#34;</span><span class="op" id="8226859">,</span>&nbsp;<span class="string" id="8226861">&#34;bar&#34;</span><span class="op" id="8226866">,</span>&nbsp;<span class="string" id="8226868">&#34;;&nbsp;&#34;</span><span class="op" id="8226872">}</span><span class="op" id="8226873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226877">{</span><span class="string" id="8226878">`;foo=&#34;bar&#34;;&nbsp;foo=baz`</span><span class="op" id="8226899">,</span>&nbsp;<span class="string" id="8226901">&#34;foo&#34;</span><span class="op" id="8226906">,</span>&nbsp;<span class="string" id="8226908">&#34;bar&#34;</span><span class="op" id="8226913">,</span>&nbsp;<span class="string" id="8226915">&#34;;&nbsp;foo=baz&#34;</span><span class="op" id="8226926">}</span><span class="op" id="8226927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226931">{</span><span class="string" id="8226932">`&nbsp;;&nbsp;boundary=----CUT;`</span><span class="op" id="8226954">,</span>&nbsp;<span class="string" id="8226956">&#34;boundary&#34;</span><span class="op" id="8226966">,</span>&nbsp;<span class="string" id="8226968">&#34;----CUT&#34;</span><span class="op" id="8226977">,</span>&nbsp;<span class="string" id="8226979">&#34;;&#34;</span><span class="op" id="8226982">}</span><span class="op" id="8226983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8226987">{</span><span class="string" id="8226988">`&nbsp;;&nbsp;key=value;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8227029">,</span>&nbsp;<span class="string" id="8227031">&#34;key&#34;</span><span class="op" id="8227036">,</span>&nbsp;<span class="string" id="8227038">&#34;value&#34;</span><span class="op" id="8227045">,</span>&nbsp;<span class="string" id="8227047">`;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8227076">}</span><span class="op" id="8227077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227081">{</span><span class="string" id="8227082">`;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8227111">,</span>&nbsp;<span class="string" id="8227113">&#34;blah&#34;</span><span class="op" id="8227119">,</span>&nbsp;<span class="string" id="8227121">&#34;value&#34;</span><span class="op" id="8227128">,</span>&nbsp;<span class="string" id="8227130">`;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8227144">}</span><span class="op" id="8227145">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227149">{</span><span class="string" id="8227150">`;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8227164">,</span>&nbsp;<span class="string" id="8227166">&#34;name&#34;</span><span class="op" id="8227172">,</span>&nbsp;<span class="string" id="8227174">&#34;foo&#34;</span><span class="op" id="8227179">,</span>&nbsp;<span class="string" id="8227181">`&nbsp;`</span><span class="op" id="8227184">}</span><span class="op" id="8227185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8227191">for</span>&nbsp;<span class="ident" id="8227195">_</span><span class="op" id="8227196">,</span>&nbsp;<span class="ident" id="8227198">test</span>&nbsp;<span class="op" id="8227203">:=</span>&nbsp;<span class="keyword" id="8227206">range</span>&nbsp;<span class="ident" id="8227212"><a href="/mime/mediatype_test.go.html#8226635">tests</a></span>&nbsp;<span class="op" id="8227218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227222">param</span><span class="op" id="8227227">,</span>&nbsp;<span class="ident" id="8227229">value</span><span class="op" id="8227234">,</span>&nbsp;<span class="ident" id="8227236">rest</span>&nbsp;<span class="op" id="8227241">:=</span>&nbsp;<span class="ident" id="8227244"><a href="/mime/mediatype.go.html#3598614">consumeMediaParam</a></span><span class="op" id="8227261">(</span><span class="ident" id="8227262"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227266">[</span><span class="num" id="8227267">0</span><span class="op" id="8227268">]</span><span class="op" id="8227269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227273">expectedParam</span>&nbsp;<span class="op" id="8227287">:=</span>&nbsp;<span class="ident" id="8227290"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227294">[</span><span class="num" id="8227295">1</span><span class="op" id="8227296">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227300">expectedValue</span>&nbsp;<span class="op" id="8227314">:=</span>&nbsp;<span class="ident" id="8227317"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227321">[</span><span class="num" id="8227322">2</span><span class="op" id="8227323">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227327">expectedRest</span>&nbsp;<span class="op" id="8227340">:=</span>&nbsp;<span class="ident" id="8227343"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227347">[</span><span class="num" id="8227348">3</span><span class="op" id="8227349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8227353">if</span>&nbsp;<span class="ident" id="8227356"><a href="/mime/mediatype_test.go.html#8227222">param</a></span>&nbsp;<span class="op" id="8227362">!=</span>&nbsp;<span class="ident" id="8227365"><a href="/mime/mediatype_test.go.html#8227273">expectedParam</a></span>&nbsp;<span class="op" id="8227379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227384"><a href="/mime/mediatype_test.go.html#8226618">t</a></span><span class="op" id="8227385">.</span><span class="ident" id="8227386">Errorf</span><span class="op" id="8227392">(</span><span class="string" id="8227393">&#34;expected&nbsp;to&nbsp;consume&nbsp;param&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="8227445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227451"><a href="/mime/mediatype_test.go.html#8227273">expectedParam</a></span><span class="op" id="8227464">,</span>&nbsp;<span class="ident" id="8227466"><a href="/mime/mediatype_test.go.html#8227222">param</a></span><span class="op" id="8227471">,</span>&nbsp;<span class="ident" id="8227473"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227477">[</span><span class="num" id="8227478">0</span><span class="op" id="8227479">]</span><span class="op" id="8227480">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227484">}</span>&nbsp;<span class="keyword" id="8227486">else</span>&nbsp;<span class="keyword" id="8227491">if</span>&nbsp;<span class="ident" id="8227494"><a href="/mime/mediatype_test.go.html#8227229">value</a></span>&nbsp;<span class="op" id="8227500">!=</span>&nbsp;<span class="ident" id="8227503"><a href="/mime/mediatype_test.go.html#8227300">expectedValue</a></span>&nbsp;<span class="op" id="8227517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227522"><a href="/mime/mediatype_test.go.html#8226618">t</a></span><span class="op" id="8227523">.</span><span class="ident" id="8227524">Errorf</span><span class="op" id="8227530">(</span><span class="string" id="8227531">&#34;expected&nbsp;to&nbsp;consume&nbsp;value&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="8227583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227589"><a href="/mime/mediatype_test.go.html#8227300">expectedValue</a></span><span class="op" id="8227602">,</span>&nbsp;<span class="ident" id="8227604"><a href="/mime/mediatype_test.go.html#8227229">value</a></span><span class="op" id="8227609">,</span>&nbsp;<span class="ident" id="8227611"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227615">[</span><span class="num" id="8227616">0</span><span class="op" id="8227617">]</span><span class="op" id="8227618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227622">}</span>&nbsp;<span class="keyword" id="8227624">else</span>&nbsp;<span class="keyword" id="8227629">if</span>&nbsp;<span class="ident" id="8227632"><a href="/mime/mediatype_test.go.html#8227236">rest</a></span>&nbsp;<span class="op" id="8227637">!=</span>&nbsp;<span class="ident" id="8227640"><a href="/mime/mediatype_test.go.html#8227327">expectedRest</a></span>&nbsp;<span class="op" id="8227653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227658"><a href="/mime/mediatype_test.go.html#8226618">t</a></span><span class="op" id="8227659">.</span><span class="ident" id="8227660">Errorf</span><span class="op" id="8227666">(</span><span class="string" id="8227667">&#34;expected&nbsp;to&nbsp;have&nbsp;left&nbsp;[%s],&nbsp;not&nbsp;[%s]&nbsp;after&nbsp;reading&nbsp;[%s/%s]&nbsp;from&nbsp;[%s]&#34;</span><span class="op" id="8227737">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227743"><a href="/mime/mediatype_test.go.html#8227327">expectedRest</a></span><span class="op" id="8227755">,</span>&nbsp;<span class="ident" id="8227757"><a href="/mime/mediatype_test.go.html#8227236">rest</a></span><span class="op" id="8227761">,</span>&nbsp;<span class="ident" id="8227763"><a href="/mime/mediatype_test.go.html#8227222">param</a></span><span class="op" id="8227768">,</span>&nbsp;<span class="ident" id="8227770"><a href="/mime/mediatype_test.go.html#8227229">value</a></span><span class="op" id="8227775">,</span>&nbsp;<span class="ident" id="8227777"><a href="/mime/mediatype_test.go.html#8227198">test</a></span><span class="op" id="8227781">[</span><span class="num" id="8227782">0</span><span class="op" id="8227783">]</span><span class="op" id="8227784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8227791">}</span><br>
<span class="lineno"></span><span class="op" id="8227793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="8227796">type</span>&nbsp;<span class="ident" id="8227801">mediaTypeTest</span>&nbsp;<span class="keyword" id="8227815">struct</span>&nbsp;<span class="op" id="8227822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227825">in</span>&nbsp;<span class="builtintype" id="8227828">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227836">t</span>&nbsp;&nbsp;<span class="builtintype" id="8227839">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227847">p</span>&nbsp;&nbsp;<span class="keyword" id="8227850">map</span><span class="op" id="8227853">[</span><span class="builtintype" id="8227854">string</span><span class="op" id="8227860">]</span><span class="builtintype" id="8227861">string</span><br>
<span class="lineno"></span><span class="op" id="8227868">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8227871">func</span>&nbsp;<span class="ident" id="8227876">TestParseMediaType</span><span class="op" id="8227894">(</span><span class="ident" id="8227895">t</span>&nbsp;<span class="op" id="8227897">*</span><span class="ident" id="8227898"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8227905">.</span><span class="ident" id="8227906">T</span><span class="op" id="8227907">)</span>&nbsp;<span class="op" id="8227909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8227912">//&nbsp;Convenience&nbsp;map&nbsp;initializer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227944">m</span>&nbsp;<span class="op" id="8227946">:=</span>&nbsp;<span class="keyword" id="8227949">func</span><span class="op" id="8227953">(</span><span class="ident" id="8227954">s</span>&nbsp;<span class="op" id="8227956">...</span><span class="builtintype" id="8227959">string</span><span class="op" id="8227965">)</span>&nbsp;<span class="keyword" id="8227967">map</span><span class="op" id="8227970">[</span><span class="builtintype" id="8227971">string</span><span class="op" id="8227977">]</span><span class="builtintype" id="8227978">string</span>&nbsp;<span class="op" id="8227985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8227989">sm</span>&nbsp;<span class="op" id="8227992">:=</span>&nbsp;<span class="builtinfunc" id="8227995">make</span><span class="op" id="8227999">(</span><span class="keyword" id="8228000">map</span><span class="op" id="8228003">[</span><span class="builtintype" id="8228004">string</span><span class="op" id="8228010">]</span><span class="builtintype" id="8228011">string</span><span class="op" id="8228017">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8228021">for</span>&nbsp;<span class="ident" id="8228025">i</span>&nbsp;<span class="op" id="8228027">:=</span>&nbsp;<span class="num" id="8228030">0</span><span class="op" id="8228031">;</span>&nbsp;<span class="ident" id="8228033"><a href="/mime/mediatype_test.go.html#8228025">i</a></span>&nbsp;<span class="op" id="8228035">&lt;</span>&nbsp;<span class="builtinfunc" id="8228037">len</span><span class="op" id="8228040">(</span><span class="ident" id="8228041"><a href="/mime/mediatype_test.go.html#8227954">s</a></span><span class="op" id="8228042">)</span><span class="op" id="8228043">;</span>&nbsp;<span class="ident" id="8228045"><a href="/mime/mediatype_test.go.html#8228025">i</a></span>&nbsp;<span class="op" id="8228047">+=</span>&nbsp;<span class="num" id="8228050">2</span>&nbsp;<span class="op" id="8228052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228057"><a href="/mime/mediatype_test.go.html#8227989">sm</a></span><span class="op" id="8228059">[</span><span class="ident" id="8228060"><a href="/mime/mediatype_test.go.html#8227954">s</a></span><span class="op" id="8228061">[</span><span class="ident" id="8228062"><a href="/mime/mediatype_test.go.html#8228025">i</a></span><span class="op" id="8228063">]</span><span class="op" id="8228064">]</span>&nbsp;<span class="op" id="8228066">=</span>&nbsp;<span class="ident" id="8228068"><a href="/mime/mediatype_test.go.html#8227954">s</a></span><span class="op" id="8228069">[</span><span class="ident" id="8228070"><a href="/mime/mediatype_test.go.html#8228025">i</a></span><span class="op" id="8228071">+</span><span class="num" id="8228072">1</span><span class="op" id="8228073">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8228081">return</span>&nbsp;<span class="ident" id="8228088"><a href="/mime/mediatype_test.go.html#8227989">sm</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228092">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228096">nameFoo</span>&nbsp;<span class="op" id="8228104">:=</span>&nbsp;<span class="keyword" id="8228107">map</span><span class="op" id="8228110">[</span><span class="builtintype" id="8228111">string</span><span class="op" id="8228117">]</span><span class="builtintype" id="8228118">string</span><span class="op" id="8228124">{</span><span class="string" id="8228125">&#34;name&#34;</span><span class="op" id="8228131">:</span>&nbsp;<span class="string" id="8228133">&#34;foo&#34;</span><span class="op" id="8228138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228141">tests</span>&nbsp;<span class="op" id="8228147">:=</span>&nbsp;<span class="op" id="8228150">[</span><span class="op" id="8228151">]</span><span class="ident" id="8228152"><a href="/mime/mediatype_test.go.html#8227801">mediaTypeTest</a></span><span class="op" id="8228165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228169">{</span><span class="string" id="8228170">`form-data;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="8228193">,</span>&nbsp;<span class="string" id="8228195">&#34;form-data&#34;</span><span class="op" id="8228206">,</span>&nbsp;<span class="ident" id="8228208"><a href="/mime/mediatype_test.go.html#8228096">nameFoo</a></span><span class="op" id="8228215">}</span><span class="op" id="8228216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228220">{</span><span class="string" id="8228221">`&nbsp;form-data&nbsp;;&nbsp;name=foo`</span><span class="op" id="8228244">,</span>&nbsp;<span class="string" id="8228246">&#34;form-data&#34;</span><span class="op" id="8228257">,</span>&nbsp;<span class="ident" id="8228259"><a href="/mime/mediatype_test.go.html#8228096">nameFoo</a></span><span class="op" id="8228266">}</span><span class="op" id="8228267">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228271">{</span><span class="string" id="8228272">`FORM-DATA;name=&#34;foo&#34;`</span><span class="op" id="8228294">,</span>&nbsp;<span class="string" id="8228296">&#34;form-data&#34;</span><span class="op" id="8228307">,</span>&nbsp;<span class="ident" id="8228309"><a href="/mime/mediatype_test.go.html#8228096">nameFoo</a></span><span class="op" id="8228316">}</span><span class="op" id="8228317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228321">{</span><span class="string" id="8228322">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="8228347">,</span>&nbsp;<span class="string" id="8228349">&#34;form-data&#34;</span><span class="op" id="8228360">,</span>&nbsp;<span class="ident" id="8228362"><a href="/mime/mediatype_test.go.html#8228096">nameFoo</a></span><span class="op" id="8228369">}</span><span class="op" id="8228370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228374">{</span><span class="string" id="8228375">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="8228400">,</span>&nbsp;<span class="string" id="8228402">&#34;form-data&#34;</span><span class="op" id="8228413">,</span>&nbsp;<span class="ident" id="8228415"><a href="/mime/mediatype_test.go.html#8228096">nameFoo</a></span><span class="op" id="8228422">}</span><span class="op" id="8228423">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228428">{</span><span class="string" id="8228429">`form-data;&nbsp;key=value;&nbsp;&nbsp;blah=&#34;value&#34;;name=&#34;foo&#34;&nbsp;`</span><span class="op" id="8228478">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228483">&#34;form-data&#34;</span><span class="op" id="8228494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228499"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8228500">(</span><span class="string" id="8228501">&#34;key&#34;</span><span class="op" id="8228506">,</span>&nbsp;<span class="string" id="8228508">&#34;value&#34;</span><span class="op" id="8228515">,</span>&nbsp;<span class="string" id="8228517">&#34;blah&#34;</span><span class="op" id="8228523">,</span>&nbsp;<span class="string" id="8228525">&#34;value&#34;</span><span class="op" id="8228532">,</span>&nbsp;<span class="string" id="8228534">&#34;name&#34;</span><span class="op" id="8228540">,</span>&nbsp;<span class="string" id="8228542">&#34;foo&#34;</span><span class="op" id="8228547">)</span><span class="op" id="8228548">}</span><span class="op" id="8228549">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228554">{</span><span class="string" id="8228555">`foo;&nbsp;key=val1;&nbsp;key=the-key-appears-again-which-is-bogus`</span><span class="op" id="8228612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228617">&#34;&#34;</span><span class="op" id="8228619">,</span>&nbsp;<span class="ident" id="8228621"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8228622">(</span><span class="op" id="8228623">)</span><span class="op" id="8228624">}</span><span class="op" id="8228625">,</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8228630">//&nbsp;From&nbsp;RFC&nbsp;2231:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228650">{</span><span class="string" id="8228651">`application/x-stuff;&nbsp;title*=us-ascii&#39;en-us&#39;This%20is%20%2A%2A%2Afun%2A%2A%2A`</span><span class="op" id="8228729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228734">&#34;application/x-stuff&#34;</span><span class="op" id="8228755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228760"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8228761">(</span><span class="string" id="8228762">&#34;title&#34;</span><span class="op" id="8228769">,</span>&nbsp;<span class="string" id="8228771">&#34;This&nbsp;is&nbsp;***fun***&#34;</span><span class="op" id="8228790">)</span><span class="op" id="8228791">}</span><span class="op" id="8228792">,</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8228797">{</span><span class="string" id="8228798">`message/external-body;&nbsp;access-type=URL;&nbsp;`</span>&nbsp;<span class="op" id="8228841">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228846">`URL*0=&#34;ftp://&#34;;`</span>&nbsp;<span class="op" id="8228864">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228869">`URL*1=&#34;cs.utk.edu/pub/moore/bulk-mailer/bulk-mailer.tar&#34;`</span><span class="op" id="8228927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228932">&#34;message/external-body&#34;</span><span class="op" id="8228955">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8228960"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8228961">(</span><span class="string" id="8228962">&#34;access-type&#34;</span><span class="op" id="8228975">,</span>&nbsp;<span class="string" id="8228977">&#34;URL&#34;</span><span class="op" id="8228982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8228988">&#34;url&#34;</span><span class="op" id="8228993">,</span>&nbsp;<span class="string" id="8228995">&#34;ftp://cs.utk.edu/pub/moore/bulk-mailer/bulk-mailer.tar&#34;</span><span class="op" id="8229051">)</span><span class="op" id="8229052">}</span><span class="op" id="8229053">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229058">{</span><span class="string" id="8229059">`application/x-stuff;&nbsp;`</span>&nbsp;<span class="op" id="8229083">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229088">`title*0*=us-ascii&#39;en&#39;This%20is%20even%20more%20;&nbsp;`</span>&nbsp;<span class="op" id="8229140">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229145">`title*1*=%2A%2A%2Afun%2A%2A%2A%20;&nbsp;`</span>&nbsp;<span class="op" id="8229183">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229188">`title*2=&#34;isn&#39;t&nbsp;it!&#34;`</span><span class="op" id="8229209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229214">&#34;application/x-stuff&#34;</span><span class="op" id="8229235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229240"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229241">(</span><span class="string" id="8229242">&#34;title&#34;</span><span class="op" id="8229249">,</span>&nbsp;<span class="string" id="8229251">&#34;This&nbsp;is&nbsp;even&nbsp;more&nbsp;***fun***&nbsp;isn&#39;t&nbsp;it!&#34;</span><span class="op" id="8229290">)</span><span class="op" id="8229291">}</span><span class="op" id="8229292">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8229297">//&nbsp;Tests&nbsp;from&nbsp;http://greenbytes.de/tech/tc2231/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8229347">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;tests&nbsp;from&nbsp;that&nbsp;site.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229410">{</span><span class="string" id="8229411">`attachment;&nbsp;filename=&#34;f\oo.html&#34;`</span><span class="op" id="8229445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229450">&#34;attachment&#34;</span><span class="op" id="8229462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229467"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229468">(</span><span class="string" id="8229469">&#34;filename&#34;</span><span class="op" id="8229479">,</span>&nbsp;<span class="string" id="8229481">&#34;foo.html&#34;</span><span class="op" id="8229491">)</span><span class="op" id="8229492">}</span><span class="op" id="8229493">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229497">{</span><span class="string" id="8229498">`attachment;&nbsp;filename=&#34;\&#34;quoting\&#34;&nbsp;tested.html&#34;`</span><span class="op" id="8229546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229551">&#34;attachment&#34;</span><span class="op" id="8229563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229568"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229569">(</span><span class="string" id="8229570">&#34;filename&#34;</span><span class="op" id="8229580">,</span>&nbsp;<span class="string" id="8229582">`&#34;quoting&#34;&nbsp;tested.html`</span><span class="op" id="8229605">)</span><span class="op" id="8229606">}</span><span class="op" id="8229607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229611">{</span><span class="string" id="8229612">`attachment;&nbsp;filename=&#34;Here&#39;s&nbsp;a&nbsp;semicolon;.html&#34;`</span><span class="op" id="8229661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229666">&#34;attachment&#34;</span><span class="op" id="8229678">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229683"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229684">(</span><span class="string" id="8229685">&#34;filename&#34;</span><span class="op" id="8229695">,</span>&nbsp;<span class="string" id="8229697">&#34;Here&#39;s&nbsp;a&nbsp;semicolon;.html&#34;</span><span class="op" id="8229723">)</span><span class="op" id="8229724">}</span><span class="op" id="8229725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229729">{</span><span class="string" id="8229730">`attachment;&nbsp;foo=&#34;\&#34;\\&#34;;filename=&#34;foo.html&#34;`</span><span class="op" id="8229774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229779">&#34;attachment&#34;</span><span class="op" id="8229791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229796"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229797">(</span><span class="string" id="8229798">&#34;foo&#34;</span><span class="op" id="8229803">,</span>&nbsp;<span class="string" id="8229805">&#34;\&#34;\\&#34;</span><span class="op" id="8229811">,</span>&nbsp;<span class="string" id="8229813">&#34;filename&#34;</span><span class="op" id="8229823">,</span>&nbsp;<span class="string" id="8229825">&#34;foo.html&#34;</span><span class="op" id="8229835">)</span><span class="op" id="8229836">}</span><span class="op" id="8229837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229841">{</span><span class="string" id="8229842">`attachment;&nbsp;filename=foo.html`</span><span class="op" id="8229873">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229878">&#34;attachment&#34;</span><span class="op" id="8229890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229895"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229896">(</span><span class="string" id="8229897">&#34;filename&#34;</span><span class="op" id="8229907">,</span>&nbsp;<span class="string" id="8229909">&#34;foo.html&#34;</span><span class="op" id="8229919">)</span><span class="op" id="8229920">}</span><span class="op" id="8229921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8229925">{</span><span class="string" id="8229926">`attachment;&nbsp;filename=foo.html&nbsp;;`</span><span class="op" id="8229959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8229964">&#34;attachment&#34;</span><span class="op" id="8229976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8229981"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8229982">(</span><span class="string" id="8229983">&#34;filename&#34;</span><span class="op" id="8229993">,</span>&nbsp;<span class="string" id="8229995">&#34;foo.html&#34;</span><span class="op" id="8230005">)</span><span class="op" id="8230006">}</span><span class="op" id="8230007">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230011">{</span><span class="string" id="8230012">`attachment;&nbsp;filename=&#39;foo.html&#39;`</span><span class="op" id="8230045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230050">&#34;attachment&#34;</span><span class="op" id="8230062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230067"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230068">(</span><span class="string" id="8230069">&#34;filename&#34;</span><span class="op" id="8230079">,</span>&nbsp;<span class="string" id="8230081">&#34;foo.html&#34;</span><span class="op" id="8230091">)</span><span class="op" id="8230092">}</span><span class="op" id="8230093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230097">{</span><span class="string" id="8230098">`attachment;&nbsp;filename=&#34;foo-%41.html&#34;`</span><span class="op" id="8230135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230140">&#34;attachment&#34;</span><span class="op" id="8230152">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230157"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230158">(</span><span class="string" id="8230159">&#34;filename&#34;</span><span class="op" id="8230169">,</span>&nbsp;<span class="string" id="8230171">&#34;foo-%41.html&#34;</span><span class="op" id="8230185">)</span><span class="op" id="8230186">}</span><span class="op" id="8230187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230191">{</span><span class="string" id="8230192">`attachment;&nbsp;filename=&#34;foo-%\41.html&#34;`</span><span class="op" id="8230230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230235">&#34;attachment&#34;</span><span class="op" id="8230247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230252"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230253">(</span><span class="string" id="8230254">&#34;filename&#34;</span><span class="op" id="8230264">,</span>&nbsp;<span class="string" id="8230266">&#34;foo-%41.html&#34;</span><span class="op" id="8230280">)</span><span class="op" id="8230281">}</span><span class="op" id="8230282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230286">{</span><span class="string" id="8230287">`filename=foo.html`</span><span class="op" id="8230306">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230311">&#34;&#34;</span><span class="op" id="8230313">,</span>&nbsp;<span class="ident" id="8230315"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230316">(</span><span class="op" id="8230317">)</span><span class="op" id="8230318">}</span><span class="op" id="8230319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230323">{</span><span class="string" id="8230324">`x=y;&nbsp;filename=foo.html`</span><span class="op" id="8230348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230353">&#34;&#34;</span><span class="op" id="8230355">,</span>&nbsp;<span class="ident" id="8230357"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230358">(</span><span class="op" id="8230359">)</span><span class="op" id="8230360">}</span><span class="op" id="8230361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230365">{</span><span class="string" id="8230366">`&#34;foo;&nbsp;filename=bar;baz&#34;;&nbsp;filename=qux`</span><span class="op" id="8230405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230410">&#34;&#34;</span><span class="op" id="8230412">,</span>&nbsp;<span class="ident" id="8230414"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230415">(</span><span class="op" id="8230416">)</span><span class="op" id="8230417">}</span><span class="op" id="8230418">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230422">{</span><span class="string" id="8230423">`inline;&nbsp;attachment;&nbsp;filename=foo.html`</span><span class="op" id="8230462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230467">&#34;&#34;</span><span class="op" id="8230469">,</span>&nbsp;<span class="ident" id="8230471"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230472">(</span><span class="op" id="8230473">)</span><span class="op" id="8230474">}</span><span class="op" id="8230475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230479">{</span><span class="string" id="8230480">`attachment;&nbsp;filename=&#34;foo.html&#34;.txt`</span><span class="op" id="8230517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230522">&#34;&#34;</span><span class="op" id="8230524">,</span>&nbsp;<span class="ident" id="8230526"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230527">(</span><span class="op" id="8230528">)</span><span class="op" id="8230529">}</span><span class="op" id="8230530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230534">{</span><span class="string" id="8230535">`attachment;&nbsp;filename=&#34;bar`</span><span class="op" id="8230562">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230567">&#34;&#34;</span><span class="op" id="8230569">,</span>&nbsp;<span class="ident" id="8230571"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230572">(</span><span class="op" id="8230573">)</span><span class="op" id="8230574">}</span><span class="op" id="8230575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230579">{</span><span class="string" id="8230580">`attachment;&nbsp;creation-date=&#34;Wed,&nbsp;12&nbsp;Feb&nbsp;1997&nbsp;16:29:51&nbsp;-0500&#34;`</span><span class="op" id="8230641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230646">&#34;attachment&#34;</span><span class="op" id="8230658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230663"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230664">(</span><span class="string" id="8230665">&#34;creation-date&#34;</span><span class="op" id="8230680">,</span>&nbsp;<span class="string" id="8230682">&#34;Wed,&nbsp;12&nbsp;Feb&nbsp;1997&nbsp;16:29:51&nbsp;-0500&#34;</span><span class="op" id="8230715">)</span><span class="op" id="8230716">}</span><span class="op" id="8230717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230721">{</span><span class="string" id="8230722">`foobar`</span><span class="op" id="8230730">,</span>&nbsp;<span class="string" id="8230732">&#34;foobar&#34;</span><span class="op" id="8230740">,</span>&nbsp;<span class="ident" id="8230742"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230743">(</span><span class="op" id="8230744">)</span><span class="op" id="8230745">}</span><span class="op" id="8230746">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230750">{</span><span class="string" id="8230751">`attachment;&nbsp;filename*&nbsp;=UTF-8&#39;&#39;foo-%c3%a4.html`</span><span class="op" id="8230798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230803">&#34;attachment&#34;</span><span class="op" id="8230815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230820"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230821">(</span><span class="string" id="8230822">&#34;filename&#34;</span><span class="op" id="8230832">,</span>&nbsp;<span class="string" id="8230834">&#34;foo-ä.html&#34;</span><span class="op" id="8230847">)</span><span class="op" id="8230848">}</span><span class="op" id="8230849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230853">{</span><span class="string" id="8230854">`attachment;&nbsp;filename*=UTF-8&#39;&#39;A-%2541.html`</span><span class="op" id="8230897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8230902">&#34;attachment&#34;</span><span class="op" id="8230914">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8230919"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8230920">(</span><span class="string" id="8230921">&#34;filename&#34;</span><span class="op" id="8230931">,</span>&nbsp;<span class="string" id="8230933">&#34;A-%41.html&#34;</span><span class="op" id="8230945">)</span><span class="op" id="8230946">}</span><span class="op" id="8230947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8230951">{</span><span class="string" id="8230952">`attachment;&nbsp;filename*0=&#34;foo.&#34;;&nbsp;filename*1=&#34;html&#34;`</span><span class="op" id="8231002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231007">&#34;attachment&#34;</span><span class="op" id="8231019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231024"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231025">(</span><span class="string" id="8231026">&#34;filename&#34;</span><span class="op" id="8231036">,</span>&nbsp;<span class="string" id="8231038">&#34;foo.html&#34;</span><span class="op" id="8231048">)</span><span class="op" id="8231049">}</span><span class="op" id="8231050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231054">{</span><span class="string" id="8231055">`attachment;&nbsp;filename*0*=UTF-8&#39;&#39;foo-%c3%a4;&nbsp;filename*1=&#34;.html&#34;`</span><span class="op" id="8231118">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231123">&#34;attachment&#34;</span><span class="op" id="8231135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231140"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231141">(</span><span class="string" id="8231142">&#34;filename&#34;</span><span class="op" id="8231152">,</span>&nbsp;<span class="string" id="8231154">&#34;foo-ä.html&#34;</span><span class="op" id="8231167">)</span><span class="op" id="8231168">}</span><span class="op" id="8231169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231173">{</span><span class="string" id="8231174">`attachment;&nbsp;filename*0=&#34;foo&#34;;&nbsp;filename*01=&#34;bar&#34;`</span><span class="op" id="8231223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231228">&#34;attachment&#34;</span><span class="op" id="8231240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231245"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231246">(</span><span class="string" id="8231247">&#34;filename&#34;</span><span class="op" id="8231257">,</span>&nbsp;<span class="string" id="8231259">&#34;foo&#34;</span><span class="op" id="8231264">)</span><span class="op" id="8231265">}</span><span class="op" id="8231266">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231270">{</span><span class="string" id="8231271">`attachment;&nbsp;filename*0=&#34;foo&#34;;&nbsp;filename*2=&#34;bar&#34;`</span><span class="op" id="8231319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231324">&#34;attachment&#34;</span><span class="op" id="8231336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231341"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231342">(</span><span class="string" id="8231343">&#34;filename&#34;</span><span class="op" id="8231353">,</span>&nbsp;<span class="string" id="8231355">&#34;foo&#34;</span><span class="op" id="8231360">)</span><span class="op" id="8231361">}</span><span class="op" id="8231362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231366">{</span><span class="string" id="8231367">`attachment;&nbsp;filename*1=&#34;foo&#34;;&nbsp;filename*2=&#34;bar&#34;`</span><span class="op" id="8231415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231420">&#34;attachment&#34;</span><span class="op" id="8231432">,</span>&nbsp;<span class="ident" id="8231434"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231435">(</span><span class="op" id="8231436">)</span><span class="op" id="8231437">}</span><span class="op" id="8231438">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231442">{</span><span class="string" id="8231443">`attachment;&nbsp;filename*1=&#34;bar&#34;;&nbsp;filename*0=&#34;foo&#34;`</span><span class="op" id="8231491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231496">&#34;attachment&#34;</span><span class="op" id="8231508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231513"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231514">(</span><span class="string" id="8231515">&#34;filename&#34;</span><span class="op" id="8231525">,</span>&nbsp;<span class="string" id="8231527">&#34;foobar&#34;</span><span class="op" id="8231535">)</span><span class="op" id="8231536">}</span><span class="op" id="8231537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231541">{</span><span class="string" id="8231542">`attachment;&nbsp;filename=&#34;foo-ae.html&#34;;&nbsp;filename*=UTF-8&#39;&#39;foo-%c3%a4.html`</span><span class="op" id="8231612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231617">&#34;attachment&#34;</span><span class="op" id="8231629">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231634"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231635">(</span><span class="string" id="8231636">&#34;filename&#34;</span><span class="op" id="8231646">,</span>&nbsp;<span class="string" id="8231648">&#34;foo-ä.html&#34;</span><span class="op" id="8231661">)</span><span class="op" id="8231662">}</span><span class="op" id="8231663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231667">{</span><span class="string" id="8231668">`attachment;&nbsp;filename*=UTF-8&#39;&#39;foo-%c3%a4.html;&nbsp;filename=&#34;foo-ae.html&#34;`</span><span class="op" id="8231738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231743">&#34;attachment&#34;</span><span class="op" id="8231755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231760"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8231761">(</span><span class="string" id="8231762">&#34;filename&#34;</span><span class="op" id="8231772">,</span>&nbsp;<span class="string" id="8231774">&#34;foo-ä.html&#34;</span><span class="op" id="8231787">)</span><span class="op" id="8231788">}</span><span class="op" id="8231789">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8231794">//&nbsp;Browsers&nbsp;also&nbsp;just&nbsp;send&nbsp;UTF-8&nbsp;directly&nbsp;without&nbsp;RFC&nbsp;2231,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8231856">//&nbsp;at&nbsp;least&nbsp;when&nbsp;the&nbsp;source&nbsp;page&nbsp;is&nbsp;served&nbsp;with&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8231913">{</span><span class="string" id="8231914">`form-data;&nbsp;firstname=&#34;Брэд&#34;;&nbsp;lastname=&#34;Фицпатрик&#34;`</span><span class="op" id="8231978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8231983">&#34;form-data&#34;</span><span class="op" id="8231994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8231999"><a href="/mime/mediatype_test.go.html#8227944">m</a></span><span class="op" id="8232000">(</span><span class="string" id="8232001">&#34;firstname&#34;</span><span class="op" id="8232012">,</span>&nbsp;<span class="string" id="8232014">&#34;Брэд&#34;</span><span class="op" id="8232024">,</span>&nbsp;<span class="string" id="8232026">&#34;lastname&#34;</span><span class="op" id="8232036">,</span>&nbsp;<span class="string" id="8232038">&#34;Фицпатрик&#34;</span><span class="op" id="8232058">)</span><span class="op" id="8232059">}</span><span class="op" id="8232060">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232066">for</span>&nbsp;<span class="ident" id="8232070">_</span><span class="op" id="8232071">,</span>&nbsp;<span class="ident" id="8232073">test</span>&nbsp;<span class="op" id="8232078">:=</span>&nbsp;<span class="keyword" id="8232081">range</span>&nbsp;<span class="ident" id="8232087"><a href="/mime/mediatype_test.go.html#8228141">tests</a></span>&nbsp;<span class="op" id="8232093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232097">mt</span><span class="op" id="8232099">,</span>&nbsp;<span class="ident" id="8232101">params</span><span class="op" id="8232107">,</span>&nbsp;<span class="ident" id="8232109">err</span>&nbsp;<span class="op" id="8232113">:=</span>&nbsp;<span class="ident" id="8232116"><a href="/mime/mediatype.go.html#3594498">ParseMediaType</a></span><span class="op" id="8232130">(</span><span class="ident" id="8232131"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232135">.</span><span class="ident" id="8232136">in</span><span class="op" id="8232138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232142">if</span>&nbsp;<span class="ident" id="8232145"><a href="/mime/mediatype_test.go.html#8232109">err</a></span>&nbsp;<span class="op" id="8232149">!=</span>&nbsp;<span class="ident" id="8232152">nil</span>&nbsp;<span class="op" id="8232156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232161">if</span>&nbsp;<span class="ident" id="8232164"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232168">.</span><span class="ident" id="8232169">t</span>&nbsp;<span class="op" id="8232171">!=</span>&nbsp;<span class="string" id="8232174">&#34;&#34;</span>&nbsp;<span class="op" id="8232177">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232183"><a href="/mime/mediatype_test.go.html#8227895">t</a></span><span class="op" id="8232184">.</span><span class="ident" id="8232185">Errorf</span><span class="op" id="8232191">(</span><span class="string" id="8232192">&#34;for&nbsp;input&nbsp;%q,&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8232228">,</span>&nbsp;<span class="ident" id="8232230"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232234">.</span><span class="ident" id="8232235">in</span><span class="op" id="8232237">,</span>&nbsp;<span class="ident" id="8232239"><a href="/mime/mediatype_test.go.html#8232109">err</a></span><span class="op" id="8232242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232248">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232265">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232276">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232280">if</span>&nbsp;<span class="ident" id="8232283">g</span><span class="op" id="8232284">,</span>&nbsp;<span class="ident" id="8232286">e</span>&nbsp;<span class="op" id="8232288">:=</span>&nbsp;<span class="ident" id="8232291"><a href="/mime/mediatype_test.go.html#8232097">mt</a></span><span class="op" id="8232293">,</span>&nbsp;<span class="ident" id="8232295"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232299">.</span><span class="ident" id="8232300">t</span><span class="op" id="8232301">;</span>&nbsp;<span class="ident" id="8232303"><a href="/mime/mediatype_test.go.html#8232283">g</a></span>&nbsp;<span class="op" id="8232305">!=</span>&nbsp;<span class="ident" id="8232308"><a href="/mime/mediatype_test.go.html#8232286">e</a></span>&nbsp;<span class="op" id="8232310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232315"><a href="/mime/mediatype_test.go.html#8227895">t</a></span><span class="op" id="8232316">.</span><span class="ident" id="8232317">Errorf</span><span class="op" id="8232323">(</span><span class="string" id="8232324">&#34;for&nbsp;input&nbsp;%q,&nbsp;expected&nbsp;type&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8232364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232370"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232374">.</span><span class="ident" id="8232375">in</span><span class="op" id="8232377">,</span>&nbsp;<span class="ident" id="8232379"><a href="/mime/mediatype_test.go.html#8232286">e</a></span><span class="op" id="8232380">,</span>&nbsp;<span class="ident" id="8232382"><a href="/mime/mediatype_test.go.html#8232283">g</a></span><span class="op" id="8232383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232388">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232399">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232403">if</span>&nbsp;<span class="builtinfunc" id="8232406">len</span><span class="op" id="8232409">(</span><span class="ident" id="8232410"><a href="/mime/mediatype_test.go.html#8232101">params</a></span><span class="op" id="8232416">)</span>&nbsp;<span class="op" id="8232418">==</span>&nbsp;<span class="num" id="8232421">0</span>&nbsp;<span class="op" id="8232423">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="8232426">len</span><span class="op" id="8232429">(</span><span class="ident" id="8232430"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232434">.</span><span class="ident" id="8232435">p</span><span class="op" id="8232436">)</span>&nbsp;<span class="op" id="8232438">==</span>&nbsp;<span class="num" id="8232441">0</span>&nbsp;<span class="op" id="8232443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232448">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232463">if</span>&nbsp;<span class="op" id="8232466">!</span><span class="ident" id="8232467"><a href="/mime/mediatype_test.go.html#8225221">reflect</a></span><span class="op" id="8232474">.</span><span class="ident" id="8232475">DeepEqual</span><span class="op" id="8232484">(</span><span class="ident" id="8232485"><a href="/mime/mediatype_test.go.html#8232101">params</a></span><span class="op" id="8232491">,</span>&nbsp;<span class="ident" id="8232493"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232497">.</span><span class="ident" id="8232498">p</span><span class="op" id="8232499">)</span>&nbsp;<span class="op" id="8232501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232506"><a href="/mime/mediatype_test.go.html#8227895">t</a></span><span class="op" id="8232507">.</span><span class="ident" id="8232508">Errorf</span><span class="op" id="8232514">(</span><span class="string" id="8232515">&#34;for&nbsp;input&nbsp;%q,&nbsp;wrong&nbsp;params.\n&#34;</span><span class="op" id="8232546">+</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8232552">&#34;expected:&nbsp;%#v\n&#34;</span><span class="op" id="8232569">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8232575">&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got:&nbsp;%#v&#34;</span><span class="op" id="8232590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232596"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232600">.</span><span class="ident" id="8232601">in</span><span class="op" id="8232603">,</span>&nbsp;<span class="ident" id="8232605"><a href="/mime/mediatype_test.go.html#8232073">test</a></span><span class="op" id="8232609">.</span><span class="ident" id="8232610">p</span><span class="op" id="8232611">,</span>&nbsp;<span class="ident" id="8232613"><a href="/mime/mediatype_test.go.html#8232101">params</a></span><span class="op" id="8232619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232626">}</span><br>
<span class="lineno">245</span><span class="op" id="8232628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232631">type</span>&nbsp;<span class="ident" id="8232636">badMediaTypeTest</span>&nbsp;<span class="keyword" id="8232653">struct</span>&nbsp;<span class="op" id="8232660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232663">in</span>&nbsp;&nbsp;<span class="builtintype" id="8232667">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8232675">err</span>&nbsp;<span class="builtintype" id="8232679">string</span><br>
<span class="lineno">250</span><span class="op" id="8232686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232689">var</span>&nbsp;<span class="ident" id="8232693">badMediaTypeTests</span>&nbsp;<span class="op" id="8232711">=</span>&nbsp;<span class="op" id="8232713">[</span><span class="op" id="8232714">]</span><span class="ident" id="8232715"><a href="/mime/mediatype_test.go.html#8232636">badMediaTypeTest</a></span><span class="op" id="8232731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232734">{</span><span class="string" id="8232735">&#34;bogus&nbsp;;=========&#34;</span><span class="op" id="8232753">,</span>&nbsp;<span class="string" id="8232755">&#34;mime:&nbsp;invalid&nbsp;media&nbsp;parameter&#34;</span><span class="op" id="8232786">}</span><span class="op" id="8232787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232790">{</span><span class="string" id="8232791">&#34;bogus/&lt;script&gt;alert&lt;/script&gt;&#34;</span><span class="op" id="8232821">,</span>&nbsp;<span class="string" id="8232823">&#34;mime:&nbsp;expected&nbsp;token&nbsp;after&nbsp;slash&#34;</span><span class="op" id="8232857">}</span><span class="op" id="8232858">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8232861">{</span><span class="string" id="8232862">&#34;bogus/bogus&lt;script&gt;alert&lt;/script&gt;&#34;</span><span class="op" id="8232897">,</span>&nbsp;<span class="string" id="8232899">&#34;mime:&nbsp;unexpected&nbsp;content&nbsp;after&nbsp;media&nbsp;subtype&#34;</span><span class="op" id="8232945">}</span><span class="op" id="8232946">,</span><br>
<span class="lineno"></span><span class="op" id="8232948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8232951">func</span>&nbsp;<span class="ident" id="8232956">TestParseMediaTypeBogus</span><span class="op" id="8232979">(</span><span class="ident" id="8232980">t</span>&nbsp;<span class="op" id="8232982">*</span><span class="ident" id="8232983"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8232990">.</span><span class="ident" id="8232991">T</span><span class="op" id="8232992">)</span>&nbsp;<span class="op" id="8232994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8232997">for</span>&nbsp;<span class="ident" id="8233001">_</span><span class="op" id="8233002">,</span>&nbsp;<span class="ident" id="8233004">tt</span>&nbsp;<span class="op" id="8233007">:=</span>&nbsp;<span class="keyword" id="8233010">range</span>&nbsp;<span class="ident" id="8233016"><a href="/mime/mediatype_test.go.html#8232693">badMediaTypeTests</a></span>&nbsp;<span class="op" id="8233034">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233038">mt</span><span class="op" id="8233040">,</span>&nbsp;<span class="ident" id="8233042">params</span><span class="op" id="8233048">,</span>&nbsp;<span class="ident" id="8233050">err</span>&nbsp;<span class="op" id="8233054">:=</span>&nbsp;<span class="ident" id="8233057"><a href="/mime/mediatype.go.html#3594498">ParseMediaType</a></span><span class="op" id="8233071">(</span><span class="ident" id="8233072"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233074">.</span><span class="ident" id="8233075">in</span><span class="op" id="8233077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233081">if</span>&nbsp;<span class="ident" id="8233084"><a href="/mime/mediatype_test.go.html#8233050">err</a></span>&nbsp;<span class="op" id="8233088">==</span>&nbsp;<span class="ident" id="8233091">nil</span>&nbsp;<span class="op" id="8233095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233100"><a href="/mime/mediatype_test.go.html#8232980">t</a></span><span class="op" id="8233101">.</span><span class="ident" id="8233102">Errorf</span><span class="op" id="8233108">(</span><span class="string" id="8233109">&#34;ParseMediaType(%q)&nbsp;=&nbsp;nil&nbsp;error;&nbsp;want&nbsp;parse&nbsp;error&#34;</span><span class="op" id="8233159">,</span>&nbsp;<span class="ident" id="8233161"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233163">.</span><span class="ident" id="8233164">in</span><span class="op" id="8233166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233171">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233182">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233186">if</span>&nbsp;<span class="ident" id="8233189"><a href="/mime/mediatype_test.go.html#8233050">err</a></span><span class="op" id="8233192">.</span><span class="ident" id="8233193">Error</span><span class="op" id="8233198">(</span><span class="op" id="8233199">)</span>&nbsp;<span class="op" id="8233201">!=</span>&nbsp;<span class="ident" id="8233204"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233206">.</span><span class="ident" id="8233207">err</span>&nbsp;<span class="op" id="8233211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233216"><a href="/mime/mediatype_test.go.html#8232980">t</a></span><span class="op" id="8233217">.</span><span class="ident" id="8233218">Errorf</span><span class="op" id="8233224">(</span><span class="string" id="8233225">&#34;ParseMediaType(%q)&nbsp;=&nbsp;err&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8233263">,</span>&nbsp;<span class="ident" id="8233265"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233267">.</span><span class="ident" id="8233268">in</span><span class="op" id="8233270">,</span>&nbsp;<span class="ident" id="8233272"><a href="/mime/mediatype_test.go.html#8233050">err</a></span><span class="op" id="8233275">.</span><span class="ident" id="8233276">Error</span><span class="op" id="8233281">(</span><span class="op" id="8233282">)</span><span class="op" id="8233283">,</span>&nbsp;<span class="ident" id="8233285"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233287">.</span><span class="ident" id="8233288">err</span><span class="op" id="8233291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233299">if</span>&nbsp;<span class="ident" id="8233302"><a href="/mime/mediatype_test.go.html#8233042">params</a></span>&nbsp;<span class="op" id="8233309">!=</span>&nbsp;<span class="ident" id="8233312">nil</span>&nbsp;<span class="op" id="8233316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233321"><a href="/mime/mediatype_test.go.html#8232980">t</a></span><span class="op" id="8233322">.</span><span class="ident" id="8233323">Errorf</span><span class="op" id="8233329">(</span><span class="string" id="8233330">&#34;ParseMediaType(%q):&nbsp;got&nbsp;non-nil&nbsp;params&nbsp;on&nbsp;error&#34;</span><span class="op" id="8233379">,</span>&nbsp;<span class="ident" id="8233381"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233383">.</span><span class="ident" id="8233384">in</span><span class="op" id="8233386">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233394">if</span>&nbsp;<span class="ident" id="8233397"><a href="/mime/mediatype_test.go.html#8233038">mt</a></span>&nbsp;<span class="op" id="8233400">!=</span>&nbsp;<span class="string" id="8233403">&#34;&#34;</span>&nbsp;<span class="op" id="8233406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233411"><a href="/mime/mediatype_test.go.html#8232980">t</a></span><span class="op" id="8233412">.</span><span class="ident" id="8233413">Errorf</span><span class="op" id="8233419">(</span><span class="string" id="8233420">&#34;ParseMediaType(%q):&nbsp;got&nbsp;non-empty&nbsp;media&nbsp;type&nbsp;string&nbsp;on&nbsp;error&#34;</span><span class="op" id="8233482">,</span>&nbsp;<span class="ident" id="8233484"><a href="/mime/mediatype_test.go.html#8233004">tt</a></span><span class="op" id="8233486">.</span><span class="ident" id="8233487">in</span><span class="op" id="8233489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233496">}</span><br>
<span class="lineno">275</span><span class="op" id="8233498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8233501">type</span>&nbsp;<span class="ident" id="8233506">formatTest</span>&nbsp;<span class="keyword" id="8233517">struct</span>&nbsp;<span class="op" id="8233524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233527">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8233534">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233542">params</span>&nbsp;<span class="keyword" id="8233549">map</span><span class="op" id="8233552">[</span><span class="builtintype" id="8233553">string</span><span class="op" id="8233559">]</span><span class="builtintype" id="8233560">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233568">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8233575">string</span><br>
<span class="lineno"></span><span class="op" id="8233582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8233585">var</span>&nbsp;<span class="ident" id="8233589">formatTests</span>&nbsp;<span class="op" id="8233601">=</span>&nbsp;<span class="op" id="8233603">[</span><span class="op" id="8233604">]</span><span class="ident" id="8233605"><a href="/mime/mediatype_test.go.html#8233506">formatTest</a></span><span class="op" id="8233615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233618">{</span><span class="string" id="8233619">&#34;noslash&#34;</span><span class="op" id="8233628">,</span>&nbsp;<span class="ident" id="8233630">nil</span><span class="op" id="8233633">,</span>&nbsp;<span class="string" id="8233635">&#34;&#34;</span><span class="op" id="8233637">}</span><span class="op" id="8233638">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233641">{</span><span class="string" id="8233642">&#34;foo&nbsp;bar/baz&#34;</span><span class="op" id="8233655">,</span>&nbsp;<span class="ident" id="8233657">nil</span><span class="op" id="8233660">,</span>&nbsp;<span class="string" id="8233662">&#34;&#34;</span><span class="op" id="8233664">}</span><span class="op" id="8233665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233668">{</span><span class="string" id="8233669">&#34;foo/bar&nbsp;baz&#34;</span><span class="op" id="8233682">,</span>&nbsp;<span class="ident" id="8233684">nil</span><span class="op" id="8233687">,</span>&nbsp;<span class="string" id="8233689">&#34;&#34;</span><span class="op" id="8233691">}</span><span class="op" id="8233692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233695">{</span><span class="string" id="8233696">&#34;foo/BAR&#34;</span><span class="op" id="8233705">,</span>&nbsp;<span class="ident" id="8233707">nil</span><span class="op" id="8233710">,</span>&nbsp;<span class="string" id="8233712">&#34;foo/bar&#34;</span><span class="op" id="8233721">}</span><span class="op" id="8233722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233725">{</span><span class="string" id="8233726">&#34;foo/BAR&#34;</span><span class="op" id="8233735">,</span>&nbsp;<span class="keyword" id="8233737">map</span><span class="op" id="8233740">[</span><span class="builtintype" id="8233741">string</span><span class="op" id="8233747">]</span><span class="builtintype" id="8233748">string</span><span class="op" id="8233754">{</span><span class="string" id="8233755">&#34;X&#34;</span><span class="op" id="8233758">:</span>&nbsp;<span class="string" id="8233760">&#34;Y&#34;</span><span class="op" id="8233763">}</span><span class="op" id="8233764">,</span>&nbsp;<span class="string" id="8233766">&#34;foo/bar;&nbsp;x=Y&#34;</span><span class="op" id="8233780">}</span><span class="op" id="8233781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233784">{</span><span class="string" id="8233785">&#34;foo/BAR&#34;</span><span class="op" id="8233794">,</span>&nbsp;<span class="keyword" id="8233796">map</span><span class="op" id="8233799">[</span><span class="builtintype" id="8233800">string</span><span class="op" id="8233806">]</span><span class="builtintype" id="8233807">string</span><span class="op" id="8233813">{</span><span class="string" id="8233814">&#34;space&#34;</span><span class="op" id="8233821">:</span>&nbsp;<span class="string" id="8233823">&#34;With&nbsp;space&#34;</span><span class="op" id="8233835">}</span><span class="op" id="8233836">,</span>&nbsp;<span class="string" id="8233838">`foo/bar;&nbsp;space=&#34;With&nbsp;space&#34;`</span><span class="op" id="8233867">}</span><span class="op" id="8233868">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233871">{</span><span class="string" id="8233872">&#34;foo/BAR&#34;</span><span class="op" id="8233881">,</span>&nbsp;<span class="keyword" id="8233883">map</span><span class="op" id="8233886">[</span><span class="builtintype" id="8233887">string</span><span class="op" id="8233893">]</span><span class="builtintype" id="8233894">string</span><span class="op" id="8233900">{</span><span class="string" id="8233901">&#34;quote&#34;</span><span class="op" id="8233908">:</span>&nbsp;<span class="string" id="8233910">`With&nbsp;&#34;quote`</span><span class="op" id="8233923">}</span><span class="op" id="8233924">,</span>&nbsp;<span class="string" id="8233926">`foo/bar;&nbsp;quote=&#34;With&nbsp;\&#34;quote&#34;`</span><span class="op" id="8233957">}</span><span class="op" id="8233958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233961">{</span><span class="string" id="8233962">&#34;foo/BAR&#34;</span><span class="op" id="8233971">,</span>&nbsp;<span class="keyword" id="8233973">map</span><span class="op" id="8233976">[</span><span class="builtintype" id="8233977">string</span><span class="op" id="8233983">]</span><span class="builtintype" id="8233984">string</span><span class="op" id="8233990">{</span><span class="string" id="8233991">&#34;bslash&#34;</span><span class="op" id="8233999">:</span>&nbsp;<span class="string" id="8234001">`With&nbsp;\backslash`</span><span class="op" id="8234018">}</span><span class="op" id="8234019">,</span>&nbsp;<span class="string" id="8234021">`foo/bar;&nbsp;bslash=&#34;With&nbsp;\\backslash&#34;`</span><span class="op" id="8234057">}</span><span class="op" id="8234058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234061">{</span><span class="string" id="8234062">&#34;foo/BAR&#34;</span><span class="op" id="8234071">,</span>&nbsp;<span class="keyword" id="8234073">map</span><span class="op" id="8234076">[</span><span class="builtintype" id="8234077">string</span><span class="op" id="8234083">]</span><span class="builtintype" id="8234084">string</span><span class="op" id="8234090">{</span><span class="string" id="8234091">&#34;both&#34;</span><span class="op" id="8234097">:</span>&nbsp;<span class="string" id="8234099">`With&nbsp;\backslash&nbsp;and&nbsp;&#34;quote`</span><span class="op" id="8234127">}</span><span class="op" id="8234128">,</span>&nbsp;<span class="string" id="8234130">`foo/bar;&nbsp;both=&#34;With&nbsp;\\backslash&nbsp;and&nbsp;\&#34;quote&#34;`</span><span class="op" id="8234176">}</span><span class="op" id="8234177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234180">{</span><span class="string" id="8234181">&#34;foo/BAR&#34;</span><span class="op" id="8234190">,</span>&nbsp;<span class="keyword" id="8234192">map</span><span class="op" id="8234195">[</span><span class="builtintype" id="8234196">string</span><span class="op" id="8234202">]</span><span class="builtintype" id="8234203">string</span><span class="op" id="8234209">{</span><span class="string" id="8234210">&#34;&#34;</span><span class="op" id="8234212">:</span>&nbsp;<span class="string" id="8234214">&#34;empty&nbsp;attribute&#34;</span><span class="op" id="8234231">}</span><span class="op" id="8234232">,</span>&nbsp;<span class="string" id="8234234">&#34;&#34;</span><span class="op" id="8234236">}</span><span class="op" id="8234237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234240">{</span><span class="string" id="8234241">&#34;foo/BAR&#34;</span><span class="op" id="8234250">,</span>&nbsp;<span class="keyword" id="8234252">map</span><span class="op" id="8234255">[</span><span class="builtintype" id="8234256">string</span><span class="op" id="8234262">]</span><span class="builtintype" id="8234263">string</span><span class="op" id="8234269">{</span><span class="string" id="8234270">&#34;bad&nbsp;attribute&#34;</span><span class="op" id="8234285">:</span>&nbsp;<span class="string" id="8234287">&#34;baz&#34;</span><span class="op" id="8234292">}</span><span class="op" id="8234293">,</span>&nbsp;<span class="string" id="8234295">&#34;&#34;</span><span class="op" id="8234297">}</span><span class="op" id="8234298">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234301">{</span><span class="string" id="8234302">&#34;foo/BAR&#34;</span><span class="op" id="8234311">,</span>&nbsp;<span class="keyword" id="8234313">map</span><span class="op" id="8234316">[</span><span class="builtintype" id="8234317">string</span><span class="op" id="8234323">]</span><span class="builtintype" id="8234324">string</span><span class="op" id="8234330">{</span><span class="string" id="8234331">&#34;nonascii&#34;</span><span class="op" id="8234341">:</span>&nbsp;<span class="string" id="8234343">&#34;not&nbsp;an&nbsp;ascii&nbsp;character:&nbsp;ä&#34;</span><span class="op" id="8234371">}</span><span class="op" id="8234372">,</span>&nbsp;<span class="string" id="8234374">&#34;&#34;</span><span class="op" id="8234376">}</span><span class="op" id="8234377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234380">{</span><span class="string" id="8234381">&#34;foo/bar&#34;</span><span class="op" id="8234390">,</span>&nbsp;<span class="keyword" id="8234392">map</span><span class="op" id="8234395">[</span><span class="builtintype" id="8234396">string</span><span class="op" id="8234402">]</span><span class="builtintype" id="8234403">string</span><span class="op" id="8234409">{</span><span class="string" id="8234410">&#34;a&#34;</span><span class="op" id="8234413">:</span>&nbsp;<span class="string" id="8234415">&#34;av&#34;</span><span class="op" id="8234419">,</span>&nbsp;<span class="string" id="8234421">&#34;b&#34;</span><span class="op" id="8234424">:</span>&nbsp;<span class="string" id="8234426">&#34;bv&#34;</span><span class="op" id="8234430">,</span>&nbsp;<span class="string" id="8234432">&#34;c&#34;</span><span class="op" id="8234435">:</span>&nbsp;<span class="string" id="8234437">&#34;cv&#34;</span><span class="op" id="8234441">}</span><span class="op" id="8234442">,</span>&nbsp;<span class="string" id="8234444">&#34;foo/bar;&nbsp;a=av;&nbsp;b=bv;&nbsp;c=cv&#34;</span><span class="op" id="8234471">}</span><span class="op" id="8234472">,</span><br>
<span class="lineno"></span><span class="op" id="8234474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8234477">func</span>&nbsp;<span class="ident" id="8234482">TestFormatMediaType</span><span class="op" id="8234501">(</span><span class="ident" id="8234502">t</span>&nbsp;<span class="op" id="8234504">*</span><span class="ident" id="8234505"><a href="/mime/mediatype_test.go.html#8225232">testing</a></span><span class="op" id="8234512">.</span><span class="ident" id="8234513">T</span><span class="op" id="8234514">)</span>&nbsp;<span class="op" id="8234516">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234519">for</span>&nbsp;<span class="ident" id="8234523">i</span><span class="op" id="8234524">,</span>&nbsp;<span class="ident" id="8234526">tt</span>&nbsp;<span class="op" id="8234529">:=</span>&nbsp;<span class="keyword" id="8234532">range</span>&nbsp;<span class="ident" id="8234538"><a href="/mime/mediatype_test.go.html#8233589">formatTests</a></span>&nbsp;<span class="op" id="8234550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234554">got</span>&nbsp;<span class="op" id="8234558">:=</span>&nbsp;<span class="ident" id="8234561"><a href="/mime/mediatype.go.html#3592525">FormatMediaType</a></span><span class="op" id="8234576">(</span><span class="ident" id="8234577"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234579">.</span><span class="ident" id="8234580">typ</span><span class="op" id="8234583">,</span>&nbsp;<span class="ident" id="8234585"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234587">.</span><span class="ident" id="8234588">params</span><span class="op" id="8234594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234598">if</span>&nbsp;<span class="ident" id="8234601"><a href="/mime/mediatype_test.go.html#8234554">got</a></span>&nbsp;<span class="op" id="8234605">!=</span>&nbsp;<span class="ident" id="8234608"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234610">.</span><span class="ident" id="8234611">want</span>&nbsp;<span class="op" id="8234616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234621"><a href="/mime/mediatype_test.go.html#8234502">t</a></span><span class="op" id="8234622">.</span><span class="ident" id="8234623">Errorf</span><span class="op" id="8234629">(</span><span class="string" id="8234630">&#34;%d.&nbsp;FormatMediaType(%q,&nbsp;%v)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8234673">,</span>&nbsp;<span class="ident" id="8234675"><a href="/mime/mediatype_test.go.html#8234523">i</a></span><span class="op" id="8234676">,</span>&nbsp;<span class="ident" id="8234678"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234680">.</span><span class="ident" id="8234681">typ</span><span class="op" id="8234684">,</span>&nbsp;<span class="ident" id="8234686"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234688">.</span><span class="ident" id="8234689">params</span><span class="op" id="8234695">,</span>&nbsp;<span class="ident" id="8234697"><a href="/mime/mediatype_test.go.html#8234554">got</a></span><span class="op" id="8234700">,</span>&nbsp;<span class="ident" id="8234702"><a href="/mime/mediatype_test.go.html#8234526">tt</a></span><span class="op" id="8234704">.</span><span class="ident" id="8234705">want</span><span class="op" id="8234709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234713">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234716">}</span><br>
<span class="lineno"></span><span class="op" id="8234718">}</span>
</div>
</body>
</html>
