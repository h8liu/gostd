<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5821320">package</span>&nbsp;<span class="ident" id="5821328">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5821334">import</span>&nbsp;<span class="op" id="5821341">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5821344">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5821367">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5821370">//&nbsp;PkgObj&nbsp;is&nbsp;a&nbsp;package&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="5821401">type</span>&nbsp;<span class="ident" id="5821406">lib</span>&nbsp;<span class="keyword" id="5821410">struct</span>&nbsp;<span class="op" id="5821417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821420">*</span><span class="ident" id="5821421">link8</span><span class="op" id="5821426">.</span><span class="ident" id="5821427">Package</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821437">requires</span>&nbsp;<span class="keyword" id="5821446">map</span><span class="op" id="5821449">[</span><span class="builtintype" id="5821450">uint32</span><span class="op" id="5821456">]</span><span class="op" id="5821457">*</span><span class="ident" id="5821458">lib</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821463">symbols</span>&nbsp;&nbsp;<span class="keyword" id="5821472">map</span><span class="op" id="5821475">[</span><span class="builtintype" id="5821476">string</span><span class="op" id="5821482">]</span><span class="op" id="5821483">*</span><span class="ident" id="5821484">symbol</span><br>
<span class="lineno"></span><span class="op" id="5821491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5821494">//&nbsp;NewPkgObj&nbsp;creates&nbsp;a&nbsp;new&nbsp;package&nbsp;compile&nbsp;object</span><br>
<span class="lineno"></span><span class="keyword" id="5821544">func</span>&nbsp;<span class="ident" id="5821549">newLib</span><span class="op" id="5821555">(</span><span class="ident" id="5821556">p</span>&nbsp;<span class="builtintype" id="5821558">string</span><span class="op" id="5821564">)</span>&nbsp;<span class="op" id="5821566">*</span><span class="ident" id="5821567">lib</span>&nbsp;<span class="op" id="5821571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821574">ret</span>&nbsp;<span class="op" id="5821578">:=</span>&nbsp;<span class="builtinfunc" id="5821581">new</span><span class="op" id="5821584">(</span><span class="ident" id="5821585">lib</span><span class="op" id="5821588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821591">ret</span><span class="op" id="5821594">.</span><span class="ident" id="5821595">Package</span>&nbsp;<span class="op" id="5821603">=</span>&nbsp;<span class="ident" id="5821605">link8</span><span class="op" id="5821610">.</span><span class="ident" id="5821611">NewPackage</span><span class="op" id="5821621">(</span><span class="ident" id="5821622">p</span><span class="op" id="5821623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821627">ret</span><span class="op" id="5821630">.</span><span class="ident" id="5821631">requires</span>&nbsp;<span class="op" id="5821640">=</span>&nbsp;<span class="builtinfunc" id="5821642">make</span><span class="op" id="5821646">(</span><span class="keyword" id="5821647">map</span><span class="op" id="5821650">[</span><span class="builtintype" id="5821651">uint32</span><span class="op" id="5821657">]</span><span class="op" id="5821658">*</span><span class="ident" id="5821659">lib</span><span class="op" id="5821662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821665">ret</span><span class="op" id="5821668">.</span><span class="ident" id="5821669">symbols</span>&nbsp;<span class="op" id="5821677">=</span>&nbsp;<span class="builtinfunc" id="5821679">make</span><span class="op" id="5821683">(</span><span class="keyword" id="5821684">map</span><span class="op" id="5821687">[</span><span class="builtintype" id="5821688">string</span><span class="op" id="5821694">]</span><span class="op" id="5821695">*</span><span class="ident" id="5821696">symbol</span><span class="op" id="5821702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821706">id</span>&nbsp;<span class="op" id="5821709">:=</span>&nbsp;<span class="ident" id="5821712">ret</span><span class="op" id="5821715">.</span><span class="ident" id="5821716">Require</span><span class="op" id="5821723">(</span><span class="ident" id="5821724">ret</span><span class="op" id="5821727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821730">if</span>&nbsp;<span class="ident" id="5821733">id</span>&nbsp;<span class="op" id="5821736">!=</span>&nbsp;<span class="num" id="5821739">0</span>&nbsp;<span class="op" id="5821741">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5821745">panic</span><span class="op" id="5821750">(</span><span class="string" id="5821751">&#34;bug&#34;</span><span class="op" id="5821756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821763">return</span>&nbsp;<span class="ident" id="5821770">ret</span><br>
<span class="lineno"></span><span class="op" id="5821774">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5821777">//&nbsp;Require&nbsp;imports&nbsp;a&nbsp;package&nbsp;in&nbsp;and&nbsp;grants&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5821832">//&nbsp;a&nbsp;import&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5821851">func</span>&nbsp;<span class="op" id="5821856">(</span><span class="ident" id="5821857">p</span>&nbsp;<span class="op" id="5821859">*</span><span class="ident" id="5821860">lib</span><span class="op" id="5821863">)</span>&nbsp;<span class="ident" id="5821865">Require</span><span class="op" id="5821872">(</span><span class="ident" id="5821873">req</span>&nbsp;<span class="op" id="5821877">*</span><span class="ident" id="5821878">lib</span><span class="op" id="5821881">)</span>&nbsp;<span class="builtintype" id="5821883">uint32</span>&nbsp;<span class="op" id="5821890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821893">ret</span>&nbsp;<span class="op" id="5821897">:=</span>&nbsp;<span class="ident" id="5821900">p</span><span class="op" id="5821901">.</span><span class="ident" id="5821902">Package</span><span class="op" id="5821909">.</span><span class="ident" id="5821910">Require</span><span class="op" id="5821917">(</span><span class="ident" id="5821918">req</span><span class="op" id="5821921">.</span><span class="ident" id="5821922">Package</span><span class="op" id="5821929">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821932">_</span><span class="op" id="5821933">,</span>&nbsp;<span class="ident" id="5821935">found</span>&nbsp;<span class="op" id="5821941">:=</span>&nbsp;<span class="ident" id="5821944">p</span><span class="op" id="5821945">.</span><span class="ident" id="5821946">requires</span><span class="op" id="5821954">[</span><span class="ident" id="5821955">ret</span><span class="op" id="5821958">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821961">if</span>&nbsp;<span class="op" id="5821964">!</span><span class="ident" id="5821965">found</span>&nbsp;<span class="op" id="5821971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821975">p</span><span class="op" id="5821976">.</span><span class="ident" id="5821977">requires</span><span class="op" id="5821985">[</span><span class="ident" id="5821986">ret</span><span class="op" id="5821989">]</span>&nbsp;<span class="op" id="5821991">=</span>&nbsp;<span class="ident" id="5821993">req</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822002">return</span>&nbsp;<span class="ident" id="5822009">ret</span><br>
<span class="lineno"></span><span class="op" id="5822013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5822016">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;package&nbsp;import&nbsp;index,&nbsp;consistent&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5822078">//&nbsp;the&nbsp;underlying&nbsp;link8.Package.</span><br>
<span class="lineno">45</span><span class="keyword" id="5822111">func</span>&nbsp;<span class="op" id="5822116">(</span><span class="ident" id="5822117">p</span>&nbsp;<span class="op" id="5822119">*</span><span class="ident" id="5822120">lib</span><span class="op" id="5822123">)</span>&nbsp;<span class="ident" id="5822125">LibIndex</span><span class="op" id="5822133">(</span><span class="ident" id="5822134">path</span>&nbsp;<span class="builtintype" id="5822139">string</span><span class="op" id="5822145">)</span>&nbsp;<span class="op" id="5822147">(</span><span class="op" id="5822148">*</span><span class="ident" id="5822149">lib</span><span class="op" id="5822152">,</span>&nbsp;<span class="builtintype" id="5822154">uint32</span><span class="op" id="5822160">)</span>&nbsp;<span class="op" id="5822162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822165">pkg</span><span class="op" id="5822168">,</span>&nbsp;<span class="ident" id="5822170">index</span>&nbsp;<span class="op" id="5822176">:=</span>&nbsp;<span class="ident" id="5822179">p</span><span class="op" id="5822180">.</span><span class="ident" id="5822181">Package</span><span class="op" id="5822188">.</span><span class="ident" id="5822189">PkgIndex</span><span class="op" id="5822197">(</span><span class="ident" id="5822198">path</span><span class="op" id="5822202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822205">if</span>&nbsp;<span class="ident" id="5822208">pkg</span>&nbsp;<span class="op" id="5822212">==</span>&nbsp;<span class="ident" id="5822215">nil</span>&nbsp;<span class="op" id="5822219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822223">return</span>&nbsp;<span class="ident" id="5822230">nil</span><span class="op" id="5822233">,</span>&nbsp;<span class="num" id="5822235">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822238">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822242">ret</span><span class="op" id="5822245">,</span>&nbsp;<span class="ident" id="5822247">found</span>&nbsp;<span class="op" id="5822253">:=</span>&nbsp;<span class="ident" id="5822256">p</span><span class="op" id="5822257">.</span><span class="ident" id="5822258">requires</span><span class="op" id="5822266">[</span><span class="ident" id="5822267">index</span><span class="op" id="5822272">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822275">if</span>&nbsp;<span class="op" id="5822278">!</span><span class="ident" id="5822279">found</span>&nbsp;<span class="op" id="5822285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5822289">panic</span><span class="op" id="5822294">(</span><span class="string" id="5822295">&#34;bug&#34;</span><span class="op" id="5822300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822303">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822307">return</span>&nbsp;<span class="ident" id="5822314">ret</span><span class="op" id="5822317">,</span>&nbsp;<span class="ident" id="5822319">index</span><br>
<span class="lineno"></span><span class="op" id="5822325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5822328">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbol&nbsp;inside&nbsp;the&nbsp;package.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function</span><br>
<span class="lineno">60</span><span class="comment" id="5822406">//&nbsp;or&nbsp;variable,&nbsp;it&nbsp;is&nbsp;also&nbsp;declared&nbsp;as&nbsp;an&nbsp;object&nbsp;file&nbsp;symbol&nbsp;in&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="5822485">//&nbsp;link8.Package,&nbsp;and&nbsp;it&nbsp;returns&nbsp;the&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;constant,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5822562">//&nbsp;returns&nbsp;0&nbsp;after&nbsp;the&nbsp;declaration.&nbsp;Other&nbsp;types&nbsp;will&nbsp;panic.&nbsp;Redeclaration&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="5822641">//&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="5822651">func</span>&nbsp;<span class="op" id="5822656">(</span><span class="ident" id="5822657">p</span>&nbsp;<span class="op" id="5822659">*</span><span class="ident" id="5822660">lib</span><span class="op" id="5822663">)</span>&nbsp;<span class="ident" id="5822665">Declare</span><span class="op" id="5822672">(</span><span class="ident" id="5822673">s</span>&nbsp;<span class="op" id="5822675">*</span><span class="ident" id="5822676">symbol</span><span class="op" id="5822682">)</span>&nbsp;<span class="builtintype" id="5822684">uint32</span>&nbsp;<span class="op" id="5822691">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822694">_</span><span class="op" id="5822695">,</span>&nbsp;<span class="ident" id="5822697">found</span>&nbsp;<span class="op" id="5822703">:=</span>&nbsp;<span class="ident" id="5822706">p</span><span class="op" id="5822707">.</span><span class="ident" id="5822708">symbols</span><span class="op" id="5822715">[</span><span class="ident" id="5822716">s</span><span class="op" id="5822717">.</span><span class="ident" id="5822718">Name</span><span class="op" id="5822722">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822725">if</span>&nbsp;<span class="ident" id="5822728">found</span>&nbsp;<span class="op" id="5822734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5822738">panic</span><span class="op" id="5822743">(</span><span class="string" id="5822744">&#34;redeclare&#34;</span><span class="op" id="5822755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822761">p</span><span class="op" id="5822762">.</span><span class="ident" id="5822763">symbols</span><span class="op" id="5822770">[</span><span class="ident" id="5822771">s</span><span class="op" id="5822772">.</span><span class="ident" id="5822773">Name</span><span class="op" id="5822777">]</span>&nbsp;<span class="op" id="5822779">=</span>&nbsp;<span class="ident" id="5822781">s</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822785">switch</span>&nbsp;<span class="ident" id="5822792">s</span><span class="op" id="5822793">.</span><span class="ident" id="5822794">Type</span>&nbsp;<span class="op" id="5822799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822802">case</span>&nbsp;<span class="ident" id="5822807">SymConst</span><span class="op" id="5822815">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822819">return</span>&nbsp;<span class="num" id="5822826">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822829">case</span>&nbsp;<span class="ident" id="5822834">SymFunc</span><span class="op" id="5822841">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822845">return</span>&nbsp;<span class="ident" id="5822852">p</span><span class="op" id="5822853">.</span><span class="ident" id="5822854">Package</span><span class="op" id="5822861">.</span><span class="ident" id="5822862">Declare</span><span class="op" id="5822869">(</span><span class="op" id="5822870">&amp;</span><span class="ident" id="5822871">link8</span><span class="op" id="5822876">.</span><span class="ident" id="5822877">Symbol</span><span class="op" id="5822883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822888">Name</span><span class="op" id="5822892">:</span>&nbsp;<span class="ident" id="5822894">s</span><span class="op" id="5822895">.</span><span class="ident" id="5822896">Name</span><span class="op" id="5822900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822905">Type</span><span class="op" id="5822909">:</span>&nbsp;<span class="ident" id="5822911">link8</span><span class="op" id="5822916">.</span><span class="ident" id="5822917">SymFunc</span><span class="op" id="5822924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822928">}</span><span class="op" id="5822929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822932">case</span>&nbsp;<span class="ident" id="5822937">SymVar</span><span class="op" id="5822943">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822947">return</span>&nbsp;<span class="ident" id="5822954">p</span><span class="op" id="5822955">.</span><span class="ident" id="5822956">Package</span><span class="op" id="5822963">.</span><span class="ident" id="5822964">Declare</span><span class="op" id="5822971">(</span><span class="op" id="5822972">&amp;</span><span class="ident" id="5822973">link8</span><span class="op" id="5822978">.</span><span class="ident" id="5822979">Symbol</span><span class="op" id="5822985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822990">Name</span><span class="op" id="5822994">:</span>&nbsp;<span class="ident" id="5822996">s</span><span class="op" id="5822997">.</span><span class="ident" id="5822998">Name</span><span class="op" id="5823002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823007">Type</span><span class="op" id="5823011">:</span>&nbsp;<span class="ident" id="5823013">link8</span><span class="op" id="5823018">.</span><span class="ident" id="5823019">SymVar</span><span class="op" id="5823025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823029">}</span><span class="op" id="5823030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823033">default</span><span class="op" id="5823040">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5823044">panic</span><span class="op" id="5823049">(</span><span class="string" id="5823050">&#34;declare&nbsp;with&nbsp;invalid&nbsp;sym&nbsp;type&#34;</span><span class="op" id="5823081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823084">}</span><br>
<span class="lineno"></span><span class="op" id="5823086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5823089">//&nbsp;Query&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;declared&nbsp;by&nbsp;name&nbsp;and&nbsp;its&nbsp;symbol&nbsp;index</span><br>
<span class="lineno">90</span><span class="comment" id="5823155">//&nbsp;if&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function&nbsp;or&nbsp;variable.&nbsp;It&nbsp;returns&nbsp;nil,&nbsp;0&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5823222">//&nbsp;the&nbsp;symbol&nbsp;of&nbsp;name&nbsp;is&nbsp;not&nbsp;found.</span><br>
<span class="lineno"></span><span class="keyword" id="5823258">func</span>&nbsp;<span class="op" id="5823263">(</span><span class="ident" id="5823264">p</span>&nbsp;<span class="op" id="5823266">*</span><span class="ident" id="5823267">lib</span><span class="op" id="5823270">)</span>&nbsp;<span class="ident" id="5823272">Query</span><span class="op" id="5823277">(</span><span class="ident" id="5823278">name</span>&nbsp;<span class="builtintype" id="5823283">string</span><span class="op" id="5823289">)</span>&nbsp;<span class="op" id="5823291">(</span><span class="op" id="5823292">*</span><span class="ident" id="5823293">symbol</span><span class="op" id="5823299">,</span>&nbsp;<span class="builtintype" id="5823301">uint32</span><span class="op" id="5823307">)</span>&nbsp;<span class="op" id="5823309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823312">ret</span><span class="op" id="5823315">,</span>&nbsp;<span class="ident" id="5823317">found</span>&nbsp;<span class="op" id="5823323">:=</span>&nbsp;<span class="ident" id="5823326">p</span><span class="op" id="5823327">.</span><span class="ident" id="5823328">symbols</span><span class="op" id="5823335">[</span><span class="ident" id="5823336">name</span><span class="op" id="5823340">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823343">if</span>&nbsp;<span class="op" id="5823346">!</span><span class="ident" id="5823347">found</span>&nbsp;<span class="op" id="5823353">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823357">return</span>&nbsp;<span class="ident" id="5823364">nil</span><span class="op" id="5823367">,</span>&nbsp;<span class="num" id="5823369">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823376">switch</span>&nbsp;<span class="ident" id="5823383">ret</span><span class="op" id="5823386">.</span><span class="ident" id="5823387">Type</span>&nbsp;<span class="op" id="5823392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823395">case</span>&nbsp;<span class="ident" id="5823400">SymConst</span><span class="op" id="5823408">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823412">return</span>&nbsp;<span class="ident" id="5823419">ret</span><span class="op" id="5823422">,</span>&nbsp;<span class="num" id="5823424">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823427">case</span>&nbsp;<span class="ident" id="5823432">SymFunc</span><span class="op" id="5823439">,</span>&nbsp;<span class="ident" id="5823441">SymVar</span><span class="op" id="5823447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823451">s</span><span class="op" id="5823452">,</span>&nbsp;<span class="ident" id="5823454">index</span>&nbsp;<span class="op" id="5823460">:=</span>&nbsp;<span class="ident" id="5823463">p</span><span class="op" id="5823464">.</span><span class="ident" id="5823465">Package</span><span class="op" id="5823472">.</span><span class="ident" id="5823473">Query</span><span class="op" id="5823478">(</span><span class="ident" id="5823479">name</span><span class="op" id="5823483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823487">if</span>&nbsp;<span class="ident" id="5823490">s</span>&nbsp;<span class="op" id="5823492">==</span>&nbsp;<span class="ident" id="5823495">nil</span>&nbsp;<span class="op" id="5823499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5823504">panic</span><span class="op" id="5823509">(</span><span class="string" id="5823510">&#34;symbol&nbsp;missing&#34;</span><span class="op" id="5823526">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823534">return</span>&nbsp;<span class="ident" id="5823541">ret</span><span class="op" id="5823544">,</span>&nbsp;<span class="ident" id="5823546">index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823553">default</span><span class="op" id="5823560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5823564">panic</span><span class="op" id="5823569">(</span><span class="string" id="5823570">&#34;bug&#34;</span><span class="op" id="5823575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823578">}</span><br>
<span class="lineno">110</span><span class="op" id="5823580">}</span>
</div>
</body>
</html>
