<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html" class="current">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5386419">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5386475">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5386529">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5386580">package</span>&nbsp;<span class="ident" id="5386588">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5386594">import</span>&nbsp;<span class="string" id="5386601">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5386610">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="5386662">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="5386704">func</span>&nbsp;<span class="ident" id="5386709">Compact</span><span class="op" id="5386716">(</span><span class="ident" id="5386717">dst</span>&nbsp;<span class="op" id="5386721">*</span><span class="ident" id="5386722">bytes</span><span class="op" id="5386727">.</span><span class="ident" id="5386728">Buffer</span><span class="op" id="5386734">,</span>&nbsp;<span class="ident" id="5386736">src</span>&nbsp;<span class="op" id="5386740">[</span><span class="op" id="5386741">]</span><span class="builtintype" id="5386742">byte</span><span class="op" id="5386746">)</span>&nbsp;<span class="builtintype" id="5386748">error</span>&nbsp;<span class="op" id="5386754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386757">return</span>&nbsp;<span class="ident" id="5386764">compact</span><span class="op" id="5386771">(</span><span class="ident" id="5386772">dst</span><span class="op" id="5386775">,</span>&nbsp;<span class="ident" id="5386777">src</span><span class="op" id="5386780">,</span>&nbsp;<span class="builtintype" id="5386782">false</span><span class="op" id="5386787">)</span><br>
<span class="lineno"></span><span class="op" id="5386789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5386792">func</span>&nbsp;<span class="ident" id="5386797">compact</span><span class="op" id="5386804">(</span><span class="ident" id="5386805">dst</span>&nbsp;<span class="op" id="5386809">*</span><span class="ident" id="5386810">bytes</span><span class="op" id="5386815">.</span><span class="ident" id="5386816">Buffer</span><span class="op" id="5386822">,</span>&nbsp;<span class="ident" id="5386824">src</span>&nbsp;<span class="op" id="5386828">[</span><span class="op" id="5386829">]</span><span class="builtintype" id="5386830">byte</span><span class="op" id="5386834">,</span>&nbsp;<span class="ident" id="5386836">escape</span>&nbsp;<span class="builtintype" id="5386843">bool</span><span class="op" id="5386847">)</span>&nbsp;<span class="builtintype" id="5386849">error</span>&nbsp;<span class="op" id="5386855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386858">origLen</span>&nbsp;<span class="op" id="5386866">:=</span>&nbsp;<span class="ident" id="5386869">dst</span><span class="op" id="5386872">.</span><span class="ident" id="5386873">Len</span><span class="op" id="5386876">(</span><span class="op" id="5386877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386880">var</span>&nbsp;<span class="ident" id="5386884">scan</span>&nbsp;<span class="ident" id="5386889">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386898">scan</span><span class="op" id="5386902">.</span><span class="ident" id="5386903">reset</span><span class="op" id="5386908">(</span><span class="op" id="5386909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386912">start</span>&nbsp;<span class="op" id="5386918">:=</span>&nbsp;<span class="num" id="5386921">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386924">for</span>&nbsp;<span class="ident" id="5386928">i</span><span class="op" id="5386929">,</span>&nbsp;<span class="ident" id="5386931">c</span>&nbsp;<span class="op" id="5386933">:=</span>&nbsp;<span class="keyword" id="5386936">range</span>&nbsp;<span class="ident" id="5386942">src</span>&nbsp;<span class="op" id="5386946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386950">if</span>&nbsp;<span class="ident" id="5386953">escape</span>&nbsp;<span class="op" id="5386960">&amp;&amp;</span>&nbsp;<span class="op" id="5386963">(</span><span class="ident" id="5386964">c</span>&nbsp;<span class="op" id="5386966">==</span>&nbsp;<span class="string" id="5386969">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="5386973">||</span>&nbsp;<span class="ident" id="5386976">c</span>&nbsp;<span class="op" id="5386978">==</span>&nbsp;<span class="string" id="5386981">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="5386985">||</span>&nbsp;<span class="ident" id="5386988">c</span>&nbsp;<span class="op" id="5386990">==</span>&nbsp;<span class="string" id="5386993">&#39;&amp;&#39;</span><span class="op" id="5386996">)</span>&nbsp;<span class="op" id="5386998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387003">if</span>&nbsp;<span class="ident" id="5387006">start</span>&nbsp;<span class="op" id="5387012">&lt;</span>&nbsp;<span class="ident" id="5387014">i</span>&nbsp;<span class="op" id="5387016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387022">dst</span><span class="op" id="5387025">.</span><span class="ident" id="5387026">Write</span><span class="op" id="5387031">(</span><span class="ident" id="5387032">src</span><span class="op" id="5387035">[</span><span class="ident" id="5387036">start</span><span class="op" id="5387041">:</span><span class="ident" id="5387042">i</span><span class="op" id="5387043">]</span><span class="op" id="5387044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387049">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387054">dst</span><span class="op" id="5387057">.</span><span class="ident" id="5387058">WriteString</span><span class="op" id="5387069">(</span><span class="string" id="5387070">`\u00`</span><span class="op" id="5387076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387081">dst</span><span class="op" id="5387084">.</span><span class="ident" id="5387085">WriteByte</span><span class="op" id="5387094">(</span><span class="ident" id="5387095">hex</span><span class="op" id="5387098">[</span><span class="ident" id="5387099">c</span><span class="op" id="5387100">&gt;&gt;</span><span class="num" id="5387102">4</span><span class="op" id="5387103">]</span><span class="op" id="5387104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387109">dst</span><span class="op" id="5387112">.</span><span class="ident" id="5387113">WriteByte</span><span class="op" id="5387122">(</span><span class="ident" id="5387123">hex</span><span class="op" id="5387126">[</span><span class="ident" id="5387127">c</span><span class="op" id="5387128">&amp;</span><span class="num" id="5387129">0xF</span><span class="op" id="5387132">]</span><span class="op" id="5387133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387138">start</span>&nbsp;<span class="op" id="5387144">=</span>&nbsp;<span class="ident" id="5387146">i</span>&nbsp;<span class="op" id="5387148">+</span>&nbsp;<span class="num" id="5387150">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387154">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5387158">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387214">if</span>&nbsp;<span class="ident" id="5387217">c</span>&nbsp;<span class="op" id="5387219">==</span>&nbsp;<span class="num" id="5387222">0xE2</span>&nbsp;<span class="op" id="5387227">&amp;&amp;</span>&nbsp;<span class="ident" id="5387230">i</span><span class="op" id="5387231">+</span><span class="num" id="5387232">2</span>&nbsp;<span class="op" id="5387234">&lt;</span>&nbsp;<span class="builtinfunc" id="5387236">len</span><span class="op" id="5387239">(</span><span class="ident" id="5387240">src</span><span class="op" id="5387243">)</span>&nbsp;<span class="op" id="5387245">&amp;&amp;</span>&nbsp;<span class="ident" id="5387248">src</span><span class="op" id="5387251">[</span><span class="ident" id="5387252">i</span><span class="op" id="5387253">+</span><span class="num" id="5387254">1</span><span class="op" id="5387255">]</span>&nbsp;<span class="op" id="5387257">==</span>&nbsp;<span class="num" id="5387260">0x80</span>&nbsp;<span class="op" id="5387265">&amp;&amp;</span>&nbsp;<span class="ident" id="5387268">src</span><span class="op" id="5387271">[</span><span class="ident" id="5387272">i</span><span class="op" id="5387273">+</span><span class="num" id="5387274">2</span><span class="op" id="5387275">]</span><span class="op" id="5387276">&amp;^</span><span class="num" id="5387278">1</span>&nbsp;<span class="op" id="5387280">==</span>&nbsp;<span class="num" id="5387283">0xA8</span>&nbsp;<span class="op" id="5387288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387293">if</span>&nbsp;<span class="ident" id="5387296">start</span>&nbsp;<span class="op" id="5387302">&lt;</span>&nbsp;<span class="ident" id="5387304">i</span>&nbsp;<span class="op" id="5387306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387312">dst</span><span class="op" id="5387315">.</span><span class="ident" id="5387316">Write</span><span class="op" id="5387321">(</span><span class="ident" id="5387322">src</span><span class="op" id="5387325">[</span><span class="ident" id="5387326">start</span><span class="op" id="5387331">:</span><span class="ident" id="5387332">i</span><span class="op" id="5387333">]</span><span class="op" id="5387334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387339">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387344">dst</span><span class="op" id="5387347">.</span><span class="ident" id="5387348">WriteString</span><span class="op" id="5387359">(</span><span class="string" id="5387360">`\u202`</span><span class="op" id="5387367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387372">dst</span><span class="op" id="5387375">.</span><span class="ident" id="5387376">WriteByte</span><span class="op" id="5387385">(</span><span class="ident" id="5387386">hex</span><span class="op" id="5387389">[</span><span class="ident" id="5387390">src</span><span class="op" id="5387393">[</span><span class="ident" id="5387394">i</span><span class="op" id="5387395">+</span><span class="num" id="5387396">2</span><span class="op" id="5387397">]</span><span class="op" id="5387398">&amp;</span><span class="num" id="5387399">0xF</span><span class="op" id="5387402">]</span><span class="op" id="5387403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387408">start</span>&nbsp;<span class="op" id="5387414">=</span>&nbsp;<span class="ident" id="5387416">i</span>&nbsp;<span class="op" id="5387418">+</span>&nbsp;<span class="num" id="5387420">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387428">v</span>&nbsp;<span class="op" id="5387430">:=</span>&nbsp;<span class="ident" id="5387433">scan</span><span class="op" id="5387437">.</span><span class="ident" id="5387438">step</span><span class="op" id="5387442">(</span><span class="op" id="5387443">&amp;</span><span class="ident" id="5387444">scan</span><span class="op" id="5387448">,</span>&nbsp;<span class="builtintype" id="5387450">int</span><span class="op" id="5387453">(</span><span class="ident" id="5387454">c</span><span class="op" id="5387455">)</span><span class="op" id="5387456">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387460">if</span>&nbsp;<span class="ident" id="5387463">v</span>&nbsp;<span class="op" id="5387465">&gt;=</span>&nbsp;<span class="ident" id="5387468">scanSkipSpace</span>&nbsp;<span class="op" id="5387482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387487">if</span>&nbsp;<span class="ident" id="5387490">v</span>&nbsp;<span class="op" id="5387492">==</span>&nbsp;<span class="ident" id="5387495">scanError</span>&nbsp;<span class="op" id="5387505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387511">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387525">if</span>&nbsp;<span class="ident" id="5387528">start</span>&nbsp;<span class="op" id="5387534">&lt;</span>&nbsp;<span class="ident" id="5387536">i</span>&nbsp;<span class="op" id="5387538">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387544">dst</span><span class="op" id="5387547">.</span><span class="ident" id="5387548">Write</span><span class="op" id="5387553">(</span><span class="ident" id="5387554">src</span><span class="op" id="5387557">[</span><span class="ident" id="5387558">start</span><span class="op" id="5387563">:</span><span class="ident" id="5387564">i</span><span class="op" id="5387565">]</span><span class="op" id="5387566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387576">start</span>&nbsp;<span class="op" id="5387582">=</span>&nbsp;<span class="ident" id="5387584">i</span>&nbsp;<span class="op" id="5387586">+</span>&nbsp;<span class="num" id="5387588">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387595">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387598">if</span>&nbsp;<span class="ident" id="5387601">scan</span><span class="op" id="5387605">.</span><span class="ident" id="5387606">eof</span><span class="op" id="5387609">(</span><span class="op" id="5387610">)</span>&nbsp;<span class="op" id="5387612">==</span>&nbsp;<span class="ident" id="5387615">scanError</span>&nbsp;<span class="op" id="5387625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387629">dst</span><span class="op" id="5387632">.</span><span class="ident" id="5387633">Truncate</span><span class="op" id="5387641">(</span><span class="ident" id="5387642">origLen</span><span class="op" id="5387649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387653">return</span>&nbsp;<span class="ident" id="5387660">scan</span><span class="op" id="5387664">.</span><span class="ident" id="5387665">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387673">if</span>&nbsp;<span class="ident" id="5387676">start</span>&nbsp;<span class="op" id="5387682">&lt;</span>&nbsp;<span class="builtinfunc" id="5387684">len</span><span class="op" id="5387687">(</span><span class="ident" id="5387688">src</span><span class="op" id="5387691">)</span>&nbsp;<span class="op" id="5387693">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387697">dst</span><span class="op" id="5387700">.</span><span class="ident" id="5387701">Write</span><span class="op" id="5387706">(</span><span class="ident" id="5387707">src</span><span class="op" id="5387710">[</span><span class="ident" id="5387711">start</span><span class="op" id="5387716">:</span><span class="op" id="5387717">]</span><span class="op" id="5387718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387724">return</span>&nbsp;<span class="builtintype" id="5387731">nil</span><br>
<span class="lineno"></span><span class="op" id="5387735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5387738">func</span>&nbsp;<span class="ident" id="5387743">newline</span><span class="op" id="5387750">(</span><span class="ident" id="5387751">dst</span>&nbsp;<span class="op" id="5387755">*</span><span class="ident" id="5387756">bytes</span><span class="op" id="5387761">.</span><span class="ident" id="5387762">Buffer</span><span class="op" id="5387768">,</span>&nbsp;<span class="ident" id="5387770">prefix</span><span class="op" id="5387776">,</span>&nbsp;<span class="ident" id="5387778">indent</span>&nbsp;<span class="builtintype" id="5387785">string</span><span class="op" id="5387791">,</span>&nbsp;<span class="ident" id="5387793">depth</span>&nbsp;<span class="builtintype" id="5387799">int</span><span class="op" id="5387802">)</span>&nbsp;<span class="op" id="5387804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387807">dst</span><span class="op" id="5387810">.</span><span class="ident" id="5387811">WriteByte</span><span class="op" id="5387820">(</span><span class="string" id="5387821">&#39;\n&#39;</span><span class="op" id="5387825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387828">dst</span><span class="op" id="5387831">.</span><span class="ident" id="5387832">WriteString</span><span class="op" id="5387843">(</span><span class="ident" id="5387844">prefix</span><span class="op" id="5387850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387853">for</span>&nbsp;<span class="ident" id="5387857">i</span>&nbsp;<span class="op" id="5387859">:=</span>&nbsp;<span class="num" id="5387862">0</span><span class="op" id="5387863">;</span>&nbsp;<span class="ident" id="5387865">i</span>&nbsp;<span class="op" id="5387867">&lt;</span>&nbsp;<span class="ident" id="5387869">depth</span><span class="op" id="5387874">;</span>&nbsp;<span class="ident" id="5387876">i</span><span class="op" id="5387877">++</span>&nbsp;<span class="op" id="5387880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387884">dst</span><span class="op" id="5387887">.</span><span class="ident" id="5387888">WriteString</span><span class="op" id="5387899">(</span><span class="ident" id="5387900">indent</span><span class="op" id="5387906">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387909">}</span><br>
<span class="lineno"></span><span class="op" id="5387911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5387914">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="5387981">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="5388040">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="5388103">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="5388161">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="5388224">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5388284">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="5388337">func</span>&nbsp;<span class="ident" id="5388342">Indent</span><span class="op" id="5388348">(</span><span class="ident" id="5388349">dst</span>&nbsp;<span class="op" id="5388353">*</span><span class="ident" id="5388354">bytes</span><span class="op" id="5388359">.</span><span class="ident" id="5388360">Buffer</span><span class="op" id="5388366">,</span>&nbsp;<span class="ident" id="5388368">src</span>&nbsp;<span class="op" id="5388372">[</span><span class="op" id="5388373">]</span><span class="builtintype" id="5388374">byte</span><span class="op" id="5388378">,</span>&nbsp;<span class="ident" id="5388380">prefix</span><span class="op" id="5388386">,</span>&nbsp;<span class="ident" id="5388388">indent</span>&nbsp;<span class="builtintype" id="5388395">string</span><span class="op" id="5388401">)</span>&nbsp;<span class="builtintype" id="5388403">error</span>&nbsp;<span class="op" id="5388409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388412">origLen</span>&nbsp;<span class="op" id="5388420">:=</span>&nbsp;<span class="ident" id="5388423">dst</span><span class="op" id="5388426">.</span><span class="ident" id="5388427">Len</span><span class="op" id="5388430">(</span><span class="op" id="5388431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388434">var</span>&nbsp;<span class="ident" id="5388438">scan</span>&nbsp;<span class="ident" id="5388443">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388452">scan</span><span class="op" id="5388456">.</span><span class="ident" id="5388457">reset</span><span class="op" id="5388462">(</span><span class="op" id="5388463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388466">needIndent</span>&nbsp;<span class="op" id="5388477">:=</span>&nbsp;<span class="builtintype" id="5388480">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388487">depth</span>&nbsp;<span class="op" id="5388493">:=</span>&nbsp;<span class="num" id="5388496">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388499">for</span>&nbsp;<span class="ident" id="5388503">_</span><span class="op" id="5388504">,</span>&nbsp;<span class="ident" id="5388506">c</span>&nbsp;<span class="op" id="5388508">:=</span>&nbsp;<span class="keyword" id="5388511">range</span>&nbsp;<span class="ident" id="5388517">src</span>&nbsp;<span class="op" id="5388521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388525">scan</span><span class="op" id="5388529">.</span><span class="ident" id="5388530">bytes</span><span class="op" id="5388535">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388540">v</span>&nbsp;<span class="op" id="5388542">:=</span>&nbsp;<span class="ident" id="5388545">scan</span><span class="op" id="5388549">.</span><span class="ident" id="5388550">step</span><span class="op" id="5388554">(</span><span class="op" id="5388555">&amp;</span><span class="ident" id="5388556">scan</span><span class="op" id="5388560">,</span>&nbsp;<span class="builtintype" id="5388562">int</span><span class="op" id="5388565">(</span><span class="ident" id="5388566">c</span><span class="op" id="5388567">)</span><span class="op" id="5388568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388572">if</span>&nbsp;<span class="ident" id="5388575">v</span>&nbsp;<span class="op" id="5388577">==</span>&nbsp;<span class="ident" id="5388580">scanSkipSpace</span>&nbsp;<span class="op" id="5388594">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388599">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388614">if</span>&nbsp;<span class="ident" id="5388617">v</span>&nbsp;<span class="op" id="5388619">==</span>&nbsp;<span class="ident" id="5388622">scanError</span>&nbsp;<span class="op" id="5388632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388637">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388645">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388649">if</span>&nbsp;<span class="ident" id="5388652">needIndent</span>&nbsp;<span class="op" id="5388663">&amp;&amp;</span>&nbsp;<span class="ident" id="5388666">v</span>&nbsp;<span class="op" id="5388668">!=</span>&nbsp;<span class="ident" id="5388671">scanEndObject</span>&nbsp;<span class="op" id="5388685">&amp;&amp;</span>&nbsp;<span class="ident" id="5388688">v</span>&nbsp;<span class="op" id="5388690">!=</span>&nbsp;<span class="ident" id="5388693">scanEndArray</span>&nbsp;<span class="op" id="5388706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388711">needIndent</span>&nbsp;<span class="op" id="5388722">=</span>&nbsp;<span class="builtintype" id="5388724">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388733">depth</span><span class="op" id="5388738">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388744">newline</span><span class="op" id="5388751">(</span><span class="ident" id="5388752">dst</span><span class="op" id="5388755">,</span>&nbsp;<span class="ident" id="5388757">prefix</span><span class="op" id="5388763">,</span>&nbsp;<span class="ident" id="5388765">indent</span><span class="op" id="5388771">,</span>&nbsp;<span class="ident" id="5388773">depth</span><span class="op" id="5388778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388782">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5388787">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5388830">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388887">if</span>&nbsp;<span class="ident" id="5388890">v</span>&nbsp;<span class="op" id="5388892">==</span>&nbsp;<span class="ident" id="5388895">scanContinue</span>&nbsp;<span class="op" id="5388908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388913">dst</span><span class="op" id="5388916">.</span><span class="ident" id="5388917">WriteByte</span><span class="op" id="5388926">(</span><span class="ident" id="5388927">c</span><span class="op" id="5388928">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388933">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5388949">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388991">switch</span>&nbsp;<span class="ident" id="5388998">c</span>&nbsp;<span class="op" id="5389000">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389004">case</span>&nbsp;<span class="string" id="5389009">&#39;{&#39;</span><span class="op" id="5389012">,</span>&nbsp;<span class="string" id="5389014">&#39;[&#39;</span><span class="op" id="5389017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5389022">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389100">needIndent</span>&nbsp;<span class="op" id="5389111">=</span>&nbsp;<span class="builtintype" id="5389113">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389121">dst</span><span class="op" id="5389124">.</span><span class="ident" id="5389125">WriteByte</span><span class="op" id="5389134">(</span><span class="ident" id="5389135">c</span><span class="op" id="5389136">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389141">case</span>&nbsp;<span class="string" id="5389146">&#39;,&#39;</span><span class="op" id="5389149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389154">dst</span><span class="op" id="5389157">.</span><span class="ident" id="5389158">WriteByte</span><span class="op" id="5389167">(</span><span class="ident" id="5389168">c</span><span class="op" id="5389169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389174">newline</span><span class="op" id="5389181">(</span><span class="ident" id="5389182">dst</span><span class="op" id="5389185">,</span>&nbsp;<span class="ident" id="5389187">prefix</span><span class="op" id="5389193">,</span>&nbsp;<span class="ident" id="5389195">indent</span><span class="op" id="5389201">,</span>&nbsp;<span class="ident" id="5389203">depth</span><span class="op" id="5389208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389213">case</span>&nbsp;<span class="string" id="5389218">&#39;:&#39;</span><span class="op" id="5389221">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389226">dst</span><span class="op" id="5389229">.</span><span class="ident" id="5389230">WriteByte</span><span class="op" id="5389239">(</span><span class="ident" id="5389240">c</span><span class="op" id="5389241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389246">dst</span><span class="op" id="5389249">.</span><span class="ident" id="5389250">WriteByte</span><span class="op" id="5389259">(</span><span class="string" id="5389260">&#39;&nbsp;&#39;</span><span class="op" id="5389263">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389268">case</span>&nbsp;<span class="string" id="5389273">&#39;}&#39;</span><span class="op" id="5389276">,</span>&nbsp;<span class="string" id="5389278">&#39;]&#39;</span><span class="op" id="5389281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389286">if</span>&nbsp;<span class="ident" id="5389289">needIndent</span>&nbsp;<span class="op" id="5389300">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5389306">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389351">needIndent</span>&nbsp;<span class="op" id="5389362">=</span>&nbsp;<span class="builtintype" id="5389364">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389373">}</span>&nbsp;<span class="keyword" id="5389375">else</span>&nbsp;<span class="op" id="5389380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389386">depth</span><span class="op" id="5389391">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389398">newline</span><span class="op" id="5389405">(</span><span class="ident" id="5389406">dst</span><span class="op" id="5389409">,</span>&nbsp;<span class="ident" id="5389411">prefix</span><span class="op" id="5389417">,</span>&nbsp;<span class="ident" id="5389419">indent</span><span class="op" id="5389425">,</span>&nbsp;<span class="ident" id="5389427">depth</span><span class="op" id="5389432">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389442">dst</span><span class="op" id="5389445">.</span><span class="ident" id="5389446">WriteByte</span><span class="op" id="5389455">(</span><span class="ident" id="5389456">c</span><span class="op" id="5389457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389462">default</span><span class="op" id="5389469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389474">dst</span><span class="op" id="5389477">.</span><span class="ident" id="5389478">WriteByte</span><span class="op" id="5389487">(</span><span class="ident" id="5389488">c</span><span class="op" id="5389489">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389499">if</span>&nbsp;<span class="ident" id="5389502">scan</span><span class="op" id="5389506">.</span><span class="ident" id="5389507">eof</span><span class="op" id="5389510">(</span><span class="op" id="5389511">)</span>&nbsp;<span class="op" id="5389513">==</span>&nbsp;<span class="ident" id="5389516">scanError</span>&nbsp;<span class="op" id="5389526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389530">dst</span><span class="op" id="5389533">.</span><span class="ident" id="5389534">Truncate</span><span class="op" id="5389542">(</span><span class="ident" id="5389543">origLen</span><span class="op" id="5389550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389554">return</span>&nbsp;<span class="ident" id="5389561">scan</span><span class="op" id="5389565">.</span><span class="ident" id="5389566">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389574">return</span>&nbsp;<span class="builtintype" id="5389581">nil</span><br>
<span class="lineno"></span><span class="op" id="5389585">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
