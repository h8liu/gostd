<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6303693">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6303748">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6303802">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6303853">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6303886">package</span>&nbsp;<span class="ident" id="6303894">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6303902">import</span>&nbsp;<span class="op" id="6303909">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6303912">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6303922">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6303928">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6303931">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6304000">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6304046">func</span>&nbsp;<span class="ident" id="6304051">unixSyslog</span><span class="op" id="6304061">(</span><span class="op" id="6304062">)</span>&nbsp;<span class="op" id="6304064">(</span><span class="ident" id="6304065">conn</span>&nbsp;<span class="ident" id="6304070">serverConn</span><span class="op" id="6304080">,</span>&nbsp;<span class="ident" id="6304082">err</span>&nbsp;<span class="builtintype" id="6304086">error</span><span class="op" id="6304091">)</span>&nbsp;<span class="op" id="6304093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6304096">logTypes</span>&nbsp;<span class="op" id="6304105">:=</span>&nbsp;<span class="op" id="6304108">[</span><span class="op" id="6304109">]</span><span class="builtintype" id="6304110">string</span><span class="op" id="6304116">{</span><span class="string" id="6304117">&#34;unixgram&#34;</span><span class="op" id="6304127">,</span>&nbsp;<span class="string" id="6304129">&#34;unix&#34;</span><span class="op" id="6304135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6304138">logPaths</span>&nbsp;<span class="op" id="6304147">:=</span>&nbsp;<span class="op" id="6304150">[</span><span class="op" id="6304151">]</span><span class="builtintype" id="6304152">string</span><span class="op" id="6304158">{</span><span class="string" id="6304159">&#34;/dev/log&#34;</span><span class="op" id="6304169">,</span>&nbsp;<span class="string" id="6304171">&#34;/var/run/syslog&#34;</span><span class="op" id="6304188">,</span>&nbsp;<span class="string" id="6304190">&#34;/var/run/log&#34;</span><span class="op" id="6304204">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304207">for</span>&nbsp;<span class="ident" id="6304211">_</span><span class="op" id="6304212">,</span>&nbsp;<span class="ident" id="6304214">network</span>&nbsp;<span class="op" id="6304222">:=</span>&nbsp;<span class="keyword" id="6304225">range</span>&nbsp;<span class="ident" id="6304231">logTypes</span>&nbsp;<span class="op" id="6304240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304244">for</span>&nbsp;<span class="ident" id="6304248">_</span><span class="op" id="6304249">,</span>&nbsp;<span class="ident" id="6304251">path</span>&nbsp;<span class="op" id="6304256">:=</span>&nbsp;<span class="keyword" id="6304259">range</span>&nbsp;<span class="ident" id="6304265">logPaths</span>&nbsp;<span class="op" id="6304274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6304279">conn</span><span class="op" id="6304283">,</span>&nbsp;<span class="ident" id="6304285">err</span>&nbsp;<span class="op" id="6304289">:=</span>&nbsp;<span class="ident" id="6304292">net</span><span class="op" id="6304295">.</span><span class="ident" id="6304296">Dial</span><span class="op" id="6304300">(</span><span class="ident" id="6304301">network</span><span class="op" id="6304308">,</span>&nbsp;<span class="ident" id="6304310">path</span><span class="op" id="6304314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304319">if</span>&nbsp;<span class="ident" id="6304322">err</span>&nbsp;<span class="op" id="6304326">!=</span>&nbsp;<span class="ident" id="6304329">nil</span>&nbsp;<span class="op" id="6304333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304339">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6304351">}</span>&nbsp;<span class="keyword" id="6304353">else</span>&nbsp;<span class="op" id="6304358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304364">return</span>&nbsp;<span class="op" id="6304371">&amp;</span><span class="ident" id="6304372">netConn</span><span class="op" id="6304379">{</span><span class="ident" id="6304380">conn</span><span class="op" id="6304384">:</span>&nbsp;<span class="ident" id="6304386">conn</span><span class="op" id="6304390">,</span>&nbsp;<span class="ident" id="6304392">local</span><span class="op" id="6304397">:</span>&nbsp;<span class="builtintype" id="6304399">true</span><span class="op" id="6304403">}</span><span class="op" id="6304404">,</span>&nbsp;<span class="ident" id="6304406">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6304413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6304417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6304420">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304423">return</span>&nbsp;<span class="ident" id="6304430">nil</span><span class="op" id="6304433">,</span>&nbsp;<span class="ident" id="6304435">errors</span><span class="op" id="6304441">.</span><span class="ident" id="6304442">New</span><span class="op" id="6304445">(</span><span class="string" id="6304446">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6304474">)</span><br>
<span class="lineno"></span><span class="op" id="6304476">}</span>
</div>
</body>
</html>
