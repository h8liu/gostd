<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5407791">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5407846">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5407900">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5407951">package</span>&nbsp;<span class="ident" id="5407959">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5407965">import</span>&nbsp;<span class="op" id="5407972">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5407975">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5407985">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5407988">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5408061">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="5408129">type</span>&nbsp;<span class="ident" id="5408134">tagOptions</span>&nbsp;<span class="builtintype" id="5408145">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5408153">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5408216">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="5408244">func</span>&nbsp;<span class="ident" id="5408249">parseTag</span><span class="op" id="5408257">(</span><span class="ident" id="5408258">tag</span>&nbsp;<span class="builtintype" id="5408262">string</span><span class="op" id="5408268">)</span>&nbsp;<span class="op" id="5408270">(</span><span class="builtintype" id="5408271">string</span><span class="op" id="5408277">,</span>&nbsp;<span class="ident" id="5408279">tagOptions</span><span class="op" id="5408289">)</span>&nbsp;<span class="op" id="5408291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408294">if</span>&nbsp;<span class="ident" id="5408297">idx</span>&nbsp;<span class="op" id="5408301">:=</span>&nbsp;<span class="ident" id="5408304">strings</span><span class="op" id="5408311">.</span><span class="ident" id="5408312">Index</span><span class="op" id="5408317">(</span><span class="ident" id="5408318">tag</span><span class="op" id="5408321">,</span>&nbsp;<span class="string" id="5408323">&#34;,&#34;</span><span class="op" id="5408326">)</span><span class="op" id="5408327">;</span>&nbsp;<span class="ident" id="5408329">idx</span>&nbsp;<span class="op" id="5408333">!=</span>&nbsp;<span class="op" id="5408336">-</span><span class="num" id="5408337">1</span>&nbsp;<span class="op" id="5408339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408343">return</span>&nbsp;<span class="ident" id="5408350">tag</span><span class="op" id="5408353">[</span><span class="op" id="5408354">:</span><span class="ident" id="5408355">idx</span><span class="op" id="5408358">]</span><span class="op" id="5408359">,</span>&nbsp;<span class="ident" id="5408361">tagOptions</span><span class="op" id="5408371">(</span><span class="ident" id="5408372">tag</span><span class="op" id="5408375">[</span><span class="ident" id="5408376">idx</span><span class="op" id="5408379">+</span><span class="num" id="5408380">1</span><span class="op" id="5408381">:</span><span class="op" id="5408382">]</span><span class="op" id="5408383">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408389">return</span>&nbsp;<span class="ident" id="5408396">tag</span><span class="op" id="5408399">,</span>&nbsp;<span class="ident" id="5408401">tagOptions</span><span class="op" id="5408411">(</span><span class="string" id="5408412">&#34;&#34;</span><span class="op" id="5408414">)</span><br>
<span class="lineno"></span><span class="op" id="5408416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5408419">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="5408481">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5408550">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="5408580">func</span>&nbsp;<span class="op" id="5408585">(</span><span class="ident" id="5408586">o</span>&nbsp;<span class="ident" id="5408588">tagOptions</span><span class="op" id="5408598">)</span>&nbsp;<span class="ident" id="5408600">Contains</span><span class="op" id="5408608">(</span><span class="ident" id="5408609">optionName</span>&nbsp;<span class="builtintype" id="5408620">string</span><span class="op" id="5408626">)</span>&nbsp;<span class="builtintype" id="5408628">bool</span>&nbsp;<span class="op" id="5408633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408636">if</span>&nbsp;<span class="builtinfunc" id="5408639">len</span><span class="op" id="5408642">(</span><span class="ident" id="5408643">o</span><span class="op" id="5408644">)</span>&nbsp;<span class="op" id="5408646">==</span>&nbsp;<span class="num" id="5408649">0</span>&nbsp;<span class="op" id="5408651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408655">return</span>&nbsp;<span class="builtintype" id="5408662">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408672">s</span>&nbsp;<span class="op" id="5408674">:=</span>&nbsp;<span class="builtintype" id="5408677">string</span><span class="op" id="5408683">(</span><span class="ident" id="5408684">o</span><span class="op" id="5408685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408688">for</span>&nbsp;<span class="ident" id="5408692">s</span>&nbsp;<span class="op" id="5408694">!=</span>&nbsp;<span class="string" id="5408697">&#34;&#34;</span>&nbsp;<span class="op" id="5408700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408704">var</span>&nbsp;<span class="ident" id="5408708">next</span>&nbsp;<span class="builtintype" id="5408713">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408722">i</span>&nbsp;<span class="op" id="5408724">:=</span>&nbsp;<span class="ident" id="5408727">strings</span><span class="op" id="5408734">.</span><span class="ident" id="5408735">Index</span><span class="op" id="5408740">(</span><span class="ident" id="5408741">s</span><span class="op" id="5408742">,</span>&nbsp;<span class="string" id="5408744">&#34;,&#34;</span><span class="op" id="5408747">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408751">if</span>&nbsp;<span class="ident" id="5408754">i</span>&nbsp;<span class="op" id="5408756">&gt;=</span>&nbsp;<span class="num" id="5408759">0</span>&nbsp;<span class="op" id="5408761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408766">s</span><span class="op" id="5408767">,</span>&nbsp;<span class="ident" id="5408769">next</span>&nbsp;<span class="op" id="5408774">=</span>&nbsp;<span class="ident" id="5408776">s</span><span class="op" id="5408777">[</span><span class="op" id="5408778">:</span><span class="ident" id="5408779">i</span><span class="op" id="5408780">]</span><span class="op" id="5408781">,</span>&nbsp;<span class="ident" id="5408783">s</span><span class="op" id="5408784">[</span><span class="ident" id="5408785">i</span><span class="op" id="5408786">+</span><span class="num" id="5408787">1</span><span class="op" id="5408788">:</span><span class="op" id="5408789">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408797">if</span>&nbsp;<span class="ident" id="5408800">s</span>&nbsp;<span class="op" id="5408802">==</span>&nbsp;<span class="ident" id="5408805">optionName</span>&nbsp;<span class="op" id="5408816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408821">return</span>&nbsp;<span class="builtintype" id="5408828">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408839">s</span>&nbsp;<span class="op" id="5408841">=</span>&nbsp;<span class="ident" id="5408843">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408852">return</span>&nbsp;<span class="builtintype" id="5408859">false</span><br>
<span class="lineno"></span><span class="op" id="5408865">}</span>
</div>
</body>
</html>
