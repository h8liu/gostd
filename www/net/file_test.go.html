<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6809411">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6809466">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6809520">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6809571">package</span>&nbsp;<span class="ident" id="6809579">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809584">import</span>&nbsp;<span class="op" id="6809591">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809594">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809600">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809611">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809622">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6809632">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809635">type</span>&nbsp;<span class="ident" id="6809640">listenerFile</span>&nbsp;<span class="keyword" id="6809653">interface</span>&nbsp;<span class="op" id="6809663">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809666"><a href="/net/net.go.html#2658762">Listener</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809676">File</span><span class="op" id="6809680">(</span><span class="op" id="6809681">)</span>&nbsp;<span class="op" id="6809683">(</span><span class="ident" id="6809684">f</span>&nbsp;<span class="op" id="6809686">*</span><span class="ident" id="6809687"><a href="/net/file_test.go.html#6809594">os</a></span><span class="op" id="6809689">.</span><span class="ident" id="6809690">File</span><span class="op" id="6809694">,</span>&nbsp;<span class="ident" id="6809696">err</span>&nbsp;<span class="builtintype" id="6809700">error</span><span class="op" id="6809705">)</span><br>
<span class="lineno"></span><span class="op" id="6809707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809710">type</span>&nbsp;<span class="ident" id="6809715">packetConnFile</span>&nbsp;<span class="keyword" id="6809730">interface</span>&nbsp;<span class="op" id="6809740">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809743"><a href="/net/net.go.html#2656892">PacketConn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809755">File</span><span class="op" id="6809759">(</span><span class="op" id="6809760">)</span>&nbsp;<span class="op" id="6809762">(</span><span class="ident" id="6809763">f</span>&nbsp;<span class="op" id="6809765">*</span><span class="ident" id="6809766"><a href="/net/file_test.go.html#6809594">os</a></span><span class="op" id="6809768">.</span><span class="ident" id="6809769">File</span><span class="op" id="6809773">,</span>&nbsp;<span class="ident" id="6809775">err</span>&nbsp;<span class="builtintype" id="6809779">error</span><span class="op" id="6809784">)</span><br>
<span class="lineno"></span><span class="op" id="6809786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809789">type</span>&nbsp;<span class="ident" id="6809794">connFile</span>&nbsp;<span class="keyword" id="6809803">interface</span>&nbsp;<span class="op" id="6809813">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809816"><a href="/net/net.go.html#2652476">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809822">File</span><span class="op" id="6809826">(</span><span class="op" id="6809827">)</span>&nbsp;<span class="op" id="6809829">(</span><span class="ident" id="6809830">f</span>&nbsp;<span class="op" id="6809832">*</span><span class="ident" id="6809833"><a href="/net/file_test.go.html#6809594">os</a></span><span class="op" id="6809835">.</span><span class="ident" id="6809836">File</span><span class="op" id="6809840">,</span>&nbsp;<span class="ident" id="6809842">err</span>&nbsp;<span class="builtintype" id="6809846">error</span><span class="op" id="6809851">)</span><br>
<span class="lineno"></span><span class="op" id="6809853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809856">func</span>&nbsp;<span class="ident" id="6809861">testFileListener</span><span class="op" id="6809877">(</span><span class="ident" id="6809878">t</span>&nbsp;<span class="op" id="6809880">*</span><span class="ident" id="6809881"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6809888">.</span><span class="ident" id="6809889">T</span><span class="op" id="6809890">,</span>&nbsp;<span class="ident" id="6809892">net</span><span class="op" id="6809895">,</span>&nbsp;<span class="ident" id="6809897">laddr</span>&nbsp;<span class="builtintype" id="6809903">string</span><span class="op" id="6809909">)</span>&nbsp;<span class="op" id="6809911">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6809914">switch</span>&nbsp;<span class="ident" id="6809921"><a href="/net/file_test.go.html#6809892">net</a></span>&nbsp;<span class="op" id="6809925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6809928">case</span>&nbsp;<span class="string" id="6809933">&#34;tcp&#34;</span><span class="op" id="6809938">,</span>&nbsp;<span class="string" id="6809940">&#34;tcp4&#34;</span><span class="op" id="6809946">,</span>&nbsp;<span class="string" id="6809948">&#34;tcp6&#34;</span><span class="op" id="6809954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809958"><a href="/net/file_test.go.html#6809897">laddr</a></span>&nbsp;<span class="op" id="6809964">+=</span>&nbsp;<span class="string" id="6809967">&#34;:0&#34;</span>&nbsp;<span class="comment" id="6809972">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809998">l</span><span class="op" id="6809999">,</span>&nbsp;<span class="ident" id="6810001">err</span>&nbsp;<span class="op" id="6810005">:=</span>&nbsp;<span class="ident" id="6810008"><a href="/net/dial.go.html#2525176">Listen</a></span><span class="op" id="6810014">(</span><span class="ident" id="6810015"><a href="/net/file_test.go.html#6809892">net</a></span><span class="op" id="6810018">,</span>&nbsp;<span class="ident" id="6810020"><a href="/net/file_test.go.html#6809897">laddr</a></span><span class="op" id="6810025">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810028">if</span>&nbsp;<span class="ident" id="6810031"><a href="/net/file_test.go.html#6810001">err</a></span>&nbsp;<span class="op" id="6810035">!=</span>&nbsp;<span class="ident" id="6810038">nil</span>&nbsp;<span class="op" id="6810042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810046"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810047">.</span><span class="ident" id="6810048">Fatalf</span><span class="op" id="6810054">(</span><span class="string" id="6810055">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6810074">,</span>&nbsp;<span class="ident" id="6810076"><a href="/net/file_test.go.html#6810001">err</a></span><span class="op" id="6810079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810085">defer</span>&nbsp;<span class="ident" id="6810091"><a href="/net/file_test.go.html#6809998">l</a></span><span class="op" id="6810092">.</span><span class="ident" id="6810093">Close</span><span class="op" id="6810098">(</span><span class="op" id="6810099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810102">lf</span>&nbsp;<span class="op" id="6810105">:=</span>&nbsp;<span class="ident" id="6810108"><a href="/net/file_test.go.html#6809998">l</a></span><span class="op" id="6810109">.</span><span class="op" id="6810110">(</span><span class="ident" id="6810111"><a href="/net/file_test.go.html#6809640">listenerFile</a></span><span class="op" id="6810123">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810126">f</span><span class="op" id="6810127">,</span>&nbsp;<span class="ident" id="6810129"><a href="/net/file_test.go.html#6810001">err</a></span>&nbsp;<span class="op" id="6810133">:=</span>&nbsp;<span class="ident" id="6810136"><a href="/net/file_test.go.html#6810102">lf</a></span><span class="op" id="6810138">.</span><span class="ident" id="6810139">File</span><span class="op" id="6810143">(</span><span class="op" id="6810144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810147">if</span>&nbsp;<span class="ident" id="6810150"><a href="/net/file_test.go.html#6810001">err</a></span>&nbsp;<span class="op" id="6810154">!=</span>&nbsp;<span class="ident" id="6810157">nil</span>&nbsp;<span class="op" id="6810161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810165"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810166">.</span><span class="ident" id="6810167">Fatalf</span><span class="op" id="6810173">(</span><span class="string" id="6810174">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6810191">,</span>&nbsp;<span class="ident" id="6810193"><a href="/net/file_test.go.html#6810001">err</a></span><span class="op" id="6810196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810202">c</span><span class="op" id="6810203">,</span>&nbsp;<span class="ident" id="6810205"><a href="/net/file_test.go.html#6810001">err</a></span>&nbsp;<span class="op" id="6810209">:=</span>&nbsp;<span class="ident" id="6810212"><a href="/net/file_unix.go.html#2590068">FileListener</a></span><span class="op" id="6810224">(</span><span class="ident" id="6810225"><a href="/net/file_test.go.html#6810126">f</a></span><span class="op" id="6810226">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810229">if</span>&nbsp;<span class="ident" id="6810232"><a href="/net/file_test.go.html#6810001">err</a></span>&nbsp;<span class="op" id="6810236">!=</span>&nbsp;<span class="ident" id="6810239">nil</span>&nbsp;<span class="op" id="6810243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810247"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810248">.</span><span class="ident" id="6810249">Fatalf</span><span class="op" id="6810255">(</span><span class="string" id="6810256">&#34;FileListener&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6810281">,</span>&nbsp;<span class="ident" id="6810283"><a href="/net/file_test.go.html#6810001">err</a></span><span class="op" id="6810286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810292">if</span>&nbsp;<span class="op" id="6810295">!</span><span class="ident" id="6810296"><a href="/net/file_test.go.html#6809600">reflect</a></span><span class="op" id="6810303">.</span><span class="ident" id="6810304">DeepEqual</span><span class="op" id="6810313">(</span><span class="ident" id="6810314"><a href="/net/file_test.go.html#6809998">l</a></span><span class="op" id="6810315">.</span><span class="ident" id="6810316">Addr</span><span class="op" id="6810320">(</span><span class="op" id="6810321">)</span><span class="op" id="6810322">,</span>&nbsp;<span class="ident" id="6810324"><a href="/net/file_test.go.html#6810202">c</a></span><span class="op" id="6810325">.</span><span class="ident" id="6810326">Addr</span><span class="op" id="6810330">(</span><span class="op" id="6810331">)</span><span class="op" id="6810332">)</span>&nbsp;<span class="op" id="6810334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810338"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810339">.</span><span class="ident" id="6810340">Fatalf</span><span class="op" id="6810346">(</span><span class="string" id="6810347">&#34;Addrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="6810376">,</span>&nbsp;<span class="ident" id="6810378"><a href="/net/file_test.go.html#6809998">l</a></span><span class="op" id="6810379">.</span><span class="ident" id="6810380">Addr</span><span class="op" id="6810384">(</span><span class="op" id="6810385">)</span><span class="op" id="6810386">,</span>&nbsp;<span class="ident" id="6810388"><a href="/net/file_test.go.html#6810202">c</a></span><span class="op" id="6810389">.</span><span class="ident" id="6810390">Addr</span><span class="op" id="6810394">(</span><span class="op" id="6810395">)</span><span class="op" id="6810396">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810402">if</span>&nbsp;<span class="ident" id="6810405">err</span>&nbsp;<span class="op" id="6810409">:=</span>&nbsp;<span class="ident" id="6810412"><a href="/net/file_test.go.html#6810202">c</a></span><span class="op" id="6810413">.</span><span class="ident" id="6810414">Close</span><span class="op" id="6810419">(</span><span class="op" id="6810420">)</span><span class="op" id="6810421">;</span>&nbsp;<span class="ident" id="6810423"><a href="/net/file_test.go.html#6810405">err</a></span>&nbsp;<span class="op" id="6810427">!=</span>&nbsp;<span class="ident" id="6810430">nil</span>&nbsp;<span class="op" id="6810434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810438"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810439">.</span><span class="ident" id="6810440">Fatalf</span><span class="op" id="6810446">(</span><span class="string" id="6810447">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6810465">,</span>&nbsp;<span class="ident" id="6810467"><a href="/net/file_test.go.html#6810405">err</a></span><span class="op" id="6810470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810476">if</span>&nbsp;<span class="ident" id="6810479">err</span>&nbsp;<span class="op" id="6810483">:=</span>&nbsp;<span class="ident" id="6810486"><a href="/net/file_test.go.html#6810126">f</a></span><span class="op" id="6810487">.</span><span class="ident" id="6810488">Close</span><span class="op" id="6810493">(</span><span class="op" id="6810494">)</span><span class="op" id="6810495">;</span>&nbsp;<span class="ident" id="6810497"><a href="/net/file_test.go.html#6810479">err</a></span>&nbsp;<span class="op" id="6810501">!=</span>&nbsp;<span class="ident" id="6810504">nil</span>&nbsp;<span class="op" id="6810508">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810512"><a href="/net/file_test.go.html#6809878">t</a></span><span class="op" id="6810513">.</span><span class="ident" id="6810514">Fatalf</span><span class="op" id="6810520">(</span><span class="string" id="6810521">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6810539">,</span>&nbsp;<span class="ident" id="6810541"><a href="/net/file_test.go.html#6810479">err</a></span><span class="op" id="6810544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810547">}</span><br>
<span class="lineno"></span><span class="op" id="6810549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6810552">var</span>&nbsp;<span class="ident" id="6810556">fileListenerTests</span>&nbsp;<span class="op" id="6810574">=</span>&nbsp;<span class="op" id="6810576">[</span><span class="op" id="6810577">]</span><span class="keyword" id="6810578">struct</span>&nbsp;<span class="op" id="6810585">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810588">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6810594">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810602">laddr</span>&nbsp;<span class="builtintype" id="6810608">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810616">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="6810622">bool</span>&nbsp;<span class="comment" id="6810627">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810668">linux</span>&nbsp;<span class="builtintype" id="6810674">bool</span>&nbsp;<span class="comment" id="6810679">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6810733">}</span><span class="op" id="6810734">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810737">{</span><span class="ident" id="6810738">net</span><span class="op" id="6810741">:</span>&nbsp;<span class="string" id="6810743">&#34;tcp&#34;</span><span class="op" id="6810748">,</span>&nbsp;<span class="ident" id="6810750">laddr</span><span class="op" id="6810755">:</span>&nbsp;<span class="string" id="6810757">&#34;&#34;</span><span class="op" id="6810759">}</span><span class="op" id="6810760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810763">{</span><span class="ident" id="6810764">net</span><span class="op" id="6810767">:</span>&nbsp;<span class="string" id="6810769">&#34;tcp&#34;</span><span class="op" id="6810774">,</span>&nbsp;<span class="ident" id="6810776">laddr</span><span class="op" id="6810781">:</span>&nbsp;<span class="string" id="6810783">&#34;0.0.0.0&#34;</span><span class="op" id="6810792">}</span><span class="op" id="6810793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810796">{</span><span class="ident" id="6810797">net</span><span class="op" id="6810800">:</span>&nbsp;<span class="string" id="6810802">&#34;tcp&#34;</span><span class="op" id="6810807">,</span>&nbsp;<span class="ident" id="6810809">laddr</span><span class="op" id="6810814">:</span>&nbsp;<span class="string" id="6810816">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6810834">}</span><span class="op" id="6810835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810838">{</span><span class="ident" id="6810839">net</span><span class="op" id="6810842">:</span>&nbsp;<span class="string" id="6810844">&#34;tcp&#34;</span><span class="op" id="6810849">,</span>&nbsp;<span class="ident" id="6810851">laddr</span><span class="op" id="6810856">:</span>&nbsp;<span class="string" id="6810858">&#34;[::]&#34;</span><span class="op" id="6810864">,</span>&nbsp;<span class="ident" id="6810866">ipv6</span><span class="op" id="6810870">:</span>&nbsp;<span class="ident" id="6810872">true</span><span class="op" id="6810876">}</span><span class="op" id="6810877">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810881">{</span><span class="ident" id="6810882">net</span><span class="op" id="6810885">:</span>&nbsp;<span class="string" id="6810887">&#34;tcp&#34;</span><span class="op" id="6810892">,</span>&nbsp;<span class="ident" id="6810894">laddr</span><span class="op" id="6810899">:</span>&nbsp;<span class="string" id="6810901">&#34;127.0.0.1&#34;</span><span class="op" id="6810912">}</span><span class="op" id="6810913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810916">{</span><span class="ident" id="6810917">net</span><span class="op" id="6810920">:</span>&nbsp;<span class="string" id="6810922">&#34;tcp&#34;</span><span class="op" id="6810927">,</span>&nbsp;<span class="ident" id="6810929">laddr</span><span class="op" id="6810934">:</span>&nbsp;<span class="string" id="6810936">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6810956">}</span><span class="op" id="6810957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810960">{</span><span class="ident" id="6810961">net</span><span class="op" id="6810964">:</span>&nbsp;<span class="string" id="6810966">&#34;tcp&#34;</span><span class="op" id="6810971">,</span>&nbsp;<span class="ident" id="6810973">laddr</span><span class="op" id="6810978">:</span>&nbsp;<span class="string" id="6810980">&#34;[::1]&#34;</span><span class="op" id="6810987">,</span>&nbsp;<span class="ident" id="6810989">ipv6</span><span class="op" id="6810993">:</span>&nbsp;<span class="ident" id="6810995">true</span><span class="op" id="6810999">}</span><span class="op" id="6811000">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811004">{</span><span class="ident" id="6811005">net</span><span class="op" id="6811008">:</span>&nbsp;<span class="string" id="6811010">&#34;tcp4&#34;</span><span class="op" id="6811016">,</span>&nbsp;<span class="ident" id="6811018">laddr</span><span class="op" id="6811023">:</span>&nbsp;<span class="string" id="6811025">&#34;&#34;</span><span class="op" id="6811027">}</span><span class="op" id="6811028">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811031">{</span><span class="ident" id="6811032">net</span><span class="op" id="6811035">:</span>&nbsp;<span class="string" id="6811037">&#34;tcp4&#34;</span><span class="op" id="6811043">,</span>&nbsp;<span class="ident" id="6811045">laddr</span><span class="op" id="6811050">:</span>&nbsp;<span class="string" id="6811052">&#34;0.0.0.0&#34;</span><span class="op" id="6811061">}</span><span class="op" id="6811062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811065">{</span><span class="ident" id="6811066">net</span><span class="op" id="6811069">:</span>&nbsp;<span class="string" id="6811071">&#34;tcp4&#34;</span><span class="op" id="6811077">,</span>&nbsp;<span class="ident" id="6811079">laddr</span><span class="op" id="6811084">:</span>&nbsp;<span class="string" id="6811086">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6811104">}</span><span class="op" id="6811105">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811109">{</span><span class="ident" id="6811110">net</span><span class="op" id="6811113">:</span>&nbsp;<span class="string" id="6811115">&#34;tcp4&#34;</span><span class="op" id="6811121">,</span>&nbsp;<span class="ident" id="6811123">laddr</span><span class="op" id="6811128">:</span>&nbsp;<span class="string" id="6811130">&#34;127.0.0.1&#34;</span><span class="op" id="6811141">}</span><span class="op" id="6811142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811145">{</span><span class="ident" id="6811146">net</span><span class="op" id="6811149">:</span>&nbsp;<span class="string" id="6811151">&#34;tcp4&#34;</span><span class="op" id="6811157">,</span>&nbsp;<span class="ident" id="6811159">laddr</span><span class="op" id="6811164">:</span>&nbsp;<span class="string" id="6811166">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6811186">}</span><span class="op" id="6811187">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811191">{</span><span class="ident" id="6811192">net</span><span class="op" id="6811195">:</span>&nbsp;<span class="string" id="6811197">&#34;tcp6&#34;</span><span class="op" id="6811203">,</span>&nbsp;<span class="ident" id="6811205">laddr</span><span class="op" id="6811210">:</span>&nbsp;<span class="string" id="6811212">&#34;&#34;</span><span class="op" id="6811214">,</span>&nbsp;<span class="ident" id="6811216">ipv6</span><span class="op" id="6811220">:</span>&nbsp;<span class="ident" id="6811222">true</span><span class="op" id="6811226">}</span><span class="op" id="6811227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811230">{</span><span class="ident" id="6811231">net</span><span class="op" id="6811234">:</span>&nbsp;<span class="string" id="6811236">&#34;tcp6&#34;</span><span class="op" id="6811242">,</span>&nbsp;<span class="ident" id="6811244">laddr</span><span class="op" id="6811249">:</span>&nbsp;<span class="string" id="6811251">&#34;[::]&#34;</span><span class="op" id="6811257">,</span>&nbsp;<span class="ident" id="6811259">ipv6</span><span class="op" id="6811263">:</span>&nbsp;<span class="ident" id="6811265">true</span><span class="op" id="6811269">}</span><span class="op" id="6811270">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811274">{</span><span class="ident" id="6811275">net</span><span class="op" id="6811278">:</span>&nbsp;<span class="string" id="6811280">&#34;tcp6&#34;</span><span class="op" id="6811286">,</span>&nbsp;<span class="ident" id="6811288">laddr</span><span class="op" id="6811293">:</span>&nbsp;<span class="string" id="6811295">&#34;[::1]&#34;</span><span class="op" id="6811302">,</span>&nbsp;<span class="ident" id="6811304">ipv6</span><span class="op" id="6811308">:</span>&nbsp;<span class="ident" id="6811310">true</span><span class="op" id="6811314">}</span><span class="op" id="6811315">,</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811319">{</span><span class="ident" id="6811320">net</span><span class="op" id="6811323">:</span>&nbsp;<span class="string" id="6811325">&#34;unix&#34;</span><span class="op" id="6811331">,</span>&nbsp;<span class="ident" id="6811333">laddr</span><span class="op" id="6811338">:</span>&nbsp;<span class="string" id="6811340">&#34;@gotest/net&#34;</span><span class="op" id="6811353">,</span>&nbsp;<span class="ident" id="6811355">linux</span><span class="op" id="6811360">:</span>&nbsp;<span class="ident" id="6811362">true</span><span class="op" id="6811366">}</span><span class="op" id="6811367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811370">{</span><span class="ident" id="6811371">net</span><span class="op" id="6811374">:</span>&nbsp;<span class="string" id="6811376">&#34;unixpacket&#34;</span><span class="op" id="6811388">,</span>&nbsp;<span class="ident" id="6811390">laddr</span><span class="op" id="6811395">:</span>&nbsp;<span class="string" id="6811397">&#34;@gotest/net&#34;</span><span class="op" id="6811410">,</span>&nbsp;<span class="ident" id="6811412">linux</span><span class="op" id="6811417">:</span>&nbsp;<span class="ident" id="6811419">true</span><span class="op" id="6811423">}</span><span class="op" id="6811424">,</span><br>
<span class="lineno"></span><span class="op" id="6811426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6811429">func</span>&nbsp;<span class="ident" id="6811434">TestFileListener</span><span class="op" id="6811450">(</span><span class="ident" id="6811451">t</span>&nbsp;<span class="op" id="6811453">*</span><span class="ident" id="6811454"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6811461">.</span><span class="ident" id="6811462">T</span><span class="op" id="6811463">)</span>&nbsp;<span class="op" id="6811465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811468">switch</span>&nbsp;<span class="ident" id="6811475"><a href="/net/file_test.go.html#6809611">runtime</a></span><span class="op" id="6811482">.</span><span class="ident" id="6811483">GOOS</span>&nbsp;<span class="op" id="6811488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811491">case</span>&nbsp;<span class="string" id="6811496">&#34;nacl&#34;</span><span class="op" id="6811502">,</span>&nbsp;<span class="string" id="6811504">&#34;windows&#34;</span><span class="op" id="6811513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811517"><a href="/net/file_test.go.html#6811451">t</a></span><span class="op" id="6811518">.</span><span class="ident" id="6811519">Skipf</span><span class="op" id="6811524">(</span><span class="string" id="6811525">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6811546">,</span>&nbsp;<span class="ident" id="6811548"><a href="/net/file_test.go.html#6809611">runtime</a></span><span class="op" id="6811555">.</span><span class="ident" id="6811556">GOOS</span><span class="op" id="6811560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811563">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811567">for</span>&nbsp;<span class="ident" id="6811571">_</span><span class="op" id="6811572">,</span>&nbsp;<span class="ident" id="6811574">tt</span>&nbsp;<span class="op" id="6811577">:=</span>&nbsp;<span class="keyword" id="6811580">range</span>&nbsp;<span class="ident" id="6811586"><a href="/net/file_test.go.html#6810556">fileListenerTests</a></span>&nbsp;<span class="op" id="6811604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811608">if</span>&nbsp;<span class="ident" id="6811611"><a href="/net/server_test.go.html#6897877">skipServerTest</a></span><span class="op" id="6811625">(</span><span class="ident" id="6811626"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811628">.</span><span class="ident" id="6811629">net</span><span class="op" id="6811632">,</span>&nbsp;<span class="string" id="6811634">&#34;unix&#34;</span><span class="op" id="6811640">,</span>&nbsp;<span class="ident" id="6811642"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811644">.</span><span class="ident" id="6811645">laddr</span><span class="op" id="6811650">,</span>&nbsp;<span class="ident" id="6811652"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811654">.</span><span class="ident" id="6811655">ipv6</span><span class="op" id="6811659">,</span>&nbsp;<span class="ident" id="6811661">false</span><span class="op" id="6811666">,</span>&nbsp;<span class="ident" id="6811668"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811670">.</span><span class="ident" id="6811671">linux</span><span class="op" id="6811676">)</span>&nbsp;<span class="op" id="6811678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811683">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811694">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811698">if</span>&nbsp;<span class="ident" id="6811701"><a href="/net/server_test.go.html#6897877">skipServerTest</a></span><span class="op" id="6811715">(</span><span class="ident" id="6811716"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811718">.</span><span class="ident" id="6811719">net</span><span class="op" id="6811722">,</span>&nbsp;<span class="string" id="6811724">&#34;unixpacket&#34;</span><span class="op" id="6811736">,</span>&nbsp;<span class="ident" id="6811738"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811740">.</span><span class="ident" id="6811741">laddr</span><span class="op" id="6811746">,</span>&nbsp;<span class="ident" id="6811748"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811750">.</span><span class="ident" id="6811751">ipv6</span><span class="op" id="6811755">,</span>&nbsp;<span class="ident" id="6811757">false</span><span class="op" id="6811762">,</span>&nbsp;<span class="ident" id="6811764"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811766">.</span><span class="ident" id="6811767">linux</span><span class="op" id="6811772">)</span>&nbsp;<span class="op" id="6811774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811779">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811794"><a href="/net/file_test.go.html#6809861">testFileListener</a></span><span class="op" id="6811810">(</span><span class="ident" id="6811811"><a href="/net/file_test.go.html#6811451">t</a></span><span class="op" id="6811812">,</span>&nbsp;<span class="ident" id="6811814"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811816">.</span><span class="ident" id="6811817">net</span><span class="op" id="6811820">,</span>&nbsp;<span class="ident" id="6811822"><a href="/net/file_test.go.html#6811574">tt</a></span><span class="op" id="6811824">.</span><span class="ident" id="6811825">laddr</span><span class="op" id="6811830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811833">}</span><br>
<span class="lineno">105</span><span class="op" id="6811835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6811838">func</span>&nbsp;<span class="ident" id="6811843">testFilePacketConn</span><span class="op" id="6811861">(</span><span class="ident" id="6811862">t</span>&nbsp;<span class="op" id="6811864">*</span><span class="ident" id="6811865"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6811872">.</span><span class="ident" id="6811873">T</span><span class="op" id="6811874">,</span>&nbsp;<span class="ident" id="6811876">pcf</span>&nbsp;<span class="ident" id="6811880"><a href="/net/file_test.go.html#6809715">packetConnFile</a></span><span class="op" id="6811894">,</span>&nbsp;<span class="ident" id="6811896">listen</span>&nbsp;<span class="builtintype" id="6811903">bool</span><span class="op" id="6811907">)</span>&nbsp;<span class="op" id="6811909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811912">f</span><span class="op" id="6811913">,</span>&nbsp;<span class="ident" id="6811915">err</span>&nbsp;<span class="op" id="6811919">:=</span>&nbsp;<span class="ident" id="6811922"><a href="/net/file_test.go.html#6811876">pcf</a></span><span class="op" id="6811925">.</span><span class="ident" id="6811926">File</span><span class="op" id="6811930">(</span><span class="op" id="6811931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811934">if</span>&nbsp;<span class="ident" id="6811937"><a href="/net/file_test.go.html#6811915">err</a></span>&nbsp;<span class="op" id="6811941">!=</span>&nbsp;<span class="ident" id="6811944">nil</span>&nbsp;<span class="op" id="6811948">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811952"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6811953">.</span><span class="ident" id="6811954">Fatalf</span><span class="op" id="6811960">(</span><span class="string" id="6811961">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6811978">,</span>&nbsp;<span class="ident" id="6811980"><a href="/net/file_test.go.html#6811915">err</a></span><span class="op" id="6811983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811989">c</span><span class="op" id="6811990">,</span>&nbsp;<span class="ident" id="6811992"><a href="/net/file_test.go.html#6811915">err</a></span>&nbsp;<span class="op" id="6811996">:=</span>&nbsp;<span class="ident" id="6811999"><a href="/net/file_unix.go.html#2590609">FilePacketConn</a></span><span class="op" id="6812013">(</span><span class="ident" id="6812014"><a href="/net/file_test.go.html#6811912">f</a></span><span class="op" id="6812015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812018">if</span>&nbsp;<span class="ident" id="6812021"><a href="/net/file_test.go.html#6811915">err</a></span>&nbsp;<span class="op" id="6812025">!=</span>&nbsp;<span class="ident" id="6812028">nil</span>&nbsp;<span class="op" id="6812032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812036"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6812037">.</span><span class="ident" id="6812038">Fatalf</span><span class="op" id="6812044">(</span><span class="string" id="6812045">&#34;FilePacketConn&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812072">,</span>&nbsp;<span class="ident" id="6812074"><a href="/net/file_test.go.html#6811915">err</a></span><span class="op" id="6812077">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812083">if</span>&nbsp;<span class="op" id="6812086">!</span><span class="ident" id="6812087"><a href="/net/file_test.go.html#6809600">reflect</a></span><span class="op" id="6812094">.</span><span class="ident" id="6812095">DeepEqual</span><span class="op" id="6812104">(</span><span class="ident" id="6812105"><a href="/net/file_test.go.html#6811876">pcf</a></span><span class="op" id="6812108">.</span><span class="ident" id="6812109">LocalAddr</span><span class="op" id="6812118">(</span><span class="op" id="6812119">)</span><span class="op" id="6812120">,</span>&nbsp;<span class="ident" id="6812122"><a href="/net/file_test.go.html#6811989">c</a></span><span class="op" id="6812123">.</span><span class="ident" id="6812124">LocalAddr</span><span class="op" id="6812133">(</span><span class="op" id="6812134">)</span><span class="op" id="6812135">)</span>&nbsp;<span class="op" id="6812137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812141"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6812142">.</span><span class="ident" id="6812143">Fatalf</span><span class="op" id="6812149">(</span><span class="string" id="6812150">&#34;LocalAddrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="6812184">,</span>&nbsp;<span class="ident" id="6812186"><a href="/net/file_test.go.html#6811876">pcf</a></span><span class="op" id="6812189">.</span><span class="ident" id="6812190">LocalAddr</span><span class="op" id="6812199">(</span><span class="op" id="6812200">)</span><span class="op" id="6812201">,</span>&nbsp;<span class="ident" id="6812203"><a href="/net/file_test.go.html#6811989">c</a></span><span class="op" id="6812204">.</span><span class="ident" id="6812205">LocalAddr</span><span class="op" id="6812214">(</span><span class="op" id="6812215">)</span><span class="op" id="6812216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812222">if</span>&nbsp;<span class="ident" id="6812225"><a href="/net/file_test.go.html#6811896">listen</a></span>&nbsp;<span class="op" id="6812232">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812236">if</span>&nbsp;<span class="ident" id="6812239">_</span><span class="op" id="6812240">,</span>&nbsp;<span class="ident" id="6812242">err</span>&nbsp;<span class="op" id="6812246">:=</span>&nbsp;<span class="ident" id="6812249"><a href="/net/file_test.go.html#6811989">c</a></span><span class="op" id="6812250">.</span><span class="ident" id="6812251">WriteTo</span><span class="op" id="6812258">(</span><span class="op" id="6812259">[</span><span class="op" id="6812260">]</span><span class="builtintype" id="6812261">byte</span><span class="op" id="6812265">{</span><span class="op" id="6812266">}</span><span class="op" id="6812267">,</span>&nbsp;<span class="ident" id="6812269"><a href="/net/file_test.go.html#6811989">c</a></span><span class="op" id="6812270">.</span><span class="ident" id="6812271">LocalAddr</span><span class="op" id="6812280">(</span><span class="op" id="6812281">)</span><span class="op" id="6812282">)</span><span class="op" id="6812283">;</span>&nbsp;<span class="ident" id="6812285"><a href="/net/file_test.go.html#6812242">err</a></span>&nbsp;<span class="op" id="6812289">!=</span>&nbsp;<span class="ident" id="6812292">nil</span>&nbsp;<span class="op" id="6812296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812301"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6812302">.</span><span class="ident" id="6812303">Fatalf</span><span class="op" id="6812309">(</span><span class="string" id="6812310">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812330">,</span>&nbsp;<span class="ident" id="6812332"><a href="/net/file_test.go.html#6812242">err</a></span><span class="op" id="6812335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812345">if</span>&nbsp;<span class="ident" id="6812348">err</span>&nbsp;<span class="op" id="6812352">:=</span>&nbsp;<span class="ident" id="6812355"><a href="/net/file_test.go.html#6811989">c</a></span><span class="op" id="6812356">.</span><span class="ident" id="6812357">Close</span><span class="op" id="6812362">(</span><span class="op" id="6812363">)</span><span class="op" id="6812364">;</span>&nbsp;<span class="ident" id="6812366"><a href="/net/file_test.go.html#6812348">err</a></span>&nbsp;<span class="op" id="6812370">!=</span>&nbsp;<span class="ident" id="6812373">nil</span>&nbsp;<span class="op" id="6812377">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812381"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6812382">.</span><span class="ident" id="6812383">Fatalf</span><span class="op" id="6812389">(</span><span class="string" id="6812390">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812408">,</span>&nbsp;<span class="ident" id="6812410"><a href="/net/file_test.go.html#6812348">err</a></span><span class="op" id="6812413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812419">if</span>&nbsp;<span class="ident" id="6812422">err</span>&nbsp;<span class="op" id="6812426">:=</span>&nbsp;<span class="ident" id="6812429"><a href="/net/file_test.go.html#6811912">f</a></span><span class="op" id="6812430">.</span><span class="ident" id="6812431">Close</span><span class="op" id="6812436">(</span><span class="op" id="6812437">)</span><span class="op" id="6812438">;</span>&nbsp;<span class="ident" id="6812440"><a href="/net/file_test.go.html#6812422">err</a></span>&nbsp;<span class="op" id="6812444">!=</span>&nbsp;<span class="ident" id="6812447">nil</span>&nbsp;<span class="op" id="6812451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812455"><a href="/net/file_test.go.html#6811862">t</a></span><span class="op" id="6812456">.</span><span class="ident" id="6812457">Fatalf</span><span class="op" id="6812463">(</span><span class="string" id="6812464">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812482">,</span>&nbsp;<span class="ident" id="6812484"><a href="/net/file_test.go.html#6812422">err</a></span><span class="op" id="6812487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812490">}</span><br>
<span class="lineno">130</span><span class="op" id="6812492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6812495">func</span>&nbsp;<span class="ident" id="6812500">testFilePacketConnListen</span><span class="op" id="6812524">(</span><span class="ident" id="6812525">t</span>&nbsp;<span class="op" id="6812527">*</span><span class="ident" id="6812528"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6812535">.</span><span class="ident" id="6812536">T</span><span class="op" id="6812537">,</span>&nbsp;<span class="ident" id="6812539">net</span><span class="op" id="6812542">,</span>&nbsp;<span class="ident" id="6812544">laddr</span>&nbsp;<span class="builtintype" id="6812550">string</span><span class="op" id="6812556">)</span>&nbsp;<span class="op" id="6812558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812561">switch</span>&nbsp;<span class="ident" id="6812568"><a href="/net/file_test.go.html#6812539">net</a></span>&nbsp;<span class="op" id="6812572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812575">case</span>&nbsp;<span class="string" id="6812580">&#34;udp&#34;</span><span class="op" id="6812585">,</span>&nbsp;<span class="string" id="6812587">&#34;udp4&#34;</span><span class="op" id="6812593">,</span>&nbsp;<span class="string" id="6812595">&#34;udp6&#34;</span><span class="op" id="6812601">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812605"><a href="/net/file_test.go.html#6812544">laddr</a></span>&nbsp;<span class="op" id="6812611">+=</span>&nbsp;<span class="string" id="6812614">&#34;:0&#34;</span>&nbsp;<span class="comment" id="6812619">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812645">l</span><span class="op" id="6812646">,</span>&nbsp;<span class="ident" id="6812648">err</span>&nbsp;<span class="op" id="6812652">:=</span>&nbsp;<span class="ident" id="6812655"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6812667">(</span><span class="ident" id="6812668"><a href="/net/file_test.go.html#6812539">net</a></span><span class="op" id="6812671">,</span>&nbsp;<span class="ident" id="6812673"><a href="/net/file_test.go.html#6812544">laddr</a></span><span class="op" id="6812678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812681">if</span>&nbsp;<span class="ident" id="6812684"><a href="/net/file_test.go.html#6812648">err</a></span>&nbsp;<span class="op" id="6812688">!=</span>&nbsp;<span class="ident" id="6812691">nil</span>&nbsp;<span class="op" id="6812695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812699"><a href="/net/file_test.go.html#6812525">t</a></span><span class="op" id="6812700">.</span><span class="ident" id="6812701">Fatalf</span><span class="op" id="6812707">(</span><span class="string" id="6812708">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812733">,</span>&nbsp;<span class="ident" id="6812735"><a href="/net/file_test.go.html#6812648">err</a></span><span class="op" id="6812738">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812744"><a href="/net/file_test.go.html#6811843">testFilePacketConn</a></span><span class="op" id="6812762">(</span><span class="ident" id="6812763"><a href="/net/file_test.go.html#6812525">t</a></span><span class="op" id="6812764">,</span>&nbsp;<span class="ident" id="6812766"><a href="/net/file_test.go.html#6812645">l</a></span><span class="op" id="6812767">.</span><span class="op" id="6812768">(</span><span class="ident" id="6812769"><a href="/net/file_test.go.html#6809715">packetConnFile</a></span><span class="op" id="6812783">)</span><span class="op" id="6812784">,</span>&nbsp;<span class="ident" id="6812786">true</span><span class="op" id="6812790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812793">if</span>&nbsp;<span class="ident" id="6812796">err</span>&nbsp;<span class="op" id="6812800">:=</span>&nbsp;<span class="ident" id="6812803"><a href="/net/file_test.go.html#6812645">l</a></span><span class="op" id="6812804">.</span><span class="ident" id="6812805">Close</span><span class="op" id="6812810">(</span><span class="op" id="6812811">)</span><span class="op" id="6812812">;</span>&nbsp;<span class="ident" id="6812814"><a href="/net/file_test.go.html#6812796">err</a></span>&nbsp;<span class="op" id="6812818">!=</span>&nbsp;<span class="ident" id="6812821">nil</span>&nbsp;<span class="op" id="6812825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812829"><a href="/net/file_test.go.html#6812525">t</a></span><span class="op" id="6812830">.</span><span class="ident" id="6812831">Fatalf</span><span class="op" id="6812837">(</span><span class="string" id="6812838">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812856">,</span>&nbsp;<span class="ident" id="6812858"><a href="/net/file_test.go.html#6812796">err</a></span><span class="op" id="6812861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812864">}</span><br>
<span class="lineno">145</span><span class="op" id="6812866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6812869">func</span>&nbsp;<span class="ident" id="6812874">testFilePacketConnDial</span><span class="op" id="6812896">(</span><span class="ident" id="6812897">t</span>&nbsp;<span class="op" id="6812899">*</span><span class="ident" id="6812900"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6812907">.</span><span class="ident" id="6812908">T</span><span class="op" id="6812909">,</span>&nbsp;<span class="ident" id="6812911">net</span><span class="op" id="6812914">,</span>&nbsp;<span class="ident" id="6812916">raddr</span>&nbsp;<span class="builtintype" id="6812922">string</span><span class="op" id="6812928">)</span>&nbsp;<span class="op" id="6812930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812933">switch</span>&nbsp;<span class="ident" id="6812940"><a href="/net/file_test.go.html#6812911">net</a></span>&nbsp;<span class="op" id="6812944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812947">case</span>&nbsp;<span class="string" id="6812952">&#34;udp&#34;</span><span class="op" id="6812957">,</span>&nbsp;<span class="string" id="6812959">&#34;udp4&#34;</span><span class="op" id="6812965">,</span>&nbsp;<span class="string" id="6812967">&#34;udp6&#34;</span><span class="op" id="6812973">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812977"><a href="/net/file_test.go.html#6812916">raddr</a></span>&nbsp;<span class="op" id="6812983">+=</span>&nbsp;<span class="string" id="6812986">&#34;:12345&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812999">c</span><span class="op" id="6813000">,</span>&nbsp;<span class="ident" id="6813002">err</span>&nbsp;<span class="op" id="6813006">:=</span>&nbsp;<span class="ident" id="6813009"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6813013">(</span><span class="ident" id="6813014"><a href="/net/file_test.go.html#6812911">net</a></span><span class="op" id="6813017">,</span>&nbsp;<span class="ident" id="6813019"><a href="/net/file_test.go.html#6812916">raddr</a></span><span class="op" id="6813024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813027">if</span>&nbsp;<span class="ident" id="6813030"><a href="/net/file_test.go.html#6813002">err</a></span>&nbsp;<span class="op" id="6813034">!=</span>&nbsp;<span class="ident" id="6813037">nil</span>&nbsp;<span class="op" id="6813041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813045"><a href="/net/file_test.go.html#6812897">t</a></span><span class="op" id="6813046">.</span><span class="ident" id="6813047">Fatalf</span><span class="op" id="6813053">(</span><span class="string" id="6813054">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6813071">,</span>&nbsp;<span class="ident" id="6813073"><a href="/net/file_test.go.html#6813002">err</a></span><span class="op" id="6813076">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813082"><a href="/net/file_test.go.html#6811843">testFilePacketConn</a></span><span class="op" id="6813100">(</span><span class="ident" id="6813101"><a href="/net/file_test.go.html#6812897">t</a></span><span class="op" id="6813102">,</span>&nbsp;<span class="ident" id="6813104"><a href="/net/file_test.go.html#6812999">c</a></span><span class="op" id="6813105">.</span><span class="op" id="6813106">(</span><span class="ident" id="6813107"><a href="/net/file_test.go.html#6809715">packetConnFile</a></span><span class="op" id="6813121">)</span><span class="op" id="6813122">,</span>&nbsp;<span class="ident" id="6813124">false</span><span class="op" id="6813129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813132">if</span>&nbsp;<span class="ident" id="6813135">err</span>&nbsp;<span class="op" id="6813139">:=</span>&nbsp;<span class="ident" id="6813142"><a href="/net/file_test.go.html#6812999">c</a></span><span class="op" id="6813143">.</span><span class="ident" id="6813144">Close</span><span class="op" id="6813149">(</span><span class="op" id="6813150">)</span><span class="op" id="6813151">;</span>&nbsp;<span class="ident" id="6813153"><a href="/net/file_test.go.html#6813135">err</a></span>&nbsp;<span class="op" id="6813157">!=</span>&nbsp;<span class="ident" id="6813160">nil</span>&nbsp;<span class="op" id="6813164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813168"><a href="/net/file_test.go.html#6812897">t</a></span><span class="op" id="6813169">.</span><span class="ident" id="6813170">Fatalf</span><span class="op" id="6813176">(</span><span class="string" id="6813177">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6813195">,</span>&nbsp;<span class="ident" id="6813197"><a href="/net/file_test.go.html#6813135">err</a></span><span class="op" id="6813200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813203">}</span><br>
<span class="lineno">160</span><span class="op" id="6813205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6813208">var</span>&nbsp;<span class="ident" id="6813212">filePacketConnTests</span>&nbsp;<span class="op" id="6813232">=</span>&nbsp;<span class="op" id="6813234">[</span><span class="op" id="6813235">]</span><span class="keyword" id="6813236">struct</span>&nbsp;<span class="op" id="6813243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813246">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6813252">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813260">addr</span>&nbsp;&nbsp;<span class="builtintype" id="6813266">string</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813274">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="6813280">bool</span>&nbsp;<span class="comment" id="6813285">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813326">linux</span>&nbsp;<span class="builtintype" id="6813332">bool</span>&nbsp;<span class="comment" id="6813337">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6813391">}</span><span class="op" id="6813392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813395">{</span><span class="ident" id="6813396">net</span><span class="op" id="6813399">:</span>&nbsp;<span class="string" id="6813401">&#34;udp&#34;</span><span class="op" id="6813406">,</span>&nbsp;<span class="ident" id="6813408">addr</span><span class="op" id="6813412">:</span>&nbsp;<span class="string" id="6813414">&#34;127.0.0.1&#34;</span><span class="op" id="6813425">}</span><span class="op" id="6813426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813429">{</span><span class="ident" id="6813430">net</span><span class="op" id="6813433">:</span>&nbsp;<span class="string" id="6813435">&#34;udp&#34;</span><span class="op" id="6813440">,</span>&nbsp;<span class="ident" id="6813442">addr</span><span class="op" id="6813446">:</span>&nbsp;<span class="string" id="6813448">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6813468">}</span><span class="op" id="6813469">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813472">{</span><span class="ident" id="6813473">net</span><span class="op" id="6813476">:</span>&nbsp;<span class="string" id="6813478">&#34;udp&#34;</span><span class="op" id="6813483">,</span>&nbsp;<span class="ident" id="6813485">addr</span><span class="op" id="6813489">:</span>&nbsp;<span class="string" id="6813491">&#34;[::1]&#34;</span><span class="op" id="6813498">,</span>&nbsp;<span class="ident" id="6813500">ipv6</span><span class="op" id="6813504">:</span>&nbsp;<span class="ident" id="6813506">true</span><span class="op" id="6813510">}</span><span class="op" id="6813511">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813515">{</span><span class="ident" id="6813516">net</span><span class="op" id="6813519">:</span>&nbsp;<span class="string" id="6813521">&#34;udp4&#34;</span><span class="op" id="6813527">,</span>&nbsp;<span class="ident" id="6813529">addr</span><span class="op" id="6813533">:</span>&nbsp;<span class="string" id="6813535">&#34;127.0.0.1&#34;</span><span class="op" id="6813546">}</span><span class="op" id="6813547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813550">{</span><span class="ident" id="6813551">net</span><span class="op" id="6813554">:</span>&nbsp;<span class="string" id="6813556">&#34;udp4&#34;</span><span class="op" id="6813562">,</span>&nbsp;<span class="ident" id="6813564">addr</span><span class="op" id="6813568">:</span>&nbsp;<span class="string" id="6813570">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6813590">}</span><span class="op" id="6813591">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813595">{</span><span class="ident" id="6813596">net</span><span class="op" id="6813599">:</span>&nbsp;<span class="string" id="6813601">&#34;udp6&#34;</span><span class="op" id="6813607">,</span>&nbsp;<span class="ident" id="6813609">addr</span><span class="op" id="6813613">:</span>&nbsp;<span class="string" id="6813615">&#34;[::1]&#34;</span><span class="op" id="6813622">,</span>&nbsp;<span class="ident" id="6813624">ipv6</span><span class="op" id="6813628">:</span>&nbsp;<span class="ident" id="6813630">true</span><span class="op" id="6813634">}</span><span class="op" id="6813635">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813639">{</span><span class="ident" id="6813640">net</span><span class="op" id="6813643">:</span>&nbsp;<span class="string" id="6813645">&#34;ip4:icmp&#34;</span><span class="op" id="6813655">,</span>&nbsp;<span class="ident" id="6813657">addr</span><span class="op" id="6813661">:</span>&nbsp;<span class="string" id="6813663">&#34;127.0.0.1&#34;</span><span class="op" id="6813674">}</span><span class="op" id="6813675">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813679">{</span><span class="ident" id="6813680">net</span><span class="op" id="6813683">:</span>&nbsp;<span class="string" id="6813685">&#34;unixgram&#34;</span><span class="op" id="6813695">,</span>&nbsp;<span class="ident" id="6813697">addr</span><span class="op" id="6813701">:</span>&nbsp;<span class="string" id="6813703">&#34;@gotest3/net&#34;</span><span class="op" id="6813717">,</span>&nbsp;<span class="ident" id="6813719">linux</span><span class="op" id="6813724">:</span>&nbsp;<span class="ident" id="6813726">true</span><span class="op" id="6813730">}</span><span class="op" id="6813731">,</span><br>
<span class="lineno">180</span><span class="op" id="6813733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6813736">func</span>&nbsp;<span class="ident" id="6813741">TestFilePacketConn</span><span class="op" id="6813759">(</span><span class="ident" id="6813760">t</span>&nbsp;<span class="op" id="6813762">*</span><span class="ident" id="6813763"><a href="/net/file_test.go.html#6809622">testing</a></span><span class="op" id="6813770">.</span><span class="ident" id="6813771">T</span><span class="op" id="6813772">)</span>&nbsp;<span class="op" id="6813774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813777">switch</span>&nbsp;<span class="ident" id="6813784"><a href="/net/file_test.go.html#6809611">runtime</a></span><span class="op" id="6813791">.</span><span class="ident" id="6813792">GOOS</span>&nbsp;<span class="op" id="6813797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813800">case</span>&nbsp;<span class="string" id="6813805">&#34;nacl&#34;</span><span class="op" id="6813811">,</span>&nbsp;<span class="string" id="6813813">&#34;plan9&#34;</span><span class="op" id="6813820">,</span>&nbsp;<span class="string" id="6813822">&#34;windows&#34;</span><span class="op" id="6813831">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813835"><a href="/net/file_test.go.html#6813760">t</a></span><span class="op" id="6813836">.</span><span class="ident" id="6813837">Skipf</span><span class="op" id="6813842">(</span><span class="string" id="6813843">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6813864">,</span>&nbsp;<span class="ident" id="6813866"><a href="/net/file_test.go.html#6809611">runtime</a></span><span class="op" id="6813873">.</span><span class="ident" id="6813874">GOOS</span><span class="op" id="6813878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813885">for</span>&nbsp;<span class="ident" id="6813889">_</span><span class="op" id="6813890">,</span>&nbsp;<span class="ident" id="6813892">tt</span>&nbsp;<span class="op" id="6813895">:=</span>&nbsp;<span class="keyword" id="6813898">range</span>&nbsp;<span class="ident" id="6813904"><a href="/net/file_test.go.html#6813212">filePacketConnTests</a></span>&nbsp;<span class="op" id="6813924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813928">if</span>&nbsp;<span class="ident" id="6813931"><a href="/net/server_test.go.html#6897877">skipServerTest</a></span><span class="op" id="6813945">(</span><span class="ident" id="6813946"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6813948">.</span><span class="ident" id="6813949">net</span><span class="op" id="6813952">,</span>&nbsp;<span class="string" id="6813954">&#34;unixgram&#34;</span><span class="op" id="6813964">,</span>&nbsp;<span class="ident" id="6813966"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6813968">.</span><span class="ident" id="6813969">addr</span><span class="op" id="6813973">,</span>&nbsp;<span class="ident" id="6813975"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6813977">.</span><span class="ident" id="6813978">ipv6</span><span class="op" id="6813982">,</span>&nbsp;<span class="ident" id="6813984">false</span><span class="op" id="6813989">,</span>&nbsp;<span class="ident" id="6813991"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6813993">.</span><span class="ident" id="6813994">linux</span><span class="op" id="6813999">)</span>&nbsp;<span class="op" id="6814001">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814006">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814021">if</span>&nbsp;<span class="ident" id="6814024"><a href="/net/file_test.go.html#6809594">os</a></span><span class="op" id="6814026">.</span><span class="ident" id="6814027">Getuid</span><span class="op" id="6814033">(</span><span class="op" id="6814034">)</span>&nbsp;<span class="op" id="6814036">!=</span>&nbsp;<span class="num" id="6814039">0</span>&nbsp;<span class="op" id="6814041">&amp;&amp;</span>&nbsp;<span class="ident" id="6814044"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814046">.</span><span class="ident" id="6814047">net</span>&nbsp;<span class="op" id="6814051">==</span>&nbsp;<span class="string" id="6814054">&#34;ip4:icmp&#34;</span>&nbsp;<span class="op" id="6814065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814070"><a href="/net/file_test.go.html#6813760">t</a></span><span class="op" id="6814071">.</span><span class="ident" id="6814072">Log</span><span class="op" id="6814075">(</span><span class="string" id="6814076">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6814105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814110">continue</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814125"><a href="/net/file_test.go.html#6812500">testFilePacketConnListen</a></span><span class="op" id="6814149">(</span><span class="ident" id="6814150"><a href="/net/file_test.go.html#6813760">t</a></span><span class="op" id="6814151">,</span>&nbsp;<span class="ident" id="6814153"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814155">.</span><span class="ident" id="6814156">net</span><span class="op" id="6814159">,</span>&nbsp;<span class="ident" id="6814161"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814163">.</span><span class="ident" id="6814164">addr</span><span class="op" id="6814168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814172">switch</span>&nbsp;<span class="ident" id="6814179"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814181">.</span><span class="ident" id="6814182">addr</span>&nbsp;<span class="op" id="6814187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814191">case</span>&nbsp;<span class="string" id="6814196">&#34;&#34;</span><span class="op" id="6814198">,</span>&nbsp;<span class="string" id="6814200">&#34;0.0.0.0&#34;</span><span class="op" id="6814209">,</span>&nbsp;<span class="string" id="6814211">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6814229">,</span>&nbsp;<span class="string" id="6814231">&#34;[::]&#34;</span><span class="op" id="6814237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814241">default</span><span class="op" id="6814248">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814253">if</span>&nbsp;<span class="ident" id="6814256"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814258">.</span><span class="ident" id="6814259">net</span>&nbsp;<span class="op" id="6814263">!=</span>&nbsp;<span class="string" id="6814266">&#34;unixgram&#34;</span>&nbsp;<span class="op" id="6814277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814283"><a href="/net/file_test.go.html#6812874">testFilePacketConnDial</a></span><span class="op" id="6814305">(</span><span class="ident" id="6814306"><a href="/net/file_test.go.html#6813760">t</a></span><span class="op" id="6814307">,</span>&nbsp;<span class="ident" id="6814309"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814311">.</span><span class="ident" id="6814312">net</span><span class="op" id="6814315">,</span>&nbsp;<span class="ident" id="6814317"><a href="/net/file_test.go.html#6813892">tt</a></span><span class="op" id="6814319">.</span><span class="ident" id="6814320">addr</span><span class="op" id="6814324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814336">}</span><br>
<span class="lineno">205</span><span class="op" id="6814338">}</span>
</div>
</body>
</html>
