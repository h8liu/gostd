<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html" class="current">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1849169">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;The&nbsp;authors&nbsp;of&nbsp;this&nbsp;software&nbsp;are&nbsp;Rob&nbsp;Pike&nbsp;and&nbsp;Ken&nbsp;Thompson.<br>
<span class="lineno"></span>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;(c)&nbsp;2002&nbsp;by&nbsp;Lucent&nbsp;Technologies.<br>
<span class="lineno"></span>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Portions&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.<br>
<span class="lineno">5</span>&nbsp;*&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this&nbsp;software&nbsp;for&nbsp;any<br>
<span class="lineno"></span>&nbsp;*&nbsp;purpose&nbsp;without&nbsp;fee&nbsp;is&nbsp;hereby&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;entire&nbsp;notice<br>
<span class="lineno"></span>&nbsp;*&nbsp;is&nbsp;included&nbsp;in&nbsp;all&nbsp;copies&nbsp;of&nbsp;any&nbsp;software&nbsp;which&nbsp;is&nbsp;or&nbsp;includes&nbsp;a&nbsp;copy<br>
<span class="lineno"></span>&nbsp;*&nbsp;or&nbsp;modification&nbsp;of&nbsp;this&nbsp;software&nbsp;and&nbsp;in&nbsp;all&nbsp;copies&nbsp;of&nbsp;the&nbsp;supporting<br>
<span class="lineno"></span>&nbsp;*&nbsp;documentation&nbsp;for&nbsp;such&nbsp;software.<br>
<span class="lineno">10</span>&nbsp;*&nbsp;THIS&nbsp;SOFTWARE&nbsp;IS&nbsp;BEING&nbsp;PROVIDED&nbsp;&#34;AS&nbsp;IS&#34;,&nbsp;WITHOUT&nbsp;ANY&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED<br>
<span class="lineno"></span>&nbsp;*&nbsp;WARRANTY.&nbsp;&nbsp;IN&nbsp;PARTICULAR,&nbsp;NEITHER&nbsp;THE&nbsp;AUTHORS&nbsp;NOR&nbsp;LUCENT&nbsp;TECHNOLOGIES&nbsp;MAKE&nbsp;ANY<br>
<span class="lineno"></span>&nbsp;*&nbsp;REPRESENTATION&nbsp;OR&nbsp;WARRANTY&nbsp;OF&nbsp;ANY&nbsp;KIND&nbsp;CONCERNING&nbsp;THE&nbsp;MERCHANTABILITY<br>
<span class="lineno"></span>&nbsp;*&nbsp;OF&nbsp;THIS&nbsp;SOFTWARE&nbsp;OR&nbsp;ITS&nbsp;FITNESS&nbsp;FOR&nbsp;ANY&nbsp;PARTICULAR&nbsp;PURPOSE.<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1849998">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;This&nbsp;code&nbsp;is&nbsp;copied,&nbsp;with&nbsp;slight&nbsp;editing&nbsp;due&nbsp;to&nbsp;type&nbsp;differences,<br>
<span class="lineno"></span>&nbsp;*&nbsp;from&nbsp;a&nbsp;subset&nbsp;of&nbsp;../lib9/utf/rune.c<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="1850114">package</span>&nbsp;<span class="ident" id="1850122">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1850131">const</span>&nbsp;<span class="op" id="1850137">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850140">bit1</span>&nbsp;<span class="op" id="1850145">=</span>&nbsp;<span class="num" id="1850147">7</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850150">bitx</span>&nbsp;<span class="op" id="1850155">=</span>&nbsp;<span class="num" id="1850157">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850160">bit2</span>&nbsp;<span class="op" id="1850165">=</span>&nbsp;<span class="num" id="1850167">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850170">bit3</span>&nbsp;<span class="op" id="1850175">=</span>&nbsp;<span class="num" id="1850177">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850180">bit4</span>&nbsp;<span class="op" id="1850185">=</span>&nbsp;<span class="num" id="1850187">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850190">bit5</span>&nbsp;<span class="op" id="1850195">=</span>&nbsp;<span class="num" id="1850197">2</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850201">t1</span>&nbsp;<span class="op" id="1850204">=</span>&nbsp;<span class="op" id="1850206">(</span><span class="op" id="1850207">(</span><span class="num" id="1850208">1</span>&nbsp;<span class="op" id="1850210">&lt;&lt;</span>&nbsp;<span class="op" id="1850213">(</span><span class="ident" id="1850214">bit1</span>&nbsp;<span class="op" id="1850219">+</span>&nbsp;<span class="num" id="1850221">1</span><span class="op" id="1850222">)</span><span class="op" id="1850223">)</span>&nbsp;<span class="op" id="1850225">-</span>&nbsp;<span class="num" id="1850227">1</span><span class="op" id="1850228">)</span>&nbsp;<span class="op" id="1850230">^</span>&nbsp;<span class="num" id="1850232">0xFF</span>&nbsp;<span class="comment" id="1850237">/*&nbsp;0000&nbsp;0000&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850254">tx</span>&nbsp;<span class="op" id="1850257">=</span>&nbsp;<span class="op" id="1850259">(</span><span class="op" id="1850260">(</span><span class="num" id="1850261">1</span>&nbsp;<span class="op" id="1850263">&lt;&lt;</span>&nbsp;<span class="op" id="1850266">(</span><span class="ident" id="1850267">bitx</span>&nbsp;<span class="op" id="1850272">+</span>&nbsp;<span class="num" id="1850274">1</span><span class="op" id="1850275">)</span><span class="op" id="1850276">)</span>&nbsp;<span class="op" id="1850278">-</span>&nbsp;<span class="num" id="1850280">1</span><span class="op" id="1850281">)</span>&nbsp;<span class="op" id="1850283">^</span>&nbsp;<span class="num" id="1850285">0xFF</span>&nbsp;<span class="comment" id="1850290">/*&nbsp;1000&nbsp;0000&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850307">t2</span>&nbsp;<span class="op" id="1850310">=</span>&nbsp;<span class="op" id="1850312">(</span><span class="op" id="1850313">(</span><span class="num" id="1850314">1</span>&nbsp;<span class="op" id="1850316">&lt;&lt;</span>&nbsp;<span class="op" id="1850319">(</span><span class="ident" id="1850320">bit2</span>&nbsp;<span class="op" id="1850325">+</span>&nbsp;<span class="num" id="1850327">1</span><span class="op" id="1850328">)</span><span class="op" id="1850329">)</span>&nbsp;<span class="op" id="1850331">-</span>&nbsp;<span class="num" id="1850333">1</span><span class="op" id="1850334">)</span>&nbsp;<span class="op" id="1850336">^</span>&nbsp;<span class="num" id="1850338">0xFF</span>&nbsp;<span class="comment" id="1850343">/*&nbsp;1100&nbsp;0000&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850360">t3</span>&nbsp;<span class="op" id="1850363">=</span>&nbsp;<span class="op" id="1850365">(</span><span class="op" id="1850366">(</span><span class="num" id="1850367">1</span>&nbsp;<span class="op" id="1850369">&lt;&lt;</span>&nbsp;<span class="op" id="1850372">(</span><span class="ident" id="1850373">bit3</span>&nbsp;<span class="op" id="1850378">+</span>&nbsp;<span class="num" id="1850380">1</span><span class="op" id="1850381">)</span><span class="op" id="1850382">)</span>&nbsp;<span class="op" id="1850384">-</span>&nbsp;<span class="num" id="1850386">1</span><span class="op" id="1850387">)</span>&nbsp;<span class="op" id="1850389">^</span>&nbsp;<span class="num" id="1850391">0xFF</span>&nbsp;<span class="comment" id="1850396">/*&nbsp;1110&nbsp;0000&nbsp;*/</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850413">t4</span>&nbsp;<span class="op" id="1850416">=</span>&nbsp;<span class="op" id="1850418">(</span><span class="op" id="1850419">(</span><span class="num" id="1850420">1</span>&nbsp;<span class="op" id="1850422">&lt;&lt;</span>&nbsp;<span class="op" id="1850425">(</span><span class="ident" id="1850426">bit4</span>&nbsp;<span class="op" id="1850431">+</span>&nbsp;<span class="num" id="1850433">1</span><span class="op" id="1850434">)</span><span class="op" id="1850435">)</span>&nbsp;<span class="op" id="1850437">-</span>&nbsp;<span class="num" id="1850439">1</span><span class="op" id="1850440">)</span>&nbsp;<span class="op" id="1850442">^</span>&nbsp;<span class="num" id="1850444">0xFF</span>&nbsp;<span class="comment" id="1850449">/*&nbsp;1111&nbsp;0000&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850466">t5</span>&nbsp;<span class="op" id="1850469">=</span>&nbsp;<span class="op" id="1850471">(</span><span class="op" id="1850472">(</span><span class="num" id="1850473">1</span>&nbsp;<span class="op" id="1850475">&lt;&lt;</span>&nbsp;<span class="op" id="1850478">(</span><span class="ident" id="1850479">bit5</span>&nbsp;<span class="op" id="1850484">+</span>&nbsp;<span class="num" id="1850486">1</span><span class="op" id="1850487">)</span><span class="op" id="1850488">)</span>&nbsp;<span class="op" id="1850490">-</span>&nbsp;<span class="num" id="1850492">1</span><span class="op" id="1850493">)</span>&nbsp;<span class="op" id="1850495">^</span>&nbsp;<span class="num" id="1850497">0xFF</span>&nbsp;<span class="comment" id="1850502">/*&nbsp;1111&nbsp;1000&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850520">rune1</span>&nbsp;<span class="op" id="1850526">=</span>&nbsp;<span class="op" id="1850528">(</span><span class="num" id="1850529">1</span>&nbsp;<span class="op" id="1850531">&lt;&lt;</span>&nbsp;<span class="op" id="1850534">(</span><span class="ident" id="1850535">bit1</span>&nbsp;<span class="op" id="1850540">+</span>&nbsp;<span class="num" id="1850542">0</span><span class="op" id="1850543">*</span><span class="ident" id="1850544">bitx</span><span class="op" id="1850548">)</span><span class="op" id="1850549">)</span>&nbsp;<span class="op" id="1850551">-</span>&nbsp;<span class="num" id="1850553">1</span>&nbsp;<span class="comment" id="1850555">/*&nbsp;0000&nbsp;0000&nbsp;0111&nbsp;1111&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850582">rune2</span>&nbsp;<span class="op" id="1850588">=</span>&nbsp;<span class="op" id="1850590">(</span><span class="num" id="1850591">1</span>&nbsp;<span class="op" id="1850593">&lt;&lt;</span>&nbsp;<span class="op" id="1850596">(</span><span class="ident" id="1850597">bit2</span>&nbsp;<span class="op" id="1850602">+</span>&nbsp;<span class="num" id="1850604">1</span><span class="op" id="1850605">*</span><span class="ident" id="1850606">bitx</span><span class="op" id="1850610">)</span><span class="op" id="1850611">)</span>&nbsp;<span class="op" id="1850613">-</span>&nbsp;<span class="num" id="1850615">1</span>&nbsp;<span class="comment" id="1850617">/*&nbsp;0000&nbsp;0111&nbsp;1111&nbsp;1111&nbsp;*/</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850644">rune3</span>&nbsp;<span class="op" id="1850650">=</span>&nbsp;<span class="op" id="1850652">(</span><span class="num" id="1850653">1</span>&nbsp;<span class="op" id="1850655">&lt;&lt;</span>&nbsp;<span class="op" id="1850658">(</span><span class="ident" id="1850659">bit3</span>&nbsp;<span class="op" id="1850664">+</span>&nbsp;<span class="num" id="1850666">2</span><span class="op" id="1850667">*</span><span class="ident" id="1850668">bitx</span><span class="op" id="1850672">)</span><span class="op" id="1850673">)</span>&nbsp;<span class="op" id="1850675">-</span>&nbsp;<span class="num" id="1850677">1</span>&nbsp;<span class="comment" id="1850679">/*&nbsp;1111&nbsp;1111&nbsp;1111&nbsp;1111&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850706">rune4</span>&nbsp;<span class="op" id="1850712">=</span>&nbsp;<span class="op" id="1850714">(</span><span class="num" id="1850715">1</span>&nbsp;<span class="op" id="1850717">&lt;&lt;</span>&nbsp;<span class="op" id="1850720">(</span><span class="ident" id="1850721">bit4</span>&nbsp;<span class="op" id="1850726">+</span>&nbsp;<span class="num" id="1850728">3</span><span class="op" id="1850729">*</span><span class="ident" id="1850730">bitx</span><span class="op" id="1850734">)</span><span class="op" id="1850735">)</span>&nbsp;<span class="op" id="1850737">-</span>&nbsp;<span class="num" id="1850739">1</span>&nbsp;<span class="comment" id="1850741">/*&nbsp;0001&nbsp;1111&nbsp;1111&nbsp;1111&nbsp;1111&nbsp;1111&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850779">maskx</span>&nbsp;<span class="op" id="1850785">=</span>&nbsp;<span class="op" id="1850787">(</span><span class="num" id="1850788">1</span>&nbsp;<span class="op" id="1850790">&lt;&lt;</span>&nbsp;<span class="ident" id="1850793">bitx</span><span class="op" id="1850797">)</span>&nbsp;<span class="op" id="1850799">-</span>&nbsp;<span class="num" id="1850801">1</span>&nbsp;<span class="comment" id="1850803">/*&nbsp;0011&nbsp;1111&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850820">testx</span>&nbsp;<span class="op" id="1850826">=</span>&nbsp;<span class="ident" id="1850828">maskx</span>&nbsp;<span class="op" id="1850834">^</span>&nbsp;<span class="num" id="1850836">0xFF</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1850844">/*&nbsp;1100&nbsp;0000&nbsp;*/</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850862">runeerror</span>&nbsp;<span class="op" id="1850872">=</span>&nbsp;<span class="num" id="1850874">0xFFFD</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850882">runeself</span>&nbsp;&nbsp;<span class="op" id="1850892">=</span>&nbsp;<span class="num" id="1850894">0x80</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850901">surrogateMin</span>&nbsp;<span class="op" id="1850914">=</span>&nbsp;<span class="num" id="1850916">0xD800</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850924">surrogateMax</span>&nbsp;<span class="op" id="1850937">=</span>&nbsp;<span class="num" id="1850939">0xDFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850948">bad</span>&nbsp;<span class="op" id="1850952">=</span>&nbsp;<span class="ident" id="1850954">runeerror</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1850966">runemax</span>&nbsp;<span class="op" id="1850974">=</span>&nbsp;<span class="num" id="1850976">0x10FFFF</span>&nbsp;<span class="comment" id="1850985">/*&nbsp;maximum&nbsp;rune&nbsp;value&nbsp;*/</span><br>
<span class="lineno">55</span><span class="op" id="1851010">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1851013">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Modified&nbsp;by&nbsp;Wei-Hwa&nbsp;Huang,&nbsp;Google&nbsp;Inc.,&nbsp;on&nbsp;2004-09-24<br>
<span class="lineno"></span>&nbsp;*&nbsp;This&nbsp;is&nbsp;a&nbsp;slower&nbsp;but&nbsp;&#34;safe&#34;&nbsp;version&nbsp;of&nbsp;the&nbsp;old&nbsp;chartorune<br>
<span class="lineno">60</span>&nbsp;*&nbsp;that&nbsp;works&nbsp;on&nbsp;strings&nbsp;that&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;null-terminated.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;If&nbsp;you&nbsp;know&nbsp;for&nbsp;sure&nbsp;that&nbsp;your&nbsp;string&nbsp;is&nbsp;null-terminated,<br>
<span class="lineno"></span>&nbsp;*&nbsp;chartorune&nbsp;will&nbsp;be&nbsp;a&nbsp;bit&nbsp;faster.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno">65</span>&nbsp;*&nbsp;It&nbsp;is&nbsp;guaranteed&nbsp;not&nbsp;to&nbsp;attempt&nbsp;to&nbsp;access&nbsp;&#34;length&#34;<br>
<span class="lineno"></span>&nbsp;*&nbsp;past&nbsp;the&nbsp;incoming&nbsp;pointer.&nbsp;&nbsp;This&nbsp;is&nbsp;to&nbsp;avoid<br>
<span class="lineno"></span>&nbsp;*&nbsp;possible&nbsp;access&nbsp;violations.&nbsp;&nbsp;If&nbsp;the&nbsp;string&nbsp;appears&nbsp;to&nbsp;be<br>
<span class="lineno"></span>&nbsp;*&nbsp;well-formed&nbsp;but&nbsp;incomplete&nbsp;(i.e.,&nbsp;to&nbsp;get&nbsp;the&nbsp;whole&nbsp;Rune<br>
<span class="lineno"></span>&nbsp;*&nbsp;we&#39;d&nbsp;need&nbsp;to&nbsp;read&nbsp;past&nbsp;str+length)&nbsp;then&nbsp;we&#39;ll&nbsp;set&nbsp;the&nbsp;Rune<br>
<span class="lineno">70</span>&nbsp;*&nbsp;to&nbsp;Bad&nbsp;and&nbsp;return&nbsp;0.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Note&nbsp;that&nbsp;if&nbsp;we&nbsp;have&nbsp;decoding&nbsp;problems&nbsp;for&nbsp;other<br>
<span class="lineno"></span>&nbsp;*&nbsp;reasons,&nbsp;we&nbsp;return&nbsp;1&nbsp;instead&nbsp;of&nbsp;0.<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno">75</span><span class="keyword" id="1851708">func</span>&nbsp;<span class="ident" id="1851713">charntorune</span><span class="op" id="1851724">(</span><span class="ident" id="1851725">s</span>&nbsp;<span class="builtintype" id="1851727">string</span><span class="op" id="1851733">)</span>&nbsp;<span class="op" id="1851735">(</span><span class="builtintype" id="1851736">rune</span><span class="op" id="1851740">,</span>&nbsp;<span class="builtintype" id="1851742">int</span><span class="op" id="1851745">)</span>&nbsp;<span class="op" id="1851747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1851750">/*&nbsp;When&nbsp;we&#39;re&nbsp;not&nbsp;allowed&nbsp;to&nbsp;read&nbsp;anything&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1851797">if</span>&nbsp;<span class="builtinfunc" id="1851800">len</span><span class="op" id="1851803">(</span><span class="ident" id="1851804">s</span><span class="op" id="1851805">)</span>&nbsp;<span class="op" id="1851807">&lt;=</span>&nbsp;<span class="num" id="1851810">0</span>&nbsp;<span class="op" id="1851812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1851816">return</span>&nbsp;<span class="ident" id="1851823">bad</span><span class="op" id="1851826">,</span>&nbsp;<span class="num" id="1851828">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1851831">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1851835">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;one&nbsp;character&nbsp;sequence&nbsp;(7-bit&nbsp;value)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp00000-0007F&nbsp;=&gt;&nbsp;T1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1851907">c</span>&nbsp;<span class="op" id="1851909">:=</span>&nbsp;<span class="ident" id="1851912">s</span><span class="op" id="1851913">[</span><span class="num" id="1851914">0</span><span class="op" id="1851915">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1851918">if</span>&nbsp;<span class="ident" id="1851921">c</span>&nbsp;<span class="op" id="1851923">&lt;</span>&nbsp;<span class="ident" id="1851925">tx</span>&nbsp;<span class="op" id="1851928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1851932">return</span>&nbsp;<span class="builtintype" id="1851939">rune</span><span class="op" id="1851943">(</span><span class="ident" id="1851944">c</span><span class="op" id="1851945">)</span><span class="op" id="1851946">,</span>&nbsp;<span class="num" id="1851948">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1851951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1851955">//&nbsp;If&nbsp;we&nbsp;can&#39;t&nbsp;read&nbsp;more&nbsp;than&nbsp;one&nbsp;character&nbsp;we&nbsp;must&nbsp;stop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852013">if</span>&nbsp;<span class="builtinfunc" id="1852016">len</span><span class="op" id="1852019">(</span><span class="ident" id="1852020">s</span><span class="op" id="1852021">)</span>&nbsp;<span class="op" id="1852023">&lt;=</span>&nbsp;<span class="num" id="1852026">1</span>&nbsp;<span class="op" id="1852028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852032">return</span>&nbsp;<span class="ident" id="1852039">bad</span><span class="op" id="1852042">,</span>&nbsp;<span class="num" id="1852044">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1852051">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;two&nbsp;character&nbsp;sequence&nbsp;(11-bit&nbsp;value)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp0080-07FF&nbsp;=&gt;&nbsp;t2&nbsp;tx<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852125">c1</span>&nbsp;<span class="op" id="1852128">:=</span>&nbsp;<span class="ident" id="1852131">s</span><span class="op" id="1852132">[</span><span class="num" id="1852133">1</span><span class="op" id="1852134">]</span>&nbsp;<span class="op" id="1852136">^</span>&nbsp;<span class="ident" id="1852138">tx</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852142">if</span>&nbsp;<span class="op" id="1852145">(</span><span class="ident" id="1852146">c1</span>&nbsp;<span class="op" id="1852149">&amp;</span>&nbsp;<span class="ident" id="1852151">testx</span><span class="op" id="1852156">)</span>&nbsp;<span class="op" id="1852158">!=</span>&nbsp;<span class="num" id="1852161">0</span>&nbsp;<span class="op" id="1852163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852167">return</span>&nbsp;<span class="ident" id="1852174">bad</span><span class="op" id="1852177">,</span>&nbsp;<span class="num" id="1852179">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852185">if</span>&nbsp;<span class="ident" id="1852188">c</span>&nbsp;<span class="op" id="1852190">&lt;</span>&nbsp;<span class="ident" id="1852192">t3</span>&nbsp;<span class="op" id="1852195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852199">if</span>&nbsp;<span class="ident" id="1852202">c</span>&nbsp;<span class="op" id="1852204">&lt;</span>&nbsp;<span class="ident" id="1852206">t2</span>&nbsp;<span class="op" id="1852209">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852214">return</span>&nbsp;<span class="ident" id="1852221">bad</span><span class="op" id="1852224">,</span>&nbsp;<span class="num" id="1852226">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852234">l</span>&nbsp;<span class="op" id="1852236">:=</span>&nbsp;<span class="op" id="1852239">(</span><span class="op" id="1852240">(</span><span class="builtintype" id="1852241">rune</span><span class="op" id="1852245">(</span><span class="ident" id="1852246">c</span><span class="op" id="1852247">)</span>&nbsp;<span class="op" id="1852249">&lt;&lt;</span>&nbsp;<span class="ident" id="1852252">bitx</span><span class="op" id="1852256">)</span>&nbsp;<span class="op" id="1852258">|</span>&nbsp;<span class="builtintype" id="1852260">rune</span><span class="op" id="1852264">(</span><span class="ident" id="1852265">c1</span><span class="op" id="1852267">)</span><span class="op" id="1852268">)</span>&nbsp;<span class="op" id="1852270">&amp;</span>&nbsp;<span class="ident" id="1852272">rune2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852280">if</span>&nbsp;<span class="ident" id="1852283">l</span>&nbsp;<span class="op" id="1852285">&lt;=</span>&nbsp;<span class="ident" id="1852288">rune1</span>&nbsp;<span class="op" id="1852294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852299">return</span>&nbsp;<span class="ident" id="1852306">bad</span><span class="op" id="1852309">,</span>&nbsp;<span class="num" id="1852311">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852319">return</span>&nbsp;<span class="ident" id="1852326">l</span><span class="op" id="1852327">,</span>&nbsp;<span class="num" id="1852329">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1852336">//&nbsp;If&nbsp;we&nbsp;can&#39;t&nbsp;read&nbsp;more&nbsp;than&nbsp;two&nbsp;characters&nbsp;we&nbsp;must&nbsp;stop</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852395">if</span>&nbsp;<span class="builtinfunc" id="1852398">len</span><span class="op" id="1852401">(</span><span class="ident" id="1852402">s</span><span class="op" id="1852403">)</span>&nbsp;<span class="op" id="1852405">&lt;=</span>&nbsp;<span class="num" id="1852408">2</span>&nbsp;<span class="op" id="1852410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852414">return</span>&nbsp;<span class="ident" id="1852421">bad</span><span class="op" id="1852424">,</span>&nbsp;<span class="num" id="1852426">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1852433">/*<br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;three&nbsp;character&nbsp;sequence&nbsp;(16-bit&nbsp;value)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp0800-FFFF&nbsp;=&gt;&nbsp;t3&nbsp;tx&nbsp;tx<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852512">c2</span>&nbsp;<span class="op" id="1852515">:=</span>&nbsp;<span class="ident" id="1852518">s</span><span class="op" id="1852519">[</span><span class="num" id="1852520">2</span><span class="op" id="1852521">]</span>&nbsp;<span class="op" id="1852523">^</span>&nbsp;<span class="ident" id="1852525">tx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852529">if</span>&nbsp;<span class="op" id="1852532">(</span><span class="ident" id="1852533">c2</span>&nbsp;<span class="op" id="1852536">&amp;</span>&nbsp;<span class="ident" id="1852538">testx</span><span class="op" id="1852543">)</span>&nbsp;<span class="op" id="1852545">!=</span>&nbsp;<span class="num" id="1852548">0</span>&nbsp;<span class="op" id="1852550">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852554">return</span>&nbsp;<span class="ident" id="1852561">bad</span><span class="op" id="1852564">,</span>&nbsp;<span class="num" id="1852566">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852572">if</span>&nbsp;<span class="ident" id="1852575">c</span>&nbsp;<span class="op" id="1852577">&lt;</span>&nbsp;<span class="ident" id="1852579">t4</span>&nbsp;<span class="op" id="1852582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852586">l</span>&nbsp;<span class="op" id="1852588">:=</span>&nbsp;<span class="op" id="1852591">(</span><span class="op" id="1852592">(</span><span class="op" id="1852593">(</span><span class="op" id="1852594">(</span><span class="builtintype" id="1852595">rune</span><span class="op" id="1852599">(</span><span class="ident" id="1852600">c</span><span class="op" id="1852601">)</span>&nbsp;<span class="op" id="1852603">&lt;&lt;</span>&nbsp;<span class="ident" id="1852606">bitx</span><span class="op" id="1852610">)</span>&nbsp;<span class="op" id="1852612">|</span>&nbsp;<span class="builtintype" id="1852614">rune</span><span class="op" id="1852618">(</span><span class="ident" id="1852619">c1</span><span class="op" id="1852621">)</span><span class="op" id="1852622">)</span>&nbsp;<span class="op" id="1852624">&lt;&lt;</span>&nbsp;<span class="ident" id="1852627">bitx</span><span class="op" id="1852631">)</span>&nbsp;<span class="op" id="1852633">|</span>&nbsp;<span class="builtintype" id="1852635">rune</span><span class="op" id="1852639">(</span><span class="ident" id="1852640">c2</span><span class="op" id="1852642">)</span><span class="op" id="1852643">)</span>&nbsp;<span class="op" id="1852645">&amp;</span>&nbsp;<span class="ident" id="1852647">rune3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852655">if</span>&nbsp;<span class="ident" id="1852658">l</span>&nbsp;<span class="op" id="1852660">&lt;=</span>&nbsp;<span class="ident" id="1852663">rune2</span>&nbsp;<span class="op" id="1852669">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852674">return</span>&nbsp;<span class="ident" id="1852681">bad</span><span class="op" id="1852684">,</span>&nbsp;<span class="num" id="1852686">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852694">if</span>&nbsp;<span class="ident" id="1852697">surrogateMin</span>&nbsp;<span class="op" id="1852710">&lt;=</span>&nbsp;<span class="ident" id="1852713">l</span>&nbsp;<span class="op" id="1852715">&amp;&amp;</span>&nbsp;<span class="ident" id="1852718">l</span>&nbsp;<span class="op" id="1852720">&lt;=</span>&nbsp;<span class="ident" id="1852723">surrogateMax</span>&nbsp;<span class="op" id="1852736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852741">return</span>&nbsp;<span class="ident" id="1852748">bad</span><span class="op" id="1852751">,</span>&nbsp;<span class="num" id="1852753">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852757">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852761">return</span>&nbsp;<span class="ident" id="1852768">l</span><span class="op" id="1852769">,</span>&nbsp;<span class="num" id="1852771">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852778">if</span>&nbsp;<span class="builtinfunc" id="1852781">len</span><span class="op" id="1852784">(</span><span class="ident" id="1852785">s</span><span class="op" id="1852786">)</span>&nbsp;<span class="op" id="1852788">&lt;=</span>&nbsp;<span class="num" id="1852791">3</span>&nbsp;<span class="op" id="1852793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852797">return</span>&nbsp;<span class="ident" id="1852804">bad</span><span class="op" id="1852807">,</span>&nbsp;<span class="num" id="1852809">1</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1852816">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;four&nbsp;character&nbsp;sequence&nbsp;(21-bit&nbsp;value)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp10000-1FFFFF&nbsp;=&gt;&nbsp;t4&nbsp;tx&nbsp;tx&nbsp;tx<br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852900">c3</span>&nbsp;<span class="op" id="1852903">:=</span>&nbsp;<span class="ident" id="1852906">s</span><span class="op" id="1852907">[</span><span class="num" id="1852908">3</span><span class="op" id="1852909">]</span>&nbsp;<span class="op" id="1852911">^</span>&nbsp;<span class="ident" id="1852913">tx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852917">if</span>&nbsp;<span class="op" id="1852920">(</span><span class="ident" id="1852921">c3</span>&nbsp;<span class="op" id="1852924">&amp;</span>&nbsp;<span class="ident" id="1852926">testx</span><span class="op" id="1852931">)</span>&nbsp;<span class="op" id="1852933">!=</span>&nbsp;<span class="num" id="1852936">0</span>&nbsp;<span class="op" id="1852938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852942">return</span>&nbsp;<span class="ident" id="1852949">bad</span><span class="op" id="1852952">,</span>&nbsp;<span class="num" id="1852954">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1852957">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1852960">if</span>&nbsp;<span class="ident" id="1852963">c</span>&nbsp;<span class="op" id="1852965">&lt;</span>&nbsp;<span class="ident" id="1852967">t5</span>&nbsp;<span class="op" id="1852970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1852974">l</span>&nbsp;<span class="op" id="1852976">:=</span>&nbsp;<span class="op" id="1852979">(</span><span class="op" id="1852980">(</span><span class="op" id="1852981">(</span><span class="op" id="1852982">(</span><span class="op" id="1852983">(</span><span class="op" id="1852984">(</span><span class="builtintype" id="1852985">rune</span><span class="op" id="1852989">(</span><span class="ident" id="1852990">c</span><span class="op" id="1852991">)</span>&nbsp;<span class="op" id="1852993">&lt;&lt;</span>&nbsp;<span class="ident" id="1852996">bitx</span><span class="op" id="1853000">)</span>&nbsp;<span class="op" id="1853002">|</span>&nbsp;<span class="builtintype" id="1853004">rune</span><span class="op" id="1853008">(</span><span class="ident" id="1853009">c1</span><span class="op" id="1853011">)</span><span class="op" id="1853012">)</span>&nbsp;<span class="op" id="1853014">&lt;&lt;</span>&nbsp;<span class="ident" id="1853017">bitx</span><span class="op" id="1853021">)</span>&nbsp;<span class="op" id="1853023">|</span>&nbsp;<span class="builtintype" id="1853025">rune</span><span class="op" id="1853029">(</span><span class="ident" id="1853030">c2</span><span class="op" id="1853032">)</span><span class="op" id="1853033">)</span>&nbsp;<span class="op" id="1853035">&lt;&lt;</span>&nbsp;<span class="ident" id="1853038">bitx</span><span class="op" id="1853042">)</span>&nbsp;<span class="op" id="1853044">|</span>&nbsp;<span class="builtintype" id="1853046">rune</span><span class="op" id="1853050">(</span><span class="ident" id="1853051">c3</span><span class="op" id="1853053">)</span><span class="op" id="1853054">)</span>&nbsp;<span class="op" id="1853056">&amp;</span>&nbsp;<span class="ident" id="1853058">rune4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853066">if</span>&nbsp;<span class="ident" id="1853069">l</span>&nbsp;<span class="op" id="1853071">&lt;=</span>&nbsp;<span class="ident" id="1853074">rune3</span>&nbsp;<span class="op" id="1853080">||</span>&nbsp;<span class="ident" id="1853083">l</span>&nbsp;<span class="op" id="1853085">&gt;</span>&nbsp;<span class="ident" id="1853087">runemax</span>&nbsp;<span class="op" id="1853095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853100">return</span>&nbsp;<span class="ident" id="1853107">bad</span><span class="op" id="1853110">,</span>&nbsp;<span class="num" id="1853112">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1853116">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853120">return</span>&nbsp;<span class="ident" id="1853127">l</span><span class="op" id="1853128">,</span>&nbsp;<span class="num" id="1853130">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1853133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853137">//&nbsp;Support&nbsp;for&nbsp;5-byte&nbsp;or&nbsp;longer&nbsp;UTF-8&nbsp;would&nbsp;go&nbsp;here,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853195">//&nbsp;since&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;that,&nbsp;we&#39;ll&nbsp;just&nbsp;return&nbsp;bad.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853248">return</span>&nbsp;<span class="ident" id="1853255">bad</span><span class="op" id="1853258">,</span>&nbsp;<span class="num" id="1853260">1</span><br>
<span class="lineno"></span><span class="op" id="1853262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1853265">//&nbsp;runetochar&nbsp;converts&nbsp;r&nbsp;to&nbsp;bytes&nbsp;and&nbsp;writes&nbsp;the&nbsp;result&nbsp;to&nbsp;str.</span><br>
<span class="lineno"></span><span class="comment" id="1853329">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;generated.</span><br>
<span class="lineno">165</span><span class="keyword" id="1853371">func</span>&nbsp;<span class="ident" id="1853376">runetochar</span><span class="op" id="1853386">(</span><span class="ident" id="1853387">str</span>&nbsp;<span class="op" id="1853391">[</span><span class="op" id="1853392">]</span><span class="builtintype" id="1853393">byte</span><span class="op" id="1853397">,</span>&nbsp;<span class="ident" id="1853399">r</span>&nbsp;<span class="builtintype" id="1853401">rune</span><span class="op" id="1853405">)</span>&nbsp;<span class="builtintype" id="1853407">int</span>&nbsp;<span class="op" id="1853411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853414">/*&nbsp;runes&nbsp;are&nbsp;signed,&nbsp;so&nbsp;convert&nbsp;to&nbsp;unsigned&nbsp;for&nbsp;range&nbsp;check.&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1853479">c</span>&nbsp;<span class="op" id="1853481">:=</span>&nbsp;<span class="builtintype" id="1853484">uint32</span><span class="op" id="1853490">(</span><span class="ident" id="1853491">r</span><span class="op" id="1853492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853495">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;one&nbsp;character&nbsp;sequence<br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp00000-0007F&nbsp;=&gt;&nbsp;00-7F<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853556">if</span>&nbsp;<span class="ident" id="1853559">c</span>&nbsp;<span class="op" id="1853561">&lt;=</span>&nbsp;<span class="ident" id="1853564">rune1</span>&nbsp;<span class="op" id="1853570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1853574">str</span><span class="op" id="1853577">[</span><span class="num" id="1853578">0</span><span class="op" id="1853579">]</span>&nbsp;<span class="op" id="1853581">=</span>&nbsp;<span class="builtintype" id="1853583">byte</span><span class="op" id="1853587">(</span><span class="ident" id="1853588">c</span><span class="op" id="1853589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853593">return</span>&nbsp;<span class="num" id="1853600">1</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1853603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853606">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;two&nbsp;character&nbsp;sequence<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp0080-07FF&nbsp;=&gt;&nbsp;t2&nbsp;tx<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853665">if</span>&nbsp;<span class="ident" id="1853668">c</span>&nbsp;<span class="op" id="1853670">&lt;=</span>&nbsp;<span class="ident" id="1853673">rune2</span>&nbsp;<span class="op" id="1853679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1853683">str</span><span class="op" id="1853686">[</span><span class="num" id="1853687">0</span><span class="op" id="1853688">]</span>&nbsp;<span class="op" id="1853690">=</span>&nbsp;<span class="builtintype" id="1853692">byte</span><span class="op" id="1853696">(</span><span class="ident" id="1853697">t2</span>&nbsp;<span class="op" id="1853700">|</span>&nbsp;<span class="op" id="1853702">(</span><span class="ident" id="1853703">c</span>&nbsp;<span class="op" id="1853705">&gt;&gt;</span>&nbsp;<span class="op" id="1853708">(</span><span class="num" id="1853709">1</span>&nbsp;<span class="op" id="1853711">*</span>&nbsp;<span class="ident" id="1853713">bitx</span><span class="op" id="1853717">)</span><span class="op" id="1853718">)</span><span class="op" id="1853719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1853723">str</span><span class="op" id="1853726">[</span><span class="num" id="1853727">1</span><span class="op" id="1853728">]</span>&nbsp;<span class="op" id="1853730">=</span>&nbsp;<span class="builtintype" id="1853732">byte</span><span class="op" id="1853736">(</span><span class="ident" id="1853737">tx</span>&nbsp;<span class="op" id="1853740">|</span>&nbsp;<span class="op" id="1853742">(</span><span class="ident" id="1853743">c</span>&nbsp;<span class="op" id="1853745">&amp;</span>&nbsp;<span class="ident" id="1853747">maskx</span><span class="op" id="1853752">)</span><span class="op" id="1853753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1853757">return</span>&nbsp;<span class="num" id="1853764">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1853767">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1853771">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;If&nbsp;the&nbsp;rune&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;a&nbsp;surrogate&nbsp;half,&nbsp;convert&nbsp;it&nbsp;to&nbsp;the&nbsp;error&nbsp;rune.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;Do&nbsp;this&nbsp;test&nbsp;here&nbsp;because&nbsp;the&nbsp;error&nbsp;rune&nbsp;encodes&nbsp;to&nbsp;three&nbsp;bytes.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;Doing&nbsp;it&nbsp;earlier&nbsp;would&nbsp;duplicate&nbsp;work,&nbsp;since&nbsp;an&nbsp;out&nbsp;of&nbsp;range<br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;rune&nbsp;wouldn&#39;t&nbsp;have&nbsp;fit&nbsp;in&nbsp;one&nbsp;or&nbsp;two&nbsp;bytes.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1854045">if</span>&nbsp;<span class="ident" id="1854048">c</span>&nbsp;<span class="op" id="1854050">&gt;</span>&nbsp;<span class="ident" id="1854052">runemax</span>&nbsp;<span class="op" id="1854060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854064">c</span>&nbsp;<span class="op" id="1854066">=</span>&nbsp;<span class="ident" id="1854068">runeerror</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1854079">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1854082">if</span>&nbsp;<span class="ident" id="1854085">surrogateMin</span>&nbsp;<span class="op" id="1854098">&lt;=</span>&nbsp;<span class="ident" id="1854101">c</span>&nbsp;<span class="op" id="1854103">&amp;&amp;</span>&nbsp;<span class="ident" id="1854106">c</span>&nbsp;<span class="op" id="1854108">&lt;=</span>&nbsp;<span class="ident" id="1854111">surrogateMax</span>&nbsp;<span class="op" id="1854124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854128">c</span>&nbsp;<span class="op" id="1854130">=</span>&nbsp;<span class="ident" id="1854132">runeerror</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1854143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1854147">/*<br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;three&nbsp;character&nbsp;sequence<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp0800-FFFF&nbsp;=&gt;&nbsp;t3&nbsp;tx&nbsp;tx<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1854211">if</span>&nbsp;<span class="ident" id="1854214">c</span>&nbsp;<span class="op" id="1854216">&lt;=</span>&nbsp;<span class="ident" id="1854219">rune3</span>&nbsp;<span class="op" id="1854225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854229">str</span><span class="op" id="1854232">[</span><span class="num" id="1854233">0</span><span class="op" id="1854234">]</span>&nbsp;<span class="op" id="1854236">=</span>&nbsp;<span class="builtintype" id="1854238">byte</span><span class="op" id="1854242">(</span><span class="ident" id="1854243">t3</span>&nbsp;<span class="op" id="1854246">|</span>&nbsp;<span class="op" id="1854248">(</span><span class="ident" id="1854249">c</span>&nbsp;<span class="op" id="1854251">&gt;&gt;</span>&nbsp;<span class="op" id="1854254">(</span><span class="num" id="1854255">2</span>&nbsp;<span class="op" id="1854257">*</span>&nbsp;<span class="ident" id="1854259">bitx</span><span class="op" id="1854263">)</span><span class="op" id="1854264">)</span><span class="op" id="1854265">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854269">str</span><span class="op" id="1854272">[</span><span class="num" id="1854273">1</span><span class="op" id="1854274">]</span>&nbsp;<span class="op" id="1854276">=</span>&nbsp;<span class="builtintype" id="1854278">byte</span><span class="op" id="1854282">(</span><span class="ident" id="1854283">tx</span>&nbsp;<span class="op" id="1854286">|</span>&nbsp;<span class="op" id="1854288">(</span><span class="op" id="1854289">(</span><span class="ident" id="1854290">c</span>&nbsp;<span class="op" id="1854292">&gt;&gt;</span>&nbsp;<span class="op" id="1854295">(</span><span class="num" id="1854296">1</span>&nbsp;<span class="op" id="1854298">*</span>&nbsp;<span class="ident" id="1854300">bitx</span><span class="op" id="1854304">)</span><span class="op" id="1854305">)</span>&nbsp;<span class="op" id="1854307">&amp;</span>&nbsp;<span class="ident" id="1854309">maskx</span><span class="op" id="1854314">)</span><span class="op" id="1854315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854319">str</span><span class="op" id="1854322">[</span><span class="num" id="1854323">2</span><span class="op" id="1854324">]</span>&nbsp;<span class="op" id="1854326">=</span>&nbsp;<span class="builtintype" id="1854328">byte</span><span class="op" id="1854332">(</span><span class="ident" id="1854333">tx</span>&nbsp;<span class="op" id="1854336">|</span>&nbsp;<span class="op" id="1854338">(</span><span class="ident" id="1854339">c</span>&nbsp;<span class="op" id="1854341">&amp;</span>&nbsp;<span class="ident" id="1854343">maskx</span><span class="op" id="1854348">)</span><span class="op" id="1854349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1854353">return</span>&nbsp;<span class="num" id="1854360">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1854363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1854367">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;four&nbsp;character&nbsp;sequence&nbsp;(21-bit&nbsp;value)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10000-1FFFFF&nbsp;=&gt;&nbsp;t4&nbsp;tx&nbsp;tx&nbsp;tx<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854455">str</span><span class="op" id="1854458">[</span><span class="num" id="1854459">0</span><span class="op" id="1854460">]</span>&nbsp;<span class="op" id="1854462">=</span>&nbsp;<span class="builtintype" id="1854464">byte</span><span class="op" id="1854468">(</span><span class="ident" id="1854469">t4</span>&nbsp;<span class="op" id="1854472">|</span>&nbsp;<span class="op" id="1854474">(</span><span class="ident" id="1854475">c</span>&nbsp;<span class="op" id="1854477">&gt;&gt;</span>&nbsp;<span class="op" id="1854480">(</span><span class="num" id="1854481">3</span>&nbsp;<span class="op" id="1854483">*</span>&nbsp;<span class="ident" id="1854485">bitx</span><span class="op" id="1854489">)</span><span class="op" id="1854490">)</span><span class="op" id="1854491">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854494">str</span><span class="op" id="1854497">[</span><span class="num" id="1854498">1</span><span class="op" id="1854499">]</span>&nbsp;<span class="op" id="1854501">=</span>&nbsp;<span class="builtintype" id="1854503">byte</span><span class="op" id="1854507">(</span><span class="ident" id="1854508">tx</span>&nbsp;<span class="op" id="1854511">|</span>&nbsp;<span class="op" id="1854513">(</span><span class="op" id="1854514">(</span><span class="ident" id="1854515">c</span>&nbsp;<span class="op" id="1854517">&gt;&gt;</span>&nbsp;<span class="op" id="1854520">(</span><span class="num" id="1854521">2</span>&nbsp;<span class="op" id="1854523">*</span>&nbsp;<span class="ident" id="1854525">bitx</span><span class="op" id="1854529">)</span><span class="op" id="1854530">)</span>&nbsp;<span class="op" id="1854532">&amp;</span>&nbsp;<span class="ident" id="1854534">maskx</span><span class="op" id="1854539">)</span><span class="op" id="1854540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854543">str</span><span class="op" id="1854546">[</span><span class="num" id="1854547">2</span><span class="op" id="1854548">]</span>&nbsp;<span class="op" id="1854550">=</span>&nbsp;<span class="builtintype" id="1854552">byte</span><span class="op" id="1854556">(</span><span class="ident" id="1854557">tx</span>&nbsp;<span class="op" id="1854560">|</span>&nbsp;<span class="op" id="1854562">(</span><span class="op" id="1854563">(</span><span class="ident" id="1854564">c</span>&nbsp;<span class="op" id="1854566">&gt;&gt;</span>&nbsp;<span class="op" id="1854569">(</span><span class="num" id="1854570">1</span>&nbsp;<span class="op" id="1854572">*</span>&nbsp;<span class="ident" id="1854574">bitx</span><span class="op" id="1854578">)</span><span class="op" id="1854579">)</span>&nbsp;<span class="op" id="1854581">&amp;</span>&nbsp;<span class="ident" id="1854583">maskx</span><span class="op" id="1854588">)</span><span class="op" id="1854589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1854592">str</span><span class="op" id="1854595">[</span><span class="num" id="1854596">3</span><span class="op" id="1854597">]</span>&nbsp;<span class="op" id="1854599">=</span>&nbsp;<span class="builtintype" id="1854601">byte</span><span class="op" id="1854605">(</span><span class="ident" id="1854606">tx</span>&nbsp;<span class="op" id="1854609">|</span>&nbsp;<span class="op" id="1854611">(</span><span class="ident" id="1854612">c</span>&nbsp;<span class="op" id="1854614">&amp;</span>&nbsp;<span class="ident" id="1854616">maskx</span><span class="op" id="1854621">)</span><span class="op" id="1854622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1854625">return</span>&nbsp;<span class="num" id="1854632">4</span><br>
<span class="lineno"></span><span class="op" id="1854634">}</span>
</div>
</body>
</html>
