<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html" class="current">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7401427">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7401482">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7401536">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7401587">//&nbsp;Tests&nbsp;that&nbsp;involve&nbsp;both&nbsp;reading&nbsp;and&nbsp;writing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7401636">package</span>&nbsp;<span class="ident" id="7401644">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7401649">import</span>&nbsp;<span class="op" id="7401656">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401659">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401668">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401675">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401683">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401689">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401702">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401710">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401721">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7401732">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7401739">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7401742">func</span>&nbsp;<span class="ident" id="7401747">TestOver65kFiles</span><span class="op" id="7401763">(</span><span class="ident" id="7401764">t</span>&nbsp;<span class="op" id="7401766">*</span><span class="ident" id="7401767"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7401774">.</span><span class="ident" id="7401775"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7401776">)</span>&nbsp;<span class="op" id="7401778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7401781">buf</span>&nbsp;<span class="op" id="7401785">:=</span>&nbsp;<span class="builtinfunc" id="7401788">new</span><span class="op" id="7401791">(</span><span class="ident" id="7401792"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7401797">.</span><span class="ident" id="7401798"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7401804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7401807">w</span>&nbsp;<span class="op" id="7401809">:=</span>&nbsp;<span class="ident" id="7401812"><a href="/gostd/archive/zip/writer.go.html#5677192">NewWriter</a></span><span class="op" id="7401821">(</span><span class="ident" id="7401822"><a href="/gostd/archive/zip/zip_test.go.html#7401781">buf</a></span><span class="op" id="7401825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7401828">const</span>&nbsp;<span class="ident" id="7401834">nFiles</span>&nbsp;<span class="op" id="7401841">=</span>&nbsp;<span class="op" id="7401843">(</span><span class="num" id="7401844">1</span>&nbsp;<span class="op" id="7401846">&lt;&lt;</span>&nbsp;<span class="num" id="7401849">16</span><span class="op" id="7401851">)</span>&nbsp;<span class="op" id="7401853">+</span>&nbsp;<span class="num" id="7401855">42</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7401859">for</span>&nbsp;<span class="ident" id="7401863">i</span>&nbsp;<span class="op" id="7401865">:=</span>&nbsp;<span class="num" id="7401868">0</span><span class="op" id="7401869">;</span>&nbsp;<span class="ident" id="7401871"><a href="/gostd/archive/zip/zip_test.go.html#7401863">i</a></span>&nbsp;<span class="op" id="7401873">&lt;</span>&nbsp;<span class="ident" id="7401875"><a href="/gostd/archive/zip/zip_test.go.html#7401834">nFiles</a></span><span class="op" id="7401881">;</span>&nbsp;<span class="ident" id="7401883"><a href="/gostd/archive/zip/zip_test.go.html#7401863">i</a></span><span class="op" id="7401884">++</span>&nbsp;<span class="op" id="7401887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7401891">_</span><span class="op" id="7401892">,</span>&nbsp;<span class="ident" id="7401894">err</span>&nbsp;<span class="op" id="7401898">:=</span>&nbsp;<span class="ident" id="7401901"><a href="/gostd/archive/zip/zip_test.go.html#7401807">w</a></span><span class="op" id="7401902">.</span><span class="ident" id="7401903"><a href="/gostd/archive/zip/writer.go.html#5682372">CreateHeader</a></span><span class="op" id="7401915">(</span><span class="op" id="7401916">&amp;</span><span class="ident" id="7401917"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7401927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7401932"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7401936">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7401940"><a href="/gostd/archive/zip/zip_test.go.html#7401668">fmt</a></span><span class="op" id="7401943">.</span><span class="ident" id="7401944"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7401951">(</span><span class="string" id="7401952">&#34;%d.dat&#34;</span><span class="op" id="7401960">,</span>&nbsp;<span class="ident" id="7401962"><a href="/gostd/archive/zip/zip_test.go.html#7401863">i</a></span><span class="op" id="7401963">)</span><span class="op" id="7401964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7401969"><a href="/gostd/archive/zip/struct.go.html#5670463">Method</a></span><span class="op" id="7401975">:</span>&nbsp;<span class="ident" id="7401977"><a href="/gostd/archive/zip/struct.go.html#5668864">Store</a></span><span class="op" id="7401982">,</span>&nbsp;<span class="comment" id="7401984">//&nbsp;avoid&nbsp;Issue&nbsp;6136&nbsp;and&nbsp;Issue&nbsp;6138</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402021">}</span><span class="op" id="7402022">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402026">if</span>&nbsp;<span class="ident" id="7402029"><a href="/gostd/archive/zip/zip_test.go.html#7401894">err</a></span>&nbsp;<span class="op" id="7402033">!=</span>&nbsp;<span class="builtintype" id="7402036">nil</span>&nbsp;<span class="op" id="7402040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402045"><a href="/gostd/archive/zip/zip_test.go.html#7401764">t</a></span><span class="op" id="7402046">.</span><span class="ident" id="7402047"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7402053">(</span><span class="string" id="7402054">&#34;creating&nbsp;file&nbsp;%d:&nbsp;%v&#34;</span><span class="op" id="7402076">,</span>&nbsp;<span class="ident" id="7402078"><a href="/gostd/archive/zip/zip_test.go.html#7401863">i</a></span><span class="op" id="7402079">,</span>&nbsp;<span class="ident" id="7402081"><a href="/gostd/archive/zip/zip_test.go.html#7401894">err</a></span><span class="op" id="7402084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402094">if</span>&nbsp;<span class="ident" id="7402097">err</span>&nbsp;<span class="op" id="7402101">:=</span>&nbsp;<span class="ident" id="7402104"><a href="/gostd/archive/zip/zip_test.go.html#7401807">w</a></span><span class="op" id="7402105">.</span><span class="ident" id="7402106"><a href="/gostd/archive/zip/writer.go.html#5677642">Close</a></span><span class="op" id="7402111">(</span><span class="op" id="7402112">)</span><span class="op" id="7402113">;</span>&nbsp;<span class="ident" id="7402115"><a href="/gostd/archive/zip/zip_test.go.html#7402097">err</a></span>&nbsp;<span class="op" id="7402119">!=</span>&nbsp;<span class="builtintype" id="7402122">nil</span>&nbsp;<span class="op" id="7402126">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402130"><a href="/gostd/archive/zip/zip_test.go.html#7401764">t</a></span><span class="op" id="7402131">.</span><span class="ident" id="7402132"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7402138">(</span><span class="string" id="7402139">&#34;Writer.Close:&nbsp;%v&#34;</span><span class="op" id="7402157">,</span>&nbsp;<span class="ident" id="7402159"><a href="/gostd/archive/zip/zip_test.go.html#7402097">err</a></span><span class="op" id="7402162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402168">s</span>&nbsp;<span class="op" id="7402170">:=</span>&nbsp;<span class="ident" id="7402173"><a href="/gostd/archive/zip/zip_test.go.html#7401781">buf</a></span><span class="op" id="7402176">.</span><span class="ident" id="7402177"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7402183">(</span><span class="op" id="7402184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402187">zr</span><span class="op" id="7402189">,</span>&nbsp;<span class="ident" id="7402191">err</span>&nbsp;<span class="op" id="7402195">:=</span>&nbsp;<span class="ident" id="7402198"><a href="/gostd/archive/zip/reader.go.html#5654283">NewReader</a></span><span class="op" id="7402207">(</span><span class="ident" id="7402208"><a href="/gostd/archive/zip/zip_test.go.html#7401710">strings</a></span><span class="op" id="7402215">.</span><span class="ident" id="7402216"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7402225">(</span><span class="ident" id="7402226"><a href="/gostd/archive/zip/zip_test.go.html#7402168">s</a></span><span class="op" id="7402227">)</span><span class="op" id="7402228">,</span>&nbsp;<span class="builtintype" id="7402230">int64</span><span class="op" id="7402235">(</span><span class="builtinfunc" id="7402236">len</span><span class="op" id="7402239">(</span><span class="ident" id="7402240"><a href="/gostd/archive/zip/zip_test.go.html#7402168">s</a></span><span class="op" id="7402241">)</span><span class="op" id="7402242">)</span><span class="op" id="7402243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402246">if</span>&nbsp;<span class="ident" id="7402249"><a href="/gostd/archive/zip/zip_test.go.html#7402191">err</a></span>&nbsp;<span class="op" id="7402253">!=</span>&nbsp;<span class="builtintype" id="7402256">nil</span>&nbsp;<span class="op" id="7402260">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402264"><a href="/gostd/archive/zip/zip_test.go.html#7401764">t</a></span><span class="op" id="7402265">.</span><span class="ident" id="7402266"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7402272">(</span><span class="string" id="7402273">&#34;NewReader:&nbsp;%v&#34;</span><span class="op" id="7402288">,</span>&nbsp;<span class="ident" id="7402290"><a href="/gostd/archive/zip/zip_test.go.html#7402191">err</a></span><span class="op" id="7402293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402299">if</span>&nbsp;<span class="ident" id="7402302">got</span>&nbsp;<span class="op" id="7402306">:=</span>&nbsp;<span class="builtinfunc" id="7402309">len</span><span class="op" id="7402312">(</span><span class="ident" id="7402313"><a href="/gostd/archive/zip/zip_test.go.html#7402187">zr</a></span><span class="op" id="7402315">.</span><span class="ident" id="7402316"><a href="/gostd/archive/zip/reader.go.html#5653528">File</a></span><span class="op" id="7402320">)</span><span class="op" id="7402321">;</span>&nbsp;<span class="ident" id="7402323"><a href="/gostd/archive/zip/zip_test.go.html#7402302">got</a></span>&nbsp;<span class="op" id="7402327">!=</span>&nbsp;<span class="ident" id="7402330"><a href="/gostd/archive/zip/zip_test.go.html#7401834">nFiles</a></span>&nbsp;<span class="op" id="7402337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402341"><a href="/gostd/archive/zip/zip_test.go.html#7401764">t</a></span><span class="op" id="7402342">.</span><span class="ident" id="7402343"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7402349">(</span><span class="string" id="7402350">&#34;File&nbsp;contains&nbsp;%d&nbsp;files,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7402383">,</span>&nbsp;<span class="ident" id="7402385"><a href="/gostd/archive/zip/zip_test.go.html#7402302">got</a></span><span class="op" id="7402388">,</span>&nbsp;<span class="ident" id="7402390"><a href="/gostd/archive/zip/zip_test.go.html#7401834">nFiles</a></span><span class="op" id="7402396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402399">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402402">for</span>&nbsp;<span class="ident" id="7402406">i</span>&nbsp;<span class="op" id="7402408">:=</span>&nbsp;<span class="num" id="7402411">0</span><span class="op" id="7402412">;</span>&nbsp;<span class="ident" id="7402414"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span>&nbsp;<span class="op" id="7402416">&lt;</span>&nbsp;<span class="ident" id="7402418"><a href="/gostd/archive/zip/zip_test.go.html#7401834">nFiles</a></span><span class="op" id="7402424">;</span>&nbsp;<span class="ident" id="7402426"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span><span class="op" id="7402427">++</span>&nbsp;<span class="op" id="7402430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402434">want</span>&nbsp;<span class="op" id="7402439">:=</span>&nbsp;<span class="ident" id="7402442"><a href="/gostd/archive/zip/zip_test.go.html#7401668">fmt</a></span><span class="op" id="7402445">.</span><span class="ident" id="7402446"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7402453">(</span><span class="string" id="7402454">&#34;%d.dat&#34;</span><span class="op" id="7402462">,</span>&nbsp;<span class="ident" id="7402464"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span><span class="op" id="7402465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402469">if</span>&nbsp;<span class="ident" id="7402472"><a href="/gostd/archive/zip/zip_test.go.html#7402187">zr</a></span><span class="op" id="7402474">.</span><span class="ident" id="7402475"><a href="/gostd/archive/zip/reader.go.html#5653528">File</a></span><span class="op" id="7402479">[</span><span class="ident" id="7402480"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span><span class="op" id="7402481">]</span><span class="op" id="7402482">.</span><span class="ident" id="7402483"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span>&nbsp;<span class="op" id="7402488">!=</span>&nbsp;<span class="ident" id="7402491"><a href="/gostd/archive/zip/zip_test.go.html#7402434">want</a></span>&nbsp;<span class="op" id="7402496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402501"><a href="/gostd/archive/zip/zip_test.go.html#7401764">t</a></span><span class="op" id="7402502">.</span><span class="ident" id="7402503"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7402509">(</span><span class="string" id="7402510">&#34;File(%d)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7402534">,</span>&nbsp;<span class="ident" id="7402536"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span><span class="op" id="7402537">,</span>&nbsp;<span class="ident" id="7402539"><a href="/gostd/archive/zip/zip_test.go.html#7402187">zr</a></span><span class="op" id="7402541">.</span><span class="ident" id="7402542"><a href="/gostd/archive/zip/reader.go.html#5653528">File</a></span><span class="op" id="7402546">[</span><span class="ident" id="7402547"><a href="/gostd/archive/zip/zip_test.go.html#7402406">i</a></span><span class="op" id="7402548">]</span><span class="op" id="7402549">.</span><span class="ident" id="7402550"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7402554">,</span>&nbsp;<span class="ident" id="7402556"><a href="/gostd/archive/zip/zip_test.go.html#7402434">want</a></span><span class="op" id="7402560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402564">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402567">}</span><br>
<span class="lineno"></span><span class="op" id="7402569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7402572">func</span>&nbsp;<span class="ident" id="7402577">TestModTime</span><span class="op" id="7402588">(</span><span class="ident" id="7402589">t</span>&nbsp;<span class="op" id="7402591">*</span><span class="ident" id="7402592"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7402599">.</span><span class="ident" id="7402600"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7402601">)</span>&nbsp;<span class="op" id="7402603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402606">var</span>&nbsp;<span class="ident" id="7402610">testTime</span>&nbsp;<span class="op" id="7402619">=</span>&nbsp;<span class="ident" id="7402621"><a href="/gostd/archive/zip/zip_test.go.html#7401732">time</a></span><span class="op" id="7402625">.</span><span class="ident" id="7402626"><a href="/gostd/time/time.go.html#2750075">Date</a></span><span class="op" id="7402630">(</span><span class="num" id="7402631">2009</span><span class="op" id="7402635">,</span>&nbsp;<span class="ident" id="7402637"><a href="/gostd/archive/zip/zip_test.go.html#7401732">time</a></span><span class="op" id="7402641">.</span><span class="ident" id="7402642"><a href="/gostd/time/time.go.html#2723447">November</a></span><span class="op" id="7402650">,</span>&nbsp;<span class="num" id="7402652">10</span><span class="op" id="7402654">,</span>&nbsp;<span class="num" id="7402656">23</span><span class="op" id="7402658">,</span>&nbsp;<span class="num" id="7402660">45</span><span class="op" id="7402662">,</span>&nbsp;<span class="num" id="7402664">58</span><span class="op" id="7402666">,</span>&nbsp;<span class="num" id="7402668">0</span><span class="op" id="7402669">,</span>&nbsp;<span class="ident" id="7402671"><a href="/gostd/archive/zip/zip_test.go.html#7401732">time</a></span><span class="op" id="7402675">.</span><span class="ident" id="7402676"><a href="/gostd/time/zoneinfo.go.html#2756102">UTC</a></span><span class="op" id="7402679">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402682">fh</span>&nbsp;<span class="op" id="7402685">:=</span>&nbsp;<span class="builtinfunc" id="7402688">new</span><span class="op" id="7402691">(</span><span class="ident" id="7402692"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7402702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402705"><a href="/gostd/archive/zip/zip_test.go.html#7402682">fh</a></span><span class="op" id="7402707">.</span><span class="ident" id="7402708"><a href="/gostd/archive/zip/struct.go.html#5673845">SetModTime</a></span><span class="op" id="7402718">(</span><span class="ident" id="7402719"><a href="/gostd/archive/zip/zip_test.go.html#7402610">testTime</a></span><span class="op" id="7402727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402730">outTime</span>&nbsp;<span class="op" id="7402738">:=</span>&nbsp;<span class="ident" id="7402741"><a href="/gostd/archive/zip/zip_test.go.html#7402682">fh</a></span><span class="op" id="7402743">.</span><span class="ident" id="7402744"><a href="/gostd/archive/zip/struct.go.html#5673632">ModTime</a></span><span class="op" id="7402751">(</span><span class="op" id="7402752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7402755">if</span>&nbsp;<span class="op" id="7402758">!</span><span class="ident" id="7402759"><a href="/gostd/archive/zip/zip_test.go.html#7402730">outTime</a></span><span class="op" id="7402766">.</span><span class="ident" id="7402767"><a href="/gostd/time/time.go.html#2723199">Equal</a></span><span class="op" id="7402772">(</span><span class="ident" id="7402773"><a href="/gostd/archive/zip/zip_test.go.html#7402610">testTime</a></span><span class="op" id="7402781">)</span>&nbsp;<span class="op" id="7402783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402787"><a href="/gostd/archive/zip/zip_test.go.html#7402589">t</a></span><span class="op" id="7402788">.</span><span class="ident" id="7402789"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7402795">(</span><span class="string" id="7402796">&#34;times&nbsp;don&#39;t&nbsp;match:&nbsp;got&nbsp;%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7402832">,</span>&nbsp;<span class="ident" id="7402834"><a href="/gostd/archive/zip/zip_test.go.html#7402730">outTime</a></span><span class="op" id="7402841">,</span>&nbsp;<span class="ident" id="7402843"><a href="/gostd/archive/zip/zip_test.go.html#7402610">testTime</a></span><span class="op" id="7402851">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7402854">}</span><br>
<span class="lineno"></span><span class="op" id="7402856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7402859">func</span>&nbsp;<span class="ident" id="7402864">testHeaderRoundTrip</span><span class="op" id="7402883">(</span><span class="ident" id="7402884">fh</span>&nbsp;<span class="op" id="7402887">*</span><span class="ident" id="7402888"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7402898">,</span>&nbsp;<span class="ident" id="7402900">wantUncompressedSize</span>&nbsp;<span class="builtintype" id="7402921">uint32</span><span class="op" id="7402927">,</span>&nbsp;<span class="ident" id="7402929">wantUncompressedSize64</span>&nbsp;<span class="builtintype" id="7402952">uint64</span><span class="op" id="7402958">,</span>&nbsp;<span class="ident" id="7402960">t</span>&nbsp;<span class="op" id="7402962">*</span><span class="ident" id="7402963"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7402970">.</span><span class="ident" id="7402971"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7402972">)</span>&nbsp;<span class="op" id="7402974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402977">fi</span>&nbsp;<span class="op" id="7402980">:=</span>&nbsp;<span class="ident" id="7402983"><a href="/gostd/archive/zip/zip_test.go.html#7402884">fh</a></span><span class="op" id="7402985">.</span><span class="ident" id="7402986"><a href="/gostd/archive/zip/struct.go.html#5670979">FileInfo</a></span><span class="op" id="7402994">(</span><span class="op" id="7402995">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7402998">fh2</span><span class="op" id="7403001">,</span>&nbsp;<span class="ident" id="7403003">err</span>&nbsp;<span class="op" id="7403007">:=</span>&nbsp;<span class="ident" id="7403010"><a href="/gostd/archive/zip/struct.go.html#5671927">FileInfoHeader</a></span><span class="op" id="7403024">(</span><span class="ident" id="7403025"><a href="/gostd/archive/zip/zip_test.go.html#7402977">fi</a></span><span class="op" id="7403027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403030">if</span>&nbsp;<span class="ident" id="7403033"><a href="/gostd/archive/zip/zip_test.go.html#7403003">err</a></span>&nbsp;<span class="op" id="7403037">!=</span>&nbsp;<span class="builtintype" id="7403040">nil</span>&nbsp;<span class="op" id="7403044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403048"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403049">.</span><span class="ident" id="7403050"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7403055">(</span><span class="ident" id="7403056"><a href="/gostd/archive/zip/zip_test.go.html#7403003">err</a></span><span class="op" id="7403059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403065">if</span>&nbsp;<span class="ident" id="7403068">got</span><span class="op" id="7403071">,</span>&nbsp;<span class="ident" id="7403073">want</span>&nbsp;<span class="op" id="7403078">:=</span>&nbsp;<span class="ident" id="7403081"><a href="/gostd/archive/zip/zip_test.go.html#7402998">fh2</a></span><span class="op" id="7403084">.</span><span class="ident" id="7403085"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7403089">,</span>&nbsp;<span class="ident" id="7403091"><a href="/gostd/archive/zip/zip_test.go.html#7402884">fh</a></span><span class="op" id="7403093">.</span><span class="ident" id="7403094"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7403098">;</span>&nbsp;<span class="ident" id="7403100"><a href="/gostd/archive/zip/zip_test.go.html#7403068">got</a></span>&nbsp;<span class="op" id="7403104">!=</span>&nbsp;<span class="ident" id="7403107"><a href="/gostd/archive/zip/zip_test.go.html#7403073">want</a></span>&nbsp;<span class="op" id="7403112">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403116"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403117">.</span><span class="ident" id="7403118"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403124">(</span><span class="string" id="7403125">&#34;Name:&nbsp;got&nbsp;%s,&nbsp;want&nbsp;%s\n&#34;</span><span class="op" id="7403150">,</span>&nbsp;<span class="ident" id="7403152"><a href="/gostd/archive/zip/zip_test.go.html#7403068">got</a></span><span class="op" id="7403155">,</span>&nbsp;<span class="ident" id="7403157"><a href="/gostd/archive/zip/zip_test.go.html#7403073">want</a></span><span class="op" id="7403161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403167">if</span>&nbsp;<span class="ident" id="7403170">got</span><span class="op" id="7403173">,</span>&nbsp;<span class="ident" id="7403175">want</span>&nbsp;<span class="op" id="7403180">:=</span>&nbsp;<span class="ident" id="7403183"><a href="/gostd/archive/zip/zip_test.go.html#7402998">fh2</a></span><span class="op" id="7403186">.</span><span class="ident" id="7403187"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="7403203">,</span>&nbsp;<span class="ident" id="7403205"><a href="/gostd/archive/zip/zip_test.go.html#7402900">wantUncompressedSize</a></span><span class="op" id="7403225">;</span>&nbsp;<span class="ident" id="7403227"><a href="/gostd/archive/zip/zip_test.go.html#7403170">got</a></span>&nbsp;<span class="op" id="7403231">!=</span>&nbsp;<span class="ident" id="7403234"><a href="/gostd/archive/zip/zip_test.go.html#7403175">want</a></span>&nbsp;<span class="op" id="7403239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403243"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403244">.</span><span class="ident" id="7403245"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403251">(</span><span class="string" id="7403252">&#34;UncompressedSize:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d\n&#34;</span><span class="op" id="7403289">,</span>&nbsp;<span class="ident" id="7403291"><a href="/gostd/archive/zip/zip_test.go.html#7403170">got</a></span><span class="op" id="7403294">,</span>&nbsp;<span class="ident" id="7403296"><a href="/gostd/archive/zip/zip_test.go.html#7403175">want</a></span><span class="op" id="7403300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403303">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403306">if</span>&nbsp;<span class="ident" id="7403309">got</span><span class="op" id="7403312">,</span>&nbsp;<span class="ident" id="7403314">want</span>&nbsp;<span class="op" id="7403319">:=</span>&nbsp;<span class="ident" id="7403322"><a href="/gostd/archive/zip/zip_test.go.html#7402998">fh2</a></span><span class="op" id="7403325">.</span><span class="ident" id="7403326"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="7403344">,</span>&nbsp;<span class="ident" id="7403346"><a href="/gostd/archive/zip/zip_test.go.html#7402929">wantUncompressedSize64</a></span><span class="op" id="7403368">;</span>&nbsp;<span class="ident" id="7403370"><a href="/gostd/archive/zip/zip_test.go.html#7403309">got</a></span>&nbsp;<span class="op" id="7403374">!=</span>&nbsp;<span class="ident" id="7403377"><a href="/gostd/archive/zip/zip_test.go.html#7403314">want</a></span>&nbsp;<span class="op" id="7403382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403386"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403387">.</span><span class="ident" id="7403388"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403394">(</span><span class="string" id="7403395">&#34;UncompressedSize64:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d\n&#34;</span><span class="op" id="7403434">,</span>&nbsp;<span class="ident" id="7403436"><a href="/gostd/archive/zip/zip_test.go.html#7403309">got</a></span><span class="op" id="7403439">,</span>&nbsp;<span class="ident" id="7403441"><a href="/gostd/archive/zip/zip_test.go.html#7403314">want</a></span><span class="op" id="7403445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403451">if</span>&nbsp;<span class="ident" id="7403454">got</span><span class="op" id="7403457">,</span>&nbsp;<span class="ident" id="7403459">want</span>&nbsp;<span class="op" id="7403464">:=</span>&nbsp;<span class="ident" id="7403467"><a href="/gostd/archive/zip/zip_test.go.html#7402998">fh2</a></span><span class="op" id="7403470">.</span><span class="ident" id="7403471"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span><span class="op" id="7403483">,</span>&nbsp;<span class="ident" id="7403485"><a href="/gostd/archive/zip/zip_test.go.html#7402884">fh</a></span><span class="op" id="7403487">.</span><span class="ident" id="7403488"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span><span class="op" id="7403500">;</span>&nbsp;<span class="ident" id="7403502"><a href="/gostd/archive/zip/zip_test.go.html#7403454">got</a></span>&nbsp;<span class="op" id="7403506">!=</span>&nbsp;<span class="ident" id="7403509"><a href="/gostd/archive/zip/zip_test.go.html#7403459">want</a></span>&nbsp;<span class="op" id="7403514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403518"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403519">.</span><span class="ident" id="7403520"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403526">(</span><span class="string" id="7403527">&#34;ModifiedTime:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d\n&#34;</span><span class="op" id="7403560">,</span>&nbsp;<span class="ident" id="7403562"><a href="/gostd/archive/zip/zip_test.go.html#7403454">got</a></span><span class="op" id="7403565">,</span>&nbsp;<span class="ident" id="7403567"><a href="/gostd/archive/zip/zip_test.go.html#7403459">want</a></span><span class="op" id="7403571">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403577">if</span>&nbsp;<span class="ident" id="7403580">got</span><span class="op" id="7403583">,</span>&nbsp;<span class="ident" id="7403585">want</span>&nbsp;<span class="op" id="7403590">:=</span>&nbsp;<span class="ident" id="7403593"><a href="/gostd/archive/zip/zip_test.go.html#7402998">fh2</a></span><span class="op" id="7403596">.</span><span class="ident" id="7403597"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="7403609">,</span>&nbsp;<span class="ident" id="7403611"><a href="/gostd/archive/zip/zip_test.go.html#7402884">fh</a></span><span class="op" id="7403613">.</span><span class="ident" id="7403614"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="7403626">;</span>&nbsp;<span class="ident" id="7403628"><a href="/gostd/archive/zip/zip_test.go.html#7403580">got</a></span>&nbsp;<span class="op" id="7403632">!=</span>&nbsp;<span class="ident" id="7403635"><a href="/gostd/archive/zip/zip_test.go.html#7403585">want</a></span>&nbsp;<span class="op" id="7403640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403644"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403645">.</span><span class="ident" id="7403646"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403652">(</span><span class="string" id="7403653">&#34;ModifiedDate:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d\n&#34;</span><span class="op" id="7403686">,</span>&nbsp;<span class="ident" id="7403688"><a href="/gostd/archive/zip/zip_test.go.html#7403580">got</a></span><span class="op" id="7403691">,</span>&nbsp;<span class="ident" id="7403693"><a href="/gostd/archive/zip/zip_test.go.html#7403585">want</a></span><span class="op" id="7403697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7403704">if</span>&nbsp;<span class="ident" id="7403707">sysfh</span><span class="op" id="7403712">,</span>&nbsp;<span class="ident" id="7403714">ok</span>&nbsp;<span class="op" id="7403717">:=</span>&nbsp;<span class="ident" id="7403720"><a href="/gostd/archive/zip/zip_test.go.html#7402977">fi</a></span><span class="op" id="7403722">.</span><span class="ident" id="7403723"><a href="/gostd/os/types.go.html#2472752">Sys</a></span><span class="op" id="7403726">(</span><span class="op" id="7403727">)</span><span class="op" id="7403728">.</span><span class="op" id="7403729">(</span><span class="op" id="7403730">*</span><span class="ident" id="7403731"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7403741">)</span><span class="op" id="7403742">;</span>&nbsp;<span class="op" id="7403744">!</span><span class="ident" id="7403745"><a href="/gostd/archive/zip/zip_test.go.html#7403714">ok</a></span>&nbsp;<span class="op" id="7403748">&amp;&amp;</span>&nbsp;<span class="ident" id="7403751"><a href="/gostd/archive/zip/zip_test.go.html#7403707">sysfh</a></span>&nbsp;<span class="op" id="7403757">!=</span>&nbsp;<span class="ident" id="7403760"><a href="/gostd/archive/zip/zip_test.go.html#7402884">fh</a></span>&nbsp;<span class="op" id="7403763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403767"><a href="/gostd/archive/zip/zip_test.go.html#7402960">t</a></span><span class="op" id="7403768">.</span><span class="ident" id="7403769"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7403775">(</span><span class="string" id="7403776">&#34;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*FileHeader&#34;</span><span class="op" id="7403816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7403819">}</span><br>
<span class="lineno"></span><span class="op" id="7403821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7403824">func</span>&nbsp;<span class="ident" id="7403829">TestFileHeaderRoundTrip</span><span class="op" id="7403852">(</span><span class="ident" id="7403853">t</span>&nbsp;<span class="op" id="7403855">*</span><span class="ident" id="7403856"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7403863">.</span><span class="ident" id="7403864"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7403865">)</span>&nbsp;<span class="op" id="7403867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403870">fh</span>&nbsp;<span class="op" id="7403873">:=</span>&nbsp;<span class="op" id="7403876">&amp;</span><span class="ident" id="7403877"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7403887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403891"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7403895">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7403909">&#34;foo.txt&#34;</span><span class="op" id="7403918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403922"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="7403938">:</span>&nbsp;<span class="num" id="7403940">987654321</span><span class="op" id="7403949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403953"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span><span class="op" id="7403965">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7403971">1234</span><span class="op" id="7403975">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7403979"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="7403991">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7403997">5678</span><span class="op" id="7404001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404007"><a href="/gostd/archive/zip/zip_test.go.html#7402864">testHeaderRoundTrip</a></span><span class="op" id="7404026">(</span><span class="ident" id="7404027"><a href="/gostd/archive/zip/zip_test.go.html#7403870">fh</a></span><span class="op" id="7404029">,</span>&nbsp;<span class="ident" id="7404031"><a href="/gostd/archive/zip/zip_test.go.html#7403870">fh</a></span><span class="op" id="7404033">.</span><span class="ident" id="7404034"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="7404050">,</span>&nbsp;<span class="builtintype" id="7404052">uint64</span><span class="op" id="7404058">(</span><span class="ident" id="7404059"><a href="/gostd/archive/zip/zip_test.go.html#7403870">fh</a></span><span class="op" id="7404061">.</span><span class="ident" id="7404062"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="7404078">)</span><span class="op" id="7404079">,</span>&nbsp;<span class="ident" id="7404081"><a href="/gostd/archive/zip/zip_test.go.html#7403853">t</a></span><span class="op" id="7404082">)</span><br>
<span class="lineno"></span><span class="op" id="7404084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7404087">func</span>&nbsp;<span class="ident" id="7404092">TestFileHeaderRoundTrip64</span><span class="op" id="7404117">(</span><span class="ident" id="7404118">t</span>&nbsp;<span class="op" id="7404120">*</span><span class="ident" id="7404121"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7404128">.</span><span class="ident" id="7404129"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7404130">)</span>&nbsp;<span class="op" id="7404132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404135">fh</span>&nbsp;<span class="op" id="7404138">:=</span>&nbsp;<span class="op" id="7404141">&amp;</span><span class="ident" id="7404142"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7404152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404156"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7404160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404176">&#34;foo.txt&#34;</span><span class="op" id="7404185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404189"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="7404207">:</span>&nbsp;<span class="num" id="7404209">9876543210</span><span class="op" id="7404219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404223"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span><span class="op" id="7404235">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7404243">1234</span><span class="op" id="7404247">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404251"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="7404263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7404271">5678</span><span class="op" id="7404275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404281"><a href="/gostd/archive/zip/zip_test.go.html#7402864">testHeaderRoundTrip</a></span><span class="op" id="7404300">(</span><span class="ident" id="7404301"><a href="/gostd/archive/zip/zip_test.go.html#7404135">fh</a></span><span class="op" id="7404303">,</span>&nbsp;<span class="ident" id="7404305"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span><span class="op" id="7404314">,</span>&nbsp;<span class="ident" id="7404316"><a href="/gostd/archive/zip/zip_test.go.html#7404135">fh</a></span><span class="op" id="7404318">.</span><span class="ident" id="7404319"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="7404337">,</span>&nbsp;<span class="ident" id="7404339"><a href="/gostd/archive/zip/zip_test.go.html#7404118">t</a></span><span class="op" id="7404340">)</span><br>
<span class="lineno"></span><span class="op" id="7404342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="7404345">type</span>&nbsp;<span class="ident" id="7404350">repeatedByte</span>&nbsp;<span class="keyword" id="7404363">struct</span>&nbsp;<span class="op" id="7404370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404373">off</span>&nbsp;<span class="builtintype" id="7404377">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404384">b</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404388">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404394">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404398">int64</span><br>
<span class="lineno"></span><span class="op" id="7404404">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="7404407">//&nbsp;rleBuffer&nbsp;is&nbsp;a&nbsp;run-length-encoded&nbsp;byte&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="7404457">//&nbsp;It&#39;s&nbsp;an&nbsp;io.Writer&nbsp;(like&nbsp;a&nbsp;bytes.Buffer)&nbsp;and&nbsp;also&nbsp;an&nbsp;io.ReaderAt,</span><br>
<span class="lineno"></span><span class="comment" id="7404525">//&nbsp;allowing&nbsp;random-access&nbsp;reads.</span><br>
<span class="lineno"></span><span class="keyword" id="7404558">type</span>&nbsp;<span class="ident" id="7404563">rleBuffer</span>&nbsp;<span class="keyword" id="7404573">struct</span>&nbsp;<span class="op" id="7404580">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404583">buf</span>&nbsp;<span class="op" id="7404587">[</span><span class="op" id="7404588">]</span><span class="ident" id="7404589"><a href="/gostd/archive/zip/zip_test.go.html#7404350">repeatedByte</a></span><br>
<span class="lineno"></span><span class="op" id="7404602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7404605">func</span>&nbsp;<span class="op" id="7404610">(</span><span class="ident" id="7404611">r</span>&nbsp;<span class="op" id="7404613">*</span><span class="ident" id="7404614"><a href="/gostd/archive/zip/zip_test.go.html#7404563">rleBuffer</a></span><span class="op" id="7404623">)</span>&nbsp;<span class="ident" id="7404625">Size</span><span class="op" id="7404629">(</span><span class="op" id="7404630">)</span>&nbsp;<span class="builtintype" id="7404632">int64</span>&nbsp;<span class="op" id="7404638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404641">if</span>&nbsp;<span class="builtinfunc" id="7404644">len</span><span class="op" id="7404647">(</span><span class="ident" id="7404648"><a href="/gostd/archive/zip/zip_test.go.html#7404611">r</a></span><span class="op" id="7404649">.</span><span class="ident" id="7404650"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404653">)</span>&nbsp;<span class="op" id="7404655">==</span>&nbsp;<span class="num" id="7404658">0</span>&nbsp;<span class="op" id="7404660">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404664">return</span>&nbsp;<span class="num" id="7404671">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404677">last</span>&nbsp;<span class="op" id="7404682">:=</span>&nbsp;<span class="op" id="7404685">&amp;</span><span class="ident" id="7404686"><a href="/gostd/archive/zip/zip_test.go.html#7404611">r</a></span><span class="op" id="7404687">.</span><span class="ident" id="7404688"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404691">[</span><span class="builtinfunc" id="7404692">len</span><span class="op" id="7404695">(</span><span class="ident" id="7404696"><a href="/gostd/archive/zip/zip_test.go.html#7404611">r</a></span><span class="op" id="7404697">.</span><span class="ident" id="7404698"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404701">)</span><span class="op" id="7404702">-</span><span class="num" id="7404703">1</span><span class="op" id="7404704">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404707">return</span>&nbsp;<span class="ident" id="7404714"><a href="/gostd/archive/zip/zip_test.go.html#7404677">last</a></span><span class="op" id="7404718">.</span><span class="ident" id="7404719"><a href="/gostd/archive/zip/zip_test.go.html#7404373">off</a></span>&nbsp;<span class="op" id="7404723">+</span>&nbsp;<span class="ident" id="7404725"><a href="/gostd/archive/zip/zip_test.go.html#7404677">last</a></span><span class="op" id="7404729">.</span><span class="ident" id="7404730"><a href="/gostd/archive/zip/zip_test.go.html#7404394">n</a></span><br>
<span class="lineno"></span><span class="op" id="7404732">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7404735">func</span>&nbsp;<span class="op" id="7404740">(</span><span class="ident" id="7404741">r</span>&nbsp;<span class="op" id="7404743">*</span><span class="ident" id="7404744"><a href="/gostd/archive/zip/zip_test.go.html#7404563">rleBuffer</a></span><span class="op" id="7404753">)</span>&nbsp;<span class="ident" id="7404755">Write</span><span class="op" id="7404760">(</span><span class="ident" id="7404761">p</span>&nbsp;<span class="op" id="7404763">[</span><span class="op" id="7404764">]</span><span class="builtintype" id="7404765">byte</span><span class="op" id="7404769">)</span>&nbsp;<span class="op" id="7404771">(</span><span class="ident" id="7404772">n</span>&nbsp;<span class="builtintype" id="7404774">int</span><span class="op" id="7404777">,</span>&nbsp;<span class="ident" id="7404779">err</span>&nbsp;<span class="builtintype" id="7404783">error</span><span class="op" id="7404788">)</span>&nbsp;<span class="op" id="7404790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404793">var</span>&nbsp;<span class="ident" id="7404797">rp</span>&nbsp;<span class="op" id="7404800">*</span><span class="ident" id="7404801"><a href="/gostd/archive/zip/zip_test.go.html#7404350">repeatedByte</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404815">if</span>&nbsp;<span class="builtinfunc" id="7404818">len</span><span class="op" id="7404821">(</span><span class="ident" id="7404822"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7404823">.</span><span class="ident" id="7404824"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404827">)</span>&nbsp;<span class="op" id="7404829">&gt;</span>&nbsp;<span class="num" id="7404831">0</span>&nbsp;<span class="op" id="7404833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404837"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span>&nbsp;<span class="op" id="7404840">=</span>&nbsp;<span class="op" id="7404842">&amp;</span><span class="ident" id="7404843"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7404844">.</span><span class="ident" id="7404845"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404848">[</span><span class="builtinfunc" id="7404849">len</span><span class="op" id="7404852">(</span><span class="ident" id="7404853"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7404854">.</span><span class="ident" id="7404855"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7404858">)</span><span class="op" id="7404859">-</span><span class="num" id="7404860">1</span><span class="op" id="7404861">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7404865">//&nbsp;Fast&nbsp;path,&nbsp;if&nbsp;p&nbsp;is&nbsp;entirely&nbsp;the&nbsp;same&nbsp;byte&nbsp;repeated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404922">if</span>&nbsp;<span class="ident" id="7404925">lastByte</span>&nbsp;<span class="op" id="7404934">:=</span>&nbsp;<span class="ident" id="7404937"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span><span class="op" id="7404939">.</span><span class="ident" id="7404940"><a href="/gostd/archive/zip/zip_test.go.html#7404384">b</a></span><span class="op" id="7404941">;</span>&nbsp;<span class="builtinfunc" id="7404943">len</span><span class="op" id="7404946">(</span><span class="ident" id="7404947"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span><span class="op" id="7404948">)</span>&nbsp;<span class="op" id="7404950">&gt;</span>&nbsp;<span class="num" id="7404952">0</span>&nbsp;<span class="op" id="7404954">&amp;&amp;</span>&nbsp;<span class="ident" id="7404957"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span><span class="op" id="7404958">[</span><span class="num" id="7404959">0</span><span class="op" id="7404960">]</span>&nbsp;<span class="op" id="7404962">==</span>&nbsp;<span class="ident" id="7404965"><a href="/gostd/archive/zip/zip_test.go.html#7404925">lastByte</a></span>&nbsp;<span class="op" id="7404974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404979">all</span>&nbsp;<span class="op" id="7404983">:=</span>&nbsp;<span class="builtintype" id="7404986">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7404994">for</span>&nbsp;<span class="ident" id="7404998">_</span><span class="op" id="7404999">,</span>&nbsp;<span class="ident" id="7405001">b</span>&nbsp;<span class="op" id="7405003">:=</span>&nbsp;<span class="keyword" id="7405006">range</span>&nbsp;<span class="ident" id="7405012"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span>&nbsp;<span class="op" id="7405014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405020">if</span>&nbsp;<span class="ident" id="7405023"><a href="/gostd/archive/zip/zip_test.go.html#7405001">b</a></span>&nbsp;<span class="op" id="7405025">!=</span>&nbsp;<span class="ident" id="7405028"><a href="/gostd/archive/zip/zip_test.go.html#7404925">lastByte</a></span>&nbsp;<span class="op" id="7405037">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405044"><a href="/gostd/archive/zip/zip_test.go.html#7404979">all</a></span>&nbsp;<span class="op" id="7405048">=</span>&nbsp;<span class="builtintype" id="7405050">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405081">if</span>&nbsp;<span class="ident" id="7405084"><a href="/gostd/archive/zip/zip_test.go.html#7404979">all</a></span>&nbsp;<span class="op" id="7405088">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405094"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span><span class="op" id="7405096">.</span><span class="ident" id="7405097"><a href="/gostd/archive/zip/zip_test.go.html#7404394">n</a></span>&nbsp;<span class="op" id="7405099">+=</span>&nbsp;<span class="builtintype" id="7405102">int64</span><span class="op" id="7405107">(</span><span class="builtinfunc" id="7405108">len</span><span class="op" id="7405111">(</span><span class="ident" id="7405112"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span><span class="op" id="7405113">)</span><span class="op" id="7405114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405120">return</span>&nbsp;<span class="builtinfunc" id="7405127">len</span><span class="op" id="7405130">(</span><span class="ident" id="7405131"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span><span class="op" id="7405132">)</span><span class="op" id="7405133">,</span>&nbsp;<span class="builtintype" id="7405135">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405149">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405153">for</span>&nbsp;<span class="ident" id="7405157">_</span><span class="op" id="7405158">,</span>&nbsp;<span class="ident" id="7405160">b</span>&nbsp;<span class="op" id="7405162">:=</span>&nbsp;<span class="keyword" id="7405165">range</span>&nbsp;<span class="ident" id="7405171"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span>&nbsp;<span class="op" id="7405173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405177">if</span>&nbsp;<span class="ident" id="7405180"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span>&nbsp;<span class="op" id="7405183">==</span>&nbsp;<span class="builtintype" id="7405186">nil</span>&nbsp;<span class="op" id="7405190">||</span>&nbsp;<span class="ident" id="7405193"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span><span class="op" id="7405195">.</span><span class="ident" id="7405196"><a href="/gostd/archive/zip/zip_test.go.html#7404384">b</a></span>&nbsp;<span class="op" id="7405198">!=</span>&nbsp;<span class="ident" id="7405201"><a href="/gostd/archive/zip/zip_test.go.html#7405160">b</a></span>&nbsp;<span class="op" id="7405203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405208"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7405209">.</span><span class="ident" id="7405210"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span>&nbsp;<span class="op" id="7405214">=</span>&nbsp;<span class="builtinfunc" id="7405216">append</span><span class="op" id="7405222">(</span><span class="ident" id="7405223"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7405224">.</span><span class="ident" id="7405225"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405228">,</span>&nbsp;<span class="ident" id="7405230"><a href="/gostd/archive/zip/zip_test.go.html#7404350">repeatedByte</a></span><span class="op" id="7405242">{</span><span class="ident" id="7405243"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7405244">.</span><span class="ident" id="7405245"><a href="/gostd/archive/zip/zip_test.go.html#7404625">Size</a></span><span class="op" id="7405249">(</span><span class="op" id="7405250">)</span><span class="op" id="7405251">,</span>&nbsp;<span class="ident" id="7405253"><a href="/gostd/archive/zip/zip_test.go.html#7405160">b</a></span><span class="op" id="7405254">,</span>&nbsp;<span class="num" id="7405256">1</span><span class="op" id="7405257">}</span><span class="op" id="7405258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405263"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span>&nbsp;<span class="op" id="7405266">=</span>&nbsp;<span class="op" id="7405268">&amp;</span><span class="ident" id="7405269"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7405270">.</span><span class="ident" id="7405271"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405274">[</span><span class="builtinfunc" id="7405275">len</span><span class="op" id="7405278">(</span><span class="ident" id="7405279"><a href="/gostd/archive/zip/zip_test.go.html#7404741">r</a></span><span class="op" id="7405280">.</span><span class="ident" id="7405281"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405284">)</span><span class="op" id="7405285">-</span><span class="num" id="7405286">1</span><span class="op" id="7405287">]</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405291">}</span>&nbsp;<span class="keyword" id="7405293">else</span>&nbsp;<span class="op" id="7405298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405303"><a href="/gostd/archive/zip/zip_test.go.html#7404797">rp</a></span><span class="op" id="7405305">.</span><span class="ident" id="7405306"><a href="/gostd/archive/zip/zip_test.go.html#7404394">n</a></span><span class="op" id="7405307">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405318">return</span>&nbsp;<span class="builtinfunc" id="7405325">len</span><span class="op" id="7405328">(</span><span class="ident" id="7405329"><a href="/gostd/archive/zip/zip_test.go.html#7404761">p</a></span><span class="op" id="7405330">)</span><span class="op" id="7405331">,</span>&nbsp;<span class="builtintype" id="7405333">nil</span><br>
<span class="lineno">160</span><span class="op" id="7405337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7405340">func</span>&nbsp;<span class="op" id="7405345">(</span><span class="ident" id="7405346">r</span>&nbsp;<span class="op" id="7405348">*</span><span class="ident" id="7405349"><a href="/gostd/archive/zip/zip_test.go.html#7404563">rleBuffer</a></span><span class="op" id="7405358">)</span>&nbsp;<span class="ident" id="7405360">ReadAt</span><span class="op" id="7405366">(</span><span class="ident" id="7405367">p</span>&nbsp;<span class="op" id="7405369">[</span><span class="op" id="7405370">]</span><span class="builtintype" id="7405371">byte</span><span class="op" id="7405375">,</span>&nbsp;<span class="ident" id="7405377">off</span>&nbsp;<span class="builtintype" id="7405381">int64</span><span class="op" id="7405386">)</span>&nbsp;<span class="op" id="7405388">(</span><span class="ident" id="7405389">n</span>&nbsp;<span class="builtintype" id="7405391">int</span><span class="op" id="7405394">,</span>&nbsp;<span class="ident" id="7405396">err</span>&nbsp;<span class="builtintype" id="7405400">error</span><span class="op" id="7405405">)</span>&nbsp;<span class="op" id="7405407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405410">if</span>&nbsp;<span class="builtinfunc" id="7405413">len</span><span class="op" id="7405416">(</span><span class="ident" id="7405417"><a href="/gostd/archive/zip/zip_test.go.html#7405367">p</a></span><span class="op" id="7405418">)</span>&nbsp;<span class="op" id="7405420">==</span>&nbsp;<span class="num" id="7405423">0</span>&nbsp;<span class="op" id="7405425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405429">return</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405440">skipParts</span>&nbsp;<span class="op" id="7405450">:=</span>&nbsp;<span class="ident" id="7405453"><a href="/gostd/archive/zip/zip_test.go.html#7401702">sort</a></span><span class="op" id="7405457">.</span><span class="ident" id="7405458"><a href="/gostd/sort/search.go.html#2008959">Search</a></span><span class="op" id="7405464">(</span><span class="builtinfunc" id="7405465">len</span><span class="op" id="7405468">(</span><span class="ident" id="7405469"><a href="/gostd/archive/zip/zip_test.go.html#7405346">r</a></span><span class="op" id="7405470">.</span><span class="ident" id="7405471"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405474">)</span><span class="op" id="7405475">,</span>&nbsp;<span class="keyword" id="7405477">func</span><span class="op" id="7405481">(</span><span class="ident" id="7405482">i</span>&nbsp;<span class="builtintype" id="7405484">int</span><span class="op" id="7405487">)</span>&nbsp;<span class="builtintype" id="7405489">bool</span>&nbsp;<span class="op" id="7405494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405498">part</span>&nbsp;<span class="op" id="7405503">:=</span>&nbsp;<span class="op" id="7405506">&amp;</span><span class="ident" id="7405507"><a href="/gostd/archive/zip/zip_test.go.html#7405346">r</a></span><span class="op" id="7405508">.</span><span class="ident" id="7405509"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405512">[</span><span class="ident" id="7405513"><a href="/gostd/archive/zip/zip_test.go.html#7405482">i</a></span><span class="op" id="7405514">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405518">return</span>&nbsp;<span class="ident" id="7405525"><a href="/gostd/archive/zip/zip_test.go.html#7405498">part</a></span><span class="op" id="7405529">.</span><span class="ident" id="7405530"><a href="/gostd/archive/zip/zip_test.go.html#7404373">off</a></span><span class="op" id="7405533">+</span><span class="ident" id="7405534"><a href="/gostd/archive/zip/zip_test.go.html#7405498">part</a></span><span class="op" id="7405538">.</span><span class="ident" id="7405539"><a href="/gostd/archive/zip/zip_test.go.html#7404394">n</a></span>&nbsp;<span class="op" id="7405541">&gt;</span>&nbsp;<span class="ident" id="7405543"><a href="/gostd/archive/zip/zip_test.go.html#7405377">off</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405548">}</span><span class="op" id="7405549">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405552">parts</span>&nbsp;<span class="op" id="7405558">:=</span>&nbsp;<span class="ident" id="7405561"><a href="/gostd/archive/zip/zip_test.go.html#7405346">r</a></span><span class="op" id="7405562">.</span><span class="ident" id="7405563"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7405566">[</span><span class="ident" id="7405567"><a href="/gostd/archive/zip/zip_test.go.html#7405440">skipParts</a></span><span class="op" id="7405576">:</span><span class="op" id="7405577">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405580">if</span>&nbsp;<span class="builtinfunc" id="7405583">len</span><span class="op" id="7405586">(</span><span class="ident" id="7405587"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span><span class="op" id="7405592">)</span>&nbsp;<span class="op" id="7405594">&gt;</span>&nbsp;<span class="num" id="7405596">0</span>&nbsp;<span class="op" id="7405598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405602">skipBytes</span>&nbsp;<span class="op" id="7405612">:=</span>&nbsp;<span class="ident" id="7405615"><a href="/gostd/archive/zip/zip_test.go.html#7405377">off</a></span>&nbsp;<span class="op" id="7405619">-</span>&nbsp;<span class="ident" id="7405621"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span><span class="op" id="7405626">[</span><span class="num" id="7405627">0</span><span class="op" id="7405628">]</span><span class="op" id="7405629">.</span><span class="ident" id="7405630"><a href="/gostd/archive/zip/zip_test.go.html#7404373">off</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405636">for</span>&nbsp;<span class="builtinfunc" id="7405640">len</span><span class="op" id="7405643">(</span><span class="ident" id="7405644"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span><span class="op" id="7405649">)</span>&nbsp;<span class="op" id="7405651">&gt;</span>&nbsp;<span class="num" id="7405653">0</span>&nbsp;<span class="op" id="7405655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405660">part</span>&nbsp;<span class="op" id="7405665">:=</span>&nbsp;<span class="ident" id="7405668"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span><span class="op" id="7405673">[</span><span class="num" id="7405674">0</span><span class="op" id="7405675">]</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405680">for</span>&nbsp;<span class="ident" id="7405684">i</span>&nbsp;<span class="op" id="7405686">:=</span>&nbsp;<span class="ident" id="7405689"><a href="/gostd/archive/zip/zip_test.go.html#7405602">skipBytes</a></span><span class="op" id="7405698">;</span>&nbsp;<span class="ident" id="7405700"><a href="/gostd/archive/zip/zip_test.go.html#7405684">i</a></span>&nbsp;<span class="op" id="7405702">&lt;</span>&nbsp;<span class="ident" id="7405704"><a href="/gostd/archive/zip/zip_test.go.html#7405660">part</a></span><span class="op" id="7405708">.</span><span class="ident" id="7405709"><a href="/gostd/archive/zip/zip_test.go.html#7404394">n</a></span><span class="op" id="7405710">;</span>&nbsp;<span class="ident" id="7405712"><a href="/gostd/archive/zip/zip_test.go.html#7405684">i</a></span><span class="op" id="7405713">++</span>&nbsp;<span class="op" id="7405716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405722">if</span>&nbsp;<span class="ident" id="7405725"><a href="/gostd/archive/zip/zip_test.go.html#7405389">n</a></span>&nbsp;<span class="op" id="7405727">==</span>&nbsp;<span class="builtinfunc" id="7405730">len</span><span class="op" id="7405733">(</span><span class="ident" id="7405734"><a href="/gostd/archive/zip/zip_test.go.html#7405367">p</a></span><span class="op" id="7405735">)</span>&nbsp;<span class="op" id="7405737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405744">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405761"><a href="/gostd/archive/zip/zip_test.go.html#7405367">p</a></span><span class="op" id="7405762">[</span><span class="ident" id="7405763"><a href="/gostd/archive/zip/zip_test.go.html#7405389">n</a></span><span class="op" id="7405764">]</span>&nbsp;<span class="op" id="7405766">=</span>&nbsp;<span class="ident" id="7405768"><a href="/gostd/archive/zip/zip_test.go.html#7405660">part</a></span><span class="op" id="7405772">.</span><span class="ident" id="7405773"><a href="/gostd/archive/zip/zip_test.go.html#7404384">b</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405779"><a href="/gostd/archive/zip/zip_test.go.html#7405389">n</a></span><span class="op" id="7405780">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405791"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span>&nbsp;<span class="op" id="7405797">=</span>&nbsp;<span class="ident" id="7405799"><a href="/gostd/archive/zip/zip_test.go.html#7405552">parts</a></span><span class="op" id="7405804">[</span><span class="num" id="7405805">1</span><span class="op" id="7405806">:</span><span class="op" id="7405807">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405812"><a href="/gostd/archive/zip/zip_test.go.html#7405602">skipBytes</a></span>&nbsp;<span class="op" id="7405822">=</span>&nbsp;<span class="num" id="7405824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405828">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405834">if</span>&nbsp;<span class="ident" id="7405837"><a href="/gostd/archive/zip/zip_test.go.html#7405389">n</a></span>&nbsp;<span class="op" id="7405839">!=</span>&nbsp;<span class="builtinfunc" id="7405842">len</span><span class="op" id="7405845">(</span><span class="ident" id="7405846"><a href="/gostd/archive/zip/zip_test.go.html#7405367">p</a></span><span class="op" id="7405847">)</span>&nbsp;<span class="op" id="7405849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405853"><a href="/gostd/archive/zip/zip_test.go.html#7405396">err</a></span>&nbsp;<span class="op" id="7405857">=</span>&nbsp;<span class="ident" id="7405859"><a href="/gostd/archive/zip/zip_test.go.html#7401683">io</a></span><span class="op" id="7405861">.</span><span class="ident" id="7405862"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7405883">return</span><br>
<span class="lineno">190</span><span class="op" id="7405890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7405893">//&nbsp;Just&nbsp;testing&nbsp;the&nbsp;rleBuffer&nbsp;used&nbsp;in&nbsp;the&nbsp;Zip64&nbsp;test&nbsp;above.&nbsp;Not&nbsp;used&nbsp;by&nbsp;the&nbsp;zip&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="7405979">func</span>&nbsp;<span class="ident" id="7405984">TestRLEBuffer</span><span class="op" id="7405997">(</span><span class="ident" id="7405998">t</span>&nbsp;<span class="op" id="7406000">*</span><span class="ident" id="7406001"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7406008">.</span><span class="ident" id="7406009"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7406010">)</span>&nbsp;<span class="op" id="7406012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406015">b</span>&nbsp;<span class="op" id="7406017">:=</span>&nbsp;<span class="builtinfunc" id="7406020">new</span><span class="op" id="7406023">(</span><span class="ident" id="7406024"><a href="/gostd/archive/zip/zip_test.go.html#7404563">rleBuffer</a></span><span class="op" id="7406033">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406036">var</span>&nbsp;<span class="ident" id="7406040">all</span>&nbsp;<span class="op" id="7406044">[</span><span class="op" id="7406045">]</span><span class="builtintype" id="7406046">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406052">writes</span>&nbsp;<span class="op" id="7406059">:=</span>&nbsp;<span class="op" id="7406062">[</span><span class="op" id="7406063">]</span><span class="builtintype" id="7406064">string</span><span class="op" id="7406070">{</span><span class="string" id="7406071">&#34;abcdeee&#34;</span><span class="op" id="7406080">,</span>&nbsp;<span class="string" id="7406082">&#34;eeeeeee&#34;</span><span class="op" id="7406091">,</span>&nbsp;<span class="string" id="7406093">&#34;eeeefghaaiii&#34;</span><span class="op" id="7406107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406110">for</span>&nbsp;<span class="ident" id="7406114">_</span><span class="op" id="7406115">,</span>&nbsp;<span class="ident" id="7406117">w</span>&nbsp;<span class="op" id="7406119">:=</span>&nbsp;<span class="keyword" id="7406122">range</span>&nbsp;<span class="ident" id="7406128"><a href="/gostd/archive/zip/zip_test.go.html#7406052">writes</a></span>&nbsp;<span class="op" id="7406135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406139"><a href="/gostd/archive/zip/zip_test.go.html#7406015">b</a></span><span class="op" id="7406140">.</span><span class="ident" id="7406141"><a href="/gostd/archive/zip/zip_test.go.html#7404755">Write</a></span><span class="op" id="7406146">(</span><span class="op" id="7406147">[</span><span class="op" id="7406148">]</span><span class="builtintype" id="7406149">byte</span><span class="op" id="7406153">(</span><span class="ident" id="7406154"><a href="/gostd/archive/zip/zip_test.go.html#7406117">w</a></span><span class="op" id="7406155">)</span><span class="op" id="7406156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406160"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span>&nbsp;<span class="op" id="7406164">=</span>&nbsp;<span class="builtinfunc" id="7406166">append</span><span class="op" id="7406172">(</span><span class="ident" id="7406173"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span><span class="op" id="7406176">,</span>&nbsp;<span class="ident" id="7406178"><a href="/gostd/archive/zip/zip_test.go.html#7406117">w</a></span><span class="op" id="7406179">...</span><span class="op" id="7406182">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406188">if</span>&nbsp;<span class="builtinfunc" id="7406191">len</span><span class="op" id="7406194">(</span><span class="ident" id="7406195"><a href="/gostd/archive/zip/zip_test.go.html#7406015">b</a></span><span class="op" id="7406196">.</span><span class="ident" id="7406197"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7406200">)</span>&nbsp;<span class="op" id="7406202">!=</span>&nbsp;<span class="num" id="7406205">10</span>&nbsp;<span class="op" id="7406208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406212"><a href="/gostd/archive/zip/zip_test.go.html#7405998">t</a></span><span class="op" id="7406213">.</span><span class="ident" id="7406214"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7406220">(</span><span class="string" id="7406221">&#34;len(b.buf)&nbsp;=&nbsp;%d;&nbsp;want&nbsp;10&#34;</span><span class="op" id="7406247">,</span>&nbsp;<span class="builtinfunc" id="7406249">len</span><span class="op" id="7406252">(</span><span class="ident" id="7406253"><a href="/gostd/archive/zip/zip_test.go.html#7406015">b</a></span><span class="op" id="7406254">.</span><span class="ident" id="7406255"><a href="/gostd/archive/zip/zip_test.go.html#7404583">buf</a></span><span class="op" id="7406258">)</span><span class="op" id="7406259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406266">for</span>&nbsp;<span class="ident" id="7406270">i</span>&nbsp;<span class="op" id="7406272">:=</span>&nbsp;<span class="num" id="7406275">0</span><span class="op" id="7406276">;</span>&nbsp;<span class="ident" id="7406278"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span>&nbsp;<span class="op" id="7406280">&lt;</span>&nbsp;<span class="builtinfunc" id="7406282">len</span><span class="op" id="7406285">(</span><span class="ident" id="7406286"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span><span class="op" id="7406289">)</span><span class="op" id="7406290">;</span>&nbsp;<span class="ident" id="7406292"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406293">++</span>&nbsp;<span class="op" id="7406296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406300">for</span>&nbsp;<span class="ident" id="7406304">j</span>&nbsp;<span class="op" id="7406306">:=</span>&nbsp;<span class="num" id="7406309">0</span><span class="op" id="7406310">;</span>&nbsp;<span class="ident" id="7406312"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span>&nbsp;<span class="op" id="7406314">&lt;</span>&nbsp;<span class="builtinfunc" id="7406316">len</span><span class="op" id="7406319">(</span><span class="ident" id="7406320"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span><span class="op" id="7406323">)</span><span class="op" id="7406324">-</span><span class="ident" id="7406325"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406326">;</span>&nbsp;<span class="ident" id="7406328"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406329">++</span>&nbsp;<span class="op" id="7406332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406337">buf</span>&nbsp;<span class="op" id="7406341">:=</span>&nbsp;<span class="builtinfunc" id="7406344">make</span><span class="op" id="7406348">(</span><span class="op" id="7406349">[</span><span class="op" id="7406350">]</span><span class="builtintype" id="7406351">byte</span><span class="op" id="7406355">,</span>&nbsp;<span class="ident" id="7406357"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406363">n</span><span class="op" id="7406364">,</span>&nbsp;<span class="ident" id="7406366">err</span>&nbsp;<span class="op" id="7406370">:=</span>&nbsp;<span class="ident" id="7406373"><a href="/gostd/archive/zip/zip_test.go.html#7406015">b</a></span><span class="op" id="7406374">.</span><span class="ident" id="7406375"><a href="/gostd/archive/zip/zip_test.go.html#7405360">ReadAt</a></span><span class="op" id="7406381">(</span><span class="ident" id="7406382"><a href="/gostd/archive/zip/zip_test.go.html#7406337">buf</a></span><span class="op" id="7406385">,</span>&nbsp;<span class="builtintype" id="7406387">int64</span><span class="op" id="7406392">(</span><span class="ident" id="7406393"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406394">)</span><span class="op" id="7406395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406400">if</span>&nbsp;<span class="ident" id="7406403"><a href="/gostd/archive/zip/zip_test.go.html#7406366">err</a></span>&nbsp;<span class="op" id="7406407">!=</span>&nbsp;<span class="builtintype" id="7406410">nil</span>&nbsp;<span class="op" id="7406414">||</span>&nbsp;<span class="ident" id="7406417"><a href="/gostd/archive/zip/zip_test.go.html#7406363">n</a></span>&nbsp;<span class="op" id="7406419">!=</span>&nbsp;<span class="builtinfunc" id="7406422">len</span><span class="op" id="7406425">(</span><span class="ident" id="7406426"><a href="/gostd/archive/zip/zip_test.go.html#7406337">buf</a></span><span class="op" id="7406429">)</span>&nbsp;<span class="op" id="7406431">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406437"><a href="/gostd/archive/zip/zip_test.go.html#7405998">t</a></span><span class="op" id="7406438">.</span><span class="ident" id="7406439"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7406445">(</span><span class="string" id="7406446">&#34;ReadAt(%d,&nbsp;%d)&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="7406485">,</span>&nbsp;<span class="ident" id="7406487"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406488">,</span>&nbsp;<span class="ident" id="7406490"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406491">,</span>&nbsp;<span class="ident" id="7406493"><a href="/gostd/archive/zip/zip_test.go.html#7406363">n</a></span><span class="op" id="7406494">,</span>&nbsp;<span class="ident" id="7406496"><a href="/gostd/archive/zip/zip_test.go.html#7406366">err</a></span><span class="op" id="7406499">,</span>&nbsp;<span class="builtinfunc" id="7406501">len</span><span class="op" id="7406504">(</span><span class="ident" id="7406505"><a href="/gostd/archive/zip/zip_test.go.html#7406337">buf</a></span><span class="op" id="7406508">)</span><span class="op" id="7406509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406519">if</span>&nbsp;<span class="op" id="7406522">!</span><span class="ident" id="7406523"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7406528">.</span><span class="ident" id="7406529"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="7406534">(</span><span class="ident" id="7406535"><a href="/gostd/archive/zip/zip_test.go.html#7406337">buf</a></span><span class="op" id="7406538">,</span>&nbsp;<span class="ident" id="7406540"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span><span class="op" id="7406543">[</span><span class="ident" id="7406544"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406545">:</span><span class="ident" id="7406546"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406547">+</span><span class="ident" id="7406548"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406549">]</span><span class="op" id="7406550">)</span>&nbsp;<span class="op" id="7406552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406558"><a href="/gostd/archive/zip/zip_test.go.html#7405998">t</a></span><span class="op" id="7406559">.</span><span class="ident" id="7406560"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7406566">(</span><span class="string" id="7406567">&#34;ReadAt(%d,&nbsp;%d)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7406597">,</span>&nbsp;<span class="ident" id="7406599"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406600">,</span>&nbsp;<span class="ident" id="7406602"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406603">,</span>&nbsp;<span class="ident" id="7406605"><a href="/gostd/archive/zip/zip_test.go.html#7406337">buf</a></span><span class="op" id="7406608">,</span>&nbsp;<span class="ident" id="7406610"><a href="/gostd/archive/zip/zip_test.go.html#7406040">all</a></span><span class="op" id="7406613">[</span><span class="ident" id="7406614"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406615">:</span><span class="ident" id="7406616"><a href="/gostd/archive/zip/zip_test.go.html#7406270">i</a></span><span class="op" id="7406617">+</span><span class="ident" id="7406618"><a href="/gostd/archive/zip/zip_test.go.html#7406304">j</a></span><span class="op" id="7406619">]</span><span class="op" id="7406620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406625">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406632">}</span><br>
<span class="lineno"></span><span class="op" id="7406634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7406637">//&nbsp;fakeHash32&nbsp;is&nbsp;a&nbsp;dummy&nbsp;Hash32&nbsp;that&nbsp;always&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">220</span><span class="keyword" id="7406692">type</span>&nbsp;<span class="ident" id="7406697">fakeHash32</span>&nbsp;<span class="keyword" id="7406708">struct</span>&nbsp;<span class="op" id="7406715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406718"><a href="/gostd/archive/zip/zip_test.go.html#7401675">hash</a></span><span class="op" id="7406722">.</span><span class="ident" id="7406723"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno"></span><span class="op" id="7406730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7406733">func</span>&nbsp;<span class="op" id="7406738">(</span><span class="ident" id="7406739"><a href="/gostd/archive/zip/zip_test.go.html#7406697">fakeHash32</a></span><span class="op" id="7406749">)</span>&nbsp;<span class="ident" id="7406751">Write</span><span class="op" id="7406756">(</span><span class="ident" id="7406757">p</span>&nbsp;<span class="op" id="7406759">[</span><span class="op" id="7406760">]</span><span class="builtintype" id="7406761">byte</span><span class="op" id="7406765">)</span>&nbsp;<span class="op" id="7406767">(</span><span class="builtintype" id="7406768">int</span><span class="op" id="7406771">,</span>&nbsp;<span class="builtintype" id="7406773">error</span><span class="op" id="7406778">)</span>&nbsp;<span class="op" id="7406780">{</span>&nbsp;<span class="keyword" id="7406782">return</span>&nbsp;<span class="builtinfunc" id="7406789">len</span><span class="op" id="7406792">(</span><span class="ident" id="7406793"><a href="/gostd/archive/zip/zip_test.go.html#7406757">p</a></span><span class="op" id="7406794">)</span><span class="op" id="7406795">,</span>&nbsp;<span class="builtintype" id="7406797">nil</span>&nbsp;<span class="op" id="7406801">}</span><br>
<span class="lineno">225</span><span class="keyword" id="7406803">func</span>&nbsp;<span class="op" id="7406808">(</span><span class="ident" id="7406809"><a href="/gostd/archive/zip/zip_test.go.html#7406697">fakeHash32</a></span><span class="op" id="7406819">)</span>&nbsp;<span class="ident" id="7406821">Sum32</span><span class="op" id="7406826">(</span><span class="op" id="7406827">)</span>&nbsp;<span class="builtintype" id="7406829">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406850">{</span>&nbsp;<span class="keyword" id="7406852">return</span>&nbsp;<span class="num" id="7406859">0</span>&nbsp;<span class="op" id="7406861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7406864">func</span>&nbsp;<span class="ident" id="7406869">TestZip64</span><span class="op" id="7406878">(</span><span class="ident" id="7406879">t</span>&nbsp;<span class="op" id="7406881">*</span><span class="ident" id="7406882"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7406889">.</span><span class="ident" id="7406890"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7406891">)</span>&nbsp;<span class="op" id="7406893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406896">if</span>&nbsp;<span class="ident" id="7406899"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7406906">.</span><span class="ident" id="7406907"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7406912">(</span><span class="op" id="7406913">)</span>&nbsp;<span class="op" id="7406915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406919"><a href="/gostd/archive/zip/zip_test.go.html#7406879">t</a></span><span class="op" id="7406920">.</span><span class="ident" id="7406921"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7406925">(</span><span class="string" id="7406926">&#34;slow&nbsp;test;&nbsp;skipping&#34;</span><span class="op" id="7406947">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406953">const</span>&nbsp;<span class="ident" id="7406959">size</span>&nbsp;<span class="op" id="7406964">=</span>&nbsp;<span class="num" id="7406966">1</span>&nbsp;<span class="op" id="7406968">&lt;&lt;</span>&nbsp;<span class="num" id="7406971">32</span>&nbsp;<span class="comment" id="7406974">//&nbsp;before&nbsp;the&nbsp;&#34;END\n&#34;&nbsp;part</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407002"><a href="/gostd/archive/zip/zip_test.go.html#7407029">testZip64</a></span><span class="op" id="7407011">(</span><span class="ident" id="7407012"><a href="/gostd/archive/zip/zip_test.go.html#7406879">t</a></span><span class="op" id="7407013">,</span>&nbsp;<span class="ident" id="7407015"><a href="/gostd/archive/zip/zip_test.go.html#7406959">size</a></span><span class="op" id="7407019">)</span><br>
<span class="lineno"></span><span class="op" id="7407021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7407024">func</span>&nbsp;<span class="ident" id="7407029">testZip64</span><span class="op" id="7407038">(</span><span class="ident" id="7407039">t</span>&nbsp;<span class="ident" id="7407041"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7407048">.</span><span class="ident" id="7407049"><a href="/gostd/testing/testing.go.html#5476676">TB</a></span><span class="op" id="7407051">,</span>&nbsp;<span class="ident" id="7407053">size</span>&nbsp;<span class="builtintype" id="7407058">int64</span><span class="op" id="7407063">)</span>&nbsp;<span class="op" id="7407065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407068">const</span>&nbsp;<span class="ident" id="7407074">chunkSize</span>&nbsp;<span class="op" id="7407084">=</span>&nbsp;<span class="num" id="7407086">1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407092">chunks</span>&nbsp;<span class="op" id="7407099">:=</span>&nbsp;<span class="builtintype" id="7407102">int</span><span class="op" id="7407105">(</span><span class="ident" id="7407106"><a href="/gostd/archive/zip/zip_test.go.html#7407053">size</a></span>&nbsp;<span class="op" id="7407111">/</span>&nbsp;<span class="ident" id="7407113"><a href="/gostd/archive/zip/zip_test.go.html#7407074">chunkSize</a></span><span class="op" id="7407122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7407125">//&nbsp;write&nbsp;2^32&nbsp;bytes&nbsp;plus&nbsp;&#34;END\n&#34;&nbsp;to&nbsp;a&nbsp;zip&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407173">buf</span>&nbsp;<span class="op" id="7407177">:=</span>&nbsp;<span class="builtinfunc" id="7407180">new</span><span class="op" id="7407183">(</span><span class="ident" id="7407184"><a href="/gostd/archive/zip/zip_test.go.html#7404563">rleBuffer</a></span><span class="op" id="7407193">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407196">w</span>&nbsp;<span class="op" id="7407198">:=</span>&nbsp;<span class="ident" id="7407201"><a href="/gostd/archive/zip/writer.go.html#5677192">NewWriter</a></span><span class="op" id="7407210">(</span><span class="ident" id="7407211"><a href="/gostd/archive/zip/zip_test.go.html#7407173">buf</a></span><span class="op" id="7407214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407217">f</span><span class="op" id="7407218">,</span>&nbsp;<span class="ident" id="7407220">err</span>&nbsp;<span class="op" id="7407224">:=</span>&nbsp;<span class="ident" id="7407227"><a href="/gostd/archive/zip/zip_test.go.html#7407196">w</a></span><span class="op" id="7407228">.</span><span class="ident" id="7407229"><a href="/gostd/archive/zip/writer.go.html#5682372">CreateHeader</a></span><span class="op" id="7407241">(</span><span class="op" id="7407242">&amp;</span><span class="ident" id="7407243"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7407253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407257"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7407261">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7407265">&#34;huge.txt&#34;</span><span class="op" id="7407275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407279"><a href="/gostd/archive/zip/struct.go.html#5670463">Method</a></span><span class="op" id="7407285">:</span>&nbsp;<span class="ident" id="7407287"><a href="/gostd/archive/zip/struct.go.html#5668864">Store</a></span><span class="op" id="7407292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407295">}</span><span class="op" id="7407296">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407299">if</span>&nbsp;<span class="ident" id="7407302"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407306">!=</span>&nbsp;<span class="builtintype" id="7407309">nil</span>&nbsp;<span class="op" id="7407313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407317"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407318">.</span><span class="ident" id="7407319"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407324">(</span><span class="ident" id="7407325"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7407328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407334"><a href="/gostd/archive/zip/zip_test.go.html#7407217">f</a></span><span class="op" id="7407335">.</span><span class="op" id="7407336">(</span><span class="op" id="7407337">*</span><span class="ident" id="7407338"><a href="/gostd/archive/zip/writer.go.html#5683887">fileWriter</a></span><span class="op" id="7407348">)</span><span class="op" id="7407349">.</span><span class="ident" id="7407350"><a href="/gostd/archive/zip/writer.go.html#5684012">crc32</a></span>&nbsp;<span class="op" id="7407356">=</span>&nbsp;<span class="ident" id="7407358"><a href="/gostd/archive/zip/zip_test.go.html#7406697">fakeHash32</a></span><span class="op" id="7407368">{</span><span class="op" id="7407369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407372">chunk</span>&nbsp;<span class="op" id="7407378">:=</span>&nbsp;<span class="builtinfunc" id="7407381">make</span><span class="op" id="7407385">(</span><span class="op" id="7407386">[</span><span class="op" id="7407387">]</span><span class="builtintype" id="7407388">byte</span><span class="op" id="7407392">,</span>&nbsp;<span class="ident" id="7407394"><a href="/gostd/archive/zip/zip_test.go.html#7407074">chunkSize</a></span><span class="op" id="7407403">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407406">for</span>&nbsp;<span class="ident" id="7407410">i</span>&nbsp;<span class="op" id="7407412">:=</span>&nbsp;<span class="keyword" id="7407415">range</span>&nbsp;<span class="ident" id="7407421"><a href="/gostd/archive/zip/zip_test.go.html#7407372">chunk</a></span>&nbsp;<span class="op" id="7407427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407431"><a href="/gostd/archive/zip/zip_test.go.html#7407372">chunk</a></span><span class="op" id="7407436">[</span><span class="ident" id="7407437"><a href="/gostd/archive/zip/zip_test.go.html#7407410">i</a></span><span class="op" id="7407438">]</span>&nbsp;<span class="op" id="7407440">=</span>&nbsp;<span class="string" id="7407442">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407450">for</span>&nbsp;<span class="ident" id="7407454">i</span>&nbsp;<span class="op" id="7407456">:=</span>&nbsp;<span class="num" id="7407459">0</span><span class="op" id="7407460">;</span>&nbsp;<span class="ident" id="7407462"><a href="/gostd/archive/zip/zip_test.go.html#7407454">i</a></span>&nbsp;<span class="op" id="7407464">&lt;</span>&nbsp;<span class="ident" id="7407466"><a href="/gostd/archive/zip/zip_test.go.html#7407092">chunks</a></span><span class="op" id="7407472">;</span>&nbsp;<span class="ident" id="7407474"><a href="/gostd/archive/zip/zip_test.go.html#7407454">i</a></span><span class="op" id="7407475">++</span>&nbsp;<span class="op" id="7407478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407482">_</span><span class="op" id="7407483">,</span>&nbsp;<span class="ident" id="7407485">err</span>&nbsp;<span class="op" id="7407489">:=</span>&nbsp;<span class="ident" id="7407492"><a href="/gostd/archive/zip/zip_test.go.html#7407217">f</a></span><span class="op" id="7407493">.</span><span class="ident" id="7407494"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7407499">(</span><span class="ident" id="7407500"><a href="/gostd/archive/zip/zip_test.go.html#7407372">chunk</a></span><span class="op" id="7407505">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407509">if</span>&nbsp;<span class="ident" id="7407512"><a href="/gostd/archive/zip/zip_test.go.html#7407485">err</a></span>&nbsp;<span class="op" id="7407516">!=</span>&nbsp;<span class="builtintype" id="7407519">nil</span>&nbsp;<span class="op" id="7407523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407528"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407529">.</span><span class="ident" id="7407530"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407535">(</span><span class="string" id="7407536">&#34;write&nbsp;chunk:&#34;</span><span class="op" id="7407550">,</span>&nbsp;<span class="ident" id="7407552"><a href="/gostd/archive/zip/zip_test.go.html#7407485">err</a></span><span class="op" id="7407555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407565">end</span>&nbsp;<span class="op" id="7407569">:=</span>&nbsp;<span class="op" id="7407572">[</span><span class="op" id="7407573">]</span><span class="builtintype" id="7407574">byte</span><span class="op" id="7407578">(</span><span class="string" id="7407579">&#34;END\n&#34;</span><span class="op" id="7407586">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407589">_</span><span class="op" id="7407590">,</span>&nbsp;<span class="ident" id="7407592"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407596">=</span>&nbsp;<span class="ident" id="7407598"><a href="/gostd/archive/zip/zip_test.go.html#7407217">f</a></span><span class="op" id="7407599">.</span><span class="ident" id="7407600"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7407605">(</span><span class="ident" id="7407606"><a href="/gostd/archive/zip/zip_test.go.html#7407565">end</a></span><span class="op" id="7407609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407612">if</span>&nbsp;<span class="ident" id="7407615"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407619">!=</span>&nbsp;<span class="builtintype" id="7407622">nil</span>&nbsp;<span class="op" id="7407626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407630"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407631">.</span><span class="ident" id="7407632"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407637">(</span><span class="string" id="7407638">&#34;write&nbsp;end:&#34;</span><span class="op" id="7407650">,</span>&nbsp;<span class="ident" id="7407652"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7407655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407661">if</span>&nbsp;<span class="ident" id="7407664">err</span>&nbsp;<span class="op" id="7407668">:=</span>&nbsp;<span class="ident" id="7407671"><a href="/gostd/archive/zip/zip_test.go.html#7407196">w</a></span><span class="op" id="7407672">.</span><span class="ident" id="7407673"><a href="/gostd/archive/zip/writer.go.html#5677642">Close</a></span><span class="op" id="7407678">(</span><span class="op" id="7407679">)</span><span class="op" id="7407680">;</span>&nbsp;<span class="ident" id="7407682"><a href="/gostd/archive/zip/zip_test.go.html#7407664">err</a></span>&nbsp;<span class="op" id="7407686">!=</span>&nbsp;<span class="builtintype" id="7407689">nil</span>&nbsp;<span class="op" id="7407693">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407697"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407698">.</span><span class="ident" id="7407699"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407704">(</span><span class="ident" id="7407705"><a href="/gostd/archive/zip/zip_test.go.html#7407664">err</a></span><span class="op" id="7407708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7407715">//&nbsp;read&nbsp;back&nbsp;zip&nbsp;file&nbsp;and&nbsp;check&nbsp;that&nbsp;we&nbsp;get&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407777">r</span><span class="op" id="7407778">,</span>&nbsp;<span class="ident" id="7407780"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407784">:=</span>&nbsp;<span class="ident" id="7407787"><a href="/gostd/archive/zip/reader.go.html#5654283">NewReader</a></span><span class="op" id="7407796">(</span><span class="ident" id="7407797"><a href="/gostd/archive/zip/zip_test.go.html#7407173">buf</a></span><span class="op" id="7407800">,</span>&nbsp;<span class="builtintype" id="7407802">int64</span><span class="op" id="7407807">(</span><span class="ident" id="7407808"><a href="/gostd/archive/zip/zip_test.go.html#7407173">buf</a></span><span class="op" id="7407811">.</span><span class="ident" id="7407812"><a href="/gostd/archive/zip/zip_test.go.html#7404625">Size</a></span><span class="op" id="7407816">(</span><span class="op" id="7407817">)</span><span class="op" id="7407818">)</span><span class="op" id="7407819">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407822">if</span>&nbsp;<span class="ident" id="7407825"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407829">!=</span>&nbsp;<span class="builtintype" id="7407832">nil</span>&nbsp;<span class="op" id="7407836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407840"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407841">.</span><span class="ident" id="7407842"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407847">(</span><span class="string" id="7407848">&#34;reader:&#34;</span><span class="op" id="7407857">,</span>&nbsp;<span class="ident" id="7407859"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7407862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407868">f0</span>&nbsp;<span class="op" id="7407871">:=</span>&nbsp;<span class="ident" id="7407874"><a href="/gostd/archive/zip/zip_test.go.html#7407777">r</a></span><span class="op" id="7407875">.</span><span class="ident" id="7407876"><a href="/gostd/archive/zip/reader.go.html#5653528">File</a></span><span class="op" id="7407880">[</span><span class="num" id="7407881">0</span><span class="op" id="7407882">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407885">rc</span><span class="op" id="7407887">,</span>&nbsp;<span class="ident" id="7407889"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407893">:=</span>&nbsp;<span class="ident" id="7407896"><a href="/gostd/archive/zip/zip_test.go.html#7407868">f0</a></span><span class="op" id="7407898">.</span><span class="ident" id="7407899"><a href="/gostd/archive/zip/reader.go.html#5656135">Open</a></span><span class="op" id="7407903">(</span><span class="op" id="7407904">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407907">if</span>&nbsp;<span class="ident" id="7407910"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7407914">!=</span>&nbsp;<span class="builtintype" id="7407917">nil</span>&nbsp;<span class="op" id="7407921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407925"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7407926">.</span><span class="ident" id="7407927"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7407932">(</span><span class="string" id="7407933">&#34;opening:&#34;</span><span class="op" id="7407943">,</span>&nbsp;<span class="ident" id="7407945"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7407948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407954"><a href="/gostd/archive/zip/zip_test.go.html#7407885">rc</a></span><span class="op" id="7407956">.</span><span class="op" id="7407957">(</span><span class="op" id="7407958">*</span><span class="ident" id="7407959"><a href="/gostd/archive/zip/reader.go.html#5656656">checksumReader</a></span><span class="op" id="7407973">)</span><span class="op" id="7407974">.</span><span class="ident" id="7407975"><a href="/gostd/archive/zip/reader.go.html#5656701">hash</a></span>&nbsp;<span class="op" id="7407980">=</span>&nbsp;<span class="ident" id="7407982"><a href="/gostd/archive/zip/zip_test.go.html#7406697">fakeHash32</a></span><span class="op" id="7407992">{</span><span class="op" id="7407993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407996">for</span>&nbsp;<span class="ident" id="7408000">i</span>&nbsp;<span class="op" id="7408002">:=</span>&nbsp;<span class="num" id="7408005">0</span><span class="op" id="7408006">;</span>&nbsp;<span class="ident" id="7408008"><a href="/gostd/archive/zip/zip_test.go.html#7408000">i</a></span>&nbsp;<span class="op" id="7408010">&lt;</span>&nbsp;<span class="ident" id="7408012"><a href="/gostd/archive/zip/zip_test.go.html#7407092">chunks</a></span><span class="op" id="7408018">;</span>&nbsp;<span class="ident" id="7408020"><a href="/gostd/archive/zip/zip_test.go.html#7408000">i</a></span><span class="op" id="7408021">++</span>&nbsp;<span class="op" id="7408024">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408028">_</span><span class="op" id="7408029">,</span>&nbsp;<span class="ident" id="7408031">err</span>&nbsp;<span class="op" id="7408035">:=</span>&nbsp;<span class="ident" id="7408038"><a href="/gostd/archive/zip/zip_test.go.html#7401683">io</a></span><span class="op" id="7408040">.</span><span class="ident" id="7408041"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="7408049">(</span><span class="ident" id="7408050"><a href="/gostd/archive/zip/zip_test.go.html#7407885">rc</a></span><span class="op" id="7408052">,</span>&nbsp;<span class="ident" id="7408054"><a href="/gostd/archive/zip/zip_test.go.html#7407372">chunk</a></span><span class="op" id="7408059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408063">if</span>&nbsp;<span class="ident" id="7408066"><a href="/gostd/archive/zip/zip_test.go.html#7408031">err</a></span>&nbsp;<span class="op" id="7408070">!=</span>&nbsp;<span class="builtintype" id="7408073">nil</span>&nbsp;<span class="op" id="7408077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408082"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408083">.</span><span class="ident" id="7408084"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7408089">(</span><span class="string" id="7408090">&#34;read:&#34;</span><span class="op" id="7408097">,</span>&nbsp;<span class="ident" id="7408099"><a href="/gostd/archive/zip/zip_test.go.html#7408031">err</a></span><span class="op" id="7408102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408109">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408112">gotEnd</span><span class="op" id="7408118">,</span>&nbsp;<span class="ident" id="7408120"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7408124">:=</span>&nbsp;<span class="ident" id="7408127"><a href="/gostd/archive/zip/zip_test.go.html#7401689">ioutil</a></span><span class="op" id="7408133">.</span><span class="ident" id="7408134"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7408141">(</span><span class="ident" id="7408142"><a href="/gostd/archive/zip/zip_test.go.html#7407885">rc</a></span><span class="op" id="7408144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408147">if</span>&nbsp;<span class="ident" id="7408150"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7408154">!=</span>&nbsp;<span class="builtintype" id="7408157">nil</span>&nbsp;<span class="op" id="7408161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408165"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408166">.</span><span class="ident" id="7408167"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7408172">(</span><span class="string" id="7408173">&#34;read&nbsp;end:&#34;</span><span class="op" id="7408184">,</span>&nbsp;<span class="ident" id="7408186"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7408189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408195">if</span>&nbsp;<span class="op" id="7408198">!</span><span class="ident" id="7408199"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7408204">.</span><span class="ident" id="7408205"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="7408210">(</span><span class="ident" id="7408211"><a href="/gostd/archive/zip/zip_test.go.html#7408112">gotEnd</a></span><span class="op" id="7408217">,</span>&nbsp;<span class="ident" id="7408219"><a href="/gostd/archive/zip/zip_test.go.html#7407565">end</a></span><span class="op" id="7408222">)</span>&nbsp;<span class="op" id="7408224">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408228"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408229">.</span><span class="ident" id="7408230"><a href="/gostd/testing/testing.go.html#5476720">Errorf</a></span><span class="op" id="7408236">(</span><span class="string" id="7408237">&#34;End&nbsp;of&nbsp;zip64&nbsp;archive&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7408271">,</span>&nbsp;<span class="ident" id="7408273"><a href="/gostd/archive/zip/zip_test.go.html#7408112">gotEnd</a></span><span class="op" id="7408279">,</span>&nbsp;<span class="ident" id="7408281"><a href="/gostd/archive/zip/zip_test.go.html#7407565">end</a></span><span class="op" id="7408284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408290"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7408294">=</span>&nbsp;<span class="ident" id="7408296"><a href="/gostd/archive/zip/zip_test.go.html#7407885">rc</a></span><span class="op" id="7408298">.</span><span class="ident" id="7408299"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7408304">(</span><span class="op" id="7408305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408308">if</span>&nbsp;<span class="ident" id="7408311"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span>&nbsp;<span class="op" id="7408315">!=</span>&nbsp;<span class="builtintype" id="7408318">nil</span>&nbsp;<span class="op" id="7408322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408326"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408327">.</span><span class="ident" id="7408328"><a href="/gostd/testing/testing.go.html#5476798">Fatal</a></span><span class="op" id="7408333">(</span><span class="string" id="7408334">&#34;closing:&#34;</span><span class="op" id="7408344">,</span>&nbsp;<span class="ident" id="7408346"><a href="/gostd/archive/zip/zip_test.go.html#7407220">err</a></span><span class="op" id="7408349">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408355">if</span>&nbsp;<span class="ident" id="7408358"><a href="/gostd/archive/zip/zip_test.go.html#7407053">size</a></span>&nbsp;<span class="op" id="7408363">==</span>&nbsp;<span class="num" id="7408366">1</span><span class="op" id="7408367">&lt;&lt;</span><span class="num" id="7408369">32</span>&nbsp;<span class="op" id="7408372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408376">if</span>&nbsp;<span class="ident" id="7408379">got</span><span class="op" id="7408382">,</span>&nbsp;<span class="ident" id="7408384">want</span>&nbsp;<span class="op" id="7408389">:=</span>&nbsp;<span class="ident" id="7408392"><a href="/gostd/archive/zip/zip_test.go.html#7407868">f0</a></span><span class="op" id="7408394">.</span><span class="ident" id="7408395"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="7408411">,</span>&nbsp;<span class="builtintype" id="7408413">uint32</span><span class="op" id="7408419">(</span><span class="ident" id="7408420"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span><span class="op" id="7408429">)</span><span class="op" id="7408430">;</span>&nbsp;<span class="ident" id="7408432"><a href="/gostd/archive/zip/zip_test.go.html#7408379">got</a></span>&nbsp;<span class="op" id="7408436">!=</span>&nbsp;<span class="ident" id="7408439"><a href="/gostd/archive/zip/zip_test.go.html#7408384">want</a></span>&nbsp;<span class="op" id="7408444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408449"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408450">.</span><span class="ident" id="7408451"><a href="/gostd/testing/testing.go.html#5476720">Errorf</a></span><span class="op" id="7408457">(</span><span class="string" id="7408458">&#34;UncompressedSize&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7408488">,</span>&nbsp;<span class="ident" id="7408490"><a href="/gostd/archive/zip/zip_test.go.html#7408379">got</a></span><span class="op" id="7408493">,</span>&nbsp;<span class="ident" id="7408495"><a href="/gostd/archive/zip/zip_test.go.html#7408384">want</a></span><span class="op" id="7408499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408503">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408510">if</span>&nbsp;<span class="ident" id="7408513">got</span><span class="op" id="7408516">,</span>&nbsp;<span class="ident" id="7408518">want</span>&nbsp;<span class="op" id="7408523">:=</span>&nbsp;<span class="ident" id="7408526"><a href="/gostd/archive/zip/zip_test.go.html#7407868">f0</a></span><span class="op" id="7408528">.</span><span class="ident" id="7408529"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="7408547">,</span>&nbsp;<span class="builtintype" id="7408549">uint64</span><span class="op" id="7408555">(</span><span class="ident" id="7408556"><a href="/gostd/archive/zip/zip_test.go.html#7407053">size</a></span><span class="op" id="7408560">)</span><span class="op" id="7408561">+</span><span class="builtintype" id="7408562">uint64</span><span class="op" id="7408568">(</span><span class="builtinfunc" id="7408569">len</span><span class="op" id="7408572">(</span><span class="ident" id="7408573"><a href="/gostd/archive/zip/zip_test.go.html#7407565">end</a></span><span class="op" id="7408576">)</span><span class="op" id="7408577">)</span><span class="op" id="7408578">;</span>&nbsp;<span class="ident" id="7408580"><a href="/gostd/archive/zip/zip_test.go.html#7408513">got</a></span>&nbsp;<span class="op" id="7408584">!=</span>&nbsp;<span class="ident" id="7408587"><a href="/gostd/archive/zip/zip_test.go.html#7408518">want</a></span>&nbsp;<span class="op" id="7408592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408596"><a href="/gostd/archive/zip/zip_test.go.html#7407039">t</a></span><span class="op" id="7408597">.</span><span class="ident" id="7408598"><a href="/gostd/testing/testing.go.html#5476720">Errorf</a></span><span class="op" id="7408604">(</span><span class="string" id="7408605">&#34;UncompressedSize64&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7408637">,</span>&nbsp;<span class="ident" id="7408639"><a href="/gostd/archive/zip/zip_test.go.html#7408513">got</a></span><span class="op" id="7408642">,</span>&nbsp;<span class="ident" id="7408644"><a href="/gostd/archive/zip/zip_test.go.html#7408518">want</a></span><span class="op" id="7408648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408651">}</span><br>
<span class="lineno">305</span><span class="op" id="7408653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7408656">func</span>&nbsp;<span class="ident" id="7408661">testInvalidHeader</span><span class="op" id="7408678">(</span><span class="ident" id="7408679">h</span>&nbsp;<span class="op" id="7408681">*</span><span class="ident" id="7408682"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7408692">,</span>&nbsp;<span class="ident" id="7408694">t</span>&nbsp;<span class="op" id="7408696">*</span><span class="ident" id="7408697"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7408704">.</span><span class="ident" id="7408705"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7408706">)</span>&nbsp;<span class="op" id="7408708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408711">var</span>&nbsp;<span class="ident" id="7408715">buf</span>&nbsp;<span class="ident" id="7408719"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7408724">.</span><span class="ident" id="7408725"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408733">z</span>&nbsp;<span class="op" id="7408735">:=</span>&nbsp;<span class="ident" id="7408738"><a href="/gostd/archive/zip/writer.go.html#5677192">NewWriter</a></span><span class="op" id="7408747">(</span><span class="op" id="7408748">&amp;</span><span class="ident" id="7408749"><a href="/gostd/archive/zip/zip_test.go.html#7408715">buf</a></span><span class="op" id="7408752">)</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408756">f</span><span class="op" id="7408757">,</span>&nbsp;<span class="ident" id="7408759">err</span>&nbsp;<span class="op" id="7408763">:=</span>&nbsp;<span class="ident" id="7408766"><a href="/gostd/archive/zip/zip_test.go.html#7408733">z</a></span><span class="op" id="7408767">.</span><span class="ident" id="7408768"><a href="/gostd/archive/zip/writer.go.html#5682372">CreateHeader</a></span><span class="op" id="7408780">(</span><span class="ident" id="7408781"><a href="/gostd/archive/zip/zip_test.go.html#7408679">h</a></span><span class="op" id="7408782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408785">if</span>&nbsp;<span class="ident" id="7408788"><a href="/gostd/archive/zip/zip_test.go.html#7408759">err</a></span>&nbsp;<span class="op" id="7408792">!=</span>&nbsp;<span class="builtintype" id="7408795">nil</span>&nbsp;<span class="op" id="7408799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408803"><a href="/gostd/archive/zip/zip_test.go.html#7408694">t</a></span><span class="op" id="7408804">.</span><span class="ident" id="7408805"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7408811">(</span><span class="string" id="7408812">&#34;error&nbsp;creating&nbsp;header:&nbsp;%v&#34;</span><span class="op" id="7408839">,</span>&nbsp;<span class="ident" id="7408841"><a href="/gostd/archive/zip/zip_test.go.html#7408759">err</a></span><span class="op" id="7408844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408847">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408850">if</span>&nbsp;<span class="ident" id="7408853">_</span><span class="op" id="7408854">,</span>&nbsp;<span class="ident" id="7408856">err</span>&nbsp;<span class="op" id="7408860">:=</span>&nbsp;<span class="ident" id="7408863"><a href="/gostd/archive/zip/zip_test.go.html#7408756">f</a></span><span class="op" id="7408864">.</span><span class="ident" id="7408865"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7408870">(</span><span class="op" id="7408871">[</span><span class="op" id="7408872">]</span><span class="builtintype" id="7408873">byte</span><span class="op" id="7408877">(</span><span class="string" id="7408878">&#34;hi&#34;</span><span class="op" id="7408882">)</span><span class="op" id="7408883">)</span><span class="op" id="7408884">;</span>&nbsp;<span class="ident" id="7408886"><a href="/gostd/archive/zip/zip_test.go.html#7408856">err</a></span>&nbsp;<span class="op" id="7408890">!=</span>&nbsp;<span class="builtintype" id="7408893">nil</span>&nbsp;<span class="op" id="7408897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408901"><a href="/gostd/archive/zip/zip_test.go.html#7408694">t</a></span><span class="op" id="7408902">.</span><span class="ident" id="7408903"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7408909">(</span><span class="string" id="7408910">&#34;error&nbsp;writing&nbsp;content:&nbsp;%v&#34;</span><span class="op" id="7408937">,</span>&nbsp;<span class="ident" id="7408939"><a href="/gostd/archive/zip/zip_test.go.html#7408856">err</a></span><span class="op" id="7408942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408948">if</span>&nbsp;<span class="ident" id="7408951">err</span>&nbsp;<span class="op" id="7408955">:=</span>&nbsp;<span class="ident" id="7408958"><a href="/gostd/archive/zip/zip_test.go.html#7408733">z</a></span><span class="op" id="7408959">.</span><span class="ident" id="7408960"><a href="/gostd/archive/zip/writer.go.html#5677642">Close</a></span><span class="op" id="7408965">(</span><span class="op" id="7408966">)</span><span class="op" id="7408967">;</span>&nbsp;<span class="ident" id="7408969"><a href="/gostd/archive/zip/zip_test.go.html#7408951">err</a></span>&nbsp;<span class="op" id="7408973">!=</span>&nbsp;<span class="builtintype" id="7408976">nil</span>&nbsp;<span class="op" id="7408980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408984"><a href="/gostd/archive/zip/zip_test.go.html#7408694">t</a></span><span class="op" id="7408985">.</span><span class="ident" id="7408986"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7408992">(</span><span class="string" id="7408993">&#34;error&nbsp;closing&nbsp;zip&nbsp;writer:&nbsp;%v&#34;</span><span class="op" id="7409023">,</span>&nbsp;<span class="ident" id="7409025"><a href="/gostd/archive/zip/zip_test.go.html#7408951">err</a></span><span class="op" id="7409028">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409035">b</span>&nbsp;<span class="op" id="7409037">:=</span>&nbsp;<span class="ident" id="7409040"><a href="/gostd/archive/zip/zip_test.go.html#7408715">buf</a></span><span class="op" id="7409043">.</span><span class="ident" id="7409044"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7409049">(</span><span class="op" id="7409050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409053">if</span>&nbsp;<span class="ident" id="7409056">_</span><span class="op" id="7409057">,</span>&nbsp;<span class="ident" id="7409059"><a href="/gostd/archive/zip/zip_test.go.html#7408759">err</a></span>&nbsp;<span class="op" id="7409063">=</span>&nbsp;<span class="ident" id="7409065"><a href="/gostd/archive/zip/reader.go.html#5654283">NewReader</a></span><span class="op" id="7409074">(</span><span class="ident" id="7409075"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7409080">.</span><span class="ident" id="7409081"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="7409090">(</span><span class="ident" id="7409091"><a href="/gostd/archive/zip/zip_test.go.html#7409035">b</a></span><span class="op" id="7409092">)</span><span class="op" id="7409093">,</span>&nbsp;<span class="builtintype" id="7409095">int64</span><span class="op" id="7409100">(</span><span class="builtinfunc" id="7409101">len</span><span class="op" id="7409104">(</span><span class="ident" id="7409105"><a href="/gostd/archive/zip/zip_test.go.html#7409035">b</a></span><span class="op" id="7409106">)</span><span class="op" id="7409107">)</span><span class="op" id="7409108">)</span><span class="op" id="7409109">;</span>&nbsp;<span class="ident" id="7409111"><a href="/gostd/archive/zip/zip_test.go.html#7408759">err</a></span>&nbsp;<span class="op" id="7409115">!=</span>&nbsp;<span class="ident" id="7409118"><a href="/gostd/archive/zip/reader.go.html#5653308">ErrFormat</a></span>&nbsp;<span class="op" id="7409128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409132"><a href="/gostd/archive/zip/zip_test.go.html#7408694">t</a></span><span class="op" id="7409133">.</span><span class="ident" id="7409134"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7409140">(</span><span class="string" id="7409141">&#34;got&nbsp;%v,&nbsp;expected&nbsp;ErrFormat&#34;</span><span class="op" id="7409169">,</span>&nbsp;<span class="ident" id="7409171"><a href="/gostd/archive/zip/zip_test.go.html#7408759">err</a></span><span class="op" id="7409174">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409177">}</span><br>
<span class="lineno"></span><span class="op" id="7409179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7409182">func</span>&nbsp;<span class="ident" id="7409187">testValidHeader</span><span class="op" id="7409202">(</span><span class="ident" id="7409203">h</span>&nbsp;<span class="op" id="7409205">*</span><span class="ident" id="7409206"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7409216">,</span>&nbsp;<span class="ident" id="7409218">t</span>&nbsp;<span class="op" id="7409220">*</span><span class="ident" id="7409221"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7409228">.</span><span class="ident" id="7409229"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7409230">)</span>&nbsp;<span class="op" id="7409232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409235">var</span>&nbsp;<span class="ident" id="7409239">buf</span>&nbsp;<span class="ident" id="7409243"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7409248">.</span><span class="ident" id="7409249"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409257">z</span>&nbsp;<span class="op" id="7409259">:=</span>&nbsp;<span class="ident" id="7409262"><a href="/gostd/archive/zip/writer.go.html#5677192">NewWriter</a></span><span class="op" id="7409271">(</span><span class="op" id="7409272">&amp;</span><span class="ident" id="7409273"><a href="/gostd/archive/zip/zip_test.go.html#7409239">buf</a></span><span class="op" id="7409276">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409280">f</span><span class="op" id="7409281">,</span>&nbsp;<span class="ident" id="7409283">err</span>&nbsp;<span class="op" id="7409287">:=</span>&nbsp;<span class="ident" id="7409290"><a href="/gostd/archive/zip/zip_test.go.html#7409257">z</a></span><span class="op" id="7409291">.</span><span class="ident" id="7409292"><a href="/gostd/archive/zip/writer.go.html#5682372">CreateHeader</a></span><span class="op" id="7409304">(</span><span class="ident" id="7409305"><a href="/gostd/archive/zip/zip_test.go.html#7409203">h</a></span><span class="op" id="7409306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409309">if</span>&nbsp;<span class="ident" id="7409312"><a href="/gostd/archive/zip/zip_test.go.html#7409283">err</a></span>&nbsp;<span class="op" id="7409316">!=</span>&nbsp;<span class="builtintype" id="7409319">nil</span>&nbsp;<span class="op" id="7409323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409327"><a href="/gostd/archive/zip/zip_test.go.html#7409218">t</a></span><span class="op" id="7409328">.</span><span class="ident" id="7409329"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7409335">(</span><span class="string" id="7409336">&#34;error&nbsp;creating&nbsp;header:&nbsp;%v&#34;</span><span class="op" id="7409363">,</span>&nbsp;<span class="ident" id="7409365"><a href="/gostd/archive/zip/zip_test.go.html#7409283">err</a></span><span class="op" id="7409368">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409374">if</span>&nbsp;<span class="ident" id="7409377">_</span><span class="op" id="7409378">,</span>&nbsp;<span class="ident" id="7409380">err</span>&nbsp;<span class="op" id="7409384">:=</span>&nbsp;<span class="ident" id="7409387"><a href="/gostd/archive/zip/zip_test.go.html#7409280">f</a></span><span class="op" id="7409388">.</span><span class="ident" id="7409389"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7409394">(</span><span class="op" id="7409395">[</span><span class="op" id="7409396">]</span><span class="builtintype" id="7409397">byte</span><span class="op" id="7409401">(</span><span class="string" id="7409402">&#34;hi&#34;</span><span class="op" id="7409406">)</span><span class="op" id="7409407">)</span><span class="op" id="7409408">;</span>&nbsp;<span class="ident" id="7409410"><a href="/gostd/archive/zip/zip_test.go.html#7409380">err</a></span>&nbsp;<span class="op" id="7409414">!=</span>&nbsp;<span class="builtintype" id="7409417">nil</span>&nbsp;<span class="op" id="7409421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409425"><a href="/gostd/archive/zip/zip_test.go.html#7409218">t</a></span><span class="op" id="7409426">.</span><span class="ident" id="7409427"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7409433">(</span><span class="string" id="7409434">&#34;error&nbsp;writing&nbsp;content:&nbsp;%v&#34;</span><span class="op" id="7409461">,</span>&nbsp;<span class="ident" id="7409463"><a href="/gostd/archive/zip/zip_test.go.html#7409380">err</a></span><span class="op" id="7409466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409472">if</span>&nbsp;<span class="ident" id="7409475">err</span>&nbsp;<span class="op" id="7409479">:=</span>&nbsp;<span class="ident" id="7409482"><a href="/gostd/archive/zip/zip_test.go.html#7409257">z</a></span><span class="op" id="7409483">.</span><span class="ident" id="7409484"><a href="/gostd/archive/zip/writer.go.html#5677642">Close</a></span><span class="op" id="7409489">(</span><span class="op" id="7409490">)</span><span class="op" id="7409491">;</span>&nbsp;<span class="ident" id="7409493"><a href="/gostd/archive/zip/zip_test.go.html#7409475">err</a></span>&nbsp;<span class="op" id="7409497">!=</span>&nbsp;<span class="builtintype" id="7409500">nil</span>&nbsp;<span class="op" id="7409504">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409508"><a href="/gostd/archive/zip/zip_test.go.html#7409218">t</a></span><span class="op" id="7409509">.</span><span class="ident" id="7409510"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7409516">(</span><span class="string" id="7409517">&#34;error&nbsp;closing&nbsp;zip&nbsp;writer:&nbsp;%v&#34;</span><span class="op" id="7409547">,</span>&nbsp;<span class="ident" id="7409549"><a href="/gostd/archive/zip/zip_test.go.html#7409475">err</a></span><span class="op" id="7409552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409559">b</span>&nbsp;<span class="op" id="7409561">:=</span>&nbsp;<span class="ident" id="7409564"><a href="/gostd/archive/zip/zip_test.go.html#7409239">buf</a></span><span class="op" id="7409567">.</span><span class="ident" id="7409568"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7409573">(</span><span class="op" id="7409574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409577">if</span>&nbsp;<span class="ident" id="7409580">_</span><span class="op" id="7409581">,</span>&nbsp;<span class="ident" id="7409583"><a href="/gostd/archive/zip/zip_test.go.html#7409283">err</a></span>&nbsp;<span class="op" id="7409587">=</span>&nbsp;<span class="ident" id="7409589"><a href="/gostd/archive/zip/reader.go.html#5654283">NewReader</a></span><span class="op" id="7409598">(</span><span class="ident" id="7409599"><a href="/gostd/archive/zip/zip_test.go.html#7401659">bytes</a></span><span class="op" id="7409604">.</span><span class="ident" id="7409605"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="7409614">(</span><span class="ident" id="7409615"><a href="/gostd/archive/zip/zip_test.go.html#7409559">b</a></span><span class="op" id="7409616">)</span><span class="op" id="7409617">,</span>&nbsp;<span class="builtintype" id="7409619">int64</span><span class="op" id="7409624">(</span><span class="builtinfunc" id="7409625">len</span><span class="op" id="7409628">(</span><span class="ident" id="7409629"><a href="/gostd/archive/zip/zip_test.go.html#7409559">b</a></span><span class="op" id="7409630">)</span><span class="op" id="7409631">)</span><span class="op" id="7409632">)</span><span class="op" id="7409633">;</span>&nbsp;<span class="ident" id="7409635"><a href="/gostd/archive/zip/zip_test.go.html#7409283">err</a></span>&nbsp;<span class="op" id="7409639">!=</span>&nbsp;<span class="builtintype" id="7409642">nil</span>&nbsp;<span class="op" id="7409646">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409650"><a href="/gostd/archive/zip/zip_test.go.html#7409218">t</a></span><span class="op" id="7409651">.</span><span class="ident" id="7409652"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7409658">(</span><span class="string" id="7409659">&#34;got&nbsp;%v,&nbsp;expected&nbsp;nil&#34;</span><span class="op" id="7409681">,</span>&nbsp;<span class="ident" id="7409683"><a href="/gostd/archive/zip/zip_test.go.html#7409283">err</a></span><span class="op" id="7409686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409689">}</span><br>
<span class="lineno"></span><span class="op" id="7409691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7409694">//&nbsp;Issue&nbsp;4302.</span><br>
<span class="lineno">350</span><span class="keyword" id="7409709">func</span>&nbsp;<span class="ident" id="7409714">TestHeaderInvalidTagAndSize</span><span class="op" id="7409741">(</span><span class="ident" id="7409742">t</span>&nbsp;<span class="op" id="7409744">*</span><span class="ident" id="7409745"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7409752">.</span><span class="ident" id="7409753"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7409754">)</span>&nbsp;<span class="op" id="7409756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409759">const</span>&nbsp;<span class="ident" id="7409765">timeFormat</span>&nbsp;<span class="op" id="7409776">=</span>&nbsp;<span class="string" id="7409778">&#34;20060102T150405.000.txt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409806">ts</span>&nbsp;<span class="op" id="7409809">:=</span>&nbsp;<span class="ident" id="7409812"><a href="/gostd/archive/zip/zip_test.go.html#7401732">time</a></span><span class="op" id="7409816">.</span><span class="ident" id="7409817"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="7409820">(</span><span class="op" id="7409821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409824">filename</span>&nbsp;<span class="op" id="7409833">:=</span>&nbsp;<span class="ident" id="7409836"><a href="/gostd/archive/zip/zip_test.go.html#7409806">ts</a></span><span class="op" id="7409838">.</span><span class="ident" id="7409839"><a href="/gostd/time/format.go.html#2690960">Format</a></span><span class="op" id="7409845">(</span><span class="ident" id="7409846"><a href="/gostd/archive/zip/zip_test.go.html#7409765">timeFormat</a></span><span class="op" id="7409856">)</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409860">h</span>&nbsp;<span class="op" id="7409862">:=</span>&nbsp;<span class="ident" id="7409865"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7409875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409879"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7409883">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7409887"><a href="/gostd/archive/zip/zip_test.go.html#7409824">filename</a></span><span class="op" id="7409895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409899"><a href="/gostd/archive/zip/struct.go.html#5670463">Method</a></span><span class="op" id="7409905">:</span>&nbsp;<span class="ident" id="7409907"><a href="/gostd/archive/zip/struct.go.html#5668884">Deflate</a></span><span class="op" id="7409914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409918"><a href="/gostd/archive/zip/struct.go.html#5670783">Extra</a></span><span class="op" id="7409923">:</span>&nbsp;&nbsp;<span class="op" id="7409926">[</span><span class="op" id="7409927">]</span><span class="builtintype" id="7409928">byte</span><span class="op" id="7409932">(</span><span class="ident" id="7409933"><a href="/gostd/archive/zip/zip_test.go.html#7409806">ts</a></span><span class="op" id="7409935">.</span><span class="ident" id="7409936"><a href="/gostd/time/format.go.html#2690960">Format</a></span><span class="op" id="7409942">(</span><span class="ident" id="7409943"><a href="/gostd/archive/zip/zip_test.go.html#7401732">time</a></span><span class="op" id="7409947">.</span><span class="ident" id="7409948"><a href="/gostd/time/format.go.html#2680577">RFC3339Nano</a></span><span class="op" id="7409959">)</span><span class="op" id="7409960">)</span><span class="op" id="7409961">,</span>&nbsp;<span class="comment" id="7409963">//&nbsp;missing&nbsp;tag&nbsp;and&nbsp;len</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409990"><a href="/gostd/archive/zip/zip_test.go.html#7409860">h</a></span><span class="op" id="7409991">.</span><span class="ident" id="7409992"><a href="/gostd/archive/zip/struct.go.html#5673845">SetModTime</a></span><span class="op" id="7410002">(</span><span class="ident" id="7410003"><a href="/gostd/archive/zip/zip_test.go.html#7409806">ts</a></span><span class="op" id="7410005">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410009"><a href="/gostd/archive/zip/zip_test.go.html#7408661">testInvalidHeader</a></span><span class="op" id="7410026">(</span><span class="op" id="7410027">&amp;</span><span class="ident" id="7410028"><a href="/gostd/archive/zip/zip_test.go.html#7409860">h</a></span><span class="op" id="7410029">,</span>&nbsp;<span class="ident" id="7410031"><a href="/gostd/archive/zip/zip_test.go.html#7409742">t</a></span><span class="op" id="7410032">)</span><br>
<span class="lineno"></span><span class="op" id="7410034">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7410037">func</span>&nbsp;<span class="ident" id="7410042">TestHeaderTooShort</span><span class="op" id="7410060">(</span><span class="ident" id="7410061">t</span>&nbsp;<span class="op" id="7410063">*</span><span class="ident" id="7410064"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7410071">.</span><span class="ident" id="7410072"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7410073">)</span>&nbsp;<span class="op" id="7410075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410078">h</span>&nbsp;<span class="op" id="7410080">:=</span>&nbsp;<span class="ident" id="7410083"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7410093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410097"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7410101">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7410105">&#34;foo.txt&#34;</span><span class="op" id="7410114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410118"><a href="/gostd/archive/zip/struct.go.html#5670463">Method</a></span><span class="op" id="7410124">:</span>&nbsp;<span class="ident" id="7410126"><a href="/gostd/archive/zip/struct.go.html#5668884">Deflate</a></span><span class="op" id="7410133">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410137"><a href="/gostd/archive/zip/struct.go.html#5670783">Extra</a></span><span class="op" id="7410142">:</span>&nbsp;&nbsp;<span class="op" id="7410145">[</span><span class="op" id="7410146">]</span><span class="builtintype" id="7410147">byte</span><span class="op" id="7410151">{</span><span class="ident" id="7410152"><a href="/gostd/archive/zip/struct.go.html#5670014">zip64ExtraId</a></span><span class="op" id="7410164">}</span><span class="op" id="7410165">,</span>&nbsp;<span class="comment" id="7410167">//&nbsp;missing&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410187"><a href="/gostd/archive/zip/zip_test.go.html#7408661">testInvalidHeader</a></span><span class="op" id="7410204">(</span><span class="op" id="7410205">&amp;</span><span class="ident" id="7410206"><a href="/gostd/archive/zip/zip_test.go.html#7410078">h</a></span><span class="op" id="7410207">,</span>&nbsp;<span class="ident" id="7410209"><a href="/gostd/archive/zip/zip_test.go.html#7410061">t</a></span><span class="op" id="7410210">)</span><br>
<span class="lineno"></span><span class="op" id="7410212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span><span class="comment" id="7410215">//&nbsp;Issue&nbsp;4393.&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;have&nbsp;an&nbsp;extra&nbsp;data&nbsp;header</span><br>
<span class="lineno"></span><span class="comment" id="7410271">//&nbsp;which&nbsp;contains&nbsp;no&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="7410298">func</span>&nbsp;<span class="ident" id="7410303">TestZeroLengthHeader</span><span class="op" id="7410323">(</span><span class="ident" id="7410324">t</span>&nbsp;<span class="op" id="7410326">*</span><span class="ident" id="7410327"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7410334">.</span><span class="ident" id="7410335"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7410336">)</span>&nbsp;<span class="op" id="7410338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410341">h</span>&nbsp;<span class="op" id="7410343">:=</span>&nbsp;<span class="ident" id="7410346"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="7410356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410360"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="7410364">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7410368">&#34;extadata.txt&#34;</span><span class="op" id="7410382">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410386"><a href="/gostd/archive/zip/struct.go.html#5670463">Method</a></span><span class="op" id="7410392">:</span>&nbsp;<span class="ident" id="7410394"><a href="/gostd/archive/zip/struct.go.html#5668884">Deflate</a></span><span class="op" id="7410401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410405"><a href="/gostd/archive/zip/struct.go.html#5670783">Extra</a></span><span class="op" id="7410410">:</span>&nbsp;<span class="op" id="7410412">[</span><span class="op" id="7410413">]</span><span class="builtintype" id="7410414">byte</span><span class="op" id="7410418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7410423">85</span><span class="op" id="7410425">,</span>&nbsp;<span class="num" id="7410427">84</span><span class="op" id="7410429">,</span>&nbsp;<span class="num" id="7410431">5</span><span class="op" id="7410432">,</span>&nbsp;<span class="num" id="7410434">0</span><span class="op" id="7410435">,</span>&nbsp;<span class="num" id="7410437">3</span><span class="op" id="7410438">,</span>&nbsp;<span class="num" id="7410440">154</span><span class="op" id="7410443">,</span>&nbsp;<span class="num" id="7410445">144</span><span class="op" id="7410448">,</span>&nbsp;<span class="num" id="7410450">195</span><span class="op" id="7410453">,</span>&nbsp;<span class="num" id="7410455">77</span><span class="op" id="7410457">,</span>&nbsp;<span class="comment" id="7410459">//&nbsp;tag&nbsp;21589&nbsp;size&nbsp;5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7410482">85</span><span class="op" id="7410484">,</span>&nbsp;<span class="num" id="7410486">120</span><span class="op" id="7410489">,</span>&nbsp;<span class="num" id="7410491">0</span><span class="op" id="7410492">,</span>&nbsp;<span class="num" id="7410494">0</span><span class="op" id="7410495">,</span>&nbsp;<span class="comment" id="7410497">//&nbsp;tag&nbsp;30805&nbsp;size&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410519">}</span><span class="op" id="7410520">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410526"><a href="/gostd/archive/zip/zip_test.go.html#7409187">testValidHeader</a></span><span class="op" id="7410541">(</span><span class="op" id="7410542">&amp;</span><span class="ident" id="7410543"><a href="/gostd/archive/zip/zip_test.go.html#7410341">h</a></span><span class="op" id="7410544">,</span>&nbsp;<span class="ident" id="7410546"><a href="/gostd/archive/zip/zip_test.go.html#7410324">t</a></span><span class="op" id="7410547">)</span><br>
<span class="lineno"></span><span class="op" id="7410549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7410552">//&nbsp;Just&nbsp;benchmarking&nbsp;how&nbsp;fast&nbsp;the&nbsp;Zip64&nbsp;test&nbsp;above&nbsp;is.&nbsp;Not&nbsp;related&nbsp;to</span><br>
<span class="lineno">390</span><span class="comment" id="7410622">//&nbsp;our&nbsp;zip&nbsp;performance,&nbsp;since&nbsp;the&nbsp;test&nbsp;above&nbsp;disabled&nbsp;CRC32&nbsp;and&nbsp;flate.</span><br>
<span class="lineno"></span><span class="keyword" id="7410693">func</span>&nbsp;<span class="ident" id="7410698">BenchmarkZip64Test</span><span class="op" id="7410716">(</span><span class="ident" id="7410717">b</span>&nbsp;<span class="op" id="7410719">*</span><span class="ident" id="7410720"><a href="/gostd/archive/zip/zip_test.go.html#7401721">testing</a></span><span class="op" id="7410727">.</span><span class="ident" id="7410728"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7410729">)</span>&nbsp;<span class="op" id="7410731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410734">for</span>&nbsp;<span class="ident" id="7410738">i</span>&nbsp;<span class="op" id="7410740">:=</span>&nbsp;<span class="num" id="7410743">0</span><span class="op" id="7410744">;</span>&nbsp;<span class="ident" id="7410746"><a href="/gostd/archive/zip/zip_test.go.html#7410738">i</a></span>&nbsp;<span class="op" id="7410748">&lt;</span>&nbsp;<span class="ident" id="7410750"><a href="/gostd/archive/zip/zip_test.go.html#7410717">b</a></span><span class="op" id="7410751">.</span><span class="ident" id="7410752"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="7410753">;</span>&nbsp;<span class="ident" id="7410755"><a href="/gostd/archive/zip/zip_test.go.html#7410738">i</a></span><span class="op" id="7410756">++</span>&nbsp;<span class="op" id="7410759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410763"><a href="/gostd/archive/zip/zip_test.go.html#7407029">testZip64</a></span><span class="op" id="7410772">(</span><span class="ident" id="7410773"><a href="/gostd/archive/zip/zip_test.go.html#7410717">b</a></span><span class="op" id="7410774">,</span>&nbsp;<span class="num" id="7410776">1</span><span class="op" id="7410777">&lt;&lt;</span><span class="num" id="7410779">26</span><span class="op" id="7410781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410784">}</span><br>
<span class="lineno">395</span><span class="op" id="7410786">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
