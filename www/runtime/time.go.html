<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1986678">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1986733">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1986787">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1986838">//&nbsp;Time-related&nbsp;runtime&nbsp;and&nbsp;pieces&nbsp;of&nbsp;package&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1986891">package</span>&nbsp;<span class="ident" id="1986899">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1986908">import</span>&nbsp;<span class="string" id="1986915">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="1986925">//&nbsp;Package&nbsp;time&nbsp;knows&nbsp;the&nbsp;layout&nbsp;of&nbsp;this&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="1986977">//&nbsp;If&nbsp;this&nbsp;struct&nbsp;changes,&nbsp;adjust&nbsp;../time/sleep.go:/runtimeTimer.</span><br>
<span class="lineno"></span><span class="comment" id="1987043">//&nbsp;For&nbsp;GOOS=nacl,&nbsp;package&nbsp;syscall&nbsp;knows&nbsp;the&nbsp;layout&nbsp;of&nbsp;this&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="1987113">//&nbsp;If&nbsp;this&nbsp;struct&nbsp;changes,&nbsp;adjust&nbsp;../syscall/net_nacl.go:/runtimeTimer.</span><br>
<span class="lineno">15</span><span class="keyword" id="1987185">type</span>&nbsp;<span class="ident" id="1987190">timer</span>&nbsp;<span class="keyword" id="1987196">struct</span>&nbsp;<span class="op" id="1987203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987206">i</span>&nbsp;<span class="builtintype" id="1987208">int</span>&nbsp;<span class="comment" id="1987212">//&nbsp;heap&nbsp;index</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1987228">//&nbsp;Timer&nbsp;wakes&nbsp;up&nbsp;at&nbsp;when,&nbsp;and&nbsp;then&nbsp;at&nbsp;when+period,&nbsp;...&nbsp;(period&nbsp;&gt;&nbsp;0&nbsp;only)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1987303">//&nbsp;each&nbsp;time&nbsp;calling&nbsp;f(now,&nbsp;arg)&nbsp;in&nbsp;the&nbsp;timer&nbsp;goroutine,&nbsp;so&nbsp;f&nbsp;must&nbsp;be</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1987374">//&nbsp;a&nbsp;well-behaved&nbsp;function&nbsp;and&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987417">when</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1987424">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987431">period</span>&nbsp;<span class="ident" id="1987438">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987445">f</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987452">func</span><span class="op" id="1987456">(</span><span class="keyword" id="1987457">interface</span><span class="op" id="1987466">{</span><span class="op" id="1987467">}</span><span class="op" id="1987468">,</span>&nbsp;<span class="builtintype" id="1987470">uintptr</span><span class="op" id="1987477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987480">arg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987487">interface</span><span class="op" id="1987496">{</span><span class="op" id="1987497">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987500">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1987507">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1987515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1987518">var</span>&nbsp;<span class="ident" id="1987522">timers</span>&nbsp;<span class="keyword" id="1987529">struct</span>&nbsp;<span class="op" id="1987536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987539">lock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987552"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2016175">mutex</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987559">gp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987572">*</span><span class="ident" id="1987573"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2017238">g</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987576">created</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1987589">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987595">sleeping</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1987608">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987614">rescheduling</span>&nbsp;<span class="builtintype" id="1987627">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987633">waitnote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987646"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2016211">note</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1987652">t</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987665">[</span><span class="op" id="1987666">]</span><span class="op" id="1987667">*</span><span class="ident" id="1987668"><a href="/runtime/time.go.html#1987190">timer</a></span><br>
<span class="lineno"></span><span class="op" id="1987674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1987677">//&nbsp;nacl&nbsp;fake&nbsp;time&nbsp;support&nbsp;-&nbsp;time&nbsp;in&nbsp;nanoseconds&nbsp;since&nbsp;1970</span><br>
<span class="lineno"></span><span class="keyword" id="1987736">var</span>&nbsp;<span class="ident" id="1987740">faketime</span>&nbsp;<span class="ident" id="1987749">int64</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="1987756">//&nbsp;Package&nbsp;time&nbsp;APIs.</span><br>
<span class="lineno"></span><span class="comment" id="1987778">//&nbsp;Godoc&nbsp;uses&nbsp;the&nbsp;comments&nbsp;in&nbsp;package&nbsp;time,&nbsp;not&nbsp;these.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1987834">//&nbsp;time.now&nbsp;is&nbsp;implemented&nbsp;in&nbsp;assembly.</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1987875">//&nbsp;Sleep&nbsp;puts&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;to&nbsp;sleep&nbsp;for&nbsp;at&nbsp;least&nbsp;ns&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="1987949">func</span>&nbsp;<span class="ident" id="1987954">timeSleep</span><span class="op" id="1987963">(</span><span class="ident" id="1987964">ns</span>&nbsp;<span class="ident" id="1987967">int64</span><span class="op" id="1987972">)</span>&nbsp;<span class="op" id="1987974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1987977">if</span>&nbsp;<span class="ident" id="1987980"><a href="/runtime/time.go.html#1987964">ns</a></span>&nbsp;<span class="op" id="1987983">&lt;=</span>&nbsp;<span class="num" id="1987986">0</span>&nbsp;<span class="op" id="1987988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1987992">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1988000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988004">t</span>&nbsp;<span class="op" id="1988006">:=</span>&nbsp;<span class="builtinfunc" id="1988009">new</span><span class="op" id="1988012">(</span><span class="ident" id="1988013"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1988018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988021"><a href="/runtime/time.go.html#1988004">t</a></span><span class="op" id="1988022">.</span><span class="ident" id="1988023">when</span>&nbsp;<span class="op" id="1988028">=</span>&nbsp;<span class="ident" id="1988030"><a href="/runtime/stubs.go.html#1973903">nanotime</a></span><span class="op" id="1988038">(</span><span class="op" id="1988039">)</span>&nbsp;<span class="op" id="1988041">+</span>&nbsp;<span class="ident" id="1988043"><a href="/runtime/time.go.html#1987964">ns</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988047"><a href="/runtime/time.go.html#1988004">t</a></span><span class="op" id="1988048">.</span><span class="ident" id="1988049">f</span>&nbsp;<span class="op" id="1988051">=</span>&nbsp;<span class="ident" id="1988053"><a href="/runtime/time.go.html#1988531">goroutineReady</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988069"><a href="/runtime/time.go.html#1988004">t</a></span><span class="op" id="1988070">.</span><span class="ident" id="1988071">arg</span>&nbsp;<span class="op" id="1988075">=</span>&nbsp;<span class="ident" id="1988077"><a href="/runtime/stubs.go.html#1968886">getg</a></span><span class="op" id="1988081">(</span><span class="op" id="1988082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988085"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1988089">(</span><span class="op" id="1988090">&amp;</span><span class="ident" id="1988091"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1988097">.</span><span class="ident" id="1988098">lock</span><span class="op" id="1988102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988105"><a href="/runtime/time.go.html#1988833">addtimerLocked</a></span><span class="op" id="1988119">(</span><span class="ident" id="1988120"><a href="/runtime/time.go.html#1988004">t</a></span><span class="op" id="1988121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988124"><a href="/runtime/proc.go.html#1903766">goparkunlock</a></span><span class="op" id="1988136">(</span><span class="op" id="1988137">&amp;</span><span class="ident" id="1988138"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1988144">.</span><span class="ident" id="1988145">lock</span><span class="op" id="1988149">,</span>&nbsp;<span class="string" id="1988151">&#34;sleep&#34;</span><span class="op" id="1988158">)</span><br>
<span class="lineno"></span><span class="op" id="1988160">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="1988163">//&nbsp;startTimer&nbsp;adds&nbsp;t&nbsp;to&nbsp;the&nbsp;timer&nbsp;heap.</span><br>
<span class="lineno"></span><span class="keyword" id="1988203">func</span>&nbsp;<span class="ident" id="1988208">startTimer</span><span class="op" id="1988218">(</span><span class="ident" id="1988219">t</span>&nbsp;<span class="op" id="1988221">*</span><span class="ident" id="1988222"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1988227">)</span>&nbsp;<span class="op" id="1988229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1988232">if</span>&nbsp;<span class="ident" id="1988235"><a href="/runtime/race0.go.html#1906481">raceenabled</a></span>&nbsp;<span class="op" id="1988247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988251"><a href="/runtime/race0.go.html#1907639">racerelease</a></span><span class="op" id="1988262">(</span><span class="ident" id="1988263"><a href="/runtime/time.go.html#1986915">unsafe</a></span><span class="op" id="1988269">.</span><span class="ident" id="1988270">Pointer</span><span class="op" id="1988277">(</span><span class="ident" id="1988278"><a href="/runtime/time.go.html#1988219">t</a></span><span class="op" id="1988279">)</span><span class="op" id="1988280">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1988283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988286"><a href="/runtime/time.go.html#1988605">addtimer</a></span><span class="op" id="1988294">(</span><span class="ident" id="1988295"><a href="/runtime/time.go.html#1988219">t</a></span><span class="op" id="1988296">)</span><br>
<span class="lineno"></span><span class="op" id="1988298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1988301">//&nbsp;stopTimer&nbsp;removes&nbsp;t&nbsp;from&nbsp;the&nbsp;timer&nbsp;heap&nbsp;if&nbsp;it&nbsp;is&nbsp;there.</span><br>
<span class="lineno">70</span><span class="comment" id="1988360">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;t&nbsp;was&nbsp;removed,&nbsp;false&nbsp;if&nbsp;t&nbsp;wasn&#39;t&nbsp;even&nbsp;there.</span><br>
<span class="lineno"></span><span class="keyword" id="1988427">func</span>&nbsp;<span class="ident" id="1988432">stopTimer</span><span class="op" id="1988441">(</span><span class="ident" id="1988442">t</span>&nbsp;<span class="op" id="1988444">*</span><span class="ident" id="1988445"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1988450">)</span>&nbsp;<span class="builtintype" id="1988452">bool</span>&nbsp;<span class="op" id="1988457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1988460">return</span>&nbsp;<span class="ident" id="1988467"><a href="/runtime/time.go.html#1989531">deltimer</a></span><span class="op" id="1988475">(</span><span class="ident" id="1988476"><a href="/runtime/time.go.html#1988442">t</a></span><span class="op" id="1988477">)</span><br>
<span class="lineno"></span><span class="op" id="1988479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="1988482">//&nbsp;Go&nbsp;runtime.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1988498">//&nbsp;Ready&nbsp;the&nbsp;goroutine&nbsp;arg.</span><br>
<span class="lineno"></span><span class="keyword" id="1988526">func</span>&nbsp;<span class="ident" id="1988531">goroutineReady</span><span class="op" id="1988545">(</span><span class="ident" id="1988546">arg</span>&nbsp;<span class="keyword" id="1988550">interface</span><span class="op" id="1988559">{</span><span class="op" id="1988560">}</span><span class="op" id="1988561">,</span>&nbsp;<span class="ident" id="1988563">seq</span>&nbsp;<span class="builtintype" id="1988567">uintptr</span><span class="op" id="1988574">)</span>&nbsp;<span class="op" id="1988576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988579"><a href="/runtime/proc.go.html#1903886">goready</a></span><span class="op" id="1988586">(</span><span class="ident" id="1988587"><a href="/runtime/time.go.html#1988546">arg</a></span><span class="op" id="1988590">.</span><span class="op" id="1988591">(</span><span class="op" id="1988592">*</span><span class="ident" id="1988593"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2017238">g</a></span><span class="op" id="1988594">)</span><span class="op" id="1988595">)</span><br>
<span class="lineno">80</span><span class="op" id="1988597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1988600">func</span>&nbsp;<span class="ident" id="1988605">addtimer</span><span class="op" id="1988613">(</span><span class="ident" id="1988614">t</span>&nbsp;<span class="op" id="1988616">*</span><span class="ident" id="1988617"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1988622">)</span>&nbsp;<span class="op" id="1988624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988627"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1988631">(</span><span class="op" id="1988632">&amp;</span><span class="ident" id="1988633"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1988639">.</span><span class="ident" id="1988640">lock</span><span class="op" id="1988644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988647"><a href="/runtime/time.go.html#1988833">addtimerLocked</a></span><span class="op" id="1988661">(</span><span class="ident" id="1988662"><a href="/runtime/time.go.html#1988614">t</a></span><span class="op" id="1988663">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1988666"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1988672">(</span><span class="op" id="1988673">&amp;</span><span class="ident" id="1988674"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1988680">.</span><span class="ident" id="1988681">lock</span><span class="op" id="1988685">)</span><br>
<span class="lineno"></span><span class="op" id="1988687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1988690">//&nbsp;Add&nbsp;a&nbsp;timer&nbsp;to&nbsp;the&nbsp;heap&nbsp;and&nbsp;start&nbsp;or&nbsp;kick&nbsp;the&nbsp;timer&nbsp;proc.</span><br>
<span class="lineno"></span><span class="comment" id="1988751">//&nbsp;If&nbsp;the&nbsp;new&nbsp;timer&nbsp;is&nbsp;earlier&nbsp;than&nbsp;any&nbsp;of&nbsp;the&nbsp;others.</span><br>
<span class="lineno">90</span><span class="comment" id="1988806">//&nbsp;Timers&nbsp;are&nbsp;locked.</span><br>
<span class="lineno"></span><span class="keyword" id="1988828">func</span>&nbsp;<span class="ident" id="1988833">addtimerLocked</span><span class="op" id="1988847">(</span><span class="ident" id="1988848">t</span>&nbsp;<span class="op" id="1988850">*</span><span class="ident" id="1988851"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1988856">)</span>&nbsp;<span class="op" id="1988858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1988861">//&nbsp;when&nbsp;must&nbsp;never&nbsp;be&nbsp;negative;&nbsp;otherwise&nbsp;timerproc&nbsp;will&nbsp;overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1988928">//&nbsp;during&nbsp;its&nbsp;delta&nbsp;calculation&nbsp;and&nbsp;never&nbsp;expire&nbsp;other&nbsp;runtime·timers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989001">if</span>&nbsp;<span class="ident" id="1989004"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989005">.</span><span class="ident" id="1989006">when</span>&nbsp;<span class="op" id="1989011">&lt;</span>&nbsp;<span class="num" id="1989013">0</span>&nbsp;<span class="op" id="1989015">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989019"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989020">.</span><span class="ident" id="1989021">when</span>&nbsp;<span class="op" id="1989026">=</span>&nbsp;<span class="num" id="1989028">1</span><span class="op" id="1989029">&lt;&lt;</span><span class="num" id="1989031">63</span>&nbsp;<span class="op" id="1989034">-</span>&nbsp;<span class="num" id="1989036">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989042"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989043">.</span><span class="ident" id="1989044">i</span>&nbsp;<span class="op" id="1989046">=</span>&nbsp;<span class="builtinfunc" id="1989048">len</span><span class="op" id="1989051">(</span><span class="ident" id="1989052"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989058">.</span><span class="ident" id="1989059">t</span><span class="op" id="1989060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989063"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989069">.</span><span class="ident" id="1989070">t</span>&nbsp;<span class="op" id="1989072">=</span>&nbsp;<span class="builtinfunc" id="1989074">append</span><span class="op" id="1989080">(</span><span class="ident" id="1989081"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989087">.</span><span class="ident" id="1989088">t</span><span class="op" id="1989089">,</span>&nbsp;<span class="ident" id="1989091"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989095"><a href="/runtime/time.go.html#1992002">siftupTimer</a></span><span class="op" id="1989106">(</span><span class="ident" id="1989107"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989108">.</span><span class="ident" id="1989109">i</span><span class="op" id="1989110">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989113">if</span>&nbsp;<span class="ident" id="1989116"><a href="/runtime/time.go.html#1988848">t</a></span><span class="op" id="1989117">.</span><span class="ident" id="1989118">i</span>&nbsp;<span class="op" id="1989120">==</span>&nbsp;<span class="num" id="1989123">0</span>&nbsp;<span class="op" id="1989125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989129">//&nbsp;siftup&nbsp;moved&nbsp;to&nbsp;top:&nbsp;new&nbsp;earliest&nbsp;deadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989178">if</span>&nbsp;<span class="ident" id="1989181"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989187">.</span><span class="ident" id="1989188">sleeping</span>&nbsp;<span class="op" id="1989197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989202"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989208">.</span><span class="ident" id="1989209">sleeping</span>&nbsp;<span class="op" id="1989218">=</span>&nbsp;<span class="ident" id="1989220">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989229"><a href="/runtime/lock_futex.go.html#1817095">notewakeup</a></span><span class="op" id="1989239">(</span><span class="op" id="1989240">&amp;</span><span class="ident" id="1989241"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989247">.</span><span class="ident" id="1989248">waitnote</span><span class="op" id="1989256">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989264">if</span>&nbsp;<span class="ident" id="1989267"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989273">.</span><span class="ident" id="1989274">rescheduling</span>&nbsp;<span class="op" id="1989287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989292"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989298">.</span><span class="ident" id="1989299">rescheduling</span>&nbsp;<span class="op" id="1989312">=</span>&nbsp;<span class="ident" id="1989314">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989323"><a href="/runtime/proc.go.html#1903886">goready</a></span><span class="op" id="1989330">(</span><span class="ident" id="1989331"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989337">.</span><span class="ident" id="1989338">gp</span><span class="op" id="1989340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989344">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989350">if</span>&nbsp;<span class="op" id="1989353">!</span><span class="ident" id="1989354"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989360">.</span><span class="ident" id="1989361">created</span>&nbsp;<span class="op" id="1989369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989373"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989379">.</span><span class="ident" id="1989380">created</span>&nbsp;<span class="op" id="1989388">=</span>&nbsp;<span class="ident" id="1989390">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989397">go</span>&nbsp;<span class="ident" id="1989400"><a href="/runtime/time.go.html#1990359">timerproc</a></span><span class="op" id="1989409">(</span><span class="op" id="1989410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989413">}</span><br>
<span class="lineno">115</span><span class="op" id="1989415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1989418">//&nbsp;Delete&nbsp;timer&nbsp;t&nbsp;from&nbsp;the&nbsp;heap.</span><br>
<span class="lineno"></span><span class="comment" id="1989451">//&nbsp;Do&nbsp;not&nbsp;need&nbsp;to&nbsp;update&nbsp;the&nbsp;timerproc:&nbsp;if&nbsp;it&nbsp;wakes&nbsp;up&nbsp;early,&nbsp;no&nbsp;big&nbsp;deal.</span><br>
<span class="lineno"></span><span class="keyword" id="1989526">func</span>&nbsp;<span class="ident" id="1989531">deltimer</span><span class="op" id="1989539">(</span><span class="ident" id="1989540">t</span>&nbsp;<span class="op" id="1989542">*</span><span class="ident" id="1989543"><a href="/runtime/time.go.html#1987190">timer</a></span><span class="op" id="1989548">)</span>&nbsp;<span class="builtintype" id="1989550">bool</span>&nbsp;<span class="op" id="1989555">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989558">//&nbsp;Dereference&nbsp;t&nbsp;so&nbsp;that&nbsp;any&nbsp;panic&nbsp;happens&nbsp;before&nbsp;the&nbsp;lock&nbsp;is&nbsp;held.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989627">//&nbsp;Discard&nbsp;result,&nbsp;because&nbsp;t&nbsp;might&nbsp;be&nbsp;moving&nbsp;in&nbsp;the&nbsp;heap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989686">_</span>&nbsp;<span class="op" id="1989688">=</span>&nbsp;<span class="ident" id="1989690"><a href="/runtime/time.go.html#1989540">t</a></span><span class="op" id="1989691">.</span><span class="ident" id="1989692">i</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989696"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1989700">(</span><span class="op" id="1989701">&amp;</span><span class="ident" id="1989702"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989708">.</span><span class="ident" id="1989709">lock</span><span class="op" id="1989713">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989716">//&nbsp;t&nbsp;may&nbsp;not&nbsp;be&nbsp;registered&nbsp;anymore&nbsp;and&nbsp;may&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989765">//&nbsp;a&nbsp;bogus&nbsp;i&nbsp;(typically&nbsp;0,&nbsp;if&nbsp;generated&nbsp;by&nbsp;Go).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1989814">//&nbsp;Verify&nbsp;it&nbsp;before&nbsp;proceeding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989847">i</span>&nbsp;<span class="op" id="1989849">:=</span>&nbsp;<span class="ident" id="1989852"><a href="/runtime/time.go.html#1989540">t</a></span><span class="op" id="1989853">.</span><span class="ident" id="1989854">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989857">last</span>&nbsp;<span class="op" id="1989862">:=</span>&nbsp;<span class="builtinfunc" id="1989865">len</span><span class="op" id="1989868">(</span><span class="ident" id="1989869"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989875">.</span><span class="ident" id="1989876">t</span><span class="op" id="1989877">)</span>&nbsp;<span class="op" id="1989879">-</span>&nbsp;<span class="num" id="1989881">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989884">if</span>&nbsp;<span class="ident" id="1989887"><a href="/runtime/time.go.html#1989847">i</a></span>&nbsp;<span class="op" id="1989889">&lt;</span>&nbsp;<span class="num" id="1989891">0</span>&nbsp;<span class="op" id="1989893">||</span>&nbsp;<span class="ident" id="1989896"><a href="/runtime/time.go.html#1989847">i</a></span>&nbsp;<span class="op" id="1989898">&gt;</span>&nbsp;<span class="ident" id="1989900"><a href="/runtime/time.go.html#1989857">last</a></span>&nbsp;<span class="op" id="1989905">||</span>&nbsp;<span class="ident" id="1989908"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989914">.</span><span class="ident" id="1989915">t</span><span class="op" id="1989916">[</span><span class="ident" id="1989917"><a href="/runtime/time.go.html#1989847">i</a></span><span class="op" id="1989918">]</span>&nbsp;<span class="op" id="1989920">!=</span>&nbsp;<span class="ident" id="1989923"><a href="/runtime/time.go.html#1989540">t</a></span>&nbsp;<span class="op" id="1989925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989929"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1989935">(</span><span class="op" id="1989936">&amp;</span><span class="ident" id="1989937"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989943">.</span><span class="ident" id="1989944">lock</span><span class="op" id="1989948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989952">return</span>&nbsp;<span class="ident" id="1989959">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1989966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1989969">if</span>&nbsp;<span class="ident" id="1989972"><a href="/runtime/time.go.html#1989847">i</a></span>&nbsp;<span class="op" id="1989974">!=</span>&nbsp;<span class="ident" id="1989977"><a href="/runtime/time.go.html#1989857">last</a></span>&nbsp;<span class="op" id="1989982">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1989986"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1989992">.</span><span class="ident" id="1989993">t</span><span class="op" id="1989994">[</span><span class="ident" id="1989995"><a href="/runtime/time.go.html#1989847">i</a></span><span class="op" id="1989996">]</span>&nbsp;<span class="op" id="1989998">=</span>&nbsp;<span class="ident" id="1990000"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990006">.</span><span class="ident" id="1990007">t</span><span class="op" id="1990008">[</span><span class="ident" id="1990009"><a href="/runtime/time.go.html#1989857">last</a></span><span class="op" id="1990013">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990017"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990023">.</span><span class="ident" id="1990024">t</span><span class="op" id="1990025">[</span><span class="ident" id="1990026"><a href="/runtime/time.go.html#1989847">i</a></span><span class="op" id="1990027">]</span><span class="op" id="1990028">.</span><span class="ident" id="1990029">i</span>&nbsp;<span class="op" id="1990031">=</span>&nbsp;<span class="ident" id="1990033"><a href="/runtime/time.go.html#1989847">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990039"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990045">.</span><span class="ident" id="1990046">t</span><span class="op" id="1990047">[</span><span class="ident" id="1990048"><a href="/runtime/time.go.html#1989857">last</a></span><span class="op" id="1990052">]</span>&nbsp;<span class="op" id="1990054">=</span>&nbsp;<span class="ident" id="1990056">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990061"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990067">.</span><span class="ident" id="1990068">t</span>&nbsp;<span class="op" id="1990070">=</span>&nbsp;<span class="ident" id="1990072"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990078">.</span><span class="ident" id="1990079">t</span><span class="op" id="1990080">[</span><span class="op" id="1990081">:</span><span class="ident" id="1990082"><a href="/runtime/time.go.html#1989857">last</a></span><span class="op" id="1990086">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990089">if</span>&nbsp;<span class="ident" id="1990092"><a href="/runtime/time.go.html#1989847">i</a></span>&nbsp;<span class="op" id="1990094">!=</span>&nbsp;<span class="ident" id="1990097"><a href="/runtime/time.go.html#1989857">last</a></span>&nbsp;<span class="op" id="1990102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990106"><a href="/runtime/time.go.html#1992002">siftupTimer</a></span><span class="op" id="1990117">(</span><span class="ident" id="1990118"><a href="/runtime/time.go.html#1989847">i</a></span><span class="op" id="1990119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990123"><a href="/runtime/time.go.html#1992222">siftdownTimer</a></span><span class="op" id="1990136">(</span><span class="ident" id="1990137"><a href="/runtime/time.go.html#1989847">i</a></span><span class="op" id="1990138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990144"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1990150">(</span><span class="op" id="1990151">&amp;</span><span class="ident" id="1990152"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990158">.</span><span class="ident" id="1990159">lock</span><span class="op" id="1990163">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990166">return</span>&nbsp;<span class="ident" id="1990173">true</span><br>
<span class="lineno"></span><span class="op" id="1990178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1990181">//&nbsp;Timerproc&nbsp;runs&nbsp;the&nbsp;time-driven&nbsp;events.</span><br>
<span class="lineno"></span><span class="comment" id="1990223">//&nbsp;It&nbsp;sleeps&nbsp;until&nbsp;the&nbsp;next&nbsp;event&nbsp;in&nbsp;the&nbsp;timers&nbsp;heap.</span><br>
<span class="lineno">150</span><span class="comment" id="1990277">//&nbsp;If&nbsp;addtimer&nbsp;inserts&nbsp;a&nbsp;new&nbsp;earlier&nbsp;event,&nbsp;addtimer1&nbsp;wakes&nbsp;timerproc&nbsp;early.</span><br>
<span class="lineno"></span><span class="keyword" id="1990354">func</span>&nbsp;<span class="ident" id="1990359">timerproc</span><span class="op" id="1990368">(</span><span class="op" id="1990369">)</span>&nbsp;<span class="op" id="1990371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990374"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990380">.</span><span class="ident" id="1990381">gp</span>&nbsp;<span class="op" id="1990384">=</span>&nbsp;<span class="ident" id="1990386"><a href="/runtime/stubs.go.html#1968886">getg</a></span><span class="op" id="1990390">(</span><span class="op" id="1990391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990394"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990400">.</span><span class="ident" id="1990401">gp</span><span class="op" id="1990403">.</span><span class="ident" id="1990404">issystem</span>&nbsp;<span class="op" id="1990413">=</span>&nbsp;<span class="ident" id="1990415">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990421">for</span>&nbsp;<span class="op" id="1990425">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990429"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1990433">(</span><span class="op" id="1990434">&amp;</span><span class="ident" id="1990435"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990441">.</span><span class="ident" id="1990442">lock</span><span class="op" id="1990446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990450"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990456">.</span><span class="ident" id="1990457">sleeping</span>&nbsp;<span class="op" id="1990466">=</span>&nbsp;<span class="ident" id="1990468">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990476">now</span>&nbsp;<span class="op" id="1990480">:=</span>&nbsp;<span class="ident" id="1990483"><a href="/runtime/stubs.go.html#1973903">nanotime</a></span><span class="op" id="1990491">(</span><span class="op" id="1990492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990496">delta</span>&nbsp;<span class="op" id="1990502">:=</span>&nbsp;<span class="ident" id="1990505">int64</span><span class="op" id="1990510">(</span><span class="op" id="1990511">-</span><span class="num" id="1990512">1</span><span class="op" id="1990513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990517">for</span>&nbsp;<span class="op" id="1990521">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990526">if</span>&nbsp;<span class="builtinfunc" id="1990529">len</span><span class="op" id="1990532">(</span><span class="ident" id="1990533"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990539">.</span><span class="ident" id="1990540">t</span><span class="op" id="1990541">)</span>&nbsp;<span class="op" id="1990543">==</span>&nbsp;<span class="num" id="1990546">0</span>&nbsp;<span class="op" id="1990548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990554"><a href="/runtime/time.go.html#1990496">delta</a></span>&nbsp;<span class="op" id="1990560">=</span>&nbsp;<span class="op" id="1990562">-</span><span class="num" id="1990563">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990569">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990583">t</span>&nbsp;<span class="op" id="1990585">:=</span>&nbsp;<span class="ident" id="1990588"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990594">.</span><span class="ident" id="1990595">t</span><span class="op" id="1990596">[</span><span class="num" id="1990597">0</span><span class="op" id="1990598">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990603"><a href="/runtime/time.go.html#1990496">delta</a></span>&nbsp;<span class="op" id="1990609">=</span>&nbsp;<span class="ident" id="1990611"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1990612">.</span><span class="ident" id="1990613">when</span>&nbsp;<span class="op" id="1990618">-</span>&nbsp;<span class="ident" id="1990620"><a href="/runtime/time.go.html#1990476">now</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990627">if</span>&nbsp;<span class="ident" id="1990630"><a href="/runtime/time.go.html#1990496">delta</a></span>&nbsp;<span class="op" id="1990636">&gt;</span>&nbsp;<span class="num" id="1990638">0</span>&nbsp;<span class="op" id="1990640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990646">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990660">if</span>&nbsp;<span class="ident" id="1990663"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1990664">.</span><span class="ident" id="1990665">period</span>&nbsp;<span class="op" id="1990672">&gt;</span>&nbsp;<span class="num" id="1990674">0</span>&nbsp;<span class="op" id="1990676">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1990682">//&nbsp;leave&nbsp;in&nbsp;heap&nbsp;but&nbsp;adjust&nbsp;next&nbsp;time&nbsp;to&nbsp;fire</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990732"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1990733">.</span><span class="ident" id="1990734">when</span>&nbsp;<span class="op" id="1990739">+=</span>&nbsp;<span class="ident" id="1990742"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1990743">.</span><span class="ident" id="1990744">period</span>&nbsp;<span class="op" id="1990751">*</span>&nbsp;<span class="op" id="1990753">(</span><span class="num" id="1990754">1</span>&nbsp;<span class="op" id="1990756">+</span>&nbsp;<span class="op" id="1990758">-</span><span class="ident" id="1990759"><a href="/runtime/time.go.html#1990496">delta</a></span><span class="op" id="1990764">/</span><span class="ident" id="1990765"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1990766">.</span><span class="ident" id="1990767">period</span><span class="op" id="1990773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990779"><a href="/runtime/time.go.html#1992222">siftdownTimer</a></span><span class="op" id="1990792">(</span><span class="num" id="1990793">0</span><span class="op" id="1990794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990799">}</span>&nbsp;<span class="keyword" id="1990801">else</span>&nbsp;<span class="op" id="1990806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1990812">//&nbsp;remove&nbsp;from&nbsp;heap</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990836">last</span>&nbsp;<span class="op" id="1990841">:=</span>&nbsp;<span class="builtinfunc" id="1990844">len</span><span class="op" id="1990847">(</span><span class="ident" id="1990848"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990854">.</span><span class="ident" id="1990855">t</span><span class="op" id="1990856">)</span>&nbsp;<span class="op" id="1990858">-</span>&nbsp;<span class="num" id="1990860">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1990866">if</span>&nbsp;<span class="ident" id="1990869"><a href="/runtime/time.go.html#1990836">last</a></span>&nbsp;<span class="op" id="1990874">&gt;</span>&nbsp;<span class="num" id="1990876">0</span>&nbsp;<span class="op" id="1990878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990885"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990891">.</span><span class="ident" id="1990892">t</span><span class="op" id="1990893">[</span><span class="num" id="1990894">0</span><span class="op" id="1990895">]</span>&nbsp;<span class="op" id="1990897">=</span>&nbsp;<span class="ident" id="1990899"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990905">.</span><span class="ident" id="1990906">t</span><span class="op" id="1990907">[</span><span class="ident" id="1990908"><a href="/runtime/time.go.html#1990836">last</a></span><span class="op" id="1990912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990919"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990925">.</span><span class="ident" id="1990926">t</span><span class="op" id="1990927">[</span><span class="num" id="1990928">0</span><span class="op" id="1990929">]</span><span class="op" id="1990930">.</span><span class="ident" id="1990931">i</span>&nbsp;<span class="op" id="1990933">=</span>&nbsp;<span class="num" id="1990935">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1990941">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990947"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990953">.</span><span class="ident" id="1990954">t</span><span class="op" id="1990955">[</span><span class="ident" id="1990956"><a href="/runtime/time.go.html#1990836">last</a></span><span class="op" id="1990960">]</span>&nbsp;<span class="op" id="1990962">=</span>&nbsp;<span class="ident" id="1990964">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1990972"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990978">.</span><span class="ident" id="1990979">t</span>&nbsp;<span class="op" id="1990981">=</span>&nbsp;<span class="ident" id="1990983"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1990989">.</span><span class="ident" id="1990990">t</span><span class="op" id="1990991">[</span><span class="op" id="1990992">:</span><span class="ident" id="1990993"><a href="/runtime/time.go.html#1990836">last</a></span><span class="op" id="1990997">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991003">if</span>&nbsp;<span class="ident" id="1991006"><a href="/runtime/time.go.html#1990836">last</a></span>&nbsp;<span class="op" id="1991011">&gt;</span>&nbsp;<span class="num" id="1991013">0</span>&nbsp;<span class="op" id="1991015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991022"><a href="/runtime/time.go.html#1992222">siftdownTimer</a></span><span class="op" id="1991035">(</span><span class="num" id="1991036">0</span><span class="op" id="1991037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991043">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991049"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1991050">.</span><span class="ident" id="1991051">i</span>&nbsp;<span class="op" id="1991053">=</span>&nbsp;<span class="op" id="1991055">-</span><span class="num" id="1991056">1</span>&nbsp;<span class="comment" id="1991058">//&nbsp;mark&nbsp;as&nbsp;removed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991085">f</span>&nbsp;<span class="op" id="1991087">:=</span>&nbsp;<span class="ident" id="1991090"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1991091">.</span><span class="ident" id="1991092">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991097">arg</span>&nbsp;<span class="op" id="1991101">:=</span>&nbsp;<span class="ident" id="1991104"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1991105">.</span><span class="ident" id="1991106">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991113">seq</span>&nbsp;<span class="op" id="1991117">:=</span>&nbsp;<span class="ident" id="1991120"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1991121">.</span><span class="ident" id="1991122">seq</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991129"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1991135">(</span><span class="op" id="1991136">&amp;</span><span class="ident" id="1991137"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991143">.</span><span class="ident" id="1991144">lock</span><span class="op" id="1991148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991153">if</span>&nbsp;<span class="ident" id="1991156"><a href="/runtime/race0.go.html#1906481">raceenabled</a></span>&nbsp;<span class="op" id="1991168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991174"><a href="/runtime/race0.go.html#1907447">raceacquire</a></span><span class="op" id="1991185">(</span><span class="ident" id="1991186"><a href="/runtime/time.go.html#1986915">unsafe</a></span><span class="op" id="1991192">.</span><span class="ident" id="1991193">Pointer</span><span class="op" id="1991200">(</span><span class="ident" id="1991201"><a href="/runtime/time.go.html#1990583">t</a></span><span class="op" id="1991202">)</span><span class="op" id="1991203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991213"><a href="/runtime/time.go.html#1991085">f</a></span><span class="op" id="1991214">(</span><span class="ident" id="1991215"><a href="/runtime/time.go.html#1991097">arg</a></span><span class="op" id="1991218">,</span>&nbsp;<span class="ident" id="1991220"><a href="/runtime/time.go.html#1991113">seq</a></span><span class="op" id="1991223">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991228"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1991232">(</span><span class="op" id="1991233">&amp;</span><span class="ident" id="1991234"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991240">.</span><span class="ident" id="1991241">lock</span><span class="op" id="1991245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991253">if</span>&nbsp;<span class="ident" id="1991256"><a href="/runtime/time.go.html#1990496">delta</a></span>&nbsp;<span class="op" id="1991262">&lt;</span>&nbsp;<span class="num" id="1991264">0</span>&nbsp;<span class="op" id="1991266">||</span>&nbsp;<span class="ident" id="1991269"><a href="/runtime/time.go.html#1987740">faketime</a></span>&nbsp;<span class="op" id="1991278">&gt;</span>&nbsp;<span class="num" id="1991280">0</span>&nbsp;<span class="op" id="1991282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1991287">//&nbsp;No&nbsp;timers&nbsp;left&nbsp;-&nbsp;put&nbsp;goroutine&nbsp;to&nbsp;sleep.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991334"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991340">.</span><span class="ident" id="1991341">rescheduling</span>&nbsp;<span class="op" id="1991354">=</span>&nbsp;<span class="ident" id="1991356">true</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991364"><a href="/runtime/proc.go.html#1903766">goparkunlock</a></span><span class="op" id="1991376">(</span><span class="op" id="1991377">&amp;</span><span class="ident" id="1991378"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991384">.</span><span class="ident" id="1991385">lock</span><span class="op" id="1991389">,</span>&nbsp;<span class="string" id="1991391">&#34;timer&nbsp;goroutine&nbsp;(idle)&#34;</span><span class="op" id="1991415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991420">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1991435">//&nbsp;At&nbsp;least&nbsp;one&nbsp;timer&nbsp;pending.&nbsp;&nbsp;Sleep&nbsp;until&nbsp;then.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991487"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991493">.</span><span class="ident" id="1991494">sleeping</span>&nbsp;<span class="op" id="1991503">=</span>&nbsp;<span class="ident" id="1991505">true</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991512"><a href="/runtime/lock_futex.go.html#1817055">noteclear</a></span><span class="op" id="1991521">(</span><span class="op" id="1991522">&amp;</span><span class="ident" id="1991523"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991529">.</span><span class="ident" id="1991530">waitnote</span><span class="op" id="1991538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991542"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1991548">(</span><span class="op" id="1991549">&amp;</span><span class="ident" id="1991550"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991556">.</span><span class="ident" id="1991557">lock</span><span class="op" id="1991561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991565"><a href="/runtime/lock_futex.go.html#1818401">notetsleepg</a></span><span class="op" id="1991576">(</span><span class="op" id="1991577">&amp;</span><span class="ident" id="1991578"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991584">.</span><span class="ident" id="1991585">waitnote</span><span class="op" id="1991593">,</span>&nbsp;<span class="ident" id="1991595"><a href="/runtime/time.go.html#1990496">delta</a></span><span class="op" id="1991600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991603">}</span><br>
<span class="lineno"></span><span class="op" id="1991605">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1991608">func</span>&nbsp;<span class="ident" id="1991613">timejump</span><span class="op" id="1991621">(</span><span class="op" id="1991622">)</span>&nbsp;<span class="op" id="1991624">*</span><span class="ident" id="1991625"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2017238">g</a></span>&nbsp;<span class="op" id="1991627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991630">if</span>&nbsp;<span class="ident" id="1991633"><a href="/runtime/time.go.html#1987740">faketime</a></span>&nbsp;<span class="op" id="1991642">==</span>&nbsp;<span class="num" id="1991645">0</span>&nbsp;<span class="op" id="1991647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991651">return</span>&nbsp;<span class="ident" id="1991658">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991663">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991667"><a href="/runtime/lock_futex.go.html#1815304">lock</a></span><span class="op" id="1991671">(</span><span class="op" id="1991672">&amp;</span><span class="ident" id="1991673"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991679">.</span><span class="ident" id="1991680">lock</span><span class="op" id="1991684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991687">if</span>&nbsp;<span class="op" id="1991690">!</span><span class="ident" id="1991691"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991697">.</span><span class="ident" id="1991698">created</span>&nbsp;<span class="op" id="1991706">||</span>&nbsp;<span class="builtinfunc" id="1991709">len</span><span class="op" id="1991712">(</span><span class="ident" id="1991713"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991719">.</span><span class="ident" id="1991720">t</span><span class="op" id="1991721">)</span>&nbsp;<span class="op" id="1991723">==</span>&nbsp;<span class="num" id="1991726">0</span>&nbsp;<span class="op" id="1991728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991732"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1991738">(</span><span class="op" id="1991739">&amp;</span><span class="ident" id="1991740"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991746">.</span><span class="ident" id="1991747">lock</span><span class="op" id="1991751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991755">return</span>&nbsp;<span class="ident" id="1991762">nil</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991771">var</span>&nbsp;<span class="ident" id="1991775">gp</span>&nbsp;<span class="op" id="1991778">*</span><span class="ident" id="1991779"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2017238">g</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991782">if</span>&nbsp;<span class="ident" id="1991785"><a href="/runtime/time.go.html#1987740">faketime</a></span>&nbsp;<span class="op" id="1991794">&lt;</span>&nbsp;<span class="ident" id="1991796"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991802">.</span><span class="ident" id="1991803">t</span><span class="op" id="1991804">[</span><span class="num" id="1991805">0</span><span class="op" id="1991806">]</span><span class="op" id="1991807">.</span><span class="ident" id="1991808">when</span>&nbsp;<span class="op" id="1991813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991817"><a href="/runtime/time.go.html#1987740">faketime</a></span>&nbsp;<span class="op" id="1991826">=</span>&nbsp;<span class="ident" id="1991828"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991834">.</span><span class="ident" id="1991835">t</span><span class="op" id="1991836">[</span><span class="num" id="1991837">0</span><span class="op" id="1991838">]</span><span class="op" id="1991839">.</span><span class="ident" id="1991840">when</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991847">if</span>&nbsp;<span class="ident" id="1991850"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991856">.</span><span class="ident" id="1991857">rescheduling</span>&nbsp;<span class="op" id="1991870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991875"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991881">.</span><span class="ident" id="1991882">rescheduling</span>&nbsp;<span class="op" id="1991895">=</span>&nbsp;<span class="ident" id="1991897">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991906"><a href="/runtime/time.go.html#1991775">gp</a></span>&nbsp;<span class="op" id="1991909">=</span>&nbsp;<span class="ident" id="1991911"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991917">.</span><span class="ident" id="1991918">gp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1991926">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1991929"><a href="/runtime/lock_futex.go.html#1816596">unlock</a></span><span class="op" id="1991935">(</span><span class="op" id="1991936">&amp;</span><span class="ident" id="1991937"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1991943">.</span><span class="ident" id="1991944">lock</span><span class="op" id="1991948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1991951">return</span>&nbsp;<span class="ident" id="1991958"><a href="/runtime/time.go.html#1991775">gp</a></span><br>
<span class="lineno"></span><span class="op" id="1991961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1991964">//&nbsp;Heap&nbsp;maintenance&nbsp;algorithms.</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="1991997">func</span>&nbsp;<span class="ident" id="1992002">siftupTimer</span><span class="op" id="1992013">(</span><span class="ident" id="1992014">i</span>&nbsp;<span class="builtintype" id="1992016">int</span><span class="op" id="1992019">)</span>&nbsp;<span class="op" id="1992021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992024">t</span>&nbsp;<span class="op" id="1992026">:=</span>&nbsp;<span class="ident" id="1992029"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1992035">.</span><span class="ident" id="1992036">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992039">when</span>&nbsp;<span class="op" id="1992044">:=</span>&nbsp;<span class="ident" id="1992047"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992048">[</span><span class="ident" id="1992049"><a href="/runtime/time.go.html#1992014">i</a></span><span class="op" id="1992050">]</span><span class="op" id="1992051">.</span><span class="ident" id="1992052">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992058">tmp</span>&nbsp;<span class="op" id="1992062">:=</span>&nbsp;<span class="ident" id="1992065"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992066">[</span><span class="ident" id="1992067"><a href="/runtime/time.go.html#1992014">i</a></span><span class="op" id="1992068">]</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992071">for</span>&nbsp;<span class="ident" id="1992075"><a href="/runtime/time.go.html#1992014">i</a></span>&nbsp;<span class="op" id="1992077">&gt;</span>&nbsp;<span class="num" id="1992079">0</span>&nbsp;<span class="op" id="1992081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992085">p</span>&nbsp;<span class="op" id="1992087">:=</span>&nbsp;<span class="op" id="1992090">(</span><span class="ident" id="1992091"><a href="/runtime/time.go.html#1992014">i</a></span>&nbsp;<span class="op" id="1992093">-</span>&nbsp;<span class="num" id="1992095">1</span><span class="op" id="1992096">)</span>&nbsp;<span class="op" id="1992098">/</span>&nbsp;<span class="num" id="1992100">4</span>&nbsp;<span class="comment" id="1992102">//&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992114">if</span>&nbsp;<span class="ident" id="1992117"><a href="/runtime/time.go.html#1992039">when</a></span>&nbsp;<span class="op" id="1992122">&gt;=</span>&nbsp;<span class="ident" id="1992125"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992126">[</span><span class="ident" id="1992127"><a href="/runtime/time.go.html#1992085">p</a></span><span class="op" id="1992128">]</span><span class="op" id="1992129">.</span><span class="ident" id="1992130">when</span>&nbsp;<span class="op" id="1992135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992140">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992148">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992152"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992153">[</span><span class="ident" id="1992154"><a href="/runtime/time.go.html#1992014">i</a></span><span class="op" id="1992155">]</span>&nbsp;<span class="op" id="1992157">=</span>&nbsp;<span class="ident" id="1992159"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992160">[</span><span class="ident" id="1992161"><a href="/runtime/time.go.html#1992085">p</a></span><span class="op" id="1992162">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992166"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992167">[</span><span class="ident" id="1992168"><a href="/runtime/time.go.html#1992014">i</a></span><span class="op" id="1992169">]</span><span class="op" id="1992170">.</span><span class="ident" id="1992171">i</span>&nbsp;<span class="op" id="1992173">=</span>&nbsp;<span class="ident" id="1992175"><a href="/runtime/time.go.html#1992014">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992179"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992180">[</span><span class="ident" id="1992181"><a href="/runtime/time.go.html#1992085">p</a></span><span class="op" id="1992182">]</span>&nbsp;<span class="op" id="1992184">=</span>&nbsp;<span class="ident" id="1992186"><a href="/runtime/time.go.html#1992058">tmp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992192"><a href="/runtime/time.go.html#1992024">t</a></span><span class="op" id="1992193">[</span><span class="ident" id="1992194"><a href="/runtime/time.go.html#1992085">p</a></span><span class="op" id="1992195">]</span><span class="op" id="1992196">.</span><span class="ident" id="1992197">i</span>&nbsp;<span class="op" id="1992199">=</span>&nbsp;<span class="ident" id="1992201"><a href="/runtime/time.go.html#1992085">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992205"><a href="/runtime/time.go.html#1992014">i</a></span>&nbsp;<span class="op" id="1992207">=</span>&nbsp;<span class="ident" id="1992209"><a href="/runtime/time.go.html#1992085">p</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992212">}</span><br>
<span class="lineno"></span><span class="op" id="1992214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1992217">func</span>&nbsp;<span class="ident" id="1992222">siftdownTimer</span><span class="op" id="1992235">(</span><span class="ident" id="1992236">i</span>&nbsp;<span class="builtintype" id="1992238">int</span><span class="op" id="1992241">)</span>&nbsp;<span class="op" id="1992243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992246">t</span>&nbsp;<span class="op" id="1992248">:=</span>&nbsp;<span class="ident" id="1992251"><a href="/runtime/time.go.html#1987522">timers</a></span><span class="op" id="1992257">.</span><span class="ident" id="1992258">t</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992261">n</span>&nbsp;<span class="op" id="1992263">:=</span>&nbsp;<span class="builtinfunc" id="1992266">len</span><span class="op" id="1992269">(</span><span class="ident" id="1992270"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992274">when</span>&nbsp;<span class="op" id="1992279">:=</span>&nbsp;<span class="ident" id="1992282"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992283">[</span><span class="ident" id="1992284"><a href="/runtime/time.go.html#1992236">i</a></span><span class="op" id="1992285">]</span><span class="op" id="1992286">.</span><span class="ident" id="1992287">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992293">tmp</span>&nbsp;<span class="op" id="1992297">:=</span>&nbsp;<span class="ident" id="1992300"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992301">[</span><span class="ident" id="1992302"><a href="/runtime/time.go.html#1992236">i</a></span><span class="op" id="1992303">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992306">for</span>&nbsp;<span class="op" id="1992310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992314">c</span>&nbsp;<span class="op" id="1992316">:=</span>&nbsp;<span class="ident" id="1992319"><a href="/runtime/time.go.html#1992236">i</a></span><span class="op" id="1992320">*</span><span class="num" id="1992321">4</span>&nbsp;<span class="op" id="1992323">+</span>&nbsp;<span class="num" id="1992325">1</span>&nbsp;<span class="comment" id="1992327">//&nbsp;left&nbsp;child</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992343">c3</span>&nbsp;<span class="op" id="1992346">:=</span>&nbsp;<span class="ident" id="1992349"><a href="/runtime/time.go.html#1992314">c</a></span>&nbsp;<span class="op" id="1992351">+</span>&nbsp;<span class="num" id="1992353">2</span>&nbsp;&nbsp;<span class="comment" id="1992356">//&nbsp;mid&nbsp;child</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992371">if</span>&nbsp;<span class="ident" id="1992374"><a href="/runtime/time.go.html#1992314">c</a></span>&nbsp;<span class="op" id="1992376">&gt;=</span>&nbsp;<span class="ident" id="1992379"><a href="/runtime/time.go.html#1992261">n</a></span>&nbsp;<span class="op" id="1992381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992386">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992398">w</span>&nbsp;<span class="op" id="1992400">:=</span>&nbsp;<span class="ident" id="1992403"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992404">[</span><span class="ident" id="1992405"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992406">]</span><span class="op" id="1992407">.</span><span class="ident" id="1992408">when</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992415">if</span>&nbsp;<span class="ident" id="1992418"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992419">+</span><span class="num" id="1992420">1</span>&nbsp;<span class="op" id="1992422">&lt;</span>&nbsp;<span class="ident" id="1992424"><a href="/runtime/time.go.html#1992261">n</a></span>&nbsp;<span class="op" id="1992426">&amp;&amp;</span>&nbsp;<span class="ident" id="1992429"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992430">[</span><span class="ident" id="1992431"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992432">+</span><span class="num" id="1992433">1</span><span class="op" id="1992434">]</span><span class="op" id="1992435">.</span><span class="ident" id="1992436">when</span>&nbsp;<span class="op" id="1992441">&lt;</span>&nbsp;<span class="ident" id="1992443"><a href="/runtime/time.go.html#1992398">w</a></span>&nbsp;<span class="op" id="1992445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992450"><a href="/runtime/time.go.html#1992398">w</a></span>&nbsp;<span class="op" id="1992452">=</span>&nbsp;<span class="ident" id="1992454"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992455">[</span><span class="ident" id="1992456"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992457">+</span><span class="num" id="1992458">1</span><span class="op" id="1992459">]</span><span class="op" id="1992460">.</span><span class="ident" id="1992461">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992469"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992470">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992479">if</span>&nbsp;<span class="ident" id="1992482"><a href="/runtime/time.go.html#1992343">c3</a></span>&nbsp;<span class="op" id="1992485">&lt;</span>&nbsp;<span class="ident" id="1992487"><a href="/runtime/time.go.html#1992261">n</a></span>&nbsp;<span class="op" id="1992489">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992494">w3</span>&nbsp;<span class="op" id="1992497">:=</span>&nbsp;<span class="ident" id="1992500"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992501">[</span><span class="ident" id="1992502"><a href="/runtime/time.go.html#1992343">c3</a></span><span class="op" id="1992504">]</span><span class="op" id="1992505">.</span><span class="ident" id="1992506">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992514">if</span>&nbsp;<span class="ident" id="1992517"><a href="/runtime/time.go.html#1992343">c3</a></span><span class="op" id="1992519">+</span><span class="num" id="1992520">1</span>&nbsp;<span class="op" id="1992522">&lt;</span>&nbsp;<span class="ident" id="1992524"><a href="/runtime/time.go.html#1992261">n</a></span>&nbsp;<span class="op" id="1992526">&amp;&amp;</span>&nbsp;<span class="ident" id="1992529"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992530">[</span><span class="ident" id="1992531"><a href="/runtime/time.go.html#1992343">c3</a></span><span class="op" id="1992533">+</span><span class="num" id="1992534">1</span><span class="op" id="1992535">]</span><span class="op" id="1992536">.</span><span class="ident" id="1992537">when</span>&nbsp;<span class="op" id="1992542">&lt;</span>&nbsp;<span class="ident" id="1992544"><a href="/runtime/time.go.html#1992494">w3</a></span>&nbsp;<span class="op" id="1992547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992553"><a href="/runtime/time.go.html#1992494">w3</a></span>&nbsp;<span class="op" id="1992556">=</span>&nbsp;<span class="ident" id="1992558"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992559">[</span><span class="ident" id="1992560"><a href="/runtime/time.go.html#1992343">c3</a></span><span class="op" id="1992562">+</span><span class="num" id="1992563">1</span><span class="op" id="1992564">]</span><span class="op" id="1992565">.</span><span class="ident" id="1992566">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992575"><a href="/runtime/time.go.html#1992343">c3</a></span><span class="op" id="1992577">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992583">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992588">if</span>&nbsp;<span class="ident" id="1992591"><a href="/runtime/time.go.html#1992494">w3</a></span>&nbsp;<span class="op" id="1992594">&lt;</span>&nbsp;<span class="ident" id="1992596"><a href="/runtime/time.go.html#1992398">w</a></span>&nbsp;<span class="op" id="1992598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992604"><a href="/runtime/time.go.html#1992398">w</a></span>&nbsp;<span class="op" id="1992606">=</span>&nbsp;<span class="ident" id="1992608"><a href="/runtime/time.go.html#1992494">w3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992615"><a href="/runtime/time.go.html#1992314">c</a></span>&nbsp;<span class="op" id="1992617">=</span>&nbsp;<span class="ident" id="1992619"><a href="/runtime/time.go.html#1992343">c3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992629">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992633">if</span>&nbsp;<span class="ident" id="1992636"><a href="/runtime/time.go.html#1992398">w</a></span>&nbsp;<span class="op" id="1992638">&gt;=</span>&nbsp;<span class="ident" id="1992641"><a href="/runtime/time.go.html#1992274">when</a></span>&nbsp;<span class="op" id="1992646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1992651">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992663"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992664">[</span><span class="ident" id="1992665"><a href="/runtime/time.go.html#1992236">i</a></span><span class="op" id="1992666">]</span>&nbsp;<span class="op" id="1992668">=</span>&nbsp;<span class="ident" id="1992670"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992671">[</span><span class="ident" id="1992672"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992673">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992677"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992678">[</span><span class="ident" id="1992679"><a href="/runtime/time.go.html#1992236">i</a></span><span class="op" id="1992680">]</span><span class="op" id="1992681">.</span><span class="ident" id="1992682">i</span>&nbsp;<span class="op" id="1992684">=</span>&nbsp;<span class="ident" id="1992686"><a href="/runtime/time.go.html#1992236">i</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992690"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992691">[</span><span class="ident" id="1992692"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992693">]</span>&nbsp;<span class="op" id="1992695">=</span>&nbsp;<span class="ident" id="1992697"><a href="/runtime/time.go.html#1992293">tmp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992703"><a href="/runtime/time.go.html#1992246">t</a></span><span class="op" id="1992704">[</span><span class="ident" id="1992705"><a href="/runtime/time.go.html#1992314">c</a></span><span class="op" id="1992706">]</span><span class="op" id="1992707">.</span><span class="ident" id="1992708">i</span>&nbsp;<span class="op" id="1992710">=</span>&nbsp;<span class="ident" id="1992712"><a href="/runtime/time.go.html#1992314">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1992716"><a href="/runtime/time.go.html#1992236">i</a></span>&nbsp;<span class="op" id="1992718">=</span>&nbsp;<span class="ident" id="1992720"><a href="/runtime/time.go.html#1992314">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1992723">}</span><br>
<span class="lineno"></span><span class="op" id="1992725">}</span>
</div>
</body>
</html>
