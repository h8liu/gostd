<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8421065">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8421121">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8421175">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8421226">package</span>&nbsp;<span class="ident" id="8421234">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8421245">import</span>&nbsp;<span class="op" id="8421252">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8421255">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8421264">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8421273">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8421283">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8421286">func</span>&nbsp;<span class="ident" id="8421291">TestPrintfLine</span><span class="op" id="8421305">(</span><span class="ident" id="8421306">t</span>&nbsp;<span class="op" id="8421308">*</span><span class="ident" id="8421309">testing</span><span class="op" id="8421316">.</span><span class="ident" id="8421317">T</span><span class="op" id="8421318">)</span>&nbsp;<span class="op" id="8421320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8421323">var</span>&nbsp;<span class="ident" id="8421327">buf</span>&nbsp;<span class="ident" id="8421331">bytes</span><span class="op" id="8421336">.</span><span class="ident" id="8421337">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421345">w</span>&nbsp;<span class="op" id="8421347">:=</span>&nbsp;<span class="ident" id="8421350">NewWriter</span><span class="op" id="8421359">(</span><span class="ident" id="8421360">bufio</span><span class="op" id="8421365">.</span><span class="ident" id="8421366">NewWriter</span><span class="op" id="8421375">(</span><span class="op" id="8421376">&amp;</span><span class="ident" id="8421377">buf</span><span class="op" id="8421380">)</span><span class="op" id="8421381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421384">err</span>&nbsp;<span class="op" id="8421388">:=</span>&nbsp;<span class="ident" id="8421391">w</span><span class="op" id="8421392">.</span><span class="ident" id="8421393">PrintfLine</span><span class="op" id="8421403">(</span><span class="string" id="8421404">&#34;foo&nbsp;%d&#34;</span><span class="op" id="8421412">,</span>&nbsp;<span class="num" id="8421414">123</span><span class="op" id="8421417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8421420">if</span>&nbsp;<span class="ident" id="8421423">s</span>&nbsp;<span class="op" id="8421425">:=</span>&nbsp;<span class="ident" id="8421428">buf</span><span class="op" id="8421431">.</span><span class="ident" id="8421432">String</span><span class="op" id="8421438">(</span><span class="op" id="8421439">)</span><span class="op" id="8421440">;</span>&nbsp;<span class="ident" id="8421442">s</span>&nbsp;<span class="op" id="8421444">!=</span>&nbsp;<span class="string" id="8421447">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="8421461">||</span>&nbsp;<span class="ident" id="8421464">err</span>&nbsp;<span class="op" id="8421468">!=</span>&nbsp;<span class="builtintype" id="8421471">nil</span>&nbsp;<span class="op" id="8421475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421479">t</span><span class="op" id="8421480">.</span><span class="ident" id="8421481">Fatalf</span><span class="op" id="8421487">(</span><span class="string" id="8421488">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="8421502">,</span>&nbsp;<span class="ident" id="8421504">s</span><span class="op" id="8421505">,</span>&nbsp;<span class="ident" id="8421507">err</span><span class="op" id="8421510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8421513">}</span><br>
<span class="lineno">20</span><span class="op" id="8421515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8421518">func</span>&nbsp;<span class="ident" id="8421523">TestDotWriter</span><span class="op" id="8421536">(</span><span class="ident" id="8421537">t</span>&nbsp;<span class="op" id="8421539">*</span><span class="ident" id="8421540">testing</span><span class="op" id="8421547">.</span><span class="ident" id="8421548">T</span><span class="op" id="8421549">)</span>&nbsp;<span class="op" id="8421551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8421554">var</span>&nbsp;<span class="ident" id="8421558">buf</span>&nbsp;<span class="ident" id="8421562">bytes</span><span class="op" id="8421567">.</span><span class="ident" id="8421568">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421576">w</span>&nbsp;<span class="op" id="8421578">:=</span>&nbsp;<span class="ident" id="8421581">NewWriter</span><span class="op" id="8421590">(</span><span class="ident" id="8421591">bufio</span><span class="op" id="8421596">.</span><span class="ident" id="8421597">NewWriter</span><span class="op" id="8421606">(</span><span class="op" id="8421607">&amp;</span><span class="ident" id="8421608">buf</span><span class="op" id="8421611">)</span><span class="op" id="8421612">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421615">d</span>&nbsp;<span class="op" id="8421617">:=</span>&nbsp;<span class="ident" id="8421620">w</span><span class="op" id="8421621">.</span><span class="ident" id="8421622">DotWriter</span><span class="op" id="8421631">(</span><span class="op" id="8421632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421635">n</span><span class="op" id="8421636">,</span>&nbsp;<span class="ident" id="8421638">err</span>&nbsp;<span class="op" id="8421642">:=</span>&nbsp;<span class="ident" id="8421645">d</span><span class="op" id="8421646">.</span><span class="ident" id="8421647">Write</span><span class="op" id="8421652">(</span><span class="op" id="8421653">[</span><span class="op" id="8421654">]</span><span class="builtintype" id="8421655">byte</span><span class="op" id="8421659">(</span><span class="string" id="8421660">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="8421687">)</span><span class="op" id="8421688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8421691">if</span>&nbsp;<span class="ident" id="8421694">n</span>&nbsp;<span class="op" id="8421696">!=</span>&nbsp;<span class="num" id="8421699">21</span>&nbsp;<span class="op" id="8421702">||</span>&nbsp;<span class="ident" id="8421705">err</span>&nbsp;<span class="op" id="8421709">!=</span>&nbsp;<span class="builtintype" id="8421712">nil</span>&nbsp;<span class="op" id="8421716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421720">t</span><span class="op" id="8421721">.</span><span class="ident" id="8421722">Fatalf</span><span class="op" id="8421728">(</span><span class="string" id="8421729">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8421744">,</span>&nbsp;<span class="ident" id="8421746">n</span><span class="op" id="8421747">,</span>&nbsp;<span class="ident" id="8421749">err</span><span class="op" id="8421752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8421755">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421758">d</span><span class="op" id="8421759">.</span><span class="ident" id="8421760">Close</span><span class="op" id="8421765">(</span><span class="op" id="8421766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421769">want</span>&nbsp;<span class="op" id="8421774">:=</span>&nbsp;<span class="string" id="8421777">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8421827">if</span>&nbsp;<span class="ident" id="8421830">s</span>&nbsp;<span class="op" id="8421832">:=</span>&nbsp;<span class="ident" id="8421835">buf</span><span class="op" id="8421838">.</span><span class="ident" id="8421839">String</span><span class="op" id="8421845">(</span><span class="op" id="8421846">)</span><span class="op" id="8421847">;</span>&nbsp;<span class="ident" id="8421849">s</span>&nbsp;<span class="op" id="8421851">!=</span>&nbsp;<span class="ident" id="8421854">want</span>&nbsp;<span class="op" id="8421859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8421863">t</span><span class="op" id="8421864">.</span><span class="ident" id="8421865">Fatalf</span><span class="op" id="8421871">(</span><span class="string" id="8421872">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="8421882">,</span>&nbsp;<span class="ident" id="8421884">s</span><span class="op" id="8421885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8421888">}</span><br>
<span class="lineno">35</span><span class="op" id="8421890">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
