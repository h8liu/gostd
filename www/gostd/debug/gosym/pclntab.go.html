<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5361229">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5361285">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5361339">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5361390">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5361413">package</span>&nbsp;<span class="ident" id="5361421">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5361428">import</span>&nbsp;<span class="op" id="5361435">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5361438">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5361457">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5361464">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5361467">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5361544">//</span><br>
<span class="lineno"></span><span class="comment" id="5361547">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5361634">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5361712">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5361790">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5361862">//</span><br>
<span class="lineno"></span><span class="comment" id="5361865">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5361946">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5362025">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5362078">//</span><br>
<span class="lineno"></span><span class="comment" id="5362081">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5362156">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5362231">type</span>&nbsp;<span class="ident" id="5362236">LineTable</span>&nbsp;<span class="keyword" id="5362246">struct</span>&nbsp;<span class="op" id="5362253">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362256">Data</span>&nbsp;<span class="op" id="5362261">[</span><span class="op" id="5362262">]</span><span class="builtintype" id="5362263">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362269">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5362274">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362282">Line</span>&nbsp;<span class="builtintype" id="5362287">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5362293">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362310">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5362319">sync</span><span class="op" id="5362323">.</span><span class="ident" id="5362324">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362331">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5362340">int</span>&nbsp;<span class="comment" id="5362344">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362398">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5362407">binary</span><span class="op" id="5362413">.</span><span class="ident" id="5362414">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362425">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5362434">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362442">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5362451">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362459">functab</span>&nbsp;&nbsp;<span class="op" id="5362468">[</span><span class="op" id="5362469">]</span><span class="builtintype" id="5362470">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362476">nfunctab</span>&nbsp;<span class="builtintype" id="5362485">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362493">filetab</span>&nbsp;&nbsp;<span class="op" id="5362502">[</span><span class="op" id="5362503">]</span><span class="builtintype" id="5362504">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362510">nfiletab</span>&nbsp;<span class="builtintype" id="5362519">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362527">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5362536">map</span><span class="op" id="5362539">[</span><span class="builtintype" id="5362540">string</span><span class="op" id="5362546">]</span><span class="builtintype" id="5362547">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5362554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5362557">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5362628">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5362693">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5362767">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5362778">const</span>&nbsp;<span class="ident" id="5362784">oldQuantum</span>&nbsp;<span class="op" id="5362795">=</span>&nbsp;<span class="num" id="5362797">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5362800">func</span>&nbsp;<span class="op" id="5362805">(</span><span class="ident" id="5362806">t</span>&nbsp;<span class="op" id="5362808">*</span><span class="ident" id="5362809">LineTable</span><span class="op" id="5362818">)</span>&nbsp;<span class="ident" id="5362820">parse</span><span class="op" id="5362825">(</span><span class="ident" id="5362826">targetPC</span>&nbsp;<span class="ident" id="5362835">uint64</span><span class="op" id="5362841">,</span>&nbsp;<span class="ident" id="5362843">targetLine</span>&nbsp;<span class="builtintype" id="5362854">int</span><span class="op" id="5362857">)</span>&nbsp;<span class="op" id="5362859">(</span><span class="ident" id="5362860">b</span>&nbsp;<span class="op" id="5362862">[</span><span class="op" id="5362863">]</span><span class="builtintype" id="5362864">byte</span><span class="op" id="5362868">,</span>&nbsp;<span class="ident" id="5362870">pc</span>&nbsp;<span class="ident" id="5362873">uint64</span><span class="op" id="5362879">,</span>&nbsp;<span class="ident" id="5362881">line</span>&nbsp;<span class="builtintype" id="5362886">int</span><span class="op" id="5362889">)</span>&nbsp;<span class="op" id="5362891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5362894">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5362951">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5362983">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5363045">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5363102">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5363141">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5363145">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5363208">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363265">b</span><span class="op" id="5363266">,</span>&nbsp;<span class="ident" id="5363268">pc</span><span class="op" id="5363270">,</span>&nbsp;<span class="ident" id="5363272">line</span>&nbsp;<span class="op" id="5363277">=</span>&nbsp;<span class="ident" id="5363279">t</span><span class="op" id="5363280">.</span><span class="ident" id="5363281">Data</span><span class="op" id="5363285">,</span>&nbsp;<span class="ident" id="5363287">t</span><span class="op" id="5363288">.</span><span class="ident" id="5363289">PC</span><span class="op" id="5363291">,</span>&nbsp;<span class="ident" id="5363293">t</span><span class="op" id="5363294">.</span><span class="ident" id="5363295">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363301">for</span>&nbsp;<span class="ident" id="5363305">pc</span>&nbsp;<span class="op" id="5363308">&lt;=</span>&nbsp;<span class="ident" id="5363311">targetPC</span>&nbsp;<span class="op" id="5363320">&amp;&amp;</span>&nbsp;<span class="ident" id="5363323">line</span>&nbsp;<span class="op" id="5363328">!=</span>&nbsp;<span class="ident" id="5363331">targetLine</span>&nbsp;<span class="op" id="5363342">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5363345">len</span><span class="op" id="5363348">(</span><span class="ident" id="5363349">b</span><span class="op" id="5363350">)</span>&nbsp;<span class="op" id="5363352">&gt;</span>&nbsp;<span class="num" id="5363354">0</span>&nbsp;<span class="op" id="5363356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363360">code</span>&nbsp;<span class="op" id="5363365">:=</span>&nbsp;<span class="ident" id="5363368">b</span><span class="op" id="5363369">[</span><span class="num" id="5363370">0</span><span class="op" id="5363371">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363375">b</span>&nbsp;<span class="op" id="5363377">=</span>&nbsp;<span class="ident" id="5363379">b</span><span class="op" id="5363380">[</span><span class="num" id="5363381">1</span><span class="op" id="5363382">:</span><span class="op" id="5363383">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363387">switch</span>&nbsp;<span class="op" id="5363394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363398">case</span>&nbsp;<span class="ident" id="5363403">code</span>&nbsp;<span class="op" id="5363408">==</span>&nbsp;<span class="num" id="5363411">0</span><span class="op" id="5363412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363417">if</span>&nbsp;<span class="builtinfunc" id="5363420">len</span><span class="op" id="5363423">(</span><span class="ident" id="5363424">b</span><span class="op" id="5363425">)</span>&nbsp;<span class="op" id="5363427">&lt;</span>&nbsp;<span class="num" id="5363429">4</span>&nbsp;<span class="op" id="5363431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363437">b</span>&nbsp;<span class="op" id="5363439">=</span>&nbsp;<span class="ident" id="5363441">b</span><span class="op" id="5363442">[</span><span class="num" id="5363443">0</span><span class="op" id="5363444">:</span><span class="num" id="5363445">0</span><span class="op" id="5363446">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363452">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5363461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363466">val</span>&nbsp;<span class="op" id="5363470">:=</span>&nbsp;<span class="ident" id="5363473">binary</span><span class="op" id="5363479">.</span><span class="ident" id="5363480">BigEndian</span><span class="op" id="5363489">.</span><span class="ident" id="5363490">Uint32</span><span class="op" id="5363496">(</span><span class="ident" id="5363497">b</span><span class="op" id="5363498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363503">b</span>&nbsp;<span class="op" id="5363505">=</span>&nbsp;<span class="ident" id="5363507">b</span><span class="op" id="5363508">[</span><span class="num" id="5363509">4</span><span class="op" id="5363510">:</span><span class="op" id="5363511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363516">line</span>&nbsp;<span class="op" id="5363521">+=</span>&nbsp;<span class="builtintype" id="5363524">int</span><span class="op" id="5363527">(</span><span class="ident" id="5363528">val</span><span class="op" id="5363531">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363535">case</span>&nbsp;<span class="ident" id="5363540">code</span>&nbsp;<span class="op" id="5363545">&lt;=</span>&nbsp;<span class="num" id="5363548">64</span><span class="op" id="5363550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363555">line</span>&nbsp;<span class="op" id="5363560">+=</span>&nbsp;<span class="builtintype" id="5363563">int</span><span class="op" id="5363566">(</span><span class="ident" id="5363567">code</span><span class="op" id="5363571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363575">case</span>&nbsp;<span class="ident" id="5363580">code</span>&nbsp;<span class="op" id="5363585">&lt;=</span>&nbsp;<span class="num" id="5363588">128</span><span class="op" id="5363591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363596">line</span>&nbsp;<span class="op" id="5363601">-=</span>&nbsp;<span class="builtintype" id="5363604">int</span><span class="op" id="5363607">(</span><span class="ident" id="5363608">code</span>&nbsp;<span class="op" id="5363613">-</span>&nbsp;<span class="num" id="5363615">64</span><span class="op" id="5363617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363621">default</span><span class="op" id="5363628">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363633">pc</span>&nbsp;<span class="op" id="5363636">+=</span>&nbsp;<span class="ident" id="5363639">oldQuantum</span>&nbsp;<span class="op" id="5363650">*</span>&nbsp;<span class="ident" id="5363652">uint64</span><span class="op" id="5363658">(</span><span class="ident" id="5363659">code</span><span class="op" id="5363663">-</span><span class="num" id="5363664">128</span><span class="op" id="5363667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363672">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5363683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363687">pc</span>&nbsp;<span class="op" id="5363690">+=</span>&nbsp;<span class="ident" id="5363693">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5363705">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363708">return</span>&nbsp;<span class="ident" id="5363715">b</span><span class="op" id="5363716">,</span>&nbsp;<span class="ident" id="5363718">pc</span><span class="op" id="5363720">,</span>&nbsp;<span class="ident" id="5363722">line</span><br>
<span class="lineno"></span><span class="op" id="5363727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5363730">func</span>&nbsp;<span class="op" id="5363735">(</span><span class="ident" id="5363736">t</span>&nbsp;<span class="op" id="5363738">*</span><span class="ident" id="5363739">LineTable</span><span class="op" id="5363748">)</span>&nbsp;<span class="ident" id="5363750">slice</span><span class="op" id="5363755">(</span><span class="ident" id="5363756">pc</span>&nbsp;<span class="ident" id="5363759">uint64</span><span class="op" id="5363765">)</span>&nbsp;<span class="op" id="5363767">*</span><span class="ident" id="5363768">LineTable</span>&nbsp;<span class="op" id="5363778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5363781">data</span><span class="op" id="5363785">,</span>&nbsp;<span class="ident" id="5363787">pc</span><span class="op" id="5363789">,</span>&nbsp;<span class="ident" id="5363791">line</span>&nbsp;<span class="op" id="5363796">:=</span>&nbsp;<span class="ident" id="5363799">t</span><span class="op" id="5363800">.</span><span class="ident" id="5363801">parse</span><span class="op" id="5363806">(</span><span class="ident" id="5363807">pc</span><span class="op" id="5363809">,</span>&nbsp;<span class="op" id="5363811">-</span><span class="num" id="5363812">1</span><span class="op" id="5363813">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5363816">return</span>&nbsp;<span class="op" id="5363823">&amp;</span><span class="ident" id="5363824">LineTable</span><span class="op" id="5363833">{</span><span class="ident" id="5363834">Data</span><span class="op" id="5363838">:</span>&nbsp;<span class="ident" id="5363840">data</span><span class="op" id="5363844">,</span>&nbsp;<span class="ident" id="5363846">PC</span><span class="op" id="5363848">:</span>&nbsp;<span class="ident" id="5363850">pc</span><span class="op" id="5363852">,</span>&nbsp;<span class="ident" id="5363854">Line</span><span class="op" id="5363858">:</span>&nbsp;<span class="ident" id="5363860">line</span><span class="op" id="5363864">}</span><br>
<span class="lineno"></span><span class="op" id="5363866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5363869">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5363936">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5363991">func</span>&nbsp;<span class="op" id="5363996">(</span><span class="ident" id="5363997">t</span>&nbsp;<span class="op" id="5363999">*</span><span class="ident" id="5364000">LineTable</span><span class="op" id="5364009">)</span>&nbsp;<span class="ident" id="5364011">PCToLine</span><span class="op" id="5364019">(</span><span class="ident" id="5364020">pc</span>&nbsp;<span class="ident" id="5364023">uint64</span><span class="op" id="5364029">)</span>&nbsp;<span class="builtintype" id="5364031">int</span>&nbsp;<span class="op" id="5364035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364038">if</span>&nbsp;<span class="ident" id="5364041">t</span><span class="op" id="5364042">.</span><span class="ident" id="5364043">isGo12</span><span class="op" id="5364049">(</span><span class="op" id="5364050">)</span>&nbsp;<span class="op" id="5364052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364056">return</span>&nbsp;<span class="ident" id="5364063">t</span><span class="op" id="5364064">.</span><span class="ident" id="5364065">go12PCToLine</span><span class="op" id="5364077">(</span><span class="ident" id="5364078">pc</span><span class="op" id="5364080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5364083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5364086">_</span><span class="op" id="5364087">,</span>&nbsp;<span class="ident" id="5364089">_</span><span class="op" id="5364090">,</span>&nbsp;<span class="ident" id="5364092">line</span>&nbsp;<span class="op" id="5364097">:=</span>&nbsp;<span class="ident" id="5364100">t</span><span class="op" id="5364101">.</span><span class="ident" id="5364102">parse</span><span class="op" id="5364107">(</span><span class="ident" id="5364108">pc</span><span class="op" id="5364110">,</span>&nbsp;<span class="op" id="5364112">-</span><span class="num" id="5364113">1</span><span class="op" id="5364114">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364117">return</span>&nbsp;<span class="ident" id="5364124">line</span><br>
<span class="lineno"></span><span class="op" id="5364129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5364132">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5364199">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5364250">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5364305">func</span>&nbsp;<span class="op" id="5364310">(</span><span class="ident" id="5364311">t</span>&nbsp;<span class="op" id="5364313">*</span><span class="ident" id="5364314">LineTable</span><span class="op" id="5364323">)</span>&nbsp;<span class="ident" id="5364325">LineToPC</span><span class="op" id="5364333">(</span><span class="ident" id="5364334">line</span>&nbsp;<span class="builtintype" id="5364339">int</span><span class="op" id="5364342">,</span>&nbsp;<span class="ident" id="5364344">maxpc</span>&nbsp;<span class="ident" id="5364350">uint64</span><span class="op" id="5364356">)</span>&nbsp;<span class="ident" id="5364358">uint64</span>&nbsp;<span class="op" id="5364365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364368">if</span>&nbsp;<span class="ident" id="5364371">t</span><span class="op" id="5364372">.</span><span class="ident" id="5364373">isGo12</span><span class="op" id="5364379">(</span><span class="op" id="5364380">)</span>&nbsp;<span class="op" id="5364382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364386">return</span>&nbsp;<span class="num" id="5364393">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5364396">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5364399">_</span><span class="op" id="5364400">,</span>&nbsp;<span class="ident" id="5364402">pc</span><span class="op" id="5364404">,</span>&nbsp;<span class="ident" id="5364406">line1</span>&nbsp;<span class="op" id="5364412">:=</span>&nbsp;<span class="ident" id="5364415">t</span><span class="op" id="5364416">.</span><span class="ident" id="5364417">parse</span><span class="op" id="5364422">(</span><span class="ident" id="5364423">maxpc</span><span class="op" id="5364428">,</span>&nbsp;<span class="ident" id="5364430">line</span><span class="op" id="5364434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364437">if</span>&nbsp;<span class="ident" id="5364440">line1</span>&nbsp;<span class="op" id="5364446">!=</span>&nbsp;<span class="ident" id="5364449">line</span>&nbsp;<span class="op" id="5364454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364458">return</span>&nbsp;<span class="num" id="5364465">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5364468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5364471">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364535">return</span>&nbsp;<span class="ident" id="5364542">pc</span>&nbsp;<span class="op" id="5364545">-</span>&nbsp;<span class="ident" id="5364547">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5364558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5364561">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5364605">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5364643">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5364684">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5364715">func</span>&nbsp;<span class="ident" id="5364720">NewLineTable</span><span class="op" id="5364732">(</span><span class="ident" id="5364733">data</span>&nbsp;<span class="op" id="5364738">[</span><span class="op" id="5364739">]</span><span class="builtintype" id="5364740">byte</span><span class="op" id="5364744">,</span>&nbsp;<span class="ident" id="5364746">text</span>&nbsp;<span class="ident" id="5364751">uint64</span><span class="op" id="5364757">)</span>&nbsp;<span class="op" id="5364759">*</span><span class="ident" id="5364760">LineTable</span>&nbsp;<span class="op" id="5364770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5364773">return</span>&nbsp;<span class="op" id="5364780">&amp;</span><span class="ident" id="5364781">LineTable</span><span class="op" id="5364790">{</span><span class="ident" id="5364791">Data</span><span class="op" id="5364795">:</span>&nbsp;<span class="ident" id="5364797">data</span><span class="op" id="5364801">,</span>&nbsp;<span class="ident" id="5364803">PC</span><span class="op" id="5364805">:</span>&nbsp;<span class="ident" id="5364807">text</span><span class="op" id="5364811">,</span>&nbsp;<span class="ident" id="5364813">Line</span><span class="op" id="5364817">:</span>&nbsp;<span class="num" id="5364819">0</span><span class="op" id="5364820">}</span><br>
<span class="lineno"></span><span class="op" id="5364822">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5364825">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5364856">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5364888">//</span><br>
<span class="lineno"></span><span class="comment" id="5364891">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5364958">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5365026">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5365100">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5365124">//</span><br>
<span class="lineno"></span><span class="comment" id="5365127">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5365197">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5365243">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5365311">func</span>&nbsp;<span class="op" id="5365316">(</span><span class="ident" id="5365317">t</span>&nbsp;<span class="op" id="5365319">*</span><span class="ident" id="5365320">LineTable</span><span class="op" id="5365329">)</span>&nbsp;<span class="ident" id="5365331">isGo12</span><span class="op" id="5365337">(</span><span class="op" id="5365338">)</span>&nbsp;<span class="builtintype" id="5365340">bool</span>&nbsp;<span class="op" id="5365345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365348">t</span><span class="op" id="5365349">.</span><span class="ident" id="5365350">go12Init</span><span class="op" id="5365358">(</span><span class="op" id="5365359">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365362">return</span>&nbsp;<span class="ident" id="5365369">t</span><span class="op" id="5365370">.</span><span class="ident" id="5365371">go12</span>&nbsp;<span class="op" id="5365376">==</span>&nbsp;<span class="num" id="5365379">1</span><br>
<span class="lineno"></span><span class="op" id="5365381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5365384">const</span>&nbsp;<span class="ident" id="5365390">go12magic</span>&nbsp;<span class="op" id="5365400">=</span>&nbsp;<span class="num" id="5365402">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5365414">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5365471">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5365528">func</span>&nbsp;<span class="op" id="5365533">(</span><span class="ident" id="5365534">t</span>&nbsp;<span class="op" id="5365536">*</span><span class="ident" id="5365537">LineTable</span><span class="op" id="5365546">)</span>&nbsp;<span class="builtintype" id="5365548">uintptr</span><span class="op" id="5365555">(</span><span class="ident" id="5365556">b</span>&nbsp;<span class="op" id="5365558">[</span><span class="op" id="5365559">]</span><span class="builtintype" id="5365560">byte</span><span class="op" id="5365564">)</span>&nbsp;<span class="ident" id="5365566">uint64</span>&nbsp;<span class="op" id="5365573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365576">if</span>&nbsp;<span class="ident" id="5365579">t</span><span class="op" id="5365580">.</span><span class="ident" id="5365581">ptrsize</span>&nbsp;<span class="op" id="5365589">==</span>&nbsp;<span class="num" id="5365592">4</span>&nbsp;<span class="op" id="5365594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365598">return</span>&nbsp;<span class="ident" id="5365605">uint64</span><span class="op" id="5365611">(</span><span class="ident" id="5365612">t</span><span class="op" id="5365613">.</span><span class="ident" id="5365614">binary</span><span class="op" id="5365620">.</span><span class="ident" id="5365621">Uint32</span><span class="op" id="5365627">(</span><span class="ident" id="5365628">b</span><span class="op" id="5365629">)</span><span class="op" id="5365630">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365636">return</span>&nbsp;<span class="ident" id="5365643">t</span><span class="op" id="5365644">.</span><span class="ident" id="5365645">binary</span><span class="op" id="5365651">.</span><span class="ident" id="5365652">Uint64</span><span class="op" id="5365658">(</span><span class="ident" id="5365659">b</span><span class="op" id="5365660">)</span><br>
<span class="lineno"></span><span class="op" id="5365662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5365665">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5365740">func</span>&nbsp;<span class="op" id="5365745">(</span><span class="ident" id="5365746">t</span>&nbsp;<span class="op" id="5365748">*</span><span class="ident" id="5365749">LineTable</span><span class="op" id="5365758">)</span>&nbsp;<span class="ident" id="5365760">go12Init</span><span class="op" id="5365768">(</span><span class="op" id="5365769">)</span>&nbsp;<span class="op" id="5365771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365774">t</span><span class="op" id="5365775">.</span><span class="ident" id="5365776">mu</span><span class="op" id="5365778">.</span><span class="ident" id="5365779">Lock</span><span class="op" id="5365783">(</span><span class="op" id="5365784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365787">defer</span>&nbsp;<span class="ident" id="5365793">t</span><span class="op" id="5365794">.</span><span class="ident" id="5365795">mu</span><span class="op" id="5365797">.</span><span class="ident" id="5365798">Unlock</span><span class="op" id="5365804">(</span><span class="op" id="5365805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365808">if</span>&nbsp;<span class="ident" id="5365811">t</span><span class="op" id="5365812">.</span><span class="ident" id="5365813">go12</span>&nbsp;<span class="op" id="5365818">!=</span>&nbsp;<span class="num" id="5365821">0</span>&nbsp;<span class="op" id="5365823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365827">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365839">defer</span>&nbsp;<span class="keyword" id="5365845">func</span><span class="op" id="5365849">(</span><span class="op" id="5365850">)</span>&nbsp;<span class="op" id="5365852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5365856">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5365921">recover</span><span class="op" id="5365928">(</span><span class="op" id="5365929">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365932">}</span><span class="op" id="5365933">(</span><span class="op" id="5365934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5365938">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366007">t</span><span class="op" id="5366008">.</span><span class="ident" id="5366009">go12</span>&nbsp;<span class="op" id="5366014">=</span>&nbsp;<span class="op" id="5366016">-</span><span class="num" id="5366017">1</span>&nbsp;<span class="comment" id="5366019">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366057">if</span>&nbsp;<span class="builtinfunc" id="5366060">len</span><span class="op" id="5366063">(</span><span class="ident" id="5366064">t</span><span class="op" id="5366065">.</span><span class="ident" id="5366066">Data</span><span class="op" id="5366070">)</span>&nbsp;<span class="op" id="5366072">&lt;</span>&nbsp;<span class="num" id="5366074">16</span>&nbsp;<span class="op" id="5366077">||</span>&nbsp;<span class="ident" id="5366080">t</span><span class="op" id="5366081">.</span><span class="ident" id="5366082">Data</span><span class="op" id="5366086">[</span><span class="num" id="5366087">4</span><span class="op" id="5366088">]</span>&nbsp;<span class="op" id="5366090">!=</span>&nbsp;<span class="num" id="5366093">0</span>&nbsp;<span class="op" id="5366095">||</span>&nbsp;<span class="ident" id="5366098">t</span><span class="op" id="5366099">.</span><span class="ident" id="5366100">Data</span><span class="op" id="5366104">[</span><span class="num" id="5366105">5</span><span class="op" id="5366106">]</span>&nbsp;<span class="op" id="5366108">!=</span>&nbsp;<span class="num" id="5366111">0</span>&nbsp;<span class="op" id="5366113">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366118">(</span><span class="ident" id="5366119">t</span><span class="op" id="5366120">.</span><span class="ident" id="5366121">Data</span><span class="op" id="5366125">[</span><span class="num" id="5366126">6</span><span class="op" id="5366127">]</span>&nbsp;<span class="op" id="5366129">!=</span>&nbsp;<span class="num" id="5366132">1</span>&nbsp;<span class="op" id="5366134">&amp;&amp;</span>&nbsp;<span class="ident" id="5366137">t</span><span class="op" id="5366138">.</span><span class="ident" id="5366139">Data</span><span class="op" id="5366143">[</span><span class="num" id="5366144">6</span><span class="op" id="5366145">]</span>&nbsp;<span class="op" id="5366147">!=</span>&nbsp;<span class="num" id="5366150">4</span><span class="op" id="5366151">)</span>&nbsp;<span class="op" id="5366153">||</span>&nbsp;<span class="comment" id="5366156">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366172">(</span><span class="ident" id="5366173">t</span><span class="op" id="5366174">.</span><span class="ident" id="5366175">Data</span><span class="op" id="5366179">[</span><span class="num" id="5366180">7</span><span class="op" id="5366181">]</span>&nbsp;<span class="op" id="5366183">!=</span>&nbsp;<span class="num" id="5366186">4</span>&nbsp;<span class="op" id="5366188">&amp;&amp;</span>&nbsp;<span class="ident" id="5366191">t</span><span class="op" id="5366192">.</span><span class="ident" id="5366193">Data</span><span class="op" id="5366197">[</span><span class="num" id="5366198">7</span><span class="op" id="5366199">]</span>&nbsp;<span class="op" id="5366201">!=</span>&nbsp;<span class="num" id="5366204">8</span><span class="op" id="5366205">)</span>&nbsp;<span class="op" id="5366207">{</span>&nbsp;<span class="comment" id="5366209">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366227">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366239">switch</span>&nbsp;<span class="builtintype" id="5366246">uint32</span><span class="op" id="5366252">(</span><span class="ident" id="5366253">go12magic</span><span class="op" id="5366262">)</span>&nbsp;<span class="op" id="5366264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366267">case</span>&nbsp;<span class="ident" id="5366272">binary</span><span class="op" id="5366278">.</span><span class="ident" id="5366279">LittleEndian</span><span class="op" id="5366291">.</span><span class="ident" id="5366292">Uint32</span><span class="op" id="5366298">(</span><span class="ident" id="5366299">t</span><span class="op" id="5366300">.</span><span class="ident" id="5366301">Data</span><span class="op" id="5366305">)</span><span class="op" id="5366306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366310">t</span><span class="op" id="5366311">.</span><span class="ident" id="5366312">binary</span>&nbsp;<span class="op" id="5366319">=</span>&nbsp;<span class="ident" id="5366321">binary</span><span class="op" id="5366327">.</span><span class="ident" id="5366328">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366342">case</span>&nbsp;<span class="ident" id="5366347">binary</span><span class="op" id="5366353">.</span><span class="ident" id="5366354">BigEndian</span><span class="op" id="5366363">.</span><span class="ident" id="5366364">Uint32</span><span class="op" id="5366370">(</span><span class="ident" id="5366371">t</span><span class="op" id="5366372">.</span><span class="ident" id="5366373">Data</span><span class="op" id="5366377">)</span><span class="op" id="5366378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366382">t</span><span class="op" id="5366383">.</span><span class="ident" id="5366384">binary</span>&nbsp;<span class="op" id="5366391">=</span>&nbsp;<span class="ident" id="5366393">binary</span><span class="op" id="5366399">.</span><span class="ident" id="5366400">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366411">default</span><span class="op" id="5366418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366422">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366434">t</span><span class="op" id="5366435">.</span><span class="ident" id="5366436">quantum</span>&nbsp;<span class="op" id="5366444">=</span>&nbsp;<span class="builtintype" id="5366446">uint32</span><span class="op" id="5366452">(</span><span class="ident" id="5366453">t</span><span class="op" id="5366454">.</span><span class="ident" id="5366455">Data</span><span class="op" id="5366459">[</span><span class="num" id="5366460">6</span><span class="op" id="5366461">]</span><span class="op" id="5366462">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366465">t</span><span class="op" id="5366466">.</span><span class="ident" id="5366467">ptrsize</span>&nbsp;<span class="op" id="5366475">=</span>&nbsp;<span class="builtintype" id="5366477">uint32</span><span class="op" id="5366483">(</span><span class="ident" id="5366484">t</span><span class="op" id="5366485">.</span><span class="ident" id="5366486">Data</span><span class="op" id="5366490">[</span><span class="num" id="5366491">7</span><span class="op" id="5366492">]</span><span class="op" id="5366493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366497">t</span><span class="op" id="5366498">.</span><span class="ident" id="5366499">nfunctab</span>&nbsp;<span class="op" id="5366508">=</span>&nbsp;<span class="builtintype" id="5366510">uint32</span><span class="op" id="5366516">(</span><span class="ident" id="5366517">t</span><span class="op" id="5366518">.</span><span class="builtintype" id="5366519">uintptr</span><span class="op" id="5366526">(</span><span class="ident" id="5366527">t</span><span class="op" id="5366528">.</span><span class="ident" id="5366529">Data</span><span class="op" id="5366533">[</span><span class="num" id="5366534">8</span><span class="op" id="5366535">:</span><span class="op" id="5366536">]</span><span class="op" id="5366537">)</span><span class="op" id="5366538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366541">t</span><span class="op" id="5366542">.</span><span class="ident" id="5366543">functab</span>&nbsp;<span class="op" id="5366551">=</span>&nbsp;<span class="ident" id="5366553">t</span><span class="op" id="5366554">.</span><span class="ident" id="5366555">Data</span><span class="op" id="5366559">[</span><span class="num" id="5366560">8</span><span class="op" id="5366561">+</span><span class="ident" id="5366562">t</span><span class="op" id="5366563">.</span><span class="ident" id="5366564">ptrsize</span><span class="op" id="5366571">:</span><span class="op" id="5366572">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366575">functabsize</span>&nbsp;<span class="op" id="5366587">:=</span>&nbsp;<span class="ident" id="5366590">t</span><span class="op" id="5366591">.</span><span class="ident" id="5366592">nfunctab</span><span class="op" id="5366600">*</span><span class="num" id="5366601">2</span><span class="op" id="5366602">*</span><span class="ident" id="5366603">t</span><span class="op" id="5366604">.</span><span class="ident" id="5366605">ptrsize</span>&nbsp;<span class="op" id="5366613">+</span>&nbsp;<span class="ident" id="5366615">t</span><span class="op" id="5366616">.</span><span class="ident" id="5366617">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366626">fileoff</span>&nbsp;<span class="op" id="5366634">:=</span>&nbsp;<span class="ident" id="5366637">t</span><span class="op" id="5366638">.</span><span class="ident" id="5366639">binary</span><span class="op" id="5366645">.</span><span class="ident" id="5366646">Uint32</span><span class="op" id="5366652">(</span><span class="ident" id="5366653">t</span><span class="op" id="5366654">.</span><span class="ident" id="5366655">functab</span><span class="op" id="5366662">[</span><span class="ident" id="5366663">functabsize</span><span class="op" id="5366674">:</span><span class="op" id="5366675">]</span><span class="op" id="5366676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366679">t</span><span class="op" id="5366680">.</span><span class="ident" id="5366681">functab</span>&nbsp;<span class="op" id="5366689">=</span>&nbsp;<span class="ident" id="5366691">t</span><span class="op" id="5366692">.</span><span class="ident" id="5366693">functab</span><span class="op" id="5366700">[</span><span class="op" id="5366701">:</span><span class="ident" id="5366702">functabsize</span><span class="op" id="5366713">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366716">t</span><span class="op" id="5366717">.</span><span class="ident" id="5366718">filetab</span>&nbsp;<span class="op" id="5366726">=</span>&nbsp;<span class="ident" id="5366728">t</span><span class="op" id="5366729">.</span><span class="ident" id="5366730">Data</span><span class="op" id="5366734">[</span><span class="ident" id="5366735">fileoff</span><span class="op" id="5366742">:</span><span class="op" id="5366743">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366746">t</span><span class="op" id="5366747">.</span><span class="ident" id="5366748">nfiletab</span>&nbsp;<span class="op" id="5366757">=</span>&nbsp;<span class="ident" id="5366759">t</span><span class="op" id="5366760">.</span><span class="ident" id="5366761">binary</span><span class="op" id="5366767">.</span><span class="ident" id="5366768">Uint32</span><span class="op" id="5366774">(</span><span class="ident" id="5366775">t</span><span class="op" id="5366776">.</span><span class="ident" id="5366777">filetab</span><span class="op" id="5366784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366787">t</span><span class="op" id="5366788">.</span><span class="ident" id="5366789">filetab</span>&nbsp;<span class="op" id="5366797">=</span>&nbsp;<span class="ident" id="5366799">t</span><span class="op" id="5366800">.</span><span class="ident" id="5366801">filetab</span><span class="op" id="5366808">[</span><span class="op" id="5366809">:</span><span class="ident" id="5366810">t</span><span class="op" id="5366811">.</span><span class="ident" id="5366812">nfiletab</span><span class="op" id="5366820">*</span><span class="num" id="5366821">4</span><span class="op" id="5366822">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366826">t</span><span class="op" id="5366827">.</span><span class="ident" id="5366828">go12</span>&nbsp;<span class="op" id="5366833">=</span>&nbsp;<span class="num" id="5366835">1</span>&nbsp;<span class="comment" id="5366837">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5366855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5366858">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5366932">func</span>&nbsp;<span class="op" id="5366937">(</span><span class="ident" id="5366938">t</span>&nbsp;<span class="op" id="5366940">*</span><span class="ident" id="5366941">LineTable</span><span class="op" id="5366950">)</span>&nbsp;<span class="ident" id="5366952">go12Funcs</span><span class="op" id="5366961">(</span><span class="op" id="5366962">)</span>&nbsp;<span class="op" id="5366964">[</span><span class="op" id="5366965">]</span><span class="ident" id="5366966">Func</span>&nbsp;<span class="op" id="5366971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5366974">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367026">defer</span>&nbsp;<span class="keyword" id="5367032">func</span><span class="op" id="5367036">(</span><span class="op" id="5367037">)</span>&nbsp;<span class="op" id="5367039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5367043">recover</span><span class="op" id="5367050">(</span><span class="op" id="5367051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5367054">}</span><span class="op" id="5367055">(</span><span class="op" id="5367056">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367060">n</span>&nbsp;<span class="op" id="5367062">:=</span>&nbsp;<span class="builtinfunc" id="5367065">len</span><span class="op" id="5367068">(</span><span class="ident" id="5367069">t</span><span class="op" id="5367070">.</span><span class="ident" id="5367071">functab</span><span class="op" id="5367078">)</span>&nbsp;<span class="op" id="5367080">/</span>&nbsp;<span class="builtintype" id="5367082">int</span><span class="op" id="5367085">(</span><span class="ident" id="5367086">t</span><span class="op" id="5367087">.</span><span class="ident" id="5367088">ptrsize</span><span class="op" id="5367095">)</span>&nbsp;<span class="op" id="5367097">/</span>&nbsp;<span class="num" id="5367099">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367102">funcs</span>&nbsp;<span class="op" id="5367108">:=</span>&nbsp;<span class="builtinfunc" id="5367111">make</span><span class="op" id="5367115">(</span><span class="op" id="5367116">[</span><span class="op" id="5367117">]</span><span class="ident" id="5367118">Func</span><span class="op" id="5367122">,</span>&nbsp;<span class="ident" id="5367124">n</span><span class="op" id="5367125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367128">for</span>&nbsp;<span class="ident" id="5367132">i</span>&nbsp;<span class="op" id="5367134">:=</span>&nbsp;<span class="keyword" id="5367137">range</span>&nbsp;<span class="ident" id="5367143">funcs</span>&nbsp;<span class="op" id="5367149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367153">f</span>&nbsp;<span class="op" id="5367155">:=</span>&nbsp;<span class="op" id="5367158">&amp;</span><span class="ident" id="5367159">funcs</span><span class="op" id="5367164">[</span><span class="ident" id="5367165">i</span><span class="op" id="5367166">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367170">f</span><span class="op" id="5367171">.</span><span class="ident" id="5367172">Entry</span>&nbsp;<span class="op" id="5367178">=</span>&nbsp;<span class="ident" id="5367180">uint64</span><span class="op" id="5367186">(</span><span class="ident" id="5367187">t</span><span class="op" id="5367188">.</span><span class="builtintype" id="5367189">uintptr</span><span class="op" id="5367196">(</span><span class="ident" id="5367197">t</span><span class="op" id="5367198">.</span><span class="ident" id="5367199">functab</span><span class="op" id="5367206">[</span><span class="num" id="5367207">2</span><span class="op" id="5367208">*</span><span class="ident" id="5367209">i</span><span class="op" id="5367210">*</span><span class="builtintype" id="5367211">int</span><span class="op" id="5367214">(</span><span class="ident" id="5367215">t</span><span class="op" id="5367216">.</span><span class="ident" id="5367217">ptrsize</span><span class="op" id="5367224">)</span><span class="op" id="5367225">:</span><span class="op" id="5367226">]</span><span class="op" id="5367227">)</span><span class="op" id="5367228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367232">f</span><span class="op" id="5367233">.</span><span class="ident" id="5367234">End</span>&nbsp;<span class="op" id="5367238">=</span>&nbsp;<span class="ident" id="5367240">uint64</span><span class="op" id="5367246">(</span><span class="ident" id="5367247">t</span><span class="op" id="5367248">.</span><span class="builtintype" id="5367249">uintptr</span><span class="op" id="5367256">(</span><span class="ident" id="5367257">t</span><span class="op" id="5367258">.</span><span class="ident" id="5367259">functab</span><span class="op" id="5367266">[</span><span class="op" id="5367267">(</span><span class="num" id="5367268">2</span><span class="op" id="5367269">*</span><span class="ident" id="5367270">i</span><span class="op" id="5367271">+</span><span class="num" id="5367272">2</span><span class="op" id="5367273">)</span><span class="op" id="5367274">*</span><span class="builtintype" id="5367275">int</span><span class="op" id="5367278">(</span><span class="ident" id="5367279">t</span><span class="op" id="5367280">.</span><span class="ident" id="5367281">ptrsize</span><span class="op" id="5367288">)</span><span class="op" id="5367289">:</span><span class="op" id="5367290">]</span><span class="op" id="5367291">)</span><span class="op" id="5367292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367296">info</span>&nbsp;<span class="op" id="5367301">:=</span>&nbsp;<span class="ident" id="5367304">t</span><span class="op" id="5367305">.</span><span class="ident" id="5367306">Data</span><span class="op" id="5367310">[</span><span class="ident" id="5367311">t</span><span class="op" id="5367312">.</span><span class="builtintype" id="5367313">uintptr</span><span class="op" id="5367320">(</span><span class="ident" id="5367321">t</span><span class="op" id="5367322">.</span><span class="ident" id="5367323">functab</span><span class="op" id="5367330">[</span><span class="op" id="5367331">(</span><span class="num" id="5367332">2</span><span class="op" id="5367333">*</span><span class="ident" id="5367334">i</span><span class="op" id="5367335">+</span><span class="num" id="5367336">1</span><span class="op" id="5367337">)</span><span class="op" id="5367338">*</span><span class="builtintype" id="5367339">int</span><span class="op" id="5367342">(</span><span class="ident" id="5367343">t</span><span class="op" id="5367344">.</span><span class="ident" id="5367345">ptrsize</span><span class="op" id="5367352">)</span><span class="op" id="5367353">:</span><span class="op" id="5367354">]</span><span class="op" id="5367355">)</span><span class="op" id="5367356">:</span><span class="op" id="5367357">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367361">f</span><span class="op" id="5367362">.</span><span class="ident" id="5367363">LineTable</span>&nbsp;<span class="op" id="5367373">=</span>&nbsp;<span class="ident" id="5367375">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367379">f</span><span class="op" id="5367380">.</span><span class="ident" id="5367381">FrameSize</span>&nbsp;<span class="op" id="5367391">=</span>&nbsp;<span class="builtintype" id="5367393">int</span><span class="op" id="5367396">(</span><span class="ident" id="5367397">t</span><span class="op" id="5367398">.</span><span class="ident" id="5367399">binary</span><span class="op" id="5367405">.</span><span class="ident" id="5367406">Uint32</span><span class="op" id="5367412">(</span><span class="ident" id="5367413">info</span><span class="op" id="5367417">[</span><span class="ident" id="5367418">t</span><span class="op" id="5367419">.</span><span class="ident" id="5367420">ptrsize</span><span class="op" id="5367427">+</span><span class="num" id="5367428">2</span><span class="op" id="5367429">*</span><span class="num" id="5367430">4</span><span class="op" id="5367431">:</span><span class="op" id="5367432">]</span><span class="op" id="5367433">)</span><span class="op" id="5367434">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367438">f</span><span class="op" id="5367439">.</span><span class="ident" id="5367440">Sym</span>&nbsp;<span class="op" id="5367444">=</span>&nbsp;<span class="op" id="5367446">&amp;</span><span class="ident" id="5367447">Sym</span><span class="op" id="5367450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367455">Value</span><span class="op" id="5367460">:</span>&nbsp;&nbsp;<span class="ident" id="5367463">f</span><span class="op" id="5367464">.</span><span class="ident" id="5367465">Entry</span><span class="op" id="5367470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367475">Type</span><span class="op" id="5367479">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5367483">&#39;T&#39;</span><span class="op" id="5367486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367491">Name</span><span class="op" id="5367495">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5367499">t</span><span class="op" id="5367500">.</span><span class="builtintype" id="5367501">string</span><span class="op" id="5367507">(</span><span class="ident" id="5367508">t</span><span class="op" id="5367509">.</span><span class="ident" id="5367510">binary</span><span class="op" id="5367516">.</span><span class="ident" id="5367517">Uint32</span><span class="op" id="5367523">(</span><span class="ident" id="5367524">info</span><span class="op" id="5367528">[</span><span class="ident" id="5367529">t</span><span class="op" id="5367530">.</span><span class="ident" id="5367531">ptrsize</span><span class="op" id="5367538">:</span><span class="op" id="5367539">]</span><span class="op" id="5367540">)</span><span class="op" id="5367541">)</span><span class="op" id="5367542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367547">GoType</span><span class="op" id="5367553">:</span>&nbsp;<span class="num" id="5367555">0</span><span class="op" id="5367556">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367561">Func</span><span class="op" id="5367565">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5367569">f</span><span class="op" id="5367570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5367574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5367577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367580">return</span>&nbsp;<span class="ident" id="5367587">funcs</span><br>
<span class="lineno"></span><span class="op" id="5367593">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5367596">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5367669">func</span>&nbsp;<span class="op" id="5367674">(</span><span class="ident" id="5367675">t</span>&nbsp;<span class="op" id="5367677">*</span><span class="ident" id="5367678">LineTable</span><span class="op" id="5367687">)</span>&nbsp;<span class="ident" id="5367689">findFunc</span><span class="op" id="5367697">(</span><span class="ident" id="5367698">pc</span>&nbsp;<span class="ident" id="5367701">uint64</span><span class="op" id="5367707">)</span>&nbsp;<span class="op" id="5367709">[</span><span class="op" id="5367710">]</span><span class="builtintype" id="5367711">byte</span>&nbsp;<span class="op" id="5367716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367719">if</span>&nbsp;<span class="ident" id="5367722">pc</span>&nbsp;<span class="op" id="5367725">&lt;</span>&nbsp;<span class="ident" id="5367727">t</span><span class="op" id="5367728">.</span><span class="builtintype" id="5367729">uintptr</span><span class="op" id="5367736">(</span><span class="ident" id="5367737">t</span><span class="op" id="5367738">.</span><span class="ident" id="5367739">functab</span><span class="op" id="5367746">)</span>&nbsp;<span class="op" id="5367748">||</span>&nbsp;<span class="ident" id="5367751">pc</span>&nbsp;<span class="op" id="5367754">&gt;=</span>&nbsp;<span class="ident" id="5367757">t</span><span class="op" id="5367758">.</span><span class="builtintype" id="5367759">uintptr</span><span class="op" id="5367766">(</span><span class="ident" id="5367767">t</span><span class="op" id="5367768">.</span><span class="ident" id="5367769">functab</span><span class="op" id="5367776">[</span><span class="builtinfunc" id="5367777">len</span><span class="op" id="5367780">(</span><span class="ident" id="5367781">t</span><span class="op" id="5367782">.</span><span class="ident" id="5367783">functab</span><span class="op" id="5367790">)</span><span class="op" id="5367791">-</span><span class="builtintype" id="5367792">int</span><span class="op" id="5367795">(</span><span class="ident" id="5367796">t</span><span class="op" id="5367797">.</span><span class="ident" id="5367798">ptrsize</span><span class="op" id="5367805">)</span><span class="op" id="5367806">:</span><span class="op" id="5367807">]</span><span class="op" id="5367808">)</span>&nbsp;<span class="op" id="5367810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367814">return</span>&nbsp;<span class="ident" id="5367821">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5367826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5367830">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5367889">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367954">f</span>&nbsp;<span class="op" id="5367956">:=</span>&nbsp;<span class="ident" id="5367959">t</span><span class="op" id="5367960">.</span><span class="ident" id="5367961">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5367970">nf</span>&nbsp;<span class="op" id="5367973">:=</span>&nbsp;<span class="ident" id="5367976">t</span><span class="op" id="5367977">.</span><span class="ident" id="5367978">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5367988">for</span>&nbsp;<span class="ident" id="5367992">nf</span>&nbsp;<span class="op" id="5367995">&gt;</span>&nbsp;<span class="num" id="5367997">0</span>&nbsp;<span class="op" id="5367999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368003">m</span>&nbsp;<span class="op" id="5368005">:=</span>&nbsp;<span class="ident" id="5368008">nf</span>&nbsp;<span class="op" id="5368011">/</span>&nbsp;<span class="num" id="5368013">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368017">fm</span>&nbsp;<span class="op" id="5368020">:=</span>&nbsp;<span class="ident" id="5368023">f</span><span class="op" id="5368024">[</span><span class="num" id="5368025">2</span><span class="op" id="5368026">*</span><span class="ident" id="5368027">t</span><span class="op" id="5368028">.</span><span class="ident" id="5368029">ptrsize</span><span class="op" id="5368036">*</span><span class="ident" id="5368037">m</span><span class="op" id="5368038">:</span><span class="op" id="5368039">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368043">if</span>&nbsp;<span class="ident" id="5368046">t</span><span class="op" id="5368047">.</span><span class="builtintype" id="5368048">uintptr</span><span class="op" id="5368055">(</span><span class="ident" id="5368056">fm</span><span class="op" id="5368058">)</span>&nbsp;<span class="op" id="5368060">&lt;=</span>&nbsp;<span class="ident" id="5368063">pc</span>&nbsp;<span class="op" id="5368066">&amp;&amp;</span>&nbsp;<span class="ident" id="5368069">pc</span>&nbsp;<span class="op" id="5368072">&lt;</span>&nbsp;<span class="ident" id="5368074">t</span><span class="op" id="5368075">.</span><span class="builtintype" id="5368076">uintptr</span><span class="op" id="5368083">(</span><span class="ident" id="5368084">fm</span><span class="op" id="5368086">[</span><span class="num" id="5368087">2</span><span class="op" id="5368088">*</span><span class="ident" id="5368089">t</span><span class="op" id="5368090">.</span><span class="ident" id="5368091">ptrsize</span><span class="op" id="5368098">:</span><span class="op" id="5368099">]</span><span class="op" id="5368100">)</span>&nbsp;<span class="op" id="5368102">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368107">return</span>&nbsp;<span class="ident" id="5368114">t</span><span class="op" id="5368115">.</span><span class="ident" id="5368116">Data</span><span class="op" id="5368120">[</span><span class="ident" id="5368121">t</span><span class="op" id="5368122">.</span><span class="builtintype" id="5368123">uintptr</span><span class="op" id="5368130">(</span><span class="ident" id="5368131">fm</span><span class="op" id="5368133">[</span><span class="ident" id="5368134">t</span><span class="op" id="5368135">.</span><span class="ident" id="5368136">ptrsize</span><span class="op" id="5368143">:</span><span class="op" id="5368144">]</span><span class="op" id="5368145">)</span><span class="op" id="5368146">:</span><span class="op" id="5368147">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368151">}</span>&nbsp;<span class="keyword" id="5368153">else</span>&nbsp;<span class="keyword" id="5368158">if</span>&nbsp;<span class="ident" id="5368161">pc</span>&nbsp;<span class="op" id="5368164">&lt;</span>&nbsp;<span class="ident" id="5368166">t</span><span class="op" id="5368167">.</span><span class="builtintype" id="5368168">uintptr</span><span class="op" id="5368175">(</span><span class="ident" id="5368176">fm</span><span class="op" id="5368178">)</span>&nbsp;<span class="op" id="5368180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368185">nf</span>&nbsp;<span class="op" id="5368188">=</span>&nbsp;<span class="ident" id="5368190">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368194">}</span>&nbsp;<span class="keyword" id="5368196">else</span>&nbsp;<span class="op" id="5368201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368206">f</span>&nbsp;<span class="op" id="5368208">=</span>&nbsp;<span class="ident" id="5368210">f</span><span class="op" id="5368211">[</span><span class="op" id="5368212">(</span><span class="ident" id="5368213">m</span><span class="op" id="5368214">+</span><span class="num" id="5368215">1</span><span class="op" id="5368216">)</span><span class="op" id="5368217">*</span><span class="num" id="5368218">2</span><span class="op" id="5368219">*</span><span class="ident" id="5368220">t</span><span class="op" id="5368221">.</span><span class="ident" id="5368222">ptrsize</span><span class="op" id="5368229">:</span><span class="op" id="5368230">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368235">nf</span>&nbsp;<span class="op" id="5368238">-=</span>&nbsp;<span class="ident" id="5368241">m</span>&nbsp;<span class="op" id="5368243">+</span>&nbsp;<span class="num" id="5368245">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368255">return</span>&nbsp;<span class="ident" id="5368262">nil</span><br>
<span class="lineno"></span><span class="op" id="5368266">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5368269">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5368330">func</span>&nbsp;<span class="op" id="5368335">(</span><span class="ident" id="5368336">t</span>&nbsp;<span class="op" id="5368338">*</span><span class="ident" id="5368339">LineTable</span><span class="op" id="5368348">)</span>&nbsp;<span class="ident" id="5368350">readvarint</span><span class="op" id="5368360">(</span><span class="ident" id="5368361">pp</span>&nbsp;<span class="op" id="5368364">*</span><span class="op" id="5368365">[</span><span class="op" id="5368366">]</span><span class="builtintype" id="5368367">byte</span><span class="op" id="5368371">)</span>&nbsp;<span class="builtintype" id="5368373">uint32</span>&nbsp;<span class="op" id="5368380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368383">var</span>&nbsp;<span class="ident" id="5368387">v</span><span class="op" id="5368388">,</span>&nbsp;<span class="ident" id="5368390">shift</span>&nbsp;<span class="builtintype" id="5368396">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368404">p</span>&nbsp;<span class="op" id="5368406">:=</span>&nbsp;<span class="op" id="5368409">*</span><span class="ident" id="5368410">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368414">for</span>&nbsp;<span class="ident" id="5368418">shift</span>&nbsp;<span class="op" id="5368424">=</span>&nbsp;<span class="num" id="5368426">0</span><span class="op" id="5368427">;</span>&nbsp;<span class="op" id="5368429">;</span>&nbsp;<span class="ident" id="5368431">shift</span>&nbsp;<span class="op" id="5368437">+=</span>&nbsp;<span class="num" id="5368440">7</span>&nbsp;<span class="op" id="5368442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368446">b</span>&nbsp;<span class="op" id="5368448">:=</span>&nbsp;<span class="ident" id="5368451">p</span><span class="op" id="5368452">[</span><span class="num" id="5368453">0</span><span class="op" id="5368454">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368458">p</span>&nbsp;<span class="op" id="5368460">=</span>&nbsp;<span class="ident" id="5368462">p</span><span class="op" id="5368463">[</span><span class="num" id="5368464">1</span><span class="op" id="5368465">:</span><span class="op" id="5368466">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368470">v</span>&nbsp;<span class="op" id="5368472">|=</span>&nbsp;<span class="op" id="5368475">(</span><span class="builtintype" id="5368476">uint32</span><span class="op" id="5368482">(</span><span class="ident" id="5368483">b</span><span class="op" id="5368484">)</span>&nbsp;<span class="op" id="5368486">&amp;</span>&nbsp;<span class="num" id="5368488">0x7F</span><span class="op" id="5368492">)</span>&nbsp;<span class="op" id="5368494">&lt;&lt;</span>&nbsp;<span class="ident" id="5368497">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368505">if</span>&nbsp;<span class="ident" id="5368508">b</span><span class="op" id="5368509">&amp;</span><span class="num" id="5368510">0x80</span>&nbsp;<span class="op" id="5368515">==</span>&nbsp;<span class="num" id="5368518">0</span>&nbsp;<span class="op" id="5368520">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368525">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368539">*</span><span class="ident" id="5368540">pp</span>&nbsp;<span class="op" id="5368543">=</span>&nbsp;<span class="ident" id="5368545">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368548">return</span>&nbsp;<span class="ident" id="5368555">v</span><br>
<span class="lineno">265</span><span class="op" id="5368557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5368560">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5368604">func</span>&nbsp;<span class="op" id="5368609">(</span><span class="ident" id="5368610">t</span>&nbsp;<span class="op" id="5368612">*</span><span class="ident" id="5368613">LineTable</span><span class="op" id="5368622">)</span>&nbsp;<span class="builtintype" id="5368624">string</span><span class="op" id="5368630">(</span><span class="ident" id="5368631">off</span>&nbsp;<span class="builtintype" id="5368635">uint32</span><span class="op" id="5368641">)</span>&nbsp;<span class="builtintype" id="5368643">string</span>&nbsp;<span class="op" id="5368650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368653">for</span>&nbsp;<span class="ident" id="5368657">i</span>&nbsp;<span class="op" id="5368659">:=</span>&nbsp;<span class="ident" id="5368662">off</span><span class="op" id="5368665">;</span>&nbsp;<span class="op" id="5368667">;</span>&nbsp;<span class="ident" id="5368669">i</span><span class="op" id="5368670">++</span>&nbsp;<span class="op" id="5368673">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368677">if</span>&nbsp;<span class="ident" id="5368680">t</span><span class="op" id="5368681">.</span><span class="ident" id="5368682">Data</span><span class="op" id="5368686">[</span><span class="ident" id="5368687">i</span><span class="op" id="5368688">]</span>&nbsp;<span class="op" id="5368690">==</span>&nbsp;<span class="num" id="5368693">0</span>&nbsp;<span class="op" id="5368695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368700">return</span>&nbsp;<span class="builtintype" id="5368707">string</span><span class="op" id="5368713">(</span><span class="ident" id="5368714">t</span><span class="op" id="5368715">.</span><span class="ident" id="5368716">Data</span><span class="op" id="5368720">[</span><span class="ident" id="5368721">off</span><span class="op" id="5368724">:</span><span class="ident" id="5368725">i</span><span class="op" id="5368726">]</span><span class="op" id="5368727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368734">}</span><br>
<span class="lineno"></span><span class="op" id="5368736">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5368739">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5368805">func</span>&nbsp;<span class="op" id="5368810">(</span><span class="ident" id="5368811">t</span>&nbsp;<span class="op" id="5368813">*</span><span class="ident" id="5368814">LineTable</span><span class="op" id="5368823">)</span>&nbsp;<span class="ident" id="5368825">step</span><span class="op" id="5368829">(</span><span class="ident" id="5368830">p</span>&nbsp;<span class="op" id="5368832">*</span><span class="op" id="5368833">[</span><span class="op" id="5368834">]</span><span class="builtintype" id="5368835">byte</span><span class="op" id="5368839">,</span>&nbsp;<span class="ident" id="5368841">pc</span>&nbsp;<span class="op" id="5368844">*</span><span class="ident" id="5368845">uint64</span><span class="op" id="5368851">,</span>&nbsp;<span class="ident" id="5368853">val</span>&nbsp;<span class="op" id="5368857">*</span><span class="builtintype" id="5368858">int32</span><span class="op" id="5368863">,</span>&nbsp;<span class="ident" id="5368865">first</span>&nbsp;<span class="builtintype" id="5368871">bool</span><span class="op" id="5368875">)</span>&nbsp;<span class="builtintype" id="5368877">bool</span>&nbsp;<span class="op" id="5368882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368885">uvdelta</span>&nbsp;<span class="op" id="5368893">:=</span>&nbsp;<span class="ident" id="5368896">t</span><span class="op" id="5368897">.</span><span class="ident" id="5368898">readvarint</span><span class="op" id="5368908">(</span><span class="ident" id="5368909">p</span><span class="op" id="5368910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368913">if</span>&nbsp;<span class="ident" id="5368916">uvdelta</span>&nbsp;<span class="op" id="5368924">==</span>&nbsp;<span class="num" id="5368927">0</span>&nbsp;<span class="op" id="5368929">&amp;&amp;</span>&nbsp;<span class="op" id="5368932">!</span><span class="ident" id="5368933">first</span>&nbsp;<span class="op" id="5368939">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368943">return</span>&nbsp;<span class="builtintype" id="5368950">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5368957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5368960">if</span>&nbsp;<span class="ident" id="5368963">uvdelta</span><span class="op" id="5368970">&amp;</span><span class="num" id="5368971">1</span>&nbsp;<span class="op" id="5368973">!=</span>&nbsp;<span class="num" id="5368976">0</span>&nbsp;<span class="op" id="5368978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5368982">uvdelta</span>&nbsp;<span class="op" id="5368990">=</span>&nbsp;<span class="op" id="5368992">^</span><span class="op" id="5368993">(</span><span class="ident" id="5368994">uvdelta</span>&nbsp;<span class="op" id="5369002">&gt;&gt;</span>&nbsp;<span class="num" id="5369005">1</span><span class="op" id="5369006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369009">}</span>&nbsp;<span class="keyword" id="5369011">else</span>&nbsp;<span class="op" id="5369016">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369020">uvdelta</span>&nbsp;<span class="op" id="5369028">&gt;&gt;=</span>&nbsp;<span class="num" id="5369032">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369038">vdelta</span>&nbsp;<span class="op" id="5369045">:=</span>&nbsp;<span class="builtintype" id="5369048">int32</span><span class="op" id="5369053">(</span><span class="ident" id="5369054">uvdelta</span><span class="op" id="5369061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369064">pcdelta</span>&nbsp;<span class="op" id="5369072">:=</span>&nbsp;<span class="ident" id="5369075">t</span><span class="op" id="5369076">.</span><span class="ident" id="5369077">readvarint</span><span class="op" id="5369087">(</span><span class="ident" id="5369088">p</span><span class="op" id="5369089">)</span>&nbsp;<span class="op" id="5369091">*</span>&nbsp;<span class="ident" id="5369093">t</span><span class="op" id="5369094">.</span><span class="ident" id="5369095">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369104">*</span><span class="ident" id="5369105">pc</span>&nbsp;<span class="op" id="5369108">+=</span>&nbsp;<span class="ident" id="5369111">uint64</span><span class="op" id="5369117">(</span><span class="ident" id="5369118">pcdelta</span><span class="op" id="5369125">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369128">*</span><span class="ident" id="5369129">val</span>&nbsp;<span class="op" id="5369133">+=</span>&nbsp;<span class="ident" id="5369136">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369144">return</span>&nbsp;<span class="builtintype" id="5369151">true</span><br>
<span class="lineno"></span><span class="op" id="5369156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5369159">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5369219">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5369280">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5369341">func</span>&nbsp;<span class="op" id="5369346">(</span><span class="ident" id="5369347">t</span>&nbsp;<span class="op" id="5369349">*</span><span class="ident" id="5369350">LineTable</span><span class="op" id="5369359">)</span>&nbsp;<span class="ident" id="5369361">pcvalue</span><span class="op" id="5369368">(</span><span class="ident" id="5369369">off</span>&nbsp;<span class="builtintype" id="5369373">uint32</span><span class="op" id="5369379">,</span>&nbsp;<span class="ident" id="5369381">entry</span><span class="op" id="5369386">,</span>&nbsp;<span class="ident" id="5369388">targetpc</span>&nbsp;<span class="ident" id="5369397">uint64</span><span class="op" id="5369403">)</span>&nbsp;<span class="builtintype" id="5369405">int32</span>&nbsp;<span class="op" id="5369411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369414">if</span>&nbsp;<span class="ident" id="5369417">off</span>&nbsp;<span class="op" id="5369421">==</span>&nbsp;<span class="num" id="5369424">0</span>&nbsp;<span class="op" id="5369426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369430">return</span>&nbsp;<span class="op" id="5369437">-</span><span class="num" id="5369438">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369444">p</span>&nbsp;<span class="op" id="5369446">:=</span>&nbsp;<span class="ident" id="5369449">t</span><span class="op" id="5369450">.</span><span class="ident" id="5369451">Data</span><span class="op" id="5369455">[</span><span class="ident" id="5369456">off</span><span class="op" id="5369459">:</span><span class="op" id="5369460">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369464">val</span>&nbsp;<span class="op" id="5369468">:=</span>&nbsp;<span class="builtintype" id="5369471">int32</span><span class="op" id="5369476">(</span><span class="op" id="5369477">-</span><span class="num" id="5369478">1</span><span class="op" id="5369479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369482">pc</span>&nbsp;<span class="op" id="5369485">:=</span>&nbsp;<span class="ident" id="5369488">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369495">for</span>&nbsp;<span class="ident" id="5369499">t</span><span class="op" id="5369500">.</span><span class="ident" id="5369501">step</span><span class="op" id="5369505">(</span><span class="op" id="5369506">&amp;</span><span class="ident" id="5369507">p</span><span class="op" id="5369508">,</span>&nbsp;<span class="op" id="5369510">&amp;</span><span class="ident" id="5369511">pc</span><span class="op" id="5369513">,</span>&nbsp;<span class="op" id="5369515">&amp;</span><span class="ident" id="5369516">val</span><span class="op" id="5369519">,</span>&nbsp;<span class="ident" id="5369521">pc</span>&nbsp;<span class="op" id="5369524">==</span>&nbsp;<span class="ident" id="5369527">entry</span><span class="op" id="5369532">)</span>&nbsp;<span class="op" id="5369534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369538">if</span>&nbsp;<span class="ident" id="5369541">targetpc</span>&nbsp;<span class="op" id="5369550">&lt;</span>&nbsp;<span class="ident" id="5369552">pc</span>&nbsp;<span class="op" id="5369555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369560">return</span>&nbsp;<span class="ident" id="5369567">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5369576">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5369579">return</span>&nbsp;<span class="op" id="5369586">-</span><span class="num" id="5369587">1</span><br>
<span class="lineno"></span><span class="op" id="5369589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5369592">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5369655">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5369711">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5369780">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5369851">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5369926">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5370003">func</span>&nbsp;<span class="op" id="5370008">(</span><span class="ident" id="5370009">t</span>&nbsp;<span class="op" id="5370011">*</span><span class="ident" id="5370012">LineTable</span><span class="op" id="5370021">)</span>&nbsp;<span class="ident" id="5370023">findFileLine</span><span class="op" id="5370035">(</span><span class="ident" id="5370036">entry</span>&nbsp;<span class="ident" id="5370042">uint64</span><span class="op" id="5370048">,</span>&nbsp;<span class="ident" id="5370050">filetab</span><span class="op" id="5370057">,</span>&nbsp;<span class="ident" id="5370059">linetab</span>&nbsp;<span class="builtintype" id="5370067">uint32</span><span class="op" id="5370073">,</span>&nbsp;<span class="ident" id="5370075">filenum</span><span class="op" id="5370082">,</span>&nbsp;<span class="ident" id="5370084">line</span>&nbsp;<span class="builtintype" id="5370089">int32</span><span class="op" id="5370094">)</span>&nbsp;<span class="ident" id="5370096">uint64</span>&nbsp;<span class="op" id="5370103">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370106">if</span>&nbsp;<span class="ident" id="5370109">filetab</span>&nbsp;<span class="op" id="5370117">==</span>&nbsp;<span class="num" id="5370120">0</span>&nbsp;<span class="op" id="5370122">||</span>&nbsp;<span class="ident" id="5370125">linetab</span>&nbsp;<span class="op" id="5370133">==</span>&nbsp;<span class="num" id="5370136">0</span>&nbsp;<span class="op" id="5370138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370142">return</span>&nbsp;<span class="num" id="5370149">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370156">fp</span>&nbsp;<span class="op" id="5370159">:=</span>&nbsp;<span class="ident" id="5370162">t</span><span class="op" id="5370163">.</span><span class="ident" id="5370164">Data</span><span class="op" id="5370168">[</span><span class="ident" id="5370169">filetab</span><span class="op" id="5370176">:</span><span class="op" id="5370177">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370180">fl</span>&nbsp;<span class="op" id="5370183">:=</span>&nbsp;<span class="ident" id="5370186">t</span><span class="op" id="5370187">.</span><span class="ident" id="5370188">Data</span><span class="op" id="5370192">[</span><span class="ident" id="5370193">linetab</span><span class="op" id="5370200">:</span><span class="op" id="5370201">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370204">fileVal</span>&nbsp;<span class="op" id="5370212">:=</span>&nbsp;<span class="builtintype" id="5370215">int32</span><span class="op" id="5370220">(</span><span class="op" id="5370221">-</span><span class="num" id="5370222">1</span><span class="op" id="5370223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370226">filePC</span>&nbsp;<span class="op" id="5370233">:=</span>&nbsp;<span class="ident" id="5370236">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370243">lineVal</span>&nbsp;<span class="op" id="5370251">:=</span>&nbsp;<span class="builtintype" id="5370254">int32</span><span class="op" id="5370259">(</span><span class="op" id="5370260">-</span><span class="num" id="5370261">1</span><span class="op" id="5370262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370265">linePC</span>&nbsp;<span class="op" id="5370272">:=</span>&nbsp;<span class="ident" id="5370275">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370282">fileStartPC</span>&nbsp;<span class="op" id="5370294">:=</span>&nbsp;<span class="ident" id="5370297">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370305">for</span>&nbsp;<span class="ident" id="5370309">t</span><span class="op" id="5370310">.</span><span class="ident" id="5370311">step</span><span class="op" id="5370315">(</span><span class="op" id="5370316">&amp;</span><span class="ident" id="5370317">fp</span><span class="op" id="5370319">,</span>&nbsp;<span class="op" id="5370321">&amp;</span><span class="ident" id="5370322">filePC</span><span class="op" id="5370328">,</span>&nbsp;<span class="op" id="5370330">&amp;</span><span class="ident" id="5370331">fileVal</span><span class="op" id="5370338">,</span>&nbsp;<span class="ident" id="5370340">filePC</span>&nbsp;<span class="op" id="5370347">==</span>&nbsp;<span class="ident" id="5370350">entry</span><span class="op" id="5370355">)</span>&nbsp;<span class="op" id="5370357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370361">if</span>&nbsp;<span class="ident" id="5370364">fileVal</span>&nbsp;<span class="op" id="5370372">==</span>&nbsp;<span class="ident" id="5370375">filenum</span>&nbsp;<span class="op" id="5370383">&amp;&amp;</span>&nbsp;<span class="ident" id="5370386">fileStartPC</span>&nbsp;<span class="op" id="5370398">&lt;</span>&nbsp;<span class="ident" id="5370400">filePC</span>&nbsp;<span class="op" id="5370407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5370412">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5370469">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5370528">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5370586">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370618">lineStartPC</span>&nbsp;<span class="op" id="5370630">:=</span>&nbsp;<span class="ident" id="5370633">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370643">for</span>&nbsp;<span class="ident" id="5370647">linePC</span>&nbsp;<span class="op" id="5370654">&lt;</span>&nbsp;<span class="ident" id="5370656">filePC</span>&nbsp;<span class="op" id="5370663">&amp;&amp;</span>&nbsp;<span class="ident" id="5370666">t</span><span class="op" id="5370667">.</span><span class="ident" id="5370668">step</span><span class="op" id="5370672">(</span><span class="op" id="5370673">&amp;</span><span class="ident" id="5370674">fl</span><span class="op" id="5370676">,</span>&nbsp;<span class="op" id="5370678">&amp;</span><span class="ident" id="5370679">linePC</span><span class="op" id="5370685">,</span>&nbsp;<span class="op" id="5370687">&amp;</span><span class="ident" id="5370688">lineVal</span><span class="op" id="5370695">,</span>&nbsp;<span class="ident" id="5370697">linePC</span>&nbsp;<span class="op" id="5370704">==</span>&nbsp;<span class="ident" id="5370707">entry</span><span class="op" id="5370712">)</span>&nbsp;<span class="op" id="5370714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5370720">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370788">if</span>&nbsp;<span class="ident" id="5370791">lineVal</span>&nbsp;<span class="op" id="5370799">==</span>&nbsp;<span class="ident" id="5370802">line</span>&nbsp;<span class="op" id="5370807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370814">if</span>&nbsp;<span class="ident" id="5370817">fileStartPC</span>&nbsp;<span class="op" id="5370829">&lt;=</span>&nbsp;<span class="ident" id="5370832">lineStartPC</span>&nbsp;<span class="op" id="5370844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370852">return</span>&nbsp;<span class="ident" id="5370859">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370883">if</span>&nbsp;<span class="ident" id="5370886">fileStartPC</span>&nbsp;<span class="op" id="5370898">&lt;</span>&nbsp;<span class="ident" id="5370900">linePC</span>&nbsp;<span class="op" id="5370907">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370915">return</span>&nbsp;<span class="ident" id="5370922">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370951">lineStartPC</span>&nbsp;<span class="op" id="5370963">=</span>&nbsp;<span class="ident" id="5370965">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370975">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370983">fileStartPC</span>&nbsp;<span class="op" id="5370995">=</span>&nbsp;<span class="ident" id="5370997">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371008">return</span>&nbsp;<span class="num" id="5371015">0</span><br>
<span class="lineno"></span><span class="op" id="5371017">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5371020">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5371099">func</span>&nbsp;<span class="op" id="5371104">(</span><span class="ident" id="5371105">t</span>&nbsp;<span class="op" id="5371107">*</span><span class="ident" id="5371108">LineTable</span><span class="op" id="5371117">)</span>&nbsp;<span class="ident" id="5371119">go12PCToLine</span><span class="op" id="5371131">(</span><span class="ident" id="5371132">pc</span>&nbsp;<span class="ident" id="5371135">uint64</span><span class="op" id="5371141">)</span>&nbsp;<span class="op" id="5371143">(</span><span class="ident" id="5371144">line</span>&nbsp;<span class="builtintype" id="5371149">int</span><span class="op" id="5371152">)</span>&nbsp;<span class="op" id="5371154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371157">defer</span>&nbsp;<span class="keyword" id="5371163">func</span><span class="op" id="5371167">(</span><span class="op" id="5371168">)</span>&nbsp;<span class="op" id="5371170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371174">if</span>&nbsp;<span class="builtinfunc" id="5371177">recover</span><span class="op" id="5371184">(</span><span class="op" id="5371185">)</span>&nbsp;<span class="op" id="5371187">!=</span>&nbsp;<span class="ident" id="5371190">nil</span>&nbsp;<span class="op" id="5371194">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371199">line</span>&nbsp;<span class="op" id="5371204">=</span>&nbsp;<span class="op" id="5371206">-</span><span class="num" id="5371207">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371214">}</span><span class="op" id="5371215">(</span><span class="op" id="5371216">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371220">f</span>&nbsp;<span class="op" id="5371222">:=</span>&nbsp;<span class="ident" id="5371225">t</span><span class="op" id="5371226">.</span><span class="ident" id="5371227">findFunc</span><span class="op" id="5371235">(</span><span class="ident" id="5371236">pc</span><span class="op" id="5371238">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371241">if</span>&nbsp;<span class="ident" id="5371244">f</span>&nbsp;<span class="op" id="5371246">==</span>&nbsp;<span class="ident" id="5371249">nil</span>&nbsp;<span class="op" id="5371253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371257">return</span>&nbsp;<span class="op" id="5371264">-</span><span class="num" id="5371265">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371271">entry</span>&nbsp;<span class="op" id="5371277">:=</span>&nbsp;<span class="ident" id="5371280">t</span><span class="op" id="5371281">.</span><span class="builtintype" id="5371282">uintptr</span><span class="op" id="5371289">(</span><span class="ident" id="5371290">f</span><span class="op" id="5371291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371294">linetab</span>&nbsp;<span class="op" id="5371302">:=</span>&nbsp;<span class="ident" id="5371305">t</span><span class="op" id="5371306">.</span><span class="ident" id="5371307">binary</span><span class="op" id="5371313">.</span><span class="ident" id="5371314">Uint32</span><span class="op" id="5371320">(</span><span class="ident" id="5371321">f</span><span class="op" id="5371322">[</span><span class="ident" id="5371323">t</span><span class="op" id="5371324">.</span><span class="ident" id="5371325">ptrsize</span><span class="op" id="5371332">+</span><span class="num" id="5371333">5</span><span class="op" id="5371334">*</span><span class="num" id="5371335">4</span><span class="op" id="5371336">:</span><span class="op" id="5371337">]</span><span class="op" id="5371338">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371341">return</span>&nbsp;<span class="builtintype" id="5371348">int</span><span class="op" id="5371351">(</span><span class="ident" id="5371352">t</span><span class="op" id="5371353">.</span><span class="ident" id="5371354">pcvalue</span><span class="op" id="5371361">(</span><span class="ident" id="5371362">linetab</span><span class="op" id="5371369">,</span>&nbsp;<span class="ident" id="5371371">entry</span><span class="op" id="5371376">,</span>&nbsp;<span class="ident" id="5371378">pc</span><span class="op" id="5371380">)</span><span class="op" id="5371381">)</span><br>
<span class="lineno"></span><span class="op" id="5371383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5371386">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5371463">func</span>&nbsp;<span class="op" id="5371468">(</span><span class="ident" id="5371469">t</span>&nbsp;<span class="op" id="5371471">*</span><span class="ident" id="5371472">LineTable</span><span class="op" id="5371481">)</span>&nbsp;<span class="ident" id="5371483">go12PCToFile</span><span class="op" id="5371495">(</span><span class="ident" id="5371496">pc</span>&nbsp;<span class="ident" id="5371499">uint64</span><span class="op" id="5371505">)</span>&nbsp;<span class="op" id="5371507">(</span><span class="ident" id="5371508">file</span>&nbsp;<span class="builtintype" id="5371513">string</span><span class="op" id="5371519">)</span>&nbsp;<span class="op" id="5371521">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371524">defer</span>&nbsp;<span class="keyword" id="5371530">func</span><span class="op" id="5371534">(</span><span class="op" id="5371535">)</span>&nbsp;<span class="op" id="5371537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371541">if</span>&nbsp;<span class="builtinfunc" id="5371544">recover</span><span class="op" id="5371551">(</span><span class="op" id="5371552">)</span>&nbsp;<span class="op" id="5371554">!=</span>&nbsp;<span class="ident" id="5371557">nil</span>&nbsp;<span class="op" id="5371561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371566">file</span>&nbsp;<span class="op" id="5371571">=</span>&nbsp;<span class="string" id="5371573">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371581">}</span><span class="op" id="5371582">(</span><span class="op" id="5371583">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371587">f</span>&nbsp;<span class="op" id="5371589">:=</span>&nbsp;<span class="ident" id="5371592">t</span><span class="op" id="5371593">.</span><span class="ident" id="5371594">findFunc</span><span class="op" id="5371602">(</span><span class="ident" id="5371603">pc</span><span class="op" id="5371605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371608">if</span>&nbsp;<span class="ident" id="5371611">f</span>&nbsp;<span class="op" id="5371613">==</span>&nbsp;<span class="ident" id="5371616">nil</span>&nbsp;<span class="op" id="5371620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371624">return</span>&nbsp;<span class="string" id="5371631">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371635">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371638">entry</span>&nbsp;<span class="op" id="5371644">:=</span>&nbsp;<span class="ident" id="5371647">t</span><span class="op" id="5371648">.</span><span class="builtintype" id="5371649">uintptr</span><span class="op" id="5371656">(</span><span class="ident" id="5371657">f</span><span class="op" id="5371658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371661">filetab</span>&nbsp;<span class="op" id="5371669">:=</span>&nbsp;<span class="ident" id="5371672">t</span><span class="op" id="5371673">.</span><span class="ident" id="5371674">binary</span><span class="op" id="5371680">.</span><span class="ident" id="5371681">Uint32</span><span class="op" id="5371687">(</span><span class="ident" id="5371688">f</span><span class="op" id="5371689">[</span><span class="ident" id="5371690">t</span><span class="op" id="5371691">.</span><span class="ident" id="5371692">ptrsize</span><span class="op" id="5371699">+</span><span class="num" id="5371700">4</span><span class="op" id="5371701">*</span><span class="num" id="5371702">4</span><span class="op" id="5371703">:</span><span class="op" id="5371704">]</span><span class="op" id="5371705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5371708">fno</span>&nbsp;<span class="op" id="5371712">:=</span>&nbsp;<span class="ident" id="5371715">t</span><span class="op" id="5371716">.</span><span class="ident" id="5371717">pcvalue</span><span class="op" id="5371724">(</span><span class="ident" id="5371725">filetab</span><span class="op" id="5371732">,</span>&nbsp;<span class="ident" id="5371734">entry</span><span class="op" id="5371739">,</span>&nbsp;<span class="ident" id="5371741">pc</span><span class="op" id="5371743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371746">if</span>&nbsp;<span class="ident" id="5371749">fno</span>&nbsp;<span class="op" id="5371753">&lt;=</span>&nbsp;<span class="num" id="5371756">0</span>&nbsp;<span class="op" id="5371758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371762">return</span>&nbsp;<span class="string" id="5371769">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5371773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371776">return</span>&nbsp;<span class="ident" id="5371783">t</span><span class="op" id="5371784">.</span><span class="builtintype" id="5371785">string</span><span class="op" id="5371791">(</span><span class="ident" id="5371792">t</span><span class="op" id="5371793">.</span><span class="ident" id="5371794">binary</span><span class="op" id="5371800">.</span><span class="ident" id="5371801">Uint32</span><span class="op" id="5371807">(</span><span class="ident" id="5371808">t</span><span class="op" id="5371809">.</span><span class="ident" id="5371810">filetab</span><span class="op" id="5371817">[</span><span class="num" id="5371818">4</span><span class="op" id="5371819">*</span><span class="ident" id="5371820">fno</span><span class="op" id="5371823">:</span><span class="op" id="5371824">]</span><span class="op" id="5371825">)</span><span class="op" id="5371826">)</span><br>
<span class="lineno"></span><span class="op" id="5371828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5371831">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5371920">func</span>&nbsp;<span class="op" id="5371925">(</span><span class="ident" id="5371926">t</span>&nbsp;<span class="op" id="5371928">*</span><span class="ident" id="5371929">LineTable</span><span class="op" id="5371938">)</span>&nbsp;<span class="ident" id="5371940">go12LineToPC</span><span class="op" id="5371952">(</span><span class="ident" id="5371953">file</span>&nbsp;<span class="builtintype" id="5371958">string</span><span class="op" id="5371964">,</span>&nbsp;<span class="ident" id="5371966">line</span>&nbsp;<span class="builtintype" id="5371971">int</span><span class="op" id="5371974">)</span>&nbsp;<span class="op" id="5371976">(</span><span class="ident" id="5371977">pc</span>&nbsp;<span class="ident" id="5371980">uint64</span><span class="op" id="5371986">)</span>&nbsp;<span class="op" id="5371988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371991">defer</span>&nbsp;<span class="keyword" id="5371997">func</span><span class="op" id="5372001">(</span><span class="op" id="5372002">)</span>&nbsp;<span class="op" id="5372004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372008">if</span>&nbsp;<span class="builtinfunc" id="5372011">recover</span><span class="op" id="5372018">(</span><span class="op" id="5372019">)</span>&nbsp;<span class="op" id="5372021">!=</span>&nbsp;<span class="ident" id="5372024">nil</span>&nbsp;<span class="op" id="5372028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372033">pc</span>&nbsp;<span class="op" id="5372036">=</span>&nbsp;<span class="num" id="5372038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372042">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372045">}</span><span class="op" id="5372046">(</span><span class="op" id="5372047">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372051">t</span><span class="op" id="5372052">.</span><span class="ident" id="5372053">initFileMap</span><span class="op" id="5372064">(</span><span class="op" id="5372065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372068">filenum</span>&nbsp;<span class="op" id="5372076">:=</span>&nbsp;<span class="ident" id="5372079">t</span><span class="op" id="5372080">.</span><span class="ident" id="5372081">fileMap</span><span class="op" id="5372088">[</span><span class="ident" id="5372089">file</span><span class="op" id="5372093">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372096">if</span>&nbsp;<span class="ident" id="5372099">filenum</span>&nbsp;<span class="op" id="5372107">==</span>&nbsp;<span class="num" id="5372110">0</span>&nbsp;<span class="op" id="5372112">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372116">return</span>&nbsp;<span class="num" id="5372123">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5372130">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5372154">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5372231">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372304">for</span>&nbsp;<span class="ident" id="5372308">i</span>&nbsp;<span class="op" id="5372310">:=</span>&nbsp;<span class="builtintype" id="5372313">uint32</span><span class="op" id="5372319">(</span><span class="num" id="5372320">0</span><span class="op" id="5372321">)</span><span class="op" id="5372322">;</span>&nbsp;<span class="ident" id="5372324">i</span>&nbsp;<span class="op" id="5372326">&lt;</span>&nbsp;<span class="ident" id="5372328">t</span><span class="op" id="5372329">.</span><span class="ident" id="5372330">nfunctab</span><span class="op" id="5372338">;</span>&nbsp;<span class="ident" id="5372340">i</span><span class="op" id="5372341">++</span>&nbsp;<span class="op" id="5372344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372348">f</span>&nbsp;<span class="op" id="5372350">:=</span>&nbsp;<span class="ident" id="5372353">t</span><span class="op" id="5372354">.</span><span class="ident" id="5372355">Data</span><span class="op" id="5372359">[</span><span class="ident" id="5372360">t</span><span class="op" id="5372361">.</span><span class="builtintype" id="5372362">uintptr</span><span class="op" id="5372369">(</span><span class="ident" id="5372370">t</span><span class="op" id="5372371">.</span><span class="ident" id="5372372">functab</span><span class="op" id="5372379">[</span><span class="num" id="5372380">2</span><span class="op" id="5372381">*</span><span class="ident" id="5372382">t</span><span class="op" id="5372383">.</span><span class="ident" id="5372384">ptrsize</span><span class="op" id="5372391">*</span><span class="ident" id="5372392">i</span><span class="op" id="5372393">+</span><span class="ident" id="5372394">t</span><span class="op" id="5372395">.</span><span class="ident" id="5372396">ptrsize</span><span class="op" id="5372403">:</span><span class="op" id="5372404">]</span><span class="op" id="5372405">)</span><span class="op" id="5372406">:</span><span class="op" id="5372407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372411">entry</span>&nbsp;<span class="op" id="5372417">:=</span>&nbsp;<span class="ident" id="5372420">t</span><span class="op" id="5372421">.</span><span class="builtintype" id="5372422">uintptr</span><span class="op" id="5372429">(</span><span class="ident" id="5372430">f</span><span class="op" id="5372431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372435">filetab</span>&nbsp;<span class="op" id="5372443">:=</span>&nbsp;<span class="ident" id="5372446">t</span><span class="op" id="5372447">.</span><span class="ident" id="5372448">binary</span><span class="op" id="5372454">.</span><span class="ident" id="5372455">Uint32</span><span class="op" id="5372461">(</span><span class="ident" id="5372462">f</span><span class="op" id="5372463">[</span><span class="ident" id="5372464">t</span><span class="op" id="5372465">.</span><span class="ident" id="5372466">ptrsize</span><span class="op" id="5372473">+</span><span class="num" id="5372474">4</span><span class="op" id="5372475">*</span><span class="num" id="5372476">4</span><span class="op" id="5372477">:</span><span class="op" id="5372478">]</span><span class="op" id="5372479">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372483">linetab</span>&nbsp;<span class="op" id="5372491">:=</span>&nbsp;<span class="ident" id="5372494">t</span><span class="op" id="5372495">.</span><span class="ident" id="5372496">binary</span><span class="op" id="5372502">.</span><span class="ident" id="5372503">Uint32</span><span class="op" id="5372509">(</span><span class="ident" id="5372510">f</span><span class="op" id="5372511">[</span><span class="ident" id="5372512">t</span><span class="op" id="5372513">.</span><span class="ident" id="5372514">ptrsize</span><span class="op" id="5372521">+</span><span class="num" id="5372522">5</span><span class="op" id="5372523">*</span><span class="num" id="5372524">4</span><span class="op" id="5372525">:</span><span class="op" id="5372526">]</span><span class="op" id="5372527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372531">pc</span>&nbsp;<span class="op" id="5372534">:=</span>&nbsp;<span class="ident" id="5372537">t</span><span class="op" id="5372538">.</span><span class="ident" id="5372539">findFileLine</span><span class="op" id="5372551">(</span><span class="ident" id="5372552">entry</span><span class="op" id="5372557">,</span>&nbsp;<span class="ident" id="5372559">filetab</span><span class="op" id="5372566">,</span>&nbsp;<span class="ident" id="5372568">linetab</span><span class="op" id="5372575">,</span>&nbsp;<span class="builtintype" id="5372577">int32</span><span class="op" id="5372582">(</span><span class="ident" id="5372583">filenum</span><span class="op" id="5372590">)</span><span class="op" id="5372591">,</span>&nbsp;<span class="builtintype" id="5372593">int32</span><span class="op" id="5372598">(</span><span class="ident" id="5372599">line</span><span class="op" id="5372603">)</span><span class="op" id="5372604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372608">if</span>&nbsp;<span class="ident" id="5372611">pc</span>&nbsp;<span class="op" id="5372614">!=</span>&nbsp;<span class="num" id="5372617">0</span>&nbsp;<span class="op" id="5372619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372624">return</span>&nbsp;<span class="ident" id="5372631">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372636">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372642">return</span>&nbsp;<span class="num" id="5372649">0</span><br>
<span class="lineno"></span><span class="op" id="5372651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5372654">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5372720">func</span>&nbsp;<span class="op" id="5372725">(</span><span class="ident" id="5372726">t</span>&nbsp;<span class="op" id="5372728">*</span><span class="ident" id="5372729">LineTable</span><span class="op" id="5372738">)</span>&nbsp;<span class="ident" id="5372740">initFileMap</span><span class="op" id="5372751">(</span><span class="op" id="5372752">)</span>&nbsp;<span class="op" id="5372754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372757">t</span><span class="op" id="5372758">.</span><span class="ident" id="5372759">mu</span><span class="op" id="5372761">.</span><span class="ident" id="5372762">Lock</span><span class="op" id="5372766">(</span><span class="op" id="5372767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372770">defer</span>&nbsp;<span class="ident" id="5372776">t</span><span class="op" id="5372777">.</span><span class="ident" id="5372778">mu</span><span class="op" id="5372780">.</span><span class="ident" id="5372781">Unlock</span><span class="op" id="5372787">(</span><span class="op" id="5372788">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372792">if</span>&nbsp;<span class="ident" id="5372795">t</span><span class="op" id="5372796">.</span><span class="ident" id="5372797">fileMap</span>&nbsp;<span class="op" id="5372805">!=</span>&nbsp;<span class="ident" id="5372808">nil</span>&nbsp;<span class="op" id="5372812">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372816">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372827">m</span>&nbsp;<span class="op" id="5372829">:=</span>&nbsp;<span class="builtinfunc" id="5372832">make</span><span class="op" id="5372836">(</span><span class="keyword" id="5372837">map</span><span class="op" id="5372840">[</span><span class="builtintype" id="5372841">string</span><span class="op" id="5372847">]</span><span class="builtintype" id="5372848">uint32</span><span class="op" id="5372854">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5372858">for</span>&nbsp;<span class="ident" id="5372862">i</span>&nbsp;<span class="op" id="5372864">:=</span>&nbsp;<span class="builtintype" id="5372867">uint32</span><span class="op" id="5372873">(</span><span class="num" id="5372874">1</span><span class="op" id="5372875">)</span><span class="op" id="5372876">;</span>&nbsp;<span class="ident" id="5372878">i</span>&nbsp;<span class="op" id="5372880">&lt;</span>&nbsp;<span class="ident" id="5372882">t</span><span class="op" id="5372883">.</span><span class="ident" id="5372884">nfiletab</span><span class="op" id="5372892">;</span>&nbsp;<span class="ident" id="5372894">i</span><span class="op" id="5372895">++</span>&nbsp;<span class="op" id="5372898">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372902">s</span>&nbsp;<span class="op" id="5372904">:=</span>&nbsp;<span class="ident" id="5372907">t</span><span class="op" id="5372908">.</span><span class="builtintype" id="5372909">string</span><span class="op" id="5372915">(</span><span class="ident" id="5372916">t</span><span class="op" id="5372917">.</span><span class="ident" id="5372918">binary</span><span class="op" id="5372924">.</span><span class="ident" id="5372925">Uint32</span><span class="op" id="5372931">(</span><span class="ident" id="5372932">t</span><span class="op" id="5372933">.</span><span class="ident" id="5372934">filetab</span><span class="op" id="5372941">[</span><span class="num" id="5372942">4</span><span class="op" id="5372943">*</span><span class="ident" id="5372944">i</span><span class="op" id="5372945">:</span><span class="op" id="5372946">]</span><span class="op" id="5372947">)</span><span class="op" id="5372948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372952">m</span><span class="op" id="5372953">[</span><span class="ident" id="5372954">s</span><span class="op" id="5372955">]</span>&nbsp;<span class="op" id="5372957">=</span>&nbsp;<span class="ident" id="5372959">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5372962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5372965">t</span><span class="op" id="5372966">.</span><span class="ident" id="5372967">fileMap</span>&nbsp;<span class="op" id="5372975">=</span>&nbsp;<span class="ident" id="5372977">m</span><br>
<span class="lineno"></span><span class="op" id="5372979">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5372982">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5373054">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5373131">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5373196">func</span>&nbsp;<span class="op" id="5373201">(</span><span class="ident" id="5373202">t</span>&nbsp;<span class="op" id="5373204">*</span><span class="ident" id="5373205">LineTable</span><span class="op" id="5373214">)</span>&nbsp;<span class="ident" id="5373216">go12MapFiles</span><span class="op" id="5373228">(</span><span class="ident" id="5373229">m</span>&nbsp;<span class="keyword" id="5373231">map</span><span class="op" id="5373234">[</span><span class="builtintype" id="5373235">string</span><span class="op" id="5373241">]</span><span class="op" id="5373242">*</span><span class="ident" id="5373243">Obj</span><span class="op" id="5373246">,</span>&nbsp;<span class="ident" id="5373248">obj</span>&nbsp;<span class="op" id="5373252">*</span><span class="ident" id="5373253">Obj</span><span class="op" id="5373256">)</span>&nbsp;<span class="op" id="5373258">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5373261">defer</span>&nbsp;<span class="keyword" id="5373267">func</span><span class="op" id="5373271">(</span><span class="op" id="5373272">)</span>&nbsp;<span class="op" id="5373274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5373278">recover</span><span class="op" id="5373285">(</span><span class="op" id="5373286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5373289">}</span><span class="op" id="5373290">(</span><span class="op" id="5373291">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5373295">t</span><span class="op" id="5373296">.</span><span class="ident" id="5373297">initFileMap</span><span class="op" id="5373308">(</span><span class="op" id="5373309">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5373312">for</span>&nbsp;<span class="ident" id="5373316">file</span>&nbsp;<span class="op" id="5373321">:=</span>&nbsp;<span class="keyword" id="5373324">range</span>&nbsp;<span class="ident" id="5373330">t</span><span class="op" id="5373331">.</span><span class="ident" id="5373332">fileMap</span>&nbsp;<span class="op" id="5373340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5373344">m</span><span class="op" id="5373345">[</span><span class="ident" id="5373346">file</span><span class="op" id="5373350">]</span>&nbsp;<span class="op" id="5373352">=</span>&nbsp;<span class="ident" id="5373354">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5373359">}</span><br>
<span class="lineno"></span><span class="op" id="5373361">}</span>
</div>
</body>
</html>
