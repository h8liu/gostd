<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6836979">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6837035">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6837089">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6837140">package</span>&nbsp;<span class="ident" id="6837148">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6837154">import</span>&nbsp;<span class="op" id="6837161">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837164">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837173">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837182">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837189">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837195">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837206">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837217">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837228">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6837238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6837241">type</span>&nbsp;<span class="ident" id="6837246">reqTest</span>&nbsp;<span class="keyword" id="6837254">struct</span>&nbsp;<span class="op" id="6837261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837264">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6837272">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837280">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6837288">*</span><span class="ident" id="6837289">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837298">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6837306">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837314">Trailer</span>&nbsp;<span class="ident" id="6837322">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837330">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6837338">string</span><br>
<span class="lineno"></span><span class="op" id="6837345">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6837348">var</span>&nbsp;<span class="ident" id="6837352">noError</span>&nbsp;<span class="op" id="6837360">=</span>&nbsp;<span class="string" id="6837362">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="6837365">var</span>&nbsp;<span class="ident" id="6837369">noBody</span>&nbsp;<span class="op" id="6837376">=</span>&nbsp;<span class="string" id="6837378">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="6837381">var</span>&nbsp;<span class="ident" id="6837385">noTrailer</span>&nbsp;<span class="ident" id="6837395">Header</span>&nbsp;<span class="op" id="6837402">=</span>&nbsp;<span class="ident" id="6837404">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6837409">var</span>&nbsp;<span class="ident" id="6837413">reqTests</span>&nbsp;<span class="op" id="6837422">=</span>&nbsp;<span class="op" id="6837424">[</span><span class="op" id="6837425">]</span><span class="ident" id="6837426">reqTest</span><span class="op" id="6837433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6837436">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6837500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837504">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6837550">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837555">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="6837586">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837591">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="6837614">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837619">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="6837697">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837702">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="6837740">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837745">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="6837781">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837786">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="6837839">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837844">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="6837866">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837871">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="6837895">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837900">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6837939">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6837944">&#34;abcdef\n???&#34;</span><span class="op" id="6837957">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6837962">&amp;</span><span class="ident" id="6837963">Request</span><span class="op" id="6837970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837975">Method</span><span class="op" id="6837981">:</span>&nbsp;<span class="string" id="6837983">&#34;GET&#34;</span><span class="op" id="6837988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6837993">URL</span><span class="op" id="6837996">:</span>&nbsp;<span class="op" id="6837998">&amp;</span><span class="ident" id="6837999">url</span><span class="op" id="6838002">.</span><span class="ident" id="6838003">URL</span><span class="op" id="6838006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838012">Scheme</span><span class="op" id="6838018">:</span>&nbsp;<span class="string" id="6838020">&#34;http&#34;</span><span class="op" id="6838026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838032">Host</span><span class="op" id="6838036">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6838040">&#34;www.techcrunch.com&#34;</span><span class="op" id="6838060">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838066">Path</span><span class="op" id="6838070">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6838074">&#34;/&#34;</span><span class="op" id="6838077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838082">}</span><span class="op" id="6838083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838088">Proto</span><span class="op" id="6838093">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6838100">&#34;HTTP/1.1&#34;</span><span class="op" id="6838110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838115">ProtoMajor</span><span class="op" id="6838125">:</span>&nbsp;<span class="num" id="6838127">1</span><span class="op" id="6838128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838133">ProtoMinor</span><span class="op" id="6838143">:</span>&nbsp;<span class="num" id="6838145">1</span><span class="op" id="6838146">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838151">Header</span><span class="op" id="6838157">:</span>&nbsp;<span class="ident" id="6838159">Header</span><span class="op" id="6838165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838171">&#34;Accept&#34;</span><span class="op" id="6838179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6838191">{</span><span class="string" id="6838192">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="6838257">}</span><span class="op" id="6838258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838264">&#34;Accept-Language&#34;</span><span class="op" id="6838281">:</span>&nbsp;&nbsp;<span class="op" id="6838284">{</span><span class="string" id="6838285">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="6838301">}</span><span class="op" id="6838302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838308">&#34;Accept-Encoding&#34;</span><span class="op" id="6838325">:</span>&nbsp;&nbsp;<span class="op" id="6838328">{</span><span class="string" id="6838329">&#34;gzip,deflate&#34;</span><span class="op" id="6838343">}</span><span class="op" id="6838344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838350">&#34;Accept-Charset&#34;</span><span class="op" id="6838366">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6838370">{</span><span class="string" id="6838371">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="6838403">}</span><span class="op" id="6838404">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838410">&#34;Keep-Alive&#34;</span><span class="op" id="6838422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6838430">{</span><span class="string" id="6838431">&#34;300&#34;</span><span class="op" id="6838436">}</span><span class="op" id="6838437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838443">&#34;Proxy-Connection&#34;</span><span class="op" id="6838461">:</span>&nbsp;<span class="op" id="6838463">{</span><span class="string" id="6838464">&#34;keep-alive&#34;</span><span class="op" id="6838476">}</span><span class="op" id="6838477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838483">&#34;Content-Length&#34;</span><span class="op" id="6838499">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6838503">{</span><span class="string" id="6838504">&#34;7&#34;</span><span class="op" id="6838507">}</span><span class="op" id="6838508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838514">&#34;User-Agent&#34;</span><span class="op" id="6838526">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6838534">{</span><span class="string" id="6838535">&#34;Fake&#34;</span><span class="op" id="6838541">}</span><span class="op" id="6838542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838547">}</span><span class="op" id="6838548">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838553">Close</span><span class="op" id="6838558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6838568">false</span><span class="op" id="6838573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838578">ContentLength</span><span class="op" id="6838591">:</span>&nbsp;<span class="num" id="6838593">7</span><span class="op" id="6838594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838599">Host</span><span class="op" id="6838603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6838614">&#34;www.techcrunch.com&#34;</span><span class="op" id="6838634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838639">RequestURI</span><span class="op" id="6838649">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6838654">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="6838682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838686">}</span><span class="op" id="6838687">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838692">&#34;abcdef\n&#34;</span><span class="op" id="6838702">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838707">noTrailer</span><span class="op" id="6838716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838720">noError</span><span class="op" id="6838727">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838730">}</span><span class="op" id="6838731">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6838735">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838786">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6838807">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6838812">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="6838835">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838840">&amp;</span><span class="ident" id="6838841">Request</span><span class="op" id="6838848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838853">Method</span><span class="op" id="6838859">:</span>&nbsp;<span class="string" id="6838861">&#34;GET&#34;</span><span class="op" id="6838866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838871">URL</span><span class="op" id="6838874">:</span>&nbsp;<span class="op" id="6838876">&amp;</span><span class="ident" id="6838877">url</span><span class="op" id="6838880">.</span><span class="ident" id="6838881">URL</span><span class="op" id="6838884">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838890">Path</span><span class="op" id="6838894">:</span>&nbsp;<span class="string" id="6838896">&#34;/&#34;</span><span class="op" id="6838899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6838904">}</span><span class="op" id="6838905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838910">Proto</span><span class="op" id="6838915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6838925">&#34;HTTP/1.1&#34;</span><span class="op" id="6838935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838940">ProtoMajor</span><span class="op" id="6838950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6838955">1</span><span class="op" id="6838956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838961">ProtoMinor</span><span class="op" id="6838971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6838976">1</span><span class="op" id="6838977">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6838982">Header</span><span class="op" id="6838988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6838997">Header</span><span class="op" id="6839003">{</span><span class="op" id="6839004">}</span><span class="op" id="6839005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839010">Close</span><span class="op" id="6839015">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6839025">false</span><span class="op" id="6839030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839035">ContentLength</span><span class="op" id="6839048">:</span>&nbsp;<span class="num" id="6839050">0</span><span class="op" id="6839051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839056">Host</span><span class="op" id="6839060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6839071">&#34;foo.com&#34;</span><span class="op" id="6839080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839085">RequestURI</span><span class="op" id="6839095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6839100">&#34;/&#34;</span><span class="op" id="6839103">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839107">}</span><span class="op" id="6839108">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839113">noBody</span><span class="op" id="6839119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839123">noTrailer</span><span class="op" id="6839132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839136">noError</span><span class="op" id="6839143">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839146">}</span><span class="op" id="6839147">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6839151">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6839206">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839256">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839260">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6839311">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839316">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6839336">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839341">&amp;</span><span class="ident" id="6839342">Request</span><span class="op" id="6839349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839354">Method</span><span class="op" id="6839360">:</span>&nbsp;<span class="string" id="6839362">&#34;GET&#34;</span><span class="op" id="6839367">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839372">URL</span><span class="op" id="6839375">:</span>&nbsp;<span class="op" id="6839377">&amp;</span><span class="ident" id="6839378">url</span><span class="op" id="6839381">.</span><span class="ident" id="6839382">URL</span><span class="op" id="6839385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839391">Path</span><span class="op" id="6839395">:</span>&nbsp;<span class="string" id="6839397">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="6839430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839435">}</span><span class="op" id="6839436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839441">Proto</span><span class="op" id="6839446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6839456">&#34;HTTP/1.1&#34;</span><span class="op" id="6839466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839471">ProtoMajor</span><span class="op" id="6839481">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6839486">1</span><span class="op" id="6839487">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839492">ProtoMinor</span><span class="op" id="6839502">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6839507">1</span><span class="op" id="6839508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839513">Header</span><span class="op" id="6839519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6839528">Header</span><span class="op" id="6839534">{</span><span class="op" id="6839535">}</span><span class="op" id="6839536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839541">Close</span><span class="op" id="6839546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6839556">false</span><span class="op" id="6839561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839566">ContentLength</span><span class="op" id="6839579">:</span>&nbsp;<span class="num" id="6839581">0</span><span class="op" id="6839582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839587">Host</span><span class="op" id="6839591">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6839602">&#34;test&#34;</span><span class="op" id="6839608">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839613">RequestURI</span><span class="op" id="6839623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6839628">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="6839661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839665">}</span><span class="op" id="6839666">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839671">noBody</span><span class="op" id="6839677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839681">noTrailer</span><span class="op" id="6839690">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839694">noError</span><span class="op" id="6839701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839704">}</span><span class="op" id="6839705">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6839709">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839781">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839785">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6839827">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839832">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6839852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839856">nil</span><span class="op" id="6839859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839863">noBody</span><span class="op" id="6839869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6839873">noTrailer</span><span class="op" id="6839882">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839886">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="6839941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839944">}</span><span class="op" id="6839945">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6839949">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6839972">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6839976">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6839996">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840001">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="6840021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840025">nil</span><span class="op" id="6840028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840032">noBody</span><span class="op" id="6840038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840042">noTrailer</span><span class="op" id="6840051">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840055">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="6840074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840077">}</span><span class="op" id="6840078">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6840082">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840119">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840123">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6840145">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840150">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="6840170">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840175">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6840212">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840217">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="6840232">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840237">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="6840252">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840257">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="6840265">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840270">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="6840303">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840308">&#34;\r\n&#34;</span><span class="op" id="6840314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840318">&amp;</span><span class="ident" id="6840319">Request</span><span class="op" id="6840326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840331">Method</span><span class="op" id="6840337">:</span>&nbsp;<span class="string" id="6840339">&#34;POST&#34;</span><span class="op" id="6840345">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840350">URL</span><span class="op" id="6840353">:</span>&nbsp;<span class="op" id="6840355">&amp;</span><span class="ident" id="6840356">url</span><span class="op" id="6840359">.</span><span class="ident" id="6840360">URL</span><span class="op" id="6840363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840369">Path</span><span class="op" id="6840373">:</span>&nbsp;<span class="string" id="6840375">&#34;/&#34;</span><span class="op" id="6840378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840383">}</span><span class="op" id="6840384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840389">TransferEncoding</span><span class="op" id="6840405">:</span>&nbsp;<span class="op" id="6840407">[</span><span class="op" id="6840408">]</span><span class="builtintype" id="6840409">string</span><span class="op" id="6840415">{</span><span class="string" id="6840416">&#34;chunked&#34;</span><span class="op" id="6840425">}</span><span class="op" id="6840426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840431">Proto</span><span class="op" id="6840436">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840449">&#34;HTTP/1.1&#34;</span><span class="op" id="6840459">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840464">ProtoMajor</span><span class="op" id="6840474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6840482">1</span><span class="op" id="6840483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840488">ProtoMinor</span><span class="op" id="6840498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6840506">1</span><span class="op" id="6840507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840512">Header</span><span class="op" id="6840518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840530">Header</span><span class="op" id="6840536">{</span><span class="op" id="6840537">}</span><span class="op" id="6840538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840543">ContentLength</span><span class="op" id="6840556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840561">-</span><span class="num" id="6840562">1</span><span class="op" id="6840563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840568">Host</span><span class="op" id="6840572">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840586">&#34;foo.com&#34;</span><span class="op" id="6840595">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840600">RequestURI</span><span class="op" id="6840610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840618">&#34;/&#34;</span><span class="op" id="6840621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840625">}</span><span class="op" id="6840626">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840631">&#34;foobar&#34;</span><span class="op" id="6840639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840643">Header</span><span class="op" id="6840649">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840654">&#34;Trailer-Key&#34;</span><span class="op" id="6840667">:</span>&nbsp;<span class="op" id="6840669">{</span><span class="string" id="6840670">&#34;Trailer-Value&#34;</span><span class="op" id="6840685">}</span><span class="op" id="6840686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840690">}</span><span class="op" id="6840691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840695">noError</span><span class="op" id="6840702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840705">}</span><span class="op" id="6840706">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6840710">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6840752">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6840797">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840802">&amp;</span><span class="ident" id="6840803">Request</span><span class="op" id="6840810">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840815">Method</span><span class="op" id="6840821">:</span>&nbsp;<span class="string" id="6840823">&#34;CONNECT&#34;</span><span class="op" id="6840832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840837">URL</span><span class="op" id="6840840">:</span>&nbsp;<span class="op" id="6840842">&amp;</span><span class="ident" id="6840843">url</span><span class="op" id="6840846">.</span><span class="ident" id="6840847">URL</span><span class="op" id="6840850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840856">Host</span><span class="op" id="6840860">:</span>&nbsp;<span class="string" id="6840862">&#34;www.google.com:443&#34;</span><span class="op" id="6840882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6840887">}</span><span class="op" id="6840888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840893">Proto</span><span class="op" id="6840898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840908">&#34;HTTP/1.1&#34;</span><span class="op" id="6840918">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840923">ProtoMajor</span><span class="op" id="6840933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6840938">1</span><span class="op" id="6840939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840944">ProtoMinor</span><span class="op" id="6840954">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6840959">1</span><span class="op" id="6840960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840965">Header</span><span class="op" id="6840971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840980">Header</span><span class="op" id="6840986">{</span><span class="op" id="6840987">}</span><span class="op" id="6840988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6840993">Close</span><span class="op" id="6840998">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6841008">false</span><span class="op" id="6841013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841018">ContentLength</span><span class="op" id="6841031">:</span>&nbsp;<span class="num" id="6841033">0</span><span class="op" id="6841034">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841039">Host</span><span class="op" id="6841043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841054">&#34;www.google.com:443&#34;</span><span class="op" id="6841074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841079">RequestURI</span><span class="op" id="6841089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841094">&#34;www.google.com:443&#34;</span><span class="op" id="6841114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841118">}</span><span class="op" id="6841119">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841124">noBody</span><span class="op" id="6841130">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841134">noTrailer</span><span class="op" id="6841143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841147">noError</span><span class="op" id="6841154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841157">}</span><span class="op" id="6841158">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6841162">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6841203">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6841244">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841249">&amp;</span><span class="ident" id="6841250">Request</span><span class="op" id="6841257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841262">Method</span><span class="op" id="6841268">:</span>&nbsp;<span class="string" id="6841270">&#34;CONNECT&#34;</span><span class="op" id="6841279">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841284">URL</span><span class="op" id="6841287">:</span>&nbsp;<span class="op" id="6841289">&amp;</span><span class="ident" id="6841290">url</span><span class="op" id="6841293">.</span><span class="ident" id="6841294">URL</span><span class="op" id="6841297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841303">Host</span><span class="op" id="6841307">:</span>&nbsp;<span class="string" id="6841309">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6841325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841330">}</span><span class="op" id="6841331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841336">Proto</span><span class="op" id="6841341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841351">&#34;HTTP/1.1&#34;</span><span class="op" id="6841361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841366">ProtoMajor</span><span class="op" id="6841376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6841381">1</span><span class="op" id="6841382">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841387">ProtoMinor</span><span class="op" id="6841397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6841402">1</span><span class="op" id="6841403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841408">Header</span><span class="op" id="6841414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841423">Header</span><span class="op" id="6841429">{</span><span class="op" id="6841430">}</span><span class="op" id="6841431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841436">Close</span><span class="op" id="6841441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6841451">false</span><span class="op" id="6841456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841461">ContentLength</span><span class="op" id="6841474">:</span>&nbsp;<span class="num" id="6841476">0</span><span class="op" id="6841477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841482">Host</span><span class="op" id="6841486">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841497">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6841513">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841518">RequestURI</span><span class="op" id="6841528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841533">&#34;127.0.0.1:6060&#34;</span><span class="op" id="6841549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841553">}</span><span class="op" id="6841554">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841559">noBody</span><span class="op" id="6841565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841569">noTrailer</span><span class="op" id="6841578">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841582">noError</span><span class="op" id="6841589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841592">}</span><span class="op" id="6841593">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6841597">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841626">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6841630">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="6841665">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841670">&amp;</span><span class="ident" id="6841671">Request</span><span class="op" id="6841678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841683">Method</span><span class="op" id="6841689">:</span>&nbsp;<span class="string" id="6841691">&#34;CONNECT&#34;</span><span class="op" id="6841700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841705">URL</span><span class="op" id="6841708">:</span>&nbsp;<span class="op" id="6841710">&amp;</span><span class="ident" id="6841711">url</span><span class="op" id="6841714">.</span><span class="ident" id="6841715">URL</span><span class="op" id="6841718">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841724">Path</span><span class="op" id="6841728">:</span>&nbsp;<span class="string" id="6841730">&#34;/_goRPC_&#34;</span><span class="op" id="6841740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841745">}</span><span class="op" id="6841746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841751">Proto</span><span class="op" id="6841756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841766">&#34;HTTP/1.1&#34;</span><span class="op" id="6841776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841781">ProtoMajor</span><span class="op" id="6841791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6841796">1</span><span class="op" id="6841797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841802">ProtoMinor</span><span class="op" id="6841812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6841817">1</span><span class="op" id="6841818">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841823">Header</span><span class="op" id="6841829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841838">Header</span><span class="op" id="6841844">{</span><span class="op" id="6841845">}</span><span class="op" id="6841846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841851">Close</span><span class="op" id="6841856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6841866">false</span><span class="op" id="6841871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841876">ContentLength</span><span class="op" id="6841889">:</span>&nbsp;<span class="num" id="6841891">0</span><span class="op" id="6841892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841897">Host</span><span class="op" id="6841901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841912">&#34;&#34;</span><span class="op" id="6841914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841919">RequestURI</span><span class="op" id="6841929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6841934">&#34;/_goRPC_&#34;</span><span class="op" id="6841944">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841948">}</span><span class="op" id="6841949">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841954">noBody</span><span class="op" id="6841960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841964">noTrailer</span><span class="op" id="6841973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6841977">noError</span><span class="op" id="6841984">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841987">}</span><span class="op" id="6841988">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6841992">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6842043">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="6842085">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842089">&amp;</span><span class="ident" id="6842090">Request</span><span class="op" id="6842097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842102">Method</span><span class="op" id="6842108">:</span>&nbsp;<span class="string" id="6842110">&#34;NOTIFY&#34;</span><span class="op" id="6842118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842123">URL</span><span class="op" id="6842126">:</span>&nbsp;<span class="op" id="6842128">&amp;</span><span class="ident" id="6842129">url</span><span class="op" id="6842132">.</span><span class="ident" id="6842133">URL</span><span class="op" id="6842136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842142">Path</span><span class="op" id="6842146">:</span>&nbsp;<span class="string" id="6842148">&#34;*&#34;</span><span class="op" id="6842151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842156">}</span><span class="op" id="6842157">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842162">Proto</span><span class="op" id="6842167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6842174">&#34;HTTP/1.1&#34;</span><span class="op" id="6842184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842189">ProtoMajor</span><span class="op" id="6842199">:</span>&nbsp;<span class="num" id="6842201">1</span><span class="op" id="6842202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842207">ProtoMinor</span><span class="op" id="6842217">:</span>&nbsp;<span class="num" id="6842219">1</span><span class="op" id="6842220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842225">Header</span><span class="op" id="6842231">:</span>&nbsp;<span class="ident" id="6842233">Header</span><span class="op" id="6842239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6842245">&#34;Server&#34;</span><span class="op" id="6842253">:</span>&nbsp;<span class="op" id="6842255">[</span><span class="op" id="6842256">]</span><span class="builtintype" id="6842257">string</span><span class="op" id="6842263">{</span><span class="string" id="6842264">&#34;foo&#34;</span><span class="op" id="6842269">}</span><span class="op" id="6842270">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842275">}</span><span class="op" id="6842276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842281">Close</span><span class="op" id="6842286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6842296">false</span><span class="op" id="6842301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842306">ContentLength</span><span class="op" id="6842319">:</span>&nbsp;<span class="num" id="6842321">0</span><span class="op" id="6842322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842327">RequestURI</span><span class="op" id="6842337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6842342">&#34;*&#34;</span><span class="op" id="6842345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842349">}</span><span class="op" id="6842350">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842355">noBody</span><span class="op" id="6842361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842365">noTrailer</span><span class="op" id="6842374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842378">noError</span><span class="op" id="6842385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842388">}</span><span class="op" id="6842389">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6842393">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6842451">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="6842494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842498">&amp;</span><span class="ident" id="6842499">Request</span><span class="op" id="6842506">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842511">Method</span><span class="op" id="6842517">:</span>&nbsp;<span class="string" id="6842519">&#34;OPTIONS&#34;</span><span class="op" id="6842528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842533">URL</span><span class="op" id="6842536">:</span>&nbsp;<span class="op" id="6842538">&amp;</span><span class="ident" id="6842539">url</span><span class="op" id="6842542">.</span><span class="ident" id="6842543">URL</span><span class="op" id="6842546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842552">Path</span><span class="op" id="6842556">:</span>&nbsp;<span class="string" id="6842558">&#34;*&#34;</span><span class="op" id="6842561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842566">}</span><span class="op" id="6842567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842572">Proto</span><span class="op" id="6842577">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6842584">&#34;HTTP/1.1&#34;</span><span class="op" id="6842594">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842599">ProtoMajor</span><span class="op" id="6842609">:</span>&nbsp;<span class="num" id="6842611">1</span><span class="op" id="6842612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842617">ProtoMinor</span><span class="op" id="6842627">:</span>&nbsp;<span class="num" id="6842629">1</span><span class="op" id="6842630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842635">Header</span><span class="op" id="6842641">:</span>&nbsp;<span class="ident" id="6842643">Header</span><span class="op" id="6842649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6842655">&#34;Server&#34;</span><span class="op" id="6842663">:</span>&nbsp;<span class="op" id="6842665">[</span><span class="op" id="6842666">]</span><span class="builtintype" id="6842667">string</span><span class="op" id="6842673">{</span><span class="string" id="6842674">&#34;foo&#34;</span><span class="op" id="6842679">}</span><span class="op" id="6842680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842685">}</span><span class="op" id="6842686">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842691">Close</span><span class="op" id="6842696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6842706">false</span><span class="op" id="6842711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842716">ContentLength</span><span class="op" id="6842729">:</span>&nbsp;<span class="num" id="6842731">0</span><span class="op" id="6842732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842737">RequestURI</span><span class="op" id="6842747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6842752">&#34;*&#34;</span><span class="op" id="6842755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842759">}</span><span class="op" id="6842760">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842765">noBody</span><span class="op" id="6842771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842775">noTrailer</span><span class="op" id="6842784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842788">noError</span><span class="op" id="6842795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842798">}</span><span class="op" id="6842799">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6842803">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6842852">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="6842920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842924">&amp;</span><span class="ident" id="6842925">Request</span><span class="op" id="6842932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842937">Method</span><span class="op" id="6842943">:</span>&nbsp;<span class="string" id="6842945">&#34;GET&#34;</span><span class="op" id="6842950">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842955">URL</span><span class="op" id="6842958">:</span>&nbsp;<span class="op" id="6842960">&amp;</span><span class="ident" id="6842961">url</span><span class="op" id="6842964">.</span><span class="ident" id="6842965">URL</span><span class="op" id="6842968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842974">Path</span><span class="op" id="6842978">:</span>&nbsp;<span class="string" id="6842980">&#34;/&#34;</span><span class="op" id="6842983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6842988">}</span><span class="op" id="6842989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6842994">Header</span><span class="op" id="6843000">:</span>&nbsp;<span class="ident" id="6843002">Header</span><span class="op" id="6843008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6843014">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6843056">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6843096">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6843114">&#34;Connection&#34;</span><span class="op" id="6843126">:</span>&nbsp;<span class="op" id="6843128">[</span><span class="op" id="6843129">]</span><span class="builtintype" id="6843130">string</span><span class="op" id="6843136">{</span><span class="string" id="6843137">&#34;close&#34;</span><span class="op" id="6843144">}</span><span class="op" id="6843145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843150">}</span><span class="op" id="6843151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843156">Host</span><span class="op" id="6843160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6843168">&#34;issue8261.com&#34;</span><span class="op" id="6843183">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843188">Proto</span><span class="op" id="6843193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6843200">&#34;HTTP/1.1&#34;</span><span class="op" id="6843210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843215">ProtoMajor</span><span class="op" id="6843225">:</span>&nbsp;<span class="num" id="6843227">1</span><span class="op" id="6843228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843233">ProtoMinor</span><span class="op" id="6843243">:</span>&nbsp;<span class="num" id="6843245">1</span><span class="op" id="6843246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843251">Close</span><span class="op" id="6843256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6843263">true</span><span class="op" id="6843267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843272">RequestURI</span><span class="op" id="6843282">:</span>&nbsp;<span class="string" id="6843284">&#34;/&#34;</span><span class="op" id="6843287">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843291">}</span><span class="op" id="6843292">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843297">noBody</span><span class="op" id="6843303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843307">noTrailer</span><span class="op" id="6843316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843320">noError</span><span class="op" id="6843327">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843330">}</span><span class="op" id="6843331">,</span><br>
<span class="lineno"></span><span class="op" id="6843333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6843336">func</span>&nbsp;<span class="ident" id="6843341">TestReadRequest</span><span class="op" id="6843356">(</span><span class="ident" id="6843357">t</span>&nbsp;<span class="op" id="6843359">*</span><span class="ident" id="6843360">testing</span><span class="op" id="6843367">.</span><span class="ident" id="6843368">T</span><span class="op" id="6843369">)</span>&nbsp;<span class="op" id="6843371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843374">for</span>&nbsp;<span class="ident" id="6843378">i</span>&nbsp;<span class="op" id="6843380">:=</span>&nbsp;<span class="keyword" id="6843383">range</span>&nbsp;<span class="ident" id="6843389">reqTests</span>&nbsp;<span class="op" id="6843398">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843402">tt</span>&nbsp;<span class="op" id="6843405">:=</span>&nbsp;<span class="op" id="6843408">&amp;</span><span class="ident" id="6843409">reqTests</span><span class="op" id="6843417">[</span><span class="ident" id="6843418">i</span><span class="op" id="6843419">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843423">req</span><span class="op" id="6843426">,</span>&nbsp;<span class="ident" id="6843428">err</span>&nbsp;<span class="op" id="6843432">:=</span>&nbsp;<span class="ident" id="6843435">ReadRequest</span><span class="op" id="6843446">(</span><span class="ident" id="6843447">bufio</span><span class="op" id="6843452">.</span><span class="ident" id="6843453">NewReader</span><span class="op" id="6843462">(</span><span class="ident" id="6843463">strings</span><span class="op" id="6843470">.</span><span class="ident" id="6843471">NewReader</span><span class="op" id="6843480">(</span><span class="ident" id="6843481">tt</span><span class="op" id="6843483">.</span><span class="ident" id="6843484">Raw</span><span class="op" id="6843487">)</span><span class="op" id="6843488">)</span><span class="op" id="6843489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843493">if</span>&nbsp;<span class="ident" id="6843496">err</span>&nbsp;<span class="op" id="6843500">!=</span>&nbsp;<span class="ident" id="6843503">nil</span>&nbsp;<span class="op" id="6843507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843512">if</span>&nbsp;<span class="ident" id="6843515">err</span><span class="op" id="6843518">.</span><span class="ident" id="6843519">Error</span><span class="op" id="6843524">(</span><span class="op" id="6843525">)</span>&nbsp;<span class="op" id="6843527">!=</span>&nbsp;<span class="ident" id="6843530">tt</span><span class="op" id="6843532">.</span><span class="ident" id="6843533">Error</span>&nbsp;<span class="op" id="6843539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843545">t</span><span class="op" id="6843546">.</span><span class="ident" id="6843547">Errorf</span><span class="op" id="6843553">(</span><span class="string" id="6843554">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="6843584">,</span>&nbsp;<span class="ident" id="6843586">i</span><span class="op" id="6843587">,</span>&nbsp;<span class="ident" id="6843589">err</span><span class="op" id="6843592">.</span><span class="ident" id="6843593">Error</span><span class="op" id="6843598">(</span><span class="op" id="6843599">)</span><span class="op" id="6843600">,</span>&nbsp;<span class="ident" id="6843602">tt</span><span class="op" id="6843604">.</span><span class="ident" id="6843605">Error</span><span class="op" id="6843610">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843620">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843635">rbody</span>&nbsp;<span class="op" id="6843641">:=</span>&nbsp;<span class="ident" id="6843644">req</span><span class="op" id="6843647">.</span><span class="ident" id="6843648">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843655">req</span><span class="op" id="6843658">.</span><span class="ident" id="6843659">Body</span>&nbsp;<span class="op" id="6843664">=</span>&nbsp;<span class="ident" id="6843666">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843672">testName</span>&nbsp;<span class="op" id="6843681">:=</span>&nbsp;<span class="ident" id="6843684">fmt</span><span class="op" id="6843687">.</span><span class="ident" id="6843688">Sprintf</span><span class="op" id="6843695">(</span><span class="string" id="6843696">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="6843710">,</span>&nbsp;<span class="ident" id="6843712">i</span><span class="op" id="6843713">,</span>&nbsp;<span class="ident" id="6843715">tt</span><span class="op" id="6843717">.</span><span class="ident" id="6843718">Raw</span><span class="op" id="6843721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843725">diff</span><span class="op" id="6843729">(</span><span class="ident" id="6843730">t</span><span class="op" id="6843731">,</span>&nbsp;<span class="ident" id="6843733">testName</span><span class="op" id="6843741">,</span>&nbsp;<span class="ident" id="6843743">req</span><span class="op" id="6843746">,</span>&nbsp;<span class="ident" id="6843748">tt</span><span class="op" id="6843750">.</span><span class="ident" id="6843751">Req</span><span class="op" id="6843754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843758">var</span>&nbsp;<span class="ident" id="6843762">bout</span>&nbsp;<span class="ident" id="6843767">bytes</span><span class="op" id="6843772">.</span><span class="ident" id="6843773">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843782">if</span>&nbsp;<span class="ident" id="6843785">rbody</span>&nbsp;<span class="op" id="6843791">!=</span>&nbsp;<span class="ident" id="6843794">nil</span>&nbsp;<span class="op" id="6843798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843803">_</span><span class="op" id="6843804">,</span>&nbsp;<span class="ident" id="6843806">err</span>&nbsp;<span class="op" id="6843810">:=</span>&nbsp;<span class="ident" id="6843813">io</span><span class="op" id="6843815">.</span><span class="ident" id="6843816">Copy</span><span class="op" id="6843820">(</span><span class="op" id="6843821">&amp;</span><span class="ident" id="6843822">bout</span><span class="op" id="6843826">,</span>&nbsp;<span class="ident" id="6843828">rbody</span><span class="op" id="6843833">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843838">if</span>&nbsp;<span class="ident" id="6843841">err</span>&nbsp;<span class="op" id="6843845">!=</span>&nbsp;<span class="ident" id="6843848">nil</span>&nbsp;<span class="op" id="6843852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843858">t</span><span class="op" id="6843859">.</span><span class="ident" id="6843860">Fatalf</span><span class="op" id="6843866">(</span><span class="string" id="6843867">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="6843889">,</span>&nbsp;<span class="ident" id="6843891">testName</span><span class="op" id="6843899">,</span>&nbsp;<span class="ident" id="6843901">err</span><span class="op" id="6843904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843914">rbody</span><span class="op" id="6843919">.</span><span class="ident" id="6843920">Close</span><span class="op" id="6843925">(</span><span class="op" id="6843926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6843930">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843934">body</span>&nbsp;<span class="op" id="6843939">:=</span>&nbsp;<span class="ident" id="6843942">bout</span><span class="op" id="6843946">.</span><span class="ident" id="6843947">String</span><span class="op" id="6843953">(</span><span class="op" id="6843954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6843958">if</span>&nbsp;<span class="ident" id="6843961">body</span>&nbsp;<span class="op" id="6843966">!=</span>&nbsp;<span class="ident" id="6843969">tt</span><span class="op" id="6843971">.</span><span class="ident" id="6843972">Body</span>&nbsp;<span class="op" id="6843977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6843982">t</span><span class="op" id="6843983">.</span><span class="ident" id="6843984">Errorf</span><span class="op" id="6843990">(</span><span class="string" id="6843991">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6844014">,</span>&nbsp;<span class="ident" id="6844016">testName</span><span class="op" id="6844024">,</span>&nbsp;<span class="ident" id="6844026">body</span><span class="op" id="6844030">,</span>&nbsp;<span class="ident" id="6844032">tt</span><span class="op" id="6844034">.</span><span class="ident" id="6844035">Body</span><span class="op" id="6844039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6844043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6844047">if</span>&nbsp;<span class="op" id="6844050">!</span><span class="ident" id="6844051">reflect</span><span class="op" id="6844058">.</span><span class="ident" id="6844059">DeepEqual</span><span class="op" id="6844068">(</span><span class="ident" id="6844069">tt</span><span class="op" id="6844071">.</span><span class="ident" id="6844072">Trailer</span><span class="op" id="6844079">,</span>&nbsp;<span class="ident" id="6844081">req</span><span class="op" id="6844084">.</span><span class="ident" id="6844085">Trailer</span><span class="op" id="6844092">)</span>&nbsp;<span class="op" id="6844094">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844099">t</span><span class="op" id="6844100">.</span><span class="ident" id="6844101">Errorf</span><span class="op" id="6844107">(</span><span class="string" id="6844108">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6844150">,</span>&nbsp;<span class="ident" id="6844152">testName</span><span class="op" id="6844160">,</span>&nbsp;<span class="ident" id="6844162">req</span><span class="op" id="6844165">.</span><span class="ident" id="6844166">Trailer</span><span class="op" id="6844173">,</span>&nbsp;<span class="ident" id="6844175">tt</span><span class="op" id="6844177">.</span><span class="ident" id="6844178">Trailer</span><span class="op" id="6844185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6844189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6844192">}</span><br>
<span class="lineno"></span><span class="op" id="6844194">}</span>
</div>
</body>
</html>
