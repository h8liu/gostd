<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html" class="current">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1682027">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1682083">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1682137">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1682188">//&nbsp;Software&nbsp;IEEE754&nbsp;64-bit&nbsp;floating&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="1682231">//&nbsp;Only&nbsp;referred&nbsp;to&nbsp;(and&nbsp;thus&nbsp;linked&nbsp;in)&nbsp;by&nbsp;arm&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="1682284">//&nbsp;and&nbsp;by&nbsp;tests&nbsp;in&nbsp;this&nbsp;directory.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1682320">package</span>&nbsp;<span class="ident" id="1682328">runtime</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1682337">const</span>&nbsp;<span class="op" id="1682343">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682346">mantbits64</span>&nbsp;<span class="builtintype" id="1682357">uint</span>&nbsp;<span class="op" id="1682362">=</span>&nbsp;<span class="num" id="1682364">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682368">expbits64</span>&nbsp;&nbsp;<span class="builtintype" id="1682379">uint</span>&nbsp;<span class="op" id="1682384">=</span>&nbsp;<span class="num" id="1682386">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682390">bias64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682406">=</span>&nbsp;<span class="op" id="1682408">-</span><span class="num" id="1682409">1</span><span class="op" id="1682410">&lt;&lt;</span><span class="op" id="1682412">(</span><span class="ident" id="1682413">expbits64</span><span class="op" id="1682422">-</span><span class="num" id="1682423">1</span><span class="op" id="1682424">)</span>&nbsp;<span class="op" id="1682426">+</span>&nbsp;<span class="num" id="1682428">1</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682432">nan64</span>&nbsp;<span class="ident" id="1682438">uint64</span>&nbsp;<span class="op" id="1682445">=</span>&nbsp;<span class="op" id="1682447">(</span><span class="num" id="1682448">1</span><span class="op" id="1682449">&lt;&lt;</span><span class="ident" id="1682451">expbits64</span><span class="op" id="1682460">-</span><span class="num" id="1682461">1</span><span class="op" id="1682462">)</span><span class="op" id="1682463">&lt;&lt;</span><span class="ident" id="1682465">mantbits64</span>&nbsp;<span class="op" id="1682476">+</span>&nbsp;<span class="num" id="1682478">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682481">inf64</span>&nbsp;<span class="ident" id="1682487">uint64</span>&nbsp;<span class="op" id="1682494">=</span>&nbsp;<span class="op" id="1682496">(</span><span class="num" id="1682497">1</span><span class="op" id="1682498">&lt;&lt;</span><span class="ident" id="1682500">expbits64</span>&nbsp;<span class="op" id="1682510">-</span>&nbsp;<span class="num" id="1682512">1</span><span class="op" id="1682513">)</span>&nbsp;<span class="op" id="1682515">&lt;&lt;</span>&nbsp;<span class="ident" id="1682518">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682530">neg64</span>&nbsp;<span class="ident" id="1682536">uint64</span>&nbsp;<span class="op" id="1682543">=</span>&nbsp;<span class="num" id="1682545">1</span>&nbsp;<span class="op" id="1682547">&lt;&lt;</span>&nbsp;<span class="op" id="1682550">(</span><span class="ident" id="1682551">expbits64</span>&nbsp;<span class="op" id="1682561">+</span>&nbsp;<span class="ident" id="1682563">mantbits64</span><span class="op" id="1682573">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682577">mantbits32</span>&nbsp;<span class="builtintype" id="1682588">uint</span>&nbsp;<span class="op" id="1682593">=</span>&nbsp;<span class="num" id="1682595">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682599">expbits32</span>&nbsp;&nbsp;<span class="builtintype" id="1682610">uint</span>&nbsp;<span class="op" id="1682615">=</span>&nbsp;<span class="num" id="1682617">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682620">bias32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682636">=</span>&nbsp;<span class="op" id="1682638">-</span><span class="num" id="1682639">1</span><span class="op" id="1682640">&lt;&lt;</span><span class="op" id="1682642">(</span><span class="ident" id="1682643">expbits32</span><span class="op" id="1682652">-</span><span class="num" id="1682653">1</span><span class="op" id="1682654">)</span>&nbsp;<span class="op" id="1682656">+</span>&nbsp;<span class="num" id="1682658">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682662">nan32</span>&nbsp;<span class="builtintype" id="1682668">uint32</span>&nbsp;<span class="op" id="1682675">=</span>&nbsp;<span class="op" id="1682677">(</span><span class="num" id="1682678">1</span><span class="op" id="1682679">&lt;&lt;</span><span class="ident" id="1682681">expbits32</span><span class="op" id="1682690">-</span><span class="num" id="1682691">1</span><span class="op" id="1682692">)</span><span class="op" id="1682693">&lt;&lt;</span><span class="ident" id="1682695">mantbits32</span>&nbsp;<span class="op" id="1682706">+</span>&nbsp;<span class="num" id="1682708">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682711">inf32</span>&nbsp;<span class="builtintype" id="1682717">uint32</span>&nbsp;<span class="op" id="1682724">=</span>&nbsp;<span class="op" id="1682726">(</span><span class="num" id="1682727">1</span><span class="op" id="1682728">&lt;&lt;</span><span class="ident" id="1682730">expbits32</span>&nbsp;<span class="op" id="1682740">-</span>&nbsp;<span class="num" id="1682742">1</span><span class="op" id="1682743">)</span>&nbsp;<span class="op" id="1682745">&lt;&lt;</span>&nbsp;<span class="ident" id="1682748">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682760">neg32</span>&nbsp;<span class="builtintype" id="1682766">uint32</span>&nbsp;<span class="op" id="1682773">=</span>&nbsp;<span class="num" id="1682775">1</span>&nbsp;<span class="op" id="1682777">&lt;&lt;</span>&nbsp;<span class="op" id="1682780">(</span><span class="ident" id="1682781">expbits32</span>&nbsp;<span class="op" id="1682791">+</span>&nbsp;<span class="ident" id="1682793">mantbits32</span><span class="op" id="1682803">)</span><br>
<span class="lineno"></span><span class="op" id="1682805">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1682808">func</span>&nbsp;<span class="ident" id="1682813">funpack64</span><span class="op" id="1682822">(</span><span class="ident" id="1682823">f</span>&nbsp;<span class="ident" id="1682825">uint64</span><span class="op" id="1682831">)</span>&nbsp;<span class="op" id="1682833">(</span><span class="ident" id="1682834">sign</span><span class="op" id="1682838">,</span>&nbsp;<span class="ident" id="1682840">mant</span>&nbsp;<span class="ident" id="1682845">uint64</span><span class="op" id="1682851">,</span>&nbsp;<span class="ident" id="1682853">exp</span>&nbsp;<span class="builtintype" id="1682857">int</span><span class="op" id="1682860">,</span>&nbsp;<span class="ident" id="1682862">inf</span><span class="op" id="1682865">,</span>&nbsp;<span class="ident" id="1682867">nan</span>&nbsp;<span class="builtintype" id="1682871">bool</span><span class="op" id="1682875">)</span>&nbsp;<span class="op" id="1682877">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682880">sign</span>&nbsp;<span class="op" id="1682885">=</span>&nbsp;<span class="ident" id="1682887">f</span>&nbsp;<span class="op" id="1682889">&amp;</span>&nbsp;<span class="op" id="1682891">(</span><span class="num" id="1682892">1</span>&nbsp;<span class="op" id="1682894">&lt;&lt;</span>&nbsp;<span class="op" id="1682897">(</span><span class="ident" id="1682898">mantbits64</span>&nbsp;<span class="op" id="1682909">+</span>&nbsp;<span class="ident" id="1682911">expbits64</span><span class="op" id="1682920">)</span><span class="op" id="1682921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682924">mant</span>&nbsp;<span class="op" id="1682929">=</span>&nbsp;<span class="ident" id="1682931">f</span>&nbsp;<span class="op" id="1682933">&amp;</span>&nbsp;<span class="op" id="1682935">(</span><span class="num" id="1682936">1</span><span class="op" id="1682937">&lt;&lt;</span><span class="ident" id="1682939">mantbits64</span>&nbsp;<span class="op" id="1682950">-</span>&nbsp;<span class="num" id="1682952">1</span><span class="op" id="1682953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682956">exp</span>&nbsp;<span class="op" id="1682960">=</span>&nbsp;<span class="builtintype" id="1682962">int</span><span class="op" id="1682965">(</span><span class="ident" id="1682966">f</span><span class="op" id="1682967">&gt;&gt;</span><span class="ident" id="1682969">mantbits64</span><span class="op" id="1682979">)</span>&nbsp;<span class="op" id="1682981">&amp;</span>&nbsp;<span class="op" id="1682983">(</span><span class="num" id="1682984">1</span><span class="op" id="1682985">&lt;&lt;</span><span class="ident" id="1682987">expbits64</span>&nbsp;<span class="op" id="1682997">-</span>&nbsp;<span class="num" id="1682999">1</span><span class="op" id="1683000">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683004">switch</span>&nbsp;<span class="ident" id="1683011">exp</span>&nbsp;<span class="op" id="1683015">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683018">case</span>&nbsp;<span class="num" id="1683023">1</span><span class="op" id="1683024">&lt;&lt;</span><span class="ident" id="1683026">expbits64</span>&nbsp;<span class="op" id="1683036">-</span>&nbsp;<span class="num" id="1683038">1</span><span class="op" id="1683039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683043">if</span>&nbsp;<span class="ident" id="1683046">mant</span>&nbsp;<span class="op" id="1683051">!=</span>&nbsp;<span class="num" id="1683054">0</span>&nbsp;<span class="op" id="1683056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683061">nan</span>&nbsp;<span class="op" id="1683065">=</span>&nbsp;<span class="builtintype" id="1683067">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683075">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683084">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683088">inf</span>&nbsp;<span class="op" id="1683092">=</span>&nbsp;<span class="builtintype" id="1683094">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683101">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683110">case</span>&nbsp;<span class="num" id="1683115">0</span><span class="op" id="1683116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683120">//&nbsp;denormalized</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683138">if</span>&nbsp;<span class="ident" id="1683141">mant</span>&nbsp;<span class="op" id="1683146">!=</span>&nbsp;<span class="num" id="1683149">0</span>&nbsp;<span class="op" id="1683151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683156">exp</span>&nbsp;<span class="op" id="1683160">+=</span>&nbsp;<span class="ident" id="1683163">bias64</span>&nbsp;<span class="op" id="1683170">+</span>&nbsp;<span class="num" id="1683172">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683177">for</span>&nbsp;<span class="ident" id="1683181">mant</span>&nbsp;<span class="op" id="1683186">&lt;</span>&nbsp;<span class="num" id="1683188">1</span><span class="op" id="1683189">&lt;&lt;</span><span class="ident" id="1683191">mantbits64</span>&nbsp;<span class="op" id="1683202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683208">mant</span>&nbsp;<span class="op" id="1683213">&lt;&lt;=</span>&nbsp;<span class="num" id="1683217">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683223">exp</span><span class="op" id="1683226">--</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683240">default</span><span class="op" id="1683247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683251">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683277">mant</span>&nbsp;<span class="op" id="1683282">|=</span>&nbsp;<span class="num" id="1683285">1</span>&nbsp;<span class="op" id="1683287">&lt;&lt;</span>&nbsp;<span class="ident" id="1683290">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683303">exp</span>&nbsp;<span class="op" id="1683307">+=</span>&nbsp;<span class="ident" id="1683310">bias64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683321">return</span><br>
<span class="lineno"></span><span class="op" id="1683328">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1683331">func</span>&nbsp;<span class="ident" id="1683336">funpack32</span><span class="op" id="1683345">(</span><span class="ident" id="1683346">f</span>&nbsp;<span class="builtintype" id="1683348">uint32</span><span class="op" id="1683354">)</span>&nbsp;<span class="op" id="1683356">(</span><span class="ident" id="1683357">sign</span><span class="op" id="1683361">,</span>&nbsp;<span class="ident" id="1683363">mant</span>&nbsp;<span class="builtintype" id="1683368">uint32</span><span class="op" id="1683374">,</span>&nbsp;<span class="ident" id="1683376">exp</span>&nbsp;<span class="builtintype" id="1683380">int</span><span class="op" id="1683383">,</span>&nbsp;<span class="ident" id="1683385">inf</span><span class="op" id="1683388">,</span>&nbsp;<span class="ident" id="1683390">nan</span>&nbsp;<span class="builtintype" id="1683394">bool</span><span class="op" id="1683398">)</span>&nbsp;<span class="op" id="1683400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683403">sign</span>&nbsp;<span class="op" id="1683408">=</span>&nbsp;<span class="ident" id="1683410">f</span>&nbsp;<span class="op" id="1683412">&amp;</span>&nbsp;<span class="op" id="1683414">(</span><span class="num" id="1683415">1</span>&nbsp;<span class="op" id="1683417">&lt;&lt;</span>&nbsp;<span class="op" id="1683420">(</span><span class="ident" id="1683421">mantbits32</span>&nbsp;<span class="op" id="1683432">+</span>&nbsp;<span class="ident" id="1683434">expbits32</span><span class="op" id="1683443">)</span><span class="op" id="1683444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683447">mant</span>&nbsp;<span class="op" id="1683452">=</span>&nbsp;<span class="ident" id="1683454">f</span>&nbsp;<span class="op" id="1683456">&amp;</span>&nbsp;<span class="op" id="1683458">(</span><span class="num" id="1683459">1</span><span class="op" id="1683460">&lt;&lt;</span><span class="ident" id="1683462">mantbits32</span>&nbsp;<span class="op" id="1683473">-</span>&nbsp;<span class="num" id="1683475">1</span><span class="op" id="1683476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683479">exp</span>&nbsp;<span class="op" id="1683483">=</span>&nbsp;<span class="builtintype" id="1683485">int</span><span class="op" id="1683488">(</span><span class="ident" id="1683489">f</span><span class="op" id="1683490">&gt;&gt;</span><span class="ident" id="1683492">mantbits32</span><span class="op" id="1683502">)</span>&nbsp;<span class="op" id="1683504">&amp;</span>&nbsp;<span class="op" id="1683506">(</span><span class="num" id="1683507">1</span><span class="op" id="1683508">&lt;&lt;</span><span class="ident" id="1683510">expbits32</span>&nbsp;<span class="op" id="1683520">-</span>&nbsp;<span class="num" id="1683522">1</span><span class="op" id="1683523">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683527">switch</span>&nbsp;<span class="ident" id="1683534">exp</span>&nbsp;<span class="op" id="1683538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683541">case</span>&nbsp;<span class="num" id="1683546">1</span><span class="op" id="1683547">&lt;&lt;</span><span class="ident" id="1683549">expbits32</span>&nbsp;<span class="op" id="1683559">-</span>&nbsp;<span class="num" id="1683561">1</span><span class="op" id="1683562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683566">if</span>&nbsp;<span class="ident" id="1683569">mant</span>&nbsp;<span class="op" id="1683574">!=</span>&nbsp;<span class="num" id="1683577">0</span>&nbsp;<span class="op" id="1683579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683584">nan</span>&nbsp;<span class="op" id="1683588">=</span>&nbsp;<span class="builtintype" id="1683590">true</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683598">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683611">inf</span>&nbsp;<span class="op" id="1683615">=</span>&nbsp;<span class="builtintype" id="1683617">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683624">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683633">case</span>&nbsp;<span class="num" id="1683638">0</span><span class="op" id="1683639">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683643">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683661">if</span>&nbsp;<span class="ident" id="1683664">mant</span>&nbsp;<span class="op" id="1683669">!=</span>&nbsp;<span class="num" id="1683672">0</span>&nbsp;<span class="op" id="1683674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683679">exp</span>&nbsp;<span class="op" id="1683683">+=</span>&nbsp;<span class="ident" id="1683686">bias32</span>&nbsp;<span class="op" id="1683693">+</span>&nbsp;<span class="num" id="1683695">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683700">for</span>&nbsp;<span class="ident" id="1683704">mant</span>&nbsp;<span class="op" id="1683709">&lt;</span>&nbsp;<span class="num" id="1683711">1</span><span class="op" id="1683712">&lt;&lt;</span><span class="ident" id="1683714">mantbits32</span>&nbsp;<span class="op" id="1683725">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683731">mant</span>&nbsp;<span class="op" id="1683736">&lt;&lt;=</span>&nbsp;<span class="num" id="1683740">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683746">exp</span><span class="op" id="1683749">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683763">default</span><span class="op" id="1683770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683774">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683800">mant</span>&nbsp;<span class="op" id="1683805">|=</span>&nbsp;<span class="num" id="1683808">1</span>&nbsp;<span class="op" id="1683810">&lt;&lt;</span>&nbsp;<span class="ident" id="1683813">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683826">exp</span>&nbsp;<span class="op" id="1683830">+=</span>&nbsp;<span class="ident" id="1683833">bias32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683841">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683844">return</span><br>
<span class="lineno"></span><span class="op" id="1683851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1683854">func</span>&nbsp;<span class="ident" id="1683859">fpack64</span><span class="op" id="1683866">(</span><span class="ident" id="1683867">sign</span><span class="op" id="1683871">,</span>&nbsp;<span class="ident" id="1683873">mant</span>&nbsp;<span class="ident" id="1683878">uint64</span><span class="op" id="1683884">,</span>&nbsp;<span class="ident" id="1683886">exp</span>&nbsp;<span class="builtintype" id="1683890">int</span><span class="op" id="1683893">,</span>&nbsp;<span class="ident" id="1683895">trunc</span>&nbsp;<span class="ident" id="1683901">uint64</span><span class="op" id="1683907">)</span>&nbsp;<span class="ident" id="1683909">uint64</span>&nbsp;<span class="op" id="1683916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683919">mant0</span><span class="op" id="1683924">,</span>&nbsp;<span class="ident" id="1683926">exp0</span><span class="op" id="1683930">,</span>&nbsp;<span class="ident" id="1683932">trunc0</span>&nbsp;<span class="op" id="1683939">:=</span>&nbsp;<span class="ident" id="1683942">mant</span><span class="op" id="1683946">,</span>&nbsp;<span class="ident" id="1683948">exp</span><span class="op" id="1683951">,</span>&nbsp;<span class="ident" id="1683953">trunc</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683960">if</span>&nbsp;<span class="ident" id="1683963">mant</span>&nbsp;<span class="op" id="1683968">==</span>&nbsp;<span class="num" id="1683971">0</span>&nbsp;<span class="op" id="1683973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683977">return</span>&nbsp;<span class="ident" id="1683984">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683993">for</span>&nbsp;<span class="ident" id="1683997">mant</span>&nbsp;<span class="op" id="1684002">&lt;</span>&nbsp;<span class="num" id="1684004">1</span><span class="op" id="1684005">&lt;&lt;</span><span class="ident" id="1684007">mantbits64</span>&nbsp;<span class="op" id="1684018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684022">mant</span>&nbsp;<span class="op" id="1684027">&lt;&lt;=</span>&nbsp;<span class="num" id="1684031">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684035">exp</span><span class="op" id="1684038">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684045">for</span>&nbsp;<span class="ident" id="1684049">mant</span>&nbsp;<span class="op" id="1684054">&gt;=</span>&nbsp;<span class="num" id="1684057">4</span><span class="op" id="1684058">&lt;&lt;</span><span class="ident" id="1684060">mantbits64</span>&nbsp;<span class="op" id="1684071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684075">trunc</span>&nbsp;<span class="op" id="1684081">|=</span>&nbsp;<span class="ident" id="1684084">mant</span>&nbsp;<span class="op" id="1684089">&amp;</span>&nbsp;<span class="num" id="1684091">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684095">mant</span>&nbsp;<span class="op" id="1684100">&gt;&gt;=</span>&nbsp;<span class="num" id="1684104">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684108">exp</span><span class="op" id="1684111">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684118">if</span>&nbsp;<span class="ident" id="1684121">mant</span>&nbsp;<span class="op" id="1684126">&gt;=</span>&nbsp;<span class="num" id="1684129">2</span><span class="op" id="1684130">&lt;&lt;</span><span class="ident" id="1684132">mantbits64</span>&nbsp;<span class="op" id="1684143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684147">if</span>&nbsp;<span class="ident" id="1684150">mant</span><span class="op" id="1684154">&amp;</span><span class="num" id="1684155">1</span>&nbsp;<span class="op" id="1684157">!=</span>&nbsp;<span class="num" id="1684160">0</span>&nbsp;<span class="op" id="1684162">&amp;&amp;</span>&nbsp;<span class="op" id="1684165">(</span><span class="ident" id="1684166">trunc</span>&nbsp;<span class="op" id="1684172">!=</span>&nbsp;<span class="num" id="1684175">0</span>&nbsp;<span class="op" id="1684177">||</span>&nbsp;<span class="ident" id="1684180">mant</span><span class="op" id="1684184">&amp;</span><span class="num" id="1684185">2</span>&nbsp;<span class="op" id="1684187">!=</span>&nbsp;<span class="num" id="1684190">0</span><span class="op" id="1684191">)</span>&nbsp;<span class="op" id="1684193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684198">mant</span><span class="op" id="1684202">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684208">if</span>&nbsp;<span class="ident" id="1684211">mant</span>&nbsp;<span class="op" id="1684216">&gt;=</span>&nbsp;<span class="num" id="1684219">4</span><span class="op" id="1684220">&lt;&lt;</span><span class="ident" id="1684222">mantbits64</span>&nbsp;<span class="op" id="1684233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684239">mant</span>&nbsp;<span class="op" id="1684244">&gt;&gt;=</span>&nbsp;<span class="num" id="1684248">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684254">exp</span><span class="op" id="1684257">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684267">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684271">mant</span>&nbsp;<span class="op" id="1684276">&gt;&gt;=</span>&nbsp;<span class="num" id="1684280">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684284">exp</span><span class="op" id="1684287">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684294">if</span>&nbsp;<span class="ident" id="1684297">exp</span>&nbsp;<span class="op" id="1684301">&gt;=</span>&nbsp;<span class="num" id="1684304">1</span><span class="op" id="1684305">&lt;&lt;</span><span class="ident" id="1684307">expbits64</span><span class="op" id="1684316">-</span><span class="num" id="1684317">1</span><span class="op" id="1684318">+</span><span class="ident" id="1684319">bias64</span>&nbsp;<span class="op" id="1684326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684330">return</span>&nbsp;<span class="ident" id="1684337">sign</span>&nbsp;<span class="op" id="1684342">^</span>&nbsp;<span class="ident" id="1684344">inf64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684354">if</span>&nbsp;<span class="ident" id="1684357">exp</span>&nbsp;<span class="op" id="1684361">&lt;</span>&nbsp;<span class="ident" id="1684363">bias64</span><span class="op" id="1684369">+</span><span class="num" id="1684370">1</span>&nbsp;<span class="op" id="1684372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684376">if</span>&nbsp;<span class="ident" id="1684379">exp</span>&nbsp;<span class="op" id="1684383">&lt;</span>&nbsp;<span class="ident" id="1684385">bias64</span><span class="op" id="1684391">-</span><span class="builtintype" id="1684392">int</span><span class="op" id="1684395">(</span><span class="ident" id="1684396">mantbits64</span><span class="op" id="1684406">)</span>&nbsp;<span class="op" id="1684408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684413">return</span>&nbsp;<span class="ident" id="1684420">sign</span>&nbsp;<span class="op" id="1684425">|</span>&nbsp;<span class="num" id="1684427">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684431">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1684435">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684466">mant</span><span class="op" id="1684470">,</span>&nbsp;<span class="ident" id="1684472">exp</span><span class="op" id="1684475">,</span>&nbsp;<span class="ident" id="1684477">trunc</span>&nbsp;<span class="op" id="1684483">=</span>&nbsp;<span class="ident" id="1684485">mant0</span><span class="op" id="1684490">,</span>&nbsp;<span class="ident" id="1684492">exp0</span><span class="op" id="1684496">,</span>&nbsp;<span class="ident" id="1684498">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684507">for</span>&nbsp;<span class="ident" id="1684511">exp</span>&nbsp;<span class="op" id="1684515">&lt;</span>&nbsp;<span class="ident" id="1684517">bias64</span>&nbsp;<span class="op" id="1684524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684529">trunc</span>&nbsp;<span class="op" id="1684535">|=</span>&nbsp;<span class="ident" id="1684538">mant</span>&nbsp;<span class="op" id="1684543">&amp;</span>&nbsp;<span class="num" id="1684545">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684550">mant</span>&nbsp;<span class="op" id="1684555">&gt;&gt;=</span>&nbsp;<span class="num" id="1684559">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684564">exp</span><span class="op" id="1684567">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684576">if</span>&nbsp;<span class="ident" id="1684579">mant</span><span class="op" id="1684583">&amp;</span><span class="num" id="1684584">1</span>&nbsp;<span class="op" id="1684586">!=</span>&nbsp;<span class="num" id="1684589">0</span>&nbsp;<span class="op" id="1684591">&amp;&amp;</span>&nbsp;<span class="op" id="1684594">(</span><span class="ident" id="1684595">trunc</span>&nbsp;<span class="op" id="1684601">!=</span>&nbsp;<span class="num" id="1684604">0</span>&nbsp;<span class="op" id="1684606">||</span>&nbsp;<span class="ident" id="1684609">mant</span><span class="op" id="1684613">&amp;</span><span class="num" id="1684614">2</span>&nbsp;<span class="op" id="1684616">!=</span>&nbsp;<span class="num" id="1684619">0</span><span class="op" id="1684620">)</span>&nbsp;<span class="op" id="1684622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684627">mant</span><span class="op" id="1684631">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684636">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684640">mant</span>&nbsp;<span class="op" id="1684645">&gt;&gt;=</span>&nbsp;<span class="num" id="1684649">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684653">exp</span><span class="op" id="1684656">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684661">if</span>&nbsp;<span class="ident" id="1684664">mant</span>&nbsp;<span class="op" id="1684669">&lt;</span>&nbsp;<span class="num" id="1684671">1</span><span class="op" id="1684672">&lt;&lt;</span><span class="ident" id="1684674">mantbits64</span>&nbsp;<span class="op" id="1684685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684690">return</span>&nbsp;<span class="ident" id="1684697">sign</span>&nbsp;<span class="op" id="1684702">|</span>&nbsp;<span class="ident" id="1684704">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684711">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684717">return</span>&nbsp;<span class="ident" id="1684724">sign</span>&nbsp;<span class="op" id="1684729">|</span>&nbsp;<span class="ident" id="1684731">uint64</span><span class="op" id="1684737">(</span><span class="ident" id="1684738">exp</span><span class="op" id="1684741">-</span><span class="ident" id="1684742">bias64</span><span class="op" id="1684748">)</span><span class="op" id="1684749">&lt;&lt;</span><span class="ident" id="1684751">mantbits64</span>&nbsp;<span class="op" id="1684762">|</span>&nbsp;<span class="ident" id="1684764">mant</span><span class="op" id="1684768">&amp;</span><span class="op" id="1684769">(</span><span class="num" id="1684770">1</span><span class="op" id="1684771">&lt;&lt;</span><span class="ident" id="1684773">mantbits64</span><span class="op" id="1684783">-</span><span class="num" id="1684784">1</span><span class="op" id="1684785">)</span><br>
<span class="lineno"></span><span class="op" id="1684787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1684790">func</span>&nbsp;<span class="ident" id="1684795">fpack32</span><span class="op" id="1684802">(</span><span class="ident" id="1684803">sign</span><span class="op" id="1684807">,</span>&nbsp;<span class="ident" id="1684809">mant</span>&nbsp;<span class="builtintype" id="1684814">uint32</span><span class="op" id="1684820">,</span>&nbsp;<span class="ident" id="1684822">exp</span>&nbsp;<span class="builtintype" id="1684826">int</span><span class="op" id="1684829">,</span>&nbsp;<span class="ident" id="1684831">trunc</span>&nbsp;<span class="builtintype" id="1684837">uint32</span><span class="op" id="1684843">)</span>&nbsp;<span class="builtintype" id="1684845">uint32</span>&nbsp;<span class="op" id="1684852">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684855">mant0</span><span class="op" id="1684860">,</span>&nbsp;<span class="ident" id="1684862">exp0</span><span class="op" id="1684866">,</span>&nbsp;<span class="ident" id="1684868">trunc0</span>&nbsp;<span class="op" id="1684875">:=</span>&nbsp;<span class="ident" id="1684878">mant</span><span class="op" id="1684882">,</span>&nbsp;<span class="ident" id="1684884">exp</span><span class="op" id="1684887">,</span>&nbsp;<span class="ident" id="1684889">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684896">if</span>&nbsp;<span class="ident" id="1684899">mant</span>&nbsp;<span class="op" id="1684904">==</span>&nbsp;<span class="num" id="1684907">0</span>&nbsp;<span class="op" id="1684909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684913">return</span>&nbsp;<span class="ident" id="1684920">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684929">for</span>&nbsp;<span class="ident" id="1684933">mant</span>&nbsp;<span class="op" id="1684938">&lt;</span>&nbsp;<span class="num" id="1684940">1</span><span class="op" id="1684941">&lt;&lt;</span><span class="ident" id="1684943">mantbits32</span>&nbsp;<span class="op" id="1684954">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684958">mant</span>&nbsp;<span class="op" id="1684963">&lt;&lt;=</span>&nbsp;<span class="num" id="1684967">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684971">exp</span><span class="op" id="1684974">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684981">for</span>&nbsp;<span class="ident" id="1684985">mant</span>&nbsp;<span class="op" id="1684990">&gt;=</span>&nbsp;<span class="num" id="1684993">4</span><span class="op" id="1684994">&lt;&lt;</span><span class="ident" id="1684996">mantbits32</span>&nbsp;<span class="op" id="1685007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685011">trunc</span>&nbsp;<span class="op" id="1685017">|=</span>&nbsp;<span class="ident" id="1685020">mant</span>&nbsp;<span class="op" id="1685025">&amp;</span>&nbsp;<span class="num" id="1685027">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685031">mant</span>&nbsp;<span class="op" id="1685036">&gt;&gt;=</span>&nbsp;<span class="num" id="1685040">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685044">exp</span><span class="op" id="1685047">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685054">if</span>&nbsp;<span class="ident" id="1685057">mant</span>&nbsp;<span class="op" id="1685062">&gt;=</span>&nbsp;<span class="num" id="1685065">2</span><span class="op" id="1685066">&lt;&lt;</span><span class="ident" id="1685068">mantbits32</span>&nbsp;<span class="op" id="1685079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685083">if</span>&nbsp;<span class="ident" id="1685086">mant</span><span class="op" id="1685090">&amp;</span><span class="num" id="1685091">1</span>&nbsp;<span class="op" id="1685093">!=</span>&nbsp;<span class="num" id="1685096">0</span>&nbsp;<span class="op" id="1685098">&amp;&amp;</span>&nbsp;<span class="op" id="1685101">(</span><span class="ident" id="1685102">trunc</span>&nbsp;<span class="op" id="1685108">!=</span>&nbsp;<span class="num" id="1685111">0</span>&nbsp;<span class="op" id="1685113">||</span>&nbsp;<span class="ident" id="1685116">mant</span><span class="op" id="1685120">&amp;</span><span class="num" id="1685121">2</span>&nbsp;<span class="op" id="1685123">!=</span>&nbsp;<span class="num" id="1685126">0</span><span class="op" id="1685127">)</span>&nbsp;<span class="op" id="1685129">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685134">mant</span><span class="op" id="1685138">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685144">if</span>&nbsp;<span class="ident" id="1685147">mant</span>&nbsp;<span class="op" id="1685152">&gt;=</span>&nbsp;<span class="num" id="1685155">4</span><span class="op" id="1685156">&lt;&lt;</span><span class="ident" id="1685158">mantbits32</span>&nbsp;<span class="op" id="1685169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685175">mant</span>&nbsp;<span class="op" id="1685180">&gt;&gt;=</span>&nbsp;<span class="num" id="1685184">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685190">exp</span><span class="op" id="1685193">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685199">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685207">mant</span>&nbsp;<span class="op" id="1685212">&gt;&gt;=</span>&nbsp;<span class="num" id="1685216">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685220">exp</span><span class="op" id="1685223">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685230">if</span>&nbsp;<span class="ident" id="1685233">exp</span>&nbsp;<span class="op" id="1685237">&gt;=</span>&nbsp;<span class="num" id="1685240">1</span><span class="op" id="1685241">&lt;&lt;</span><span class="ident" id="1685243">expbits32</span><span class="op" id="1685252">-</span><span class="num" id="1685253">1</span><span class="op" id="1685254">+</span><span class="ident" id="1685255">bias32</span>&nbsp;<span class="op" id="1685262">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685266">return</span>&nbsp;<span class="ident" id="1685273">sign</span>&nbsp;<span class="op" id="1685278">^</span>&nbsp;<span class="ident" id="1685280">inf32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685290">if</span>&nbsp;<span class="ident" id="1685293">exp</span>&nbsp;<span class="op" id="1685297">&lt;</span>&nbsp;<span class="ident" id="1685299">bias32</span><span class="op" id="1685305">+</span><span class="num" id="1685306">1</span>&nbsp;<span class="op" id="1685308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685312">if</span>&nbsp;<span class="ident" id="1685315">exp</span>&nbsp;<span class="op" id="1685319">&lt;</span>&nbsp;<span class="ident" id="1685321">bias32</span><span class="op" id="1685327">-</span><span class="builtintype" id="1685328">int</span><span class="op" id="1685331">(</span><span class="ident" id="1685332">mantbits32</span><span class="op" id="1685342">)</span>&nbsp;<span class="op" id="1685344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685349">return</span>&nbsp;<span class="ident" id="1685356">sign</span>&nbsp;<span class="op" id="1685361">|</span>&nbsp;<span class="num" id="1685363">0</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1685371">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685402">mant</span><span class="op" id="1685406">,</span>&nbsp;<span class="ident" id="1685408">exp</span><span class="op" id="1685411">,</span>&nbsp;<span class="ident" id="1685413">trunc</span>&nbsp;<span class="op" id="1685419">=</span>&nbsp;<span class="ident" id="1685421">mant0</span><span class="op" id="1685426">,</span>&nbsp;<span class="ident" id="1685428">exp0</span><span class="op" id="1685432">,</span>&nbsp;<span class="ident" id="1685434">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685443">for</span>&nbsp;<span class="ident" id="1685447">exp</span>&nbsp;<span class="op" id="1685451">&lt;</span>&nbsp;<span class="ident" id="1685453">bias32</span>&nbsp;<span class="op" id="1685460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685465">trunc</span>&nbsp;<span class="op" id="1685471">|=</span>&nbsp;<span class="ident" id="1685474">mant</span>&nbsp;<span class="op" id="1685479">&amp;</span>&nbsp;<span class="num" id="1685481">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685486">mant</span>&nbsp;<span class="op" id="1685491">&gt;&gt;=</span>&nbsp;<span class="num" id="1685495">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685500">exp</span><span class="op" id="1685503">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685512">if</span>&nbsp;<span class="ident" id="1685515">mant</span><span class="op" id="1685519">&amp;</span><span class="num" id="1685520">1</span>&nbsp;<span class="op" id="1685522">!=</span>&nbsp;<span class="num" id="1685525">0</span>&nbsp;<span class="op" id="1685527">&amp;&amp;</span>&nbsp;<span class="op" id="1685530">(</span><span class="ident" id="1685531">trunc</span>&nbsp;<span class="op" id="1685537">!=</span>&nbsp;<span class="num" id="1685540">0</span>&nbsp;<span class="op" id="1685542">||</span>&nbsp;<span class="ident" id="1685545">mant</span><span class="op" id="1685549">&amp;</span><span class="num" id="1685550">2</span>&nbsp;<span class="op" id="1685552">!=</span>&nbsp;<span class="num" id="1685555">0</span><span class="op" id="1685556">)</span>&nbsp;<span class="op" id="1685558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685563">mant</span><span class="op" id="1685567">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685576">mant</span>&nbsp;<span class="op" id="1685581">&gt;&gt;=</span>&nbsp;<span class="num" id="1685585">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685589">exp</span><span class="op" id="1685592">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685597">if</span>&nbsp;<span class="ident" id="1685600">mant</span>&nbsp;<span class="op" id="1685605">&lt;</span>&nbsp;<span class="num" id="1685607">1</span><span class="op" id="1685608">&lt;&lt;</span><span class="ident" id="1685610">mantbits32</span>&nbsp;<span class="op" id="1685621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685626">return</span>&nbsp;<span class="ident" id="1685633">sign</span>&nbsp;<span class="op" id="1685638">|</span>&nbsp;<span class="ident" id="1685640">mant</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685653">return</span>&nbsp;<span class="ident" id="1685660">sign</span>&nbsp;<span class="op" id="1685665">|</span>&nbsp;<span class="builtintype" id="1685667">uint32</span><span class="op" id="1685673">(</span><span class="ident" id="1685674">exp</span><span class="op" id="1685677">-</span><span class="ident" id="1685678">bias32</span><span class="op" id="1685684">)</span><span class="op" id="1685685">&lt;&lt;</span><span class="ident" id="1685687">mantbits32</span>&nbsp;<span class="op" id="1685698">|</span>&nbsp;<span class="ident" id="1685700">mant</span><span class="op" id="1685704">&amp;</span><span class="op" id="1685705">(</span><span class="num" id="1685706">1</span><span class="op" id="1685707">&lt;&lt;</span><span class="ident" id="1685709">mantbits32</span><span class="op" id="1685719">-</span><span class="num" id="1685720">1</span><span class="op" id="1685721">)</span><br>
<span class="lineno"></span><span class="op" id="1685723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="1685726">func</span>&nbsp;<span class="ident" id="1685731">fadd64</span><span class="op" id="1685737">(</span><span class="ident" id="1685738">f</span><span class="op" id="1685739">,</span>&nbsp;<span class="ident" id="1685741">g</span>&nbsp;<span class="ident" id="1685743">uint64</span><span class="op" id="1685749">)</span>&nbsp;<span class="ident" id="1685751">uint64</span>&nbsp;<span class="op" id="1685758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685761">fs</span><span class="op" id="1685763">,</span>&nbsp;<span class="ident" id="1685765">fm</span><span class="op" id="1685767">,</span>&nbsp;<span class="ident" id="1685769">fe</span><span class="op" id="1685771">,</span>&nbsp;<span class="ident" id="1685773">fi</span><span class="op" id="1685775">,</span>&nbsp;<span class="ident" id="1685777">fn</span>&nbsp;<span class="op" id="1685780">:=</span>&nbsp;<span class="ident" id="1685783">funpack64</span><span class="op" id="1685792">(</span><span class="ident" id="1685793">f</span><span class="op" id="1685794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685797">gs</span><span class="op" id="1685799">,</span>&nbsp;<span class="ident" id="1685801">gm</span><span class="op" id="1685803">,</span>&nbsp;<span class="ident" id="1685805">ge</span><span class="op" id="1685807">,</span>&nbsp;<span class="ident" id="1685809">gi</span><span class="op" id="1685811">,</span>&nbsp;<span class="ident" id="1685813">gn</span>&nbsp;<span class="op" id="1685816">:=</span>&nbsp;<span class="ident" id="1685819">funpack64</span><span class="op" id="1685828">(</span><span class="ident" id="1685829">g</span><span class="op" id="1685830">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1685834">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685853">switch</span>&nbsp;<span class="op" id="1685860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685863">case</span>&nbsp;<span class="ident" id="1685868">fn</span>&nbsp;<span class="op" id="1685871">||</span>&nbsp;<span class="ident" id="1685874">gn</span><span class="op" id="1685876">:</span>&nbsp;<span class="comment" id="1685878">//&nbsp;NaN&nbsp;+&nbsp;x&nbsp;or&nbsp;x&nbsp;+&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685908">return</span>&nbsp;<span class="ident" id="1685915">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685923">case</span>&nbsp;<span class="ident" id="1685928">fi</span>&nbsp;<span class="op" id="1685931">&amp;&amp;</span>&nbsp;<span class="ident" id="1685934">gi</span>&nbsp;<span class="op" id="1685937">&amp;&amp;</span>&nbsp;<span class="ident" id="1685940">fs</span>&nbsp;<span class="op" id="1685943">!=</span>&nbsp;<span class="ident" id="1685946">gs</span><span class="op" id="1685948">:</span>&nbsp;<span class="comment" id="1685950">//&nbsp;+Inf&nbsp;+&nbsp;-Inf&nbsp;or&nbsp;-Inf&nbsp;+&nbsp;+Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685988">return</span>&nbsp;<span class="ident" id="1685995">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686003">case</span>&nbsp;<span class="ident" id="1686008">fi</span><span class="op" id="1686010">:</span>&nbsp;<span class="comment" id="1686012">//&nbsp;±Inf&nbsp;+&nbsp;g&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686035">return</span>&nbsp;<span class="ident" id="1686042">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686046">case</span>&nbsp;<span class="ident" id="1686051">gi</span><span class="op" id="1686053">:</span>&nbsp;<span class="comment" id="1686055">//&nbsp;f&nbsp;+&nbsp;±Inf&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686078">return</span>&nbsp;<span class="ident" id="1686085">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686089">case</span>&nbsp;<span class="ident" id="1686094">fm</span>&nbsp;<span class="op" id="1686097">==</span>&nbsp;<span class="num" id="1686100">0</span>&nbsp;<span class="op" id="1686102">&amp;&amp;</span>&nbsp;<span class="ident" id="1686105">gm</span>&nbsp;<span class="op" id="1686108">==</span>&nbsp;<span class="num" id="1686111">0</span>&nbsp;<span class="op" id="1686113">&amp;&amp;</span>&nbsp;<span class="ident" id="1686116">fs</span>&nbsp;<span class="op" id="1686119">!=</span>&nbsp;<span class="num" id="1686122">0</span>&nbsp;<span class="op" id="1686124">&amp;&amp;</span>&nbsp;<span class="ident" id="1686127">gs</span>&nbsp;<span class="op" id="1686130">!=</span>&nbsp;<span class="num" id="1686133">0</span><span class="op" id="1686134">:</span>&nbsp;<span class="comment" id="1686136">//&nbsp;-0&nbsp;+&nbsp;-0&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686154">return</span>&nbsp;<span class="ident" id="1686161">f</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686165">case</span>&nbsp;<span class="ident" id="1686170">fm</span>&nbsp;<span class="op" id="1686173">==</span>&nbsp;<span class="num" id="1686176">0</span><span class="op" id="1686177">:</span>&nbsp;<span class="comment" id="1686179">//&nbsp;0&nbsp;+&nbsp;g&nbsp;=&nbsp;g&nbsp;but&nbsp;0&nbsp;+&nbsp;-0&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686210">if</span>&nbsp;<span class="ident" id="1686213">gm</span>&nbsp;<span class="op" id="1686216">==</span>&nbsp;<span class="num" id="1686219">0</span>&nbsp;<span class="op" id="1686221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686226">g</span>&nbsp;<span class="op" id="1686228">^=</span>&nbsp;<span class="ident" id="1686231">gs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686236">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686240">return</span>&nbsp;<span class="ident" id="1686247">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686251">case</span>&nbsp;<span class="ident" id="1686256">gm</span>&nbsp;<span class="op" id="1686259">==</span>&nbsp;<span class="num" id="1686262">0</span><span class="op" id="1686263">:</span>&nbsp;<span class="comment" id="1686265">//&nbsp;f&nbsp;+&nbsp;0&nbsp;=&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686280">return</span>&nbsp;<span class="ident" id="1686287">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686295">if</span>&nbsp;<span class="ident" id="1686298">fe</span>&nbsp;<span class="op" id="1686301">&lt;</span>&nbsp;<span class="ident" id="1686303">ge</span>&nbsp;<span class="op" id="1686306">||</span>&nbsp;<span class="ident" id="1686309">fe</span>&nbsp;<span class="op" id="1686312">==</span>&nbsp;<span class="ident" id="1686315">ge</span>&nbsp;<span class="op" id="1686318">&amp;&amp;</span>&nbsp;<span class="ident" id="1686321">fm</span>&nbsp;<span class="op" id="1686324">&lt;</span>&nbsp;<span class="ident" id="1686326">gm</span>&nbsp;<span class="op" id="1686329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686333">f</span><span class="op" id="1686334">,</span>&nbsp;<span class="ident" id="1686336">g</span><span class="op" id="1686337">,</span>&nbsp;<span class="ident" id="1686339">fs</span><span class="op" id="1686341">,</span>&nbsp;<span class="ident" id="1686343">fm</span><span class="op" id="1686345">,</span>&nbsp;<span class="ident" id="1686347">fe</span><span class="op" id="1686349">,</span>&nbsp;<span class="ident" id="1686351">gs</span><span class="op" id="1686353">,</span>&nbsp;<span class="ident" id="1686355">gm</span><span class="op" id="1686357">,</span>&nbsp;<span class="ident" id="1686359">ge</span>&nbsp;<span class="op" id="1686362">=</span>&nbsp;<span class="ident" id="1686364">g</span><span class="op" id="1686365">,</span>&nbsp;<span class="ident" id="1686367">f</span><span class="op" id="1686368">,</span>&nbsp;<span class="ident" id="1686370">gs</span><span class="op" id="1686372">,</span>&nbsp;<span class="ident" id="1686374">gm</span><span class="op" id="1686376">,</span>&nbsp;<span class="ident" id="1686378">ge</span><span class="op" id="1686380">,</span>&nbsp;<span class="ident" id="1686382">fs</span><span class="op" id="1686384">,</span>&nbsp;<span class="ident" id="1686386">fm</span><span class="op" id="1686388">,</span>&nbsp;<span class="ident" id="1686390">fe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686394">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686398">shift</span>&nbsp;<span class="op" id="1686404">:=</span>&nbsp;<span class="builtintype" id="1686407">uint</span><span class="op" id="1686411">(</span><span class="ident" id="1686412">fe</span>&nbsp;<span class="op" id="1686415">-</span>&nbsp;<span class="ident" id="1686417">ge</span><span class="op" id="1686419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686422">fm</span>&nbsp;<span class="op" id="1686425">&lt;&lt;=</span>&nbsp;<span class="num" id="1686429">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686432">gm</span>&nbsp;<span class="op" id="1686435">&lt;&lt;=</span>&nbsp;<span class="num" id="1686439">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686442">trunc</span>&nbsp;<span class="op" id="1686448">:=</span>&nbsp;<span class="ident" id="1686451">gm</span>&nbsp;<span class="op" id="1686454">&amp;</span>&nbsp;<span class="op" id="1686456">(</span><span class="num" id="1686457">1</span><span class="op" id="1686458">&lt;&lt;</span><span class="ident" id="1686460">shift</span>&nbsp;<span class="op" id="1686466">-</span>&nbsp;<span class="num" id="1686468">1</span><span class="op" id="1686469">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686472">gm</span>&nbsp;<span class="op" id="1686475">&gt;&gt;=</span>&nbsp;<span class="ident" id="1686479">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686486">if</span>&nbsp;<span class="ident" id="1686489">fs</span>&nbsp;<span class="op" id="1686492">==</span>&nbsp;<span class="ident" id="1686495">gs</span>&nbsp;<span class="op" id="1686498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686502">fm</span>&nbsp;<span class="op" id="1686505">+=</span>&nbsp;<span class="ident" id="1686508">gm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686512">}</span>&nbsp;<span class="keyword" id="1686514">else</span>&nbsp;<span class="op" id="1686519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686523">fm</span>&nbsp;<span class="op" id="1686526">-=</span>&nbsp;<span class="ident" id="1686529">gm</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686534">if</span>&nbsp;<span class="ident" id="1686537">trunc</span>&nbsp;<span class="op" id="1686543">!=</span>&nbsp;<span class="num" id="1686546">0</span>&nbsp;<span class="op" id="1686548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686553">fm</span><span class="op" id="1686555">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686566">if</span>&nbsp;<span class="ident" id="1686569">fm</span>&nbsp;<span class="op" id="1686572">==</span>&nbsp;<span class="num" id="1686575">0</span>&nbsp;<span class="op" id="1686577">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686581">fs</span>&nbsp;<span class="op" id="1686584">=</span>&nbsp;<span class="num" id="1686586">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1686589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686592">return</span>&nbsp;<span class="ident" id="1686599">fpack64</span><span class="op" id="1686606">(</span><span class="ident" id="1686607">fs</span><span class="op" id="1686609">,</span>&nbsp;<span class="ident" id="1686611">fm</span><span class="op" id="1686613">,</span>&nbsp;<span class="ident" id="1686615">fe</span><span class="op" id="1686617">-</span><span class="num" id="1686618">2</span><span class="op" id="1686619">,</span>&nbsp;<span class="ident" id="1686621">trunc</span><span class="op" id="1686626">)</span><br>
<span class="lineno"></span><span class="op" id="1686628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="1686631">func</span>&nbsp;<span class="ident" id="1686636">fsub64</span><span class="op" id="1686642">(</span><span class="ident" id="1686643">f</span><span class="op" id="1686644">,</span>&nbsp;<span class="ident" id="1686646">g</span>&nbsp;<span class="ident" id="1686648">uint64</span><span class="op" id="1686654">)</span>&nbsp;<span class="ident" id="1686656">uint64</span>&nbsp;<span class="op" id="1686663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686666">return</span>&nbsp;<span class="ident" id="1686673">fadd64</span><span class="op" id="1686679">(</span><span class="ident" id="1686680">f</span><span class="op" id="1686681">,</span>&nbsp;<span class="ident" id="1686683">fneg64</span><span class="op" id="1686689">(</span><span class="ident" id="1686690">g</span><span class="op" id="1686691">)</span><span class="op" id="1686692">)</span><br>
<span class="lineno"></span><span class="op" id="1686694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1686697">func</span>&nbsp;<span class="ident" id="1686702">fneg64</span><span class="op" id="1686708">(</span><span class="ident" id="1686709">f</span>&nbsp;<span class="ident" id="1686711">uint64</span><span class="op" id="1686717">)</span>&nbsp;<span class="ident" id="1686719">uint64</span>&nbsp;<span class="op" id="1686726">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686729">return</span>&nbsp;<span class="ident" id="1686736">f</span>&nbsp;<span class="op" id="1686738">^</span>&nbsp;<span class="op" id="1686740">(</span><span class="num" id="1686741">1</span>&nbsp;<span class="op" id="1686743">&lt;&lt;</span>&nbsp;<span class="op" id="1686746">(</span><span class="ident" id="1686747">mantbits64</span>&nbsp;<span class="op" id="1686758">+</span>&nbsp;<span class="ident" id="1686760">expbits64</span><span class="op" id="1686769">)</span><span class="op" id="1686770">)</span><br>
<span class="lineno"></span><span class="op" id="1686772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1686775">func</span>&nbsp;<span class="ident" id="1686780">fmul64</span><span class="op" id="1686786">(</span><span class="ident" id="1686787">f</span><span class="op" id="1686788">,</span>&nbsp;<span class="ident" id="1686790">g</span>&nbsp;<span class="ident" id="1686792">uint64</span><span class="op" id="1686798">)</span>&nbsp;<span class="ident" id="1686800">uint64</span>&nbsp;<span class="op" id="1686807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686810">fs</span><span class="op" id="1686812">,</span>&nbsp;<span class="ident" id="1686814">fm</span><span class="op" id="1686816">,</span>&nbsp;<span class="ident" id="1686818">fe</span><span class="op" id="1686820">,</span>&nbsp;<span class="ident" id="1686822">fi</span><span class="op" id="1686824">,</span>&nbsp;<span class="ident" id="1686826">fn</span>&nbsp;<span class="op" id="1686829">:=</span>&nbsp;<span class="ident" id="1686832">funpack64</span><span class="op" id="1686841">(</span><span class="ident" id="1686842">f</span><span class="op" id="1686843">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1686846">gs</span><span class="op" id="1686848">,</span>&nbsp;<span class="ident" id="1686850">gm</span><span class="op" id="1686852">,</span>&nbsp;<span class="ident" id="1686854">ge</span><span class="op" id="1686856">,</span>&nbsp;<span class="ident" id="1686858">gi</span><span class="op" id="1686860">,</span>&nbsp;<span class="ident" id="1686862">gn</span>&nbsp;<span class="op" id="1686865">:=</span>&nbsp;<span class="ident" id="1686868">funpack64</span><span class="op" id="1686877">(</span><span class="ident" id="1686878">g</span><span class="op" id="1686879">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1686883">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686902">switch</span>&nbsp;<span class="op" id="1686909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686912">case</span>&nbsp;<span class="ident" id="1686917">fn</span>&nbsp;<span class="op" id="1686920">||</span>&nbsp;<span class="ident" id="1686923">gn</span><span class="op" id="1686925">:</span>&nbsp;<span class="comment" id="1686927">//&nbsp;NaN&nbsp;*&nbsp;g&nbsp;or&nbsp;f&nbsp;*&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686957">return</span>&nbsp;<span class="ident" id="1686964">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1686972">case</span>&nbsp;<span class="ident" id="1686977">fi</span>&nbsp;<span class="op" id="1686980">&amp;&amp;</span>&nbsp;<span class="ident" id="1686983">gi</span><span class="op" id="1686985">:</span>&nbsp;<span class="comment" id="1686987">//&nbsp;Inf&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687029">return</span>&nbsp;<span class="ident" id="1687036">f</span>&nbsp;<span class="op" id="1687038">^</span>&nbsp;<span class="ident" id="1687040">gs</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687045">case</span>&nbsp;<span class="ident" id="1687050">fi</span>&nbsp;<span class="op" id="1687053">&amp;&amp;</span>&nbsp;<span class="ident" id="1687056">gm</span>&nbsp;<span class="op" id="1687059">==</span>&nbsp;<span class="num" id="1687062">0</span><span class="op" id="1687063">,</span>&nbsp;<span class="ident" id="1687065">fm</span>&nbsp;<span class="op" id="1687068">==</span>&nbsp;<span class="num" id="1687071">0</span>&nbsp;<span class="op" id="1687073">&amp;&amp;</span>&nbsp;<span class="ident" id="1687076">gi</span><span class="op" id="1687078">:</span>&nbsp;<span class="comment" id="1687080">//&nbsp;0&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;*&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687109">return</span>&nbsp;<span class="ident" id="1687116">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687124">case</span>&nbsp;<span class="ident" id="1687129">fm</span>&nbsp;<span class="op" id="1687132">==</span>&nbsp;<span class="num" id="1687135">0</span><span class="op" id="1687136">:</span>&nbsp;<span class="comment" id="1687138">//&nbsp;0&nbsp;*&nbsp;x&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687174">return</span>&nbsp;<span class="ident" id="1687181">f</span>&nbsp;<span class="op" id="1687183">^</span>&nbsp;<span class="ident" id="1687185">gs</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687190">case</span>&nbsp;<span class="ident" id="1687195">gm</span>&nbsp;<span class="op" id="1687198">==</span>&nbsp;<span class="num" id="1687201">0</span><span class="op" id="1687202">:</span>&nbsp;<span class="comment" id="1687204">//&nbsp;x&nbsp;*&nbsp;0&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687240">return</span>&nbsp;<span class="ident" id="1687247">g</span>&nbsp;<span class="op" id="1687249">^</span>&nbsp;<span class="ident" id="1687251">fs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1687255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1687259">//&nbsp;53-bit&nbsp;*&nbsp;53-bit&nbsp;=&nbsp;107-&nbsp;or&nbsp;108-bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687297">lo</span><span class="op" id="1687299">,</span>&nbsp;<span class="ident" id="1687301">hi</span>&nbsp;<span class="op" id="1687304">:=</span>&nbsp;<span class="ident" id="1687307">mullu</span><span class="op" id="1687312">(</span><span class="ident" id="1687313">fm</span><span class="op" id="1687315">,</span>&nbsp;<span class="ident" id="1687317">gm</span><span class="op" id="1687319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687322">shift</span>&nbsp;<span class="op" id="1687328">:=</span>&nbsp;<span class="ident" id="1687331">mantbits64</span>&nbsp;<span class="op" id="1687342">-</span>&nbsp;<span class="num" id="1687344">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687347">trunc</span>&nbsp;<span class="op" id="1687353">:=</span>&nbsp;<span class="ident" id="1687356">lo</span>&nbsp;<span class="op" id="1687359">&amp;</span>&nbsp;<span class="op" id="1687361">(</span><span class="num" id="1687362">1</span><span class="op" id="1687363">&lt;&lt;</span><span class="ident" id="1687365">shift</span>&nbsp;<span class="op" id="1687371">-</span>&nbsp;<span class="num" id="1687373">1</span><span class="op" id="1687374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687377">mant</span>&nbsp;<span class="op" id="1687382">:=</span>&nbsp;<span class="ident" id="1687385">hi</span><span class="op" id="1687387">&lt;&lt;</span><span class="op" id="1687389">(</span><span class="num" id="1687390">64</span><span class="op" id="1687392">-</span><span class="ident" id="1687393">shift</span><span class="op" id="1687398">)</span>&nbsp;<span class="op" id="1687400">|</span>&nbsp;<span class="ident" id="1687402">lo</span><span class="op" id="1687404">&gt;&gt;</span><span class="ident" id="1687406">shift</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687413">return</span>&nbsp;<span class="ident" id="1687420">fpack64</span><span class="op" id="1687427">(</span><span class="ident" id="1687428">fs</span><span class="op" id="1687430">^</span><span class="ident" id="1687431">gs</span><span class="op" id="1687433">,</span>&nbsp;<span class="ident" id="1687435">mant</span><span class="op" id="1687439">,</span>&nbsp;<span class="ident" id="1687441">fe</span><span class="op" id="1687443">+</span><span class="ident" id="1687444">ge</span><span class="op" id="1687446">-</span><span class="num" id="1687447">1</span><span class="op" id="1687448">,</span>&nbsp;<span class="ident" id="1687450">trunc</span><span class="op" id="1687455">)</span><br>
<span class="lineno"></span><span class="op" id="1687457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1687460">func</span>&nbsp;<span class="ident" id="1687465">fdiv64</span><span class="op" id="1687471">(</span><span class="ident" id="1687472">f</span><span class="op" id="1687473">,</span>&nbsp;<span class="ident" id="1687475">g</span>&nbsp;<span class="ident" id="1687477">uint64</span><span class="op" id="1687483">)</span>&nbsp;<span class="ident" id="1687485">uint64</span>&nbsp;<span class="op" id="1687492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687495">fs</span><span class="op" id="1687497">,</span>&nbsp;<span class="ident" id="1687499">fm</span><span class="op" id="1687501">,</span>&nbsp;<span class="ident" id="1687503">fe</span><span class="op" id="1687505">,</span>&nbsp;<span class="ident" id="1687507">fi</span><span class="op" id="1687509">,</span>&nbsp;<span class="ident" id="1687511">fn</span>&nbsp;<span class="op" id="1687514">:=</span>&nbsp;<span class="ident" id="1687517">funpack64</span><span class="op" id="1687526">(</span><span class="ident" id="1687527">f</span><span class="op" id="1687528">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687531">gs</span><span class="op" id="1687533">,</span>&nbsp;<span class="ident" id="1687535">gm</span><span class="op" id="1687537">,</span>&nbsp;<span class="ident" id="1687539">ge</span><span class="op" id="1687541">,</span>&nbsp;<span class="ident" id="1687543">gi</span><span class="op" id="1687545">,</span>&nbsp;<span class="ident" id="1687547">gn</span>&nbsp;<span class="op" id="1687550">:=</span>&nbsp;<span class="ident" id="1687553">funpack64</span><span class="op" id="1687562">(</span><span class="ident" id="1687563">g</span><span class="op" id="1687564">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1687568">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687587">switch</span>&nbsp;<span class="op" id="1687594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687597">case</span>&nbsp;<span class="ident" id="1687602">fn</span>&nbsp;<span class="op" id="1687605">||</span>&nbsp;<span class="ident" id="1687608">gn</span><span class="op" id="1687610">:</span>&nbsp;<span class="comment" id="1687612">//&nbsp;NaN&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687641">return</span>&nbsp;<span class="ident" id="1687648">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687656">case</span>&nbsp;<span class="ident" id="1687661">fi</span>&nbsp;<span class="op" id="1687664">&amp;&amp;</span>&nbsp;<span class="ident" id="1687667">gi</span><span class="op" id="1687669">:</span>&nbsp;<span class="comment" id="1687671">//&nbsp;±Inf&nbsp;/&nbsp;±Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687696">return</span>&nbsp;<span class="ident" id="1687703">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687711">case</span>&nbsp;<span class="op" id="1687716">!</span><span class="ident" id="1687717">fi</span>&nbsp;<span class="op" id="1687720">&amp;&amp;</span>&nbsp;<span class="op" id="1687723">!</span><span class="ident" id="1687724">gi</span>&nbsp;<span class="op" id="1687727">&amp;&amp;</span>&nbsp;<span class="ident" id="1687730">fm</span>&nbsp;<span class="op" id="1687733">==</span>&nbsp;<span class="num" id="1687736">0</span>&nbsp;<span class="op" id="1687738">&amp;&amp;</span>&nbsp;<span class="ident" id="1687741">gm</span>&nbsp;<span class="op" id="1687744">==</span>&nbsp;<span class="num" id="1687747">0</span><span class="op" id="1687748">:</span>&nbsp;<span class="comment" id="1687750">//&nbsp;0&nbsp;/&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687767">return</span>&nbsp;<span class="ident" id="1687774">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687782">case</span>&nbsp;<span class="ident" id="1687787">fi</span><span class="op" id="1687789">,</span>&nbsp;<span class="op" id="1687791">!</span><span class="ident" id="1687792">gi</span>&nbsp;<span class="op" id="1687795">&amp;&amp;</span>&nbsp;<span class="ident" id="1687798">gm</span>&nbsp;<span class="op" id="1687801">==</span>&nbsp;<span class="num" id="1687804">0</span><span class="op" id="1687805">:</span>&nbsp;<span class="comment" id="1687807">//&nbsp;Inf&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;0&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687834">return</span>&nbsp;<span class="ident" id="1687841">fs</span>&nbsp;<span class="op" id="1687844">^</span>&nbsp;<span class="ident" id="1687846">gs</span>&nbsp;<span class="op" id="1687849">^</span>&nbsp;<span class="ident" id="1687851">inf64</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687859">case</span>&nbsp;<span class="ident" id="1687864">gi</span><span class="op" id="1687866">,</span>&nbsp;<span class="ident" id="1687868">fm</span>&nbsp;<span class="op" id="1687871">==</span>&nbsp;<span class="num" id="1687874">0</span><span class="op" id="1687875">:</span>&nbsp;<span class="comment" id="1687877">//&nbsp;f&nbsp;/&nbsp;Inf&nbsp;=&nbsp;0&nbsp;/&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1687904">return</span>&nbsp;<span class="ident" id="1687911">fs</span>&nbsp;<span class="op" id="1687914">^</span>&nbsp;<span class="ident" id="1687916">gs</span>&nbsp;<span class="op" id="1687919">^</span>&nbsp;<span class="num" id="1687921">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1687924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687927">_</span><span class="op" id="1687928">,</span>&nbsp;<span class="ident" id="1687930">_</span><span class="op" id="1687931">,</span>&nbsp;<span class="ident" id="1687933">_</span><span class="op" id="1687934">,</span>&nbsp;<span class="ident" id="1687936">_</span>&nbsp;<span class="op" id="1687938">=</span>&nbsp;<span class="ident" id="1687940">fi</span><span class="op" id="1687942">,</span>&nbsp;<span class="ident" id="1687944">fn</span><span class="op" id="1687946">,</span>&nbsp;<span class="ident" id="1687948">gi</span><span class="op" id="1687950">,</span>&nbsp;<span class="ident" id="1687952">gn</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1687957">//&nbsp;53-bit&lt;&lt;54&nbsp;/&nbsp;53-bit&nbsp;=&nbsp;53-&nbsp;or&nbsp;54-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1687998">shift</span>&nbsp;<span class="op" id="1688004">:=</span>&nbsp;<span class="ident" id="1688007">mantbits64</span>&nbsp;<span class="op" id="1688018">+</span>&nbsp;<span class="num" id="1688020">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688023">q</span><span class="op" id="1688024">,</span>&nbsp;<span class="ident" id="1688026">r</span>&nbsp;<span class="op" id="1688028">:=</span>&nbsp;<span class="ident" id="1688031">divlu</span><span class="op" id="1688036">(</span><span class="ident" id="1688037">fm</span><span class="op" id="1688039">&gt;&gt;</span><span class="op" id="1688041">(</span><span class="num" id="1688042">64</span><span class="op" id="1688044">-</span><span class="ident" id="1688045">shift</span><span class="op" id="1688050">)</span><span class="op" id="1688051">,</span>&nbsp;<span class="ident" id="1688053">fm</span><span class="op" id="1688055">&lt;&lt;</span><span class="ident" id="1688057">shift</span><span class="op" id="1688062">,</span>&nbsp;<span class="ident" id="1688064">gm</span><span class="op" id="1688066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688069">return</span>&nbsp;<span class="ident" id="1688076">fpack64</span><span class="op" id="1688083">(</span><span class="ident" id="1688084">fs</span><span class="op" id="1688086">^</span><span class="ident" id="1688087">gs</span><span class="op" id="1688089">,</span>&nbsp;<span class="ident" id="1688091">q</span><span class="op" id="1688092">,</span>&nbsp;<span class="ident" id="1688094">fe</span><span class="op" id="1688096">-</span><span class="ident" id="1688097">ge</span><span class="op" id="1688099">-</span><span class="num" id="1688100">2</span><span class="op" id="1688101">,</span>&nbsp;<span class="ident" id="1688103">r</span><span class="op" id="1688104">)</span><br>
<span class="lineno">315</span><span class="op" id="1688106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1688109">func</span>&nbsp;<span class="ident" id="1688114">f64to32</span><span class="op" id="1688121">(</span><span class="ident" id="1688122">f</span>&nbsp;<span class="ident" id="1688124">uint64</span><span class="op" id="1688130">)</span>&nbsp;<span class="builtintype" id="1688132">uint32</span>&nbsp;<span class="op" id="1688139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688142">fs</span><span class="op" id="1688144">,</span>&nbsp;<span class="ident" id="1688146">fm</span><span class="op" id="1688148">,</span>&nbsp;<span class="ident" id="1688150">fe</span><span class="op" id="1688152">,</span>&nbsp;<span class="ident" id="1688154">fi</span><span class="op" id="1688156">,</span>&nbsp;<span class="ident" id="1688158">fn</span>&nbsp;<span class="op" id="1688161">:=</span>&nbsp;<span class="ident" id="1688164">funpack64</span><span class="op" id="1688173">(</span><span class="ident" id="1688174">f</span><span class="op" id="1688175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688178">if</span>&nbsp;<span class="ident" id="1688181">fn</span>&nbsp;<span class="op" id="1688184">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688188">return</span>&nbsp;<span class="ident" id="1688195">nan32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1688202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688205">fs32</span>&nbsp;<span class="op" id="1688210">:=</span>&nbsp;<span class="builtintype" id="1688213">uint32</span><span class="op" id="1688219">(</span><span class="ident" id="1688220">fs</span>&nbsp;<span class="op" id="1688223">&gt;&gt;</span>&nbsp;<span class="num" id="1688226">32</span><span class="op" id="1688228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688231">if</span>&nbsp;<span class="ident" id="1688234">fi</span>&nbsp;<span class="op" id="1688237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688241">return</span>&nbsp;<span class="ident" id="1688248">fs32</span>&nbsp;<span class="op" id="1688253">^</span>&nbsp;<span class="ident" id="1688255">inf32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1688262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688265">const</span>&nbsp;<span class="ident" id="1688271">d</span>&nbsp;<span class="op" id="1688273">=</span>&nbsp;<span class="ident" id="1688275">mantbits64</span>&nbsp;<span class="op" id="1688286">-</span>&nbsp;<span class="ident" id="1688288">mantbits32</span>&nbsp;<span class="op" id="1688299">-</span>&nbsp;<span class="num" id="1688301">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688304">return</span>&nbsp;<span class="ident" id="1688311">fpack32</span><span class="op" id="1688318">(</span><span class="ident" id="1688319">fs32</span><span class="op" id="1688323">,</span>&nbsp;<span class="builtintype" id="1688325">uint32</span><span class="op" id="1688331">(</span><span class="ident" id="1688332">fm</span><span class="op" id="1688334">&gt;&gt;</span><span class="ident" id="1688336">d</span><span class="op" id="1688337">)</span><span class="op" id="1688338">,</span>&nbsp;<span class="ident" id="1688340">fe</span><span class="op" id="1688342">-</span><span class="num" id="1688343">1</span><span class="op" id="1688344">,</span>&nbsp;<span class="builtintype" id="1688346">uint32</span><span class="op" id="1688352">(</span><span class="ident" id="1688353">fm</span><span class="op" id="1688355">&amp;</span><span class="op" id="1688356">(</span><span class="num" id="1688357">1</span><span class="op" id="1688358">&lt;&lt;</span><span class="ident" id="1688360">d</span><span class="op" id="1688361">-</span><span class="num" id="1688362">1</span><span class="op" id="1688363">)</span><span class="op" id="1688364">)</span><span class="op" id="1688365">)</span><br>
<span class="lineno"></span><span class="op" id="1688367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="1688370">func</span>&nbsp;<span class="ident" id="1688375">f32to64</span><span class="op" id="1688382">(</span><span class="ident" id="1688383">f</span>&nbsp;<span class="builtintype" id="1688385">uint32</span><span class="op" id="1688391">)</span>&nbsp;<span class="ident" id="1688393">uint64</span>&nbsp;<span class="op" id="1688400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688403">const</span>&nbsp;<span class="ident" id="1688409">d</span>&nbsp;<span class="op" id="1688411">=</span>&nbsp;<span class="ident" id="1688413">mantbits64</span>&nbsp;<span class="op" id="1688424">-</span>&nbsp;<span class="ident" id="1688426">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688438">fs</span><span class="op" id="1688440">,</span>&nbsp;<span class="ident" id="1688442">fm</span><span class="op" id="1688444">,</span>&nbsp;<span class="ident" id="1688446">fe</span><span class="op" id="1688448">,</span>&nbsp;<span class="ident" id="1688450">fi</span><span class="op" id="1688452">,</span>&nbsp;<span class="ident" id="1688454">fn</span>&nbsp;<span class="op" id="1688457">:=</span>&nbsp;<span class="ident" id="1688460">funpack32</span><span class="op" id="1688469">(</span><span class="ident" id="1688470">f</span><span class="op" id="1688471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688474">if</span>&nbsp;<span class="ident" id="1688477">fn</span>&nbsp;<span class="op" id="1688480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688484">return</span>&nbsp;<span class="ident" id="1688491">nan64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1688498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688501">fs64</span>&nbsp;<span class="op" id="1688506">:=</span>&nbsp;<span class="ident" id="1688509">uint64</span><span class="op" id="1688515">(</span><span class="ident" id="1688516">fs</span><span class="op" id="1688518">)</span>&nbsp;<span class="op" id="1688520">&lt;&lt;</span>&nbsp;<span class="num" id="1688523">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688527">if</span>&nbsp;<span class="ident" id="1688530">fi</span>&nbsp;<span class="op" id="1688533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688537">return</span>&nbsp;<span class="ident" id="1688544">fs64</span>&nbsp;<span class="op" id="1688549">^</span>&nbsp;<span class="ident" id="1688551">inf64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1688558">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688561">return</span>&nbsp;<span class="ident" id="1688568">fpack64</span><span class="op" id="1688575">(</span><span class="ident" id="1688576">fs64</span><span class="op" id="1688580">,</span>&nbsp;<span class="ident" id="1688582">uint64</span><span class="op" id="1688588">(</span><span class="ident" id="1688589">fm</span><span class="op" id="1688591">)</span><span class="op" id="1688592">&lt;&lt;</span><span class="ident" id="1688594">d</span><span class="op" id="1688595">,</span>&nbsp;<span class="ident" id="1688597">fe</span><span class="op" id="1688599">,</span>&nbsp;<span class="num" id="1688601">0</span><span class="op" id="1688602">)</span><br>
<span class="lineno"></span><span class="op" id="1688604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1688607">func</span>&nbsp;<span class="ident" id="1688612">fcmp64</span><span class="op" id="1688618">(</span><span class="ident" id="1688619">f</span><span class="op" id="1688620">,</span>&nbsp;<span class="ident" id="1688622">g</span>&nbsp;<span class="ident" id="1688624">uint64</span><span class="op" id="1688630">)</span>&nbsp;<span class="op" id="1688632">(</span><span class="ident" id="1688633">cmp</span>&nbsp;<span class="builtintype" id="1688637">int</span><span class="op" id="1688640">,</span>&nbsp;<span class="ident" id="1688642">isnan</span>&nbsp;<span class="builtintype" id="1688648">bool</span><span class="op" id="1688652">)</span>&nbsp;<span class="op" id="1688654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688657">fs</span><span class="op" id="1688659">,</span>&nbsp;<span class="ident" id="1688661">fm</span><span class="op" id="1688663">,</span>&nbsp;<span class="ident" id="1688665">_</span><span class="op" id="1688666">,</span>&nbsp;<span class="ident" id="1688668">fi</span><span class="op" id="1688670">,</span>&nbsp;<span class="ident" id="1688672">fn</span>&nbsp;<span class="op" id="1688675">:=</span>&nbsp;<span class="ident" id="1688678">funpack64</span><span class="op" id="1688687">(</span><span class="ident" id="1688688">f</span><span class="op" id="1688689">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1688692">gs</span><span class="op" id="1688694">,</span>&nbsp;<span class="ident" id="1688696">gm</span><span class="op" id="1688698">,</span>&nbsp;<span class="ident" id="1688700">_</span><span class="op" id="1688701">,</span>&nbsp;<span class="ident" id="1688703">gi</span><span class="op" id="1688705">,</span>&nbsp;<span class="ident" id="1688707">gn</span>&nbsp;<span class="op" id="1688710">:=</span>&nbsp;<span class="ident" id="1688713">funpack64</span><span class="op" id="1688722">(</span><span class="ident" id="1688723">g</span><span class="op" id="1688724">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688728">switch</span>&nbsp;<span class="op" id="1688735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688738">case</span>&nbsp;<span class="ident" id="1688743">fn</span><span class="op" id="1688745">,</span>&nbsp;<span class="ident" id="1688747">gn</span><span class="op" id="1688749">:</span>&nbsp;<span class="comment" id="1688751">//&nbsp;flag&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688765">return</span>&nbsp;<span class="num" id="1688772">0</span><span class="op" id="1688773">,</span>&nbsp;<span class="builtintype" id="1688775">true</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688782">case</span>&nbsp;<span class="op" id="1688787">!</span><span class="ident" id="1688788">fi</span>&nbsp;<span class="op" id="1688791">&amp;&amp;</span>&nbsp;<span class="op" id="1688794">!</span><span class="ident" id="1688795">gi</span>&nbsp;<span class="op" id="1688798">&amp;&amp;</span>&nbsp;<span class="ident" id="1688801">fm</span>&nbsp;<span class="op" id="1688804">==</span>&nbsp;<span class="num" id="1688807">0</span>&nbsp;<span class="op" id="1688809">&amp;&amp;</span>&nbsp;<span class="ident" id="1688812">gm</span>&nbsp;<span class="op" id="1688815">==</span>&nbsp;<span class="num" id="1688818">0</span><span class="op" id="1688819">:</span>&nbsp;<span class="comment" id="1688821">//&nbsp;±0&nbsp;==&nbsp;±0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688837">return</span>&nbsp;<span class="num" id="1688844">0</span><span class="op" id="1688845">,</span>&nbsp;<span class="builtintype" id="1688847">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688855">case</span>&nbsp;<span class="ident" id="1688860">fs</span>&nbsp;<span class="op" id="1688863">&gt;</span>&nbsp;<span class="ident" id="1688865">gs</span><span class="op" id="1688867">:</span>&nbsp;<span class="comment" id="1688869">//&nbsp;f&nbsp;&lt;&nbsp;0,&nbsp;g&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688887">return</span>&nbsp;<span class="op" id="1688894">-</span><span class="num" id="1688895">1</span><span class="op" id="1688896">,</span>&nbsp;<span class="builtintype" id="1688898">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688906">case</span>&nbsp;<span class="ident" id="1688911">fs</span>&nbsp;<span class="op" id="1688914">&lt;</span>&nbsp;<span class="ident" id="1688916">gs</span><span class="op" id="1688918">:</span>&nbsp;<span class="comment" id="1688920">//&nbsp;f&nbsp;&gt;&nbsp;0,&nbsp;g&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1688938">return</span>&nbsp;<span class="op" id="1688945">+</span><span class="num" id="1688946">1</span><span class="op" id="1688947">,</span>&nbsp;<span class="builtintype" id="1688949">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1688957">//&nbsp;Same&nbsp;sign,&nbsp;not&nbsp;NaN.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1688981">//&nbsp;Can&nbsp;compare&nbsp;encodings&nbsp;directly&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1689021">//&nbsp;Reverse&nbsp;for&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689043">case</span>&nbsp;<span class="ident" id="1689048">fs</span>&nbsp;<span class="op" id="1689051">==</span>&nbsp;<span class="num" id="1689054">0</span>&nbsp;<span class="op" id="1689056">&amp;&amp;</span>&nbsp;<span class="ident" id="1689059">f</span>&nbsp;<span class="op" id="1689061">&lt;</span>&nbsp;<span class="ident" id="1689063">g</span><span class="op" id="1689064">,</span>&nbsp;<span class="ident" id="1689066">fs</span>&nbsp;<span class="op" id="1689069">!=</span>&nbsp;<span class="num" id="1689072">0</span>&nbsp;<span class="op" id="1689074">&amp;&amp;</span>&nbsp;<span class="ident" id="1689077">f</span>&nbsp;<span class="op" id="1689079">&gt;</span>&nbsp;<span class="ident" id="1689081">g</span><span class="op" id="1689082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689086">return</span>&nbsp;<span class="op" id="1689093">-</span><span class="num" id="1689094">1</span><span class="op" id="1689095">,</span>&nbsp;<span class="builtintype" id="1689097">false</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689105">case</span>&nbsp;<span class="ident" id="1689110">fs</span>&nbsp;<span class="op" id="1689113">==</span>&nbsp;<span class="num" id="1689116">0</span>&nbsp;<span class="op" id="1689118">&amp;&amp;</span>&nbsp;<span class="ident" id="1689121">f</span>&nbsp;<span class="op" id="1689123">&gt;</span>&nbsp;<span class="ident" id="1689125">g</span><span class="op" id="1689126">,</span>&nbsp;<span class="ident" id="1689128">fs</span>&nbsp;<span class="op" id="1689131">!=</span>&nbsp;<span class="num" id="1689134">0</span>&nbsp;<span class="op" id="1689136">&amp;&amp;</span>&nbsp;<span class="ident" id="1689139">f</span>&nbsp;<span class="op" id="1689141">&lt;</span>&nbsp;<span class="ident" id="1689143">g</span><span class="op" id="1689144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689148">return</span>&nbsp;<span class="op" id="1689155">+</span><span class="num" id="1689156">1</span><span class="op" id="1689157">,</span>&nbsp;<span class="builtintype" id="1689159">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1689170">//&nbsp;f&nbsp;==&nbsp;g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689181">return</span>&nbsp;<span class="num" id="1689188">0</span><span class="op" id="1689189">,</span>&nbsp;<span class="builtintype" id="1689191">false</span><br>
<span class="lineno"></span><span class="op" id="1689197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1689200">func</span>&nbsp;<span class="ident" id="1689205">f64toint</span><span class="op" id="1689213">(</span><span class="ident" id="1689214">f</span>&nbsp;<span class="ident" id="1689216">uint64</span><span class="op" id="1689222">)</span>&nbsp;<span class="op" id="1689224">(</span><span class="ident" id="1689225">val</span>&nbsp;<span class="ident" id="1689229">int64</span><span class="op" id="1689234">,</span>&nbsp;<span class="ident" id="1689236">ok</span>&nbsp;<span class="builtintype" id="1689239">bool</span><span class="op" id="1689243">)</span>&nbsp;<span class="op" id="1689245">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689248">fs</span><span class="op" id="1689250">,</span>&nbsp;<span class="ident" id="1689252">fm</span><span class="op" id="1689254">,</span>&nbsp;<span class="ident" id="1689256">fe</span><span class="op" id="1689258">,</span>&nbsp;<span class="ident" id="1689260">fi</span><span class="op" id="1689262">,</span>&nbsp;<span class="ident" id="1689264">fn</span>&nbsp;<span class="op" id="1689267">:=</span>&nbsp;<span class="ident" id="1689270">funpack64</span><span class="op" id="1689279">(</span><span class="ident" id="1689280">f</span><span class="op" id="1689281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689285">switch</span>&nbsp;<span class="op" id="1689292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689295">case</span>&nbsp;<span class="ident" id="1689300">fi</span><span class="op" id="1689302">,</span>&nbsp;<span class="ident" id="1689304">fn</span><span class="op" id="1689306">:</span>&nbsp;<span class="comment" id="1689308">//&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689317">return</span>&nbsp;<span class="num" id="1689324">0</span><span class="op" id="1689325">,</span>&nbsp;<span class="builtintype" id="1689327">false</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689335">case</span>&nbsp;<span class="ident" id="1689340">fe</span>&nbsp;<span class="op" id="1689343">&lt;</span>&nbsp;<span class="op" id="1689345">-</span><span class="num" id="1689346">1</span><span class="op" id="1689347">:</span>&nbsp;<span class="comment" id="1689349">//&nbsp;f&nbsp;&lt;&nbsp;0.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689362">return</span>&nbsp;<span class="num" id="1689369">0</span><span class="op" id="1689370">,</span>&nbsp;<span class="builtintype" id="1689372">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689380">case</span>&nbsp;<span class="ident" id="1689385">fe</span>&nbsp;<span class="op" id="1689388">&gt;</span>&nbsp;<span class="num" id="1689390">63</span><span class="op" id="1689392">:</span>&nbsp;<span class="comment" id="1689394">//&nbsp;f&nbsp;&gt;=&nbsp;2^63</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689409">if</span>&nbsp;<span class="ident" id="1689412">fs</span>&nbsp;<span class="op" id="1689415">!=</span>&nbsp;<span class="num" id="1689418">0</span>&nbsp;<span class="op" id="1689420">&amp;&amp;</span>&nbsp;<span class="ident" id="1689423">fm</span>&nbsp;<span class="op" id="1689426">==</span>&nbsp;<span class="num" id="1689429">0</span>&nbsp;<span class="op" id="1689431">{</span>&nbsp;<span class="comment" id="1689433">//&nbsp;f&nbsp;==&nbsp;-2^63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689450">return</span>&nbsp;<span class="op" id="1689457">-</span><span class="num" id="1689458">1</span>&nbsp;<span class="op" id="1689460">&lt;&lt;</span>&nbsp;<span class="num" id="1689463">63</span><span class="op" id="1689465">,</span>&nbsp;<span class="builtintype" id="1689467">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689478">if</span>&nbsp;<span class="ident" id="1689481">fs</span>&nbsp;<span class="op" id="1689484">!=</span>&nbsp;<span class="num" id="1689487">0</span>&nbsp;<span class="op" id="1689489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689494">return</span>&nbsp;<span class="num" id="1689501">0</span><span class="op" id="1689502">,</span>&nbsp;<span class="builtintype" id="1689504">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689516">return</span>&nbsp;<span class="num" id="1689523">0</span><span class="op" id="1689524">,</span>&nbsp;<span class="builtintype" id="1689526">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689537">for</span>&nbsp;<span class="ident" id="1689541">fe</span>&nbsp;<span class="op" id="1689544">&gt;</span>&nbsp;<span class="builtintype" id="1689546">int</span><span class="op" id="1689549">(</span><span class="ident" id="1689550">mantbits64</span><span class="op" id="1689560">)</span>&nbsp;<span class="op" id="1689562">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689566">fe</span><span class="op" id="1689568">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689573">fm</span>&nbsp;<span class="op" id="1689576">&lt;&lt;=</span>&nbsp;<span class="num" id="1689580">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689586">for</span>&nbsp;<span class="ident" id="1689590">fe</span>&nbsp;<span class="op" id="1689593">&lt;</span>&nbsp;<span class="builtintype" id="1689595">int</span><span class="op" id="1689598">(</span><span class="ident" id="1689599">mantbits64</span><span class="op" id="1689609">)</span>&nbsp;<span class="op" id="1689611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689615">fe</span><span class="op" id="1689617">++</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689622">fm</span>&nbsp;<span class="op" id="1689625">&gt;&gt;=</span>&nbsp;<span class="num" id="1689629">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689635">val</span>&nbsp;<span class="op" id="1689639">=</span>&nbsp;<span class="ident" id="1689641">int64</span><span class="op" id="1689646">(</span><span class="ident" id="1689647">fm</span><span class="op" id="1689649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689652">if</span>&nbsp;<span class="ident" id="1689655">fs</span>&nbsp;<span class="op" id="1689658">!=</span>&nbsp;<span class="num" id="1689661">0</span>&nbsp;<span class="op" id="1689663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689667">val</span>&nbsp;<span class="op" id="1689671">=</span>&nbsp;<span class="op" id="1689673">-</span><span class="ident" id="1689674">val</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689682">return</span>&nbsp;<span class="ident" id="1689689">val</span><span class="op" id="1689692">,</span>&nbsp;<span class="builtintype" id="1689694">true</span><br>
<span class="lineno"></span><span class="op" id="1689699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1689702">func</span>&nbsp;<span class="ident" id="1689707">fintto64</span><span class="op" id="1689715">(</span><span class="ident" id="1689716">val</span>&nbsp;<span class="ident" id="1689720">int64</span><span class="op" id="1689725">)</span>&nbsp;<span class="op" id="1689727">(</span><span class="ident" id="1689728">f</span>&nbsp;<span class="ident" id="1689730">uint64</span><span class="op" id="1689736">)</span>&nbsp;<span class="op" id="1689738">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689741">fs</span>&nbsp;<span class="op" id="1689744">:=</span>&nbsp;<span class="ident" id="1689747">uint64</span><span class="op" id="1689753">(</span><span class="ident" id="1689754">val</span><span class="op" id="1689757">)</span>&nbsp;<span class="op" id="1689759">&amp;</span>&nbsp;<span class="op" id="1689761">(</span><span class="num" id="1689762">1</span>&nbsp;<span class="op" id="1689764">&lt;&lt;</span>&nbsp;<span class="num" id="1689767">63</span><span class="op" id="1689769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689772">mant</span>&nbsp;<span class="op" id="1689777">:=</span>&nbsp;<span class="ident" id="1689780">uint64</span><span class="op" id="1689786">(</span><span class="ident" id="1689787">val</span><span class="op" id="1689790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689793">if</span>&nbsp;<span class="ident" id="1689796">fs</span>&nbsp;<span class="op" id="1689799">!=</span>&nbsp;<span class="num" id="1689802">0</span>&nbsp;<span class="op" id="1689804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689808">mant</span>&nbsp;<span class="op" id="1689813">=</span>&nbsp;<span class="op" id="1689815">-</span><span class="ident" id="1689816">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689822">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689825">return</span>&nbsp;<span class="ident" id="1689832">fpack64</span><span class="op" id="1689839">(</span><span class="ident" id="1689840">fs</span><span class="op" id="1689842">,</span>&nbsp;<span class="ident" id="1689844">mant</span><span class="op" id="1689848">,</span>&nbsp;<span class="builtintype" id="1689850">int</span><span class="op" id="1689853">(</span><span class="ident" id="1689854">mantbits64</span><span class="op" id="1689864">)</span><span class="op" id="1689865">,</span>&nbsp;<span class="num" id="1689867">0</span><span class="op" id="1689868">)</span><br>
<span class="lineno"></span><span class="op" id="1689870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1689873">//&nbsp;64x64&nbsp;-&gt;&nbsp;128&nbsp;multiply.</span><br>
<span class="lineno"></span><span class="comment" id="1689899">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight.</span><br>
<span class="lineno">420</span><span class="keyword" id="1689933">func</span>&nbsp;<span class="ident" id="1689938">mullu</span><span class="op" id="1689943">(</span><span class="ident" id="1689944">u</span><span class="op" id="1689945">,</span>&nbsp;<span class="ident" id="1689947">v</span>&nbsp;<span class="ident" id="1689949">uint64</span><span class="op" id="1689955">)</span>&nbsp;<span class="op" id="1689957">(</span><span class="ident" id="1689958">lo</span><span class="op" id="1689960">,</span>&nbsp;<span class="ident" id="1689962">hi</span>&nbsp;<span class="ident" id="1689965">uint64</span><span class="op" id="1689971">)</span>&nbsp;<span class="op" id="1689973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1689976">const</span>&nbsp;<span class="op" id="1689982">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689986">s</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1689991">=</span>&nbsp;<span class="num" id="1689993">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1689998">mask</span>&nbsp;<span class="op" id="1690003">=</span>&nbsp;<span class="num" id="1690005">1</span><span class="op" id="1690006">&lt;&lt;</span><span class="ident" id="1690008">s</span>&nbsp;<span class="op" id="1690010">-</span>&nbsp;<span class="num" id="1690012">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690015">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690018">u0</span>&nbsp;<span class="op" id="1690021">:=</span>&nbsp;<span class="ident" id="1690024">u</span>&nbsp;<span class="op" id="1690026">&amp;</span>&nbsp;<span class="ident" id="1690028">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690034">u1</span>&nbsp;<span class="op" id="1690037">:=</span>&nbsp;<span class="ident" id="1690040">u</span>&nbsp;<span class="op" id="1690042">&gt;&gt;</span>&nbsp;<span class="ident" id="1690045">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690048">v0</span>&nbsp;<span class="op" id="1690051">:=</span>&nbsp;<span class="ident" id="1690054">v</span>&nbsp;<span class="op" id="1690056">&amp;</span>&nbsp;<span class="ident" id="1690058">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690064">v1</span>&nbsp;<span class="op" id="1690067">:=</span>&nbsp;<span class="ident" id="1690070">v</span>&nbsp;<span class="op" id="1690072">&gt;&gt;</span>&nbsp;<span class="ident" id="1690075">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690078">w0</span>&nbsp;<span class="op" id="1690081">:=</span>&nbsp;<span class="ident" id="1690084">u0</span>&nbsp;<span class="op" id="1690087">*</span>&nbsp;<span class="ident" id="1690089">v0</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690093">t</span>&nbsp;<span class="op" id="1690095">:=</span>&nbsp;<span class="ident" id="1690098">u1</span><span class="op" id="1690100">*</span><span class="ident" id="1690101">v0</span>&nbsp;<span class="op" id="1690104">+</span>&nbsp;<span class="ident" id="1690106">w0</span><span class="op" id="1690108">&gt;&gt;</span><span class="ident" id="1690110">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690113">w1</span>&nbsp;<span class="op" id="1690116">:=</span>&nbsp;<span class="ident" id="1690119">t</span>&nbsp;<span class="op" id="1690121">&amp;</span>&nbsp;<span class="ident" id="1690123">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690129">w2</span>&nbsp;<span class="op" id="1690132">:=</span>&nbsp;<span class="ident" id="1690135">t</span>&nbsp;<span class="op" id="1690137">&gt;&gt;</span>&nbsp;<span class="ident" id="1690140">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690143">w1</span>&nbsp;<span class="op" id="1690146">+=</span>&nbsp;<span class="ident" id="1690149">u0</span>&nbsp;<span class="op" id="1690152">*</span>&nbsp;<span class="ident" id="1690154">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690158">return</span>&nbsp;<span class="ident" id="1690165">u</span>&nbsp;<span class="op" id="1690167">*</span>&nbsp;<span class="ident" id="1690169">v</span><span class="op" id="1690170">,</span>&nbsp;<span class="ident" id="1690172">u1</span><span class="op" id="1690174">*</span><span class="ident" id="1690175">v1</span>&nbsp;<span class="op" id="1690178">+</span>&nbsp;<span class="ident" id="1690180">w2</span>&nbsp;<span class="op" id="1690183">+</span>&nbsp;<span class="ident" id="1690185">w1</span><span class="op" id="1690187">&gt;&gt;</span><span class="ident" id="1690189">s</span><br>
<span class="lineno">435</span><span class="op" id="1690191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1690194">//&nbsp;128/64&nbsp;-&gt;&nbsp;64&nbsp;quotient,&nbsp;64&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1690234">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight</span><br>
<span class="lineno"></span><span class="keyword" id="1690267">func</span>&nbsp;<span class="ident" id="1690272">divlu</span><span class="op" id="1690277">(</span><span class="ident" id="1690278">u1</span><span class="op" id="1690280">,</span>&nbsp;<span class="ident" id="1690282">u0</span><span class="op" id="1690284">,</span>&nbsp;<span class="ident" id="1690286">v</span>&nbsp;<span class="ident" id="1690288">uint64</span><span class="op" id="1690294">)</span>&nbsp;<span class="op" id="1690296">(</span><span class="ident" id="1690297">q</span><span class="op" id="1690298">,</span>&nbsp;<span class="ident" id="1690300">r</span>&nbsp;<span class="ident" id="1690302">uint64</span><span class="op" id="1690308">)</span>&nbsp;<span class="op" id="1690310">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690313">const</span>&nbsp;<span class="ident" id="1690319">b</span>&nbsp;<span class="op" id="1690321">=</span>&nbsp;<span class="num" id="1690323">1</span>&nbsp;<span class="op" id="1690325">&lt;&lt;</span>&nbsp;<span class="num" id="1690328">32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690333">if</span>&nbsp;<span class="ident" id="1690336">u1</span>&nbsp;<span class="op" id="1690339">&gt;=</span>&nbsp;<span class="ident" id="1690342">v</span>&nbsp;<span class="op" id="1690344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690348">return</span>&nbsp;<span class="num" id="1690355">1</span><span class="op" id="1690356">&lt;&lt;</span><span class="num" id="1690358">64</span>&nbsp;<span class="op" id="1690361">-</span>&nbsp;<span class="num" id="1690363">1</span><span class="op" id="1690364">,</span>&nbsp;<span class="num" id="1690366">1</span><span class="op" id="1690367">&lt;&lt;</span><span class="num" id="1690369">64</span>&nbsp;<span class="op" id="1690372">-</span>&nbsp;<span class="num" id="1690374">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690377">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1690381">//&nbsp;s&nbsp;=&nbsp;nlz(v);&nbsp;v&nbsp;&lt;&lt;=&nbsp;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690405">s</span>&nbsp;<span class="op" id="1690407">:=</span>&nbsp;<span class="builtintype" id="1690410">uint</span><span class="op" id="1690414">(</span><span class="num" id="1690415">0</span><span class="op" id="1690416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690419">for</span>&nbsp;<span class="ident" id="1690423">v</span><span class="op" id="1690424">&amp;</span><span class="op" id="1690425">(</span><span class="num" id="1690426">1</span><span class="op" id="1690427">&lt;&lt;</span><span class="num" id="1690429">63</span><span class="op" id="1690431">)</span>&nbsp;<span class="op" id="1690433">==</span>&nbsp;<span class="num" id="1690436">0</span>&nbsp;<span class="op" id="1690438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690442">s</span><span class="op" id="1690443">++</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690448">v</span>&nbsp;<span class="op" id="1690450">&lt;&lt;=</span>&nbsp;<span class="num" id="1690454">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690461">vn1</span>&nbsp;<span class="op" id="1690465">:=</span>&nbsp;<span class="ident" id="1690468">v</span>&nbsp;<span class="op" id="1690470">&gt;&gt;</span>&nbsp;<span class="num" id="1690473">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690477">vn0</span>&nbsp;<span class="op" id="1690481">:=</span>&nbsp;<span class="ident" id="1690484">v</span>&nbsp;<span class="op" id="1690486">&amp;</span>&nbsp;<span class="op" id="1690488">(</span><span class="num" id="1690489">1</span><span class="op" id="1690490">&lt;&lt;</span><span class="num" id="1690492">32</span>&nbsp;<span class="op" id="1690495">-</span>&nbsp;<span class="num" id="1690497">1</span><span class="op" id="1690498">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690501">un32</span>&nbsp;<span class="op" id="1690506">:=</span>&nbsp;<span class="ident" id="1690509">u1</span><span class="op" id="1690511">&lt;&lt;</span><span class="ident" id="1690513">s</span>&nbsp;<span class="op" id="1690515">|</span>&nbsp;<span class="ident" id="1690517">u0</span><span class="op" id="1690519">&gt;&gt;</span><span class="op" id="1690521">(</span><span class="num" id="1690522">64</span><span class="op" id="1690524">-</span><span class="ident" id="1690525">s</span><span class="op" id="1690526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690529">un10</span>&nbsp;<span class="op" id="1690534">:=</span>&nbsp;<span class="ident" id="1690537">u0</span>&nbsp;<span class="op" id="1690540">&lt;&lt;</span>&nbsp;<span class="ident" id="1690543">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690546">un1</span>&nbsp;<span class="op" id="1690550">:=</span>&nbsp;<span class="ident" id="1690553">un10</span>&nbsp;<span class="op" id="1690558">&gt;&gt;</span>&nbsp;<span class="num" id="1690561">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690565">un0</span>&nbsp;<span class="op" id="1690569">:=</span>&nbsp;<span class="ident" id="1690572">un10</span>&nbsp;<span class="op" id="1690577">&amp;</span>&nbsp;<span class="op" id="1690579">(</span><span class="num" id="1690580">1</span><span class="op" id="1690581">&lt;&lt;</span><span class="num" id="1690583">32</span>&nbsp;<span class="op" id="1690586">-</span>&nbsp;<span class="num" id="1690588">1</span><span class="op" id="1690589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690592">q1</span>&nbsp;<span class="op" id="1690595">:=</span>&nbsp;<span class="ident" id="1690598">un32</span>&nbsp;<span class="op" id="1690603">/</span>&nbsp;<span class="ident" id="1690605">vn1</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690610">rhat</span>&nbsp;<span class="op" id="1690615">:=</span>&nbsp;<span class="ident" id="1690618">un32</span>&nbsp;<span class="op" id="1690623">-</span>&nbsp;<span class="ident" id="1690625">q1</span><span class="op" id="1690627">*</span><span class="ident" id="1690628">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1690633">again1</span><span class="op" id="1690639">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690642">if</span>&nbsp;<span class="ident" id="1690645">q1</span>&nbsp;<span class="op" id="1690648">&gt;=</span>&nbsp;<span class="ident" id="1690651">b</span>&nbsp;<span class="op" id="1690653">||</span>&nbsp;<span class="ident" id="1690656">q1</span><span class="op" id="1690658">*</span><span class="ident" id="1690659">vn0</span>&nbsp;<span class="op" id="1690663">&gt;</span>&nbsp;<span class="ident" id="1690665">b</span><span class="op" id="1690666">*</span><span class="ident" id="1690667">rhat</span><span class="op" id="1690671">+</span><span class="ident" id="1690672">un1</span>&nbsp;<span class="op" id="1690676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690680">q1</span><span class="op" id="1690682">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690687">rhat</span>&nbsp;<span class="op" id="1690692">+=</span>&nbsp;<span class="ident" id="1690695">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690701">if</span>&nbsp;<span class="ident" id="1690704">rhat</span>&nbsp;<span class="op" id="1690709">&lt;</span>&nbsp;<span class="ident" id="1690711">b</span>&nbsp;<span class="op" id="1690713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690718">goto</span>&nbsp;<span class="ident" id="1690723">again1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690735">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690739">un21</span>&nbsp;<span class="op" id="1690744">:=</span>&nbsp;<span class="ident" id="1690747">un32</span><span class="op" id="1690751">*</span><span class="ident" id="1690752">b</span>&nbsp;<span class="op" id="1690754">+</span>&nbsp;<span class="ident" id="1690756">un1</span>&nbsp;<span class="op" id="1690760">-</span>&nbsp;<span class="ident" id="1690762">q1</span><span class="op" id="1690764">*</span><span class="ident" id="1690765">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690768">q0</span>&nbsp;<span class="op" id="1690771">:=</span>&nbsp;<span class="ident" id="1690774">un21</span>&nbsp;<span class="op" id="1690779">/</span>&nbsp;<span class="ident" id="1690781">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690786">rhat</span>&nbsp;<span class="op" id="1690791">=</span>&nbsp;<span class="ident" id="1690793">un21</span>&nbsp;<span class="op" id="1690798">-</span>&nbsp;<span class="ident" id="1690800">q0</span><span class="op" id="1690802">*</span><span class="ident" id="1690803">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="ident" id="1690808">again2</span><span class="op" id="1690814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690817">if</span>&nbsp;<span class="ident" id="1690820">q0</span>&nbsp;<span class="op" id="1690823">&gt;=</span>&nbsp;<span class="ident" id="1690826">b</span>&nbsp;<span class="op" id="1690828">||</span>&nbsp;<span class="ident" id="1690831">q0</span><span class="op" id="1690833">*</span><span class="ident" id="1690834">vn0</span>&nbsp;<span class="op" id="1690838">&gt;</span>&nbsp;<span class="ident" id="1690840">b</span><span class="op" id="1690841">*</span><span class="ident" id="1690842">rhat</span><span class="op" id="1690846">+</span><span class="ident" id="1690847">un0</span>&nbsp;<span class="op" id="1690851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690855">q0</span><span class="op" id="1690857">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1690862">rhat</span>&nbsp;<span class="op" id="1690867">+=</span>&nbsp;<span class="ident" id="1690870">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690876">if</span>&nbsp;<span class="ident" id="1690879">rhat</span>&nbsp;<span class="op" id="1690884">&lt;</span>&nbsp;<span class="ident" id="1690886">b</span>&nbsp;<span class="op" id="1690888">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690893">goto</span>&nbsp;<span class="ident" id="1690898">again2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1690910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1690914">return</span>&nbsp;<span class="ident" id="1690921">q1</span><span class="op" id="1690923">*</span><span class="ident" id="1690924">b</span>&nbsp;<span class="op" id="1690926">+</span>&nbsp;<span class="ident" id="1690928">q0</span><span class="op" id="1690930">,</span>&nbsp;<span class="op" id="1690932">(</span><span class="ident" id="1690933">un21</span><span class="op" id="1690937">*</span><span class="ident" id="1690938">b</span>&nbsp;<span class="op" id="1690940">+</span>&nbsp;<span class="ident" id="1690942">un0</span>&nbsp;<span class="op" id="1690946">-</span>&nbsp;<span class="ident" id="1690948">q0</span><span class="op" id="1690950">*</span><span class="ident" id="1690951">v</span><span class="op" id="1690952">)</span>&nbsp;<span class="op" id="1690954">&gt;&gt;</span>&nbsp;<span class="ident" id="1690957">s</span><br>
<span class="lineno">485</span><span class="op" id="1690959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1690962">//&nbsp;callable&nbsp;from&nbsp;C</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690982">func</span>&nbsp;<span class="ident" id="1690987">fadd64c</span><span class="op" id="1690994">(</span><span class="ident" id="1690995">f</span><span class="op" id="1690996">,</span>&nbsp;<span class="ident" id="1690998">g</span>&nbsp;<span class="ident" id="1691000">uint64</span><span class="op" id="1691006">,</span>&nbsp;<span class="ident" id="1691008">ret</span>&nbsp;<span class="op" id="1691012">*</span><span class="ident" id="1691013">uint64</span><span class="op" id="1691019">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691032">{</span>&nbsp;<span class="op" id="1691034">*</span><span class="ident" id="1691035">ret</span>&nbsp;<span class="op" id="1691039">=</span>&nbsp;<span class="ident" id="1691041">fadd64</span><span class="op" id="1691047">(</span><span class="ident" id="1691048">f</span><span class="op" id="1691049">,</span>&nbsp;<span class="ident" id="1691051">g</span><span class="op" id="1691052">)</span>&nbsp;<span class="op" id="1691054">}</span><br>
<span class="lineno">490</span><span class="keyword" id="1691056">func</span>&nbsp;<span class="ident" id="1691061">fsub64c</span><span class="op" id="1691068">(</span><span class="ident" id="1691069">f</span><span class="op" id="1691070">,</span>&nbsp;<span class="ident" id="1691072">g</span>&nbsp;<span class="ident" id="1691074">uint64</span><span class="op" id="1691080">,</span>&nbsp;<span class="ident" id="1691082">ret</span>&nbsp;<span class="op" id="1691086">*</span><span class="ident" id="1691087">uint64</span><span class="op" id="1691093">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691106">{</span>&nbsp;<span class="op" id="1691108">*</span><span class="ident" id="1691109">ret</span>&nbsp;<span class="op" id="1691113">=</span>&nbsp;<span class="ident" id="1691115">fsub64</span><span class="op" id="1691121">(</span><span class="ident" id="1691122">f</span><span class="op" id="1691123">,</span>&nbsp;<span class="ident" id="1691125">g</span><span class="op" id="1691126">)</span>&nbsp;<span class="op" id="1691128">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691130">func</span>&nbsp;<span class="ident" id="1691135">fmul64c</span><span class="op" id="1691142">(</span><span class="ident" id="1691143">f</span><span class="op" id="1691144">,</span>&nbsp;<span class="ident" id="1691146">g</span>&nbsp;<span class="ident" id="1691148">uint64</span><span class="op" id="1691154">,</span>&nbsp;<span class="ident" id="1691156">ret</span>&nbsp;<span class="op" id="1691160">*</span><span class="ident" id="1691161">uint64</span><span class="op" id="1691167">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691180">{</span>&nbsp;<span class="op" id="1691182">*</span><span class="ident" id="1691183">ret</span>&nbsp;<span class="op" id="1691187">=</span>&nbsp;<span class="ident" id="1691189">fmul64</span><span class="op" id="1691195">(</span><span class="ident" id="1691196">f</span><span class="op" id="1691197">,</span>&nbsp;<span class="ident" id="1691199">g</span><span class="op" id="1691200">)</span>&nbsp;<span class="op" id="1691202">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691204">func</span>&nbsp;<span class="ident" id="1691209">fdiv64c</span><span class="op" id="1691216">(</span><span class="ident" id="1691217">f</span><span class="op" id="1691218">,</span>&nbsp;<span class="ident" id="1691220">g</span>&nbsp;<span class="ident" id="1691222">uint64</span><span class="op" id="1691228">,</span>&nbsp;<span class="ident" id="1691230">ret</span>&nbsp;<span class="op" id="1691234">*</span><span class="ident" id="1691235">uint64</span><span class="op" id="1691241">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691254">{</span>&nbsp;<span class="op" id="1691256">*</span><span class="ident" id="1691257">ret</span>&nbsp;<span class="op" id="1691261">=</span>&nbsp;<span class="ident" id="1691263">fdiv64</span><span class="op" id="1691269">(</span><span class="ident" id="1691270">f</span><span class="op" id="1691271">,</span>&nbsp;<span class="ident" id="1691273">g</span><span class="op" id="1691274">)</span>&nbsp;<span class="op" id="1691276">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691278">func</span>&nbsp;<span class="ident" id="1691283">fneg64c</span><span class="op" id="1691290">(</span><span class="ident" id="1691291">f</span>&nbsp;<span class="ident" id="1691293">uint64</span><span class="op" id="1691299">,</span>&nbsp;<span class="ident" id="1691301">ret</span>&nbsp;<span class="op" id="1691305">*</span><span class="ident" id="1691306">uint64</span><span class="op" id="1691312">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691328">{</span>&nbsp;<span class="op" id="1691330">*</span><span class="ident" id="1691331">ret</span>&nbsp;<span class="op" id="1691335">=</span>&nbsp;<span class="ident" id="1691337">fneg64</span><span class="op" id="1691343">(</span><span class="ident" id="1691344">f</span><span class="op" id="1691345">)</span>&nbsp;<span class="op" id="1691347">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691349">func</span>&nbsp;<span class="ident" id="1691354">f32to64c</span><span class="op" id="1691362">(</span><span class="ident" id="1691363">f</span>&nbsp;<span class="builtintype" id="1691365">uint32</span><span class="op" id="1691371">,</span>&nbsp;<span class="ident" id="1691373">ret</span>&nbsp;<span class="op" id="1691377">*</span><span class="ident" id="1691378">uint64</span><span class="op" id="1691384">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691399">{</span>&nbsp;<span class="op" id="1691401">*</span><span class="ident" id="1691402">ret</span>&nbsp;<span class="op" id="1691406">=</span>&nbsp;<span class="ident" id="1691408">f32to64</span><span class="op" id="1691415">(</span><span class="ident" id="1691416">f</span><span class="op" id="1691417">)</span>&nbsp;<span class="op" id="1691419">}</span><br>
<span class="lineno">495</span><span class="keyword" id="1691421">func</span>&nbsp;<span class="ident" id="1691426">f64to32c</span><span class="op" id="1691434">(</span><span class="ident" id="1691435">f</span>&nbsp;<span class="ident" id="1691437">uint64</span><span class="op" id="1691443">,</span>&nbsp;<span class="ident" id="1691445">ret</span>&nbsp;<span class="op" id="1691449">*</span><span class="builtintype" id="1691450">uint32</span><span class="op" id="1691456">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691471">{</span>&nbsp;<span class="op" id="1691473">*</span><span class="ident" id="1691474">ret</span>&nbsp;<span class="op" id="1691478">=</span>&nbsp;<span class="ident" id="1691480">f64to32</span><span class="op" id="1691487">(</span><span class="ident" id="1691488">f</span><span class="op" id="1691489">)</span>&nbsp;<span class="op" id="1691491">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691493">func</span>&nbsp;<span class="ident" id="1691498">fcmp64c</span><span class="op" id="1691505">(</span><span class="ident" id="1691506">f</span><span class="op" id="1691507">,</span>&nbsp;<span class="ident" id="1691509">g</span>&nbsp;<span class="ident" id="1691511">uint64</span><span class="op" id="1691517">,</span>&nbsp;<span class="ident" id="1691519">ret</span>&nbsp;<span class="op" id="1691523">*</span><span class="builtintype" id="1691524">int</span><span class="op" id="1691527">,</span>&nbsp;<span class="ident" id="1691529">retnan</span>&nbsp;<span class="op" id="1691536">*</span><span class="builtintype" id="1691537">bool</span><span class="op" id="1691541">)</span>&nbsp;<span class="op" id="1691543">{</span>&nbsp;<span class="op" id="1691545">*</span><span class="ident" id="1691546">ret</span><span class="op" id="1691549">,</span>&nbsp;<span class="op" id="1691551">*</span><span class="ident" id="1691552">retnan</span>&nbsp;<span class="op" id="1691559">=</span>&nbsp;<span class="ident" id="1691561">fcmp64</span><span class="op" id="1691567">(</span><span class="ident" id="1691568">f</span><span class="op" id="1691569">,</span>&nbsp;<span class="ident" id="1691571">g</span><span class="op" id="1691572">)</span>&nbsp;<span class="op" id="1691574">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691576">func</span>&nbsp;<span class="ident" id="1691581">fintto64c</span><span class="op" id="1691590">(</span><span class="ident" id="1691591">val</span>&nbsp;<span class="ident" id="1691595">int64</span><span class="op" id="1691600">,</span>&nbsp;<span class="ident" id="1691602">ret</span>&nbsp;<span class="op" id="1691606">*</span><span class="ident" id="1691607">uint64</span><span class="op" id="1691613">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1691626">{</span>&nbsp;<span class="op" id="1691628">*</span><span class="ident" id="1691629">ret</span>&nbsp;<span class="op" id="1691633">=</span>&nbsp;<span class="ident" id="1691635">fintto64</span><span class="op" id="1691643">(</span><span class="ident" id="1691644">val</span><span class="op" id="1691647">)</span>&nbsp;<span class="op" id="1691649">}</span><br>
<span class="lineno"></span><span class="keyword" id="1691651">func</span>&nbsp;<span class="ident" id="1691656">f64tointc</span><span class="op" id="1691665">(</span><span class="ident" id="1691666">f</span>&nbsp;<span class="ident" id="1691668">uint64</span><span class="op" id="1691674">,</span>&nbsp;<span class="ident" id="1691676">ret</span>&nbsp;<span class="op" id="1691680">*</span><span class="ident" id="1691681">int64</span><span class="op" id="1691686">,</span>&nbsp;<span class="ident" id="1691688">retok</span>&nbsp;<span class="op" id="1691694">*</span><span class="builtintype" id="1691695">bool</span><span class="op" id="1691699">)</span>&nbsp;<span class="op" id="1691701">{</span>&nbsp;<span class="op" id="1691703">*</span><span class="ident" id="1691704">ret</span><span class="op" id="1691707">,</span>&nbsp;<span class="op" id="1691709">*</span><span class="ident" id="1691710">retok</span>&nbsp;<span class="op" id="1691716">=</span>&nbsp;<span class="ident" id="1691718">f64toint</span><span class="op" id="1691726">(</span><span class="ident" id="1691727">f</span><span class="op" id="1691728">)</span>&nbsp;<span class="op" id="1691730">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
