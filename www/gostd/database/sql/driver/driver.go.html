<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3887557">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3887612">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3887666">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3887717">//&nbsp;Package&nbsp;driver&nbsp;defines&nbsp;interfaces&nbsp;to&nbsp;be&nbsp;implemented&nbsp;by&nbsp;database</span><br>
<span class="lineno"></span><span class="comment" id="3887784">//&nbsp;drivers&nbsp;as&nbsp;used&nbsp;by&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="comment" id="3887819">//</span><br>
<span class="lineno"></span><span class="comment" id="3887822">//&nbsp;Most&nbsp;code&nbsp;should&nbsp;use&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="keyword" id="3887859">package</span>&nbsp;<span class="ident" id="3887867">driver</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3887875">import</span>&nbsp;<span class="string" id="3887882">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3887892">//&nbsp;Value&nbsp;is&nbsp;a&nbsp;value&nbsp;that&nbsp;drivers&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;handle.</span><br>
<span class="lineno"></span><span class="comment" id="3887949">//&nbsp;It&nbsp;is&nbsp;either&nbsp;nil&nbsp;or&nbsp;an&nbsp;instance&nbsp;of&nbsp;one&nbsp;of&nbsp;these&nbsp;types:</span><br>
<span class="lineno">15</span><span class="comment" id="3888007">//</span><br>
<span class="lineno"></span><span class="comment" id="3888010">//&nbsp;&nbsp;&nbsp;int64</span><br>
<span class="lineno"></span><span class="comment" id="3888021">//&nbsp;&nbsp;&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="3888034">//&nbsp;&nbsp;&nbsp;bool</span><br>
<span class="lineno"></span><span class="comment" id="3888044">//&nbsp;&nbsp;&nbsp;[]byte</span><br>
<span class="lineno">20</span><span class="comment" id="3888056">//&nbsp;&nbsp;&nbsp;string&nbsp;&nbsp;&nbsp;[*]&nbsp;everywhere&nbsp;except&nbsp;from&nbsp;Rows.Next.</span><br>
<span class="lineno"></span><span class="comment" id="3888108">//&nbsp;&nbsp;&nbsp;time.Time</span><br>
<span class="lineno"></span><span class="keyword" id="3888123">type</span>&nbsp;<span class="ident" id="3888128">Value</span>&nbsp;<span class="keyword" id="3888134">interface</span><span class="op" id="3888143">{</span><span class="op" id="3888144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3888147">//&nbsp;Driver&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;must&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;database</span><br>
<span class="lineno">25</span><span class="comment" id="3888213">//&nbsp;driver.</span><br>
<span class="lineno"></span><span class="keyword" id="3888224">type</span>&nbsp;<span class="ident" id="3888229">Driver</span>&nbsp;<span class="keyword" id="3888236">interface</span>&nbsp;<span class="op" id="3888246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888249">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;database.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888300">//&nbsp;The&nbsp;name&nbsp;is&nbsp;a&nbsp;string&nbsp;in&nbsp;a&nbsp;driver-specific&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888354">//</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888358">//&nbsp;Open&nbsp;may&nbsp;return&nbsp;a&nbsp;cached&nbsp;connection&nbsp;(one&nbsp;previously</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888414">//&nbsp;closed),&nbsp;but&nbsp;doing&nbsp;so&nbsp;is&nbsp;unnecessary;&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888472">//&nbsp;maintains&nbsp;a&nbsp;pool&nbsp;of&nbsp;idle&nbsp;connections&nbsp;for&nbsp;efficient&nbsp;re-use.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888535">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888539">//&nbsp;The&nbsp;returned&nbsp;connection&nbsp;is&nbsp;only&nbsp;used&nbsp;by&nbsp;one&nbsp;goroutine&nbsp;at&nbsp;a</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3888602">//&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3888612">Open</span><span class="op" id="3888616">(</span><span class="ident" id="3888617">name</span>&nbsp;<span class="builtintype" id="3888622">string</span><span class="op" id="3888628">)</span>&nbsp;<span class="op" id="3888630">(</span><span class="ident" id="3888631">Conn</span><span class="op" id="3888635">,</span>&nbsp;<span class="builtintype" id="3888637">error</span><span class="op" id="3888642">)</span><br>
<span class="lineno"></span><span class="op" id="3888644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3888647">//&nbsp;ErrSkip&nbsp;may&nbsp;be&nbsp;returned&nbsp;by&nbsp;some&nbsp;optional&nbsp;interfaces&#39;&nbsp;methods&nbsp;to</span><br>
<span class="lineno">40</span><span class="comment" id="3888714">//&nbsp;indicate&nbsp;at&nbsp;runtime&nbsp;that&nbsp;the&nbsp;fast&nbsp;path&nbsp;is&nbsp;unavailable&nbsp;and&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="3888783">//&nbsp;package&nbsp;should&nbsp;continue&nbsp;as&nbsp;if&nbsp;the&nbsp;optional&nbsp;interface&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3888847">//&nbsp;implemented.&nbsp;ErrSkip&nbsp;is&nbsp;only&nbsp;supported&nbsp;where&nbsp;explicitly</span><br>
<span class="lineno"></span><span class="comment" id="3888906">//&nbsp;documented.</span><br>
<span class="lineno"></span><span class="keyword" id="3888921">var</span>&nbsp;<span class="ident" id="3888925">ErrSkip</span>&nbsp;<span class="op" id="3888933">=</span>&nbsp;<span class="ident" id="3888935">errors</span><span class="op" id="3888941">.</span><span class="ident" id="3888942">New</span><span class="op" id="3888945">(</span><span class="string" id="3888946">&#34;driver:&nbsp;skip&nbsp;fast-path;&nbsp;continue&nbsp;as&nbsp;if&nbsp;unimplemented&#34;</span><span class="op" id="3889000">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3889003">//&nbsp;ErrBadConn&nbsp;should&nbsp;be&nbsp;returned&nbsp;by&nbsp;a&nbsp;driver&nbsp;to&nbsp;signal&nbsp;to&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="3889069">//&nbsp;package&nbsp;that&nbsp;a&nbsp;driver.Conn&nbsp;is&nbsp;in&nbsp;a&nbsp;bad&nbsp;state&nbsp;(such&nbsp;as&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="3889137">//&nbsp;having&nbsp;earlier&nbsp;closed&nbsp;the&nbsp;connection)&nbsp;and&nbsp;the&nbsp;sql&nbsp;package&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="3889205">//&nbsp;retry&nbsp;on&nbsp;a&nbsp;new&nbsp;connection.</span><br>
<span class="lineno">50</span><span class="comment" id="3889235">//</span><br>
<span class="lineno"></span><span class="comment" id="3889238">//&nbsp;To&nbsp;prevent&nbsp;duplicate&nbsp;operations,&nbsp;ErrBadConn&nbsp;should&nbsp;NOT&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="3889308">//&nbsp;if&nbsp;there&#39;s&nbsp;a&nbsp;possibility&nbsp;that&nbsp;the&nbsp;database&nbsp;server&nbsp;might&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="3889372">//&nbsp;performed&nbsp;the&nbsp;operation.&nbsp;Even&nbsp;if&nbsp;the&nbsp;server&nbsp;sends&nbsp;back&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="3889440">//&nbsp;you&nbsp;shouldn&#39;t&nbsp;return&nbsp;ErrBadConn.</span><br>
<span class="lineno">55</span><span class="keyword" id="3889476">var</span>&nbsp;<span class="ident" id="3889480">ErrBadConn</span>&nbsp;<span class="op" id="3889491">=</span>&nbsp;<span class="ident" id="3889493">errors</span><span class="op" id="3889499">.</span><span class="ident" id="3889500">New</span><span class="op" id="3889503">(</span><span class="string" id="3889504">&#34;driver:&nbsp;bad&nbsp;connection&#34;</span><span class="op" id="3889528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3889531">//&nbsp;Execer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="3889601">//</span><br>
<span class="lineno"></span><span class="comment" id="3889604">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Execer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Exec&nbsp;will</span><br>
<span class="lineno">60</span><span class="comment" id="3889675">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3889743">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="3889757">//</span><br>
<span class="lineno"></span><span class="comment" id="3889760">//&nbsp;Exec&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno"></span><span class="keyword" id="3889788">type</span>&nbsp;<span class="ident" id="3889793">Execer</span>&nbsp;<span class="keyword" id="3889800">interface</span>&nbsp;<span class="op" id="3889810">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3889813">Exec</span><span class="op" id="3889817">(</span><span class="ident" id="3889818">query</span>&nbsp;<span class="builtintype" id="3889824">string</span><span class="op" id="3889830">,</span>&nbsp;<span class="ident" id="3889832">args</span>&nbsp;<span class="op" id="3889837">[</span><span class="op" id="3889838">]</span><span class="ident" id="3889839">Value</span><span class="op" id="3889844">)</span>&nbsp;<span class="op" id="3889846">(</span><span class="ident" id="3889847">Result</span><span class="op" id="3889853">,</span>&nbsp;<span class="builtintype" id="3889855">error</span><span class="op" id="3889860">)</span><br>
<span class="lineno"></span><span class="op" id="3889862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3889865">//&nbsp;Queryer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="3889936">//</span><br>
<span class="lineno">70</span><span class="comment" id="3889939">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Queryer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Query&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3890012">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3890080">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="3890094">//</span><br>
<span class="lineno"></span><span class="comment" id="3890097">//&nbsp;Query&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno">75</span><span class="keyword" id="3890126">type</span>&nbsp;<span class="ident" id="3890131">Queryer</span>&nbsp;<span class="keyword" id="3890139">interface</span>&nbsp;<span class="op" id="3890149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3890152">Query</span><span class="op" id="3890157">(</span><span class="ident" id="3890158">query</span>&nbsp;<span class="builtintype" id="3890164">string</span><span class="op" id="3890170">,</span>&nbsp;<span class="ident" id="3890172">args</span>&nbsp;<span class="op" id="3890177">[</span><span class="op" id="3890178">]</span><span class="ident" id="3890179">Value</span><span class="op" id="3890184">)</span>&nbsp;<span class="op" id="3890186">(</span><span class="ident" id="3890187">Rows</span><span class="op" id="3890191">,</span>&nbsp;<span class="builtintype" id="3890193">error</span><span class="op" id="3890198">)</span><br>
<span class="lineno"></span><span class="op" id="3890200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3890203">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;database.&nbsp;It&nbsp;is&nbsp;not&nbsp;used&nbsp;concurrently</span><br>
<span class="lineno">80</span><span class="comment" id="3890270">//&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="3890297">//</span><br>
<span class="lineno"></span><span class="comment" id="3890300">//&nbsp;Conn&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;stateful.</span><br>
<span class="lineno"></span><span class="keyword" id="3890335">type</span>&nbsp;<span class="ident" id="3890340">Conn</span>&nbsp;<span class="keyword" id="3890345">interface</span>&nbsp;<span class="op" id="3890355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890358">//&nbsp;Prepare&nbsp;returns&nbsp;a&nbsp;prepared&nbsp;statement,&nbsp;bound&nbsp;to&nbsp;this&nbsp;connection.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3890426">Prepare</span><span class="op" id="3890433">(</span><span class="ident" id="3890434">query</span>&nbsp;<span class="builtintype" id="3890440">string</span><span class="op" id="3890446">)</span>&nbsp;<span class="op" id="3890448">(</span><span class="ident" id="3890449">Stmt</span><span class="op" id="3890453">,</span>&nbsp;<span class="builtintype" id="3890455">error</span><span class="op" id="3890460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890464">//&nbsp;Close&nbsp;invalidates&nbsp;and&nbsp;potentially&nbsp;stops&nbsp;any&nbsp;current</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890520">//&nbsp;prepared&nbsp;statements&nbsp;and&nbsp;transactions,&nbsp;marking&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890575">//&nbsp;connection&nbsp;as&nbsp;no&nbsp;longer&nbsp;in&nbsp;use.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890611">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890615">//&nbsp;Because&nbsp;the&nbsp;sql&nbsp;package&nbsp;maintains&nbsp;a&nbsp;free&nbsp;pool&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890668">//&nbsp;connections&nbsp;and&nbsp;only&nbsp;calls&nbsp;Close&nbsp;when&nbsp;there&#39;s&nbsp;a&nbsp;surplus&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890731">//&nbsp;idle&nbsp;connections,&nbsp;it&nbsp;shouldn&#39;t&nbsp;be&nbsp;necessary&nbsp;for&nbsp;drivers&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890794">//&nbsp;do&nbsp;their&nbsp;own&nbsp;connection&nbsp;caching.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3890831">Close</span><span class="op" id="3890836">(</span><span class="op" id="3890837">)</span>&nbsp;<span class="builtintype" id="3890839">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890847">//&nbsp;Begin&nbsp;starts&nbsp;and&nbsp;returns&nbsp;a&nbsp;new&nbsp;transaction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3890895">Begin</span><span class="op" id="3890900">(</span><span class="op" id="3890901">)</span>&nbsp;<span class="op" id="3890903">(</span><span class="ident" id="3890904">Tx</span><span class="op" id="3890906">,</span>&nbsp;<span class="builtintype" id="3890908">error</span><span class="op" id="3890913">)</span><br>
<span class="lineno"></span><span class="op" id="3890915">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3890918">//&nbsp;Result&nbsp;is&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;query&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="3890964">type</span>&nbsp;<span class="ident" id="3890969">Result</span>&nbsp;<span class="keyword" id="3890976">interface</span>&nbsp;<span class="op" id="3890986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3890989">//&nbsp;LastInsertId&nbsp;returns&nbsp;the&nbsp;database&#39;s&nbsp;auto-generated&nbsp;ID</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891047">//&nbsp;after,&nbsp;for&nbsp;example,&nbsp;an&nbsp;INSERT&nbsp;into&nbsp;a&nbsp;table&nbsp;with&nbsp;primary</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891107">//&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3891116">LastInsertId</span><span class="op" id="3891128">(</span><span class="op" id="3891129">)</span>&nbsp;<span class="op" id="3891131">(</span><span class="ident" id="3891132">int64</span><span class="op" id="3891137">,</span>&nbsp;<span class="builtintype" id="3891139">error</span><span class="op" id="3891144">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891148">//&nbsp;RowsAffected&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;rows&nbsp;affected&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891208">//&nbsp;query.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3891219">RowsAffected</span><span class="op" id="3891231">(</span><span class="op" id="3891232">)</span>&nbsp;<span class="op" id="3891234">(</span><span class="ident" id="3891235">int64</span><span class="op" id="3891240">,</span>&nbsp;<span class="builtintype" id="3891242">error</span><span class="op" id="3891247">)</span><br>
<span class="lineno"></span><span class="op" id="3891249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3891252">//&nbsp;Stmt&nbsp;is&nbsp;a&nbsp;prepared&nbsp;statement.&nbsp;It&nbsp;is&nbsp;bound&nbsp;to&nbsp;a&nbsp;Conn&nbsp;and&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3891315">//&nbsp;used&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;concurrently.</span><br>
<span class="lineno">115</span><span class="keyword" id="3891360">type</span>&nbsp;<span class="ident" id="3891365">Stmt</span>&nbsp;<span class="keyword" id="3891370">interface</span>&nbsp;<span class="op" id="3891380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891383">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;statement.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891415">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891419">//&nbsp;As&nbsp;of&nbsp;Go&nbsp;1.1,&nbsp;a&nbsp;Stmt&nbsp;will&nbsp;not&nbsp;be&nbsp;closed&nbsp;if&nbsp;it&#39;s&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891478">//&nbsp;by&nbsp;any&nbsp;queries.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3891498">Close</span><span class="op" id="3891503">(</span><span class="op" id="3891504">)</span>&nbsp;<span class="builtintype" id="3891506">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891514">//&nbsp;NumInput&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;placeholder&nbsp;parameters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891573">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891577">//&nbsp;If&nbsp;NumInput&nbsp;returns&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;sql&nbsp;package&nbsp;will&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891641">//&nbsp;argument&nbsp;counts&nbsp;from&nbsp;callers&nbsp;and&nbsp;return&nbsp;errors&nbsp;to&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891706">//&nbsp;before&nbsp;the&nbsp;statement&#39;s&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891767">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891771">//&nbsp;NumInput&nbsp;may&nbsp;also&nbsp;return&nbsp;-1,&nbsp;if&nbsp;the&nbsp;driver&nbsp;doesn&#39;t&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891831">//&nbsp;its&nbsp;number&nbsp;of&nbsp;placeholders.&nbsp;In&nbsp;that&nbsp;case,&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891893">//&nbsp;will&nbsp;not&nbsp;sanity&nbsp;check&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;argument&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3891950">NumInput</span><span class="op" id="3891958">(</span><span class="op" id="3891959">)</span>&nbsp;<span class="builtintype" id="3891961">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3891967">//&nbsp;Exec&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;doesn&#39;t&nbsp;return&nbsp;rows,&nbsp;such</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892024">//&nbsp;as&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3892052">Exec</span><span class="op" id="3892056">(</span><span class="ident" id="3892057">args</span>&nbsp;<span class="op" id="3892062">[</span><span class="op" id="3892063">]</span><span class="ident" id="3892064">Value</span><span class="op" id="3892069">)</span>&nbsp;<span class="op" id="3892071">(</span><span class="ident" id="3892072">Result</span><span class="op" id="3892078">,</span>&nbsp;<span class="builtintype" id="3892080">error</span><span class="op" id="3892085">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892089">//&nbsp;Query&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;may&nbsp;return&nbsp;rows,&nbsp;such&nbsp;as&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892148">//&nbsp;SELECT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3892160">Query</span><span class="op" id="3892165">(</span><span class="ident" id="3892166">args</span>&nbsp;<span class="op" id="3892171">[</span><span class="op" id="3892172">]</span><span class="ident" id="3892173">Value</span><span class="op" id="3892178">)</span>&nbsp;<span class="op" id="3892180">(</span><span class="ident" id="3892181">Rows</span><span class="op" id="3892185">,</span>&nbsp;<span class="builtintype" id="3892187">error</span><span class="op" id="3892192">)</span><br>
<span class="lineno">140</span><span class="op" id="3892194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3892197">//&nbsp;ColumnConverter&nbsp;may&nbsp;be&nbsp;optionally&nbsp;implemented&nbsp;by&nbsp;Stmt&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3892261">//&nbsp;statement&nbsp;is&nbsp;aware&nbsp;of&nbsp;its&nbsp;own&nbsp;columns&#39;&nbsp;types&nbsp;and&nbsp;can&nbsp;convert&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3892330">//&nbsp;any&nbsp;type&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno">145</span><span class="keyword" id="3892361">type</span>&nbsp;<span class="ident" id="3892366">ColumnConverter</span>&nbsp;<span class="keyword" id="3892382">interface</span>&nbsp;<span class="op" id="3892392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892395">//&nbsp;ColumnConverter&nbsp;returns&nbsp;a&nbsp;ValueConverter&nbsp;for&nbsp;the&nbsp;provided</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892457">//&nbsp;column&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;type&nbsp;of&nbsp;a&nbsp;specific&nbsp;column&nbsp;isn&#39;t&nbsp;known</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892521">//&nbsp;or&nbsp;shouldn&#39;t&nbsp;be&nbsp;handled&nbsp;specially,&nbsp;DefaultValueConverter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892582">//&nbsp;can&nbsp;be&nbsp;returned.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3892603">ColumnConverter</span><span class="op" id="3892618">(</span><span class="ident" id="3892619">idx</span>&nbsp;<span class="builtintype" id="3892623">int</span><span class="op" id="3892626">)</span>&nbsp;<span class="ident" id="3892628">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="3892643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3892646">//&nbsp;Rows&nbsp;is&nbsp;an&nbsp;iterator&nbsp;over&nbsp;an&nbsp;executed&nbsp;query&#39;s&nbsp;results.</span><br>
<span class="lineno"></span><span class="keyword" id="3892703">type</span>&nbsp;<span class="ident" id="3892708">Rows</span>&nbsp;<span class="keyword" id="3892713">interface</span>&nbsp;<span class="op" id="3892723">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892726">//&nbsp;Columns&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;columns.&nbsp;The&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892786">//&nbsp;columns&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;inferred&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892847">//&nbsp;slice.&nbsp;&nbsp;If&nbsp;a&nbsp;particular&nbsp;column&nbsp;name&nbsp;isn&#39;t&nbsp;known,&nbsp;an&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892909">//&nbsp;string&nbsp;should&nbsp;be&nbsp;returned&nbsp;for&nbsp;that&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3892955">Columns</span><span class="op" id="3892962">(</span><span class="op" id="3892963">)</span>&nbsp;<span class="op" id="3892965">[</span><span class="op" id="3892966">]</span><span class="builtintype" id="3892967">string</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3892976">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;rows&nbsp;iterator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3893012">Close</span><span class="op" id="3893017">(</span><span class="op" id="3893018">)</span>&nbsp;<span class="builtintype" id="3893020">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893028">//&nbsp;Next&nbsp;is&nbsp;called&nbsp;to&nbsp;populate&nbsp;the&nbsp;next&nbsp;row&nbsp;of&nbsp;data&nbsp;into</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893085">//&nbsp;the&nbsp;provided&nbsp;slice.&nbsp;The&nbsp;provided&nbsp;slice&nbsp;will&nbsp;be&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893145">//&nbsp;size&nbsp;as&nbsp;the&nbsp;Columns()&nbsp;are&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893181">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893185">//&nbsp;The&nbsp;dest&nbsp;slice&nbsp;may&nbsp;be&nbsp;populated&nbsp;only&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893231">//&nbsp;a&nbsp;driver&nbsp;Value&nbsp;type,&nbsp;but&nbsp;excluding&nbsp;string.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893278">//&nbsp;All&nbsp;string&nbsp;values&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893329">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3893333">//&nbsp;Next&nbsp;should&nbsp;return&nbsp;io.EOF&nbsp;when&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;rows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3893392">Next</span><span class="op" id="3893396">(</span><span class="ident" id="3893397">dest</span>&nbsp;<span class="op" id="3893402">[</span><span class="op" id="3893403">]</span><span class="ident" id="3893404">Value</span><span class="op" id="3893409">)</span>&nbsp;<span class="builtintype" id="3893411">error</span><br>
<span class="lineno"></span><span class="op" id="3893417">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="3893420">//&nbsp;Tx&nbsp;is&nbsp;a&nbsp;transaction.</span><br>
<span class="lineno"></span><span class="keyword" id="3893444">type</span>&nbsp;<span class="ident" id="3893449">Tx</span>&nbsp;<span class="keyword" id="3893452">interface</span>&nbsp;<span class="op" id="3893462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3893465">Commit</span><span class="op" id="3893471">(</span><span class="op" id="3893472">)</span>&nbsp;<span class="builtintype" id="3893474">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3893481">Rollback</span><span class="op" id="3893489">(</span><span class="op" id="3893490">)</span>&nbsp;<span class="builtintype" id="3893492">error</span><br>
<span class="lineno">180</span><span class="op" id="3893498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3893501">//&nbsp;RowsAffected&nbsp;implements&nbsp;Result&nbsp;for&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE&nbsp;operation</span><br>
<span class="lineno"></span><span class="comment" id="3893569">//&nbsp;which&nbsp;mutates&nbsp;a&nbsp;number&nbsp;of&nbsp;rows.</span><br>
<span class="lineno"></span><span class="keyword" id="3893604">type</span>&nbsp;<span class="ident" id="3893609">RowsAffected</span>&nbsp;<span class="ident" id="3893622">int64</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="3893629">var</span>&nbsp;<span class="ident" id="3893633">_</span>&nbsp;<span class="ident" id="3893635">Result</span>&nbsp;<span class="op" id="3893642">=</span>&nbsp;<span class="ident" id="3893644">RowsAffected</span><span class="op" id="3893656">(</span><span class="num" id="3893657">0</span><span class="op" id="3893658">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3893661">func</span>&nbsp;<span class="op" id="3893666">(</span><span class="ident" id="3893667">RowsAffected</span><span class="op" id="3893679">)</span>&nbsp;<span class="ident" id="3893681">LastInsertId</span><span class="op" id="3893693">(</span><span class="op" id="3893694">)</span>&nbsp;<span class="op" id="3893696">(</span><span class="ident" id="3893697">int64</span><span class="op" id="3893702">,</span>&nbsp;<span class="builtintype" id="3893704">error</span><span class="op" id="3893709">)</span>&nbsp;<span class="op" id="3893711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3893714">return</span>&nbsp;<span class="num" id="3893721">0</span><span class="op" id="3893722">,</span>&nbsp;<span class="ident" id="3893724">errors</span><span class="op" id="3893730">.</span><span class="ident" id="3893731">New</span><span class="op" id="3893734">(</span><span class="string" id="3893735">&#34;no&nbsp;LastInsertId&nbsp;available&#34;</span><span class="op" id="3893762">)</span><br>
<span class="lineno">190</span><span class="op" id="3893764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3893767">func</span>&nbsp;<span class="op" id="3893772">(</span><span class="ident" id="3893773">v</span>&nbsp;<span class="ident" id="3893775">RowsAffected</span><span class="op" id="3893787">)</span>&nbsp;<span class="ident" id="3893789">RowsAffected</span><span class="op" id="3893801">(</span><span class="op" id="3893802">)</span>&nbsp;<span class="op" id="3893804">(</span><span class="ident" id="3893805">int64</span><span class="op" id="3893810">,</span>&nbsp;<span class="builtintype" id="3893812">error</span><span class="op" id="3893817">)</span>&nbsp;<span class="op" id="3893819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3893822">return</span>&nbsp;<span class="ident" id="3893829">int64</span><span class="op" id="3893834">(</span><span class="ident" id="3893835">v</span><span class="op" id="3893836">)</span><span class="op" id="3893837">,</span>&nbsp;<span class="ident" id="3893839">nil</span><br>
<span class="lineno"></span><span class="op" id="3893843">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3893846">//&nbsp;ResultNoRows&nbsp;is&nbsp;a&nbsp;pre-defined&nbsp;Result&nbsp;for&nbsp;drivers&nbsp;to&nbsp;return&nbsp;when&nbsp;a&nbsp;DDL</span><br>
<span class="lineno"></span><span class="comment" id="3893919">//&nbsp;command&nbsp;(such&nbsp;as&nbsp;a&nbsp;CREATE&nbsp;TABLE)&nbsp;succeeds.&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;for&nbsp;both</span><br>
<span class="lineno"></span><span class="comment" id="3893994">//&nbsp;LastInsertId&nbsp;and&nbsp;RowsAffected.</span><br>
<span class="lineno"></span><span class="keyword" id="3894028">var</span>&nbsp;<span class="ident" id="3894032">ResultNoRows</span>&nbsp;<span class="ident" id="3894045">noRows</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="3894053">type</span>&nbsp;<span class="ident" id="3894058">noRows</span>&nbsp;<span class="keyword" id="3894065">struct</span><span class="op" id="3894071">{</span><span class="op" id="3894072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3894075">var</span>&nbsp;<span class="ident" id="3894079">_</span>&nbsp;<span class="ident" id="3894081">Result</span>&nbsp;<span class="op" id="3894088">=</span>&nbsp;<span class="ident" id="3894090">noRows</span><span class="op" id="3894096">{</span><span class="op" id="3894097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="3894100">func</span>&nbsp;<span class="op" id="3894105">(</span><span class="ident" id="3894106">noRows</span><span class="op" id="3894112">)</span>&nbsp;<span class="ident" id="3894114">LastInsertId</span><span class="op" id="3894126">(</span><span class="op" id="3894127">)</span>&nbsp;<span class="op" id="3894129">(</span><span class="ident" id="3894130">int64</span><span class="op" id="3894135">,</span>&nbsp;<span class="builtintype" id="3894137">error</span><span class="op" id="3894142">)</span>&nbsp;<span class="op" id="3894144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3894147">return</span>&nbsp;<span class="num" id="3894154">0</span><span class="op" id="3894155">,</span>&nbsp;<span class="ident" id="3894157">errors</span><span class="op" id="3894163">.</span><span class="ident" id="3894164">New</span><span class="op" id="3894167">(</span><span class="string" id="3894168">&#34;no&nbsp;LastInsertId&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="3894215">)</span><br>
<span class="lineno"></span><span class="op" id="3894217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3894220">func</span>&nbsp;<span class="op" id="3894225">(</span><span class="ident" id="3894226">noRows</span><span class="op" id="3894232">)</span>&nbsp;<span class="ident" id="3894234">RowsAffected</span><span class="op" id="3894246">(</span><span class="op" id="3894247">)</span>&nbsp;<span class="op" id="3894249">(</span><span class="ident" id="3894250">int64</span><span class="op" id="3894255">,</span>&nbsp;<span class="builtintype" id="3894257">error</span><span class="op" id="3894262">)</span>&nbsp;<span class="op" id="3894264">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3894267">return</span>&nbsp;<span class="num" id="3894274">0</span><span class="op" id="3894275">,</span>&nbsp;<span class="ident" id="3894277">errors</span><span class="op" id="3894283">.</span><span class="ident" id="3894284">New</span><span class="op" id="3894287">(</span><span class="string" id="3894288">&#34;no&nbsp;RowsAffected&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="3894335">)</span><br>
<span class="lineno"></span><span class="op" id="3894337">}</span>
</div>
</body>
</html>
