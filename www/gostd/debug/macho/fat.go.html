<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html" class="current">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6102939">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6102995">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6103049">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6103100">package</span>&nbsp;<span class="ident" id="6103108">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6103115">import</span>&nbsp;<span class="op" id="6103122">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6103125">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6103144">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6103151">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6103157">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6103162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6103165">//&nbsp;A&nbsp;FatFile&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;universal&nbsp;binary&nbsp;that&nbsp;contains&nbsp;at&nbsp;least&nbsp;one&nbsp;architecture.</span><br>
<span class="lineno">15</span><span class="keyword" id="6103248">type</span>&nbsp;<span class="ident" id="6103253">FatFile</span>&nbsp;<span class="keyword" id="6103261">struct</span>&nbsp;<span class="op" id="6103268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103271">Magic</span>&nbsp;&nbsp;<span class="builtintype" id="6103278">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103286">Arches</span>&nbsp;<span class="op" id="6103293">[</span><span class="op" id="6103294">]</span><span class="ident" id="6103295"><a href="/gostd/debug/macho/fat.go.html#6103591">FatArch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103304">closer</span>&nbsp;<span class="ident" id="6103311"><a href="/gostd/debug/macho/fat.go.html#6103151">io</a></span><span class="op" id="6103313">.</span><span class="ident" id="6103314"><a href="/gostd/io/io.go.html#1422563">Closer</a></span><br>
<span class="lineno"></span><span class="op" id="6103321">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="6103324">//&nbsp;A&nbsp;FatArchHeader&nbsp;represents&nbsp;a&nbsp;fat&nbsp;header&nbsp;for&nbsp;a&nbsp;specific&nbsp;image&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="keyword" id="6103402">type</span>&nbsp;<span class="ident" id="6103407">FatArchHeader</span>&nbsp;<span class="keyword" id="6103421">struct</span>&nbsp;<span class="op" id="6103428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103431">Cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103438"><a href="/gostd/debug/macho/macho.go.html#6120702">Cpu</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103443">SubCpu</span>&nbsp;<span class="builtintype" id="6103450">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103458">Offset</span>&nbsp;<span class="builtintype" id="6103465">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103473">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6103480">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103488">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6103495">uint32</span><br>
<span class="lineno"></span><span class="op" id="6103502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6103505">const</span>&nbsp;<span class="ident" id="6103511">fatArchHeaderSize</span>&nbsp;<span class="op" id="6103529">=</span>&nbsp;<span class="num" id="6103531">5</span>&nbsp;<span class="op" id="6103533">*</span>&nbsp;<span class="num" id="6103535">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6103538">//&nbsp;A&nbsp;FatArch&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;File&nbsp;inside&nbsp;a&nbsp;FatFile.</span><br>
<span class="lineno"></span><span class="keyword" id="6103586">type</span>&nbsp;<span class="ident" id="6103591">FatArch</span>&nbsp;<span class="keyword" id="6103599">struct</span>&nbsp;<span class="op" id="6103606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6103609"><a href="/gostd/debug/macho/fat.go.html#6103407">FatArchHeader</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6103624">*</span><span class="ident" id="6103625"><a href="/gostd/debug/macho/file.go.html#6107387">File</a></span><br>
<span class="lineno"></span><span class="op" id="6103630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6103633">//&nbsp;ErrNotFat&nbsp;is&nbsp;returned&nbsp;from&nbsp;NewFatFile&nbsp;or&nbsp;OpenFat&nbsp;when&nbsp;the&nbsp;file&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6103708">//&nbsp;universal&nbsp;binary&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;thin&nbsp;binary,&nbsp;based&nbsp;on&nbsp;its&nbsp;magic&nbsp;number.</span><br>
<span class="lineno">40</span><span class="keyword" id="6103781">var</span>&nbsp;<span class="ident" id="6103785">ErrNotFat</span>&nbsp;<span class="op" id="6103795">=</span>&nbsp;<span class="op" id="6103797">&amp;</span><span class="ident" id="6103798"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6103809">{</span><span class="num" id="6103810">0</span><span class="op" id="6103811">,</span>&nbsp;<span class="string" id="6103813">&#34;not&nbsp;a&nbsp;fat&nbsp;Mach-O&nbsp;file&#34;</span><span class="op" id="6103836">,</span>&nbsp;<span class="builtintype" id="6103838">nil</span><span class="op" id="6103841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6103844">//&nbsp;NewFatFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;FatFile&nbsp;for&nbsp;accessing&nbsp;all&nbsp;the&nbsp;Mach-O&nbsp;images&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6103921">//&nbsp;universal&nbsp;binary.&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6103998">//&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">45</span><span class="keyword" id="6104015">func</span>&nbsp;<span class="ident" id="6104020">NewFatFile</span><span class="op" id="6104030">(</span><span class="ident" id="6104031">r</span>&nbsp;<span class="ident" id="6104033"><a href="/gostd/debug/macho/fat.go.html#6103151">io</a></span><span class="op" id="6104035">.</span><span class="ident" id="6104036"><a href="/gostd/io/io.go.html#1425985">ReaderAt</a></span><span class="op" id="6104044">)</span>&nbsp;<span class="op" id="6104046">(</span><span class="op" id="6104047">*</span><span class="ident" id="6104048"><a href="/gostd/debug/macho/fat.go.html#6103253">FatFile</a></span><span class="op" id="6104055">,</span>&nbsp;<span class="builtintype" id="6104057">error</span><span class="op" id="6104062">)</span>&nbsp;<span class="op" id="6104064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104067">var</span>&nbsp;<span class="ident" id="6104071">ff</span>&nbsp;<span class="ident" id="6104074"><a href="/gostd/debug/macho/fat.go.html#6103253">FatFile</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104083">sr</span>&nbsp;<span class="op" id="6104086">:=</span>&nbsp;<span class="ident" id="6104089"><a href="/gostd/debug/macho/fat.go.html#6103151">io</a></span><span class="op" id="6104091">.</span><span class="ident" id="6104092"><a href="/gostd/io/io.go.html#1432455">NewSectionReader</a></span><span class="op" id="6104108">(</span><span class="ident" id="6104109"><a href="/gostd/debug/macho/fat.go.html#6104031">r</a></span><span class="op" id="6104110">,</span>&nbsp;<span class="num" id="6104112">0</span><span class="op" id="6104113">,</span>&nbsp;<span class="num" id="6104115">1</span><span class="op" id="6104116">&lt;&lt;</span><span class="num" id="6104118">63</span><span class="op" id="6104120">-</span><span class="num" id="6104121">1</span><span class="op" id="6104122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6104126">//&nbsp;Read&nbsp;the&nbsp;fat_header&nbsp;struct,&nbsp;which&nbsp;is&nbsp;always&nbsp;in&nbsp;big&nbsp;endian.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6104189">//&nbsp;Start&nbsp;with&nbsp;the&nbsp;magic&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104222">err</span>&nbsp;<span class="op" id="6104226">:=</span>&nbsp;<span class="ident" id="6104229"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104235">.</span><span class="ident" id="6104236"><a href="/gostd/encoding/binary/binary.go.html#2989675">Read</a></span><span class="op" id="6104240">(</span><span class="ident" id="6104241"><a href="/gostd/debug/macho/fat.go.html#6104083">sr</a></span><span class="op" id="6104243">,</span>&nbsp;<span class="ident" id="6104245"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104251">.</span><span class="ident" id="6104252"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6104261">,</span>&nbsp;<span class="op" id="6104263">&amp;</span><span class="ident" id="6104264"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6104266">.</span><span class="ident" id="6104267"><a href="/gostd/debug/macho/fat.go.html#6103271">Magic</a></span><span class="op" id="6104272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104275">if</span>&nbsp;<span class="ident" id="6104278"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6104282">!=</span>&nbsp;<span class="builtintype" id="6104285">nil</span>&nbsp;<span class="op" id="6104289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104293">return</span>&nbsp;<span class="builtintype" id="6104300">nil</span><span class="op" id="6104303">,</span>&nbsp;<span class="op" id="6104305">&amp;</span><span class="ident" id="6104306"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6104317">{</span><span class="num" id="6104318">0</span><span class="op" id="6104319">,</span>&nbsp;<span class="string" id="6104321">&#34;error&nbsp;reading&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6104349">,</span>&nbsp;<span class="builtintype" id="6104351">nil</span><span class="op" id="6104354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6104357">}</span>&nbsp;<span class="keyword" id="6104359">else</span>&nbsp;<span class="keyword" id="6104364">if</span>&nbsp;<span class="ident" id="6104367"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6104369">.</span><span class="ident" id="6104370"><a href="/gostd/debug/macho/fat.go.html#6103271">Magic</a></span>&nbsp;<span class="op" id="6104376">!=</span>&nbsp;<span class="ident" id="6104379"><a href="/gostd/debug/macho/macho.go.html#6120433">MagicFat</a></span>&nbsp;<span class="op" id="6104388">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6104392">//&nbsp;See&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;file&nbsp;via&nbsp;its&nbsp;magic&nbsp;number.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6104458">//&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;little&nbsp;endian&nbsp;first&nbsp;though.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104512">var</span>&nbsp;<span class="ident" id="6104516">buf</span>&nbsp;<span class="op" id="6104520">[</span><span class="num" id="6104521">4</span><span class="op" id="6104522">]</span><span class="builtintype" id="6104523">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104530"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104536">.</span><span class="ident" id="6104537"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6104546">.</span><span class="ident" id="6104547"><a href="/gostd/encoding/binary/binary.go.html#2988537">PutUint32</a></span><span class="op" id="6104556">(</span><span class="ident" id="6104557"><a href="/gostd/debug/macho/fat.go.html#6104516">buf</a></span><span class="op" id="6104560">[</span><span class="op" id="6104561">:</span><span class="op" id="6104562">]</span><span class="op" id="6104563">,</span>&nbsp;<span class="ident" id="6104565"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6104567">.</span><span class="ident" id="6104568"><a href="/gostd/debug/macho/fat.go.html#6103271">Magic</a></span><span class="op" id="6104573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104577">leMagic</span>&nbsp;<span class="op" id="6104585">:=</span>&nbsp;<span class="ident" id="6104588"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104594">.</span><span class="ident" id="6104595"><a href="/gostd/encoding/binary/binary.go.html#2987055">LittleEndian</a></span><span class="op" id="6104607">.</span><span class="ident" id="6104608"><a href="/gostd/encoding/binary/binary.go.html#2987394">Uint32</a></span><span class="op" id="6104614">(</span><span class="ident" id="6104615"><a href="/gostd/debug/macho/fat.go.html#6104516">buf</a></span><span class="op" id="6104618">[</span><span class="op" id="6104619">:</span><span class="op" id="6104620">]</span><span class="op" id="6104621">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104625">if</span>&nbsp;<span class="ident" id="6104628"><a href="/gostd/debug/macho/fat.go.html#6104577">leMagic</a></span>&nbsp;<span class="op" id="6104636">==</span>&nbsp;<span class="ident" id="6104639"><a href="/gostd/debug/macho/macho.go.html#6120373">Magic32</a></span>&nbsp;<span class="op" id="6104647">||</span>&nbsp;<span class="ident" id="6104650"><a href="/gostd/debug/macho/fat.go.html#6104577">leMagic</a></span>&nbsp;<span class="op" id="6104658">==</span>&nbsp;<span class="ident" id="6104661"><a href="/gostd/debug/macho/macho.go.html#6120403">Magic64</a></span>&nbsp;<span class="op" id="6104669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104674">return</span>&nbsp;<span class="builtintype" id="6104681">nil</span><span class="op" id="6104684">,</span>&nbsp;<span class="ident" id="6104686"><a href="/gostd/debug/macho/fat.go.html#6103785">ErrNotFat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6104698">}</span>&nbsp;<span class="keyword" id="6104700">else</span>&nbsp;<span class="op" id="6104705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104710">return</span>&nbsp;<span class="builtintype" id="6104717">nil</span><span class="op" id="6104720">,</span>&nbsp;<span class="op" id="6104722">&amp;</span><span class="ident" id="6104723"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6104734">{</span><span class="num" id="6104735">0</span><span class="op" id="6104736">,</span>&nbsp;<span class="string" id="6104738">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6104760">,</span>&nbsp;<span class="builtintype" id="6104762">nil</span><span class="op" id="6104765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6104769">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6104772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104775">offset</span>&nbsp;<span class="op" id="6104782">:=</span>&nbsp;<span class="builtintype" id="6104785">int64</span><span class="op" id="6104790">(</span><span class="num" id="6104791">4</span><span class="op" id="6104792">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6104796">//&nbsp;Read&nbsp;the&nbsp;number&nbsp;of&nbsp;FatArchHeaders&nbsp;that&nbsp;come&nbsp;after&nbsp;the&nbsp;fat_header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104866">var</span>&nbsp;<span class="ident" id="6104870">narch</span>&nbsp;<span class="builtintype" id="6104876">uint32</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6104884"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6104888">=</span>&nbsp;<span class="ident" id="6104890"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104896">.</span><span class="ident" id="6104897"><a href="/gostd/encoding/binary/binary.go.html#2989675">Read</a></span><span class="op" id="6104901">(</span><span class="ident" id="6104902"><a href="/gostd/debug/macho/fat.go.html#6104083">sr</a></span><span class="op" id="6104904">,</span>&nbsp;<span class="ident" id="6104906"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6104912">.</span><span class="ident" id="6104913"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6104922">,</span>&nbsp;<span class="op" id="6104924">&amp;</span><span class="ident" id="6104925"><a href="/gostd/debug/macho/fat.go.html#6104870">narch</a></span><span class="op" id="6104930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104933">if</span>&nbsp;<span class="ident" id="6104936"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6104940">!=</span>&nbsp;<span class="builtintype" id="6104943">nil</span>&nbsp;<span class="op" id="6104947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6104951">return</span>&nbsp;<span class="builtintype" id="6104958">nil</span><span class="op" id="6104961">,</span>&nbsp;<span class="op" id="6104963">&amp;</span><span class="ident" id="6104964"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6104975">{</span><span class="ident" id="6104976"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span><span class="op" id="6104982">,</span>&nbsp;<span class="string" id="6104984">&#34;invalid&nbsp;fat_header&#34;</span><span class="op" id="6105004">,</span>&nbsp;<span class="builtintype" id="6105006">nil</span><span class="op" id="6105009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6105012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105015"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span>&nbsp;<span class="op" id="6105022">+=</span>&nbsp;<span class="num" id="6105025">4</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105029">if</span>&nbsp;<span class="ident" id="6105032"><a href="/gostd/debug/macho/fat.go.html#6104870">narch</a></span>&nbsp;<span class="op" id="6105038">&lt;</span>&nbsp;<span class="num" id="6105040">1</span>&nbsp;<span class="op" id="6105042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105046">return</span>&nbsp;<span class="builtintype" id="6105053">nil</span><span class="op" id="6105056">,</span>&nbsp;<span class="op" id="6105058">&amp;</span><span class="ident" id="6105059"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6105070">{</span><span class="ident" id="6105071"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span><span class="op" id="6105077">,</span>&nbsp;<span class="string" id="6105079">&#34;file&nbsp;contains&nbsp;no&nbsp;images&#34;</span><span class="op" id="6105104">,</span>&nbsp;<span class="builtintype" id="6105106">nil</span><span class="op" id="6105109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6105112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105116">//&nbsp;Combine&nbsp;the&nbsp;Cpu&nbsp;and&nbsp;SubCpu&nbsp;(both&nbsp;uint32)&nbsp;into&nbsp;a&nbsp;uint64&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105188">//&nbsp;there&nbsp;are&nbsp;not&nbsp;duplicate&nbsp;architectures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105231">seenArches</span>&nbsp;<span class="op" id="6105242">:=</span>&nbsp;<span class="builtinfunc" id="6105245">make</span><span class="op" id="6105249">(</span><span class="keyword" id="6105250">map</span><span class="op" id="6105253">[</span><span class="builtintype" id="6105254">uint64</span><span class="op" id="6105260">]</span><span class="builtintype" id="6105261">bool</span><span class="op" id="6105265">,</span>&nbsp;<span class="ident" id="6105267"><a href="/gostd/debug/macho/fat.go.html#6104870">narch</a></span><span class="op" id="6105272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105275">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;all&nbsp;images&nbsp;are&nbsp;for&nbsp;the&nbsp;same&nbsp;MH_&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105332">var</span>&nbsp;<span class="ident" id="6105336">machoType</span>&nbsp;<span class="ident" id="6105346"><a href="/gostd/debug/macho/macho.go.html#6120558">Type</a></span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105353">//&nbsp;Following&nbsp;the&nbsp;fat_header&nbsp;comes&nbsp;narch&nbsp;fat_arch&nbsp;structs&nbsp;that&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105422">//&nbsp;Mach-O&nbsp;images&nbsp;further&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105461"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6105463">.</span><span class="ident" id="6105464"><a href="/gostd/debug/macho/fat.go.html#6103286">Arches</a></span>&nbsp;<span class="op" id="6105471">=</span>&nbsp;<span class="builtinfunc" id="6105473">make</span><span class="op" id="6105477">(</span><span class="op" id="6105478">[</span><span class="op" id="6105479">]</span><span class="ident" id="6105480"><a href="/gostd/debug/macho/fat.go.html#6103591">FatArch</a></span><span class="op" id="6105487">,</span>&nbsp;<span class="ident" id="6105489"><a href="/gostd/debug/macho/fat.go.html#6104870">narch</a></span><span class="op" id="6105494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105497">for</span>&nbsp;<span class="ident" id="6105501">i</span>&nbsp;<span class="op" id="6105503">:=</span>&nbsp;<span class="builtintype" id="6105506">uint32</span><span class="op" id="6105512">(</span><span class="num" id="6105513">0</span><span class="op" id="6105514">)</span><span class="op" id="6105515">;</span>&nbsp;<span class="ident" id="6105517"><a href="/gostd/debug/macho/fat.go.html#6105501">i</a></span>&nbsp;<span class="op" id="6105519">&lt;</span>&nbsp;<span class="ident" id="6105521"><a href="/gostd/debug/macho/fat.go.html#6104870">narch</a></span><span class="op" id="6105526">;</span>&nbsp;<span class="ident" id="6105528"><a href="/gostd/debug/macho/fat.go.html#6105501">i</a></span><span class="op" id="6105529">++</span>&nbsp;<span class="op" id="6105532">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105536">fa</span>&nbsp;<span class="op" id="6105539">:=</span>&nbsp;<span class="op" id="6105542">&amp;</span><span class="ident" id="6105543"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6105545">.</span><span class="ident" id="6105546"><a href="/gostd/debug/macho/fat.go.html#6103286">Arches</a></span><span class="op" id="6105552">[</span><span class="ident" id="6105553"><a href="/gostd/debug/macho/fat.go.html#6105501">i</a></span><span class="op" id="6105554">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105558"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6105562">=</span>&nbsp;<span class="ident" id="6105564"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6105570">.</span><span class="ident" id="6105571"><a href="/gostd/encoding/binary/binary.go.html#2989675">Read</a></span><span class="op" id="6105575">(</span><span class="ident" id="6105576"><a href="/gostd/debug/macho/fat.go.html#6104083">sr</a></span><span class="op" id="6105578">,</span>&nbsp;<span class="ident" id="6105580"><a href="/gostd/debug/macho/fat.go.html#6103125">binary</a></span><span class="op" id="6105586">.</span><span class="ident" id="6105587"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6105596">,</span>&nbsp;<span class="op" id="6105598">&amp;</span><span class="ident" id="6105599"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105601">.</span><span class="ident" id="6105602"><a href="/gostd/debug/macho/fat.go.html#6103609">FatArchHeader</a></span><span class="op" id="6105615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105619">if</span>&nbsp;<span class="ident" id="6105622"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6105626">!=</span>&nbsp;<span class="builtintype" id="6105629">nil</span>&nbsp;<span class="op" id="6105633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105638">return</span>&nbsp;<span class="builtintype" id="6105645">nil</span><span class="op" id="6105648">,</span>&nbsp;<span class="op" id="6105650">&amp;</span><span class="ident" id="6105651"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6105662">{</span><span class="ident" id="6105663"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span><span class="op" id="6105669">,</span>&nbsp;<span class="string" id="6105671">&#34;invalid&nbsp;fat_arch&nbsp;header&#34;</span><span class="op" id="6105696">,</span>&nbsp;<span class="builtintype" id="6105698">nil</span><span class="op" id="6105701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6105705">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105709"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span>&nbsp;<span class="op" id="6105716">+=</span>&nbsp;<span class="ident" id="6105719"><a href="/gostd/debug/macho/fat.go.html#6103511">fatArchHeaderSize</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105740">fr</span>&nbsp;<span class="op" id="6105743">:=</span>&nbsp;<span class="ident" id="6105746"><a href="/gostd/debug/macho/fat.go.html#6103151">io</a></span><span class="op" id="6105748">.</span><span class="ident" id="6105749"><a href="/gostd/io/io.go.html#1432455">NewSectionReader</a></span><span class="op" id="6105765">(</span><span class="ident" id="6105766"><a href="/gostd/debug/macho/fat.go.html#6104031">r</a></span><span class="op" id="6105767">,</span>&nbsp;<span class="builtintype" id="6105769">int64</span><span class="op" id="6105774">(</span><span class="ident" id="6105775"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105777">.</span><span class="ident" id="6105778"><a href="/gostd/debug/macho/fat.go.html#6103458">Offset</a></span><span class="op" id="6105784">)</span><span class="op" id="6105785">,</span>&nbsp;<span class="builtintype" id="6105787">int64</span><span class="op" id="6105792">(</span><span class="ident" id="6105793"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105795">.</span><span class="ident" id="6105796"><a href="/gostd/debug/macho/fat.go.html#6103473">Size</a></span><span class="op" id="6105800">)</span><span class="op" id="6105801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105805"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105807">.</span><span class="ident" id="6105808"><a href="/gostd/debug/macho/fat.go.html#6103624">File</a></span><span class="op" id="6105812">,</span>&nbsp;<span class="ident" id="6105814"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6105818">=</span>&nbsp;<span class="ident" id="6105820"><a href="/gostd/debug/macho/file.go.html#6111234">NewFile</a></span><span class="op" id="6105827">(</span><span class="ident" id="6105828"><a href="/gostd/debug/macho/fat.go.html#6105740">fr</a></span><span class="op" id="6105830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105834">if</span>&nbsp;<span class="ident" id="6105837"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span>&nbsp;<span class="op" id="6105841">!=</span>&nbsp;<span class="builtintype" id="6105844">nil</span>&nbsp;<span class="op" id="6105848">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105853">return</span>&nbsp;<span class="builtintype" id="6105860">nil</span><span class="op" id="6105863">,</span>&nbsp;<span class="ident" id="6105865"><a href="/gostd/debug/macho/fat.go.html#6104222">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6105871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6105876">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;architecture&nbsp;for&nbsp;this&nbsp;image&nbsp;is&nbsp;not&nbsp;duplicate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6105941">seenArch</span>&nbsp;<span class="op" id="6105950">:=</span>&nbsp;<span class="op" id="6105953">(</span><span class="builtintype" id="6105954">uint64</span><span class="op" id="6105960">(</span><span class="ident" id="6105961"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105963">.</span><span class="ident" id="6105964"><a href="/gostd/debug/macho/fat.go.html#6103431">Cpu</a></span><span class="op" id="6105967">)</span>&nbsp;<span class="op" id="6105969">&lt;&lt;</span>&nbsp;<span class="num" id="6105972">32</span><span class="op" id="6105974">)</span>&nbsp;<span class="op" id="6105976">|</span>&nbsp;<span class="builtintype" id="6105978">uint64</span><span class="op" id="6105984">(</span><span class="ident" id="6105985"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6105987">.</span><span class="ident" id="6105988"><a href="/gostd/debug/macho/fat.go.html#6103443">SubCpu</a></span><span class="op" id="6105994">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6105998">if</span>&nbsp;<span class="ident" id="6106001">o</span><span class="op" id="6106002">,</span>&nbsp;<span class="ident" id="6106004">k</span>&nbsp;<span class="op" id="6106006">:=</span>&nbsp;<span class="ident" id="6106009"><a href="/gostd/debug/macho/fat.go.html#6105231">seenArches</a></span><span class="op" id="6106019">[</span><span class="ident" id="6106020"><a href="/gostd/debug/macho/fat.go.html#6105941">seenArch</a></span><span class="op" id="6106028">]</span><span class="op" id="6106029">;</span>&nbsp;<span class="ident" id="6106031"><a href="/gostd/debug/macho/fat.go.html#6106001">o</a></span>&nbsp;<span class="op" id="6106033">||</span>&nbsp;<span class="ident" id="6106036"><a href="/gostd/debug/macho/fat.go.html#6106004">k</a></span>&nbsp;<span class="op" id="6106038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106043">return</span>&nbsp;<span class="builtintype" id="6106050">nil</span><span class="op" id="6106053">,</span>&nbsp;<span class="op" id="6106055">&amp;</span><span class="ident" id="6106056"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6106067">{</span><span class="ident" id="6106068"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span><span class="op" id="6106074">,</span>&nbsp;<span class="ident" id="6106076"><a href="/gostd/debug/macho/fat.go.html#6103144">fmt</a></span><span class="op" id="6106079">.</span><span class="ident" id="6106080"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6106087">(</span><span class="string" id="6106088">&#34;duplicate&nbsp;architecture&nbsp;cpu=%v,&nbsp;subcpu=%#x&#34;</span><span class="op" id="6106131">,</span>&nbsp;<span class="ident" id="6106133"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6106135">.</span><span class="ident" id="6106136"><a href="/gostd/debug/macho/fat.go.html#6103431">Cpu</a></span><span class="op" id="6106139">,</span>&nbsp;<span class="ident" id="6106141"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6106143">.</span><span class="ident" id="6106144"><a href="/gostd/debug/macho/fat.go.html#6103443">SubCpu</a></span><span class="op" id="6106150">)</span><span class="op" id="6106151">,</span>&nbsp;<span class="builtintype" id="6106153">nil</span><span class="op" id="6106156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106164"><a href="/gostd/debug/macho/fat.go.html#6105231">seenArches</a></span><span class="op" id="6106174">[</span><span class="ident" id="6106175"><a href="/gostd/debug/macho/fat.go.html#6105941">seenArch</a></span><span class="op" id="6106183">]</span>&nbsp;<span class="op" id="6106185">=</span>&nbsp;<span class="builtintype" id="6106187">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6106195">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;Mach-O&nbsp;type&nbsp;matches&nbsp;that&nbsp;of&nbsp;the&nbsp;first&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106259">if</span>&nbsp;<span class="ident" id="6106262"><a href="/gostd/debug/macho/fat.go.html#6105501">i</a></span>&nbsp;<span class="op" id="6106264">==</span>&nbsp;<span class="num" id="6106267">0</span>&nbsp;<span class="op" id="6106269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106274"><a href="/gostd/debug/macho/fat.go.html#6105336">machoType</a></span>&nbsp;<span class="op" id="6106284">=</span>&nbsp;<span class="ident" id="6106286"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6106288">.</span><span class="ident" id="6106289"><a href="/gostd/debug/macho/macho.go.html#6120241">Type</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106296">}</span>&nbsp;<span class="keyword" id="6106298">else</span>&nbsp;<span class="op" id="6106303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106308">if</span>&nbsp;<span class="ident" id="6106311"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6106313">.</span><span class="ident" id="6106314"><a href="/gostd/debug/macho/macho.go.html#6120241">Type</a></span>&nbsp;<span class="op" id="6106319">!=</span>&nbsp;<span class="ident" id="6106322"><a href="/gostd/debug/macho/fat.go.html#6105336">machoType</a></span>&nbsp;<span class="op" id="6106332">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106338">return</span>&nbsp;<span class="builtintype" id="6106345">nil</span><span class="op" id="6106348">,</span>&nbsp;<span class="op" id="6106350">&amp;</span><span class="ident" id="6106351"><a href="/gostd/debug/macho/file.go.html#6110285">FormatError</a></span><span class="op" id="6106362">{</span><span class="ident" id="6106363"><a href="/gostd/debug/macho/fat.go.html#6104775">offset</a></span><span class="op" id="6106369">,</span>&nbsp;<span class="ident" id="6106371"><a href="/gostd/debug/macho/fat.go.html#6103144">fmt</a></span><span class="op" id="6106374">.</span><span class="ident" id="6106375"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6106382">(</span><span class="string" id="6106383">&#34;Mach-O&nbsp;type&nbsp;for&nbsp;architecture&nbsp;#%d&nbsp;(type=%#x)&nbsp;does&nbsp;not&nbsp;match&nbsp;first&nbsp;(type=%#x)&#34;</span><span class="op" id="6106460">,</span>&nbsp;<span class="ident" id="6106462"><a href="/gostd/debug/macho/fat.go.html#6105501">i</a></span><span class="op" id="6106463">,</span>&nbsp;<span class="ident" id="6106465"><a href="/gostd/debug/macho/fat.go.html#6105536">fa</a></span><span class="op" id="6106467">.</span><span class="ident" id="6106468"><a href="/gostd/debug/macho/macho.go.html#6120241">Type</a></span><span class="op" id="6106472">,</span>&nbsp;<span class="ident" id="6106474"><a href="/gostd/debug/macho/fat.go.html#6105336">machoType</a></span><span class="op" id="6106483">)</span><span class="op" id="6106484">,</span>&nbsp;<span class="builtintype" id="6106486">nil</span><span class="op" id="6106489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106505">return</span>&nbsp;<span class="op" id="6106512">&amp;</span><span class="ident" id="6106513"><a href="/gostd/debug/macho/fat.go.html#6104071">ff</a></span><span class="op" id="6106515">,</span>&nbsp;<span class="builtintype" id="6106517">nil</span><br>
<span class="lineno"></span><span class="op" id="6106521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6106524">//&nbsp;OpenFat&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O</span><br>
<span class="lineno"></span><span class="comment" id="6106606">//&nbsp;universal&nbsp;binary.</span><br>
<span class="lineno">125</span><span class="keyword" id="6106627">func</span>&nbsp;<span class="ident" id="6106632">OpenFat</span><span class="op" id="6106639">(</span><span class="ident" id="6106640">name</span>&nbsp;<span class="builtintype" id="6106645">string</span><span class="op" id="6106651">)</span>&nbsp;<span class="op" id="6106653">(</span><span class="ident" id="6106654">ff</span>&nbsp;<span class="op" id="6106657">*</span><span class="ident" id="6106658"><a href="/gostd/debug/macho/fat.go.html#6103253">FatFile</a></span><span class="op" id="6106665">,</span>&nbsp;<span class="ident" id="6106667">err</span>&nbsp;<span class="builtintype" id="6106671">error</span><span class="op" id="6106676">)</span>&nbsp;<span class="op" id="6106678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106681">f</span><span class="op" id="6106682">,</span>&nbsp;<span class="ident" id="6106684"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span>&nbsp;<span class="op" id="6106688">:=</span>&nbsp;<span class="ident" id="6106691"><a href="/gostd/debug/macho/fat.go.html#6103157">os</a></span><span class="op" id="6106693">.</span><span class="ident" id="6106694"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="6106698">(</span><span class="ident" id="6106699"><a href="/gostd/debug/macho/fat.go.html#6106640">name</a></span><span class="op" id="6106703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106706">if</span>&nbsp;<span class="ident" id="6106709"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span>&nbsp;<span class="op" id="6106713">!=</span>&nbsp;<span class="builtintype" id="6106716">nil</span>&nbsp;<span class="op" id="6106720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106724">return</span>&nbsp;<span class="builtintype" id="6106731">nil</span><span class="op" id="6106734">,</span>&nbsp;<span class="ident" id="6106736"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106741">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106744"><a href="/gostd/debug/macho/fat.go.html#6106654">ff</a></span><span class="op" id="6106746">,</span>&nbsp;<span class="ident" id="6106748"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span>&nbsp;<span class="op" id="6106752">=</span>&nbsp;<span class="ident" id="6106754"><a href="/gostd/debug/macho/fat.go.html#6104020">NewFatFile</a></span><span class="op" id="6106764">(</span><span class="ident" id="6106765"><a href="/gostd/debug/macho/fat.go.html#6106681">f</a></span><span class="op" id="6106766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106769">if</span>&nbsp;<span class="ident" id="6106772"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span>&nbsp;<span class="op" id="6106776">!=</span>&nbsp;<span class="builtintype" id="6106779">nil</span>&nbsp;<span class="op" id="6106783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106787"><a href="/gostd/debug/macho/fat.go.html#6106681">f</a></span><span class="op" id="6106788">.</span><span class="ident" id="6106789"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="6106794">(</span><span class="op" id="6106795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106799">return</span>&nbsp;<span class="builtintype" id="6106806">nil</span><span class="op" id="6106809">,</span>&nbsp;<span class="ident" id="6106811"><a href="/gostd/debug/macho/fat.go.html#6106667">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106816">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106819"><a href="/gostd/debug/macho/fat.go.html#6106654">ff</a></span><span class="op" id="6106821">.</span><span class="ident" id="6106822"><a href="/gostd/debug/macho/fat.go.html#6103304">closer</a></span>&nbsp;<span class="op" id="6106829">=</span>&nbsp;<span class="ident" id="6106831"><a href="/gostd/debug/macho/fat.go.html#6106681">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106834">return</span><br>
<span class="lineno"></span><span class="op" id="6106841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6106844">func</span>&nbsp;<span class="op" id="6106849">(</span><span class="ident" id="6106850">ff</span>&nbsp;<span class="op" id="6106853">*</span><span class="ident" id="6106854"><a href="/gostd/debug/macho/fat.go.html#6103253">FatFile</a></span><span class="op" id="6106861">)</span>&nbsp;<span class="ident" id="6106863">Close</span><span class="op" id="6106868">(</span><span class="op" id="6106869">)</span>&nbsp;<span class="builtintype" id="6106871">error</span>&nbsp;<span class="op" id="6106877">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106880">var</span>&nbsp;<span class="ident" id="6106884">err</span>&nbsp;<span class="builtintype" id="6106888">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106895">if</span>&nbsp;<span class="ident" id="6106898"><a href="/gostd/debug/macho/fat.go.html#6106850">ff</a></span><span class="op" id="6106900">.</span><span class="ident" id="6106901"><a href="/gostd/debug/macho/fat.go.html#6103304">closer</a></span>&nbsp;<span class="op" id="6106908">!=</span>&nbsp;<span class="builtintype" id="6106911">nil</span>&nbsp;<span class="op" id="6106915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106919"><a href="/gostd/debug/macho/fat.go.html#6106884">err</a></span>&nbsp;<span class="op" id="6106923">=</span>&nbsp;<span class="ident" id="6106925"><a href="/gostd/debug/macho/fat.go.html#6106850">ff</a></span><span class="op" id="6106927">.</span><span class="ident" id="6106928"><a href="/gostd/debug/macho/fat.go.html#6103304">closer</a></span><span class="op" id="6106934">.</span><span class="ident" id="6106935"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="6106940">(</span><span class="op" id="6106941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6106945"><a href="/gostd/debug/macho/fat.go.html#6106850">ff</a></span><span class="op" id="6106947">.</span><span class="ident" id="6106948"><a href="/gostd/debug/macho/fat.go.html#6103304">closer</a></span>&nbsp;<span class="op" id="6106955">=</span>&nbsp;<span class="builtintype" id="6106957">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6106962">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6106965">return</span>&nbsp;<span class="ident" id="6106972"><a href="/gostd/debug/macho/fat.go.html#6106884">err</a></span><br>
<span class="lineno"></span><span class="op" id="6106976">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
