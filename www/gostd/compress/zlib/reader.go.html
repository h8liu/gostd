<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5839550">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5839605">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5839659">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5839710">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5840153">package</span>&nbsp;<span class="ident" id="5840161">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5840167">import</span>&nbsp;<span class="op" id="5840174">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840177">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840186">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840204">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840214">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840222">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5840238">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5840243">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5840246">const</span>&nbsp;<span class="ident" id="5840252">zlibDeflate</span>&nbsp;<span class="op" id="5840264">=</span>&nbsp;<span class="num" id="5840266">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5840269">var</span>&nbsp;<span class="op" id="5840273">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5840276">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840357">ErrChecksum</span>&nbsp;<span class="op" id="5840369">=</span>&nbsp;<span class="ident" id="5840371">errors</span><span class="op" id="5840377">.</span><span class="ident" id="5840378">New</span><span class="op" id="5840381">(</span><span class="string" id="5840382">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5840406">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5840409">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840494">ErrDictionary</span>&nbsp;<span class="op" id="5840508">=</span>&nbsp;<span class="ident" id="5840510">errors</span><span class="op" id="5840516">.</span><span class="ident" id="5840517">New</span><span class="op" id="5840520">(</span><span class="string" id="5840521">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5840547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5840550">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840627">ErrHeader</span>&nbsp;<span class="op" id="5840637">=</span>&nbsp;<span class="ident" id="5840639">errors</span><span class="op" id="5840645">.</span><span class="ident" id="5840646">New</span><span class="op" id="5840649">(</span><span class="string" id="5840650">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5840672">)</span><br>
<span class="lineno"></span><span class="op" id="5840674">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5840677">type</span>&nbsp;<span class="ident" id="5840682">reader</span>&nbsp;<span class="keyword" id="5840689">struct</span>&nbsp;<span class="op" id="5840696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840699">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840712">flate</span><span class="op" id="5840717">.</span><span class="ident" id="5840718">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840726">decompressor</span>&nbsp;<span class="ident" id="5840739">io</span><span class="op" id="5840741">.</span><span class="ident" id="5840742">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840754">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840767">hash</span><span class="op" id="5840771">.</span><span class="ident" id="5840772">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840780">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840793">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840800">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5840813">[</span><span class="num" id="5840814">4</span><span class="op" id="5840815">]</span><span class="builtintype" id="5840816">byte</span><br>
<span class="lineno"></span><span class="op" id="5840821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5840824">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5840898">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5840973">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5841009">type</span>&nbsp;<span class="ident" id="5841014">Resetter</span>&nbsp;<span class="keyword" id="5841023">interface</span>&nbsp;<span class="op" id="5841033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5841036">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5841110">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5841155">Reset</span><span class="op" id="5841160">(</span><span class="ident" id="5841161">r</span>&nbsp;<span class="ident" id="5841163">io</span><span class="op" id="5841165">.</span><span class="ident" id="5841166">Reader</span><span class="op" id="5841172">,</span>&nbsp;<span class="ident" id="5841174">dict</span>&nbsp;<span class="op" id="5841179">[</span><span class="op" id="5841180">]</span><span class="builtintype" id="5841181">byte</span><span class="op" id="5841185">)</span>&nbsp;<span class="builtintype" id="5841187">error</span><br>
<span class="lineno"></span><span class="op" id="5841193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841196">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5841235">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5841306">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5841388">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5841468">//</span><br>
<span class="lineno"></span><span class="comment" id="5841471">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5841537">func</span>&nbsp;<span class="ident" id="5841542">NewReader</span><span class="op" id="5841551">(</span><span class="ident" id="5841552">r</span>&nbsp;<span class="ident" id="5841554">io</span><span class="op" id="5841556">.</span><span class="ident" id="5841557">Reader</span><span class="op" id="5841563">)</span>&nbsp;<span class="op" id="5841565">(</span><span class="ident" id="5841566">io</span><span class="op" id="5841568">.</span><span class="ident" id="5841569">ReadCloser</span><span class="op" id="5841579">,</span>&nbsp;<span class="builtintype" id="5841581">error</span><span class="op" id="5841586">)</span>&nbsp;<span class="op" id="5841588">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841591">return</span>&nbsp;<span class="ident" id="5841598">NewReaderDict</span><span class="op" id="5841611">(</span><span class="ident" id="5841612">r</span><span class="op" id="5841613">,</span>&nbsp;<span class="ident" id="5841615">nil</span><span class="op" id="5841618">)</span><br>
<span class="lineno"></span><span class="op" id="5841620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841623">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5841688">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5841773">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5841870">//</span><br>
<span class="lineno"></span><span class="comment" id="5841873">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5841943">func</span>&nbsp;<span class="ident" id="5841948">NewReaderDict</span><span class="op" id="5841961">(</span><span class="ident" id="5841962">r</span>&nbsp;<span class="ident" id="5841964">io</span><span class="op" id="5841966">.</span><span class="ident" id="5841967">Reader</span><span class="op" id="5841973">,</span>&nbsp;<span class="ident" id="5841975">dict</span>&nbsp;<span class="op" id="5841980">[</span><span class="op" id="5841981">]</span><span class="builtintype" id="5841982">byte</span><span class="op" id="5841986">)</span>&nbsp;<span class="op" id="5841988">(</span><span class="ident" id="5841989">io</span><span class="op" id="5841991">.</span><span class="ident" id="5841992">ReadCloser</span><span class="op" id="5842002">,</span>&nbsp;<span class="builtintype" id="5842004">error</span><span class="op" id="5842009">)</span>&nbsp;<span class="op" id="5842011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842014">z</span>&nbsp;<span class="op" id="5842016">:=</span>&nbsp;<span class="builtinfunc" id="5842019">new</span><span class="op" id="5842022">(</span><span class="ident" id="5842023">reader</span><span class="op" id="5842029">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842032">err</span>&nbsp;<span class="op" id="5842036">:=</span>&nbsp;<span class="ident" id="5842039">z</span><span class="op" id="5842040">.</span><span class="ident" id="5842041">Reset</span><span class="op" id="5842046">(</span><span class="ident" id="5842047">r</span><span class="op" id="5842048">,</span>&nbsp;<span class="ident" id="5842050">dict</span><span class="op" id="5842054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842057">if</span>&nbsp;<span class="ident" id="5842060">err</span>&nbsp;<span class="op" id="5842064">!=</span>&nbsp;<span class="ident" id="5842067">nil</span>&nbsp;<span class="op" id="5842071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842075">return</span>&nbsp;<span class="ident" id="5842082">nil</span><span class="op" id="5842085">,</span>&nbsp;<span class="ident" id="5842087">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842095">return</span>&nbsp;<span class="ident" id="5842102">z</span><span class="op" id="5842103">,</span>&nbsp;<span class="ident" id="5842105">nil</span><br>
<span class="lineno">85</span><span class="op" id="5842109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5842112">func</span>&nbsp;<span class="op" id="5842117">(</span><span class="ident" id="5842118">z</span>&nbsp;<span class="op" id="5842120">*</span><span class="ident" id="5842121">reader</span><span class="op" id="5842127">)</span>&nbsp;<span class="ident" id="5842129">Read</span><span class="op" id="5842133">(</span><span class="ident" id="5842134">p</span>&nbsp;<span class="op" id="5842136">[</span><span class="op" id="5842137">]</span><span class="builtintype" id="5842138">byte</span><span class="op" id="5842142">)</span>&nbsp;<span class="op" id="5842144">(</span><span class="ident" id="5842145">n</span>&nbsp;<span class="builtintype" id="5842147">int</span><span class="op" id="5842150">,</span>&nbsp;<span class="ident" id="5842152">err</span>&nbsp;<span class="builtintype" id="5842156">error</span><span class="op" id="5842161">)</span>&nbsp;<span class="op" id="5842163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842166">if</span>&nbsp;<span class="ident" id="5842169">z</span><span class="op" id="5842170">.</span><span class="ident" id="5842171">err</span>&nbsp;<span class="op" id="5842175">!=</span>&nbsp;<span class="ident" id="5842178">nil</span>&nbsp;<span class="op" id="5842182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842186">return</span>&nbsp;<span class="num" id="5842193">0</span><span class="op" id="5842194">,</span>&nbsp;<span class="ident" id="5842196">z</span><span class="op" id="5842197">.</span><span class="ident" id="5842198">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842206">if</span>&nbsp;<span class="builtinfunc" id="5842209">len</span><span class="op" id="5842212">(</span><span class="ident" id="5842213">p</span><span class="op" id="5842214">)</span>&nbsp;<span class="op" id="5842216">==</span>&nbsp;<span class="num" id="5842219">0</span>&nbsp;<span class="op" id="5842221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842225">return</span>&nbsp;<span class="num" id="5842232">0</span><span class="op" id="5842233">,</span>&nbsp;<span class="ident" id="5842235">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842244">n</span><span class="op" id="5842245">,</span>&nbsp;<span class="ident" id="5842247">err</span>&nbsp;<span class="op" id="5842251">=</span>&nbsp;<span class="ident" id="5842253">z</span><span class="op" id="5842254">.</span><span class="ident" id="5842255">decompressor</span><span class="op" id="5842267">.</span><span class="ident" id="5842268">Read</span><span class="op" id="5842272">(</span><span class="ident" id="5842273">p</span><span class="op" id="5842274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842277">z</span><span class="op" id="5842278">.</span><span class="ident" id="5842279">digest</span><span class="op" id="5842285">.</span><span class="ident" id="5842286">Write</span><span class="op" id="5842291">(</span><span class="ident" id="5842292">p</span><span class="op" id="5842293">[</span><span class="num" id="5842294">0</span><span class="op" id="5842295">:</span><span class="ident" id="5842296">n</span><span class="op" id="5842297">]</span><span class="op" id="5842298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842301">if</span>&nbsp;<span class="ident" id="5842304">n</span>&nbsp;<span class="op" id="5842306">!=</span>&nbsp;<span class="num" id="5842309">0</span>&nbsp;<span class="op" id="5842311">||</span>&nbsp;<span class="ident" id="5842314">err</span>&nbsp;<span class="op" id="5842318">!=</span>&nbsp;<span class="ident" id="5842321">io</span><span class="op" id="5842323">.</span><span class="ident" id="5842324">EOF</span>&nbsp;<span class="op" id="5842328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842332">z</span><span class="op" id="5842333">.</span><span class="ident" id="5842334">err</span>&nbsp;<span class="op" id="5842338">=</span>&nbsp;<span class="ident" id="5842340">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842346">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5842358">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842393">if</span>&nbsp;<span class="ident" id="5842396">_</span><span class="op" id="5842397">,</span>&nbsp;<span class="ident" id="5842399">err</span>&nbsp;<span class="op" id="5842403">:=</span>&nbsp;<span class="ident" id="5842406">io</span><span class="op" id="5842408">.</span><span class="ident" id="5842409">ReadFull</span><span class="op" id="5842417">(</span><span class="ident" id="5842418">z</span><span class="op" id="5842419">.</span><span class="ident" id="5842420">r</span><span class="op" id="5842421">,</span>&nbsp;<span class="ident" id="5842423">z</span><span class="op" id="5842424">.</span><span class="ident" id="5842425">scratch</span><span class="op" id="5842432">[</span><span class="num" id="5842433">0</span><span class="op" id="5842434">:</span><span class="num" id="5842435">4</span><span class="op" id="5842436">]</span><span class="op" id="5842437">)</span><span class="op" id="5842438">;</span>&nbsp;<span class="ident" id="5842440">err</span>&nbsp;<span class="op" id="5842444">!=</span>&nbsp;<span class="ident" id="5842447">nil</span>&nbsp;<span class="op" id="5842451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842455">z</span><span class="op" id="5842456">.</span><span class="ident" id="5842457">err</span>&nbsp;<span class="op" id="5842461">=</span>&nbsp;<span class="ident" id="5842463">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842469">return</span>&nbsp;<span class="num" id="5842476">0</span><span class="op" id="5842477">,</span>&nbsp;<span class="ident" id="5842479">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5842487">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842546">checksum</span>&nbsp;<span class="op" id="5842555">:=</span>&nbsp;<span class="builtintype" id="5842558">uint32</span><span class="op" id="5842564">(</span><span class="ident" id="5842565">z</span><span class="op" id="5842566">.</span><span class="ident" id="5842567">scratch</span><span class="op" id="5842574">[</span><span class="num" id="5842575">0</span><span class="op" id="5842576">]</span><span class="op" id="5842577">)</span><span class="op" id="5842578">&lt;&lt;</span><span class="num" id="5842580">24</span>&nbsp;<span class="op" id="5842583">|</span>&nbsp;<span class="builtintype" id="5842585">uint32</span><span class="op" id="5842591">(</span><span class="ident" id="5842592">z</span><span class="op" id="5842593">.</span><span class="ident" id="5842594">scratch</span><span class="op" id="5842601">[</span><span class="num" id="5842602">1</span><span class="op" id="5842603">]</span><span class="op" id="5842604">)</span><span class="op" id="5842605">&lt;&lt;</span><span class="num" id="5842607">16</span>&nbsp;<span class="op" id="5842610">|</span>&nbsp;<span class="builtintype" id="5842612">uint32</span><span class="op" id="5842618">(</span><span class="ident" id="5842619">z</span><span class="op" id="5842620">.</span><span class="ident" id="5842621">scratch</span><span class="op" id="5842628">[</span><span class="num" id="5842629">2</span><span class="op" id="5842630">]</span><span class="op" id="5842631">)</span><span class="op" id="5842632">&lt;&lt;</span><span class="num" id="5842634">8</span>&nbsp;<span class="op" id="5842636">|</span>&nbsp;<span class="builtintype" id="5842638">uint32</span><span class="op" id="5842644">(</span><span class="ident" id="5842645">z</span><span class="op" id="5842646">.</span><span class="ident" id="5842647">scratch</span><span class="op" id="5842654">[</span><span class="num" id="5842655">3</span><span class="op" id="5842656">]</span><span class="op" id="5842657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842660">if</span>&nbsp;<span class="ident" id="5842663">checksum</span>&nbsp;<span class="op" id="5842672">!=</span>&nbsp;<span class="ident" id="5842675">z</span><span class="op" id="5842676">.</span><span class="ident" id="5842677">digest</span><span class="op" id="5842683">.</span><span class="ident" id="5842684">Sum32</span><span class="op" id="5842689">(</span><span class="op" id="5842690">)</span>&nbsp;<span class="op" id="5842692">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842696">z</span><span class="op" id="5842697">.</span><span class="ident" id="5842698">err</span>&nbsp;<span class="op" id="5842702">=</span>&nbsp;<span class="ident" id="5842704">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842718">return</span>&nbsp;<span class="num" id="5842725">0</span><span class="op" id="5842726">,</span>&nbsp;<span class="ident" id="5842728">z</span><span class="op" id="5842729">.</span><span class="ident" id="5842730">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842738">return</span><br>
<span class="lineno"></span><span class="op" id="5842745">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5842748">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5842834">func</span>&nbsp;<span class="op" id="5842839">(</span><span class="ident" id="5842840">z</span>&nbsp;<span class="op" id="5842842">*</span><span class="ident" id="5842843">reader</span><span class="op" id="5842849">)</span>&nbsp;<span class="ident" id="5842851">Close</span><span class="op" id="5842856">(</span><span class="op" id="5842857">)</span>&nbsp;<span class="builtintype" id="5842859">error</span>&nbsp;<span class="op" id="5842865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842868">if</span>&nbsp;<span class="ident" id="5842871">z</span><span class="op" id="5842872">.</span><span class="ident" id="5842873">err</span>&nbsp;<span class="op" id="5842877">!=</span>&nbsp;<span class="ident" id="5842880">nil</span>&nbsp;<span class="op" id="5842884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842888">return</span>&nbsp;<span class="ident" id="5842895">z</span><span class="op" id="5842896">.</span><span class="ident" id="5842897">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5842902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5842905">z</span><span class="op" id="5842906">.</span><span class="ident" id="5842907">err</span>&nbsp;<span class="op" id="5842911">=</span>&nbsp;<span class="ident" id="5842913">z</span><span class="op" id="5842914">.</span><span class="ident" id="5842915">decompressor</span><span class="op" id="5842927">.</span><span class="ident" id="5842928">Close</span><span class="op" id="5842933">(</span><span class="op" id="5842934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5842937">return</span>&nbsp;<span class="ident" id="5842944">z</span><span class="op" id="5842945">.</span><span class="ident" id="5842946">err</span><br>
<span class="lineno"></span><span class="op" id="5842950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5842953">func</span>&nbsp;<span class="op" id="5842958">(</span><span class="ident" id="5842959">z</span>&nbsp;<span class="op" id="5842961">*</span><span class="ident" id="5842962">reader</span><span class="op" id="5842968">)</span>&nbsp;<span class="ident" id="5842970">Reset</span><span class="op" id="5842975">(</span><span class="ident" id="5842976">r</span>&nbsp;<span class="ident" id="5842978">io</span><span class="op" id="5842980">.</span><span class="ident" id="5842981">Reader</span><span class="op" id="5842987">,</span>&nbsp;<span class="ident" id="5842989">dict</span>&nbsp;<span class="op" id="5842994">[</span><span class="op" id="5842995">]</span><span class="builtintype" id="5842996">byte</span><span class="op" id="5843000">)</span>&nbsp;<span class="builtintype" id="5843002">error</span>&nbsp;<span class="op" id="5843008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843011">if</span>&nbsp;<span class="ident" id="5843014">fr</span><span class="op" id="5843016">,</span>&nbsp;<span class="ident" id="5843018">ok</span>&nbsp;<span class="op" id="5843021">:=</span>&nbsp;<span class="ident" id="5843024">r</span><span class="op" id="5843025">.</span><span class="op" id="5843026">(</span><span class="ident" id="5843027">flate</span><span class="op" id="5843032">.</span><span class="ident" id="5843033">Reader</span><span class="op" id="5843039">)</span><span class="op" id="5843040">;</span>&nbsp;<span class="ident" id="5843042">ok</span>&nbsp;<span class="op" id="5843045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843049">z</span><span class="op" id="5843050">.</span><span class="ident" id="5843051">r</span>&nbsp;<span class="op" id="5843053">=</span>&nbsp;<span class="ident" id="5843055">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843059">}</span>&nbsp;<span class="keyword" id="5843061">else</span>&nbsp;<span class="op" id="5843066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843070">z</span><span class="op" id="5843071">.</span><span class="ident" id="5843072">r</span>&nbsp;<span class="op" id="5843074">=</span>&nbsp;<span class="ident" id="5843076">bufio</span><span class="op" id="5843081">.</span><span class="ident" id="5843082">NewReader</span><span class="op" id="5843091">(</span><span class="ident" id="5843092">r</span><span class="op" id="5843093">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843099">_</span><span class="op" id="5843100">,</span>&nbsp;<span class="ident" id="5843102">err</span>&nbsp;<span class="op" id="5843106">:=</span>&nbsp;<span class="ident" id="5843109">io</span><span class="op" id="5843111">.</span><span class="ident" id="5843112">ReadFull</span><span class="op" id="5843120">(</span><span class="ident" id="5843121">z</span><span class="op" id="5843122">.</span><span class="ident" id="5843123">r</span><span class="op" id="5843124">,</span>&nbsp;<span class="ident" id="5843126">z</span><span class="op" id="5843127">.</span><span class="ident" id="5843128">scratch</span><span class="op" id="5843135">[</span><span class="num" id="5843136">0</span><span class="op" id="5843137">:</span><span class="num" id="5843138">2</span><span class="op" id="5843139">]</span><span class="op" id="5843140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843143">if</span>&nbsp;<span class="ident" id="5843146">err</span>&nbsp;<span class="op" id="5843150">!=</span>&nbsp;<span class="ident" id="5843153">nil</span>&nbsp;<span class="op" id="5843157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843161">return</span>&nbsp;<span class="ident" id="5843168">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843173">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843176">h</span>&nbsp;<span class="op" id="5843178">:=</span>&nbsp;<span class="builtintype" id="5843181">uint</span><span class="op" id="5843185">(</span><span class="ident" id="5843186">z</span><span class="op" id="5843187">.</span><span class="ident" id="5843188">scratch</span><span class="op" id="5843195">[</span><span class="num" id="5843196">0</span><span class="op" id="5843197">]</span><span class="op" id="5843198">)</span><span class="op" id="5843199">&lt;&lt;</span><span class="num" id="5843201">8</span>&nbsp;<span class="op" id="5843203">|</span>&nbsp;<span class="builtintype" id="5843205">uint</span><span class="op" id="5843209">(</span><span class="ident" id="5843210">z</span><span class="op" id="5843211">.</span><span class="ident" id="5843212">scratch</span><span class="op" id="5843219">[</span><span class="num" id="5843220">1</span><span class="op" id="5843221">]</span><span class="op" id="5843222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843225">if</span>&nbsp;<span class="op" id="5843228">(</span><span class="ident" id="5843229">z</span><span class="op" id="5843230">.</span><span class="ident" id="5843231">scratch</span><span class="op" id="5843238">[</span><span class="num" id="5843239">0</span><span class="op" id="5843240">]</span><span class="op" id="5843241">&amp;</span><span class="num" id="5843242">0x0f</span>&nbsp;<span class="op" id="5843247">!=</span>&nbsp;<span class="ident" id="5843250">zlibDeflate</span><span class="op" id="5843261">)</span>&nbsp;<span class="op" id="5843263">||</span>&nbsp;<span class="op" id="5843266">(</span><span class="ident" id="5843267">h</span><span class="op" id="5843268">%</span><span class="num" id="5843269">31</span>&nbsp;<span class="op" id="5843272">!=</span>&nbsp;<span class="num" id="5843275">0</span><span class="op" id="5843276">)</span>&nbsp;<span class="op" id="5843278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843282">return</span>&nbsp;<span class="ident" id="5843289">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843303">haveDict</span>&nbsp;<span class="op" id="5843312">:=</span>&nbsp;<span class="ident" id="5843315">z</span><span class="op" id="5843316">.</span><span class="ident" id="5843317">scratch</span><span class="op" id="5843324">[</span><span class="num" id="5843325">1</span><span class="op" id="5843326">]</span><span class="op" id="5843327">&amp;</span><span class="num" id="5843328">0x20</span>&nbsp;<span class="op" id="5843333">!=</span>&nbsp;<span class="num" id="5843336">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843339">if</span>&nbsp;<span class="ident" id="5843342">haveDict</span>&nbsp;<span class="op" id="5843351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843355">_</span><span class="op" id="5843356">,</span>&nbsp;<span class="ident" id="5843358">err</span>&nbsp;<span class="op" id="5843362">=</span>&nbsp;<span class="ident" id="5843364">io</span><span class="op" id="5843366">.</span><span class="ident" id="5843367">ReadFull</span><span class="op" id="5843375">(</span><span class="ident" id="5843376">z</span><span class="op" id="5843377">.</span><span class="ident" id="5843378">r</span><span class="op" id="5843379">,</span>&nbsp;<span class="ident" id="5843381">z</span><span class="op" id="5843382">.</span><span class="ident" id="5843383">scratch</span><span class="op" id="5843390">[</span><span class="num" id="5843391">0</span><span class="op" id="5843392">:</span><span class="num" id="5843393">4</span><span class="op" id="5843394">]</span><span class="op" id="5843395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843399">if</span>&nbsp;<span class="ident" id="5843402">err</span>&nbsp;<span class="op" id="5843406">!=</span>&nbsp;<span class="ident" id="5843409">nil</span>&nbsp;<span class="op" id="5843413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843418">return</span>&nbsp;<span class="ident" id="5843425">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843431">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843435">checksum</span>&nbsp;<span class="op" id="5843444">:=</span>&nbsp;<span class="builtintype" id="5843447">uint32</span><span class="op" id="5843453">(</span><span class="ident" id="5843454">z</span><span class="op" id="5843455">.</span><span class="ident" id="5843456">scratch</span><span class="op" id="5843463">[</span><span class="num" id="5843464">0</span><span class="op" id="5843465">]</span><span class="op" id="5843466">)</span><span class="op" id="5843467">&lt;&lt;</span><span class="num" id="5843469">24</span>&nbsp;<span class="op" id="5843472">|</span>&nbsp;<span class="builtintype" id="5843474">uint32</span><span class="op" id="5843480">(</span><span class="ident" id="5843481">z</span><span class="op" id="5843482">.</span><span class="ident" id="5843483">scratch</span><span class="op" id="5843490">[</span><span class="num" id="5843491">1</span><span class="op" id="5843492">]</span><span class="op" id="5843493">)</span><span class="op" id="5843494">&lt;&lt;</span><span class="num" id="5843496">16</span>&nbsp;<span class="op" id="5843499">|</span>&nbsp;<span class="builtintype" id="5843501">uint32</span><span class="op" id="5843507">(</span><span class="ident" id="5843508">z</span><span class="op" id="5843509">.</span><span class="ident" id="5843510">scratch</span><span class="op" id="5843517">[</span><span class="num" id="5843518">2</span><span class="op" id="5843519">]</span><span class="op" id="5843520">)</span><span class="op" id="5843521">&lt;&lt;</span><span class="num" id="5843523">8</span>&nbsp;<span class="op" id="5843525">|</span>&nbsp;<span class="builtintype" id="5843527">uint32</span><span class="op" id="5843533">(</span><span class="ident" id="5843534">z</span><span class="op" id="5843535">.</span><span class="ident" id="5843536">scratch</span><span class="op" id="5843543">[</span><span class="num" id="5843544">3</span><span class="op" id="5843545">]</span><span class="op" id="5843546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843550">if</span>&nbsp;<span class="ident" id="5843553">checksum</span>&nbsp;<span class="op" id="5843562">!=</span>&nbsp;<span class="ident" id="5843565">adler32</span><span class="op" id="5843572">.</span><span class="ident" id="5843573">Checksum</span><span class="op" id="5843581">(</span><span class="ident" id="5843582">dict</span><span class="op" id="5843586">)</span>&nbsp;<span class="op" id="5843588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843593">return</span>&nbsp;<span class="ident" id="5843600">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843619">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843622">if</span>&nbsp;<span class="ident" id="5843625">z</span><span class="op" id="5843626">.</span><span class="ident" id="5843627">decompressor</span>&nbsp;<span class="op" id="5843640">==</span>&nbsp;<span class="ident" id="5843643">nil</span>&nbsp;<span class="op" id="5843647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843651">if</span>&nbsp;<span class="ident" id="5843654">haveDict</span>&nbsp;<span class="op" id="5843663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843668">z</span><span class="op" id="5843669">.</span><span class="ident" id="5843670">decompressor</span>&nbsp;<span class="op" id="5843683">=</span>&nbsp;<span class="ident" id="5843685">flate</span><span class="op" id="5843690">.</span><span class="ident" id="5843691">NewReaderDict</span><span class="op" id="5843704">(</span><span class="ident" id="5843705">z</span><span class="op" id="5843706">.</span><span class="ident" id="5843707">r</span><span class="op" id="5843708">,</span>&nbsp;<span class="ident" id="5843710">dict</span><span class="op" id="5843714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843718">}</span>&nbsp;<span class="keyword" id="5843720">else</span>&nbsp;<span class="op" id="5843725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843730">z</span><span class="op" id="5843731">.</span><span class="ident" id="5843732">decompressor</span>&nbsp;<span class="op" id="5843745">=</span>&nbsp;<span class="ident" id="5843747">flate</span><span class="op" id="5843752">.</span><span class="ident" id="5843753">NewReader</span><span class="op" id="5843762">(</span><span class="ident" id="5843763">z</span><span class="op" id="5843764">.</span><span class="ident" id="5843765">r</span><span class="op" id="5843766">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843773">}</span>&nbsp;<span class="keyword" id="5843775">else</span>&nbsp;<span class="op" id="5843780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843784">z</span><span class="op" id="5843785">.</span><span class="ident" id="5843786">decompressor</span><span class="op" id="5843798">.</span><span class="op" id="5843799">(</span><span class="ident" id="5843800">flate</span><span class="op" id="5843805">.</span><span class="ident" id="5843806">Resetter</span><span class="op" id="5843814">)</span><span class="op" id="5843815">.</span><span class="ident" id="5843816">Reset</span><span class="op" id="5843821">(</span><span class="ident" id="5843822">z</span><span class="op" id="5843823">.</span><span class="ident" id="5843824">r</span><span class="op" id="5843825">,</span>&nbsp;<span class="ident" id="5843827">dict</span><span class="op" id="5843831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5843834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843837">z</span><span class="op" id="5843838">.</span><span class="ident" id="5843839">digest</span>&nbsp;<span class="op" id="5843846">=</span>&nbsp;<span class="ident" id="5843848">adler32</span><span class="op" id="5843855">.</span><span class="ident" id="5843856">New</span><span class="op" id="5843859">(</span><span class="op" id="5843860">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843863">return</span>&nbsp;<span class="ident" id="5843870">nil</span><br>
<span class="lineno"></span><span class="op" id="5843874">}</span>
</div>
</body>
</html>
