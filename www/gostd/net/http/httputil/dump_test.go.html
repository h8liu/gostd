<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httputil</h2>
<ul>
<li><a href="/gostd/net/http/httputil/dump.go.html">dump.go</a></li>
<li><a href="/gostd/net/http/httputil/dump_test.go.html" class="current">dump_test.go</a></li>
<li><a href="/gostd/net/http/httputil/httputil.go.html">httputil.go</a></li>
<li><a href="/gostd/net/http/httputil/persist.go.html">persist.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy.go.html">reverseproxy.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy_test.go.html">reverseproxy_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7403828">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7403883">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7403937">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7403988">package</span>&nbsp;<span class="ident" id="7403996">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7404006">import</span>&nbsp;<span class="op" id="7404013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404016">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404025">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404032">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404038">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404051">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404063">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404074">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404085">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404096">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7404106">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7404109">type</span>&nbsp;<span class="ident" id="7404114">dumpTest</span>&nbsp;<span class="keyword" id="7404123">struct</span>&nbsp;<span class="op" id="7404130">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404133">Req</span>&nbsp;&nbsp;<span class="ident" id="7404138">http</span><span class="op" id="7404142">.</span><span class="ident" id="7404143">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404152">Body</span>&nbsp;<span class="keyword" id="7404157">interface</span><span class="op" id="7404166">{</span><span class="op" id="7404167">}</span>&nbsp;<span class="comment" id="7404169">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404235">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404247">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404255">WantDumpOut</span>&nbsp;<span class="builtintype" id="7404267">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404275">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7404287">bool</span>&nbsp;<span class="comment" id="7404292">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7404340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7404343">var</span>&nbsp;<span class="ident" id="7404347">dumpTests</span>&nbsp;<span class="op" id="7404357">=</span>&nbsp;<span class="op" id="7404359">[</span><span class="op" id="7404360">]</span><span class="ident" id="7404361">dumpTest</span><span class="op" id="7404369">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7404373">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404429">Req</span><span class="op" id="7404432">:</span>&nbsp;<span class="ident" id="7404434">http</span><span class="op" id="7404438">.</span><span class="ident" id="7404439">Request</span><span class="op" id="7404446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404451">Method</span><span class="op" id="7404457">:</span>&nbsp;<span class="string" id="7404459">&#34;GET&#34;</span><span class="op" id="7404464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404469">URL</span><span class="op" id="7404472">:</span>&nbsp;<span class="op" id="7404474">&amp;</span><span class="ident" id="7404475">url</span><span class="op" id="7404478">.</span><span class="ident" id="7404479">URL</span><span class="op" id="7404482">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404488">Scheme</span><span class="op" id="7404494">:</span>&nbsp;<span class="string" id="7404496">&#34;http&#34;</span><span class="op" id="7404502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404508">Host</span><span class="op" id="7404512">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7404516">&#34;www.google.com&#34;</span><span class="op" id="7404532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404538">Path</span><span class="op" id="7404542">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7404546">&#34;/search&#34;</span><span class="op" id="7404555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404560">}</span><span class="op" id="7404561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404566">ProtoMajor</span><span class="op" id="7404576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7404584">1</span><span class="op" id="7404585">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404590">ProtoMinor</span><span class="op" id="7404600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7404608">1</span><span class="op" id="7404609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404614">TransferEncoding</span><span class="op" id="7404630">:</span>&nbsp;<span class="op" id="7404632">[</span><span class="op" id="7404633">]</span><span class="builtintype" id="7404634">string</span><span class="op" id="7404640">{</span><span class="string" id="7404641">&#34;chunked&#34;</span><span class="op" id="7404650">}</span><span class="op" id="7404651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404655">}</span><span class="op" id="7404656">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404661">Body</span><span class="op" id="7404665">:</span>&nbsp;<span class="op" id="7404667">[</span><span class="op" id="7404668">]</span><span class="builtintype" id="7404669">byte</span><span class="op" id="7404673">(</span><span class="string" id="7404674">&#34;abcdef&#34;</span><span class="op" id="7404682">)</span><span class="op" id="7404683">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404688">WantDump</span><span class="op" id="7404696">:</span>&nbsp;<span class="string" id="7404698">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7404725">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404730">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7404757">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404762">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7404799">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404804">chunk</span><span class="op" id="7404809">(</span><span class="string" id="7404810">&#34;abcdef&#34;</span><span class="op" id="7404818">)</span>&nbsp;<span class="op" id="7404820">+</span>&nbsp;<span class="ident" id="7404822">chunk</span><span class="op" id="7404827">(</span><span class="string" id="7404828">&#34;&#34;</span><span class="op" id="7404830">)</span><span class="op" id="7404831">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404834">}</span><span class="op" id="7404835">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7404839">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7404922">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7404956">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404960">Req</span><span class="op" id="7404963">:</span>&nbsp;<span class="ident" id="7404965">http</span><span class="op" id="7404969">.</span><span class="ident" id="7404970">Request</span><span class="op" id="7404977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7404982">Method</span><span class="op" id="7404988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7404994">&#34;GET&#34;</span><span class="op" id="7404999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405004">URL</span><span class="op" id="7405007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405016">mustParseURL</span><span class="op" id="7405028">(</span><span class="string" id="7405029">&#34;/foo&#34;</span><span class="op" id="7405035">)</span><span class="op" id="7405036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405041">ProtoMajor</span><span class="op" id="7405051">:</span>&nbsp;<span class="num" id="7405053">1</span><span class="op" id="7405054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405059">ProtoMinor</span><span class="op" id="7405069">:</span>&nbsp;<span class="num" id="7405071">0</span><span class="op" id="7405072">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405077">Header</span><span class="op" id="7405083">:</span>&nbsp;<span class="ident" id="7405085">http</span><span class="op" id="7405089">.</span><span class="ident" id="7405090">Header</span><span class="op" id="7405096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405102">&#34;X-Foo&#34;</span><span class="op" id="7405109">:</span>&nbsp;<span class="op" id="7405111">[</span><span class="op" id="7405112">]</span><span class="builtintype" id="7405113">string</span><span class="op" id="7405119">{</span><span class="string" id="7405120">&#34;X-Bar&#34;</span><span class="op" id="7405127">}</span><span class="op" id="7405128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405133">}</span><span class="op" id="7405134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405138">}</span><span class="op" id="7405139">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405144">WantDump</span><span class="op" id="7405152">:</span>&nbsp;<span class="string" id="7405154">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7405178">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405183">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7405205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405208">}</span><span class="op" id="7405209">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405213">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405217">Req</span><span class="op" id="7405220">:</span>&nbsp;<span class="op" id="7405222">*</span><span class="ident" id="7405223">mustNewRequest</span><span class="op" id="7405237">(</span><span class="string" id="7405238">&#34;GET&#34;</span><span class="op" id="7405243">,</span>&nbsp;<span class="string" id="7405245">&#34;http://example.com/foo&#34;</span><span class="op" id="7405269">,</span>&nbsp;<span class="builtintype" id="7405271">nil</span><span class="op" id="7405274">)</span><span class="op" id="7405275">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405280">WantDumpOut</span><span class="op" id="7405291">:</span>&nbsp;<span class="string" id="7405293">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7405317">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405322">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7405346">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405351">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7405389">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405394">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7405425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405428">}</span><span class="op" id="7405429">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7405433">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7405497">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7405554">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405572">Req</span><span class="op" id="7405575">:</span>&nbsp;<span class="op" id="7405577">*</span><span class="ident" id="7405578">mustNewRequest</span><span class="op" id="7405592">(</span><span class="string" id="7405593">&#34;GET&#34;</span><span class="op" id="7405598">,</span>&nbsp;<span class="string" id="7405600">&#34;https://example.com/foo&#34;</span><span class="op" id="7405625">,</span>&nbsp;<span class="builtintype" id="7405627">nil</span><span class="op" id="7405630">)</span><span class="op" id="7405631">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405636">WantDumpOut</span><span class="op" id="7405647">:</span>&nbsp;<span class="string" id="7405649">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7405673">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405678">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7405702">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405707">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7405745">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7405750">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7405781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405784">}</span><span class="op" id="7405785">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7405789">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405847">Req</span><span class="op" id="7405850">:</span>&nbsp;<span class="ident" id="7405852">http</span><span class="op" id="7405856">.</span><span class="ident" id="7405857">Request</span><span class="op" id="7405864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405869">Method</span><span class="op" id="7405875">:</span>&nbsp;<span class="string" id="7405877">&#34;POST&#34;</span><span class="op" id="7405883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405888">URL</span><span class="op" id="7405891">:</span>&nbsp;<span class="op" id="7405893">&amp;</span><span class="ident" id="7405894">url</span><span class="op" id="7405897">.</span><span class="ident" id="7405898">URL</span><span class="op" id="7405901">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405907">Scheme</span><span class="op" id="7405913">:</span>&nbsp;<span class="string" id="7405915">&#34;http&#34;</span><span class="op" id="7405921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405927">Host</span><span class="op" id="7405931">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405935">&#34;post.tld&#34;</span><span class="op" id="7405945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405951">Path</span><span class="op" id="7405955">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7405959">&#34;/&#34;</span><span class="op" id="7405962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7405967">}</span><span class="op" id="7405968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405973">ContentLength</span><span class="op" id="7405986">:</span>&nbsp;<span class="num" id="7405988">6</span><span class="op" id="7405989">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7405994">ProtoMajor</span><span class="op" id="7406004">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406009">1</span><span class="op" id="7406010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406015">ProtoMinor</span><span class="op" id="7406025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406030">1</span><span class="op" id="7406031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406035">}</span><span class="op" id="7406036">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406041">Body</span><span class="op" id="7406045">:</span>&nbsp;<span class="op" id="7406047">[</span><span class="op" id="7406048">]</span><span class="builtintype" id="7406049">byte</span><span class="op" id="7406053">(</span><span class="string" id="7406054">&#34;abcdef&#34;</span><span class="op" id="7406062">)</span><span class="op" id="7406063">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406068">WantDumpOut</span><span class="op" id="7406079">:</span>&nbsp;<span class="string" id="7406081">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7406103">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406108">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7406129">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406134">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7406172">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406177">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7406201">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406206">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7406237">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406242">NoBody</span><span class="op" id="7406248">:</span>&nbsp;<span class="builtintype" id="7406250">true</span><span class="op" id="7406254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406257">}</span><span class="op" id="7406258">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7406262">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406317">Req</span><span class="op" id="7406320">:</span>&nbsp;<span class="ident" id="7406322">http</span><span class="op" id="7406326">.</span><span class="ident" id="7406327">Request</span><span class="op" id="7406334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406339">Method</span><span class="op" id="7406345">:</span>&nbsp;<span class="string" id="7406347">&#34;POST&#34;</span><span class="op" id="7406353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406358">URL</span><span class="op" id="7406361">:</span>&nbsp;<span class="op" id="7406363">&amp;</span><span class="ident" id="7406364">url</span><span class="op" id="7406367">.</span><span class="ident" id="7406368">URL</span><span class="op" id="7406371">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406377">Scheme</span><span class="op" id="7406383">:</span>&nbsp;<span class="string" id="7406385">&#34;http&#34;</span><span class="op" id="7406391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406397">Host</span><span class="op" id="7406401">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7406405">&#34;post.tld&#34;</span><span class="op" id="7406415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406421">Path</span><span class="op" id="7406425">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7406429">&#34;/&#34;</span><span class="op" id="7406432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406437">}</span><span class="op" id="7406438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406443">ContentLength</span><span class="op" id="7406456">:</span>&nbsp;<span class="num" id="7406458">8193</span><span class="op" id="7406462">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406467">ProtoMajor</span><span class="op" id="7406477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406482">1</span><span class="op" id="7406483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406488">ProtoMinor</span><span class="op" id="7406498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7406503">1</span><span class="op" id="7406504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406508">}</span><span class="op" id="7406509">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406514">Body</span><span class="op" id="7406518">:</span>&nbsp;<span class="ident" id="7406520">bytes</span><span class="op" id="7406525">.</span><span class="ident" id="7406526">Repeat</span><span class="op" id="7406532">(</span><span class="op" id="7406533">[</span><span class="op" id="7406534">]</span><span class="builtintype" id="7406535">byte</span><span class="op" id="7406539">(</span><span class="string" id="7406540">&#34;a&#34;</span><span class="op" id="7406543">)</span><span class="op" id="7406544">,</span>&nbsp;<span class="num" id="7406546">8193</span><span class="op" id="7406550">)</span><span class="op" id="7406551">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406556">WantDumpOut</span><span class="op" id="7406567">:</span>&nbsp;<span class="string" id="7406569">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7406591">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406596">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7406617">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406622">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7406660">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406665">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7406692">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7406697">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7406729">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406734">strings</span><span class="op" id="7406741">.</span><span class="ident" id="7406742">Repeat</span><span class="op" id="7406748">(</span><span class="string" id="7406749">&#34;a&#34;</span><span class="op" id="7406752">,</span>&nbsp;<span class="num" id="7406754">8193</span><span class="op" id="7406758">)</span><span class="op" id="7406759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406762">}</span><span class="op" id="7406763">,</span><br>
<span class="lineno"></span><span class="op" id="7406765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7406768">func</span>&nbsp;<span class="ident" id="7406773">TestDumpRequest</span><span class="op" id="7406788">(</span><span class="ident" id="7406789">t</span>&nbsp;<span class="op" id="7406791">*</span><span class="ident" id="7406792">testing</span><span class="op" id="7406799">.</span><span class="ident" id="7406800">T</span><span class="op" id="7406801">)</span>&nbsp;<span class="op" id="7406803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406806">numg0</span>&nbsp;<span class="op" id="7406812">:=</span>&nbsp;<span class="ident" id="7406815">runtime</span><span class="op" id="7406822">.</span><span class="ident" id="7406823">NumGoroutine</span><span class="op" id="7406835">(</span><span class="op" id="7406836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406839">for</span>&nbsp;<span class="ident" id="7406843">i</span><span class="op" id="7406844">,</span>&nbsp;<span class="ident" id="7406846">tt</span>&nbsp;<span class="op" id="7406849">:=</span>&nbsp;<span class="keyword" id="7406852">range</span>&nbsp;<span class="ident" id="7406858">dumpTests</span>&nbsp;<span class="op" id="7406868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406872">setBody</span>&nbsp;<span class="op" id="7406880">:=</span>&nbsp;<span class="keyword" id="7406883">func</span><span class="op" id="7406887">(</span><span class="op" id="7406888">)</span>&nbsp;<span class="op" id="7406890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406895">if</span>&nbsp;<span class="ident" id="7406898">tt</span><span class="op" id="7406900">.</span><span class="ident" id="7406901">Body</span>&nbsp;<span class="op" id="7406906">==</span>&nbsp;<span class="builtintype" id="7406909">nil</span>&nbsp;<span class="op" id="7406913">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406919">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7406929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406934">switch</span>&nbsp;<span class="ident" id="7406941">b</span>&nbsp;<span class="op" id="7406943">:=</span>&nbsp;<span class="ident" id="7406946">tt</span><span class="op" id="7406948">.</span><span class="ident" id="7406949">Body</span><span class="op" id="7406953">.</span><span class="op" id="7406954">(</span><span class="keyword" id="7406955">type</span><span class="op" id="7406959">)</span>&nbsp;<span class="op" id="7406961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7406966">case</span>&nbsp;<span class="op" id="7406971">[</span><span class="op" id="7406972">]</span><span class="builtintype" id="7406973">byte</span><span class="op" id="7406977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7406983">tt</span><span class="op" id="7406985">.</span><span class="ident" id="7406986">Req</span><span class="op" id="7406989">.</span><span class="ident" id="7406990">Body</span>&nbsp;<span class="op" id="7406995">=</span>&nbsp;<span class="ident" id="7406997">ioutil</span><span class="op" id="7407003">.</span><span class="ident" id="7407004">NopCloser</span><span class="op" id="7407013">(</span><span class="ident" id="7407014">bytes</span><span class="op" id="7407019">.</span><span class="ident" id="7407020">NewReader</span><span class="op" id="7407029">(</span><span class="ident" id="7407030">b</span><span class="op" id="7407031">)</span><span class="op" id="7407032">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407037">case</span>&nbsp;<span class="keyword" id="7407042">func</span><span class="op" id="7407046">(</span><span class="op" id="7407047">)</span>&nbsp;<span class="ident" id="7407049">io</span><span class="op" id="7407051">.</span><span class="ident" id="7407052">ReadCloser</span><span class="op" id="7407062">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407068">tt</span><span class="op" id="7407070">.</span><span class="ident" id="7407071">Req</span><span class="op" id="7407074">.</span><span class="ident" id="7407075">Body</span>&nbsp;<span class="op" id="7407080">=</span>&nbsp;<span class="ident" id="7407082">b</span><span class="op" id="7407083">(</span><span class="op" id="7407084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407089">default</span><span class="op" id="7407096">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407102">t</span><span class="op" id="7407103">.</span><span class="ident" id="7407104">Fatalf</span><span class="op" id="7407110">(</span><span class="string" id="7407111">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7407144">,</span>&nbsp;<span class="ident" id="7407146">i</span><span class="op" id="7407147">,</span>&nbsp;<span class="ident" id="7407149">tt</span><span class="op" id="7407151">.</span><span class="ident" id="7407152">Body</span><span class="op" id="7407156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407161">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407169">setBody</span><span class="op" id="7407176">(</span><span class="op" id="7407177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407181">if</span>&nbsp;<span class="ident" id="7407184">tt</span><span class="op" id="7407186">.</span><span class="ident" id="7407187">Req</span><span class="op" id="7407190">.</span><span class="ident" id="7407191">Header</span>&nbsp;<span class="op" id="7407198">==</span>&nbsp;<span class="builtintype" id="7407201">nil</span>&nbsp;<span class="op" id="7407205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407210">tt</span><span class="op" id="7407212">.</span><span class="ident" id="7407213">Req</span><span class="op" id="7407216">.</span><span class="ident" id="7407217">Header</span>&nbsp;<span class="op" id="7407224">=</span>&nbsp;<span class="builtinfunc" id="7407226">make</span><span class="op" id="7407230">(</span><span class="ident" id="7407231">http</span><span class="op" id="7407235">.</span><span class="ident" id="7407236">Header</span><span class="op" id="7407242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407246">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407251">if</span>&nbsp;<span class="ident" id="7407254">tt</span><span class="op" id="7407256">.</span><span class="ident" id="7407257">WantDump</span>&nbsp;<span class="op" id="7407266">!=</span>&nbsp;<span class="string" id="7407269">&#34;&#34;</span>&nbsp;<span class="op" id="7407272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407277">setBody</span><span class="op" id="7407284">(</span><span class="op" id="7407285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407290">dump</span><span class="op" id="7407294">,</span>&nbsp;<span class="ident" id="7407296">err</span>&nbsp;<span class="op" id="7407300">:=</span>&nbsp;<span class="ident" id="7407303">DumpRequest</span><span class="op" id="7407314">(</span><span class="op" id="7407315">&amp;</span><span class="ident" id="7407316">tt</span><span class="op" id="7407318">.</span><span class="ident" id="7407319">Req</span><span class="op" id="7407322">,</span>&nbsp;<span class="op" id="7407324">!</span><span class="ident" id="7407325">tt</span><span class="op" id="7407327">.</span><span class="ident" id="7407328">NoBody</span><span class="op" id="7407334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407339">if</span>&nbsp;<span class="ident" id="7407342">err</span>&nbsp;<span class="op" id="7407346">!=</span>&nbsp;<span class="builtintype" id="7407349">nil</span>&nbsp;<span class="op" id="7407353">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407359">t</span><span class="op" id="7407360">.</span><span class="ident" id="7407361">Errorf</span><span class="op" id="7407367">(</span><span class="string" id="7407368">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7407389">,</span>&nbsp;<span class="ident" id="7407391">i</span><span class="op" id="7407392">,</span>&nbsp;<span class="ident" id="7407394">err</span><span class="op" id="7407397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407403">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407420">if</span>&nbsp;<span class="builtintype" id="7407423">string</span><span class="op" id="7407429">(</span><span class="ident" id="7407430">dump</span><span class="op" id="7407434">)</span>&nbsp;<span class="op" id="7407436">!=</span>&nbsp;<span class="ident" id="7407439">tt</span><span class="op" id="7407441">.</span><span class="ident" id="7407442">WantDump</span>&nbsp;<span class="op" id="7407451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407457">t</span><span class="op" id="7407458">.</span><span class="ident" id="7407459">Errorf</span><span class="op" id="7407465">(</span><span class="string" id="7407466">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7407510">,</span>&nbsp;<span class="ident" id="7407512">i</span><span class="op" id="7407513">,</span>&nbsp;<span class="ident" id="7407515">tt</span><span class="op" id="7407517">.</span><span class="ident" id="7407518">WantDump</span><span class="op" id="7407526">,</span>&nbsp;<span class="builtintype" id="7407528">string</span><span class="op" id="7407534">(</span><span class="ident" id="7407535">dump</span><span class="op" id="7407539">)</span><span class="op" id="7407540">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407546">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407567">if</span>&nbsp;<span class="ident" id="7407570">tt</span><span class="op" id="7407572">.</span><span class="ident" id="7407573">WantDumpOut</span>&nbsp;<span class="op" id="7407585">!=</span>&nbsp;<span class="string" id="7407588">&#34;&#34;</span>&nbsp;<span class="op" id="7407591">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407596">setBody</span><span class="op" id="7407603">(</span><span class="op" id="7407604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407609">dump</span><span class="op" id="7407613">,</span>&nbsp;<span class="ident" id="7407615">err</span>&nbsp;<span class="op" id="7407619">:=</span>&nbsp;<span class="ident" id="7407622">DumpRequestOut</span><span class="op" id="7407636">(</span><span class="op" id="7407637">&amp;</span><span class="ident" id="7407638">tt</span><span class="op" id="7407640">.</span><span class="ident" id="7407641">Req</span><span class="op" id="7407644">,</span>&nbsp;<span class="op" id="7407646">!</span><span class="ident" id="7407647">tt</span><span class="op" id="7407649">.</span><span class="ident" id="7407650">NoBody</span><span class="op" id="7407656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407661">if</span>&nbsp;<span class="ident" id="7407664">err</span>&nbsp;<span class="op" id="7407668">!=</span>&nbsp;<span class="builtintype" id="7407671">nil</span>&nbsp;<span class="op" id="7407675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407681">t</span><span class="op" id="7407682">.</span><span class="ident" id="7407683">Errorf</span><span class="op" id="7407689">(</span><span class="string" id="7407690">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7407714">,</span>&nbsp;<span class="ident" id="7407716">i</span><span class="op" id="7407717">,</span>&nbsp;<span class="ident" id="7407719">err</span><span class="op" id="7407722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407728">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407745">if</span>&nbsp;<span class="builtintype" id="7407748">string</span><span class="op" id="7407754">(</span><span class="ident" id="7407755">dump</span><span class="op" id="7407759">)</span>&nbsp;<span class="op" id="7407761">!=</span>&nbsp;<span class="ident" id="7407764">tt</span><span class="op" id="7407766">.</span><span class="ident" id="7407767">WantDumpOut</span>&nbsp;<span class="op" id="7407779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407785">t</span><span class="op" id="7407786">.</span><span class="ident" id="7407787">Errorf</span><span class="op" id="7407793">(</span><span class="string" id="7407794">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7407841">,</span>&nbsp;<span class="ident" id="7407843">i</span><span class="op" id="7407844">,</span>&nbsp;<span class="ident" id="7407846">tt</span><span class="op" id="7407848">.</span><span class="ident" id="7407849">WantDumpOut</span><span class="op" id="7407860">,</span>&nbsp;<span class="builtintype" id="7407862">string</span><span class="op" id="7407868">(</span><span class="ident" id="7407869">dump</span><span class="op" id="7407873">)</span><span class="op" id="7407874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407880">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407892">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7407899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7407902">if</span>&nbsp;<span class="ident" id="7407905">dg</span>&nbsp;<span class="op" id="7407908">:=</span>&nbsp;<span class="ident" id="7407911">runtime</span><span class="op" id="7407918">.</span><span class="ident" id="7407919">NumGoroutine</span><span class="op" id="7407931">(</span><span class="op" id="7407932">)</span>&nbsp;<span class="op" id="7407934">-</span>&nbsp;<span class="ident" id="7407936">numg0</span><span class="op" id="7407941">;</span>&nbsp;<span class="ident" id="7407943">dg</span>&nbsp;<span class="op" id="7407946">&gt;</span>&nbsp;<span class="num" id="7407948">4</span>&nbsp;<span class="op" id="7407950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407954">buf</span>&nbsp;<span class="op" id="7407958">:=</span>&nbsp;<span class="builtinfunc" id="7407961">make</span><span class="op" id="7407965">(</span><span class="op" id="7407966">[</span><span class="op" id="7407967">]</span><span class="builtintype" id="7407968">byte</span><span class="op" id="7407972">,</span>&nbsp;<span class="num" id="7407974">4096</span><span class="op" id="7407978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7407982">buf</span>&nbsp;<span class="op" id="7407986">=</span>&nbsp;<span class="ident" id="7407988">buf</span><span class="op" id="7407991">[</span><span class="op" id="7407992">:</span><span class="ident" id="7407993">runtime</span><span class="op" id="7408000">.</span><span class="ident" id="7408001">Stack</span><span class="op" id="7408006">(</span><span class="ident" id="7408007">buf</span><span class="op" id="7408010">,</span>&nbsp;<span class="builtintype" id="7408012">true</span><span class="op" id="7408016">)</span><span class="op" id="7408017">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408021">t</span><span class="op" id="7408022">.</span><span class="ident" id="7408023">Errorf</span><span class="op" id="7408029">(</span><span class="string" id="7408030">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7408087">,</span>&nbsp;<span class="ident" id="7408089">dg</span><span class="op" id="7408091">,</span>&nbsp;<span class="ident" id="7408093">buf</span><span class="op" id="7408096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408099">}</span><br>
<span class="lineno"></span><span class="op" id="7408101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7408104">func</span>&nbsp;<span class="ident" id="7408109">chunk</span><span class="op" id="7408114">(</span><span class="ident" id="7408115">s</span>&nbsp;<span class="builtintype" id="7408117">string</span><span class="op" id="7408123">)</span>&nbsp;<span class="builtintype" id="7408125">string</span>&nbsp;<span class="op" id="7408132">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408135">return</span>&nbsp;<span class="ident" id="7408142">fmt</span><span class="op" id="7408145">.</span><span class="ident" id="7408146">Sprintf</span><span class="op" id="7408153">(</span><span class="string" id="7408154">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7408168">,</span>&nbsp;<span class="builtinfunc" id="7408170">len</span><span class="op" id="7408173">(</span><span class="ident" id="7408174">s</span><span class="op" id="7408175">)</span><span class="op" id="7408176">,</span>&nbsp;<span class="ident" id="7408178">s</span><span class="op" id="7408179">)</span><br>
<span class="lineno"></span><span class="op" id="7408181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7408184">func</span>&nbsp;<span class="ident" id="7408189">mustParseURL</span><span class="op" id="7408201">(</span><span class="ident" id="7408202">s</span>&nbsp;<span class="builtintype" id="7408204">string</span><span class="op" id="7408210">)</span>&nbsp;<span class="op" id="7408212">*</span><span class="ident" id="7408213">url</span><span class="op" id="7408216">.</span><span class="ident" id="7408217">URL</span>&nbsp;<span class="op" id="7408221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408224">u</span><span class="op" id="7408225">,</span>&nbsp;<span class="ident" id="7408227">err</span>&nbsp;<span class="op" id="7408231">:=</span>&nbsp;<span class="ident" id="7408234">url</span><span class="op" id="7408237">.</span><span class="ident" id="7408238">Parse</span><span class="op" id="7408243">(</span><span class="ident" id="7408244">s</span><span class="op" id="7408245">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408248">if</span>&nbsp;<span class="ident" id="7408251">err</span>&nbsp;<span class="op" id="7408255">!=</span>&nbsp;<span class="builtintype" id="7408258">nil</span>&nbsp;<span class="op" id="7408262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7408266">panic</span><span class="op" id="7408271">(</span><span class="ident" id="7408272">fmt</span><span class="op" id="7408275">.</span><span class="ident" id="7408276">Sprintf</span><span class="op" id="7408283">(</span><span class="string" id="7408284">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7408310">,</span>&nbsp;<span class="ident" id="7408312">s</span><span class="op" id="7408313">,</span>&nbsp;<span class="ident" id="7408315">err</span><span class="op" id="7408318">)</span><span class="op" id="7408319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408325">return</span>&nbsp;<span class="ident" id="7408332">u</span><br>
<span class="lineno"></span><span class="op" id="7408334">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7408337">func</span>&nbsp;<span class="ident" id="7408342">mustNewRequest</span><span class="op" id="7408356">(</span><span class="ident" id="7408357">method</span><span class="op" id="7408363">,</span>&nbsp;<span class="ident" id="7408365">url</span>&nbsp;<span class="builtintype" id="7408369">string</span><span class="op" id="7408375">,</span>&nbsp;<span class="ident" id="7408377">body</span>&nbsp;<span class="ident" id="7408382">io</span><span class="op" id="7408384">.</span><span class="ident" id="7408385">Reader</span><span class="op" id="7408391">)</span>&nbsp;<span class="op" id="7408393">*</span><span class="ident" id="7408394">http</span><span class="op" id="7408398">.</span><span class="ident" id="7408399">Request</span>&nbsp;<span class="op" id="7408407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408410">req</span><span class="op" id="7408413">,</span>&nbsp;<span class="ident" id="7408415">err</span>&nbsp;<span class="op" id="7408419">:=</span>&nbsp;<span class="ident" id="7408422">http</span><span class="op" id="7408426">.</span><span class="ident" id="7408427">NewRequest</span><span class="op" id="7408437">(</span><span class="ident" id="7408438">method</span><span class="op" id="7408444">,</span>&nbsp;<span class="ident" id="7408446">url</span><span class="op" id="7408449">,</span>&nbsp;<span class="ident" id="7408451">body</span><span class="op" id="7408455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408458">if</span>&nbsp;<span class="ident" id="7408461">err</span>&nbsp;<span class="op" id="7408465">!=</span>&nbsp;<span class="builtintype" id="7408468">nil</span>&nbsp;<span class="op" id="7408472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7408476">panic</span><span class="op" id="7408481">(</span><span class="ident" id="7408482">fmt</span><span class="op" id="7408485">.</span><span class="ident" id="7408486">Sprintf</span><span class="op" id="7408493">(</span><span class="string" id="7408494">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7408527">,</span>&nbsp;<span class="ident" id="7408529">method</span><span class="op" id="7408535">,</span>&nbsp;<span class="ident" id="7408537">url</span><span class="op" id="7408540">,</span>&nbsp;<span class="ident" id="7408542">body</span><span class="op" id="7408546">,</span>&nbsp;<span class="ident" id="7408548">err</span><span class="op" id="7408551">)</span><span class="op" id="7408552">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7408558">return</span>&nbsp;<span class="ident" id="7408565">req</span><br>
<span class="lineno"></span><span class="op" id="7408569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7408572">var</span>&nbsp;<span class="ident" id="7408576">dumpResTests</span>&nbsp;<span class="op" id="7408589">=</span>&nbsp;<span class="op" id="7408591">[</span><span class="op" id="7408592">]</span><span class="keyword" id="7408593">struct</span>&nbsp;<span class="op" id="7408600">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408603">res</span>&nbsp;&nbsp;<span class="op" id="7408608">*</span><span class="ident" id="7408609">http</span><span class="op" id="7408613">.</span><span class="ident" id="7408614">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408624">body</span>&nbsp;<span class="builtintype" id="7408629">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408635">want</span>&nbsp;<span class="builtintype" id="7408640">string</span><br>
<span class="lineno"></span><span class="op" id="7408647">}</span><span class="op" id="7408648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408651">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408655">res</span><span class="op" id="7408658">:</span>&nbsp;<span class="op" id="7408660">&amp;</span><span class="ident" id="7408661">http</span><span class="op" id="7408665">.</span><span class="ident" id="7408666">Response</span><span class="op" id="7408674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408679">Status</span><span class="op" id="7408685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408694">&#34;200&nbsp;OK&#34;</span><span class="op" id="7408702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408707">StatusCode</span><span class="op" id="7408717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408722">200</span><span class="op" id="7408725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408730">Proto</span><span class="op" id="7408735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408745">&#34;HTTP/1.1&#34;</span><span class="op" id="7408755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408760">ProtoMajor</span><span class="op" id="7408770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408775">1</span><span class="op" id="7408776">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408781">ProtoMinor</span><span class="op" id="7408791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7408796">1</span><span class="op" id="7408797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408802">ContentLength</span><span class="op" id="7408815">:</span>&nbsp;<span class="num" id="7408817">50</span><span class="op" id="7408819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408824">Header</span><span class="op" id="7408830">:</span>&nbsp;<span class="ident" id="7408832">http</span><span class="op" id="7408836">.</span><span class="ident" id="7408837">Header</span><span class="op" id="7408843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7408849">&#34;Foo&#34;</span><span class="op" id="7408854">:</span>&nbsp;<span class="op" id="7408856">[</span><span class="op" id="7408857">]</span><span class="builtintype" id="7408858">string</span><span class="op" id="7408864">{</span><span class="string" id="7408865">&#34;Bar&#34;</span><span class="op" id="7408870">}</span><span class="op" id="7408871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408876">}</span><span class="op" id="7408877">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408882">Body</span><span class="op" id="7408886">:</span>&nbsp;<span class="ident" id="7408888">ioutil</span><span class="op" id="7408894">.</span><span class="ident" id="7408895">NopCloser</span><span class="op" id="7408904">(</span><span class="ident" id="7408905">strings</span><span class="op" id="7408912">.</span><span class="ident" id="7408913">NewReader</span><span class="op" id="7408922">(</span><span class="string" id="7408923">&#34;foo&#34;</span><span class="op" id="7408928">)</span><span class="op" id="7408929">)</span><span class="op" id="7408930">,</span>&nbsp;<span class="comment" id="7408932">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7408955">}</span><span class="op" id="7408956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7408960">body</span><span class="op" id="7408964">:</span>&nbsp;<span class="builtintype" id="7408966">false</span><span class="op" id="7408971">,</span>&nbsp;<span class="comment" id="7408973">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409015">want</span><span class="op" id="7409019">:</span>&nbsp;<span class="string" id="7409021">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7409066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409069">}</span><span class="op" id="7409070">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409078">res</span><span class="op" id="7409081">:</span>&nbsp;<span class="op" id="7409083">&amp;</span><span class="ident" id="7409084">http</span><span class="op" id="7409088">.</span><span class="ident" id="7409089">Response</span><span class="op" id="7409097">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409102">Status</span><span class="op" id="7409108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409117">&#34;200&nbsp;OK&#34;</span><span class="op" id="7409125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409130">StatusCode</span><span class="op" id="7409140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409145">200</span><span class="op" id="7409148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409153">Proto</span><span class="op" id="7409158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409168">&#34;HTTP/1.1&#34;</span><span class="op" id="7409178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409183">ProtoMajor</span><span class="op" id="7409193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409198">1</span><span class="op" id="7409199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409204">ProtoMinor</span><span class="op" id="7409214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409219">1</span><span class="op" id="7409220">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409225">ContentLength</span><span class="op" id="7409238">:</span>&nbsp;<span class="num" id="7409240">3</span><span class="op" id="7409241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409246">Body</span><span class="op" id="7409250">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409261">ioutil</span><span class="op" id="7409267">.</span><span class="ident" id="7409268">NopCloser</span><span class="op" id="7409277">(</span><span class="ident" id="7409278">strings</span><span class="op" id="7409285">.</span><span class="ident" id="7409286">NewReader</span><span class="op" id="7409295">(</span><span class="string" id="7409296">&#34;foo&#34;</span><span class="op" id="7409301">)</span><span class="op" id="7409302">)</span><span class="op" id="7409303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409307">}</span><span class="op" id="7409308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409312">body</span><span class="op" id="7409316">:</span>&nbsp;<span class="builtintype" id="7409318">true</span><span class="op" id="7409322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409326">want</span><span class="op" id="7409330">:</span>&nbsp;<span class="string" id="7409332">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7409372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409375">}</span><span class="op" id="7409376">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409384">res</span><span class="op" id="7409387">:</span>&nbsp;<span class="op" id="7409389">&amp;</span><span class="ident" id="7409390">http</span><span class="op" id="7409394">.</span><span class="ident" id="7409395">Response</span><span class="op" id="7409403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409408">Status</span><span class="op" id="7409414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409426">&#34;200&nbsp;OK&#34;</span><span class="op" id="7409434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409439">StatusCode</span><span class="op" id="7409449">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409457">200</span><span class="op" id="7409460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409465">Proto</span><span class="op" id="7409470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409483">&#34;HTTP/1.1&#34;</span><span class="op" id="7409493">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409498">ProtoMajor</span><span class="op" id="7409508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409516">1</span><span class="op" id="7409517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409522">ProtoMinor</span><span class="op" id="7409532">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7409540">1</span><span class="op" id="7409541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409546">ContentLength</span><span class="op" id="7409559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409564">-</span><span class="num" id="7409565">1</span><span class="op" id="7409566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409571">Body</span><span class="op" id="7409575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409589">ioutil</span><span class="op" id="7409595">.</span><span class="ident" id="7409596">NopCloser</span><span class="op" id="7409605">(</span><span class="ident" id="7409606">strings</span><span class="op" id="7409613">.</span><span class="ident" id="7409614">NewReader</span><span class="op" id="7409623">(</span><span class="string" id="7409624">&#34;foo&#34;</span><span class="op" id="7409629">)</span><span class="op" id="7409630">)</span><span class="op" id="7409631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409636">TransferEncoding</span><span class="op" id="7409652">:</span>&nbsp;<span class="op" id="7409654">[</span><span class="op" id="7409655">]</span><span class="builtintype" id="7409656">string</span><span class="op" id="7409662">{</span><span class="string" id="7409663">&#34;chunked&#34;</span><span class="op" id="7409672">}</span><span class="op" id="7409673">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409677">}</span><span class="op" id="7409678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409682">body</span><span class="op" id="7409686">:</span>&nbsp;<span class="builtintype" id="7409688">true</span><span class="op" id="7409692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409696">want</span><span class="op" id="7409700">:</span>&nbsp;<span class="string" id="7409702">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7409755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409758">}</span><span class="op" id="7409759">,</span><br>
<span class="lineno"></span><span class="op" id="7409761">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7409764">func</span>&nbsp;<span class="ident" id="7409769">TestDumpResponse</span><span class="op" id="7409785">(</span><span class="ident" id="7409786">t</span>&nbsp;<span class="op" id="7409788">*</span><span class="ident" id="7409789">testing</span><span class="op" id="7409796">.</span><span class="ident" id="7409797">T</span><span class="op" id="7409798">)</span>&nbsp;<span class="op" id="7409800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409803">for</span>&nbsp;<span class="ident" id="7409807">i</span><span class="op" id="7409808">,</span>&nbsp;<span class="ident" id="7409810">tt</span>&nbsp;<span class="op" id="7409813">:=</span>&nbsp;<span class="keyword" id="7409816">range</span>&nbsp;<span class="ident" id="7409822">dumpResTests</span>&nbsp;<span class="op" id="7409835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409839">gotb</span><span class="op" id="7409843">,</span>&nbsp;<span class="ident" id="7409845">err</span>&nbsp;<span class="op" id="7409849">:=</span>&nbsp;<span class="ident" id="7409852">DumpResponse</span><span class="op" id="7409864">(</span><span class="ident" id="7409865">tt</span><span class="op" id="7409867">.</span><span class="ident" id="7409868">res</span><span class="op" id="7409871">,</span>&nbsp;<span class="ident" id="7409873">tt</span><span class="op" id="7409875">.</span><span class="ident" id="7409876">body</span><span class="op" id="7409880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409884">if</span>&nbsp;<span class="ident" id="7409887">err</span>&nbsp;<span class="op" id="7409891">!=</span>&nbsp;<span class="builtintype" id="7409894">nil</span>&nbsp;<span class="op" id="7409898">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409903">t</span><span class="op" id="7409904">.</span><span class="ident" id="7409905">Errorf</span><span class="op" id="7409911">(</span><span class="string" id="7409912">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7409935">,</span>&nbsp;<span class="ident" id="7409937">i</span><span class="op" id="7409938">,</span>&nbsp;<span class="ident" id="7409940">err</span><span class="op" id="7409943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7409948">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7409959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409963">got</span>&nbsp;<span class="op" id="7409967">:=</span>&nbsp;<span class="builtintype" id="7409970">string</span><span class="op" id="7409976">(</span><span class="ident" id="7409977">gotb</span><span class="op" id="7409981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409985">got</span>&nbsp;<span class="op" id="7409989">=</span>&nbsp;<span class="ident" id="7409991">strings</span><span class="op" id="7409998">.</span><span class="ident" id="7409999">TrimSpace</span><span class="op" id="7410008">(</span><span class="ident" id="7410009">got</span><span class="op" id="7410012">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410016">got</span>&nbsp;<span class="op" id="7410020">=</span>&nbsp;<span class="ident" id="7410022">strings</span><span class="op" id="7410029">.</span><span class="ident" id="7410030">Replace</span><span class="op" id="7410037">(</span><span class="ident" id="7410038">got</span><span class="op" id="7410041">,</span>&nbsp;<span class="string" id="7410043">&#34;\r&#34;</span><span class="op" id="7410047">,</span>&nbsp;<span class="string" id="7410049">&#34;&#34;</span><span class="op" id="7410051">,</span>&nbsp;<span class="op" id="7410053">-</span><span class="num" id="7410054">1</span><span class="op" id="7410055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7410060">if</span>&nbsp;<span class="ident" id="7410063">got</span>&nbsp;<span class="op" id="7410067">!=</span>&nbsp;<span class="ident" id="7410070">tt</span><span class="op" id="7410072">.</span><span class="ident" id="7410073">want</span>&nbsp;<span class="op" id="7410078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7410083">t</span><span class="op" id="7410084">.</span><span class="ident" id="7410085">Errorf</span><span class="op" id="7410091">(</span><span class="string" id="7410092">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7410135">,</span>&nbsp;<span class="ident" id="7410137">i</span><span class="op" id="7410138">,</span>&nbsp;<span class="ident" id="7410140">got</span><span class="op" id="7410143">,</span>&nbsp;<span class="ident" id="7410145">tt</span><span class="op" id="7410147">.</span><span class="ident" id="7410148">want</span><span class="op" id="7410152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410156">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7410159">}</span><br>
<span class="lineno"></span><span class="op" id="7410161">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
