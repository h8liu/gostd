<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5680420">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5680475">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5680529">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5680580">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5680613">package</span>&nbsp;<span class="ident" id="5680621">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5680629">import</span>&nbsp;<span class="op" id="5680636">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680639">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680649">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="5680655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5680658">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="5680727">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5680773">func</span>&nbsp;<span class="ident" id="5680778">unixSyslog</span><span class="op" id="5680788">(</span><span class="op" id="5680789">)</span>&nbsp;<span class="op" id="5680791">(</span><span class="ident" id="5680792">conn</span>&nbsp;<span class="ident" id="5680797"><a href="/log/syslog/syslog.go.html#5674903">serverConn</a></span><span class="op" id="5680807">,</span>&nbsp;<span class="ident" id="5680809">err</span>&nbsp;<span class="builtintype" id="5680813">error</span><span class="op" id="5680818">)</span>&nbsp;<span class="op" id="5680820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5680823">logTypes</span>&nbsp;<span class="op" id="5680832">:=</span>&nbsp;<span class="op" id="5680835">[</span><span class="op" id="5680836">]</span><span class="builtintype" id="5680837">string</span><span class="op" id="5680843">{</span><span class="string" id="5680844">&#34;unixgram&#34;</span><span class="op" id="5680854">,</span>&nbsp;<span class="string" id="5680856">&#34;unix&#34;</span><span class="op" id="5680862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5680865">logPaths</span>&nbsp;<span class="op" id="5680874">:=</span>&nbsp;<span class="op" id="5680877">[</span><span class="op" id="5680878">]</span><span class="builtintype" id="5680879">string</span><span class="op" id="5680885">{</span><span class="string" id="5680886">&#34;/dev/log&#34;</span><span class="op" id="5680896">,</span>&nbsp;<span class="string" id="5680898">&#34;/var/run/syslog&#34;</span><span class="op" id="5680915">,</span>&nbsp;<span class="string" id="5680917">&#34;/var/run/log&#34;</span><span class="op" id="5680931">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5680934">for</span>&nbsp;<span class="ident" id="5680938">_</span><span class="op" id="5680939">,</span>&nbsp;<span class="ident" id="5680941">network</span>&nbsp;<span class="op" id="5680949">:=</span>&nbsp;<span class="keyword" id="5680952">range</span>&nbsp;<span class="ident" id="5680958"><a href="/log/syslog/syslog_unix.go.html#5680823">logTypes</a></span>&nbsp;<span class="op" id="5680967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5680971">for</span>&nbsp;<span class="ident" id="5680975">_</span><span class="op" id="5680976">,</span>&nbsp;<span class="ident" id="5680978">path</span>&nbsp;<span class="op" id="5680983">:=</span>&nbsp;<span class="keyword" id="5680986">range</span>&nbsp;<span class="ident" id="5680992"><a href="/log/syslog/syslog_unix.go.html#5680865">logPaths</a></span>&nbsp;<span class="op" id="5681001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5681006">conn</span><span class="op" id="5681010">,</span>&nbsp;<span class="ident" id="5681012">err</span>&nbsp;<span class="op" id="5681016">:=</span>&nbsp;<span class="ident" id="5681019"><a href="/log/syslog/syslog_unix.go.html#5680649">net</a></span><span class="op" id="5681022">.</span><span class="ident" id="5681023">Dial</span><span class="op" id="5681027">(</span><span class="ident" id="5681028"><a href="/log/syslog/syslog_unix.go.html#5680941">network</a></span><span class="op" id="5681035">,</span>&nbsp;<span class="ident" id="5681037"><a href="/log/syslog/syslog_unix.go.html#5680978">path</a></span><span class="op" id="5681041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5681046">if</span>&nbsp;<span class="ident" id="5681049"><a href="/log/syslog/syslog_unix.go.html#5681012">err</a></span>&nbsp;<span class="op" id="5681053">!=</span>&nbsp;<span class="ident" id="5681056">nil</span>&nbsp;<span class="op" id="5681060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5681066">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5681078">}</span>&nbsp;<span class="keyword" id="5681080">else</span>&nbsp;<span class="op" id="5681085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5681091">return</span>&nbsp;<span class="op" id="5681098">&amp;</span><span class="ident" id="5681099"><a href="/log/syslog/syslog.go.html#5675009">netConn</a></span><span class="op" id="5681106">{</span><span class="ident" id="5681107">conn</span><span class="op" id="5681111">:</span>&nbsp;<span class="ident" id="5681113"><a href="/log/syslog/syslog_unix.go.html#5681006">conn</a></span><span class="op" id="5681117">,</span>&nbsp;<span class="ident" id="5681119">local</span><span class="op" id="5681124">:</span>&nbsp;<span class="builtintype" id="5681126">true</span><span class="op" id="5681130">}</span><span class="op" id="5681131">,</span>&nbsp;<span class="ident" id="5681133">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5681140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5681144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5681147">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5681150">return</span>&nbsp;<span class="ident" id="5681157">nil</span><span class="op" id="5681160">,</span>&nbsp;<span class="ident" id="5681162"><a href="/log/syslog/syslog_unix.go.html#5680639">errors</a></span><span class="op" id="5681168">.</span><span class="ident" id="5681169">New</span><span class="op" id="5681172">(</span><span class="string" id="5681173">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="5681201">)</span><br>
<span class="lineno"></span><span class="op" id="5681203">}</span>
</div>
</body>
</html>
