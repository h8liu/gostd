<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/ring</h2>
<ul>
<li><a href="/gostd/container/ring/ring.go.html" class="current">ring.go</a></li>
<li><a href="/gostd/container/ring/ring_test.go.html">ring_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6181239">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6181294">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6181348">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6181399">//&nbsp;Package&nbsp;ring&nbsp;implements&nbsp;operations&nbsp;on&nbsp;circular&nbsp;lists.</span><br>
<span class="lineno"></span><span class="keyword" id="6181456">package</span>&nbsp;<span class="ident" id="6181464">ring</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6181470">//&nbsp;A&nbsp;Ring&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;circular&nbsp;list,&nbsp;or&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6181523">//&nbsp;Rings&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;beginning&nbsp;or&nbsp;end;&nbsp;a&nbsp;pointer&nbsp;to&nbsp;any&nbsp;ring&nbsp;element</span><br>
<span class="lineno">10</span><span class="comment" id="6181594">//&nbsp;serves&nbsp;as&nbsp;reference&nbsp;to&nbsp;the&nbsp;entire&nbsp;ring.&nbsp;Empty&nbsp;rings&nbsp;are&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="6181665">//&nbsp;as&nbsp;nil&nbsp;Ring&nbsp;pointers.&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Ring&nbsp;is&nbsp;a&nbsp;one-element</span><br>
<span class="lineno"></span><span class="comment" id="6181733">//&nbsp;ring&nbsp;with&nbsp;a&nbsp;nil&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="6181759">//</span><br>
<span class="lineno"></span><span class="keyword" id="6181762">type</span>&nbsp;<span class="ident" id="6181767">Ring</span>&nbsp;<span class="keyword" id="6181772">struct</span>&nbsp;<span class="op" id="6181779">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6181782">next</span><span class="op" id="6181786">,</span>&nbsp;<span class="ident" id="6181788">prev</span>&nbsp;<span class="op" id="6181793">*</span><span class="ident" id="6181794"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6181800">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6181811">interface</span><span class="op" id="6181820">{</span><span class="op" id="6181821">}</span>&nbsp;<span class="comment" id="6181823">//&nbsp;for&nbsp;use&nbsp;by&nbsp;client;&nbsp;untouched&nbsp;by&nbsp;this&nbsp;library</span><br>
<span class="lineno"></span><span class="op" id="6181871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181874">func</span>&nbsp;<span class="op" id="6181879">(</span><span class="ident" id="6181880">r</span>&nbsp;<span class="op" id="6181882">*</span><span class="ident" id="6181883"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6181887">)</span>&nbsp;<span class="ident" id="6181889">init</span><span class="op" id="6181893">(</span><span class="op" id="6181894">)</span>&nbsp;<span class="op" id="6181896">*</span><span class="ident" id="6181897"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6181902">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6181905"><a href="/gostd/container/ring/ring.go.html#6181880">r</a></span><span class="op" id="6181906">.</span><span class="ident" id="6181907"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6181912">=</span>&nbsp;<span class="ident" id="6181914"><a href="/gostd/container/ring/ring.go.html#6181880">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6181917"><a href="/gostd/container/ring/ring.go.html#6181880">r</a></span><span class="op" id="6181918">.</span><span class="ident" id="6181919"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span>&nbsp;<span class="op" id="6181924">=</span>&nbsp;<span class="ident" id="6181926"><a href="/gostd/container/ring/ring.go.html#6181880">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6181929">return</span>&nbsp;<span class="ident" id="6181936"><a href="/gostd/container/ring/ring.go.html#6181880">r</a></span><br>
<span class="lineno"></span><span class="op" id="6181938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6181941">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6182001">func</span>&nbsp;<span class="op" id="6182006">(</span><span class="ident" id="6182007">r</span>&nbsp;<span class="op" id="6182009">*</span><span class="ident" id="6182010"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6182014">)</span>&nbsp;<span class="ident" id="6182016">Next</span><span class="op" id="6182020">(</span><span class="op" id="6182021">)</span>&nbsp;<span class="op" id="6182023">*</span><span class="ident" id="6182024"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6182029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182032">if</span>&nbsp;<span class="ident" id="6182035"><a href="/gostd/container/ring/ring.go.html#6182007">r</a></span><span class="op" id="6182036">.</span><span class="ident" id="6182037"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6182042">==</span>&nbsp;<span class="builtintype" id="6182045">nil</span>&nbsp;<span class="op" id="6182049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182053">return</span>&nbsp;<span class="ident" id="6182060"><a href="/gostd/container/ring/ring.go.html#6182007">r</a></span><span class="op" id="6182061">.</span><span class="ident" id="6182062"><a href="/gostd/container/ring/ring.go.html#6181889">init</a></span><span class="op" id="6182066">(</span><span class="op" id="6182067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182070">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182073">return</span>&nbsp;<span class="ident" id="6182080"><a href="/gostd/container/ring/ring.go.html#6182007">r</a></span><span class="op" id="6182081">.</span><span class="ident" id="6182082"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span><br>
<span class="lineno"></span><span class="op" id="6182087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6182090">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6182154">func</span>&nbsp;<span class="op" id="6182159">(</span><span class="ident" id="6182160">r</span>&nbsp;<span class="op" id="6182162">*</span><span class="ident" id="6182163"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6182167">)</span>&nbsp;<span class="ident" id="6182169">Prev</span><span class="op" id="6182173">(</span><span class="op" id="6182174">)</span>&nbsp;<span class="op" id="6182176">*</span><span class="ident" id="6182177"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6182182">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182185">if</span>&nbsp;<span class="ident" id="6182188"><a href="/gostd/container/ring/ring.go.html#6182160">r</a></span><span class="op" id="6182189">.</span><span class="ident" id="6182190"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6182195">==</span>&nbsp;<span class="builtintype" id="6182198">nil</span>&nbsp;<span class="op" id="6182202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182206">return</span>&nbsp;<span class="ident" id="6182213"><a href="/gostd/container/ring/ring.go.html#6182160">r</a></span><span class="op" id="6182214">.</span><span class="ident" id="6182215"><a href="/gostd/container/ring/ring.go.html#6181889">init</a></span><span class="op" id="6182219">(</span><span class="op" id="6182220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182226">return</span>&nbsp;<span class="ident" id="6182233"><a href="/gostd/container/ring/ring.go.html#6182160">r</a></span><span class="op" id="6182234">.</span><span class="ident" id="6182235"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span><br>
<span class="lineno"></span><span class="op" id="6182240">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6182243">//&nbsp;Move&nbsp;moves&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;backward&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;or&nbsp;forward&nbsp;(n&nbsp;&gt;=&nbsp;0)</span><br>
<span class="lineno"></span><span class="comment" id="6182315">//&nbsp;in&nbsp;the&nbsp;ring&nbsp;and&nbsp;returns&nbsp;that&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="comment" id="6182382">//</span><br>
<span class="lineno"></span><span class="keyword" id="6182385">func</span>&nbsp;<span class="op" id="6182390">(</span><span class="ident" id="6182391">r</span>&nbsp;<span class="op" id="6182393">*</span><span class="ident" id="6182394"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6182398">)</span>&nbsp;<span class="ident" id="6182400">Move</span><span class="op" id="6182404">(</span><span class="ident" id="6182405">n</span>&nbsp;<span class="builtintype" id="6182407">int</span><span class="op" id="6182410">)</span>&nbsp;<span class="op" id="6182412">*</span><span class="ident" id="6182413"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6182418">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182421">if</span>&nbsp;<span class="ident" id="6182424"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span><span class="op" id="6182425">.</span><span class="ident" id="6182426"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6182431">==</span>&nbsp;<span class="builtintype" id="6182434">nil</span>&nbsp;<span class="op" id="6182438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182442">return</span>&nbsp;<span class="ident" id="6182449"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span><span class="op" id="6182450">.</span><span class="ident" id="6182451"><a href="/gostd/container/ring/ring.go.html#6181889">init</a></span><span class="op" id="6182455">(</span><span class="op" id="6182456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182462">switch</span>&nbsp;<span class="op" id="6182469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182472">case</span>&nbsp;<span class="ident" id="6182477"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span>&nbsp;<span class="op" id="6182479">&lt;</span>&nbsp;<span class="num" id="6182481">0</span><span class="op" id="6182482">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182486">for</span>&nbsp;<span class="op" id="6182490">;</span>&nbsp;<span class="ident" id="6182492"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span>&nbsp;<span class="op" id="6182494">&lt;</span>&nbsp;<span class="num" id="6182496">0</span><span class="op" id="6182497">;</span>&nbsp;<span class="ident" id="6182499"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span><span class="op" id="6182500">++</span>&nbsp;<span class="op" id="6182503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182508"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span>&nbsp;<span class="op" id="6182510">=</span>&nbsp;<span class="ident" id="6182512"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span><span class="op" id="6182513">.</span><span class="ident" id="6182514"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182524">case</span>&nbsp;<span class="ident" id="6182529"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span>&nbsp;<span class="op" id="6182531">&gt;</span>&nbsp;<span class="num" id="6182533">0</span><span class="op" id="6182534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182538">for</span>&nbsp;<span class="op" id="6182542">;</span>&nbsp;<span class="ident" id="6182544"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span>&nbsp;<span class="op" id="6182546">&gt;</span>&nbsp;<span class="num" id="6182548">0</span><span class="op" id="6182549">;</span>&nbsp;<span class="ident" id="6182551"><a href="/gostd/container/ring/ring.go.html#6182405">n</a></span><span class="op" id="6182552">--</span>&nbsp;<span class="op" id="6182555">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182560"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span>&nbsp;<span class="op" id="6182562">=</span>&nbsp;<span class="ident" id="6182564"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span><span class="op" id="6182565">.</span><span class="ident" id="6182566"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182579">return</span>&nbsp;<span class="ident" id="6182586"><a href="/gostd/container/ring/ring.go.html#6182391">r</a></span><br>
<span class="lineno"></span><span class="op" id="6182588">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6182591">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;ring&nbsp;of&nbsp;n&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6182628">func</span>&nbsp;<span class="ident" id="6182633">New</span><span class="op" id="6182636">(</span><span class="ident" id="6182637">n</span>&nbsp;<span class="builtintype" id="6182639">int</span><span class="op" id="6182642">)</span>&nbsp;<span class="op" id="6182644">*</span><span class="ident" id="6182645"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6182650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182653">if</span>&nbsp;<span class="ident" id="6182656"><a href="/gostd/container/ring/ring.go.html#6182637">n</a></span>&nbsp;<span class="op" id="6182658">&lt;=</span>&nbsp;<span class="num" id="6182661">0</span>&nbsp;<span class="op" id="6182663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182667">return</span>&nbsp;<span class="builtintype" id="6182674">nil</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182682">r</span>&nbsp;<span class="op" id="6182684">:=</span>&nbsp;<span class="builtinfunc" id="6182687">new</span><span class="op" id="6182690">(</span><span class="ident" id="6182691"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6182695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182698">p</span>&nbsp;<span class="op" id="6182700">:=</span>&nbsp;<span class="ident" id="6182703"><a href="/gostd/container/ring/ring.go.html#6182682">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182706">for</span>&nbsp;<span class="ident" id="6182710">i</span>&nbsp;<span class="op" id="6182712">:=</span>&nbsp;<span class="num" id="6182715">1</span><span class="op" id="6182716">;</span>&nbsp;<span class="ident" id="6182718"><a href="/gostd/container/ring/ring.go.html#6182710">i</a></span>&nbsp;<span class="op" id="6182720">&lt;</span>&nbsp;<span class="ident" id="6182722"><a href="/gostd/container/ring/ring.go.html#6182637">n</a></span><span class="op" id="6182723">;</span>&nbsp;<span class="ident" id="6182725"><a href="/gostd/container/ring/ring.go.html#6182710">i</a></span><span class="op" id="6182726">++</span>&nbsp;<span class="op" id="6182729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182733"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span><span class="op" id="6182734">.</span><span class="ident" id="6182735"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6182740">=</span>&nbsp;<span class="op" id="6182742">&amp;</span><span class="ident" id="6182743"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6182747">{</span><span class="ident" id="6182748"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span><span class="op" id="6182752">:</span>&nbsp;<span class="ident" id="6182754"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span><span class="op" id="6182755">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182759"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span>&nbsp;<span class="op" id="6182761">=</span>&nbsp;<span class="ident" id="6182763"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span><span class="op" id="6182764">.</span><span class="ident" id="6182765"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6182771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182774"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span><span class="op" id="6182775">.</span><span class="ident" id="6182776"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6182781">=</span>&nbsp;<span class="ident" id="6182783"><a href="/gostd/container/ring/ring.go.html#6182682">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6182786"><a href="/gostd/container/ring/ring.go.html#6182682">r</a></span><span class="op" id="6182787">.</span><span class="ident" id="6182788"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span>&nbsp;<span class="op" id="6182793">=</span>&nbsp;<span class="ident" id="6182795"><a href="/gostd/container/ring/ring.go.html#6182698">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6182798">return</span>&nbsp;<span class="ident" id="6182805"><a href="/gostd/container/ring/ring.go.html#6182682">r</a></span><br>
<span class="lineno">75</span><span class="op" id="6182807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6182810">//&nbsp;Link&nbsp;connects&nbsp;ring&nbsp;r&nbsp;with&nbsp;ring&nbsp;s&nbsp;such&nbsp;that&nbsp;r.Next()</span><br>
<span class="lineno"></span><span class="comment" id="6182865">//&nbsp;becomes&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next().</span><br>
<span class="lineno"></span><span class="comment" id="6182923">//&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">80</span><span class="comment" id="6182947">//</span><br>
<span class="lineno"></span><span class="comment" id="6182950">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;the&nbsp;same&nbsp;ring,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6182996">//&nbsp;them&nbsp;removes&nbsp;the&nbsp;elements&nbsp;between&nbsp;r&nbsp;and&nbsp;s&nbsp;from&nbsp;the&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6183056">//&nbsp;The&nbsp;removed&nbsp;elements&nbsp;form&nbsp;a&nbsp;subring&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6183115">//&nbsp;reference&nbsp;to&nbsp;that&nbsp;subring&nbsp;(if&nbsp;no&nbsp;elements&nbsp;were&nbsp;removed,</span><br>
<span class="lineno">85</span><span class="comment" id="6183174">//&nbsp;the&nbsp;result&nbsp;is&nbsp;still&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next(),</span><br>
<span class="lineno"></span><span class="comment" id="6183230">//&nbsp;and&nbsp;not&nbsp;nil).</span><br>
<span class="lineno"></span><span class="comment" id="6183247">//</span><br>
<span class="lineno"></span><span class="comment" id="6183250">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;different&nbsp;rings,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6183298">//&nbsp;them&nbsp;creates&nbsp;a&nbsp;single&nbsp;ring&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;s&nbsp;inserted</span><br>
<span class="lineno">90</span><span class="comment" id="6183360">//&nbsp;after&nbsp;r.&nbsp;The&nbsp;result&nbsp;points&nbsp;to&nbsp;the&nbsp;element&nbsp;following&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6183419">//&nbsp;last&nbsp;element&nbsp;of&nbsp;s&nbsp;after&nbsp;insertion.</span><br>
<span class="lineno"></span><span class="comment" id="6183457">//</span><br>
<span class="lineno"></span><span class="keyword" id="6183460">func</span>&nbsp;<span class="op" id="6183465">(</span><span class="ident" id="6183466">r</span>&nbsp;<span class="op" id="6183468">*</span><span class="ident" id="6183469"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6183473">)</span>&nbsp;<span class="ident" id="6183475">Link</span><span class="op" id="6183479">(</span><span class="ident" id="6183480">s</span>&nbsp;<span class="op" id="6183482">*</span><span class="ident" id="6183483"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6183487">)</span>&nbsp;<span class="op" id="6183489">*</span><span class="ident" id="6183490"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6183495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183498">n</span>&nbsp;<span class="op" id="6183500">:=</span>&nbsp;<span class="ident" id="6183503"><a href="/gostd/container/ring/ring.go.html#6183466">r</a></span><span class="op" id="6183504">.</span><span class="ident" id="6183505"><a href="/gostd/container/ring/ring.go.html#6182016">Next</a></span><span class="op" id="6183509">(</span><span class="op" id="6183510">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6183513">if</span>&nbsp;<span class="ident" id="6183516"><a href="/gostd/container/ring/ring.go.html#6183480">s</a></span>&nbsp;<span class="op" id="6183518">!=</span>&nbsp;<span class="builtintype" id="6183521">nil</span>&nbsp;<span class="op" id="6183525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183529">p</span>&nbsp;<span class="op" id="6183531">:=</span>&nbsp;<span class="ident" id="6183534"><a href="/gostd/container/ring/ring.go.html#6183480">s</a></span><span class="op" id="6183535">.</span><span class="ident" id="6183536"><a href="/gostd/container/ring/ring.go.html#6182169">Prev</a></span><span class="op" id="6183540">(</span><span class="op" id="6183541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6183545">//&nbsp;Note:&nbsp;Cannot&nbsp;use&nbsp;multiple&nbsp;assignment&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6183595">//&nbsp;evaluation&nbsp;order&nbsp;of&nbsp;LHS&nbsp;is&nbsp;not&nbsp;specified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183642"><a href="/gostd/container/ring/ring.go.html#6183466">r</a></span><span class="op" id="6183643">.</span><span class="ident" id="6183644"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6183649">=</span>&nbsp;<span class="ident" id="6183651"><a href="/gostd/container/ring/ring.go.html#6183480">s</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183655"><a href="/gostd/container/ring/ring.go.html#6183480">s</a></span><span class="op" id="6183656">.</span><span class="ident" id="6183657"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span>&nbsp;<span class="op" id="6183662">=</span>&nbsp;<span class="ident" id="6183664"><a href="/gostd/container/ring/ring.go.html#6183466">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183668"><a href="/gostd/container/ring/ring.go.html#6183498">n</a></span><span class="op" id="6183669">.</span><span class="ident" id="6183670"><a href="/gostd/container/ring/ring.go.html#6181788">prev</a></span>&nbsp;<span class="op" id="6183675">=</span>&nbsp;<span class="ident" id="6183677"><a href="/gostd/container/ring/ring.go.html#6183529">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6183681"><a href="/gostd/container/ring/ring.go.html#6183529">p</a></span><span class="op" id="6183682">.</span><span class="ident" id="6183683"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6183688">=</span>&nbsp;<span class="ident" id="6183690"><a href="/gostd/container/ring/ring.go.html#6183498">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6183693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6183696">return</span>&nbsp;<span class="ident" id="6183703"><a href="/gostd/container/ring/ring.go.html#6183498">n</a></span><br>
<span class="lineno">105</span><span class="op" id="6183705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183708">//&nbsp;Unlink&nbsp;removes&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;from&nbsp;the&nbsp;ring&nbsp;r,&nbsp;starting</span><br>
<span class="lineno"></span><span class="comment" id="6183773">//&nbsp;at&nbsp;r.Next().&nbsp;If&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;==&nbsp;0,&nbsp;r&nbsp;remains&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="6183831">//&nbsp;The&nbsp;result&nbsp;is&nbsp;the&nbsp;removed&nbsp;subring.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">110</span><span class="comment" id="6183890">//</span><br>
<span class="lineno"></span><span class="keyword" id="6183893">func</span>&nbsp;<span class="op" id="6183898">(</span><span class="ident" id="6183899">r</span>&nbsp;<span class="op" id="6183901">*</span><span class="ident" id="6183902"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6183906">)</span>&nbsp;<span class="ident" id="6183908">Unlink</span><span class="op" id="6183914">(</span><span class="ident" id="6183915">n</span>&nbsp;<span class="builtintype" id="6183917">int</span><span class="op" id="6183920">)</span>&nbsp;<span class="op" id="6183922">*</span><span class="ident" id="6183923"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span>&nbsp;<span class="op" id="6183928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6183931">if</span>&nbsp;<span class="ident" id="6183934"><a href="/gostd/container/ring/ring.go.html#6183915">n</a></span>&nbsp;<span class="op" id="6183936">&lt;=</span>&nbsp;<span class="num" id="6183939">0</span>&nbsp;<span class="op" id="6183941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6183945">return</span>&nbsp;<span class="builtintype" id="6183952">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6183957">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6183960">return</span>&nbsp;<span class="ident" id="6183967"><a href="/gostd/container/ring/ring.go.html#6183899">r</a></span><span class="op" id="6183968">.</span><span class="ident" id="6183969"><a href="/gostd/container/ring/ring.go.html#6183475">Link</a></span><span class="op" id="6183973">(</span><span class="ident" id="6183974"><a href="/gostd/container/ring/ring.go.html#6183899">r</a></span><span class="op" id="6183975">.</span><span class="ident" id="6183976"><a href="/gostd/container/ring/ring.go.html#6182400">Move</a></span><span class="op" id="6183980">(</span><span class="ident" id="6183981"><a href="/gostd/container/ring/ring.go.html#6183915">n</a></span>&nbsp;<span class="op" id="6183983">+</span>&nbsp;<span class="num" id="6183985">1</span><span class="op" id="6183986">)</span><span class="op" id="6183987">)</span><br>
<span class="lineno"></span><span class="op" id="6183989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183992">//&nbsp;Len&nbsp;computes&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;ring&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6184042">//&nbsp;It&nbsp;executes&nbsp;in&nbsp;time&nbsp;proportional&nbsp;to&nbsp;the&nbsp;number&nbsp;of&nbsp;elements.</span><br>
<span class="lineno">120</span><span class="comment" id="6184105">//</span><br>
<span class="lineno"></span><span class="keyword" id="6184108">func</span>&nbsp;<span class="op" id="6184113">(</span><span class="ident" id="6184114">r</span>&nbsp;<span class="op" id="6184116">*</span><span class="ident" id="6184117"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6184121">)</span>&nbsp;<span class="ident" id="6184123">Len</span><span class="op" id="6184126">(</span><span class="op" id="6184127">)</span>&nbsp;<span class="builtintype" id="6184129">int</span>&nbsp;<span class="op" id="6184133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184136">n</span>&nbsp;<span class="op" id="6184138">:=</span>&nbsp;<span class="num" id="6184141">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6184144">if</span>&nbsp;<span class="ident" id="6184147"><a href="/gostd/container/ring/ring.go.html#6184114">r</a></span>&nbsp;<span class="op" id="6184149">!=</span>&nbsp;<span class="builtintype" id="6184152">nil</span>&nbsp;<span class="op" id="6184156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184160"><a href="/gostd/container/ring/ring.go.html#6184136">n</a></span>&nbsp;<span class="op" id="6184162">=</span>&nbsp;<span class="num" id="6184164">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6184168">for</span>&nbsp;<span class="ident" id="6184172">p</span>&nbsp;<span class="op" id="6184174">:=</span>&nbsp;<span class="ident" id="6184177"><a href="/gostd/container/ring/ring.go.html#6184114">r</a></span><span class="op" id="6184178">.</span><span class="ident" id="6184179"><a href="/gostd/container/ring/ring.go.html#6182016">Next</a></span><span class="op" id="6184183">(</span><span class="op" id="6184184">)</span><span class="op" id="6184185">;</span>&nbsp;<span class="ident" id="6184187"><a href="/gostd/container/ring/ring.go.html#6184172">p</a></span>&nbsp;<span class="op" id="6184189">!=</span>&nbsp;<span class="ident" id="6184192"><a href="/gostd/container/ring/ring.go.html#6184114">r</a></span><span class="op" id="6184193">;</span>&nbsp;<span class="ident" id="6184195"><a href="/gostd/container/ring/ring.go.html#6184172">p</a></span>&nbsp;<span class="op" id="6184197">=</span>&nbsp;<span class="ident" id="6184199"><a href="/gostd/container/ring/ring.go.html#6184172">p</a></span><span class="op" id="6184200">.</span><span class="ident" id="6184201"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6184206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184211"><a href="/gostd/container/ring/ring.go.html#6184136">n</a></span><span class="op" id="6184212">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6184217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6184220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6184223">return</span>&nbsp;<span class="ident" id="6184230"><a href="/gostd/container/ring/ring.go.html#6184136">n</a></span><br>
<span class="lineno">130</span><span class="op" id="6184232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6184235">//&nbsp;Do&nbsp;calls&nbsp;function&nbsp;f&nbsp;on&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;ring,&nbsp;in&nbsp;forward&nbsp;order.</span><br>
<span class="lineno"></span><span class="comment" id="6184305">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Do&nbsp;is&nbsp;undefined&nbsp;if&nbsp;f&nbsp;changes&nbsp;*r.</span><br>
<span class="lineno"></span><span class="keyword" id="6184357">func</span>&nbsp;<span class="op" id="6184362">(</span><span class="ident" id="6184363">r</span>&nbsp;<span class="op" id="6184365">*</span><span class="ident" id="6184366"><a href="/gostd/container/ring/ring.go.html#6181767">Ring</a></span><span class="op" id="6184370">)</span>&nbsp;<span class="ident" id="6184372">Do</span><span class="op" id="6184374">(</span><span class="ident" id="6184375">f</span>&nbsp;<span class="keyword" id="6184377">func</span><span class="op" id="6184381">(</span><span class="keyword" id="6184382">interface</span><span class="op" id="6184391">{</span><span class="op" id="6184392">}</span><span class="op" id="6184393">)</span><span class="op" id="6184394">)</span>&nbsp;<span class="op" id="6184396">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6184399">if</span>&nbsp;<span class="ident" id="6184402"><a href="/gostd/container/ring/ring.go.html#6184363">r</a></span>&nbsp;<span class="op" id="6184404">!=</span>&nbsp;<span class="builtintype" id="6184407">nil</span>&nbsp;<span class="op" id="6184411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184415"><a href="/gostd/container/ring/ring.go.html#6184375">f</a></span><span class="op" id="6184416">(</span><span class="ident" id="6184417"><a href="/gostd/container/ring/ring.go.html#6184363">r</a></span><span class="op" id="6184418">.</span><span class="ident" id="6184419"><a href="/gostd/container/ring/ring.go.html#6181800">Value</a></span><span class="op" id="6184424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6184428">for</span>&nbsp;<span class="ident" id="6184432">p</span>&nbsp;<span class="op" id="6184434">:=</span>&nbsp;<span class="ident" id="6184437"><a href="/gostd/container/ring/ring.go.html#6184363">r</a></span><span class="op" id="6184438">.</span><span class="ident" id="6184439"><a href="/gostd/container/ring/ring.go.html#6182016">Next</a></span><span class="op" id="6184443">(</span><span class="op" id="6184444">)</span><span class="op" id="6184445">;</span>&nbsp;<span class="ident" id="6184447"><a href="/gostd/container/ring/ring.go.html#6184432">p</a></span>&nbsp;<span class="op" id="6184449">!=</span>&nbsp;<span class="ident" id="6184452"><a href="/gostd/container/ring/ring.go.html#6184363">r</a></span><span class="op" id="6184453">;</span>&nbsp;<span class="ident" id="6184455"><a href="/gostd/container/ring/ring.go.html#6184432">p</a></span>&nbsp;<span class="op" id="6184457">=</span>&nbsp;<span class="ident" id="6184459"><a href="/gostd/container/ring/ring.go.html#6184432">p</a></span><span class="op" id="6184460">.</span><span class="ident" id="6184461"><a href="/gostd/container/ring/ring.go.html#6181782">next</a></span>&nbsp;<span class="op" id="6184466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184471"><a href="/gostd/container/ring/ring.go.html#6184375">f</a></span><span class="op" id="6184472">(</span><span class="ident" id="6184473"><a href="/gostd/container/ring/ring.go.html#6184432">p</a></span><span class="op" id="6184474">.</span><span class="ident" id="6184475"><a href="/gostd/container/ring/ring.go.html#6181800">Value</a></span><span class="op" id="6184480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6184484">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6184487">}</span><br>
<span class="lineno"></span><span class="op" id="6184489">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
