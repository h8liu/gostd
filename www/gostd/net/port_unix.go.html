<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3234427">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3234482">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3234536">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3234587">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234652">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3234701">package</span>&nbsp;<span class="ident" id="3234709">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3234714">import</span>&nbsp;<span class="string" id="3234721">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3234729">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3234799">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3234872">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3234899">var</span>&nbsp;<span class="ident" id="3234903">services</span>&nbsp;<span class="op" id="3234912">=</span>&nbsp;<span class="keyword" id="3234914">map</span><span class="op" id="3234917">[</span><span class="builtintype" id="3234918">string</span><span class="op" id="3234924">]</span><span class="keyword" id="3234925">map</span><span class="op" id="3234928">[</span><span class="builtintype" id="3234929">string</span><span class="op" id="3234935">]</span><span class="builtintype" id="3234936">int</span><span class="op" id="3234939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234942">&#34;tcp&#34;</span><span class="op" id="3234947">:</span>&nbsp;<span class="op" id="3234949">{</span><span class="string" id="3234950">&#34;http&#34;</span><span class="op" id="3234956">:</span>&nbsp;<span class="num" id="3234958">80</span><span class="op" id="3234960">}</span><span class="op" id="3234961">,</span><br>
<span class="lineno"></span><span class="op" id="3234963">}</span><br>
<span class="lineno"></span><span class="keyword" id="3234965">var</span>&nbsp;<span class="ident" id="3234969">servicesError</span>&nbsp;<span class="builtintype" id="3234983">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3234989">var</span>&nbsp;<span class="ident" id="3234993">onceReadServices</span>&nbsp;<span class="ident" id="3235010">sync</span><span class="op" id="3235014">.</span><span class="ident" id="3235015">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3235021">func</span>&nbsp;<span class="ident" id="3235026">readServices</span><span class="op" id="3235038">(</span><span class="op" id="3235039">)</span>&nbsp;<span class="op" id="3235041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235044">var</span>&nbsp;<span class="ident" id="3235048">file</span>&nbsp;<span class="op" id="3235053">*</span><span class="ident" id="3235054">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235060">if</span>&nbsp;<span class="ident" id="3235063">file</span><span class="op" id="3235067">,</span>&nbsp;<span class="ident" id="3235069">servicesError</span>&nbsp;<span class="op" id="3235083">=</span>&nbsp;<span class="ident" id="3235085">open</span><span class="op" id="3235089">(</span><span class="string" id="3235090">&#34;/etc/services&#34;</span><span class="op" id="3235105">)</span><span class="op" id="3235106">;</span>&nbsp;<span class="ident" id="3235108">servicesError</span>&nbsp;<span class="op" id="3235122">!=</span>&nbsp;<span class="ident" id="3235125">nil</span>&nbsp;<span class="op" id="3235129">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235144">for</span>&nbsp;<span class="ident" id="3235148">line</span><span class="op" id="3235152">,</span>&nbsp;<span class="ident" id="3235154">ok</span>&nbsp;<span class="op" id="3235157">:=</span>&nbsp;<span class="ident" id="3235160">file</span><span class="op" id="3235164">.</span><span class="ident" id="3235165">readLine</span><span class="op" id="3235173">(</span><span class="op" id="3235174">)</span><span class="op" id="3235175">;</span>&nbsp;<span class="ident" id="3235177">ok</span><span class="op" id="3235179">;</span>&nbsp;<span class="ident" id="3235181">line</span><span class="op" id="3235185">,</span>&nbsp;<span class="ident" id="3235187">ok</span>&nbsp;<span class="op" id="3235190">=</span>&nbsp;<span class="ident" id="3235192">file</span><span class="op" id="3235196">.</span><span class="ident" id="3235197">readLine</span><span class="op" id="3235205">(</span><span class="op" id="3235206">)</span>&nbsp;<span class="op" id="3235208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3235212">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235266">if</span>&nbsp;<span class="ident" id="3235269">i</span>&nbsp;<span class="op" id="3235271">:=</span>&nbsp;<span class="ident" id="3235274">byteIndex</span><span class="op" id="3235283">(</span><span class="ident" id="3235284">line</span><span class="op" id="3235288">,</span>&nbsp;<span class="string" id="3235290">&#39;#&#39;</span><span class="op" id="3235293">)</span><span class="op" id="3235294">;</span>&nbsp;<span class="ident" id="3235296">i</span>&nbsp;<span class="op" id="3235298">&gt;=</span>&nbsp;<span class="num" id="3235301">0</span>&nbsp;<span class="op" id="3235303">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235308">line</span>&nbsp;<span class="op" id="3235313">=</span>&nbsp;<span class="ident" id="3235315">line</span><span class="op" id="3235319">[</span><span class="num" id="3235320">0</span><span class="op" id="3235321">:</span><span class="ident" id="3235322">i</span><span class="op" id="3235323">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235331">f</span>&nbsp;<span class="op" id="3235333">:=</span>&nbsp;<span class="ident" id="3235336">getFields</span><span class="op" id="3235345">(</span><span class="ident" id="3235346">line</span><span class="op" id="3235350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235354">if</span>&nbsp;<span class="builtinfunc" id="3235357">len</span><span class="op" id="3235360">(</span><span class="ident" id="3235361">f</span><span class="op" id="3235362">)</span>&nbsp;<span class="op" id="3235364">&lt;</span>&nbsp;<span class="num" id="3235366">2</span>&nbsp;<span class="op" id="3235368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235373">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235388">portnet</span>&nbsp;<span class="op" id="3235396">:=</span>&nbsp;<span class="ident" id="3235399">f</span><span class="op" id="3235400">[</span><span class="num" id="3235401">1</span><span class="op" id="3235402">]</span>&nbsp;<span class="comment" id="3235404">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235418">port</span><span class="op" id="3235422">,</span>&nbsp;<span class="ident" id="3235424">j</span><span class="op" id="3235425">,</span>&nbsp;<span class="ident" id="3235427">ok</span>&nbsp;<span class="op" id="3235430">:=</span>&nbsp;<span class="ident" id="3235433">dtoi</span><span class="op" id="3235437">(</span><span class="ident" id="3235438">portnet</span><span class="op" id="3235445">,</span>&nbsp;<span class="num" id="3235447">0</span><span class="op" id="3235448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235452">if</span>&nbsp;<span class="op" id="3235455">!</span><span class="ident" id="3235456">ok</span>&nbsp;<span class="op" id="3235459">||</span>&nbsp;<span class="ident" id="3235462">port</span>&nbsp;<span class="op" id="3235467">&lt;=</span>&nbsp;<span class="num" id="3235470">0</span>&nbsp;<span class="op" id="3235472">||</span>&nbsp;<span class="ident" id="3235475">j</span>&nbsp;<span class="op" id="3235477">&gt;=</span>&nbsp;<span class="builtinfunc" id="3235480">len</span><span class="op" id="3235483">(</span><span class="ident" id="3235484">portnet</span><span class="op" id="3235491">)</span>&nbsp;<span class="op" id="3235493">||</span>&nbsp;<span class="ident" id="3235496">portnet</span><span class="op" id="3235503">[</span><span class="ident" id="3235504">j</span><span class="op" id="3235505">]</span>&nbsp;<span class="op" id="3235507">!=</span>&nbsp;<span class="string" id="3235510">&#39;/&#39;</span>&nbsp;<span class="op" id="3235514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235519">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235534">netw</span>&nbsp;<span class="op" id="3235539">:=</span>&nbsp;<span class="ident" id="3235542">portnet</span><span class="op" id="3235549">[</span><span class="ident" id="3235550">j</span><span class="op" id="3235551">+</span><span class="num" id="3235552">1</span><span class="op" id="3235553">:</span><span class="op" id="3235554">]</span>&nbsp;<span class="comment" id="3235556">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235567">m</span><span class="op" id="3235568">,</span>&nbsp;<span class="ident" id="3235570">ok1</span>&nbsp;<span class="op" id="3235574">:=</span>&nbsp;<span class="ident" id="3235577">services</span><span class="op" id="3235585">[</span><span class="ident" id="3235586">netw</span><span class="op" id="3235590">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235594">if</span>&nbsp;<span class="op" id="3235597">!</span><span class="ident" id="3235598">ok1</span>&nbsp;<span class="op" id="3235602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235607">m</span>&nbsp;<span class="op" id="3235609">=</span>&nbsp;<span class="builtinfunc" id="3235611">make</span><span class="op" id="3235615">(</span><span class="keyword" id="3235616">map</span><span class="op" id="3235619">[</span><span class="builtintype" id="3235620">string</span><span class="op" id="3235626">]</span><span class="builtintype" id="3235627">int</span><span class="op" id="3235630">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235635">services</span><span class="op" id="3235643">[</span><span class="ident" id="3235644">netw</span><span class="op" id="3235648">]</span>&nbsp;<span class="op" id="3235650">=</span>&nbsp;<span class="ident" id="3235652">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235660">for</span>&nbsp;<span class="ident" id="3235664">i</span>&nbsp;<span class="op" id="3235666">:=</span>&nbsp;<span class="num" id="3235669">0</span><span class="op" id="3235670">;</span>&nbsp;<span class="ident" id="3235672">i</span>&nbsp;<span class="op" id="3235674">&lt;</span>&nbsp;<span class="builtinfunc" id="3235676">len</span><span class="op" id="3235679">(</span><span class="ident" id="3235680">f</span><span class="op" id="3235681">)</span><span class="op" id="3235682">;</span>&nbsp;<span class="ident" id="3235684">i</span><span class="op" id="3235685">++</span>&nbsp;<span class="op" id="3235688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235693">if</span>&nbsp;<span class="ident" id="3235696">i</span>&nbsp;<span class="op" id="3235698">!=</span>&nbsp;<span class="num" id="3235701">1</span>&nbsp;<span class="op" id="3235703">{</span>&nbsp;<span class="comment" id="3235705">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235730">m</span><span class="op" id="3235731">[</span><span class="ident" id="3235732">f</span><span class="op" id="3235733">[</span><span class="ident" id="3235734">i</span><span class="op" id="3235735">]</span><span class="op" id="3235736">]</span>&nbsp;<span class="op" id="3235738">=</span>&nbsp;<span class="ident" id="3235740">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3235755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235758">file</span><span class="op" id="3235762">.</span><span class="builtinfunc" id="3235763">close</span><span class="op" id="3235768">(</span><span class="op" id="3235769">)</span><br>
<span class="lineno"></span><span class="op" id="3235771">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3235774">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3235837">func</span>&nbsp;<span class="ident" id="3235842">goLookupPort</span><span class="op" id="3235854">(</span><span class="ident" id="3235855">network</span><span class="op" id="3235862">,</span>&nbsp;<span class="ident" id="3235864">service</span>&nbsp;<span class="builtintype" id="3235872">string</span><span class="op" id="3235878">)</span>&nbsp;<span class="op" id="3235880">(</span><span class="ident" id="3235881">port</span>&nbsp;<span class="builtintype" id="3235886">int</span><span class="op" id="3235889">,</span>&nbsp;<span class="ident" id="3235891">err</span>&nbsp;<span class="builtintype" id="3235895">error</span><span class="op" id="3235900">)</span>&nbsp;<span class="op" id="3235902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235905">onceReadServices</span><span class="op" id="3235921">.</span><span class="ident" id="3235922">Do</span><span class="op" id="3235924">(</span><span class="ident" id="3235925">readServices</span><span class="op" id="3235937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235941">switch</span>&nbsp;<span class="ident" id="3235948">network</span>&nbsp;<span class="op" id="3235956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235959">case</span>&nbsp;<span class="string" id="3235964">&#34;tcp4&#34;</span><span class="op" id="3235970">,</span>&nbsp;<span class="string" id="3235972">&#34;tcp6&#34;</span><span class="op" id="3235978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3235982">network</span>&nbsp;<span class="op" id="3235990">=</span>&nbsp;<span class="string" id="3235992">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3235999">case</span>&nbsp;<span class="string" id="3236004">&#34;udp4&#34;</span><span class="op" id="3236010">,</span>&nbsp;<span class="string" id="3236012">&#34;udp6&#34;</span><span class="op" id="3236018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3236022">network</span>&nbsp;<span class="op" id="3236030">=</span>&nbsp;<span class="string" id="3236032">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236043">if</span>&nbsp;<span class="ident" id="3236046">m</span><span class="op" id="3236047">,</span>&nbsp;<span class="ident" id="3236049">ok</span>&nbsp;<span class="op" id="3236052">:=</span>&nbsp;<span class="ident" id="3236055">services</span><span class="op" id="3236063">[</span><span class="ident" id="3236064">network</span><span class="op" id="3236071">]</span><span class="op" id="3236072">;</span>&nbsp;<span class="ident" id="3236074">ok</span>&nbsp;<span class="op" id="3236077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236081">if</span>&nbsp;<span class="ident" id="3236084">port</span><span class="op" id="3236088">,</span>&nbsp;<span class="ident" id="3236090">ok</span>&nbsp;<span class="op" id="3236093">=</span>&nbsp;<span class="ident" id="3236095">m</span><span class="op" id="3236096">[</span><span class="ident" id="3236097">service</span><span class="op" id="3236104">]</span><span class="op" id="3236105">;</span>&nbsp;<span class="ident" id="3236107">ok</span>&nbsp;<span class="op" id="3236110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236115">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3236127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3236130">return</span>&nbsp;<span class="num" id="3236137">0</span><span class="op" id="3236138">,</span>&nbsp;<span class="op" id="3236140">&amp;</span><span class="ident" id="3236141">AddrError</span><span class="op" id="3236150">{</span><span class="string" id="3236151">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3236165">,</span>&nbsp;<span class="ident" id="3236167">network</span>&nbsp;<span class="op" id="3236175">+</span>&nbsp;<span class="string" id="3236177">&#34;/&#34;</span>&nbsp;<span class="op" id="3236181">+</span>&nbsp;<span class="ident" id="3236183">service</span><span class="op" id="3236190">}</span><br>
<span class="lineno"></span><span class="op" id="3236192">}</span>
</div>
</body>
</html>
