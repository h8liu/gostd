<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5513633">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5513688">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5513742">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5513793">package</span>&nbsp;<span class="ident" id="5513801">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5513808">import</span>&nbsp;<span class="op" id="5513815">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5513818">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5513825">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5513836">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5513847">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5513862">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5513865">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="5513934">type</span>&nbsp;<span class="ident" id="5513939">item</span>&nbsp;<span class="keyword" id="5513944">struct</span>&nbsp;<span class="op" id="5513951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513954">typ</span>&nbsp;<span class="ident" id="5513958">itemType</span>&nbsp;<span class="comment" id="5513967">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513994">pos</span>&nbsp;<span class="ident" id="5513998">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514007">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514078">val</span>&nbsp;<span class="builtintype" id="5514082">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5514091">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="5514118">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5514121">func</span>&nbsp;<span class="op" id="5514126">(</span><span class="ident" id="5514127">i</span>&nbsp;<span class="ident" id="5514129">item</span><span class="op" id="5514133">)</span>&nbsp;<span class="ident" id="5514135">String</span><span class="op" id="5514141">(</span><span class="op" id="5514142">)</span>&nbsp;<span class="builtintype" id="5514144">string</span>&nbsp;<span class="op" id="5514151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514154">switch</span>&nbsp;<span class="op" id="5514161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514164">case</span>&nbsp;<span class="ident" id="5514169">i</span><span class="op" id="5514170">.</span><span class="ident" id="5514171">typ</span>&nbsp;<span class="op" id="5514175">==</span>&nbsp;<span class="ident" id="5514178">itemEOF</span><span class="op" id="5514185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514189">return</span>&nbsp;<span class="string" id="5514196">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514203">case</span>&nbsp;<span class="ident" id="5514208">i</span><span class="op" id="5514209">.</span><span class="ident" id="5514210">typ</span>&nbsp;<span class="op" id="5514214">==</span>&nbsp;<span class="ident" id="5514217">itemError</span><span class="op" id="5514226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514230">return</span>&nbsp;<span class="ident" id="5514237">i</span><span class="op" id="5514238">.</span><span class="ident" id="5514239">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514244">case</span>&nbsp;<span class="ident" id="5514249">i</span><span class="op" id="5514250">.</span><span class="ident" id="5514251">typ</span>&nbsp;<span class="op" id="5514255">&gt;</span>&nbsp;<span class="ident" id="5514257">itemKeyword</span><span class="op" id="5514268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514272">return</span>&nbsp;<span class="ident" id="5514279">fmt</span><span class="op" id="5514282">.</span><span class="ident" id="5514283">Sprintf</span><span class="op" id="5514290">(</span><span class="string" id="5514291">&#34;&lt;%s&gt;&#34;</span><span class="op" id="5514297">,</span>&nbsp;<span class="ident" id="5514299">i</span><span class="op" id="5514300">.</span><span class="ident" id="5514301">val</span><span class="op" id="5514304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514307">case</span>&nbsp;<span class="builtinfunc" id="5514312">len</span><span class="op" id="5514315">(</span><span class="ident" id="5514316">i</span><span class="op" id="5514317">.</span><span class="ident" id="5514318">val</span><span class="op" id="5514321">)</span>&nbsp;<span class="op" id="5514323">&gt;</span>&nbsp;<span class="num" id="5514325">10</span><span class="op" id="5514327">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514331">return</span>&nbsp;<span class="ident" id="5514338">fmt</span><span class="op" id="5514341">.</span><span class="ident" id="5514342">Sprintf</span><span class="op" id="5514349">(</span><span class="string" id="5514350">&#34;%.10q...&#34;</span><span class="op" id="5514360">,</span>&nbsp;<span class="ident" id="5514362">i</span><span class="op" id="5514363">.</span><span class="ident" id="5514364">val</span><span class="op" id="5514367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5514370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5514373">return</span>&nbsp;<span class="ident" id="5514380">fmt</span><span class="op" id="5514383">.</span><span class="ident" id="5514384">Sprintf</span><span class="op" id="5514391">(</span><span class="string" id="5514392">&#34;%q&#34;</span><span class="op" id="5514396">,</span>&nbsp;<span class="ident" id="5514398">i</span><span class="op" id="5514399">.</span><span class="ident" id="5514400">val</span><span class="op" id="5514403">)</span><br>
<span class="lineno"></span><span class="op" id="5514405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5514408">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="5514454">type</span>&nbsp;<span class="ident" id="5514459">itemType</span>&nbsp;<span class="builtintype" id="5514468">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5514473">const</span>&nbsp;<span class="op" id="5514479">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514482">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5514499">itemType</span>&nbsp;<span class="op" id="5514508">=</span>&nbsp;<span class="ident" id="5514510">iota</span>&nbsp;<span class="comment" id="5514515">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514558">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514591">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514612">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514645">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514700">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514733">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514756">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514789">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514845">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514878">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514928">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514937">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5514952">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5514998">itemIdentifier</span>&nbsp;<span class="comment" id="5515013">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515063">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="5515078">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515104">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="5515119">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515141">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515156">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515195">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515210">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515226">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="5515241">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515281">itemRightDelim</span>&nbsp;<span class="comment" id="5515296">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515323">itemRightParen</span>&nbsp;<span class="comment" id="5515338">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515360">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515375">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515414">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515429">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515465">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515480">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515495">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5515510">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5515575">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515615">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="5515628">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515666">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515679">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515707">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5515720">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515739">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515752">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515769">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515782">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515798">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515811">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515826">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515839">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515899">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515912">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515930">itemTemplate</span>&nbsp;<span class="comment" id="5515943">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515964">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5515977">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="5515993">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5515996">var</span>&nbsp;<span class="ident" id="5516000">key</span>&nbsp;<span class="op" id="5516004">=</span>&nbsp;<span class="keyword" id="5516006">map</span><span class="op" id="5516009">[</span><span class="builtintype" id="5516010">string</span><span class="op" id="5516016">]</span><span class="ident" id="5516017">itemType</span><span class="op" id="5516025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516028">&#34;.&#34;</span><span class="op" id="5516031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516040">itemDot</span><span class="op" id="5516047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516050">&#34;define&#34;</span><span class="op" id="5516058">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5516062">itemDefine</span><span class="op" id="5516072">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516075">&#34;else&#34;</span><span class="op" id="5516081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516087">itemElse</span><span class="op" id="5516095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516098">&#34;end&#34;</span><span class="op" id="5516103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516110">itemEnd</span><span class="op" id="5516117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516120">&#34;if&#34;</span><span class="op" id="5516124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516132">itemIf</span><span class="op" id="5516138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516141">&#34;range&#34;</span><span class="op" id="5516148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516153">itemRange</span><span class="op" id="5516162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516165">&#34;nil&#34;</span><span class="op" id="5516170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516177">itemNil</span><span class="op" id="5516184">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516187">&#34;template&#34;</span><span class="op" id="5516197">:</span>&nbsp;<span class="ident" id="5516199">itemTemplate</span><span class="op" id="5516211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5516214">&#34;with&#34;</span><span class="op" id="5516220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516226">itemWith</span><span class="op" id="5516234">,</span><br>
<span class="lineno"></span><span class="op" id="5516236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5516239">const</span>&nbsp;<span class="ident" id="5516245">eof</span>&nbsp;<span class="op" id="5516249">=</span>&nbsp;<span class="op" id="5516251">-</span><span class="num" id="5516252">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="5516255">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="5516345">type</span>&nbsp;<span class="ident" id="5516350">stateFn</span>&nbsp;<span class="keyword" id="5516358">func</span><span class="op" id="5516362">(</span><span class="op" id="5516363">*</span><span class="ident" id="5516364">lexer</span><span class="op" id="5516369">)</span>&nbsp;<span class="ident" id="5516371">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5516380">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="5516421">type</span>&nbsp;<span class="ident" id="5516426">lexer</span>&nbsp;<span class="keyword" id="5516432">struct</span>&nbsp;<span class="op" id="5516439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516442">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516453">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516463">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516518">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5516529">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516539">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516568">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="5516579">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516589">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516609">rightDelim</span>&nbsp;<span class="builtintype" id="5516620">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516630">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516648">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516659">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5516669">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516707">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516718">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516728">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516762">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516773">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516783">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516815">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516826">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516836">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516875">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5516886">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5516896">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516950">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5516961">chan</span>&nbsp;<span class="ident" id="5516966">item</span>&nbsp;<span class="comment" id="5516971">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517000">parenDepth</span>&nbsp;<span class="builtintype" id="5517011">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5517021">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="5517051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517054">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="5517098">func</span>&nbsp;<span class="op" id="5517103">(</span><span class="ident" id="5517104">l</span>&nbsp;<span class="op" id="5517106">*</span><span class="ident" id="5517107">lexer</span><span class="op" id="5517112">)</span>&nbsp;<span class="ident" id="5517114">next</span><span class="op" id="5517118">(</span><span class="op" id="5517119">)</span>&nbsp;<span class="builtintype" id="5517121">rune</span>&nbsp;<span class="op" id="5517126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517129">if</span>&nbsp;<span class="builtintype" id="5517132">int</span><span class="op" id="5517135">(</span><span class="ident" id="5517136">l</span><span class="op" id="5517137">.</span><span class="ident" id="5517138">pos</span><span class="op" id="5517141">)</span>&nbsp;<span class="op" id="5517143">&gt;=</span>&nbsp;<span class="builtinfunc" id="5517146">len</span><span class="op" id="5517149">(</span><span class="ident" id="5517150">l</span><span class="op" id="5517151">.</span><span class="ident" id="5517152">input</span><span class="op" id="5517157">)</span>&nbsp;<span class="op" id="5517159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517163">l</span><span class="op" id="5517164">.</span><span class="ident" id="5517165">width</span>&nbsp;<span class="op" id="5517171">=</span>&nbsp;<span class="num" id="5517173">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517177">return</span>&nbsp;<span class="ident" id="5517184">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5517189">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517192">r</span><span class="op" id="5517193">,</span>&nbsp;<span class="ident" id="5517195">w</span>&nbsp;<span class="op" id="5517197">:=</span>&nbsp;<span class="ident" id="5517200">utf8</span><span class="op" id="5517204">.</span><span class="ident" id="5517205">DecodeRuneInString</span><span class="op" id="5517223">(</span><span class="ident" id="5517224">l</span><span class="op" id="5517225">.</span><span class="ident" id="5517226">input</span><span class="op" id="5517231">[</span><span class="ident" id="5517232">l</span><span class="op" id="5517233">.</span><span class="ident" id="5517234">pos</span><span class="op" id="5517237">:</span><span class="op" id="5517238">]</span><span class="op" id="5517239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517242">l</span><span class="op" id="5517243">.</span><span class="ident" id="5517244">width</span>&nbsp;<span class="op" id="5517250">=</span>&nbsp;<span class="ident" id="5517252">Pos</span><span class="op" id="5517255">(</span><span class="ident" id="5517256">w</span><span class="op" id="5517257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517260">l</span><span class="op" id="5517261">.</span><span class="ident" id="5517262">pos</span>&nbsp;<span class="op" id="5517266">+=</span>&nbsp;<span class="ident" id="5517269">l</span><span class="op" id="5517270">.</span><span class="ident" id="5517271">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517278">return</span>&nbsp;<span class="ident" id="5517285">r</span><br>
<span class="lineno"></span><span class="op" id="5517287">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5517290">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="5517355">func</span>&nbsp;<span class="op" id="5517360">(</span><span class="ident" id="5517361">l</span>&nbsp;<span class="op" id="5517363">*</span><span class="ident" id="5517364">lexer</span><span class="op" id="5517369">)</span>&nbsp;<span class="ident" id="5517371">peek</span><span class="op" id="5517375">(</span><span class="op" id="5517376">)</span>&nbsp;<span class="builtintype" id="5517378">rune</span>&nbsp;<span class="op" id="5517383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517386">r</span>&nbsp;<span class="op" id="5517388">:=</span>&nbsp;<span class="ident" id="5517391">l</span><span class="op" id="5517392">.</span><span class="ident" id="5517393">next</span><span class="op" id="5517397">(</span><span class="op" id="5517398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517401">l</span><span class="op" id="5517402">.</span><span class="ident" id="5517403">backup</span><span class="op" id="5517409">(</span><span class="op" id="5517410">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517413">return</span>&nbsp;<span class="ident" id="5517420">r</span><br>
<span class="lineno"></span><span class="op" id="5517422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517425">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="5517498">func</span>&nbsp;<span class="op" id="5517503">(</span><span class="ident" id="5517504">l</span>&nbsp;<span class="op" id="5517506">*</span><span class="ident" id="5517507">lexer</span><span class="op" id="5517512">)</span>&nbsp;<span class="ident" id="5517514">backup</span><span class="op" id="5517520">(</span><span class="op" id="5517521">)</span>&nbsp;<span class="op" id="5517523">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517526">l</span><span class="op" id="5517527">.</span><span class="ident" id="5517528">pos</span>&nbsp;<span class="op" id="5517532">-=</span>&nbsp;<span class="ident" id="5517535">l</span><span class="op" id="5517536">.</span><span class="ident" id="5517537">width</span><br>
<span class="lineno"></span><span class="op" id="5517543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517546">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="5517589">func</span>&nbsp;<span class="op" id="5517594">(</span><span class="ident" id="5517595">l</span>&nbsp;<span class="op" id="5517597">*</span><span class="ident" id="5517598">lexer</span><span class="op" id="5517603">)</span>&nbsp;<span class="ident" id="5517605">emit</span><span class="op" id="5517609">(</span><span class="ident" id="5517610">t</span>&nbsp;<span class="ident" id="5517612">itemType</span><span class="op" id="5517620">)</span>&nbsp;<span class="op" id="5517622">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517625">l</span><span class="op" id="5517626">.</span><span class="ident" id="5517627">items</span>&nbsp;<span class="op" id="5517633">&lt;-</span>&nbsp;<span class="ident" id="5517636">item</span><span class="op" id="5517640">{</span><span class="ident" id="5517641">t</span><span class="op" id="5517642">,</span>&nbsp;<span class="ident" id="5517644">l</span><span class="op" id="5517645">.</span><span class="ident" id="5517646">start</span><span class="op" id="5517651">,</span>&nbsp;<span class="ident" id="5517653">l</span><span class="op" id="5517654">.</span><span class="ident" id="5517655">input</span><span class="op" id="5517660">[</span><span class="ident" id="5517661">l</span><span class="op" id="5517662">.</span><span class="ident" id="5517663">start</span><span class="op" id="5517668">:</span><span class="ident" id="5517669">l</span><span class="op" id="5517670">.</span><span class="ident" id="5517671">pos</span><span class="op" id="5517674">]</span><span class="op" id="5517675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517678">l</span><span class="op" id="5517679">.</span><span class="ident" id="5517680">start</span>&nbsp;<span class="op" id="5517686">=</span>&nbsp;<span class="ident" id="5517688">l</span><span class="op" id="5517689">.</span><span class="ident" id="5517690">pos</span><br>
<span class="lineno"></span><span class="op" id="5517694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517697">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="5517755">func</span>&nbsp;<span class="op" id="5517760">(</span><span class="ident" id="5517761">l</span>&nbsp;<span class="op" id="5517763">*</span><span class="ident" id="5517764">lexer</span><span class="op" id="5517769">)</span>&nbsp;<span class="ident" id="5517771">ignore</span><span class="op" id="5517777">(</span><span class="op" id="5517778">)</span>&nbsp;<span class="op" id="5517780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517783">l</span><span class="op" id="5517784">.</span><span class="ident" id="5517785">start</span>&nbsp;<span class="op" id="5517791">=</span>&nbsp;<span class="ident" id="5517793">l</span><span class="op" id="5517794">.</span><span class="ident" id="5517795">pos</span><br>
<span class="lineno"></span><span class="op" id="5517799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517802">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="5517863">func</span>&nbsp;<span class="op" id="5517868">(</span><span class="ident" id="5517869">l</span>&nbsp;<span class="op" id="5517871">*</span><span class="ident" id="5517872">lexer</span><span class="op" id="5517877">)</span>&nbsp;<span class="ident" id="5517879">accept</span><span class="op" id="5517885">(</span><span class="ident" id="5517886">valid</span>&nbsp;<span class="builtintype" id="5517892">string</span><span class="op" id="5517898">)</span>&nbsp;<span class="builtintype" id="5517900">bool</span>&nbsp;<span class="op" id="5517905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517908">if</span>&nbsp;<span class="ident" id="5517911">strings</span><span class="op" id="5517918">.</span><span class="ident" id="5517919">IndexRune</span><span class="op" id="5517928">(</span><span class="ident" id="5517929">valid</span><span class="op" id="5517934">,</span>&nbsp;<span class="ident" id="5517936">l</span><span class="op" id="5517937">.</span><span class="ident" id="5517938">next</span><span class="op" id="5517942">(</span><span class="op" id="5517943">)</span><span class="op" id="5517944">)</span>&nbsp;<span class="op" id="5517946">&gt;=</span>&nbsp;<span class="num" id="5517949">0</span>&nbsp;<span class="op" id="5517951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517955">return</span>&nbsp;<span class="builtintype" id="5517962">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5517968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5517971">l</span><span class="op" id="5517972">.</span><span class="ident" id="5517973">backup</span><span class="op" id="5517979">(</span><span class="op" id="5517980">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5517983">return</span>&nbsp;<span class="builtintype" id="5517990">false</span><br>
<span class="lineno"></span><span class="op" id="5517996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5517999">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5518056">func</span>&nbsp;<span class="op" id="5518061">(</span><span class="ident" id="5518062">l</span>&nbsp;<span class="op" id="5518064">*</span><span class="ident" id="5518065">lexer</span><span class="op" id="5518070">)</span>&nbsp;<span class="ident" id="5518072">acceptRun</span><span class="op" id="5518081">(</span><span class="ident" id="5518082">valid</span>&nbsp;<span class="builtintype" id="5518088">string</span><span class="op" id="5518094">)</span>&nbsp;<span class="op" id="5518096">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518099">for</span>&nbsp;<span class="ident" id="5518103">strings</span><span class="op" id="5518110">.</span><span class="ident" id="5518111">IndexRune</span><span class="op" id="5518120">(</span><span class="ident" id="5518121">valid</span><span class="op" id="5518126">,</span>&nbsp;<span class="ident" id="5518128">l</span><span class="op" id="5518129">.</span><span class="ident" id="5518130">next</span><span class="op" id="5518134">(</span><span class="op" id="5518135">)</span><span class="op" id="5518136">)</span>&nbsp;<span class="op" id="5518138">&gt;=</span>&nbsp;<span class="num" id="5518141">0</span>&nbsp;<span class="op" id="5518143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5518146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518149">l</span><span class="op" id="5518150">.</span><span class="ident" id="5518151">backup</span><span class="op" id="5518157">(</span><span class="op" id="5518158">)</span><br>
<span class="lineno"></span><span class="op" id="5518160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5518163">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5518231">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="5518292">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="5518352">func</span>&nbsp;<span class="op" id="5518357">(</span><span class="ident" id="5518358">l</span>&nbsp;<span class="op" id="5518360">*</span><span class="ident" id="5518361">lexer</span><span class="op" id="5518366">)</span>&nbsp;<span class="ident" id="5518368">lineNumber</span><span class="op" id="5518378">(</span><span class="op" id="5518379">)</span>&nbsp;<span class="builtintype" id="5518381">int</span>&nbsp;<span class="op" id="5518385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518388">return</span>&nbsp;<span class="num" id="5518395">1</span>&nbsp;<span class="op" id="5518397">+</span>&nbsp;<span class="ident" id="5518399">strings</span><span class="op" id="5518406">.</span><span class="ident" id="5518407">Count</span><span class="op" id="5518412">(</span><span class="ident" id="5518413">l</span><span class="op" id="5518414">.</span><span class="ident" id="5518415">input</span><span class="op" id="5518420">[</span><span class="op" id="5518421">:</span><span class="ident" id="5518422">l</span><span class="op" id="5518423">.</span><span class="ident" id="5518424">lastPos</span><span class="op" id="5518431">]</span><span class="op" id="5518432">,</span>&nbsp;<span class="string" id="5518434">&#34;\n&#34;</span><span class="op" id="5518438">)</span><br>
<span class="lineno">160</span><span class="op" id="5518440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5518443">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="5518511">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="5518586">func</span>&nbsp;<span class="op" id="5518591">(</span><span class="ident" id="5518592">l</span>&nbsp;<span class="op" id="5518594">*</span><span class="ident" id="5518595">lexer</span><span class="op" id="5518600">)</span>&nbsp;<span class="ident" id="5518602">errorf</span><span class="op" id="5518608">(</span><span class="ident" id="5518609">format</span>&nbsp;<span class="builtintype" id="5518616">string</span><span class="op" id="5518622">,</span>&nbsp;<span class="ident" id="5518624">args</span>&nbsp;<span class="op" id="5518629">...</span><span class="keyword" id="5518632">interface</span><span class="op" id="5518641">{</span><span class="op" id="5518642">}</span><span class="op" id="5518643">)</span>&nbsp;<span class="ident" id="5518645">stateFn</span>&nbsp;<span class="op" id="5518653">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518656">l</span><span class="op" id="5518657">.</span><span class="ident" id="5518658">items</span>&nbsp;<span class="op" id="5518664">&lt;-</span>&nbsp;<span class="ident" id="5518667">item</span><span class="op" id="5518671">{</span><span class="ident" id="5518672">itemError</span><span class="op" id="5518681">,</span>&nbsp;<span class="ident" id="5518683">l</span><span class="op" id="5518684">.</span><span class="ident" id="5518685">start</span><span class="op" id="5518690">,</span>&nbsp;<span class="ident" id="5518692">fmt</span><span class="op" id="5518695">.</span><span class="ident" id="5518696">Sprintf</span><span class="op" id="5518703">(</span><span class="ident" id="5518704">format</span><span class="op" id="5518710">,</span>&nbsp;<span class="ident" id="5518712">args</span><span class="op" id="5518716">...</span><span class="op" id="5518719">)</span><span class="op" id="5518720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518723">return</span>&nbsp;<span class="ident" id="5518730">nil</span><br>
<span class="lineno"></span><span class="op" id="5518734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5518737">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="5518787">func</span>&nbsp;<span class="op" id="5518792">(</span><span class="ident" id="5518793">l</span>&nbsp;<span class="op" id="5518795">*</span><span class="ident" id="5518796">lexer</span><span class="op" id="5518801">)</span>&nbsp;<span class="ident" id="5518803">nextItem</span><span class="op" id="5518811">(</span><span class="op" id="5518812">)</span>&nbsp;<span class="ident" id="5518814">item</span>&nbsp;<span class="op" id="5518819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518822">item</span>&nbsp;<span class="op" id="5518827">:=</span>&nbsp;<span class="op" id="5518830">&lt;-</span><span class="ident" id="5518832">l</span><span class="op" id="5518833">.</span><span class="ident" id="5518834">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518841">l</span><span class="op" id="5518842">.</span><span class="ident" id="5518843">lastPos</span>&nbsp;<span class="op" id="5518851">=</span>&nbsp;<span class="ident" id="5518853">item</span><span class="op" id="5518857">.</span><span class="ident" id="5518858">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518863">return</span>&nbsp;<span class="ident" id="5518870">item</span><br>
<span class="lineno"></span><span class="op" id="5518875">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="5518878">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5518929">func</span>&nbsp;<span class="ident" id="5518934">lex</span><span class="op" id="5518937">(</span><span class="ident" id="5518938">name</span><span class="op" id="5518942">,</span>&nbsp;<span class="ident" id="5518944">input</span><span class="op" id="5518949">,</span>&nbsp;<span class="ident" id="5518951">left</span><span class="op" id="5518955">,</span>&nbsp;<span class="ident" id="5518957">right</span>&nbsp;<span class="builtintype" id="5518963">string</span><span class="op" id="5518969">)</span>&nbsp;<span class="op" id="5518971">*</span><span class="ident" id="5518972">lexer</span>&nbsp;<span class="op" id="5518978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5518981">if</span>&nbsp;<span class="ident" id="5518984">left</span>&nbsp;<span class="op" id="5518989">==</span>&nbsp;<span class="string" id="5518992">&#34;&#34;</span>&nbsp;<span class="op" id="5518995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5518999">left</span>&nbsp;<span class="op" id="5519004">=</span>&nbsp;<span class="ident" id="5519006">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519020">if</span>&nbsp;<span class="ident" id="5519023">right</span>&nbsp;<span class="op" id="5519029">==</span>&nbsp;<span class="string" id="5519032">&#34;&#34;</span>&nbsp;<span class="op" id="5519035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519039">right</span>&nbsp;<span class="op" id="5519045">=</span>&nbsp;<span class="ident" id="5519047">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519062">l</span>&nbsp;<span class="op" id="5519064">:=</span>&nbsp;<span class="op" id="5519067">&amp;</span><span class="ident" id="5519068">lexer</span><span class="op" id="5519073">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519077">name</span><span class="op" id="5519081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5519089">name</span><span class="op" id="5519093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519097">input</span><span class="op" id="5519102">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5519109">input</span><span class="op" id="5519114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519118">leftDelim</span><span class="op" id="5519127">:</span>&nbsp;&nbsp;<span class="ident" id="5519130">left</span><span class="op" id="5519134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519138">rightDelim</span><span class="op" id="5519148">:</span>&nbsp;<span class="ident" id="5519150">right</span><span class="op" id="5519155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519159">items</span><span class="op" id="5519164">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5519171">make</span><span class="op" id="5519175">(</span><span class="keyword" id="5519176">chan</span>&nbsp;<span class="ident" id="5519181">item</span><span class="op" id="5519185">)</span><span class="op" id="5519186">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519192">go</span>&nbsp;<span class="ident" id="5519195">l</span><span class="op" id="5519196">.</span><span class="ident" id="5519197">run</span><span class="op" id="5519200">(</span><span class="op" id="5519201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519204">return</span>&nbsp;<span class="ident" id="5519211">l</span><br>
<span class="lineno"></span><span class="op" id="5519213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="5519216">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="5519261">func</span>&nbsp;<span class="op" id="5519266">(</span><span class="ident" id="5519267">l</span>&nbsp;<span class="op" id="5519269">*</span><span class="ident" id="5519270">lexer</span><span class="op" id="5519275">)</span>&nbsp;<span class="ident" id="5519277">run</span><span class="op" id="5519280">(</span><span class="op" id="5519281">)</span>&nbsp;<span class="op" id="5519283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519286">for</span>&nbsp;<span class="ident" id="5519290">l</span><span class="op" id="5519291">.</span><span class="ident" id="5519292">state</span>&nbsp;<span class="op" id="5519298">=</span>&nbsp;<span class="ident" id="5519300">lexText</span><span class="op" id="5519307">;</span>&nbsp;<span class="ident" id="5519309">l</span><span class="op" id="5519310">.</span><span class="ident" id="5519311">state</span>&nbsp;<span class="op" id="5519317">!=</span>&nbsp;<span class="ident" id="5519320">nil</span><span class="op" id="5519323">;</span>&nbsp;<span class="op" id="5519325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519329">l</span><span class="op" id="5519330">.</span><span class="ident" id="5519331">state</span>&nbsp;<span class="op" id="5519337">=</span>&nbsp;<span class="ident" id="5519339">l</span><span class="op" id="5519340">.</span><span class="ident" id="5519341">state</span><span class="op" id="5519346">(</span><span class="ident" id="5519347">l</span><span class="op" id="5519348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519351">}</span><br>
<span class="lineno">200</span><span class="op" id="5519353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5519356">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5519376">const</span>&nbsp;<span class="op" id="5519382">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519385">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5519398">=</span>&nbsp;<span class="string" id="5519400">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519406">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5519419">=</span>&nbsp;<span class="string" id="5519421">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519427">leftComment</span>&nbsp;&nbsp;<span class="op" id="5519440">=</span>&nbsp;<span class="string" id="5519442">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519448">rightComment</span>&nbsp;<span class="op" id="5519461">=</span>&nbsp;<span class="string" id="5519463">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="5519468">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="5519471">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5519529">func</span>&nbsp;<span class="ident" id="5519534">lexText</span><span class="op" id="5519541">(</span><span class="ident" id="5519542">l</span>&nbsp;<span class="op" id="5519544">*</span><span class="ident" id="5519545">lexer</span><span class="op" id="5519550">)</span>&nbsp;<span class="ident" id="5519552">stateFn</span>&nbsp;<span class="op" id="5519560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519563">for</span>&nbsp;<span class="op" id="5519567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519571">if</span>&nbsp;<span class="ident" id="5519574">strings</span><span class="op" id="5519581">.</span><span class="ident" id="5519582">HasPrefix</span><span class="op" id="5519591">(</span><span class="ident" id="5519592">l</span><span class="op" id="5519593">.</span><span class="ident" id="5519594">input</span><span class="op" id="5519599">[</span><span class="ident" id="5519600">l</span><span class="op" id="5519601">.</span><span class="ident" id="5519602">pos</span><span class="op" id="5519605">:</span><span class="op" id="5519606">]</span><span class="op" id="5519607">,</span>&nbsp;<span class="ident" id="5519609">l</span><span class="op" id="5519610">.</span><span class="ident" id="5519611">leftDelim</span><span class="op" id="5519620">)</span>&nbsp;<span class="op" id="5519622">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519627">if</span>&nbsp;<span class="ident" id="5519630">l</span><span class="op" id="5519631">.</span><span class="ident" id="5519632">pos</span>&nbsp;<span class="op" id="5519636">&gt;</span>&nbsp;<span class="ident" id="5519638">l</span><span class="op" id="5519639">.</span><span class="ident" id="5519640">start</span>&nbsp;<span class="op" id="5519646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519652">l</span><span class="op" id="5519653">.</span><span class="ident" id="5519654">emit</span><span class="op" id="5519658">(</span><span class="ident" id="5519659">itemText</span><span class="op" id="5519667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519677">return</span>&nbsp;<span class="ident" id="5519684">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519699">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519703">if</span>&nbsp;<span class="ident" id="5519706">l</span><span class="op" id="5519707">.</span><span class="ident" id="5519708">next</span><span class="op" id="5519712">(</span><span class="op" id="5519713">)</span>&nbsp;<span class="op" id="5519715">==</span>&nbsp;<span class="ident" id="5519718">eof</span>&nbsp;<span class="op" id="5519722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519727">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5519741">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519768">if</span>&nbsp;<span class="ident" id="5519771">l</span><span class="op" id="5519772">.</span><span class="ident" id="5519773">pos</span>&nbsp;<span class="op" id="5519777">&gt;</span>&nbsp;<span class="ident" id="5519779">l</span><span class="op" id="5519780">.</span><span class="ident" id="5519781">start</span>&nbsp;<span class="op" id="5519787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519791">l</span><span class="op" id="5519792">.</span><span class="ident" id="5519793">emit</span><span class="op" id="5519797">(</span><span class="ident" id="5519798">itemText</span><span class="op" id="5519806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5519809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519812">l</span><span class="op" id="5519813">.</span><span class="ident" id="5519814">emit</span><span class="op" id="5519818">(</span><span class="ident" id="5519819">itemEOF</span><span class="op" id="5519826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519829">return</span>&nbsp;<span class="ident" id="5519836">nil</span><br>
<span class="lineno">230</span><span class="op" id="5519840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5519843">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="5519915">func</span>&nbsp;<span class="ident" id="5519920">lexLeftDelim</span><span class="op" id="5519932">(</span><span class="ident" id="5519933">l</span>&nbsp;<span class="op" id="5519935">*</span><span class="ident" id="5519936">lexer</span><span class="op" id="5519941">)</span>&nbsp;<span class="ident" id="5519943">stateFn</span>&nbsp;<span class="op" id="5519951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5519954">l</span><span class="op" id="5519955">.</span><span class="ident" id="5519956">pos</span>&nbsp;<span class="op" id="5519960">+=</span>&nbsp;<span class="ident" id="5519963">Pos</span><span class="op" id="5519966">(</span><span class="builtinfunc" id="5519967">len</span><span class="op" id="5519970">(</span><span class="ident" id="5519971">l</span><span class="op" id="5519972">.</span><span class="ident" id="5519973">leftDelim</span><span class="op" id="5519982">)</span><span class="op" id="5519983">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5519986">if</span>&nbsp;<span class="ident" id="5519989">strings</span><span class="op" id="5519996">.</span><span class="ident" id="5519997">HasPrefix</span><span class="op" id="5520006">(</span><span class="ident" id="5520007">l</span><span class="op" id="5520008">.</span><span class="ident" id="5520009">input</span><span class="op" id="5520014">[</span><span class="ident" id="5520015">l</span><span class="op" id="5520016">.</span><span class="ident" id="5520017">pos</span><span class="op" id="5520020">:</span><span class="op" id="5520021">]</span><span class="op" id="5520022">,</span>&nbsp;<span class="ident" id="5520024">leftComment</span><span class="op" id="5520035">)</span>&nbsp;<span class="op" id="5520037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520041">return</span>&nbsp;<span class="ident" id="5520048">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520063">l</span><span class="op" id="5520064">.</span><span class="ident" id="5520065">emit</span><span class="op" id="5520069">(</span><span class="ident" id="5520070">itemLeftDelim</span><span class="op" id="5520083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520086">l</span><span class="op" id="5520087">.</span><span class="ident" id="5520088">parenDepth</span>&nbsp;<span class="op" id="5520099">=</span>&nbsp;<span class="num" id="5520101">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520104">return</span>&nbsp;<span class="ident" id="5520111">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5520127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5520130">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="5520209">func</span>&nbsp;<span class="ident" id="5520214">lexComment</span><span class="op" id="5520224">(</span><span class="ident" id="5520225">l</span>&nbsp;<span class="op" id="5520227">*</span><span class="ident" id="5520228">lexer</span><span class="op" id="5520233">)</span>&nbsp;<span class="ident" id="5520235">stateFn</span>&nbsp;<span class="op" id="5520243">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520246">l</span><span class="op" id="5520247">.</span><span class="ident" id="5520248">pos</span>&nbsp;<span class="op" id="5520252">+=</span>&nbsp;<span class="ident" id="5520255">Pos</span><span class="op" id="5520258">(</span><span class="builtinfunc" id="5520259">len</span><span class="op" id="5520262">(</span><span class="ident" id="5520263">leftComment</span><span class="op" id="5520274">)</span><span class="op" id="5520275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520278">i</span>&nbsp;<span class="op" id="5520280">:=</span>&nbsp;<span class="ident" id="5520283">strings</span><span class="op" id="5520290">.</span><span class="ident" id="5520291">Index</span><span class="op" id="5520296">(</span><span class="ident" id="5520297">l</span><span class="op" id="5520298">.</span><span class="ident" id="5520299">input</span><span class="op" id="5520304">[</span><span class="ident" id="5520305">l</span><span class="op" id="5520306">.</span><span class="ident" id="5520307">pos</span><span class="op" id="5520310">:</span><span class="op" id="5520311">]</span><span class="op" id="5520312">,</span>&nbsp;<span class="ident" id="5520314">rightComment</span><span class="op" id="5520326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520329">if</span>&nbsp;<span class="ident" id="5520332">i</span>&nbsp;<span class="op" id="5520334">&lt;</span>&nbsp;<span class="num" id="5520336">0</span>&nbsp;<span class="op" id="5520338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520342">return</span>&nbsp;<span class="ident" id="5520349">l</span><span class="op" id="5520350">.</span><span class="ident" id="5520351">errorf</span><span class="op" id="5520357">(</span><span class="string" id="5520358">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="5520376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520379">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520382">l</span><span class="op" id="5520383">.</span><span class="ident" id="5520384">pos</span>&nbsp;<span class="op" id="5520388">+=</span>&nbsp;<span class="ident" id="5520391">Pos</span><span class="op" id="5520394">(</span><span class="ident" id="5520395">i</span>&nbsp;<span class="op" id="5520397">+</span>&nbsp;<span class="builtinfunc" id="5520399">len</span><span class="op" id="5520402">(</span><span class="ident" id="5520403">rightComment</span><span class="op" id="5520415">)</span><span class="op" id="5520416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520419">if</span>&nbsp;<span class="op" id="5520422">!</span><span class="ident" id="5520423">strings</span><span class="op" id="5520430">.</span><span class="ident" id="5520431">HasPrefix</span><span class="op" id="5520440">(</span><span class="ident" id="5520441">l</span><span class="op" id="5520442">.</span><span class="ident" id="5520443">input</span><span class="op" id="5520448">[</span><span class="ident" id="5520449">l</span><span class="op" id="5520450">.</span><span class="ident" id="5520451">pos</span><span class="op" id="5520454">:</span><span class="op" id="5520455">]</span><span class="op" id="5520456">,</span>&nbsp;<span class="ident" id="5520458">l</span><span class="op" id="5520459">.</span><span class="ident" id="5520460">rightDelim</span><span class="op" id="5520470">)</span>&nbsp;<span class="op" id="5520472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520476">return</span>&nbsp;<span class="ident" id="5520483">l</span><span class="op" id="5520484">.</span><span class="ident" id="5520485">errorf</span><span class="op" id="5520491">(</span><span class="string" id="5520492">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="5520531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5520535">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520538">l</span><span class="op" id="5520539">.</span><span class="ident" id="5520540">pos</span>&nbsp;<span class="op" id="5520544">+=</span>&nbsp;<span class="ident" id="5520547">Pos</span><span class="op" id="5520550">(</span><span class="builtinfunc" id="5520551">len</span><span class="op" id="5520554">(</span><span class="ident" id="5520555">l</span><span class="op" id="5520556">.</span><span class="ident" id="5520557">rightDelim</span><span class="op" id="5520567">)</span><span class="op" id="5520568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520571">l</span><span class="op" id="5520572">.</span><span class="ident" id="5520573">ignore</span><span class="op" id="5520579">(</span><span class="op" id="5520580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520583">return</span>&nbsp;<span class="ident" id="5520590">lexText</span><br>
<span class="lineno"></span><span class="op" id="5520598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5520601">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="5520675">func</span>&nbsp;<span class="ident" id="5520680">lexRightDelim</span><span class="op" id="5520693">(</span><span class="ident" id="5520694">l</span>&nbsp;<span class="op" id="5520696">*</span><span class="ident" id="5520697">lexer</span><span class="op" id="5520702">)</span>&nbsp;<span class="ident" id="5520704">stateFn</span>&nbsp;<span class="op" id="5520712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520715">l</span><span class="op" id="5520716">.</span><span class="ident" id="5520717">pos</span>&nbsp;<span class="op" id="5520721">+=</span>&nbsp;<span class="ident" id="5520724">Pos</span><span class="op" id="5520727">(</span><span class="builtinfunc" id="5520728">len</span><span class="op" id="5520731">(</span><span class="ident" id="5520732">l</span><span class="op" id="5520733">.</span><span class="ident" id="5520734">rightDelim</span><span class="op" id="5520744">)</span><span class="op" id="5520745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5520748">l</span><span class="op" id="5520749">.</span><span class="ident" id="5520750">emit</span><span class="op" id="5520754">(</span><span class="ident" id="5520755">itemRightDelim</span><span class="op" id="5520769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5520772">return</span>&nbsp;<span class="ident" id="5520779">lexText</span><br>
<span class="lineno">265</span><span class="op" id="5520787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5520790">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="5520854">func</span>&nbsp;<span class="ident" id="5520859">lexInsideAction</span><span class="op" id="5520874">(</span><span class="ident" id="5520875">l</span>&nbsp;<span class="op" id="5520877">*</span><span class="ident" id="5520878">lexer</span><span class="op" id="5520883">)</span>&nbsp;<span class="ident" id="5520885">stateFn</span>&nbsp;<span class="op" id="5520893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5520896">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5520945">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5521012">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521055">if</span>&nbsp;<span class="ident" id="5521058">strings</span><span class="op" id="5521065">.</span><span class="ident" id="5521066">HasPrefix</span><span class="op" id="5521075">(</span><span class="ident" id="5521076">l</span><span class="op" id="5521077">.</span><span class="ident" id="5521078">input</span><span class="op" id="5521083">[</span><span class="ident" id="5521084">l</span><span class="op" id="5521085">.</span><span class="ident" id="5521086">pos</span><span class="op" id="5521089">:</span><span class="op" id="5521090">]</span><span class="op" id="5521091">,</span>&nbsp;<span class="ident" id="5521093">l</span><span class="op" id="5521094">.</span><span class="ident" id="5521095">rightDelim</span><span class="op" id="5521105">)</span>&nbsp;<span class="op" id="5521107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521111">if</span>&nbsp;<span class="ident" id="5521114">l</span><span class="op" id="5521115">.</span><span class="ident" id="5521116">parenDepth</span>&nbsp;<span class="op" id="5521127">==</span>&nbsp;<span class="num" id="5521130">0</span>&nbsp;<span class="op" id="5521132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521137">return</span>&nbsp;<span class="ident" id="5521144">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521164">return</span>&nbsp;<span class="ident" id="5521171">l</span><span class="op" id="5521172">.</span><span class="ident" id="5521173">errorf</span><span class="op" id="5521179">(</span><span class="string" id="5521180">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="5521201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521207">switch</span>&nbsp;<span class="ident" id="5521214">r</span>&nbsp;<span class="op" id="5521216">:=</span>&nbsp;<span class="ident" id="5521219">l</span><span class="op" id="5521220">.</span><span class="ident" id="5521221">next</span><span class="op" id="5521225">(</span><span class="op" id="5521226">)</span><span class="op" id="5521227">;</span>&nbsp;<span class="op" id="5521229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521232">case</span>&nbsp;<span class="ident" id="5521237">r</span>&nbsp;<span class="op" id="5521239">==</span>&nbsp;<span class="ident" id="5521242">eof</span>&nbsp;<span class="op" id="5521246">||</span>&nbsp;<span class="ident" id="5521249">isEndOfLine</span><span class="op" id="5521260">(</span><span class="ident" id="5521261">r</span><span class="op" id="5521262">)</span><span class="op" id="5521263">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521267">return</span>&nbsp;<span class="ident" id="5521274">l</span><span class="op" id="5521275">.</span><span class="ident" id="5521276">errorf</span><span class="op" id="5521282">(</span><span class="string" id="5521283">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="5521300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521303">case</span>&nbsp;<span class="ident" id="5521308">isSpace</span><span class="op" id="5521315">(</span><span class="ident" id="5521316">r</span><span class="op" id="5521317">)</span><span class="op" id="5521318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521322">return</span>&nbsp;<span class="ident" id="5521329">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521339">case</span>&nbsp;<span class="ident" id="5521344">r</span>&nbsp;<span class="op" id="5521346">==</span>&nbsp;<span class="string" id="5521349">&#39;:&#39;</span><span class="op" id="5521352">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521356">if</span>&nbsp;<span class="ident" id="5521359">l</span><span class="op" id="5521360">.</span><span class="ident" id="5521361">next</span><span class="op" id="5521365">(</span><span class="op" id="5521366">)</span>&nbsp;<span class="op" id="5521368">!=</span>&nbsp;<span class="string" id="5521371">&#39;=&#39;</span>&nbsp;<span class="op" id="5521375">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521380">return</span>&nbsp;<span class="ident" id="5521387">l</span><span class="op" id="5521388">.</span><span class="ident" id="5521389">errorf</span><span class="op" id="5521395">(</span><span class="string" id="5521396">&#34;expected&nbsp;:=&#34;</span><span class="op" id="5521409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521417">l</span><span class="op" id="5521418">.</span><span class="ident" id="5521419">emit</span><span class="op" id="5521423">(</span><span class="ident" id="5521424">itemColonEquals</span><span class="op" id="5521439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521442">case</span>&nbsp;<span class="ident" id="5521447">r</span>&nbsp;<span class="op" id="5521449">==</span>&nbsp;<span class="string" id="5521452">&#39;|&#39;</span><span class="op" id="5521455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521459">l</span><span class="op" id="5521460">.</span><span class="ident" id="5521461">emit</span><span class="op" id="5521465">(</span><span class="ident" id="5521466">itemPipe</span><span class="op" id="5521474">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521477">case</span>&nbsp;<span class="ident" id="5521482">r</span>&nbsp;<span class="op" id="5521484">==</span>&nbsp;<span class="string" id="5521487">&#39;&#34;&#39;</span><span class="op" id="5521490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521494">return</span>&nbsp;<span class="ident" id="5521501">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521511">case</span>&nbsp;<span class="ident" id="5521516">r</span>&nbsp;<span class="op" id="5521518">==</span>&nbsp;<span class="string" id="5521521">&#39;`&#39;</span><span class="op" id="5521524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521528">return</span>&nbsp;<span class="ident" id="5521535">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521548">case</span>&nbsp;<span class="ident" id="5521553">r</span>&nbsp;<span class="op" id="5521555">==</span>&nbsp;<span class="string" id="5521558">&#39;$&#39;</span><span class="op" id="5521561">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521565">return</span>&nbsp;<span class="ident" id="5521572">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521585">case</span>&nbsp;<span class="ident" id="5521590">r</span>&nbsp;<span class="op" id="5521592">==</span>&nbsp;<span class="string" id="5521595">&#39;\&#39;&#39;</span><span class="op" id="5521599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521603">return</span>&nbsp;<span class="ident" id="5521610">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521619">case</span>&nbsp;<span class="ident" id="5521624">r</span>&nbsp;<span class="op" id="5521626">==</span>&nbsp;<span class="string" id="5521629">&#39;.&#39;</span><span class="op" id="5521632">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5521636">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521703">if</span>&nbsp;<span class="ident" id="5521706">l</span><span class="op" id="5521707">.</span><span class="ident" id="5521708">pos</span>&nbsp;<span class="op" id="5521712">&lt;</span>&nbsp;<span class="ident" id="5521714">Pos</span><span class="op" id="5521717">(</span><span class="builtinfunc" id="5521718">len</span><span class="op" id="5521721">(</span><span class="ident" id="5521722">l</span><span class="op" id="5521723">.</span><span class="ident" id="5521724">input</span><span class="op" id="5521729">)</span><span class="op" id="5521730">)</span>&nbsp;<span class="op" id="5521732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521737">r</span>&nbsp;<span class="op" id="5521739">:=</span>&nbsp;<span class="ident" id="5521742">l</span><span class="op" id="5521743">.</span><span class="ident" id="5521744">input</span><span class="op" id="5521749">[</span><span class="ident" id="5521750">l</span><span class="op" id="5521751">.</span><span class="ident" id="5521752">pos</span><span class="op" id="5521755">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521760">if</span>&nbsp;<span class="ident" id="5521763">r</span>&nbsp;<span class="op" id="5521765">&lt;</span>&nbsp;<span class="string" id="5521767">&#39;0&#39;</span>&nbsp;<span class="op" id="5521771">||</span>&nbsp;<span class="string" id="5521774">&#39;9&#39;</span>&nbsp;<span class="op" id="5521778">&lt;</span>&nbsp;<span class="ident" id="5521780">r</span>&nbsp;<span class="op" id="5521782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521788">return</span>&nbsp;<span class="ident" id="5521795">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521807">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5521811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521815">fallthrough</span>&nbsp;<span class="comment" id="5521827">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521855">case</span>&nbsp;<span class="ident" id="5521860">r</span>&nbsp;<span class="op" id="5521862">==</span>&nbsp;<span class="string" id="5521865">&#39;+&#39;</span>&nbsp;<span class="op" id="5521869">||</span>&nbsp;<span class="ident" id="5521872">r</span>&nbsp;<span class="op" id="5521874">==</span>&nbsp;<span class="string" id="5521877">&#39;-&#39;</span>&nbsp;<span class="op" id="5521881">||</span>&nbsp;<span class="op" id="5521884">(</span><span class="string" id="5521885">&#39;0&#39;</span>&nbsp;<span class="op" id="5521889">&lt;=</span>&nbsp;<span class="ident" id="5521892">r</span>&nbsp;<span class="op" id="5521894">&amp;&amp;</span>&nbsp;<span class="ident" id="5521897">r</span>&nbsp;<span class="op" id="5521899">&lt;=</span>&nbsp;<span class="string" id="5521902">&#39;9&#39;</span><span class="op" id="5521905">)</span><span class="op" id="5521906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521910">l</span><span class="op" id="5521911">.</span><span class="ident" id="5521912">backup</span><span class="op" id="5521918">(</span><span class="op" id="5521919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521923">return</span>&nbsp;<span class="ident" id="5521930">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521941">case</span>&nbsp;<span class="ident" id="5521946">isAlphaNumeric</span><span class="op" id="5521960">(</span><span class="ident" id="5521961">r</span><span class="op" id="5521962">)</span><span class="op" id="5521963">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5521967">l</span><span class="op" id="5521968">.</span><span class="ident" id="5521969">backup</span><span class="op" id="5521975">(</span><span class="op" id="5521976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5521980">return</span>&nbsp;<span class="ident" id="5521987">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522002">case</span>&nbsp;<span class="ident" id="5522007">r</span>&nbsp;<span class="op" id="5522009">==</span>&nbsp;<span class="string" id="5522012">&#39;(&#39;</span><span class="op" id="5522015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522019">l</span><span class="op" id="5522020">.</span><span class="ident" id="5522021">emit</span><span class="op" id="5522025">(</span><span class="ident" id="5522026">itemLeftParen</span><span class="op" id="5522039">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522043">l</span><span class="op" id="5522044">.</span><span class="ident" id="5522045">parenDepth</span><span class="op" id="5522055">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522060">return</span>&nbsp;<span class="ident" id="5522067">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522084">case</span>&nbsp;<span class="ident" id="5522089">r</span>&nbsp;<span class="op" id="5522091">==</span>&nbsp;<span class="string" id="5522094">&#39;)&#39;</span><span class="op" id="5522097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522101">l</span><span class="op" id="5522102">.</span><span class="ident" id="5522103">emit</span><span class="op" id="5522107">(</span><span class="ident" id="5522108">itemRightParen</span><span class="op" id="5522122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522126">l</span><span class="op" id="5522127">.</span><span class="ident" id="5522128">parenDepth</span><span class="op" id="5522138">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522143">if</span>&nbsp;<span class="ident" id="5522146">l</span><span class="op" id="5522147">.</span><span class="ident" id="5522148">parenDepth</span>&nbsp;<span class="op" id="5522159">&lt;</span>&nbsp;<span class="num" id="5522161">0</span>&nbsp;<span class="op" id="5522163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522168">return</span>&nbsp;<span class="ident" id="5522175">l</span><span class="op" id="5522176">.</span><span class="ident" id="5522177">errorf</span><span class="op" id="5522183">(</span><span class="string" id="5522184">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="5522212">,</span>&nbsp;<span class="ident" id="5522214">r</span><span class="op" id="5522215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522223">return</span>&nbsp;<span class="ident" id="5522230">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522247">case</span>&nbsp;<span class="ident" id="5522252">r</span>&nbsp;<span class="op" id="5522254">&lt;=</span>&nbsp;<span class="ident" id="5522257">unicode</span><span class="op" id="5522264">.</span><span class="ident" id="5522265">MaxASCII</span>&nbsp;<span class="op" id="5522274">&amp;&amp;</span>&nbsp;<span class="ident" id="5522277">unicode</span><span class="op" id="5522284">.</span><span class="ident" id="5522285">IsPrint</span><span class="op" id="5522292">(</span><span class="ident" id="5522293">r</span><span class="op" id="5522294">)</span><span class="op" id="5522295">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522299">l</span><span class="op" id="5522300">.</span><span class="ident" id="5522301">emit</span><span class="op" id="5522305">(</span><span class="ident" id="5522306">itemChar</span><span class="op" id="5522314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522318">return</span>&nbsp;<span class="ident" id="5522325">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522342">default</span><span class="op" id="5522349">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522353">return</span>&nbsp;<span class="ident" id="5522360">l</span><span class="op" id="5522361">.</span><span class="ident" id="5522362">errorf</span><span class="op" id="5522368">(</span><span class="string" id="5522369">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="5522408">,</span>&nbsp;<span class="ident" id="5522410">r</span><span class="op" id="5522411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522414">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522417">return</span>&nbsp;<span class="ident" id="5522424">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5522440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5522443">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="5522488">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="5522524">func</span>&nbsp;<span class="ident" id="5522529">lexSpace</span><span class="op" id="5522537">(</span><span class="ident" id="5522538">l</span>&nbsp;<span class="op" id="5522540">*</span><span class="ident" id="5522541">lexer</span><span class="op" id="5522546">)</span>&nbsp;<span class="ident" id="5522548">stateFn</span>&nbsp;<span class="op" id="5522556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522559">for</span>&nbsp;<span class="ident" id="5522563">isSpace</span><span class="op" id="5522570">(</span><span class="ident" id="5522571">l</span><span class="op" id="5522572">.</span><span class="ident" id="5522573">peek</span><span class="op" id="5522577">(</span><span class="op" id="5522578">)</span><span class="op" id="5522579">)</span>&nbsp;<span class="op" id="5522581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522585">l</span><span class="op" id="5522586">.</span><span class="ident" id="5522587">next</span><span class="op" id="5522591">(</span><span class="op" id="5522592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522598">l</span><span class="op" id="5522599">.</span><span class="ident" id="5522600">emit</span><span class="op" id="5522604">(</span><span class="ident" id="5522605">itemSpace</span><span class="op" id="5522614">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522617">return</span>&nbsp;<span class="ident" id="5522624">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5522640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5522643">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="5522683">func</span>&nbsp;<span class="ident" id="5522688">lexIdentifier</span><span class="op" id="5522701">(</span><span class="ident" id="5522702">l</span>&nbsp;<span class="op" id="5522704">*</span><span class="ident" id="5522705">lexer</span><span class="op" id="5522710">)</span>&nbsp;<span class="ident" id="5522712">stateFn</span>&nbsp;<span class="op" id="5522720">{</span><br>
<span class="lineno">345</span><span class="ident" id="5522722">Loop</span><span class="op" id="5522726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522729">for</span>&nbsp;<span class="op" id="5522733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522737">switch</span>&nbsp;<span class="ident" id="5522744">r</span>&nbsp;<span class="op" id="5522746">:=</span>&nbsp;<span class="ident" id="5522749">l</span><span class="op" id="5522750">.</span><span class="ident" id="5522751">next</span><span class="op" id="5522755">(</span><span class="op" id="5522756">)</span><span class="op" id="5522757">;</span>&nbsp;<span class="op" id="5522759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522763">case</span>&nbsp;<span class="ident" id="5522768">isAlphaNumeric</span><span class="op" id="5522782">(</span><span class="ident" id="5522783">r</span><span class="op" id="5522784">)</span><span class="op" id="5522785">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5522790">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522803">default</span><span class="op" id="5522810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522815">l</span><span class="op" id="5522816">.</span><span class="ident" id="5522817">backup</span><span class="op" id="5522823">(</span><span class="op" id="5522824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522829">word</span>&nbsp;<span class="op" id="5522834">:=</span>&nbsp;<span class="ident" id="5522837">l</span><span class="op" id="5522838">.</span><span class="ident" id="5522839">input</span><span class="op" id="5522844">[</span><span class="ident" id="5522845">l</span><span class="op" id="5522846">.</span><span class="ident" id="5522847">start</span><span class="op" id="5522852">:</span><span class="ident" id="5522853">l</span><span class="op" id="5522854">.</span><span class="ident" id="5522855">pos</span><span class="op" id="5522858">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522863">if</span>&nbsp;<span class="op" id="5522866">!</span><span class="ident" id="5522867">l</span><span class="op" id="5522868">.</span><span class="ident" id="5522869">atTerminator</span><span class="op" id="5522881">(</span><span class="op" id="5522882">)</span>&nbsp;<span class="op" id="5522884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522890">return</span>&nbsp;<span class="ident" id="5522897">l</span><span class="op" id="5522898">.</span><span class="ident" id="5522899">errorf</span><span class="op" id="5522905">(</span><span class="string" id="5522906">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="5522925">,</span>&nbsp;<span class="ident" id="5522927">r</span><span class="op" id="5522928">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5522933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522938">switch</span>&nbsp;<span class="op" id="5522945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5522950">case</span>&nbsp;<span class="ident" id="5522955">key</span><span class="op" id="5522958">[</span><span class="ident" id="5522959">word</span><span class="op" id="5522963">]</span>&nbsp;<span class="op" id="5522965">&gt;</span>&nbsp;<span class="ident" id="5522967">itemKeyword</span><span class="op" id="5522978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5522984">l</span><span class="op" id="5522985">.</span><span class="ident" id="5522986">emit</span><span class="op" id="5522990">(</span><span class="ident" id="5522991">key</span><span class="op" id="5522994">[</span><span class="ident" id="5522995">word</span><span class="op" id="5522999">]</span><span class="op" id="5523000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523005">case</span>&nbsp;<span class="ident" id="5523010">word</span><span class="op" id="5523014">[</span><span class="num" id="5523015">0</span><span class="op" id="5523016">]</span>&nbsp;<span class="op" id="5523018">==</span>&nbsp;<span class="string" id="5523021">&#39;.&#39;</span><span class="op" id="5523024">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523030">l</span><span class="op" id="5523031">.</span><span class="ident" id="5523032">emit</span><span class="op" id="5523036">(</span><span class="ident" id="5523037">itemField</span><span class="op" id="5523046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523051">case</span>&nbsp;<span class="ident" id="5523056">word</span>&nbsp;<span class="op" id="5523061">==</span>&nbsp;<span class="string" id="5523064">&#34;true&#34;</span><span class="op" id="5523070">,</span>&nbsp;<span class="ident" id="5523072">word</span>&nbsp;<span class="op" id="5523077">==</span>&nbsp;<span class="string" id="5523080">&#34;false&#34;</span><span class="op" id="5523087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523093">l</span><span class="op" id="5523094">.</span><span class="ident" id="5523095">emit</span><span class="op" id="5523099">(</span><span class="ident" id="5523100">itemBool</span><span class="op" id="5523108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523113">default</span><span class="op" id="5523120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523126">l</span><span class="op" id="5523127">.</span><span class="ident" id="5523128">emit</span><span class="op" id="5523132">(</span><span class="ident" id="5523133">itemIdentifier</span><span class="op" id="5523147">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523157">break</span>&nbsp;<span class="ident" id="5523163">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523176">return</span>&nbsp;<span class="ident" id="5523183">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="5523199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5523202">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="5523244">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="5523271">func</span>&nbsp;<span class="ident" id="5523276">lexField</span><span class="op" id="5523284">(</span><span class="ident" id="5523285">l</span>&nbsp;<span class="op" id="5523287">*</span><span class="ident" id="5523288">lexer</span><span class="op" id="5523293">)</span>&nbsp;<span class="ident" id="5523295">stateFn</span>&nbsp;<span class="op" id="5523303">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523306">return</span>&nbsp;<span class="ident" id="5523313">lexFieldOrVariable</span><span class="op" id="5523331">(</span><span class="ident" id="5523332">l</span><span class="op" id="5523333">,</span>&nbsp;<span class="ident" id="5523335">itemField</span><span class="op" id="5523344">)</span><br>
<span class="lineno"></span><span class="op" id="5523346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5523349">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="5523397">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="5523424">func</span>&nbsp;<span class="ident" id="5523429">lexVariable</span><span class="op" id="5523440">(</span><span class="ident" id="5523441">l</span>&nbsp;<span class="op" id="5523443">*</span><span class="ident" id="5523444">lexer</span><span class="op" id="5523449">)</span>&nbsp;<span class="ident" id="5523451">stateFn</span>&nbsp;<span class="op" id="5523459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523462">if</span>&nbsp;<span class="ident" id="5523465">l</span><span class="op" id="5523466">.</span><span class="ident" id="5523467">atTerminator</span><span class="op" id="5523479">(</span><span class="op" id="5523480">)</span>&nbsp;<span class="op" id="5523482">{</span>&nbsp;<span class="comment" id="5523484">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523525">l</span><span class="op" id="5523526">.</span><span class="ident" id="5523527">emit</span><span class="op" id="5523531">(</span><span class="ident" id="5523532">itemVariable</span><span class="op" id="5523544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523548">return</span>&nbsp;<span class="ident" id="5523555">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523572">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523575">return</span>&nbsp;<span class="ident" id="5523582">lexFieldOrVariable</span><span class="op" id="5523600">(</span><span class="ident" id="5523601">l</span><span class="op" id="5523602">,</span>&nbsp;<span class="ident" id="5523604">itemVariable</span><span class="op" id="5523616">)</span><br>
<span class="lineno"></span><span class="op" id="5523618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5523621">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="5523681">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="5523713">func</span>&nbsp;<span class="ident" id="5523718">lexFieldOrVariable</span><span class="op" id="5523736">(</span><span class="ident" id="5523737">l</span>&nbsp;<span class="op" id="5523739">*</span><span class="ident" id="5523740">lexer</span><span class="op" id="5523745">,</span>&nbsp;<span class="ident" id="5523747">typ</span>&nbsp;<span class="ident" id="5523751">itemType</span><span class="op" id="5523759">)</span>&nbsp;<span class="ident" id="5523761">stateFn</span>&nbsp;<span class="op" id="5523769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523772">if</span>&nbsp;<span class="ident" id="5523775">l</span><span class="op" id="5523776">.</span><span class="ident" id="5523777">atTerminator</span><span class="op" id="5523789">(</span><span class="op" id="5523790">)</span>&nbsp;<span class="op" id="5523792">{</span>&nbsp;<span class="comment" id="5523794">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523842">if</span>&nbsp;<span class="ident" id="5523845">typ</span>&nbsp;<span class="op" id="5523849">==</span>&nbsp;<span class="ident" id="5523852">itemVariable</span>&nbsp;<span class="op" id="5523865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523870">l</span><span class="op" id="5523871">.</span><span class="ident" id="5523872">emit</span><span class="op" id="5523876">(</span><span class="ident" id="5523877">itemVariable</span><span class="op" id="5523889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523893">}</span>&nbsp;<span class="keyword" id="5523895">else</span>&nbsp;<span class="op" id="5523900">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523905">l</span><span class="op" id="5523906">.</span><span class="ident" id="5523907">emit</span><span class="op" id="5523911">(</span><span class="ident" id="5523912">itemDot</span><span class="op" id="5523919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523927">return</span>&nbsp;<span class="ident" id="5523934">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5523951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523954">var</span>&nbsp;<span class="ident" id="5523958">r</span>&nbsp;<span class="builtintype" id="5523960">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523966">for</span>&nbsp;<span class="op" id="5523970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523974">r</span>&nbsp;<span class="op" id="5523976">=</span>&nbsp;<span class="ident" id="5523978">l</span><span class="op" id="5523979">.</span><span class="ident" id="5523980">next</span><span class="op" id="5523984">(</span><span class="op" id="5523985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5523989">if</span>&nbsp;<span class="op" id="5523992">!</span><span class="ident" id="5523993">isAlphaNumeric</span><span class="op" id="5524007">(</span><span class="ident" id="5524008">r</span><span class="op" id="5524009">)</span>&nbsp;<span class="op" id="5524011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524016">l</span><span class="op" id="5524017">.</span><span class="ident" id="5524018">backup</span><span class="op" id="5524024">(</span><span class="op" id="5524025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524030">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524044">if</span>&nbsp;<span class="op" id="5524047">!</span><span class="ident" id="5524048">l</span><span class="op" id="5524049">.</span><span class="ident" id="5524050">atTerminator</span><span class="op" id="5524062">(</span><span class="op" id="5524063">)</span>&nbsp;<span class="op" id="5524065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524069">return</span>&nbsp;<span class="ident" id="5524076">l</span><span class="op" id="5524077">.</span><span class="ident" id="5524078">errorf</span><span class="op" id="5524084">(</span><span class="string" id="5524085">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="5524104">,</span>&nbsp;<span class="ident" id="5524106">r</span><span class="op" id="5524107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524110">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524113">l</span><span class="op" id="5524114">.</span><span class="ident" id="5524115">emit</span><span class="op" id="5524119">(</span><span class="ident" id="5524120">typ</span><span class="op" id="5524123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524126">return</span>&nbsp;<span class="ident" id="5524133">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5524149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5524152">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="5524231">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="5524310">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5524385">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="5524417">func</span>&nbsp;<span class="op" id="5524422">(</span><span class="ident" id="5524423">l</span>&nbsp;<span class="op" id="5524425">*</span><span class="ident" id="5524426">lexer</span><span class="op" id="5524431">)</span>&nbsp;<span class="ident" id="5524433">atTerminator</span><span class="op" id="5524445">(</span><span class="op" id="5524446">)</span>&nbsp;<span class="builtintype" id="5524448">bool</span>&nbsp;<span class="op" id="5524453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524456">r</span>&nbsp;<span class="op" id="5524458">:=</span>&nbsp;<span class="ident" id="5524461">l</span><span class="op" id="5524462">.</span><span class="ident" id="5524463">peek</span><span class="op" id="5524467">(</span><span class="op" id="5524468">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524471">if</span>&nbsp;<span class="ident" id="5524474">isSpace</span><span class="op" id="5524481">(</span><span class="ident" id="5524482">r</span><span class="op" id="5524483">)</span>&nbsp;<span class="op" id="5524485">||</span>&nbsp;<span class="ident" id="5524488">isEndOfLine</span><span class="op" id="5524499">(</span><span class="ident" id="5524500">r</span><span class="op" id="5524501">)</span>&nbsp;<span class="op" id="5524503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524507">return</span>&nbsp;<span class="builtintype" id="5524514">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524523">switch</span>&nbsp;<span class="ident" id="5524530">r</span>&nbsp;<span class="op" id="5524532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524535">case</span>&nbsp;<span class="ident" id="5524540">eof</span><span class="op" id="5524543">,</span>&nbsp;<span class="string" id="5524545">&#39;.&#39;</span><span class="op" id="5524548">,</span>&nbsp;<span class="string" id="5524550">&#39;,&#39;</span><span class="op" id="5524553">,</span>&nbsp;<span class="string" id="5524555">&#39;|&#39;</span><span class="op" id="5524558">,</span>&nbsp;<span class="string" id="5524560">&#39;:&#39;</span><span class="op" id="5524563">,</span>&nbsp;<span class="string" id="5524565">&#39;)&#39;</span><span class="op" id="5524568">,</span>&nbsp;<span class="string" id="5524570">&#39;(&#39;</span><span class="op" id="5524573">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524577">return</span>&nbsp;<span class="builtintype" id="5524584">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5524593">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5524676">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5524758">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524787">if</span>&nbsp;<span class="ident" id="5524790">rd</span><span class="op" id="5524792">,</span>&nbsp;<span class="ident" id="5524794">_</span>&nbsp;<span class="op" id="5524796">:=</span>&nbsp;<span class="ident" id="5524799">utf8</span><span class="op" id="5524803">.</span><span class="ident" id="5524804">DecodeRuneInString</span><span class="op" id="5524822">(</span><span class="ident" id="5524823">l</span><span class="op" id="5524824">.</span><span class="ident" id="5524825">rightDelim</span><span class="op" id="5524835">)</span><span class="op" id="5524836">;</span>&nbsp;<span class="ident" id="5524838">rd</span>&nbsp;<span class="op" id="5524841">==</span>&nbsp;<span class="ident" id="5524844">r</span>&nbsp;<span class="op" id="5524846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524850">return</span>&nbsp;<span class="builtintype" id="5524857">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5524863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524866">return</span>&nbsp;<span class="builtintype" id="5524873">false</span><br>
<span class="lineno"></span><span class="op" id="5524879">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="5524882">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="5524950">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="5525001">func</span>&nbsp;<span class="ident" id="5525006">lexChar</span><span class="op" id="5525013">(</span><span class="ident" id="5525014">l</span>&nbsp;<span class="op" id="5525016">*</span><span class="ident" id="5525017">lexer</span><span class="op" id="5525022">)</span>&nbsp;<span class="ident" id="5525024">stateFn</span>&nbsp;<span class="op" id="5525032">{</span><br>
<span class="lineno"></span><span class="ident" id="5525034">Loop</span><span class="op" id="5525038">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525041">for</span>&nbsp;<span class="op" id="5525045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525049">switch</span>&nbsp;<span class="ident" id="5525056">l</span><span class="op" id="5525057">.</span><span class="ident" id="5525058">next</span><span class="op" id="5525062">(</span><span class="op" id="5525063">)</span>&nbsp;<span class="op" id="5525065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525069">case</span>&nbsp;<span class="string" id="5525074">&#39;\\&#39;</span><span class="op" id="5525078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525083">if</span>&nbsp;<span class="ident" id="5525086">r</span>&nbsp;<span class="op" id="5525088">:=</span>&nbsp;<span class="ident" id="5525091">l</span><span class="op" id="5525092">.</span><span class="ident" id="5525093">next</span><span class="op" id="5525097">(</span><span class="op" id="5525098">)</span><span class="op" id="5525099">;</span>&nbsp;<span class="ident" id="5525101">r</span>&nbsp;<span class="op" id="5525103">!=</span>&nbsp;<span class="ident" id="5525106">eof</span>&nbsp;<span class="op" id="5525110">&amp;&amp;</span>&nbsp;<span class="ident" id="5525113">r</span>&nbsp;<span class="op" id="5525115">!=</span>&nbsp;<span class="string" id="5525118">&#39;\n&#39;</span>&nbsp;<span class="op" id="5525123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525129">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525143">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525157">case</span>&nbsp;<span class="ident" id="5525162">eof</span><span class="op" id="5525165">,</span>&nbsp;<span class="string" id="5525167">&#39;\n&#39;</span><span class="op" id="5525171">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525176">return</span>&nbsp;<span class="ident" id="5525183">l</span><span class="op" id="5525184">.</span><span class="ident" id="5525185">errorf</span><span class="op" id="5525191">(</span><span class="string" id="5525192">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="5525225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525229">case</span>&nbsp;<span class="string" id="5525234">&#39;\&#39;&#39;</span><span class="op" id="5525238">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525243">break</span>&nbsp;<span class="ident" id="5525249">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525262">l</span><span class="op" id="5525263">.</span><span class="ident" id="5525264">emit</span><span class="op" id="5525268">(</span><span class="ident" id="5525269">itemCharConstant</span><span class="op" id="5525285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525288">return</span>&nbsp;<span class="ident" id="5525295">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="5525311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5525314">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="5525390">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5525466">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="5525542">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="5525567">func</span>&nbsp;<span class="ident" id="5525572">lexNumber</span><span class="op" id="5525581">(</span><span class="ident" id="5525582">l</span>&nbsp;<span class="op" id="5525584">*</span><span class="ident" id="5525585">lexer</span><span class="op" id="5525590">)</span>&nbsp;<span class="ident" id="5525592">stateFn</span>&nbsp;<span class="op" id="5525600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525603">if</span>&nbsp;<span class="op" id="5525606">!</span><span class="ident" id="5525607">l</span><span class="op" id="5525608">.</span><span class="ident" id="5525609">scanNumber</span><span class="op" id="5525619">(</span><span class="op" id="5525620">)</span>&nbsp;<span class="op" id="5525622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525626">return</span>&nbsp;<span class="ident" id="5525633">l</span><span class="op" id="5525634">.</span><span class="ident" id="5525635">errorf</span><span class="op" id="5525641">(</span><span class="string" id="5525642">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="5525665">,</span>&nbsp;<span class="ident" id="5525667">l</span><span class="op" id="5525668">.</span><span class="ident" id="5525669">input</span><span class="op" id="5525674">[</span><span class="ident" id="5525675">l</span><span class="op" id="5525676">.</span><span class="ident" id="5525677">start</span><span class="op" id="5525682">:</span><span class="ident" id="5525683">l</span><span class="op" id="5525684">.</span><span class="ident" id="5525685">pos</span><span class="op" id="5525688">]</span><span class="op" id="5525689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525692">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525695">if</span>&nbsp;<span class="ident" id="5525698">sign</span>&nbsp;<span class="op" id="5525703">:=</span>&nbsp;<span class="ident" id="5525706">l</span><span class="op" id="5525707">.</span><span class="ident" id="5525708">peek</span><span class="op" id="5525712">(</span><span class="op" id="5525713">)</span><span class="op" id="5525714">;</span>&nbsp;<span class="ident" id="5525716">sign</span>&nbsp;<span class="op" id="5525721">==</span>&nbsp;<span class="string" id="5525724">&#39;+&#39;</span>&nbsp;<span class="op" id="5525728">||</span>&nbsp;<span class="ident" id="5525731">sign</span>&nbsp;<span class="op" id="5525736">==</span>&nbsp;<span class="string" id="5525739">&#39;-&#39;</span>&nbsp;<span class="op" id="5525743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5525747">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525795">if</span>&nbsp;<span class="op" id="5525798">!</span><span class="ident" id="5525799">l</span><span class="op" id="5525800">.</span><span class="ident" id="5525801">scanNumber</span><span class="op" id="5525811">(</span><span class="op" id="5525812">)</span>&nbsp;<span class="op" id="5525814">||</span>&nbsp;<span class="ident" id="5525817">l</span><span class="op" id="5525818">.</span><span class="ident" id="5525819">input</span><span class="op" id="5525824">[</span><span class="ident" id="5525825">l</span><span class="op" id="5525826">.</span><span class="ident" id="5525827">pos</span><span class="op" id="5525830">-</span><span class="num" id="5525831">1</span><span class="op" id="5525832">]</span>&nbsp;<span class="op" id="5525834">!=</span>&nbsp;<span class="string" id="5525837">&#39;i&#39;</span>&nbsp;<span class="op" id="5525841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525846">return</span>&nbsp;<span class="ident" id="5525853">l</span><span class="op" id="5525854">.</span><span class="ident" id="5525855">errorf</span><span class="op" id="5525861">(</span><span class="string" id="5525862">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="5525885">,</span>&nbsp;<span class="ident" id="5525887">l</span><span class="op" id="5525888">.</span><span class="ident" id="5525889">input</span><span class="op" id="5525894">[</span><span class="ident" id="5525895">l</span><span class="op" id="5525896">.</span><span class="ident" id="5525897">start</span><span class="op" id="5525902">:</span><span class="ident" id="5525903">l</span><span class="op" id="5525904">.</span><span class="ident" id="5525905">pos</span><span class="op" id="5525908">]</span><span class="op" id="5525909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525913">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525917">l</span><span class="op" id="5525918">.</span><span class="ident" id="5525919">emit</span><span class="op" id="5525923">(</span><span class="ident" id="5525924">itemComplex</span><span class="op" id="5525935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525938">}</span>&nbsp;<span class="keyword" id="5525940">else</span>&nbsp;<span class="op" id="5525945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525949">l</span><span class="op" id="5525950">.</span><span class="ident" id="5525951">emit</span><span class="op" id="5525955">(</span><span class="ident" id="5525956">itemNumber</span><span class="op" id="5525966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5525969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525972">return</span>&nbsp;<span class="ident" id="5525979">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="5525995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5525998">func</span>&nbsp;<span class="op" id="5526003">(</span><span class="ident" id="5526004">l</span>&nbsp;<span class="op" id="5526006">*</span><span class="ident" id="5526007">lexer</span><span class="op" id="5526012">)</span>&nbsp;<span class="ident" id="5526014">scanNumber</span><span class="op" id="5526024">(</span><span class="op" id="5526025">)</span>&nbsp;<span class="builtintype" id="5526027">bool</span>&nbsp;<span class="op" id="5526032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526035">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526062">l</span><span class="op" id="5526063">.</span><span class="ident" id="5526064">accept</span><span class="op" id="5526070">(</span><span class="string" id="5526071">&#34;+-&#34;</span><span class="op" id="5526075">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526078">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526093">digits</span>&nbsp;<span class="op" id="5526100">:=</span>&nbsp;<span class="string" id="5526103">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526117">if</span>&nbsp;<span class="ident" id="5526120">l</span><span class="op" id="5526121">.</span><span class="ident" id="5526122">accept</span><span class="op" id="5526128">(</span><span class="string" id="5526129">&#34;0&#34;</span><span class="op" id="5526132">)</span>&nbsp;<span class="op" id="5526134">&amp;&amp;</span>&nbsp;<span class="ident" id="5526137">l</span><span class="op" id="5526138">.</span><span class="ident" id="5526139">accept</span><span class="op" id="5526145">(</span><span class="string" id="5526146">&#34;xX&#34;</span><span class="op" id="5526150">)</span>&nbsp;<span class="op" id="5526152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526156">digits</span>&nbsp;<span class="op" id="5526163">=</span>&nbsp;<span class="string" id="5526165">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526191">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526194">l</span><span class="op" id="5526195">.</span><span class="ident" id="5526196">acceptRun</span><span class="op" id="5526205">(</span><span class="ident" id="5526206">digits</span><span class="op" id="5526212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526215">if</span>&nbsp;<span class="ident" id="5526218">l</span><span class="op" id="5526219">.</span><span class="ident" id="5526220">accept</span><span class="op" id="5526226">(</span><span class="string" id="5526227">&#34;.&#34;</span><span class="op" id="5526230">)</span>&nbsp;<span class="op" id="5526232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526236">l</span><span class="op" id="5526237">.</span><span class="ident" id="5526238">acceptRun</span><span class="op" id="5526247">(</span><span class="ident" id="5526248">digits</span><span class="op" id="5526254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526260">if</span>&nbsp;<span class="ident" id="5526263">l</span><span class="op" id="5526264">.</span><span class="ident" id="5526265">accept</span><span class="op" id="5526271">(</span><span class="string" id="5526272">&#34;eE&#34;</span><span class="op" id="5526276">)</span>&nbsp;<span class="op" id="5526278">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526282">l</span><span class="op" id="5526283">.</span><span class="ident" id="5526284">accept</span><span class="op" id="5526290">(</span><span class="string" id="5526291">&#34;+-&#34;</span><span class="op" id="5526295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526299">l</span><span class="op" id="5526300">.</span><span class="ident" id="5526301">acceptRun</span><span class="op" id="5526310">(</span><span class="string" id="5526311">&#34;0123456789&#34;</span><span class="op" id="5526323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526329">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526350">l</span><span class="op" id="5526351">.</span><span class="ident" id="5526352">accept</span><span class="op" id="5526358">(</span><span class="string" id="5526359">&#34;i&#34;</span><span class="op" id="5526362">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526365">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526405">if</span>&nbsp;<span class="ident" id="5526408">isAlphaNumeric</span><span class="op" id="5526422">(</span><span class="ident" id="5526423">l</span><span class="op" id="5526424">.</span><span class="ident" id="5526425">peek</span><span class="op" id="5526429">(</span><span class="op" id="5526430">)</span><span class="op" id="5526431">)</span>&nbsp;<span class="op" id="5526433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526437">l</span><span class="op" id="5526438">.</span><span class="ident" id="5526439">next</span><span class="op" id="5526443">(</span><span class="op" id="5526444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526448">return</span>&nbsp;<span class="builtintype" id="5526455">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526462">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526465">return</span>&nbsp;<span class="builtintype" id="5526472">true</span><br>
<span class="lineno"></span><span class="op" id="5526477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5526480">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5526515">func</span>&nbsp;<span class="ident" id="5526520">lexQuote</span><span class="op" id="5526528">(</span><span class="ident" id="5526529">l</span>&nbsp;<span class="op" id="5526531">*</span><span class="ident" id="5526532">lexer</span><span class="op" id="5526537">)</span>&nbsp;<span class="ident" id="5526539">stateFn</span>&nbsp;<span class="op" id="5526547">{</span><br>
<span class="lineno">505</span><span class="ident" id="5526549">Loop</span><span class="op" id="5526553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526556">for</span>&nbsp;<span class="op" id="5526560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526564">switch</span>&nbsp;<span class="ident" id="5526571">l</span><span class="op" id="5526572">.</span><span class="ident" id="5526573">next</span><span class="op" id="5526577">(</span><span class="op" id="5526578">)</span>&nbsp;<span class="op" id="5526580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526584">case</span>&nbsp;<span class="string" id="5526589">&#39;\\&#39;</span><span class="op" id="5526593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526598">if</span>&nbsp;<span class="ident" id="5526601">r</span>&nbsp;<span class="op" id="5526603">:=</span>&nbsp;<span class="ident" id="5526606">l</span><span class="op" id="5526607">.</span><span class="ident" id="5526608">next</span><span class="op" id="5526612">(</span><span class="op" id="5526613">)</span><span class="op" id="5526614">;</span>&nbsp;<span class="ident" id="5526616">r</span>&nbsp;<span class="op" id="5526618">!=</span>&nbsp;<span class="ident" id="5526621">eof</span>&nbsp;<span class="op" id="5526625">&amp;&amp;</span>&nbsp;<span class="ident" id="5526628">r</span>&nbsp;<span class="op" id="5526630">!=</span>&nbsp;<span class="string" id="5526633">&#39;\n&#39;</span>&nbsp;<span class="op" id="5526638">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526644">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526658">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526672">case</span>&nbsp;<span class="ident" id="5526677">eof</span><span class="op" id="5526680">,</span>&nbsp;<span class="string" id="5526682">&#39;\n&#39;</span><span class="op" id="5526686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526691">return</span>&nbsp;<span class="ident" id="5526698">l</span><span class="op" id="5526699">.</span><span class="ident" id="5526700">errorf</span><span class="op" id="5526706">(</span><span class="string" id="5526707">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="5526735">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526739">case</span>&nbsp;<span class="string" id="5526744">&#39;&#34;&#39;</span><span class="op" id="5526747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526752">break</span>&nbsp;<span class="ident" id="5526758">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5526768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526771">l</span><span class="op" id="5526772">.</span><span class="ident" id="5526773">emit</span><span class="op" id="5526777">(</span><span class="ident" id="5526778">itemString</span><span class="op" id="5526788">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526791">return</span>&nbsp;<span class="ident" id="5526798">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5526814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5526817">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5526859">func</span>&nbsp;<span class="ident" id="5526864">lexRawQuote</span><span class="op" id="5526875">(</span><span class="ident" id="5526876">l</span>&nbsp;<span class="op" id="5526878">*</span><span class="ident" id="5526879">lexer</span><span class="op" id="5526884">)</span>&nbsp;<span class="ident" id="5526886">stateFn</span>&nbsp;<span class="op" id="5526894">{</span><br>
<span class="lineno">525</span><span class="ident" id="5526896">Loop</span><span class="op" id="5526900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526903">for</span>&nbsp;<span class="op" id="5526907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526911">switch</span>&nbsp;<span class="ident" id="5526918">l</span><span class="op" id="5526919">.</span><span class="ident" id="5526920">next</span><span class="op" id="5526924">(</span><span class="op" id="5526925">)</span>&nbsp;<span class="op" id="5526927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526931">case</span>&nbsp;<span class="ident" id="5526936">eof</span><span class="op" id="5526939">,</span>&nbsp;<span class="string" id="5526941">&#39;\n&#39;</span><span class="op" id="5526945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526950">return</span>&nbsp;<span class="ident" id="5526957">l</span><span class="op" id="5526958">.</span><span class="ident" id="5526959">errorf</span><span class="op" id="5526965">(</span><span class="string" id="5526966">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="5526998">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527002">case</span>&nbsp;<span class="string" id="5527007">&#39;`&#39;</span><span class="op" id="5527010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527015">break</span>&nbsp;<span class="ident" id="5527021">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527034">l</span><span class="op" id="5527035">.</span><span class="ident" id="5527036">emit</span><span class="op" id="5527040">(</span><span class="ident" id="5527041">itemRawString</span><span class="op" id="5527054">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527057">return</span>&nbsp;<span class="ident" id="5527064">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="5527080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5527083">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="5527134">func</span>&nbsp;<span class="ident" id="5527139">isSpace</span><span class="op" id="5527146">(</span><span class="ident" id="5527147">r</span>&nbsp;<span class="builtintype" id="5527149">rune</span><span class="op" id="5527153">)</span>&nbsp;<span class="builtintype" id="5527155">bool</span>&nbsp;<span class="op" id="5527160">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527163">return</span>&nbsp;<span class="ident" id="5527170">r</span>&nbsp;<span class="op" id="5527172">==</span>&nbsp;<span class="string" id="5527175">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5527179">||</span>&nbsp;<span class="ident" id="5527182">r</span>&nbsp;<span class="op" id="5527184">==</span>&nbsp;<span class="string" id="5527187">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="5527192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5527195">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="5527257">func</span>&nbsp;<span class="ident" id="5527262">isEndOfLine</span><span class="op" id="5527273">(</span><span class="ident" id="5527274">r</span>&nbsp;<span class="builtintype" id="5527276">rune</span><span class="op" id="5527280">)</span>&nbsp;<span class="builtintype" id="5527282">bool</span>&nbsp;<span class="op" id="5527287">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527290">return</span>&nbsp;<span class="ident" id="5527297">r</span>&nbsp;<span class="op" id="5527299">==</span>&nbsp;<span class="string" id="5527302">&#39;\r&#39;</span>&nbsp;<span class="op" id="5527307">||</span>&nbsp;<span class="ident" id="5527310">r</span>&nbsp;<span class="op" id="5527312">==</span>&nbsp;<span class="string" id="5527315">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="5527320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5527323">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="5527399">func</span>&nbsp;<span class="ident" id="5527404">isAlphaNumeric</span><span class="op" id="5527418">(</span><span class="ident" id="5527419">r</span>&nbsp;<span class="builtintype" id="5527421">rune</span><span class="op" id="5527425">)</span>&nbsp;<span class="builtintype" id="5527427">bool</span>&nbsp;<span class="op" id="5527432">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527435">return</span>&nbsp;<span class="ident" id="5527442">r</span>&nbsp;<span class="op" id="5527444">==</span>&nbsp;<span class="string" id="5527447">&#39;_&#39;</span>&nbsp;<span class="op" id="5527451">||</span>&nbsp;<span class="ident" id="5527454">unicode</span><span class="op" id="5527461">.</span><span class="ident" id="5527462">IsLetter</span><span class="op" id="5527470">(</span><span class="ident" id="5527471">r</span><span class="op" id="5527472">)</span>&nbsp;<span class="op" id="5527474">||</span>&nbsp;<span class="ident" id="5527477">unicode</span><span class="op" id="5527484">.</span><span class="ident" id="5527485">IsDigit</span><span class="op" id="5527492">(</span><span class="ident" id="5527493">r</span><span class="op" id="5527494">)</span><br>
<span class="lineno"></span><span class="op" id="5527496">}</span>
</div>
</body>
</html>
