<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6222798">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6222853">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6222907">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6222958">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223004">package</span>&nbsp;<span class="ident" id="6223012">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6223017">import</span>&nbsp;<span class="op" id="6223024">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223027">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223037">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223049">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223057">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223067">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223075">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223086">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223097">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6223108">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6223123">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="6223126">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6223196">type</span>&nbsp;<span class="ident" id="6223201">Example</span>&nbsp;<span class="keyword" id="6223209">struct</span>&nbsp;<span class="op" id="6223216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223219">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6223231">string</span>&nbsp;<span class="comment" id="6223238">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223277">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6223289">string</span>&nbsp;<span class="comment" id="6223296">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223328">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6223340">ast</span><span class="op" id="6223343">.</span><span class="ident" id="6223344">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223350">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6223362">*</span><span class="ident" id="6223363">ast</span><span class="op" id="6223366">.</span><span class="ident" id="6223367">File</span>&nbsp;<span class="comment" id="6223372">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223415">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6223427">[</span><span class="op" id="6223428">]</span><span class="op" id="6223429">*</span><span class="ident" id="6223430">ast</span><span class="op" id="6223433">.</span><span class="ident" id="6223434">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223448">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6223460">string</span>&nbsp;<span class="comment" id="6223467">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223487">EmptyOutput</span>&nbsp;<span class="builtintype" id="6223499">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6223506">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223530">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6223542">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6223549">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="6223579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6223582">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6223657">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="6223734">//</span><br>
<span class="lineno"></span><span class="comment" id="6223737">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6223807">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6223882">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="6223900">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="6223976">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="6224052">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="6224115">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6224189">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6224265">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="6224338">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6224372">func</span>&nbsp;<span class="ident" id="6224377">Examples</span><span class="op" id="6224385">(</span><span class="ident" id="6224386">files</span>&nbsp;<span class="op" id="6224392">...</span><span class="op" id="6224395">*</span><span class="ident" id="6224396">ast</span><span class="op" id="6224399">.</span><span class="ident" id="6224400">File</span><span class="op" id="6224404">)</span>&nbsp;<span class="op" id="6224406">[</span><span class="op" id="6224407">]</span><span class="op" id="6224408">*</span><span class="ident" id="6224409">Example</span>&nbsp;<span class="op" id="6224417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224420">var</span>&nbsp;<span class="ident" id="6224424">list</span>&nbsp;<span class="op" id="6224429">[</span><span class="op" id="6224430">]</span><span class="op" id="6224431">*</span><span class="ident" id="6224432">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224441">for</span>&nbsp;<span class="ident" id="6224445">_</span><span class="op" id="6224446">,</span>&nbsp;<span class="ident" id="6224448">file</span>&nbsp;<span class="op" id="6224453">:=</span>&nbsp;<span class="keyword" id="6224456">range</span>&nbsp;<span class="ident" id="6224462">files</span>&nbsp;<span class="op" id="6224468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224472">hasTests</span>&nbsp;<span class="op" id="6224481">:=</span>&nbsp;<span class="ident" id="6224484">false</span>&nbsp;<span class="comment" id="6224490">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224529">numDecl</span>&nbsp;<span class="op" id="6224537">:=</span>&nbsp;<span class="num" id="6224540">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6224547">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224598">var</span>&nbsp;<span class="ident" id="6224602">flist</span>&nbsp;<span class="op" id="6224608">[</span><span class="op" id="6224609">]</span><span class="op" id="6224610">*</span><span class="ident" id="6224611">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224621">for</span>&nbsp;<span class="ident" id="6224625">_</span><span class="op" id="6224626">,</span>&nbsp;<span class="ident" id="6224628">decl</span>&nbsp;<span class="op" id="6224633">:=</span>&nbsp;<span class="keyword" id="6224636">range</span>&nbsp;<span class="ident" id="6224642">file</span><span class="op" id="6224646">.</span><span class="ident" id="6224647">Decls</span>&nbsp;<span class="op" id="6224653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224658">if</span>&nbsp;<span class="ident" id="6224661">g</span><span class="op" id="6224662">,</span>&nbsp;<span class="ident" id="6224664">ok</span>&nbsp;<span class="op" id="6224667">:=</span>&nbsp;<span class="ident" id="6224670">decl</span><span class="op" id="6224674">.</span><span class="op" id="6224675">(</span><span class="op" id="6224676">*</span><span class="ident" id="6224677">ast</span><span class="op" id="6224680">.</span><span class="ident" id="6224681">GenDecl</span><span class="op" id="6224688">)</span><span class="op" id="6224689">;</span>&nbsp;<span class="ident" id="6224691">ok</span>&nbsp;<span class="op" id="6224694">&amp;&amp;</span>&nbsp;<span class="ident" id="6224697">g</span><span class="op" id="6224698">.</span><span class="ident" id="6224699">Tok</span>&nbsp;<span class="op" id="6224703">!=</span>&nbsp;<span class="ident" id="6224706">token</span><span class="op" id="6224711">.</span><span class="ident" id="6224712">IMPORT</span>&nbsp;<span class="op" id="6224719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224725">numDecl</span><span class="op" id="6224732">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224739">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224756">f</span><span class="op" id="6224757">,</span>&nbsp;<span class="ident" id="6224759">ok</span>&nbsp;<span class="op" id="6224762">:=</span>&nbsp;<span class="ident" id="6224765">decl</span><span class="op" id="6224769">.</span><span class="op" id="6224770">(</span><span class="op" id="6224771">*</span><span class="ident" id="6224772">ast</span><span class="op" id="6224775">.</span><span class="ident" id="6224776">FuncDecl</span><span class="op" id="6224784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224789">if</span>&nbsp;<span class="op" id="6224792">!</span><span class="ident" id="6224793">ok</span>&nbsp;<span class="op" id="6224796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224802">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224819">numDecl</span><span class="op" id="6224826">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224832">name</span>&nbsp;<span class="op" id="6224837">:=</span>&nbsp;<span class="ident" id="6224840">f</span><span class="op" id="6224841">.</span><span class="ident" id="6224842">Name</span><span class="op" id="6224846">.</span><span class="ident" id="6224847">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224855">if</span>&nbsp;<span class="ident" id="6224858">isTest</span><span class="op" id="6224864">(</span><span class="ident" id="6224865">name</span><span class="op" id="6224869">,</span>&nbsp;<span class="string" id="6224871">&#34;Test&#34;</span><span class="op" id="6224877">)</span>&nbsp;<span class="op" id="6224879">||</span>&nbsp;<span class="ident" id="6224882">isTest</span><span class="op" id="6224888">(</span><span class="ident" id="6224889">name</span><span class="op" id="6224893">,</span>&nbsp;<span class="string" id="6224895">&#34;Benchmark&#34;</span><span class="op" id="6224906">)</span>&nbsp;<span class="op" id="6224908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224914">hasTests</span>&nbsp;<span class="op" id="6224923">=</span>&nbsp;<span class="ident" id="6224925">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224934">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224951">if</span>&nbsp;<span class="op" id="6224954">!</span><span class="ident" id="6224955">isTest</span><span class="op" id="6224961">(</span><span class="ident" id="6224962">name</span><span class="op" id="6224966">,</span>&nbsp;<span class="string" id="6224968">&#34;Example&#34;</span><span class="op" id="6224977">)</span>&nbsp;<span class="op" id="6224979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224985">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224997">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225002">var</span>&nbsp;<span class="ident" id="6225006">doc</span>&nbsp;<span class="builtintype" id="6225010">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225020">if</span>&nbsp;<span class="ident" id="6225023">f</span><span class="op" id="6225024">.</span><span class="ident" id="6225025">Doc</span>&nbsp;<span class="op" id="6225029">!=</span>&nbsp;<span class="ident" id="6225032">nil</span>&nbsp;<span class="op" id="6225036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225042">doc</span>&nbsp;<span class="op" id="6225046">=</span>&nbsp;<span class="ident" id="6225048">f</span><span class="op" id="6225049">.</span><span class="ident" id="6225050">Doc</span><span class="op" id="6225053">.</span><span class="ident" id="6225054">Text</span><span class="op" id="6225058">(</span><span class="op" id="6225059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225069">output</span><span class="op" id="6225075">,</span>&nbsp;<span class="ident" id="6225077">hasOutput</span>&nbsp;<span class="op" id="6225087">:=</span>&nbsp;<span class="ident" id="6225090">exampleOutput</span><span class="op" id="6225103">(</span><span class="ident" id="6225104">f</span><span class="op" id="6225105">.</span><span class="ident" id="6225106">Body</span><span class="op" id="6225110">,</span>&nbsp;<span class="ident" id="6225112">file</span><span class="op" id="6225116">.</span><span class="ident" id="6225117">Comments</span><span class="op" id="6225125">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225130">flist</span>&nbsp;<span class="op" id="6225136">=</span>&nbsp;<span class="builtinfunc" id="6225138">append</span><span class="op" id="6225144">(</span><span class="ident" id="6225145">flist</span><span class="op" id="6225150">,</span>&nbsp;<span class="op" id="6225152">&amp;</span><span class="ident" id="6225153">Example</span><span class="op" id="6225160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225166">Name</span><span class="op" id="6225170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225179">name</span><span class="op" id="6225183">[</span><span class="builtinfunc" id="6225184">len</span><span class="op" id="6225187">(</span><span class="string" id="6225188">&#34;Example&#34;</span><span class="op" id="6225197">)</span><span class="op" id="6225198">:</span><span class="op" id="6225199">]</span><span class="op" id="6225200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225206">Doc</span><span class="op" id="6225209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225219">doc</span><span class="op" id="6225222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225228">Code</span><span class="op" id="6225232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225241">f</span><span class="op" id="6225242">.</span><span class="ident" id="6225243">Body</span><span class="op" id="6225247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225253">Play</span><span class="op" id="6225257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225266">playExample</span><span class="op" id="6225277">(</span><span class="ident" id="6225278">file</span><span class="op" id="6225282">,</span>&nbsp;<span class="ident" id="6225284">f</span><span class="op" id="6225285">.</span><span class="ident" id="6225286">Body</span><span class="op" id="6225290">)</span><span class="op" id="6225291">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225297">Comments</span><span class="op" id="6225305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225310">file</span><span class="op" id="6225314">.</span><span class="ident" id="6225315">Comments</span><span class="op" id="6225323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225329">Output</span><span class="op" id="6225335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6225342">output</span><span class="op" id="6225348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225354">EmptyOutput</span><span class="op" id="6225365">:</span>&nbsp;<span class="ident" id="6225367">output</span>&nbsp;<span class="op" id="6225374">==</span>&nbsp;<span class="string" id="6225377">&#34;&#34;</span>&nbsp;<span class="op" id="6225380">&amp;&amp;</span>&nbsp;<span class="ident" id="6225383">hasOutput</span><span class="op" id="6225392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225398">Order</span><span class="op" id="6225403">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6225411">len</span><span class="op" id="6225414">(</span><span class="ident" id="6225415">flist</span><span class="op" id="6225420">)</span><span class="op" id="6225421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225426">}</span><span class="op" id="6225427">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225435">if</span>&nbsp;<span class="op" id="6225438">!</span><span class="ident" id="6225439">hasTests</span>&nbsp;<span class="op" id="6225448">&amp;&amp;</span>&nbsp;<span class="ident" id="6225451">numDecl</span>&nbsp;<span class="op" id="6225459">&gt;</span>&nbsp;<span class="num" id="6225461">1</span>&nbsp;<span class="op" id="6225463">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6225466">len</span><span class="op" id="6225469">(</span><span class="ident" id="6225470">flist</span><span class="op" id="6225475">)</span>&nbsp;<span class="op" id="6225477">==</span>&nbsp;<span class="num" id="6225480">1</span>&nbsp;<span class="op" id="6225482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6225487">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6225542">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6225594">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225647">flist</span><span class="op" id="6225652">[</span><span class="num" id="6225653">0</span><span class="op" id="6225654">]</span><span class="op" id="6225655">.</span><span class="ident" id="6225656">Code</span>&nbsp;<span class="op" id="6225661">=</span>&nbsp;<span class="ident" id="6225663">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225671">flist</span><span class="op" id="6225676">[</span><span class="num" id="6225677">0</span><span class="op" id="6225678">]</span><span class="op" id="6225679">.</span><span class="ident" id="6225680">Play</span>&nbsp;<span class="op" id="6225685">=</span>&nbsp;<span class="ident" id="6225687">playExampleFile</span><span class="op" id="6225702">(</span><span class="ident" id="6225703">file</span><span class="op" id="6225707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225715">list</span>&nbsp;<span class="op" id="6225720">=</span>&nbsp;<span class="builtinfunc" id="6225722">append</span><span class="op" id="6225728">(</span><span class="ident" id="6225729">list</span><span class="op" id="6225733">,</span>&nbsp;<span class="ident" id="6225735">flist</span><span class="op" id="6225740">...</span><span class="op" id="6225743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225746">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225749">sort</span><span class="op" id="6225753">.</span><span class="ident" id="6225754">Sort</span><span class="op" id="6225758">(</span><span class="ident" id="6225759">exampleByName</span><span class="op" id="6225772">(</span><span class="ident" id="6225773">list</span><span class="op" id="6225777">)</span><span class="op" id="6225778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225781">return</span>&nbsp;<span class="ident" id="6225788">list</span><br>
<span class="lineno"></span><span class="op" id="6225793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6225796">var</span>&nbsp;<span class="ident" id="6225800">outputPrefix</span>&nbsp;<span class="op" id="6225813">=</span>&nbsp;<span class="ident" id="6225815">regexp</span><span class="op" id="6225821">.</span><span class="ident" id="6225822">MustCompile</span><span class="op" id="6225833">(</span><span class="string" id="6225834">`(?i)^[[:space:]]*output:`</span><span class="op" id="6225860">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="6225863">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="6225940">func</span>&nbsp;<span class="ident" id="6225945">exampleOutput</span><span class="op" id="6225958">(</span><span class="ident" id="6225959">b</span>&nbsp;<span class="op" id="6225961">*</span><span class="ident" id="6225962">ast</span><span class="op" id="6225965">.</span><span class="ident" id="6225966">BlockStmt</span><span class="op" id="6225975">,</span>&nbsp;<span class="ident" id="6225977">comments</span>&nbsp;<span class="op" id="6225986">[</span><span class="op" id="6225987">]</span><span class="op" id="6225988">*</span><span class="ident" id="6225989">ast</span><span class="op" id="6225992">.</span><span class="ident" id="6225993">CommentGroup</span><span class="op" id="6226005">)</span>&nbsp;<span class="op" id="6226007">(</span><span class="ident" id="6226008">output</span>&nbsp;<span class="builtintype" id="6226015">string</span><span class="op" id="6226021">,</span>&nbsp;<span class="ident" id="6226023">ok</span>&nbsp;<span class="builtintype" id="6226026">bool</span><span class="op" id="6226030">)</span>&nbsp;<span class="op" id="6226032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226035">if</span>&nbsp;<span class="ident" id="6226038">_</span><span class="op" id="6226039">,</span>&nbsp;<span class="ident" id="6226041">last</span>&nbsp;<span class="op" id="6226046">:=</span>&nbsp;<span class="ident" id="6226049">lastComment</span><span class="op" id="6226060">(</span><span class="ident" id="6226061">b</span><span class="op" id="6226062">,</span>&nbsp;<span class="ident" id="6226064">comments</span><span class="op" id="6226072">)</span><span class="op" id="6226073">;</span>&nbsp;<span class="ident" id="6226075">last</span>&nbsp;<span class="op" id="6226080">!=</span>&nbsp;<span class="ident" id="6226083">nil</span>&nbsp;<span class="op" id="6226087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6226091">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226140">text</span>&nbsp;<span class="op" id="6226145">:=</span>&nbsp;<span class="ident" id="6226148">last</span><span class="op" id="6226152">.</span><span class="ident" id="6226153">Text</span><span class="op" id="6226157">(</span><span class="op" id="6226158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226162">if</span>&nbsp;<span class="ident" id="6226165">loc</span>&nbsp;<span class="op" id="6226169">:=</span>&nbsp;<span class="ident" id="6226172">outputPrefix</span><span class="op" id="6226184">.</span><span class="ident" id="6226185">FindStringIndex</span><span class="op" id="6226200">(</span><span class="ident" id="6226201">text</span><span class="op" id="6226205">)</span><span class="op" id="6226206">;</span>&nbsp;<span class="ident" id="6226208">loc</span>&nbsp;<span class="op" id="6226212">!=</span>&nbsp;<span class="ident" id="6226215">nil</span>&nbsp;<span class="op" id="6226219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226224">text</span>&nbsp;<span class="op" id="6226229">=</span>&nbsp;<span class="ident" id="6226231">text</span><span class="op" id="6226235">[</span><span class="ident" id="6226236">loc</span><span class="op" id="6226239">[</span><span class="num" id="6226240">1</span><span class="op" id="6226241">]</span><span class="op" id="6226242">:</span><span class="op" id="6226243">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6226248">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226314">text</span>&nbsp;<span class="op" id="6226319">=</span>&nbsp;<span class="ident" id="6226321">strings</span><span class="op" id="6226328">.</span><span class="ident" id="6226329">TrimLeft</span><span class="op" id="6226337">(</span><span class="ident" id="6226338">text</span><span class="op" id="6226342">,</span>&nbsp;<span class="string" id="6226344">&#34;&nbsp;&#34;</span><span class="op" id="6226347">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226352">if</span>&nbsp;<span class="builtinfunc" id="6226355">len</span><span class="op" id="6226358">(</span><span class="ident" id="6226359">text</span><span class="op" id="6226363">)</span>&nbsp;<span class="op" id="6226365">&gt;</span>&nbsp;<span class="num" id="6226367">0</span>&nbsp;<span class="op" id="6226369">&amp;&amp;</span>&nbsp;<span class="ident" id="6226372">text</span><span class="op" id="6226376">[</span><span class="num" id="6226377">0</span><span class="op" id="6226378">]</span>&nbsp;<span class="op" id="6226380">==</span>&nbsp;<span class="string" id="6226383">&#39;\n&#39;</span>&nbsp;<span class="op" id="6226388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226394">text</span>&nbsp;<span class="op" id="6226399">=</span>&nbsp;<span class="ident" id="6226401">text</span><span class="op" id="6226405">[</span><span class="num" id="6226406">1</span><span class="op" id="6226407">:</span><span class="op" id="6226408">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226418">return</span>&nbsp;<span class="ident" id="6226425">text</span><span class="op" id="6226429">,</span>&nbsp;<span class="ident" id="6226431">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226438">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226444">return</span>&nbsp;<span class="string" id="6226451">&#34;&#34;</span><span class="op" id="6226453">,</span>&nbsp;<span class="ident" id="6226455">false</span>&nbsp;<span class="comment" id="6226461">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="6226490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6226493">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="6226564">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6226635">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="6226684">func</span>&nbsp;<span class="ident" id="6226689">isTest</span><span class="op" id="6226695">(</span><span class="ident" id="6226696">name</span><span class="op" id="6226700">,</span>&nbsp;<span class="ident" id="6226702">prefix</span>&nbsp;<span class="builtintype" id="6226709">string</span><span class="op" id="6226715">)</span>&nbsp;<span class="builtintype" id="6226717">bool</span>&nbsp;<span class="op" id="6226722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226725">if</span>&nbsp;<span class="op" id="6226728">!</span><span class="ident" id="6226729">strings</span><span class="op" id="6226736">.</span><span class="ident" id="6226737">HasPrefix</span><span class="op" id="6226746">(</span><span class="ident" id="6226747">name</span><span class="op" id="6226751">,</span>&nbsp;<span class="ident" id="6226753">prefix</span><span class="op" id="6226759">)</span>&nbsp;<span class="op" id="6226761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226765">return</span>&nbsp;<span class="ident" id="6226772">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226782">if</span>&nbsp;<span class="builtinfunc" id="6226785">len</span><span class="op" id="6226788">(</span><span class="ident" id="6226789">name</span><span class="op" id="6226793">)</span>&nbsp;<span class="op" id="6226795">==</span>&nbsp;<span class="builtinfunc" id="6226798">len</span><span class="op" id="6226801">(</span><span class="ident" id="6226802">prefix</span><span class="op" id="6226808">)</span>&nbsp;<span class="op" id="6226810">{</span>&nbsp;<span class="comment" id="6226812">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226830">return</span>&nbsp;<span class="ident" id="6226837">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6226846">rune</span><span class="op" id="6226850">,</span>&nbsp;<span class="ident" id="6226852">_</span>&nbsp;<span class="op" id="6226854">:=</span>&nbsp;<span class="ident" id="6226857">utf8</span><span class="op" id="6226861">.</span><span class="ident" id="6226862">DecodeRuneInString</span><span class="op" id="6226880">(</span><span class="ident" id="6226881">name</span><span class="op" id="6226885">[</span><span class="builtinfunc" id="6226886">len</span><span class="op" id="6226889">(</span><span class="ident" id="6226890">prefix</span><span class="op" id="6226896">)</span><span class="op" id="6226897">:</span><span class="op" id="6226898">]</span><span class="op" id="6226899">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226902">return</span>&nbsp;<span class="op" id="6226909">!</span><span class="ident" id="6226910">unicode</span><span class="op" id="6226917">.</span><span class="ident" id="6226918">IsLower</span><span class="op" id="6226925">(</span><span class="builtintype" id="6226926">rune</span><span class="op" id="6226930">)</span><br>
<span class="lineno"></span><span class="op" id="6226932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6226935">type</span>&nbsp;<span class="ident" id="6226940">exampleByName</span>&nbsp;<span class="op" id="6226954">[</span><span class="op" id="6226955">]</span><span class="op" id="6226956">*</span><span class="ident" id="6226957">Example</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6226966">func</span>&nbsp;<span class="op" id="6226971">(</span><span class="ident" id="6226972">s</span>&nbsp;<span class="ident" id="6226974">exampleByName</span><span class="op" id="6226987">)</span>&nbsp;<span class="ident" id="6226989">Len</span><span class="op" id="6226992">(</span><span class="op" id="6226993">)</span>&nbsp;<span class="builtintype" id="6226995">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6227009">{</span>&nbsp;<span class="keyword" id="6227011">return</span>&nbsp;<span class="builtinfunc" id="6227018">len</span><span class="op" id="6227021">(</span><span class="ident" id="6227022">s</span><span class="op" id="6227023">)</span>&nbsp;<span class="op" id="6227025">}</span><br>
<span class="lineno"></span><span class="keyword" id="6227027">func</span>&nbsp;<span class="op" id="6227032">(</span><span class="ident" id="6227033">s</span>&nbsp;<span class="ident" id="6227035">exampleByName</span><span class="op" id="6227048">)</span>&nbsp;<span class="ident" id="6227050">Swap</span><span class="op" id="6227054">(</span><span class="ident" id="6227055">i</span><span class="op" id="6227056">,</span>&nbsp;<span class="ident" id="6227058">j</span>&nbsp;<span class="builtintype" id="6227060">int</span><span class="op" id="6227063">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6227070">{</span>&nbsp;<span class="ident" id="6227072">s</span><span class="op" id="6227073">[</span><span class="ident" id="6227074">i</span><span class="op" id="6227075">]</span><span class="op" id="6227076">,</span>&nbsp;<span class="ident" id="6227078">s</span><span class="op" id="6227079">[</span><span class="ident" id="6227080">j</span><span class="op" id="6227081">]</span>&nbsp;<span class="op" id="6227083">=</span>&nbsp;<span class="ident" id="6227085">s</span><span class="op" id="6227086">[</span><span class="ident" id="6227087">j</span><span class="op" id="6227088">]</span><span class="op" id="6227089">,</span>&nbsp;<span class="ident" id="6227091">s</span><span class="op" id="6227092">[</span><span class="ident" id="6227093">i</span><span class="op" id="6227094">]</span>&nbsp;<span class="op" id="6227096">}</span><br>
<span class="lineno"></span><span class="keyword" id="6227098">func</span>&nbsp;<span class="op" id="6227103">(</span><span class="ident" id="6227104">s</span>&nbsp;<span class="ident" id="6227106">exampleByName</span><span class="op" id="6227119">)</span>&nbsp;<span class="ident" id="6227121">Less</span><span class="op" id="6227125">(</span><span class="ident" id="6227126">i</span><span class="op" id="6227127">,</span>&nbsp;<span class="ident" id="6227129">j</span>&nbsp;<span class="builtintype" id="6227131">int</span><span class="op" id="6227134">)</span>&nbsp;<span class="builtintype" id="6227136">bool</span>&nbsp;<span class="op" id="6227141">{</span>&nbsp;<span class="keyword" id="6227143">return</span>&nbsp;<span class="ident" id="6227150">s</span><span class="op" id="6227151">[</span><span class="ident" id="6227152">i</span><span class="op" id="6227153">]</span><span class="op" id="6227154">.</span><span class="ident" id="6227155">Name</span>&nbsp;<span class="op" id="6227160">&lt;</span>&nbsp;<span class="ident" id="6227162">s</span><span class="op" id="6227163">[</span><span class="ident" id="6227164">j</span><span class="op" id="6227165">]</span><span class="op" id="6227166">.</span><span class="ident" id="6227167">Name</span>&nbsp;<span class="op" id="6227172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6227175">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="6227240">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="6227301">func</span>&nbsp;<span class="ident" id="6227306">playExample</span><span class="op" id="6227317">(</span><span class="ident" id="6227318">file</span>&nbsp;<span class="op" id="6227323">*</span><span class="ident" id="6227324">ast</span><span class="op" id="6227327">.</span><span class="ident" id="6227328">File</span><span class="op" id="6227332">,</span>&nbsp;<span class="ident" id="6227334">body</span>&nbsp;<span class="op" id="6227339">*</span><span class="ident" id="6227340">ast</span><span class="op" id="6227343">.</span><span class="ident" id="6227344">BlockStmt</span><span class="op" id="6227353">)</span>&nbsp;<span class="op" id="6227355">*</span><span class="ident" id="6227356">ast</span><span class="op" id="6227359">.</span><span class="ident" id="6227360">File</span>&nbsp;<span class="op" id="6227365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227368">if</span>&nbsp;<span class="op" id="6227371">!</span><span class="ident" id="6227372">strings</span><span class="op" id="6227379">.</span><span class="ident" id="6227380">HasSuffix</span><span class="op" id="6227389">(</span><span class="ident" id="6227390">file</span><span class="op" id="6227394">.</span><span class="ident" id="6227395">Name</span><span class="op" id="6227399">.</span><span class="ident" id="6227400">Name</span><span class="op" id="6227404">,</span>&nbsp;<span class="string" id="6227406">&#34;_test&#34;</span><span class="op" id="6227413">)</span>&nbsp;<span class="op" id="6227415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227419">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227471">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227499">return</span>&nbsp;<span class="ident" id="6227506">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227515">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227560">topDecls</span>&nbsp;<span class="op" id="6227569">:=</span>&nbsp;<span class="builtinfunc" id="6227572">make</span><span class="op" id="6227576">(</span><span class="keyword" id="6227577">map</span><span class="op" id="6227580">[</span><span class="op" id="6227581">*</span><span class="ident" id="6227582">ast</span><span class="op" id="6227585">.</span><span class="ident" id="6227586">Object</span><span class="op" id="6227592">]</span><span class="builtintype" id="6227593">bool</span><span class="op" id="6227597">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227600">for</span>&nbsp;<span class="ident" id="6227604">_</span><span class="op" id="6227605">,</span>&nbsp;<span class="ident" id="6227607">decl</span>&nbsp;<span class="op" id="6227612">:=</span>&nbsp;<span class="keyword" id="6227615">range</span>&nbsp;<span class="ident" id="6227621">file</span><span class="op" id="6227625">.</span><span class="ident" id="6227626">Decls</span>&nbsp;<span class="op" id="6227632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227636">switch</span>&nbsp;<span class="ident" id="6227643">d</span>&nbsp;<span class="op" id="6227645">:=</span>&nbsp;<span class="ident" id="6227648">decl</span><span class="op" id="6227652">.</span><span class="op" id="6227653">(</span><span class="keyword" id="6227654">type</span><span class="op" id="6227658">)</span>&nbsp;<span class="op" id="6227660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227664">case</span>&nbsp;<span class="op" id="6227669">*</span><span class="ident" id="6227670">ast</span><span class="op" id="6227673">.</span><span class="ident" id="6227674">FuncDecl</span><span class="op" id="6227682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227687">topDecls</span><span class="op" id="6227695">[</span><span class="ident" id="6227696">d</span><span class="op" id="6227697">.</span><span class="ident" id="6227698">Name</span><span class="op" id="6227702">.</span><span class="ident" id="6227703">Obj</span><span class="op" id="6227706">]</span>&nbsp;<span class="op" id="6227708">=</span>&nbsp;<span class="ident" id="6227710">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227717">case</span>&nbsp;<span class="op" id="6227722">*</span><span class="ident" id="6227723">ast</span><span class="op" id="6227726">.</span><span class="ident" id="6227727">GenDecl</span><span class="op" id="6227734">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227739">for</span>&nbsp;<span class="ident" id="6227743">_</span><span class="op" id="6227744">,</span>&nbsp;<span class="ident" id="6227746">spec</span>&nbsp;<span class="op" id="6227751">:=</span>&nbsp;<span class="keyword" id="6227754">range</span>&nbsp;<span class="ident" id="6227760">d</span><span class="op" id="6227761">.</span><span class="ident" id="6227762">Specs</span>&nbsp;<span class="op" id="6227768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227774">switch</span>&nbsp;<span class="ident" id="6227781">s</span>&nbsp;<span class="op" id="6227783">:=</span>&nbsp;<span class="ident" id="6227786">spec</span><span class="op" id="6227790">.</span><span class="op" id="6227791">(</span><span class="keyword" id="6227792">type</span><span class="op" id="6227796">)</span>&nbsp;<span class="op" id="6227798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227804">case</span>&nbsp;<span class="op" id="6227809">*</span><span class="ident" id="6227810">ast</span><span class="op" id="6227813">.</span><span class="ident" id="6227814">TypeSpec</span><span class="op" id="6227822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227829">topDecls</span><span class="op" id="6227837">[</span><span class="ident" id="6227838">s</span><span class="op" id="6227839">.</span><span class="ident" id="6227840">Name</span><span class="op" id="6227844">.</span><span class="ident" id="6227845">Obj</span><span class="op" id="6227848">]</span>&nbsp;<span class="op" id="6227850">=</span>&nbsp;<span class="ident" id="6227852">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227861">case</span>&nbsp;<span class="op" id="6227866">*</span><span class="ident" id="6227867">ast</span><span class="op" id="6227870">.</span><span class="ident" id="6227871">ValueSpec</span><span class="op" id="6227880">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227887">for</span>&nbsp;<span class="ident" id="6227891">_</span><span class="op" id="6227892">,</span>&nbsp;<span class="ident" id="6227894">id</span>&nbsp;<span class="op" id="6227897">:=</span>&nbsp;<span class="keyword" id="6227900">range</span>&nbsp;<span class="ident" id="6227906">s</span><span class="op" id="6227907">.</span><span class="ident" id="6227908">Names</span>&nbsp;<span class="op" id="6227914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227922">topDecls</span><span class="op" id="6227930">[</span><span class="ident" id="6227931">id</span><span class="op" id="6227933">.</span><span class="ident" id="6227934">Obj</span><span class="op" id="6227937">]</span>&nbsp;<span class="op" id="6227939">=</span>&nbsp;<span class="ident" id="6227941">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227962">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227973">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228041">unresolved</span>&nbsp;<span class="op" id="6228052">:=</span>&nbsp;<span class="builtinfunc" id="6228055">make</span><span class="op" id="6228059">(</span><span class="keyword" id="6228060">map</span><span class="op" id="6228063">[</span><span class="builtintype" id="6228064">string</span><span class="op" id="6228070">]</span><span class="builtintype" id="6228071">bool</span><span class="op" id="6228075">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228078">usesTopDecl</span>&nbsp;<span class="op" id="6228090">:=</span>&nbsp;<span class="ident" id="6228093">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228100">var</span>&nbsp;<span class="ident" id="6228104">inspectFunc</span>&nbsp;<span class="keyword" id="6228116">func</span><span class="op" id="6228120">(</span><span class="ident" id="6228121">ast</span><span class="op" id="6228124">.</span><span class="ident" id="6228125">Node</span><span class="op" id="6228129">)</span>&nbsp;<span class="builtintype" id="6228131">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228137">inspectFunc</span>&nbsp;<span class="op" id="6228149">=</span>&nbsp;<span class="keyword" id="6228151">func</span><span class="op" id="6228155">(</span><span class="ident" id="6228156">n</span>&nbsp;<span class="ident" id="6228158">ast</span><span class="op" id="6228161">.</span><span class="ident" id="6228162">Node</span><span class="op" id="6228166">)</span>&nbsp;<span class="builtintype" id="6228168">bool</span>&nbsp;<span class="op" id="6228173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228177">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228241">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228305">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228351">if</span>&nbsp;<span class="ident" id="6228354">e</span><span class="op" id="6228355">,</span>&nbsp;<span class="ident" id="6228357">ok</span>&nbsp;<span class="op" id="6228360">:=</span>&nbsp;<span class="ident" id="6228363">n</span><span class="op" id="6228364">.</span><span class="op" id="6228365">(</span><span class="op" id="6228366">*</span><span class="ident" id="6228367">ast</span><span class="op" id="6228370">.</span><span class="ident" id="6228371">SelectorExpr</span><span class="op" id="6228383">)</span><span class="op" id="6228384">;</span>&nbsp;<span class="ident" id="6228386">ok</span>&nbsp;<span class="op" id="6228389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228394">ast</span><span class="op" id="6228397">.</span><span class="ident" id="6228398">Inspect</span><span class="op" id="6228405">(</span><span class="ident" id="6228406">e</span><span class="op" id="6228407">.</span><span class="ident" id="6228408">X</span><span class="op" id="6228409">,</span>&nbsp;<span class="ident" id="6228411">inspectFunc</span><span class="op" id="6228422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228427">return</span>&nbsp;<span class="ident" id="6228434">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228442">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228446">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228501">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228555">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228579">if</span>&nbsp;<span class="ident" id="6228582">e</span><span class="op" id="6228583">,</span>&nbsp;<span class="ident" id="6228585">ok</span>&nbsp;<span class="op" id="6228588">:=</span>&nbsp;<span class="ident" id="6228591">n</span><span class="op" id="6228592">.</span><span class="op" id="6228593">(</span><span class="op" id="6228594">*</span><span class="ident" id="6228595">ast</span><span class="op" id="6228598">.</span><span class="ident" id="6228599">KeyValueExpr</span><span class="op" id="6228611">)</span><span class="op" id="6228612">;</span>&nbsp;<span class="ident" id="6228614">ok</span>&nbsp;<span class="op" id="6228617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228622">ast</span><span class="op" id="6228625">.</span><span class="ident" id="6228626">Inspect</span><span class="op" id="6228633">(</span><span class="ident" id="6228634">e</span><span class="op" id="6228635">.</span><span class="ident" id="6228636">Value</span><span class="op" id="6228641">,</span>&nbsp;<span class="ident" id="6228643">inspectFunc</span><span class="op" id="6228654">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228659">return</span>&nbsp;<span class="ident" id="6228666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228678">if</span>&nbsp;<span class="ident" id="6228681">id</span><span class="op" id="6228683">,</span>&nbsp;<span class="ident" id="6228685">ok</span>&nbsp;<span class="op" id="6228688">:=</span>&nbsp;<span class="ident" id="6228691">n</span><span class="op" id="6228692">.</span><span class="op" id="6228693">(</span><span class="op" id="6228694">*</span><span class="ident" id="6228695">ast</span><span class="op" id="6228698">.</span><span class="ident" id="6228699">Ident</span><span class="op" id="6228704">)</span><span class="op" id="6228705">;</span>&nbsp;<span class="ident" id="6228707">ok</span>&nbsp;<span class="op" id="6228710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228715">if</span>&nbsp;<span class="ident" id="6228718">id</span><span class="op" id="6228720">.</span><span class="ident" id="6228721">Obj</span>&nbsp;<span class="op" id="6228725">==</span>&nbsp;<span class="ident" id="6228728">nil</span>&nbsp;<span class="op" id="6228732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228738">unresolved</span><span class="op" id="6228748">[</span><span class="ident" id="6228749">id</span><span class="op" id="6228751">.</span><span class="ident" id="6228752">Name</span><span class="op" id="6228756">]</span>&nbsp;<span class="op" id="6228758">=</span>&nbsp;<span class="ident" id="6228760">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228768">}</span>&nbsp;<span class="keyword" id="6228770">else</span>&nbsp;<span class="keyword" id="6228775">if</span>&nbsp;<span class="ident" id="6228778">topDecls</span><span class="op" id="6228786">[</span><span class="ident" id="6228787">id</span><span class="op" id="6228789">.</span><span class="ident" id="6228790">Obj</span><span class="op" id="6228793">]</span>&nbsp;<span class="op" id="6228795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228801">usesTopDecl</span>&nbsp;<span class="op" id="6228813">=</span>&nbsp;<span class="ident" id="6228815">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228831">return</span>&nbsp;<span class="ident" id="6228838">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228847">ast</span><span class="op" id="6228850">.</span><span class="ident" id="6228851">Inspect</span><span class="op" id="6228858">(</span><span class="ident" id="6228859">body</span><span class="op" id="6228863">,</span>&nbsp;<span class="ident" id="6228865">inspectFunc</span><span class="op" id="6228876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228879">if</span>&nbsp;<span class="ident" id="6228882">usesTopDecl</span>&nbsp;<span class="op" id="6228894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228898">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228964">return</span>&nbsp;<span class="ident" id="6228971">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228980">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229037">for</span>&nbsp;<span class="ident" id="6229041">n</span>&nbsp;<span class="op" id="6229043">:=</span>&nbsp;<span class="keyword" id="6229046">range</span>&nbsp;<span class="ident" id="6229052">unresolved</span>&nbsp;<span class="op" id="6229063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229067">if</span>&nbsp;<span class="ident" id="6229070">predeclaredTypes</span><span class="op" id="6229086">[</span><span class="ident" id="6229087">n</span><span class="op" id="6229088">]</span>&nbsp;<span class="op" id="6229090">||</span>&nbsp;<span class="ident" id="6229093">predeclaredConstants</span><span class="op" id="6229113">[</span><span class="ident" id="6229114">n</span><span class="op" id="6229115">]</span>&nbsp;<span class="op" id="6229117">||</span>&nbsp;<span class="ident" id="6229120">predeclaredFuncs</span><span class="op" id="6229136">[</span><span class="ident" id="6229137">n</span><span class="op" id="6229138">]</span>&nbsp;<span class="op" id="6229140">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6229145">delete</span><span class="op" id="6229151">(</span><span class="ident" id="6229152">unresolved</span><span class="op" id="6229162">,</span>&nbsp;<span class="ident" id="6229164">n</span><span class="op" id="6229165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229176">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229245">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229312">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229388">namedImports</span>&nbsp;<span class="op" id="6229401">:=</span>&nbsp;<span class="builtinfunc" id="6229404">make</span><span class="op" id="6229408">(</span><span class="keyword" id="6229409">map</span><span class="op" id="6229412">[</span><span class="builtintype" id="6229413">string</span><span class="op" id="6229419">]</span><span class="builtintype" id="6229420">string</span><span class="op" id="6229426">)</span>&nbsp;<span class="comment" id="6229428">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229443">var</span>&nbsp;<span class="ident" id="6229447">blankImports</span>&nbsp;<span class="op" id="6229460">[</span><span class="op" id="6229461">]</span><span class="ident" id="6229462">ast</span><span class="op" id="6229465">.</span><span class="ident" id="6229466">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6229483">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229497">for</span>&nbsp;<span class="ident" id="6229501">_</span><span class="op" id="6229502">,</span>&nbsp;<span class="ident" id="6229504">s</span>&nbsp;<span class="op" id="6229506">:=</span>&nbsp;<span class="keyword" id="6229509">range</span>&nbsp;<span class="ident" id="6229515">file</span><span class="op" id="6229519">.</span><span class="ident" id="6229520">Imports</span>&nbsp;<span class="op" id="6229528">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229532">p</span><span class="op" id="6229533">,</span>&nbsp;<span class="ident" id="6229535">err</span>&nbsp;<span class="op" id="6229539">:=</span>&nbsp;<span class="ident" id="6229542">strconv</span><span class="op" id="6229549">.</span><span class="ident" id="6229550">Unquote</span><span class="op" id="6229557">(</span><span class="ident" id="6229558">s</span><span class="op" id="6229559">.</span><span class="ident" id="6229560">Path</span><span class="op" id="6229564">.</span><span class="ident" id="6229565">Value</span><span class="op" id="6229570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229574">if</span>&nbsp;<span class="ident" id="6229577">err</span>&nbsp;<span class="op" id="6229581">!=</span>&nbsp;<span class="ident" id="6229584">nil</span>&nbsp;<span class="op" id="6229588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229593">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229608">n</span>&nbsp;<span class="op" id="6229610">:=</span>&nbsp;<span class="ident" id="6229613">path</span><span class="op" id="6229617">.</span><span class="ident" id="6229618">Base</span><span class="op" id="6229622">(</span><span class="ident" id="6229623">p</span><span class="op" id="6229624">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229628">if</span>&nbsp;<span class="ident" id="6229631">s</span><span class="op" id="6229632">.</span><span class="ident" id="6229633">Name</span>&nbsp;<span class="op" id="6229638">!=</span>&nbsp;<span class="ident" id="6229641">nil</span>&nbsp;<span class="op" id="6229645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229650">n</span>&nbsp;<span class="op" id="6229652">=</span>&nbsp;<span class="ident" id="6229654">s</span><span class="op" id="6229655">.</span><span class="ident" id="6229656">Name</span><span class="op" id="6229660">.</span><span class="ident" id="6229661">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229669">switch</span>&nbsp;<span class="ident" id="6229676">n</span>&nbsp;<span class="op" id="6229678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229683">case</span>&nbsp;<span class="string" id="6229688">&#34;_&#34;</span><span class="op" id="6229691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229697">blankImports</span>&nbsp;<span class="op" id="6229710">=</span>&nbsp;<span class="builtinfunc" id="6229712">append</span><span class="op" id="6229718">(</span><span class="ident" id="6229719">blankImports</span><span class="op" id="6229731">,</span>&nbsp;<span class="ident" id="6229733">s</span><span class="op" id="6229734">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229740">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229752">case</span>&nbsp;<span class="string" id="6229757">&#34;.&#34;</span><span class="op" id="6229760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229766">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229809">return</span>&nbsp;<span class="ident" id="6229816">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229823">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229831">if</span>&nbsp;<span class="ident" id="6229834">unresolved</span><span class="op" id="6229844">[</span><span class="ident" id="6229845">n</span><span class="op" id="6229846">]</span>&nbsp;<span class="op" id="6229848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229853">namedImports</span><span class="op" id="6229865">[</span><span class="ident" id="6229866">n</span><span class="op" id="6229867">]</span>&nbsp;<span class="op" id="6229869">=</span>&nbsp;<span class="ident" id="6229871">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6229876">delete</span><span class="op" id="6229882">(</span><span class="ident" id="6229883">unresolved</span><span class="op" id="6229893">,</span>&nbsp;<span class="ident" id="6229895">n</span><span class="op" id="6229896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229900">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229907">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229975">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230019">if</span>&nbsp;<span class="builtinfunc" id="6230022">len</span><span class="op" id="6230025">(</span><span class="ident" id="6230026">unresolved</span><span class="op" id="6230036">)</span>&nbsp;<span class="op" id="6230038">&gt;</span>&nbsp;<span class="num" id="6230040">0</span>&nbsp;<span class="op" id="6230042">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230046">return</span>&nbsp;<span class="ident" id="6230053">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230062">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230116">var</span>&nbsp;<span class="ident" id="6230120">comments</span>&nbsp;<span class="op" id="6230129">[</span><span class="op" id="6230130">]</span><span class="op" id="6230131">*</span><span class="ident" id="6230132">ast</span><span class="op" id="6230135">.</span><span class="ident" id="6230136">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230150">for</span>&nbsp;<span class="ident" id="6230154">_</span><span class="op" id="6230155">,</span>&nbsp;<span class="ident" id="6230157">s</span>&nbsp;<span class="op" id="6230159">:=</span>&nbsp;<span class="keyword" id="6230162">range</span>&nbsp;<span class="ident" id="6230168">blankImports</span>&nbsp;<span class="op" id="6230181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230185">if</span>&nbsp;<span class="ident" id="6230188">c</span>&nbsp;<span class="op" id="6230190">:=</span>&nbsp;<span class="ident" id="6230193">s</span><span class="op" id="6230194">.</span><span class="op" id="6230195">(</span><span class="op" id="6230196">*</span><span class="ident" id="6230197">ast</span><span class="op" id="6230200">.</span><span class="ident" id="6230201">ImportSpec</span><span class="op" id="6230211">)</span><span class="op" id="6230212">.</span><span class="ident" id="6230213">Doc</span><span class="op" id="6230216">;</span>&nbsp;<span class="ident" id="6230218">c</span>&nbsp;<span class="op" id="6230220">!=</span>&nbsp;<span class="ident" id="6230223">nil</span>&nbsp;<span class="op" id="6230227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230232">comments</span>&nbsp;<span class="op" id="6230241">=</span>&nbsp;<span class="builtinfunc" id="6230243">append</span><span class="op" id="6230249">(</span><span class="ident" id="6230250">comments</span><span class="op" id="6230258">,</span>&nbsp;<span class="ident" id="6230260">c</span><span class="op" id="6230261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230268">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230272">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230328">for</span>&nbsp;<span class="ident" id="6230332">_</span><span class="op" id="6230333">,</span>&nbsp;<span class="ident" id="6230335">c</span>&nbsp;<span class="op" id="6230337">:=</span>&nbsp;<span class="keyword" id="6230340">range</span>&nbsp;<span class="ident" id="6230346">file</span><span class="op" id="6230350">.</span><span class="ident" id="6230351">Comments</span>&nbsp;<span class="op" id="6230360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230364">if</span>&nbsp;<span class="ident" id="6230367">body</span><span class="op" id="6230371">.</span><span class="ident" id="6230372">Pos</span><span class="op" id="6230375">(</span><span class="op" id="6230376">)</span>&nbsp;<span class="op" id="6230378">&lt;=</span>&nbsp;<span class="ident" id="6230381">c</span><span class="op" id="6230382">.</span><span class="ident" id="6230383">Pos</span><span class="op" id="6230386">(</span><span class="op" id="6230387">)</span>&nbsp;<span class="op" id="6230389">&amp;&amp;</span>&nbsp;<span class="ident" id="6230392">c</span><span class="op" id="6230393">.</span><span class="ident" id="6230394">End</span><span class="op" id="6230397">(</span><span class="op" id="6230398">)</span>&nbsp;<span class="op" id="6230400">&lt;=</span>&nbsp;<span class="ident" id="6230403">body</span><span class="op" id="6230407">.</span><span class="ident" id="6230408">End</span><span class="op" id="6230411">(</span><span class="op" id="6230412">)</span>&nbsp;<span class="op" id="6230414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230419">comments</span>&nbsp;<span class="op" id="6230428">=</span>&nbsp;<span class="builtinfunc" id="6230430">append</span><span class="op" id="6230436">(</span><span class="ident" id="6230437">comments</span><span class="op" id="6230445">,</span>&nbsp;<span class="ident" id="6230447">c</span><span class="op" id="6230448">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230459">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230517">body</span><span class="op" id="6230521">,</span>&nbsp;<span class="ident" id="6230523">comments</span>&nbsp;<span class="op" id="6230532">=</span>&nbsp;<span class="ident" id="6230534">stripOutputComment</span><span class="op" id="6230552">(</span><span class="ident" id="6230553">body</span><span class="op" id="6230557">,</span>&nbsp;<span class="ident" id="6230559">comments</span><span class="op" id="6230567">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230571">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230606">importDecl</span>&nbsp;<span class="op" id="6230617">:=</span>&nbsp;<span class="op" id="6230620">&amp;</span><span class="ident" id="6230621">ast</span><span class="op" id="6230624">.</span><span class="ident" id="6230625">GenDecl</span><span class="op" id="6230632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230636">Tok</span><span class="op" id="6230639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6230644">token</span><span class="op" id="6230649">.</span><span class="ident" id="6230650">IMPORT</span><span class="op" id="6230656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230660">Lparen</span><span class="op" id="6230666">:</span>&nbsp;<span class="num" id="6230668">1</span><span class="op" id="6230669">,</span>&nbsp;<span class="comment" id="6230671">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230724">Rparen</span><span class="op" id="6230730">:</span>&nbsp;<span class="num" id="6230732">1</span><span class="op" id="6230733">,</span>&nbsp;<span class="comment" id="6230735">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230776">for</span>&nbsp;<span class="ident" id="6230780">n</span><span class="op" id="6230781">,</span>&nbsp;<span class="ident" id="6230783">p</span>&nbsp;<span class="op" id="6230785">:=</span>&nbsp;<span class="keyword" id="6230788">range</span>&nbsp;<span class="ident" id="6230794">namedImports</span>&nbsp;<span class="op" id="6230807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230811">s</span>&nbsp;<span class="op" id="6230813">:=</span>&nbsp;<span class="op" id="6230816">&amp;</span><span class="ident" id="6230817">ast</span><span class="op" id="6230820">.</span><span class="ident" id="6230821">ImportSpec</span><span class="op" id="6230831">{</span><span class="ident" id="6230832">Path</span><span class="op" id="6230836">:</span>&nbsp;<span class="op" id="6230838">&amp;</span><span class="ident" id="6230839">ast</span><span class="op" id="6230842">.</span><span class="ident" id="6230843">BasicLit</span><span class="op" id="6230851">{</span><span class="ident" id="6230852">Value</span><span class="op" id="6230857">:</span>&nbsp;<span class="ident" id="6230859">strconv</span><span class="op" id="6230866">.</span><span class="ident" id="6230867">Quote</span><span class="op" id="6230872">(</span><span class="ident" id="6230873">p</span><span class="op" id="6230874">)</span><span class="op" id="6230875">}</span><span class="op" id="6230876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230880">if</span>&nbsp;<span class="ident" id="6230883">path</span><span class="op" id="6230887">.</span><span class="ident" id="6230888">Base</span><span class="op" id="6230892">(</span><span class="ident" id="6230893">p</span><span class="op" id="6230894">)</span>&nbsp;<span class="op" id="6230896">!=</span>&nbsp;<span class="ident" id="6230899">n</span>&nbsp;<span class="op" id="6230901">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230906">s</span><span class="op" id="6230907">.</span><span class="ident" id="6230908">Name</span>&nbsp;<span class="op" id="6230913">=</span>&nbsp;<span class="ident" id="6230915">ast</span><span class="op" id="6230918">.</span><span class="ident" id="6230919">NewIdent</span><span class="op" id="6230927">(</span><span class="ident" id="6230928">n</span><span class="op" id="6230929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230937">importDecl</span><span class="op" id="6230947">.</span><span class="ident" id="6230948">Specs</span>&nbsp;<span class="op" id="6230954">=</span>&nbsp;<span class="builtinfunc" id="6230956">append</span><span class="op" id="6230962">(</span><span class="ident" id="6230963">importDecl</span><span class="op" id="6230973">.</span><span class="ident" id="6230974">Specs</span><span class="op" id="6230979">,</span>&nbsp;<span class="ident" id="6230981">s</span><span class="op" id="6230982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230988">importDecl</span><span class="op" id="6230998">.</span><span class="ident" id="6230999">Specs</span>&nbsp;<span class="op" id="6231005">=</span>&nbsp;<span class="builtinfunc" id="6231007">append</span><span class="op" id="6231013">(</span><span class="ident" id="6231014">importDecl</span><span class="op" id="6231024">.</span><span class="ident" id="6231025">Specs</span><span class="op" id="6231030">,</span>&nbsp;<span class="ident" id="6231032">blankImports</span><span class="op" id="6231044">...</span><span class="op" id="6231047">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231051">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231081">funcDecl</span>&nbsp;<span class="op" id="6231090">:=</span>&nbsp;<span class="op" id="6231093">&amp;</span><span class="ident" id="6231094">ast</span><span class="op" id="6231097">.</span><span class="ident" id="6231098">FuncDecl</span><span class="op" id="6231106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231110">Name</span><span class="op" id="6231114">:</span>&nbsp;<span class="ident" id="6231116">ast</span><span class="op" id="6231119">.</span><span class="ident" id="6231120">NewIdent</span><span class="op" id="6231128">(</span><span class="string" id="6231129">&#34;main&#34;</span><span class="op" id="6231135">)</span><span class="op" id="6231136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231140">Type</span><span class="op" id="6231144">:</span>&nbsp;<span class="op" id="6231146">&amp;</span><span class="ident" id="6231147">ast</span><span class="op" id="6231150">.</span><span class="ident" id="6231151">FuncType</span><span class="op" id="6231159">{</span><span class="ident" id="6231160">Params</span><span class="op" id="6231166">:</span>&nbsp;<span class="op" id="6231168">&amp;</span><span class="ident" id="6231169">ast</span><span class="op" id="6231172">.</span><span class="ident" id="6231173">FieldList</span><span class="op" id="6231182">{</span><span class="op" id="6231183">}</span><span class="op" id="6231184">}</span><span class="op" id="6231185">,</span>&nbsp;<span class="comment" id="6231187">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231224">Body</span><span class="op" id="6231228">:</span>&nbsp;<span class="ident" id="6231230">body</span><span class="op" id="6231234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231241">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231262">return</span>&nbsp;<span class="op" id="6231269">&amp;</span><span class="ident" id="6231270">ast</span><span class="op" id="6231273">.</span><span class="ident" id="6231274">File</span><span class="op" id="6231278">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231282">Name</span><span class="op" id="6231286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231292">ast</span><span class="op" id="6231295">.</span><span class="ident" id="6231296">NewIdent</span><span class="op" id="6231304">(</span><span class="string" id="6231305">&#34;main&#34;</span><span class="op" id="6231311">)</span><span class="op" id="6231312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231316">Decls</span><span class="op" id="6231321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6231326">[</span><span class="op" id="6231327">]</span><span class="ident" id="6231328">ast</span><span class="op" id="6231331">.</span><span class="ident" id="6231332">Decl</span><span class="op" id="6231336">{</span><span class="ident" id="6231337">importDecl</span><span class="op" id="6231347">,</span>&nbsp;<span class="ident" id="6231349">funcDecl</span><span class="op" id="6231357">}</span><span class="op" id="6231358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231362">Comments</span><span class="op" id="6231370">:</span>&nbsp;<span class="ident" id="6231372">comments</span><span class="op" id="6231380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231383">}</span><br>
<span class="lineno"></span><span class="op" id="6231385">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="6231388">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="6231466">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="6231525">func</span>&nbsp;<span class="ident" id="6231530">playExampleFile</span><span class="op" id="6231545">(</span><span class="ident" id="6231546">file</span>&nbsp;<span class="op" id="6231551">*</span><span class="ident" id="6231552">ast</span><span class="op" id="6231555">.</span><span class="ident" id="6231556">File</span><span class="op" id="6231560">)</span>&nbsp;<span class="op" id="6231562">*</span><span class="ident" id="6231563">ast</span><span class="op" id="6231566">.</span><span class="ident" id="6231567">File</span>&nbsp;<span class="op" id="6231572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231575">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231615">comments</span>&nbsp;<span class="op" id="6231624">:=</span>&nbsp;<span class="ident" id="6231627">file</span><span class="op" id="6231631">.</span><span class="ident" id="6231632">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231642">if</span>&nbsp;<span class="builtinfunc" id="6231645">len</span><span class="op" id="6231648">(</span><span class="ident" id="6231649">comments</span><span class="op" id="6231657">)</span>&nbsp;<span class="op" id="6231659">&gt;</span>&nbsp;<span class="num" id="6231661">0</span>&nbsp;<span class="op" id="6231663">&amp;&amp;</span>&nbsp;<span class="ident" id="6231666">strings</span><span class="op" id="6231673">.</span><span class="ident" id="6231674">HasPrefix</span><span class="op" id="6231683">(</span><span class="ident" id="6231684">comments</span><span class="op" id="6231692">[</span><span class="num" id="6231693">0</span><span class="op" id="6231694">]</span><span class="op" id="6231695">.</span><span class="ident" id="6231696">Text</span><span class="op" id="6231700">(</span><span class="op" id="6231701">)</span><span class="op" id="6231702">,</span>&nbsp;<span class="string" id="6231704">&#34;Copyright&#34;</span><span class="op" id="6231715">)</span>&nbsp;<span class="op" id="6231717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231721">comments</span>&nbsp;<span class="op" id="6231730">=</span>&nbsp;<span class="ident" id="6231732">comments</span><span class="op" id="6231740">[</span><span class="num" id="6231741">1</span><span class="op" id="6231742">:</span><span class="op" id="6231743">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231750">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231819">var</span>&nbsp;<span class="ident" id="6231823">decls</span>&nbsp;<span class="op" id="6231829">[</span><span class="op" id="6231830">]</span><span class="ident" id="6231831">ast</span><span class="op" id="6231834">.</span><span class="ident" id="6231835">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231841">for</span>&nbsp;<span class="ident" id="6231845">_</span><span class="op" id="6231846">,</span>&nbsp;<span class="ident" id="6231848">d</span>&nbsp;<span class="op" id="6231850">:=</span>&nbsp;<span class="keyword" id="6231853">range</span>&nbsp;<span class="ident" id="6231859">file</span><span class="op" id="6231863">.</span><span class="ident" id="6231864">Decls</span>&nbsp;<span class="op" id="6231870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231874">if</span>&nbsp;<span class="ident" id="6231877">f</span><span class="op" id="6231878">,</span>&nbsp;<span class="ident" id="6231880">ok</span>&nbsp;<span class="op" id="6231883">:=</span>&nbsp;<span class="ident" id="6231886">d</span><span class="op" id="6231887">.</span><span class="op" id="6231888">(</span><span class="op" id="6231889">*</span><span class="ident" id="6231890">ast</span><span class="op" id="6231893">.</span><span class="ident" id="6231894">FuncDecl</span><span class="op" id="6231902">)</span><span class="op" id="6231903">;</span>&nbsp;<span class="ident" id="6231905">ok</span>&nbsp;<span class="op" id="6231908">&amp;&amp;</span>&nbsp;<span class="ident" id="6231911">isTest</span><span class="op" id="6231917">(</span><span class="ident" id="6231918">f</span><span class="op" id="6231919">.</span><span class="ident" id="6231920">Name</span><span class="op" id="6231924">.</span><span class="ident" id="6231925">Name</span><span class="op" id="6231929">,</span>&nbsp;<span class="string" id="6231931">&#34;Example&#34;</span><span class="op" id="6231940">)</span>&nbsp;<span class="op" id="6231942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231947">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232001">newF</span>&nbsp;<span class="op" id="6232006">:=</span>&nbsp;<span class="op" id="6232009">*</span><span class="ident" id="6232010">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232015">newF</span><span class="op" id="6232019">.</span><span class="ident" id="6232020">Name</span>&nbsp;<span class="op" id="6232025">=</span>&nbsp;<span class="ident" id="6232027">ast</span><span class="op" id="6232030">.</span><span class="ident" id="6232031">NewIdent</span><span class="op" id="6232039">(</span><span class="string" id="6232040">&#34;main&#34;</span><span class="op" id="6232046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232051">newF</span><span class="op" id="6232055">.</span><span class="ident" id="6232056">Body</span><span class="op" id="6232060">,</span>&nbsp;<span class="ident" id="6232062">comments</span>&nbsp;<span class="op" id="6232071">=</span>&nbsp;<span class="ident" id="6232073">stripOutputComment</span><span class="op" id="6232091">(</span><span class="ident" id="6232092">f</span><span class="op" id="6232093">.</span><span class="ident" id="6232094">Body</span><span class="op" id="6232098">,</span>&nbsp;<span class="ident" id="6232100">comments</span><span class="op" id="6232108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232113">d</span>&nbsp;<span class="op" id="6232115">=</span>&nbsp;<span class="op" id="6232117">&amp;</span><span class="ident" id="6232118">newF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232125">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232129">decls</span>&nbsp;<span class="op" id="6232135">=</span>&nbsp;<span class="builtinfunc" id="6232137">append</span><span class="op" id="6232143">(</span><span class="ident" id="6232144">decls</span><span class="op" id="6232149">,</span>&nbsp;<span class="ident" id="6232151">d</span><span class="op" id="6232152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6232159">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232207">f</span>&nbsp;<span class="op" id="6232209">:=</span>&nbsp;<span class="op" id="6232212">*</span><span class="ident" id="6232213">file</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232219">f</span><span class="op" id="6232220">.</span><span class="ident" id="6232221">Name</span>&nbsp;<span class="op" id="6232226">=</span>&nbsp;<span class="ident" id="6232228">ast</span><span class="op" id="6232231">.</span><span class="ident" id="6232232">NewIdent</span><span class="op" id="6232240">(</span><span class="string" id="6232241">&#34;main&#34;</span><span class="op" id="6232247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232250">f</span><span class="op" id="6232251">.</span><span class="ident" id="6232252">Decls</span>&nbsp;<span class="op" id="6232258">=</span>&nbsp;<span class="ident" id="6232260">decls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232267">f</span><span class="op" id="6232268">.</span><span class="ident" id="6232269">Comments</span>&nbsp;<span class="op" id="6232278">=</span>&nbsp;<span class="ident" id="6232280">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232290">return</span>&nbsp;<span class="op" id="6232297">&amp;</span><span class="ident" id="6232298">f</span><br>
<span class="lineno"></span><span class="op" id="6232300">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6232303">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="6232374">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="6232434">func</span>&nbsp;<span class="ident" id="6232439">stripOutputComment</span><span class="op" id="6232457">(</span><span class="ident" id="6232458">body</span>&nbsp;<span class="op" id="6232463">*</span><span class="ident" id="6232464">ast</span><span class="op" id="6232467">.</span><span class="ident" id="6232468">BlockStmt</span><span class="op" id="6232477">,</span>&nbsp;<span class="ident" id="6232479">comments</span>&nbsp;<span class="op" id="6232488">[</span><span class="op" id="6232489">]</span><span class="op" id="6232490">*</span><span class="ident" id="6232491">ast</span><span class="op" id="6232494">.</span><span class="ident" id="6232495">CommentGroup</span><span class="op" id="6232507">)</span>&nbsp;<span class="op" id="6232509">(</span><span class="op" id="6232510">*</span><span class="ident" id="6232511">ast</span><span class="op" id="6232514">.</span><span class="ident" id="6232515">BlockStmt</span><span class="op" id="6232524">,</span>&nbsp;<span class="op" id="6232526">[</span><span class="op" id="6232527">]</span><span class="op" id="6232528">*</span><span class="ident" id="6232529">ast</span><span class="op" id="6232532">.</span><span class="ident" id="6232533">CommentGroup</span><span class="op" id="6232545">)</span>&nbsp;<span class="op" id="6232547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6232550">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232596">i</span><span class="op" id="6232597">,</span>&nbsp;<span class="ident" id="6232599">last</span>&nbsp;<span class="op" id="6232604">:=</span>&nbsp;<span class="ident" id="6232607">lastComment</span><span class="op" id="6232618">(</span><span class="ident" id="6232619">body</span><span class="op" id="6232623">,</span>&nbsp;<span class="ident" id="6232625">comments</span><span class="op" id="6232633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232636">if</span>&nbsp;<span class="ident" id="6232639">last</span>&nbsp;<span class="op" id="6232644">==</span>&nbsp;<span class="ident" id="6232647">nil</span>&nbsp;<span class="op" id="6232651">||</span>&nbsp;<span class="op" id="6232654">!</span><span class="ident" id="6232655">outputPrefix</span><span class="op" id="6232667">.</span><span class="ident" id="6232668">MatchString</span><span class="op" id="6232679">(</span><span class="ident" id="6232680">last</span><span class="op" id="6232684">.</span><span class="ident" id="6232685">Text</span><span class="op" id="6232689">(</span><span class="op" id="6232690">)</span><span class="op" id="6232691">)</span>&nbsp;<span class="op" id="6232693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232697">return</span>&nbsp;<span class="ident" id="6232704">body</span><span class="op" id="6232708">,</span>&nbsp;<span class="ident" id="6232710">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6232724">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232792">newBody</span>&nbsp;<span class="op" id="6232800">:=</span>&nbsp;<span class="op" id="6232803">&amp;</span><span class="ident" id="6232804">ast</span><span class="op" id="6232807">.</span><span class="ident" id="6232808">BlockStmt</span><span class="op" id="6232817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232821">Lbrace</span><span class="op" id="6232827">:</span>&nbsp;<span class="ident" id="6232829">body</span><span class="op" id="6232833">.</span><span class="ident" id="6232834">Lbrace</span><span class="op" id="6232840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232844">List</span><span class="op" id="6232848">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6232852">body</span><span class="op" id="6232856">.</span><span class="ident" id="6232857">List</span><span class="op" id="6232861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232865">Rbrace</span><span class="op" id="6232871">:</span>&nbsp;<span class="ident" id="6232873">last</span><span class="op" id="6232877">.</span><span class="ident" id="6232878">Pos</span><span class="op" id="6232881">(</span><span class="op" id="6232882">)</span><span class="op" id="6232883">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232889">newComments</span>&nbsp;<span class="op" id="6232901">:=</span>&nbsp;<span class="builtinfunc" id="6232904">make</span><span class="op" id="6232908">(</span><span class="op" id="6232909">[</span><span class="op" id="6232910">]</span><span class="op" id="6232911">*</span><span class="ident" id="6232912">ast</span><span class="op" id="6232915">.</span><span class="ident" id="6232916">CommentGroup</span><span class="op" id="6232928">,</span>&nbsp;<span class="builtinfunc" id="6232930">len</span><span class="op" id="6232933">(</span><span class="ident" id="6232934">comments</span><span class="op" id="6232942">)</span><span class="op" id="6232943">-</span><span class="num" id="6232944">1</span><span class="op" id="6232945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6232948">copy</span><span class="op" id="6232952">(</span><span class="ident" id="6232953">newComments</span><span class="op" id="6232964">,</span>&nbsp;<span class="ident" id="6232966">comments</span><span class="op" id="6232974">[</span><span class="op" id="6232975">:</span><span class="ident" id="6232976">i</span><span class="op" id="6232977">]</span><span class="op" id="6232978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6232981">copy</span><span class="op" id="6232985">(</span><span class="ident" id="6232986">newComments</span><span class="op" id="6232997">[</span><span class="ident" id="6232998">i</span><span class="op" id="6232999">:</span><span class="op" id="6233000">]</span><span class="op" id="6233001">,</span>&nbsp;<span class="ident" id="6233003">comments</span><span class="op" id="6233011">[</span><span class="ident" id="6233012">i</span><span class="op" id="6233013">+</span><span class="num" id="6233014">1</span><span class="op" id="6233015">:</span><span class="op" id="6233016">]</span><span class="op" id="6233017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233020">return</span>&nbsp;<span class="ident" id="6233027">newBody</span><span class="op" id="6233034">,</span>&nbsp;<span class="ident" id="6233036">newComments</span><br>
<span class="lineno">340</span><span class="op" id="6233048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6233051">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="6233118">func</span>&nbsp;<span class="ident" id="6233123">lastComment</span><span class="op" id="6233134">(</span><span class="ident" id="6233135">b</span>&nbsp;<span class="op" id="6233137">*</span><span class="ident" id="6233138">ast</span><span class="op" id="6233141">.</span><span class="ident" id="6233142">BlockStmt</span><span class="op" id="6233151">,</span>&nbsp;<span class="ident" id="6233153">c</span>&nbsp;<span class="op" id="6233155">[</span><span class="op" id="6233156">]</span><span class="op" id="6233157">*</span><span class="ident" id="6233158">ast</span><span class="op" id="6233161">.</span><span class="ident" id="6233162">CommentGroup</span><span class="op" id="6233174">)</span>&nbsp;<span class="op" id="6233176">(</span><span class="ident" id="6233177">i</span>&nbsp;<span class="builtintype" id="6233179">int</span><span class="op" id="6233182">,</span>&nbsp;<span class="ident" id="6233184">last</span>&nbsp;<span class="op" id="6233189">*</span><span class="ident" id="6233190">ast</span><span class="op" id="6233193">.</span><span class="ident" id="6233194">CommentGroup</span><span class="op" id="6233206">)</span>&nbsp;<span class="op" id="6233208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233211">pos</span><span class="op" id="6233214">,</span>&nbsp;<span class="ident" id="6233216">end</span>&nbsp;<span class="op" id="6233220">:=</span>&nbsp;<span class="ident" id="6233223">b</span><span class="op" id="6233224">.</span><span class="ident" id="6233225">Pos</span><span class="op" id="6233228">(</span><span class="op" id="6233229">)</span><span class="op" id="6233230">,</span>&nbsp;<span class="ident" id="6233232">b</span><span class="op" id="6233233">.</span><span class="ident" id="6233234">End</span><span class="op" id="6233237">(</span><span class="op" id="6233238">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233241">for</span>&nbsp;<span class="ident" id="6233245">j</span><span class="op" id="6233246">,</span>&nbsp;<span class="ident" id="6233248">cg</span>&nbsp;<span class="op" id="6233251">:=</span>&nbsp;<span class="keyword" id="6233254">range</span>&nbsp;<span class="ident" id="6233260">c</span>&nbsp;<span class="op" id="6233262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233266">if</span>&nbsp;<span class="ident" id="6233269">cg</span><span class="op" id="6233271">.</span><span class="ident" id="6233272">Pos</span><span class="op" id="6233275">(</span><span class="op" id="6233276">)</span>&nbsp;<span class="op" id="6233278">&lt;</span>&nbsp;<span class="ident" id="6233280">pos</span>&nbsp;<span class="op" id="6233284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233289">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233304">if</span>&nbsp;<span class="ident" id="6233307">cg</span><span class="op" id="6233309">.</span><span class="ident" id="6233310">End</span><span class="op" id="6233313">(</span><span class="op" id="6233314">)</span>&nbsp;<span class="op" id="6233316">&gt;</span>&nbsp;<span class="ident" id="6233318">end</span>&nbsp;<span class="op" id="6233322">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233327">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233339">i</span><span class="op" id="6233340">,</span>&nbsp;<span class="ident" id="6233342">last</span>&nbsp;<span class="op" id="6233347">=</span>&nbsp;<span class="ident" id="6233349">j</span><span class="op" id="6233350">,</span>&nbsp;<span class="ident" id="6233352">cg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233359">return</span><br>
<span class="lineno">355</span><span class="op" id="6233366">}</span>
</div>
</body>
</html>
