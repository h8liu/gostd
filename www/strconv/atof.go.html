<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1557280">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1557335">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1557389">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1557440">//&nbsp;Package&nbsp;strconv&nbsp;implements&nbsp;conversions&nbsp;to&nbsp;and&nbsp;from&nbsp;string&nbsp;representations</span><br>
<span class="lineno"></span><span class="comment" id="1557517">//&nbsp;of&nbsp;basic&nbsp;data&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="1557541">package</span>&nbsp;<span class="ident" id="1557549">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1557558">//&nbsp;decimal&nbsp;to&nbsp;binary&nbsp;floating&nbsp;point&nbsp;conversion.</span><br>
<span class="lineno">10</span><span class="comment" id="1557606">//&nbsp;Algorithm:</span><br>
<span class="lineno"></span><span class="comment" id="1557620">//&nbsp;&nbsp;&nbsp;1)&nbsp;Store&nbsp;input&nbsp;in&nbsp;multiprecision&nbsp;decimal.</span><br>
<span class="lineno"></span><span class="comment" id="1557667">//&nbsp;&nbsp;&nbsp;2)&nbsp;Multiply/divide&nbsp;decimal&nbsp;by&nbsp;powers&nbsp;of&nbsp;two&nbsp;until&nbsp;in&nbsp;range&nbsp;[0.5,&nbsp;1)</span><br>
<span class="lineno"></span><span class="comment" id="1557740">//&nbsp;&nbsp;&nbsp;3)&nbsp;Multiply&nbsp;by&nbsp;2^precision&nbsp;and&nbsp;round&nbsp;to&nbsp;get&nbsp;mantissa.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1557800">import</span>&nbsp;<span class="string" id="1557807">&#34;math&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1557815">var</span>&nbsp;<span class="ident" id="1557819">optimize</span>&nbsp;<span class="op" id="1557828">=</span>&nbsp;<span class="ident" id="1557830">true</span>&nbsp;<span class="comment" id="1557835">//&nbsp;can&nbsp;change&nbsp;for&nbsp;testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1557862">func</span>&nbsp;<span class="ident" id="1557867">equalIgnoreCase</span><span class="op" id="1557882">(</span><span class="ident" id="1557883">s1</span><span class="op" id="1557885">,</span>&nbsp;<span class="ident" id="1557887">s2</span>&nbsp;<span class="builtintype" id="1557890">string</span><span class="op" id="1557896">)</span>&nbsp;<span class="builtintype" id="1557898">bool</span>&nbsp;<span class="op" id="1557903">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1557906">if</span>&nbsp;<span class="builtinfunc" id="1557909">len</span><span class="op" id="1557912">(</span><span class="ident" id="1557913"><a href="/strconv/atof.go.html#1557883">s1</a></span><span class="op" id="1557915">)</span>&nbsp;<span class="op" id="1557917">!=</span>&nbsp;<span class="builtinfunc" id="1557920">len</span><span class="op" id="1557923">(</span><span class="ident" id="1557924"><a href="/strconv/atof.go.html#1557887">s2</a></span><span class="op" id="1557926">)</span>&nbsp;<span class="op" id="1557928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1557932">return</span>&nbsp;<span class="ident" id="1557939">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1557946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1557949">for</span>&nbsp;<span class="ident" id="1557953">i</span>&nbsp;<span class="op" id="1557955">:=</span>&nbsp;<span class="num" id="1557958">0</span><span class="op" id="1557959">;</span>&nbsp;<span class="ident" id="1557961"><a href="/strconv/atof.go.html#1557953">i</a></span>&nbsp;<span class="op" id="1557963">&lt;</span>&nbsp;<span class="builtinfunc" id="1557965">len</span><span class="op" id="1557968">(</span><span class="ident" id="1557969"><a href="/strconv/atof.go.html#1557883">s1</a></span><span class="op" id="1557971">)</span><span class="op" id="1557972">;</span>&nbsp;<span class="ident" id="1557974"><a href="/strconv/atof.go.html#1557953">i</a></span><span class="op" id="1557975">++</span>&nbsp;<span class="op" id="1557978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1557982">c1</span>&nbsp;<span class="op" id="1557985">:=</span>&nbsp;<span class="ident" id="1557988"><a href="/strconv/atof.go.html#1557883">s1</a></span><span class="op" id="1557990">[</span><span class="ident" id="1557991"><a href="/strconv/atof.go.html#1557953">i</a></span><span class="op" id="1557992">]</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1557996">if</span>&nbsp;<span class="string" id="1557999">&#39;A&#39;</span>&nbsp;<span class="op" id="1558003">&lt;=</span>&nbsp;<span class="ident" id="1558006"><a href="/strconv/atof.go.html#1557982">c1</a></span>&nbsp;<span class="op" id="1558009">&amp;&amp;</span>&nbsp;<span class="ident" id="1558012"><a href="/strconv/atof.go.html#1557982">c1</a></span>&nbsp;<span class="op" id="1558015">&lt;=</span>&nbsp;<span class="string" id="1558018">&#39;Z&#39;</span>&nbsp;<span class="op" id="1558022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558027"><a href="/strconv/atof.go.html#1557982">c1</a></span>&nbsp;<span class="op" id="1558030">+=</span>&nbsp;<span class="string" id="1558033">&#39;a&#39;</span>&nbsp;<span class="op" id="1558037">-</span>&nbsp;<span class="string" id="1558039">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558049">c2</span>&nbsp;<span class="op" id="1558052">:=</span>&nbsp;<span class="ident" id="1558055"><a href="/strconv/atof.go.html#1557887">s2</a></span><span class="op" id="1558057">[</span><span class="ident" id="1558058"><a href="/strconv/atof.go.html#1557953">i</a></span><span class="op" id="1558059">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558063">if</span>&nbsp;<span class="string" id="1558066">&#39;A&#39;</span>&nbsp;<span class="op" id="1558070">&lt;=</span>&nbsp;<span class="ident" id="1558073"><a href="/strconv/atof.go.html#1558049">c2</a></span>&nbsp;<span class="op" id="1558076">&amp;&amp;</span>&nbsp;<span class="ident" id="1558079"><a href="/strconv/atof.go.html#1558049">c2</a></span>&nbsp;<span class="op" id="1558082">&lt;=</span>&nbsp;<span class="string" id="1558085">&#39;Z&#39;</span>&nbsp;<span class="op" id="1558089">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558094"><a href="/strconv/atof.go.html#1558049">c2</a></span>&nbsp;<span class="op" id="1558097">+=</span>&nbsp;<span class="string" id="1558100">&#39;a&#39;</span>&nbsp;<span class="op" id="1558104">-</span>&nbsp;<span class="string" id="1558106">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558116">if</span>&nbsp;<span class="ident" id="1558119"><a href="/strconv/atof.go.html#1557982">c1</a></span>&nbsp;<span class="op" id="1558122">!=</span>&nbsp;<span class="ident" id="1558125"><a href="/strconv/atof.go.html#1558049">c2</a></span>&nbsp;<span class="op" id="1558128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558133">return</span>&nbsp;<span class="ident" id="1558140">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558148">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558154">return</span>&nbsp;<span class="ident" id="1558161">true</span><br>
<span class="lineno"></span><span class="op" id="1558166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1558169">func</span>&nbsp;<span class="ident" id="1558174">special</span><span class="op" id="1558181">(</span><span class="ident" id="1558182">s</span>&nbsp;<span class="builtintype" id="1558184">string</span><span class="op" id="1558190">)</span>&nbsp;<span class="op" id="1558192">(</span><span class="ident" id="1558193">f</span>&nbsp;<span class="builtintype" id="1558195">float64</span><span class="op" id="1558202">,</span>&nbsp;<span class="ident" id="1558204">ok</span>&nbsp;<span class="builtintype" id="1558207">bool</span><span class="op" id="1558211">)</span>&nbsp;<span class="op" id="1558213">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558216">if</span>&nbsp;<span class="builtinfunc" id="1558219">len</span><span class="op" id="1558222">(</span><span class="ident" id="1558223"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558224">)</span>&nbsp;<span class="op" id="1558226">==</span>&nbsp;<span class="num" id="1558229">0</span>&nbsp;<span class="op" id="1558231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558235">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558246">switch</span>&nbsp;<span class="ident" id="1558253"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558254">[</span><span class="num" id="1558255">0</span><span class="op" id="1558256">]</span>&nbsp;<span class="op" id="1558258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558261">default</span><span class="op" id="1558268">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558272">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558280">case</span>&nbsp;<span class="string" id="1558285">&#39;+&#39;</span><span class="op" id="1558288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558292">if</span>&nbsp;<span class="ident" id="1558295"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558310">(</span><span class="ident" id="1558311"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558312">,</span>&nbsp;<span class="string" id="1558314">&#34;+inf&#34;</span><span class="op" id="1558320">)</span>&nbsp;<span class="op" id="1558322">||</span>&nbsp;<span class="ident" id="1558325"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558340">(</span><span class="ident" id="1558341"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558342">,</span>&nbsp;<span class="string" id="1558344">&#34;+infinity&#34;</span><span class="op" id="1558355">)</span>&nbsp;<span class="op" id="1558357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558362">return</span>&nbsp;<span class="ident" id="1558369"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1558373">.</span><span class="ident" id="1558374">Inf</span><span class="op" id="1558377">(</span><span class="num" id="1558378">1</span><span class="op" id="1558379">)</span><span class="op" id="1558380">,</span>&nbsp;<span class="ident" id="1558382">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558389">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558392">case</span>&nbsp;<span class="string" id="1558397">&#39;-&#39;</span><span class="op" id="1558400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558404">if</span>&nbsp;<span class="ident" id="1558407"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558422">(</span><span class="ident" id="1558423"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558424">,</span>&nbsp;<span class="string" id="1558426">&#34;-inf&#34;</span><span class="op" id="1558432">)</span>&nbsp;<span class="op" id="1558434">||</span>&nbsp;<span class="ident" id="1558437"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558452">(</span><span class="ident" id="1558453"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558454">,</span>&nbsp;<span class="string" id="1558456">&#34;-infinity&#34;</span><span class="op" id="1558467">)</span>&nbsp;<span class="op" id="1558469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558474">return</span>&nbsp;<span class="ident" id="1558481"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1558485">.</span><span class="ident" id="1558486">Inf</span><span class="op" id="1558489">(</span><span class="op" id="1558490">-</span><span class="num" id="1558491">1</span><span class="op" id="1558492">)</span><span class="op" id="1558493">,</span>&nbsp;<span class="ident" id="1558495">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558505">case</span>&nbsp;<span class="string" id="1558510">&#39;n&#39;</span><span class="op" id="1558513">,</span>&nbsp;<span class="string" id="1558515">&#39;N&#39;</span><span class="op" id="1558518">:</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558522">if</span>&nbsp;<span class="ident" id="1558525"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558540">(</span><span class="ident" id="1558541"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558542">,</span>&nbsp;<span class="string" id="1558544">&#34;nan&#34;</span><span class="op" id="1558549">)</span>&nbsp;<span class="op" id="1558551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558556">return</span>&nbsp;<span class="ident" id="1558563"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1558567">.</span><span class="ident" id="1558568">NaN</span><span class="op" id="1558571">(</span><span class="op" id="1558572">)</span><span class="op" id="1558573">,</span>&nbsp;<span class="ident" id="1558575">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558585">case</span>&nbsp;<span class="string" id="1558590">&#39;i&#39;</span><span class="op" id="1558593">,</span>&nbsp;<span class="string" id="1558595">&#39;I&#39;</span><span class="op" id="1558598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558602">if</span>&nbsp;<span class="ident" id="1558605"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558620">(</span><span class="ident" id="1558621"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558622">,</span>&nbsp;<span class="string" id="1558624">&#34;inf&#34;</span><span class="op" id="1558629">)</span>&nbsp;<span class="op" id="1558631">||</span>&nbsp;<span class="ident" id="1558634"><a href="/strconv/atof.go.html#1557867">equalIgnoreCase</a></span><span class="op" id="1558649">(</span><span class="ident" id="1558650"><a href="/strconv/atof.go.html#1558182">s</a></span><span class="op" id="1558651">,</span>&nbsp;<span class="string" id="1558653">&#34;infinity&#34;</span><span class="op" id="1558663">)</span>&nbsp;<span class="op" id="1558665">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558670">return</span>&nbsp;<span class="ident" id="1558677"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1558681">.</span><span class="ident" id="1558682">Inf</span><span class="op" id="1558685">(</span><span class="num" id="1558686">1</span><span class="op" id="1558687">)</span><span class="op" id="1558688">,</span>&nbsp;<span class="ident" id="1558690">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558703">return</span><br>
<span class="lineno"></span><span class="op" id="1558710">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="1558713">func</span>&nbsp;<span class="op" id="1558718">(</span><span class="ident" id="1558719">b</span>&nbsp;<span class="op" id="1558721">*</span><span class="ident" id="1558722"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1558729">)</span>&nbsp;<span class="ident" id="1558731">set</span><span class="op" id="1558734">(</span><span class="ident" id="1558735">s</span>&nbsp;<span class="builtintype" id="1558737">string</span><span class="op" id="1558743">)</span>&nbsp;<span class="op" id="1558745">(</span><span class="ident" id="1558746">ok</span>&nbsp;<span class="builtintype" id="1558749">bool</span><span class="op" id="1558753">)</span>&nbsp;<span class="op" id="1558755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558758">i</span>&nbsp;<span class="op" id="1558760">:=</span>&nbsp;<span class="num" id="1558763">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558766"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1558767">.</span><span class="ident" id="1558768">neg</span>&nbsp;<span class="op" id="1558772">=</span>&nbsp;<span class="ident" id="1558774">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558781"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1558782">.</span><span class="ident" id="1558783">trunc</span>&nbsp;<span class="op" id="1558789">=</span>&nbsp;<span class="ident" id="1558791">false</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1558799">//&nbsp;optional&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558817">if</span>&nbsp;<span class="ident" id="1558820"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1558822">&gt;=</span>&nbsp;<span class="builtinfunc" id="1558825">len</span><span class="op" id="1558828">(</span><span class="ident" id="1558829"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1558830">)</span>&nbsp;<span class="op" id="1558832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558836">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558844">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558847">switch</span>&nbsp;<span class="op" id="1558854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558857">case</span>&nbsp;<span class="ident" id="1558862"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1558863">[</span><span class="ident" id="1558864"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1558865">]</span>&nbsp;<span class="op" id="1558867">==</span>&nbsp;<span class="string" id="1558870">&#39;+&#39;</span><span class="op" id="1558873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558877"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1558878">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558882">case</span>&nbsp;<span class="ident" id="1558887"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1558888">[</span><span class="ident" id="1558889"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1558890">]</span>&nbsp;<span class="op" id="1558892">==</span>&nbsp;<span class="string" id="1558895">&#39;-&#39;</span><span class="op" id="1558898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558902"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1558903">.</span><span class="ident" id="1558904">neg</span>&nbsp;<span class="op" id="1558908">=</span>&nbsp;<span class="ident" id="1558910">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558917"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1558918">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1558922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1558926">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558937">sawdot</span>&nbsp;<span class="op" id="1558944">:=</span>&nbsp;<span class="ident" id="1558947">false</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1558954">sawdigits</span>&nbsp;<span class="op" id="1558964">:=</span>&nbsp;<span class="ident" id="1558967">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1558974">for</span>&nbsp;<span class="op" id="1558978">;</span>&nbsp;<span class="ident" id="1558980"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1558982">&lt;</span>&nbsp;<span class="builtinfunc" id="1558984">len</span><span class="op" id="1558987">(</span><span class="ident" id="1558988"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1558989">)</span><span class="op" id="1558990">;</span>&nbsp;<span class="ident" id="1558992"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1558993">++</span>&nbsp;<span class="op" id="1558996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559000">switch</span>&nbsp;<span class="op" id="1559007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559011">case</span>&nbsp;<span class="ident" id="1559016"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559017">[</span><span class="ident" id="1559018"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559019">]</span>&nbsp;<span class="op" id="1559021">==</span>&nbsp;<span class="string" id="1559024">&#39;.&#39;</span><span class="op" id="1559027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559032">if</span>&nbsp;<span class="ident" id="1559035"><a href="/strconv/atof.go.html#1558937">sawdot</a></span>&nbsp;<span class="op" id="1559042">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559048">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559063"><a href="/strconv/atof.go.html#1558937">sawdot</a></span>&nbsp;<span class="op" id="1559070">=</span>&nbsp;<span class="ident" id="1559072">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559080"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559081">.</span><span class="ident" id="1559082">dp</span>&nbsp;<span class="op" id="1559085">=</span>&nbsp;<span class="ident" id="1559087"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559088">.</span><span class="ident" id="1559089">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559095">continue</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559107">case</span>&nbsp;<span class="string" id="1559112">&#39;0&#39;</span>&nbsp;<span class="op" id="1559116">&lt;=</span>&nbsp;<span class="ident" id="1559119"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559120">[</span><span class="ident" id="1559121"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559122">]</span>&nbsp;<span class="op" id="1559124">&amp;&amp;</span>&nbsp;<span class="ident" id="1559127"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559128">[</span><span class="ident" id="1559129"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559130">]</span>&nbsp;<span class="op" id="1559132">&lt;=</span>&nbsp;<span class="string" id="1559135">&#39;9&#39;</span><span class="op" id="1559138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559143"><a href="/strconv/atof.go.html#1558954">sawdigits</a></span>&nbsp;<span class="op" id="1559153">=</span>&nbsp;<span class="ident" id="1559155">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559163">if</span>&nbsp;<span class="ident" id="1559166"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559167">[</span><span class="ident" id="1559168"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559169">]</span>&nbsp;<span class="op" id="1559171">==</span>&nbsp;<span class="string" id="1559174">&#39;0&#39;</span>&nbsp;<span class="op" id="1559178">&amp;&amp;</span>&nbsp;<span class="ident" id="1559181"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559182">.</span><span class="ident" id="1559183">nd</span>&nbsp;<span class="op" id="1559186">==</span>&nbsp;<span class="num" id="1559189">0</span>&nbsp;<span class="op" id="1559191">{</span>&nbsp;<span class="comment" id="1559193">//&nbsp;ignore&nbsp;leading&nbsp;zeros</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559221"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559222">.</span><span class="ident" id="1559223">dp</span><span class="op" id="1559225">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559232">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559249">if</span>&nbsp;<span class="ident" id="1559252"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559253">.</span><span class="ident" id="1559254">nd</span>&nbsp;<span class="op" id="1559257">&lt;</span>&nbsp;<span class="builtinfunc" id="1559259">len</span><span class="op" id="1559262">(</span><span class="ident" id="1559263"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559264">.</span><span class="ident" id="1559265">d</span><span class="op" id="1559266">)</span>&nbsp;<span class="op" id="1559268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559274"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559275">.</span><span class="ident" id="1559276">d</span><span class="op" id="1559277">[</span><span class="ident" id="1559278"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559279">.</span><span class="ident" id="1559280">nd</span><span class="op" id="1559282">]</span>&nbsp;<span class="op" id="1559284">=</span>&nbsp;<span class="ident" id="1559286"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559287">[</span><span class="ident" id="1559288"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559295"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559296">.</span><span class="ident" id="1559297">nd</span><span class="op" id="1559299">++</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559305">}</span>&nbsp;<span class="keyword" id="1559307">else</span>&nbsp;<span class="keyword" id="1559312">if</span>&nbsp;<span class="ident" id="1559315"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559316">[</span><span class="ident" id="1559317"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559318">]</span>&nbsp;<span class="op" id="1559320">!=</span>&nbsp;<span class="string" id="1559323">&#39;0&#39;</span>&nbsp;<span class="op" id="1559327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559333"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559334">.</span><span class="ident" id="1559335">trunc</span>&nbsp;<span class="op" id="1559341">=</span>&nbsp;<span class="ident" id="1559343">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559356">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559367">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559371">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559381">if</span>&nbsp;<span class="op" id="1559384">!</span><span class="ident" id="1559385"><a href="/strconv/atof.go.html#1558954">sawdigits</a></span>&nbsp;<span class="op" id="1559395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559399">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559407">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559410">if</span>&nbsp;<span class="op" id="1559413">!</span><span class="ident" id="1559414"><a href="/strconv/atof.go.html#1558937">sawdot</a></span>&nbsp;<span class="op" id="1559421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559425"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559426">.</span><span class="ident" id="1559427">dp</span>&nbsp;<span class="op" id="1559430">=</span>&nbsp;<span class="ident" id="1559432"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1559433">.</span><span class="ident" id="1559434">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1559442">//&nbsp;optional&nbsp;exponent&nbsp;moves&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1559485">//&nbsp;if&nbsp;we&nbsp;read&nbsp;a&nbsp;very&nbsp;large,&nbsp;very&nbsp;long&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1559532">//&nbsp;just&nbsp;be&nbsp;sure&nbsp;to&nbsp;move&nbsp;the&nbsp;decimal&nbsp;point&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1559578">//&nbsp;a&nbsp;lot&nbsp;(say,&nbsp;100000).&nbsp;&nbsp;it&nbsp;doesn&#39;t&nbsp;matter&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1559630">//&nbsp;not&nbsp;the&nbsp;exact&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559656">if</span>&nbsp;<span class="ident" id="1559659"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1559661">&lt;</span>&nbsp;<span class="builtinfunc" id="1559663">len</span><span class="op" id="1559666">(</span><span class="ident" id="1559667"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559668">)</span>&nbsp;<span class="op" id="1559670">&amp;&amp;</span>&nbsp;<span class="op" id="1559673">(</span><span class="ident" id="1559674"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559675">[</span><span class="ident" id="1559676"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559677">]</span>&nbsp;<span class="op" id="1559679">==</span>&nbsp;<span class="string" id="1559682">&#39;e&#39;</span>&nbsp;<span class="op" id="1559686">||</span>&nbsp;<span class="ident" id="1559689"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559690">[</span><span class="ident" id="1559691"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559692">]</span>&nbsp;<span class="op" id="1559694">==</span>&nbsp;<span class="string" id="1559697">&#39;E&#39;</span><span class="op" id="1559700">)</span>&nbsp;<span class="op" id="1559702">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559706"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559707">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559712">if</span>&nbsp;<span class="ident" id="1559715"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1559717">&gt;=</span>&nbsp;<span class="builtinfunc" id="1559720">len</span><span class="op" id="1559723">(</span><span class="ident" id="1559724"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559725">)</span>&nbsp;<span class="op" id="1559727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559732">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559745">esign</span>&nbsp;<span class="op" id="1559751">:=</span>&nbsp;<span class="num" id="1559754">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559758">if</span>&nbsp;<span class="ident" id="1559761"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559762">[</span><span class="ident" id="1559763"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559764">]</span>&nbsp;<span class="op" id="1559766">==</span>&nbsp;<span class="string" id="1559769">&#39;+&#39;</span>&nbsp;<span class="op" id="1559773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559778"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559779">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559784">}</span>&nbsp;<span class="keyword" id="1559786">else</span>&nbsp;<span class="keyword" id="1559791">if</span>&nbsp;<span class="ident" id="1559794"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559795">[</span><span class="ident" id="1559796"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559797">]</span>&nbsp;<span class="op" id="1559799">==</span>&nbsp;<span class="string" id="1559802">&#39;-&#39;</span>&nbsp;<span class="op" id="1559806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559811"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559812">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559818"><a href="/strconv/atof.go.html#1559745">esign</a></span>&nbsp;<span class="op" id="1559824">=</span>&nbsp;<span class="op" id="1559826">-</span><span class="num" id="1559827">1</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559835">if</span>&nbsp;<span class="ident" id="1559838"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1559840">&gt;=</span>&nbsp;<span class="builtinfunc" id="1559843">len</span><span class="op" id="1559846">(</span><span class="ident" id="1559847"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559848">)</span>&nbsp;<span class="op" id="1559850">||</span>&nbsp;<span class="ident" id="1559853"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559854">[</span><span class="ident" id="1559855"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559856">]</span>&nbsp;<span class="op" id="1559858">&lt;</span>&nbsp;<span class="string" id="1559860">&#39;0&#39;</span>&nbsp;<span class="op" id="1559864">||</span>&nbsp;<span class="ident" id="1559867"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559868">[</span><span class="ident" id="1559869"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559870">]</span>&nbsp;<span class="op" id="1559872">&gt;</span>&nbsp;<span class="string" id="1559874">&#39;9&#39;</span>&nbsp;<span class="op" id="1559878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559883">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1559892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559896">e</span>&nbsp;<span class="op" id="1559898">:=</span>&nbsp;<span class="num" id="1559901">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559905">for</span>&nbsp;<span class="op" id="1559909">;</span>&nbsp;<span class="ident" id="1559911"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1559913">&lt;</span>&nbsp;<span class="builtinfunc" id="1559915">len</span><span class="op" id="1559918">(</span><span class="ident" id="1559919"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559920">)</span>&nbsp;<span class="op" id="1559922">&amp;&amp;</span>&nbsp;<span class="string" id="1559925">&#39;0&#39;</span>&nbsp;<span class="op" id="1559929">&lt;=</span>&nbsp;<span class="ident" id="1559932"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559933">[</span><span class="ident" id="1559934"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559935">]</span>&nbsp;<span class="op" id="1559937">&amp;&amp;</span>&nbsp;<span class="ident" id="1559940"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559941">[</span><span class="ident" id="1559942"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559943">]</span>&nbsp;<span class="op" id="1559945">&lt;=</span>&nbsp;<span class="string" id="1559948">&#39;9&#39;</span><span class="op" id="1559951">;</span>&nbsp;<span class="ident" id="1559953"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559954">++</span>&nbsp;<span class="op" id="1559957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1559962">if</span>&nbsp;<span class="ident" id="1559965"><a href="/strconv/atof.go.html#1559896">e</a></span>&nbsp;<span class="op" id="1559967">&lt;</span>&nbsp;<span class="num" id="1559969">10000</span>&nbsp;<span class="op" id="1559975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1559981"><a href="/strconv/atof.go.html#1559896">e</a></span>&nbsp;<span class="op" id="1559983">=</span>&nbsp;<span class="ident" id="1559985"><a href="/strconv/atof.go.html#1559896">e</a></span><span class="op" id="1559986">*</span><span class="num" id="1559987">10</span>&nbsp;<span class="op" id="1559990">+</span>&nbsp;<span class="builtintype" id="1559992">int</span><span class="op" id="1559995">(</span><span class="ident" id="1559996"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1559997">[</span><span class="ident" id="1559998"><a href="/strconv/atof.go.html#1558758">i</a></span><span class="op" id="1559999">]</span><span class="op" id="1560000">)</span>&nbsp;<span class="op" id="1560002">-</span>&nbsp;<span class="string" id="1560004">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560015">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560019"><a href="/strconv/atof.go.html#1558719">b</a></span><span class="op" id="1560020">.</span><span class="ident" id="1560021">dp</span>&nbsp;<span class="op" id="1560024">+=</span>&nbsp;<span class="ident" id="1560027"><a href="/strconv/atof.go.html#1559896">e</a></span>&nbsp;<span class="op" id="1560029">*</span>&nbsp;<span class="ident" id="1560031"><a href="/strconv/atof.go.html#1559745">esign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560042">if</span>&nbsp;<span class="ident" id="1560045"><a href="/strconv/atof.go.html#1558758">i</a></span>&nbsp;<span class="op" id="1560047">!=</span>&nbsp;<span class="builtinfunc" id="1560050">len</span><span class="op" id="1560053">(</span><span class="ident" id="1560054"><a href="/strconv/atof.go.html#1558735">s</a></span><span class="op" id="1560055">)</span>&nbsp;<span class="op" id="1560057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560061">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560073"><a href="/strconv/atof.go.html#1558746">ok</a></span>&nbsp;<span class="op" id="1560076">=</span>&nbsp;<span class="ident" id="1560078">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560084">return</span><br>
<span class="lineno"></span><span class="op" id="1560091">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="1560094">//&nbsp;readFloat&nbsp;reads&nbsp;a&nbsp;decimal&nbsp;mantissa&nbsp;and&nbsp;exponent&nbsp;from&nbsp;a&nbsp;float</span><br>
<span class="lineno"></span><span class="comment" id="1560158">//&nbsp;string&nbsp;representation.&nbsp;It&nbsp;sets&nbsp;ok&nbsp;to&nbsp;false&nbsp;if&nbsp;the&nbsp;number&nbsp;could</span><br>
<span class="lineno"></span><span class="comment" id="1560224">//&nbsp;not&nbsp;fit&nbsp;return&nbsp;types&nbsp;or&nbsp;is&nbsp;invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="1560263">func</span>&nbsp;<span class="ident" id="1560268">readFloat</span><span class="op" id="1560277">(</span><span class="ident" id="1560278">s</span>&nbsp;<span class="builtintype" id="1560280">string</span><span class="op" id="1560286">)</span>&nbsp;<span class="op" id="1560288">(</span><span class="ident" id="1560289">mantissa</span>&nbsp;<span class="ident" id="1560298">uint64</span><span class="op" id="1560304">,</span>&nbsp;<span class="ident" id="1560306">exp</span>&nbsp;<span class="builtintype" id="1560310">int</span><span class="op" id="1560313">,</span>&nbsp;<span class="ident" id="1560315">neg</span><span class="op" id="1560318">,</span>&nbsp;<span class="ident" id="1560320">trunc</span><span class="op" id="1560325">,</span>&nbsp;<span class="ident" id="1560327">ok</span>&nbsp;<span class="builtintype" id="1560330">bool</span><span class="op" id="1560334">)</span>&nbsp;<span class="op" id="1560336">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560339">const</span>&nbsp;<span class="ident" id="1560345">uint64digits</span>&nbsp;<span class="op" id="1560358">=</span>&nbsp;<span class="num" id="1560360">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560364">i</span>&nbsp;<span class="op" id="1560366">:=</span>&nbsp;<span class="num" id="1560369">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1560373">//&nbsp;optional&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560391">if</span>&nbsp;<span class="ident" id="1560394"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1560396">&gt;=</span>&nbsp;<span class="builtinfunc" id="1560399">len</span><span class="op" id="1560402">(</span><span class="ident" id="1560403"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560404">)</span>&nbsp;<span class="op" id="1560406">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560410">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560421">switch</span>&nbsp;<span class="op" id="1560428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560431">case</span>&nbsp;<span class="ident" id="1560436"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560437">[</span><span class="ident" id="1560438"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560439">]</span>&nbsp;<span class="op" id="1560441">==</span>&nbsp;<span class="string" id="1560444">&#39;+&#39;</span><span class="op" id="1560447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560451"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560452">++</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560456">case</span>&nbsp;<span class="ident" id="1560461"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560462">[</span><span class="ident" id="1560463"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560464">]</span>&nbsp;<span class="op" id="1560466">==</span>&nbsp;<span class="string" id="1560469">&#39;-&#39;</span><span class="op" id="1560472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560476"><a href="/strconv/atof.go.html#1560315">neg</a></span>&nbsp;<span class="op" id="1560480">=</span>&nbsp;<span class="ident" id="1560482">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560489"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560490">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1560498">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560509">sawdot</span>&nbsp;<span class="op" id="1560516">:=</span>&nbsp;<span class="ident" id="1560519">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560526">sawdigits</span>&nbsp;<span class="op" id="1560536">:=</span>&nbsp;<span class="ident" id="1560539">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560546">nd</span>&nbsp;<span class="op" id="1560549">:=</span>&nbsp;<span class="num" id="1560552">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560555">ndMant</span>&nbsp;<span class="op" id="1560562">:=</span>&nbsp;<span class="num" id="1560565">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560568">dp</span>&nbsp;<span class="op" id="1560571">:=</span>&nbsp;<span class="num" id="1560574">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560577">for</span>&nbsp;<span class="op" id="1560581">;</span>&nbsp;<span class="ident" id="1560583"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1560585">&lt;</span>&nbsp;<span class="builtinfunc" id="1560587">len</span><span class="op" id="1560590">(</span><span class="ident" id="1560591"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560592">)</span><span class="op" id="1560593">;</span>&nbsp;<span class="ident" id="1560595"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560596">++</span>&nbsp;<span class="op" id="1560599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560603">switch</span>&nbsp;<span class="ident" id="1560610">c</span>&nbsp;<span class="op" id="1560612">:=</span>&nbsp;<span class="ident" id="1560615"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560616">[</span><span class="ident" id="1560617"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560618">]</span><span class="op" id="1560619">;</span>&nbsp;<span class="ident" id="1560621">true</span>&nbsp;<span class="op" id="1560626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560630">case</span>&nbsp;<span class="ident" id="1560635"><a href="/strconv/atof.go.html#1560610">c</a></span>&nbsp;<span class="op" id="1560637">==</span>&nbsp;<span class="string" id="1560640">&#39;.&#39;</span><span class="op" id="1560643">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560648">if</span>&nbsp;<span class="ident" id="1560651"><a href="/strconv/atof.go.html#1560509">sawdot</a></span>&nbsp;<span class="op" id="1560658">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560664">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560679"><a href="/strconv/atof.go.html#1560509">sawdot</a></span>&nbsp;<span class="op" id="1560686">=</span>&nbsp;<span class="ident" id="1560688">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560696"><a href="/strconv/atof.go.html#1560568">dp</a></span>&nbsp;<span class="op" id="1560699">=</span>&nbsp;<span class="ident" id="1560701"><a href="/strconv/atof.go.html#1560546">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560707">continue</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560719">case</span>&nbsp;<span class="string" id="1560724">&#39;0&#39;</span>&nbsp;<span class="op" id="1560728">&lt;=</span>&nbsp;<span class="ident" id="1560731"><a href="/strconv/atof.go.html#1560610">c</a></span>&nbsp;<span class="op" id="1560733">&amp;&amp;</span>&nbsp;<span class="ident" id="1560736"><a href="/strconv/atof.go.html#1560610">c</a></span>&nbsp;<span class="op" id="1560738">&lt;=</span>&nbsp;<span class="string" id="1560741">&#39;9&#39;</span><span class="op" id="1560744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560749"><a href="/strconv/atof.go.html#1560526">sawdigits</a></span>&nbsp;<span class="op" id="1560759">=</span>&nbsp;<span class="ident" id="1560761">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560769">if</span>&nbsp;<span class="ident" id="1560772"><a href="/strconv/atof.go.html#1560610">c</a></span>&nbsp;<span class="op" id="1560774">==</span>&nbsp;<span class="string" id="1560777">&#39;0&#39;</span>&nbsp;<span class="op" id="1560781">&amp;&amp;</span>&nbsp;<span class="ident" id="1560784"><a href="/strconv/atof.go.html#1560546">nd</a></span>&nbsp;<span class="op" id="1560787">==</span>&nbsp;<span class="num" id="1560790">0</span>&nbsp;<span class="op" id="1560792">{</span>&nbsp;<span class="comment" id="1560794">//&nbsp;ignore&nbsp;leading&nbsp;zeros</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560822"><a href="/strconv/atof.go.html#1560568">dp</a></span><span class="op" id="1560824">--</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560831">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560848"><a href="/strconv/atof.go.html#1560546">nd</a></span><span class="op" id="1560850">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560856">if</span>&nbsp;<span class="ident" id="1560859"><a href="/strconv/atof.go.html#1560555">ndMant</a></span>&nbsp;<span class="op" id="1560866">&lt;</span>&nbsp;<span class="ident" id="1560868"><a href="/strconv/atof.go.html#1560345">uint64digits</a></span>&nbsp;<span class="op" id="1560881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560887"><a href="/strconv/atof.go.html#1560289">mantissa</a></span>&nbsp;<span class="op" id="1560896">*=</span>&nbsp;<span class="num" id="1560899">10</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560906"><a href="/strconv/atof.go.html#1560289">mantissa</a></span>&nbsp;<span class="op" id="1560915">+=</span>&nbsp;<span class="ident" id="1560918">uint64</span><span class="op" id="1560924">(</span><span class="ident" id="1560925"><a href="/strconv/atof.go.html#1560610">c</a></span>&nbsp;<span class="op" id="1560927">-</span>&nbsp;<span class="string" id="1560929">&#39;0&#39;</span><span class="op" id="1560932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560938"><a href="/strconv/atof.go.html#1560555">ndMant</a></span><span class="op" id="1560944">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560950">}</span>&nbsp;<span class="keyword" id="1560952">else</span>&nbsp;<span class="keyword" id="1560957">if</span>&nbsp;<span class="ident" id="1560960"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1560961">[</span><span class="ident" id="1560962"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1560963">]</span>&nbsp;<span class="op" id="1560965">!=</span>&nbsp;<span class="string" id="1560968">&#39;0&#39;</span>&nbsp;<span class="op" id="1560972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1560978"><a href="/strconv/atof.go.html#1560320">trunc</a></span>&nbsp;<span class="op" id="1560984">=</span>&nbsp;<span class="ident" id="1560986">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1560994">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1560999">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561014">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561024">if</span>&nbsp;<span class="op" id="1561027">!</span><span class="ident" id="1561028"><a href="/strconv/atof.go.html#1560526">sawdigits</a></span>&nbsp;<span class="op" id="1561038">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561053">if</span>&nbsp;<span class="op" id="1561056">!</span><span class="ident" id="1561057"><a href="/strconv/atof.go.html#1560509">sawdot</a></span>&nbsp;<span class="op" id="1561064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561068"><a href="/strconv/atof.go.html#1560568">dp</a></span>&nbsp;<span class="op" id="1561071">=</span>&nbsp;<span class="ident" id="1561073"><a href="/strconv/atof.go.html#1560546">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561077">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561081">//&nbsp;optional&nbsp;exponent&nbsp;moves&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561124">//&nbsp;if&nbsp;we&nbsp;read&nbsp;a&nbsp;very&nbsp;large,&nbsp;very&nbsp;long&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561171">//&nbsp;just&nbsp;be&nbsp;sure&nbsp;to&nbsp;move&nbsp;the&nbsp;decimal&nbsp;point&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561217">//&nbsp;a&nbsp;lot&nbsp;(say,&nbsp;100000).&nbsp;&nbsp;it&nbsp;doesn&#39;t&nbsp;matter&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561269">//&nbsp;not&nbsp;the&nbsp;exact&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561295">if</span>&nbsp;<span class="ident" id="1561298"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1561300">&lt;</span>&nbsp;<span class="builtinfunc" id="1561302">len</span><span class="op" id="1561305">(</span><span class="ident" id="1561306"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561307">)</span>&nbsp;<span class="op" id="1561309">&amp;&amp;</span>&nbsp;<span class="op" id="1561312">(</span><span class="ident" id="1561313"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561314">[</span><span class="ident" id="1561315"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561316">]</span>&nbsp;<span class="op" id="1561318">==</span>&nbsp;<span class="string" id="1561321">&#39;e&#39;</span>&nbsp;<span class="op" id="1561325">||</span>&nbsp;<span class="ident" id="1561328"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561329">[</span><span class="ident" id="1561330"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561331">]</span>&nbsp;<span class="op" id="1561333">==</span>&nbsp;<span class="string" id="1561336">&#39;E&#39;</span><span class="op" id="1561339">)</span>&nbsp;<span class="op" id="1561341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561345"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561346">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561351">if</span>&nbsp;<span class="ident" id="1561354"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1561356">&gt;=</span>&nbsp;<span class="builtinfunc" id="1561359">len</span><span class="op" id="1561362">(</span><span class="ident" id="1561363"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561364">)</span>&nbsp;<span class="op" id="1561366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561371">return</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561384">esign</span>&nbsp;<span class="op" id="1561390">:=</span>&nbsp;<span class="num" id="1561393">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561397">if</span>&nbsp;<span class="ident" id="1561400"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561401">[</span><span class="ident" id="1561402"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561403">]</span>&nbsp;<span class="op" id="1561405">==</span>&nbsp;<span class="string" id="1561408">&#39;+&#39;</span>&nbsp;<span class="op" id="1561412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561417"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561418">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561423">}</span>&nbsp;<span class="keyword" id="1561425">else</span>&nbsp;<span class="keyword" id="1561430">if</span>&nbsp;<span class="ident" id="1561433"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561434">[</span><span class="ident" id="1561435"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561436">]</span>&nbsp;<span class="op" id="1561438">==</span>&nbsp;<span class="string" id="1561441">&#39;-&#39;</span>&nbsp;<span class="op" id="1561445">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561450"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561451">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561457"><a href="/strconv/atof.go.html#1561384">esign</a></span>&nbsp;<span class="op" id="1561463">=</span>&nbsp;<span class="op" id="1561465">-</span><span class="num" id="1561466">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561474">if</span>&nbsp;<span class="ident" id="1561477"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1561479">&gt;=</span>&nbsp;<span class="builtinfunc" id="1561482">len</span><span class="op" id="1561485">(</span><span class="ident" id="1561486"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561487">)</span>&nbsp;<span class="op" id="1561489">||</span>&nbsp;<span class="ident" id="1561492"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561493">[</span><span class="ident" id="1561494"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561495">]</span>&nbsp;<span class="op" id="1561497">&lt;</span>&nbsp;<span class="string" id="1561499">&#39;0&#39;</span>&nbsp;<span class="op" id="1561503">||</span>&nbsp;<span class="ident" id="1561506"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561507">[</span><span class="ident" id="1561508"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561509">]</span>&nbsp;<span class="op" id="1561511">&gt;</span>&nbsp;<span class="string" id="1561513">&#39;9&#39;</span>&nbsp;<span class="op" id="1561517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561522">return</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561535">e</span>&nbsp;<span class="op" id="1561537">:=</span>&nbsp;<span class="num" id="1561540">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561544">for</span>&nbsp;<span class="op" id="1561548">;</span>&nbsp;<span class="ident" id="1561550"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1561552">&lt;</span>&nbsp;<span class="builtinfunc" id="1561554">len</span><span class="op" id="1561557">(</span><span class="ident" id="1561558"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561559">)</span>&nbsp;<span class="op" id="1561561">&amp;&amp;</span>&nbsp;<span class="string" id="1561564">&#39;0&#39;</span>&nbsp;<span class="op" id="1561568">&lt;=</span>&nbsp;<span class="ident" id="1561571"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561572">[</span><span class="ident" id="1561573"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561574">]</span>&nbsp;<span class="op" id="1561576">&amp;&amp;</span>&nbsp;<span class="ident" id="1561579"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561580">[</span><span class="ident" id="1561581"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561582">]</span>&nbsp;<span class="op" id="1561584">&lt;=</span>&nbsp;<span class="string" id="1561587">&#39;9&#39;</span><span class="op" id="1561590">;</span>&nbsp;<span class="ident" id="1561592"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561593">++</span>&nbsp;<span class="op" id="1561596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561601">if</span>&nbsp;<span class="ident" id="1561604"><a href="/strconv/atof.go.html#1561535">e</a></span>&nbsp;<span class="op" id="1561606">&lt;</span>&nbsp;<span class="num" id="1561608">10000</span>&nbsp;<span class="op" id="1561614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561620"><a href="/strconv/atof.go.html#1561535">e</a></span>&nbsp;<span class="op" id="1561622">=</span>&nbsp;<span class="ident" id="1561624"><a href="/strconv/atof.go.html#1561535">e</a></span><span class="op" id="1561625">*</span><span class="num" id="1561626">10</span>&nbsp;<span class="op" id="1561629">+</span>&nbsp;<span class="builtintype" id="1561631">int</span><span class="op" id="1561634">(</span><span class="ident" id="1561635"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561636">[</span><span class="ident" id="1561637"><a href="/strconv/atof.go.html#1560364">i</a></span><span class="op" id="1561638">]</span><span class="op" id="1561639">)</span>&nbsp;<span class="op" id="1561641">-</span>&nbsp;<span class="string" id="1561643">&#39;0&#39;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561658"><a href="/strconv/atof.go.html#1560568">dp</a></span>&nbsp;<span class="op" id="1561661">+=</span>&nbsp;<span class="ident" id="1561664"><a href="/strconv/atof.go.html#1561535">e</a></span>&nbsp;<span class="op" id="1561666">*</span>&nbsp;<span class="ident" id="1561668"><a href="/strconv/atof.go.html#1561384">esign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561679">if</span>&nbsp;<span class="ident" id="1561682"><a href="/strconv/atof.go.html#1560364">i</a></span>&nbsp;<span class="op" id="1561684">!=</span>&nbsp;<span class="builtinfunc" id="1561687">len</span><span class="op" id="1561690">(</span><span class="ident" id="1561691"><a href="/strconv/atof.go.html#1560278">s</a></span><span class="op" id="1561692">)</span>&nbsp;<span class="op" id="1561694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561698">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1561706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561710"><a href="/strconv/atof.go.html#1560306">exp</a></span>&nbsp;<span class="op" id="1561714">=</span>&nbsp;<span class="ident" id="1561716"><a href="/strconv/atof.go.html#1560568">dp</a></span>&nbsp;<span class="op" id="1561719">-</span>&nbsp;<span class="ident" id="1561721"><a href="/strconv/atof.go.html#1560555">ndMant</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1561729"><a href="/strconv/atof.go.html#1560327">ok</a></span>&nbsp;<span class="op" id="1561732">=</span>&nbsp;<span class="ident" id="1561734">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561740">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="1561748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="1561751">//&nbsp;decimal&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;binary&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="1561799">var</span>&nbsp;<span class="ident" id="1561803">powtab</span>&nbsp;<span class="op" id="1561810">=</span>&nbsp;<span class="op" id="1561812">[</span><span class="op" id="1561813">]</span><span class="builtintype" id="1561814">int</span><span class="op" id="1561817">{</span><span class="num" id="1561818">1</span><span class="op" id="1561819">,</span>&nbsp;<span class="num" id="1561821">3</span><span class="op" id="1561822">,</span>&nbsp;<span class="num" id="1561824">6</span><span class="op" id="1561825">,</span>&nbsp;<span class="num" id="1561827">9</span><span class="op" id="1561828">,</span>&nbsp;<span class="num" id="1561830">13</span><span class="op" id="1561832">,</span>&nbsp;<span class="num" id="1561834">16</span><span class="op" id="1561836">,</span>&nbsp;<span class="num" id="1561838">19</span><span class="op" id="1561840">,</span>&nbsp;<span class="num" id="1561842">23</span><span class="op" id="1561844">,</span>&nbsp;<span class="num" id="1561846">26</span><span class="op" id="1561848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1561851">func</span>&nbsp;<span class="op" id="1561856">(</span><span class="ident" id="1561857">d</span>&nbsp;<span class="op" id="1561859">*</span><span class="ident" id="1561860"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><span class="op" id="1561867">)</span>&nbsp;<span class="ident" id="1561869">floatBits</span><span class="op" id="1561878">(</span><span class="ident" id="1561879">flt</span>&nbsp;<span class="op" id="1561883">*</span><span class="ident" id="1561884"><a href="/strconv/ftoa.go.html#1601816">floatInfo</a></span><span class="op" id="1561893">)</span>&nbsp;<span class="op" id="1561895">(</span><span class="ident" id="1561896">b</span>&nbsp;<span class="ident" id="1561898">uint64</span><span class="op" id="1561904">,</span>&nbsp;<span class="ident" id="1561906">overflow</span>&nbsp;<span class="builtintype" id="1561915">bool</span><span class="op" id="1561919">)</span>&nbsp;<span class="op" id="1561921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561924">var</span>&nbsp;<span class="ident" id="1561928">exp</span>&nbsp;<span class="builtintype" id="1561932">int</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561937">var</span>&nbsp;<span class="ident" id="1561941">mant</span>&nbsp;<span class="ident" id="1561946">uint64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1561955">//&nbsp;Zero&nbsp;is&nbsp;always&nbsp;a&nbsp;special&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1561990">if</span>&nbsp;<span class="ident" id="1561993"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1561994">.</span><span class="ident" id="1561995">nd</span>&nbsp;<span class="op" id="1561998">==</span>&nbsp;<span class="num" id="1562001">0</span>&nbsp;<span class="op" id="1562003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562007"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1562012">=</span>&nbsp;<span class="num" id="1562014">0</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562018"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562022">=</span>&nbsp;<span class="ident" id="1562024"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562027">.</span><span class="ident" id="1562028">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562035">goto</span>&nbsp;<span class="ident" id="1562040">out</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562049">//&nbsp;Obvious&nbsp;overflow/underflow.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562081">//&nbsp;These&nbsp;bounds&nbsp;are&nbsp;for&nbsp;64-bit&nbsp;floats.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562121">//&nbsp;Will&nbsp;have&nbsp;to&nbsp;change&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;support&nbsp;80-bit&nbsp;floats&nbsp;in&nbsp;the&nbsp;future.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562196">if</span>&nbsp;<span class="ident" id="1562199"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562200">.</span><span class="ident" id="1562201">dp</span>&nbsp;<span class="op" id="1562204">&gt;</span>&nbsp;<span class="num" id="1562206">310</span>&nbsp;<span class="op" id="1562210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562214">goto</span>&nbsp;<span class="ident" id="1562219">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562229">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562232">if</span>&nbsp;<span class="ident" id="1562235"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562236">.</span><span class="ident" id="1562237">dp</span>&nbsp;<span class="op" id="1562240">&lt;</span>&nbsp;<span class="op" id="1562242">-</span><span class="num" id="1562243">330</span>&nbsp;<span class="op" id="1562247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562251">//&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562261"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1562266">=</span>&nbsp;<span class="num" id="1562268">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562272"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562276">=</span>&nbsp;<span class="ident" id="1562278"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562281">.</span><span class="ident" id="1562282">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562289">goto</span>&nbsp;<span class="ident" id="1562294">out</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562303">//&nbsp;Scale&nbsp;by&nbsp;powers&nbsp;of&nbsp;two&nbsp;until&nbsp;in&nbsp;range&nbsp;[0.5,&nbsp;1.0)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562356"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562360">=</span>&nbsp;<span class="num" id="1562362">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562365">for</span>&nbsp;<span class="ident" id="1562369"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562370">.</span><span class="ident" id="1562371">dp</span>&nbsp;<span class="op" id="1562374">&gt;</span>&nbsp;<span class="num" id="1562376">0</span>&nbsp;<span class="op" id="1562378">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562382">var</span>&nbsp;<span class="ident" id="1562386">n</span>&nbsp;<span class="builtintype" id="1562388">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562394">if</span>&nbsp;<span class="ident" id="1562397"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562398">.</span><span class="ident" id="1562399">dp</span>&nbsp;<span class="op" id="1562402">&gt;=</span>&nbsp;<span class="builtinfunc" id="1562405">len</span><span class="op" id="1562408">(</span><span class="ident" id="1562409"><a href="/strconv/atof.go.html#1561803">powtab</a></span><span class="op" id="1562415">)</span>&nbsp;<span class="op" id="1562417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562422"><a href="/strconv/atof.go.html#1562386">n</a></span>&nbsp;<span class="op" id="1562424">=</span>&nbsp;<span class="num" id="1562426">27</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562431">}</span>&nbsp;<span class="keyword" id="1562433">else</span>&nbsp;<span class="op" id="1562438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562443"><a href="/strconv/atof.go.html#1562386">n</a></span>&nbsp;<span class="op" id="1562445">=</span>&nbsp;<span class="ident" id="1562447"><a href="/strconv/atof.go.html#1561803">powtab</a></span><span class="op" id="1562453">[</span><span class="ident" id="1562454"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562455">.</span><span class="ident" id="1562456">dp</span><span class="op" id="1562458">]</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562466"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562467">.</span><span class="ident" id="1562468">Shift</span><span class="op" id="1562473">(</span><span class="op" id="1562474">-</span><span class="ident" id="1562475"><a href="/strconv/atof.go.html#1562386">n</a></span><span class="op" id="1562476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562480"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562484">+=</span>&nbsp;<span class="ident" id="1562487"><a href="/strconv/atof.go.html#1562386">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562493">for</span>&nbsp;<span class="ident" id="1562497"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562498">.</span><span class="ident" id="1562499">dp</span>&nbsp;<span class="op" id="1562502">&lt;</span>&nbsp;<span class="num" id="1562504">0</span>&nbsp;<span class="op" id="1562506">||</span>&nbsp;<span class="ident" id="1562509"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562510">.</span><span class="ident" id="1562511">dp</span>&nbsp;<span class="op" id="1562514">==</span>&nbsp;<span class="num" id="1562517">0</span>&nbsp;<span class="op" id="1562519">&amp;&amp;</span>&nbsp;<span class="ident" id="1562522"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562523">.</span><span class="ident" id="1562524">d</span><span class="op" id="1562525">[</span><span class="num" id="1562526">0</span><span class="op" id="1562527">]</span>&nbsp;<span class="op" id="1562529">&lt;</span>&nbsp;<span class="string" id="1562531">&#39;5&#39;</span>&nbsp;<span class="op" id="1562535">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562539">var</span>&nbsp;<span class="ident" id="1562543">n</span>&nbsp;<span class="builtintype" id="1562545">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562551">if</span>&nbsp;<span class="op" id="1562554">-</span><span class="ident" id="1562555"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562556">.</span><span class="ident" id="1562557">dp</span>&nbsp;<span class="op" id="1562560">&gt;=</span>&nbsp;<span class="builtinfunc" id="1562563">len</span><span class="op" id="1562566">(</span><span class="ident" id="1562567"><a href="/strconv/atof.go.html#1561803">powtab</a></span><span class="op" id="1562573">)</span>&nbsp;<span class="op" id="1562575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562580"><a href="/strconv/atof.go.html#1562543">n</a></span>&nbsp;<span class="op" id="1562582">=</span>&nbsp;<span class="num" id="1562584">27</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562589">}</span>&nbsp;<span class="keyword" id="1562591">else</span>&nbsp;<span class="op" id="1562596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562601"><a href="/strconv/atof.go.html#1562543">n</a></span>&nbsp;<span class="op" id="1562603">=</span>&nbsp;<span class="ident" id="1562605"><a href="/strconv/atof.go.html#1561803">powtab</a></span><span class="op" id="1562611">[</span><span class="op" id="1562612">-</span><span class="ident" id="1562613"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562614">.</span><span class="ident" id="1562615">dp</span><span class="op" id="1562617">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562625"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562626">.</span><span class="ident" id="1562627">Shift</span><span class="op" id="1562632">(</span><span class="ident" id="1562633"><a href="/strconv/atof.go.html#1562543">n</a></span><span class="op" id="1562634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562638"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562642">-=</span>&nbsp;<span class="ident" id="1562645"><a href="/strconv/atof.go.html#1562543">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562652">//&nbsp;Our&nbsp;range&nbsp;is&nbsp;[0.5,1)&nbsp;but&nbsp;floating&nbsp;point&nbsp;range&nbsp;is&nbsp;[1,2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562712"><a href="/strconv/atof.go.html#1561928">exp</a></span><span class="op" id="1562715">--</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562720">//&nbsp;Minimum&nbsp;representable&nbsp;exponent&nbsp;is&nbsp;flt.bias+1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562770">//&nbsp;If&nbsp;the&nbsp;exponent&nbsp;is&nbsp;smaller,&nbsp;move&nbsp;it&nbsp;up&nbsp;and</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562817">//&nbsp;adjust&nbsp;d&nbsp;accordingly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562843">if</span>&nbsp;<span class="ident" id="1562846"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562850">&lt;</span>&nbsp;<span class="ident" id="1562852"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562855">.</span><span class="ident" id="1562856">bias</span><span class="op" id="1562860">+</span><span class="num" id="1562861">1</span>&nbsp;<span class="op" id="1562863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562867">n</span>&nbsp;<span class="op" id="1562869">:=</span>&nbsp;<span class="ident" id="1562872"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562875">.</span><span class="ident" id="1562876">bias</span>&nbsp;<span class="op" id="1562881">+</span>&nbsp;<span class="num" id="1562883">1</span>&nbsp;<span class="op" id="1562885">-</span>&nbsp;<span class="ident" id="1562887"><a href="/strconv/atof.go.html#1561928">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562893"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1562894">.</span><span class="ident" id="1562895">Shift</span><span class="op" id="1562900">(</span><span class="op" id="1562901">-</span><span class="ident" id="1562902"><a href="/strconv/atof.go.html#1562867">n</a></span><span class="op" id="1562903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1562907"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1562911">+=</span>&nbsp;<span class="ident" id="1562914"><a href="/strconv/atof.go.html#1562867">n</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562921">if</span>&nbsp;<span class="ident" id="1562924"><a href="/strconv/atof.go.html#1561928">exp</a></span><span class="op" id="1562927">-</span><span class="ident" id="1562928"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562931">.</span><span class="ident" id="1562932">bias</span>&nbsp;<span class="op" id="1562937">&gt;=</span>&nbsp;<span class="num" id="1562940">1</span><span class="op" id="1562941">&lt;&lt;</span><span class="ident" id="1562943"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1562946">.</span><span class="ident" id="1562947">expbits</span><span class="op" id="1562954">-</span><span class="num" id="1562955">1</span>&nbsp;<span class="op" id="1562957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1562961">goto</span>&nbsp;<span class="ident" id="1562966">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1562976">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1562980">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563013"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1563014">.</span><span class="ident" id="1563015">Shift</span><span class="op" id="1563020">(</span><span class="builtintype" id="1563021">int</span><span class="op" id="1563024">(</span><span class="num" id="1563025">1</span>&nbsp;<span class="op" id="1563027">+</span>&nbsp;<span class="ident" id="1563029"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563032">.</span><span class="ident" id="1563033">mantbits</span><span class="op" id="1563041">)</span><span class="op" id="1563042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563045"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1563050">=</span>&nbsp;<span class="ident" id="1563052"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1563053">.</span><span class="ident" id="1563054">RoundedInteger</span><span class="op" id="1563068">(</span><span class="op" id="1563069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1563073">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563122">if</span>&nbsp;<span class="ident" id="1563125"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1563130">==</span>&nbsp;<span class="num" id="1563133">2</span><span class="op" id="1563134">&lt;&lt;</span><span class="ident" id="1563136"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563139">.</span><span class="ident" id="1563140">mantbits</span>&nbsp;<span class="op" id="1563149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563153"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1563158">&gt;&gt;=</span>&nbsp;<span class="num" id="1563162">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563166"><a href="/strconv/atof.go.html#1561928">exp</a></span><span class="op" id="1563169">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563174">if</span>&nbsp;<span class="ident" id="1563177"><a href="/strconv/atof.go.html#1561928">exp</a></span><span class="op" id="1563180">-</span><span class="ident" id="1563181"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563184">.</span><span class="ident" id="1563185">bias</span>&nbsp;<span class="op" id="1563190">&gt;=</span>&nbsp;<span class="num" id="1563193">1</span><span class="op" id="1563194">&lt;&lt;</span><span class="ident" id="1563196"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563199">.</span><span class="ident" id="1563200">expbits</span><span class="op" id="1563207">-</span><span class="num" id="1563208">1</span>&nbsp;<span class="op" id="1563210">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563215">goto</span>&nbsp;<span class="ident" id="1563220">overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1563231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1563234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1563238">//&nbsp;Denormalized?</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563256">if</span>&nbsp;<span class="ident" id="1563259"><a href="/strconv/atof.go.html#1561941">mant</a></span><span class="op" id="1563263">&amp;</span><span class="op" id="1563264">(</span><span class="num" id="1563265">1</span><span class="op" id="1563266">&lt;&lt;</span><span class="ident" id="1563268"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563271">.</span><span class="ident" id="1563272">mantbits</span><span class="op" id="1563280">)</span>&nbsp;<span class="op" id="1563282">==</span>&nbsp;<span class="num" id="1563285">0</span>&nbsp;<span class="op" id="1563287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563291"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1563295">=</span>&nbsp;<span class="ident" id="1563297"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563300">.</span><span class="ident" id="1563301">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1563307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563310">goto</span>&nbsp;<span class="ident" id="1563315">out</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="ident" id="1563320">overflow</span><span class="op" id="1563328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1563331">//&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563341"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1563346">=</span>&nbsp;<span class="num" id="1563348">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563351"><a href="/strconv/atof.go.html#1561928">exp</a></span>&nbsp;<span class="op" id="1563355">=</span>&nbsp;<span class="num" id="1563357">1</span><span class="op" id="1563358">&lt;&lt;</span><span class="ident" id="1563360"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563363">.</span><span class="ident" id="1563364">expbits</span>&nbsp;<span class="op" id="1563372">-</span>&nbsp;<span class="num" id="1563374">1</span>&nbsp;<span class="op" id="1563376">+</span>&nbsp;<span class="ident" id="1563378"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563381">.</span><span class="ident" id="1563382">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563388"><a href="/strconv/atof.go.html#1561906">overflow</a></span>&nbsp;<span class="op" id="1563397">=</span>&nbsp;<span class="ident" id="1563399">true</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="ident" id="1563405">out</span><span class="op" id="1563408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1563411">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563430">bits</span>&nbsp;<span class="op" id="1563435">:=</span>&nbsp;<span class="ident" id="1563438"><a href="/strconv/atof.go.html#1561941">mant</a></span>&nbsp;<span class="op" id="1563443">&amp;</span>&nbsp;<span class="op" id="1563445">(</span><span class="ident" id="1563446">uint64</span><span class="op" id="1563452">(</span><span class="num" id="1563453">1</span><span class="op" id="1563454">)</span><span class="op" id="1563455">&lt;&lt;</span><span class="ident" id="1563457"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563460">.</span><span class="ident" id="1563461">mantbits</span>&nbsp;<span class="op" id="1563470">-</span>&nbsp;<span class="num" id="1563472">1</span><span class="op" id="1563473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563476"><a href="/strconv/atof.go.html#1563430">bits</a></span>&nbsp;<span class="op" id="1563481">|=</span>&nbsp;<span class="ident" id="1563484">uint64</span><span class="op" id="1563490">(</span><span class="op" id="1563491">(</span><span class="ident" id="1563492"><a href="/strconv/atof.go.html#1561928">exp</a></span><span class="op" id="1563495">-</span><span class="ident" id="1563496"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563499">.</span><span class="ident" id="1563500">bias</span><span class="op" id="1563504">)</span><span class="op" id="1563505">&amp;</span><span class="op" id="1563506">(</span><span class="num" id="1563507">1</span><span class="op" id="1563508">&lt;&lt;</span><span class="ident" id="1563510"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563513">.</span><span class="ident" id="1563514">expbits</span><span class="op" id="1563521">-</span><span class="num" id="1563522">1</span><span class="op" id="1563523">)</span><span class="op" id="1563524">)</span>&nbsp;<span class="op" id="1563526">&lt;&lt;</span>&nbsp;<span class="ident" id="1563529"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563532">.</span><span class="ident" id="1563533">mantbits</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563543">if</span>&nbsp;<span class="ident" id="1563546"><a href="/strconv/atof.go.html#1561857">d</a></span><span class="op" id="1563547">.</span><span class="ident" id="1563548">neg</span>&nbsp;<span class="op" id="1563552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563556"><a href="/strconv/atof.go.html#1563430">bits</a></span>&nbsp;<span class="op" id="1563561">|=</span>&nbsp;<span class="num" id="1563564">1</span>&nbsp;<span class="op" id="1563566">&lt;&lt;</span>&nbsp;<span class="ident" id="1563569"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563572">.</span><span class="ident" id="1563573">mantbits</span>&nbsp;<span class="op" id="1563582">&lt;&lt;</span>&nbsp;<span class="ident" id="1563585"><a href="/strconv/atof.go.html#1561879">flt</a></span><span class="op" id="1563588">.</span><span class="ident" id="1563589">expbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1563598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563601">return</span>&nbsp;<span class="ident" id="1563608"><a href="/strconv/atof.go.html#1563430">bits</a></span><span class="op" id="1563612">,</span>&nbsp;<span class="ident" id="1563614"><a href="/strconv/atof.go.html#1561906">overflow</a></span><br>
<span class="lineno"></span><span class="op" id="1563623">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="1563626">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="1563649">var</span>&nbsp;<span class="ident" id="1563653">float64pow10</span>&nbsp;<span class="op" id="1563666">=</span>&nbsp;<span class="op" id="1563668">[</span><span class="op" id="1563669">]</span><span class="builtintype" id="1563670">float64</span><span class="op" id="1563677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1563680">1e0</span><span class="op" id="1563683">,</span>&nbsp;<span class="num" id="1563685">1e1</span><span class="op" id="1563688">,</span>&nbsp;<span class="num" id="1563690">1e2</span><span class="op" id="1563693">,</span>&nbsp;<span class="num" id="1563695">1e3</span><span class="op" id="1563698">,</span>&nbsp;<span class="num" id="1563700">1e4</span><span class="op" id="1563703">,</span>&nbsp;<span class="num" id="1563705">1e5</span><span class="op" id="1563708">,</span>&nbsp;<span class="num" id="1563710">1e6</span><span class="op" id="1563713">,</span>&nbsp;<span class="num" id="1563715">1e7</span><span class="op" id="1563718">,</span>&nbsp;<span class="num" id="1563720">1e8</span><span class="op" id="1563723">,</span>&nbsp;<span class="num" id="1563725">1e9</span><span class="op" id="1563728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1563731">1e10</span><span class="op" id="1563735">,</span>&nbsp;<span class="num" id="1563737">1e11</span><span class="op" id="1563741">,</span>&nbsp;<span class="num" id="1563743">1e12</span><span class="op" id="1563747">,</span>&nbsp;<span class="num" id="1563749">1e13</span><span class="op" id="1563753">,</span>&nbsp;<span class="num" id="1563755">1e14</span><span class="op" id="1563759">,</span>&nbsp;<span class="num" id="1563761">1e15</span><span class="op" id="1563765">,</span>&nbsp;<span class="num" id="1563767">1e16</span><span class="op" id="1563771">,</span>&nbsp;<span class="num" id="1563773">1e17</span><span class="op" id="1563777">,</span>&nbsp;<span class="num" id="1563779">1e18</span><span class="op" id="1563783">,</span>&nbsp;<span class="num" id="1563785">1e19</span><span class="op" id="1563789">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1563792">1e20</span><span class="op" id="1563796">,</span>&nbsp;<span class="num" id="1563798">1e21</span><span class="op" id="1563802">,</span>&nbsp;<span class="num" id="1563804">1e22</span><span class="op" id="1563808">,</span><br>
<span class="lineno"></span><span class="op" id="1563810">}</span><br>
<span class="lineno"></span><span class="keyword" id="1563812">var</span>&nbsp;<span class="ident" id="1563816">float32pow10</span>&nbsp;<span class="op" id="1563829">=</span>&nbsp;<span class="op" id="1563831">[</span><span class="op" id="1563832">]</span><span class="builtintype" id="1563833">float32</span><span class="op" id="1563840">{</span><span class="num" id="1563841">1e0</span><span class="op" id="1563844">,</span>&nbsp;<span class="num" id="1563846">1e1</span><span class="op" id="1563849">,</span>&nbsp;<span class="num" id="1563851">1e2</span><span class="op" id="1563854">,</span>&nbsp;<span class="num" id="1563856">1e3</span><span class="op" id="1563859">,</span>&nbsp;<span class="num" id="1563861">1e4</span><span class="op" id="1563864">,</span>&nbsp;<span class="num" id="1563866">1e5</span><span class="op" id="1563869">,</span>&nbsp;<span class="num" id="1563871">1e6</span><span class="op" id="1563874">,</span>&nbsp;<span class="num" id="1563876">1e7</span><span class="op" id="1563879">,</span>&nbsp;<span class="num" id="1563881">1e8</span><span class="op" id="1563884">,</span>&nbsp;<span class="num" id="1563886">1e9</span><span class="op" id="1563889">,</span>&nbsp;<span class="num" id="1563891">1e10</span><span class="op" id="1563895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1563898">//&nbsp;If&nbsp;possible&nbsp;to&nbsp;convert&nbsp;decimal&nbsp;representation&nbsp;to&nbsp;64-bit&nbsp;float&nbsp;f&nbsp;exactly,</span><br>
<span class="lineno">365</span><span class="comment" id="1563974">//&nbsp;entirely&nbsp;in&nbsp;floating-point&nbsp;math,&nbsp;do&nbsp;so,&nbsp;avoiding&nbsp;the&nbsp;expense&nbsp;of&nbsp;decimalToFloatBits.</span><br>
<span class="lineno"></span><span class="comment" id="1564061">//&nbsp;Three&nbsp;common&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="1564084">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="1564110">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer&nbsp;*&nbsp;exact&nbsp;power&nbsp;of&nbsp;ten</span><br>
<span class="lineno"></span><span class="comment" id="1564157">//&nbsp;&nbsp;&nbsp;&nbspvalue&nbsp;is&nbsp;exact&nbsp;integer&nbsp;/&nbsp;exact&nbsp;power&nbsp;of&nbsp;ten</span><br>
<span class="lineno">370</span><span class="comment" id="1564204">//&nbsp;These&nbsp;all&nbsp;produce&nbsp;potentially&nbsp;inexact&nbsp;but&nbsp;correctly&nbsp;rounded&nbsp;answers.</span><br>
<span class="lineno"></span><span class="keyword" id="1564276">func</span>&nbsp;<span class="ident" id="1564281">atof64exact</span><span class="op" id="1564292">(</span><span class="ident" id="1564293">mantissa</span>&nbsp;<span class="ident" id="1564302">uint64</span><span class="op" id="1564308">,</span>&nbsp;<span class="ident" id="1564310">exp</span>&nbsp;<span class="builtintype" id="1564314">int</span><span class="op" id="1564317">,</span>&nbsp;<span class="ident" id="1564319">neg</span>&nbsp;<span class="builtintype" id="1564323">bool</span><span class="op" id="1564327">)</span>&nbsp;<span class="op" id="1564329">(</span><span class="ident" id="1564330">f</span>&nbsp;<span class="builtintype" id="1564332">float64</span><span class="op" id="1564339">,</span>&nbsp;<span class="ident" id="1564341">ok</span>&nbsp;<span class="builtintype" id="1564344">bool</span><span class="op" id="1564348">)</span>&nbsp;<span class="op" id="1564350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564353">if</span>&nbsp;<span class="ident" id="1564356"><a href="/strconv/atof.go.html#1564293">mantissa</a></span><span class="op" id="1564364">&gt;&gt;</span><span class="ident" id="1564366"><a href="/strconv/ftoa.go.html#1601927">float64info</a></span><span class="op" id="1564377">.</span><span class="ident" id="1564378">mantbits</span>&nbsp;<span class="op" id="1564387">!=</span>&nbsp;<span class="num" id="1564390">0</span>&nbsp;<span class="op" id="1564392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564396">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564404">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564407"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564409">=</span>&nbsp;<span class="builtintype" id="1564411">float64</span><span class="op" id="1564418">(</span><span class="ident" id="1564419"><a href="/strconv/atof.go.html#1564293">mantissa</a></span><span class="op" id="1564427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564430">if</span>&nbsp;<span class="ident" id="1564433"><a href="/strconv/atof.go.html#1564319">neg</a></span>&nbsp;<span class="op" id="1564437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564441"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564443">=</span>&nbsp;<span class="op" id="1564445">-</span><span class="ident" id="1564446"><a href="/strconv/atof.go.html#1564330">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564452">switch</span>&nbsp;<span class="op" id="1564459">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564462">case</span>&nbsp;<span class="ident" id="1564467"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564471">==</span>&nbsp;<span class="num" id="1564474">0</span><span class="op" id="1564475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564479">//&nbsp;an&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564496">return</span>&nbsp;<span class="ident" id="1564503"><a href="/strconv/atof.go.html#1564330">f</a></span><span class="op" id="1564504">,</span>&nbsp;<span class="ident" id="1564506">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564512">//&nbsp;Exact&nbsp;integers&nbsp;are&nbsp;&lt;=&nbsp;10^15.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564545">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;ten&nbsp;are&nbsp;&lt;=&nbsp;10^22.</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564583">case</span>&nbsp;<span class="ident" id="1564588"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564592">&gt;</span>&nbsp;<span class="num" id="1564594">0</span>&nbsp;<span class="op" id="1564596">&amp;&amp;</span>&nbsp;<span class="ident" id="1564599"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564603">&lt;=</span>&nbsp;<span class="num" id="1564606">15</span><span class="op" id="1564608">+</span><span class="num" id="1564609">22</span><span class="op" id="1564611">:</span>&nbsp;<span class="comment" id="1564613">//&nbsp;int&nbsp;*&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564629">//&nbsp;If&nbsp;exponent&nbsp;is&nbsp;big&nbsp;but&nbsp;number&nbsp;of&nbsp;digits&nbsp;is&nbsp;not,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564682">//&nbsp;can&nbsp;move&nbsp;a&nbsp;few&nbsp;zeros&nbsp;into&nbsp;the&nbsp;integer&nbsp;part.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564731">if</span>&nbsp;<span class="ident" id="1564734"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564738">&gt;</span>&nbsp;<span class="num" id="1564740">22</span>&nbsp;<span class="op" id="1564743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564748"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564750">*=</span>&nbsp;<span class="ident" id="1564753"><a href="/strconv/atof.go.html#1563653">float64pow10</a></span><span class="op" id="1564765">[</span><span class="ident" id="1564766"><a href="/strconv/atof.go.html#1564310">exp</a></span><span class="op" id="1564769">-</span><span class="num" id="1564770">22</span><span class="op" id="1564772">]</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1564777"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564781">=</span>&nbsp;<span class="num" id="1564783">22</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564792">if</span>&nbsp;<span class="ident" id="1564795"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564797">&gt;</span>&nbsp;<span class="num" id="1564799">1e15</span>&nbsp;<span class="op" id="1564804">||</span>&nbsp;<span class="ident" id="1564807"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564809">&lt;</span>&nbsp;<span class="op" id="1564811">-</span><span class="num" id="1564812">1e15</span>&nbsp;<span class="op" id="1564817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1564822">//&nbsp;the&nbsp;exponent&nbsp;was&nbsp;really&nbsp;too&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564863">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564876">return</span>&nbsp;<span class="ident" id="1564883"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564885">*</span>&nbsp;<span class="ident" id="1564887"><a href="/strconv/atof.go.html#1563653">float64pow10</a></span><span class="op" id="1564899">[</span><span class="ident" id="1564900"><a href="/strconv/atof.go.html#1564310">exp</a></span><span class="op" id="1564903">]</span><span class="op" id="1564904">,</span>&nbsp;<span class="ident" id="1564906">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564912">case</span>&nbsp;<span class="ident" id="1564917"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564921">&lt;</span>&nbsp;<span class="num" id="1564923">0</span>&nbsp;<span class="op" id="1564925">&amp;&amp;</span>&nbsp;<span class="ident" id="1564928"><a href="/strconv/atof.go.html#1564310">exp</a></span>&nbsp;<span class="op" id="1564932">&gt;=</span>&nbsp;<span class="op" id="1564935">-</span><span class="num" id="1564936">22</span><span class="op" id="1564938">:</span>&nbsp;<span class="comment" id="1564940">//&nbsp;int&nbsp;/&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564956">return</span>&nbsp;<span class="ident" id="1564963"><a href="/strconv/atof.go.html#1564330">f</a></span>&nbsp;<span class="op" id="1564965">/</span>&nbsp;<span class="ident" id="1564967"><a href="/strconv/atof.go.html#1563653">float64pow10</a></span><span class="op" id="1564979">[</span><span class="op" id="1564980">-</span><span class="ident" id="1564981"><a href="/strconv/atof.go.html#1564310">exp</a></span><span class="op" id="1564984">]</span><span class="op" id="1564985">,</span>&nbsp;<span class="ident" id="1564987">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1564993">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1564996">return</span><br>
<span class="lineno"></span><span class="op" id="1565003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1565006">//&nbsp;If&nbsp;possible&nbsp;to&nbsp;compute&nbsp;mantissa*10^exp&nbsp;to&nbsp;32-bit&nbsp;float&nbsp;f&nbsp;exactly,</span><br>
<span class="lineno"></span><span class="comment" id="1565075">//&nbsp;entirely&nbsp;in&nbsp;floating-point&nbsp;math,&nbsp;do&nbsp;so,&nbsp;avoiding&nbsp;the&nbsp;machinery&nbsp;above.</span><br>
<span class="lineno">405</span><span class="keyword" id="1565148">func</span>&nbsp;<span class="ident" id="1565153">atof32exact</span><span class="op" id="1565164">(</span><span class="ident" id="1565165">mantissa</span>&nbsp;<span class="ident" id="1565174">uint64</span><span class="op" id="1565180">,</span>&nbsp;<span class="ident" id="1565182">exp</span>&nbsp;<span class="builtintype" id="1565186">int</span><span class="op" id="1565189">,</span>&nbsp;<span class="ident" id="1565191">neg</span>&nbsp;<span class="builtintype" id="1565195">bool</span><span class="op" id="1565199">)</span>&nbsp;<span class="op" id="1565201">(</span><span class="ident" id="1565202">f</span>&nbsp;<span class="builtintype" id="1565204">float32</span><span class="op" id="1565211">,</span>&nbsp;<span class="ident" id="1565213">ok</span>&nbsp;<span class="builtintype" id="1565216">bool</span><span class="op" id="1565220">)</span>&nbsp;<span class="op" id="1565222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565225">if</span>&nbsp;<span class="ident" id="1565228"><a href="/strconv/atof.go.html#1565165">mantissa</a></span><span class="op" id="1565236">&gt;&gt;</span><span class="ident" id="1565238"><a href="/strconv/ftoa.go.html#1601886">float32info</a></span><span class="op" id="1565249">.</span><span class="ident" id="1565250">mantbits</span>&nbsp;<span class="op" id="1565259">!=</span>&nbsp;<span class="num" id="1565262">0</span>&nbsp;<span class="op" id="1565264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565268">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565279"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565281">=</span>&nbsp;<span class="builtintype" id="1565283">float32</span><span class="op" id="1565290">(</span><span class="ident" id="1565291"><a href="/strconv/atof.go.html#1565165">mantissa</a></span><span class="op" id="1565299">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565302">if</span>&nbsp;<span class="ident" id="1565305"><a href="/strconv/atof.go.html#1565191">neg</a></span>&nbsp;<span class="op" id="1565309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565313"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565315">=</span>&nbsp;<span class="op" id="1565317">-</span><span class="ident" id="1565318"><a href="/strconv/atof.go.html#1565202">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565324">switch</span>&nbsp;<span class="op" id="1565331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565334">case</span>&nbsp;<span class="ident" id="1565339"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565343">==</span>&nbsp;<span class="num" id="1565346">0</span><span class="op" id="1565347">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565351">return</span>&nbsp;<span class="ident" id="1565358"><a href="/strconv/atof.go.html#1565202">f</a></span><span class="op" id="1565359">,</span>&nbsp;<span class="ident" id="1565361">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565367">//&nbsp;Exact&nbsp;integers&nbsp;are&nbsp;&lt;=&nbsp;10^7.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565399">//&nbsp;Exact&nbsp;powers&nbsp;of&nbsp;ten&nbsp;are&nbsp;&lt;=&nbsp;10^10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565437">case</span>&nbsp;<span class="ident" id="1565442"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565446">&gt;</span>&nbsp;<span class="num" id="1565448">0</span>&nbsp;<span class="op" id="1565450">&amp;&amp;</span>&nbsp;<span class="ident" id="1565453"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565457">&lt;=</span>&nbsp;<span class="num" id="1565460">7</span><span class="op" id="1565461">+</span><span class="num" id="1565462">10</span><span class="op" id="1565464">:</span>&nbsp;<span class="comment" id="1565466">//&nbsp;int&nbsp;*&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565482">//&nbsp;If&nbsp;exponent&nbsp;is&nbsp;big&nbsp;but&nbsp;number&nbsp;of&nbsp;digits&nbsp;is&nbsp;not,</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565535">//&nbsp;can&nbsp;move&nbsp;a&nbsp;few&nbsp;zeros&nbsp;into&nbsp;the&nbsp;integer&nbsp;part.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565584">if</span>&nbsp;<span class="ident" id="1565587"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565591">&gt;</span>&nbsp;<span class="num" id="1565593">10</span>&nbsp;<span class="op" id="1565596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565601"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565603">*=</span>&nbsp;<span class="ident" id="1565606"><a href="/strconv/atof.go.html#1563816">float32pow10</a></span><span class="op" id="1565618">[</span><span class="ident" id="1565619"><a href="/strconv/atof.go.html#1565182">exp</a></span><span class="op" id="1565622">-</span><span class="num" id="1565623">10</span><span class="op" id="1565625">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1565630"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565634">=</span>&nbsp;<span class="num" id="1565636">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565641">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565645">if</span>&nbsp;<span class="ident" id="1565648"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565650">&gt;</span>&nbsp;<span class="num" id="1565652">1e7</span>&nbsp;<span class="op" id="1565656">||</span>&nbsp;<span class="ident" id="1565659"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565661">&lt;</span>&nbsp;<span class="op" id="1565663">-</span><span class="num" id="1565664">1e7</span>&nbsp;<span class="op" id="1565668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1565673">//&nbsp;the&nbsp;exponent&nbsp;was&nbsp;really&nbsp;too&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565714">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565727">return</span>&nbsp;<span class="ident" id="1565734"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565736">*</span>&nbsp;<span class="ident" id="1565738"><a href="/strconv/atof.go.html#1563816">float32pow10</a></span><span class="op" id="1565750">[</span><span class="ident" id="1565751"><a href="/strconv/atof.go.html#1565182">exp</a></span><span class="op" id="1565754">]</span><span class="op" id="1565755">,</span>&nbsp;<span class="ident" id="1565757">true</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565763">case</span>&nbsp;<span class="ident" id="1565768"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565772">&lt;</span>&nbsp;<span class="num" id="1565774">0</span>&nbsp;<span class="op" id="1565776">&amp;&amp;</span>&nbsp;<span class="ident" id="1565779"><a href="/strconv/atof.go.html#1565182">exp</a></span>&nbsp;<span class="op" id="1565783">&gt;=</span>&nbsp;<span class="op" id="1565786">-</span><span class="num" id="1565787">10</span><span class="op" id="1565789">:</span>&nbsp;<span class="comment" id="1565791">//&nbsp;int&nbsp;/&nbsp;10^k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565807">return</span>&nbsp;<span class="ident" id="1565814"><a href="/strconv/atof.go.html#1565202">f</a></span>&nbsp;<span class="op" id="1565816">/</span>&nbsp;<span class="ident" id="1565818"><a href="/strconv/atof.go.html#1563816">float32pow10</a></span><span class="op" id="1565830">[</span><span class="op" id="1565831">-</span><span class="ident" id="1565832"><a href="/strconv/atof.go.html#1565182">exp</a></span><span class="op" id="1565835">]</span><span class="op" id="1565836">,</span>&nbsp;<span class="ident" id="1565838">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565847">return</span><br>
<span class="lineno"></span><span class="op" id="1565854">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1565857">const</span>&nbsp;<span class="ident" id="1565863">fnParseFloat</span>&nbsp;<span class="op" id="1565876">=</span>&nbsp;<span class="string" id="1565878">&#34;ParseFloat&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1565892">func</span>&nbsp;<span class="ident" id="1565897">atof32</span><span class="op" id="1565903">(</span><span class="ident" id="1565904">s</span>&nbsp;<span class="builtintype" id="1565906">string</span><span class="op" id="1565912">)</span>&nbsp;<span class="op" id="1565914">(</span><span class="ident" id="1565915">f</span>&nbsp;<span class="builtintype" id="1565917">float32</span><span class="op" id="1565924">,</span>&nbsp;<span class="ident" id="1565926">err</span>&nbsp;<span class="builtintype" id="1565930">error</span><span class="op" id="1565935">)</span>&nbsp;<span class="op" id="1565937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565940">if</span>&nbsp;<span class="ident" id="1565943">val</span><span class="op" id="1565946">,</span>&nbsp;<span class="ident" id="1565948">ok</span>&nbsp;<span class="op" id="1565951">:=</span>&nbsp;<span class="ident" id="1565954"><a href="/strconv/atof.go.html#1558174">special</a></span><span class="op" id="1565961">(</span><span class="ident" id="1565962"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1565963">)</span><span class="op" id="1565964">;</span>&nbsp;<span class="ident" id="1565966"><a href="/strconv/atof.go.html#1565948">ok</a></span>&nbsp;<span class="op" id="1565969">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1565973">return</span>&nbsp;<span class="builtintype" id="1565980">float32</span><span class="op" id="1565987">(</span><span class="ident" id="1565988"><a href="/strconv/atof.go.html#1565943">val</a></span><span class="op" id="1565991">)</span><span class="op" id="1565992">,</span>&nbsp;<span class="ident" id="1565994">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1565999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566003">if</span>&nbsp;<span class="ident" id="1566006"><a href="/strconv/atof.go.html#1557819">optimize</a></span>&nbsp;<span class="op" id="1566015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566019">//&nbsp;Parse&nbsp;mantissa&nbsp;and&nbsp;exponent.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566053">mantissa</span><span class="op" id="1566061">,</span>&nbsp;<span class="ident" id="1566063">exp</span><span class="op" id="1566066">,</span>&nbsp;<span class="ident" id="1566068">neg</span><span class="op" id="1566071">,</span>&nbsp;<span class="ident" id="1566073">trunc</span><span class="op" id="1566078">,</span>&nbsp;<span class="ident" id="1566080">ok</span>&nbsp;<span class="op" id="1566083">:=</span>&nbsp;<span class="ident" id="1566086"><a href="/strconv/atof.go.html#1560268">readFloat</a></span><span class="op" id="1566095">(</span><span class="ident" id="1566096"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1566097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566101">if</span>&nbsp;<span class="ident" id="1566104"><a href="/strconv/atof.go.html#1566080">ok</a></span>&nbsp;<span class="op" id="1566107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566112">//&nbsp;Try&nbsp;pure&nbsp;floating-point&nbsp;arithmetic&nbsp;conversion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566165">if</span>&nbsp;<span class="op" id="1566168">!</span><span class="ident" id="1566169"><a href="/strconv/atof.go.html#1566073">trunc</a></span>&nbsp;<span class="op" id="1566175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566181">if</span>&nbsp;<span class="ident" id="1566184">f</span><span class="op" id="1566185">,</span>&nbsp;<span class="ident" id="1566187">ok</span>&nbsp;<span class="op" id="1566190">:=</span>&nbsp;<span class="ident" id="1566193"><a href="/strconv/atof.go.html#1565153">atof32exact</a></span><span class="op" id="1566204">(</span><span class="ident" id="1566205"><a href="/strconv/atof.go.html#1566053">mantissa</a></span><span class="op" id="1566213">,</span>&nbsp;<span class="ident" id="1566215"><a href="/strconv/atof.go.html#1566063">exp</a></span><span class="op" id="1566218">,</span>&nbsp;<span class="ident" id="1566220"><a href="/strconv/atof.go.html#1566068">neg</a></span><span class="op" id="1566223">)</span><span class="op" id="1566224">;</span>&nbsp;<span class="ident" id="1566226"><a href="/strconv/atof.go.html#1566187">ok</a></span>&nbsp;<span class="op" id="1566229">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566236">return</span>&nbsp;<span class="ident" id="1566243"><a href="/strconv/atof.go.html#1566184">f</a></span><span class="op" id="1566244">,</span>&nbsp;<span class="ident" id="1566246">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566264">//&nbsp;Try&nbsp;another&nbsp;fast&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566293">ext</span>&nbsp;<span class="op" id="1566297">:=</span>&nbsp;<span class="builtinfunc" id="1566300">new</span><span class="op" id="1566303">(</span><span class="ident" id="1566304"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1566312">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566317">if</span>&nbsp;<span class="ident" id="1566320">ok</span>&nbsp;<span class="op" id="1566323">:=</span>&nbsp;<span class="ident" id="1566326"><a href="/strconv/atof.go.html#1566293">ext</a></span><span class="op" id="1566329">.</span><span class="ident" id="1566330">AssignDecimal</span><span class="op" id="1566343">(</span><span class="ident" id="1566344"><a href="/strconv/atof.go.html#1566053">mantissa</a></span><span class="op" id="1566352">,</span>&nbsp;<span class="ident" id="1566354"><a href="/strconv/atof.go.html#1566063">exp</a></span><span class="op" id="1566357">,</span>&nbsp;<span class="ident" id="1566359"><a href="/strconv/atof.go.html#1566068">neg</a></span><span class="op" id="1566362">,</span>&nbsp;<span class="ident" id="1566364"><a href="/strconv/atof.go.html#1566073">trunc</a></span><span class="op" id="1566369">,</span>&nbsp;<span class="op" id="1566371">&amp;</span><span class="ident" id="1566372"><a href="/strconv/ftoa.go.html#1601886">float32info</a></span><span class="op" id="1566383">)</span><span class="op" id="1566384">;</span>&nbsp;<span class="ident" id="1566386"><a href="/strconv/atof.go.html#1566320">ok</a></span>&nbsp;<span class="op" id="1566389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566395">b</span><span class="op" id="1566396">,</span>&nbsp;<span class="ident" id="1566398">ovf</span>&nbsp;<span class="op" id="1566402">:=</span>&nbsp;<span class="ident" id="1566405"><a href="/strconv/atof.go.html#1566293">ext</a></span><span class="op" id="1566408">.</span><span class="ident" id="1566409">floatBits</span><span class="op" id="1566418">(</span><span class="op" id="1566419">&amp;</span><span class="ident" id="1566420"><a href="/strconv/ftoa.go.html#1601886">float32info</a></span><span class="op" id="1566431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566437"><a href="/strconv/atof.go.html#1565915">f</a></span>&nbsp;<span class="op" id="1566439">=</span>&nbsp;<span class="ident" id="1566441"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1566445">.</span><span class="ident" id="1566446">Float32frombits</span><span class="op" id="1566461">(</span><span class="builtintype" id="1566462">uint32</span><span class="op" id="1566468">(</span><span class="ident" id="1566469"><a href="/strconv/atof.go.html#1566395">b</a></span><span class="op" id="1566470">)</span><span class="op" id="1566471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566477">if</span>&nbsp;<span class="ident" id="1566480"><a href="/strconv/atof.go.html#1566398">ovf</a></span>&nbsp;<span class="op" id="1566484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566491"><a href="/strconv/atof.go.html#1565926">err</a></span>&nbsp;<span class="op" id="1566495">=</span>&nbsp;<span class="ident" id="1566497"><a href="/strconv/atoi.go.html#1569530">rangeError</a></span><span class="op" id="1566507">(</span><span class="ident" id="1566508"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1566520">,</span>&nbsp;<span class="ident" id="1566522"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1566523">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566535">return</span>&nbsp;<span class="ident" id="1566542"><a href="/strconv/atof.go.html#1565915">f</a></span><span class="op" id="1566543">,</span>&nbsp;<span class="ident" id="1566545"><a href="/strconv/atof.go.html#1565926">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566559">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566562">var</span>&nbsp;<span class="ident" id="1566566">d</span>&nbsp;<span class="ident" id="1566568"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566577">if</span>&nbsp;<span class="op" id="1566580">!</span><span class="ident" id="1566581"><a href="/strconv/atof.go.html#1566566">d</a></span><span class="op" id="1566582">.</span><span class="ident" id="1566583">set</span><span class="op" id="1566586">(</span><span class="ident" id="1566587"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1566588">)</span>&nbsp;<span class="op" id="1566590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566594">return</span>&nbsp;<span class="num" id="1566601">0</span><span class="op" id="1566602">,</span>&nbsp;<span class="ident" id="1566604"><a href="/strconv/atoi.go.html#1569444">syntaxError</a></span><span class="op" id="1566615">(</span><span class="ident" id="1566616"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1566628">,</span>&nbsp;<span class="ident" id="1566630"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1566631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566637">b</span><span class="op" id="1566638">,</span>&nbsp;<span class="ident" id="1566640">ovf</span>&nbsp;<span class="op" id="1566644">:=</span>&nbsp;<span class="ident" id="1566647"><a href="/strconv/atof.go.html#1566566">d</a></span><span class="op" id="1566648">.</span><span class="ident" id="1566649">floatBits</span><span class="op" id="1566658">(</span><span class="op" id="1566659">&amp;</span><span class="ident" id="1566660"><a href="/strconv/ftoa.go.html#1601886">float32info</a></span><span class="op" id="1566671">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566674"><a href="/strconv/atof.go.html#1565915">f</a></span>&nbsp;<span class="op" id="1566676">=</span>&nbsp;<span class="ident" id="1566678"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1566682">.</span><span class="ident" id="1566683">Float32frombits</span><span class="op" id="1566698">(</span><span class="builtintype" id="1566699">uint32</span><span class="op" id="1566705">(</span><span class="ident" id="1566706"><a href="/strconv/atof.go.html#1566637">b</a></span><span class="op" id="1566707">)</span><span class="op" id="1566708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566711">if</span>&nbsp;<span class="ident" id="1566714"><a href="/strconv/atof.go.html#1566640">ovf</a></span>&nbsp;<span class="op" id="1566718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566722"><a href="/strconv/atof.go.html#1565926">err</a></span>&nbsp;<span class="op" id="1566726">=</span>&nbsp;<span class="ident" id="1566728"><a href="/strconv/atoi.go.html#1569530">rangeError</a></span><span class="op" id="1566738">(</span><span class="ident" id="1566739"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1566751">,</span>&nbsp;<span class="ident" id="1566753"><a href="/strconv/atof.go.html#1565904">s</a></span><span class="op" id="1566754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566760">return</span>&nbsp;<span class="ident" id="1566767"><a href="/strconv/atof.go.html#1565915">f</a></span><span class="op" id="1566768">,</span>&nbsp;<span class="ident" id="1566770"><a href="/strconv/atof.go.html#1565926">err</a></span><br>
<span class="lineno">475</span><span class="op" id="1566774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1566777">func</span>&nbsp;<span class="ident" id="1566782">atof64</span><span class="op" id="1566788">(</span><span class="ident" id="1566789">s</span>&nbsp;<span class="builtintype" id="1566791">string</span><span class="op" id="1566797">)</span>&nbsp;<span class="op" id="1566799">(</span><span class="ident" id="1566800">f</span>&nbsp;<span class="builtintype" id="1566802">float64</span><span class="op" id="1566809">,</span>&nbsp;<span class="ident" id="1566811">err</span>&nbsp;<span class="builtintype" id="1566815">error</span><span class="op" id="1566820">)</span>&nbsp;<span class="op" id="1566822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566825">if</span>&nbsp;<span class="ident" id="1566828">val</span><span class="op" id="1566831">,</span>&nbsp;<span class="ident" id="1566833">ok</span>&nbsp;<span class="op" id="1566836">:=</span>&nbsp;<span class="ident" id="1566839"><a href="/strconv/atof.go.html#1558174">special</a></span><span class="op" id="1566846">(</span><span class="ident" id="1566847"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1566848">)</span><span class="op" id="1566849">;</span>&nbsp;<span class="ident" id="1566851"><a href="/strconv/atof.go.html#1566833">ok</a></span>&nbsp;<span class="op" id="1566854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566858">return</span>&nbsp;<span class="ident" id="1566865"><a href="/strconv/atof.go.html#1566828">val</a></span><span class="op" id="1566868">,</span>&nbsp;<span class="ident" id="1566870">nil</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1566875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566879">if</span>&nbsp;<span class="ident" id="1566882"><a href="/strconv/atof.go.html#1557819">optimize</a></span>&nbsp;<span class="op" id="1566891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566895">//&nbsp;Parse&nbsp;mantissa&nbsp;and&nbsp;exponent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1566929">mantissa</span><span class="op" id="1566937">,</span>&nbsp;<span class="ident" id="1566939">exp</span><span class="op" id="1566942">,</span>&nbsp;<span class="ident" id="1566944">neg</span><span class="op" id="1566947">,</span>&nbsp;<span class="ident" id="1566949">trunc</span><span class="op" id="1566954">,</span>&nbsp;<span class="ident" id="1566956">ok</span>&nbsp;<span class="op" id="1566959">:=</span>&nbsp;<span class="ident" id="1566962"><a href="/strconv/atof.go.html#1560268">readFloat</a></span><span class="op" id="1566971">(</span><span class="ident" id="1566972"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1566973">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1566977">if</span>&nbsp;<span class="ident" id="1566980"><a href="/strconv/atof.go.html#1566956">ok</a></span>&nbsp;<span class="op" id="1566983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1566988">//&nbsp;Try&nbsp;pure&nbsp;floating-point&nbsp;arithmetic&nbsp;conversion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567041">if</span>&nbsp;<span class="op" id="1567044">!</span><span class="ident" id="1567045"><a href="/strconv/atof.go.html#1566949">trunc</a></span>&nbsp;<span class="op" id="1567051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567057">if</span>&nbsp;<span class="ident" id="1567060">f</span><span class="op" id="1567061">,</span>&nbsp;<span class="ident" id="1567063">ok</span>&nbsp;<span class="op" id="1567066">:=</span>&nbsp;<span class="ident" id="1567069"><a href="/strconv/atof.go.html#1564281">atof64exact</a></span><span class="op" id="1567080">(</span><span class="ident" id="1567081"><a href="/strconv/atof.go.html#1566929">mantissa</a></span><span class="op" id="1567089">,</span>&nbsp;<span class="ident" id="1567091"><a href="/strconv/atof.go.html#1566939">exp</a></span><span class="op" id="1567094">,</span>&nbsp;<span class="ident" id="1567096"><a href="/strconv/atof.go.html#1566944">neg</a></span><span class="op" id="1567099">)</span><span class="op" id="1567100">;</span>&nbsp;<span class="ident" id="1567102"><a href="/strconv/atof.go.html#1567063">ok</a></span>&nbsp;<span class="op" id="1567105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567112">return</span>&nbsp;<span class="ident" id="1567119"><a href="/strconv/atof.go.html#1567060">f</a></span><span class="op" id="1567120">,</span>&nbsp;<span class="ident" id="1567122">nil</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1567140">//&nbsp;Try&nbsp;another&nbsp;fast&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567169">ext</span>&nbsp;<span class="op" id="1567173">:=</span>&nbsp;<span class="builtinfunc" id="1567176">new</span><span class="op" id="1567179">(</span><span class="ident" id="1567180"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1567188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567193">if</span>&nbsp;<span class="ident" id="1567196">ok</span>&nbsp;<span class="op" id="1567199">:=</span>&nbsp;<span class="ident" id="1567202"><a href="/strconv/atof.go.html#1567169">ext</a></span><span class="op" id="1567205">.</span><span class="ident" id="1567206">AssignDecimal</span><span class="op" id="1567219">(</span><span class="ident" id="1567220"><a href="/strconv/atof.go.html#1566929">mantissa</a></span><span class="op" id="1567228">,</span>&nbsp;<span class="ident" id="1567230"><a href="/strconv/atof.go.html#1566939">exp</a></span><span class="op" id="1567233">,</span>&nbsp;<span class="ident" id="1567235"><a href="/strconv/atof.go.html#1566944">neg</a></span><span class="op" id="1567238">,</span>&nbsp;<span class="ident" id="1567240"><a href="/strconv/atof.go.html#1566949">trunc</a></span><span class="op" id="1567245">,</span>&nbsp;<span class="op" id="1567247">&amp;</span><span class="ident" id="1567248"><a href="/strconv/ftoa.go.html#1601927">float64info</a></span><span class="op" id="1567259">)</span><span class="op" id="1567260">;</span>&nbsp;<span class="ident" id="1567262"><a href="/strconv/atof.go.html#1567196">ok</a></span>&nbsp;<span class="op" id="1567265">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567271">b</span><span class="op" id="1567272">,</span>&nbsp;<span class="ident" id="1567274">ovf</span>&nbsp;<span class="op" id="1567278">:=</span>&nbsp;<span class="ident" id="1567281"><a href="/strconv/atof.go.html#1567169">ext</a></span><span class="op" id="1567284">.</span><span class="ident" id="1567285">floatBits</span><span class="op" id="1567294">(</span><span class="op" id="1567295">&amp;</span><span class="ident" id="1567296"><a href="/strconv/ftoa.go.html#1601927">float64info</a></span><span class="op" id="1567307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567313"><a href="/strconv/atof.go.html#1566800">f</a></span>&nbsp;<span class="op" id="1567315">=</span>&nbsp;<span class="ident" id="1567317"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1567321">.</span><span class="ident" id="1567322">Float64frombits</span><span class="op" id="1567337">(</span><span class="ident" id="1567338"><a href="/strconv/atof.go.html#1567271">b</a></span><span class="op" id="1567339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567345">if</span>&nbsp;<span class="ident" id="1567348"><a href="/strconv/atof.go.html#1567274">ovf</a></span>&nbsp;<span class="op" id="1567352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567359"><a href="/strconv/atof.go.html#1566811">err</a></span>&nbsp;<span class="op" id="1567363">=</span>&nbsp;<span class="ident" id="1567365"><a href="/strconv/atoi.go.html#1569530">rangeError</a></span><span class="op" id="1567375">(</span><span class="ident" id="1567376"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1567388">,</span>&nbsp;<span class="ident" id="1567390"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1567391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567397">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567403">return</span>&nbsp;<span class="ident" id="1567410"><a href="/strconv/atof.go.html#1566800">f</a></span><span class="op" id="1567411">,</span>&nbsp;<span class="ident" id="1567413"><a href="/strconv/atof.go.html#1566811">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567430">var</span>&nbsp;<span class="ident" id="1567434">d</span>&nbsp;<span class="ident" id="1567436"><a href="/strconv/decimal.go.html#1573600">decimal</a></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567445">if</span>&nbsp;<span class="op" id="1567448">!</span><span class="ident" id="1567449"><a href="/strconv/atof.go.html#1567434">d</a></span><span class="op" id="1567450">.</span><span class="ident" id="1567451">set</span><span class="op" id="1567454">(</span><span class="ident" id="1567455"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1567456">)</span>&nbsp;<span class="op" id="1567458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567462">return</span>&nbsp;<span class="num" id="1567469">0</span><span class="op" id="1567470">,</span>&nbsp;<span class="ident" id="1567472"><a href="/strconv/atoi.go.html#1569444">syntaxError</a></span><span class="op" id="1567483">(</span><span class="ident" id="1567484"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1567496">,</span>&nbsp;<span class="ident" id="1567498"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1567499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567505">b</span><span class="op" id="1567506">,</span>&nbsp;<span class="ident" id="1567508">ovf</span>&nbsp;<span class="op" id="1567512">:=</span>&nbsp;<span class="ident" id="1567515"><a href="/strconv/atof.go.html#1567434">d</a></span><span class="op" id="1567516">.</span><span class="ident" id="1567517">floatBits</span><span class="op" id="1567526">(</span><span class="op" id="1567527">&amp;</span><span class="ident" id="1567528"><a href="/strconv/ftoa.go.html#1601927">float64info</a></span><span class="op" id="1567539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567542"><a href="/strconv/atof.go.html#1566800">f</a></span>&nbsp;<span class="op" id="1567544">=</span>&nbsp;<span class="ident" id="1567546"><a href="/strconv/atof.go.html#1557807">math</a></span><span class="op" id="1567550">.</span><span class="ident" id="1567551">Float64frombits</span><span class="op" id="1567566">(</span><span class="ident" id="1567567"><a href="/strconv/atof.go.html#1567505">b</a></span><span class="op" id="1567568">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567571">if</span>&nbsp;<span class="ident" id="1567574"><a href="/strconv/atof.go.html#1567508">ovf</a></span>&nbsp;<span class="op" id="1567578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1567582"><a href="/strconv/atof.go.html#1566811">err</a></span>&nbsp;<span class="op" id="1567586">=</span>&nbsp;<span class="ident" id="1567588"><a href="/strconv/atoi.go.html#1569530">rangeError</a></span><span class="op" id="1567598">(</span><span class="ident" id="1567599"><a href="/strconv/atof.go.html#1565863">fnParseFloat</a></span><span class="op" id="1567611">,</span>&nbsp;<span class="ident" id="1567613"><a href="/strconv/atof.go.html#1566789">s</a></span><span class="op" id="1567614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1567617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1567620">return</span>&nbsp;<span class="ident" id="1567627"><a href="/strconv/atof.go.html#1566800">f</a></span><span class="op" id="1567628">,</span>&nbsp;<span class="ident" id="1567630"><a href="/strconv/atof.go.html#1566811">err</a></span><br>
<span class="lineno"></span><span class="op" id="1567634">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="1567637">//&nbsp;ParseFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;a&nbsp;floating-point&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="1567700">//&nbsp;with&nbsp;the&nbsp;precision&nbsp;specified&nbsp;by&nbsp;bitSize:&nbsp;32&nbsp;for&nbsp;float32,&nbsp;or&nbsp;64&nbsp;for&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="1567779">//&nbsp;When&nbsp;bitSize=32,&nbsp;the&nbsp;result&nbsp;still&nbsp;has&nbsp;type&nbsp;float64,&nbsp;but&nbsp;it&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="1567849">//&nbsp;convertible&nbsp;to&nbsp;float32&nbsp;without&nbsp;changing&nbsp;its&nbsp;value.</span><br>
<span class="lineno">520</span><span class="comment" id="1567903">//</span><br>
<span class="lineno"></span><span class="comment" id="1567906">//&nbsp;If&nbsp;s&nbsp;is&nbsp;well-formed&nbsp;and&nbsp;near&nbsp;a&nbsp;valid&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="1567969">//&nbsp;ParseFloat&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;floating&nbsp;point&nbsp;number&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="1568033">//&nbsp;using&nbsp;IEEE754&nbsp;unbiased&nbsp;rounding.</span><br>
<span class="lineno"></span><span class="comment" id="1568069">//</span><br>
<span class="lineno">525</span><span class="comment" id="1568072">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseFloat&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="1568139">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="1568167">//</span><br>
<span class="lineno"></span><span class="comment" id="1568170">//&nbsp;If&nbsp;s&nbsp;is&nbsp;not&nbsp;syntactically&nbsp;well-formed,&nbsp;ParseFloat&nbsp;returns&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax.</span><br>
<span class="lineno"></span><span class="comment" id="1568252">//</span><br>
<span class="lineno">530</span><span class="comment" id="1568255">//&nbsp;If&nbsp;s&nbsp;is&nbsp;syntactically&nbsp;well-formed&nbsp;but&nbsp;is&nbsp;more&nbsp;than&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span><span class="comment" id="1568317">//&nbsp;away&nbsp;from&nbsp;the&nbsp;largest&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;the&nbsp;given&nbsp;size,</span><br>
<span class="lineno"></span><span class="comment" id="1568383">//&nbsp;ParseFloat&nbsp;returns&nbsp;f&nbsp;=&nbsp;±Inf,&nbsp;err.Err&nbsp;=&nbsp;ErrRange.</span><br>
<span class="lineno"></span><span class="keyword" id="1568436">func</span>&nbsp;<span class="ident" id="1568441">ParseFloat</span><span class="op" id="1568451">(</span><span class="ident" id="1568452">s</span>&nbsp;<span class="builtintype" id="1568454">string</span><span class="op" id="1568460">,</span>&nbsp;<span class="ident" id="1568462">bitSize</span>&nbsp;<span class="builtintype" id="1568470">int</span><span class="op" id="1568473">)</span>&nbsp;<span class="op" id="1568475">(</span><span class="ident" id="1568476">f</span>&nbsp;<span class="builtintype" id="1568478">float64</span><span class="op" id="1568485">,</span>&nbsp;<span class="ident" id="1568487">err</span>&nbsp;<span class="builtintype" id="1568491">error</span><span class="op" id="1568496">)</span>&nbsp;<span class="op" id="1568498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568501">if</span>&nbsp;<span class="ident" id="1568504"><a href="/strconv/atof.go.html#1568462">bitSize</a></span>&nbsp;<span class="op" id="1568512">==</span>&nbsp;<span class="num" id="1568515">32</span>&nbsp;<span class="op" id="1568518">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568522">f1</span><span class="op" id="1568524">,</span>&nbsp;<span class="ident" id="1568526">err1</span>&nbsp;<span class="op" id="1568531">:=</span>&nbsp;<span class="ident" id="1568534"><a href="/strconv/atof.go.html#1565897">atof32</a></span><span class="op" id="1568540">(</span><span class="ident" id="1568541"><a href="/strconv/atof.go.html#1568452">s</a></span><span class="op" id="1568542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568546">return</span>&nbsp;<span class="builtintype" id="1568553">float64</span><span class="op" id="1568560">(</span><span class="ident" id="1568561"><a href="/strconv/atof.go.html#1568522">f1</a></span><span class="op" id="1568563">)</span><span class="op" id="1568564">,</span>&nbsp;<span class="ident" id="1568566"><a href="/strconv/atof.go.html#1568526">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1568572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1568575">f1</span><span class="op" id="1568577">,</span>&nbsp;<span class="ident" id="1568579">err1</span>&nbsp;<span class="op" id="1568584">:=</span>&nbsp;<span class="ident" id="1568587"><a href="/strconv/atof.go.html#1566782">atof64</a></span><span class="op" id="1568593">(</span><span class="ident" id="1568594"><a href="/strconv/atof.go.html#1568452">s</a></span><span class="op" id="1568595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1568598">return</span>&nbsp;<span class="ident" id="1568605"><a href="/strconv/atof.go.html#1568575">f1</a></span><span class="op" id="1568607">,</span>&nbsp;<span class="ident" id="1568609"><a href="/strconv/atof.go.html#1568579">err1</a></span><br>
<span class="lineno">540</span><span class="op" id="1568614">}</span>
</div>
</body>
</html>
