<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8363195">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8363250">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8363304">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8363355">package</span>&nbsp;<span class="ident" id="8363363">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8363368">import</span>&nbsp;<span class="op" id="8363375">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8363378">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8363387">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8363398">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8363408">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8363411">type</span>&nbsp;<span class="ident" id="8363416">typeT</span>&nbsp;<span class="keyword" id="8363422">struct</span>&nbsp;<span class="op" id="8363429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363432">id</span>&nbsp;&nbsp;<span class="ident" id="8363436">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363444">str</span>&nbsp;<span class="builtintype" id="8363448">string</span><br>
<span class="lineno"></span><span class="op" id="8363455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8363458">var</span>&nbsp;<span class="ident" id="8363462">basicTypes</span>&nbsp;<span class="op" id="8363473">=</span>&nbsp;<span class="op" id="8363475">[</span><span class="op" id="8363476">]</span><span class="ident" id="8363477">typeT</span><span class="op" id="8363482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363485">{</span><span class="ident" id="8363486">tBool</span><span class="op" id="8363491">,</span>&nbsp;<span class="string" id="8363493">&#34;bool&#34;</span><span class="op" id="8363499">}</span><span class="op" id="8363500">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363503">{</span><span class="ident" id="8363504">tInt</span><span class="op" id="8363508">,</span>&nbsp;<span class="string" id="8363510">&#34;int&#34;</span><span class="op" id="8363515">}</span><span class="op" id="8363516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363519">{</span><span class="ident" id="8363520">tUint</span><span class="op" id="8363525">,</span>&nbsp;<span class="string" id="8363527">&#34;uint&#34;</span><span class="op" id="8363533">}</span><span class="op" id="8363534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363537">{</span><span class="ident" id="8363538">tFloat</span><span class="op" id="8363544">,</span>&nbsp;<span class="string" id="8363546">&#34;float&#34;</span><span class="op" id="8363553">}</span><span class="op" id="8363554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363557">{</span><span class="ident" id="8363558">tBytes</span><span class="op" id="8363564">,</span>&nbsp;<span class="string" id="8363566">&#34;bytes&#34;</span><span class="op" id="8363573">}</span><span class="op" id="8363574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363577">{</span><span class="ident" id="8363578">tString</span><span class="op" id="8363585">,</span>&nbsp;<span class="string" id="8363587">&#34;string&#34;</span><span class="op" id="8363595">}</span><span class="op" id="8363596">,</span><br>
<span class="lineno">25</span><span class="op" id="8363598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8363601">func</span>&nbsp;<span class="ident" id="8363606">getTypeUnlocked</span><span class="op" id="8363621">(</span><span class="ident" id="8363622">name</span>&nbsp;<span class="builtintype" id="8363627">string</span><span class="op" id="8363633">,</span>&nbsp;<span class="ident" id="8363635">rt</span>&nbsp;<span class="ident" id="8363638">reflect</span><span class="op" id="8363645">.</span><span class="ident" id="8363646">Type</span><span class="op" id="8363650">)</span>&nbsp;<span class="ident" id="8363652">gobType</span>&nbsp;<span class="op" id="8363660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363663">typeLock</span><span class="op" id="8363671">.</span><span class="ident" id="8363672">Lock</span><span class="op" id="8363676">(</span><span class="op" id="8363677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363680">defer</span>&nbsp;<span class="ident" id="8363686">typeLock</span><span class="op" id="8363694">.</span><span class="ident" id="8363695">Unlock</span><span class="op" id="8363701">(</span><span class="op" id="8363702">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363705">t</span><span class="op" id="8363706">,</span>&nbsp;<span class="ident" id="8363708">err</span>&nbsp;<span class="op" id="8363712">:=</span>&nbsp;<span class="ident" id="8363715">getBaseType</span><span class="op" id="8363726">(</span><span class="ident" id="8363727">name</span><span class="op" id="8363731">,</span>&nbsp;<span class="ident" id="8363733">rt</span><span class="op" id="8363735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363738">if</span>&nbsp;<span class="ident" id="8363741">err</span>&nbsp;<span class="op" id="8363745">!=</span>&nbsp;<span class="ident" id="8363748">nil</span>&nbsp;<span class="op" id="8363752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8363756">panic</span><span class="op" id="8363761">(</span><span class="string" id="8363762">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8363782">+</span>&nbsp;<span class="ident" id="8363784">err</span><span class="op" id="8363787">.</span><span class="ident" id="8363788">Error</span><span class="op" id="8363793">(</span><span class="op" id="8363794">)</span><span class="op" id="8363795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363801">return</span>&nbsp;<span class="ident" id="8363808">t</span><br>
<span class="lineno">35</span><span class="op" id="8363810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8363813">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8363830">func</span>&nbsp;<span class="ident" id="8363835">TestBasic</span><span class="op" id="8363844">(</span><span class="ident" id="8363845">t</span>&nbsp;<span class="op" id="8363847">*</span><span class="ident" id="8363848">testing</span><span class="op" id="8363855">.</span><span class="ident" id="8363856">T</span><span class="op" id="8363857">)</span>&nbsp;<span class="op" id="8363859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363862">for</span>&nbsp;<span class="ident" id="8363866">_</span><span class="op" id="8363867">,</span>&nbsp;<span class="ident" id="8363869">tt</span>&nbsp;<span class="op" id="8363872">:=</span>&nbsp;<span class="keyword" id="8363875">range</span>&nbsp;<span class="ident" id="8363881">basicTypes</span>&nbsp;<span class="op" id="8363892">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363896">if</span>&nbsp;<span class="ident" id="8363899">tt</span><span class="op" id="8363901">.</span><span class="ident" id="8363902">id</span><span class="op" id="8363904">.</span><span class="builtintype" id="8363905">string</span><span class="op" id="8363911">(</span><span class="op" id="8363912">)</span>&nbsp;<span class="op" id="8363914">!=</span>&nbsp;<span class="ident" id="8363917">tt</span><span class="op" id="8363919">.</span><span class="ident" id="8363920">str</span>&nbsp;<span class="op" id="8363924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363929">t</span><span class="op" id="8363930">.</span><span class="ident" id="8363931">Errorf</span><span class="op" id="8363937">(</span><span class="string" id="8363938">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8363969">,</span>&nbsp;<span class="ident" id="8363971">tt</span><span class="op" id="8363973">.</span><span class="ident" id="8363974">str</span><span class="op" id="8363977">,</span>&nbsp;<span class="ident" id="8363979">tt</span><span class="op" id="8363981">.</span><span class="ident" id="8363982">id</span><span class="op" id="8363984">.</span><span class="builtintype" id="8363985">string</span><span class="op" id="8363991">(</span><span class="op" id="8363992">)</span><span class="op" id="8363993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364001">if</span>&nbsp;<span class="ident" id="8364004">tt</span><span class="op" id="8364006">.</span><span class="ident" id="8364007">id</span>&nbsp;<span class="op" id="8364010">==</span>&nbsp;<span class="num" id="8364013">0</span>&nbsp;<span class="op" id="8364015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364020">t</span><span class="op" id="8364021">.</span><span class="ident" id="8364022">Errorf</span><span class="op" id="8364028">(</span><span class="string" id="8364029">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8364048">,</span>&nbsp;<span class="ident" id="8364050">tt</span><span class="op" id="8364052">.</span><span class="ident" id="8364053">str</span><span class="op" id="8364056">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364063">}</span><br>
<span class="lineno"></span><span class="op" id="8364065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8364068">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8364136">func</span>&nbsp;<span class="ident" id="8364141">TestReregistration</span><span class="op" id="8364159">(</span><span class="ident" id="8364160">t</span>&nbsp;<span class="op" id="8364162">*</span><span class="ident" id="8364163">testing</span><span class="op" id="8364170">.</span><span class="ident" id="8364171">T</span><span class="op" id="8364172">)</span>&nbsp;<span class="op" id="8364174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364177">newtyp</span>&nbsp;<span class="op" id="8364184">:=</span>&nbsp;<span class="ident" id="8364187">getTypeUnlocked</span><span class="op" id="8364202">(</span><span class="string" id="8364203">&#34;int&#34;</span><span class="op" id="8364208">,</span>&nbsp;<span class="ident" id="8364210">reflect</span><span class="op" id="8364217">.</span><span class="ident" id="8364218">TypeOf</span><span class="op" id="8364224">(</span><span class="builtintype" id="8364225">int</span><span class="op" id="8364228">(</span><span class="num" id="8364229">0</span><span class="op" id="8364230">)</span><span class="op" id="8364231">)</span><span class="op" id="8364232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364235">if</span>&nbsp;<span class="ident" id="8364238">newtyp</span>&nbsp;<span class="op" id="8364245">!=</span>&nbsp;<span class="ident" id="8364248">tInt</span><span class="op" id="8364252">.</span><span class="ident" id="8364253">gobType</span><span class="op" id="8364260">(</span><span class="op" id="8364261">)</span>&nbsp;<span class="op" id="8364263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364267">t</span><span class="op" id="8364268">.</span><span class="ident" id="8364269">Errorf</span><span class="op" id="8364275">(</span><span class="string" id="8364276">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8364311">,</span>&nbsp;<span class="ident" id="8364313">newtyp</span><span class="op" id="8364319">.</span><span class="builtintype" id="8364320">string</span><span class="op" id="8364326">(</span><span class="op" id="8364327">)</span><span class="op" id="8364328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364331">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364334">newtyp</span>&nbsp;<span class="op" id="8364341">=</span>&nbsp;<span class="ident" id="8364343">getTypeUnlocked</span><span class="op" id="8364358">(</span><span class="string" id="8364359">&#34;uint&#34;</span><span class="op" id="8364365">,</span>&nbsp;<span class="ident" id="8364367">reflect</span><span class="op" id="8364374">.</span><span class="ident" id="8364375">TypeOf</span><span class="op" id="8364381">(</span><span class="builtintype" id="8364382">uint</span><span class="op" id="8364386">(</span><span class="num" id="8364387">0</span><span class="op" id="8364388">)</span><span class="op" id="8364389">)</span><span class="op" id="8364390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364393">if</span>&nbsp;<span class="ident" id="8364396">newtyp</span>&nbsp;<span class="op" id="8364403">!=</span>&nbsp;<span class="ident" id="8364406">tUint</span><span class="op" id="8364411">.</span><span class="ident" id="8364412">gobType</span><span class="op" id="8364419">(</span><span class="op" id="8364420">)</span>&nbsp;<span class="op" id="8364422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364426">t</span><span class="op" id="8364427">.</span><span class="ident" id="8364428">Errorf</span><span class="op" id="8364434">(</span><span class="string" id="8364435">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8364470">,</span>&nbsp;<span class="ident" id="8364472">newtyp</span><span class="op" id="8364478">.</span><span class="builtintype" id="8364479">string</span><span class="op" id="8364485">(</span><span class="op" id="8364486">)</span><span class="op" id="8364487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364493">newtyp</span>&nbsp;<span class="op" id="8364500">=</span>&nbsp;<span class="ident" id="8364502">getTypeUnlocked</span><span class="op" id="8364517">(</span><span class="string" id="8364518">&#34;string&#34;</span><span class="op" id="8364526">,</span>&nbsp;<span class="ident" id="8364528">reflect</span><span class="op" id="8364535">.</span><span class="ident" id="8364536">TypeOf</span><span class="op" id="8364542">(</span><span class="string" id="8364543">&#34;hello&#34;</span><span class="op" id="8364550">)</span><span class="op" id="8364551">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364554">if</span>&nbsp;<span class="ident" id="8364557">newtyp</span>&nbsp;<span class="op" id="8364564">!=</span>&nbsp;<span class="ident" id="8364567">tString</span><span class="op" id="8364574">.</span><span class="ident" id="8364575">gobType</span><span class="op" id="8364582">(</span><span class="op" id="8364583">)</span>&nbsp;<span class="op" id="8364585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364589">t</span><span class="op" id="8364590">.</span><span class="ident" id="8364591">Errorf</span><span class="op" id="8364597">(</span><span class="string" id="8364598">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8364633">,</span>&nbsp;<span class="ident" id="8364635">newtyp</span><span class="op" id="8364641">.</span><span class="builtintype" id="8364642">string</span><span class="op" id="8364648">(</span><span class="op" id="8364649">)</span><span class="op" id="8364650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364653">}</span><br>
<span class="lineno"></span><span class="op" id="8364655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8364658">func</span>&nbsp;<span class="ident" id="8364663">TestArrayType</span><span class="op" id="8364676">(</span><span class="ident" id="8364677">t</span>&nbsp;<span class="op" id="8364679">*</span><span class="ident" id="8364680">testing</span><span class="op" id="8364687">.</span><span class="ident" id="8364688">T</span><span class="op" id="8364689">)</span>&nbsp;<span class="op" id="8364691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364694">var</span>&nbsp;<span class="ident" id="8364698">a3</span>&nbsp;<span class="op" id="8364701">[</span><span class="num" id="8364702">3</span><span class="op" id="8364703">]</span><span class="builtintype" id="8364704">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364709">a3int</span>&nbsp;<span class="op" id="8364715">:=</span>&nbsp;<span class="ident" id="8364718">getTypeUnlocked</span><span class="op" id="8364733">(</span><span class="string" id="8364734">&#34;foo&#34;</span><span class="op" id="8364739">,</span>&nbsp;<span class="ident" id="8364741">reflect</span><span class="op" id="8364748">.</span><span class="ident" id="8364749">TypeOf</span><span class="op" id="8364755">(</span><span class="ident" id="8364756">a3</span><span class="op" id="8364758">)</span><span class="op" id="8364759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364762">newa3int</span>&nbsp;<span class="op" id="8364771">:=</span>&nbsp;<span class="ident" id="8364774">getTypeUnlocked</span><span class="op" id="8364789">(</span><span class="string" id="8364790">&#34;bar&#34;</span><span class="op" id="8364795">,</span>&nbsp;<span class="ident" id="8364797">reflect</span><span class="op" id="8364804">.</span><span class="ident" id="8364805">TypeOf</span><span class="op" id="8364811">(</span><span class="ident" id="8364812">a3</span><span class="op" id="8364814">)</span><span class="op" id="8364815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364818">if</span>&nbsp;<span class="ident" id="8364821">a3int</span>&nbsp;<span class="op" id="8364827">!=</span>&nbsp;<span class="ident" id="8364830">newa3int</span>&nbsp;<span class="op" id="8364839">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364843">t</span><span class="op" id="8364844">.</span><span class="ident" id="8364845">Errorf</span><span class="op" id="8364851">(</span><span class="string" id="8364852">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8364900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8364903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364906">var</span>&nbsp;<span class="ident" id="8364910">a4</span>&nbsp;<span class="op" id="8364913">[</span><span class="num" id="8364914">4</span><span class="op" id="8364915">]</span><span class="builtintype" id="8364916">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364921">a4int</span>&nbsp;<span class="op" id="8364927">:=</span>&nbsp;<span class="ident" id="8364930">getTypeUnlocked</span><span class="op" id="8364945">(</span><span class="string" id="8364946">&#34;goo&#34;</span><span class="op" id="8364951">,</span>&nbsp;<span class="ident" id="8364953">reflect</span><span class="op" id="8364960">.</span><span class="ident" id="8364961">TypeOf</span><span class="op" id="8364967">(</span><span class="ident" id="8364968">a4</span><span class="op" id="8364970">)</span><span class="op" id="8364971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8364974">if</span>&nbsp;<span class="ident" id="8364977">a3int</span>&nbsp;<span class="op" id="8364983">==</span>&nbsp;<span class="ident" id="8364986">a4int</span>&nbsp;<span class="op" id="8364992">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8364996">t</span><span class="op" id="8364997">.</span><span class="ident" id="8364998">Errorf</span><span class="op" id="8365004">(</span><span class="string" id="8365005">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8365057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365063">var</span>&nbsp;<span class="ident" id="8365067">b3</span>&nbsp;<span class="op" id="8365070">[</span><span class="num" id="8365071">3</span><span class="op" id="8365072">]</span><span class="builtintype" id="8365073">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365079">a3bool</span>&nbsp;<span class="op" id="8365086">:=</span>&nbsp;<span class="ident" id="8365089">getTypeUnlocked</span><span class="op" id="8365104">(</span><span class="string" id="8365105">&#34;&#34;</span><span class="op" id="8365107">,</span>&nbsp;<span class="ident" id="8365109">reflect</span><span class="op" id="8365116">.</span><span class="ident" id="8365117">TypeOf</span><span class="op" id="8365123">(</span><span class="ident" id="8365124">b3</span><span class="op" id="8365126">)</span><span class="op" id="8365127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365130">if</span>&nbsp;<span class="ident" id="8365133">a3int</span>&nbsp;<span class="op" id="8365139">==</span>&nbsp;<span class="ident" id="8365142">a3bool</span>&nbsp;<span class="op" id="8365149">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365153">t</span><span class="op" id="8365154">.</span><span class="ident" id="8365155">Errorf</span><span class="op" id="8365161">(</span><span class="string" id="8365162">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8365215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365221">str</span>&nbsp;<span class="op" id="8365225">:=</span>&nbsp;<span class="ident" id="8365228">a3bool</span><span class="op" id="8365234">.</span><span class="builtintype" id="8365235">string</span><span class="op" id="8365241">(</span><span class="op" id="8365242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365245">expected</span>&nbsp;<span class="op" id="8365254">:=</span>&nbsp;<span class="string" id="8365257">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365268">if</span>&nbsp;<span class="ident" id="8365271">str</span>&nbsp;<span class="op" id="8365275">!=</span>&nbsp;<span class="ident" id="8365278">expected</span>&nbsp;<span class="op" id="8365287">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365291">t</span><span class="op" id="8365292">.</span><span class="ident" id="8365293">Errorf</span><span class="op" id="8365299">(</span><span class="string" id="8365300">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8365334">,</span>&nbsp;<span class="ident" id="8365336">str</span><span class="op" id="8365339">,</span>&nbsp;<span class="ident" id="8365341">expected</span><span class="op" id="8365349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365352">}</span><br>
<span class="lineno"></span><span class="op" id="8365354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8365357">func</span>&nbsp;<span class="ident" id="8365362">TestSliceType</span><span class="op" id="8365375">(</span><span class="ident" id="8365376">t</span>&nbsp;<span class="op" id="8365378">*</span><span class="ident" id="8365379">testing</span><span class="op" id="8365386">.</span><span class="ident" id="8365387">T</span><span class="op" id="8365388">)</span>&nbsp;<span class="op" id="8365390">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365393">var</span>&nbsp;<span class="ident" id="8365397">s</span>&nbsp;<span class="op" id="8365399">[</span><span class="op" id="8365400">]</span><span class="builtintype" id="8365401">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365406">sint</span>&nbsp;<span class="op" id="8365411">:=</span>&nbsp;<span class="ident" id="8365414">getTypeUnlocked</span><span class="op" id="8365429">(</span><span class="string" id="8365430">&#34;slice&#34;</span><span class="op" id="8365437">,</span>&nbsp;<span class="ident" id="8365439">reflect</span><span class="op" id="8365446">.</span><span class="ident" id="8365447">TypeOf</span><span class="op" id="8365453">(</span><span class="ident" id="8365454">s</span><span class="op" id="8365455">)</span><span class="op" id="8365456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365459">var</span>&nbsp;<span class="ident" id="8365463">news</span>&nbsp;<span class="op" id="8365468">[</span><span class="op" id="8365469">]</span><span class="builtintype" id="8365470">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365475">newsint</span>&nbsp;<span class="op" id="8365483">:=</span>&nbsp;<span class="ident" id="8365486">getTypeUnlocked</span><span class="op" id="8365501">(</span><span class="string" id="8365502">&#34;slice1&#34;</span><span class="op" id="8365510">,</span>&nbsp;<span class="ident" id="8365512">reflect</span><span class="op" id="8365519">.</span><span class="ident" id="8365520">TypeOf</span><span class="op" id="8365526">(</span><span class="ident" id="8365527">news</span><span class="op" id="8365531">)</span><span class="op" id="8365532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365535">if</span>&nbsp;<span class="ident" id="8365538">sint</span>&nbsp;<span class="op" id="8365543">!=</span>&nbsp;<span class="ident" id="8365546">newsint</span>&nbsp;<span class="op" id="8365554">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365558">t</span><span class="op" id="8365559">.</span><span class="ident" id="8365560">Errorf</span><span class="op" id="8365566">(</span><span class="string" id="8365567">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8365614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365620">var</span>&nbsp;<span class="ident" id="8365624">b</span>&nbsp;<span class="op" id="8365626">[</span><span class="op" id="8365627">]</span><span class="builtintype" id="8365628">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365634">sbool</span>&nbsp;<span class="op" id="8365640">:=</span>&nbsp;<span class="ident" id="8365643">getTypeUnlocked</span><span class="op" id="8365658">(</span><span class="string" id="8365659">&#34;&#34;</span><span class="op" id="8365661">,</span>&nbsp;<span class="ident" id="8365663">reflect</span><span class="op" id="8365670">.</span><span class="ident" id="8365671">TypeOf</span><span class="op" id="8365677">(</span><span class="ident" id="8365678">b</span><span class="op" id="8365679">)</span><span class="op" id="8365680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365683">if</span>&nbsp;<span class="ident" id="8365686">sbool</span>&nbsp;<span class="op" id="8365692">==</span>&nbsp;<span class="ident" id="8365695">sint</span>&nbsp;<span class="op" id="8365700">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365704">t</span><span class="op" id="8365705">.</span><span class="ident" id="8365706">Errorf</span><span class="op" id="8365712">(</span><span class="string" id="8365713">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8365764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365770">str</span>&nbsp;<span class="op" id="8365774">:=</span>&nbsp;<span class="ident" id="8365777">sbool</span><span class="op" id="8365782">.</span><span class="builtintype" id="8365783">string</span><span class="op" id="8365789">(</span><span class="op" id="8365790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365793">expected</span>&nbsp;<span class="op" id="8365802">:=</span>&nbsp;<span class="string" id="8365805">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365815">if</span>&nbsp;<span class="ident" id="8365818">str</span>&nbsp;<span class="op" id="8365822">!=</span>&nbsp;<span class="ident" id="8365825">expected</span>&nbsp;<span class="op" id="8365834">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365838">t</span><span class="op" id="8365839">.</span><span class="ident" id="8365840">Errorf</span><span class="op" id="8365846">(</span><span class="string" id="8365847">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8365881">,</span>&nbsp;<span class="ident" id="8365883">str</span><span class="op" id="8365886">,</span>&nbsp;<span class="ident" id="8365888">expected</span><span class="op" id="8365896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8365899">}</span><br>
<span class="lineno"></span><span class="op" id="8365901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8365904">func</span>&nbsp;<span class="ident" id="8365909">TestMapType</span><span class="op" id="8365920">(</span><span class="ident" id="8365921">t</span>&nbsp;<span class="op" id="8365923">*</span><span class="ident" id="8365924">testing</span><span class="op" id="8365931">.</span><span class="ident" id="8365932">T</span><span class="op" id="8365933">)</span>&nbsp;<span class="op" id="8365935">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8365938">var</span>&nbsp;<span class="ident" id="8365942">m</span>&nbsp;<span class="keyword" id="8365944">map</span><span class="op" id="8365947">[</span><span class="builtintype" id="8365948">string</span><span class="op" id="8365954">]</span><span class="builtintype" id="8365955">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8365960">mapStringInt</span>&nbsp;<span class="op" id="8365973">:=</span>&nbsp;<span class="ident" id="8365976">getTypeUnlocked</span><span class="op" id="8365991">(</span><span class="string" id="8365992">&#34;map&#34;</span><span class="op" id="8365997">,</span>&nbsp;<span class="ident" id="8365999">reflect</span><span class="op" id="8366006">.</span><span class="ident" id="8366007">TypeOf</span><span class="op" id="8366013">(</span><span class="ident" id="8366014">m</span><span class="op" id="8366015">)</span><span class="op" id="8366016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8366019">var</span>&nbsp;<span class="ident" id="8366023">newm</span>&nbsp;<span class="keyword" id="8366028">map</span><span class="op" id="8366031">[</span><span class="builtintype" id="8366032">string</span><span class="op" id="8366038">]</span><span class="builtintype" id="8366039">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366044">newMapStringInt</span>&nbsp;<span class="op" id="8366060">:=</span>&nbsp;<span class="ident" id="8366063">getTypeUnlocked</span><span class="op" id="8366078">(</span><span class="string" id="8366079">&#34;map1&#34;</span><span class="op" id="8366085">,</span>&nbsp;<span class="ident" id="8366087">reflect</span><span class="op" id="8366094">.</span><span class="ident" id="8366095">TypeOf</span><span class="op" id="8366101">(</span><span class="ident" id="8366102">newm</span><span class="op" id="8366106">)</span><span class="op" id="8366107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8366110">if</span>&nbsp;<span class="ident" id="8366113">mapStringInt</span>&nbsp;<span class="op" id="8366126">!=</span>&nbsp;<span class="ident" id="8366129">newMapStringInt</span>&nbsp;<span class="op" id="8366145">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366149">t</span><span class="op" id="8366150">.</span><span class="ident" id="8366151">Errorf</span><span class="op" id="8366157">(</span><span class="string" id="8366158">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8366214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8366217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8366220">var</span>&nbsp;<span class="ident" id="8366224">b</span>&nbsp;<span class="keyword" id="8366226">map</span><span class="op" id="8366229">[</span><span class="builtintype" id="8366230">string</span><span class="op" id="8366236">]</span><span class="builtintype" id="8366237">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366243">mapStringBool</span>&nbsp;<span class="op" id="8366257">:=</span>&nbsp;<span class="ident" id="8366260">getTypeUnlocked</span><span class="op" id="8366275">(</span><span class="string" id="8366276">&#34;&#34;</span><span class="op" id="8366278">,</span>&nbsp;<span class="ident" id="8366280">reflect</span><span class="op" id="8366287">.</span><span class="ident" id="8366288">TypeOf</span><span class="op" id="8366294">(</span><span class="ident" id="8366295">b</span><span class="op" id="8366296">)</span><span class="op" id="8366297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8366300">if</span>&nbsp;<span class="ident" id="8366303">mapStringBool</span>&nbsp;<span class="op" id="8366317">==</span>&nbsp;<span class="ident" id="8366320">mapStringInt</span>&nbsp;<span class="op" id="8366333">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366337">t</span><span class="op" id="8366338">.</span><span class="ident" id="8366339">Errorf</span><span class="op" id="8366345">(</span><span class="string" id="8366346">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8366415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8366418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366421">str</span>&nbsp;<span class="op" id="8366425">:=</span>&nbsp;<span class="ident" id="8366428">mapStringBool</span><span class="op" id="8366441">.</span><span class="builtintype" id="8366442">string</span><span class="op" id="8366448">(</span><span class="op" id="8366449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366452">expected</span>&nbsp;<span class="op" id="8366461">:=</span>&nbsp;<span class="string" id="8366464">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8366483">if</span>&nbsp;<span class="ident" id="8366486">str</span>&nbsp;<span class="op" id="8366490">!=</span>&nbsp;<span class="ident" id="8366493">expected</span>&nbsp;<span class="op" id="8366502">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366506">t</span><span class="op" id="8366507">.</span><span class="ident" id="8366508">Errorf</span><span class="op" id="8366514">(</span><span class="string" id="8366515">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8366547">,</span>&nbsp;<span class="ident" id="8366549">str</span><span class="op" id="8366552">,</span>&nbsp;<span class="ident" id="8366554">expected</span><span class="op" id="8366562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8366565">}</span><br>
<span class="lineno"></span><span class="op" id="8366567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8366570">type</span>&nbsp;<span class="ident" id="8366575">Bar</span>&nbsp;<span class="keyword" id="8366579">struct</span>&nbsp;<span class="op" id="8366586">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366589">X</span>&nbsp;<span class="builtintype" id="8366591">string</span><br>
<span class="lineno"></span><span class="op" id="8366598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8366601">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8366682">type</span>&nbsp;<span class="ident" id="8366687">Foo</span>&nbsp;<span class="keyword" id="8366691">struct</span>&nbsp;<span class="op" id="8366698">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366701">A</span>&nbsp;<span class="builtintype" id="8366703">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366708">B</span>&nbsp;<span class="builtintype" id="8366710">int32</span>&nbsp;<span class="comment" id="8366716">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366736">C</span>&nbsp;<span class="builtintype" id="8366738">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366746">D</span>&nbsp;<span class="op" id="8366748">[</span><span class="op" id="8366749">]</span><span class="builtintype" id="8366750">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366756">E</span>&nbsp;<span class="op" id="8366758">*</span><span class="builtintype" id="8366759">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8366770">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366794">F</span>&nbsp;<span class="op" id="8366796">*</span><span class="op" id="8366797">*</span><span class="op" id="8366798">*</span><span class="op" id="8366799">*</span><span class="builtintype" id="8366800">float64</span>&nbsp;<span class="comment" id="8366808">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366832">G</span>&nbsp;<span class="op" id="8366834">*</span><span class="ident" id="8366835">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366840">H</span>&nbsp;<span class="op" id="8366842">*</span><span class="ident" id="8366843">Bar</span>&nbsp;<span class="comment" id="8366847">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366902">I</span>&nbsp;<span class="op" id="8366904">*</span><span class="ident" id="8366905">Foo</span>&nbsp;<span class="comment" id="8366909">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8366929">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8366932">func</span>&nbsp;<span class="ident" id="8366937">TestStructType</span><span class="op" id="8366951">(</span><span class="ident" id="8366952">t</span>&nbsp;<span class="op" id="8366954">*</span><span class="ident" id="8366955">testing</span><span class="op" id="8366962">.</span><span class="ident" id="8366963">T</span><span class="op" id="8366964">)</span>&nbsp;<span class="op" id="8366966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8366969">sstruct</span>&nbsp;<span class="op" id="8366977">:=</span>&nbsp;<span class="ident" id="8366980">getTypeUnlocked</span><span class="op" id="8366995">(</span><span class="string" id="8366996">&#34;Foo&#34;</span><span class="op" id="8367001">,</span>&nbsp;<span class="ident" id="8367003">reflect</span><span class="op" id="8367010">.</span><span class="ident" id="8367011">TypeOf</span><span class="op" id="8367017">(</span><span class="ident" id="8367018">Foo</span><span class="op" id="8367021">{</span><span class="op" id="8367022">}</span><span class="op" id="8367023">)</span><span class="op" id="8367024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367027">str</span>&nbsp;<span class="op" id="8367031">:=</span>&nbsp;<span class="ident" id="8367034">sstruct</span><span class="op" id="8367041">.</span><span class="builtintype" id="8367042">string</span><span class="op" id="8367048">(</span><span class="op" id="8367049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8367052">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367109">expected</span>&nbsp;<span class="op" id="8367118">:=</span>&nbsp;<span class="string" id="8367121">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8367236">if</span>&nbsp;<span class="ident" id="8367239">str</span>&nbsp;<span class="op" id="8367243">!=</span>&nbsp;<span class="ident" id="8367246">expected</span>&nbsp;<span class="op" id="8367255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367259">t</span><span class="op" id="8367260">.</span><span class="ident" id="8367261">Errorf</span><span class="op" id="8367267">(</span><span class="string" id="8367268">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8367303">,</span>&nbsp;<span class="ident" id="8367305">str</span><span class="op" id="8367308">,</span>&nbsp;<span class="ident" id="8367310">expected</span><span class="op" id="8367318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8367321">}</span><br>
<span class="lineno"></span><span class="op" id="8367323">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8367326">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8367403">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8367440">func</span>&nbsp;<span class="ident" id="8367445">TestRegistration</span><span class="op" id="8367461">(</span><span class="ident" id="8367462">t</span>&nbsp;<span class="op" id="8367464">*</span><span class="ident" id="8367465">testing</span><span class="op" id="8367472">.</span><span class="ident" id="8367473">T</span><span class="op" id="8367474">)</span>&nbsp;<span class="op" id="8367476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8367479">type</span>&nbsp;<span class="ident" id="8367484">T</span>&nbsp;<span class="keyword" id="8367486">struct</span><span class="op" id="8367492">{</span>&nbsp;<span class="ident" id="8367494">a</span>&nbsp;<span class="builtintype" id="8367496">int</span>&nbsp;<span class="op" id="8367500">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367503">Register</span><span class="op" id="8367511">(</span><span class="builtinfunc" id="8367512">new</span><span class="op" id="8367515">(</span><span class="ident" id="8367516">T</span><span class="op" id="8367517">)</span><span class="op" id="8367518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367521">Register</span><span class="op" id="8367529">(</span><span class="builtinfunc" id="8367530">new</span><span class="op" id="8367533">(</span><span class="ident" id="8367534">T</span><span class="op" id="8367535">)</span><span class="op" id="8367536">)</span><br>
<span class="lineno"></span><span class="op" id="8367538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8367541">type</span>&nbsp;<span class="ident" id="8367546">N1</span>&nbsp;<span class="keyword" id="8367549">struct</span><span class="op" id="8367555">{</span><span class="op" id="8367556">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8367558">type</span>&nbsp;<span class="ident" id="8367563">N2</span>&nbsp;<span class="keyword" id="8367566">struct</span><span class="op" id="8367572">{</span><span class="op" id="8367573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8367576">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8367612">func</span>&nbsp;<span class="ident" id="8367617">TestRegistrationNaming</span><span class="op" id="8367639">(</span><span class="ident" id="8367640">t</span>&nbsp;<span class="op" id="8367642">*</span><span class="ident" id="8367643">testing</span><span class="op" id="8367650">.</span><span class="ident" id="8367651">T</span><span class="op" id="8367652">)</span>&nbsp;<span class="op" id="8367654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367657">testCases</span>&nbsp;<span class="op" id="8367667">:=</span>&nbsp;<span class="op" id="8367670">[</span><span class="op" id="8367671">]</span><span class="keyword" id="8367672">struct</span>&nbsp;<span class="op" id="8367679">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367683">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8367688">interface</span><span class="op" id="8367697">{</span><span class="op" id="8367698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367702">name</span>&nbsp;<span class="builtintype" id="8367707">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8367715">}</span><span class="op" id="8367716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8367720">{</span><span class="op" id="8367721">&amp;</span><span class="ident" id="8367722">N1</span><span class="op" id="8367724">{</span><span class="op" id="8367725">}</span><span class="op" id="8367726">,</span>&nbsp;<span class="string" id="8367728">&#34;*gob.N1&#34;</span><span class="op" id="8367737">}</span><span class="op" id="8367738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8367742">{</span><span class="ident" id="8367743">N2</span><span class="op" id="8367745">{</span><span class="op" id="8367746">}</span><span class="op" id="8367747">,</span>&nbsp;<span class="string" id="8367749">&#34;encoding/gob.N2&#34;</span><span class="op" id="8367766">}</span><span class="op" id="8367767">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8367770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8367774">for</span>&nbsp;<span class="ident" id="8367778">_</span><span class="op" id="8367779">,</span>&nbsp;<span class="ident" id="8367781">tc</span>&nbsp;<span class="op" id="8367784">:=</span>&nbsp;<span class="keyword" id="8367787">range</span>&nbsp;<span class="ident" id="8367793">testCases</span>&nbsp;<span class="op" id="8367803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367807">Register</span><span class="op" id="8367815">(</span><span class="ident" id="8367816">tc</span><span class="op" id="8367818">.</span><span class="ident" id="8367819">t</span><span class="op" id="8367820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367825">tct</span>&nbsp;<span class="op" id="8367829">:=</span>&nbsp;<span class="ident" id="8367832">reflect</span><span class="op" id="8367839">.</span><span class="ident" id="8367840">TypeOf</span><span class="op" id="8367846">(</span><span class="ident" id="8367847">tc</span><span class="op" id="8367849">.</span><span class="ident" id="8367850">t</span><span class="op" id="8367851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367855">registerLock</span><span class="op" id="8367867">.</span><span class="ident" id="8367868">RLock</span><span class="op" id="8367873">(</span><span class="op" id="8367874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367878">ct</span>&nbsp;<span class="op" id="8367881">:=</span>&nbsp;<span class="ident" id="8367884">nameToConcreteType</span><span class="op" id="8367902">[</span><span class="ident" id="8367903">tc</span><span class="op" id="8367905">.</span><span class="ident" id="8367906">name</span><span class="op" id="8367910">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367914">registerLock</span><span class="op" id="8367926">.</span><span class="ident" id="8367927">RUnlock</span><span class="op" id="8367934">(</span><span class="op" id="8367935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8367939">if</span>&nbsp;<span class="ident" id="8367942">ct</span>&nbsp;<span class="op" id="8367945">!=</span>&nbsp;<span class="ident" id="8367948">tct</span>&nbsp;<span class="op" id="8367952">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8367957">t</span><span class="op" id="8367958">.</span><span class="ident" id="8367959">Errorf</span><span class="op" id="8367965">(</span><span class="string" id="8367966">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8368004">,</span>&nbsp;<span class="ident" id="8368006">tc</span><span class="op" id="8368008">.</span><span class="ident" id="8368009">name</span><span class="op" id="8368013">,</span>&nbsp;<span class="ident" id="8368015">ct</span><span class="op" id="8368017">,</span>&nbsp;<span class="ident" id="8368019">tct</span><span class="op" id="8368022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8368030">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368082">if</span>&nbsp;<span class="ident" id="8368085">tct</span><span class="op" id="8368088">.</span><span class="ident" id="8368089">Kind</span><span class="op" id="8368093">(</span><span class="op" id="8368094">)</span>&nbsp;<span class="op" id="8368096">==</span>&nbsp;<span class="ident" id="8368099">reflect</span><span class="op" id="8368106">.</span><span class="ident" id="8368107">Ptr</span>&nbsp;<span class="op" id="8368111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368116">tct</span>&nbsp;<span class="op" id="8368120">=</span>&nbsp;<span class="ident" id="8368122">tct</span><span class="op" id="8368125">.</span><span class="ident" id="8368126">Elem</span><span class="op" id="8368130">(</span><span class="op" id="8368131">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368139">if</span>&nbsp;<span class="ident" id="8368142">n</span>&nbsp;<span class="op" id="8368144">:=</span>&nbsp;<span class="ident" id="8368147">concreteTypeToName</span><span class="op" id="8368165">[</span><span class="ident" id="8368166">tct</span><span class="op" id="8368169">]</span><span class="op" id="8368170">;</span>&nbsp;<span class="ident" id="8368172">n</span>&nbsp;<span class="op" id="8368174">!=</span>&nbsp;<span class="ident" id="8368177">tc</span><span class="op" id="8368179">.</span><span class="ident" id="8368180">name</span>&nbsp;<span class="op" id="8368185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368190">t</span><span class="op" id="8368191">.</span><span class="ident" id="8368192">Errorf</span><span class="op" id="8368198">(</span><span class="string" id="8368199">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8368239">,</span>&nbsp;<span class="ident" id="8368241">tct</span><span class="op" id="8368244">,</span>&nbsp;<span class="ident" id="8368246">n</span><span class="op" id="8368247">,</span>&nbsp;<span class="ident" id="8368249">tc</span><span class="op" id="8368251">.</span><span class="ident" id="8368252">name</span><span class="op" id="8368256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368263">}</span><br>
<span class="lineno">195</span><span class="op" id="8368265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8368268">func</span>&nbsp;<span class="ident" id="8368273">TestStressParallel</span><span class="op" id="8368291">(</span><span class="ident" id="8368292">t</span>&nbsp;<span class="op" id="8368294">*</span><span class="ident" id="8368295">testing</span><span class="op" id="8368302">.</span><span class="ident" id="8368303">T</span><span class="op" id="8368304">)</span>&nbsp;<span class="op" id="8368306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368309">type</span>&nbsp;<span class="ident" id="8368314">T2</span>&nbsp;<span class="keyword" id="8368317">struct</span><span class="op" id="8368323">{</span>&nbsp;<span class="ident" id="8368325">A</span>&nbsp;<span class="builtintype" id="8368327">int</span>&nbsp;<span class="op" id="8368331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368334">c</span>&nbsp;<span class="op" id="8368336">:=</span>&nbsp;<span class="builtinfunc" id="8368339">make</span><span class="op" id="8368343">(</span><span class="keyword" id="8368344">chan</span>&nbsp;<span class="builtintype" id="8368349">bool</span><span class="op" id="8368353">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368356">const</span>&nbsp;<span class="ident" id="8368362">N</span>&nbsp;<span class="op" id="8368364">=</span>&nbsp;<span class="num" id="8368366">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368370">for</span>&nbsp;<span class="ident" id="8368374">i</span>&nbsp;<span class="op" id="8368376">:=</span>&nbsp;<span class="num" id="8368379">0</span><span class="op" id="8368380">;</span>&nbsp;<span class="ident" id="8368382">i</span>&nbsp;<span class="op" id="8368384">&lt;</span>&nbsp;<span class="ident" id="8368386">N</span><span class="op" id="8368387">;</span>&nbsp;<span class="ident" id="8368389">i</span><span class="op" id="8368390">++</span>&nbsp;<span class="op" id="8368393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368397">go</span>&nbsp;<span class="keyword" id="8368400">func</span><span class="op" id="8368404">(</span><span class="op" id="8368405">)</span>&nbsp;<span class="op" id="8368407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368412">p</span>&nbsp;<span class="op" id="8368414">:=</span>&nbsp;<span class="builtinfunc" id="8368417">new</span><span class="op" id="8368420">(</span><span class="ident" id="8368421">T2</span><span class="op" id="8368423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368428">Register</span><span class="op" id="8368436">(</span><span class="ident" id="8368437">p</span><span class="op" id="8368438">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368443">b</span>&nbsp;<span class="op" id="8368445">:=</span>&nbsp;<span class="builtinfunc" id="8368448">new</span><span class="op" id="8368451">(</span><span class="ident" id="8368452">bytes</span><span class="op" id="8368457">.</span><span class="ident" id="8368458">Buffer</span><span class="op" id="8368464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368469">enc</span>&nbsp;<span class="op" id="8368473">:=</span>&nbsp;<span class="ident" id="8368476">NewEncoder</span><span class="op" id="8368486">(</span><span class="ident" id="8368487">b</span><span class="op" id="8368488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368493">err</span>&nbsp;<span class="op" id="8368497">:=</span>&nbsp;<span class="ident" id="8368500">enc</span><span class="op" id="8368503">.</span><span class="ident" id="8368504">Encode</span><span class="op" id="8368510">(</span><span class="ident" id="8368511">p</span><span class="op" id="8368512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368517">if</span>&nbsp;<span class="ident" id="8368520">err</span>&nbsp;<span class="op" id="8368524">!=</span>&nbsp;<span class="ident" id="8368527">nil</span>&nbsp;<span class="op" id="8368531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368537">t</span><span class="op" id="8368538">.</span><span class="ident" id="8368539">Error</span><span class="op" id="8368544">(</span><span class="string" id="8368545">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8368560">,</span>&nbsp;<span class="ident" id="8368562">err</span><span class="op" id="8368565">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368575">dec</span>&nbsp;<span class="op" id="8368579">:=</span>&nbsp;<span class="ident" id="8368582">NewDecoder</span><span class="op" id="8368592">(</span><span class="ident" id="8368593">b</span><span class="op" id="8368594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368599">err</span>&nbsp;<span class="op" id="8368603">=</span>&nbsp;<span class="ident" id="8368605">dec</span><span class="op" id="8368608">.</span><span class="ident" id="8368609">Decode</span><span class="op" id="8368615">(</span><span class="ident" id="8368616">p</span><span class="op" id="8368617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368622">if</span>&nbsp;<span class="ident" id="8368625">err</span>&nbsp;<span class="op" id="8368629">!=</span>&nbsp;<span class="ident" id="8368632">nil</span>&nbsp;<span class="op" id="8368636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368642">t</span><span class="op" id="8368643">.</span><span class="ident" id="8368644">Error</span><span class="op" id="8368649">(</span><span class="string" id="8368650">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8368665">,</span>&nbsp;<span class="ident" id="8368667">err</span><span class="op" id="8368670">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8368680">c</span>&nbsp;<span class="op" id="8368682">&lt;-</span>&nbsp;<span class="builtintype" id="8368685">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368692">}</span><span class="op" id="8368693">(</span><span class="op" id="8368694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8368700">for</span>&nbsp;<span class="ident" id="8368704">i</span>&nbsp;<span class="op" id="8368706">:=</span>&nbsp;<span class="num" id="8368709">0</span><span class="op" id="8368710">;</span>&nbsp;<span class="ident" id="8368712">i</span>&nbsp;<span class="op" id="8368714">&lt;</span>&nbsp;<span class="ident" id="8368716">N</span><span class="op" id="8368717">;</span>&nbsp;<span class="ident" id="8368719">i</span><span class="op" id="8368720">++</span>&nbsp;<span class="op" id="8368723">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368727">&lt;-</span><span class="ident" id="8368729">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8368732">}</span><br>
<span class="lineno"></span><span class="op" id="8368734">}</span>
</div>
</body>
</html>
