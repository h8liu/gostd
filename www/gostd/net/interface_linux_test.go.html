<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7791667">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7791723">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7791777">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7791828">package</span>&nbsp;<span class="ident" id="7791836">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791841">import</span>&nbsp;<span class="op" id="7791848">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791851">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791858">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791869">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7791879">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791882">func</span>&nbsp;<span class="op" id="7791887">(</span><span class="ident" id="7791888">ti</span>&nbsp;<span class="op" id="7791891">*</span><span class="ident" id="7791892">testInterface</span><span class="op" id="7791905">)</span>&nbsp;<span class="ident" id="7791907">setBroadcast</span><span class="op" id="7791919">(</span><span class="ident" id="7791920">suffix</span>&nbsp;<span class="builtintype" id="7791927">int</span><span class="op" id="7791930">)</span>&nbsp;<span class="builtintype" id="7791932">error</span>&nbsp;<span class="op" id="7791938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791941">ti</span><span class="op" id="7791943">.</span><span class="ident" id="7791944">name</span>&nbsp;<span class="op" id="7791949">=</span>&nbsp;<span class="ident" id="7791951">fmt</span><span class="op" id="7791954">.</span><span class="ident" id="7791955">Sprintf</span><span class="op" id="7791962">(</span><span class="string" id="7791963">&#34;gotest%d&#34;</span><span class="op" id="7791973">,</span>&nbsp;<span class="ident" id="7791975">suffix</span><span class="op" id="7791981">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791984">xname</span><span class="op" id="7791989">,</span>&nbsp;<span class="ident" id="7791991">err</span>&nbsp;<span class="op" id="7791995">:=</span>&nbsp;<span class="ident" id="7791998">exec</span><span class="op" id="7792002">.</span><span class="ident" id="7792003">LookPath</span><span class="op" id="7792011">(</span><span class="string" id="7792012">&#34;ip&#34;</span><span class="op" id="7792016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792019">if</span>&nbsp;<span class="ident" id="7792022">err</span>&nbsp;<span class="op" id="7792026">!=</span>&nbsp;<span class="ident" id="7792029">nil</span>&nbsp;<span class="op" id="7792033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792037">return</span>&nbsp;<span class="ident" id="7792044">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792052">ti</span><span class="op" id="7792054">.</span><span class="ident" id="7792055">setupCmds</span>&nbsp;<span class="op" id="7792065">=</span>&nbsp;<span class="builtinfunc" id="7792067">append</span><span class="op" id="7792073">(</span><span class="ident" id="7792074">ti</span><span class="op" id="7792076">.</span><span class="ident" id="7792077">setupCmds</span><span class="op" id="7792086">,</span>&nbsp;<span class="op" id="7792088">&amp;</span><span class="ident" id="7792089">exec</span><span class="op" id="7792093">.</span><span class="ident" id="7792094">Cmd</span><span class="op" id="7792097">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792101">Path</span><span class="op" id="7792105">:</span>&nbsp;<span class="ident" id="7792107">xname</span><span class="op" id="7792112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792116">Args</span><span class="op" id="7792120">:</span>&nbsp;<span class="op" id="7792122">[</span><span class="op" id="7792123">]</span><span class="builtintype" id="7792124">string</span><span class="op" id="7792130">{</span><span class="string" id="7792131">&#34;ip&#34;</span><span class="op" id="7792135">,</span>&nbsp;<span class="string" id="7792137">&#34;link&#34;</span><span class="op" id="7792143">,</span>&nbsp;<span class="string" id="7792145">&#34;add&#34;</span><span class="op" id="7792150">,</span>&nbsp;<span class="ident" id="7792152">ti</span><span class="op" id="7792154">.</span><span class="ident" id="7792155">name</span><span class="op" id="7792159">,</span>&nbsp;<span class="string" id="7792161">&#34;type&#34;</span><span class="op" id="7792167">,</span>&nbsp;<span class="string" id="7792169">&#34;dummy&#34;</span><span class="op" id="7792176">}</span><span class="op" id="7792177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792180">}</span><span class="op" id="7792181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792184">ti</span><span class="op" id="7792186">.</span><span class="ident" id="7792187">teardownCmds</span>&nbsp;<span class="op" id="7792200">=</span>&nbsp;<span class="builtinfunc" id="7792202">append</span><span class="op" id="7792208">(</span><span class="ident" id="7792209">ti</span><span class="op" id="7792211">.</span><span class="ident" id="7792212">teardownCmds</span><span class="op" id="7792224">,</span>&nbsp;<span class="op" id="7792226">&amp;</span><span class="ident" id="7792227">exec</span><span class="op" id="7792231">.</span><span class="ident" id="7792232">Cmd</span><span class="op" id="7792235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792239">Path</span><span class="op" id="7792243">:</span>&nbsp;<span class="ident" id="7792245">xname</span><span class="op" id="7792250">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792254">Args</span><span class="op" id="7792258">:</span>&nbsp;<span class="op" id="7792260">[</span><span class="op" id="7792261">]</span><span class="builtintype" id="7792262">string</span><span class="op" id="7792268">{</span><span class="string" id="7792269">&#34;ip&#34;</span><span class="op" id="7792273">,</span>&nbsp;<span class="string" id="7792275">&#34;link&#34;</span><span class="op" id="7792281">,</span>&nbsp;<span class="string" id="7792283">&#34;delete&#34;</span><span class="op" id="7792291">,</span>&nbsp;<span class="ident" id="7792293">ti</span><span class="op" id="7792295">.</span><span class="ident" id="7792296">name</span><span class="op" id="7792300">,</span>&nbsp;<span class="string" id="7792302">&#34;type&#34;</span><span class="op" id="7792308">,</span>&nbsp;<span class="string" id="7792310">&#34;dummy&#34;</span><span class="op" id="7792317">}</span><span class="op" id="7792318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792321">}</span><span class="op" id="7792322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792325">return</span>&nbsp;<span class="ident" id="7792332">nil</span><br>
<span class="lineno"></span><span class="op" id="7792336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7792339">func</span>&nbsp;<span class="op" id="7792344">(</span><span class="ident" id="7792345">ti</span>&nbsp;<span class="op" id="7792348">*</span><span class="ident" id="7792349">testInterface</span><span class="op" id="7792362">)</span>&nbsp;<span class="ident" id="7792364">setPointToPoint</span><span class="op" id="7792379">(</span><span class="ident" id="7792380">suffix</span>&nbsp;<span class="builtintype" id="7792387">int</span><span class="op" id="7792390">,</span>&nbsp;<span class="ident" id="7792392">local</span><span class="op" id="7792397">,</span>&nbsp;<span class="ident" id="7792399">remote</span>&nbsp;<span class="builtintype" id="7792406">string</span><span class="op" id="7792412">)</span>&nbsp;<span class="builtintype" id="7792414">error</span>&nbsp;<span class="op" id="7792420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792423">ti</span><span class="op" id="7792425">.</span><span class="ident" id="7792426">name</span>&nbsp;<span class="op" id="7792431">=</span>&nbsp;<span class="ident" id="7792433">fmt</span><span class="op" id="7792436">.</span><span class="ident" id="7792437">Sprintf</span><span class="op" id="7792444">(</span><span class="string" id="7792445">&#34;gotest%d&#34;</span><span class="op" id="7792455">,</span>&nbsp;<span class="ident" id="7792457">suffix</span><span class="op" id="7792463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792466">ti</span><span class="op" id="7792468">.</span><span class="ident" id="7792469">local</span>&nbsp;<span class="op" id="7792475">=</span>&nbsp;<span class="ident" id="7792477">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792484">ti</span><span class="op" id="7792486">.</span><span class="ident" id="7792487">remote</span>&nbsp;<span class="op" id="7792494">=</span>&nbsp;<span class="ident" id="7792496">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792504">xname</span><span class="op" id="7792509">,</span>&nbsp;<span class="ident" id="7792511">err</span>&nbsp;<span class="op" id="7792515">:=</span>&nbsp;<span class="ident" id="7792518">exec</span><span class="op" id="7792522">.</span><span class="ident" id="7792523">LookPath</span><span class="op" id="7792531">(</span><span class="string" id="7792532">&#34;ip&#34;</span><span class="op" id="7792536">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792539">if</span>&nbsp;<span class="ident" id="7792542">err</span>&nbsp;<span class="op" id="7792546">!=</span>&nbsp;<span class="ident" id="7792549">nil</span>&nbsp;<span class="op" id="7792553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792557">return</span>&nbsp;<span class="ident" id="7792564">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792572">ti</span><span class="op" id="7792574">.</span><span class="ident" id="7792575">setupCmds</span>&nbsp;<span class="op" id="7792585">=</span>&nbsp;<span class="builtinfunc" id="7792587">append</span><span class="op" id="7792593">(</span><span class="ident" id="7792594">ti</span><span class="op" id="7792596">.</span><span class="ident" id="7792597">setupCmds</span><span class="op" id="7792606">,</span>&nbsp;<span class="op" id="7792608">&amp;</span><span class="ident" id="7792609">exec</span><span class="op" id="7792613">.</span><span class="ident" id="7792614">Cmd</span><span class="op" id="7792617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792621">Path</span><span class="op" id="7792625">:</span>&nbsp;<span class="ident" id="7792627">xname</span><span class="op" id="7792632">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792636">Args</span><span class="op" id="7792640">:</span>&nbsp;<span class="op" id="7792642">[</span><span class="op" id="7792643">]</span><span class="builtintype" id="7792644">string</span><span class="op" id="7792650">{</span><span class="string" id="7792651">&#34;ip&#34;</span><span class="op" id="7792655">,</span>&nbsp;<span class="string" id="7792657">&#34;tunnel&#34;</span><span class="op" id="7792665">,</span>&nbsp;<span class="string" id="7792667">&#34;add&#34;</span><span class="op" id="7792672">,</span>&nbsp;<span class="ident" id="7792674">ti</span><span class="op" id="7792676">.</span><span class="ident" id="7792677">name</span><span class="op" id="7792681">,</span>&nbsp;<span class="string" id="7792683">&#34;mode&#34;</span><span class="op" id="7792689">,</span>&nbsp;<span class="string" id="7792691">&#34;gre&#34;</span><span class="op" id="7792696">,</span>&nbsp;<span class="string" id="7792698">&#34;local&#34;</span><span class="op" id="7792705">,</span>&nbsp;<span class="ident" id="7792707">local</span><span class="op" id="7792712">,</span>&nbsp;<span class="string" id="7792714">&#34;remote&#34;</span><span class="op" id="7792722">,</span>&nbsp;<span class="ident" id="7792724">remote</span><span class="op" id="7792730">}</span><span class="op" id="7792731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792734">}</span><span class="op" id="7792735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792738">ti</span><span class="op" id="7792740">.</span><span class="ident" id="7792741">teardownCmds</span>&nbsp;<span class="op" id="7792754">=</span>&nbsp;<span class="builtinfunc" id="7792756">append</span><span class="op" id="7792762">(</span><span class="ident" id="7792763">ti</span><span class="op" id="7792765">.</span><span class="ident" id="7792766">teardownCmds</span><span class="op" id="7792778">,</span>&nbsp;<span class="op" id="7792780">&amp;</span><span class="ident" id="7792781">exec</span><span class="op" id="7792785">.</span><span class="ident" id="7792786">Cmd</span><span class="op" id="7792789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792793">Path</span><span class="op" id="7792797">:</span>&nbsp;<span class="ident" id="7792799">xname</span><span class="op" id="7792804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792808">Args</span><span class="op" id="7792812">:</span>&nbsp;<span class="op" id="7792814">[</span><span class="op" id="7792815">]</span><span class="builtintype" id="7792816">string</span><span class="op" id="7792822">{</span><span class="string" id="7792823">&#34;ip&#34;</span><span class="op" id="7792827">,</span>&nbsp;<span class="string" id="7792829">&#34;tunnel&#34;</span><span class="op" id="7792837">,</span>&nbsp;<span class="string" id="7792839">&#34;del&#34;</span><span class="op" id="7792844">,</span>&nbsp;<span class="ident" id="7792846">ti</span><span class="op" id="7792848">.</span><span class="ident" id="7792849">name</span><span class="op" id="7792853">,</span>&nbsp;<span class="string" id="7792855">&#34;mode&#34;</span><span class="op" id="7792861">,</span>&nbsp;<span class="string" id="7792863">&#34;gre&#34;</span><span class="op" id="7792868">,</span>&nbsp;<span class="string" id="7792870">&#34;local&#34;</span><span class="op" id="7792877">,</span>&nbsp;<span class="ident" id="7792879">local</span><span class="op" id="7792884">,</span>&nbsp;<span class="string" id="7792886">&#34;remote&#34;</span><span class="op" id="7792894">,</span>&nbsp;<span class="ident" id="7792896">remote</span><span class="op" id="7792902">}</span><span class="op" id="7792903">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792906">}</span><span class="op" id="7792907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792910">xname</span><span class="op" id="7792915">,</span>&nbsp;<span class="ident" id="7792917">err</span>&nbsp;<span class="op" id="7792921">=</span>&nbsp;<span class="ident" id="7792923">exec</span><span class="op" id="7792927">.</span><span class="ident" id="7792928">LookPath</span><span class="op" id="7792936">(</span><span class="string" id="7792937">&#34;ifconfig&#34;</span><span class="op" id="7792947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792950">if</span>&nbsp;<span class="ident" id="7792953">err</span>&nbsp;<span class="op" id="7792957">!=</span>&nbsp;<span class="ident" id="7792960">nil</span>&nbsp;<span class="op" id="7792964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792968">return</span>&nbsp;<span class="ident" id="7792975">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792980">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792983">ti</span><span class="op" id="7792985">.</span><span class="ident" id="7792986">setupCmds</span>&nbsp;<span class="op" id="7792996">=</span>&nbsp;<span class="builtinfunc" id="7792998">append</span><span class="op" id="7793004">(</span><span class="ident" id="7793005">ti</span><span class="op" id="7793007">.</span><span class="ident" id="7793008">setupCmds</span><span class="op" id="7793017">,</span>&nbsp;<span class="op" id="7793019">&amp;</span><span class="ident" id="7793020">exec</span><span class="op" id="7793024">.</span><span class="ident" id="7793025">Cmd</span><span class="op" id="7793028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793032">Path</span><span class="op" id="7793036">:</span>&nbsp;<span class="ident" id="7793038">xname</span><span class="op" id="7793043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793047">Args</span><span class="op" id="7793051">:</span>&nbsp;<span class="op" id="7793053">[</span><span class="op" id="7793054">]</span><span class="builtintype" id="7793055">string</span><span class="op" id="7793061">{</span><span class="string" id="7793062">&#34;ifconfig&#34;</span><span class="op" id="7793072">,</span>&nbsp;<span class="ident" id="7793074">ti</span><span class="op" id="7793076">.</span><span class="ident" id="7793077">name</span><span class="op" id="7793081">,</span>&nbsp;<span class="string" id="7793083">&#34;inet&#34;</span><span class="op" id="7793089">,</span>&nbsp;<span class="ident" id="7793091">local</span><span class="op" id="7793096">,</span>&nbsp;<span class="string" id="7793098">&#34;dstaddr&#34;</span><span class="op" id="7793107">,</span>&nbsp;<span class="ident" id="7793109">remote</span><span class="op" id="7793115">}</span><span class="op" id="7793116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793119">}</span><span class="op" id="7793120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793123">return</span>&nbsp;<span class="ident" id="7793130">nil</span><br>
<span class="lineno">55</span><span class="op" id="7793134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793137">const</span>&nbsp;<span class="op" id="7793143">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793146">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7793167">=</span>&nbsp;<span class="num" id="7793169">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793173">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7793194">=</span>&nbsp;<span class="num" id="7793196">18</span><br>
<span class="lineno">60</span><span class="op" id="7793199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793202">var</span>&nbsp;<span class="op" id="7793206">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793209">igmpInterfaceTable</span>&nbsp;<span class="op" id="7793228">=</span>&nbsp;<span class="op" id="7793230">[</span><span class="op" id="7793231">]</span><span class="ident" id="7793232">Interface</span><span class="op" id="7793241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793245">{</span><span class="ident" id="7793246">Name</span><span class="op" id="7793250">:</span>&nbsp;<span class="string" id="7793252">&#34;lo&#34;</span><span class="op" id="7793256">}</span><span class="op" id="7793257">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793261">{</span><span class="ident" id="7793262">Name</span><span class="op" id="7793266">:</span>&nbsp;<span class="string" id="7793268">&#34;eth0&#34;</span><span class="op" id="7793274">}</span><span class="op" id="7793275">,</span>&nbsp;<span class="op" id="7793277">{</span><span class="ident" id="7793278">Name</span><span class="op" id="7793282">:</span>&nbsp;<span class="string" id="7793284">&#34;eth1&#34;</span><span class="op" id="7793290">}</span><span class="op" id="7793291">,</span>&nbsp;<span class="op" id="7793293">{</span><span class="ident" id="7793294">Name</span><span class="op" id="7793298">:</span>&nbsp;<span class="string" id="7793300">&#34;eth2&#34;</span><span class="op" id="7793306">}</span><span class="op" id="7793307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793311">{</span><span class="ident" id="7793312">Name</span><span class="op" id="7793316">:</span>&nbsp;<span class="string" id="7793318">&#34;eth0.100&#34;</span><span class="op" id="7793328">}</span><span class="op" id="7793329">,</span>&nbsp;<span class="op" id="7793331">{</span><span class="ident" id="7793332">Name</span><span class="op" id="7793336">:</span>&nbsp;<span class="string" id="7793338">&#34;eth0.101&#34;</span><span class="op" id="7793348">}</span><span class="op" id="7793349">,</span>&nbsp;<span class="op" id="7793351">{</span><span class="ident" id="7793352">Name</span><span class="op" id="7793356">:</span>&nbsp;<span class="string" id="7793358">&#34;eth0.102&#34;</span><span class="op" id="7793368">}</span><span class="op" id="7793369">,</span>&nbsp;<span class="op" id="7793371">{</span><span class="ident" id="7793372">Name</span><span class="op" id="7793376">:</span>&nbsp;<span class="string" id="7793378">&#34;eth0.103&#34;</span><span class="op" id="7793388">}</span><span class="op" id="7793389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793393">{</span><span class="ident" id="7793394">Name</span><span class="op" id="7793398">:</span>&nbsp;<span class="string" id="7793400">&#34;device1tap2&#34;</span><span class="op" id="7793413">}</span><span class="op" id="7793414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793420">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7793440">=</span>&nbsp;<span class="op" id="7793442">[</span><span class="op" id="7793443">]</span><span class="ident" id="7793444">Interface</span><span class="op" id="7793453">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793457">{</span><span class="ident" id="7793458">Name</span><span class="op" id="7793462">:</span>&nbsp;<span class="string" id="7793464">&#34;lo&#34;</span><span class="op" id="7793468">}</span><span class="op" id="7793469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793473">{</span><span class="ident" id="7793474">Name</span><span class="op" id="7793478">:</span>&nbsp;<span class="string" id="7793480">&#34;eth0&#34;</span><span class="op" id="7793486">}</span><span class="op" id="7793487">,</span>&nbsp;<span class="op" id="7793489">{</span><span class="ident" id="7793490">Name</span><span class="op" id="7793494">:</span>&nbsp;<span class="string" id="7793496">&#34;eth1&#34;</span><span class="op" id="7793502">}</span><span class="op" id="7793503">,</span>&nbsp;<span class="op" id="7793505">{</span><span class="ident" id="7793506">Name</span><span class="op" id="7793510">:</span>&nbsp;<span class="string" id="7793512">&#34;eth2&#34;</span><span class="op" id="7793518">}</span><span class="op" id="7793519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793523">{</span><span class="ident" id="7793524">Name</span><span class="op" id="7793528">:</span>&nbsp;<span class="string" id="7793530">&#34;eth0.100&#34;</span><span class="op" id="7793540">}</span><span class="op" id="7793541">,</span>&nbsp;<span class="op" id="7793543">{</span><span class="ident" id="7793544">Name</span><span class="op" id="7793548">:</span>&nbsp;<span class="string" id="7793550">&#34;eth0.101&#34;</span><span class="op" id="7793560">}</span><span class="op" id="7793561">,</span>&nbsp;<span class="op" id="7793563">{</span><span class="ident" id="7793564">Name</span><span class="op" id="7793568">:</span>&nbsp;<span class="string" id="7793570">&#34;eth0.102&#34;</span><span class="op" id="7793580">}</span><span class="op" id="7793581">,</span>&nbsp;<span class="op" id="7793583">{</span><span class="ident" id="7793584">Name</span><span class="op" id="7793588">:</span>&nbsp;<span class="string" id="7793590">&#34;eth0.103&#34;</span><span class="op" id="7793600">}</span><span class="op" id="7793601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793605">{</span><span class="ident" id="7793606">Name</span><span class="op" id="7793610">:</span>&nbsp;<span class="string" id="7793612">&#34;device1tap2&#34;</span><span class="op" id="7793625">}</span><span class="op" id="7793626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793630">{</span><span class="ident" id="7793631">Name</span><span class="op" id="7793635">:</span>&nbsp;<span class="string" id="7793637">&#34;pan0&#34;</span><span class="op" id="7793643">}</span><span class="op" id="7793644">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793647">}</span><br>
<span class="lineno"></span><span class="op" id="7793649">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793652">func</span>&nbsp;<span class="ident" id="7793657">TestParseProcNet</span><span class="op" id="7793673">(</span><span class="ident" id="7793674">t</span>&nbsp;<span class="op" id="7793676">*</span><span class="ident" id="7793677">testing</span><span class="op" id="7793684">.</span><span class="ident" id="7793685">T</span><span class="op" id="7793686">)</span>&nbsp;<span class="op" id="7793688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793691">defer</span>&nbsp;<span class="keyword" id="7793697">func</span><span class="op" id="7793701">(</span><span class="op" id="7793702">)</span>&nbsp;<span class="op" id="7793704">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793708">if</span>&nbsp;<span class="ident" id="7793711">p</span>&nbsp;<span class="op" id="7793713">:=</span>&nbsp;<span class="builtinfunc" id="7793716">recover</span><span class="op" id="7793723">(</span><span class="op" id="7793724">)</span><span class="op" id="7793725">;</span>&nbsp;<span class="ident" id="7793727">p</span>&nbsp;<span class="op" id="7793729">!=</span>&nbsp;<span class="ident" id="7793732">nil</span>&nbsp;<span class="op" id="7793736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793741">t</span><span class="op" id="7793742">.</span><span class="ident" id="7793743">Fatalf</span><span class="op" id="7793749">(</span><span class="string" id="7793750">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7793802">,</span>&nbsp;<span class="ident" id="7793804">p</span><span class="op" id="7793805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793812">}</span><span class="op" id="7793813">(</span><span class="op" id="7793814">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793818">var</span>&nbsp;<span class="ident" id="7793822">ifmat4</span>&nbsp;<span class="op" id="7793829">[</span><span class="op" id="7793830">]</span><span class="ident" id="7793831">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793837">for</span>&nbsp;<span class="ident" id="7793841">_</span><span class="op" id="7793842">,</span>&nbsp;<span class="ident" id="7793844">ifi</span>&nbsp;<span class="op" id="7793848">:=</span>&nbsp;<span class="keyword" id="7793851">range</span>&nbsp;<span class="ident" id="7793857">igmpInterfaceTable</span>&nbsp;<span class="op" id="7793876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793880">ifmat</span>&nbsp;<span class="op" id="7793886">:=</span>&nbsp;<span class="ident" id="7793889">parseProcNetIGMP</span><span class="op" id="7793905">(</span><span class="string" id="7793906">&#34;testdata/igmp&#34;</span><span class="op" id="7793921">,</span>&nbsp;<span class="op" id="7793923">&amp;</span><span class="ident" id="7793924">ifi</span><span class="op" id="7793927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793931">ifmat4</span>&nbsp;<span class="op" id="7793938">=</span>&nbsp;<span class="builtinfunc" id="7793940">append</span><span class="op" id="7793946">(</span><span class="ident" id="7793947">ifmat4</span><span class="op" id="7793953">,</span>&nbsp;<span class="ident" id="7793955">ifmat</span><span class="op" id="7793960">...</span><span class="op" id="7793963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793966">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793969">if</span>&nbsp;<span class="builtinfunc" id="7793972">len</span><span class="op" id="7793975">(</span><span class="ident" id="7793976">ifmat4</span><span class="op" id="7793982">)</span>&nbsp;<span class="op" id="7793984">!=</span>&nbsp;<span class="ident" id="7793987">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7794008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794012">t</span><span class="op" id="7794013">.</span><span class="ident" id="7794014">Fatalf</span><span class="op" id="7794020">(</span><span class="string" id="7794021">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7794073">,</span>&nbsp;<span class="builtinfunc" id="7794075">len</span><span class="op" id="7794078">(</span><span class="ident" id="7794079">ifmat4</span><span class="op" id="7794085">)</span><span class="op" id="7794086">,</span>&nbsp;<span class="ident" id="7794088">numOfTestIPv4MCAddrs</span><span class="op" id="7794108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794115">var</span>&nbsp;<span class="ident" id="7794119">ifmat6</span>&nbsp;<span class="op" id="7794126">[</span><span class="op" id="7794127">]</span><span class="ident" id="7794128">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794134">for</span>&nbsp;<span class="ident" id="7794138">_</span><span class="op" id="7794139">,</span>&nbsp;<span class="ident" id="7794141">ifi</span>&nbsp;<span class="op" id="7794145">:=</span>&nbsp;<span class="keyword" id="7794148">range</span>&nbsp;<span class="ident" id="7794154">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7794174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794178">ifmat</span>&nbsp;<span class="op" id="7794184">:=</span>&nbsp;<span class="ident" id="7794187">parseProcNetIGMP6</span><span class="op" id="7794204">(</span><span class="string" id="7794205">&#34;testdata/igmp6&#34;</span><span class="op" id="7794221">,</span>&nbsp;<span class="op" id="7794223">&amp;</span><span class="ident" id="7794224">ifi</span><span class="op" id="7794227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794231">ifmat6</span>&nbsp;<span class="op" id="7794238">=</span>&nbsp;<span class="builtinfunc" id="7794240">append</span><span class="op" id="7794246">(</span><span class="ident" id="7794247">ifmat6</span><span class="op" id="7794253">,</span>&nbsp;<span class="ident" id="7794255">ifmat</span><span class="op" id="7794260">...</span><span class="op" id="7794263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794269">if</span>&nbsp;<span class="builtinfunc" id="7794272">len</span><span class="op" id="7794275">(</span><span class="ident" id="7794276">ifmat6</span><span class="op" id="7794282">)</span>&nbsp;<span class="op" id="7794284">!=</span>&nbsp;<span class="ident" id="7794287">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7794308">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794312">t</span><span class="op" id="7794313">.</span><span class="ident" id="7794314">Fatalf</span><span class="op" id="7794320">(</span><span class="string" id="7794321">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7794374">,</span>&nbsp;<span class="builtinfunc" id="7794376">len</span><span class="op" id="7794379">(</span><span class="ident" id="7794380">ifmat6</span><span class="op" id="7794386">)</span><span class="op" id="7794387">,</span>&nbsp;<span class="ident" id="7794389">numOfTestIPv6MCAddrs</span><span class="op" id="7794409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794412">}</span><br>
<span class="lineno"></span><span class="op" id="7794414">}</span>
</div>
</body>
</html>
