<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2820518">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2820573">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2820627">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2820678">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2820748">package</span>&nbsp;<span class="ident" id="2820756">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2820762">import</span>&nbsp;<span class="op" id="2820769">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2820772">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2820782">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2820792">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2820795">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2820839">func</span>&nbsp;<span class="ident" id="2820844">interrupt</span><span class="op" id="2820853">(</span><span class="op" id="2820854">)</span>&nbsp;<span class="op" id="2820856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2820859">syscall</span><span class="op" id="2820866">.</span><span class="ident" id="2820867">Kill</span><span class="op" id="2820871">(</span><span class="ident" id="2820872">syscall</span><span class="op" id="2820879">.</span><span class="ident" id="2820880">Getpid</span><span class="op" id="2820886">(</span><span class="op" id="2820887">)</span><span class="op" id="2820888">,</span>&nbsp;<span class="ident" id="2820890">syscall</span><span class="op" id="2820897">.</span><span class="ident" id="2820898">SIGCHLD</span><span class="op" id="2820905">)</span><br>
<span class="lineno"></span><span class="op" id="2820907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2820910">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2820971">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2821039">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2821086">func</span>&nbsp;<span class="ident" id="2821091">readFile</span><span class="op" id="2821099">(</span><span class="ident" id="2821100">name</span>&nbsp;<span class="builtintype" id="2821105">string</span><span class="op" id="2821111">)</span>&nbsp;<span class="op" id="2821113">(</span><span class="op" id="2821114">[</span><span class="op" id="2821115">]</span><span class="builtintype" id="2821116">byte</span><span class="op" id="2821120">,</span>&nbsp;<span class="builtintype" id="2821122">error</span><span class="op" id="2821127">)</span>&nbsp;<span class="op" id="2821129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821132">f</span><span class="op" id="2821133">,</span>&nbsp;<span class="ident" id="2821135">err</span>&nbsp;<span class="op" id="2821139">:=</span>&nbsp;<span class="ident" id="2821142">syscall</span><span class="op" id="2821149">.</span><span class="ident" id="2821150">Open</span><span class="op" id="2821154">(</span><span class="ident" id="2821155">name</span><span class="op" id="2821159">,</span>&nbsp;<span class="ident" id="2821161">syscall</span><span class="op" id="2821168">.</span><span class="ident" id="2821169">O_RDONLY</span><span class="op" id="2821177">,</span>&nbsp;<span class="num" id="2821179">0</span><span class="op" id="2821180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821183">if</span>&nbsp;<span class="ident" id="2821186">err</span>&nbsp;<span class="op" id="2821190">!=</span>&nbsp;<span class="ident" id="2821193">nil</span>&nbsp;<span class="op" id="2821197">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821201">return</span>&nbsp;<span class="ident" id="2821208">nil</span><span class="op" id="2821211">,</span>&nbsp;<span class="ident" id="2821213">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821221">defer</span>&nbsp;<span class="ident" id="2821227">syscall</span><span class="op" id="2821234">.</span><span class="ident" id="2821235">Close</span><span class="op" id="2821240">(</span><span class="ident" id="2821241">f</span><span class="op" id="2821242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821245">var</span>&nbsp;<span class="op" id="2821249">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821253">buf</span>&nbsp;<span class="op" id="2821257">[</span><span class="num" id="2821258">4096</span><span class="op" id="2821262">]</span><span class="builtintype" id="2821263">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821270">ret</span>&nbsp;<span class="op" id="2821274">[</span><span class="op" id="2821275">]</span><span class="builtintype" id="2821276">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821283">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2821287">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821295">for</span>&nbsp;<span class="op" id="2821299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821303">n</span><span class="op" id="2821304">,</span>&nbsp;<span class="ident" id="2821306">err</span>&nbsp;<span class="op" id="2821310">=</span>&nbsp;<span class="ident" id="2821312">syscall</span><span class="op" id="2821319">.</span><span class="ident" id="2821320">Read</span><span class="op" id="2821324">(</span><span class="ident" id="2821325">f</span><span class="op" id="2821326">,</span>&nbsp;<span class="ident" id="2821328">buf</span><span class="op" id="2821331">[</span><span class="op" id="2821332">:</span><span class="op" id="2821333">]</span><span class="op" id="2821334">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821338">if</span>&nbsp;<span class="ident" id="2821341">n</span>&nbsp;<span class="op" id="2821343">&gt;</span>&nbsp;<span class="num" id="2821345">0</span>&nbsp;<span class="op" id="2821347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821352">ret</span>&nbsp;<span class="op" id="2821356">=</span>&nbsp;<span class="builtinfunc" id="2821358">append</span><span class="op" id="2821364">(</span><span class="ident" id="2821365">ret</span><span class="op" id="2821368">,</span>&nbsp;<span class="ident" id="2821370">buf</span><span class="op" id="2821373">[</span><span class="op" id="2821374">:</span><span class="ident" id="2821375">n</span><span class="op" id="2821376">]</span><span class="op" id="2821377">...</span><span class="op" id="2821380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821388">if</span>&nbsp;<span class="ident" id="2821391">n</span>&nbsp;<span class="op" id="2821393">==</span>&nbsp;<span class="num" id="2821396">0</span>&nbsp;<span class="op" id="2821398">||</span>&nbsp;<span class="ident" id="2821401">err</span>&nbsp;<span class="op" id="2821405">!=</span>&nbsp;<span class="ident" id="2821408">nil</span>&nbsp;<span class="op" id="2821412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821417">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821431">return</span>&nbsp;<span class="ident" id="2821438">ret</span><span class="op" id="2821441">,</span>&nbsp;<span class="ident" id="2821443">err</span><br>
<span class="lineno"></span><span class="op" id="2821447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2821450">func</span>&nbsp;<span class="ident" id="2821455">open</span><span class="op" id="2821459">(</span><span class="ident" id="2821460">name</span>&nbsp;<span class="builtintype" id="2821465">string</span><span class="op" id="2821471">)</span>&nbsp;<span class="op" id="2821473">(</span><span class="builtintype" id="2821474">uintptr</span><span class="op" id="2821481">,</span>&nbsp;<span class="builtintype" id="2821483">error</span><span class="op" id="2821488">)</span>&nbsp;<span class="op" id="2821490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821493">fd</span><span class="op" id="2821495">,</span>&nbsp;<span class="ident" id="2821497">err</span>&nbsp;<span class="op" id="2821501">:=</span>&nbsp;<span class="ident" id="2821504">syscall</span><span class="op" id="2821511">.</span><span class="ident" id="2821512">Open</span><span class="op" id="2821516">(</span><span class="ident" id="2821517">name</span><span class="op" id="2821521">,</span>&nbsp;<span class="ident" id="2821523">syscall</span><span class="op" id="2821530">.</span><span class="ident" id="2821531">O_RDONLY</span><span class="op" id="2821539">,</span>&nbsp;<span class="num" id="2821541">0</span><span class="op" id="2821542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821545">if</span>&nbsp;<span class="ident" id="2821548">err</span>&nbsp;<span class="op" id="2821552">!=</span>&nbsp;<span class="ident" id="2821555">nil</span>&nbsp;<span class="op" id="2821559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821563">return</span>&nbsp;<span class="num" id="2821570">0</span><span class="op" id="2821571">,</span>&nbsp;<span class="ident" id="2821573">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821578">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821581">return</span>&nbsp;<span class="builtintype" id="2821588">uintptr</span><span class="op" id="2821595">(</span><span class="ident" id="2821596">fd</span><span class="op" id="2821598">)</span><span class="op" id="2821599">,</span>&nbsp;<span class="ident" id="2821601">nil</span><br>
<span class="lineno"></span><span class="op" id="2821605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2821608">func</span>&nbsp;<span class="ident" id="2821613">closefd</span><span class="op" id="2821620">(</span><span class="ident" id="2821621">fd</span>&nbsp;<span class="builtintype" id="2821624">uintptr</span><span class="op" id="2821631">)</span>&nbsp;<span class="op" id="2821633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821636">syscall</span><span class="op" id="2821643">.</span><span class="ident" id="2821644">Close</span><span class="op" id="2821649">(</span><span class="builtintype" id="2821650">int</span><span class="op" id="2821653">(</span><span class="ident" id="2821654">fd</span><span class="op" id="2821656">)</span><span class="op" id="2821657">)</span><br>
<span class="lineno">55</span><span class="op" id="2821659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2821662">func</span>&nbsp;<span class="ident" id="2821667">preadn</span><span class="op" id="2821673">(</span><span class="ident" id="2821674">fd</span>&nbsp;<span class="builtintype" id="2821677">uintptr</span><span class="op" id="2821684">,</span>&nbsp;<span class="ident" id="2821686">buf</span>&nbsp;<span class="op" id="2821690">[</span><span class="op" id="2821691">]</span><span class="builtintype" id="2821692">byte</span><span class="op" id="2821696">,</span>&nbsp;<span class="ident" id="2821698">off</span>&nbsp;<span class="builtintype" id="2821702">int</span><span class="op" id="2821705">)</span>&nbsp;<span class="builtintype" id="2821707">error</span>&nbsp;<span class="op" id="2821713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821716">whence</span>&nbsp;<span class="op" id="2821723">:=</span>&nbsp;<span class="num" id="2821726">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821729">if</span>&nbsp;<span class="ident" id="2821732">off</span>&nbsp;<span class="op" id="2821736">&lt;</span>&nbsp;<span class="num" id="2821738">0</span>&nbsp;<span class="op" id="2821740">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821744">whence</span>&nbsp;<span class="op" id="2821751">=</span>&nbsp;<span class="num" id="2821753">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821759">if</span>&nbsp;<span class="ident" id="2821762">_</span><span class="op" id="2821763">,</span>&nbsp;<span class="ident" id="2821765">err</span>&nbsp;<span class="op" id="2821769">:=</span>&nbsp;<span class="ident" id="2821772">syscall</span><span class="op" id="2821779">.</span><span class="ident" id="2821780">Seek</span><span class="op" id="2821784">(</span><span class="builtintype" id="2821785">int</span><span class="op" id="2821788">(</span><span class="ident" id="2821789">fd</span><span class="op" id="2821791">)</span><span class="op" id="2821792">,</span>&nbsp;<span class="ident" id="2821794">int64</span><span class="op" id="2821799">(</span><span class="ident" id="2821800">off</span><span class="op" id="2821803">)</span><span class="op" id="2821804">,</span>&nbsp;<span class="ident" id="2821806">whence</span><span class="op" id="2821812">)</span><span class="op" id="2821813">;</span>&nbsp;<span class="ident" id="2821815">err</span>&nbsp;<span class="op" id="2821819">!=</span>&nbsp;<span class="ident" id="2821822">nil</span>&nbsp;<span class="op" id="2821826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821830">return</span>&nbsp;<span class="ident" id="2821837">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821842">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821845">for</span>&nbsp;<span class="builtinfunc" id="2821849">len</span><span class="op" id="2821852">(</span><span class="ident" id="2821853">buf</span><span class="op" id="2821856">)</span>&nbsp;<span class="op" id="2821858">&gt;</span>&nbsp;<span class="num" id="2821860">0</span>&nbsp;<span class="op" id="2821862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821866">m</span><span class="op" id="2821867">,</span>&nbsp;<span class="ident" id="2821869">err</span>&nbsp;<span class="op" id="2821873">:=</span>&nbsp;<span class="ident" id="2821876">syscall</span><span class="op" id="2821883">.</span><span class="ident" id="2821884">Read</span><span class="op" id="2821888">(</span><span class="builtintype" id="2821889">int</span><span class="op" id="2821892">(</span><span class="ident" id="2821893">fd</span><span class="op" id="2821895">)</span><span class="op" id="2821896">,</span>&nbsp;<span class="ident" id="2821898">buf</span><span class="op" id="2821901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821905">if</span>&nbsp;<span class="ident" id="2821908">m</span>&nbsp;<span class="op" id="2821910">&lt;=</span>&nbsp;<span class="num" id="2821913">0</span>&nbsp;<span class="op" id="2821915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821920">if</span>&nbsp;<span class="ident" id="2821923">err</span>&nbsp;<span class="op" id="2821927">==</span>&nbsp;<span class="ident" id="2821930">nil</span>&nbsp;<span class="op" id="2821934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821940">return</span>&nbsp;<span class="ident" id="2821947">errors</span><span class="op" id="2821953">.</span><span class="ident" id="2821954">New</span><span class="op" id="2821957">(</span><span class="string" id="2821958">&#34;short&nbsp;read&#34;</span><span class="op" id="2821970">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2821980">return</span>&nbsp;<span class="ident" id="2821987">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2821993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2821997">buf</span>&nbsp;<span class="op" id="2822001">=</span>&nbsp;<span class="ident" id="2822003">buf</span><span class="op" id="2822006">[</span><span class="ident" id="2822007">m</span><span class="op" id="2822008">:</span><span class="op" id="2822009">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2822012">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2822015">return</span>&nbsp;<span class="ident" id="2822022">nil</span><br>
<span class="lineno"></span><span class="op" id="2822026">}</span>
</div>
</body>
</html>
