<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html" class="current">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4958779">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4958834">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4958888">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4958939">package</span>&nbsp;<span class="ident" id="4958947">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4958957">import</span>&nbsp;<span class="op" id="4958964">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4958967">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4958976">&#34;strings&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4958986">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4958989">//&nbsp;transitionFunc&nbsp;is&nbsp;the&nbsp;array&nbsp;of&nbsp;context&nbsp;transition&nbsp;functions&nbsp;for&nbsp;text&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="comment" id="4959068">//&nbsp;A&nbsp;transition&nbsp;function&nbsp;takes&nbsp;a&nbsp;context&nbsp;and&nbsp;template&nbsp;text&nbsp;input,&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4959146">//&nbsp;the&nbsp;updated&nbsp;context&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;consumed&nbsp;from&nbsp;the&nbsp;front&nbsp;of&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="4959224">//&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4959234">var</span>&nbsp;<span class="ident" id="4959238">transitionFunc</span>&nbsp;<span class="op" id="4959253">=</span>&nbsp;<span class="op" id="4959255">[</span><span class="op" id="4959256">...</span><span class="op" id="4959259">]</span><span class="keyword" id="4959260">func</span><span class="op" id="4959264">(</span><span class="ident" id="4959265"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4959272">,</span>&nbsp;<span class="op" id="4959274">[</span><span class="op" id="4959275">]</span><span class="builtintype" id="4959276">byte</span><span class="op" id="4959280">)</span>&nbsp;<span class="op" id="4959282">(</span><span class="ident" id="4959283"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4959290">,</span>&nbsp;<span class="builtintype" id="4959292">int</span><span class="op" id="4959295">)</span><span class="op" id="4959296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959299"><a href="/gostd/html/template/context.go.html#4874843">stateText</a></span><span class="op" id="4959308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959317"><a href="/gostd/html/template/transition.go.html#4960129">tText</a></span><span class="op" id="4959322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959325"><a href="/gostd/html/template/context.go.html#4874933">stateTag</a></span><span class="op" id="4959333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959343"><a href="/gostd/html/template/transition.go.html#4960938">tTag</a></span><span class="op" id="4959347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959350"><a href="/gostd/html/template/context.go.html#4875046">stateAttrName</a></span><span class="op" id="4959363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959368"><a href="/gostd/html/template/transition.go.html#4961878">tAttrName</a></span><span class="op" id="4959377">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959380"><a href="/gostd/html/template/context.go.html#4875196">stateAfterName</a></span><span class="op" id="4959394">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4959398"><a href="/gostd/html/template/transition.go.html#4962171">tAfterName</a></span><span class="op" id="4959408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959411"><a href="/gostd/html/template/context.go.html#4875336">stateBeforeValue</a></span><span class="op" id="4959427">:</span>&nbsp;<span class="ident" id="4959429"><a href="/gostd/html/template/transition.go.html#4962719">tBeforeValue</a></span><span class="op" id="4959441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959444"><a href="/gostd/html/template/context.go.html#4875411">stateHTMLCmt</a></span><span class="op" id="4959456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959462"><a href="/gostd/html/template/transition.go.html#4963165">tHTMLCmt</a></span><span class="op" id="4959470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959473"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span><span class="op" id="4959484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959491"><a href="/gostd/html/template/transition.go.html#4963710">tSpecialTagEnd</a></span><span class="op" id="4959505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959508"><a href="/gostd/html/template/context.go.html#4875649">stateAttr</a></span><span class="op" id="4959517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959526"><a href="/gostd/html/template/transition.go.html#4964015">tAttr</a></span><span class="op" id="4959531">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959534"><a href="/gostd/html/template/context.go.html#4875729">stateURL</a></span><span class="op" id="4959542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959552"><a href="/gostd/html/template/transition.go.html#4964147">tURL</a></span><span class="op" id="4959556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959559"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><span class="op" id="4959566">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959577"><a href="/gostd/html/template/transition.go.html#4964576">tJS</a></span><span class="op" id="4959580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959583"><a href="/gostd/html/template/context.go.html#4875876">stateJSDqStr</a></span><span class="op" id="4959595">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959601"><a href="/gostd/html/template/transition.go.html#4965547">tJSDelimited</a></span><span class="op" id="4959613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959616"><a href="/gostd/html/template/context.go.html#4875956">stateJSSqStr</a></span><span class="op" id="4959628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959634"><a href="/gostd/html/template/transition.go.html#4965547">tJSDelimited</a></span><span class="op" id="4959646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959649"><a href="/gostd/html/template/context.go.html#4876031">stateJSRegexp</a></span><span class="op" id="4959662">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959667"><a href="/gostd/html/template/transition.go.html#4965547">tJSDelimited</a></span><span class="op" id="4959679">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959682"><a href="/gostd/html/template/context.go.html#4876114">stateJSBlockCmt</a></span><span class="op" id="4959697">:</span>&nbsp;&nbsp;<span class="ident" id="4959700"><a href="/gostd/html/template/transition.go.html#4966623">tBlockCmt</a></span><span class="op" id="4959709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959712"><a href="/gostd/html/template/context.go.html#4876194">stateJSLineCmt</a></span><span class="op" id="4959726">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4959730"><a href="/gostd/html/template/transition.go.html#4966984">tLineCmt</a></span><span class="op" id="4959738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959741"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><span class="op" id="4959749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959759"><a href="/gostd/html/template/transition.go.html#4968094">tCSS</a></span><span class="op" id="4959763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959766"><a href="/gostd/html/template/context.go.html#4876345">stateCSSDqStr</a></span><span class="op" id="4959779">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959784"><a href="/gostd/html/template/transition.go.html#4970378">tCSSStr</a></span><span class="op" id="4959791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959794"><a href="/gostd/html/template/context.go.html#4876420">stateCSSSqStr</a></span><span class="op" id="4959807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959812"><a href="/gostd/html/template/transition.go.html#4970378">tCSSStr</a></span><span class="op" id="4959819">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959822"><a href="/gostd/html/template/context.go.html#4876499">stateCSSDqURL</a></span><span class="op" id="4959835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959840"><a href="/gostd/html/template/transition.go.html#4970378">tCSSStr</a></span><span class="op" id="4959847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959850"><a href="/gostd/html/template/context.go.html#4876578">stateCSSSqURL</a></span><span class="op" id="4959863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959868"><a href="/gostd/html/template/transition.go.html#4970378">tCSSStr</a></span><span class="op" id="4959875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959878"><a href="/gostd/html/template/context.go.html#4876648">stateCSSURL</a></span><span class="op" id="4959889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959896"><a href="/gostd/html/template/transition.go.html#4970378">tCSSStr</a></span><span class="op" id="4959903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959906"><a href="/gostd/html/template/context.go.html#4876723">stateCSSBlockCmt</a></span><span class="op" id="4959922">:</span>&nbsp;<span class="ident" id="4959924"><a href="/gostd/html/template/transition.go.html#4966623">tBlockCmt</a></span><span class="op" id="4959933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959936"><a href="/gostd/html/template/context.go.html#4876798">stateCSSLineCmt</a></span><span class="op" id="4959951">:</span>&nbsp;&nbsp;<span class="ident" id="4959954"><a href="/gostd/html/template/transition.go.html#4966984">tLineCmt</a></span><span class="op" id="4959962">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959965"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4959975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959983"><a href="/gostd/html/template/transition.go.html#4971313">tError</a></span><span class="op" id="4959989">,</span><br>
<span class="lineno"></span><span class="op" id="4959991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4959994">var</span>&nbsp;<span class="ident" id="4959998">commentStart</span>&nbsp;<span class="op" id="4960011">=</span>&nbsp;<span class="op" id="4960013">[</span><span class="op" id="4960014">]</span><span class="builtintype" id="4960015">byte</span><span class="op" id="4960019">(</span><span class="string" id="4960020">&#34;&lt;!--&#34;</span><span class="op" id="4960026">)</span><br>
<span class="lineno"></span><span class="keyword" id="4960028">var</span>&nbsp;<span class="ident" id="4960032">commentEnd</span>&nbsp;<span class="op" id="4960043">=</span>&nbsp;<span class="op" id="4960045">[</span><span class="op" id="4960046">]</span><span class="builtintype" id="4960047">byte</span><span class="op" id="4960051">(</span><span class="string" id="4960052">&#34;--&gt;&#34;</span><span class="op" id="4960057">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4960060">//&nbsp;tText&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;text&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4960124">func</span>&nbsp;<span class="ident" id="4960129">tText</span><span class="op" id="4960134">(</span><span class="ident" id="4960135">c</span>&nbsp;<span class="ident" id="4960137"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960144">,</span>&nbsp;<span class="ident" id="4960146">s</span>&nbsp;<span class="op" id="4960148">[</span><span class="op" id="4960149">]</span><span class="builtintype" id="4960150">byte</span><span class="op" id="4960154">)</span>&nbsp;<span class="op" id="4960156">(</span><span class="ident" id="4960157"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960164">,</span>&nbsp;<span class="builtintype" id="4960166">int</span><span class="op" id="4960169">)</span>&nbsp;<span class="op" id="4960171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960174">k</span>&nbsp;<span class="op" id="4960176">:=</span>&nbsp;<span class="num" id="4960179">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960182">for</span>&nbsp;<span class="op" id="4960186">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960190">i</span>&nbsp;<span class="op" id="4960192">:=</span>&nbsp;<span class="ident" id="4960195"><a href="/gostd/html/template/transition.go.html#4960174">k</a></span>&nbsp;<span class="op" id="4960197">+</span>&nbsp;<span class="ident" id="4960199"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4960204">.</span><span class="ident" id="4960205"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="4960214">(</span><span class="ident" id="4960215"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960216">[</span><span class="ident" id="4960217"><a href="/gostd/html/template/transition.go.html#4960174">k</a></span><span class="op" id="4960218">:</span><span class="op" id="4960219">]</span><span class="op" id="4960220">,</span>&nbsp;<span class="string" id="4960222">&#39;&lt;&#39;</span><span class="op" id="4960225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960229">if</span>&nbsp;<span class="ident" id="4960232"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span>&nbsp;<span class="op" id="4960234">&lt;</span>&nbsp;<span class="ident" id="4960236"><a href="/gostd/html/template/transition.go.html#4960174">k</a></span>&nbsp;<span class="op" id="4960238">||</span>&nbsp;<span class="ident" id="4960241"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960242">+</span><span class="num" id="4960243">1</span>&nbsp;<span class="op" id="4960245">==</span>&nbsp;<span class="builtinfunc" id="4960248">len</span><span class="op" id="4960251">(</span><span class="ident" id="4960252"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960253">)</span>&nbsp;<span class="op" id="4960255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960260">return</span>&nbsp;<span class="ident" id="4960267"><a href="/gostd/html/template/transition.go.html#4960135">c</a></span><span class="op" id="4960268">,</span>&nbsp;<span class="builtinfunc" id="4960270">len</span><span class="op" id="4960273">(</span><span class="ident" id="4960274"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960279">}</span>&nbsp;<span class="keyword" id="4960281">else</span>&nbsp;<span class="keyword" id="4960286">if</span>&nbsp;<span class="ident" id="4960289"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960290">+</span><span class="num" id="4960291">4</span>&nbsp;<span class="op" id="4960293">&lt;=</span>&nbsp;<span class="builtinfunc" id="4960296">len</span><span class="op" id="4960299">(</span><span class="ident" id="4960300"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960301">)</span>&nbsp;<span class="op" id="4960303">&amp;&amp;</span>&nbsp;<span class="ident" id="4960306"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4960311">.</span><span class="ident" id="4960312"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="4960317">(</span><span class="ident" id="4960318"><a href="/gostd/html/template/transition.go.html#4959998">commentStart</a></span><span class="op" id="4960330">,</span>&nbsp;<span class="ident" id="4960332"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960333">[</span><span class="ident" id="4960334"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960335">:</span><span class="ident" id="4960336"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960337">+</span><span class="num" id="4960338">4</span><span class="op" id="4960339">]</span><span class="op" id="4960340">)</span>&nbsp;<span class="op" id="4960342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960347">return</span>&nbsp;<span class="ident" id="4960354"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960361">{</span><span class="ident" id="4960362"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4960367">:</span>&nbsp;<span class="ident" id="4960369"><a href="/gostd/html/template/context.go.html#4875411">stateHTMLCmt</a></span><span class="op" id="4960381">}</span><span class="op" id="4960382">,</span>&nbsp;<span class="ident" id="4960384"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span>&nbsp;<span class="op" id="4960386">+</span>&nbsp;<span class="num" id="4960388">4</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960396"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960397">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960402">end</span>&nbsp;<span class="op" id="4960406">:=</span>&nbsp;<span class="builtintype" id="4960409">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960417">if</span>&nbsp;<span class="ident" id="4960420"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960421">[</span><span class="ident" id="4960422"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960423">]</span>&nbsp;<span class="op" id="4960425">==</span>&nbsp;<span class="string" id="4960428">&#39;/&#39;</span>&nbsp;<span class="op" id="4960432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960437">if</span>&nbsp;<span class="ident" id="4960440"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960441">+</span><span class="num" id="4960442">1</span>&nbsp;<span class="op" id="4960444">==</span>&nbsp;<span class="builtinfunc" id="4960447">len</span><span class="op" id="4960450">(</span><span class="ident" id="4960451"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960452">)</span>&nbsp;<span class="op" id="4960454">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960460">return</span>&nbsp;<span class="ident" id="4960467"><a href="/gostd/html/template/transition.go.html#4960135">c</a></span><span class="op" id="4960468">,</span>&nbsp;<span class="builtinfunc" id="4960470">len</span><span class="op" id="4960473">(</span><span class="ident" id="4960474"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960485"><a href="/gostd/html/template/transition.go.html#4960402">end</a></span><span class="op" id="4960488">,</span>&nbsp;<span class="ident" id="4960490"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span>&nbsp;<span class="op" id="4960492">=</span>&nbsp;<span class="builtintype" id="4960494">true</span><span class="op" id="4960498">,</span>&nbsp;<span class="ident" id="4960500"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960501">+</span><span class="num" id="4960502">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960510">j</span><span class="op" id="4960511">,</span>&nbsp;<span class="ident" id="4960513">e</span>&nbsp;<span class="op" id="4960515">:=</span>&nbsp;<span class="ident" id="4960518"><a href="/gostd/html/template/transition.go.html#4972604">eatTagName</a></span><span class="op" id="4960528">(</span><span class="ident" id="4960529"><a href="/gostd/html/template/transition.go.html#4960146">s</a></span><span class="op" id="4960530">,</span>&nbsp;<span class="ident" id="4960532"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span><span class="op" id="4960533">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960537">if</span>&nbsp;<span class="ident" id="4960540"><a href="/gostd/html/template/transition.go.html#4960510">j</a></span>&nbsp;<span class="op" id="4960542">!=</span>&nbsp;<span class="ident" id="4960545"><a href="/gostd/html/template/transition.go.html#4960190">i</a></span>&nbsp;<span class="op" id="4960547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960552">if</span>&nbsp;<span class="ident" id="4960555"><a href="/gostd/html/template/transition.go.html#4960402">end</a></span>&nbsp;<span class="op" id="4960559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960565"><a href="/gostd/html/template/transition.go.html#4960513">e</a></span>&nbsp;<span class="op" id="4960567">=</span>&nbsp;<span class="ident" id="4960569"><a href="/gostd/html/template/context.go.html#4881273">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4960589">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;HTML&nbsp;tag.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960620">return</span>&nbsp;<span class="ident" id="4960627"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960634">{</span><span class="ident" id="4960635"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4960640">:</span>&nbsp;<span class="ident" id="4960642"><a href="/gostd/html/template/context.go.html#4874933">stateTag</a></span><span class="op" id="4960650">,</span>&nbsp;<span class="ident" id="4960652"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4960659">:</span>&nbsp;<span class="ident" id="4960661"><a href="/gostd/html/template/transition.go.html#4960513">e</a></span><span class="op" id="4960662">}</span><span class="op" id="4960663">,</span>&nbsp;<span class="ident" id="4960665"><a href="/gostd/html/template/transition.go.html#4960510">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960673"><a href="/gostd/html/template/transition.go.html#4960174">k</a></span>&nbsp;<span class="op" id="4960675">=</span>&nbsp;<span class="ident" id="4960677"><a href="/gostd/html/template/transition.go.html#4960510">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960680">}</span><br>
<span class="lineno"></span><span class="op" id="4960682">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="4960685">var</span>&nbsp;<span class="ident" id="4960689">elementContentType</span>&nbsp;<span class="op" id="4960708">=</span>&nbsp;<span class="op" id="4960710">[</span><span class="op" id="4960711">...</span><span class="op" id="4960714">]</span><span class="ident" id="4960715"><a href="/gostd/html/template/context.go.html#4874647">state</a></span><span class="op" id="4960720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960723"><a href="/gostd/html/template/context.go.html#4881273">elementNone</a></span><span class="op" id="4960734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960740"><a href="/gostd/html/template/context.go.html#4874843">stateText</a></span><span class="op" id="4960749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960752"><a href="/gostd/html/template/context.go.html#4881365">elementScript</a></span><span class="op" id="4960765">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4960769"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><span class="op" id="4960776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960779"><a href="/gostd/html/template/context.go.html#4881442">elementStyle</a></span><span class="op" id="4960791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960796"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><span class="op" id="4960804">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960807"><a href="/gostd/html/template/context.go.html#4881522">elementTextarea</a></span><span class="op" id="4960822">:</span>&nbsp;<span class="ident" id="4960824"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span><span class="op" id="4960835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960838"><a href="/gostd/html/template/context.go.html#4881599">elementTitle</a></span><span class="op" id="4960850">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960855"><a href="/gostd/html/template/context.go.html#4875567">stateRCDATA</a></span><span class="op" id="4960866">,</span><br>
<span class="lineno"></span><span class="op" id="4960868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4960871">//&nbsp;tTag&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;tag&nbsp;state.</span><br>
<span class="lineno">85</span><span class="keyword" id="4960933">func</span>&nbsp;<span class="ident" id="4960938">tTag</span><span class="op" id="4960942">(</span><span class="ident" id="4960943">c</span>&nbsp;<span class="ident" id="4960945"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960952">,</span>&nbsp;<span class="ident" id="4960954">s</span>&nbsp;<span class="op" id="4960956">[</span><span class="op" id="4960957">]</span><span class="builtintype" id="4960958">byte</span><span class="op" id="4960962">)</span>&nbsp;<span class="op" id="4960964">(</span><span class="ident" id="4960965"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4960972">,</span>&nbsp;<span class="builtintype" id="4960974">int</span><span class="op" id="4960977">)</span>&nbsp;<span class="op" id="4960979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4960982">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961011">i</span>&nbsp;<span class="op" id="4961013">:=</span>&nbsp;<span class="ident" id="4961016"><a href="/gostd/html/template/transition.go.html#4973108">eatWhiteSpace</a></span><span class="op" id="4961029">(</span><span class="ident" id="4961030"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961031">,</span>&nbsp;<span class="num" id="4961033">0</span><span class="op" id="4961034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961037">if</span>&nbsp;<span class="ident" id="4961040"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span>&nbsp;<span class="op" id="4961042">==</span>&nbsp;<span class="builtinfunc" id="4961045">len</span><span class="op" id="4961048">(</span><span class="ident" id="4961049"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961050">)</span>&nbsp;<span class="op" id="4961052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961056">return</span>&nbsp;<span class="ident" id="4961063"><a href="/gostd/html/template/transition.go.html#4960943">c</a></span><span class="op" id="4961064">,</span>&nbsp;<span class="builtinfunc" id="4961066">len</span><span class="op" id="4961069">(</span><span class="ident" id="4961070"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961071">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961077">if</span>&nbsp;<span class="ident" id="4961080"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961081">[</span><span class="ident" id="4961082"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span><span class="op" id="4961083">]</span>&nbsp;<span class="op" id="4961085">==</span>&nbsp;<span class="string" id="4961088">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4961092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961096">return</span>&nbsp;<span class="ident" id="4961103"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961115"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4961120">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4961124"><a href="/gostd/html/template/transition.go.html#4960689">elementContentType</a></span><span class="op" id="4961142">[</span><span class="ident" id="4961143"><a href="/gostd/html/template/transition.go.html#4960943">c</a></span><span class="op" id="4961144">.</span><span class="ident" id="4961145"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4961152">]</span><span class="op" id="4961153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961158"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4961165">:</span>&nbsp;<span class="ident" id="4961167"><a href="/gostd/html/template/transition.go.html#4960943">c</a></span><span class="op" id="4961168">.</span><span class="ident" id="4961169"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4961176">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961180">}</span><span class="op" id="4961181">,</span>&nbsp;<span class="ident" id="4961183"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span>&nbsp;<span class="op" id="4961185">+</span>&nbsp;<span class="num" id="4961187">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961193">j</span><span class="op" id="4961194">,</span>&nbsp;<span class="ident" id="4961196">err</span>&nbsp;<span class="op" id="4961200">:=</span>&nbsp;<span class="ident" id="4961203"><a href="/gostd/html/template/transition.go.html#4971618">eatAttrName</a></span><span class="op" id="4961214">(</span><span class="ident" id="4961215"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961216">,</span>&nbsp;<span class="ident" id="4961218"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span><span class="op" id="4961219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961222">if</span>&nbsp;<span class="ident" id="4961225"><a href="/gostd/html/template/transition.go.html#4961196">err</a></span>&nbsp;<span class="op" id="4961229">!=</span>&nbsp;<span class="builtintype" id="4961232">nil</span>&nbsp;<span class="op" id="4961236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961240">return</span>&nbsp;<span class="ident" id="4961247"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961254">{</span><span class="ident" id="4961255"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4961260">:</span>&nbsp;<span class="ident" id="4961262"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4961272">,</span>&nbsp;<span class="ident" id="4961274"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4961277">:</span>&nbsp;<span class="ident" id="4961279"><a href="/gostd/html/template/transition.go.html#4961196">err</a></span><span class="op" id="4961282">}</span><span class="op" id="4961283">,</span>&nbsp;<span class="builtinfunc" id="4961285">len</span><span class="op" id="4961288">(</span><span class="ident" id="4961289"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961290">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961296">state</span><span class="op" id="4961301">,</span>&nbsp;<span class="ident" id="4961303">attr</span>&nbsp;<span class="op" id="4961308">:=</span>&nbsp;<span class="ident" id="4961311"><a href="/gostd/html/template/context.go.html#4874933">stateTag</a></span><span class="op" id="4961319">,</span>&nbsp;<span class="ident" id="4961321"><a href="/gostd/html/template/context.go.html#4882137">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961331">if</span>&nbsp;<span class="ident" id="4961334"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span>&nbsp;<span class="op" id="4961336">==</span>&nbsp;<span class="ident" id="4961339"><a href="/gostd/html/template/transition.go.html#4961193">j</a></span>&nbsp;<span class="op" id="4961341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961345">return</span>&nbsp;<span class="ident" id="4961352"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961364"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4961369">:</span>&nbsp;<span class="ident" id="4961371"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4961381">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961386"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4961389">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4961393"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4961399">(</span><span class="ident" id="4961400"><a href="/gostd/html/template/error.go.html#4898454">ErrBadHTML</a></span><span class="op" id="4961410">,</span>&nbsp;<span class="builtintype" id="4961412">nil</span><span class="op" id="4961415">,</span>&nbsp;<span class="num" id="4961417">0</span><span class="op" id="4961418">,</span>&nbsp;<span class="string" id="4961420">&#34;expected&nbsp;space,&nbsp;attr&nbsp;name,&nbsp;or&nbsp;end&nbsp;of&nbsp;tag,&nbsp;but&nbsp;got&nbsp;%q&#34;</span><span class="op" id="4961474">,</span>&nbsp;<span class="ident" id="4961476"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961477">[</span><span class="ident" id="4961478"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span><span class="op" id="4961479">:</span><span class="op" id="4961480">]</span><span class="op" id="4961481">)</span><span class="op" id="4961482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961486">}</span><span class="op" id="4961487">,</span>&nbsp;<span class="builtinfunc" id="4961489">len</span><span class="op" id="4961492">(</span><span class="ident" id="4961493"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961500">switch</span>&nbsp;<span class="ident" id="4961507"><a href="/gostd/html/template/attr.go.html#4866659">attrType</a></span><span class="op" id="4961515">(</span><span class="builtintype" id="4961516">string</span><span class="op" id="4961522">(</span><span class="ident" id="4961523"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961524">[</span><span class="ident" id="4961525"><a href="/gostd/html/template/transition.go.html#4961011">i</a></span><span class="op" id="4961526">:</span><span class="ident" id="4961527"><a href="/gostd/html/template/transition.go.html#4961193">j</a></span><span class="op" id="4961528">]</span><span class="op" id="4961529">)</span><span class="op" id="4961530">)</span>&nbsp;<span class="op" id="4961532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961535">case</span>&nbsp;<span class="ident" id="4961540"><a href="/gostd/html/template/content.go.html#4870399">contentTypeURL</a></span><span class="op" id="4961554">:</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961558"><a href="/gostd/html/template/transition.go.html#4961303">attr</a></span>&nbsp;<span class="op" id="4961563">=</span>&nbsp;<span class="ident" id="4961565"><a href="/gostd/html/template/context.go.html#4882371">attrURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961574">case</span>&nbsp;<span class="ident" id="4961579"><a href="/gostd/html/template/content.go.html#4870312">contentTypeCSS</a></span><span class="op" id="4961593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961597"><a href="/gostd/html/template/transition.go.html#4961303">attr</a></span>&nbsp;<span class="op" id="4961602">=</span>&nbsp;<span class="ident" id="4961604"><a href="/gostd/html/template/context.go.html#4882298">attrStyle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961615">case</span>&nbsp;<span class="ident" id="4961620"><a href="/gostd/html/template/content.go.html#4870366">contentTypeJS</a></span><span class="op" id="4961633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961637"><a href="/gostd/html/template/transition.go.html#4961303">attr</a></span>&nbsp;<span class="op" id="4961642">=</span>&nbsp;<span class="ident" id="4961644"><a href="/gostd/html/template/context.go.html#4882217">attrScript</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961659">if</span>&nbsp;<span class="ident" id="4961662"><a href="/gostd/html/template/transition.go.html#4961193">j</a></span>&nbsp;<span class="op" id="4961664">==</span>&nbsp;<span class="builtinfunc" id="4961667">len</span><span class="op" id="4961670">(</span><span class="ident" id="4961671"><a href="/gostd/html/template/transition.go.html#4960954">s</a></span><span class="op" id="4961672">)</span>&nbsp;<span class="op" id="4961674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961678"><a href="/gostd/html/template/transition.go.html#4961296">state</a></span>&nbsp;<span class="op" id="4961684">=</span>&nbsp;<span class="ident" id="4961686"><a href="/gostd/html/template/context.go.html#4875046">stateAttrName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961701">}</span>&nbsp;<span class="keyword" id="4961703">else</span>&nbsp;<span class="op" id="4961708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961712"><a href="/gostd/html/template/transition.go.html#4961296">state</a></span>&nbsp;<span class="op" id="4961718">=</span>&nbsp;<span class="ident" id="4961720"><a href="/gostd/html/template/context.go.html#4875196">stateAfterName</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961739">return</span>&nbsp;<span class="ident" id="4961746"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961753">{</span><span class="ident" id="4961754"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4961759">:</span>&nbsp;<span class="ident" id="4961761"><a href="/gostd/html/template/transition.go.html#4961296">state</a></span><span class="op" id="4961766">,</span>&nbsp;<span class="ident" id="4961768"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4961775">:</span>&nbsp;<span class="ident" id="4961777"><a href="/gostd/html/template/transition.go.html#4960943">c</a></span><span class="op" id="4961778">.</span><span class="ident" id="4961779"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4961786">,</span>&nbsp;<span class="ident" id="4961788"><a href="/gostd/html/template/context.go.html#4873028">attr</a></span><span class="op" id="4961792">:</span>&nbsp;<span class="ident" id="4961794"><a href="/gostd/html/template/transition.go.html#4961303">attr</a></span><span class="op" id="4961798">}</span><span class="op" id="4961799">,</span>&nbsp;<span class="ident" id="4961801"><a href="/gostd/html/template/transition.go.html#4961193">j</a></span><br>
<span class="lineno"></span><span class="op" id="4961803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4961806">//&nbsp;tAttrName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAttrName.</span><br>
<span class="lineno">125</span><span class="keyword" id="4961873">func</span>&nbsp;<span class="ident" id="4961878">tAttrName</span><span class="op" id="4961887">(</span><span class="ident" id="4961888">c</span>&nbsp;<span class="ident" id="4961890"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961897">,</span>&nbsp;<span class="ident" id="4961899">s</span>&nbsp;<span class="op" id="4961901">[</span><span class="op" id="4961902">]</span><span class="builtintype" id="4961903">byte</span><span class="op" id="4961907">)</span>&nbsp;<span class="op" id="4961909">(</span><span class="ident" id="4961910"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961917">,</span>&nbsp;<span class="builtintype" id="4961919">int</span><span class="op" id="4961922">)</span>&nbsp;<span class="op" id="4961924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961927">i</span><span class="op" id="4961928">,</span>&nbsp;<span class="ident" id="4961930">err</span>&nbsp;<span class="op" id="4961934">:=</span>&nbsp;<span class="ident" id="4961937"><a href="/gostd/html/template/transition.go.html#4971618">eatAttrName</a></span><span class="op" id="4961948">(</span><span class="ident" id="4961949"><a href="/gostd/html/template/transition.go.html#4961899">s</a></span><span class="op" id="4961950">,</span>&nbsp;<span class="num" id="4961952">0</span><span class="op" id="4961953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961956">if</span>&nbsp;<span class="ident" id="4961959"><a href="/gostd/html/template/transition.go.html#4961930">err</a></span>&nbsp;<span class="op" id="4961963">!=</span>&nbsp;<span class="builtintype" id="4961966">nil</span>&nbsp;<span class="op" id="4961970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961974">return</span>&nbsp;<span class="ident" id="4961981"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4961988">{</span><span class="ident" id="4961989"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4961994">:</span>&nbsp;<span class="ident" id="4961996"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4962006">,</span>&nbsp;<span class="ident" id="4962008"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4962011">:</span>&nbsp;<span class="ident" id="4962013"><a href="/gostd/html/template/transition.go.html#4961930">err</a></span><span class="op" id="4962016">}</span><span class="op" id="4962017">,</span>&nbsp;<span class="builtinfunc" id="4962019">len</span><span class="op" id="4962022">(</span><span class="ident" id="4962023"><a href="/gostd/html/template/transition.go.html#4961899">s</a></span><span class="op" id="4962024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4962027">}</span>&nbsp;<span class="keyword" id="4962029">else</span>&nbsp;<span class="keyword" id="4962034">if</span>&nbsp;<span class="ident" id="4962037"><a href="/gostd/html/template/transition.go.html#4961927">i</a></span>&nbsp;<span class="op" id="4962039">!=</span>&nbsp;<span class="builtinfunc" id="4962042">len</span><span class="op" id="4962045">(</span><span class="ident" id="4962046"><a href="/gostd/html/template/transition.go.html#4961899">s</a></span><span class="op" id="4962047">)</span>&nbsp;<span class="op" id="4962049">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962053"><a href="/gostd/html/template/transition.go.html#4961888">c</a></span><span class="op" id="4962054">.</span><span class="ident" id="4962055"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4962061">=</span>&nbsp;<span class="ident" id="4962063"><a href="/gostd/html/template/context.go.html#4875196">stateAfterName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4962079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962082">return</span>&nbsp;<span class="ident" id="4962089"><a href="/gostd/html/template/transition.go.html#4961888">c</a></span><span class="op" id="4962090">,</span>&nbsp;<span class="ident" id="4962092"><a href="/gostd/html/template/transition.go.html#4961927">i</a></span><br>
<span class="lineno"></span><span class="op" id="4962094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="4962097">//&nbsp;tAfterName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAfterName.</span><br>
<span class="lineno"></span><span class="keyword" id="4962166">func</span>&nbsp;<span class="ident" id="4962171">tAfterName</span><span class="op" id="4962181">(</span><span class="ident" id="4962182">c</span>&nbsp;<span class="ident" id="4962184"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4962191">,</span>&nbsp;<span class="ident" id="4962193">s</span>&nbsp;<span class="op" id="4962195">[</span><span class="op" id="4962196">]</span><span class="builtintype" id="4962197">byte</span><span class="op" id="4962201">)</span>&nbsp;<span class="op" id="4962203">(</span><span class="ident" id="4962204"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4962211">,</span>&nbsp;<span class="builtintype" id="4962213">int</span><span class="op" id="4962216">)</span>&nbsp;<span class="op" id="4962218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4962221">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962258">i</span>&nbsp;<span class="op" id="4962260">:=</span>&nbsp;<span class="ident" id="4962263"><a href="/gostd/html/template/transition.go.html#4973108">eatWhiteSpace</a></span><span class="op" id="4962276">(</span><span class="ident" id="4962277"><a href="/gostd/html/template/transition.go.html#4962193">s</a></span><span class="op" id="4962278">,</span>&nbsp;<span class="num" id="4962280">0</span><span class="op" id="4962281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962284">if</span>&nbsp;<span class="ident" id="4962287"><a href="/gostd/html/template/transition.go.html#4962258">i</a></span>&nbsp;<span class="op" id="4962289">==</span>&nbsp;<span class="builtinfunc" id="4962292">len</span><span class="op" id="4962295">(</span><span class="ident" id="4962296"><a href="/gostd/html/template/transition.go.html#4962193">s</a></span><span class="op" id="4962297">)</span>&nbsp;<span class="op" id="4962299">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962303">return</span>&nbsp;<span class="ident" id="4962310"><a href="/gostd/html/template/transition.go.html#4962182">c</a></span><span class="op" id="4962311">,</span>&nbsp;<span class="builtinfunc" id="4962313">len</span><span class="op" id="4962316">(</span><span class="ident" id="4962317"><a href="/gostd/html/template/transition.go.html#4962193">s</a></span><span class="op" id="4962318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4962321">}</span>&nbsp;<span class="keyword" id="4962323">else</span>&nbsp;<span class="keyword" id="4962328">if</span>&nbsp;<span class="ident" id="4962331"><a href="/gostd/html/template/transition.go.html#4962193">s</a></span><span class="op" id="4962332">[</span><span class="ident" id="4962333"><a href="/gostd/html/template/transition.go.html#4962258">i</a></span><span class="op" id="4962334">]</span>&nbsp;<span class="op" id="4962336">!=</span>&nbsp;<span class="string" id="4962339">&#39;=&#39;</span>&nbsp;<span class="op" id="4962343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4962347">//&nbsp;Occurs&nbsp;due&nbsp;to&nbsp;tag&nbsp;ending&nbsp;&#39;&gt;&#39;,&nbsp;and&nbsp;valueless&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962407"><a href="/gostd/html/template/transition.go.html#4962182">c</a></span><span class="op" id="4962408">.</span><span class="ident" id="4962409"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4962415">=</span>&nbsp;<span class="ident" id="4962417"><a href="/gostd/html/template/context.go.html#4874933">stateTag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962428">return</span>&nbsp;<span class="ident" id="4962435"><a href="/gostd/html/template/transition.go.html#4962182">c</a></span><span class="op" id="4962436">,</span>&nbsp;<span class="ident" id="4962438"><a href="/gostd/html/template/transition.go.html#4962258">i</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4962441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962444"><a href="/gostd/html/template/transition.go.html#4962182">c</a></span><span class="op" id="4962445">.</span><span class="ident" id="4962446"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4962452">=</span>&nbsp;<span class="ident" id="4962454"><a href="/gostd/html/template/context.go.html#4875336">stateBeforeValue</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4962472">//&nbsp;Consume&nbsp;the&nbsp;&#34;=&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962493">return</span>&nbsp;<span class="ident" id="4962500"><a href="/gostd/html/template/transition.go.html#4962182">c</a></span><span class="op" id="4962501">,</span>&nbsp;<span class="ident" id="4962503"><a href="/gostd/html/template/transition.go.html#4962258">i</a></span>&nbsp;<span class="op" id="4962505">+</span>&nbsp;<span class="num" id="4962507">1</span><br>
<span class="lineno"></span><span class="op" id="4962509">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="4962512">var</span>&nbsp;<span class="ident" id="4962516">attrStartStates</span>&nbsp;<span class="op" id="4962532">=</span>&nbsp;<span class="op" id="4962534">[</span><span class="op" id="4962535">...</span><span class="op" id="4962538">]</span><span class="ident" id="4962539"><a href="/gostd/html/template/context.go.html#4874647">state</a></span><span class="op" id="4962544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962547"><a href="/gostd/html/template/context.go.html#4882137">attrNone</a></span><span class="op" id="4962555">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4962559"><a href="/gostd/html/template/context.go.html#4875649">stateAttr</a></span><span class="op" id="4962568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962571"><a href="/gostd/html/template/context.go.html#4882217">attrScript</a></span><span class="op" id="4962581">:</span>&nbsp;<span class="ident" id="4962583"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><span class="op" id="4962590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962593"><a href="/gostd/html/template/context.go.html#4882298">attrStyle</a></span><span class="op" id="4962602">:</span>&nbsp;&nbsp;<span class="ident" id="4962605"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><span class="op" id="4962613">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962616"><a href="/gostd/html/template/context.go.html#4882371">attrURL</a></span><span class="op" id="4962623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962628"><a href="/gostd/html/template/context.go.html#4875729">stateURL</a></span><span class="op" id="4962636">,</span><br>
<span class="lineno"></span><span class="op" id="4962638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4962641">//&nbsp;tBeforeValue&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateBeforeValue.</span><br>
<span class="lineno"></span><span class="keyword" id="4962714">func</span>&nbsp;<span class="ident" id="4962719">tBeforeValue</span><span class="op" id="4962731">(</span><span class="ident" id="4962732">c</span>&nbsp;<span class="ident" id="4962734"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4962741">,</span>&nbsp;<span class="ident" id="4962743">s</span>&nbsp;<span class="op" id="4962745">[</span><span class="op" id="4962746">]</span><span class="builtintype" id="4962747">byte</span><span class="op" id="4962751">)</span>&nbsp;<span class="op" id="4962753">(</span><span class="ident" id="4962754"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4962761">,</span>&nbsp;<span class="builtintype" id="4962763">int</span><span class="op" id="4962766">)</span>&nbsp;<span class="op" id="4962768">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962771">i</span>&nbsp;<span class="op" id="4962773">:=</span>&nbsp;<span class="ident" id="4962776"><a href="/gostd/html/template/transition.go.html#4973108">eatWhiteSpace</a></span><span class="op" id="4962789">(</span><span class="ident" id="4962790"><a href="/gostd/html/template/transition.go.html#4962743">s</a></span><span class="op" id="4962791">,</span>&nbsp;<span class="num" id="4962793">0</span><span class="op" id="4962794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962797">if</span>&nbsp;<span class="ident" id="4962800"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span>&nbsp;<span class="op" id="4962802">==</span>&nbsp;<span class="builtinfunc" id="4962805">len</span><span class="op" id="4962808">(</span><span class="ident" id="4962809"><a href="/gostd/html/template/transition.go.html#4962743">s</a></span><span class="op" id="4962810">)</span>&nbsp;<span class="op" id="4962812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962816">return</span>&nbsp;<span class="ident" id="4962823"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4962824">,</span>&nbsp;<span class="builtinfunc" id="4962826">len</span><span class="op" id="4962829">(</span><span class="ident" id="4962830"><a href="/gostd/html/template/transition.go.html#4962743">s</a></span><span class="op" id="4962831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4962834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4962837">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;delimiter.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962871">delim</span>&nbsp;<span class="op" id="4962877">:=</span>&nbsp;<span class="ident" id="4962880"><a href="/gostd/html/template/context.go.html#4878883">delimSpaceOrTagEnd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962900">switch</span>&nbsp;<span class="ident" id="4962907"><a href="/gostd/html/template/transition.go.html#4962743">s</a></span><span class="op" id="4962908">[</span><span class="ident" id="4962909"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span><span class="op" id="4962910">]</span>&nbsp;<span class="op" id="4962912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962915">case</span>&nbsp;<span class="string" id="4962920">&#39;\&#39;&#39;</span><span class="op" id="4962924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962928"><a href="/gostd/html/template/transition.go.html#4962871">delim</a></span><span class="op" id="4962933">,</span>&nbsp;<span class="ident" id="4962935"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span>&nbsp;<span class="op" id="4962937">=</span>&nbsp;<span class="ident" id="4962939"><a href="/gostd/html/template/context.go.html#4878769">delimSingleQuote</a></span><span class="op" id="4962955">,</span>&nbsp;<span class="ident" id="4962957"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span><span class="op" id="4962958">+</span><span class="num" id="4962959">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4962962">case</span>&nbsp;<span class="string" id="4962967">&#39;&#34;&#39;</span><span class="op" id="4962970">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4962974"><a href="/gostd/html/template/transition.go.html#4962871">delim</a></span><span class="op" id="4962979">,</span>&nbsp;<span class="ident" id="4962981"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span>&nbsp;<span class="op" id="4962983">=</span>&nbsp;<span class="ident" id="4962985"><a href="/gostd/html/template/context.go.html#4878677">delimDoubleQuote</a></span><span class="op" id="4963001">,</span>&nbsp;<span class="ident" id="4963003"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span><span class="op" id="4963004">+</span><span class="num" id="4963005">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4963008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4963011"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4963012">.</span><span class="ident" id="4963013"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4963018">,</span>&nbsp;<span class="ident" id="4963020"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4963021">.</span><span class="ident" id="4963022"><a href="/gostd/html/template/context.go.html#4872981">delim</a></span><span class="op" id="4963027">,</span>&nbsp;<span class="ident" id="4963029"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4963030">.</span><span class="ident" id="4963031"><a href="/gostd/html/template/context.go.html#4873028">attr</a></span>&nbsp;<span class="op" id="4963036">=</span>&nbsp;<span class="ident" id="4963038"><a href="/gostd/html/template/transition.go.html#4962516">attrStartStates</a></span><span class="op" id="4963053">[</span><span class="ident" id="4963054"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4963055">.</span><span class="ident" id="4963056"><a href="/gostd/html/template/context.go.html#4873028">attr</a></span><span class="op" id="4963060">]</span><span class="op" id="4963061">,</span>&nbsp;<span class="ident" id="4963063"><a href="/gostd/html/template/transition.go.html#4962871">delim</a></span><span class="op" id="4963068">,</span>&nbsp;<span class="ident" id="4963070"><a href="/gostd/html/template/context.go.html#4882137">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963080">return</span>&nbsp;<span class="ident" id="4963087"><a href="/gostd/html/template/transition.go.html#4962732">c</a></span><span class="op" id="4963088">,</span>&nbsp;<span class="ident" id="4963090"><a href="/gostd/html/template/transition.go.html#4962771">i</a></span><br>
<span class="lineno"></span><span class="op" id="4963092">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4963095">//&nbsp;tHTMLCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateHTMLCmt.</span><br>
<span class="lineno"></span><span class="keyword" id="4963160">func</span>&nbsp;<span class="ident" id="4963165">tHTMLCmt</span><span class="op" id="4963173">(</span><span class="ident" id="4963174">c</span>&nbsp;<span class="ident" id="4963176"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963183">,</span>&nbsp;<span class="ident" id="4963185">s</span>&nbsp;<span class="op" id="4963187">[</span><span class="op" id="4963188">]</span><span class="builtintype" id="4963189">byte</span><span class="op" id="4963193">)</span>&nbsp;<span class="op" id="4963195">(</span><span class="ident" id="4963196"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963203">,</span>&nbsp;<span class="builtintype" id="4963205">int</span><span class="op" id="4963208">)</span>&nbsp;<span class="op" id="4963210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963213">if</span>&nbsp;<span class="ident" id="4963216">i</span>&nbsp;<span class="op" id="4963218">:=</span>&nbsp;<span class="ident" id="4963221"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4963226">.</span><span class="ident" id="4963227"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="4963232">(</span><span class="ident" id="4963233"><a href="/gostd/html/template/transition.go.html#4963185">s</a></span><span class="op" id="4963234">,</span>&nbsp;<span class="ident" id="4963236"><a href="/gostd/html/template/transition.go.html#4960032">commentEnd</a></span><span class="op" id="4963246">)</span><span class="op" id="4963247">;</span>&nbsp;<span class="ident" id="4963249"><a href="/gostd/html/template/transition.go.html#4963216">i</a></span>&nbsp;<span class="op" id="4963251">!=</span>&nbsp;<span class="op" id="4963254">-</span><span class="num" id="4963255">1</span>&nbsp;<span class="op" id="4963257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963261">return</span>&nbsp;<span class="ident" id="4963268"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963275">{</span><span class="op" id="4963276">}</span><span class="op" id="4963277">,</span>&nbsp;<span class="ident" id="4963279"><a href="/gostd/html/template/transition.go.html#4963216">i</a></span>&nbsp;<span class="op" id="4963281">+</span>&nbsp;<span class="num" id="4963283">3</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4963286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963289">return</span>&nbsp;<span class="ident" id="4963296"><a href="/gostd/html/template/transition.go.html#4963174">c</a></span><span class="op" id="4963297">,</span>&nbsp;<span class="builtinfunc" id="4963299">len</span><span class="op" id="4963302">(</span><span class="ident" id="4963303"><a href="/gostd/html/template/transition.go.html#4963185">s</a></span><span class="op" id="4963304">)</span><br>
<span class="lineno"></span><span class="op" id="4963306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4963309">//&nbsp;specialTagEndMarkers&nbsp;maps&nbsp;element&nbsp;types&nbsp;to&nbsp;the&nbsp;character&nbsp;sequence&nbsp;that</span><br>
<span class="lineno">185</span><span class="comment" id="4963383">//&nbsp;case-insensitively&nbsp;signals&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;special&nbsp;tag&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="4963446">var</span>&nbsp;<span class="ident" id="4963450">specialTagEndMarkers</span>&nbsp;<span class="op" id="4963471">=</span>&nbsp;<span class="op" id="4963473">[</span><span class="op" id="4963474">...</span><span class="op" id="4963477">]</span><span class="builtintype" id="4963478">string</span><span class="op" id="4963484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4963487"><a href="/gostd/html/template/context.go.html#4881365">elementScript</a></span><span class="op" id="4963500">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4963504">&#34;&lt;/script&#34;</span><span class="op" id="4963514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4963517"><a href="/gostd/html/template/context.go.html#4881442">elementStyle</a></span><span class="op" id="4963529">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4963534">&#34;&lt;/style&#34;</span><span class="op" id="4963543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4963546"><a href="/gostd/html/template/context.go.html#4881522">elementTextarea</a></span><span class="op" id="4963561">:</span>&nbsp;<span class="string" id="4963563">&#34;&lt;/textarea&#34;</span><span class="op" id="4963575">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4963578"><a href="/gostd/html/template/context.go.html#4881599">elementTitle</a></span><span class="op" id="4963590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4963595">&#34;&lt;/title&#34;</span><span class="op" id="4963604">,</span><br>
<span class="lineno"></span><span class="op" id="4963606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4963609">//&nbsp;tSpecialTagEnd&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;raw&nbsp;text&nbsp;and&nbsp;RCDATA</span><br>
<span class="lineno"></span><span class="comment" id="4963686">//&nbsp;element&nbsp;states.</span><br>
<span class="lineno">195</span><span class="keyword" id="4963705">func</span>&nbsp;<span class="ident" id="4963710">tSpecialTagEnd</span><span class="op" id="4963724">(</span><span class="ident" id="4963725">c</span>&nbsp;<span class="ident" id="4963727"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963734">,</span>&nbsp;<span class="ident" id="4963736">s</span>&nbsp;<span class="op" id="4963738">[</span><span class="op" id="4963739">]</span><span class="builtintype" id="4963740">byte</span><span class="op" id="4963744">)</span>&nbsp;<span class="op" id="4963746">(</span><span class="ident" id="4963747"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963754">,</span>&nbsp;<span class="builtintype" id="4963756">int</span><span class="op" id="4963759">)</span>&nbsp;<span class="op" id="4963761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963764">if</span>&nbsp;<span class="ident" id="4963767"><a href="/gostd/html/template/transition.go.html#4963725">c</a></span><span class="op" id="4963768">.</span><span class="ident" id="4963769"><a href="/gostd/html/template/context.go.html#4873042">element</a></span>&nbsp;<span class="op" id="4963777">!=</span>&nbsp;<span class="ident" id="4963780"><a href="/gostd/html/template/context.go.html#4881273">elementNone</a></span>&nbsp;<span class="op" id="4963792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963796">if</span>&nbsp;<span class="ident" id="4963799">i</span>&nbsp;<span class="op" id="4963801">:=</span>&nbsp;<span class="ident" id="4963804"><a href="/gostd/html/template/transition.go.html#4958976">strings</a></span><span class="op" id="4963811">.</span><span class="ident" id="4963812"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4963817">(</span><span class="ident" id="4963818"><a href="/gostd/html/template/transition.go.html#4958976">strings</a></span><span class="op" id="4963825">.</span><span class="ident" id="4963826"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4963833">(</span><span class="builtintype" id="4963834">string</span><span class="op" id="4963840">(</span><span class="ident" id="4963841"><a href="/gostd/html/template/transition.go.html#4963736">s</a></span><span class="op" id="4963842">)</span><span class="op" id="4963843">)</span><span class="op" id="4963844">,</span>&nbsp;<span class="ident" id="4963846"><a href="/gostd/html/template/transition.go.html#4963450">specialTagEndMarkers</a></span><span class="op" id="4963866">[</span><span class="ident" id="4963867"><a href="/gostd/html/template/transition.go.html#4963725">c</a></span><span class="op" id="4963868">.</span><span class="ident" id="4963869"><a href="/gostd/html/template/context.go.html#4873042">element</a></span><span class="op" id="4963876">]</span><span class="op" id="4963877">)</span><span class="op" id="4963878">;</span>&nbsp;<span class="ident" id="4963880"><a href="/gostd/html/template/transition.go.html#4963799">i</a></span>&nbsp;<span class="op" id="4963882">!=</span>&nbsp;<span class="op" id="4963885">-</span><span class="num" id="4963886">1</span>&nbsp;<span class="op" id="4963888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963893">return</span>&nbsp;<span class="ident" id="4963900"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4963907">{</span><span class="op" id="4963908">}</span><span class="op" id="4963909">,</span>&nbsp;<span class="ident" id="4963911"><a href="/gostd/html/template/transition.go.html#4963799">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4963915">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4963918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4963921">return</span>&nbsp;<span class="ident" id="4963928"><a href="/gostd/html/template/transition.go.html#4963725">c</a></span><span class="op" id="4963929">,</span>&nbsp;<span class="builtinfunc" id="4963931">len</span><span class="op" id="4963934">(</span><span class="ident" id="4963935"><a href="/gostd/html/template/transition.go.html#4963736">s</a></span><span class="op" id="4963936">)</span><br>
<span class="lineno"></span><span class="op" id="4963938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4963941">//&nbsp;tAttr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;attribute&nbsp;state.</span><br>
<span class="lineno">205</span><span class="keyword" id="4964010">func</span>&nbsp;<span class="ident" id="4964015">tAttr</span><span class="op" id="4964020">(</span><span class="ident" id="4964021">c</span>&nbsp;<span class="ident" id="4964023"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964030">,</span>&nbsp;<span class="ident" id="4964032">s</span>&nbsp;<span class="op" id="4964034">[</span><span class="op" id="4964035">]</span><span class="builtintype" id="4964036">byte</span><span class="op" id="4964040">)</span>&nbsp;<span class="op" id="4964042">(</span><span class="ident" id="4964043"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964050">,</span>&nbsp;<span class="builtintype" id="4964052">int</span><span class="op" id="4964055">)</span>&nbsp;<span class="op" id="4964057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964060">return</span>&nbsp;<span class="ident" id="4964067"><a href="/gostd/html/template/transition.go.html#4964021">c</a></span><span class="op" id="4964068">,</span>&nbsp;<span class="builtinfunc" id="4964070">len</span><span class="op" id="4964073">(</span><span class="ident" id="4964074"><a href="/gostd/html/template/transition.go.html#4964032">s</a></span><span class="op" id="4964075">)</span><br>
<span class="lineno"></span><span class="op" id="4964077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4964080">//&nbsp;tURL&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;URL&nbsp;state.</span><br>
<span class="lineno">210</span><span class="keyword" id="4964142">func</span>&nbsp;<span class="ident" id="4964147">tURL</span><span class="op" id="4964151">(</span><span class="ident" id="4964152">c</span>&nbsp;<span class="ident" id="4964154"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964161">,</span>&nbsp;<span class="ident" id="4964163">s</span>&nbsp;<span class="op" id="4964165">[</span><span class="op" id="4964166">]</span><span class="builtintype" id="4964167">byte</span><span class="op" id="4964171">)</span>&nbsp;<span class="op" id="4964173">(</span><span class="ident" id="4964174"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964181">,</span>&nbsp;<span class="builtintype" id="4964183">int</span><span class="op" id="4964186">)</span>&nbsp;<span class="op" id="4964188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964191">if</span>&nbsp;<span class="ident" id="4964194"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4964199">.</span><span class="ident" id="4964200"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4964208">(</span><span class="ident" id="4964209"><a href="/gostd/html/template/transition.go.html#4964163">s</a></span><span class="op" id="4964210">,</span>&nbsp;<span class="string" id="4964212">&#34;#?&#34;</span><span class="op" id="4964216">)</span>&nbsp;<span class="op" id="4964218">&gt;=</span>&nbsp;<span class="num" id="4964221">0</span>&nbsp;<span class="op" id="4964223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964227"><a href="/gostd/html/template/transition.go.html#4964152">c</a></span><span class="op" id="4964228">.</span><span class="ident" id="4964229"><a href="/gostd/html/template/context.go.html#4872996">urlPart</a></span>&nbsp;<span class="op" id="4964237">=</span>&nbsp;<span class="ident" id="4964239"><a href="/gostd/html/template/context.go.html#4879742">urlPartQueryOrFrag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4964259">}</span>&nbsp;<span class="keyword" id="4964261">else</span>&nbsp;<span class="keyword" id="4964266">if</span>&nbsp;<span class="builtinfunc" id="4964269">len</span><span class="op" id="4964272">(</span><span class="ident" id="4964273"><a href="/gostd/html/template/transition.go.html#4964163">s</a></span><span class="op" id="4964274">)</span>&nbsp;<span class="op" id="4964276">!=</span>&nbsp;<span class="ident" id="4964279"><a href="/gostd/html/template/transition.go.html#4973108">eatWhiteSpace</a></span><span class="op" id="4964292">(</span><span class="ident" id="4964293"><a href="/gostd/html/template/transition.go.html#4964163">s</a></span><span class="op" id="4964294">,</span>&nbsp;<span class="num" id="4964296">0</span><span class="op" id="4964297">)</span>&nbsp;<span class="op" id="4964299">&amp;&amp;</span>&nbsp;<span class="ident" id="4964302"><a href="/gostd/html/template/transition.go.html#4964152">c</a></span><span class="op" id="4964303">.</span><span class="ident" id="4964304"><a href="/gostd/html/template/context.go.html#4872996">urlPart</a></span>&nbsp;<span class="op" id="4964312">==</span>&nbsp;<span class="ident" id="4964315"><a href="/gostd/html/template/context.go.html#4879478">urlPartNone</a></span>&nbsp;<span class="op" id="4964327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4964331">//&nbsp;HTML5&nbsp;uses&nbsp;&#34;Valid&nbsp;URL&nbsp;potentially&nbsp;surrounded&nbsp;by&nbsp;spaces&#34;&nbsp;for</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4964396">//&nbsp;attrs:&nbsp;http://www.w3.org/TR/html5/index.html#attributes-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964459"><a href="/gostd/html/template/transition.go.html#4964152">c</a></span><span class="op" id="4964460">.</span><span class="ident" id="4964461"><a href="/gostd/html/template/context.go.html#4872996">urlPart</a></span>&nbsp;<span class="op" id="4964469">=</span>&nbsp;<span class="ident" id="4964471"><a href="/gostd/html/template/context.go.html#4879621">urlPartPreQuery</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4964488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964491">return</span>&nbsp;<span class="ident" id="4964498"><a href="/gostd/html/template/transition.go.html#4964152">c</a></span><span class="op" id="4964499">,</span>&nbsp;<span class="builtinfunc" id="4964501">len</span><span class="op" id="4964504">(</span><span class="ident" id="4964505"><a href="/gostd/html/template/transition.go.html#4964163">s</a></span><span class="op" id="4964506">)</span><br>
<span class="lineno"></span><span class="op" id="4964508">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="4964511">//&nbsp;tJS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4964571">func</span>&nbsp;<span class="ident" id="4964576">tJS</span><span class="op" id="4964579">(</span><span class="ident" id="4964580">c</span>&nbsp;<span class="ident" id="4964582"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964589">,</span>&nbsp;<span class="ident" id="4964591">s</span>&nbsp;<span class="op" id="4964593">[</span><span class="op" id="4964594">]</span><span class="builtintype" id="4964595">byte</span><span class="op" id="4964599">)</span>&nbsp;<span class="op" id="4964601">(</span><span class="ident" id="4964602"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4964609">,</span>&nbsp;<span class="builtintype" id="4964611">int</span><span class="op" id="4964614">)</span>&nbsp;<span class="op" id="4964616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964619">i</span>&nbsp;<span class="op" id="4964621">:=</span>&nbsp;<span class="ident" id="4964624"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4964629">.</span><span class="ident" id="4964630"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4964638">(</span><span class="ident" id="4964639"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964640">,</span>&nbsp;<span class="string" id="4964642">`&#34;&#39;/`</span><span class="op" id="4964647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964650">if</span>&nbsp;<span class="ident" id="4964653"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span>&nbsp;<span class="op" id="4964655">==</span>&nbsp;<span class="op" id="4964658">-</span><span class="num" id="4964659">1</span>&nbsp;<span class="op" id="4964661">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4964665">//&nbsp;Entire&nbsp;input&nbsp;is&nbsp;non&nbsp;string,&nbsp;comment,&nbsp;regexp&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964722"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964723">.</span><span class="ident" id="4964724"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4964730">=</span>&nbsp;<span class="ident" id="4964732"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="4964741">(</span><span class="ident" id="4964742"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964743">,</span>&nbsp;<span class="ident" id="4964745"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964746">.</span><span class="ident" id="4964747"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span><span class="op" id="4964752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964756">return</span>&nbsp;<span class="ident" id="4964763"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964764">,</span>&nbsp;<span class="builtinfunc" id="4964766">len</span><span class="op" id="4964769">(</span><span class="ident" id="4964770"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4964774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964777"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964778">.</span><span class="ident" id="4964779"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4964785">=</span>&nbsp;<span class="ident" id="4964787"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="4964796">(</span><span class="ident" id="4964797"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964798">[</span><span class="op" id="4964799">:</span><span class="ident" id="4964800"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4964801">]</span><span class="op" id="4964802">,</span>&nbsp;<span class="ident" id="4964804"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964805">.</span><span class="ident" id="4964806"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span><span class="op" id="4964811">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964814">switch</span>&nbsp;<span class="ident" id="4964821"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964822">[</span><span class="ident" id="4964823"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4964824">]</span>&nbsp;<span class="op" id="4964826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964829">case</span>&nbsp;<span class="string" id="4964834">&#39;&#34;&#39;</span><span class="op" id="4964837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964841"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964842">.</span><span class="ident" id="4964843"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4964848">,</span>&nbsp;<span class="ident" id="4964850"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964851">.</span><span class="ident" id="4964852"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4964858">=</span>&nbsp;<span class="ident" id="4964860"><a href="/gostd/html/template/context.go.html#4875876">stateJSDqStr</a></span><span class="op" id="4964872">,</span>&nbsp;<span class="ident" id="4964874"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964887">case</span>&nbsp;<span class="string" id="4964892">&#39;\&#39;&#39;</span><span class="op" id="4964896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4964900"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964901">.</span><span class="ident" id="4964902"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4964907">,</span>&nbsp;<span class="ident" id="4964909"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4964910">.</span><span class="ident" id="4964911"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4964917">=</span>&nbsp;<span class="ident" id="4964919"><a href="/gostd/html/template/context.go.html#4875956">stateJSSqStr</a></span><span class="op" id="4964931">,</span>&nbsp;<span class="ident" id="4964933"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964946">case</span>&nbsp;<span class="string" id="4964951">&#39;/&#39;</span><span class="op" id="4964954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964958">switch</span>&nbsp;<span class="op" id="4964965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4964969">case</span>&nbsp;<span class="ident" id="4964974"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4964975">+</span><span class="num" id="4964976">1</span>&nbsp;<span class="op" id="4964978">&lt;</span>&nbsp;<span class="builtinfunc" id="4964980">len</span><span class="op" id="4964983">(</span><span class="ident" id="4964984"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964985">)</span>&nbsp;<span class="op" id="4964987">&amp;&amp;</span>&nbsp;<span class="ident" id="4964990"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4964991">[</span><span class="ident" id="4964992"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4964993">+</span><span class="num" id="4964994">1</span><span class="op" id="4964995">]</span>&nbsp;<span class="op" id="4964997">==</span>&nbsp;<span class="string" id="4965000">&#39;/&#39;</span><span class="op" id="4965003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965008"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965009">.</span><span class="ident" id="4965010"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4965015">,</span>&nbsp;<span class="ident" id="4965017"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span>&nbsp;<span class="op" id="4965019">=</span>&nbsp;<span class="ident" id="4965021"><a href="/gostd/html/template/context.go.html#4876194">stateJSLineCmt</a></span><span class="op" id="4965035">,</span>&nbsp;<span class="ident" id="4965037"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4965038">+</span><span class="num" id="4965039">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965043">case</span>&nbsp;<span class="ident" id="4965048"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4965049">+</span><span class="num" id="4965050">1</span>&nbsp;<span class="op" id="4965052">&lt;</span>&nbsp;<span class="builtinfunc" id="4965054">len</span><span class="op" id="4965057">(</span><span class="ident" id="4965058"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4965059">)</span>&nbsp;<span class="op" id="4965061">&amp;&amp;</span>&nbsp;<span class="ident" id="4965064"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4965065">[</span><span class="ident" id="4965066"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4965067">+</span><span class="num" id="4965068">1</span><span class="op" id="4965069">]</span>&nbsp;<span class="op" id="4965071">==</span>&nbsp;<span class="string" id="4965074">&#39;*&#39;</span><span class="op" id="4965077">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965082"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965083">.</span><span class="ident" id="4965084"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4965089">,</span>&nbsp;<span class="ident" id="4965091"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span>&nbsp;<span class="op" id="4965093">=</span>&nbsp;<span class="ident" id="4965095"><a href="/gostd/html/template/context.go.html#4876114">stateJSBlockCmt</a></span><span class="op" id="4965110">,</span>&nbsp;<span class="ident" id="4965112"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4965113">+</span><span class="num" id="4965114">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965118">case</span>&nbsp;<span class="ident" id="4965123"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965124">.</span><span class="ident" id="4965125"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4965131">==</span>&nbsp;<span class="ident" id="4965134"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="4965145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965150"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965151">.</span><span class="ident" id="4965152"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4965158">=</span>&nbsp;<span class="ident" id="4965160"><a href="/gostd/html/template/context.go.html#4876031">stateJSRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965176">case</span>&nbsp;<span class="ident" id="4965181"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965182">.</span><span class="ident" id="4965183"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4965189">==</span>&nbsp;<span class="ident" id="4965192"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="4965202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965207"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965208">.</span><span class="ident" id="4965209"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4965215">=</span>&nbsp;<span class="ident" id="4965217"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965231">default</span><span class="op" id="4965238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965243">return</span>&nbsp;<span class="ident" id="4965250"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4965257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965263"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4965268">:</span>&nbsp;<span class="ident" id="4965270"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4965280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965286"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4965289">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4965293"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4965299">(</span><span class="ident" id="4965300"><a href="/gostd/html/template/error.go.html#4902968">ErrSlashAmbig</a></span><span class="op" id="4965313">,</span>&nbsp;<span class="builtintype" id="4965315">nil</span><span class="op" id="4965318">,</span>&nbsp;<span class="num" id="4965320">0</span><span class="op" id="4965321">,</span>&nbsp;<span class="string" id="4965323">&#34;&#39;/&#39;&nbsp;could&nbsp;start&nbsp;a&nbsp;division&nbsp;or&nbsp;regexp:&nbsp;%.32q&#34;</span><span class="op" id="4965368">,</span>&nbsp;<span class="ident" id="4965370"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4965371">[</span><span class="ident" id="4965372"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span><span class="op" id="4965373">:</span><span class="op" id="4965374">]</span><span class="op" id="4965375">)</span><span class="op" id="4965376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4965381">}</span><span class="op" id="4965382">,</span>&nbsp;<span class="builtinfunc" id="4965384">len</span><span class="op" id="4965387">(</span><span class="ident" id="4965388"><a href="/gostd/html/template/transition.go.html#4964591">s</a></span><span class="op" id="4965389">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4965393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965396">default</span><span class="op" id="4965403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4965407">panic</span><span class="op" id="4965412">(</span><span class="string" id="4965413">&#34;unreachable&#34;</span><span class="op" id="4965426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4965429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965432">return</span>&nbsp;<span class="ident" id="4965439"><a href="/gostd/html/template/transition.go.html#4964580">c</a></span><span class="op" id="4965440">,</span>&nbsp;<span class="ident" id="4965442"><a href="/gostd/html/template/transition.go.html#4964619">i</a></span>&nbsp;<span class="op" id="4965444">+</span>&nbsp;<span class="num" id="4965446">1</span><br>
<span class="lineno">255</span><span class="op" id="4965448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4965451">//&nbsp;tJSDelimited&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;string&nbsp;and&nbsp;regexp</span><br>
<span class="lineno"></span><span class="comment" id="4965531">//&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4965542">func</span>&nbsp;<span class="ident" id="4965547">tJSDelimited</span><span class="op" id="4965559">(</span><span class="ident" id="4965560">c</span>&nbsp;<span class="ident" id="4965562"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4965569">,</span>&nbsp;<span class="ident" id="4965571">s</span>&nbsp;<span class="op" id="4965573">[</span><span class="op" id="4965574">]</span><span class="builtintype" id="4965575">byte</span><span class="op" id="4965579">)</span>&nbsp;<span class="op" id="4965581">(</span><span class="ident" id="4965582"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4965589">,</span>&nbsp;<span class="builtintype" id="4965591">int</span><span class="op" id="4965594">)</span>&nbsp;<span class="op" id="4965596">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965599">specials</span>&nbsp;<span class="op" id="4965608">:=</span>&nbsp;<span class="string" id="4965611">`\&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965617">switch</span>&nbsp;<span class="ident" id="4965624"><a href="/gostd/html/template/transition.go.html#4965560">c</a></span><span class="op" id="4965625">.</span><span class="ident" id="4965626"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4965632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965635">case</span>&nbsp;<span class="ident" id="4965640"><a href="/gostd/html/template/context.go.html#4875956">stateJSSqStr</a></span><span class="op" id="4965652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965656"><a href="/gostd/html/template/transition.go.html#4965599">specials</a></span>&nbsp;<span class="op" id="4965665">=</span>&nbsp;<span class="string" id="4965667">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965673">case</span>&nbsp;<span class="ident" id="4965678"><a href="/gostd/html/template/context.go.html#4876031">stateJSRegexp</a></span><span class="op" id="4965691">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965695"><a href="/gostd/html/template/transition.go.html#4965599">specials</a></span>&nbsp;<span class="op" id="4965704">=</span>&nbsp;<span class="string" id="4965706">`\/[]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4965714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965718">k</span><span class="op" id="4965719">,</span>&nbsp;<span class="ident" id="4965721">inCharset</span>&nbsp;<span class="op" id="4965731">:=</span>&nbsp;<span class="num" id="4965734">0</span><span class="op" id="4965735">,</span>&nbsp;<span class="builtintype" id="4965737">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965744">for</span>&nbsp;<span class="op" id="4965748">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965752">i</span>&nbsp;<span class="op" id="4965754">:=</span>&nbsp;<span class="ident" id="4965757"><a href="/gostd/html/template/transition.go.html#4965718">k</a></span>&nbsp;<span class="op" id="4965759">+</span>&nbsp;<span class="ident" id="4965761"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4965766">.</span><span class="ident" id="4965767"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4965775">(</span><span class="ident" id="4965776"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4965777">[</span><span class="ident" id="4965778"><a href="/gostd/html/template/transition.go.html#4965718">k</a></span><span class="op" id="4965779">:</span><span class="op" id="4965780">]</span><span class="op" id="4965781">,</span>&nbsp;<span class="ident" id="4965783"><a href="/gostd/html/template/transition.go.html#4965599">specials</a></span><span class="op" id="4965791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965795">if</span>&nbsp;<span class="ident" id="4965798"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span>&nbsp;<span class="op" id="4965800">&lt;</span>&nbsp;<span class="ident" id="4965802"><a href="/gostd/html/template/transition.go.html#4965718">k</a></span>&nbsp;<span class="op" id="4965804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965809">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4965817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965821">switch</span>&nbsp;<span class="ident" id="4965828"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4965829">[</span><span class="ident" id="4965830"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span><span class="op" id="4965831">]</span>&nbsp;<span class="op" id="4965833">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965837">case</span>&nbsp;<span class="string" id="4965842">&#39;\\&#39;</span><span class="op" id="4965846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965851"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span><span class="op" id="4965852">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965858">if</span>&nbsp;<span class="ident" id="4965861"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span>&nbsp;<span class="op" id="4965863">==</span>&nbsp;<span class="builtinfunc" id="4965866">len</span><span class="op" id="4965869">(</span><span class="ident" id="4965870"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4965871">)</span>&nbsp;<span class="op" id="4965873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4965879">return</span>&nbsp;<span class="ident" id="4965886"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4965893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965900"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4965905">:</span>&nbsp;<span class="ident" id="4965907"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4965917">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4965924"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4965927">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4965931"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4965937">(</span><span class="ident" id="4965938"><a href="/gostd/html/template/error.go.html#4901818">ErrPartialEscape</a></span><span class="op" id="4965954">,</span>&nbsp;<span class="builtintype" id="4965956">nil</span><span class="op" id="4965959">,</span>&nbsp;<span class="num" id="4965961">0</span><span class="op" id="4965962">,</span>&nbsp;<span class="string" id="4965964">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;JS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="4966009">,</span>&nbsp;<span class="ident" id="4966011"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4966012">)</span><span class="op" id="4966013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966019">}</span><span class="op" id="4966020">,</span>&nbsp;<span class="builtinfunc" id="4966022">len</span><span class="op" id="4966025">(</span><span class="ident" id="4966026"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4966027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966036">case</span>&nbsp;<span class="string" id="4966041">&#39;[&#39;</span><span class="op" id="4966044">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966049"><a href="/gostd/html/template/transition.go.html#4965721">inCharset</a></span>&nbsp;<span class="op" id="4966059">=</span>&nbsp;<span class="builtintype" id="4966061">true</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966068">case</span>&nbsp;<span class="string" id="4966073">&#39;]&#39;</span><span class="op" id="4966076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966081"><a href="/gostd/html/template/transition.go.html#4965721">inCharset</a></span>&nbsp;<span class="op" id="4966091">=</span>&nbsp;<span class="builtintype" id="4966093">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966101">default</span><span class="op" id="4966108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4966113">//&nbsp;end&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966133">if</span>&nbsp;<span class="op" id="4966136">!</span><span class="ident" id="4966137"><a href="/gostd/html/template/transition.go.html#4965721">inCharset</a></span>&nbsp;<span class="op" id="4966147">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966153"><a href="/gostd/html/template/transition.go.html#4965560">c</a></span><span class="op" id="4966154">.</span><span class="ident" id="4966155"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4966160">,</span>&nbsp;<span class="ident" id="4966162"><a href="/gostd/html/template/transition.go.html#4965560">c</a></span><span class="op" id="4966163">.</span><span class="ident" id="4966164"><a href="/gostd/html/template/context.go.html#4873013">jsCtx</a></span>&nbsp;<span class="op" id="4966170">=</span>&nbsp;<span class="ident" id="4966172"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><span class="op" id="4966179">,</span>&nbsp;<span class="ident" id="4966181"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966196">return</span>&nbsp;<span class="ident" id="4966203"><a href="/gostd/html/template/transition.go.html#4965560">c</a></span><span class="op" id="4966204">,</span>&nbsp;<span class="ident" id="4966206"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span>&nbsp;<span class="op" id="4966208">+</span>&nbsp;<span class="num" id="4966210">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966223"><a href="/gostd/html/template/transition.go.html#4965718">k</a></span>&nbsp;<span class="op" id="4966225">=</span>&nbsp;<span class="ident" id="4966227"><a href="/gostd/html/template/transition.go.html#4965752">i</a></span>&nbsp;<span class="op" id="4966229">+</span>&nbsp;<span class="num" id="4966231">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966238">if</span>&nbsp;<span class="ident" id="4966241"><a href="/gostd/html/template/transition.go.html#4965721">inCharset</a></span>&nbsp;<span class="op" id="4966251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4966255">//&nbsp;This&nbsp;can&nbsp;be&nbsp;fixed&nbsp;by&nbsp;making&nbsp;context&nbsp;richer&nbsp;if&nbsp;interpolation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4966320">//&nbsp;into&nbsp;charsets&nbsp;is&nbsp;desired.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966351">return</span>&nbsp;<span class="ident" id="4966358"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4966365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966370"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4966375">:</span>&nbsp;<span class="ident" id="4966377"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4966387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966392"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4966395">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4966399"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4966405">(</span><span class="ident" id="4966406"><a href="/gostd/html/template/error.go.html#4901329">ErrPartialCharset</a></span><span class="op" id="4966423">,</span>&nbsp;<span class="builtintype" id="4966425">nil</span><span class="op" id="4966428">,</span>&nbsp;<span class="num" id="4966430">0</span><span class="op" id="4966431">,</span>&nbsp;<span class="string" id="4966433">&#34;unfinished&nbsp;JS&nbsp;regexp&nbsp;charset:&nbsp;%q&#34;</span><span class="op" id="4966467">,</span>&nbsp;<span class="ident" id="4966469"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4966470">)</span><span class="op" id="4966471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966475">}</span><span class="op" id="4966476">,</span>&nbsp;<span class="builtinfunc" id="4966478">len</span><span class="op" id="4966481">(</span><span class="ident" id="4966482"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4966483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966486">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966490">return</span>&nbsp;<span class="ident" id="4966497"><a href="/gostd/html/template/transition.go.html#4965560">c</a></span><span class="op" id="4966498">,</span>&nbsp;<span class="builtinfunc" id="4966500">len</span><span class="op" id="4966503">(</span><span class="ident" id="4966504"><a href="/gostd/html/template/transition.go.html#4965571">s</a></span><span class="op" id="4966505">)</span><br>
<span class="lineno"></span><span class="op" id="4966507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4966510">var</span>&nbsp;<span class="ident" id="4966514">blockCommentEnd</span>&nbsp;<span class="op" id="4966530">=</span>&nbsp;<span class="op" id="4966532">[</span><span class="op" id="4966533">]</span><span class="builtintype" id="4966534">byte</span><span class="op" id="4966538">(</span><span class="string" id="4966539">&#34;*/&#34;</span><span class="op" id="4966543">)</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="comment" id="4966546">//&nbsp;tBlockCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;/*comment*/&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4966618">func</span>&nbsp;<span class="ident" id="4966623">tBlockCmt</span><span class="op" id="4966632">(</span><span class="ident" id="4966633">c</span>&nbsp;<span class="ident" id="4966635"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4966642">,</span>&nbsp;<span class="ident" id="4966644">s</span>&nbsp;<span class="op" id="4966646">[</span><span class="op" id="4966647">]</span><span class="builtintype" id="4966648">byte</span><span class="op" id="4966652">)</span>&nbsp;<span class="op" id="4966654">(</span><span class="ident" id="4966655"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4966662">,</span>&nbsp;<span class="builtintype" id="4966664">int</span><span class="op" id="4966667">)</span>&nbsp;<span class="op" id="4966669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966672">i</span>&nbsp;<span class="op" id="4966674">:=</span>&nbsp;<span class="ident" id="4966677"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4966682">.</span><span class="ident" id="4966683"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="4966688">(</span><span class="ident" id="4966689"><a href="/gostd/html/template/transition.go.html#4966644">s</a></span><span class="op" id="4966690">,</span>&nbsp;<span class="ident" id="4966692"><a href="/gostd/html/template/transition.go.html#4966514">blockCommentEnd</a></span><span class="op" id="4966707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966710">if</span>&nbsp;<span class="ident" id="4966713"><a href="/gostd/html/template/transition.go.html#4966672">i</a></span>&nbsp;<span class="op" id="4966715">==</span>&nbsp;<span class="op" id="4966718">-</span><span class="num" id="4966719">1</span>&nbsp;<span class="op" id="4966721">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966725">return</span>&nbsp;<span class="ident" id="4966732"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966733">,</span>&nbsp;<span class="builtinfunc" id="4966735">len</span><span class="op" id="4966738">(</span><span class="ident" id="4966739"><a href="/gostd/html/template/transition.go.html#4966644">s</a></span><span class="op" id="4966740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966746">switch</span>&nbsp;<span class="ident" id="4966753"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966754">.</span><span class="ident" id="4966755"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4966761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966764">case</span>&nbsp;<span class="ident" id="4966769"><a href="/gostd/html/template/context.go.html#4876114">stateJSBlockCmt</a></span><span class="op" id="4966784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966788"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966789">.</span><span class="ident" id="4966790"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4966796">=</span>&nbsp;<span class="ident" id="4966798"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966807">case</span>&nbsp;<span class="ident" id="4966812"><a href="/gostd/html/template/context.go.html#4876723">stateCSSBlockCmt</a></span><span class="op" id="4966828">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4966832"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966833">.</span><span class="ident" id="4966834"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4966840">=</span>&nbsp;<span class="ident" id="4966842"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966852">default</span><span class="op" id="4966859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4966863">panic</span><span class="op" id="4966868">(</span><span class="ident" id="4966869"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966870">.</span><span class="ident" id="4966871"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4966876">.</span><span class="ident" id="4966877"><a href="/gostd/html/template/context.go.html#4877803">String</a></span><span class="op" id="4966883">(</span><span class="op" id="4966884">)</span><span class="op" id="4966885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4966888">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4966891">return</span>&nbsp;<span class="ident" id="4966898"><a href="/gostd/html/template/transition.go.html#4966633">c</a></span><span class="op" id="4966899">,</span>&nbsp;<span class="ident" id="4966901"><a href="/gostd/html/template/transition.go.html#4966672">i</a></span>&nbsp;<span class="op" id="4966903">+</span>&nbsp;<span class="num" id="4966905">2</span><br>
<span class="lineno"></span><span class="op" id="4966907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966910">//&nbsp;tLineCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;//comment&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4966979">func</span>&nbsp;<span class="ident" id="4966984">tLineCmt</span><span class="op" id="4966992">(</span><span class="ident" id="4966993">c</span>&nbsp;<span class="ident" id="4966995"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4967002">,</span>&nbsp;<span class="ident" id="4967004">s</span>&nbsp;<span class="op" id="4967006">[</span><span class="op" id="4967007">]</span><span class="builtintype" id="4967008">byte</span><span class="op" id="4967012">)</span>&nbsp;<span class="op" id="4967014">(</span><span class="ident" id="4967015"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4967022">,</span>&nbsp;<span class="builtintype" id="4967024">int</span><span class="op" id="4967027">)</span>&nbsp;<span class="op" id="4967029">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967032">var</span>&nbsp;<span class="ident" id="4967036">lineTerminators</span>&nbsp;<span class="builtintype" id="4967052">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967060">var</span>&nbsp;<span class="ident" id="4967064">endState</span>&nbsp;<span class="ident" id="4967073"><a href="/gostd/html/template/context.go.html#4874647">state</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967080">switch</span>&nbsp;<span class="ident" id="4967087"><a href="/gostd/html/template/transition.go.html#4966993">c</a></span><span class="op" id="4967088">.</span><span class="ident" id="4967089"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4967095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967098">case</span>&nbsp;<span class="ident" id="4967103"><a href="/gostd/html/template/context.go.html#4876194">stateJSLineCmt</a></span><span class="op" id="4967117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4967121"><a href="/gostd/html/template/transition.go.html#4967036">lineTerminators</a></span><span class="op" id="4967136">,</span>&nbsp;<span class="ident" id="4967138"><a href="/gostd/html/template/transition.go.html#4967064">endState</a></span>&nbsp;<span class="op" id="4967147">=</span>&nbsp;<span class="string" id="4967149">&#34;\n\r\u2028\u2029&#34;</span><span class="op" id="4967167">,</span>&nbsp;<span class="ident" id="4967169"><a href="/gostd/html/template/context.go.html#4875801">stateJS</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967178">case</span>&nbsp;<span class="ident" id="4967183"><a href="/gostd/html/template/context.go.html#4876798">stateCSSLineCmt</a></span><span class="op" id="4967198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4967202"><a href="/gostd/html/template/transition.go.html#4967036">lineTerminators</a></span><span class="op" id="4967217">,</span>&nbsp;<span class="ident" id="4967219"><a href="/gostd/html/template/transition.go.html#4967064">endState</a></span>&nbsp;<span class="op" id="4967228">=</span>&nbsp;<span class="string" id="4967230">&#34;\n\f\r&#34;</span><span class="op" id="4967238">,</span>&nbsp;<span class="ident" id="4967240"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967251">//&nbsp;Line&nbsp;comments&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;any&nbsp;published&nbsp;CSS&nbsp;standard&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967317">//&nbsp;are&nbsp;supported&nbsp;by&nbsp;the&nbsp;4&nbsp;major&nbsp;browsers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967361">//&nbsp;This&nbsp;defines&nbsp;line&nbsp;comments&nbsp;as</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967396">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LINECOMMENT&nbsp;::=&nbsp;&#34;//&#34;&nbsp;[^\n\f\d]*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967437">//&nbsp;since&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nl&nbsp;defines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967500">//&nbsp;newlines:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967515">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nl&nbsp;::=&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#xC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967556">default</span><span class="op" id="4967563">:</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4967567">panic</span><span class="op" id="4967572">(</span><span class="ident" id="4967573"><a href="/gostd/html/template/transition.go.html#4966993">c</a></span><span class="op" id="4967574">.</span><span class="ident" id="4967575"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4967580">.</span><span class="ident" id="4967581"><a href="/gostd/html/template/context.go.html#4877803">String</a></span><span class="op" id="4967587">(</span><span class="op" id="4967588">)</span><span class="op" id="4967589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4967592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4967596">i</span>&nbsp;<span class="op" id="4967598">:=</span>&nbsp;<span class="ident" id="4967601"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4967606">.</span><span class="ident" id="4967607"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4967615">(</span><span class="ident" id="4967616"><a href="/gostd/html/template/transition.go.html#4967004">s</a></span><span class="op" id="4967617">,</span>&nbsp;<span class="ident" id="4967619"><a href="/gostd/html/template/transition.go.html#4967036">lineTerminators</a></span><span class="op" id="4967634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967637">if</span>&nbsp;<span class="ident" id="4967640"><a href="/gostd/html/template/transition.go.html#4967596">i</a></span>&nbsp;<span class="op" id="4967642">==</span>&nbsp;<span class="op" id="4967645">-</span><span class="num" id="4967646">1</span>&nbsp;<span class="op" id="4967648">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4967652">return</span>&nbsp;<span class="ident" id="4967659"><a href="/gostd/html/template/transition.go.html#4966993">c</a></span><span class="op" id="4967660">,</span>&nbsp;<span class="builtinfunc" id="4967662">len</span><span class="op" id="4967665">(</span><span class="ident" id="4967666"><a href="/gostd/html/template/transition.go.html#4967004">s</a></span><span class="op" id="4967667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4967670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4967673"><a href="/gostd/html/template/transition.go.html#4966993">c</a></span><span class="op" id="4967674">.</span><span class="ident" id="4967675"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4967681">=</span>&nbsp;<span class="ident" id="4967683"><a href="/gostd/html/template/transition.go.html#4967064">endState</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967693">//&nbsp;Per&nbsp;section&nbsp;7.4&nbsp;of&nbsp;EcmaScript&nbsp;5&nbsp;:&nbsp;http://es5.github.com/#x7.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967759">//&nbsp;&#34;However,&nbsp;the&nbsp;LineTerminator&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;not</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967822">//&nbsp;considered&nbsp;to&nbsp;be&nbsp;part&nbsp;of&nbsp;the&nbsp;single-line&nbsp;comment;&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967882">//&nbsp;recognized&nbsp;separately&nbsp;by&nbsp;the&nbsp;lexical&nbsp;grammar&nbsp;and&nbsp;becomes&nbsp;part</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4967948">//&nbsp;of&nbsp;the&nbsp;stream&nbsp;of&nbsp;input&nbsp;elements&nbsp;for&nbsp;the&nbsp;syntactic&nbsp;grammar.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4968012">return</span>&nbsp;<span class="ident" id="4968019"><a href="/gostd/html/template/transition.go.html#4966993">c</a></span><span class="op" id="4968020">,</span>&nbsp;<span class="ident" id="4968022"><a href="/gostd/html/template/transition.go.html#4967596">i</a></span><br>
<span class="lineno"></span><span class="op" id="4968024">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="4968027">//&nbsp;tCSS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4968089">func</span>&nbsp;<span class="ident" id="4968094">tCSS</span><span class="op" id="4968098">(</span><span class="ident" id="4968099">c</span>&nbsp;<span class="ident" id="4968101"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4968108">,</span>&nbsp;<span class="ident" id="4968110">s</span>&nbsp;<span class="op" id="4968112">[</span><span class="op" id="4968113">]</span><span class="builtintype" id="4968114">byte</span><span class="op" id="4968118">)</span>&nbsp;<span class="op" id="4968120">(</span><span class="ident" id="4968121"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4968128">,</span>&nbsp;<span class="builtintype" id="4968130">int</span><span class="op" id="4968133">)</span>&nbsp;<span class="op" id="4968135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968138">//&nbsp;CSS&nbsp;quoted&nbsp;strings&nbsp;are&nbsp;almost&nbsp;never&nbsp;used&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968195">//&nbsp;(1)&nbsp;URLs&nbsp;as&nbsp;in&nbsp;background:&nbsp;&#34;/foo.png&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968237">//&nbsp;(2)&nbsp;Multiword&nbsp;font-names&nbsp;as&nbsp;in&nbsp;font-family:&nbsp;&#34;Times&nbsp;New&nbsp;Roman&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968303">//&nbsp;(3)&nbsp;List&nbsp;separators&nbsp;in&nbsp;content&nbsp;values&nbsp;as&nbsp;in&nbsp;inline-lists:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968365">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968380">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;{&nbsp;list-style:&nbsp;none;&nbsp;padding:0&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968433">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li&nbsp;{&nbsp;display:&nbsp;inline&nbsp;}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968479">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:before&nbsp;{&nbsp;content:&nbsp;&#34;,&nbsp;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968530">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:first-child:before&nbsp;{&nbsp;content:&nbsp;&#34;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968591">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968607">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&nbsp;class=inlineList&gt;&lt;li&gt;One&lt;li&gt;Two&lt;li&gt;Three&lt;/ul&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968664">//&nbsp;(4)&nbsp;Attribute&nbsp;value&nbsp;selectors&nbsp;as&nbsp;in&nbsp;a[href=&#34;http://example.com/&#34;]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968734">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968738">//&nbsp;We&nbsp;conservatively&nbsp;treat&nbsp;all&nbsp;strings&nbsp;as&nbsp;URLs,&nbsp;but&nbsp;make&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968801">//&nbsp;allowances&nbsp;to&nbsp;avoid&nbsp;confusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968836">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968840">//&nbsp;In&nbsp;(1),&nbsp;our&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;justified.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968894">//&nbsp;In&nbsp;(2),&nbsp;valid&nbsp;font&nbsp;names&nbsp;do&nbsp;not&nbsp;contain&nbsp;&#39;:&#39;,&nbsp;&#39;?&#39;,&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;our</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4968963">//&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;fine&nbsp;since&nbsp;we&nbsp;will&nbsp;never&nbsp;transition&nbsp;past</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969035">//&nbsp;urlPartPreQuery.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969056">//&nbsp;In&nbsp;(3),&nbsp;our&nbsp;protocol&nbsp;heuristic&nbsp;should&nbsp;not&nbsp;be&nbsp;tripped,&nbsp;and&nbsp;there</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969124">//&nbsp;should&nbsp;not&nbsp;be&nbsp;non-space&nbsp;content&nbsp;after&nbsp;a&nbsp;&#39;?&#39;&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;as&nbsp;long&nbsp;as</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969194">//&nbsp;we&nbsp;only&nbsp;%-encode&nbsp;RFC&nbsp;3986&nbsp;reserved&nbsp;characters&nbsp;we&nbsp;are&nbsp;ok.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969255">//&nbsp;In&nbsp;(4),&nbsp;we&nbsp;should&nbsp;URL&nbsp;escape&nbsp;for&nbsp;URL&nbsp;attributes,&nbsp;and&nbsp;for&nbsp;others&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969326">//&nbsp;have&nbsp;the&nbsp;attribute&nbsp;name&nbsp;available&nbsp;if&nbsp;our&nbsp;conservative&nbsp;assumption</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969395">//&nbsp;proves&nbsp;problematic&nbsp;for&nbsp;real&nbsp;code.</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969434">k</span>&nbsp;<span class="op" id="4969436">:=</span>&nbsp;<span class="num" id="4969439">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969442">for</span>&nbsp;<span class="op" id="4969446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969450">i</span>&nbsp;<span class="op" id="4969452">:=</span>&nbsp;<span class="ident" id="4969455"><a href="/gostd/html/template/transition.go.html#4969434">k</a></span>&nbsp;<span class="op" id="4969457">+</span>&nbsp;<span class="ident" id="4969459"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4969464">.</span><span class="ident" id="4969465"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4969473">(</span><span class="ident" id="4969474"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969475">[</span><span class="ident" id="4969476"><a href="/gostd/html/template/transition.go.html#4969434">k</a></span><span class="op" id="4969477">:</span><span class="op" id="4969478">]</span><span class="op" id="4969479">,</span>&nbsp;<span class="string" id="4969481">`(&#34;&#39;/`</span><span class="op" id="4969487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969491">if</span>&nbsp;<span class="ident" id="4969494"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4969496">&lt;</span>&nbsp;<span class="ident" id="4969498"><a href="/gostd/html/template/transition.go.html#4969434">k</a></span>&nbsp;<span class="op" id="4969500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969505">return</span>&nbsp;<span class="ident" id="4969512"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4969513">,</span>&nbsp;<span class="builtinfunc" id="4969515">len</span><span class="op" id="4969518">(</span><span class="ident" id="4969519"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969520">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4969524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969528">switch</span>&nbsp;<span class="ident" id="4969535"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969536">[</span><span class="ident" id="4969537"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span><span class="op" id="4969538">]</span>&nbsp;<span class="op" id="4969540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969544">case</span>&nbsp;<span class="string" id="4969549">&#39;(&#39;</span><span class="op" id="4969552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4969557">//&nbsp;Look&nbsp;for&nbsp;url&nbsp;to&nbsp;the&nbsp;left.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969589">p</span>&nbsp;<span class="op" id="4969591">:=</span>&nbsp;<span class="ident" id="4969594"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4969599">.</span><span class="ident" id="4969600"><a href="/gostd/bytes/bytes.go.html#1411590">TrimRight</a></span><span class="op" id="4969609">(</span><span class="ident" id="4969610"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969611">[</span><span class="op" id="4969612">:</span><span class="ident" id="4969613"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span><span class="op" id="4969614">]</span><span class="op" id="4969615">,</span>&nbsp;<span class="string" id="4969617">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="4969628">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969633">if</span>&nbsp;<span class="ident" id="4969636"><a href="/gostd/html/template/css.go.html#4883004">endsWithCSSKeyword</a></span><span class="op" id="4969654">(</span><span class="ident" id="4969655"><a href="/gostd/html/template/transition.go.html#4969589">p</a></span><span class="op" id="4969656">,</span>&nbsp;<span class="string" id="4969658">&#34;url&#34;</span><span class="op" id="4969663">)</span>&nbsp;<span class="op" id="4969665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969671">j</span>&nbsp;<span class="op" id="4969673">:=</span>&nbsp;<span class="builtinfunc" id="4969676">len</span><span class="op" id="4969679">(</span><span class="ident" id="4969680"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969681">)</span>&nbsp;<span class="op" id="4969683">-</span>&nbsp;<span class="builtinfunc" id="4969685">len</span><span class="op" id="4969688">(</span><span class="ident" id="4969689"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4969694">.</span><span class="ident" id="4969695"><a href="/gostd/bytes/bytes.go.html#1411359">TrimLeft</a></span><span class="op" id="4969703">(</span><span class="ident" id="4969704"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969705">[</span><span class="ident" id="4969706"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span><span class="op" id="4969707">+</span><span class="num" id="4969708">1</span><span class="op" id="4969709">:</span><span class="op" id="4969710">]</span><span class="op" id="4969711">,</span>&nbsp;<span class="string" id="4969713">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="4969724">)</span><span class="op" id="4969725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969731">switch</span>&nbsp;<span class="op" id="4969738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969744">case</span>&nbsp;<span class="ident" id="4969749"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span>&nbsp;<span class="op" id="4969751">!=</span>&nbsp;<span class="builtinfunc" id="4969754">len</span><span class="op" id="4969757">(</span><span class="ident" id="4969758"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969759">)</span>&nbsp;<span class="op" id="4969761">&amp;&amp;</span>&nbsp;<span class="ident" id="4969764"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969765">[</span><span class="ident" id="4969766"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span><span class="op" id="4969767">]</span>&nbsp;<span class="op" id="4969769">==</span>&nbsp;<span class="string" id="4969772">&#39;&#34;&#39;</span><span class="op" id="4969775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969782"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4969783">.</span><span class="ident" id="4969784"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4969789">,</span>&nbsp;<span class="ident" id="4969791"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span>&nbsp;<span class="op" id="4969793">=</span>&nbsp;<span class="ident" id="4969795"><a href="/gostd/html/template/context.go.html#4876499">stateCSSDqURL</a></span><span class="op" id="4969808">,</span>&nbsp;<span class="ident" id="4969810"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span><span class="op" id="4969811">+</span><span class="num" id="4969812">1</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969818">case</span>&nbsp;<span class="ident" id="4969823"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span>&nbsp;<span class="op" id="4969825">!=</span>&nbsp;<span class="builtinfunc" id="4969828">len</span><span class="op" id="4969831">(</span><span class="ident" id="4969832"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969833">)</span>&nbsp;<span class="op" id="4969835">&amp;&amp;</span>&nbsp;<span class="ident" id="4969838"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969839">[</span><span class="ident" id="4969840"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span><span class="op" id="4969841">]</span>&nbsp;<span class="op" id="4969843">==</span>&nbsp;<span class="string" id="4969846">&#39;\&#39;&#39;</span><span class="op" id="4969850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969857"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4969858">.</span><span class="ident" id="4969859"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4969864">,</span>&nbsp;<span class="ident" id="4969866"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span>&nbsp;<span class="op" id="4969868">=</span>&nbsp;<span class="ident" id="4969870"><a href="/gostd/html/template/context.go.html#4876578">stateCSSSqURL</a></span><span class="op" id="4969883">,</span>&nbsp;<span class="ident" id="4969885"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span><span class="op" id="4969886">+</span><span class="num" id="4969887">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969893">default</span><span class="op" id="4969900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4969907"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4969908">.</span><span class="ident" id="4969909"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4969915">=</span>&nbsp;<span class="ident" id="4969917"><a href="/gostd/html/template/context.go.html#4876648">stateCSSURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4969933">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969939">return</span>&nbsp;<span class="ident" id="4969946"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4969947">,</span>&nbsp;<span class="ident" id="4969949"><a href="/gostd/html/template/transition.go.html#4969671">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4969954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969958">case</span>&nbsp;<span class="string" id="4969963">&#39;/&#39;</span><span class="op" id="4969966">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969971">if</span>&nbsp;<span class="ident" id="4969974"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span><span class="op" id="4969975">+</span><span class="num" id="4969976">1</span>&nbsp;<span class="op" id="4969978">&lt;</span>&nbsp;<span class="builtinfunc" id="4969980">len</span><span class="op" id="4969983">(</span><span class="ident" id="4969984"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4969985">)</span>&nbsp;<span class="op" id="4969987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4969993">switch</span>&nbsp;<span class="ident" id="4970000"><a href="/gostd/html/template/transition.go.html#4968110">s</a></span><span class="op" id="4970001">[</span><span class="ident" id="4970002"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span><span class="op" id="4970003">+</span><span class="num" id="4970004">1</span><span class="op" id="4970005">]</span>&nbsp;<span class="op" id="4970007">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970013">case</span>&nbsp;<span class="string" id="4970018">&#39;/&#39;</span><span class="op" id="4970021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970028"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970029">.</span><span class="ident" id="4970030"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4970036">=</span>&nbsp;<span class="ident" id="4970038"><a href="/gostd/html/template/context.go.html#4876798">stateCSSLineCmt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970059">return</span>&nbsp;<span class="ident" id="4970066"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970067">,</span>&nbsp;<span class="ident" id="4970069"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4970071">+</span>&nbsp;<span class="num" id="4970073">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970079">case</span>&nbsp;<span class="string" id="4970084">&#39;*&#39;</span><span class="op" id="4970087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970094"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970095">.</span><span class="ident" id="4970096"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4970102">=</span>&nbsp;<span class="ident" id="4970104"><a href="/gostd/html/template/context.go.html#4876723">stateCSSBlockCmt</a></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970126">return</span>&nbsp;<span class="ident" id="4970133"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970134">,</span>&nbsp;<span class="ident" id="4970136"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4970138">+</span>&nbsp;<span class="num" id="4970140">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970155">case</span>&nbsp;<span class="string" id="4970160">&#39;&#34;&#39;</span><span class="op" id="4970163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970168"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970169">.</span><span class="ident" id="4970170"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4970176">=</span>&nbsp;<span class="ident" id="4970178"><a href="/gostd/html/template/context.go.html#4876345">stateCSSDqStr</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970195">return</span>&nbsp;<span class="ident" id="4970202"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970203">,</span>&nbsp;<span class="ident" id="4970205"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4970207">+</span>&nbsp;<span class="num" id="4970209">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970213">case</span>&nbsp;<span class="string" id="4970218">&#39;\&#39;&#39;</span><span class="op" id="4970222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970227"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970228">.</span><span class="ident" id="4970229"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4970235">=</span>&nbsp;<span class="ident" id="4970237"><a href="/gostd/html/template/context.go.html#4876420">stateCSSSqStr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970254">return</span>&nbsp;<span class="ident" id="4970261"><a href="/gostd/html/template/transition.go.html#4968099">c</a></span><span class="op" id="4970262">,</span>&nbsp;<span class="ident" id="4970264"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4970266">+</span>&nbsp;<span class="num" id="4970268">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970272">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970276"><a href="/gostd/html/template/transition.go.html#4969434">k</a></span>&nbsp;<span class="op" id="4970278">=</span>&nbsp;<span class="ident" id="4970280"><a href="/gostd/html/template/transition.go.html#4969450">i</a></span>&nbsp;<span class="op" id="4970282">+</span>&nbsp;<span class="num" id="4970284">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970287">}</span><br>
<span class="lineno"></span><span class="op" id="4970289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4970292">//&nbsp;tCSSStr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;string&nbsp;and&nbsp;URL&nbsp;states.</span><br>
<span class="lineno">435</span><span class="keyword" id="4970373">func</span>&nbsp;<span class="ident" id="4970378">tCSSStr</span><span class="op" id="4970385">(</span><span class="ident" id="4970386">c</span>&nbsp;<span class="ident" id="4970388"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4970395">,</span>&nbsp;<span class="ident" id="4970397">s</span>&nbsp;<span class="op" id="4970399">[</span><span class="op" id="4970400">]</span><span class="builtintype" id="4970401">byte</span><span class="op" id="4970405">)</span>&nbsp;<span class="op" id="4970407">(</span><span class="ident" id="4970408"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4970415">,</span>&nbsp;<span class="builtintype" id="4970417">int</span><span class="op" id="4970420">)</span>&nbsp;<span class="op" id="4970422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970425">var</span>&nbsp;<span class="ident" id="4970429">endAndEsc</span>&nbsp;<span class="builtintype" id="4970439">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970447">switch</span>&nbsp;<span class="ident" id="4970454"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4970455">.</span><span class="ident" id="4970456"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4970462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970465">case</span>&nbsp;<span class="ident" id="4970470"><a href="/gostd/html/template/context.go.html#4876345">stateCSSDqStr</a></span><span class="op" id="4970483">,</span>&nbsp;<span class="ident" id="4970485"><a href="/gostd/html/template/context.go.html#4876499">stateCSSDqURL</a></span><span class="op" id="4970498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970502"><a href="/gostd/html/template/transition.go.html#4970429">endAndEsc</a></span>&nbsp;<span class="op" id="4970512">=</span>&nbsp;<span class="string" id="4970514">`\&#34;`</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970520">case</span>&nbsp;<span class="ident" id="4970525"><a href="/gostd/html/template/context.go.html#4876420">stateCSSSqStr</a></span><span class="op" id="4970538">,</span>&nbsp;<span class="ident" id="4970540"><a href="/gostd/html/template/context.go.html#4876578">stateCSSSqURL</a></span><span class="op" id="4970553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970557"><a href="/gostd/html/template/transition.go.html#4970429">endAndEsc</a></span>&nbsp;<span class="op" id="4970567">=</span>&nbsp;<span class="string" id="4970569">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970575">case</span>&nbsp;<span class="ident" id="4970580"><a href="/gostd/html/template/context.go.html#4876648">stateCSSURL</a></span><span class="op" id="4970591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4970595">//&nbsp;Unquoted&nbsp;URLs&nbsp;end&nbsp;with&nbsp;a&nbsp;newline&nbsp;or&nbsp;close&nbsp;parenthesis.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4970655">//&nbsp;The&nbsp;below&nbsp;includes&nbsp;the&nbsp;wc&nbsp;(whitespace&nbsp;character)&nbsp;and&nbsp;nl.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970717"><a href="/gostd/html/template/transition.go.html#4970429">endAndEsc</a></span>&nbsp;<span class="op" id="4970727">=</span>&nbsp;<span class="string" id="4970729">&#34;\\\t\n\f\r&nbsp;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970745">default</span><span class="op" id="4970752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4970756">panic</span><span class="op" id="4970761">(</span><span class="ident" id="4970762"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4970763">.</span><span class="ident" id="4970764"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4970769">.</span><span class="ident" id="4970770"><a href="/gostd/html/template/context.go.html#4877803">String</a></span><span class="op" id="4970776">(</span><span class="op" id="4970777">)</span><span class="op" id="4970778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970785">k</span>&nbsp;<span class="op" id="4970787">:=</span>&nbsp;<span class="num" id="4970790">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970793">for</span>&nbsp;<span class="op" id="4970797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970801">i</span>&nbsp;<span class="op" id="4970803">:=</span>&nbsp;<span class="ident" id="4970806"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span>&nbsp;<span class="op" id="4970808">+</span>&nbsp;<span class="ident" id="4970810"><a href="/gostd/html/template/transition.go.html#4958967">bytes</a></span><span class="op" id="4970815">.</span><span class="ident" id="4970816"><a href="/gostd/bytes/bytes.go.html#1399077">IndexAny</a></span><span class="op" id="4970824">(</span><span class="ident" id="4970825"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4970826">[</span><span class="ident" id="4970827"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span><span class="op" id="4970828">:</span><span class="op" id="4970829">]</span><span class="op" id="4970830">,</span>&nbsp;<span class="ident" id="4970832"><a href="/gostd/html/template/transition.go.html#4970429">endAndEsc</a></span><span class="op" id="4970841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970845">if</span>&nbsp;<span class="ident" id="4970848"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span>&nbsp;<span class="op" id="4970850">&lt;</span>&nbsp;<span class="ident" id="4970852"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span>&nbsp;<span class="op" id="4970854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970859">c</span><span class="op" id="4970860">,</span>&nbsp;<span class="ident" id="4970862">nread</span>&nbsp;<span class="op" id="4970868">:=</span>&nbsp;<span class="ident" id="4970871"><a href="/gostd/html/template/transition.go.html#4964147">tURL</a></span><span class="op" id="4970875">(</span><span class="ident" id="4970876"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4970877">,</span>&nbsp;<span class="ident" id="4970879"><a href="/gostd/html/template/css.go.html#4884310">decodeCSS</a></span><span class="op" id="4970888">(</span><span class="ident" id="4970889"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4970890">[</span><span class="ident" id="4970891"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span><span class="op" id="4970892">:</span><span class="op" id="4970893">]</span><span class="op" id="4970894">)</span><span class="op" id="4970895">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970900">return</span>&nbsp;<span class="ident" id="4970907"><a href="/gostd/html/template/transition.go.html#4970859">c</a></span><span class="op" id="4970908">,</span>&nbsp;<span class="ident" id="4970910"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span>&nbsp;<span class="op" id="4970912">+</span>&nbsp;<span class="ident" id="4970914"><a href="/gostd/html/template/transition.go.html#4970862">nread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4970922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970926">if</span>&nbsp;<span class="ident" id="4970929"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4970930">[</span><span class="ident" id="4970931"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span><span class="op" id="4970932">]</span>&nbsp;<span class="op" id="4970934">==</span>&nbsp;<span class="string" id="4970937">&#39;\\&#39;</span>&nbsp;<span class="op" id="4970942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970947"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span><span class="op" id="4970948">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970954">if</span>&nbsp;<span class="ident" id="4970957"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span>&nbsp;<span class="op" id="4970959">==</span>&nbsp;<span class="builtinfunc" id="4970962">len</span><span class="op" id="4970965">(</span><span class="ident" id="4970966"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4970967">)</span>&nbsp;<span class="op" id="4970969">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4970975">return</span>&nbsp;<span class="ident" id="4970982"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4970989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4970996"><a href="/gostd/html/template/context.go.html#4872966">state</a></span><span class="op" id="4971001">:</span>&nbsp;<span class="ident" id="4971003"><a href="/gostd/html/template/context.go.html#4876904">stateError</a></span><span class="op" id="4971013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4971020"><a href="/gostd/html/template/context.go.html#4873059">err</a></span><span class="op" id="4971023">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4971027"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4971033">(</span><span class="ident" id="4971034"><a href="/gostd/html/template/error.go.html#4901818">ErrPartialEscape</a></span><span class="op" id="4971050">,</span>&nbsp;<span class="builtintype" id="4971052">nil</span><span class="op" id="4971055">,</span>&nbsp;<span class="num" id="4971057">0</span><span class="op" id="4971058">,</span>&nbsp;<span class="string" id="4971060">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;CSS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="4971106">,</span>&nbsp;<span class="ident" id="4971108"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4971109">)</span><span class="op" id="4971110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4971116">}</span><span class="op" id="4971117">,</span>&nbsp;<span class="builtinfunc" id="4971119">len</span><span class="op" id="4971122">(</span><span class="ident" id="4971123"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4971124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4971129">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4971133">}</span>&nbsp;<span class="keyword" id="4971135">else</span>&nbsp;<span class="op" id="4971140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4971145"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4971146">.</span><span class="ident" id="4971147"><a href="/gostd/html/template/context.go.html#4872966">state</a></span>&nbsp;<span class="op" id="4971153">=</span>&nbsp;<span class="ident" id="4971155"><a href="/gostd/html/template/context.go.html#4876275">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971167">return</span>&nbsp;<span class="ident" id="4971174"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4971175">,</span>&nbsp;<span class="ident" id="4971177"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span>&nbsp;<span class="op" id="4971179">+</span>&nbsp;<span class="num" id="4971181">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4971185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4971189"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4971190">,</span>&nbsp;<span class="ident" id="4971192">_</span>&nbsp;<span class="op" id="4971194">=</span>&nbsp;<span class="ident" id="4971196"><a href="/gostd/html/template/transition.go.html#4964147">tURL</a></span><span class="op" id="4971200">(</span><span class="ident" id="4971201"><a href="/gostd/html/template/transition.go.html#4970386">c</a></span><span class="op" id="4971202">,</span>&nbsp;<span class="ident" id="4971204"><a href="/gostd/html/template/css.go.html#4884310">decodeCSS</a></span><span class="op" id="4971213">(</span><span class="ident" id="4971214"><a href="/gostd/html/template/transition.go.html#4970397">s</a></span><span class="op" id="4971215">[</span><span class="op" id="4971216">:</span><span class="ident" id="4971217"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span><span class="op" id="4971218">+</span><span class="num" id="4971219">1</span><span class="op" id="4971220">]</span><span class="op" id="4971221">)</span><span class="op" id="4971222">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4971226"><a href="/gostd/html/template/transition.go.html#4970785">k</a></span>&nbsp;<span class="op" id="4971228">=</span>&nbsp;<span class="ident" id="4971230"><a href="/gostd/html/template/transition.go.html#4970801">i</a></span>&nbsp;<span class="op" id="4971232">+</span>&nbsp;<span class="num" id="4971234">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4971237">}</span><br>
<span class="lineno"></span><span class="op" id="4971239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4971242">//&nbsp;tError&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">475</span><span class="keyword" id="4971308">func</span>&nbsp;<span class="ident" id="4971313">tError</span><span class="op" id="4971319">(</span><span class="ident" id="4971320">c</span>&nbsp;<span class="ident" id="4971322"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4971329">,</span>&nbsp;<span class="ident" id="4971331">s</span>&nbsp;<span class="op" id="4971333">[</span><span class="op" id="4971334">]</span><span class="builtintype" id="4971335">byte</span><span class="op" id="4971339">)</span>&nbsp;<span class="op" id="4971341">(</span><span class="ident" id="4971342"><a href="/gostd/html/template/context.go.html#4872948">context</a></span><span class="op" id="4971349">,</span>&nbsp;<span class="builtintype" id="4971351">int</span><span class="op" id="4971354">)</span>&nbsp;<span class="op" id="4971356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971359">return</span>&nbsp;<span class="ident" id="4971366"><a href="/gostd/html/template/transition.go.html#4971320">c</a></span><span class="op" id="4971367">,</span>&nbsp;<span class="builtinfunc" id="4971369">len</span><span class="op" id="4971372">(</span><span class="ident" id="4971373"><a href="/gostd/html/template/transition.go.html#4971331">s</a></span><span class="op" id="4971374">)</span><br>
<span class="lineno"></span><span class="op" id="4971376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4971379">//&nbsp;eatAttrName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;an&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno">480</span><span class="comment" id="4971455">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;s[i:]&nbsp;does&nbsp;not&nbsp;look&nbsp;like&nbsp;it&nbsp;begins&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="4971524">//&nbsp;attribute&nbsp;name,&nbsp;such&nbsp;as&nbsp;encountering&nbsp;a&nbsp;quote&nbsp;mark&nbsp;without&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="4971597">//&nbsp;equals&nbsp;sign.</span><br>
<span class="lineno"></span><span class="keyword" id="4971613">func</span>&nbsp;<span class="ident" id="4971618">eatAttrName</span><span class="op" id="4971629">(</span><span class="ident" id="4971630">s</span>&nbsp;<span class="op" id="4971632">[</span><span class="op" id="4971633">]</span><span class="builtintype" id="4971634">byte</span><span class="op" id="4971638">,</span>&nbsp;<span class="ident" id="4971640">i</span>&nbsp;<span class="builtintype" id="4971642">int</span><span class="op" id="4971645">)</span>&nbsp;<span class="op" id="4971647">(</span><span class="builtintype" id="4971648">int</span><span class="op" id="4971651">,</span>&nbsp;<span class="op" id="4971653">*</span><span class="ident" id="4971654"><a href="/gostd/html/template/error.go.html#4896326">Error</a></span><span class="op" id="4971659">)</span>&nbsp;<span class="op" id="4971661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971664">for</span>&nbsp;<span class="ident" id="4971668">j</span>&nbsp;<span class="op" id="4971670">:=</span>&nbsp;<span class="ident" id="4971673"><a href="/gostd/html/template/transition.go.html#4971640">i</a></span><span class="op" id="4971674">;</span>&nbsp;<span class="ident" id="4971676"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span>&nbsp;<span class="op" id="4971678">&lt;</span>&nbsp;<span class="builtinfunc" id="4971680">len</span><span class="op" id="4971683">(</span><span class="ident" id="4971684"><a href="/gostd/html/template/transition.go.html#4971630">s</a></span><span class="op" id="4971685">)</span><span class="op" id="4971686">;</span>&nbsp;<span class="ident" id="4971688"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span><span class="op" id="4971689">++</span>&nbsp;<span class="op" id="4971692">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971696">switch</span>&nbsp;<span class="ident" id="4971703"><a href="/gostd/html/template/transition.go.html#4971630">s</a></span><span class="op" id="4971704">[</span><span class="ident" id="4971705"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span><span class="op" id="4971706">]</span>&nbsp;<span class="op" id="4971708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971712">case</span>&nbsp;<span class="string" id="4971717">&#39;&nbsp;&#39;</span><span class="op" id="4971720">,</span>&nbsp;<span class="string" id="4971722">&#39;\t&#39;</span><span class="op" id="4971726">,</span>&nbsp;<span class="string" id="4971728">&#39;\n&#39;</span><span class="op" id="4971732">,</span>&nbsp;<span class="string" id="4971734">&#39;\f&#39;</span><span class="op" id="4971738">,</span>&nbsp;<span class="string" id="4971740">&#39;\r&#39;</span><span class="op" id="4971744">,</span>&nbsp;<span class="string" id="4971746">&#39;=&#39;</span><span class="op" id="4971749">,</span>&nbsp;<span class="string" id="4971751">&#39;&gt;&#39;</span><span class="op" id="4971754">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971759">return</span>&nbsp;<span class="ident" id="4971766"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span><span class="op" id="4971767">,</span>&nbsp;<span class="builtintype" id="4971769">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971775">case</span>&nbsp;<span class="string" id="4971780">&#39;\&#39;&#39;</span><span class="op" id="4971784">,</span>&nbsp;<span class="string" id="4971786">&#39;&#34;&#39;</span><span class="op" id="4971789">,</span>&nbsp;<span class="string" id="4971791">&#39;&lt;&#39;</span><span class="op" id="4971794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4971799">//&nbsp;These&nbsp;result&nbsp;in&nbsp;a&nbsp;parse&nbsp;warning&nbsp;in&nbsp;HTML5&nbsp;and&nbsp;are</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4971854">//&nbsp;indicative&nbsp;of&nbsp;serious&nbsp;problems&nbsp;if&nbsp;seen&nbsp;in&nbsp;an&nbsp;attr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4971910">//&nbsp;name&nbsp;in&nbsp;a&nbsp;template.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4971936">return</span>&nbsp;<span class="op" id="4971943">-</span><span class="num" id="4971944">1</span><span class="op" id="4971945">,</span>&nbsp;<span class="ident" id="4971947"><a href="/gostd/html/template/error.go.html#4903515">errorf</a></span><span class="op" id="4971953">(</span><span class="ident" id="4971954"><a href="/gostd/html/template/error.go.html#4898454">ErrBadHTML</a></span><span class="op" id="4971964">,</span>&nbsp;<span class="builtintype" id="4971966">nil</span><span class="op" id="4971969">,</span>&nbsp;<span class="num" id="4971971">0</span><span class="op" id="4971972">,</span>&nbsp;<span class="string" id="4971974">&#34;%q&nbsp;in&nbsp;attribute&nbsp;name:&nbsp;%.32q&#34;</span><span class="op" id="4972003">,</span>&nbsp;<span class="ident" id="4972005"><a href="/gostd/html/template/transition.go.html#4971630">s</a></span><span class="op" id="4972006">[</span><span class="ident" id="4972007"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span><span class="op" id="4972008">:</span><span class="ident" id="4972009"><a href="/gostd/html/template/transition.go.html#4971668">j</a></span><span class="op" id="4972010">+</span><span class="num" id="4972011">1</span><span class="op" id="4972012">]</span><span class="op" id="4972013">,</span>&nbsp;<span class="ident" id="4972015"><a href="/gostd/html/template/transition.go.html#4971630">s</a></span><span class="op" id="4972016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972020">default</span><span class="op" id="4972027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4972032">//&nbsp;No-op.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972050">return</span>&nbsp;<span class="builtinfunc" id="4972057">len</span><span class="op" id="4972060">(</span><span class="ident" id="4972061"><a href="/gostd/html/template/transition.go.html#4971630">s</a></span><span class="op" id="4972062">)</span><span class="op" id="4972063">,</span>&nbsp;<span class="builtintype" id="4972065">nil</span><br>
<span class="lineno"></span><span class="op" id="4972069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="4972072">var</span>&nbsp;<span class="ident" id="4972076">elementNameMap</span>&nbsp;<span class="op" id="4972091">=</span>&nbsp;<span class="keyword" id="4972093">map</span><span class="op" id="4972096">[</span><span class="builtintype" id="4972097">string</span><span class="op" id="4972103">]</span><span class="ident" id="4972104"><a href="/gostd/html/template/context.go.html#4881179">element</a></span><span class="op" id="4972111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4972114">&#34;script&#34;</span><span class="op" id="4972122">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4972126"><a href="/gostd/html/template/context.go.html#4881365">elementScript</a></span><span class="op" id="4972139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4972142">&#34;style&#34;</span><span class="op" id="4972149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972154"><a href="/gostd/html/template/context.go.html#4881442">elementStyle</a></span><span class="op" id="4972166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4972169">&#34;textarea&#34;</span><span class="op" id="4972179">:</span>&nbsp;<span class="ident" id="4972181"><a href="/gostd/html/template/context.go.html#4881522">elementTextarea</a></span><span class="op" id="4972196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4972199">&#34;title&#34;</span><span class="op" id="4972206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972211"><a href="/gostd/html/template/context.go.html#4881599">elementTitle</a></span><span class="op" id="4972223">,</span><br>
<span class="lineno">505</span><span class="op" id="4972225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4972228">//&nbsp;asciiAlpha&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter.</span><br>
<span class="lineno"></span><span class="keyword" id="4972280">func</span>&nbsp;<span class="ident" id="4972285">asciiAlpha</span><span class="op" id="4972295">(</span><span class="ident" id="4972296">c</span>&nbsp;<span class="builtintype" id="4972298">byte</span><span class="op" id="4972302">)</span>&nbsp;<span class="builtintype" id="4972304">bool</span>&nbsp;<span class="op" id="4972309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972312">return</span>&nbsp;<span class="string" id="4972319">&#39;A&#39;</span>&nbsp;<span class="op" id="4972323">&lt;=</span>&nbsp;<span class="ident" id="4972326"><a href="/gostd/html/template/transition.go.html#4972296">c</a></span>&nbsp;<span class="op" id="4972328">&amp;&amp;</span>&nbsp;<span class="ident" id="4972331"><a href="/gostd/html/template/transition.go.html#4972296">c</a></span>&nbsp;<span class="op" id="4972333">&lt;=</span>&nbsp;<span class="string" id="4972336">&#39;Z&#39;</span>&nbsp;<span class="op" id="4972340">||</span>&nbsp;<span class="string" id="4972343">&#39;a&#39;</span>&nbsp;<span class="op" id="4972347">&lt;=</span>&nbsp;<span class="ident" id="4972350"><a href="/gostd/html/template/transition.go.html#4972296">c</a></span>&nbsp;<span class="op" id="4972352">&amp;&amp;</span>&nbsp;<span class="ident" id="4972355"><a href="/gostd/html/template/transition.go.html#4972296">c</a></span>&nbsp;<span class="op" id="4972357">&lt;=</span>&nbsp;<span class="string" id="4972360">&#39;z&#39;</span><br>
<span class="lineno">510</span><span class="op" id="4972364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4972367">//&nbsp;asciiAlphaNum&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter&nbsp;or&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="4972431">func</span>&nbsp;<span class="ident" id="4972436">asciiAlphaNum</span><span class="op" id="4972449">(</span><span class="ident" id="4972450">c</span>&nbsp;<span class="builtintype" id="4972452">byte</span><span class="op" id="4972456">)</span>&nbsp;<span class="builtintype" id="4972458">bool</span>&nbsp;<span class="op" id="4972463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972466">return</span>&nbsp;<span class="ident" id="4972473"><a href="/gostd/html/template/transition.go.html#4972285">asciiAlpha</a></span><span class="op" id="4972483">(</span><span class="ident" id="4972484"><a href="/gostd/html/template/transition.go.html#4972450">c</a></span><span class="op" id="4972485">)</span>&nbsp;<span class="op" id="4972487">||</span>&nbsp;<span class="string" id="4972490">&#39;0&#39;</span>&nbsp;<span class="op" id="4972494">&lt;=</span>&nbsp;<span class="ident" id="4972497"><a href="/gostd/html/template/transition.go.html#4972450">c</a></span>&nbsp;<span class="op" id="4972499">&amp;&amp;</span>&nbsp;<span class="ident" id="4972502"><a href="/gostd/html/template/transition.go.html#4972450">c</a></span>&nbsp;<span class="op" id="4972504">&lt;=</span>&nbsp;<span class="string" id="4972507">&#39;9&#39;</span><br>
<span class="lineno">515</span><span class="op" id="4972511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4972514">//&nbsp;eatTagName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;a&nbsp;tag&nbsp;name&nbsp;and&nbsp;the&nbsp;tag&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4972599">func</span>&nbsp;<span class="ident" id="4972604">eatTagName</span><span class="op" id="4972614">(</span><span class="ident" id="4972615">s</span>&nbsp;<span class="op" id="4972617">[</span><span class="op" id="4972618">]</span><span class="builtintype" id="4972619">byte</span><span class="op" id="4972623">,</span>&nbsp;<span class="ident" id="4972625">i</span>&nbsp;<span class="builtintype" id="4972627">int</span><span class="op" id="4972630">)</span>&nbsp;<span class="op" id="4972632">(</span><span class="builtintype" id="4972633">int</span><span class="op" id="4972636">,</span>&nbsp;<span class="ident" id="4972638"><a href="/gostd/html/template/context.go.html#4881179">element</a></span><span class="op" id="4972645">)</span>&nbsp;<span class="op" id="4972647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972650">if</span>&nbsp;<span class="ident" id="4972653"><a href="/gostd/html/template/transition.go.html#4972625">i</a></span>&nbsp;<span class="op" id="4972655">==</span>&nbsp;<span class="builtinfunc" id="4972658">len</span><span class="op" id="4972661">(</span><span class="ident" id="4972662"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972663">)</span>&nbsp;<span class="op" id="4972665">||</span>&nbsp;<span class="op" id="4972668">!</span><span class="ident" id="4972669"><a href="/gostd/html/template/transition.go.html#4972285">asciiAlpha</a></span><span class="op" id="4972679">(</span><span class="ident" id="4972680"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972681">[</span><span class="ident" id="4972682"><a href="/gostd/html/template/transition.go.html#4972625">i</a></span><span class="op" id="4972683">]</span><span class="op" id="4972684">)</span>&nbsp;<span class="op" id="4972686">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972690">return</span>&nbsp;<span class="ident" id="4972697"><a href="/gostd/html/template/transition.go.html#4972625">i</a></span><span class="op" id="4972698">,</span>&nbsp;<span class="ident" id="4972700"><a href="/gostd/html/template/context.go.html#4881273">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972716">j</span>&nbsp;<span class="op" id="4972718">:=</span>&nbsp;<span class="ident" id="4972721"><a href="/gostd/html/template/transition.go.html#4972625">i</a></span>&nbsp;<span class="op" id="4972723">+</span>&nbsp;<span class="num" id="4972725">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972728">for</span>&nbsp;<span class="ident" id="4972732"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span>&nbsp;<span class="op" id="4972734">&lt;</span>&nbsp;<span class="builtinfunc" id="4972736">len</span><span class="op" id="4972739">(</span><span class="ident" id="4972740"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972741">)</span>&nbsp;<span class="op" id="4972743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972747">x</span>&nbsp;<span class="op" id="4972749">:=</span>&nbsp;<span class="ident" id="4972752"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972753">[</span><span class="ident" id="4972754"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4972755">]</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972759">if</span>&nbsp;<span class="ident" id="4972762"><a href="/gostd/html/template/transition.go.html#4972436">asciiAlphaNum</a></span><span class="op" id="4972775">(</span><span class="ident" id="4972776"><a href="/gostd/html/template/transition.go.html#4972747">x</a></span><span class="op" id="4972777">)</span>&nbsp;<span class="op" id="4972779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972784"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4972785">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4972806">//&nbsp;Allow&nbsp;&#34;x-y&#34;&nbsp;or&nbsp;&#34;x:y&#34;&nbsp;but&nbsp;not&nbsp;&#34;x-&#34;,&nbsp;&#34;-y&#34;,&nbsp;or&nbsp;&#34;x--y&#34;.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972863">if</span>&nbsp;<span class="op" id="4972866">(</span><span class="ident" id="4972867"><a href="/gostd/html/template/transition.go.html#4972747">x</a></span>&nbsp;<span class="op" id="4972869">==</span>&nbsp;<span class="string" id="4972872">&#39;:&#39;</span>&nbsp;<span class="op" id="4972876">||</span>&nbsp;<span class="ident" id="4972879"><a href="/gostd/html/template/transition.go.html#4972747">x</a></span>&nbsp;<span class="op" id="4972881">==</span>&nbsp;<span class="string" id="4972884">&#39;-&#39;</span><span class="op" id="4972887">)</span>&nbsp;<span class="op" id="4972889">&amp;&amp;</span>&nbsp;<span class="ident" id="4972892"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4972893">+</span><span class="num" id="4972894">1</span>&nbsp;<span class="op" id="4972896">&lt;</span>&nbsp;<span class="builtinfunc" id="4972898">len</span><span class="op" id="4972901">(</span><span class="ident" id="4972902"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972903">)</span>&nbsp;<span class="op" id="4972905">&amp;&amp;</span>&nbsp;<span class="ident" id="4972908"><a href="/gostd/html/template/transition.go.html#4972436">asciiAlphaNum</a></span><span class="op" id="4972921">(</span><span class="ident" id="4972922"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4972923">[</span><span class="ident" id="4972924"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4972925">+</span><span class="num" id="4972926">1</span><span class="op" id="4972927">]</span><span class="op" id="4972928">)</span>&nbsp;<span class="op" id="4972930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4972935"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span>&nbsp;<span class="op" id="4972937">+=</span>&nbsp;<span class="num" id="4972940">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972945">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972960">break</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4972967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4972970">return</span>&nbsp;<span class="ident" id="4972977"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4972978">,</span>&nbsp;<span class="ident" id="4972980"><a href="/gostd/html/template/transition.go.html#4972076">elementNameMap</a></span><span class="op" id="4972994">[</span><span class="ident" id="4972995"><a href="/gostd/html/template/transition.go.html#4958976">strings</a></span><span class="op" id="4973002">.</span><span class="ident" id="4973003"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4973010">(</span><span class="builtintype" id="4973011">string</span><span class="op" id="4973017">(</span><span class="ident" id="4973018"><a href="/gostd/html/template/transition.go.html#4972615">s</a></span><span class="op" id="4973019">[</span><span class="ident" id="4973020"><a href="/gostd/html/template/transition.go.html#4972625">i</a></span><span class="op" id="4973021">:</span><span class="ident" id="4973022"><a href="/gostd/html/template/transition.go.html#4972716">j</a></span><span class="op" id="4973023">]</span><span class="op" id="4973024">)</span><span class="op" id="4973025">)</span><span class="op" id="4973026">]</span><br>
<span class="lineno"></span><span class="op" id="4973028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4973031">//&nbsp;eatWhiteSpace&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;white&nbsp;space.</span><br>
<span class="lineno">540</span><span class="keyword" id="4973103">func</span>&nbsp;<span class="ident" id="4973108">eatWhiteSpace</span><span class="op" id="4973121">(</span><span class="ident" id="4973122">s</span>&nbsp;<span class="op" id="4973124">[</span><span class="op" id="4973125">]</span><span class="builtintype" id="4973126">byte</span><span class="op" id="4973130">,</span>&nbsp;<span class="ident" id="4973132">i</span>&nbsp;<span class="builtintype" id="4973134">int</span><span class="op" id="4973137">)</span>&nbsp;<span class="builtintype" id="4973139">int</span>&nbsp;<span class="op" id="4973143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973146">for</span>&nbsp;<span class="ident" id="4973150">j</span>&nbsp;<span class="op" id="4973152">:=</span>&nbsp;<span class="ident" id="4973155"><a href="/gostd/html/template/transition.go.html#4973132">i</a></span><span class="op" id="4973156">;</span>&nbsp;<span class="ident" id="4973158"><a href="/gostd/html/template/transition.go.html#4973150">j</a></span>&nbsp;<span class="op" id="4973160">&lt;</span>&nbsp;<span class="builtinfunc" id="4973162">len</span><span class="op" id="4973165">(</span><span class="ident" id="4973166"><a href="/gostd/html/template/transition.go.html#4973122">s</a></span><span class="op" id="4973167">)</span><span class="op" id="4973168">;</span>&nbsp;<span class="ident" id="4973170"><a href="/gostd/html/template/transition.go.html#4973150">j</a></span><span class="op" id="4973171">++</span>&nbsp;<span class="op" id="4973174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973178">switch</span>&nbsp;<span class="ident" id="4973185"><a href="/gostd/html/template/transition.go.html#4973122">s</a></span><span class="op" id="4973186">[</span><span class="ident" id="4973187"><a href="/gostd/html/template/transition.go.html#4973150">j</a></span><span class="op" id="4973188">]</span>&nbsp;<span class="op" id="4973190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973194">case</span>&nbsp;<span class="string" id="4973199">&#39;&nbsp;&#39;</span><span class="op" id="4973202">,</span>&nbsp;<span class="string" id="4973204">&#39;\t&#39;</span><span class="op" id="4973208">,</span>&nbsp;<span class="string" id="4973210">&#39;\n&#39;</span><span class="op" id="4973214">,</span>&nbsp;<span class="string" id="4973216">&#39;\f&#39;</span><span class="op" id="4973220">,</span>&nbsp;<span class="string" id="4973222">&#39;\r&#39;</span><span class="op" id="4973226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4973231">//&nbsp;No-op.</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973243">default</span><span class="op" id="4973250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973255">return</span>&nbsp;<span class="ident" id="4973262"><a href="/gostd/html/template/transition.go.html#4973150">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4973266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4973269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4973272">return</span>&nbsp;<span class="builtinfunc" id="4973279">len</span><span class="op" id="4973282">(</span><span class="ident" id="4973283"><a href="/gostd/html/template/transition.go.html#4973122">s</a></span><span class="op" id="4973284">)</span><br>
<span class="lineno">550</span><span class="op" id="4973286">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
