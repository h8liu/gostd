<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5436452">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5436508">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5436562">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5436613">package</span>&nbsp;<span class="ident" id="5436621">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5436628">import</span>&nbsp;<span class="op" id="5436635">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5436638">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5436645">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5436655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5436658">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5436729">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5436797">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5436863">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5436931">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5436971">type</span>&nbsp;<span class="ident" id="5436976">typeUnit</span>&nbsp;<span class="keyword" id="5436985">struct</span>&nbsp;<span class="op" id="5436992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5436995">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437001">toff</span>&nbsp;&nbsp;<span class="ident" id="5437007">Offset</span>&nbsp;<span class="comment" id="5437014">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437056">name</span>&nbsp;&nbsp;<span class="builtintype" id="5437062">string</span>&nbsp;<span class="comment" id="5437069">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437102">cache</span>&nbsp;<span class="ident" id="5437108">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5437115">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5437148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5437151">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5437184">func</span>&nbsp;<span class="op" id="5437189">(</span><span class="ident" id="5437190">d</span>&nbsp;<span class="op" id="5437192">*</span><span class="ident" id="5437193">Data</span><span class="op" id="5437197">)</span>&nbsp;<span class="ident" id="5437199">parseTypes</span><span class="op" id="5437209">(</span><span class="ident" id="5437210">name</span>&nbsp;<span class="builtintype" id="5437215">string</span><span class="op" id="5437221">,</span>&nbsp;<span class="ident" id="5437223">types</span>&nbsp;<span class="op" id="5437229">[</span><span class="op" id="5437230">]</span><span class="builtintype" id="5437231">byte</span><span class="op" id="5437235">)</span>&nbsp;<span class="builtintype" id="5437237">error</span>&nbsp;<span class="op" id="5437243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437246">b</span>&nbsp;<span class="op" id="5437248">:=</span>&nbsp;<span class="ident" id="5437251">makeBuf</span><span class="op" id="5437258">(</span><span class="ident" id="5437259">d</span><span class="op" id="5437260">,</span>&nbsp;<span class="ident" id="5437262">unknownFormat</span><span class="op" id="5437275">{</span><span class="op" id="5437276">}</span><span class="op" id="5437277">,</span>&nbsp;<span class="ident" id="5437279">name</span><span class="op" id="5437283">,</span>&nbsp;<span class="num" id="5437285">0</span><span class="op" id="5437286">,</span>&nbsp;<span class="ident" id="5437288">types</span><span class="op" id="5437293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437296">for</span>&nbsp;<span class="builtinfunc" id="5437300">len</span><span class="op" id="5437303">(</span><span class="ident" id="5437304">b</span><span class="op" id="5437305">.</span><span class="ident" id="5437306">data</span><span class="op" id="5437310">)</span>&nbsp;<span class="op" id="5437312">&gt;</span>&nbsp;<span class="num" id="5437314">0</span>&nbsp;<span class="op" id="5437316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437320">base</span>&nbsp;<span class="op" id="5437325">:=</span>&nbsp;<span class="ident" id="5437328">b</span><span class="op" id="5437329">.</span><span class="ident" id="5437330">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437336">dwarf64</span>&nbsp;<span class="op" id="5437344">:=</span>&nbsp;<span class="ident" id="5437347">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437355">n</span>&nbsp;<span class="op" id="5437357">:=</span>&nbsp;<span class="ident" id="5437360">b</span><span class="op" id="5437361">.</span><span class="builtintype" id="5437362">uint32</span><span class="op" id="5437368">(</span><span class="op" id="5437369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437373">if</span>&nbsp;<span class="ident" id="5437376">n</span>&nbsp;<span class="op" id="5437378">==</span>&nbsp;<span class="num" id="5437381">0xffffffff</span>&nbsp;<span class="op" id="5437392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437397">n64</span>&nbsp;<span class="op" id="5437401">:=</span>&nbsp;<span class="ident" id="5437404">b</span><span class="op" id="5437405">.</span><span class="ident" id="5437406">uint64</span><span class="op" id="5437412">(</span><span class="op" id="5437413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437418">if</span>&nbsp;<span class="ident" id="5437421">n64</span>&nbsp;<span class="op" id="5437425">!=</span>&nbsp;<span class="ident" id="5437428">uint64</span><span class="op" id="5437434">(</span><span class="builtintype" id="5437435">uint32</span><span class="op" id="5437441">(</span><span class="ident" id="5437442">n64</span><span class="op" id="5437445">)</span><span class="op" id="5437446">)</span>&nbsp;<span class="op" id="5437448">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437454">b</span><span class="op" id="5437455">.</span><span class="builtintype" id="5437456">error</span><span class="op" id="5437461">(</span><span class="string" id="5437462">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5437489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437495">return</span>&nbsp;<span class="ident" id="5437502">b</span><span class="op" id="5437503">.</span><span class="ident" id="5437504">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437516">n</span>&nbsp;<span class="op" id="5437518">=</span>&nbsp;<span class="builtintype" id="5437520">uint32</span><span class="op" id="5437526">(</span><span class="ident" id="5437527">n64</span><span class="op" id="5437530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437535">dwarf64</span>&nbsp;<span class="op" id="5437543">=</span>&nbsp;<span class="ident" id="5437545">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437556">hdroff</span>&nbsp;<span class="op" id="5437563">:=</span>&nbsp;<span class="ident" id="5437566">b</span><span class="op" id="5437567">.</span><span class="ident" id="5437568">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437574">vers</span>&nbsp;<span class="op" id="5437579">:=</span>&nbsp;<span class="ident" id="5437582">b</span><span class="op" id="5437583">.</span><span class="builtintype" id="5437584">uint16</span><span class="op" id="5437590">(</span><span class="op" id="5437591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437595">if</span>&nbsp;<span class="ident" id="5437598">vers</span>&nbsp;<span class="op" id="5437603">!=</span>&nbsp;<span class="num" id="5437606">4</span>&nbsp;<span class="op" id="5437608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437613">b</span><span class="op" id="5437614">.</span><span class="builtintype" id="5437615">error</span><span class="op" id="5437620">(</span><span class="string" id="5437621">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5437650">+</span>&nbsp;<span class="ident" id="5437652">strconv</span><span class="op" id="5437659">.</span><span class="ident" id="5437660">Itoa</span><span class="op" id="5437664">(</span><span class="builtintype" id="5437665">int</span><span class="op" id="5437668">(</span><span class="ident" id="5437669">vers</span><span class="op" id="5437673">)</span><span class="op" id="5437674">)</span><span class="op" id="5437675">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437680">return</span>&nbsp;<span class="ident" id="5437687">b</span><span class="op" id="5437688">.</span><span class="ident" id="5437689">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437699">var</span>&nbsp;<span class="ident" id="5437703">ao</span>&nbsp;<span class="builtintype" id="5437706">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437715">if</span>&nbsp;<span class="op" id="5437718">!</span><span class="ident" id="5437719">dwarf64</span>&nbsp;<span class="op" id="5437727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437732">ao</span>&nbsp;<span class="op" id="5437735">=</span>&nbsp;<span class="ident" id="5437737">b</span><span class="op" id="5437738">.</span><span class="builtintype" id="5437739">uint32</span><span class="op" id="5437745">(</span><span class="op" id="5437746">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437750">}</span>&nbsp;<span class="keyword" id="5437752">else</span>&nbsp;<span class="op" id="5437757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437762">ao64</span>&nbsp;<span class="op" id="5437767">:=</span>&nbsp;<span class="ident" id="5437770">b</span><span class="op" id="5437771">.</span><span class="ident" id="5437772">uint64</span><span class="op" id="5437778">(</span><span class="op" id="5437779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437784">if</span>&nbsp;<span class="ident" id="5437787">ao64</span>&nbsp;<span class="op" id="5437792">!=</span>&nbsp;<span class="ident" id="5437795">uint64</span><span class="op" id="5437801">(</span><span class="builtintype" id="5437802">uint32</span><span class="op" id="5437808">(</span><span class="ident" id="5437809">ao64</span><span class="op" id="5437813">)</span><span class="op" id="5437814">)</span>&nbsp;<span class="op" id="5437816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437822">b</span><span class="op" id="5437823">.</span><span class="builtintype" id="5437824">error</span><span class="op" id="5437829">(</span><span class="string" id="5437830">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5437864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437870">return</span>&nbsp;<span class="ident" id="5437877">b</span><span class="op" id="5437878">.</span><span class="ident" id="5437879">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437891">ao</span>&nbsp;<span class="op" id="5437894">=</span>&nbsp;<span class="builtintype" id="5437896">uint32</span><span class="op" id="5437902">(</span><span class="ident" id="5437903">ao64</span><span class="op" id="5437907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437915">atable</span><span class="op" id="5437921">,</span>&nbsp;<span class="ident" id="5437923">err</span>&nbsp;<span class="op" id="5437927">:=</span>&nbsp;<span class="ident" id="5437930">d</span><span class="op" id="5437931">.</span><span class="ident" id="5437932">parseAbbrev</span><span class="op" id="5437943">(</span><span class="ident" id="5437944">ao</span><span class="op" id="5437946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437950">if</span>&nbsp;<span class="ident" id="5437953">err</span>&nbsp;<span class="op" id="5437957">!=</span>&nbsp;<span class="ident" id="5437960">nil</span>&nbsp;<span class="op" id="5437964">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437969">return</span>&nbsp;<span class="ident" id="5437976">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437986">asize</span>&nbsp;<span class="op" id="5437992">:=</span>&nbsp;<span class="ident" id="5437995">b</span><span class="op" id="5437996">.</span><span class="builtintype" id="5437997">uint8</span><span class="op" id="5438002">(</span><span class="op" id="5438003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438007">sig</span>&nbsp;<span class="op" id="5438011">:=</span>&nbsp;<span class="ident" id="5438014">b</span><span class="op" id="5438015">.</span><span class="ident" id="5438016">uint64</span><span class="op" id="5438022">(</span><span class="op" id="5438023">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438028">var</span>&nbsp;<span class="ident" id="5438032">toff</span>&nbsp;<span class="builtintype" id="5438037">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438046">if</span>&nbsp;<span class="op" id="5438049">!</span><span class="ident" id="5438050">dwarf64</span>&nbsp;<span class="op" id="5438058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438063">toff</span>&nbsp;<span class="op" id="5438068">=</span>&nbsp;<span class="ident" id="5438070">b</span><span class="op" id="5438071">.</span><span class="builtintype" id="5438072">uint32</span><span class="op" id="5438078">(</span><span class="op" id="5438079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438083">}</span>&nbsp;<span class="keyword" id="5438085">else</span>&nbsp;<span class="op" id="5438090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438095">to64</span>&nbsp;<span class="op" id="5438100">:=</span>&nbsp;<span class="ident" id="5438103">b</span><span class="op" id="5438104">.</span><span class="ident" id="5438105">uint64</span><span class="op" id="5438111">(</span><span class="op" id="5438112">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438117">if</span>&nbsp;<span class="ident" id="5438120">to64</span>&nbsp;<span class="op" id="5438125">!=</span>&nbsp;<span class="ident" id="5438128">uint64</span><span class="op" id="5438134">(</span><span class="builtintype" id="5438135">uint32</span><span class="op" id="5438141">(</span><span class="ident" id="5438142">to64</span><span class="op" id="5438146">)</span><span class="op" id="5438147">)</span>&nbsp;<span class="op" id="5438149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438155">b</span><span class="op" id="5438156">.</span><span class="builtintype" id="5438157">error</span><span class="op" id="5438162">(</span><span class="string" id="5438163">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5438195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438201">return</span>&nbsp;<span class="ident" id="5438208">b</span><span class="op" id="5438209">.</span><span class="ident" id="5438210">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438222">toff</span>&nbsp;<span class="op" id="5438227">=</span>&nbsp;<span class="builtintype" id="5438229">uint32</span><span class="op" id="5438235">(</span><span class="ident" id="5438236">to64</span><span class="op" id="5438240">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438249">boff</span>&nbsp;<span class="op" id="5438254">:=</span>&nbsp;<span class="ident" id="5438257">b</span><span class="op" id="5438258">.</span><span class="ident" id="5438259">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438265">d</span><span class="op" id="5438266">.</span><span class="ident" id="5438267">typeSigs</span><span class="op" id="5438275">[</span><span class="ident" id="5438276">sig</span><span class="op" id="5438279">]</span>&nbsp;<span class="op" id="5438281">=</span>&nbsp;<span class="op" id="5438283">&amp;</span><span class="ident" id="5438284">typeUnit</span><span class="op" id="5438292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438297">unit</span><span class="op" id="5438301">:</span>&nbsp;<span class="ident" id="5438303">unit</span><span class="op" id="5438307">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438313">base</span><span class="op" id="5438317">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5438321">base</span><span class="op" id="5438325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438331">off</span><span class="op" id="5438334">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5438339">boff</span><span class="op" id="5438343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438349">data</span><span class="op" id="5438353">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5438357">b</span><span class="op" id="5438358">.</span><span class="ident" id="5438359">bytes</span><span class="op" id="5438364">(</span><span class="builtintype" id="5438365">int</span><span class="op" id="5438368">(</span><span class="ident" id="5438369">Offset</span><span class="op" id="5438375">(</span><span class="ident" id="5438376">n</span><span class="op" id="5438377">)</span>&nbsp;<span class="op" id="5438379">-</span>&nbsp;<span class="op" id="5438381">(</span><span class="ident" id="5438382">b</span><span class="op" id="5438383">.</span><span class="ident" id="5438384">off</span>&nbsp;<span class="op" id="5438388">-</span>&nbsp;<span class="ident" id="5438390">hdroff</span><span class="op" id="5438396">)</span><span class="op" id="5438397">)</span><span class="op" id="5438398">)</span><span class="op" id="5438399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438405">atable</span><span class="op" id="5438411">:</span>&nbsp;<span class="ident" id="5438413">atable</span><span class="op" id="5438419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438425">asize</span><span class="op" id="5438430">:</span>&nbsp;&nbsp;<span class="builtintype" id="5438433">int</span><span class="op" id="5438436">(</span><span class="ident" id="5438437">asize</span><span class="op" id="5438442">)</span><span class="op" id="5438443">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438449">vers</span><span class="op" id="5438453">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5438457">int</span><span class="op" id="5438460">(</span><span class="ident" id="5438461">vers</span><span class="op" id="5438465">)</span><span class="op" id="5438466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438472">is64</span><span class="op" id="5438476">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5438480">dwarf64</span><span class="op" id="5438487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438492">}</span><span class="op" id="5438493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438498">toff</span><span class="op" id="5438502">:</span>&nbsp;<span class="ident" id="5438504">Offset</span><span class="op" id="5438510">(</span><span class="ident" id="5438511">toff</span><span class="op" id="5438515">)</span><span class="op" id="5438516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438521">name</span><span class="op" id="5438525">:</span>&nbsp;<span class="ident" id="5438527">name</span><span class="op" id="5438531">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438539">if</span>&nbsp;<span class="ident" id="5438542">b</span><span class="op" id="5438543">.</span><span class="ident" id="5438544">err</span>&nbsp;<span class="op" id="5438548">!=</span>&nbsp;<span class="ident" id="5438551">nil</span>&nbsp;<span class="op" id="5438555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438560">return</span>&nbsp;<span class="ident" id="5438567">b</span><span class="op" id="5438568">.</span><span class="ident" id="5438569">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438578">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438581">return</span>&nbsp;<span class="ident" id="5438588">nil</span><br>
<span class="lineno"></span><span class="op" id="5438592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5438595">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5438636">func</span>&nbsp;<span class="op" id="5438641">(</span><span class="ident" id="5438642">d</span>&nbsp;<span class="op" id="5438644">*</span><span class="ident" id="5438645">Data</span><span class="op" id="5438649">)</span>&nbsp;<span class="ident" id="5438651">sigToType</span><span class="op" id="5438660">(</span><span class="ident" id="5438661">sig</span>&nbsp;<span class="ident" id="5438665">uint64</span><span class="op" id="5438671">)</span>&nbsp;<span class="op" id="5438673">(</span><span class="ident" id="5438674">Type</span><span class="op" id="5438678">,</span>&nbsp;<span class="builtintype" id="5438680">error</span><span class="op" id="5438685">)</span>&nbsp;<span class="op" id="5438687">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438690">tu</span>&nbsp;<span class="op" id="5438693">:=</span>&nbsp;<span class="ident" id="5438696">d</span><span class="op" id="5438697">.</span><span class="ident" id="5438698">typeSigs</span><span class="op" id="5438706">[</span><span class="ident" id="5438707">sig</span><span class="op" id="5438710">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438713">if</span>&nbsp;<span class="ident" id="5438716">tu</span>&nbsp;<span class="op" id="5438719">==</span>&nbsp;<span class="ident" id="5438722">nil</span>&nbsp;<span class="op" id="5438726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438730">return</span>&nbsp;<span class="ident" id="5438737">nil</span><span class="op" id="5438740">,</span>&nbsp;<span class="ident" id="5438742">fmt</span><span class="op" id="5438745">.</span><span class="ident" id="5438746">Errorf</span><span class="op" id="5438752">(</span><span class="string" id="5438753">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5438785">,</span>&nbsp;<span class="ident" id="5438787">sig</span><span class="op" id="5438790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438796">if</span>&nbsp;<span class="ident" id="5438799">tu</span><span class="op" id="5438801">.</span><span class="ident" id="5438802">cache</span>&nbsp;<span class="op" id="5438808">!=</span>&nbsp;<span class="ident" id="5438811">nil</span>&nbsp;<span class="op" id="5438815">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438819">return</span>&nbsp;<span class="ident" id="5438826">tu</span><span class="op" id="5438828">.</span><span class="ident" id="5438829">cache</span><span class="op" id="5438834">,</span>&nbsp;<span class="ident" id="5438836">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438845">b</span>&nbsp;<span class="op" id="5438847">:=</span>&nbsp;<span class="ident" id="5438850">makeBuf</span><span class="op" id="5438857">(</span><span class="ident" id="5438858">d</span><span class="op" id="5438859">,</span>&nbsp;<span class="ident" id="5438861">tu</span><span class="op" id="5438863">,</span>&nbsp;<span class="ident" id="5438865">tu</span><span class="op" id="5438867">.</span><span class="ident" id="5438868">name</span><span class="op" id="5438872">,</span>&nbsp;<span class="ident" id="5438874">tu</span><span class="op" id="5438876">.</span><span class="ident" id="5438877">off</span><span class="op" id="5438880">,</span>&nbsp;<span class="ident" id="5438882">tu</span><span class="op" id="5438884">.</span><span class="ident" id="5438885">data</span><span class="op" id="5438889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438892">r</span>&nbsp;<span class="op" id="5438894">:=</span>&nbsp;<span class="op" id="5438897">&amp;</span><span class="ident" id="5438898">typeUnitReader</span><span class="op" id="5438912">{</span><span class="ident" id="5438913">d</span><span class="op" id="5438914">:</span>&nbsp;<span class="ident" id="5438916">d</span><span class="op" id="5438917">,</span>&nbsp;<span class="ident" id="5438919">tu</span><span class="op" id="5438921">:</span>&nbsp;<span class="ident" id="5438923">tu</span><span class="op" id="5438925">,</span>&nbsp;<span class="ident" id="5438927">b</span><span class="op" id="5438928">:</span>&nbsp;<span class="ident" id="5438930">b</span><span class="op" id="5438931">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438934">t</span><span class="op" id="5438935">,</span>&nbsp;<span class="ident" id="5438937">err</span>&nbsp;<span class="op" id="5438941">:=</span>&nbsp;<span class="ident" id="5438944">d</span><span class="op" id="5438945">.</span><span class="ident" id="5438946">readType</span><span class="op" id="5438954">(</span><span class="ident" id="5438955">tu</span><span class="op" id="5438957">.</span><span class="ident" id="5438958">name</span><span class="op" id="5438962">,</span>&nbsp;<span class="ident" id="5438964">r</span><span class="op" id="5438965">,</span>&nbsp;<span class="ident" id="5438967">Offset</span><span class="op" id="5438973">(</span><span class="ident" id="5438974">tu</span><span class="op" id="5438976">.</span><span class="ident" id="5438977">toff</span><span class="op" id="5438981">)</span><span class="op" id="5438982">,</span>&nbsp;<span class="builtinfunc" id="5438984">make</span><span class="op" id="5438988">(</span><span class="keyword" id="5438989">map</span><span class="op" id="5438992">[</span><span class="ident" id="5438993">Offset</span><span class="op" id="5438999">]</span><span class="ident" id="5439000">Type</span><span class="op" id="5439004">)</span><span class="op" id="5439005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439008">if</span>&nbsp;<span class="ident" id="5439011">err</span>&nbsp;<span class="op" id="5439015">!=</span>&nbsp;<span class="ident" id="5439018">nil</span>&nbsp;<span class="op" id="5439022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439026">return</span>&nbsp;<span class="ident" id="5439033">nil</span><span class="op" id="5439036">,</span>&nbsp;<span class="ident" id="5439038">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439047">tu</span><span class="op" id="5439049">.</span><span class="ident" id="5439050">cache</span>&nbsp;<span class="op" id="5439056">=</span>&nbsp;<span class="ident" id="5439058">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439061">return</span>&nbsp;<span class="ident" id="5439068">t</span><span class="op" id="5439069">,</span>&nbsp;<span class="ident" id="5439071">nil</span><br>
<span class="lineno"></span><span class="op" id="5439075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5439078">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5439131">type</span>&nbsp;<span class="ident" id="5439136">typeUnitReader</span>&nbsp;<span class="keyword" id="5439151">struct</span>&nbsp;<span class="op" id="5439158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439161">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5439165">*</span><span class="ident" id="5439166">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439172">tu</span>&nbsp;&nbsp;<span class="op" id="5439176">*</span><span class="ident" id="5439177">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439187">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5439191">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439196">err</span>&nbsp;<span class="builtintype" id="5439200">error</span><br>
<span class="lineno">125</span><span class="op" id="5439206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5439209">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5439253">func</span>&nbsp;<span class="op" id="5439258">(</span><span class="ident" id="5439259">tur</span>&nbsp;<span class="op" id="5439263">*</span><span class="ident" id="5439264">typeUnitReader</span><span class="op" id="5439278">)</span>&nbsp;<span class="ident" id="5439280">Seek</span><span class="op" id="5439284">(</span><span class="ident" id="5439285">off</span>&nbsp;<span class="ident" id="5439289">Offset</span><span class="op" id="5439295">)</span>&nbsp;<span class="op" id="5439297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439300">tur</span><span class="op" id="5439303">.</span><span class="ident" id="5439304">err</span>&nbsp;<span class="op" id="5439308">=</span>&nbsp;<span class="ident" id="5439310">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439315">doff</span>&nbsp;<span class="op" id="5439320">:=</span>&nbsp;<span class="ident" id="5439323">off</span>&nbsp;<span class="op" id="5439327">-</span>&nbsp;<span class="ident" id="5439329">tur</span><span class="op" id="5439332">.</span><span class="ident" id="5439333">tu</span><span class="op" id="5439335">.</span><span class="ident" id="5439336">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439341">if</span>&nbsp;<span class="ident" id="5439344">doff</span>&nbsp;<span class="op" id="5439349">&lt;</span>&nbsp;<span class="num" id="5439351">0</span>&nbsp;<span class="op" id="5439353">||</span>&nbsp;<span class="ident" id="5439356">doff</span>&nbsp;<span class="op" id="5439361">&gt;=</span>&nbsp;<span class="ident" id="5439364">Offset</span><span class="op" id="5439370">(</span><span class="builtinfunc" id="5439371">len</span><span class="op" id="5439374">(</span><span class="ident" id="5439375">tur</span><span class="op" id="5439378">.</span><span class="ident" id="5439379">tu</span><span class="op" id="5439381">.</span><span class="ident" id="5439382">data</span><span class="op" id="5439386">)</span><span class="op" id="5439387">)</span>&nbsp;<span class="op" id="5439389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439393">tur</span><span class="op" id="5439396">.</span><span class="ident" id="5439397">err</span>&nbsp;<span class="op" id="5439401">=</span>&nbsp;<span class="ident" id="5439403">fmt</span><span class="op" id="5439406">.</span><span class="ident" id="5439407">Errorf</span><span class="op" id="5439413">(</span><span class="string" id="5439414">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5439450">,</span>&nbsp;<span class="ident" id="5439452">tur</span><span class="op" id="5439455">.</span><span class="ident" id="5439456">tu</span><span class="op" id="5439458">.</span><span class="ident" id="5439459">name</span><span class="op" id="5439463">,</span>&nbsp;<span class="ident" id="5439465">doff</span><span class="op" id="5439469">,</span>&nbsp;<span class="builtinfunc" id="5439471">len</span><span class="op" id="5439474">(</span><span class="ident" id="5439475">tur</span><span class="op" id="5439478">.</span><span class="ident" id="5439479">tu</span><span class="op" id="5439481">.</span><span class="ident" id="5439482">data</span><span class="op" id="5439486">)</span><span class="op" id="5439487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439491">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439499">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439502">tur</span><span class="op" id="5439505">.</span><span class="ident" id="5439506">b</span>&nbsp;<span class="op" id="5439508">=</span>&nbsp;<span class="ident" id="5439510">makeBuf</span><span class="op" id="5439517">(</span><span class="ident" id="5439518">tur</span><span class="op" id="5439521">.</span><span class="ident" id="5439522">d</span><span class="op" id="5439523">,</span>&nbsp;<span class="ident" id="5439525">tur</span><span class="op" id="5439528">.</span><span class="ident" id="5439529">tu</span><span class="op" id="5439531">,</span>&nbsp;<span class="ident" id="5439533">tur</span><span class="op" id="5439536">.</span><span class="ident" id="5439537">tu</span><span class="op" id="5439539">.</span><span class="ident" id="5439540">name</span><span class="op" id="5439544">,</span>&nbsp;<span class="ident" id="5439546">off</span><span class="op" id="5439549">,</span>&nbsp;<span class="ident" id="5439551">tur</span><span class="op" id="5439554">.</span><span class="ident" id="5439555">tu</span><span class="op" id="5439557">.</span><span class="ident" id="5439558">data</span><span class="op" id="5439562">[</span><span class="ident" id="5439563">doff</span><span class="op" id="5439567">:</span><span class="op" id="5439568">]</span><span class="op" id="5439569">)</span><br>
<span class="lineno"></span><span class="op" id="5439571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5439574">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5439623">func</span>&nbsp;<span class="op" id="5439628">(</span><span class="ident" id="5439629">tur</span>&nbsp;<span class="op" id="5439633">*</span><span class="ident" id="5439634">typeUnitReader</span><span class="op" id="5439648">)</span>&nbsp;<span class="ident" id="5439650">Next</span><span class="op" id="5439654">(</span><span class="op" id="5439655">)</span>&nbsp;<span class="op" id="5439657">(</span><span class="op" id="5439658">*</span><span class="ident" id="5439659">Entry</span><span class="op" id="5439664">,</span>&nbsp;<span class="builtintype" id="5439666">error</span><span class="op" id="5439671">)</span>&nbsp;<span class="op" id="5439673">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439676">if</span>&nbsp;<span class="ident" id="5439679">tur</span><span class="op" id="5439682">.</span><span class="ident" id="5439683">err</span>&nbsp;<span class="op" id="5439687">!=</span>&nbsp;<span class="ident" id="5439690">nil</span>&nbsp;<span class="op" id="5439694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439698">return</span>&nbsp;<span class="ident" id="5439705">nil</span><span class="op" id="5439708">,</span>&nbsp;<span class="ident" id="5439710">tur</span><span class="op" id="5439713">.</span><span class="ident" id="5439714">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439722">if</span>&nbsp;<span class="builtinfunc" id="5439725">len</span><span class="op" id="5439728">(</span><span class="ident" id="5439729">tur</span><span class="op" id="5439732">.</span><span class="ident" id="5439733">tu</span><span class="op" id="5439735">.</span><span class="ident" id="5439736">data</span><span class="op" id="5439740">)</span>&nbsp;<span class="op" id="5439742">==</span>&nbsp;<span class="num" id="5439745">0</span>&nbsp;<span class="op" id="5439747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439751">return</span>&nbsp;<span class="ident" id="5439758">nil</span><span class="op" id="5439761">,</span>&nbsp;<span class="ident" id="5439763">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439771">e</span>&nbsp;<span class="op" id="5439773">:=</span>&nbsp;<span class="ident" id="5439776">tur</span><span class="op" id="5439779">.</span><span class="ident" id="5439780">b</span><span class="op" id="5439781">.</span><span class="ident" id="5439782">entry</span><span class="op" id="5439787">(</span><span class="ident" id="5439788">tur</span><span class="op" id="5439791">.</span><span class="ident" id="5439792">tu</span><span class="op" id="5439794">.</span><span class="ident" id="5439795">atable</span><span class="op" id="5439801">,</span>&nbsp;<span class="ident" id="5439803">tur</span><span class="op" id="5439806">.</span><span class="ident" id="5439807">tu</span><span class="op" id="5439809">.</span><span class="ident" id="5439810">base</span><span class="op" id="5439814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439817">if</span>&nbsp;<span class="ident" id="5439820">tur</span><span class="op" id="5439823">.</span><span class="ident" id="5439824">b</span><span class="op" id="5439825">.</span><span class="ident" id="5439826">err</span>&nbsp;<span class="op" id="5439830">!=</span>&nbsp;<span class="ident" id="5439833">nil</span>&nbsp;<span class="op" id="5439837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439841">tur</span><span class="op" id="5439844">.</span><span class="ident" id="5439845">err</span>&nbsp;<span class="op" id="5439849">=</span>&nbsp;<span class="ident" id="5439851">tur</span><span class="op" id="5439854">.</span><span class="ident" id="5439855">b</span><span class="op" id="5439856">.</span><span class="ident" id="5439857">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439863">return</span>&nbsp;<span class="ident" id="5439870">nil</span><span class="op" id="5439873">,</span>&nbsp;<span class="ident" id="5439875">tur</span><span class="op" id="5439878">.</span><span class="ident" id="5439879">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439887">return</span>&nbsp;<span class="ident" id="5439894">e</span><span class="op" id="5439895">,</span>&nbsp;<span class="ident" id="5439897">nil</span><br>
<span class="lineno"></span><span class="op" id="5439901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5439904">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5439953">func</span>&nbsp;<span class="op" id="5439958">(</span><span class="ident" id="5439959">tur</span>&nbsp;<span class="op" id="5439963">*</span><span class="ident" id="5439964">typeUnitReader</span><span class="op" id="5439978">)</span>&nbsp;<span class="ident" id="5439980">clone</span><span class="op" id="5439985">(</span><span class="op" id="5439986">)</span>&nbsp;<span class="ident" id="5439988">typeReader</span>&nbsp;<span class="op" id="5439999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440002">return</span>&nbsp;<span class="op" id="5440009">&amp;</span><span class="ident" id="5440010">typeUnitReader</span><span class="op" id="5440024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440028">d</span><span class="op" id="5440029">:</span>&nbsp;&nbsp;<span class="ident" id="5440032">tur</span><span class="op" id="5440035">.</span><span class="ident" id="5440036">d</span><span class="op" id="5440037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440041">tu</span><span class="op" id="5440043">:</span>&nbsp;<span class="ident" id="5440045">tur</span><span class="op" id="5440048">.</span><span class="ident" id="5440049">tu</span><span class="op" id="5440051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440055">b</span><span class="op" id="5440056">:</span>&nbsp;&nbsp;<span class="ident" id="5440059">makeBuf</span><span class="op" id="5440066">(</span><span class="ident" id="5440067">tur</span><span class="op" id="5440070">.</span><span class="ident" id="5440071">d</span><span class="op" id="5440072">,</span>&nbsp;<span class="ident" id="5440074">tur</span><span class="op" id="5440077">.</span><span class="ident" id="5440078">tu</span><span class="op" id="5440080">,</span>&nbsp;<span class="ident" id="5440082">tur</span><span class="op" id="5440085">.</span><span class="ident" id="5440086">tu</span><span class="op" id="5440088">.</span><span class="ident" id="5440089">name</span><span class="op" id="5440093">,</span>&nbsp;<span class="ident" id="5440095">tur</span><span class="op" id="5440098">.</span><span class="ident" id="5440099">tu</span><span class="op" id="5440101">.</span><span class="ident" id="5440102">off</span><span class="op" id="5440105">,</span>&nbsp;<span class="ident" id="5440107">tur</span><span class="op" id="5440110">.</span><span class="ident" id="5440111">tu</span><span class="op" id="5440113">.</span><span class="ident" id="5440114">data</span><span class="op" id="5440118">)</span><span class="op" id="5440119">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5440122">}</span><br>
<span class="lineno"></span><span class="op" id="5440124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5440127">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5440165">func</span>&nbsp;<span class="op" id="5440170">(</span><span class="ident" id="5440171">tur</span>&nbsp;<span class="op" id="5440175">*</span><span class="ident" id="5440176">typeUnitReader</span><span class="op" id="5440190">)</span>&nbsp;<span class="ident" id="5440192">offset</span><span class="op" id="5440198">(</span><span class="op" id="5440199">)</span>&nbsp;<span class="ident" id="5440201">Offset</span>&nbsp;<span class="op" id="5440208">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440211">return</span>&nbsp;<span class="ident" id="5440218">tur</span><span class="op" id="5440221">.</span><span class="ident" id="5440222">b</span><span class="op" id="5440223">.</span><span class="ident" id="5440224">off</span><br>
<span class="lineno"></span><span class="op" id="5440228">}</span>
</div>
</body>
</html>
