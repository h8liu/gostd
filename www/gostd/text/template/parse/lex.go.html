<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html" class="current">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4398607">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4398662">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4398716">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4398767">package</span>&nbsp;<span class="ident" id="4398775">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4398782">import</span>&nbsp;<span class="op" id="4398789">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4398792">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4398799">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4398810">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4398821">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4398836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4398839">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="4398908">type</span>&nbsp;<span class="ident" id="4398913">item</span>&nbsp;<span class="keyword" id="4398918">struct</span>&nbsp;<span class="op" id="4398925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4398928">typ</span>&nbsp;<span class="ident" id="4398932">itemType</span>&nbsp;<span class="comment" id="4398941">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4398968">pos</span>&nbsp;<span class="ident" id="4398972">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4398981">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399052">val</span>&nbsp;<span class="builtintype" id="4399056">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4399065">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="4399092">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4399095">func</span>&nbsp;<span class="op" id="4399100">(</span><span class="ident" id="4399101">i</span>&nbsp;<span class="ident" id="4399103">item</span><span class="op" id="4399107">)</span>&nbsp;<span class="ident" id="4399109">String</span><span class="op" id="4399115">(</span><span class="op" id="4399116">)</span>&nbsp;<span class="builtintype" id="4399118">string</span>&nbsp;<span class="op" id="4399125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399128">switch</span>&nbsp;<span class="op" id="4399135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399138">case</span>&nbsp;<span class="ident" id="4399143">i</span><span class="op" id="4399144">.</span><span class="ident" id="4399145">typ</span>&nbsp;<span class="op" id="4399149">==</span>&nbsp;<span class="ident" id="4399152">itemEOF</span><span class="op" id="4399159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399163">return</span>&nbsp;<span class="string" id="4399170">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399177">case</span>&nbsp;<span class="ident" id="4399182">i</span><span class="op" id="4399183">.</span><span class="ident" id="4399184">typ</span>&nbsp;<span class="op" id="4399188">==</span>&nbsp;<span class="ident" id="4399191">itemError</span><span class="op" id="4399200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399204">return</span>&nbsp;<span class="ident" id="4399211">i</span><span class="op" id="4399212">.</span><span class="ident" id="4399213">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399218">case</span>&nbsp;<span class="ident" id="4399223">i</span><span class="op" id="4399224">.</span><span class="ident" id="4399225">typ</span>&nbsp;<span class="op" id="4399229">&gt;</span>&nbsp;<span class="ident" id="4399231">itemKeyword</span><span class="op" id="4399242">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399246">return</span>&nbsp;<span class="ident" id="4399253">fmt</span><span class="op" id="4399256">.</span><span class="ident" id="4399257">Sprintf</span><span class="op" id="4399264">(</span><span class="string" id="4399265">&#34;&lt;%s&gt;&#34;</span><span class="op" id="4399271">,</span>&nbsp;<span class="ident" id="4399273">i</span><span class="op" id="4399274">.</span><span class="ident" id="4399275">val</span><span class="op" id="4399278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399281">case</span>&nbsp;<span class="builtinfunc" id="4399286">len</span><span class="op" id="4399289">(</span><span class="ident" id="4399290">i</span><span class="op" id="4399291">.</span><span class="ident" id="4399292">val</span><span class="op" id="4399295">)</span>&nbsp;<span class="op" id="4399297">&gt;</span>&nbsp;<span class="num" id="4399299">10</span><span class="op" id="4399301">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399305">return</span>&nbsp;<span class="ident" id="4399312">fmt</span><span class="op" id="4399315">.</span><span class="ident" id="4399316">Sprintf</span><span class="op" id="4399323">(</span><span class="string" id="4399324">&#34;%.10q...&#34;</span><span class="op" id="4399334">,</span>&nbsp;<span class="ident" id="4399336">i</span><span class="op" id="4399337">.</span><span class="ident" id="4399338">val</span><span class="op" id="4399341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4399344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4399347">return</span>&nbsp;<span class="ident" id="4399354">fmt</span><span class="op" id="4399357">.</span><span class="ident" id="4399358">Sprintf</span><span class="op" id="4399365">(</span><span class="string" id="4399366">&#34;%q&#34;</span><span class="op" id="4399370">,</span>&nbsp;<span class="ident" id="4399372">i</span><span class="op" id="4399373">.</span><span class="ident" id="4399374">val</span><span class="op" id="4399377">)</span><br>
<span class="lineno"></span><span class="op" id="4399379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4399382">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="4399428">type</span>&nbsp;<span class="ident" id="4399433">itemType</span>&nbsp;<span class="builtintype" id="4399442">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4399447">const</span>&nbsp;<span class="op" id="4399453">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399456">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399473">itemType</span>&nbsp;<span class="op" id="4399482">=</span>&nbsp;<span class="ident" id="4399484">iota</span>&nbsp;<span class="comment" id="4399489">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399532">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399565">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399586">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399619">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399674">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399707">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399730">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399763">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399819">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399852">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399902">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399911">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4399926">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4399972">itemIdentifier</span>&nbsp;<span class="comment" id="4399987">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400037">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="4400052">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400078">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="4400093">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400115">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400130">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400169">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400184">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400200">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="4400215">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400255">itemRightDelim</span>&nbsp;<span class="comment" id="4400270">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400297">itemRightParen</span>&nbsp;<span class="comment" id="4400312">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400334">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400349">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400388">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400403">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400439">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400454">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400469">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4400484">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400549">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400589">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="4400602">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400640">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400653">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400681">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4400694">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400713">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400726">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400743">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400756">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400772">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400785">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400800">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400813">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400873">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400886">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400904">itemTemplate</span>&nbsp;<span class="comment" id="4400917">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4400938">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4400951">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="4400967">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4400970">var</span>&nbsp;<span class="ident" id="4400974">key</span>&nbsp;<span class="op" id="4400978">=</span>&nbsp;<span class="keyword" id="4400980">map</span><span class="op" id="4400983">[</span><span class="builtintype" id="4400984">string</span><span class="op" id="4400990">]</span><span class="ident" id="4400991">itemType</span><span class="op" id="4400999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401002">&#34;.&#34;</span><span class="op" id="4401005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401014">itemDot</span><span class="op" id="4401021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401024">&#34;define&#34;</span><span class="op" id="4401032">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4401036">itemDefine</span><span class="op" id="4401046">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401049">&#34;else&#34;</span><span class="op" id="4401055">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401061">itemElse</span><span class="op" id="4401069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401072">&#34;end&#34;</span><span class="op" id="4401077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401084">itemEnd</span><span class="op" id="4401091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401094">&#34;if&#34;</span><span class="op" id="4401098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401106">itemIf</span><span class="op" id="4401112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401115">&#34;range&#34;</span><span class="op" id="4401122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401127">itemRange</span><span class="op" id="4401136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401139">&#34;nil&#34;</span><span class="op" id="4401144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401151">itemNil</span><span class="op" id="4401158">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401161">&#34;template&#34;</span><span class="op" id="4401171">:</span>&nbsp;<span class="ident" id="4401173">itemTemplate</span><span class="op" id="4401185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4401188">&#34;with&#34;</span><span class="op" id="4401194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401200">itemWith</span><span class="op" id="4401208">,</span><br>
<span class="lineno"></span><span class="op" id="4401210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4401213">const</span>&nbsp;<span class="ident" id="4401219">eof</span>&nbsp;<span class="op" id="4401223">=</span>&nbsp;<span class="op" id="4401225">-</span><span class="num" id="4401226">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4401229">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4401319">type</span>&nbsp;<span class="ident" id="4401324">stateFn</span>&nbsp;<span class="keyword" id="4401332">func</span><span class="op" id="4401336">(</span><span class="op" id="4401337">*</span><span class="ident" id="4401338">lexer</span><span class="op" id="4401343">)</span>&nbsp;<span class="ident" id="4401345">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4401354">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="4401395">type</span>&nbsp;<span class="ident" id="4401400">lexer</span>&nbsp;<span class="keyword" id="4401406">struct</span>&nbsp;<span class="op" id="4401413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401416">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4401427">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401437">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401492">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4401503">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401513">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401542">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="4401553">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401563">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401583">rightDelim</span>&nbsp;<span class="builtintype" id="4401594">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401604">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401622">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401633">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4401643">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401681">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401692">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401702">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401736">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401747">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401757">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401789">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401800">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401810">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401849">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401860">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401870">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401924">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4401935">chan</span>&nbsp;<span class="ident" id="4401940">item</span>&nbsp;<span class="comment" id="4401945">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4401974">parenDepth</span>&nbsp;<span class="builtintype" id="4401985">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4401995">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="4402025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402028">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="4402072">func</span>&nbsp;<span class="op" id="4402077">(</span><span class="ident" id="4402078">l</span>&nbsp;<span class="op" id="4402080">*</span><span class="ident" id="4402081">lexer</span><span class="op" id="4402086">)</span>&nbsp;<span class="ident" id="4402088">next</span><span class="op" id="4402092">(</span><span class="op" id="4402093">)</span>&nbsp;<span class="builtintype" id="4402095">rune</span>&nbsp;<span class="op" id="4402100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402103">if</span>&nbsp;<span class="builtintype" id="4402106">int</span><span class="op" id="4402109">(</span><span class="ident" id="4402110">l</span><span class="op" id="4402111">.</span><span class="ident" id="4402112">pos</span><span class="op" id="4402115">)</span>&nbsp;<span class="op" id="4402117">&gt;=</span>&nbsp;<span class="builtinfunc" id="4402120">len</span><span class="op" id="4402123">(</span><span class="ident" id="4402124">l</span><span class="op" id="4402125">.</span><span class="ident" id="4402126">input</span><span class="op" id="4402131">)</span>&nbsp;<span class="op" id="4402133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402137">l</span><span class="op" id="4402138">.</span><span class="ident" id="4402139">width</span>&nbsp;<span class="op" id="4402145">=</span>&nbsp;<span class="num" id="4402147">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402151">return</span>&nbsp;<span class="ident" id="4402158">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4402163">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402166">r</span><span class="op" id="4402167">,</span>&nbsp;<span class="ident" id="4402169">w</span>&nbsp;<span class="op" id="4402171">:=</span>&nbsp;<span class="ident" id="4402174">utf8</span><span class="op" id="4402178">.</span><span class="ident" id="4402179">DecodeRuneInString</span><span class="op" id="4402197">(</span><span class="ident" id="4402198">l</span><span class="op" id="4402199">.</span><span class="ident" id="4402200">input</span><span class="op" id="4402205">[</span><span class="ident" id="4402206">l</span><span class="op" id="4402207">.</span><span class="ident" id="4402208">pos</span><span class="op" id="4402211">:</span><span class="op" id="4402212">]</span><span class="op" id="4402213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402216">l</span><span class="op" id="4402217">.</span><span class="ident" id="4402218">width</span>&nbsp;<span class="op" id="4402224">=</span>&nbsp;<span class="ident" id="4402226">Pos</span><span class="op" id="4402229">(</span><span class="ident" id="4402230">w</span><span class="op" id="4402231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402234">l</span><span class="op" id="4402235">.</span><span class="ident" id="4402236">pos</span>&nbsp;<span class="op" id="4402240">+=</span>&nbsp;<span class="ident" id="4402243">l</span><span class="op" id="4402244">.</span><span class="ident" id="4402245">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402252">return</span>&nbsp;<span class="ident" id="4402259">r</span><br>
<span class="lineno"></span><span class="op" id="4402261">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4402264">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4402329">func</span>&nbsp;<span class="op" id="4402334">(</span><span class="ident" id="4402335">l</span>&nbsp;<span class="op" id="4402337">*</span><span class="ident" id="4402338">lexer</span><span class="op" id="4402343">)</span>&nbsp;<span class="ident" id="4402345">peek</span><span class="op" id="4402349">(</span><span class="op" id="4402350">)</span>&nbsp;<span class="builtintype" id="4402352">rune</span>&nbsp;<span class="op" id="4402357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402360">r</span>&nbsp;<span class="op" id="4402362">:=</span>&nbsp;<span class="ident" id="4402365">l</span><span class="op" id="4402366">.</span><span class="ident" id="4402367">next</span><span class="op" id="4402371">(</span><span class="op" id="4402372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402375">l</span><span class="op" id="4402376">.</span><span class="ident" id="4402377">backup</span><span class="op" id="4402383">(</span><span class="op" id="4402384">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402387">return</span>&nbsp;<span class="ident" id="4402394">r</span><br>
<span class="lineno"></span><span class="op" id="4402396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402399">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4402472">func</span>&nbsp;<span class="op" id="4402477">(</span><span class="ident" id="4402478">l</span>&nbsp;<span class="op" id="4402480">*</span><span class="ident" id="4402481">lexer</span><span class="op" id="4402486">)</span>&nbsp;<span class="ident" id="4402488">backup</span><span class="op" id="4402494">(</span><span class="op" id="4402495">)</span>&nbsp;<span class="op" id="4402497">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402500">l</span><span class="op" id="4402501">.</span><span class="ident" id="4402502">pos</span>&nbsp;<span class="op" id="4402506">-=</span>&nbsp;<span class="ident" id="4402509">l</span><span class="op" id="4402510">.</span><span class="ident" id="4402511">width</span><br>
<span class="lineno"></span><span class="op" id="4402517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402520">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="4402563">func</span>&nbsp;<span class="op" id="4402568">(</span><span class="ident" id="4402569">l</span>&nbsp;<span class="op" id="4402571">*</span><span class="ident" id="4402572">lexer</span><span class="op" id="4402577">)</span>&nbsp;<span class="ident" id="4402579">emit</span><span class="op" id="4402583">(</span><span class="ident" id="4402584">t</span>&nbsp;<span class="ident" id="4402586">itemType</span><span class="op" id="4402594">)</span>&nbsp;<span class="op" id="4402596">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402599">l</span><span class="op" id="4402600">.</span><span class="ident" id="4402601">items</span>&nbsp;<span class="op" id="4402607">&lt;-</span>&nbsp;<span class="ident" id="4402610">item</span><span class="op" id="4402614">{</span><span class="ident" id="4402615">t</span><span class="op" id="4402616">,</span>&nbsp;<span class="ident" id="4402618">l</span><span class="op" id="4402619">.</span><span class="ident" id="4402620">start</span><span class="op" id="4402625">,</span>&nbsp;<span class="ident" id="4402627">l</span><span class="op" id="4402628">.</span><span class="ident" id="4402629">input</span><span class="op" id="4402634">[</span><span class="ident" id="4402635">l</span><span class="op" id="4402636">.</span><span class="ident" id="4402637">start</span><span class="op" id="4402642">:</span><span class="ident" id="4402643">l</span><span class="op" id="4402644">.</span><span class="ident" id="4402645">pos</span><span class="op" id="4402648">]</span><span class="op" id="4402649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402652">l</span><span class="op" id="4402653">.</span><span class="ident" id="4402654">start</span>&nbsp;<span class="op" id="4402660">=</span>&nbsp;<span class="ident" id="4402662">l</span><span class="op" id="4402663">.</span><span class="ident" id="4402664">pos</span><br>
<span class="lineno"></span><span class="op" id="4402668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402671">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="4402729">func</span>&nbsp;<span class="op" id="4402734">(</span><span class="ident" id="4402735">l</span>&nbsp;<span class="op" id="4402737">*</span><span class="ident" id="4402738">lexer</span><span class="op" id="4402743">)</span>&nbsp;<span class="ident" id="4402745">ignore</span><span class="op" id="4402751">(</span><span class="op" id="4402752">)</span>&nbsp;<span class="op" id="4402754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402757">l</span><span class="op" id="4402758">.</span><span class="ident" id="4402759">start</span>&nbsp;<span class="op" id="4402765">=</span>&nbsp;<span class="ident" id="4402767">l</span><span class="op" id="4402768">.</span><span class="ident" id="4402769">pos</span><br>
<span class="lineno"></span><span class="op" id="4402773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402776">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="4402837">func</span>&nbsp;<span class="op" id="4402842">(</span><span class="ident" id="4402843">l</span>&nbsp;<span class="op" id="4402845">*</span><span class="ident" id="4402846">lexer</span><span class="op" id="4402851">)</span>&nbsp;<span class="ident" id="4402853">accept</span><span class="op" id="4402859">(</span><span class="ident" id="4402860">valid</span>&nbsp;<span class="builtintype" id="4402866">string</span><span class="op" id="4402872">)</span>&nbsp;<span class="builtintype" id="4402874">bool</span>&nbsp;<span class="op" id="4402879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402882">if</span>&nbsp;<span class="ident" id="4402885">strings</span><span class="op" id="4402892">.</span><span class="ident" id="4402893">IndexRune</span><span class="op" id="4402902">(</span><span class="ident" id="4402903">valid</span><span class="op" id="4402908">,</span>&nbsp;<span class="ident" id="4402910">l</span><span class="op" id="4402911">.</span><span class="ident" id="4402912">next</span><span class="op" id="4402916">(</span><span class="op" id="4402917">)</span><span class="op" id="4402918">)</span>&nbsp;<span class="op" id="4402920">&gt;=</span>&nbsp;<span class="num" id="4402923">0</span>&nbsp;<span class="op" id="4402925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402929">return</span>&nbsp;<span class="builtintype" id="4402936">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4402942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4402945">l</span><span class="op" id="4402946">.</span><span class="ident" id="4402947">backup</span><span class="op" id="4402953">(</span><span class="op" id="4402954">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4402957">return</span>&nbsp;<span class="builtintype" id="4402964">false</span><br>
<span class="lineno"></span><span class="op" id="4402970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402973">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="4403030">func</span>&nbsp;<span class="op" id="4403035">(</span><span class="ident" id="4403036">l</span>&nbsp;<span class="op" id="4403038">*</span><span class="ident" id="4403039">lexer</span><span class="op" id="4403044">)</span>&nbsp;<span class="ident" id="4403046">acceptRun</span><span class="op" id="4403055">(</span><span class="ident" id="4403056">valid</span>&nbsp;<span class="builtintype" id="4403062">string</span><span class="op" id="4403068">)</span>&nbsp;<span class="op" id="4403070">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403073">for</span>&nbsp;<span class="ident" id="4403077">strings</span><span class="op" id="4403084">.</span><span class="ident" id="4403085">IndexRune</span><span class="op" id="4403094">(</span><span class="ident" id="4403095">valid</span><span class="op" id="4403100">,</span>&nbsp;<span class="ident" id="4403102">l</span><span class="op" id="4403103">.</span><span class="ident" id="4403104">next</span><span class="op" id="4403108">(</span><span class="op" id="4403109">)</span><span class="op" id="4403110">)</span>&nbsp;<span class="op" id="4403112">&gt;=</span>&nbsp;<span class="num" id="4403115">0</span>&nbsp;<span class="op" id="4403117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4403120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4403123">l</span><span class="op" id="4403124">.</span><span class="ident" id="4403125">backup</span><span class="op" id="4403131">(</span><span class="op" id="4403132">)</span><br>
<span class="lineno"></span><span class="op" id="4403134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4403137">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4403205">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="4403266">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="4403326">func</span>&nbsp;<span class="op" id="4403331">(</span><span class="ident" id="4403332">l</span>&nbsp;<span class="op" id="4403334">*</span><span class="ident" id="4403335">lexer</span><span class="op" id="4403340">)</span>&nbsp;<span class="ident" id="4403342">lineNumber</span><span class="op" id="4403352">(</span><span class="op" id="4403353">)</span>&nbsp;<span class="builtintype" id="4403355">int</span>&nbsp;<span class="op" id="4403359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403362">return</span>&nbsp;<span class="num" id="4403369">1</span>&nbsp;<span class="op" id="4403371">+</span>&nbsp;<span class="ident" id="4403373">strings</span><span class="op" id="4403380">.</span><span class="ident" id="4403381">Count</span><span class="op" id="4403386">(</span><span class="ident" id="4403387">l</span><span class="op" id="4403388">.</span><span class="ident" id="4403389">input</span><span class="op" id="4403394">[</span><span class="op" id="4403395">:</span><span class="ident" id="4403396">l</span><span class="op" id="4403397">.</span><span class="ident" id="4403398">lastPos</span><span class="op" id="4403405">]</span><span class="op" id="4403406">,</span>&nbsp;<span class="string" id="4403408">&#34;\n&#34;</span><span class="op" id="4403412">)</span><br>
<span class="lineno">160</span><span class="op" id="4403414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4403417">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="4403485">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="4403560">func</span>&nbsp;<span class="op" id="4403565">(</span><span class="ident" id="4403566">l</span>&nbsp;<span class="op" id="4403568">*</span><span class="ident" id="4403569">lexer</span><span class="op" id="4403574">)</span>&nbsp;<span class="ident" id="4403576">errorf</span><span class="op" id="4403582">(</span><span class="ident" id="4403583">format</span>&nbsp;<span class="builtintype" id="4403590">string</span><span class="op" id="4403596">,</span>&nbsp;<span class="ident" id="4403598">args</span>&nbsp;<span class="op" id="4403603">...</span><span class="keyword" id="4403606">interface</span><span class="op" id="4403615">{</span><span class="op" id="4403616">}</span><span class="op" id="4403617">)</span>&nbsp;<span class="ident" id="4403619">stateFn</span>&nbsp;<span class="op" id="4403627">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4403630">l</span><span class="op" id="4403631">.</span><span class="ident" id="4403632">items</span>&nbsp;<span class="op" id="4403638">&lt;-</span>&nbsp;<span class="ident" id="4403641">item</span><span class="op" id="4403645">{</span><span class="ident" id="4403646">itemError</span><span class="op" id="4403655">,</span>&nbsp;<span class="ident" id="4403657">l</span><span class="op" id="4403658">.</span><span class="ident" id="4403659">start</span><span class="op" id="4403664">,</span>&nbsp;<span class="ident" id="4403666">fmt</span><span class="op" id="4403669">.</span><span class="ident" id="4403670">Sprintf</span><span class="op" id="4403677">(</span><span class="ident" id="4403678">format</span><span class="op" id="4403684">,</span>&nbsp;<span class="ident" id="4403686">args</span><span class="op" id="4403690">...</span><span class="op" id="4403693">)</span><span class="op" id="4403694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403697">return</span>&nbsp;<span class="builtintype" id="4403704">nil</span><br>
<span class="lineno"></span><span class="op" id="4403708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4403711">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="4403761">func</span>&nbsp;<span class="op" id="4403766">(</span><span class="ident" id="4403767">l</span>&nbsp;<span class="op" id="4403769">*</span><span class="ident" id="4403770">lexer</span><span class="op" id="4403775">)</span>&nbsp;<span class="ident" id="4403777">nextItem</span><span class="op" id="4403785">(</span><span class="op" id="4403786">)</span>&nbsp;<span class="ident" id="4403788">item</span>&nbsp;<span class="op" id="4403793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4403796">item</span>&nbsp;<span class="op" id="4403801">:=</span>&nbsp;<span class="op" id="4403804">&lt;-</span><span class="ident" id="4403806">l</span><span class="op" id="4403807">.</span><span class="ident" id="4403808">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4403815">l</span><span class="op" id="4403816">.</span><span class="ident" id="4403817">lastPos</span>&nbsp;<span class="op" id="4403825">=</span>&nbsp;<span class="ident" id="4403827">item</span><span class="op" id="4403831">.</span><span class="ident" id="4403832">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403837">return</span>&nbsp;<span class="ident" id="4403844">item</span><br>
<span class="lineno"></span><span class="op" id="4403849">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4403852">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4403903">func</span>&nbsp;<span class="ident" id="4403908">lex</span><span class="op" id="4403911">(</span><span class="ident" id="4403912">name</span><span class="op" id="4403916">,</span>&nbsp;<span class="ident" id="4403918">input</span><span class="op" id="4403923">,</span>&nbsp;<span class="ident" id="4403925">left</span><span class="op" id="4403929">,</span>&nbsp;<span class="ident" id="4403931">right</span>&nbsp;<span class="builtintype" id="4403937">string</span><span class="op" id="4403943">)</span>&nbsp;<span class="op" id="4403945">*</span><span class="ident" id="4403946">lexer</span>&nbsp;<span class="op" id="4403952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403955">if</span>&nbsp;<span class="ident" id="4403958">left</span>&nbsp;<span class="op" id="4403963">==</span>&nbsp;<span class="string" id="4403966">&#34;&#34;</span>&nbsp;<span class="op" id="4403969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4403973">left</span>&nbsp;<span class="op" id="4403978">=</span>&nbsp;<span class="ident" id="4403980">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4403991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4403994">if</span>&nbsp;<span class="ident" id="4403997">right</span>&nbsp;<span class="op" id="4404003">==</span>&nbsp;<span class="string" id="4404006">&#34;&#34;</span>&nbsp;<span class="op" id="4404009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404013">right</span>&nbsp;<span class="op" id="4404019">=</span>&nbsp;<span class="ident" id="4404021">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404036">l</span>&nbsp;<span class="op" id="4404038">:=</span>&nbsp;<span class="op" id="4404041">&amp;</span><span class="ident" id="4404042">lexer</span><span class="op" id="4404047">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404051">name</span><span class="op" id="4404055">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404063">name</span><span class="op" id="4404067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404071">input</span><span class="op" id="4404076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404083">input</span><span class="op" id="4404088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404092">leftDelim</span><span class="op" id="4404101">:</span>&nbsp;&nbsp;<span class="ident" id="4404104">left</span><span class="op" id="4404108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404112">rightDelim</span><span class="op" id="4404122">:</span>&nbsp;<span class="ident" id="4404124">right</span><span class="op" id="4404129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404133">items</span><span class="op" id="4404138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4404145">make</span><span class="op" id="4404149">(</span><span class="keyword" id="4404150">chan</span>&nbsp;<span class="ident" id="4404155">item</span><span class="op" id="4404159">)</span><span class="op" id="4404160">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404166">go</span>&nbsp;<span class="ident" id="4404169">l</span><span class="op" id="4404170">.</span><span class="ident" id="4404171">run</span><span class="op" id="4404174">(</span><span class="op" id="4404175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404178">return</span>&nbsp;<span class="ident" id="4404185">l</span><br>
<span class="lineno"></span><span class="op" id="4404187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4404190">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="4404235">func</span>&nbsp;<span class="op" id="4404240">(</span><span class="ident" id="4404241">l</span>&nbsp;<span class="op" id="4404243">*</span><span class="ident" id="4404244">lexer</span><span class="op" id="4404249">)</span>&nbsp;<span class="ident" id="4404251">run</span><span class="op" id="4404254">(</span><span class="op" id="4404255">)</span>&nbsp;<span class="op" id="4404257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404260">for</span>&nbsp;<span class="ident" id="4404264">l</span><span class="op" id="4404265">.</span><span class="ident" id="4404266">state</span>&nbsp;<span class="op" id="4404272">=</span>&nbsp;<span class="ident" id="4404274">lexText</span><span class="op" id="4404281">;</span>&nbsp;<span class="ident" id="4404283">l</span><span class="op" id="4404284">.</span><span class="ident" id="4404285">state</span>&nbsp;<span class="op" id="4404291">!=</span>&nbsp;<span class="builtintype" id="4404294">nil</span><span class="op" id="4404297">;</span>&nbsp;<span class="op" id="4404299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404303">l</span><span class="op" id="4404304">.</span><span class="ident" id="4404305">state</span>&nbsp;<span class="op" id="4404311">=</span>&nbsp;<span class="ident" id="4404313">l</span><span class="op" id="4404314">.</span><span class="ident" id="4404315">state</span><span class="op" id="4404320">(</span><span class="ident" id="4404321">l</span><span class="op" id="4404322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404325">}</span><br>
<span class="lineno">200</span><span class="op" id="4404327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4404330">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4404350">const</span>&nbsp;<span class="op" id="4404356">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404359">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404372">=</span>&nbsp;<span class="string" id="4404374">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404380">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4404393">=</span>&nbsp;<span class="string" id="4404395">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404401">leftComment</span>&nbsp;&nbsp;<span class="op" id="4404414">=</span>&nbsp;<span class="string" id="4404416">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404422">rightComment</span>&nbsp;<span class="op" id="4404435">=</span>&nbsp;<span class="string" id="4404437">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="4404442">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="4404445">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4404503">func</span>&nbsp;<span class="ident" id="4404508">lexText</span><span class="op" id="4404515">(</span><span class="ident" id="4404516">l</span>&nbsp;<span class="op" id="4404518">*</span><span class="ident" id="4404519">lexer</span><span class="op" id="4404524">)</span>&nbsp;<span class="ident" id="4404526">stateFn</span>&nbsp;<span class="op" id="4404534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404537">for</span>&nbsp;<span class="op" id="4404541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404545">if</span>&nbsp;<span class="ident" id="4404548">strings</span><span class="op" id="4404555">.</span><span class="ident" id="4404556">HasPrefix</span><span class="op" id="4404565">(</span><span class="ident" id="4404566">l</span><span class="op" id="4404567">.</span><span class="ident" id="4404568">input</span><span class="op" id="4404573">[</span><span class="ident" id="4404574">l</span><span class="op" id="4404575">.</span><span class="ident" id="4404576">pos</span><span class="op" id="4404579">:</span><span class="op" id="4404580">]</span><span class="op" id="4404581">,</span>&nbsp;<span class="ident" id="4404583">l</span><span class="op" id="4404584">.</span><span class="ident" id="4404585">leftDelim</span><span class="op" id="4404594">)</span>&nbsp;<span class="op" id="4404596">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404601">if</span>&nbsp;<span class="ident" id="4404604">l</span><span class="op" id="4404605">.</span><span class="ident" id="4404606">pos</span>&nbsp;<span class="op" id="4404610">&gt;</span>&nbsp;<span class="ident" id="4404612">l</span><span class="op" id="4404613">.</span><span class="ident" id="4404614">start</span>&nbsp;<span class="op" id="4404620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404626">l</span><span class="op" id="4404627">.</span><span class="ident" id="4404628">emit</span><span class="op" id="4404632">(</span><span class="ident" id="4404633">itemText</span><span class="op" id="4404641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404651">return</span>&nbsp;<span class="ident" id="4404658">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404673">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404677">if</span>&nbsp;<span class="ident" id="4404680">l</span><span class="op" id="4404681">.</span><span class="ident" id="4404682">next</span><span class="op" id="4404686">(</span><span class="op" id="4404687">)</span>&nbsp;<span class="op" id="4404689">==</span>&nbsp;<span class="ident" id="4404692">eof</span>&nbsp;<span class="op" id="4404696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404701">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4404715">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404742">if</span>&nbsp;<span class="ident" id="4404745">l</span><span class="op" id="4404746">.</span><span class="ident" id="4404747">pos</span>&nbsp;<span class="op" id="4404751">&gt;</span>&nbsp;<span class="ident" id="4404753">l</span><span class="op" id="4404754">.</span><span class="ident" id="4404755">start</span>&nbsp;<span class="op" id="4404761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404765">l</span><span class="op" id="4404766">.</span><span class="ident" id="4404767">emit</span><span class="op" id="4404771">(</span><span class="ident" id="4404772">itemText</span><span class="op" id="4404780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4404783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404786">l</span><span class="op" id="4404787">.</span><span class="ident" id="4404788">emit</span><span class="op" id="4404792">(</span><span class="ident" id="4404793">itemEOF</span><span class="op" id="4404800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404803">return</span>&nbsp;<span class="builtintype" id="4404810">nil</span><br>
<span class="lineno">230</span><span class="op" id="4404814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4404817">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4404889">func</span>&nbsp;<span class="ident" id="4404894">lexLeftDelim</span><span class="op" id="4404906">(</span><span class="ident" id="4404907">l</span>&nbsp;<span class="op" id="4404909">*</span><span class="ident" id="4404910">lexer</span><span class="op" id="4404915">)</span>&nbsp;<span class="ident" id="4404917">stateFn</span>&nbsp;<span class="op" id="4404925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4404928">l</span><span class="op" id="4404929">.</span><span class="ident" id="4404930">pos</span>&nbsp;<span class="op" id="4404934">+=</span>&nbsp;<span class="ident" id="4404937">Pos</span><span class="op" id="4404940">(</span><span class="builtinfunc" id="4404941">len</span><span class="op" id="4404944">(</span><span class="ident" id="4404945">l</span><span class="op" id="4404946">.</span><span class="ident" id="4404947">leftDelim</span><span class="op" id="4404956">)</span><span class="op" id="4404957">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4404960">if</span>&nbsp;<span class="ident" id="4404963">strings</span><span class="op" id="4404970">.</span><span class="ident" id="4404971">HasPrefix</span><span class="op" id="4404980">(</span><span class="ident" id="4404981">l</span><span class="op" id="4404982">.</span><span class="ident" id="4404983">input</span><span class="op" id="4404988">[</span><span class="ident" id="4404989">l</span><span class="op" id="4404990">.</span><span class="ident" id="4404991">pos</span><span class="op" id="4404994">:</span><span class="op" id="4404995">]</span><span class="op" id="4404996">,</span>&nbsp;<span class="ident" id="4404998">leftComment</span><span class="op" id="4405009">)</span>&nbsp;<span class="op" id="4405011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405015">return</span>&nbsp;<span class="ident" id="4405022">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4405034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405037">l</span><span class="op" id="4405038">.</span><span class="ident" id="4405039">emit</span><span class="op" id="4405043">(</span><span class="ident" id="4405044">itemLeftDelim</span><span class="op" id="4405057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405060">l</span><span class="op" id="4405061">.</span><span class="ident" id="4405062">parenDepth</span>&nbsp;<span class="op" id="4405073">=</span>&nbsp;<span class="num" id="4405075">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405078">return</span>&nbsp;<span class="ident" id="4405085">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4405101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4405104">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4405183">func</span>&nbsp;<span class="ident" id="4405188">lexComment</span><span class="op" id="4405198">(</span><span class="ident" id="4405199">l</span>&nbsp;<span class="op" id="4405201">*</span><span class="ident" id="4405202">lexer</span><span class="op" id="4405207">)</span>&nbsp;<span class="ident" id="4405209">stateFn</span>&nbsp;<span class="op" id="4405217">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405220">l</span><span class="op" id="4405221">.</span><span class="ident" id="4405222">pos</span>&nbsp;<span class="op" id="4405226">+=</span>&nbsp;<span class="ident" id="4405229">Pos</span><span class="op" id="4405232">(</span><span class="builtinfunc" id="4405233">len</span><span class="op" id="4405236">(</span><span class="ident" id="4405237">leftComment</span><span class="op" id="4405248">)</span><span class="op" id="4405249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405252">i</span>&nbsp;<span class="op" id="4405254">:=</span>&nbsp;<span class="ident" id="4405257">strings</span><span class="op" id="4405264">.</span><span class="ident" id="4405265">Index</span><span class="op" id="4405270">(</span><span class="ident" id="4405271">l</span><span class="op" id="4405272">.</span><span class="ident" id="4405273">input</span><span class="op" id="4405278">[</span><span class="ident" id="4405279">l</span><span class="op" id="4405280">.</span><span class="ident" id="4405281">pos</span><span class="op" id="4405284">:</span><span class="op" id="4405285">]</span><span class="op" id="4405286">,</span>&nbsp;<span class="ident" id="4405288">rightComment</span><span class="op" id="4405300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405303">if</span>&nbsp;<span class="ident" id="4405306">i</span>&nbsp;<span class="op" id="4405308">&lt;</span>&nbsp;<span class="num" id="4405310">0</span>&nbsp;<span class="op" id="4405312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405316">return</span>&nbsp;<span class="ident" id="4405323">l</span><span class="op" id="4405324">.</span><span class="ident" id="4405325">errorf</span><span class="op" id="4405331">(</span><span class="string" id="4405332">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="4405350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4405353">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405356">l</span><span class="op" id="4405357">.</span><span class="ident" id="4405358">pos</span>&nbsp;<span class="op" id="4405362">+=</span>&nbsp;<span class="ident" id="4405365">Pos</span><span class="op" id="4405368">(</span><span class="ident" id="4405369">i</span>&nbsp;<span class="op" id="4405371">+</span>&nbsp;<span class="builtinfunc" id="4405373">len</span><span class="op" id="4405376">(</span><span class="ident" id="4405377">rightComment</span><span class="op" id="4405389">)</span><span class="op" id="4405390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405393">if</span>&nbsp;<span class="op" id="4405396">!</span><span class="ident" id="4405397">strings</span><span class="op" id="4405404">.</span><span class="ident" id="4405405">HasPrefix</span><span class="op" id="4405414">(</span><span class="ident" id="4405415">l</span><span class="op" id="4405416">.</span><span class="ident" id="4405417">input</span><span class="op" id="4405422">[</span><span class="ident" id="4405423">l</span><span class="op" id="4405424">.</span><span class="ident" id="4405425">pos</span><span class="op" id="4405428">:</span><span class="op" id="4405429">]</span><span class="op" id="4405430">,</span>&nbsp;<span class="ident" id="4405432">l</span><span class="op" id="4405433">.</span><span class="ident" id="4405434">rightDelim</span><span class="op" id="4405444">)</span>&nbsp;<span class="op" id="4405446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405450">return</span>&nbsp;<span class="ident" id="4405457">l</span><span class="op" id="4405458">.</span><span class="ident" id="4405459">errorf</span><span class="op" id="4405465">(</span><span class="string" id="4405466">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="4405505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4405509">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405512">l</span><span class="op" id="4405513">.</span><span class="ident" id="4405514">pos</span>&nbsp;<span class="op" id="4405518">+=</span>&nbsp;<span class="ident" id="4405521">Pos</span><span class="op" id="4405524">(</span><span class="builtinfunc" id="4405525">len</span><span class="op" id="4405528">(</span><span class="ident" id="4405529">l</span><span class="op" id="4405530">.</span><span class="ident" id="4405531">rightDelim</span><span class="op" id="4405541">)</span><span class="op" id="4405542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405545">l</span><span class="op" id="4405546">.</span><span class="ident" id="4405547">ignore</span><span class="op" id="4405553">(</span><span class="op" id="4405554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405557">return</span>&nbsp;<span class="ident" id="4405564">lexText</span><br>
<span class="lineno"></span><span class="op" id="4405572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4405575">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4405649">func</span>&nbsp;<span class="ident" id="4405654">lexRightDelim</span><span class="op" id="4405667">(</span><span class="ident" id="4405668">l</span>&nbsp;<span class="op" id="4405670">*</span><span class="ident" id="4405671">lexer</span><span class="op" id="4405676">)</span>&nbsp;<span class="ident" id="4405678">stateFn</span>&nbsp;<span class="op" id="4405686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405689">l</span><span class="op" id="4405690">.</span><span class="ident" id="4405691">pos</span>&nbsp;<span class="op" id="4405695">+=</span>&nbsp;<span class="ident" id="4405698">Pos</span><span class="op" id="4405701">(</span><span class="builtinfunc" id="4405702">len</span><span class="op" id="4405705">(</span><span class="ident" id="4405706">l</span><span class="op" id="4405707">.</span><span class="ident" id="4405708">rightDelim</span><span class="op" id="4405718">)</span><span class="op" id="4405719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4405722">l</span><span class="op" id="4405723">.</span><span class="ident" id="4405724">emit</span><span class="op" id="4405728">(</span><span class="ident" id="4405729">itemRightDelim</span><span class="op" id="4405743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4405746">return</span>&nbsp;<span class="ident" id="4405753">lexText</span><br>
<span class="lineno">265</span><span class="op" id="4405761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4405764">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="4405828">func</span>&nbsp;<span class="ident" id="4405833">lexInsideAction</span><span class="op" id="4405848">(</span><span class="ident" id="4405849">l</span>&nbsp;<span class="op" id="4405851">*</span><span class="ident" id="4405852">lexer</span><span class="op" id="4405857">)</span>&nbsp;<span class="ident" id="4405859">stateFn</span>&nbsp;<span class="op" id="4405867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4405870">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4405919">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4405986">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406029">if</span>&nbsp;<span class="ident" id="4406032">strings</span><span class="op" id="4406039">.</span><span class="ident" id="4406040">HasPrefix</span><span class="op" id="4406049">(</span><span class="ident" id="4406050">l</span><span class="op" id="4406051">.</span><span class="ident" id="4406052">input</span><span class="op" id="4406057">[</span><span class="ident" id="4406058">l</span><span class="op" id="4406059">.</span><span class="ident" id="4406060">pos</span><span class="op" id="4406063">:</span><span class="op" id="4406064">]</span><span class="op" id="4406065">,</span>&nbsp;<span class="ident" id="4406067">l</span><span class="op" id="4406068">.</span><span class="ident" id="4406069">rightDelim</span><span class="op" id="4406079">)</span>&nbsp;<span class="op" id="4406081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406085">if</span>&nbsp;<span class="ident" id="4406088">l</span><span class="op" id="4406089">.</span><span class="ident" id="4406090">parenDepth</span>&nbsp;<span class="op" id="4406101">==</span>&nbsp;<span class="num" id="4406104">0</span>&nbsp;<span class="op" id="4406106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406111">return</span>&nbsp;<span class="ident" id="4406118">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4406134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406138">return</span>&nbsp;<span class="ident" id="4406145">l</span><span class="op" id="4406146">.</span><span class="ident" id="4406147">errorf</span><span class="op" id="4406153">(</span><span class="string" id="4406154">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="4406175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4406178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406181">switch</span>&nbsp;<span class="ident" id="4406188">r</span>&nbsp;<span class="op" id="4406190">:=</span>&nbsp;<span class="ident" id="4406193">l</span><span class="op" id="4406194">.</span><span class="ident" id="4406195">next</span><span class="op" id="4406199">(</span><span class="op" id="4406200">)</span><span class="op" id="4406201">;</span>&nbsp;<span class="op" id="4406203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406206">case</span>&nbsp;<span class="ident" id="4406211">r</span>&nbsp;<span class="op" id="4406213">==</span>&nbsp;<span class="ident" id="4406216">eof</span>&nbsp;<span class="op" id="4406220">||</span>&nbsp;<span class="ident" id="4406223">isEndOfLine</span><span class="op" id="4406234">(</span><span class="ident" id="4406235">r</span><span class="op" id="4406236">)</span><span class="op" id="4406237">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406241">return</span>&nbsp;<span class="ident" id="4406248">l</span><span class="op" id="4406249">.</span><span class="ident" id="4406250">errorf</span><span class="op" id="4406256">(</span><span class="string" id="4406257">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="4406274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406277">case</span>&nbsp;<span class="ident" id="4406282">isSpace</span><span class="op" id="4406289">(</span><span class="ident" id="4406290">r</span><span class="op" id="4406291">)</span><span class="op" id="4406292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406296">return</span>&nbsp;<span class="ident" id="4406303">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406313">case</span>&nbsp;<span class="ident" id="4406318">r</span>&nbsp;<span class="op" id="4406320">==</span>&nbsp;<span class="string" id="4406323">&#39;:&#39;</span><span class="op" id="4406326">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406330">if</span>&nbsp;<span class="ident" id="4406333">l</span><span class="op" id="4406334">.</span><span class="ident" id="4406335">next</span><span class="op" id="4406339">(</span><span class="op" id="4406340">)</span>&nbsp;<span class="op" id="4406342">!=</span>&nbsp;<span class="string" id="4406345">&#39;=&#39;</span>&nbsp;<span class="op" id="4406349">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406354">return</span>&nbsp;<span class="ident" id="4406361">l</span><span class="op" id="4406362">.</span><span class="ident" id="4406363">errorf</span><span class="op" id="4406369">(</span><span class="string" id="4406370">&#34;expected&nbsp;:=&#34;</span><span class="op" id="4406383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4406387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406391">l</span><span class="op" id="4406392">.</span><span class="ident" id="4406393">emit</span><span class="op" id="4406397">(</span><span class="ident" id="4406398">itemColonEquals</span><span class="op" id="4406413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406416">case</span>&nbsp;<span class="ident" id="4406421">r</span>&nbsp;<span class="op" id="4406423">==</span>&nbsp;<span class="string" id="4406426">&#39;|&#39;</span><span class="op" id="4406429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406433">l</span><span class="op" id="4406434">.</span><span class="ident" id="4406435">emit</span><span class="op" id="4406439">(</span><span class="ident" id="4406440">itemPipe</span><span class="op" id="4406448">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406451">case</span>&nbsp;<span class="ident" id="4406456">r</span>&nbsp;<span class="op" id="4406458">==</span>&nbsp;<span class="string" id="4406461">&#39;&#34;&#39;</span><span class="op" id="4406464">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406468">return</span>&nbsp;<span class="ident" id="4406475">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406485">case</span>&nbsp;<span class="ident" id="4406490">r</span>&nbsp;<span class="op" id="4406492">==</span>&nbsp;<span class="string" id="4406495">&#39;`&#39;</span><span class="op" id="4406498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406502">return</span>&nbsp;<span class="ident" id="4406509">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406522">case</span>&nbsp;<span class="ident" id="4406527">r</span>&nbsp;<span class="op" id="4406529">==</span>&nbsp;<span class="string" id="4406532">&#39;$&#39;</span><span class="op" id="4406535">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406539">return</span>&nbsp;<span class="ident" id="4406546">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406559">case</span>&nbsp;<span class="ident" id="4406564">r</span>&nbsp;<span class="op" id="4406566">==</span>&nbsp;<span class="string" id="4406569">&#39;\&#39;&#39;</span><span class="op" id="4406573">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406577">return</span>&nbsp;<span class="ident" id="4406584">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406593">case</span>&nbsp;<span class="ident" id="4406598">r</span>&nbsp;<span class="op" id="4406600">==</span>&nbsp;<span class="string" id="4406603">&#39;.&#39;</span><span class="op" id="4406606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4406610">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406677">if</span>&nbsp;<span class="ident" id="4406680">l</span><span class="op" id="4406681">.</span><span class="ident" id="4406682">pos</span>&nbsp;<span class="op" id="4406686">&lt;</span>&nbsp;<span class="ident" id="4406688">Pos</span><span class="op" id="4406691">(</span><span class="builtinfunc" id="4406692">len</span><span class="op" id="4406695">(</span><span class="ident" id="4406696">l</span><span class="op" id="4406697">.</span><span class="ident" id="4406698">input</span><span class="op" id="4406703">)</span><span class="op" id="4406704">)</span>&nbsp;<span class="op" id="4406706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406711">r</span>&nbsp;<span class="op" id="4406713">:=</span>&nbsp;<span class="ident" id="4406716">l</span><span class="op" id="4406717">.</span><span class="ident" id="4406718">input</span><span class="op" id="4406723">[</span><span class="ident" id="4406724">l</span><span class="op" id="4406725">.</span><span class="ident" id="4406726">pos</span><span class="op" id="4406729">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406734">if</span>&nbsp;<span class="ident" id="4406737">r</span>&nbsp;<span class="op" id="4406739">&lt;</span>&nbsp;<span class="string" id="4406741">&#39;0&#39;</span>&nbsp;<span class="op" id="4406745">||</span>&nbsp;<span class="string" id="4406748">&#39;9&#39;</span>&nbsp;<span class="op" id="4406752">&lt;</span>&nbsp;<span class="ident" id="4406754">r</span>&nbsp;<span class="op" id="4406756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406762">return</span>&nbsp;<span class="ident" id="4406769">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4406781">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4406785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406789">fallthrough</span>&nbsp;<span class="comment" id="4406801">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406829">case</span>&nbsp;<span class="ident" id="4406834">r</span>&nbsp;<span class="op" id="4406836">==</span>&nbsp;<span class="string" id="4406839">&#39;+&#39;</span>&nbsp;<span class="op" id="4406843">||</span>&nbsp;<span class="ident" id="4406846">r</span>&nbsp;<span class="op" id="4406848">==</span>&nbsp;<span class="string" id="4406851">&#39;-&#39;</span>&nbsp;<span class="op" id="4406855">||</span>&nbsp;<span class="op" id="4406858">(</span><span class="string" id="4406859">&#39;0&#39;</span>&nbsp;<span class="op" id="4406863">&lt;=</span>&nbsp;<span class="ident" id="4406866">r</span>&nbsp;<span class="op" id="4406868">&amp;&amp;</span>&nbsp;<span class="ident" id="4406871">r</span>&nbsp;<span class="op" id="4406873">&lt;=</span>&nbsp;<span class="string" id="4406876">&#39;9&#39;</span><span class="op" id="4406879">)</span><span class="op" id="4406880">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406884">l</span><span class="op" id="4406885">.</span><span class="ident" id="4406886">backup</span><span class="op" id="4406892">(</span><span class="op" id="4406893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406897">return</span>&nbsp;<span class="ident" id="4406904">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406915">case</span>&nbsp;<span class="ident" id="4406920">isAlphaNumeric</span><span class="op" id="4406934">(</span><span class="ident" id="4406935">r</span><span class="op" id="4406936">)</span><span class="op" id="4406937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406941">l</span><span class="op" id="4406942">.</span><span class="ident" id="4406943">backup</span><span class="op" id="4406949">(</span><span class="op" id="4406950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406954">return</span>&nbsp;<span class="ident" id="4406961">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4406976">case</span>&nbsp;<span class="ident" id="4406981">r</span>&nbsp;<span class="op" id="4406983">==</span>&nbsp;<span class="string" id="4406986">&#39;(&#39;</span><span class="op" id="4406989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4406993">l</span><span class="op" id="4406994">.</span><span class="ident" id="4406995">emit</span><span class="op" id="4406999">(</span><span class="ident" id="4407000">itemLeftParen</span><span class="op" id="4407013">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407017">l</span><span class="op" id="4407018">.</span><span class="ident" id="4407019">parenDepth</span><span class="op" id="4407029">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407034">return</span>&nbsp;<span class="ident" id="4407041">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407058">case</span>&nbsp;<span class="ident" id="4407063">r</span>&nbsp;<span class="op" id="4407065">==</span>&nbsp;<span class="string" id="4407068">&#39;)&#39;</span><span class="op" id="4407071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407075">l</span><span class="op" id="4407076">.</span><span class="ident" id="4407077">emit</span><span class="op" id="4407081">(</span><span class="ident" id="4407082">itemRightParen</span><span class="op" id="4407096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407100">l</span><span class="op" id="4407101">.</span><span class="ident" id="4407102">parenDepth</span><span class="op" id="4407112">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407117">if</span>&nbsp;<span class="ident" id="4407120">l</span><span class="op" id="4407121">.</span><span class="ident" id="4407122">parenDepth</span>&nbsp;<span class="op" id="4407133">&lt;</span>&nbsp;<span class="num" id="4407135">0</span>&nbsp;<span class="op" id="4407137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407142">return</span>&nbsp;<span class="ident" id="4407149">l</span><span class="op" id="4407150">.</span><span class="ident" id="4407151">errorf</span><span class="op" id="4407157">(</span><span class="string" id="4407158">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="4407186">,</span>&nbsp;<span class="ident" id="4407188">r</span><span class="op" id="4407189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4407193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407197">return</span>&nbsp;<span class="ident" id="4407204">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407221">case</span>&nbsp;<span class="ident" id="4407226">r</span>&nbsp;<span class="op" id="4407228">&lt;=</span>&nbsp;<span class="ident" id="4407231">unicode</span><span class="op" id="4407238">.</span><span class="ident" id="4407239">MaxASCII</span>&nbsp;<span class="op" id="4407248">&amp;&amp;</span>&nbsp;<span class="ident" id="4407251">unicode</span><span class="op" id="4407258">.</span><span class="ident" id="4407259">IsPrint</span><span class="op" id="4407266">(</span><span class="ident" id="4407267">r</span><span class="op" id="4407268">)</span><span class="op" id="4407269">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407273">l</span><span class="op" id="4407274">.</span><span class="ident" id="4407275">emit</span><span class="op" id="4407279">(</span><span class="ident" id="4407280">itemChar</span><span class="op" id="4407288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407292">return</span>&nbsp;<span class="ident" id="4407299">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407316">default</span><span class="op" id="4407323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407327">return</span>&nbsp;<span class="ident" id="4407334">l</span><span class="op" id="4407335">.</span><span class="ident" id="4407336">errorf</span><span class="op" id="4407342">(</span><span class="string" id="4407343">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="4407382">,</span>&nbsp;<span class="ident" id="4407384">r</span><span class="op" id="4407385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4407388">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407391">return</span>&nbsp;<span class="ident" id="4407398">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4407414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4407417">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="4407462">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="4407498">func</span>&nbsp;<span class="ident" id="4407503">lexSpace</span><span class="op" id="4407511">(</span><span class="ident" id="4407512">l</span>&nbsp;<span class="op" id="4407514">*</span><span class="ident" id="4407515">lexer</span><span class="op" id="4407520">)</span>&nbsp;<span class="ident" id="4407522">stateFn</span>&nbsp;<span class="op" id="4407530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407533">for</span>&nbsp;<span class="ident" id="4407537">isSpace</span><span class="op" id="4407544">(</span><span class="ident" id="4407545">l</span><span class="op" id="4407546">.</span><span class="ident" id="4407547">peek</span><span class="op" id="4407551">(</span><span class="op" id="4407552">)</span><span class="op" id="4407553">)</span>&nbsp;<span class="op" id="4407555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407559">l</span><span class="op" id="4407560">.</span><span class="ident" id="4407561">next</span><span class="op" id="4407565">(</span><span class="op" id="4407566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4407569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407572">l</span><span class="op" id="4407573">.</span><span class="ident" id="4407574">emit</span><span class="op" id="4407578">(</span><span class="ident" id="4407579">itemSpace</span><span class="op" id="4407588">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407591">return</span>&nbsp;<span class="ident" id="4407598">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4407614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4407617">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="4407657">func</span>&nbsp;<span class="ident" id="4407662">lexIdentifier</span><span class="op" id="4407675">(</span><span class="ident" id="4407676">l</span>&nbsp;<span class="op" id="4407678">*</span><span class="ident" id="4407679">lexer</span><span class="op" id="4407684">)</span>&nbsp;<span class="ident" id="4407686">stateFn</span>&nbsp;<span class="op" id="4407694">{</span><br>
<span class="lineno">345</span><span class="ident" id="4407696">Loop</span><span class="op" id="4407700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407703">for</span>&nbsp;<span class="op" id="4407707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407711">switch</span>&nbsp;<span class="ident" id="4407718">r</span>&nbsp;<span class="op" id="4407720">:=</span>&nbsp;<span class="ident" id="4407723">l</span><span class="op" id="4407724">.</span><span class="ident" id="4407725">next</span><span class="op" id="4407729">(</span><span class="op" id="4407730">)</span><span class="op" id="4407731">;</span>&nbsp;<span class="op" id="4407733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407737">case</span>&nbsp;<span class="ident" id="4407742">isAlphaNumeric</span><span class="op" id="4407756">(</span><span class="ident" id="4407757">r</span><span class="op" id="4407758">)</span><span class="op" id="4407759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4407764">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407777">default</span><span class="op" id="4407784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407789">l</span><span class="op" id="4407790">.</span><span class="ident" id="4407791">backup</span><span class="op" id="4407797">(</span><span class="op" id="4407798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407803">word</span>&nbsp;<span class="op" id="4407808">:=</span>&nbsp;<span class="ident" id="4407811">l</span><span class="op" id="4407812">.</span><span class="ident" id="4407813">input</span><span class="op" id="4407818">[</span><span class="ident" id="4407819">l</span><span class="op" id="4407820">.</span><span class="ident" id="4407821">start</span><span class="op" id="4407826">:</span><span class="ident" id="4407827">l</span><span class="op" id="4407828">.</span><span class="ident" id="4407829">pos</span><span class="op" id="4407832">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407837">if</span>&nbsp;<span class="op" id="4407840">!</span><span class="ident" id="4407841">l</span><span class="op" id="4407842">.</span><span class="ident" id="4407843">atTerminator</span><span class="op" id="4407855">(</span><span class="op" id="4407856">)</span>&nbsp;<span class="op" id="4407858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407864">return</span>&nbsp;<span class="ident" id="4407871">l</span><span class="op" id="4407872">.</span><span class="ident" id="4407873">errorf</span><span class="op" id="4407879">(</span><span class="string" id="4407880">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4407899">,</span>&nbsp;<span class="ident" id="4407901">r</span><span class="op" id="4407902">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4407907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407912">switch</span>&nbsp;<span class="op" id="4407919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407924">case</span>&nbsp;<span class="ident" id="4407929">key</span><span class="op" id="4407932">[</span><span class="ident" id="4407933">word</span><span class="op" id="4407937">]</span>&nbsp;<span class="op" id="4407939">&gt;</span>&nbsp;<span class="ident" id="4407941">itemKeyword</span><span class="op" id="4407952">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4407958">l</span><span class="op" id="4407959">.</span><span class="ident" id="4407960">emit</span><span class="op" id="4407964">(</span><span class="ident" id="4407965">key</span><span class="op" id="4407968">[</span><span class="ident" id="4407969">word</span><span class="op" id="4407973">]</span><span class="op" id="4407974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4407979">case</span>&nbsp;<span class="ident" id="4407984">word</span><span class="op" id="4407988">[</span><span class="num" id="4407989">0</span><span class="op" id="4407990">]</span>&nbsp;<span class="op" id="4407992">==</span>&nbsp;<span class="string" id="4407995">&#39;.&#39;</span><span class="op" id="4407998">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408004">l</span><span class="op" id="4408005">.</span><span class="ident" id="4408006">emit</span><span class="op" id="4408010">(</span><span class="ident" id="4408011">itemField</span><span class="op" id="4408020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408025">case</span>&nbsp;<span class="ident" id="4408030">word</span>&nbsp;<span class="op" id="4408035">==</span>&nbsp;<span class="string" id="4408038">&#34;true&#34;</span><span class="op" id="4408044">,</span>&nbsp;<span class="ident" id="4408046">word</span>&nbsp;<span class="op" id="4408051">==</span>&nbsp;<span class="string" id="4408054">&#34;false&#34;</span><span class="op" id="4408061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408067">l</span><span class="op" id="4408068">.</span><span class="ident" id="4408069">emit</span><span class="op" id="4408073">(</span><span class="ident" id="4408074">itemBool</span><span class="op" id="4408082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408087">default</span><span class="op" id="4408094">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408100">l</span><span class="op" id="4408101">.</span><span class="ident" id="4408102">emit</span><span class="op" id="4408106">(</span><span class="ident" id="4408107">itemIdentifier</span><span class="op" id="4408121">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408131">break</span>&nbsp;<span class="ident" id="4408137">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408150">return</span>&nbsp;<span class="ident" id="4408157">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="4408173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4408176">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4408218">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="4408245">func</span>&nbsp;<span class="ident" id="4408250">lexField</span><span class="op" id="4408258">(</span><span class="ident" id="4408259">l</span>&nbsp;<span class="op" id="4408261">*</span><span class="ident" id="4408262">lexer</span><span class="op" id="4408267">)</span>&nbsp;<span class="ident" id="4408269">stateFn</span>&nbsp;<span class="op" id="4408277">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408280">return</span>&nbsp;<span class="ident" id="4408287">lexFieldOrVariable</span><span class="op" id="4408305">(</span><span class="ident" id="4408306">l</span><span class="op" id="4408307">,</span>&nbsp;<span class="ident" id="4408309">itemField</span><span class="op" id="4408318">)</span><br>
<span class="lineno"></span><span class="op" id="4408320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4408323">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4408371">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="4408398">func</span>&nbsp;<span class="ident" id="4408403">lexVariable</span><span class="op" id="4408414">(</span><span class="ident" id="4408415">l</span>&nbsp;<span class="op" id="4408417">*</span><span class="ident" id="4408418">lexer</span><span class="op" id="4408423">)</span>&nbsp;<span class="ident" id="4408425">stateFn</span>&nbsp;<span class="op" id="4408433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408436">if</span>&nbsp;<span class="ident" id="4408439">l</span><span class="op" id="4408440">.</span><span class="ident" id="4408441">atTerminator</span><span class="op" id="4408453">(</span><span class="op" id="4408454">)</span>&nbsp;<span class="op" id="4408456">{</span>&nbsp;<span class="comment" id="4408458">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408499">l</span><span class="op" id="4408500">.</span><span class="ident" id="4408501">emit</span><span class="op" id="4408505">(</span><span class="ident" id="4408506">itemVariable</span><span class="op" id="4408518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408522">return</span>&nbsp;<span class="ident" id="4408529">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408546">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408549">return</span>&nbsp;<span class="ident" id="4408556">lexFieldOrVariable</span><span class="op" id="4408574">(</span><span class="ident" id="4408575">l</span><span class="op" id="4408576">,</span>&nbsp;<span class="ident" id="4408578">itemVariable</span><span class="op" id="4408590">)</span><br>
<span class="lineno"></span><span class="op" id="4408592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4408595">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4408655">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="4408687">func</span>&nbsp;<span class="ident" id="4408692">lexFieldOrVariable</span><span class="op" id="4408710">(</span><span class="ident" id="4408711">l</span>&nbsp;<span class="op" id="4408713">*</span><span class="ident" id="4408714">lexer</span><span class="op" id="4408719">,</span>&nbsp;<span class="ident" id="4408721">typ</span>&nbsp;<span class="ident" id="4408725">itemType</span><span class="op" id="4408733">)</span>&nbsp;<span class="ident" id="4408735">stateFn</span>&nbsp;<span class="op" id="4408743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408746">if</span>&nbsp;<span class="ident" id="4408749">l</span><span class="op" id="4408750">.</span><span class="ident" id="4408751">atTerminator</span><span class="op" id="4408763">(</span><span class="op" id="4408764">)</span>&nbsp;<span class="op" id="4408766">{</span>&nbsp;<span class="comment" id="4408768">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408816">if</span>&nbsp;<span class="ident" id="4408819">typ</span>&nbsp;<span class="op" id="4408823">==</span>&nbsp;<span class="ident" id="4408826">itemVariable</span>&nbsp;<span class="op" id="4408839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408844">l</span><span class="op" id="4408845">.</span><span class="ident" id="4408846">emit</span><span class="op" id="4408850">(</span><span class="ident" id="4408851">itemVariable</span><span class="op" id="4408863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408867">}</span>&nbsp;<span class="keyword" id="4408869">else</span>&nbsp;<span class="op" id="4408874">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408879">l</span><span class="op" id="4408880">.</span><span class="ident" id="4408881">emit</span><span class="op" id="4408885">(</span><span class="ident" id="4408886">itemDot</span><span class="op" id="4408893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408901">return</span>&nbsp;<span class="ident" id="4408908">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408928">var</span>&nbsp;<span class="ident" id="4408932">r</span>&nbsp;<span class="builtintype" id="4408934">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408940">for</span>&nbsp;<span class="op" id="4408944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408948">r</span>&nbsp;<span class="op" id="4408950">=</span>&nbsp;<span class="ident" id="4408952">l</span><span class="op" id="4408953">.</span><span class="ident" id="4408954">next</span><span class="op" id="4408958">(</span><span class="op" id="4408959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408963">if</span>&nbsp;<span class="op" id="4408966">!</span><span class="ident" id="4408967">isAlphaNumeric</span><span class="op" id="4408981">(</span><span class="ident" id="4408982">r</span><span class="op" id="4408983">)</span>&nbsp;<span class="op" id="4408985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408990">l</span><span class="op" id="4408991">.</span><span class="ident" id="4408992">backup</span><span class="op" id="4408998">(</span><span class="op" id="4408999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409004">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409018">if</span>&nbsp;<span class="op" id="4409021">!</span><span class="ident" id="4409022">l</span><span class="op" id="4409023">.</span><span class="ident" id="4409024">atTerminator</span><span class="op" id="4409036">(</span><span class="op" id="4409037">)</span>&nbsp;<span class="op" id="4409039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409043">return</span>&nbsp;<span class="ident" id="4409050">l</span><span class="op" id="4409051">.</span><span class="ident" id="4409052">errorf</span><span class="op" id="4409058">(</span><span class="string" id="4409059">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4409078">,</span>&nbsp;<span class="ident" id="4409080">r</span><span class="op" id="4409081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409084">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409087">l</span><span class="op" id="4409088">.</span><span class="ident" id="4409089">emit</span><span class="op" id="4409093">(</span><span class="ident" id="4409094">typ</span><span class="op" id="4409097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409100">return</span>&nbsp;<span class="ident" id="4409107">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4409123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4409126">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="4409205">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="4409284">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="4409359">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="4409391">func</span>&nbsp;<span class="op" id="4409396">(</span><span class="ident" id="4409397">l</span>&nbsp;<span class="op" id="4409399">*</span><span class="ident" id="4409400">lexer</span><span class="op" id="4409405">)</span>&nbsp;<span class="ident" id="4409407">atTerminator</span><span class="op" id="4409419">(</span><span class="op" id="4409420">)</span>&nbsp;<span class="builtintype" id="4409422">bool</span>&nbsp;<span class="op" id="4409427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409430">r</span>&nbsp;<span class="op" id="4409432">:=</span>&nbsp;<span class="ident" id="4409435">l</span><span class="op" id="4409436">.</span><span class="ident" id="4409437">peek</span><span class="op" id="4409441">(</span><span class="op" id="4409442">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409445">if</span>&nbsp;<span class="ident" id="4409448">isSpace</span><span class="op" id="4409455">(</span><span class="ident" id="4409456">r</span><span class="op" id="4409457">)</span>&nbsp;<span class="op" id="4409459">||</span>&nbsp;<span class="ident" id="4409462">isEndOfLine</span><span class="op" id="4409473">(</span><span class="ident" id="4409474">r</span><span class="op" id="4409475">)</span>&nbsp;<span class="op" id="4409477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409481">return</span>&nbsp;<span class="builtintype" id="4409488">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409497">switch</span>&nbsp;<span class="ident" id="4409504">r</span>&nbsp;<span class="op" id="4409506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409509">case</span>&nbsp;<span class="ident" id="4409514">eof</span><span class="op" id="4409517">,</span>&nbsp;<span class="string" id="4409519">&#39;.&#39;</span><span class="op" id="4409522">,</span>&nbsp;<span class="string" id="4409524">&#39;,&#39;</span><span class="op" id="4409527">,</span>&nbsp;<span class="string" id="4409529">&#39;|&#39;</span><span class="op" id="4409532">,</span>&nbsp;<span class="string" id="4409534">&#39;:&#39;</span><span class="op" id="4409537">,</span>&nbsp;<span class="string" id="4409539">&#39;)&#39;</span><span class="op" id="4409542">,</span>&nbsp;<span class="string" id="4409544">&#39;(&#39;</span><span class="op" id="4409547">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409551">return</span>&nbsp;<span class="builtintype" id="4409558">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4409567">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4409650">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4409732">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409761">if</span>&nbsp;<span class="ident" id="4409764">rd</span><span class="op" id="4409766">,</span>&nbsp;<span class="ident" id="4409768">_</span>&nbsp;<span class="op" id="4409770">:=</span>&nbsp;<span class="ident" id="4409773">utf8</span><span class="op" id="4409777">.</span><span class="ident" id="4409778">DecodeRuneInString</span><span class="op" id="4409796">(</span><span class="ident" id="4409797">l</span><span class="op" id="4409798">.</span><span class="ident" id="4409799">rightDelim</span><span class="op" id="4409809">)</span><span class="op" id="4409810">;</span>&nbsp;<span class="ident" id="4409812">rd</span>&nbsp;<span class="op" id="4409815">==</span>&nbsp;<span class="ident" id="4409818">r</span>&nbsp;<span class="op" id="4409820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409824">return</span>&nbsp;<span class="builtintype" id="4409831">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409840">return</span>&nbsp;<span class="builtintype" id="4409847">false</span><br>
<span class="lineno"></span><span class="op" id="4409853">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="4409856">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4409924">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="4409975">func</span>&nbsp;<span class="ident" id="4409980">lexChar</span><span class="op" id="4409987">(</span><span class="ident" id="4409988">l</span>&nbsp;<span class="op" id="4409990">*</span><span class="ident" id="4409991">lexer</span><span class="op" id="4409996">)</span>&nbsp;<span class="ident" id="4409998">stateFn</span>&nbsp;<span class="op" id="4410006">{</span><br>
<span class="lineno"></span><span class="ident" id="4410008">Loop</span><span class="op" id="4410012">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410015">for</span>&nbsp;<span class="op" id="4410019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410023">switch</span>&nbsp;<span class="ident" id="4410030">l</span><span class="op" id="4410031">.</span><span class="ident" id="4410032">next</span><span class="op" id="4410036">(</span><span class="op" id="4410037">)</span>&nbsp;<span class="op" id="4410039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410043">case</span>&nbsp;<span class="string" id="4410048">&#39;\\&#39;</span><span class="op" id="4410052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410057">if</span>&nbsp;<span class="ident" id="4410060">r</span>&nbsp;<span class="op" id="4410062">:=</span>&nbsp;<span class="ident" id="4410065">l</span><span class="op" id="4410066">.</span><span class="ident" id="4410067">next</span><span class="op" id="4410071">(</span><span class="op" id="4410072">)</span><span class="op" id="4410073">;</span>&nbsp;<span class="ident" id="4410075">r</span>&nbsp;<span class="op" id="4410077">!=</span>&nbsp;<span class="ident" id="4410080">eof</span>&nbsp;<span class="op" id="4410084">&amp;&amp;</span>&nbsp;<span class="ident" id="4410087">r</span>&nbsp;<span class="op" id="4410089">!=</span>&nbsp;<span class="string" id="4410092">&#39;\n&#39;</span>&nbsp;<span class="op" id="4410097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410103">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410117">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410131">case</span>&nbsp;<span class="ident" id="4410136">eof</span><span class="op" id="4410139">,</span>&nbsp;<span class="string" id="4410141">&#39;\n&#39;</span><span class="op" id="4410145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410150">return</span>&nbsp;<span class="ident" id="4410157">l</span><span class="op" id="4410158">.</span><span class="ident" id="4410159">errorf</span><span class="op" id="4410165">(</span><span class="string" id="4410166">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="4410199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410203">case</span>&nbsp;<span class="string" id="4410208">&#39;\&#39;&#39;</span><span class="op" id="4410212">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410217">break</span>&nbsp;<span class="ident" id="4410223">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4410236">l</span><span class="op" id="4410237">.</span><span class="ident" id="4410238">emit</span><span class="op" id="4410242">(</span><span class="ident" id="4410243">itemCharConstant</span><span class="op" id="4410259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410262">return</span>&nbsp;<span class="ident" id="4410269">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="4410285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4410288">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="4410364">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4410440">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="4410516">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="4410541">func</span>&nbsp;<span class="ident" id="4410546">lexNumber</span><span class="op" id="4410555">(</span><span class="ident" id="4410556">l</span>&nbsp;<span class="op" id="4410558">*</span><span class="ident" id="4410559">lexer</span><span class="op" id="4410564">)</span>&nbsp;<span class="ident" id="4410566">stateFn</span>&nbsp;<span class="op" id="4410574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410577">if</span>&nbsp;<span class="op" id="4410580">!</span><span class="ident" id="4410581">l</span><span class="op" id="4410582">.</span><span class="ident" id="4410583">scanNumber</span><span class="op" id="4410593">(</span><span class="op" id="4410594">)</span>&nbsp;<span class="op" id="4410596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410600">return</span>&nbsp;<span class="ident" id="4410607">l</span><span class="op" id="4410608">.</span><span class="ident" id="4410609">errorf</span><span class="op" id="4410615">(</span><span class="string" id="4410616">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4410639">,</span>&nbsp;<span class="ident" id="4410641">l</span><span class="op" id="4410642">.</span><span class="ident" id="4410643">input</span><span class="op" id="4410648">[</span><span class="ident" id="4410649">l</span><span class="op" id="4410650">.</span><span class="ident" id="4410651">start</span><span class="op" id="4410656">:</span><span class="ident" id="4410657">l</span><span class="op" id="4410658">.</span><span class="ident" id="4410659">pos</span><span class="op" id="4410662">]</span><span class="op" id="4410663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410666">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410669">if</span>&nbsp;<span class="ident" id="4410672">sign</span>&nbsp;<span class="op" id="4410677">:=</span>&nbsp;<span class="ident" id="4410680">l</span><span class="op" id="4410681">.</span><span class="ident" id="4410682">peek</span><span class="op" id="4410686">(</span><span class="op" id="4410687">)</span><span class="op" id="4410688">;</span>&nbsp;<span class="ident" id="4410690">sign</span>&nbsp;<span class="op" id="4410695">==</span>&nbsp;<span class="string" id="4410698">&#39;+&#39;</span>&nbsp;<span class="op" id="4410702">||</span>&nbsp;<span class="ident" id="4410705">sign</span>&nbsp;<span class="op" id="4410710">==</span>&nbsp;<span class="string" id="4410713">&#39;-&#39;</span>&nbsp;<span class="op" id="4410717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4410721">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410769">if</span>&nbsp;<span class="op" id="4410772">!</span><span class="ident" id="4410773">l</span><span class="op" id="4410774">.</span><span class="ident" id="4410775">scanNumber</span><span class="op" id="4410785">(</span><span class="op" id="4410786">)</span>&nbsp;<span class="op" id="4410788">||</span>&nbsp;<span class="ident" id="4410791">l</span><span class="op" id="4410792">.</span><span class="ident" id="4410793">input</span><span class="op" id="4410798">[</span><span class="ident" id="4410799">l</span><span class="op" id="4410800">.</span><span class="ident" id="4410801">pos</span><span class="op" id="4410804">-</span><span class="num" id="4410805">1</span><span class="op" id="4410806">]</span>&nbsp;<span class="op" id="4410808">!=</span>&nbsp;<span class="string" id="4410811">&#39;i&#39;</span>&nbsp;<span class="op" id="4410815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410820">return</span>&nbsp;<span class="ident" id="4410827">l</span><span class="op" id="4410828">.</span><span class="ident" id="4410829">errorf</span><span class="op" id="4410835">(</span><span class="string" id="4410836">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4410859">,</span>&nbsp;<span class="ident" id="4410861">l</span><span class="op" id="4410862">.</span><span class="ident" id="4410863">input</span><span class="op" id="4410868">[</span><span class="ident" id="4410869">l</span><span class="op" id="4410870">.</span><span class="ident" id="4410871">start</span><span class="op" id="4410876">:</span><span class="ident" id="4410877">l</span><span class="op" id="4410878">.</span><span class="ident" id="4410879">pos</span><span class="op" id="4410882">]</span><span class="op" id="4410883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410887">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4410891">l</span><span class="op" id="4410892">.</span><span class="ident" id="4410893">emit</span><span class="op" id="4410897">(</span><span class="ident" id="4410898">itemComplex</span><span class="op" id="4410909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410912">}</span>&nbsp;<span class="keyword" id="4410914">else</span>&nbsp;<span class="op" id="4410919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4410923">l</span><span class="op" id="4410924">.</span><span class="ident" id="4410925">emit</span><span class="op" id="4410929">(</span><span class="ident" id="4410930">itemNumber</span><span class="op" id="4410940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410946">return</span>&nbsp;<span class="ident" id="4410953">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="4410969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4410972">func</span>&nbsp;<span class="op" id="4410977">(</span><span class="ident" id="4410978">l</span>&nbsp;<span class="op" id="4410980">*</span><span class="ident" id="4410981">lexer</span><span class="op" id="4410986">)</span>&nbsp;<span class="ident" id="4410988">scanNumber</span><span class="op" id="4410998">(</span><span class="op" id="4410999">)</span>&nbsp;<span class="builtintype" id="4411001">bool</span>&nbsp;<span class="op" id="4411006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4411009">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411036">l</span><span class="op" id="4411037">.</span><span class="ident" id="4411038">accept</span><span class="op" id="4411044">(</span><span class="string" id="4411045">&#34;+-&#34;</span><span class="op" id="4411049">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4411052">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411067">digits</span>&nbsp;<span class="op" id="4411074">:=</span>&nbsp;<span class="string" id="4411077">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411091">if</span>&nbsp;<span class="ident" id="4411094">l</span><span class="op" id="4411095">.</span><span class="ident" id="4411096">accept</span><span class="op" id="4411102">(</span><span class="string" id="4411103">&#34;0&#34;</span><span class="op" id="4411106">)</span>&nbsp;<span class="op" id="4411108">&amp;&amp;</span>&nbsp;<span class="ident" id="4411111">l</span><span class="op" id="4411112">.</span><span class="ident" id="4411113">accept</span><span class="op" id="4411119">(</span><span class="string" id="4411120">&#34;xX&#34;</span><span class="op" id="4411124">)</span>&nbsp;<span class="op" id="4411126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411130">digits</span>&nbsp;<span class="op" id="4411137">=</span>&nbsp;<span class="string" id="4411139">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411165">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411168">l</span><span class="op" id="4411169">.</span><span class="ident" id="4411170">acceptRun</span><span class="op" id="4411179">(</span><span class="ident" id="4411180">digits</span><span class="op" id="4411186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411189">if</span>&nbsp;<span class="ident" id="4411192">l</span><span class="op" id="4411193">.</span><span class="ident" id="4411194">accept</span><span class="op" id="4411200">(</span><span class="string" id="4411201">&#34;.&#34;</span><span class="op" id="4411204">)</span>&nbsp;<span class="op" id="4411206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411210">l</span><span class="op" id="4411211">.</span><span class="ident" id="4411212">acceptRun</span><span class="op" id="4411221">(</span><span class="ident" id="4411222">digits</span><span class="op" id="4411228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411234">if</span>&nbsp;<span class="ident" id="4411237">l</span><span class="op" id="4411238">.</span><span class="ident" id="4411239">accept</span><span class="op" id="4411245">(</span><span class="string" id="4411246">&#34;eE&#34;</span><span class="op" id="4411250">)</span>&nbsp;<span class="op" id="4411252">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411256">l</span><span class="op" id="4411257">.</span><span class="ident" id="4411258">accept</span><span class="op" id="4411264">(</span><span class="string" id="4411265">&#34;+-&#34;</span><span class="op" id="4411269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411273">l</span><span class="op" id="4411274">.</span><span class="ident" id="4411275">acceptRun</span><span class="op" id="4411284">(</span><span class="string" id="4411285">&#34;0123456789&#34;</span><span class="op" id="4411297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4411303">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411324">l</span><span class="op" id="4411325">.</span><span class="ident" id="4411326">accept</span><span class="op" id="4411332">(</span><span class="string" id="4411333">&#34;i&#34;</span><span class="op" id="4411336">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4411339">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411379">if</span>&nbsp;<span class="ident" id="4411382">isAlphaNumeric</span><span class="op" id="4411396">(</span><span class="ident" id="4411397">l</span><span class="op" id="4411398">.</span><span class="ident" id="4411399">peek</span><span class="op" id="4411403">(</span><span class="op" id="4411404">)</span><span class="op" id="4411405">)</span>&nbsp;<span class="op" id="4411407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411411">l</span><span class="op" id="4411412">.</span><span class="ident" id="4411413">next</span><span class="op" id="4411417">(</span><span class="op" id="4411418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411422">return</span>&nbsp;<span class="builtintype" id="4411429">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411436">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411439">return</span>&nbsp;<span class="builtintype" id="4411446">true</span><br>
<span class="lineno"></span><span class="op" id="4411451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4411454">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4411489">func</span>&nbsp;<span class="ident" id="4411494">lexQuote</span><span class="op" id="4411502">(</span><span class="ident" id="4411503">l</span>&nbsp;<span class="op" id="4411505">*</span><span class="ident" id="4411506">lexer</span><span class="op" id="4411511">)</span>&nbsp;<span class="ident" id="4411513">stateFn</span>&nbsp;<span class="op" id="4411521">{</span><br>
<span class="lineno">505</span><span class="ident" id="4411523">Loop</span><span class="op" id="4411527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411530">for</span>&nbsp;<span class="op" id="4411534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411538">switch</span>&nbsp;<span class="ident" id="4411545">l</span><span class="op" id="4411546">.</span><span class="ident" id="4411547">next</span><span class="op" id="4411551">(</span><span class="op" id="4411552">)</span>&nbsp;<span class="op" id="4411554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411558">case</span>&nbsp;<span class="string" id="4411563">&#39;\\&#39;</span><span class="op" id="4411567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411572">if</span>&nbsp;<span class="ident" id="4411575">r</span>&nbsp;<span class="op" id="4411577">:=</span>&nbsp;<span class="ident" id="4411580">l</span><span class="op" id="4411581">.</span><span class="ident" id="4411582">next</span><span class="op" id="4411586">(</span><span class="op" id="4411587">)</span><span class="op" id="4411588">;</span>&nbsp;<span class="ident" id="4411590">r</span>&nbsp;<span class="op" id="4411592">!=</span>&nbsp;<span class="ident" id="4411595">eof</span>&nbsp;<span class="op" id="4411599">&amp;&amp;</span>&nbsp;<span class="ident" id="4411602">r</span>&nbsp;<span class="op" id="4411604">!=</span>&nbsp;<span class="string" id="4411607">&#39;\n&#39;</span>&nbsp;<span class="op" id="4411612">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411618">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411632">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411646">case</span>&nbsp;<span class="ident" id="4411651">eof</span><span class="op" id="4411654">,</span>&nbsp;<span class="string" id="4411656">&#39;\n&#39;</span><span class="op" id="4411660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411665">return</span>&nbsp;<span class="ident" id="4411672">l</span><span class="op" id="4411673">.</span><span class="ident" id="4411674">errorf</span><span class="op" id="4411680">(</span><span class="string" id="4411681">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4411709">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411713">case</span>&nbsp;<span class="string" id="4411718">&#39;&#34;&#39;</span><span class="op" id="4411721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411726">break</span>&nbsp;<span class="ident" id="4411732">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4411742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4411745">l</span><span class="op" id="4411746">.</span><span class="ident" id="4411747">emit</span><span class="op" id="4411751">(</span><span class="ident" id="4411752">itemString</span><span class="op" id="4411762">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411765">return</span>&nbsp;<span class="ident" id="4411772">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4411788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4411791">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4411833">func</span>&nbsp;<span class="ident" id="4411838">lexRawQuote</span><span class="op" id="4411849">(</span><span class="ident" id="4411850">l</span>&nbsp;<span class="op" id="4411852">*</span><span class="ident" id="4411853">lexer</span><span class="op" id="4411858">)</span>&nbsp;<span class="ident" id="4411860">stateFn</span>&nbsp;<span class="op" id="4411868">{</span><br>
<span class="lineno">525</span><span class="ident" id="4411870">Loop</span><span class="op" id="4411874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411877">for</span>&nbsp;<span class="op" id="4411881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411885">switch</span>&nbsp;<span class="ident" id="4411892">l</span><span class="op" id="4411893">.</span><span class="ident" id="4411894">next</span><span class="op" id="4411898">(</span><span class="op" id="4411899">)</span>&nbsp;<span class="op" id="4411901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411905">case</span>&nbsp;<span class="ident" id="4411910">eof</span><span class="op" id="4411913">,</span>&nbsp;<span class="string" id="4411915">&#39;\n&#39;</span><span class="op" id="4411919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411924">return</span>&nbsp;<span class="ident" id="4411931">l</span><span class="op" id="4411932">.</span><span class="ident" id="4411933">errorf</span><span class="op" id="4411939">(</span><span class="string" id="4411940">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4411972">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411976">case</span>&nbsp;<span class="string" id="4411981">&#39;`&#39;</span><span class="op" id="4411984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4411989">break</span>&nbsp;<span class="ident" id="4411995">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4412002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4412005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4412008">l</span><span class="op" id="4412009">.</span><span class="ident" id="4412010">emit</span><span class="op" id="4412014">(</span><span class="ident" id="4412015">itemRawString</span><span class="op" id="4412028">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4412031">return</span>&nbsp;<span class="ident" id="4412038">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4412054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4412057">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4412108">func</span>&nbsp;<span class="ident" id="4412113">isSpace</span><span class="op" id="4412120">(</span><span class="ident" id="4412121">r</span>&nbsp;<span class="builtintype" id="4412123">rune</span><span class="op" id="4412127">)</span>&nbsp;<span class="builtintype" id="4412129">bool</span>&nbsp;<span class="op" id="4412134">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4412137">return</span>&nbsp;<span class="ident" id="4412144">r</span>&nbsp;<span class="op" id="4412146">==</span>&nbsp;<span class="string" id="4412149">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4412153">||</span>&nbsp;<span class="ident" id="4412156">r</span>&nbsp;<span class="op" id="4412158">==</span>&nbsp;<span class="string" id="4412161">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4412166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4412169">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4412231">func</span>&nbsp;<span class="ident" id="4412236">isEndOfLine</span><span class="op" id="4412247">(</span><span class="ident" id="4412248">r</span>&nbsp;<span class="builtintype" id="4412250">rune</span><span class="op" id="4412254">)</span>&nbsp;<span class="builtintype" id="4412256">bool</span>&nbsp;<span class="op" id="4412261">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4412264">return</span>&nbsp;<span class="ident" id="4412271">r</span>&nbsp;<span class="op" id="4412273">==</span>&nbsp;<span class="string" id="4412276">&#39;\r&#39;</span>&nbsp;<span class="op" id="4412281">||</span>&nbsp;<span class="ident" id="4412284">r</span>&nbsp;<span class="op" id="4412286">==</span>&nbsp;<span class="string" id="4412289">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4412294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4412297">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="4412373">func</span>&nbsp;<span class="ident" id="4412378">isAlphaNumeric</span><span class="op" id="4412392">(</span><span class="ident" id="4412393">r</span>&nbsp;<span class="builtintype" id="4412395">rune</span><span class="op" id="4412399">)</span>&nbsp;<span class="builtintype" id="4412401">bool</span>&nbsp;<span class="op" id="4412406">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4412409">return</span>&nbsp;<span class="ident" id="4412416">r</span>&nbsp;<span class="op" id="4412418">==</span>&nbsp;<span class="string" id="4412421">&#39;_&#39;</span>&nbsp;<span class="op" id="4412425">||</span>&nbsp;<span class="ident" id="4412428">unicode</span><span class="op" id="4412435">.</span><span class="ident" id="4412436">IsLetter</span><span class="op" id="4412444">(</span><span class="ident" id="4412445">r</span><span class="op" id="4412446">)</span>&nbsp;<span class="op" id="4412448">||</span>&nbsp;<span class="ident" id="4412451">unicode</span><span class="op" id="4412458">.</span><span class="ident" id="4412459">IsDigit</span><span class="op" id="4412466">(</span><span class="ident" id="4412467">r</span><span class="op" id="4412468">)</span><br>
<span class="lineno"></span><span class="op" id="4412470">}</span>
</div>
</body>
</html>
