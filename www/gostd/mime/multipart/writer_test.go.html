<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8511637">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8511692">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8511746">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8511797">package</span>&nbsp;<span class="ident" id="8511805">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8511816">import</span>&nbsp;<span class="op" id="8511823">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511826">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511835">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511848">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8511859">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8511869">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8511872">func</span>&nbsp;<span class="ident" id="8511877">TestWriter</span><span class="op" id="8511887">(</span><span class="ident" id="8511888">t</span>&nbsp;<span class="op" id="8511890">*</span><span class="ident" id="8511891">testing</span><span class="op" id="8511898">.</span><span class="ident" id="8511899">T</span><span class="op" id="8511900">)</span>&nbsp;<span class="op" id="8511902">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8511905">fileContents</span>&nbsp;<span class="op" id="8511918">:=</span>&nbsp;<span class="op" id="8511921">[</span><span class="op" id="8511922">]</span><span class="builtintype" id="8511923">byte</span><span class="op" id="8511927">(</span><span class="string" id="8511928">&#34;my&nbsp;file&nbsp;contents&#34;</span><span class="op" id="8511946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8511950">var</span>&nbsp;<span class="ident" id="8511954">b</span>&nbsp;<span class="ident" id="8511956">bytes</span><span class="op" id="8511961">.</span><span class="ident" id="8511962">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8511970">w</span>&nbsp;<span class="op" id="8511972">:=</span>&nbsp;<span class="ident" id="8511975">NewWriter</span><span class="op" id="8511984">(</span><span class="op" id="8511985">&amp;</span><span class="ident" id="8511986">b</span><span class="op" id="8511987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8511990">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8511994">part</span><span class="op" id="8511998">,</span>&nbsp;<span class="ident" id="8512000">err</span>&nbsp;<span class="op" id="8512004">:=</span>&nbsp;<span class="ident" id="8512007">w</span><span class="op" id="8512008">.</span><span class="ident" id="8512009">CreateFormFile</span><span class="op" id="8512023">(</span><span class="string" id="8512024">&#34;myfile&#34;</span><span class="op" id="8512032">,</span>&nbsp;<span class="string" id="8512034">&#34;my-file.txt&#34;</span><span class="op" id="8512047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512051">if</span>&nbsp;<span class="ident" id="8512054">err</span>&nbsp;<span class="op" id="8512058">!=</span>&nbsp;<span class="builtintype" id="8512061">nil</span>&nbsp;<span class="op" id="8512065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512070">t</span><span class="op" id="8512071">.</span><span class="ident" id="8512072">Fatalf</span><span class="op" id="8512078">(</span><span class="string" id="8512079">&#34;CreateFormFile:&nbsp;%v&#34;</span><span class="op" id="8512099">,</span>&nbsp;<span class="ident" id="8512101">err</span><span class="op" id="8512104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512112">part</span><span class="op" id="8512116">.</span><span class="ident" id="8512117">Write</span><span class="op" id="8512122">(</span><span class="ident" id="8512123">fileContents</span><span class="op" id="8512135">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512139">err</span>&nbsp;<span class="op" id="8512143">=</span>&nbsp;<span class="ident" id="8512145">w</span><span class="op" id="8512146">.</span><span class="ident" id="8512147">WriteField</span><span class="op" id="8512157">(</span><span class="string" id="8512158">&#34;key&#34;</span><span class="op" id="8512163">,</span>&nbsp;<span class="string" id="8512165">&#34;val&#34;</span><span class="op" id="8512170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512174">if</span>&nbsp;<span class="ident" id="8512177">err</span>&nbsp;<span class="op" id="8512181">!=</span>&nbsp;<span class="builtintype" id="8512184">nil</span>&nbsp;<span class="op" id="8512188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512193">t</span><span class="op" id="8512194">.</span><span class="ident" id="8512195">Fatalf</span><span class="op" id="8512201">(</span><span class="string" id="8512202">&#34;WriteField:&nbsp;%v&#34;</span><span class="op" id="8512218">,</span>&nbsp;<span class="ident" id="8512220">err</span><span class="op" id="8512223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512231">part</span><span class="op" id="8512235">.</span><span class="ident" id="8512236">Write</span><span class="op" id="8512241">(</span><span class="op" id="8512242">[</span><span class="op" id="8512243">]</span><span class="builtintype" id="8512244">byte</span><span class="op" id="8512248">(</span><span class="string" id="8512249">&#34;val&#34;</span><span class="op" id="8512254">)</span><span class="op" id="8512255">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512259">err</span>&nbsp;<span class="op" id="8512263">=</span>&nbsp;<span class="ident" id="8512265">w</span><span class="op" id="8512266">.</span><span class="ident" id="8512267">Close</span><span class="op" id="8512272">(</span><span class="op" id="8512273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512277">if</span>&nbsp;<span class="ident" id="8512280">err</span>&nbsp;<span class="op" id="8512284">!=</span>&nbsp;<span class="builtintype" id="8512287">nil</span>&nbsp;<span class="op" id="8512291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512296">t</span><span class="op" id="8512297">.</span><span class="ident" id="8512298">Fatalf</span><span class="op" id="8512304">(</span><span class="string" id="8512305">&#34;Close:&nbsp;%v&#34;</span><span class="op" id="8512316">,</span>&nbsp;<span class="ident" id="8512318">err</span><span class="op" id="8512321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512329">s</span>&nbsp;<span class="op" id="8512331">:=</span>&nbsp;<span class="ident" id="8512334">b</span><span class="op" id="8512335">.</span><span class="ident" id="8512336">String</span><span class="op" id="8512342">(</span><span class="op" id="8512343">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512347">if</span>&nbsp;<span class="builtinfunc" id="8512350">len</span><span class="op" id="8512353">(</span><span class="ident" id="8512354">s</span><span class="op" id="8512355">)</span>&nbsp;<span class="op" id="8512357">==</span>&nbsp;<span class="num" id="8512360">0</span>&nbsp;<span class="op" id="8512362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512367">t</span><span class="op" id="8512368">.</span><span class="ident" id="8512369">Fatal</span><span class="op" id="8512374">(</span><span class="string" id="8512375">&#34;String:&nbsp;unexpected&nbsp;empty&nbsp;result&#34;</span><span class="op" id="8512408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512416">if</span>&nbsp;<span class="ident" id="8512419">s</span><span class="op" id="8512420">[</span><span class="num" id="8512421">0</span><span class="op" id="8512422">]</span>&nbsp;<span class="op" id="8512424">==</span>&nbsp;<span class="string" id="8512427">&#39;\r&#39;</span>&nbsp;<span class="op" id="8512432">||</span>&nbsp;<span class="ident" id="8512435">s</span><span class="op" id="8512436">[</span><span class="num" id="8512437">0</span><span class="op" id="8512438">]</span>&nbsp;<span class="op" id="8512440">==</span>&nbsp;<span class="string" id="8512443">&#39;\n&#39;</span>&nbsp;<span class="op" id="8512448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512453">t</span><span class="op" id="8512454">.</span><span class="ident" id="8512455">Fatal</span><span class="op" id="8512460">(</span><span class="string" id="8512461">&#34;String:&nbsp;unexpected&nbsp;newline&#34;</span><span class="op" id="8512489">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512500">r</span>&nbsp;<span class="op" id="8512502">:=</span>&nbsp;<span class="ident" id="8512505">NewReader</span><span class="op" id="8512514">(</span><span class="op" id="8512515">&amp;</span><span class="ident" id="8512516">b</span><span class="op" id="8512517">,</span>&nbsp;<span class="ident" id="8512519">w</span><span class="op" id="8512520">.</span><span class="ident" id="8512521">Boundary</span><span class="op" id="8512529">(</span><span class="op" id="8512530">)</span><span class="op" id="8512531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512535">part</span><span class="op" id="8512539">,</span>&nbsp;<span class="ident" id="8512541">err</span>&nbsp;<span class="op" id="8512545">:=</span>&nbsp;<span class="ident" id="8512548">r</span><span class="op" id="8512549">.</span><span class="ident" id="8512550">NextPart</span><span class="op" id="8512558">(</span><span class="op" id="8512559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512562">if</span>&nbsp;<span class="ident" id="8512565">err</span>&nbsp;<span class="op" id="8512569">!=</span>&nbsp;<span class="builtintype" id="8512572">nil</span>&nbsp;<span class="op" id="8512576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512580">t</span><span class="op" id="8512581">.</span><span class="ident" id="8512582">Fatalf</span><span class="op" id="8512588">(</span><span class="string" id="8512589">&#34;part&nbsp;1:&nbsp;%v&#34;</span><span class="op" id="8512601">,</span>&nbsp;<span class="ident" id="8512603">err</span><span class="op" id="8512606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512612">if</span>&nbsp;<span class="ident" id="8512615">g</span><span class="op" id="8512616">,</span>&nbsp;<span class="ident" id="8512618">e</span>&nbsp;<span class="op" id="8512620">:=</span>&nbsp;<span class="ident" id="8512623">part</span><span class="op" id="8512627">.</span><span class="ident" id="8512628">FormName</span><span class="op" id="8512636">(</span><span class="op" id="8512637">)</span><span class="op" id="8512638">,</span>&nbsp;<span class="string" id="8512640">&#34;myfile&#34;</span><span class="op" id="8512648">;</span>&nbsp;<span class="ident" id="8512650">g</span>&nbsp;<span class="op" id="8512652">!=</span>&nbsp;<span class="ident" id="8512655">e</span>&nbsp;<span class="op" id="8512657">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512661">t</span><span class="op" id="8512662">.</span><span class="ident" id="8512663">Errorf</span><span class="op" id="8512669">(</span><span class="string" id="8512670">&#34;part&nbsp;1:&nbsp;want&nbsp;form&nbsp;name&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8512705">,</span>&nbsp;<span class="ident" id="8512707">e</span><span class="op" id="8512708">,</span>&nbsp;<span class="ident" id="8512710">g</span><span class="op" id="8512711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512717">slurp</span><span class="op" id="8512722">,</span>&nbsp;<span class="ident" id="8512724">err</span>&nbsp;<span class="op" id="8512728">:=</span>&nbsp;<span class="ident" id="8512731">ioutil</span><span class="op" id="8512737">.</span><span class="ident" id="8512738">ReadAll</span><span class="op" id="8512745">(</span><span class="ident" id="8512746">part</span><span class="op" id="8512750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512753">if</span>&nbsp;<span class="ident" id="8512756">err</span>&nbsp;<span class="op" id="8512760">!=</span>&nbsp;<span class="builtintype" id="8512763">nil</span>&nbsp;<span class="op" id="8512767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512771">t</span><span class="op" id="8512772">.</span><span class="ident" id="8512773">Fatalf</span><span class="op" id="8512779">(</span><span class="string" id="8512780">&#34;part&nbsp;1:&nbsp;ReadAll:&nbsp;%v&#34;</span><span class="op" id="8512801">,</span>&nbsp;<span class="ident" id="8512803">err</span><span class="op" id="8512806">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512812">if</span>&nbsp;<span class="ident" id="8512815">e</span><span class="op" id="8512816">,</span>&nbsp;<span class="ident" id="8512818">g</span>&nbsp;<span class="op" id="8512820">:=</span>&nbsp;<span class="builtintype" id="8512823">string</span><span class="op" id="8512829">(</span><span class="ident" id="8512830">fileContents</span><span class="op" id="8512842">)</span><span class="op" id="8512843">,</span>&nbsp;<span class="builtintype" id="8512845">string</span><span class="op" id="8512851">(</span><span class="ident" id="8512852">slurp</span><span class="op" id="8512857">)</span><span class="op" id="8512858">;</span>&nbsp;<span class="ident" id="8512860">e</span>&nbsp;<span class="op" id="8512862">!=</span>&nbsp;<span class="ident" id="8512865">g</span>&nbsp;<span class="op" id="8512867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512871">t</span><span class="op" id="8512872">.</span><span class="ident" id="8512873">Errorf</span><span class="op" id="8512879">(</span><span class="string" id="8512880">&#34;part&nbsp;1:&nbsp;want&nbsp;contents&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8512914">,</span>&nbsp;<span class="ident" id="8512916">e</span><span class="op" id="8512917">,</span>&nbsp;<span class="ident" id="8512919">g</span><span class="op" id="8512920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8512923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512927">part</span><span class="op" id="8512931">,</span>&nbsp;<span class="ident" id="8512933">err</span>&nbsp;<span class="op" id="8512937">=</span>&nbsp;<span class="ident" id="8512939">r</span><span class="op" id="8512940">.</span><span class="ident" id="8512941">NextPart</span><span class="op" id="8512949">(</span><span class="op" id="8512950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8512953">if</span>&nbsp;<span class="ident" id="8512956">err</span>&nbsp;<span class="op" id="8512960">!=</span>&nbsp;<span class="builtintype" id="8512963">nil</span>&nbsp;<span class="op" id="8512967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8512971">t</span><span class="op" id="8512972">.</span><span class="ident" id="8512973">Fatalf</span><span class="op" id="8512979">(</span><span class="string" id="8512980">&#34;part&nbsp;2:&nbsp;%v&#34;</span><span class="op" id="8512992">,</span>&nbsp;<span class="ident" id="8512994">err</span><span class="op" id="8512997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513003">if</span>&nbsp;<span class="ident" id="8513006">g</span><span class="op" id="8513007">,</span>&nbsp;<span class="ident" id="8513009">e</span>&nbsp;<span class="op" id="8513011">:=</span>&nbsp;<span class="ident" id="8513014">part</span><span class="op" id="8513018">.</span><span class="ident" id="8513019">FormName</span><span class="op" id="8513027">(</span><span class="op" id="8513028">)</span><span class="op" id="8513029">,</span>&nbsp;<span class="string" id="8513031">&#34;key&#34;</span><span class="op" id="8513036">;</span>&nbsp;<span class="ident" id="8513038">g</span>&nbsp;<span class="op" id="8513040">!=</span>&nbsp;<span class="ident" id="8513043">e</span>&nbsp;<span class="op" id="8513045">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513049">t</span><span class="op" id="8513050">.</span><span class="ident" id="8513051">Errorf</span><span class="op" id="8513057">(</span><span class="string" id="8513058">&#34;part&nbsp;2:&nbsp;want&nbsp;form&nbsp;name&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8513093">,</span>&nbsp;<span class="ident" id="8513095">e</span><span class="op" id="8513096">,</span>&nbsp;<span class="ident" id="8513098">g</span><span class="op" id="8513099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513105">slurp</span><span class="op" id="8513110">,</span>&nbsp;<span class="ident" id="8513112">err</span>&nbsp;<span class="op" id="8513116">=</span>&nbsp;<span class="ident" id="8513118">ioutil</span><span class="op" id="8513124">.</span><span class="ident" id="8513125">ReadAll</span><span class="op" id="8513132">(</span><span class="ident" id="8513133">part</span><span class="op" id="8513137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513140">if</span>&nbsp;<span class="ident" id="8513143">err</span>&nbsp;<span class="op" id="8513147">!=</span>&nbsp;<span class="builtintype" id="8513150">nil</span>&nbsp;<span class="op" id="8513154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513158">t</span><span class="op" id="8513159">.</span><span class="ident" id="8513160">Fatalf</span><span class="op" id="8513166">(</span><span class="string" id="8513167">&#34;part&nbsp;2:&nbsp;ReadAll:&nbsp;%v&#34;</span><span class="op" id="8513188">,</span>&nbsp;<span class="ident" id="8513190">err</span><span class="op" id="8513193">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513199">if</span>&nbsp;<span class="ident" id="8513202">e</span><span class="op" id="8513203">,</span>&nbsp;<span class="ident" id="8513205">g</span>&nbsp;<span class="op" id="8513207">:=</span>&nbsp;<span class="string" id="8513210">&#34;val&#34;</span><span class="op" id="8513215">,</span>&nbsp;<span class="builtintype" id="8513217">string</span><span class="op" id="8513223">(</span><span class="ident" id="8513224">slurp</span><span class="op" id="8513229">)</span><span class="op" id="8513230">;</span>&nbsp;<span class="ident" id="8513232">e</span>&nbsp;<span class="op" id="8513234">!=</span>&nbsp;<span class="ident" id="8513237">g</span>&nbsp;<span class="op" id="8513239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513243">t</span><span class="op" id="8513244">.</span><span class="ident" id="8513245">Errorf</span><span class="op" id="8513251">(</span><span class="string" id="8513252">&#34;part&nbsp;2:&nbsp;want&nbsp;contents&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8513286">,</span>&nbsp;<span class="ident" id="8513288">e</span><span class="op" id="8513289">,</span>&nbsp;<span class="ident" id="8513291">g</span><span class="op" id="8513292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513299">part</span><span class="op" id="8513303">,</span>&nbsp;<span class="ident" id="8513305">err</span>&nbsp;<span class="op" id="8513309">=</span>&nbsp;<span class="ident" id="8513311">r</span><span class="op" id="8513312">.</span><span class="ident" id="8513313">NextPart</span><span class="op" id="8513321">(</span><span class="op" id="8513322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513325">if</span>&nbsp;<span class="ident" id="8513328">part</span>&nbsp;<span class="op" id="8513333">!=</span>&nbsp;<span class="builtintype" id="8513336">nil</span>&nbsp;<span class="op" id="8513340">||</span>&nbsp;<span class="ident" id="8513343">err</span>&nbsp;<span class="op" id="8513347">==</span>&nbsp;<span class="builtintype" id="8513350">nil</span>&nbsp;<span class="op" id="8513354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513358">t</span><span class="op" id="8513359">.</span><span class="ident" id="8513360">Fatalf</span><span class="op" id="8513366">(</span><span class="string" id="8513367">&#34;expected&nbsp;end&nbsp;of&nbsp;parts;&nbsp;got&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8513402">,</span>&nbsp;<span class="ident" id="8513404">part</span><span class="op" id="8513408">,</span>&nbsp;<span class="ident" id="8513410">err</span><span class="op" id="8513413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513416">}</span><br>
<span class="lineno"></span><span class="op" id="8513418">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="8513421">func</span>&nbsp;<span class="ident" id="8513426">TestWriterSetBoundary</span><span class="op" id="8513447">(</span><span class="ident" id="8513448">t</span>&nbsp;<span class="op" id="8513450">*</span><span class="ident" id="8513451">testing</span><span class="op" id="8513458">.</span><span class="ident" id="8513459">T</span><span class="op" id="8513460">)</span>&nbsp;<span class="op" id="8513462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513465">var</span>&nbsp;<span class="ident" id="8513469">b</span>&nbsp;<span class="ident" id="8513471">bytes</span><span class="op" id="8513476">.</span><span class="ident" id="8513477">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513485">w</span>&nbsp;<span class="op" id="8513487">:=</span>&nbsp;<span class="ident" id="8513490">NewWriter</span><span class="op" id="8513499">(</span><span class="op" id="8513500">&amp;</span><span class="ident" id="8513501">b</span><span class="op" id="8513502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513505">tests</span>&nbsp;<span class="op" id="8513511">:=</span>&nbsp;<span class="op" id="8513514">[</span><span class="op" id="8513515">]</span><span class="keyword" id="8513516">struct</span>&nbsp;<span class="op" id="8513523">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513527">b</span>&nbsp;&nbsp;<span class="builtintype" id="8513530">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513539">ok</span>&nbsp;<span class="builtintype" id="8513542">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513548">}</span><span class="op" id="8513549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513553">{</span><span class="string" id="8513554">&#34;abc&#34;</span><span class="op" id="8513559">,</span>&nbsp;<span class="builtintype" id="8513561">true</span><span class="op" id="8513565">}</span><span class="op" id="8513566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513570">{</span><span class="string" id="8513571">&#34;&#34;</span><span class="op" id="8513573">,</span>&nbsp;<span class="builtintype" id="8513575">false</span><span class="op" id="8513580">}</span><span class="op" id="8513581">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513585">{</span><span class="string" id="8513586">&#34;ung√ºltig&#34;</span><span class="op" id="8513597">,</span>&nbsp;<span class="builtintype" id="8513599">false</span><span class="op" id="8513604">}</span><span class="op" id="8513605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513609">{</span><span class="string" id="8513610">&#34;!&#34;</span><span class="op" id="8513613">,</span>&nbsp;<span class="builtintype" id="8513615">false</span><span class="op" id="8513620">}</span><span class="op" id="8513621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513625">{</span><span class="ident" id="8513626">strings</span><span class="op" id="8513633">.</span><span class="ident" id="8513634">Repeat</span><span class="op" id="8513640">(</span><span class="string" id="8513641">&#34;x&#34;</span><span class="op" id="8513644">,</span>&nbsp;<span class="num" id="8513646">69</span><span class="op" id="8513648">)</span><span class="op" id="8513649">,</span>&nbsp;<span class="builtintype" id="8513651">true</span><span class="op" id="8513655">}</span><span class="op" id="8513656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513660">{</span><span class="ident" id="8513661">strings</span><span class="op" id="8513668">.</span><span class="ident" id="8513669">Repeat</span><span class="op" id="8513675">(</span><span class="string" id="8513676">&#34;x&#34;</span><span class="op" id="8513679">,</span>&nbsp;<span class="num" id="8513681">70</span><span class="op" id="8513683">)</span><span class="op" id="8513684">,</span>&nbsp;<span class="builtintype" id="8513686">false</span><span class="op" id="8513691">}</span><span class="op" id="8513692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513696">{</span><span class="string" id="8513697">&#34;bad!ascii!&#34;</span><span class="op" id="8513709">,</span>&nbsp;<span class="builtintype" id="8513711">false</span><span class="op" id="8513716">}</span><span class="op" id="8513717">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513721">{</span><span class="string" id="8513722">&#34;my-separator&#34;</span><span class="op" id="8513736">,</span>&nbsp;<span class="builtintype" id="8513738">true</span><span class="op" id="8513742">}</span><span class="op" id="8513743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513749">for</span>&nbsp;<span class="ident" id="8513753">i</span><span class="op" id="8513754">,</span>&nbsp;<span class="ident" id="8513756">tt</span>&nbsp;<span class="op" id="8513759">:=</span>&nbsp;<span class="keyword" id="8513762">range</span>&nbsp;<span class="ident" id="8513768">tests</span>&nbsp;<span class="op" id="8513774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513778">err</span>&nbsp;<span class="op" id="8513782">:=</span>&nbsp;<span class="ident" id="8513785">w</span><span class="op" id="8513786">.</span><span class="ident" id="8513787">SetBoundary</span><span class="op" id="8513798">(</span><span class="ident" id="8513799">tt</span><span class="op" id="8513801">.</span><span class="ident" id="8513802">b</span><span class="op" id="8513803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513807">got</span>&nbsp;<span class="op" id="8513811">:=</span>&nbsp;<span class="ident" id="8513814">err</span>&nbsp;<span class="op" id="8513818">==</span>&nbsp;<span class="builtintype" id="8513821">nil</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513827">if</span>&nbsp;<span class="ident" id="8513830">got</span>&nbsp;<span class="op" id="8513834">!=</span>&nbsp;<span class="ident" id="8513837">tt</span><span class="op" id="8513839">.</span><span class="ident" id="8513840">ok</span>&nbsp;<span class="op" id="8513843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513848">t</span><span class="op" id="8513849">.</span><span class="ident" id="8513850">Errorf</span><span class="op" id="8513856">(</span><span class="string" id="8513857">&#34;%d.&nbsp;boundary&nbsp;%q&nbsp;=&nbsp;%v&nbsp;(%v);&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8513893">,</span>&nbsp;<span class="ident" id="8513895">i</span><span class="op" id="8513896">,</span>&nbsp;<span class="ident" id="8513898">tt</span><span class="op" id="8513900">.</span><span class="ident" id="8513901">b</span><span class="op" id="8513902">,</span>&nbsp;<span class="ident" id="8513904">got</span><span class="op" id="8513907">,</span>&nbsp;<span class="ident" id="8513909">err</span><span class="op" id="8513912">,</span>&nbsp;<span class="ident" id="8513914">tt</span><span class="op" id="8513916">.</span><span class="ident" id="8513917">ok</span><span class="op" id="8513919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8513923">}</span>&nbsp;<span class="keyword" id="8513925">else</span>&nbsp;<span class="keyword" id="8513930">if</span>&nbsp;<span class="ident" id="8513933">tt</span><span class="op" id="8513935">.</span><span class="ident" id="8513936">ok</span>&nbsp;<span class="op" id="8513939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513944">got</span>&nbsp;<span class="op" id="8513948">:=</span>&nbsp;<span class="ident" id="8513951">w</span><span class="op" id="8513952">.</span><span class="ident" id="8513953">Boundary</span><span class="op" id="8513961">(</span><span class="op" id="8513962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8513967">if</span>&nbsp;<span class="ident" id="8513970">got</span>&nbsp;<span class="op" id="8513974">!=</span>&nbsp;<span class="ident" id="8513977">tt</span><span class="op" id="8513979">.</span><span class="ident" id="8513980">b</span>&nbsp;<span class="op" id="8513982">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8513988">t</span><span class="op" id="8513989">.</span><span class="ident" id="8513990">Errorf</span><span class="op" id="8513996">(</span><span class="string" id="8513997">&#34;boundary&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8514021">,</span>&nbsp;<span class="ident" id="8514023">got</span><span class="op" id="8514026">,</span>&nbsp;<span class="ident" id="8514028">tt</span><span class="op" id="8514030">.</span><span class="ident" id="8514031">b</span><span class="op" id="8514032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514047">w</span><span class="op" id="8514048">.</span><span class="ident" id="8514049">Close</span><span class="op" id="8514054">(</span><span class="op" id="8514055">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8514058">if</span>&nbsp;<span class="ident" id="8514061">got</span>&nbsp;<span class="op" id="8514065">:=</span>&nbsp;<span class="ident" id="8514068">b</span><span class="op" id="8514069">.</span><span class="ident" id="8514070">String</span><span class="op" id="8514076">(</span><span class="op" id="8514077">)</span><span class="op" id="8514078">;</span>&nbsp;<span class="op" id="8514080">!</span><span class="ident" id="8514081">strings</span><span class="op" id="8514088">.</span><span class="ident" id="8514089">Contains</span><span class="op" id="8514097">(</span><span class="ident" id="8514098">got</span><span class="op" id="8514101">,</span>&nbsp;<span class="string" id="8514103">&#34;\r\n--my-separator--\r\n&#34;</span><span class="op" id="8514129">)</span>&nbsp;<span class="op" id="8514131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514135">t</span><span class="op" id="8514136">.</span><span class="ident" id="8514137">Errorf</span><span class="op" id="8514143">(</span><span class="string" id="8514144">&#34;expected&nbsp;my-separator&nbsp;in&nbsp;output.&nbsp;got:&nbsp;%q&#34;</span><span class="op" id="8514186">,</span>&nbsp;<span class="ident" id="8514188">got</span><span class="op" id="8514191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514194">}</span><br>
<span class="lineno"></span><span class="op" id="8514196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8514199">func</span>&nbsp;<span class="ident" id="8514204">TestWriterBoundaryGoroutines</span><span class="op" id="8514232">(</span><span class="ident" id="8514233">t</span>&nbsp;<span class="op" id="8514235">*</span><span class="ident" id="8514236">testing</span><span class="op" id="8514243">.</span><span class="ident" id="8514244">T</span><span class="op" id="8514245">)</span>&nbsp;<span class="op" id="8514247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8514250">//&nbsp;Verify&nbsp;there&#39;s&nbsp;no&nbsp;data&nbsp;race&nbsp;accessing&nbsp;any&nbsp;lazy&nbsp;boundary&nbsp;if&nbsp;it&#39;s&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8514326">//&nbsp;different&nbsp;goroutines.&nbsp;This&nbsp;was&nbsp;previously&nbsp;broken&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8514382">//&nbsp;https://codereview.appspot.com/95760043/&nbsp;and&nbsp;reverted&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8514443">//&nbsp;https://codereview.appspot.com/117600043/</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514489">w</span>&nbsp;<span class="op" id="8514491">:=</span>&nbsp;<span class="ident" id="8514494">NewWriter</span><span class="op" id="8514503">(</span><span class="ident" id="8514504">ioutil</span><span class="op" id="8514510">.</span><span class="ident" id="8514511">Discard</span><span class="op" id="8514518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514521">done</span>&nbsp;<span class="op" id="8514526">:=</span>&nbsp;<span class="builtinfunc" id="8514529">make</span><span class="op" id="8514533">(</span><span class="keyword" id="8514534">chan</span>&nbsp;<span class="builtintype" id="8514539">int</span><span class="op" id="8514542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8514545">go</span>&nbsp;<span class="keyword" id="8514548">func</span><span class="op" id="8514552">(</span><span class="op" id="8514553">)</span>&nbsp;<span class="op" id="8514555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514559">w</span><span class="op" id="8514560">.</span><span class="ident" id="8514561">CreateFormField</span><span class="op" id="8514576">(</span><span class="string" id="8514577">&#34;foo&#34;</span><span class="op" id="8514582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514586">done</span>&nbsp;<span class="op" id="8514591">&lt;-</span>&nbsp;<span class="num" id="8514594">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514597">}</span><span class="op" id="8514598">(</span><span class="op" id="8514599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8514602">w</span><span class="op" id="8514603">.</span><span class="ident" id="8514604">Boundary</span><span class="op" id="8514612">(</span><span class="op" id="8514613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8514616">&lt;-</span><span class="ident" id="8514618">done</span><br>
<span class="lineno"></span><span class="op" id="8514623">}</span>
</div>
</body>
</html>
