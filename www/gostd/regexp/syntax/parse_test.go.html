<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp/syntax</h2>
<ul>
<li><a href="/gostd/regexp/syntax/compile.go.html">compile.go</a></li>
<li><a href="/gostd/regexp/syntax/doc.go.html">doc.go</a></li>
<li><a href="/gostd/regexp/syntax/parse.go.html">parse.go</a></li>
<li><a href="/gostd/regexp/syntax/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/regexp/syntax/perl_groups.go.html">perl_groups.go</a></li>
<li><a href="/gostd/regexp/syntax/prog.go.html">prog.go</a></li>
<li><a href="/gostd/regexp/syntax/prog_test.go.html">prog_test.go</a></li>
<li><a href="/gostd/regexp/syntax/regexp.go.html">regexp.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify.go.html">simplify.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify_test.go.html">simplify_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7916246">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7916302">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7916356">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7916407">package</span>&nbsp;<span class="ident" id="7916415">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7916423">import</span>&nbsp;<span class="op" id="7916430">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7916433">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7916442">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7916449">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7916460">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="7916470">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7916473">type</span>&nbsp;<span class="ident" id="7916478">parseTest</span>&nbsp;<span class="keyword" id="7916488">struct</span>&nbsp;<span class="op" id="7916495">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916498">Regexp</span>&nbsp;<span class="builtintype" id="7916505">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916513">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7916520">string</span><br>
<span class="lineno"></span><span class="op" id="7916527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7916530">var</span>&nbsp;<span class="ident" id="7916534">parseTests</span>&nbsp;<span class="op" id="7916545">=</span>&nbsp;<span class="op" id="7916547">[</span><span class="op" id="7916548">]</span><span class="ident" id="7916549">parseTest</span><span class="op" id="7916558">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7916561">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916576">{</span><span class="string" id="7916577">`a`</span><span class="op" id="7916580">,</span>&nbsp;<span class="string" id="7916582">`lit{a}`</span><span class="op" id="7916590">}</span><span class="op" id="7916591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916594">{</span><span class="string" id="7916595">`a.`</span><span class="op" id="7916599">,</span>&nbsp;<span class="string" id="7916601">`cat{lit{a}dot{}}`</span><span class="op" id="7916619">}</span><span class="op" id="7916620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916623">{</span><span class="string" id="7916624">`a.b`</span><span class="op" id="7916629">,</span>&nbsp;<span class="string" id="7916631">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="7916655">}</span><span class="op" id="7916656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916659">{</span><span class="string" id="7916660">`ab`</span><span class="op" id="7916664">,</span>&nbsp;<span class="string" id="7916666">`str{ab}`</span><span class="op" id="7916675">}</span><span class="op" id="7916676">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916679">{</span><span class="string" id="7916680">`a.b.c`</span><span class="op" id="7916687">,</span>&nbsp;<span class="string" id="7916689">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="7916724">}</span><span class="op" id="7916725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916728">{</span><span class="string" id="7916729">`abc`</span><span class="op" id="7916734">,</span>&nbsp;<span class="string" id="7916736">`str{abc}`</span><span class="op" id="7916746">}</span><span class="op" id="7916747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916750">{</span><span class="string" id="7916751">`a|^`</span><span class="op" id="7916756">,</span>&nbsp;<span class="string" id="7916758">`alt{lit{a}bol{}}`</span><span class="op" id="7916776">}</span><span class="op" id="7916777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916780">{</span><span class="string" id="7916781">`a|b`</span><span class="op" id="7916786">,</span>&nbsp;<span class="string" id="7916788">`cc{0x61-0x62}`</span><span class="op" id="7916803">}</span><span class="op" id="7916804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916807">{</span><span class="string" id="7916808">`(a)`</span><span class="op" id="7916813">,</span>&nbsp;<span class="string" id="7916815">`cap{lit{a}}`</span><span class="op" id="7916828">}</span><span class="op" id="7916829">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916832">{</span><span class="string" id="7916833">`(a)|b`</span><span class="op" id="7916840">,</span>&nbsp;<span class="string" id="7916842">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="7916866">}</span><span class="op" id="7916867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916870">{</span><span class="string" id="7916871">`a*`</span><span class="op" id="7916875">,</span>&nbsp;<span class="string" id="7916877">`star{lit{a}}`</span><span class="op" id="7916891">}</span><span class="op" id="7916892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916895">{</span><span class="string" id="7916896">`a+`</span><span class="op" id="7916900">,</span>&nbsp;<span class="string" id="7916902">`plus{lit{a}}`</span><span class="op" id="7916916">}</span><span class="op" id="7916917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916920">{</span><span class="string" id="7916921">`a?`</span><span class="op" id="7916925">,</span>&nbsp;<span class="string" id="7916927">`que{lit{a}}`</span><span class="op" id="7916940">}</span><span class="op" id="7916941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916944">{</span><span class="string" id="7916945">`a{2}`</span><span class="op" id="7916951">,</span>&nbsp;<span class="string" id="7916953">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="7916970">}</span><span class="op" id="7916971">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916974">{</span><span class="string" id="7916975">`a{2,3}`</span><span class="op" id="7916983">,</span>&nbsp;<span class="string" id="7916985">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="7917002">}</span><span class="op" id="7917003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917006">{</span><span class="string" id="7917007">`a{2,}`</span><span class="op" id="7917014">,</span>&nbsp;<span class="string" id="7917016">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7917034">}</span><span class="op" id="7917035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917038">{</span><span class="string" id="7917039">`a*?`</span><span class="op" id="7917044">,</span>&nbsp;<span class="string" id="7917046">`nstar{lit{a}}`</span><span class="op" id="7917061">}</span><span class="op" id="7917062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917065">{</span><span class="string" id="7917066">`a+?`</span><span class="op" id="7917071">,</span>&nbsp;<span class="string" id="7917073">`nplus{lit{a}}`</span><span class="op" id="7917088">}</span><span class="op" id="7917089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917092">{</span><span class="string" id="7917093">`a??`</span><span class="op" id="7917098">,</span>&nbsp;<span class="string" id="7917100">`nque{lit{a}}`</span><span class="op" id="7917114">}</span><span class="op" id="7917115">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917118">{</span><span class="string" id="7917119">`a{2}?`</span><span class="op" id="7917126">,</span>&nbsp;<span class="string" id="7917128">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="7917146">}</span><span class="op" id="7917147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917150">{</span><span class="string" id="7917151">`a{2,3}?`</span><span class="op" id="7917160">,</span>&nbsp;<span class="string" id="7917162">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="7917180">}</span><span class="op" id="7917181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917184">{</span><span class="string" id="7917185">`a{2,}?`</span><span class="op" id="7917193">,</span>&nbsp;<span class="string" id="7917195">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7917214">}</span><span class="op" id="7917215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7917218">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917261">{</span><span class="string" id="7917262">`x{1001`</span><span class="op" id="7917270">,</span>&nbsp;<span class="string" id="7917272">`str{x{1001}`</span><span class="op" id="7917285">}</span><span class="op" id="7917286">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917289">{</span><span class="string" id="7917290">`x{9876543210`</span><span class="op" id="7917304">,</span>&nbsp;<span class="string" id="7917306">`str{x{9876543210}`</span><span class="op" id="7917325">}</span><span class="op" id="7917326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917329">{</span><span class="string" id="7917330">`x{9876543210,`</span><span class="op" id="7917345">,</span>&nbsp;<span class="string" id="7917347">`str{x{9876543210,}`</span><span class="op" id="7917367">}</span><span class="op" id="7917368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917371">{</span><span class="string" id="7917372">`x{2,1`</span><span class="op" id="7917379">,</span>&nbsp;<span class="string" id="7917381">`str{x{2,1}`</span><span class="op" id="7917393">}</span><span class="op" id="7917394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917397">{</span><span class="string" id="7917398">`x{1,9876543210`</span><span class="op" id="7917414">,</span>&nbsp;<span class="string" id="7917416">`str{x{1,9876543210}`</span><span class="op" id="7917437">}</span><span class="op" id="7917438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917441">{</span><span class="string" id="7917442">``</span><span class="op" id="7917444">,</span>&nbsp;<span class="string" id="7917446">`emp{}`</span><span class="op" id="7917453">}</span><span class="op" id="7917454">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917457">{</span><span class="string" id="7917458">`|`</span><span class="op" id="7917461">,</span>&nbsp;<span class="string" id="7917463">`emp{}`</span><span class="op" id="7917470">}</span><span class="op" id="7917471">,</span>&nbsp;<span class="comment" id="7917473">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917510">{</span><span class="string" id="7917511">`|x|`</span><span class="op" id="7917516">,</span>&nbsp;<span class="string" id="7917518">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="7917541">}</span><span class="op" id="7917542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917545">{</span><span class="string" id="7917546">`.`</span><span class="op" id="7917549">,</span>&nbsp;<span class="string" id="7917551">`dot{}`</span><span class="op" id="7917558">}</span><span class="op" id="7917559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917562">{</span><span class="string" id="7917563">`^`</span><span class="op" id="7917566">,</span>&nbsp;<span class="string" id="7917568">`bol{}`</span><span class="op" id="7917575">}</span><span class="op" id="7917576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917579">{</span><span class="string" id="7917580">`$`</span><span class="op" id="7917583">,</span>&nbsp;<span class="string" id="7917585">`eol{}`</span><span class="op" id="7917592">}</span><span class="op" id="7917593">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917596">{</span><span class="string" id="7917597">`\|`</span><span class="op" id="7917601">,</span>&nbsp;<span class="string" id="7917603">`lit{|}`</span><span class="op" id="7917611">}</span><span class="op" id="7917612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917615">{</span><span class="string" id="7917616">`\(`</span><span class="op" id="7917620">,</span>&nbsp;<span class="string" id="7917622">`lit{(}`</span><span class="op" id="7917630">}</span><span class="op" id="7917631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917634">{</span><span class="string" id="7917635">`\)`</span><span class="op" id="7917639">,</span>&nbsp;<span class="string" id="7917641">`lit{)}`</span><span class="op" id="7917649">}</span><span class="op" id="7917650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917653">{</span><span class="string" id="7917654">`\*`</span><span class="op" id="7917658">,</span>&nbsp;<span class="string" id="7917660">`lit{*}`</span><span class="op" id="7917668">}</span><span class="op" id="7917669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917672">{</span><span class="string" id="7917673">`\+`</span><span class="op" id="7917677">,</span>&nbsp;<span class="string" id="7917679">`lit{+}`</span><span class="op" id="7917687">}</span><span class="op" id="7917688">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917691">{</span><span class="string" id="7917692">`\?`</span><span class="op" id="7917696">,</span>&nbsp;<span class="string" id="7917698">`lit{?}`</span><span class="op" id="7917706">}</span><span class="op" id="7917707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917710">{</span><span class="string" id="7917711">`{`</span><span class="op" id="7917714">,</span>&nbsp;<span class="string" id="7917716">`lit{{}`</span><span class="op" id="7917724">}</span><span class="op" id="7917725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917728">{</span><span class="string" id="7917729">`}`</span><span class="op" id="7917732">,</span>&nbsp;<span class="string" id="7917734">`lit{}}`</span><span class="op" id="7917742">}</span><span class="op" id="7917743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917746">{</span><span class="string" id="7917747">`\.`</span><span class="op" id="7917751">,</span>&nbsp;<span class="string" id="7917753">`lit{.}`</span><span class="op" id="7917761">}</span><span class="op" id="7917762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917765">{</span><span class="string" id="7917766">`\^`</span><span class="op" id="7917770">,</span>&nbsp;<span class="string" id="7917772">`lit{^}`</span><span class="op" id="7917780">}</span><span class="op" id="7917781">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917784">{</span><span class="string" id="7917785">`\$`</span><span class="op" id="7917789">,</span>&nbsp;<span class="string" id="7917791">`lit{$}`</span><span class="op" id="7917799">}</span><span class="op" id="7917800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917803">{</span><span class="string" id="7917804">`\\`</span><span class="op" id="7917808">,</span>&nbsp;<span class="string" id="7917810">`lit{\}`</span><span class="op" id="7917818">}</span><span class="op" id="7917819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917822">{</span><span class="string" id="7917823">`[ace]`</span><span class="op" id="7917830">,</span>&nbsp;<span class="string" id="7917832">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="7917852">}</span><span class="op" id="7917853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917856">{</span><span class="string" id="7917857">`[abc]`</span><span class="op" id="7917864">,</span>&nbsp;<span class="string" id="7917866">`cc{0x61-0x63}`</span><span class="op" id="7917881">}</span><span class="op" id="7917882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917885">{</span><span class="string" id="7917886">`[a-z]`</span><span class="op" id="7917893">,</span>&nbsp;<span class="string" id="7917895">`cc{0x61-0x7a}`</span><span class="op" id="7917910">}</span><span class="op" id="7917911">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917914">{</span><span class="string" id="7917915">`[a]`</span><span class="op" id="7917920">,</span>&nbsp;<span class="string" id="7917922">`lit{a}`</span><span class="op" id="7917930">}</span><span class="op" id="7917931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917934">{</span><span class="string" id="7917935">`\-`</span><span class="op" id="7917939">,</span>&nbsp;<span class="string" id="7917941">`lit{-}`</span><span class="op" id="7917949">}</span><span class="op" id="7917950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917953">{</span><span class="string" id="7917954">`-`</span><span class="op" id="7917957">,</span>&nbsp;<span class="string" id="7917959">`lit{-}`</span><span class="op" id="7917967">}</span><span class="op" id="7917968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917971">{</span><span class="string" id="7917972">`\_`</span><span class="op" id="7917976">,</span>&nbsp;<span class="string" id="7917978">`lit{_}`</span><span class="op" id="7917986">}</span><span class="op" id="7917987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917990">{</span><span class="string" id="7917991">`abc`</span><span class="op" id="7917996">,</span>&nbsp;<span class="string" id="7917998">`str{abc}`</span><span class="op" id="7918008">}</span><span class="op" id="7918009">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918012">{</span><span class="string" id="7918013">`abc|def`</span><span class="op" id="7918022">,</span>&nbsp;<span class="string" id="7918024">`alt{str{abc}str{def}}`</span><span class="op" id="7918047">}</span><span class="op" id="7918048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918051">{</span><span class="string" id="7918052">`abc|def|ghi`</span><span class="op" id="7918065">,</span>&nbsp;<span class="string" id="7918067">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="7918098">}</span><span class="op" id="7918099">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7918103">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918133">{</span><span class="string" id="7918134">`[[:lower:]]`</span><span class="op" id="7918147">,</span>&nbsp;<span class="string" id="7918149">`cc{0x61-0x7a}`</span><span class="op" id="7918164">}</span><span class="op" id="7918165">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918168">{</span><span class="string" id="7918169">`[a-z]`</span><span class="op" id="7918176">,</span>&nbsp;<span class="string" id="7918178">`cc{0x61-0x7a}`</span><span class="op" id="7918193">}</span><span class="op" id="7918194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918197">{</span><span class="string" id="7918198">`[^[:lower:]]`</span><span class="op" id="7918212">,</span>&nbsp;<span class="string" id="7918214">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7918242">}</span><span class="op" id="7918243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918246">{</span><span class="string" id="7918247">`[[:^lower:]]`</span><span class="op" id="7918261">,</span>&nbsp;<span class="string" id="7918263">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7918291">}</span><span class="op" id="7918292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918295">{</span><span class="string" id="7918296">`(?i)[[:lower:]]`</span><span class="op" id="7918313">,</span>&nbsp;<span class="string" id="7918315">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7918353">}</span><span class="op" id="7918354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918357">{</span><span class="string" id="7918358">`(?i)[a-z]`</span><span class="op" id="7918369">,</span>&nbsp;<span class="string" id="7918371">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7918409">}</span><span class="op" id="7918410">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918413">{</span><span class="string" id="7918414">`(?i)[^[:lower:]]`</span><span class="op" id="7918432">,</span>&nbsp;<span class="string" id="7918434">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7918498">}</span><span class="op" id="7918499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918502">{</span><span class="string" id="7918503">`(?i)[[:^lower:]]`</span><span class="op" id="7918521">,</span>&nbsp;<span class="string" id="7918523">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7918587">}</span><span class="op" id="7918588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918591">{</span><span class="string" id="7918592">`\d`</span><span class="op" id="7918596">,</span>&nbsp;<span class="string" id="7918598">`cc{0x30-0x39}`</span><span class="op" id="7918613">}</span><span class="op" id="7918614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918617">{</span><span class="string" id="7918618">`\D`</span><span class="op" id="7918622">,</span>&nbsp;<span class="string" id="7918624">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="7918652">}</span><span class="op" id="7918653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918656">{</span><span class="string" id="7918657">`\s`</span><span class="op" id="7918661">,</span>&nbsp;<span class="string" id="7918663">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="7918689">}</span><span class="op" id="7918690">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918693">{</span><span class="string" id="7918694">`\S`</span><span class="op" id="7918698">,</span>&nbsp;<span class="string" id="7918700">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="7918740">}</span><span class="op" id="7918741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918744">{</span><span class="string" id="7918745">`\w`</span><span class="op" id="7918749">,</span>&nbsp;<span class="string" id="7918751">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="7918791">}</span><span class="op" id="7918792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918795">{</span><span class="string" id="7918796">`\W`</span><span class="op" id="7918800">,</span>&nbsp;<span class="string" id="7918802">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7918855">}</span><span class="op" id="7918856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918859">{</span><span class="string" id="7918860">`(?i)\w`</span><span class="op" id="7918868">,</span>&nbsp;<span class="string" id="7918870">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7918923">}</span><span class="op" id="7918924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918927">{</span><span class="string" id="7918928">`(?i)\W`</span><span class="op" id="7918936">,</span>&nbsp;<span class="string" id="7918938">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7919017">}</span><span class="op" id="7919018">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919021">{</span><span class="string" id="7919022">`[^\\]`</span><span class="op" id="7919029">,</span>&nbsp;<span class="string" id="7919031">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="7919059">}</span><span class="op" id="7919060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7919063">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7919107">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919154">{</span><span class="string" id="7919155">`\p{Braille}`</span><span class="op" id="7919168">,</span>&nbsp;<span class="string" id="7919170">`cc{0x2800-0x28ff}`</span><span class="op" id="7919189">}</span><span class="op" id="7919190">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919193">{</span><span class="string" id="7919194">`\P{Braille}`</span><span class="op" id="7919207">,</span>&nbsp;<span class="string" id="7919209">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7919241">}</span><span class="op" id="7919242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919245">{</span><span class="string" id="7919246">`\p{^Braille}`</span><span class="op" id="7919260">,</span>&nbsp;<span class="string" id="7919262">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7919294">}</span><span class="op" id="7919295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919298">{</span><span class="string" id="7919299">`\P{^Braille}`</span><span class="op" id="7919313">,</span>&nbsp;<span class="string" id="7919315">`cc{0x2800-0x28ff}`</span><span class="op" id="7919334">}</span><span class="op" id="7919335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919338">{</span><span class="string" id="7919339">`\pZ`</span><span class="op" id="7919344">,</span>&nbsp;<span class="string" id="7919346">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7919417">}</span><span class="op" id="7919418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919421">{</span><span class="string" id="7919422">`[\p{Braille}]`</span><span class="op" id="7919437">,</span>&nbsp;<span class="string" id="7919439">`cc{0x2800-0x28ff}`</span><span class="op" id="7919458">}</span><span class="op" id="7919459">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919462">{</span><span class="string" id="7919463">`[\P{Braille}]`</span><span class="op" id="7919478">,</span>&nbsp;<span class="string" id="7919480">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7919512">}</span><span class="op" id="7919513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919516">{</span><span class="string" id="7919517">`[\p{^Braille}]`</span><span class="op" id="7919533">,</span>&nbsp;<span class="string" id="7919535">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7919567">}</span><span class="op" id="7919568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919571">{</span><span class="string" id="7919572">`[\P{^Braille}]`</span><span class="op" id="7919588">,</span>&nbsp;<span class="string" id="7919590">`cc{0x2800-0x28ff}`</span><span class="op" id="7919609">}</span><span class="op" id="7919610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919613">{</span><span class="string" id="7919614">`[\pZ]`</span><span class="op" id="7919621">,</span>&nbsp;<span class="string" id="7919623">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7919694">}</span><span class="op" id="7919695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919698">{</span><span class="string" id="7919699">`\p{Lu}`</span><span class="op" id="7919707">,</span>&nbsp;<span class="ident" id="7919709">mkCharClass</span><span class="op" id="7919720">(</span><span class="ident" id="7919721">unicode</span><span class="op" id="7919728">.</span><span class="ident" id="7919729">IsUpper</span><span class="op" id="7919736">)</span><span class="op" id="7919737">}</span><span class="op" id="7919738">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919741">{</span><span class="string" id="7919742">`[\p{Lu}]`</span><span class="op" id="7919752">,</span>&nbsp;<span class="ident" id="7919754">mkCharClass</span><span class="op" id="7919765">(</span><span class="ident" id="7919766">unicode</span><span class="op" id="7919773">.</span><span class="ident" id="7919774">IsUpper</span><span class="op" id="7919781">)</span><span class="op" id="7919782">}</span><span class="op" id="7919783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919786">{</span><span class="string" id="7919787">`(?i)[\p{Lu}]`</span><span class="op" id="7919801">,</span>&nbsp;<span class="ident" id="7919803">mkCharClass</span><span class="op" id="7919814">(</span><span class="ident" id="7919815">isUpperFold</span><span class="op" id="7919826">)</span><span class="op" id="7919827">}</span><span class="op" id="7919828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919831">{</span><span class="string" id="7919832">`\p{Any}`</span><span class="op" id="7919841">,</span>&nbsp;<span class="string" id="7919843">`dot{}`</span><span class="op" id="7919850">}</span><span class="op" id="7919851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919854">{</span><span class="string" id="7919855">`\p{^Any}`</span><span class="op" id="7919865">,</span>&nbsp;<span class="string" id="7919867">`cc{}`</span><span class="op" id="7919873">}</span><span class="op" id="7919874">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7919878">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919894">{</span><span class="string" id="7919895">`[\012-\234]\141`</span><span class="op" id="7919912">,</span>&nbsp;<span class="string" id="7919914">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="7919939">}</span><span class="op" id="7919940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919943">{</span><span class="string" id="7919944">`[\x{41}-\x7a]\x61`</span><span class="op" id="7919963">,</span>&nbsp;<span class="string" id="7919965">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="7919991">}</span><span class="op" id="7919992">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7919996">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920038">{</span><span class="string" id="7920039">`a{,2}`</span><span class="op" id="7920046">,</span>&nbsp;<span class="string" id="7920048">`str{a{,2}}`</span><span class="op" id="7920060">}</span><span class="op" id="7920061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920064">{</span><span class="string" id="7920065">`\.\^\$\\`</span><span class="op" id="7920075">,</span>&nbsp;<span class="string" id="7920077">`str{.^$\}`</span><span class="op" id="7920088">}</span><span class="op" id="7920089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920092">{</span><span class="string" id="7920093">`[a-zABC]`</span><span class="op" id="7920103">,</span>&nbsp;<span class="string" id="7920105">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="7920130">}</span><span class="op" id="7920131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920134">{</span><span class="string" id="7920135">`[^a]`</span><span class="op" id="7920141">,</span>&nbsp;<span class="string" id="7920143">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7920171">}</span><span class="op" id="7920172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920175">{</span><span class="string" id="7920176">`[α-ε☺]`</span><span class="op" id="7920188">,</span>&nbsp;<span class="string" id="7920190">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="7920214">}</span><span class="op" id="7920215">,</span>&nbsp;<span class="comment" id="7920217">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920227">{</span><span class="string" id="7920228">`a*{`</span><span class="op" id="7920233">,</span>&nbsp;<span class="string" id="7920235">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="7920260">}</span><span class="op" id="7920261">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7920265">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920286">{</span><span class="string" id="7920287">`(?:ab)*`</span><span class="op" id="7920296">,</span>&nbsp;<span class="string" id="7920298">`star{str{ab}}`</span><span class="op" id="7920313">}</span><span class="op" id="7920314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920317">{</span><span class="string" id="7920318">`(ab)*`</span><span class="op" id="7920325">,</span>&nbsp;<span class="string" id="7920327">`star{cap{str{ab}}}`</span><span class="op" id="7920347">}</span><span class="op" id="7920348">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920351">{</span><span class="string" id="7920352">`ab|cd`</span><span class="op" id="7920359">,</span>&nbsp;<span class="string" id="7920361">`alt{str{ab}str{cd}}`</span><span class="op" id="7920382">}</span><span class="op" id="7920383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920386">{</span><span class="string" id="7920387">`a(b|c)d`</span><span class="op" id="7920396">,</span>&nbsp;<span class="string" id="7920398">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="7920435">}</span><span class="op" id="7920436">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7920440">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920461">{</span><span class="string" id="7920462">`(?:a)`</span><span class="op" id="7920469">,</span>&nbsp;<span class="string" id="7920471">`lit{a}`</span><span class="op" id="7920479">}</span><span class="op" id="7920480">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920483">{</span><span class="string" id="7920484">`(?:ab)(?:cd)`</span><span class="op" id="7920498">,</span>&nbsp;<span class="string" id="7920500">`str{abcd}`</span><span class="op" id="7920511">}</span><span class="op" id="7920512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920515">{</span><span class="string" id="7920516">`(?:a+b+)(?:c+d+)`</span><span class="op" id="7920534">,</span>&nbsp;<span class="string" id="7920536">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7920591">}</span><span class="op" id="7920592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920595">{</span><span class="string" id="7920596">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="7920617">,</span>&nbsp;<span class="string" id="7920619">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7920674">}</span><span class="op" id="7920675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920678">{</span><span class="string" id="7920679">`(?:a|b)|(?:c|d)`</span><span class="op" id="7920696">,</span>&nbsp;<span class="string" id="7920698">`cc{0x61-0x64}`</span><span class="op" id="7920713">}</span><span class="op" id="7920714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920717">{</span><span class="string" id="7920718">`a|.`</span><span class="op" id="7920723">,</span>&nbsp;<span class="string" id="7920725">`dot{}`</span><span class="op" id="7920732">}</span><span class="op" id="7920733">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920736">{</span><span class="string" id="7920737">`.|a`</span><span class="op" id="7920742">,</span>&nbsp;<span class="string" id="7920744">`dot{}`</span><span class="op" id="7920751">}</span><span class="op" id="7920752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920755">{</span><span class="string" id="7920756">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="7920783">,</span>&nbsp;<span class="string" id="7920785">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="7920835">}</span><span class="op" id="7920836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920839">{</span><span class="string" id="7920840">`(?:[abc]|A|Z)`</span><span class="op" id="7920855">,</span>&nbsp;<span class="string" id="7920857">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="7920882">}</span><span class="op" id="7920883">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7920887">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920917">{</span><span class="string" id="7920918">`\Q+|*?{[\E`</span><span class="op" id="7920930">,</span>&nbsp;<span class="string" id="7920932">`str{+|*?{[}`</span><span class="op" id="7920945">}</span><span class="op" id="7920946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920949">{</span><span class="string" id="7920950">`\Q+\E+`</span><span class="op" id="7920958">,</span>&nbsp;<span class="string" id="7920960">`plus{lit{+}}`</span><span class="op" id="7920974">}</span><span class="op" id="7920975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920978">{</span><span class="string" id="7920979">`\Q\\E`</span><span class="op" id="7920986">,</span>&nbsp;<span class="string" id="7920988">`lit{\}`</span><span class="op" id="7920996">}</span><span class="op" id="7920997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921000">{</span><span class="string" id="7921001">`\Q\\\E`</span><span class="op" id="7921009">,</span>&nbsp;<span class="string" id="7921011">`str{\\}`</span><span class="op" id="7921020">}</span><span class="op" id="7921021">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921025">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921049">{</span><span class="string" id="7921050">`(?m)^`</span><span class="op" id="7921057">,</span>&nbsp;<span class="string" id="7921059">`bol{}`</span><span class="op" id="7921066">}</span><span class="op" id="7921067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921070">{</span><span class="string" id="7921071">`(?m)$`</span><span class="op" id="7921078">,</span>&nbsp;<span class="string" id="7921080">`eol{}`</span><span class="op" id="7921087">}</span><span class="op" id="7921088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921091">{</span><span class="string" id="7921092">`(?-m)^`</span><span class="op" id="7921100">,</span>&nbsp;<span class="string" id="7921102">`bot{}`</span><span class="op" id="7921109">}</span><span class="op" id="7921110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921113">{</span><span class="string" id="7921114">`(?-m)$`</span><span class="op" id="7921122">,</span>&nbsp;<span class="string" id="7921124">`eot{}`</span><span class="op" id="7921131">}</span><span class="op" id="7921132">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921135">{</span><span class="string" id="7921136">`(?m)\A`</span><span class="op" id="7921144">,</span>&nbsp;<span class="string" id="7921146">`bot{}`</span><span class="op" id="7921153">}</span><span class="op" id="7921154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921157">{</span><span class="string" id="7921158">`(?m)\z`</span><span class="op" id="7921166">,</span>&nbsp;<span class="string" id="7921168">`eot{\z}`</span><span class="op" id="7921177">}</span><span class="op" id="7921178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921181">{</span><span class="string" id="7921182">`(?-m)\A`</span><span class="op" id="7921191">,</span>&nbsp;<span class="string" id="7921193">`bot{}`</span><span class="op" id="7921200">}</span><span class="op" id="7921201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921204">{</span><span class="string" id="7921205">`(?-m)\z`</span><span class="op" id="7921214">,</span>&nbsp;<span class="string" id="7921216">`eot{\z}`</span><span class="op" id="7921225">}</span><span class="op" id="7921226">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921230">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921254">{</span><span class="string" id="7921255">`(?P&lt;name&gt;a)`</span><span class="op" id="7921268">,</span>&nbsp;<span class="string" id="7921270">`cap{name:lit{a}}`</span><span class="op" id="7921288">}</span><span class="op" id="7921289">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921293">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921318">{</span><span class="string" id="7921319">`[Aa]`</span><span class="op" id="7921325">,</span>&nbsp;<span class="string" id="7921327">`litfold{A}`</span><span class="op" id="7921339">}</span><span class="op" id="7921340">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921343">{</span><span class="string" id="7921344">`[\x{100}\x{101}]`</span><span class="op" id="7921362">,</span>&nbsp;<span class="string" id="7921364">`litfold{Ā}`</span><span class="op" id="7921377">}</span><span class="op" id="7921378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921381">{</span><span class="string" id="7921382">`[Δδ]`</span><span class="op" id="7921390">,</span>&nbsp;<span class="string" id="7921392">`litfold{Δ}`</span><span class="op" id="7921405">}</span><span class="op" id="7921406">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921410">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921422">{</span><span class="string" id="7921423">`abcde`</span><span class="op" id="7921430">,</span>&nbsp;<span class="string" id="7921432">`str{abcde}`</span><span class="op" id="7921444">}</span><span class="op" id="7921445">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921448">{</span><span class="string" id="7921449">`[Aa][Bb]cd`</span><span class="op" id="7921461">,</span>&nbsp;<span class="string" id="7921463">`cat{strfold{AB}str{cd}}`</span><span class="op" id="7921488">}</span><span class="op" id="7921489">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921493">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921508">{</span><span class="string" id="7921509">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7921530">,</span>&nbsp;<span class="string" id="7921532">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7921611">}</span><span class="op" id="7921612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921615">{</span><span class="string" id="7921616">`ax+y|ax+z|ay+w`</span><span class="op" id="7921632">,</span>&nbsp;<span class="string" id="7921634">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="7921705">}</span><span class="op" id="7921706">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921710">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921725">{</span><span class="string" id="7921726">`(?:.)`</span><span class="op" id="7921733">,</span>&nbsp;<span class="string" id="7921735">`dot{}`</span><span class="op" id="7921742">}</span><span class="op" id="7921743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921746">{</span><span class="string" id="7921747">`(?:x|(?:xa))`</span><span class="op" id="7921761">,</span>&nbsp;<span class="string" id="7921763">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="7921792">}</span><span class="op" id="7921793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921796">{</span><span class="string" id="7921797">`(?:.|(?:.a))`</span><span class="op" id="7921811">,</span>&nbsp;<span class="string" id="7921813">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="7921841">}</span><span class="op" id="7921842">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921845">{</span><span class="string" id="7921846">`(?:A(?:A|a))`</span><span class="op" id="7921860">,</span>&nbsp;<span class="string" id="7921862">`cat{lit{A}litfold{A}}`</span><span class="op" id="7921885">}</span><span class="op" id="7921886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921889">{</span><span class="string" id="7921890">`(?:A|a)`</span><span class="op" id="7921899">,</span>&nbsp;<span class="string" id="7921901">`litfold{A}`</span><span class="op" id="7921913">}</span><span class="op" id="7921914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921917">{</span><span class="string" id="7921918">`A|(?:A|a)`</span><span class="op" id="7921929">,</span>&nbsp;<span class="string" id="7921931">`litfold{A}`</span><span class="op" id="7921943">}</span><span class="op" id="7921944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921947">{</span><span class="string" id="7921948">`(?s).`</span><span class="op" id="7921955">,</span>&nbsp;<span class="string" id="7921957">`dot{}`</span><span class="op" id="7921964">}</span><span class="op" id="7921965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921968">{</span><span class="string" id="7921969">`(?-s).`</span><span class="op" id="7921977">,</span>&nbsp;<span class="string" id="7921979">`dnl{}`</span><span class="op" id="7921986">}</span><span class="op" id="7921987">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921990">{</span><span class="string" id="7921991">`(?:(?:^).)`</span><span class="op" id="7922003">,</span>&nbsp;<span class="string" id="7922005">`cat{bol{}dot{}}`</span><span class="op" id="7922022">}</span><span class="op" id="7922023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922026">{</span><span class="string" id="7922027">`(?-s)(?:(?:^).)`</span><span class="op" id="7922044">,</span>&nbsp;<span class="string" id="7922046">`cat{bol{}dnl{}}`</span><span class="op" id="7922063">}</span><span class="op" id="7922064">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7922068">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922089">{</span><span class="string" id="7922090">`abc|abd`</span><span class="op" id="7922099">,</span>&nbsp;<span class="string" id="7922101">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7922128">}</span><span class="op" id="7922129">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922132">{</span><span class="string" id="7922133">`a(?:b)c|abd`</span><span class="op" id="7922146">,</span>&nbsp;<span class="string" id="7922148">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7922175">}</span><span class="op" id="7922176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922179">{</span><span class="string" id="7922180">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7922201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7922205">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="7922259">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7922264">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7922292">}</span><span class="op" id="7922293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922296">{</span><span class="string" id="7922297">`abc|x|abd`</span><span class="op" id="7922308">,</span>&nbsp;<span class="string" id="7922310">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="7922339">}</span><span class="op" id="7922340">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922343">{</span><span class="string" id="7922344">`(?i)abc|ABD`</span><span class="op" id="7922357">,</span>&nbsp;<span class="string" id="7922359">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="7922400">}</span><span class="op" id="7922401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922404">{</span><span class="string" id="7922405">`[ab]c|[ab]d`</span><span class="op" id="7922418">,</span>&nbsp;<span class="string" id="7922420">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="7922453">}</span><span class="op" id="7922454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922457">{</span><span class="string" id="7922458">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="7922481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7922485">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="7922524">}</span><span class="op" id="7922525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922528">{</span><span class="string" id="7922529">`x{2}|x{2}[0-9]`</span><span class="op" id="7922545">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7922549">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="7922594">}</span><span class="op" id="7922595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922598">{</span><span class="string" id="7922599">`x{2}y|x{2}[0-9]y`</span><span class="op" id="7922617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7922621">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="7922678">}</span><span class="op" id="7922679">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7922683">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922706">{</span><span class="string" id="7922707">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="7922757">,</span>&nbsp;<span class="string" id="7922759">``</span><span class="op" id="7922761">}</span><span class="op" id="7922762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922765">{</span><span class="string" id="7922766">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="7922819">,</span>&nbsp;<span class="string" id="7922821">``</span><span class="op" id="7922823">}</span><span class="op" id="7922824">,</span><br>
<span class="lineno"></span><span class="op" id="7922826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7922829">const</span>&nbsp;<span class="ident" id="7922835">testFlags</span>&nbsp;<span class="op" id="7922845">=</span>&nbsp;<span class="ident" id="7922847">MatchNL</span>&nbsp;<span class="op" id="7922855">|</span>&nbsp;<span class="ident" id="7922857">PerlX</span>&nbsp;<span class="op" id="7922863">|</span>&nbsp;<span class="ident" id="7922865">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="7922880">func</span>&nbsp;<span class="ident" id="7922885">TestParseSimple</span><span class="op" id="7922900">(</span><span class="ident" id="7922901">t</span>&nbsp;<span class="op" id="7922903">*</span><span class="ident" id="7922904">testing</span><span class="op" id="7922911">.</span><span class="ident" id="7922912">T</span><span class="op" id="7922913">)</span>&nbsp;<span class="op" id="7922915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922918">testParseDump</span><span class="op" id="7922931">(</span><span class="ident" id="7922932">t</span><span class="op" id="7922933">,</span>&nbsp;<span class="ident" id="7922935">parseTests</span><span class="op" id="7922945">,</span>&nbsp;<span class="ident" id="7922947">testFlags</span><span class="op" id="7922956">)</span><br>
<span class="lineno"></span><span class="op" id="7922958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7922961">var</span>&nbsp;<span class="ident" id="7922965">foldcaseTests</span>&nbsp;<span class="op" id="7922979">=</span>&nbsp;<span class="op" id="7922981">[</span><span class="op" id="7922982">]</span><span class="ident" id="7922983">parseTest</span><span class="op" id="7922992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922995">{</span><span class="string" id="7922996">`AbCdE`</span><span class="op" id="7923003">,</span>&nbsp;<span class="string" id="7923005">`strfold{ABCDE}`</span><span class="op" id="7923021">}</span><span class="op" id="7923022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923025">{</span><span class="string" id="7923026">`[Aa]`</span><span class="op" id="7923032">,</span>&nbsp;<span class="string" id="7923034">`litfold{A}`</span><span class="op" id="7923046">}</span><span class="op" id="7923047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923050">{</span><span class="string" id="7923051">`a`</span><span class="op" id="7923054">,</span>&nbsp;<span class="string" id="7923056">`litfold{A}`</span><span class="op" id="7923068">}</span><span class="op" id="7923069">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923073">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923142">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923190">{</span><span class="string" id="7923191">`A[F-g]`</span><span class="op" id="7923199">,</span>&nbsp;<span class="string" id="7923201">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="7923244">}</span><span class="op" id="7923245">,</span>&nbsp;<span class="comment" id="7923247">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923264">{</span><span class="string" id="7923265">`[[:upper:]]`</span><span class="op" id="7923278">,</span>&nbsp;<span class="string" id="7923280">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7923318">}</span><span class="op" id="7923319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923322">{</span><span class="string" id="7923323">`[[:lower:]]`</span><span class="op" id="7923336">,</span>&nbsp;<span class="string" id="7923338">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7923376">}</span><span class="op" id="7923377">,</span><br>
<span class="lineno">225</span><span class="op" id="7923379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7923382">func</span>&nbsp;<span class="ident" id="7923387">TestParseFoldCase</span><span class="op" id="7923404">(</span><span class="ident" id="7923405">t</span>&nbsp;<span class="op" id="7923407">*</span><span class="ident" id="7923408">testing</span><span class="op" id="7923415">.</span><span class="ident" id="7923416">T</span><span class="op" id="7923417">)</span>&nbsp;<span class="op" id="7923419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923422">testParseDump</span><span class="op" id="7923435">(</span><span class="ident" id="7923436">t</span><span class="op" id="7923437">,</span>&nbsp;<span class="ident" id="7923439">foldcaseTests</span><span class="op" id="7923452">,</span>&nbsp;<span class="ident" id="7923454">FoldCase</span><span class="op" id="7923462">)</span><br>
<span class="lineno"></span><span class="op" id="7923464">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7923467">var</span>&nbsp;<span class="ident" id="7923471">literalTests</span>&nbsp;<span class="op" id="7923484">=</span>&nbsp;<span class="op" id="7923486">[</span><span class="op" id="7923487">]</span><span class="ident" id="7923488">parseTest</span><span class="op" id="7923497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923500">{</span><span class="string" id="7923501">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="7923523">,</span>&nbsp;<span class="string" id="7923525">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="7923552">}</span><span class="op" id="7923553">,</span><br>
<span class="lineno"></span><span class="op" id="7923555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7923558">func</span>&nbsp;<span class="ident" id="7923563">TestParseLiteral</span><span class="op" id="7923579">(</span><span class="ident" id="7923580">t</span>&nbsp;<span class="op" id="7923582">*</span><span class="ident" id="7923583">testing</span><span class="op" id="7923590">.</span><span class="ident" id="7923591">T</span><span class="op" id="7923592">)</span>&nbsp;<span class="op" id="7923594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923597">testParseDump</span><span class="op" id="7923610">(</span><span class="ident" id="7923611">t</span><span class="op" id="7923612">,</span>&nbsp;<span class="ident" id="7923614">literalTests</span><span class="op" id="7923626">,</span>&nbsp;<span class="ident" id="7923628">Literal</span><span class="op" id="7923635">)</span><br>
<span class="lineno"></span><span class="op" id="7923637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7923640">var</span>&nbsp;<span class="ident" id="7923644">matchnlTests</span>&nbsp;<span class="op" id="7923657">=</span>&nbsp;<span class="op" id="7923659">[</span><span class="op" id="7923660">]</span><span class="ident" id="7923661">parseTest</span><span class="op" id="7923670">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923673">{</span><span class="string" id="7923674">`.`</span><span class="op" id="7923677">,</span>&nbsp;<span class="string" id="7923679">`dot{}`</span><span class="op" id="7923686">}</span><span class="op" id="7923687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923690">{</span><span class="string" id="7923691">&#34;\n&#34;</span><span class="op" id="7923695">,</span>&nbsp;<span class="string" id="7923697">&#34;lit{\n}&#34;</span><span class="op" id="7923706">}</span><span class="op" id="7923707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923710">{</span><span class="string" id="7923711">`[^a]`</span><span class="op" id="7923717">,</span>&nbsp;<span class="string" id="7923719">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7923747">}</span><span class="op" id="7923748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923751">{</span><span class="string" id="7923752">`[a\n]`</span><span class="op" id="7923759">,</span>&nbsp;<span class="string" id="7923761">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7923775">}</span><span class="op" id="7923776">,</span><br>
<span class="lineno"></span><span class="op" id="7923778">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="7923781">func</span>&nbsp;<span class="ident" id="7923786">TestParseMatchNL</span><span class="op" id="7923802">(</span><span class="ident" id="7923803">t</span>&nbsp;<span class="op" id="7923805">*</span><span class="ident" id="7923806">testing</span><span class="op" id="7923813">.</span><span class="ident" id="7923814">T</span><span class="op" id="7923815">)</span>&nbsp;<span class="op" id="7923817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923820">testParseDump</span><span class="op" id="7923833">(</span><span class="ident" id="7923834">t</span><span class="op" id="7923835">,</span>&nbsp;<span class="ident" id="7923837">matchnlTests</span><span class="op" id="7923849">,</span>&nbsp;<span class="ident" id="7923851">MatchNL</span><span class="op" id="7923858">)</span><br>
<span class="lineno"></span><span class="op" id="7923860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7923863">var</span>&nbsp;<span class="ident" id="7923867">nomatchnlTests</span>&nbsp;<span class="op" id="7923882">=</span>&nbsp;<span class="op" id="7923884">[</span><span class="op" id="7923885">]</span><span class="ident" id="7923886">parseTest</span><span class="op" id="7923895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923898">{</span><span class="string" id="7923899">`.`</span><span class="op" id="7923902">,</span>&nbsp;<span class="string" id="7923904">`dnl{}`</span><span class="op" id="7923911">}</span><span class="op" id="7923912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923915">{</span><span class="string" id="7923916">&#34;\n&#34;</span><span class="op" id="7923920">,</span>&nbsp;<span class="string" id="7923922">&#34;lit{\n}&#34;</span><span class="op" id="7923931">}</span><span class="op" id="7923932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923935">{</span><span class="string" id="7923936">`[^a]`</span><span class="op" id="7923942">,</span>&nbsp;<span class="string" id="7923944">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7923980">}</span><span class="op" id="7923981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923984">{</span><span class="string" id="7923985">`[a\n]`</span><span class="op" id="7923992">,</span>&nbsp;<span class="string" id="7923994">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7924008">}</span><span class="op" id="7924009">,</span><br>
<span class="lineno">255</span><span class="op" id="7924011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924014">func</span>&nbsp;<span class="ident" id="7924019">TestParseNoMatchNL</span><span class="op" id="7924037">(</span><span class="ident" id="7924038">t</span>&nbsp;<span class="op" id="7924040">*</span><span class="ident" id="7924041">testing</span><span class="op" id="7924048">.</span><span class="ident" id="7924049">T</span><span class="op" id="7924050">)</span>&nbsp;<span class="op" id="7924052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924055">testParseDump</span><span class="op" id="7924068">(</span><span class="ident" id="7924069">t</span><span class="op" id="7924070">,</span>&nbsp;<span class="ident" id="7924072">nomatchnlTests</span><span class="op" id="7924086">,</span>&nbsp;<span class="num" id="7924088">0</span><span class="op" id="7924089">)</span><br>
<span class="lineno"></span><span class="op" id="7924091">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="7924094">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="7924117">func</span>&nbsp;<span class="ident" id="7924122">testParseDump</span><span class="op" id="7924135">(</span><span class="ident" id="7924136">t</span>&nbsp;<span class="op" id="7924138">*</span><span class="ident" id="7924139">testing</span><span class="op" id="7924146">.</span><span class="ident" id="7924147">T</span><span class="op" id="7924148">,</span>&nbsp;<span class="ident" id="7924150">tests</span>&nbsp;<span class="op" id="7924156">[</span><span class="op" id="7924157">]</span><span class="ident" id="7924158">parseTest</span><span class="op" id="7924167">,</span>&nbsp;<span class="ident" id="7924169">flags</span>&nbsp;<span class="ident" id="7924175">Flags</span><span class="op" id="7924180">)</span>&nbsp;<span class="op" id="7924182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924185">for</span>&nbsp;<span class="ident" id="7924189">_</span><span class="op" id="7924190">,</span>&nbsp;<span class="ident" id="7924192">tt</span>&nbsp;<span class="op" id="7924195">:=</span>&nbsp;<span class="keyword" id="7924198">range</span>&nbsp;<span class="ident" id="7924204">tests</span>&nbsp;<span class="op" id="7924210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924214">re</span><span class="op" id="7924216">,</span>&nbsp;<span class="ident" id="7924218">err</span>&nbsp;<span class="op" id="7924222">:=</span>&nbsp;<span class="ident" id="7924225">Parse</span><span class="op" id="7924230">(</span><span class="ident" id="7924231">tt</span><span class="op" id="7924233">.</span><span class="ident" id="7924234">Regexp</span><span class="op" id="7924240">,</span>&nbsp;<span class="ident" id="7924242">flags</span><span class="op" id="7924247">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924251">if</span>&nbsp;<span class="ident" id="7924254">err</span>&nbsp;<span class="op" id="7924258">!=</span>&nbsp;<span class="ident" id="7924261">nil</span>&nbsp;<span class="op" id="7924265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924270">t</span><span class="op" id="7924271">.</span><span class="ident" id="7924272">Errorf</span><span class="op" id="7924278">(</span><span class="string" id="7924279">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7924295">,</span>&nbsp;<span class="ident" id="7924297">tt</span><span class="op" id="7924299">.</span><span class="ident" id="7924300">Regexp</span><span class="op" id="7924306">,</span>&nbsp;<span class="ident" id="7924308">err</span><span class="op" id="7924311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924316">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924331">if</span>&nbsp;<span class="ident" id="7924334">tt</span><span class="op" id="7924336">.</span><span class="ident" id="7924337">Dump</span>&nbsp;<span class="op" id="7924342">==</span>&nbsp;<span class="string" id="7924345">&#34;&#34;</span>&nbsp;<span class="op" id="7924348">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7924353">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924396">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924411">d</span>&nbsp;<span class="op" id="7924413">:=</span>&nbsp;<span class="ident" id="7924416">dump</span><span class="op" id="7924420">(</span><span class="ident" id="7924421">re</span><span class="op" id="7924423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924427">if</span>&nbsp;<span class="ident" id="7924430">d</span>&nbsp;<span class="op" id="7924432">!=</span>&nbsp;<span class="ident" id="7924435">tt</span><span class="op" id="7924437">.</span><span class="ident" id="7924438">Dump</span>&nbsp;<span class="op" id="7924443">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924448">t</span><span class="op" id="7924449">.</span><span class="ident" id="7924450">Errorf</span><span class="op" id="7924456">(</span><span class="string" id="7924457">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7924491">,</span>&nbsp;<span class="ident" id="7924493">tt</span><span class="op" id="7924495">.</span><span class="ident" id="7924496">Regexp</span><span class="op" id="7924502">,</span>&nbsp;<span class="ident" id="7924504">d</span><span class="op" id="7924505">,</span>&nbsp;<span class="ident" id="7924507">tt</span><span class="op" id="7924509">.</span><span class="ident" id="7924510">Dump</span><span class="op" id="7924514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924521">}</span><br>
<span class="lineno"></span><span class="op" id="7924523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="7924526">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="7924587">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="7924616">func</span>&nbsp;<span class="ident" id="7924621">dump</span><span class="op" id="7924625">(</span><span class="ident" id="7924626">re</span>&nbsp;<span class="op" id="7924629">*</span><span class="ident" id="7924630">Regexp</span><span class="op" id="7924636">)</span>&nbsp;<span class="builtintype" id="7924638">string</span>&nbsp;<span class="op" id="7924645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924648">var</span>&nbsp;<span class="ident" id="7924652">b</span>&nbsp;<span class="ident" id="7924654">bytes</span><span class="op" id="7924659">.</span><span class="ident" id="7924660">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924668">dumpRegexp</span><span class="op" id="7924678">(</span><span class="op" id="7924679">&amp;</span><span class="ident" id="7924680">b</span><span class="op" id="7924681">,</span>&nbsp;<span class="ident" id="7924683">re</span><span class="op" id="7924685">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924688">return</span>&nbsp;<span class="ident" id="7924695">b</span><span class="op" id="7924696">.</span><span class="ident" id="7924697">String</span><span class="op" id="7924703">(</span><span class="op" id="7924704">)</span><br>
<span class="lineno"></span><span class="op" id="7924706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924709">var</span>&nbsp;<span class="ident" id="7924713">opNames</span>&nbsp;<span class="op" id="7924721">=</span>&nbsp;<span class="op" id="7924723">[</span><span class="op" id="7924724">]</span><span class="builtintype" id="7924725">string</span><span class="op" id="7924731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924734">OpNoMatch</span><span class="op" id="7924743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924752">&#34;no&#34;</span><span class="op" id="7924756">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924759">OpEmptyMatch</span><span class="op" id="7924771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924777">&#34;emp&#34;</span><span class="op" id="7924782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924785">OpLiteral</span><span class="op" id="7924794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924803">&#34;lit&#34;</span><span class="op" id="7924808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924811">OpCharClass</span><span class="op" id="7924822">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924829">&#34;cc&#34;</span><span class="op" id="7924833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924836">OpAnyCharNotNL</span><span class="op" id="7924850">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7924854">&#34;dnl&#34;</span><span class="op" id="7924859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924862">OpAnyChar</span><span class="op" id="7924871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924880">&#34;dot&#34;</span><span class="op" id="7924885">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924888">OpBeginLine</span><span class="op" id="7924899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924906">&#34;bol&#34;</span><span class="op" id="7924911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924914">OpEndLine</span><span class="op" id="7924923">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924932">&#34;eol&#34;</span><span class="op" id="7924937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924940">OpBeginText</span><span class="op" id="7924951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924958">&#34;bot&#34;</span><span class="op" id="7924963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924966">OpEndText</span><span class="op" id="7924975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7924984">&#34;eot&#34;</span><span class="op" id="7924989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924992">OpWordBoundary</span><span class="op" id="7925006">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7925010">&#34;wb&#34;</span><span class="op" id="7925014">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925017">OpNoWordBoundary</span><span class="op" id="7925033">:</span>&nbsp;<span class="string" id="7925035">&#34;nwb&#34;</span><span class="op" id="7925040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925043">OpCapture</span><span class="op" id="7925052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925061">&#34;cap&#34;</span><span class="op" id="7925066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925069">OpStar</span><span class="op" id="7925075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925087">&#34;star&#34;</span><span class="op" id="7925093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925096">OpPlus</span><span class="op" id="7925102">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925114">&#34;plus&#34;</span><span class="op" id="7925120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925123">OpQuest</span><span class="op" id="7925130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925141">&#34;que&#34;</span><span class="op" id="7925146">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925149">OpRepeat</span><span class="op" id="7925157">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925167">&#34;rep&#34;</span><span class="op" id="7925172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925175">OpConcat</span><span class="op" id="7925183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925193">&#34;cat&#34;</span><span class="op" id="7925198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925201">OpAlternate</span><span class="op" id="7925212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7925219">&#34;alt&#34;</span><span class="op" id="7925224">,</span><br>
<span class="lineno"></span><span class="op" id="7925226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="7925229">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="7925305">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="7925381">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="7925419">func</span>&nbsp;<span class="ident" id="7925424">dumpRegexp</span><span class="op" id="7925434">(</span><span class="ident" id="7925435">b</span>&nbsp;<span class="op" id="7925437">*</span><span class="ident" id="7925438">bytes</span><span class="op" id="7925443">.</span><span class="ident" id="7925444">Buffer</span><span class="op" id="7925450">,</span>&nbsp;<span class="ident" id="7925452">re</span>&nbsp;<span class="op" id="7925455">*</span><span class="ident" id="7925456">Regexp</span><span class="op" id="7925462">)</span>&nbsp;<span class="op" id="7925464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925467">if</span>&nbsp;<span class="builtintype" id="7925470">int</span><span class="op" id="7925473">(</span><span class="ident" id="7925474">re</span><span class="op" id="7925476">.</span><span class="ident" id="7925477">Op</span><span class="op" id="7925479">)</span>&nbsp;<span class="op" id="7925481">&gt;=</span>&nbsp;<span class="builtinfunc" id="7925484">len</span><span class="op" id="7925487">(</span><span class="ident" id="7925488">opNames</span><span class="op" id="7925495">)</span>&nbsp;<span class="op" id="7925497">||</span>&nbsp;<span class="ident" id="7925500">opNames</span><span class="op" id="7925507">[</span><span class="ident" id="7925508">re</span><span class="op" id="7925510">.</span><span class="ident" id="7925511">Op</span><span class="op" id="7925513">]</span>&nbsp;<span class="op" id="7925515">==</span>&nbsp;<span class="string" id="7925518">&#34;&#34;</span>&nbsp;<span class="op" id="7925521">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925525">fmt</span><span class="op" id="7925528">.</span><span class="ident" id="7925529">Fprintf</span><span class="op" id="7925536">(</span><span class="ident" id="7925537">b</span><span class="op" id="7925538">,</span>&nbsp;<span class="string" id="7925540">&#34;op%d&#34;</span><span class="op" id="7925546">,</span>&nbsp;<span class="ident" id="7925548">re</span><span class="op" id="7925550">.</span><span class="ident" id="7925551">Op</span><span class="op" id="7925553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925556">}</span>&nbsp;<span class="keyword" id="7925558">else</span>&nbsp;<span class="op" id="7925563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925567">switch</span>&nbsp;<span class="ident" id="7925574">re</span><span class="op" id="7925576">.</span><span class="ident" id="7925577">Op</span>&nbsp;<span class="op" id="7925580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925584">default</span><span class="op" id="7925591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925596">b</span><span class="op" id="7925597">.</span><span class="ident" id="7925598">WriteString</span><span class="op" id="7925609">(</span><span class="ident" id="7925610">opNames</span><span class="op" id="7925617">[</span><span class="ident" id="7925618">re</span><span class="op" id="7925620">.</span><span class="ident" id="7925621">Op</span><span class="op" id="7925623">]</span><span class="op" id="7925624">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925628">case</span>&nbsp;<span class="ident" id="7925633">OpStar</span><span class="op" id="7925639">,</span>&nbsp;<span class="ident" id="7925641">OpPlus</span><span class="op" id="7925647">,</span>&nbsp;<span class="ident" id="7925649">OpQuest</span><span class="op" id="7925656">,</span>&nbsp;<span class="ident" id="7925658">OpRepeat</span><span class="op" id="7925666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925671">if</span>&nbsp;<span class="ident" id="7925674">re</span><span class="op" id="7925676">.</span><span class="ident" id="7925677">Flags</span><span class="op" id="7925682">&amp;</span><span class="ident" id="7925683">NonGreedy</span>&nbsp;<span class="op" id="7925693">!=</span>&nbsp;<span class="num" id="7925696">0</span>&nbsp;<span class="op" id="7925698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925704">b</span><span class="op" id="7925705">.</span><span class="ident" id="7925706">WriteByte</span><span class="op" id="7925715">(</span><span class="string" id="7925716">&#39;n&#39;</span><span class="op" id="7925719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925729">b</span><span class="op" id="7925730">.</span><span class="ident" id="7925731">WriteString</span><span class="op" id="7925742">(</span><span class="ident" id="7925743">opNames</span><span class="op" id="7925750">[</span><span class="ident" id="7925751">re</span><span class="op" id="7925753">.</span><span class="ident" id="7925754">Op</span><span class="op" id="7925756">]</span><span class="op" id="7925757">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925761">case</span>&nbsp;<span class="ident" id="7925766">OpLiteral</span><span class="op" id="7925775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925780">if</span>&nbsp;<span class="builtinfunc" id="7925783">len</span><span class="op" id="7925786">(</span><span class="ident" id="7925787">re</span><span class="op" id="7925789">.</span><span class="ident" id="7925790">Rune</span><span class="op" id="7925794">)</span>&nbsp;<span class="op" id="7925796">&gt;</span>&nbsp;<span class="num" id="7925798">1</span>&nbsp;<span class="op" id="7925800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925806">b</span><span class="op" id="7925807">.</span><span class="ident" id="7925808">WriteString</span><span class="op" id="7925819">(</span><span class="string" id="7925820">&#34;str&#34;</span><span class="op" id="7925825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925830">}</span>&nbsp;<span class="keyword" id="7925832">else</span>&nbsp;<span class="op" id="7925837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925843">b</span><span class="op" id="7925844">.</span><span class="ident" id="7925845">WriteString</span><span class="op" id="7925856">(</span><span class="string" id="7925857">&#34;lit&#34;</span><span class="op" id="7925862">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925872">if</span>&nbsp;<span class="ident" id="7925875">re</span><span class="op" id="7925877">.</span><span class="ident" id="7925878">Flags</span><span class="op" id="7925883">&amp;</span><span class="ident" id="7925884">FoldCase</span>&nbsp;<span class="op" id="7925893">!=</span>&nbsp;<span class="num" id="7925896">0</span>&nbsp;<span class="op" id="7925898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925904">for</span>&nbsp;<span class="ident" id="7925908">_</span><span class="op" id="7925909">,</span>&nbsp;<span class="ident" id="7925911">r</span>&nbsp;<span class="op" id="7925913">:=</span>&nbsp;<span class="keyword" id="7925916">range</span>&nbsp;<span class="ident" id="7925922">re</span><span class="op" id="7925924">.</span><span class="ident" id="7925925">Rune</span>&nbsp;<span class="op" id="7925930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925937">if</span>&nbsp;<span class="ident" id="7925940">unicode</span><span class="op" id="7925947">.</span><span class="ident" id="7925948">SimpleFold</span><span class="op" id="7925958">(</span><span class="ident" id="7925959">r</span><span class="op" id="7925960">)</span>&nbsp;<span class="op" id="7925962">!=</span>&nbsp;<span class="ident" id="7925965">r</span>&nbsp;<span class="op" id="7925967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925975">b</span><span class="op" id="7925976">.</span><span class="ident" id="7925977">WriteString</span><span class="op" id="7925988">(</span><span class="string" id="7925989">&#34;fold&#34;</span><span class="op" id="7925995">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926003">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926029">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926035">b</span><span class="op" id="7926036">.</span><span class="ident" id="7926037">WriteByte</span><span class="op" id="7926046">(</span><span class="string" id="7926047">&#39;{&#39;</span><span class="op" id="7926050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926053">switch</span>&nbsp;<span class="ident" id="7926060">re</span><span class="op" id="7926062">.</span><span class="ident" id="7926063">Op</span>&nbsp;<span class="op" id="7926066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926069">case</span>&nbsp;<span class="ident" id="7926074">OpEndText</span><span class="op" id="7926083">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926087">if</span>&nbsp;<span class="ident" id="7926090">re</span><span class="op" id="7926092">.</span><span class="ident" id="7926093">Flags</span><span class="op" id="7926098">&amp;</span><span class="ident" id="7926099">WasDollar</span>&nbsp;<span class="op" id="7926109">==</span>&nbsp;<span class="num" id="7926112">0</span>&nbsp;<span class="op" id="7926114">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926119">b</span><span class="op" id="7926120">.</span><span class="ident" id="7926121">WriteString</span><span class="op" id="7926132">(</span><span class="string" id="7926133">`\z`</span><span class="op" id="7926137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926144">case</span>&nbsp;<span class="ident" id="7926149">OpLiteral</span><span class="op" id="7926158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926162">for</span>&nbsp;<span class="ident" id="7926166">_</span><span class="op" id="7926167">,</span>&nbsp;<span class="ident" id="7926169">r</span>&nbsp;<span class="op" id="7926171">:=</span>&nbsp;<span class="keyword" id="7926174">range</span>&nbsp;<span class="ident" id="7926180">re</span><span class="op" id="7926182">.</span><span class="ident" id="7926183">Rune</span>&nbsp;<span class="op" id="7926188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926193">b</span><span class="op" id="7926194">.</span><span class="ident" id="7926195">WriteRune</span><span class="op" id="7926204">(</span><span class="ident" id="7926205">r</span><span class="op" id="7926206">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926213">case</span>&nbsp;<span class="ident" id="7926218">OpConcat</span><span class="op" id="7926226">,</span>&nbsp;<span class="ident" id="7926228">OpAlternate</span><span class="op" id="7926239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926243">for</span>&nbsp;<span class="ident" id="7926247">_</span><span class="op" id="7926248">,</span>&nbsp;<span class="ident" id="7926250">sub</span>&nbsp;<span class="op" id="7926254">:=</span>&nbsp;<span class="keyword" id="7926257">range</span>&nbsp;<span class="ident" id="7926263">re</span><span class="op" id="7926265">.</span><span class="ident" id="7926266">Sub</span>&nbsp;<span class="op" id="7926270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926275">dumpRegexp</span><span class="op" id="7926285">(</span><span class="ident" id="7926286">b</span><span class="op" id="7926287">,</span>&nbsp;<span class="ident" id="7926289">sub</span><span class="op" id="7926292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926296">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926299">case</span>&nbsp;<span class="ident" id="7926304">OpStar</span><span class="op" id="7926310">,</span>&nbsp;<span class="ident" id="7926312">OpPlus</span><span class="op" id="7926318">,</span>&nbsp;<span class="ident" id="7926320">OpQuest</span><span class="op" id="7926327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926331">dumpRegexp</span><span class="op" id="7926341">(</span><span class="ident" id="7926342">b</span><span class="op" id="7926343">,</span>&nbsp;<span class="ident" id="7926345">re</span><span class="op" id="7926347">.</span><span class="ident" id="7926348">Sub</span><span class="op" id="7926351">[</span><span class="num" id="7926352">0</span><span class="op" id="7926353">]</span><span class="op" id="7926354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926357">case</span>&nbsp;<span class="ident" id="7926362">OpRepeat</span><span class="op" id="7926370">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926374">fmt</span><span class="op" id="7926377">.</span><span class="ident" id="7926378">Fprintf</span><span class="op" id="7926385">(</span><span class="ident" id="7926386">b</span><span class="op" id="7926387">,</span>&nbsp;<span class="string" id="7926389">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="7926397">,</span>&nbsp;<span class="ident" id="7926399">re</span><span class="op" id="7926401">.</span><span class="ident" id="7926402">Min</span><span class="op" id="7926405">,</span>&nbsp;<span class="ident" id="7926407">re</span><span class="op" id="7926409">.</span><span class="ident" id="7926410">Max</span><span class="op" id="7926413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926417">dumpRegexp</span><span class="op" id="7926427">(</span><span class="ident" id="7926428">b</span><span class="op" id="7926429">,</span>&nbsp;<span class="ident" id="7926431">re</span><span class="op" id="7926433">.</span><span class="ident" id="7926434">Sub</span><span class="op" id="7926437">[</span><span class="num" id="7926438">0</span><span class="op" id="7926439">]</span><span class="op" id="7926440">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926443">case</span>&nbsp;<span class="ident" id="7926448">OpCapture</span><span class="op" id="7926457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926461">if</span>&nbsp;<span class="ident" id="7926464">re</span><span class="op" id="7926466">.</span><span class="ident" id="7926467">Name</span>&nbsp;<span class="op" id="7926472">!=</span>&nbsp;<span class="string" id="7926475">&#34;&#34;</span>&nbsp;<span class="op" id="7926478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926483">b</span><span class="op" id="7926484">.</span><span class="ident" id="7926485">WriteString</span><span class="op" id="7926496">(</span><span class="ident" id="7926497">re</span><span class="op" id="7926499">.</span><span class="ident" id="7926500">Name</span><span class="op" id="7926504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926509">b</span><span class="op" id="7926510">.</span><span class="ident" id="7926511">WriteByte</span><span class="op" id="7926520">(</span><span class="string" id="7926521">&#39;:&#39;</span><span class="op" id="7926524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926528">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926532">dumpRegexp</span><span class="op" id="7926542">(</span><span class="ident" id="7926543">b</span><span class="op" id="7926544">,</span>&nbsp;<span class="ident" id="7926546">re</span><span class="op" id="7926548">.</span><span class="ident" id="7926549">Sub</span><span class="op" id="7926552">[</span><span class="num" id="7926553">0</span><span class="op" id="7926554">]</span><span class="op" id="7926555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926558">case</span>&nbsp;<span class="ident" id="7926563">OpCharClass</span><span class="op" id="7926574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926578">sep</span>&nbsp;<span class="op" id="7926582">:=</span>&nbsp;<span class="string" id="7926585">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926590">for</span>&nbsp;<span class="ident" id="7926594">i</span>&nbsp;<span class="op" id="7926596">:=</span>&nbsp;<span class="num" id="7926599">0</span><span class="op" id="7926600">;</span>&nbsp;<span class="ident" id="7926602">i</span>&nbsp;<span class="op" id="7926604">&lt;</span>&nbsp;<span class="builtinfunc" id="7926606">len</span><span class="op" id="7926609">(</span><span class="ident" id="7926610">re</span><span class="op" id="7926612">.</span><span class="ident" id="7926613">Rune</span><span class="op" id="7926617">)</span><span class="op" id="7926618">;</span>&nbsp;<span class="ident" id="7926620">i</span>&nbsp;<span class="op" id="7926622">+=</span>&nbsp;<span class="num" id="7926625">2</span>&nbsp;<span class="op" id="7926627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926632">b</span><span class="op" id="7926633">.</span><span class="ident" id="7926634">WriteString</span><span class="op" id="7926645">(</span><span class="ident" id="7926646">sep</span><span class="op" id="7926649">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926654">sep</span>&nbsp;<span class="op" id="7926658">=</span>&nbsp;<span class="string" id="7926660">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926667">lo</span><span class="op" id="7926669">,</span>&nbsp;<span class="ident" id="7926671">hi</span>&nbsp;<span class="op" id="7926674">:=</span>&nbsp;<span class="ident" id="7926677">re</span><span class="op" id="7926679">.</span><span class="ident" id="7926680">Rune</span><span class="op" id="7926684">[</span><span class="ident" id="7926685">i</span><span class="op" id="7926686">]</span><span class="op" id="7926687">,</span>&nbsp;<span class="ident" id="7926689">re</span><span class="op" id="7926691">.</span><span class="ident" id="7926692">Rune</span><span class="op" id="7926696">[</span><span class="ident" id="7926697">i</span><span class="op" id="7926698">+</span><span class="num" id="7926699">1</span><span class="op" id="7926700">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926705">if</span>&nbsp;<span class="ident" id="7926708">lo</span>&nbsp;<span class="op" id="7926711">==</span>&nbsp;<span class="ident" id="7926714">hi</span>&nbsp;<span class="op" id="7926717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926723">fmt</span><span class="op" id="7926726">.</span><span class="ident" id="7926727">Fprintf</span><span class="op" id="7926734">(</span><span class="ident" id="7926735">b</span><span class="op" id="7926736">,</span>&nbsp;<span class="string" id="7926738">&#34;%#x&#34;</span><span class="op" id="7926743">,</span>&nbsp;<span class="ident" id="7926745">lo</span><span class="op" id="7926747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926752">}</span>&nbsp;<span class="keyword" id="7926754">else</span>&nbsp;<span class="op" id="7926759">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926765">fmt</span><span class="op" id="7926768">.</span><span class="ident" id="7926769">Fprintf</span><span class="op" id="7926776">(</span><span class="ident" id="7926777">b</span><span class="op" id="7926778">,</span>&nbsp;<span class="string" id="7926780">&#34;%#x-%#x&#34;</span><span class="op" id="7926789">,</span>&nbsp;<span class="ident" id="7926791">lo</span><span class="op" id="7926793">,</span>&nbsp;<span class="ident" id="7926795">hi</span><span class="op" id="7926797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926812">b</span><span class="op" id="7926813">.</span><span class="ident" id="7926814">WriteByte</span><span class="op" id="7926823">(</span><span class="string" id="7926824">&#39;}&#39;</span><span class="op" id="7926827">)</span><br>
<span class="lineno">380</span><span class="op" id="7926829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7926832">func</span>&nbsp;<span class="ident" id="7926837">mkCharClass</span><span class="op" id="7926848">(</span><span class="ident" id="7926849">f</span>&nbsp;<span class="keyword" id="7926851">func</span><span class="op" id="7926855">(</span><span class="builtintype" id="7926856">rune</span><span class="op" id="7926860">)</span>&nbsp;<span class="builtintype" id="7926862">bool</span><span class="op" id="7926866">)</span>&nbsp;<span class="builtintype" id="7926868">string</span>&nbsp;<span class="op" id="7926875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926878">re</span>&nbsp;<span class="op" id="7926881">:=</span>&nbsp;<span class="op" id="7926884">&amp;</span><span class="ident" id="7926885">Regexp</span><span class="op" id="7926891">{</span><span class="ident" id="7926892">Op</span><span class="op" id="7926894">:</span>&nbsp;<span class="ident" id="7926896">OpCharClass</span><span class="op" id="7926907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926910">lo</span>&nbsp;<span class="op" id="7926913">:=</span>&nbsp;<span class="builtintype" id="7926916">rune</span><span class="op" id="7926920">(</span><span class="op" id="7926921">-</span><span class="num" id="7926922">1</span><span class="op" id="7926923">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926926">for</span>&nbsp;<span class="ident" id="7926930">i</span>&nbsp;<span class="op" id="7926932">:=</span>&nbsp;<span class="builtintype" id="7926935">rune</span><span class="op" id="7926939">(</span><span class="num" id="7926940">0</span><span class="op" id="7926941">)</span><span class="op" id="7926942">;</span>&nbsp;<span class="ident" id="7926944">i</span>&nbsp;<span class="op" id="7926946">&lt;=</span>&nbsp;<span class="ident" id="7926949">unicode</span><span class="op" id="7926956">.</span><span class="ident" id="7926957">MaxRune</span><span class="op" id="7926964">;</span>&nbsp;<span class="ident" id="7926966">i</span><span class="op" id="7926967">++</span>&nbsp;<span class="op" id="7926970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926974">if</span>&nbsp;<span class="ident" id="7926977">f</span><span class="op" id="7926978">(</span><span class="ident" id="7926979">i</span><span class="op" id="7926980">)</span>&nbsp;<span class="op" id="7926982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926987">if</span>&nbsp;<span class="ident" id="7926990">lo</span>&nbsp;<span class="op" id="7926993">&lt;</span>&nbsp;<span class="num" id="7926995">0</span>&nbsp;<span class="op" id="7926997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927003">lo</span>&nbsp;<span class="op" id="7927006">=</span>&nbsp;<span class="ident" id="7927008">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927013">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927017">}</span>&nbsp;<span class="keyword" id="7927019">else</span>&nbsp;<span class="op" id="7927024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927029">if</span>&nbsp;<span class="ident" id="7927032">lo</span>&nbsp;<span class="op" id="7927035">&gt;=</span>&nbsp;<span class="num" id="7927038">0</span>&nbsp;<span class="op" id="7927040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927046">re</span><span class="op" id="7927048">.</span><span class="ident" id="7927049">Rune</span>&nbsp;<span class="op" id="7927054">=</span>&nbsp;<span class="builtinfunc" id="7927056">append</span><span class="op" id="7927062">(</span><span class="ident" id="7927063">re</span><span class="op" id="7927065">.</span><span class="ident" id="7927066">Rune</span><span class="op" id="7927070">,</span>&nbsp;<span class="ident" id="7927072">lo</span><span class="op" id="7927074">,</span>&nbsp;<span class="ident" id="7927076">i</span><span class="op" id="7927077">-</span><span class="num" id="7927078">1</span><span class="op" id="7927079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927085">lo</span>&nbsp;<span class="op" id="7927088">=</span>&nbsp;<span class="op" id="7927090">-</span><span class="num" id="7927091">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927096">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927106">if</span>&nbsp;<span class="ident" id="7927109">lo</span>&nbsp;<span class="op" id="7927112">&gt;=</span>&nbsp;<span class="num" id="7927115">0</span>&nbsp;<span class="op" id="7927117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927121">re</span><span class="op" id="7927123">.</span><span class="ident" id="7927124">Rune</span>&nbsp;<span class="op" id="7927129">=</span>&nbsp;<span class="builtinfunc" id="7927131">append</span><span class="op" id="7927137">(</span><span class="ident" id="7927138">re</span><span class="op" id="7927140">.</span><span class="ident" id="7927141">Rune</span><span class="op" id="7927145">,</span>&nbsp;<span class="ident" id="7927147">lo</span><span class="op" id="7927149">,</span>&nbsp;<span class="ident" id="7927151">unicode</span><span class="op" id="7927158">.</span><span class="ident" id="7927159">MaxRune</span><span class="op" id="7927166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927169">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927172">return</span>&nbsp;<span class="ident" id="7927179">dump</span><span class="op" id="7927183">(</span><span class="ident" id="7927184">re</span><span class="op" id="7927186">)</span><br>
<span class="lineno"></span><span class="op" id="7927188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927191">func</span>&nbsp;<span class="ident" id="7927196">isUpperFold</span><span class="op" id="7927207">(</span><span class="ident" id="7927208">r</span>&nbsp;<span class="builtintype" id="7927210">rune</span><span class="op" id="7927214">)</span>&nbsp;<span class="builtintype" id="7927216">bool</span>&nbsp;<span class="op" id="7927221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927224">if</span>&nbsp;<span class="ident" id="7927227">unicode</span><span class="op" id="7927234">.</span><span class="ident" id="7927235">IsUpper</span><span class="op" id="7927242">(</span><span class="ident" id="7927243">r</span><span class="op" id="7927244">)</span>&nbsp;<span class="op" id="7927246">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927250">return</span>&nbsp;<span class="builtintype" id="7927257">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927266">c</span>&nbsp;<span class="op" id="7927268">:=</span>&nbsp;<span class="ident" id="7927271">unicode</span><span class="op" id="7927278">.</span><span class="ident" id="7927279">SimpleFold</span><span class="op" id="7927289">(</span><span class="ident" id="7927290">r</span><span class="op" id="7927291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927294">for</span>&nbsp;<span class="ident" id="7927298">c</span>&nbsp;<span class="op" id="7927300">!=</span>&nbsp;<span class="ident" id="7927303">r</span>&nbsp;<span class="op" id="7927305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927309">if</span>&nbsp;<span class="ident" id="7927312">unicode</span><span class="op" id="7927319">.</span><span class="ident" id="7927320">IsUpper</span><span class="op" id="7927327">(</span><span class="ident" id="7927328">c</span><span class="op" id="7927329">)</span>&nbsp;<span class="op" id="7927331">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927336">return</span>&nbsp;<span class="builtintype" id="7927343">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927354">c</span>&nbsp;<span class="op" id="7927356">=</span>&nbsp;<span class="ident" id="7927358">unicode</span><span class="op" id="7927365">.</span><span class="ident" id="7927366">SimpleFold</span><span class="op" id="7927376">(</span><span class="ident" id="7927377">c</span><span class="op" id="7927378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927384">return</span>&nbsp;<span class="builtintype" id="7927391">false</span><br>
<span class="lineno">415</span><span class="op" id="7927397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927400">func</span>&nbsp;<span class="ident" id="7927405">TestFoldConstants</span><span class="op" id="7927422">(</span><span class="ident" id="7927423">t</span>&nbsp;<span class="op" id="7927425">*</span><span class="ident" id="7927426">testing</span><span class="op" id="7927433">.</span><span class="ident" id="7927434">T</span><span class="op" id="7927435">)</span>&nbsp;<span class="op" id="7927437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927440">last</span>&nbsp;<span class="op" id="7927445">:=</span>&nbsp;<span class="builtintype" id="7927448">rune</span><span class="op" id="7927452">(</span><span class="op" id="7927453">-</span><span class="num" id="7927454">1</span><span class="op" id="7927455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927458">for</span>&nbsp;<span class="ident" id="7927462">i</span>&nbsp;<span class="op" id="7927464">:=</span>&nbsp;<span class="builtintype" id="7927467">rune</span><span class="op" id="7927471">(</span><span class="num" id="7927472">0</span><span class="op" id="7927473">)</span><span class="op" id="7927474">;</span>&nbsp;<span class="ident" id="7927476">i</span>&nbsp;<span class="op" id="7927478">&lt;=</span>&nbsp;<span class="ident" id="7927481">unicode</span><span class="op" id="7927488">.</span><span class="ident" id="7927489">MaxRune</span><span class="op" id="7927496">;</span>&nbsp;<span class="ident" id="7927498">i</span><span class="op" id="7927499">++</span>&nbsp;<span class="op" id="7927502">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927506">if</span>&nbsp;<span class="ident" id="7927509">unicode</span><span class="op" id="7927516">.</span><span class="ident" id="7927517">SimpleFold</span><span class="op" id="7927527">(</span><span class="ident" id="7927528">i</span><span class="op" id="7927529">)</span>&nbsp;<span class="op" id="7927531">==</span>&nbsp;<span class="ident" id="7927534">i</span>&nbsp;<span class="op" id="7927536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927541">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927556">if</span>&nbsp;<span class="ident" id="7927559">last</span>&nbsp;<span class="op" id="7927564">==</span>&nbsp;<span class="op" id="7927567">-</span><span class="num" id="7927568">1</span>&nbsp;<span class="op" id="7927570">&amp;&amp;</span>&nbsp;<span class="ident" id="7927573">minFold</span>&nbsp;<span class="op" id="7927581">!=</span>&nbsp;<span class="ident" id="7927584">i</span>&nbsp;<span class="op" id="7927586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927591">t</span><span class="op" id="7927592">.</span><span class="ident" id="7927593">Errorf</span><span class="op" id="7927599">(</span><span class="string" id="7927600">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7927627">,</span>&nbsp;<span class="ident" id="7927629">minFold</span><span class="op" id="7927636">,</span>&nbsp;<span class="ident" id="7927638">i</span><span class="op" id="7927639">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927647">last</span>&nbsp;<span class="op" id="7927652">=</span>&nbsp;<span class="ident" id="7927654">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927660">if</span>&nbsp;<span class="ident" id="7927663">maxFold</span>&nbsp;<span class="op" id="7927671">!=</span>&nbsp;<span class="ident" id="7927674">last</span>&nbsp;<span class="op" id="7927679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927683">t</span><span class="op" id="7927684">.</span><span class="ident" id="7927685">Errorf</span><span class="op" id="7927691">(</span><span class="string" id="7927692">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7927719">,</span>&nbsp;<span class="ident" id="7927721">maxFold</span><span class="op" id="7927728">,</span>&nbsp;<span class="ident" id="7927730">last</span><span class="op" id="7927734">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927737">}</span><br>
<span class="lineno"></span><span class="op" id="7927739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927742">func</span>&nbsp;<span class="ident" id="7927747">TestAppendRangeCollapse</span><span class="op" id="7927770">(</span><span class="ident" id="7927771">t</span>&nbsp;<span class="op" id="7927773">*</span><span class="ident" id="7927774">testing</span><span class="op" id="7927781">.</span><span class="ident" id="7927782">T</span><span class="op" id="7927783">)</span>&nbsp;<span class="op" id="7927785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927788">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927843">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927905">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7927943">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927988">var</span>&nbsp;<span class="ident" id="7927992">r</span>&nbsp;<span class="op" id="7927994">[</span><span class="op" id="7927995">]</span><span class="builtintype" id="7927996">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928002">for</span>&nbsp;<span class="ident" id="7928006">i</span>&nbsp;<span class="op" id="7928008">:=</span>&nbsp;<span class="builtintype" id="7928011">rune</span><span class="op" id="7928015">(</span><span class="string" id="7928016">&#39;A&#39;</span><span class="op" id="7928019">)</span><span class="op" id="7928020">;</span>&nbsp;<span class="ident" id="7928022">i</span>&nbsp;<span class="op" id="7928024">&lt;=</span>&nbsp;<span class="string" id="7928027">&#39;Z&#39;</span><span class="op" id="7928030">;</span>&nbsp;<span class="ident" id="7928032">i</span><span class="op" id="7928033">++</span>&nbsp;<span class="op" id="7928036">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928040">r</span>&nbsp;<span class="op" id="7928042">=</span>&nbsp;<span class="ident" id="7928044">appendRange</span><span class="op" id="7928055">(</span><span class="ident" id="7928056">r</span><span class="op" id="7928057">,</span>&nbsp;<span class="ident" id="7928059">i</span><span class="op" id="7928060">,</span>&nbsp;<span class="ident" id="7928062">i</span><span class="op" id="7928063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928067">r</span>&nbsp;<span class="op" id="7928069">=</span>&nbsp;<span class="ident" id="7928071">appendRange</span><span class="op" id="7928082">(</span><span class="ident" id="7928083">r</span><span class="op" id="7928084">,</span>&nbsp;<span class="ident" id="7928086">i</span><span class="op" id="7928087">+</span><span class="string" id="7928088">&#39;a&#39;</span><span class="op" id="7928091">-</span><span class="string" id="7928092">&#39;A&#39;</span><span class="op" id="7928095">,</span>&nbsp;<span class="ident" id="7928097">i</span><span class="op" id="7928098">+</span><span class="string" id="7928099">&#39;a&#39;</span><span class="op" id="7928102">-</span><span class="string" id="7928103">&#39;A&#39;</span><span class="op" id="7928106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928112">if</span>&nbsp;<span class="builtintype" id="7928115">string</span><span class="op" id="7928121">(</span><span class="ident" id="7928122">r</span><span class="op" id="7928123">)</span>&nbsp;<span class="op" id="7928125">!=</span>&nbsp;<span class="string" id="7928128">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="7928135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928139">t</span><span class="op" id="7928140">.</span><span class="ident" id="7928141">Errorf</span><span class="op" id="7928147">(</span><span class="string" id="7928148">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="7928196">,</span>&nbsp;<span class="builtintype" id="7928198">string</span><span class="op" id="7928204">(</span><span class="ident" id="7928205">r</span><span class="op" id="7928206">)</span><span class="op" id="7928207">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928210">}</span><br>
<span class="lineno"></span><span class="op" id="7928212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928215">var</span>&nbsp;<span class="ident" id="7928219">invalidRegexps</span>&nbsp;<span class="op" id="7928234">=</span>&nbsp;<span class="op" id="7928236">[</span><span class="op" id="7928237">]</span><span class="builtintype" id="7928238">string</span><span class="op" id="7928244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928247">`(`</span><span class="op" id="7928250">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928253">`)`</span><span class="op" id="7928256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928259">`(a`</span><span class="op" id="7928263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928266">`a)`</span><span class="op" id="7928270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928273">`(a))`</span><span class="op" id="7928279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928282">`(a|b|`</span><span class="op" id="7928289">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928292">`a|b|)`</span><span class="op" id="7928299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928302">`(a|b|))`</span><span class="op" id="7928311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928314">`(a|b`</span><span class="op" id="7928320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928323">`a|b)`</span><span class="op" id="7928329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928332">`(a|b))`</span><span class="op" id="7928340">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928343">`[a-z`</span><span class="op" id="7928349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928352">`([a-z)`</span><span class="op" id="7928360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928363">`[a-z)`</span><span class="op" id="7928370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928373">`([a-z]))`</span><span class="op" id="7928383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928386">`x{1001}`</span><span class="op" id="7928395">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928398">`x{9876543210}`</span><span class="op" id="7928413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928416">`x{2,1}`</span><span class="op" id="7928424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928427">`x{1,9876543210}`</span><span class="op" id="7928444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928447">&#34;\xff&#34;</span><span class="op" id="7928453">,</span>&nbsp;<span class="comment" id="7928455">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928473">&#34;[\xff]&#34;</span><span class="op" id="7928481">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928484">&#34;[\\\xff]&#34;</span><span class="op" id="7928494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928497">&#34;\\\xff&#34;</span><span class="op" id="7928505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928508">`(?P&lt;name&gt;a`</span><span class="op" id="7928520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928523">`(?P&lt;name&gt;`</span><span class="op" id="7928534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928537">`(?P&lt;name`</span><span class="op" id="7928547">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928550">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="7928562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928565">`(?P&lt;&gt;a)`</span><span class="op" id="7928574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928577">`[a-Z]`</span><span class="op" id="7928584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928587">`(?i)[a-Z]`</span><span class="op" id="7928598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928601">`a{100000}`</span><span class="op" id="7928612">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928615">`a{100000,}`</span><span class="op" id="7928627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928630">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="7928683">,</span><br>
<span class="lineno"></span><span class="op" id="7928685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7928688">var</span>&nbsp;<span class="ident" id="7928692">onlyPerl</span>&nbsp;<span class="op" id="7928701">=</span>&nbsp;<span class="op" id="7928703">[</span><span class="op" id="7928704">]</span><span class="builtintype" id="7928705">string</span><span class="op" id="7928711">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928714">`[a-b-c]`</span><span class="op" id="7928723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928726">`\Qabc\E`</span><span class="op" id="7928735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928738">`\Q*+?{[\E`</span><span class="op" id="7928749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928752">`\Q\\E`</span><span class="op" id="7928759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928762">`\Q\\\E`</span><span class="op" id="7928770">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928773">`\Q\\\\E`</span><span class="op" id="7928782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928785">`\Q\\\\\E`</span><span class="op" id="7928795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928798">`(?:a)`</span><span class="op" id="7928805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928808">`(?P&lt;name&gt;a)`</span><span class="op" id="7928821">,</span><br>
<span class="lineno"></span><span class="op" id="7928823">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="7928826">var</span>&nbsp;<span class="ident" id="7928830">onlyPOSIX</span>&nbsp;<span class="op" id="7928840">=</span>&nbsp;<span class="op" id="7928842">[</span><span class="op" id="7928843">]</span><span class="builtintype" id="7928844">string</span><span class="op" id="7928850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928853">&#34;a++&#34;</span><span class="op" id="7928858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928861">&#34;a**&#34;</span><span class="op" id="7928866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928869">&#34;a?*&#34;</span><span class="op" id="7928874">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928877">&#34;a+*&#34;</span><span class="op" id="7928882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928885">&#34;a{1}*&#34;</span><span class="op" id="7928892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7928895">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="7928908">,</span><br>
<span class="lineno"></span><span class="op" id="7928910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="7928913">func</span>&nbsp;<span class="ident" id="7928918">TestParseInvalidRegexps</span><span class="op" id="7928941">(</span><span class="ident" id="7928942">t</span>&nbsp;<span class="op" id="7928944">*</span><span class="ident" id="7928945">testing</span><span class="op" id="7928952">.</span><span class="ident" id="7928953">T</span><span class="op" id="7928954">)</span>&nbsp;<span class="op" id="7928956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928959">for</span>&nbsp;<span class="ident" id="7928963">_</span><span class="op" id="7928964">,</span>&nbsp;<span class="ident" id="7928966">regexp</span>&nbsp;<span class="op" id="7928973">:=</span>&nbsp;<span class="keyword" id="7928976">range</span>&nbsp;<span class="ident" id="7928982">invalidRegexps</span>&nbsp;<span class="op" id="7928997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929001">if</span>&nbsp;<span class="ident" id="7929004">re</span><span class="op" id="7929006">,</span>&nbsp;<span class="ident" id="7929008">err</span>&nbsp;<span class="op" id="7929012">:=</span>&nbsp;<span class="ident" id="7929015">Parse</span><span class="op" id="7929020">(</span><span class="ident" id="7929021">regexp</span><span class="op" id="7929027">,</span>&nbsp;<span class="ident" id="7929029">Perl</span><span class="op" id="7929033">)</span><span class="op" id="7929034">;</span>&nbsp;<span class="ident" id="7929036">err</span>&nbsp;<span class="op" id="7929040">==</span>&nbsp;<span class="ident" id="7929043">nil</span>&nbsp;<span class="op" id="7929047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929052">t</span><span class="op" id="7929053">.</span><span class="ident" id="7929054">Errorf</span><span class="op" id="7929060">(</span><span class="string" id="7929061">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7929104">,</span>&nbsp;<span class="ident" id="7929106">regexp</span><span class="op" id="7929112">,</span>&nbsp;<span class="ident" id="7929114">dump</span><span class="op" id="7929118">(</span><span class="ident" id="7929119">re</span><span class="op" id="7929121">)</span><span class="op" id="7929122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929126">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929130">if</span>&nbsp;<span class="ident" id="7929133">re</span><span class="op" id="7929135">,</span>&nbsp;<span class="ident" id="7929137">err</span>&nbsp;<span class="op" id="7929141">:=</span>&nbsp;<span class="ident" id="7929144">Parse</span><span class="op" id="7929149">(</span><span class="ident" id="7929150">regexp</span><span class="op" id="7929156">,</span>&nbsp;<span class="ident" id="7929158">POSIX</span><span class="op" id="7929163">)</span><span class="op" id="7929164">;</span>&nbsp;<span class="ident" id="7929166">err</span>&nbsp;<span class="op" id="7929170">==</span>&nbsp;<span class="ident" id="7929173">nil</span>&nbsp;<span class="op" id="7929177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929182">t</span><span class="op" id="7929183">.</span><span class="ident" id="7929184">Errorf</span><span class="op" id="7929190">(</span><span class="string" id="7929191">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7929235">,</span>&nbsp;<span class="ident" id="7929237">regexp</span><span class="op" id="7929243">,</span>&nbsp;<span class="ident" id="7929245">dump</span><span class="op" id="7929249">(</span><span class="ident" id="7929250">re</span><span class="op" id="7929252">)</span><span class="op" id="7929253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929263">for</span>&nbsp;<span class="ident" id="7929267">_</span><span class="op" id="7929268">,</span>&nbsp;<span class="ident" id="7929270">regexp</span>&nbsp;<span class="op" id="7929277">:=</span>&nbsp;<span class="keyword" id="7929280">range</span>&nbsp;<span class="ident" id="7929286">onlyPerl</span>&nbsp;<span class="op" id="7929295">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929299">if</span>&nbsp;<span class="ident" id="7929302">_</span><span class="op" id="7929303">,</span>&nbsp;<span class="ident" id="7929305">err</span>&nbsp;<span class="op" id="7929309">:=</span>&nbsp;<span class="ident" id="7929312">Parse</span><span class="op" id="7929317">(</span><span class="ident" id="7929318">regexp</span><span class="op" id="7929324">,</span>&nbsp;<span class="ident" id="7929326">Perl</span><span class="op" id="7929330">)</span><span class="op" id="7929331">;</span>&nbsp;<span class="ident" id="7929333">err</span>&nbsp;<span class="op" id="7929337">!=</span>&nbsp;<span class="ident" id="7929340">nil</span>&nbsp;<span class="op" id="7929344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929349">t</span><span class="op" id="7929350">.</span><span class="ident" id="7929351">Errorf</span><span class="op" id="7929357">(</span><span class="string" id="7929358">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="7929380">,</span>&nbsp;<span class="ident" id="7929382">regexp</span><span class="op" id="7929388">,</span>&nbsp;<span class="ident" id="7929390">err</span><span class="op" id="7929393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929401">if</span>&nbsp;<span class="ident" id="7929404">re</span><span class="op" id="7929406">,</span>&nbsp;<span class="ident" id="7929408">err</span>&nbsp;<span class="op" id="7929412">:=</span>&nbsp;<span class="ident" id="7929415">Parse</span><span class="op" id="7929420">(</span><span class="ident" id="7929421">regexp</span><span class="op" id="7929427">,</span>&nbsp;<span class="ident" id="7929429">POSIX</span><span class="op" id="7929434">)</span><span class="op" id="7929435">;</span>&nbsp;<span class="ident" id="7929437">err</span>&nbsp;<span class="op" id="7929441">==</span>&nbsp;<span class="ident" id="7929444">nil</span>&nbsp;<span class="op" id="7929448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929453">t</span><span class="op" id="7929454">.</span><span class="ident" id="7929455">Errorf</span><span class="op" id="7929461">(</span><span class="string" id="7929462">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7929506">,</span>&nbsp;<span class="ident" id="7929508">regexp</span><span class="op" id="7929514">,</span>&nbsp;<span class="ident" id="7929516">dump</span><span class="op" id="7929520">(</span><span class="ident" id="7929521">re</span><span class="op" id="7929523">)</span><span class="op" id="7929524">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929534">for</span>&nbsp;<span class="ident" id="7929538">_</span><span class="op" id="7929539">,</span>&nbsp;<span class="ident" id="7929541">regexp</span>&nbsp;<span class="op" id="7929548">:=</span>&nbsp;<span class="keyword" id="7929551">range</span>&nbsp;<span class="ident" id="7929557">onlyPOSIX</span>&nbsp;<span class="op" id="7929567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929571">if</span>&nbsp;<span class="ident" id="7929574">re</span><span class="op" id="7929576">,</span>&nbsp;<span class="ident" id="7929578">err</span>&nbsp;<span class="op" id="7929582">:=</span>&nbsp;<span class="ident" id="7929585">Parse</span><span class="op" id="7929590">(</span><span class="ident" id="7929591">regexp</span><span class="op" id="7929597">,</span>&nbsp;<span class="ident" id="7929599">Perl</span><span class="op" id="7929603">)</span><span class="op" id="7929604">;</span>&nbsp;<span class="ident" id="7929606">err</span>&nbsp;<span class="op" id="7929610">==</span>&nbsp;<span class="ident" id="7929613">nil</span>&nbsp;<span class="op" id="7929617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929622">t</span><span class="op" id="7929623">.</span><span class="ident" id="7929624">Errorf</span><span class="op" id="7929630">(</span><span class="string" id="7929631">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7929674">,</span>&nbsp;<span class="ident" id="7929676">regexp</span><span class="op" id="7929682">,</span>&nbsp;<span class="ident" id="7929684">dump</span><span class="op" id="7929688">(</span><span class="ident" id="7929689">re</span><span class="op" id="7929691">)</span><span class="op" id="7929692">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929700">if</span>&nbsp;<span class="ident" id="7929703">_</span><span class="op" id="7929704">,</span>&nbsp;<span class="ident" id="7929706">err</span>&nbsp;<span class="op" id="7929710">:=</span>&nbsp;<span class="ident" id="7929713">Parse</span><span class="op" id="7929718">(</span><span class="ident" id="7929719">regexp</span><span class="op" id="7929725">,</span>&nbsp;<span class="ident" id="7929727">POSIX</span><span class="op" id="7929732">)</span><span class="op" id="7929733">;</span>&nbsp;<span class="ident" id="7929735">err</span>&nbsp;<span class="op" id="7929739">!=</span>&nbsp;<span class="ident" id="7929742">nil</span>&nbsp;<span class="op" id="7929746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929751">t</span><span class="op" id="7929752">.</span><span class="ident" id="7929753">Errorf</span><span class="op" id="7929759">(</span><span class="string" id="7929760">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="7929783">,</span>&nbsp;<span class="ident" id="7929785">regexp</span><span class="op" id="7929791">,</span>&nbsp;<span class="ident" id="7929793">err</span><span class="op" id="7929796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929803">}</span><br>
<span class="lineno">530</span><span class="op" id="7929805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7929808">func</span>&nbsp;<span class="ident" id="7929813">TestToStringEquivalentParse</span><span class="op" id="7929840">(</span><span class="ident" id="7929841">t</span>&nbsp;<span class="op" id="7929843">*</span><span class="ident" id="7929844">testing</span><span class="op" id="7929851">.</span><span class="ident" id="7929852">T</span><span class="op" id="7929853">)</span>&nbsp;<span class="op" id="7929855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929858">for</span>&nbsp;<span class="ident" id="7929862">_</span><span class="op" id="7929863">,</span>&nbsp;<span class="ident" id="7929865">tt</span>&nbsp;<span class="op" id="7929868">:=</span>&nbsp;<span class="keyword" id="7929871">range</span>&nbsp;<span class="ident" id="7929877">parseTests</span>&nbsp;<span class="op" id="7929888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929892">re</span><span class="op" id="7929894">,</span>&nbsp;<span class="ident" id="7929896">err</span>&nbsp;<span class="op" id="7929900">:=</span>&nbsp;<span class="ident" id="7929903">Parse</span><span class="op" id="7929908">(</span><span class="ident" id="7929909">tt</span><span class="op" id="7929911">.</span><span class="ident" id="7929912">Regexp</span><span class="op" id="7929918">,</span>&nbsp;<span class="ident" id="7929920">testFlags</span><span class="op" id="7929929">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929933">if</span>&nbsp;<span class="ident" id="7929936">err</span>&nbsp;<span class="op" id="7929940">!=</span>&nbsp;<span class="ident" id="7929943">nil</span>&nbsp;<span class="op" id="7929947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929952">t</span><span class="op" id="7929953">.</span><span class="ident" id="7929954">Errorf</span><span class="op" id="7929960">(</span><span class="string" id="7929961">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7929977">,</span>&nbsp;<span class="ident" id="7929979">tt</span><span class="op" id="7929981">.</span><span class="ident" id="7929982">Regexp</span><span class="op" id="7929988">,</span>&nbsp;<span class="ident" id="7929990">err</span><span class="op" id="7929993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929998">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930013">if</span>&nbsp;<span class="ident" id="7930016">tt</span><span class="op" id="7930018">.</span><span class="ident" id="7930019">Dump</span>&nbsp;<span class="op" id="7930024">==</span>&nbsp;<span class="string" id="7930027">&#34;&#34;</span>&nbsp;<span class="op" id="7930030">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930035">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930078">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930093">d</span>&nbsp;<span class="op" id="7930095">:=</span>&nbsp;<span class="ident" id="7930098">dump</span><span class="op" id="7930102">(</span><span class="ident" id="7930103">re</span><span class="op" id="7930105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930109">if</span>&nbsp;<span class="ident" id="7930112">d</span>&nbsp;<span class="op" id="7930114">!=</span>&nbsp;<span class="ident" id="7930117">tt</span><span class="op" id="7930119">.</span><span class="ident" id="7930120">Dump</span>&nbsp;<span class="op" id="7930125">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930130">t</span><span class="op" id="7930131">.</span><span class="ident" id="7930132">Errorf</span><span class="op" id="7930138">(</span><span class="string" id="7930139">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7930173">,</span>&nbsp;<span class="ident" id="7930175">tt</span><span class="op" id="7930177">.</span><span class="ident" id="7930178">Regexp</span><span class="op" id="7930184">,</span>&nbsp;<span class="ident" id="7930186">d</span><span class="op" id="7930187">,</span>&nbsp;<span class="ident" id="7930189">tt</span><span class="op" id="7930191">.</span><span class="ident" id="7930192">Dump</span><span class="op" id="7930196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930201">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930217">s</span>&nbsp;<span class="op" id="7930219">:=</span>&nbsp;<span class="ident" id="7930222">re</span><span class="op" id="7930224">.</span><span class="ident" id="7930225">String</span><span class="op" id="7930231">(</span><span class="op" id="7930232">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930236">if</span>&nbsp;<span class="ident" id="7930239">s</span>&nbsp;<span class="op" id="7930241">!=</span>&nbsp;<span class="ident" id="7930244">tt</span><span class="op" id="7930246">.</span><span class="ident" id="7930247">Regexp</span>&nbsp;<span class="op" id="7930254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930259">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930312">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930360">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930420">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7930471">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930527">nre</span><span class="op" id="7930530">,</span>&nbsp;<span class="ident" id="7930532">err</span>&nbsp;<span class="op" id="7930536">:=</span>&nbsp;<span class="ident" id="7930539">Parse</span><span class="op" id="7930544">(</span><span class="ident" id="7930545">s</span><span class="op" id="7930546">,</span>&nbsp;<span class="ident" id="7930548">testFlags</span><span class="op" id="7930557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930562">if</span>&nbsp;<span class="ident" id="7930565">err</span>&nbsp;<span class="op" id="7930569">!=</span>&nbsp;<span class="ident" id="7930572">nil</span>&nbsp;<span class="op" id="7930576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930582">t</span><span class="op" id="7930583">.</span><span class="ident" id="7930584">Errorf</span><span class="op" id="7930590">(</span><span class="string" id="7930591">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="7930622">,</span>&nbsp;<span class="ident" id="7930624">tt</span><span class="op" id="7930626">.</span><span class="ident" id="7930627">Regexp</span><span class="op" id="7930633">,</span>&nbsp;<span class="ident" id="7930635">s</span><span class="op" id="7930636">,</span>&nbsp;<span class="ident" id="7930638">err</span><span class="op" id="7930641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930647">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930664">nd</span>&nbsp;<span class="op" id="7930667">:=</span>&nbsp;<span class="ident" id="7930670">dump</span><span class="op" id="7930674">(</span><span class="ident" id="7930675">nre</span><span class="op" id="7930678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930683">if</span>&nbsp;<span class="ident" id="7930686">d</span>&nbsp;<span class="op" id="7930688">!=</span>&nbsp;<span class="ident" id="7930691">nd</span>&nbsp;<span class="op" id="7930694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930700">t</span><span class="op" id="7930701">.</span><span class="ident" id="7930702">Errorf</span><span class="op" id="7930708">(</span><span class="string" id="7930709">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="7930740">,</span>&nbsp;<span class="ident" id="7930742">tt</span><span class="op" id="7930744">.</span><span class="ident" id="7930745">Regexp</span><span class="op" id="7930751">,</span>&nbsp;<span class="ident" id="7930753">s</span><span class="op" id="7930754">,</span>&nbsp;<span class="ident" id="7930756">d</span><span class="op" id="7930757">,</span>&nbsp;<span class="ident" id="7930759">nd</span><span class="op" id="7930761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930766">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930772">ns</span>&nbsp;<span class="op" id="7930775">:=</span>&nbsp;<span class="ident" id="7930778">nre</span><span class="op" id="7930781">.</span><span class="ident" id="7930782">String</span><span class="op" id="7930788">(</span><span class="op" id="7930789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930794">if</span>&nbsp;<span class="ident" id="7930797">s</span>&nbsp;<span class="op" id="7930799">!=</span>&nbsp;<span class="ident" id="7930802">ns</span>&nbsp;<span class="op" id="7930805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930811">t</span><span class="op" id="7930812">.</span><span class="ident" id="7930813">Errorf</span><span class="op" id="7930819">(</span><span class="string" id="7930820">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="7930846">,</span>&nbsp;<span class="ident" id="7930848">tt</span><span class="op" id="7930850">.</span><span class="ident" id="7930851">Regexp</span><span class="op" id="7930857">,</span>&nbsp;<span class="ident" id="7930859">s</span><span class="op" id="7930860">,</span>&nbsp;<span class="ident" id="7930862">ns</span><span class="op" id="7930864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930869">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930876">}</span><br>
<span class="lineno"></span><span class="op" id="7930878">}</span>
</div>
</body>
</html>
