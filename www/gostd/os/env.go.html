<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2310316">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2310372">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2310426">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2310477">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2310512">package</span>&nbsp;<span class="ident" id="2310520">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2310524">import</span>&nbsp;<span class="string" id="2310531">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2310542">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2310621">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2310695">func</span>&nbsp;<span class="ident" id="2310700">Expand</span><span class="op" id="2310706">(</span><span class="ident" id="2310707">s</span>&nbsp;<span class="builtintype" id="2310709">string</span><span class="op" id="2310715">,</span>&nbsp;<span class="ident" id="2310717">mapping</span>&nbsp;<span class="keyword" id="2310725">func</span><span class="op" id="2310729">(</span><span class="builtintype" id="2310730">string</span><span class="op" id="2310736">)</span>&nbsp;<span class="builtintype" id="2310738">string</span><span class="op" id="2310744">)</span>&nbsp;<span class="builtintype" id="2310746">string</span>&nbsp;<span class="op" id="2310753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310756">buf</span>&nbsp;<span class="op" id="2310760">:=</span>&nbsp;<span class="builtinfunc" id="2310763">make</span><span class="op" id="2310767">(</span><span class="op" id="2310768">[</span><span class="op" id="2310769">]</span><span class="builtintype" id="2310770">byte</span><span class="op" id="2310774">,</span>&nbsp;<span class="num" id="2310776">0</span><span class="op" id="2310777">,</span>&nbsp;<span class="num" id="2310779">2</span><span class="op" id="2310780">*</span><span class="builtinfunc" id="2310781">len</span><span class="op" id="2310784">(</span><span class="ident" id="2310785">s</span><span class="op" id="2310786">)</span><span class="op" id="2310787">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2310790">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310850">i</span>&nbsp;<span class="op" id="2310852">:=</span>&nbsp;<span class="num" id="2310855">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2310858">for</span>&nbsp;<span class="ident" id="2310862">j</span>&nbsp;<span class="op" id="2310864">:=</span>&nbsp;<span class="num" id="2310867">0</span><span class="op" id="2310868">;</span>&nbsp;<span class="ident" id="2310870">j</span>&nbsp;<span class="op" id="2310872">&lt;</span>&nbsp;<span class="builtinfunc" id="2310874">len</span><span class="op" id="2310877">(</span><span class="ident" id="2310878">s</span><span class="op" id="2310879">)</span><span class="op" id="2310880">;</span>&nbsp;<span class="ident" id="2310882">j</span><span class="op" id="2310883">++</span>&nbsp;<span class="op" id="2310886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2310890">if</span>&nbsp;<span class="ident" id="2310893">s</span><span class="op" id="2310894">[</span><span class="ident" id="2310895">j</span><span class="op" id="2310896">]</span>&nbsp;<span class="op" id="2310898">==</span>&nbsp;<span class="string" id="2310901">&#39;$&#39;</span>&nbsp;<span class="op" id="2310905">&amp;&amp;</span>&nbsp;<span class="ident" id="2310908">j</span><span class="op" id="2310909">+</span><span class="num" id="2310910">1</span>&nbsp;<span class="op" id="2310912">&lt;</span>&nbsp;<span class="builtinfunc" id="2310914">len</span><span class="op" id="2310917">(</span><span class="ident" id="2310918">s</span><span class="op" id="2310919">)</span>&nbsp;<span class="op" id="2310921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310926">buf</span>&nbsp;<span class="op" id="2310930">=</span>&nbsp;<span class="builtinfunc" id="2310932">append</span><span class="op" id="2310938">(</span><span class="ident" id="2310939">buf</span><span class="op" id="2310942">,</span>&nbsp;<span class="ident" id="2310944">s</span><span class="op" id="2310945">[</span><span class="ident" id="2310946">i</span><span class="op" id="2310947">:</span><span class="ident" id="2310948">j</span><span class="op" id="2310949">]</span><span class="op" id="2310950">...</span><span class="op" id="2310953">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310958">name</span><span class="op" id="2310962">,</span>&nbsp;<span class="ident" id="2310964">w</span>&nbsp;<span class="op" id="2310966">:=</span>&nbsp;<span class="ident" id="2310969">getShellName</span><span class="op" id="2310981">(</span><span class="ident" id="2310982">s</span><span class="op" id="2310983">[</span><span class="ident" id="2310984">j</span><span class="op" id="2310985">+</span><span class="num" id="2310986">1</span><span class="op" id="2310987">:</span><span class="op" id="2310988">]</span><span class="op" id="2310989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310994">buf</span>&nbsp;<span class="op" id="2310998">=</span>&nbsp;<span class="builtinfunc" id="2311000">append</span><span class="op" id="2311006">(</span><span class="ident" id="2311007">buf</span><span class="op" id="2311010">,</span>&nbsp;<span class="ident" id="2311012">mapping</span><span class="op" id="2311019">(</span><span class="ident" id="2311020">name</span><span class="op" id="2311024">)</span><span class="op" id="2311025">...</span><span class="op" id="2311028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311033">j</span>&nbsp;<span class="op" id="2311035">+=</span>&nbsp;<span class="ident" id="2311038">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311043">i</span>&nbsp;<span class="op" id="2311045">=</span>&nbsp;<span class="ident" id="2311047">j</span>&nbsp;<span class="op" id="2311049">+</span>&nbsp;<span class="num" id="2311051">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311055">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311061">return</span>&nbsp;<span class="builtintype" id="2311068">string</span><span class="op" id="2311074">(</span><span class="ident" id="2311075">buf</span><span class="op" id="2311078">)</span>&nbsp;<span class="op" id="2311080">+</span>&nbsp;<span class="ident" id="2311082">s</span><span class="op" id="2311083">[</span><span class="ident" id="2311084">i</span><span class="op" id="2311085">:</span><span class="op" id="2311086">]</span><br>
<span class="lineno"></span><span class="op" id="2311088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2311091">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2311166">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2311232">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2311279">func</span>&nbsp;<span class="ident" id="2311284">ExpandEnv</span><span class="op" id="2311293">(</span><span class="ident" id="2311294">s</span>&nbsp;<span class="builtintype" id="2311296">string</span><span class="op" id="2311302">)</span>&nbsp;<span class="builtintype" id="2311304">string</span>&nbsp;<span class="op" id="2311311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311314">return</span>&nbsp;<span class="ident" id="2311321">Expand</span><span class="op" id="2311327">(</span><span class="ident" id="2311328">s</span><span class="op" id="2311329">,</span>&nbsp;<span class="ident" id="2311331">Getenv</span><span class="op" id="2311337">)</span><br>
<span class="lineno"></span><span class="op" id="2311339">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2311342">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2311414">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2311444">func</span>&nbsp;<span class="ident" id="2311449">isShellSpecialVar</span><span class="op" id="2311466">(</span><span class="ident" id="2311467">c</span>&nbsp;<span class="builtintype" id="2311469">uint8</span><span class="op" id="2311474">)</span>&nbsp;<span class="builtintype" id="2311476">bool</span>&nbsp;<span class="op" id="2311481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311484">switch</span>&nbsp;<span class="ident" id="2311491">c</span>&nbsp;<span class="op" id="2311493">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311496">case</span>&nbsp;<span class="string" id="2311501">&#39;*&#39;</span><span class="op" id="2311504">,</span>&nbsp;<span class="string" id="2311506">&#39;#&#39;</span><span class="op" id="2311509">,</span>&nbsp;<span class="string" id="2311511">&#39;$&#39;</span><span class="op" id="2311514">,</span>&nbsp;<span class="string" id="2311516">&#39;@&#39;</span><span class="op" id="2311519">,</span>&nbsp;<span class="string" id="2311521">&#39;!&#39;</span><span class="op" id="2311524">,</span>&nbsp;<span class="string" id="2311526">&#39;?&#39;</span><span class="op" id="2311529">,</span>&nbsp;<span class="string" id="2311531">&#39;0&#39;</span><span class="op" id="2311534">,</span>&nbsp;<span class="string" id="2311536">&#39;1&#39;</span><span class="op" id="2311539">,</span>&nbsp;<span class="string" id="2311541">&#39;2&#39;</span><span class="op" id="2311544">,</span>&nbsp;<span class="string" id="2311546">&#39;3&#39;</span><span class="op" id="2311549">,</span>&nbsp;<span class="string" id="2311551">&#39;4&#39;</span><span class="op" id="2311554">,</span>&nbsp;<span class="string" id="2311556">&#39;5&#39;</span><span class="op" id="2311559">,</span>&nbsp;<span class="string" id="2311561">&#39;6&#39;</span><span class="op" id="2311564">,</span>&nbsp;<span class="string" id="2311566">&#39;7&#39;</span><span class="op" id="2311569">,</span>&nbsp;<span class="string" id="2311571">&#39;8&#39;</span><span class="op" id="2311574">,</span>&nbsp;<span class="string" id="2311576">&#39;9&#39;</span><span class="op" id="2311579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311583">return</span>&nbsp;<span class="builtintype" id="2311590">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311599">return</span>&nbsp;<span class="builtintype" id="2311606">false</span><br>
<span class="lineno"></span><span class="op" id="2311612">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2311615">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2311696">func</span>&nbsp;<span class="ident" id="2311701">isAlphaNum</span><span class="op" id="2311711">(</span><span class="ident" id="2311712">c</span>&nbsp;<span class="builtintype" id="2311714">uint8</span><span class="op" id="2311719">)</span>&nbsp;<span class="builtintype" id="2311721">bool</span>&nbsp;<span class="op" id="2311726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311729">return</span>&nbsp;<span class="ident" id="2311736">c</span>&nbsp;<span class="op" id="2311738">==</span>&nbsp;<span class="string" id="2311741">&#39;_&#39;</span>&nbsp;<span class="op" id="2311745">||</span>&nbsp;<span class="string" id="2311748">&#39;0&#39;</span>&nbsp;<span class="op" id="2311752">&lt;=</span>&nbsp;<span class="ident" id="2311755">c</span>&nbsp;<span class="op" id="2311757">&amp;&amp;</span>&nbsp;<span class="ident" id="2311760">c</span>&nbsp;<span class="op" id="2311762">&lt;=</span>&nbsp;<span class="string" id="2311765">&#39;9&#39;</span>&nbsp;<span class="op" id="2311769">||</span>&nbsp;<span class="string" id="2311772">&#39;a&#39;</span>&nbsp;<span class="op" id="2311776">&lt;=</span>&nbsp;<span class="ident" id="2311779">c</span>&nbsp;<span class="op" id="2311781">&amp;&amp;</span>&nbsp;<span class="ident" id="2311784">c</span>&nbsp;<span class="op" id="2311786">&lt;=</span>&nbsp;<span class="string" id="2311789">&#39;z&#39;</span>&nbsp;<span class="op" id="2311793">||</span>&nbsp;<span class="string" id="2311796">&#39;A&#39;</span>&nbsp;<span class="op" id="2311800">&lt;=</span>&nbsp;<span class="ident" id="2311803">c</span>&nbsp;<span class="op" id="2311805">&amp;&amp;</span>&nbsp;<span class="ident" id="2311808">c</span>&nbsp;<span class="op" id="2311810">&lt;=</span>&nbsp;<span class="string" id="2311813">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2311817">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2311820">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2311895">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2311973">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2312045">func</span>&nbsp;<span class="ident" id="2312050">getShellName</span><span class="op" id="2312062">(</span><span class="ident" id="2312063">s</span>&nbsp;<span class="builtintype" id="2312065">string</span><span class="op" id="2312071">)</span>&nbsp;<span class="op" id="2312073">(</span><span class="builtintype" id="2312074">string</span><span class="op" id="2312080">,</span>&nbsp;<span class="builtintype" id="2312082">int</span><span class="op" id="2312085">)</span>&nbsp;<span class="op" id="2312087">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312090">switch</span>&nbsp;<span class="op" id="2312097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312100">case</span>&nbsp;<span class="ident" id="2312105">s</span><span class="op" id="2312106">[</span><span class="num" id="2312107">0</span><span class="op" id="2312108">]</span>&nbsp;<span class="op" id="2312110">==</span>&nbsp;<span class="string" id="2312113">&#39;{&#39;</span><span class="op" id="2312116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312120">if</span>&nbsp;<span class="builtinfunc" id="2312123">len</span><span class="op" id="2312126">(</span><span class="ident" id="2312127">s</span><span class="op" id="2312128">)</span>&nbsp;<span class="op" id="2312130">&gt;</span>&nbsp;<span class="num" id="2312132">2</span>&nbsp;<span class="op" id="2312134">&amp;&amp;</span>&nbsp;<span class="ident" id="2312137">isShellSpecialVar</span><span class="op" id="2312154">(</span><span class="ident" id="2312155">s</span><span class="op" id="2312156">[</span><span class="num" id="2312157">1</span><span class="op" id="2312158">]</span><span class="op" id="2312159">)</span>&nbsp;<span class="op" id="2312161">&amp;&amp;</span>&nbsp;<span class="ident" id="2312164">s</span><span class="op" id="2312165">[</span><span class="num" id="2312166">2</span><span class="op" id="2312167">]</span>&nbsp;<span class="op" id="2312169">==</span>&nbsp;<span class="string" id="2312172">&#39;}&#39;</span>&nbsp;<span class="op" id="2312176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312181">return</span>&nbsp;<span class="ident" id="2312188">s</span><span class="op" id="2312189">[</span><span class="num" id="2312190">1</span><span class="op" id="2312191">:</span><span class="num" id="2312192">2</span><span class="op" id="2312193">]</span><span class="op" id="2312194">,</span>&nbsp;<span class="num" id="2312196">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312200">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2312204">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312231">for</span>&nbsp;<span class="ident" id="2312235">i</span>&nbsp;<span class="op" id="2312237">:=</span>&nbsp;<span class="num" id="2312240">1</span><span class="op" id="2312241">;</span>&nbsp;<span class="ident" id="2312243">i</span>&nbsp;<span class="op" id="2312245">&lt;</span>&nbsp;<span class="builtinfunc" id="2312247">len</span><span class="op" id="2312250">(</span><span class="ident" id="2312251">s</span><span class="op" id="2312252">)</span><span class="op" id="2312253">;</span>&nbsp;<span class="ident" id="2312255">i</span><span class="op" id="2312256">++</span>&nbsp;<span class="op" id="2312259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312264">if</span>&nbsp;<span class="ident" id="2312267">s</span><span class="op" id="2312268">[</span><span class="ident" id="2312269">i</span><span class="op" id="2312270">]</span>&nbsp;<span class="op" id="2312272">==</span>&nbsp;<span class="string" id="2312275">&#39;}&#39;</span>&nbsp;<span class="op" id="2312279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312285">return</span>&nbsp;<span class="ident" id="2312292">s</span><span class="op" id="2312293">[</span><span class="num" id="2312294">1</span><span class="op" id="2312295">:</span><span class="ident" id="2312296">i</span><span class="op" id="2312297">]</span><span class="op" id="2312298">,</span>&nbsp;<span class="ident" id="2312300">i</span>&nbsp;<span class="op" id="2312302">+</span>&nbsp;<span class="num" id="2312304">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312309">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312317">return</span>&nbsp;<span class="string" id="2312324">&#34;&#34;</span><span class="op" id="2312326">,</span>&nbsp;<span class="num" id="2312328">1</span>&nbsp;<span class="comment" id="2312330">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312366">case</span>&nbsp;<span class="ident" id="2312371">isShellSpecialVar</span><span class="op" id="2312388">(</span><span class="ident" id="2312389">s</span><span class="op" id="2312390">[</span><span class="num" id="2312391">0</span><span class="op" id="2312392">]</span><span class="op" id="2312393">)</span><span class="op" id="2312394">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312398">return</span>&nbsp;<span class="ident" id="2312405">s</span><span class="op" id="2312406">[</span><span class="num" id="2312407">0</span><span class="op" id="2312408">:</span><span class="num" id="2312409">1</span><span class="op" id="2312410">]</span><span class="op" id="2312411">,</span>&nbsp;<span class="num" id="2312413">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312416">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2312419">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312443">var</span>&nbsp;<span class="ident" id="2312447">i</span>&nbsp;<span class="builtintype" id="2312449">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312454">for</span>&nbsp;<span class="ident" id="2312458">i</span>&nbsp;<span class="op" id="2312460">=</span>&nbsp;<span class="num" id="2312462">0</span><span class="op" id="2312463">;</span>&nbsp;<span class="ident" id="2312465">i</span>&nbsp;<span class="op" id="2312467">&lt;</span>&nbsp;<span class="builtinfunc" id="2312469">len</span><span class="op" id="2312472">(</span><span class="ident" id="2312473">s</span><span class="op" id="2312474">)</span>&nbsp;<span class="op" id="2312476">&amp;&amp;</span>&nbsp;<span class="ident" id="2312479">isAlphaNum</span><span class="op" id="2312489">(</span><span class="ident" id="2312490">s</span><span class="op" id="2312491">[</span><span class="ident" id="2312492">i</span><span class="op" id="2312493">]</span><span class="op" id="2312494">)</span><span class="op" id="2312495">;</span>&nbsp;<span class="ident" id="2312497">i</span><span class="op" id="2312498">++</span>&nbsp;<span class="op" id="2312501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312507">return</span>&nbsp;<span class="ident" id="2312514">s</span><span class="op" id="2312515">[</span><span class="op" id="2312516">:</span><span class="ident" id="2312517">i</span><span class="op" id="2312518">]</span><span class="op" id="2312519">,</span>&nbsp;<span class="ident" id="2312521">i</span><br>
<span class="lineno">75</span><span class="op" id="2312523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2312526">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2312602">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2312679">func</span>&nbsp;<span class="ident" id="2312684">Getenv</span><span class="op" id="2312690">(</span><span class="ident" id="2312691">key</span>&nbsp;<span class="builtintype" id="2312695">string</span><span class="op" id="2312701">)</span>&nbsp;<span class="builtintype" id="2312703">string</span>&nbsp;<span class="op" id="2312710">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312713">v</span><span class="op" id="2312714">,</span>&nbsp;<span class="ident" id="2312716">_</span>&nbsp;<span class="op" id="2312718">:=</span>&nbsp;<span class="ident" id="2312721">syscall</span><span class="op" id="2312728">.</span><span class="ident" id="2312729">Getenv</span><span class="op" id="2312735">(</span><span class="ident" id="2312736">key</span><span class="op" id="2312739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312742">return</span>&nbsp;<span class="ident" id="2312749">v</span><br>
<span class="lineno"></span><span class="op" id="2312751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2312754">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2312825">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2312857">func</span>&nbsp;<span class="ident" id="2312862">Setenv</span><span class="op" id="2312868">(</span><span class="ident" id="2312869">key</span><span class="op" id="2312872">,</span>&nbsp;<span class="ident" id="2312874">value</span>&nbsp;<span class="builtintype" id="2312880">string</span><span class="op" id="2312886">)</span>&nbsp;<span class="builtintype" id="2312888">error</span>&nbsp;<span class="op" id="2312894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312897">err</span>&nbsp;<span class="op" id="2312901">:=</span>&nbsp;<span class="ident" id="2312904">syscall</span><span class="op" id="2312911">.</span><span class="ident" id="2312912">Setenv</span><span class="op" id="2312918">(</span><span class="ident" id="2312919">key</span><span class="op" id="2312922">,</span>&nbsp;<span class="ident" id="2312924">value</span><span class="op" id="2312929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312932">if</span>&nbsp;<span class="ident" id="2312935">err</span>&nbsp;<span class="op" id="2312939">!=</span>&nbsp;<span class="ident" id="2312942">nil</span>&nbsp;<span class="op" id="2312946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312950">return</span>&nbsp;<span class="ident" id="2312957">NewSyscallError</span><span class="op" id="2312972">(</span><span class="string" id="2312973">&#34;setenv&#34;</span><span class="op" id="2312981">,</span>&nbsp;<span class="ident" id="2312983">err</span><span class="op" id="2312986">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312992">return</span>&nbsp;<span class="ident" id="2312999">nil</span><br>
<span class="lineno"></span><span class="op" id="2313003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2313006">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2313056">func</span>&nbsp;<span class="ident" id="2313061">Unsetenv</span><span class="op" id="2313069">(</span><span class="ident" id="2313070">key</span>&nbsp;<span class="builtintype" id="2313074">string</span><span class="op" id="2313080">)</span>&nbsp;<span class="builtintype" id="2313082">error</span>&nbsp;<span class="op" id="2313088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313091">return</span>&nbsp;<span class="ident" id="2313098">syscall</span><span class="op" id="2313105">.</span><span class="ident" id="2313106">Unsetenv</span><span class="op" id="2313114">(</span><span class="ident" id="2313115">key</span><span class="op" id="2313118">)</span><br>
<span class="lineno"></span><span class="op" id="2313120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2313123">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2313170">func</span>&nbsp;<span class="ident" id="2313175">Clearenv</span><span class="op" id="2313183">(</span><span class="op" id="2313184">)</span>&nbsp;<span class="op" id="2313186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313189">syscall</span><span class="op" id="2313196">.</span><span class="ident" id="2313197">Clearenv</span><span class="op" id="2313205">(</span><span class="op" id="2313206">)</span><br>
<span class="lineno"></span><span class="op" id="2313208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2313211">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2313278">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2313306">func</span>&nbsp;<span class="ident" id="2313311">Environ</span><span class="op" id="2313318">(</span><span class="op" id="2313319">)</span>&nbsp;<span class="op" id="2313321">[</span><span class="op" id="2313322">]</span><span class="builtintype" id="2313323">string</span>&nbsp;<span class="op" id="2313330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313333">return</span>&nbsp;<span class="ident" id="2313340">syscall</span><span class="op" id="2313347">.</span><span class="ident" id="2313348">Environ</span><span class="op" id="2313355">(</span><span class="op" id="2313356">)</span><br>
<span class="lineno"></span><span class="op" id="2313358">}</span>
</div>
</body>
</html>
