<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2688815">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2688871">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2688925">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2688976">package</span>&nbsp;<span class="ident" id="2688984">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2688989">import</span>&nbsp;<span class="op" id="2688996">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2688999">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2689005">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2689015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2689018">func</span>&nbsp;<span class="ident" id="2689023">setIPv4MulticastInterface</span><span class="op" id="2689048">(</span><span class="ident" id="2689049">fd</span>&nbsp;<span class="op" id="2689052">*</span><span class="ident" id="2689053"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2689058">,</span>&nbsp;<span class="ident" id="2689060">ifi</span>&nbsp;<span class="op" id="2689064">*</span><span class="ident" id="2689065"><a href="/net/interface.go.html#2593524">Interface</a></span><span class="op" id="2689074">)</span>&nbsp;<span class="builtintype" id="2689076">error</span>&nbsp;<span class="op" id="2689082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689085">var</span>&nbsp;<span class="ident" id="2689089">v</span>&nbsp;<span class="builtintype" id="2689091">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689098">if</span>&nbsp;<span class="ident" id="2689101"><a href="/net/sockoptip_linux.go.html#2689060">ifi</a></span>&nbsp;<span class="op" id="2689105">!=</span>&nbsp;<span class="ident" id="2689108">nil</span>&nbsp;<span class="op" id="2689112">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2689116"><a href="/net/sockoptip_linux.go.html#2689089">v</a></span>&nbsp;<span class="op" id="2689118">=</span>&nbsp;<span class="builtintype" id="2689120">int32</span><span class="op" id="2689125">(</span><span class="ident" id="2689126"><a href="/net/sockoptip_linux.go.html#2689060">ifi</a></span><span class="op" id="2689129">.</span><span class="ident" id="2689130">Index</span><span class="op" id="2689135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2689138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2689141">mreq</span>&nbsp;<span class="op" id="2689146">:=</span>&nbsp;<span class="op" id="2689149">&amp;</span><span class="ident" id="2689150"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689157">.</span><span class="ident" id="2689158">IPMreqn</span><span class="op" id="2689165">{</span><span class="ident" id="2689166">Ifindex</span><span class="op" id="2689173">:</span>&nbsp;<span class="ident" id="2689175"><a href="/net/sockoptip_linux.go.html#2689089">v</a></span><span class="op" id="2689176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689179">if</span>&nbsp;<span class="ident" id="2689182">err</span>&nbsp;<span class="op" id="2689186">:=</span>&nbsp;<span class="ident" id="2689189"><a href="/net/sockoptip_linux.go.html#2689049">fd</a></span><span class="op" id="2689191">.</span><span class="ident" id="2689192">incref</span><span class="op" id="2689198">(</span><span class="op" id="2689199">)</span><span class="op" id="2689200">;</span>&nbsp;<span class="ident" id="2689202"><a href="/net/sockoptip_linux.go.html#2689182">err</a></span>&nbsp;<span class="op" id="2689206">!=</span>&nbsp;<span class="ident" id="2689209">nil</span>&nbsp;<span class="op" id="2689213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689217">return</span>&nbsp;<span class="ident" id="2689224"><a href="/net/sockoptip_linux.go.html#2689182">err</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2689229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689232">defer</span>&nbsp;<span class="ident" id="2689238"><a href="/net/sockoptip_linux.go.html#2689049">fd</a></span><span class="op" id="2689240">.</span><span class="ident" id="2689241">decref</span><span class="op" id="2689247">(</span><span class="op" id="2689248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689251">return</span>&nbsp;<span class="ident" id="2689258"><a href="/net/sockoptip_linux.go.html#2688999">os</a></span><span class="op" id="2689260">.</span><span class="ident" id="2689261">NewSyscallError</span><span class="op" id="2689276">(</span><span class="string" id="2689277">&#34;setsockopt&#34;</span><span class="op" id="2689289">,</span>&nbsp;<span class="ident" id="2689291"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689298">.</span><span class="ident" id="2689299">SetsockoptIPMreqn</span><span class="op" id="2689316">(</span><span class="ident" id="2689317"><a href="/net/sockoptip_linux.go.html#2689049">fd</a></span><span class="op" id="2689319">.</span><span class="ident" id="2689320">sysfd</span><span class="op" id="2689325">,</span>&nbsp;<span class="ident" id="2689327"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689334">.</span><span class="ident" id="2689335">IPPROTO_IP</span><span class="op" id="2689345">,</span>&nbsp;<span class="ident" id="2689347"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689354">.</span><span class="ident" id="2689355">IP_MULTICAST_IF</span><span class="op" id="2689370">,</span>&nbsp;<span class="ident" id="2689372"><a href="/net/sockoptip_linux.go.html#2689141">mreq</a></span><span class="op" id="2689376">)</span><span class="op" id="2689377">)</span><br>
<span class="lineno"></span><span class="op" id="2689379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="2689382">func</span>&nbsp;<span class="ident" id="2689387">setIPv4MulticastLoopback</span><span class="op" id="2689411">(</span><span class="ident" id="2689412">fd</span>&nbsp;<span class="op" id="2689415">*</span><span class="ident" id="2689416"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2689421">,</span>&nbsp;<span class="ident" id="2689423">v</span>&nbsp;<span class="builtintype" id="2689425">bool</span><span class="op" id="2689429">)</span>&nbsp;<span class="builtintype" id="2689431">error</span>&nbsp;<span class="op" id="2689437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689440">if</span>&nbsp;<span class="ident" id="2689443">err</span>&nbsp;<span class="op" id="2689447">:=</span>&nbsp;<span class="ident" id="2689450"><a href="/net/sockoptip_linux.go.html#2689412">fd</a></span><span class="op" id="2689452">.</span><span class="ident" id="2689453">incref</span><span class="op" id="2689459">(</span><span class="op" id="2689460">)</span><span class="op" id="2689461">;</span>&nbsp;<span class="ident" id="2689463"><a href="/net/sockoptip_linux.go.html#2689443">err</a></span>&nbsp;<span class="op" id="2689467">!=</span>&nbsp;<span class="ident" id="2689470">nil</span>&nbsp;<span class="op" id="2689474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689478">return</span>&nbsp;<span class="ident" id="2689485"><a href="/net/sockoptip_linux.go.html#2689443">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2689490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689493">defer</span>&nbsp;<span class="ident" id="2689499"><a href="/net/sockoptip_linux.go.html#2689412">fd</a></span><span class="op" id="2689501">.</span><span class="ident" id="2689502">decref</span><span class="op" id="2689508">(</span><span class="op" id="2689509">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2689512">return</span>&nbsp;<span class="ident" id="2689519"><a href="/net/sockoptip_linux.go.html#2688999">os</a></span><span class="op" id="2689521">.</span><span class="ident" id="2689522">NewSyscallError</span><span class="op" id="2689537">(</span><span class="string" id="2689538">&#34;setsockopt&#34;</span><span class="op" id="2689550">,</span>&nbsp;<span class="ident" id="2689552"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689559">.</span><span class="ident" id="2689560">SetsockoptInt</span><span class="op" id="2689573">(</span><span class="ident" id="2689574"><a href="/net/sockoptip_linux.go.html#2689412">fd</a></span><span class="op" id="2689576">.</span><span class="ident" id="2689577">sysfd</span><span class="op" id="2689582">,</span>&nbsp;<span class="ident" id="2689584"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689591">.</span><span class="ident" id="2689592">IPPROTO_IP</span><span class="op" id="2689602">,</span>&nbsp;<span class="ident" id="2689604"><a href="/net/sockoptip_linux.go.html#2689005">syscall</a></span><span class="op" id="2689611">.</span><span class="ident" id="2689612">IP_MULTICAST_LOOP</span><span class="op" id="2689629">,</span>&nbsp;<span class="ident" id="2689631"><a href="/net/sockopt_posix.go.html#2686216">boolint</a></span><span class="op" id="2689638">(</span><span class="ident" id="2689639"><a href="/net/sockoptip_linux.go.html#2689423">v</a></span><span class="op" id="2689640">)</span><span class="op" id="2689641">)</span><span class="op" id="2689642">)</span><br>
<span class="lineno"></span><span class="op" id="2689644">}</span>
</div>
</body>
</html>
