<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2742018">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2742073">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2742127">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2742178">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2742252">//</span><br>
<span class="lineno"></span><span class="comment" id="2742255">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2742323">package</span>&nbsp;<span class="ident" id="2742331">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2742337">import</span>&nbsp;<span class="string" id="2742344">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742354">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2742421">//</span><br>
<span class="lineno"></span><span class="comment" id="2742424">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2742496">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2742569">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2742633">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2742672">//</span><br>
<span class="lineno"></span><span class="comment" id="2742675">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2742752">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2742816">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2742880">//</span><br>
<span class="lineno"></span><span class="comment" id="2742883">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2742960">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2743036">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2743114">//</span><br>
<span class="lineno"></span><span class="comment" id="2743117">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2743194">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2743275">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2743349">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2743429">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2743507">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2743556">//</span><br>
<span class="lineno"></span><span class="comment" id="2743559">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2743639">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2743718">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2743797">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2743870">//</span><br>
<span class="lineno"></span><span class="keyword" id="2743873">type</span>&nbsp;<span class="ident" id="2743878">Time</span>&nbsp;<span class="keyword" id="2743883">struct</span>&nbsp;<span class="op" id="2743890">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743893">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743943">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743979">sec</span>&nbsp;<span class="ident" id="2743983">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743991">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744036">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744083">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744127">nsec</span>&nbsp;<span class="builtintype" id="2744132">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744140">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744194">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744247">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744281">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744324">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744372">loc</span>&nbsp;<span class="op" id="2744376">*</span><span class="ident" id="2744377">Location</span><br>
<span class="lineno">55</span><span class="op" id="2744386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744389">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2744445">func</span>&nbsp;<span class="op" id="2744450">(</span><span class="ident" id="2744451">t</span>&nbsp;<span class="ident" id="2744453">Time</span><span class="op" id="2744457">)</span>&nbsp;<span class="ident" id="2744459">After</span><span class="op" id="2744464">(</span><span class="ident" id="2744465">u</span>&nbsp;<span class="ident" id="2744467">Time</span><span class="op" id="2744471">)</span>&nbsp;<span class="builtintype" id="2744473">bool</span>&nbsp;<span class="op" id="2744478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744481">return</span>&nbsp;<span class="ident" id="2744488">t</span><span class="op" id="2744489">.</span><span class="ident" id="2744490">sec</span>&nbsp;<span class="op" id="2744494">&gt;</span>&nbsp;<span class="ident" id="2744496">u</span><span class="op" id="2744497">.</span><span class="ident" id="2744498">sec</span>&nbsp;<span class="op" id="2744502">||</span>&nbsp;<span class="ident" id="2744505">t</span><span class="op" id="2744506">.</span><span class="ident" id="2744507">sec</span>&nbsp;<span class="op" id="2744511">==</span>&nbsp;<span class="ident" id="2744514">u</span><span class="op" id="2744515">.</span><span class="ident" id="2744516">sec</span>&nbsp;<span class="op" id="2744520">&amp;&amp;</span>&nbsp;<span class="ident" id="2744523">t</span><span class="op" id="2744524">.</span><span class="ident" id="2744525">nsec</span>&nbsp;<span class="op" id="2744530">&gt;</span>&nbsp;<span class="ident" id="2744532">u</span><span class="op" id="2744533">.</span><span class="ident" id="2744534">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2744539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744542">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2744600">func</span>&nbsp;<span class="op" id="2744605">(</span><span class="ident" id="2744606">t</span>&nbsp;<span class="ident" id="2744608">Time</span><span class="op" id="2744612">)</span>&nbsp;<span class="ident" id="2744614">Before</span><span class="op" id="2744620">(</span><span class="ident" id="2744621">u</span>&nbsp;<span class="ident" id="2744623">Time</span><span class="op" id="2744627">)</span>&nbsp;<span class="builtintype" id="2744629">bool</span>&nbsp;<span class="op" id="2744634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744637">return</span>&nbsp;<span class="ident" id="2744644">t</span><span class="op" id="2744645">.</span><span class="ident" id="2744646">sec</span>&nbsp;<span class="op" id="2744650">&lt;</span>&nbsp;<span class="ident" id="2744652">u</span><span class="op" id="2744653">.</span><span class="ident" id="2744654">sec</span>&nbsp;<span class="op" id="2744658">||</span>&nbsp;<span class="ident" id="2744661">t</span><span class="op" id="2744662">.</span><span class="ident" id="2744663">sec</span>&nbsp;<span class="op" id="2744667">==</span>&nbsp;<span class="ident" id="2744670">u</span><span class="op" id="2744671">.</span><span class="ident" id="2744672">sec</span>&nbsp;<span class="op" id="2744676">&amp;&amp;</span>&nbsp;<span class="ident" id="2744679">t</span><span class="op" id="2744680">.</span><span class="ident" id="2744681">nsec</span>&nbsp;<span class="op" id="2744686">&lt;</span>&nbsp;<span class="ident" id="2744688">u</span><span class="op" id="2744689">.</span><span class="ident" id="2744690">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2744695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744698">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2744764">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2744831">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2744887">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2744958">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2744976">func</span>&nbsp;<span class="op" id="2744981">(</span><span class="ident" id="2744982">t</span>&nbsp;<span class="ident" id="2744984">Time</span><span class="op" id="2744988">)</span>&nbsp;<span class="ident" id="2744990">Equal</span><span class="op" id="2744995">(</span><span class="ident" id="2744996">u</span>&nbsp;<span class="ident" id="2744998">Time</span><span class="op" id="2745002">)</span>&nbsp;<span class="builtintype" id="2745004">bool</span>&nbsp;<span class="op" id="2745009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745012">return</span>&nbsp;<span class="ident" id="2745019">t</span><span class="op" id="2745020">.</span><span class="ident" id="2745021">sec</span>&nbsp;<span class="op" id="2745025">==</span>&nbsp;<span class="ident" id="2745028">u</span><span class="op" id="2745029">.</span><span class="ident" id="2745030">sec</span>&nbsp;<span class="op" id="2745034">&amp;&amp;</span>&nbsp;<span class="ident" id="2745037">t</span><span class="op" id="2745038">.</span><span class="ident" id="2745039">nsec</span>&nbsp;<span class="op" id="2745044">==</span>&nbsp;<span class="ident" id="2745047">u</span><span class="op" id="2745048">.</span><span class="ident" id="2745049">nsec</span><br>
<span class="lineno"></span><span class="op" id="2745054">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2745057">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2745118">type</span>&nbsp;<span class="ident" id="2745123">Month</span>&nbsp;<span class="builtintype" id="2745129">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2745134">const</span>&nbsp;<span class="op" id="2745140">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745143">January</span>&nbsp;<span class="ident" id="2745151">Month</span>&nbsp;<span class="op" id="2745157">=</span>&nbsp;<span class="num" id="2745159">1</span>&nbsp;<span class="op" id="2745161">+</span>&nbsp;<span class="ident" id="2745163">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745169">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745179">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745186">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745193">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745198">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745204">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745210">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745218">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745229">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745238">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745248">December</span><br>
<span class="lineno"></span><span class="op" id="2745257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2745260">var</span>&nbsp;<span class="ident" id="2745264">months</span>&nbsp;<span class="op" id="2745271">=</span>&nbsp;<span class="op" id="2745273">[</span><span class="op" id="2745274">...</span><span class="op" id="2745277">]</span><span class="builtintype" id="2745278">string</span><span class="op" id="2745284">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745287">&#34;January&#34;</span><span class="op" id="2745296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745299">&#34;February&#34;</span><span class="op" id="2745309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745312">&#34;March&#34;</span><span class="op" id="2745319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745322">&#34;April&#34;</span><span class="op" id="2745329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745332">&#34;May&#34;</span><span class="op" id="2745337">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745340">&#34;June&#34;</span><span class="op" id="2745346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745349">&#34;July&#34;</span><span class="op" id="2745355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745358">&#34;August&#34;</span><span class="op" id="2745366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745369">&#34;September&#34;</span><span class="op" id="2745380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745383">&#34;October&#34;</span><span class="op" id="2745392">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745395">&#34;November&#34;</span><span class="op" id="2745405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745408">&#34;December&#34;</span><span class="op" id="2745418">,</span><br>
<span class="lineno"></span><span class="op" id="2745420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2745423">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2745501">func</span>&nbsp;<span class="op" id="2745506">(</span><span class="ident" id="2745507">m</span>&nbsp;<span class="ident" id="2745509">Month</span><span class="op" id="2745514">)</span>&nbsp;<span class="ident" id="2745516">String</span><span class="op" id="2745522">(</span><span class="op" id="2745523">)</span>&nbsp;<span class="builtintype" id="2745525">string</span>&nbsp;<span class="op" id="2745532">{</span>&nbsp;<span class="keyword" id="2745534">return</span>&nbsp;<span class="ident" id="2745541">months</span><span class="op" id="2745547">[</span><span class="ident" id="2745548">m</span><span class="op" id="2745549">-</span><span class="num" id="2745550">1</span><span class="op" id="2745551">]</span>&nbsp;<span class="op" id="2745553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2745556">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2745616">type</span>&nbsp;<span class="ident" id="2745621">Weekday</span>&nbsp;<span class="builtintype" id="2745629">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2745634">const</span>&nbsp;<span class="op" id="2745640">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745643">Sunday</span>&nbsp;<span class="ident" id="2745650">Weekday</span>&nbsp;<span class="op" id="2745658">=</span>&nbsp;<span class="ident" id="2745660">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745666">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745674">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745683">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745694">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745704">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745712">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2745721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2745724">var</span>&nbsp;<span class="ident" id="2745728">days</span>&nbsp;<span class="op" id="2745733">=</span>&nbsp;<span class="op" id="2745735">[</span><span class="op" id="2745736">...</span><span class="op" id="2745739">]</span><span class="builtintype" id="2745740">string</span><span class="op" id="2745746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745749">&#34;Sunday&#34;</span><span class="op" id="2745757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745760">&#34;Monday&#34;</span><span class="op" id="2745768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745771">&#34;Tuesday&#34;</span><span class="op" id="2745780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745783">&#34;Wednesday&#34;</span><span class="op" id="2745794">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745797">&#34;Thursday&#34;</span><span class="op" id="2745807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745810">&#34;Friday&#34;</span><span class="op" id="2745818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2745821">&#34;Saturday&#34;</span><span class="op" id="2745831">,</span><br>
<span class="lineno"></span><span class="op" id="2745833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2745836">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2745909">func</span>&nbsp;<span class="op" id="2745914">(</span><span class="ident" id="2745915">d</span>&nbsp;<span class="ident" id="2745917">Weekday</span><span class="op" id="2745924">)</span>&nbsp;<span class="ident" id="2745926">String</span><span class="op" id="2745932">(</span><span class="op" id="2745933">)</span>&nbsp;<span class="builtintype" id="2745935">string</span>&nbsp;<span class="op" id="2745942">{</span>&nbsp;<span class="keyword" id="2745944">return</span>&nbsp;<span class="ident" id="2745951">days</span><span class="op" id="2745955">[</span><span class="ident" id="2745956">d</span><span class="op" id="2745957">]</span>&nbsp;<span class="op" id="2745959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2745962">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2745987">//</span><br>
<span class="lineno">140</span><span class="comment" id="2745990">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2746036">//&nbsp;&nbsp;&nbsp;&nbspJanuary&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2746081">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2746150">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2746222">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2746292">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2746358">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2746423">//</span><br>
<span class="lineno"></span><span class="comment" id="2746426">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2746494">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2746564">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2746635">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2746703">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2746771">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2746804">//</span><br>
<span class="lineno">155</span><span class="comment" id="2746807">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2746877">//</span><br>
<span class="lineno"></span><span class="comment" id="2746880">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2746952">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2747020">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2747092">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2747162">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2747232">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2747304">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2747375">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2747446">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2747519">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2747592">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2747657">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2747729">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2747756">//</span><br>
<span class="lineno"></span><span class="comment" id="2747759">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2747775">//</span><br>
<span class="lineno"></span><span class="comment" id="2747778">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2747792">//</span><br>
<span class="lineno">175</span><span class="comment" id="2747795">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2747811">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2747827">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2747841">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2747846">//</span><br>
<span class="lineno">180</span><span class="comment" id="2747849">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2747864">//</span><br>
<span class="lineno"></span><span class="comment" id="2747867">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2747936">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2748009">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2748080">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2748152">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2748224">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2748296">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2748369">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2748442">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2748460">//</span><br>
<span class="lineno"></span><span class="comment" id="2748463">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2748531">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2748588">//</span><br>
<span class="lineno">195</span><span class="comment" id="2748591">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2748666">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2748741">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2748813">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2748887">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2748933">//</span><br>
<span class="lineno"></span><span class="comment" id="2748936">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2749012">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2749070">//</span><br>
<span class="lineno"></span><span class="comment" id="2749073">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2749147">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2749157">//</span><br>
<span class="lineno"></span><span class="comment" id="2749160">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2749233">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2749299">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2749373">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2749446">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2749515">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2749584">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2749611">//</span><br>
<span class="lineno">215</span><span class="comment" id="2749614">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2749682">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2749725">const</span>&nbsp;<span class="op" id="2749731">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749734">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749788">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749859">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749901">absoluteZeroYear</span>&nbsp;<span class="op" id="2749918">=</span>&nbsp;<span class="op" id="2749920">-</span><span class="num" id="2749921">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749936">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749967">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750020">internalYear</span>&nbsp;<span class="op" id="2750033">=</span>&nbsp;<span class="num" id="2750035">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2750039">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750075">unixYear</span>&nbsp;<span class="op" id="2750084">=</span>&nbsp;<span class="num" id="2750086">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2750093">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750161">absoluteToInternal</span>&nbsp;<span class="ident" id="2750180">int64</span>&nbsp;<span class="op" id="2750186">=</span>&nbsp;<span class="op" id="2750188">(</span><span class="ident" id="2750189">absoluteZeroYear</span>&nbsp;<span class="op" id="2750206">-</span>&nbsp;<span class="ident" id="2750208">internalYear</span><span class="op" id="2750220">)</span>&nbsp;<span class="op" id="2750222">*</span>&nbsp;<span class="num" id="2750224">365.2425</span>&nbsp;<span class="op" id="2750233">*</span>&nbsp;<span class="ident" id="2750235">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750250">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2750275">=</span>&nbsp;<span class="op" id="2750277">-</span><span class="ident" id="2750278">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750299">unixToInternal</span>&nbsp;<span class="ident" id="2750314">int64</span>&nbsp;<span class="op" id="2750320">=</span>&nbsp;<span class="op" id="2750322">(</span><span class="num" id="2750323">1969</span><span class="op" id="2750327">*</span><span class="num" id="2750328">365</span>&nbsp;<span class="op" id="2750332">+</span>&nbsp;<span class="num" id="2750334">1969</span><span class="op" id="2750338">/</span><span class="num" id="2750339">4</span>&nbsp;<span class="op" id="2750341">-</span>&nbsp;<span class="num" id="2750343">1969</span><span class="op" id="2750347">/</span><span class="num" id="2750348">100</span>&nbsp;<span class="op" id="2750352">+</span>&nbsp;<span class="num" id="2750354">1969</span><span class="op" id="2750358">/</span><span class="num" id="2750359">400</span><span class="op" id="2750362">)</span>&nbsp;<span class="op" id="2750364">*</span>&nbsp;<span class="ident" id="2750366">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750381">internalToUnix</span>&nbsp;<span class="ident" id="2750396">int64</span>&nbsp;<span class="op" id="2750402">=</span>&nbsp;<span class="op" id="2750404">-</span><span class="ident" id="2750405">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2750420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2750423">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2750485">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2750521">func</span>&nbsp;<span class="op" id="2750526">(</span><span class="ident" id="2750527">t</span>&nbsp;<span class="ident" id="2750529">Time</span><span class="op" id="2750533">)</span>&nbsp;<span class="ident" id="2750535">IsZero</span><span class="op" id="2750541">(</span><span class="op" id="2750542">)</span>&nbsp;<span class="builtintype" id="2750544">bool</span>&nbsp;<span class="op" id="2750549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750552">return</span>&nbsp;<span class="ident" id="2750559">t</span><span class="op" id="2750560">.</span><span class="ident" id="2750561">sec</span>&nbsp;<span class="op" id="2750565">==</span>&nbsp;<span class="num" id="2750568">0</span>&nbsp;<span class="op" id="2750570">&amp;&amp;</span>&nbsp;<span class="ident" id="2750573">t</span><span class="op" id="2750574">.</span><span class="ident" id="2750575">nsec</span>&nbsp;<span class="op" id="2750580">==</span>&nbsp;<span class="num" id="2750583">0</span><br>
<span class="lineno"></span><span class="op" id="2750585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2750588">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2750664">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2750739">func</span>&nbsp;<span class="op" id="2750744">(</span><span class="ident" id="2750745">t</span>&nbsp;<span class="ident" id="2750747">Time</span><span class="op" id="2750751">)</span>&nbsp;<span class="ident" id="2750753">abs</span><span class="op" id="2750756">(</span><span class="op" id="2750757">)</span>&nbsp;<span class="ident" id="2750759">uint64</span>&nbsp;<span class="op" id="2750766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750769">l</span>&nbsp;<span class="op" id="2750771">:=</span>&nbsp;<span class="ident" id="2750774">t</span><span class="op" id="2750775">.</span><span class="ident" id="2750776">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2750781">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750821">if</span>&nbsp;<span class="ident" id="2750824">l</span>&nbsp;<span class="op" id="2750826">==</span>&nbsp;<span class="ident" id="2750829">nil</span>&nbsp;<span class="op" id="2750833">||</span>&nbsp;<span class="ident" id="2750836">l</span>&nbsp;<span class="op" id="2750838">==</span>&nbsp;<span class="op" id="2750841">&amp;</span><span class="ident" id="2750842">localLoc</span>&nbsp;<span class="op" id="2750851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750855">l</span>&nbsp;<span class="op" id="2750857">=</span>&nbsp;<span class="ident" id="2750859">l</span><span class="op" id="2750860">.</span><span class="ident" id="2750861">get</span><span class="op" id="2750864">(</span><span class="op" id="2750865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750871">sec</span>&nbsp;<span class="op" id="2750875">:=</span>&nbsp;<span class="ident" id="2750878">t</span><span class="op" id="2750879">.</span><span class="ident" id="2750880">sec</span>&nbsp;<span class="op" id="2750884">+</span>&nbsp;<span class="ident" id="2750886">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750902">if</span>&nbsp;<span class="ident" id="2750905">l</span>&nbsp;<span class="op" id="2750907">!=</span>&nbsp;<span class="op" id="2750910">&amp;</span><span class="ident" id="2750911">utcLoc</span>&nbsp;<span class="op" id="2750918">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750922">if</span>&nbsp;<span class="ident" id="2750925">l</span><span class="op" id="2750926">.</span><span class="ident" id="2750927">cacheZone</span>&nbsp;<span class="op" id="2750937">!=</span>&nbsp;<span class="ident" id="2750940">nil</span>&nbsp;<span class="op" id="2750944">&amp;&amp;</span>&nbsp;<span class="ident" id="2750947">l</span><span class="op" id="2750948">.</span><span class="ident" id="2750949">cacheStart</span>&nbsp;<span class="op" id="2750960">&lt;=</span>&nbsp;<span class="ident" id="2750963">sec</span>&nbsp;<span class="op" id="2750967">&amp;&amp;</span>&nbsp;<span class="ident" id="2750970">sec</span>&nbsp;<span class="op" id="2750974">&lt;</span>&nbsp;<span class="ident" id="2750976">l</span><span class="op" id="2750977">.</span><span class="ident" id="2750978">cacheEnd</span>&nbsp;<span class="op" id="2750987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750992">sec</span>&nbsp;<span class="op" id="2750996">+=</span>&nbsp;<span class="ident" id="2750999">int64</span><span class="op" id="2751004">(</span><span class="ident" id="2751005">l</span><span class="op" id="2751006">.</span><span class="ident" id="2751007">cacheZone</span><span class="op" id="2751016">.</span><span class="ident" id="2751017">offset</span><span class="op" id="2751023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751027">}</span>&nbsp;<span class="keyword" id="2751029">else</span>&nbsp;<span class="op" id="2751034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751039">_</span><span class="op" id="2751040">,</span>&nbsp;<span class="ident" id="2751042">offset</span><span class="op" id="2751048">,</span>&nbsp;<span class="ident" id="2751050">_</span><span class="op" id="2751051">,</span>&nbsp;<span class="ident" id="2751053">_</span><span class="op" id="2751054">,</span>&nbsp;<span class="ident" id="2751056">_</span>&nbsp;<span class="op" id="2751058">:=</span>&nbsp;<span class="ident" id="2751061">l</span><span class="op" id="2751062">.</span><span class="ident" id="2751063">lookup</span><span class="op" id="2751069">(</span><span class="ident" id="2751070">sec</span><span class="op" id="2751073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751078">sec</span>&nbsp;<span class="op" id="2751082">+=</span>&nbsp;<span class="ident" id="2751085">int64</span><span class="op" id="2751090">(</span><span class="ident" id="2751091">offset</span><span class="op" id="2751097">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751107">return</span>&nbsp;<span class="ident" id="2751114">uint64</span><span class="op" id="2751120">(</span><span class="ident" id="2751121">sec</span>&nbsp;<span class="op" id="2751125">+</span>&nbsp;<span class="op" id="2751127">(</span><span class="ident" id="2751128">unixToInternal</span>&nbsp;<span class="op" id="2751143">+</span>&nbsp;<span class="ident" id="2751145">internalToAbsolute</span><span class="op" id="2751163">)</span><span class="op" id="2751164">)</span><br>
<span class="lineno"></span><span class="op" id="2751166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2751169">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2751225">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2751285">func</span>&nbsp;<span class="op" id="2751290">(</span><span class="ident" id="2751291">t</span>&nbsp;<span class="ident" id="2751293">Time</span><span class="op" id="2751297">)</span>&nbsp;<span class="ident" id="2751299">locabs</span><span class="op" id="2751305">(</span><span class="op" id="2751306">)</span>&nbsp;<span class="op" id="2751308">(</span><span class="ident" id="2751309">name</span>&nbsp;<span class="builtintype" id="2751314">string</span><span class="op" id="2751320">,</span>&nbsp;<span class="ident" id="2751322">offset</span>&nbsp;<span class="builtintype" id="2751329">int</span><span class="op" id="2751332">,</span>&nbsp;<span class="ident" id="2751334">abs</span>&nbsp;<span class="ident" id="2751338">uint64</span><span class="op" id="2751344">)</span>&nbsp;<span class="op" id="2751346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751349">l</span>&nbsp;<span class="op" id="2751351">:=</span>&nbsp;<span class="ident" id="2751354">t</span><span class="op" id="2751355">.</span><span class="ident" id="2751356">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751361">if</span>&nbsp;<span class="ident" id="2751364">l</span>&nbsp;<span class="op" id="2751366">==</span>&nbsp;<span class="ident" id="2751369">nil</span>&nbsp;<span class="op" id="2751373">||</span>&nbsp;<span class="ident" id="2751376">l</span>&nbsp;<span class="op" id="2751378">==</span>&nbsp;<span class="op" id="2751381">&amp;</span><span class="ident" id="2751382">localLoc</span>&nbsp;<span class="op" id="2751391">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751395">l</span>&nbsp;<span class="op" id="2751397">=</span>&nbsp;<span class="ident" id="2751399">l</span><span class="op" id="2751400">.</span><span class="ident" id="2751401">get</span><span class="op" id="2751404">(</span><span class="op" id="2751405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751411">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751467">sec</span>&nbsp;<span class="op" id="2751471">:=</span>&nbsp;<span class="ident" id="2751474">t</span><span class="op" id="2751475">.</span><span class="ident" id="2751476">sec</span>&nbsp;<span class="op" id="2751480">+</span>&nbsp;<span class="ident" id="2751482">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751498">if</span>&nbsp;<span class="ident" id="2751501">l</span>&nbsp;<span class="op" id="2751503">!=</span>&nbsp;<span class="op" id="2751506">&amp;</span><span class="ident" id="2751507">utcLoc</span>&nbsp;<span class="op" id="2751514">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751518">if</span>&nbsp;<span class="ident" id="2751521">l</span><span class="op" id="2751522">.</span><span class="ident" id="2751523">cacheZone</span>&nbsp;<span class="op" id="2751533">!=</span>&nbsp;<span class="ident" id="2751536">nil</span>&nbsp;<span class="op" id="2751540">&amp;&amp;</span>&nbsp;<span class="ident" id="2751543">l</span><span class="op" id="2751544">.</span><span class="ident" id="2751545">cacheStart</span>&nbsp;<span class="op" id="2751556">&lt;=</span>&nbsp;<span class="ident" id="2751559">sec</span>&nbsp;<span class="op" id="2751563">&amp;&amp;</span>&nbsp;<span class="ident" id="2751566">sec</span>&nbsp;<span class="op" id="2751570">&lt;</span>&nbsp;<span class="ident" id="2751572">l</span><span class="op" id="2751573">.</span><span class="ident" id="2751574">cacheEnd</span>&nbsp;<span class="op" id="2751583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751588">name</span>&nbsp;<span class="op" id="2751593">=</span>&nbsp;<span class="ident" id="2751595">l</span><span class="op" id="2751596">.</span><span class="ident" id="2751597">cacheZone</span><span class="op" id="2751606">.</span><span class="ident" id="2751607">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751615">offset</span>&nbsp;<span class="op" id="2751622">=</span>&nbsp;<span class="ident" id="2751624">l</span><span class="op" id="2751625">.</span><span class="ident" id="2751626">cacheZone</span><span class="op" id="2751635">.</span><span class="ident" id="2751636">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751645">}</span>&nbsp;<span class="keyword" id="2751647">else</span>&nbsp;<span class="op" id="2751652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751657">name</span><span class="op" id="2751661">,</span>&nbsp;<span class="ident" id="2751663">offset</span><span class="op" id="2751669">,</span>&nbsp;<span class="ident" id="2751671">_</span><span class="op" id="2751672">,</span>&nbsp;<span class="ident" id="2751674">_</span><span class="op" id="2751675">,</span>&nbsp;<span class="ident" id="2751677">_</span>&nbsp;<span class="op" id="2751679">=</span>&nbsp;<span class="ident" id="2751681">l</span><span class="op" id="2751682">.</span><span class="ident" id="2751683">lookup</span><span class="op" id="2751689">(</span><span class="ident" id="2751690">sec</span><span class="op" id="2751693">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751701">sec</span>&nbsp;<span class="op" id="2751705">+=</span>&nbsp;<span class="ident" id="2751708">int64</span><span class="op" id="2751713">(</span><span class="ident" id="2751714">offset</span><span class="op" id="2751720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751723">}</span>&nbsp;<span class="keyword" id="2751725">else</span>&nbsp;<span class="op" id="2751730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751734">name</span>&nbsp;<span class="op" id="2751739">=</span>&nbsp;<span class="string" id="2751741">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751748">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751751">abs</span>&nbsp;<span class="op" id="2751755">=</span>&nbsp;<span class="ident" id="2751757">uint64</span><span class="op" id="2751763">(</span><span class="ident" id="2751764">sec</span>&nbsp;<span class="op" id="2751768">+</span>&nbsp;<span class="op" id="2751770">(</span><span class="ident" id="2751771">unixToInternal</span>&nbsp;<span class="op" id="2751786">+</span>&nbsp;<span class="ident" id="2751788">internalToAbsolute</span><span class="op" id="2751806">)</span><span class="op" id="2751807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751810">return</span><br>
<span class="lineno"></span><span class="op" id="2751817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751820">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2751880">func</span>&nbsp;<span class="op" id="2751885">(</span><span class="ident" id="2751886">t</span>&nbsp;<span class="ident" id="2751888">Time</span><span class="op" id="2751892">)</span>&nbsp;<span class="ident" id="2751894">Date</span><span class="op" id="2751898">(</span><span class="op" id="2751899">)</span>&nbsp;<span class="op" id="2751901">(</span><span class="ident" id="2751902">year</span>&nbsp;<span class="builtintype" id="2751907">int</span><span class="op" id="2751910">,</span>&nbsp;<span class="ident" id="2751912">month</span>&nbsp;<span class="ident" id="2751918">Month</span><span class="op" id="2751923">,</span>&nbsp;<span class="ident" id="2751925">day</span>&nbsp;<span class="builtintype" id="2751929">int</span><span class="op" id="2751932">)</span>&nbsp;<span class="op" id="2751934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751937">year</span><span class="op" id="2751941">,</span>&nbsp;<span class="ident" id="2751943">month</span><span class="op" id="2751948">,</span>&nbsp;<span class="ident" id="2751950">day</span><span class="op" id="2751953">,</span>&nbsp;<span class="ident" id="2751955">_</span>&nbsp;<span class="op" id="2751957">=</span>&nbsp;<span class="ident" id="2751959">t</span><span class="op" id="2751960">.</span><span class="ident" id="2751961">date</span><span class="op" id="2751965">(</span><span class="builtintype" id="2751966">true</span><span class="op" id="2751970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751973">return</span><br>
<span class="lineno"></span><span class="op" id="2751980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2751983">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2752027">func</span>&nbsp;<span class="op" id="2752032">(</span><span class="ident" id="2752033">t</span>&nbsp;<span class="ident" id="2752035">Time</span><span class="op" id="2752039">)</span>&nbsp;<span class="ident" id="2752041">Year</span><span class="op" id="2752045">(</span><span class="op" id="2752046">)</span>&nbsp;<span class="builtintype" id="2752048">int</span>&nbsp;<span class="op" id="2752052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752055">year</span><span class="op" id="2752059">,</span>&nbsp;<span class="ident" id="2752061">_</span><span class="op" id="2752062">,</span>&nbsp;<span class="ident" id="2752064">_</span><span class="op" id="2752065">,</span>&nbsp;<span class="ident" id="2752067">_</span>&nbsp;<span class="op" id="2752069">:=</span>&nbsp;<span class="ident" id="2752072">t</span><span class="op" id="2752073">.</span><span class="ident" id="2752074">date</span><span class="op" id="2752078">(</span><span class="builtintype" id="2752079">false</span><span class="op" id="2752084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752087">return</span>&nbsp;<span class="ident" id="2752094">year</span><br>
<span class="lineno"></span><span class="op" id="2752099">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2752102">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2752157">func</span>&nbsp;<span class="op" id="2752162">(</span><span class="ident" id="2752163">t</span>&nbsp;<span class="ident" id="2752165">Time</span><span class="op" id="2752169">)</span>&nbsp;<span class="ident" id="2752171">Month</span><span class="op" id="2752176">(</span><span class="op" id="2752177">)</span>&nbsp;<span class="ident" id="2752179">Month</span>&nbsp;<span class="op" id="2752185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752188">_</span><span class="op" id="2752189">,</span>&nbsp;<span class="ident" id="2752191">month</span><span class="op" id="2752196">,</span>&nbsp;<span class="ident" id="2752198">_</span><span class="op" id="2752199">,</span>&nbsp;<span class="ident" id="2752201">_</span>&nbsp;<span class="op" id="2752203">:=</span>&nbsp;<span class="ident" id="2752206">t</span><span class="op" id="2752207">.</span><span class="ident" id="2752208">date</span><span class="op" id="2752212">(</span><span class="builtintype" id="2752213">true</span><span class="op" id="2752217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752220">return</span>&nbsp;<span class="ident" id="2752227">month</span><br>
<span class="lineno">305</span><span class="op" id="2752233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2752236">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2752288">func</span>&nbsp;<span class="op" id="2752293">(</span><span class="ident" id="2752294">t</span>&nbsp;<span class="ident" id="2752296">Time</span><span class="op" id="2752300">)</span>&nbsp;<span class="ident" id="2752302">Day</span><span class="op" id="2752305">(</span><span class="op" id="2752306">)</span>&nbsp;<span class="builtintype" id="2752308">int</span>&nbsp;<span class="op" id="2752312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752315">_</span><span class="op" id="2752316">,</span>&nbsp;<span class="ident" id="2752318">_</span><span class="op" id="2752319">,</span>&nbsp;<span class="ident" id="2752321">day</span><span class="op" id="2752324">,</span>&nbsp;<span class="ident" id="2752326">_</span>&nbsp;<span class="op" id="2752328">:=</span>&nbsp;<span class="ident" id="2752331">t</span><span class="op" id="2752332">.</span><span class="ident" id="2752333">date</span><span class="op" id="2752337">(</span><span class="builtintype" id="2752338">true</span><span class="op" id="2752342">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752345">return</span>&nbsp;<span class="ident" id="2752352">day</span><br>
<span class="lineno"></span><span class="op" id="2752356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2752359">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2752414">func</span>&nbsp;<span class="op" id="2752419">(</span><span class="ident" id="2752420">t</span>&nbsp;<span class="ident" id="2752422">Time</span><span class="op" id="2752426">)</span>&nbsp;<span class="ident" id="2752428">Weekday</span><span class="op" id="2752435">(</span><span class="op" id="2752436">)</span>&nbsp;<span class="ident" id="2752438">Weekday</span>&nbsp;<span class="op" id="2752446">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752449">return</span>&nbsp;<span class="ident" id="2752456">absWeekday</span><span class="op" id="2752466">(</span><span class="ident" id="2752467">t</span><span class="op" id="2752468">.</span><span class="ident" id="2752469">abs</span><span class="op" id="2752472">(</span><span class="op" id="2752473">)</span><span class="op" id="2752474">)</span><br>
<span class="lineno"></span><span class="op" id="2752476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2752479">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2752543">func</span>&nbsp;<span class="ident" id="2752548">absWeekday</span><span class="op" id="2752558">(</span><span class="ident" id="2752559">abs</span>&nbsp;<span class="ident" id="2752563">uint64</span><span class="op" id="2752569">)</span>&nbsp;<span class="ident" id="2752571">Weekday</span>&nbsp;<span class="op" id="2752579">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752582">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752656">sec</span>&nbsp;<span class="op" id="2752660">:=</span>&nbsp;<span class="op" id="2752663">(</span><span class="ident" id="2752664">abs</span>&nbsp;<span class="op" id="2752668">+</span>&nbsp;<span class="ident" id="2752670">uint64</span><span class="op" id="2752676">(</span><span class="ident" id="2752677">Monday</span><span class="op" id="2752683">)</span><span class="op" id="2752684">*</span><span class="ident" id="2752685">secondsPerDay</span><span class="op" id="2752698">)</span>&nbsp;<span class="op" id="2752700">%</span>&nbsp;<span class="ident" id="2752702">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752718">return</span>&nbsp;<span class="ident" id="2752725">Weekday</span><span class="op" id="2752732">(</span><span class="builtintype" id="2752733">int</span><span class="op" id="2752736">(</span><span class="ident" id="2752737">sec</span><span class="op" id="2752740">)</span>&nbsp;<span class="op" id="2752742">/</span>&nbsp;<span class="ident" id="2752744">secondsPerDay</span><span class="op" id="2752757">)</span><br>
<span class="lineno"></span><span class="op" id="2752759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2752762">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2752834">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2752906">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2752980">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2752996">func</span>&nbsp;<span class="op" id="2753001">(</span><span class="ident" id="2753002">t</span>&nbsp;<span class="ident" id="2753004">Time</span><span class="op" id="2753008">)</span>&nbsp;<span class="ident" id="2753010">ISOWeek</span><span class="op" id="2753017">(</span><span class="op" id="2753018">)</span>&nbsp;<span class="op" id="2753020">(</span><span class="ident" id="2753021">year</span><span class="op" id="2753025">,</span>&nbsp;<span class="ident" id="2753027">week</span>&nbsp;<span class="builtintype" id="2753032">int</span><span class="op" id="2753035">)</span>&nbsp;<span class="op" id="2753037">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753040">year</span><span class="op" id="2753044">,</span>&nbsp;<span class="ident" id="2753046">month</span><span class="op" id="2753051">,</span>&nbsp;<span class="ident" id="2753053">day</span><span class="op" id="2753056">,</span>&nbsp;<span class="ident" id="2753058">yday</span>&nbsp;<span class="op" id="2753063">:=</span>&nbsp;<span class="ident" id="2753066">t</span><span class="op" id="2753067">.</span><span class="ident" id="2753068">date</span><span class="op" id="2753072">(</span><span class="builtintype" id="2753073">true</span><span class="op" id="2753077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753080">wday</span>&nbsp;<span class="op" id="2753085">:=</span>&nbsp;<span class="builtintype" id="2753088">int</span><span class="op" id="2753091">(</span><span class="ident" id="2753092">t</span><span class="op" id="2753093">.</span><span class="ident" id="2753094">Weekday</span><span class="op" id="2753101">(</span><span class="op" id="2753102">)</span><span class="op" id="2753103">+</span><span class="num" id="2753104">6</span><span class="op" id="2753105">)</span>&nbsp;<span class="op" id="2753107">%</span>&nbsp;<span class="num" id="2753109">7</span>&nbsp;<span class="comment" id="2753111">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753139">const</span>&nbsp;<span class="op" id="2753145">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753149">Mon</span>&nbsp;<span class="builtintype" id="2753153">int</span>&nbsp;<span class="op" id="2753157">=</span>&nbsp;<span class="ident" id="2753159">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753166">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753172">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753178">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753184">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753190">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753196">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753205">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753259">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753325">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753385">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753444">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753467">week</span>&nbsp;<span class="op" id="2753472">=</span>&nbsp;<span class="op" id="2753474">(</span><span class="ident" id="2753475">yday</span>&nbsp;<span class="op" id="2753480">-</span>&nbsp;<span class="ident" id="2753482">wday</span>&nbsp;<span class="op" id="2753487">+</span>&nbsp;<span class="num" id="2753489">7</span><span class="op" id="2753490">)</span>&nbsp;<span class="op" id="2753492">/</span>&nbsp;<span class="num" id="2753494">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753498">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753554">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753606">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753674">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753701">jan1wday</span>&nbsp;<span class="op" id="2753710">:=</span>&nbsp;<span class="op" id="2753713">(</span><span class="ident" id="2753714">wday</span>&nbsp;<span class="op" id="2753719">-</span>&nbsp;<span class="ident" id="2753721">yday</span>&nbsp;<span class="op" id="2753726">+</span>&nbsp;<span class="num" id="2753728">7</span><span class="op" id="2753729">*</span><span class="num" id="2753730">53</span><span class="op" id="2753732">)</span>&nbsp;<span class="op" id="2753734">%</span>&nbsp;<span class="num" id="2753736">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753739">if</span>&nbsp;<span class="ident" id="2753742">Tue</span>&nbsp;<span class="op" id="2753746">&lt;=</span>&nbsp;<span class="ident" id="2753749">jan1wday</span>&nbsp;<span class="op" id="2753758">&amp;&amp;</span>&nbsp;<span class="ident" id="2753761">jan1wday</span>&nbsp;<span class="op" id="2753770">&lt;=</span>&nbsp;<span class="ident" id="2753773">Thu</span>&nbsp;<span class="op" id="2753777">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753781">week</span><span class="op" id="2753785">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753793">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753858">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753890">if</span>&nbsp;<span class="ident" id="2753893">week</span>&nbsp;<span class="op" id="2753898">==</span>&nbsp;<span class="num" id="2753901">0</span>&nbsp;<span class="op" id="2753903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753907">year</span><span class="op" id="2753911">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753916">week</span>&nbsp;<span class="op" id="2753921">=</span>&nbsp;<span class="num" id="2753923">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753928">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753989">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754037">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754106">if</span>&nbsp;<span class="ident" id="2754109">jan1wday</span>&nbsp;<span class="op" id="2754118">==</span>&nbsp;<span class="ident" id="2754121">Fri</span>&nbsp;<span class="op" id="2754125">||</span>&nbsp;<span class="op" id="2754128">(</span><span class="ident" id="2754129">jan1wday</span>&nbsp;<span class="op" id="2754138">==</span>&nbsp;<span class="ident" id="2754141">Sat</span>&nbsp;<span class="op" id="2754145">&amp;&amp;</span>&nbsp;<span class="ident" id="2754148">isLeap</span><span class="op" id="2754154">(</span><span class="ident" id="2754155">year</span><span class="op" id="2754159">)</span><span class="op" id="2754160">)</span>&nbsp;<span class="op" id="2754162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754167">week</span><span class="op" id="2754171">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754179">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754183">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754235">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754288">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754340">if</span>&nbsp;<span class="ident" id="2754343">month</span>&nbsp;<span class="op" id="2754349">==</span>&nbsp;<span class="ident" id="2754352">December</span>&nbsp;<span class="op" id="2754361">&amp;&amp;</span>&nbsp;<span class="ident" id="2754364">day</span>&nbsp;<span class="op" id="2754368">&gt;=</span>&nbsp;<span class="num" id="2754371">29</span>&nbsp;<span class="op" id="2754374">&amp;&amp;</span>&nbsp;<span class="ident" id="2754377">wday</span>&nbsp;<span class="op" id="2754382">&lt;</span>&nbsp;<span class="ident" id="2754384">Thu</span>&nbsp;<span class="op" id="2754388">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754392">if</span>&nbsp;<span class="ident" id="2754395">dec31wday</span>&nbsp;<span class="op" id="2754405">:=</span>&nbsp;<span class="op" id="2754408">(</span><span class="ident" id="2754409">wday</span>&nbsp;<span class="op" id="2754414">+</span>&nbsp;<span class="num" id="2754416">31</span>&nbsp;<span class="op" id="2754419">-</span>&nbsp;<span class="ident" id="2754421">day</span><span class="op" id="2754424">)</span>&nbsp;<span class="op" id="2754426">%</span>&nbsp;<span class="num" id="2754428">7</span><span class="op" id="2754429">;</span>&nbsp;<span class="ident" id="2754431">Mon</span>&nbsp;<span class="op" id="2754435">&lt;=</span>&nbsp;<span class="ident" id="2754438">dec31wday</span>&nbsp;<span class="op" id="2754448">&amp;&amp;</span>&nbsp;<span class="ident" id="2754451">dec31wday</span>&nbsp;<span class="op" id="2754461">&lt;=</span>&nbsp;<span class="ident" id="2754464">Wed</span>&nbsp;<span class="op" id="2754468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754473">year</span><span class="op" id="2754477">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754483">week</span>&nbsp;<span class="op" id="2754488">=</span>&nbsp;<span class="num" id="2754490">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754497">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754501">return</span><br>
<span class="lineno"></span><span class="op" id="2754508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754511">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2754588">func</span>&nbsp;<span class="op" id="2754593">(</span><span class="ident" id="2754594">t</span>&nbsp;<span class="ident" id="2754596">Time</span><span class="op" id="2754600">)</span>&nbsp;<span class="ident" id="2754602">Clock</span><span class="op" id="2754607">(</span><span class="op" id="2754608">)</span>&nbsp;<span class="op" id="2754610">(</span><span class="ident" id="2754611">hour</span><span class="op" id="2754615">,</span>&nbsp;<span class="ident" id="2754617">min</span><span class="op" id="2754620">,</span>&nbsp;<span class="ident" id="2754622">sec</span>&nbsp;<span class="builtintype" id="2754626">int</span><span class="op" id="2754629">)</span>&nbsp;<span class="op" id="2754631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754634">return</span>&nbsp;<span class="ident" id="2754641">absClock</span><span class="op" id="2754649">(</span><span class="ident" id="2754650">t</span><span class="op" id="2754651">.</span><span class="ident" id="2754652">abs</span><span class="op" id="2754655">(</span><span class="op" id="2754656">)</span><span class="op" id="2754657">)</span><br>
<span class="lineno"></span><span class="op" id="2754659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754662">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2754722">func</span>&nbsp;<span class="ident" id="2754727">absClock</span><span class="op" id="2754735">(</span><span class="ident" id="2754736">abs</span>&nbsp;<span class="ident" id="2754740">uint64</span><span class="op" id="2754746">)</span>&nbsp;<span class="op" id="2754748">(</span><span class="ident" id="2754749">hour</span><span class="op" id="2754753">,</span>&nbsp;<span class="ident" id="2754755">min</span><span class="op" id="2754758">,</span>&nbsp;<span class="ident" id="2754760">sec</span>&nbsp;<span class="builtintype" id="2754764">int</span><span class="op" id="2754767">)</span>&nbsp;<span class="op" id="2754769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754772">sec</span>&nbsp;<span class="op" id="2754776">=</span>&nbsp;<span class="builtintype" id="2754778">int</span><span class="op" id="2754781">(</span><span class="ident" id="2754782">abs</span>&nbsp;<span class="op" id="2754786">%</span>&nbsp;<span class="ident" id="2754788">secondsPerDay</span><span class="op" id="2754801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754804">hour</span>&nbsp;<span class="op" id="2754809">=</span>&nbsp;<span class="ident" id="2754811">sec</span>&nbsp;<span class="op" id="2754815">/</span>&nbsp;<span class="ident" id="2754817">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754833">sec</span>&nbsp;<span class="op" id="2754837">-=</span>&nbsp;<span class="ident" id="2754840">hour</span>&nbsp;<span class="op" id="2754845">*</span>&nbsp;<span class="ident" id="2754847">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754863">min</span>&nbsp;<span class="op" id="2754867">=</span>&nbsp;<span class="ident" id="2754869">sec</span>&nbsp;<span class="op" id="2754873">/</span>&nbsp;<span class="ident" id="2754875">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754893">sec</span>&nbsp;<span class="op" id="2754897">-=</span>&nbsp;<span class="ident" id="2754900">min</span>&nbsp;<span class="op" id="2754904">*</span>&nbsp;<span class="ident" id="2754906">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754924">return</span><br>
<span class="lineno"></span><span class="op" id="2754931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754934">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2755012">func</span>&nbsp;<span class="op" id="2755017">(</span><span class="ident" id="2755018">t</span>&nbsp;<span class="ident" id="2755020">Time</span><span class="op" id="2755024">)</span>&nbsp;<span class="ident" id="2755026">Hour</span><span class="op" id="2755030">(</span><span class="op" id="2755031">)</span>&nbsp;<span class="builtintype" id="2755033">int</span>&nbsp;<span class="op" id="2755037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755040">return</span>&nbsp;<span class="builtintype" id="2755047">int</span><span class="op" id="2755050">(</span><span class="ident" id="2755051">t</span><span class="op" id="2755052">.</span><span class="ident" id="2755053">abs</span><span class="op" id="2755056">(</span><span class="op" id="2755057">)</span><span class="op" id="2755058">%</span><span class="ident" id="2755059">secondsPerDay</span><span class="op" id="2755072">)</span>&nbsp;<span class="op" id="2755074">/</span>&nbsp;<span class="ident" id="2755076">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2755091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755094">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2755184">func</span>&nbsp;<span class="op" id="2755189">(</span><span class="ident" id="2755190">t</span>&nbsp;<span class="ident" id="2755192">Time</span><span class="op" id="2755196">)</span>&nbsp;<span class="ident" id="2755198">Minute</span><span class="op" id="2755204">(</span><span class="op" id="2755205">)</span>&nbsp;<span class="builtintype" id="2755207">int</span>&nbsp;<span class="op" id="2755211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755214">return</span>&nbsp;<span class="builtintype" id="2755221">int</span><span class="op" id="2755224">(</span><span class="ident" id="2755225">t</span><span class="op" id="2755226">.</span><span class="ident" id="2755227">abs</span><span class="op" id="2755230">(</span><span class="op" id="2755231">)</span><span class="op" id="2755232">%</span><span class="ident" id="2755233">secondsPerHour</span><span class="op" id="2755247">)</span>&nbsp;<span class="op" id="2755249">/</span>&nbsp;<span class="ident" id="2755251">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2755268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755271">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2755363">func</span>&nbsp;<span class="op" id="2755368">(</span><span class="ident" id="2755369">t</span>&nbsp;<span class="ident" id="2755371">Time</span><span class="op" id="2755375">)</span>&nbsp;<span class="ident" id="2755377">Second</span><span class="op" id="2755383">(</span><span class="op" id="2755384">)</span>&nbsp;<span class="builtintype" id="2755386">int</span>&nbsp;<span class="op" id="2755390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755393">return</span>&nbsp;<span class="builtintype" id="2755400">int</span><span class="op" id="2755403">(</span><span class="ident" id="2755404">t</span><span class="op" id="2755405">.</span><span class="ident" id="2755406">abs</span><span class="op" id="2755409">(</span><span class="op" id="2755410">)</span>&nbsp;<span class="op" id="2755412">%</span>&nbsp;<span class="ident" id="2755414">secondsPerMinute</span><span class="op" id="2755430">)</span><br>
<span class="lineno"></span><span class="op" id="2755432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755435">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2755513">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2755545">func</span>&nbsp;<span class="op" id="2755550">(</span><span class="ident" id="2755551">t</span>&nbsp;<span class="ident" id="2755553">Time</span><span class="op" id="2755557">)</span>&nbsp;<span class="ident" id="2755559">Nanosecond</span><span class="op" id="2755569">(</span><span class="op" id="2755570">)</span>&nbsp;<span class="builtintype" id="2755572">int</span>&nbsp;<span class="op" id="2755576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755579">return</span>&nbsp;<span class="builtintype" id="2755586">int</span><span class="op" id="2755589">(</span><span class="ident" id="2755590">t</span><span class="op" id="2755591">.</span><span class="ident" id="2755592">nsec</span><span class="op" id="2755596">)</span><br>
<span class="lineno"></span><span class="op" id="2755598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2755601">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2755697">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2755727">func</span>&nbsp;<span class="op" id="2755732">(</span><span class="ident" id="2755733">t</span>&nbsp;<span class="ident" id="2755735">Time</span><span class="op" id="2755739">)</span>&nbsp;<span class="ident" id="2755741">YearDay</span><span class="op" id="2755748">(</span><span class="op" id="2755749">)</span>&nbsp;<span class="builtintype" id="2755751">int</span>&nbsp;<span class="op" id="2755755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755758">_</span><span class="op" id="2755759">,</span>&nbsp;<span class="ident" id="2755761">_</span><span class="op" id="2755762">,</span>&nbsp;<span class="ident" id="2755764">_</span><span class="op" id="2755765">,</span>&nbsp;<span class="ident" id="2755767">yday</span>&nbsp;<span class="op" id="2755772">:=</span>&nbsp;<span class="ident" id="2755775">t</span><span class="op" id="2755776">.</span><span class="ident" id="2755777">date</span><span class="op" id="2755781">(</span><span class="builtintype" id="2755782">false</span><span class="op" id="2755787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755790">return</span>&nbsp;<span class="ident" id="2755797">yday</span>&nbsp;<span class="op" id="2755802">+</span>&nbsp;<span class="num" id="2755804">1</span><br>
<span class="lineno">425</span><span class="op" id="2755806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755809">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2755872">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2755936">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2755998">type</span>&nbsp;<span class="ident" id="2756003">Duration</span>&nbsp;<span class="ident" id="2756012">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2756019">const</span>&nbsp;<span class="op" id="2756025">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756028">minDuration</span>&nbsp;<span class="ident" id="2756040">Duration</span>&nbsp;<span class="op" id="2756049">=</span>&nbsp;<span class="op" id="2756051">-</span><span class="num" id="2756052">1</span>&nbsp;<span class="op" id="2756054">&lt;&lt;</span>&nbsp;<span class="num" id="2756057">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756061">maxDuration</span>&nbsp;<span class="ident" id="2756073">Duration</span>&nbsp;<span class="op" id="2756082">=</span>&nbsp;<span class="num" id="2756084">1</span><span class="op" id="2756085">&lt;&lt;</span><span class="num" id="2756087">63</span>&nbsp;<span class="op" id="2756090">-</span>&nbsp;<span class="num" id="2756092">1</span><br>
<span class="lineno">435</span><span class="op" id="2756094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756097">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2756169">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2756238">//</span><br>
<span class="lineno">440</span><span class="comment" id="2756241">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2756296">//&nbsp;&nbsp;&nbsp;&nbspsecond&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2756321">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2756381">//</span><br>
<span class="lineno"></span><span class="comment" id="2756384">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2756450">//&nbsp;&nbsp;&nbsp;&nbspseconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2756467">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2756530">//</span><br>
<span class="lineno"></span><span class="keyword" id="2756533">const</span>&nbsp;<span class="op" id="2756539">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756542">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2756554">Duration</span>&nbsp;<span class="op" id="2756563">=</span>&nbsp;<span class="num" id="2756565">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756568">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756589">=</span>&nbsp;<span class="num" id="2756591">1000</span>&nbsp;<span class="op" id="2756596">*</span>&nbsp;<span class="ident" id="2756598">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756610">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756631">=</span>&nbsp;<span class="num" id="2756633">1000</span>&nbsp;<span class="op" id="2756638">*</span>&nbsp;<span class="ident" id="2756640">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756653">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756674">=</span>&nbsp;<span class="num" id="2756676">1000</span>&nbsp;<span class="op" id="2756681">*</span>&nbsp;<span class="ident" id="2756683">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756696">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756717">=</span>&nbsp;<span class="num" id="2756719">60</span>&nbsp;<span class="op" id="2756722">*</span>&nbsp;<span class="ident" id="2756724">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756732">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756753">=</span>&nbsp;<span class="num" id="2756755">60</span>&nbsp;<span class="op" id="2756758">*</span>&nbsp;<span class="ident" id="2756760">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2756767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756770">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2756848">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2756927">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2757006">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2757078">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2757095">func</span>&nbsp;<span class="op" id="2757100">(</span><span class="ident" id="2757101">d</span>&nbsp;<span class="ident" id="2757103">Duration</span><span class="op" id="2757111">)</span>&nbsp;<span class="ident" id="2757113">String</span><span class="op" id="2757119">(</span><span class="op" id="2757120">)</span>&nbsp;<span class="builtintype" id="2757122">string</span>&nbsp;<span class="op" id="2757129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757132">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757177">var</span>&nbsp;<span class="ident" id="2757181">buf</span>&nbsp;<span class="op" id="2757185">[</span><span class="num" id="2757186">32</span><span class="op" id="2757188">]</span><span class="builtintype" id="2757189">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757195">w</span>&nbsp;<span class="op" id="2757197">:=</span>&nbsp;<span class="builtinfunc" id="2757200">len</span><span class="op" id="2757203">(</span><span class="ident" id="2757204">buf</span><span class="op" id="2757207">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757211">u</span>&nbsp;<span class="op" id="2757213">:=</span>&nbsp;<span class="ident" id="2757216">uint64</span><span class="op" id="2757222">(</span><span class="ident" id="2757223">d</span><span class="op" id="2757224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757227">neg</span>&nbsp;<span class="op" id="2757231">:=</span>&nbsp;<span class="ident" id="2757234">d</span>&nbsp;<span class="op" id="2757236">&lt;</span>&nbsp;<span class="num" id="2757238">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757241">if</span>&nbsp;<span class="ident" id="2757244">neg</span>&nbsp;<span class="op" id="2757248">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757252">u</span>&nbsp;<span class="op" id="2757254">=</span>&nbsp;<span class="op" id="2757256">-</span><span class="ident" id="2757257">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757264">if</span>&nbsp;<span class="ident" id="2757267">u</span>&nbsp;<span class="op" id="2757269">&lt;</span>&nbsp;<span class="ident" id="2757271">uint64</span><span class="op" id="2757277">(</span><span class="ident" id="2757278">Second</span><span class="op" id="2757284">)</span>&nbsp;<span class="op" id="2757286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757290">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757347">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757382">var</span>&nbsp;<span class="ident" id="2757386">prec</span>&nbsp;<span class="builtintype" id="2757391">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757397">w</span><span class="op" id="2757398">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757403">buf</span><span class="op" id="2757406">[</span><span class="ident" id="2757407">w</span><span class="op" id="2757408">]</span>&nbsp;<span class="op" id="2757410">=</span>&nbsp;<span class="string" id="2757412">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757418">w</span><span class="op" id="2757419">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757424">switch</span>&nbsp;<span class="op" id="2757431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757435">case</span>&nbsp;<span class="ident" id="2757440">u</span>&nbsp;<span class="op" id="2757442">==</span>&nbsp;<span class="num" id="2757445">0</span><span class="op" id="2757446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757451">return</span>&nbsp;<span class="string" id="2757458">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757464">case</span>&nbsp;<span class="ident" id="2757469">u</span>&nbsp;<span class="op" id="2757471">&lt;</span>&nbsp;<span class="ident" id="2757473">uint64</span><span class="op" id="2757479">(</span><span class="ident" id="2757480">Microsecond</span><span class="op" id="2757491">)</span><span class="op" id="2757492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757497">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757521">prec</span>&nbsp;<span class="op" id="2757526">=</span>&nbsp;<span class="num" id="2757528">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757533">buf</span><span class="op" id="2757536">[</span><span class="ident" id="2757537">w</span><span class="op" id="2757538">]</span>&nbsp;<span class="op" id="2757540">=</span>&nbsp;<span class="string" id="2757542">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757548">case</span>&nbsp;<span class="ident" id="2757553">u</span>&nbsp;<span class="op" id="2757555">&lt;</span>&nbsp;<span class="ident" id="2757557">uint64</span><span class="op" id="2757563">(</span><span class="ident" id="2757564">Millisecond</span><span class="op" id="2757575">)</span><span class="op" id="2757576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757581">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757606">prec</span>&nbsp;<span class="op" id="2757611">=</span>&nbsp;<span class="num" id="2757613">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757618">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757660">w</span><span class="op" id="2757661">--</span>&nbsp;<span class="comment" id="2757664">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757695">copy</span><span class="op" id="2757699">(</span><span class="ident" id="2757700">buf</span><span class="op" id="2757703">[</span><span class="ident" id="2757704">w</span><span class="op" id="2757705">:</span><span class="op" id="2757706">]</span><span class="op" id="2757707">,</span>&nbsp;<span class="string" id="2757709">&#34;µ&#34;</span><span class="op" id="2757713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757717">default</span><span class="op" id="2757724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757729">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757754">prec</span>&nbsp;<span class="op" id="2757759">=</span>&nbsp;<span class="num" id="2757761">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757766">buf</span><span class="op" id="2757769">[</span><span class="ident" id="2757770">w</span><span class="op" id="2757771">]</span>&nbsp;<span class="op" id="2757773">=</span>&nbsp;<span class="string" id="2757775">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757785">w</span><span class="op" id="2757786">,</span>&nbsp;<span class="ident" id="2757788">u</span>&nbsp;<span class="op" id="2757790">=</span>&nbsp;<span class="ident" id="2757792">fmtFrac</span><span class="op" id="2757799">(</span><span class="ident" id="2757800">buf</span><span class="op" id="2757803">[</span><span class="op" id="2757804">:</span><span class="ident" id="2757805">w</span><span class="op" id="2757806">]</span><span class="op" id="2757807">,</span>&nbsp;<span class="ident" id="2757809">u</span><span class="op" id="2757810">,</span>&nbsp;<span class="ident" id="2757812">prec</span><span class="op" id="2757816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757820">w</span>&nbsp;<span class="op" id="2757822">=</span>&nbsp;<span class="ident" id="2757824">fmtInt</span><span class="op" id="2757830">(</span><span class="ident" id="2757831">buf</span><span class="op" id="2757834">[</span><span class="op" id="2757835">:</span><span class="ident" id="2757836">w</span><span class="op" id="2757837">]</span><span class="op" id="2757838">,</span>&nbsp;<span class="ident" id="2757840">u</span><span class="op" id="2757841">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757844">}</span>&nbsp;<span class="keyword" id="2757846">else</span>&nbsp;<span class="op" id="2757851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757855">w</span><span class="op" id="2757856">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757861">buf</span><span class="op" id="2757864">[</span><span class="ident" id="2757865">w</span><span class="op" id="2757866">]</span>&nbsp;<span class="op" id="2757868">=</span>&nbsp;<span class="string" id="2757870">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757877">w</span><span class="op" id="2757878">,</span>&nbsp;<span class="ident" id="2757880">u</span>&nbsp;<span class="op" id="2757882">=</span>&nbsp;<span class="ident" id="2757884">fmtFrac</span><span class="op" id="2757891">(</span><span class="ident" id="2757892">buf</span><span class="op" id="2757895">[</span><span class="op" id="2757896">:</span><span class="ident" id="2757897">w</span><span class="op" id="2757898">]</span><span class="op" id="2757899">,</span>&nbsp;<span class="ident" id="2757901">u</span><span class="op" id="2757902">,</span>&nbsp;<span class="num" id="2757904">9</span><span class="op" id="2757905">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757910">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757940">w</span>&nbsp;<span class="op" id="2757942">=</span>&nbsp;<span class="ident" id="2757944">fmtInt</span><span class="op" id="2757950">(</span><span class="ident" id="2757951">buf</span><span class="op" id="2757954">[</span><span class="op" id="2757955">:</span><span class="ident" id="2757956">w</span><span class="op" id="2757957">]</span><span class="op" id="2757958">,</span>&nbsp;<span class="ident" id="2757960">u</span><span class="op" id="2757961">%</span><span class="num" id="2757962">60</span><span class="op" id="2757964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757968">u</span>&nbsp;<span class="op" id="2757970">/=</span>&nbsp;<span class="num" id="2757973">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2757979">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758009">if</span>&nbsp;<span class="ident" id="2758012">u</span>&nbsp;<span class="op" id="2758014">&gt;</span>&nbsp;<span class="num" id="2758016">0</span>&nbsp;<span class="op" id="2758018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758023">w</span><span class="op" id="2758024">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758030">buf</span><span class="op" id="2758033">[</span><span class="ident" id="2758034">w</span><span class="op" id="2758035">]</span>&nbsp;<span class="op" id="2758037">=</span>&nbsp;<span class="string" id="2758039">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758046">w</span>&nbsp;<span class="op" id="2758048">=</span>&nbsp;<span class="ident" id="2758050">fmtInt</span><span class="op" id="2758056">(</span><span class="ident" id="2758057">buf</span><span class="op" id="2758060">[</span><span class="op" id="2758061">:</span><span class="ident" id="2758062">w</span><span class="op" id="2758063">]</span><span class="op" id="2758064">,</span>&nbsp;<span class="ident" id="2758066">u</span><span class="op" id="2758067">%</span><span class="num" id="2758068">60</span><span class="op" id="2758070">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758075">u</span>&nbsp;<span class="op" id="2758077">/=</span>&nbsp;<span class="num" id="2758080">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758087">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758116">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758175">if</span>&nbsp;<span class="ident" id="2758178">u</span>&nbsp;<span class="op" id="2758180">&gt;</span>&nbsp;<span class="num" id="2758182">0</span>&nbsp;<span class="op" id="2758184">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758190">w</span><span class="op" id="2758191">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758198">buf</span><span class="op" id="2758201">[</span><span class="ident" id="2758202">w</span><span class="op" id="2758203">]</span>&nbsp;<span class="op" id="2758205">=</span>&nbsp;<span class="string" id="2758207">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758215">w</span>&nbsp;<span class="op" id="2758217">=</span>&nbsp;<span class="ident" id="2758219">fmtInt</span><span class="op" id="2758225">(</span><span class="ident" id="2758226">buf</span><span class="op" id="2758229">[</span><span class="op" id="2758230">:</span><span class="ident" id="2758231">w</span><span class="op" id="2758232">]</span><span class="op" id="2758233">,</span>&nbsp;<span class="ident" id="2758235">u</span><span class="op" id="2758236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758245">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758252">if</span>&nbsp;<span class="ident" id="2758255">neg</span>&nbsp;<span class="op" id="2758259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758263">w</span><span class="op" id="2758264">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758269">buf</span><span class="op" id="2758272">[</span><span class="ident" id="2758273">w</span><span class="op" id="2758274">]</span>&nbsp;<span class="op" id="2758276">=</span>&nbsp;<span class="string" id="2758278">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758287">return</span>&nbsp;<span class="builtintype" id="2758294">string</span><span class="op" id="2758300">(</span><span class="ident" id="2758301">buf</span><span class="op" id="2758304">[</span><span class="ident" id="2758305">w</span><span class="op" id="2758306">:</span><span class="op" id="2758307">]</span><span class="op" id="2758308">)</span><br>
<span class="lineno"></span><span class="op" id="2758310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2758313">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2758385">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2758448">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2758517">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2758565">func</span>&nbsp;<span class="ident" id="2758570">fmtFrac</span><span class="op" id="2758577">(</span><span class="ident" id="2758578">buf</span>&nbsp;<span class="op" id="2758582">[</span><span class="op" id="2758583">]</span><span class="builtintype" id="2758584">byte</span><span class="op" id="2758588">,</span>&nbsp;<span class="ident" id="2758590">v</span>&nbsp;<span class="ident" id="2758592">uint64</span><span class="op" id="2758598">,</span>&nbsp;<span class="ident" id="2758600">prec</span>&nbsp;<span class="builtintype" id="2758605">int</span><span class="op" id="2758608">)</span>&nbsp;<span class="op" id="2758610">(</span><span class="ident" id="2758611">nw</span>&nbsp;<span class="builtintype" id="2758614">int</span><span class="op" id="2758617">,</span>&nbsp;<span class="ident" id="2758619">nv</span>&nbsp;<span class="ident" id="2758622">uint64</span><span class="op" id="2758628">)</span>&nbsp;<span class="op" id="2758630">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758633">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758692">w</span>&nbsp;<span class="op" id="2758694">:=</span>&nbsp;<span class="builtinfunc" id="2758697">len</span><span class="op" id="2758700">(</span><span class="ident" id="2758701">buf</span><span class="op" id="2758704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2758707">print</span>&nbsp;<span class="op" id="2758713">:=</span>&nbsp;<span class="builtintype" id="2758716">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758723">for</span>&nbsp;<span class="ident" id="2758727">i</span>&nbsp;<span class="op" id="2758729">:=</span>&nbsp;<span class="num" id="2758732">0</span><span class="op" id="2758733">;</span>&nbsp;<span class="ident" id="2758735">i</span>&nbsp;<span class="op" id="2758737">&lt;</span>&nbsp;<span class="ident" id="2758739">prec</span><span class="op" id="2758743">;</span>&nbsp;<span class="ident" id="2758745">i</span><span class="op" id="2758746">++</span>&nbsp;<span class="op" id="2758749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758753">digit</span>&nbsp;<span class="op" id="2758759">:=</span>&nbsp;<span class="ident" id="2758762">v</span>&nbsp;<span class="op" id="2758764">%</span>&nbsp;<span class="num" id="2758766">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2758771">print</span>&nbsp;<span class="op" id="2758777">=</span>&nbsp;<span class="builtinfunc" id="2758779">print</span>&nbsp;<span class="op" id="2758785">||</span>&nbsp;<span class="ident" id="2758788">digit</span>&nbsp;<span class="op" id="2758794">!=</span>&nbsp;<span class="num" id="2758797">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758801">if</span>&nbsp;<span class="builtinfunc" id="2758804">print</span>&nbsp;<span class="op" id="2758810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758815">w</span><span class="op" id="2758816">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758822">buf</span><span class="op" id="2758825">[</span><span class="ident" id="2758826">w</span><span class="op" id="2758827">]</span>&nbsp;<span class="op" id="2758829">=</span>&nbsp;<span class="builtintype" id="2758831">byte</span><span class="op" id="2758835">(</span><span class="ident" id="2758836">digit</span><span class="op" id="2758841">)</span>&nbsp;<span class="op" id="2758843">+</span>&nbsp;<span class="string" id="2758845">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758851">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758855">v</span>&nbsp;<span class="op" id="2758857">/=</span>&nbsp;<span class="num" id="2758860">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758867">if</span>&nbsp;<span class="builtinfunc" id="2758870">print</span>&nbsp;<span class="op" id="2758876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758880">w</span><span class="op" id="2758881">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758886">buf</span><span class="op" id="2758889">[</span><span class="ident" id="2758890">w</span><span class="op" id="2758891">]</span>&nbsp;<span class="op" id="2758893">=</span>&nbsp;<span class="string" id="2758895">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758903">return</span>&nbsp;<span class="ident" id="2758910">w</span><span class="op" id="2758911">,</span>&nbsp;<span class="ident" id="2758913">v</span><br>
<span class="lineno"></span><span class="op" id="2758915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758918">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2758960">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2759009">func</span>&nbsp;<span class="ident" id="2759014">fmtInt</span><span class="op" id="2759020">(</span><span class="ident" id="2759021">buf</span>&nbsp;<span class="op" id="2759025">[</span><span class="op" id="2759026">]</span><span class="builtintype" id="2759027">byte</span><span class="op" id="2759031">,</span>&nbsp;<span class="ident" id="2759033">v</span>&nbsp;<span class="ident" id="2759035">uint64</span><span class="op" id="2759041">)</span>&nbsp;<span class="builtintype" id="2759043">int</span>&nbsp;<span class="op" id="2759047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759050">w</span>&nbsp;<span class="op" id="2759052">:=</span>&nbsp;<span class="builtinfunc" id="2759055">len</span><span class="op" id="2759058">(</span><span class="ident" id="2759059">buf</span><span class="op" id="2759062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759065">if</span>&nbsp;<span class="ident" id="2759068">v</span>&nbsp;<span class="op" id="2759070">==</span>&nbsp;<span class="num" id="2759073">0</span>&nbsp;<span class="op" id="2759075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759079">w</span><span class="op" id="2759080">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759085">buf</span><span class="op" id="2759088">[</span><span class="ident" id="2759089">w</span><span class="op" id="2759090">]</span>&nbsp;<span class="op" id="2759092">=</span>&nbsp;<span class="string" id="2759094">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759099">}</span>&nbsp;<span class="keyword" id="2759101">else</span>&nbsp;<span class="op" id="2759106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759110">for</span>&nbsp;<span class="ident" id="2759114">v</span>&nbsp;<span class="op" id="2759116">&gt;</span>&nbsp;<span class="num" id="2759118">0</span>&nbsp;<span class="op" id="2759120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759125">w</span><span class="op" id="2759126">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759132">buf</span><span class="op" id="2759135">[</span><span class="ident" id="2759136">w</span><span class="op" id="2759137">]</span>&nbsp;<span class="op" id="2759139">=</span>&nbsp;<span class="builtintype" id="2759141">byte</span><span class="op" id="2759145">(</span><span class="ident" id="2759146">v</span><span class="op" id="2759147">%</span><span class="num" id="2759148">10</span><span class="op" id="2759150">)</span>&nbsp;<span class="op" id="2759152">+</span>&nbsp;<span class="string" id="2759154">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759161">v</span>&nbsp;<span class="op" id="2759163">/=</span>&nbsp;<span class="num" id="2759166">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759177">return</span>&nbsp;<span class="ident" id="2759184">w</span><br>
<span class="lineno"></span><span class="op" id="2759186">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2759189">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2759257">func</span>&nbsp;<span class="op" id="2759262">(</span><span class="ident" id="2759263">d</span>&nbsp;<span class="ident" id="2759265">Duration</span><span class="op" id="2759273">)</span>&nbsp;<span class="ident" id="2759275">Nanoseconds</span><span class="op" id="2759286">(</span><span class="op" id="2759287">)</span>&nbsp;<span class="ident" id="2759289">int64</span>&nbsp;<span class="op" id="2759295">{</span>&nbsp;<span class="keyword" id="2759297">return</span>&nbsp;<span class="ident" id="2759304">int64</span><span class="op" id="2759309">(</span><span class="ident" id="2759310">d</span><span class="op" id="2759311">)</span>&nbsp;<span class="op" id="2759313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759316">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2759369">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2759436">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2759506">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2759570">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2759635">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2759699">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2759762">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759779">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2759850">func</span>&nbsp;<span class="op" id="2759855">(</span><span class="ident" id="2759856">d</span>&nbsp;<span class="ident" id="2759858">Duration</span><span class="op" id="2759866">)</span>&nbsp;<span class="ident" id="2759868">Seconds</span><span class="op" id="2759875">(</span><span class="op" id="2759876">)</span>&nbsp;<span class="builtintype" id="2759878">float64</span>&nbsp;<span class="op" id="2759886">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759889">sec</span>&nbsp;<span class="op" id="2759893">:=</span>&nbsp;<span class="ident" id="2759896">d</span>&nbsp;<span class="op" id="2759898">/</span>&nbsp;<span class="ident" id="2759900">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759908">nsec</span>&nbsp;<span class="op" id="2759913">:=</span>&nbsp;<span class="ident" id="2759916">d</span>&nbsp;<span class="op" id="2759918">%</span>&nbsp;<span class="ident" id="2759920">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759928">return</span>&nbsp;<span class="builtintype" id="2759935">float64</span><span class="op" id="2759942">(</span><span class="ident" id="2759943">sec</span><span class="op" id="2759946">)</span>&nbsp;<span class="op" id="2759948">+</span>&nbsp;<span class="builtintype" id="2759950">float64</span><span class="op" id="2759957">(</span><span class="ident" id="2759958">nsec</span><span class="op" id="2759962">)</span><span class="op" id="2759963">*</span><span class="num" id="2759964">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2759969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2759972">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2760043">func</span>&nbsp;<span class="op" id="2760048">(</span><span class="ident" id="2760049">d</span>&nbsp;<span class="ident" id="2760051">Duration</span><span class="op" id="2760059">)</span>&nbsp;<span class="ident" id="2760061">Minutes</span><span class="op" id="2760068">(</span><span class="op" id="2760069">)</span>&nbsp;<span class="builtintype" id="2760071">float64</span>&nbsp;<span class="op" id="2760079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760082">min</span>&nbsp;<span class="op" id="2760086">:=</span>&nbsp;<span class="ident" id="2760089">d</span>&nbsp;<span class="op" id="2760091">/</span>&nbsp;<span class="ident" id="2760093">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760101">nsec</span>&nbsp;<span class="op" id="2760106">:=</span>&nbsp;<span class="ident" id="2760109">d</span>&nbsp;<span class="op" id="2760111">%</span>&nbsp;<span class="ident" id="2760113">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760121">return</span>&nbsp;<span class="builtintype" id="2760128">float64</span><span class="op" id="2760135">(</span><span class="ident" id="2760136">min</span><span class="op" id="2760139">)</span>&nbsp;<span class="op" id="2760141">+</span>&nbsp;<span class="builtintype" id="2760143">float64</span><span class="op" id="2760150">(</span><span class="ident" id="2760151">nsec</span><span class="op" id="2760155">)</span><span class="op" id="2760156">*</span><span class="op" id="2760157">(</span><span class="num" id="2760158">1e-9</span><span class="op" id="2760162">/</span><span class="num" id="2760163">60</span><span class="op" id="2760165">)</span><br>
<span class="lineno">600</span><span class="op" id="2760167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2760170">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2760237">func</span>&nbsp;<span class="op" id="2760242">(</span><span class="ident" id="2760243">d</span>&nbsp;<span class="ident" id="2760245">Duration</span><span class="op" id="2760253">)</span>&nbsp;<span class="ident" id="2760255">Hours</span><span class="op" id="2760260">(</span><span class="op" id="2760261">)</span>&nbsp;<span class="builtintype" id="2760263">float64</span>&nbsp;<span class="op" id="2760271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760274">hour</span>&nbsp;<span class="op" id="2760279">:=</span>&nbsp;<span class="ident" id="2760282">d</span>&nbsp;<span class="op" id="2760284">/</span>&nbsp;<span class="ident" id="2760286">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760292">nsec</span>&nbsp;<span class="op" id="2760297">:=</span>&nbsp;<span class="ident" id="2760300">d</span>&nbsp;<span class="op" id="2760302">%</span>&nbsp;<span class="ident" id="2760304">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760310">return</span>&nbsp;<span class="builtintype" id="2760317">float64</span><span class="op" id="2760324">(</span><span class="ident" id="2760325">hour</span><span class="op" id="2760329">)</span>&nbsp;<span class="op" id="2760331">+</span>&nbsp;<span class="builtintype" id="2760333">float64</span><span class="op" id="2760340">(</span><span class="ident" id="2760341">nsec</span><span class="op" id="2760345">)</span><span class="op" id="2760346">*</span><span class="op" id="2760347">(</span><span class="num" id="2760348">1e-9</span><span class="op" id="2760352">/</span><span class="num" id="2760353">60</span><span class="op" id="2760355">/</span><span class="num" id="2760356">60</span><span class="op" id="2760358">)</span><br>
<span class="lineno"></span><span class="op" id="2760360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2760363">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2760392">func</span>&nbsp;<span class="op" id="2760397">(</span><span class="ident" id="2760398">t</span>&nbsp;<span class="ident" id="2760400">Time</span><span class="op" id="2760404">)</span>&nbsp;<span class="ident" id="2760406">Add</span><span class="op" id="2760409">(</span><span class="ident" id="2760410">d</span>&nbsp;<span class="ident" id="2760412">Duration</span><span class="op" id="2760420">)</span>&nbsp;<span class="ident" id="2760422">Time</span>&nbsp;<span class="op" id="2760427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760430">t</span><span class="op" id="2760431">.</span><span class="ident" id="2760432">sec</span>&nbsp;<span class="op" id="2760436">+=</span>&nbsp;<span class="ident" id="2760439">int64</span><span class="op" id="2760444">(</span><span class="ident" id="2760445">d</span>&nbsp;<span class="op" id="2760447">/</span>&nbsp;<span class="num" id="2760449">1e9</span><span class="op" id="2760452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760455">nsec</span>&nbsp;<span class="op" id="2760460">:=</span>&nbsp;<span class="builtintype" id="2760463">int32</span><span class="op" id="2760468">(</span><span class="ident" id="2760469">t</span><span class="op" id="2760470">.</span><span class="ident" id="2760471">nsec</span><span class="op" id="2760475">)</span>&nbsp;<span class="op" id="2760477">+</span>&nbsp;<span class="builtintype" id="2760479">int32</span><span class="op" id="2760484">(</span><span class="ident" id="2760485">d</span><span class="op" id="2760486">%</span><span class="num" id="2760487">1e9</span><span class="op" id="2760490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760493">if</span>&nbsp;<span class="ident" id="2760496">nsec</span>&nbsp;<span class="op" id="2760501">&gt;=</span>&nbsp;<span class="num" id="2760504">1e9</span>&nbsp;<span class="op" id="2760508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760512">t</span><span class="op" id="2760513">.</span><span class="ident" id="2760514">sec</span><span class="op" id="2760517">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760522">nsec</span>&nbsp;<span class="op" id="2760527">-=</span>&nbsp;<span class="num" id="2760530">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760535">}</span>&nbsp;<span class="keyword" id="2760537">else</span>&nbsp;<span class="keyword" id="2760542">if</span>&nbsp;<span class="ident" id="2760545">nsec</span>&nbsp;<span class="op" id="2760550">&lt;</span>&nbsp;<span class="num" id="2760552">0</span>&nbsp;<span class="op" id="2760554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760558">t</span><span class="op" id="2760559">.</span><span class="ident" id="2760560">sec</span><span class="op" id="2760563">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760568">nsec</span>&nbsp;<span class="op" id="2760573">+=</span>&nbsp;<span class="num" id="2760576">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760581">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760584">t</span><span class="op" id="2760585">.</span><span class="ident" id="2760586">nsec</span>&nbsp;<span class="op" id="2760591">=</span>&nbsp;<span class="ident" id="2760593">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760599">return</span>&nbsp;<span class="ident" id="2760606">t</span><br>
<span class="lineno"></span><span class="op" id="2760608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2760611">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2760691">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2760768">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2760789">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2760840">func</span>&nbsp;<span class="op" id="2760845">(</span><span class="ident" id="2760846">t</span>&nbsp;<span class="ident" id="2760848">Time</span><span class="op" id="2760852">)</span>&nbsp;<span class="ident" id="2760854">Sub</span><span class="op" id="2760857">(</span><span class="ident" id="2760858">u</span>&nbsp;<span class="ident" id="2760860">Time</span><span class="op" id="2760864">)</span>&nbsp;<span class="ident" id="2760866">Duration</span>&nbsp;<span class="op" id="2760875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760878">d</span>&nbsp;<span class="op" id="2760880">:=</span>&nbsp;<span class="ident" id="2760883">Duration</span><span class="op" id="2760891">(</span><span class="ident" id="2760892">t</span><span class="op" id="2760893">.</span><span class="ident" id="2760894">sec</span><span class="op" id="2760897">-</span><span class="ident" id="2760898">u</span><span class="op" id="2760899">.</span><span class="ident" id="2760900">sec</span><span class="op" id="2760903">)</span><span class="op" id="2760904">*</span><span class="ident" id="2760905">Second</span>&nbsp;<span class="op" id="2760912">+</span>&nbsp;<span class="ident" id="2760914">Duration</span><span class="op" id="2760922">(</span><span class="builtintype" id="2760923">int32</span><span class="op" id="2760928">(</span><span class="ident" id="2760929">t</span><span class="op" id="2760930">.</span><span class="ident" id="2760931">nsec</span><span class="op" id="2760935">)</span><span class="op" id="2760936">-</span><span class="builtintype" id="2760937">int32</span><span class="op" id="2760942">(</span><span class="ident" id="2760943">u</span><span class="op" id="2760944">.</span><span class="ident" id="2760945">nsec</span><span class="op" id="2760949">)</span><span class="op" id="2760950">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2760953">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760990">switch</span>&nbsp;<span class="op" id="2760997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761000">case</span>&nbsp;<span class="ident" id="2761005">u</span><span class="op" id="2761006">.</span><span class="ident" id="2761007">Add</span><span class="op" id="2761010">(</span><span class="ident" id="2761011">d</span><span class="op" id="2761012">)</span><span class="op" id="2761013">.</span><span class="ident" id="2761014">Equal</span><span class="op" id="2761019">(</span><span class="ident" id="2761020">t</span><span class="op" id="2761021">)</span><span class="op" id="2761022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761026">return</span>&nbsp;<span class="ident" id="2761033">d</span>&nbsp;<span class="comment" id="2761035">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761052">case</span>&nbsp;<span class="ident" id="2761057">t</span><span class="op" id="2761058">.</span><span class="ident" id="2761059">Before</span><span class="op" id="2761065">(</span><span class="ident" id="2761066">u</span><span class="op" id="2761067">)</span><span class="op" id="2761068">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761072">return</span>&nbsp;<span class="ident" id="2761079">minDuration</span>&nbsp;<span class="comment" id="2761091">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761126">default</span><span class="op" id="2761133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761137">return</span>&nbsp;<span class="ident" id="2761144">maxDuration</span>&nbsp;<span class="comment" id="2761156">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761191">}</span><br>
<span class="lineno"></span><span class="op" id="2761193">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2761196">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2761239">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2761281">func</span>&nbsp;<span class="ident" id="2761286">Since</span><span class="op" id="2761291">(</span><span class="ident" id="2761292">t</span>&nbsp;<span class="ident" id="2761294">Time</span><span class="op" id="2761298">)</span>&nbsp;<span class="ident" id="2761300">Duration</span>&nbsp;<span class="op" id="2761309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761312">return</span>&nbsp;<span class="ident" id="2761319">Now</span><span class="op" id="2761322">(</span><span class="op" id="2761323">)</span><span class="op" id="2761324">.</span><span class="ident" id="2761325">Sub</span><span class="op" id="2761328">(</span><span class="ident" id="2761329">t</span><span class="op" id="2761330">)</span><br>
<span class="lineno">645</span><span class="op" id="2761332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761335">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2761391">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2761440">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2761501">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2761527">//</span><br>
<span class="lineno"></span><span class="comment" id="2761530">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2761595">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2761653">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2761705">func</span>&nbsp;<span class="op" id="2761710">(</span><span class="ident" id="2761711">t</span>&nbsp;<span class="ident" id="2761713">Time</span><span class="op" id="2761717">)</span>&nbsp;<span class="ident" id="2761719">AddDate</span><span class="op" id="2761726">(</span><span class="ident" id="2761727">years</span>&nbsp;<span class="builtintype" id="2761733">int</span><span class="op" id="2761736">,</span>&nbsp;<span class="ident" id="2761738">months</span>&nbsp;<span class="builtintype" id="2761745">int</span><span class="op" id="2761748">,</span>&nbsp;<span class="ident" id="2761750">days</span>&nbsp;<span class="builtintype" id="2761755">int</span><span class="op" id="2761758">)</span>&nbsp;<span class="ident" id="2761760">Time</span>&nbsp;<span class="op" id="2761765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761768">year</span><span class="op" id="2761772">,</span>&nbsp;<span class="ident" id="2761774">month</span><span class="op" id="2761779">,</span>&nbsp;<span class="ident" id="2761781">day</span>&nbsp;<span class="op" id="2761785">:=</span>&nbsp;<span class="ident" id="2761788">t</span><span class="op" id="2761789">.</span><span class="ident" id="2761790">Date</span><span class="op" id="2761794">(</span><span class="op" id="2761795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761798">hour</span><span class="op" id="2761802">,</span>&nbsp;<span class="ident" id="2761804">min</span><span class="op" id="2761807">,</span>&nbsp;<span class="ident" id="2761809">sec</span>&nbsp;<span class="op" id="2761813">:=</span>&nbsp;<span class="ident" id="2761816">t</span><span class="op" id="2761817">.</span><span class="ident" id="2761818">Clock</span><span class="op" id="2761823">(</span><span class="op" id="2761824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761827">return</span>&nbsp;<span class="ident" id="2761834">Date</span><span class="op" id="2761838">(</span><span class="ident" id="2761839">year</span><span class="op" id="2761843">+</span><span class="ident" id="2761844">years</span><span class="op" id="2761849">,</span>&nbsp;<span class="ident" id="2761851">month</span><span class="op" id="2761856">+</span><span class="ident" id="2761857">Month</span><span class="op" id="2761862">(</span><span class="ident" id="2761863">months</span><span class="op" id="2761869">)</span><span class="op" id="2761870">,</span>&nbsp;<span class="ident" id="2761872">day</span><span class="op" id="2761875">+</span><span class="ident" id="2761876">days</span><span class="op" id="2761880">,</span>&nbsp;<span class="ident" id="2761882">hour</span><span class="op" id="2761886">,</span>&nbsp;<span class="ident" id="2761888">min</span><span class="op" id="2761891">,</span>&nbsp;<span class="ident" id="2761893">sec</span><span class="op" id="2761896">,</span>&nbsp;<span class="builtintype" id="2761898">int</span><span class="op" id="2761901">(</span><span class="ident" id="2761902">t</span><span class="op" id="2761903">.</span><span class="ident" id="2761904">nsec</span><span class="op" id="2761908">)</span><span class="op" id="2761909">,</span>&nbsp;<span class="ident" id="2761911">t</span><span class="op" id="2761912">.</span><span class="ident" id="2761913">loc</span><span class="op" id="2761916">)</span><br>
<span class="lineno"></span><span class="op" id="2761918">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2761921">const</span>&nbsp;<span class="op" id="2761927">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761930">secondsPerMinute</span>&nbsp;<span class="op" id="2761947">=</span>&nbsp;<span class="num" id="2761949">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761953">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2761970">=</span>&nbsp;<span class="num" id="2761972">60</span>&nbsp;<span class="op" id="2761975">*</span>&nbsp;<span class="num" id="2761977">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761981">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2761998">=</span>&nbsp;<span class="num" id="2762000">24</span>&nbsp;<span class="op" id="2762003">*</span>&nbsp;<span class="ident" id="2762005">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762021">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2762038">=</span>&nbsp;<span class="num" id="2762040">7</span>&nbsp;<span class="op" id="2762042">*</span>&nbsp;<span class="ident" id="2762044">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762059">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2762076">=</span>&nbsp;<span class="num" id="2762078">365</span><span class="op" id="2762081">*</span><span class="num" id="2762082">400</span>&nbsp;<span class="op" id="2762086">+</span>&nbsp;<span class="num" id="2762088">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762092">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2762109">=</span>&nbsp;<span class="num" id="2762111">365</span><span class="op" id="2762114">*</span><span class="num" id="2762115">100</span>&nbsp;<span class="op" id="2762119">+</span>&nbsp;<span class="num" id="2762121">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762125">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2762142">=</span>&nbsp;<span class="num" id="2762144">365</span><span class="op" id="2762147">*</span><span class="num" id="2762148">4</span>&nbsp;<span class="op" id="2762150">+</span>&nbsp;<span class="num" id="2762152">1</span><br>
<span class="lineno"></span><span class="op" id="2762154">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2762157">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2762217">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2762257">func</span>&nbsp;<span class="op" id="2762262">(</span><span class="ident" id="2762263">t</span>&nbsp;<span class="ident" id="2762265">Time</span><span class="op" id="2762269">)</span>&nbsp;<span class="ident" id="2762271">date</span><span class="op" id="2762275">(</span><span class="ident" id="2762276">full</span>&nbsp;<span class="builtintype" id="2762281">bool</span><span class="op" id="2762285">)</span>&nbsp;<span class="op" id="2762287">(</span><span class="ident" id="2762288">year</span>&nbsp;<span class="builtintype" id="2762293">int</span><span class="op" id="2762296">,</span>&nbsp;<span class="ident" id="2762298">month</span>&nbsp;<span class="ident" id="2762304">Month</span><span class="op" id="2762309">,</span>&nbsp;<span class="ident" id="2762311">day</span>&nbsp;<span class="builtintype" id="2762315">int</span><span class="op" id="2762318">,</span>&nbsp;<span class="ident" id="2762320">yday</span>&nbsp;<span class="builtintype" id="2762325">int</span><span class="op" id="2762328">)</span>&nbsp;<span class="op" id="2762330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762333">return</span>&nbsp;<span class="ident" id="2762340">absDate</span><span class="op" id="2762347">(</span><span class="ident" id="2762348">t</span><span class="op" id="2762349">.</span><span class="ident" id="2762350">abs</span><span class="op" id="2762353">(</span><span class="op" id="2762354">)</span><span class="op" id="2762355">,</span>&nbsp;<span class="ident" id="2762357">full</span><span class="op" id="2762361">)</span><br>
<span class="lineno">675</span><span class="op" id="2762363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2762366">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2762424">func</span>&nbsp;<span class="ident" id="2762429">absDate</span><span class="op" id="2762436">(</span><span class="ident" id="2762437">abs</span>&nbsp;<span class="ident" id="2762441">uint64</span><span class="op" id="2762447">,</span>&nbsp;<span class="ident" id="2762449">full</span>&nbsp;<span class="builtintype" id="2762454">bool</span><span class="op" id="2762458">)</span>&nbsp;<span class="op" id="2762460">(</span><span class="ident" id="2762461">year</span>&nbsp;<span class="builtintype" id="2762466">int</span><span class="op" id="2762469">,</span>&nbsp;<span class="ident" id="2762471">month</span>&nbsp;<span class="ident" id="2762477">Month</span><span class="op" id="2762482">,</span>&nbsp;<span class="ident" id="2762484">day</span>&nbsp;<span class="builtintype" id="2762488">int</span><span class="op" id="2762491">,</span>&nbsp;<span class="ident" id="2762493">yday</span>&nbsp;<span class="builtintype" id="2762498">int</span><span class="op" id="2762501">)</span>&nbsp;<span class="op" id="2762503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762506">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762535">d</span>&nbsp;<span class="op" id="2762537">:=</span>&nbsp;<span class="ident" id="2762540">abs</span>&nbsp;<span class="op" id="2762544">/</span>&nbsp;<span class="ident" id="2762546">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762562">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762595">n</span>&nbsp;<span class="op" id="2762597">:=</span>&nbsp;<span class="ident" id="2762600">d</span>&nbsp;<span class="op" id="2762602">/</span>&nbsp;<span class="ident" id="2762604">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762621">y</span>&nbsp;<span class="op" id="2762623">:=</span>&nbsp;<span class="num" id="2762626">400</span>&nbsp;<span class="op" id="2762630">*</span>&nbsp;<span class="ident" id="2762632">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762635">d</span>&nbsp;<span class="op" id="2762637">-=</span>&nbsp;<span class="ident" id="2762640">daysPer400Years</span>&nbsp;<span class="op" id="2762656">*</span>&nbsp;<span class="ident" id="2762658">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762662">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762691">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762754">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762818">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762865">n</span>&nbsp;<span class="op" id="2762867">=</span>&nbsp;<span class="ident" id="2762869">d</span>&nbsp;<span class="op" id="2762871">/</span>&nbsp;<span class="ident" id="2762873">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762890">n</span>&nbsp;<span class="op" id="2762892">-=</span>&nbsp;<span class="ident" id="2762895">n</span>&nbsp;<span class="op" id="2762897">&gt;&gt;</span>&nbsp;<span class="num" id="2762900">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762903">y</span>&nbsp;<span class="op" id="2762905">+=</span>&nbsp;<span class="num" id="2762908">100</span>&nbsp;<span class="op" id="2762912">*</span>&nbsp;<span class="ident" id="2762914">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762917">d</span>&nbsp;<span class="op" id="2762919">-=</span>&nbsp;<span class="ident" id="2762922">daysPer100Years</span>&nbsp;<span class="op" id="2762938">*</span>&nbsp;<span class="ident" id="2762940">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762944">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762971">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763030">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763058">n</span>&nbsp;<span class="op" id="2763060">=</span>&nbsp;<span class="ident" id="2763062">d</span>&nbsp;<span class="op" id="2763064">/</span>&nbsp;<span class="ident" id="2763066">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763081">y</span>&nbsp;<span class="op" id="2763083">+=</span>&nbsp;<span class="num" id="2763086">4</span>&nbsp;<span class="op" id="2763088">*</span>&nbsp;<span class="ident" id="2763090">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763093">d</span>&nbsp;<span class="op" id="2763095">-=</span>&nbsp;<span class="ident" id="2763098">daysPer4Years</span>&nbsp;<span class="op" id="2763112">*</span>&nbsp;<span class="ident" id="2763114">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763118">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763159">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763226">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763287">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763312">n</span>&nbsp;<span class="op" id="2763314">=</span>&nbsp;<span class="ident" id="2763316">d</span>&nbsp;<span class="op" id="2763318">/</span>&nbsp;<span class="num" id="2763320">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763325">n</span>&nbsp;<span class="op" id="2763327">-=</span>&nbsp;<span class="ident" id="2763330">n</span>&nbsp;<span class="op" id="2763332">&gt;&gt;</span>&nbsp;<span class="num" id="2763335">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763338">y</span>&nbsp;<span class="op" id="2763340">+=</span>&nbsp;<span class="ident" id="2763343">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763346">d</span>&nbsp;<span class="op" id="2763348">-=</span>&nbsp;<span class="num" id="2763351">365</span>&nbsp;<span class="op" id="2763355">*</span>&nbsp;<span class="ident" id="2763357">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763361">year</span>&nbsp;<span class="op" id="2763366">=</span>&nbsp;<span class="builtintype" id="2763368">int</span><span class="op" id="2763371">(</span><span class="ident" id="2763372">int64</span><span class="op" id="2763377">(</span><span class="ident" id="2763378">y</span><span class="op" id="2763379">)</span>&nbsp;<span class="op" id="2763381">+</span>&nbsp;<span class="ident" id="2763383">absoluteZeroYear</span><span class="op" id="2763399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763402">yday</span>&nbsp;<span class="op" id="2763407">=</span>&nbsp;<span class="builtintype" id="2763409">int</span><span class="op" id="2763412">(</span><span class="ident" id="2763413">d</span><span class="op" id="2763414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763418">if</span>&nbsp;<span class="op" id="2763421">!</span><span class="ident" id="2763422">full</span>&nbsp;<span class="op" id="2763427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763431">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763443">day</span>&nbsp;<span class="op" id="2763447">=</span>&nbsp;<span class="ident" id="2763449">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763455">if</span>&nbsp;<span class="ident" id="2763458">isLeap</span><span class="op" id="2763464">(</span><span class="ident" id="2763465">year</span><span class="op" id="2763469">)</span>&nbsp;<span class="op" id="2763471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763475">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763490">switch</span>&nbsp;<span class="op" id="2763497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763501">case</span>&nbsp;<span class="ident" id="2763506">day</span>&nbsp;<span class="op" id="2763510">&gt;</span>&nbsp;<span class="num" id="2763512">31</span><span class="op" id="2763514">+</span><span class="num" id="2763515">29</span><span class="op" id="2763517">-</span><span class="num" id="2763518">1</span><span class="op" id="2763519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763524">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763571">day</span><span class="op" id="2763574">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763579">case</span>&nbsp;<span class="ident" id="2763584">day</span>&nbsp;<span class="op" id="2763588">==</span>&nbsp;<span class="num" id="2763591">31</span><span class="op" id="2763593">+</span><span class="num" id="2763594">29</span><span class="op" id="2763596">-</span><span class="num" id="2763597">1</span><span class="op" id="2763598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763603">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763619">month</span>&nbsp;<span class="op" id="2763625">=</span>&nbsp;<span class="ident" id="2763627">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763639">day</span>&nbsp;<span class="op" id="2763643">=</span>&nbsp;<span class="num" id="2763645">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763651">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763667">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763730">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763795">month</span>&nbsp;<span class="op" id="2763801">=</span>&nbsp;<span class="ident" id="2763803">Month</span><span class="op" id="2763808">(</span><span class="ident" id="2763809">day</span>&nbsp;<span class="op" id="2763813">/</span>&nbsp;<span class="num" id="2763815">31</span><span class="op" id="2763817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763820">end</span>&nbsp;<span class="op" id="2763824">:=</span>&nbsp;<span class="builtintype" id="2763827">int</span><span class="op" id="2763830">(</span><span class="ident" id="2763831">daysBefore</span><span class="op" id="2763841">[</span><span class="ident" id="2763842">month</span><span class="op" id="2763847">+</span><span class="num" id="2763848">1</span><span class="op" id="2763849">]</span><span class="op" id="2763850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763853">var</span>&nbsp;<span class="ident" id="2763857">begin</span>&nbsp;<span class="builtintype" id="2763863">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763868">if</span>&nbsp;<span class="ident" id="2763871">day</span>&nbsp;<span class="op" id="2763875">&gt;=</span>&nbsp;<span class="ident" id="2763878">end</span>&nbsp;<span class="op" id="2763882">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763886">month</span><span class="op" id="2763891">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763896">begin</span>&nbsp;<span class="op" id="2763902">=</span>&nbsp;<span class="ident" id="2763904">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763909">}</span>&nbsp;<span class="keyword" id="2763911">else</span>&nbsp;<span class="op" id="2763916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763920">begin</span>&nbsp;<span class="op" id="2763926">=</span>&nbsp;<span class="builtintype" id="2763928">int</span><span class="op" id="2763931">(</span><span class="ident" id="2763932">daysBefore</span><span class="op" id="2763942">[</span><span class="ident" id="2763943">month</span><span class="op" id="2763948">]</span><span class="op" id="2763949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763952">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763956">month</span><span class="op" id="2763961">++</span>&nbsp;<span class="comment" id="2763964">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763989">day</span>&nbsp;<span class="op" id="2763993">=</span>&nbsp;<span class="ident" id="2763995">day</span>&nbsp;<span class="op" id="2763999">-</span>&nbsp;<span class="ident" id="2764001">begin</span>&nbsp;<span class="op" id="2764007">+</span>&nbsp;<span class="num" id="2764009">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764012">return</span><br>
<span class="lineno"></span><span class="op" id="2764019">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2764022">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2764084">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2764148">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2764205">var</span>&nbsp;<span class="ident" id="2764209">daysBefore</span>&nbsp;<span class="op" id="2764220">=</span>&nbsp;<span class="op" id="2764222">[</span><span class="op" id="2764223">...</span><span class="op" id="2764226">]</span><span class="builtintype" id="2764227">int32</span><span class="op" id="2764232">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764235">0</span><span class="op" id="2764236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764239">31</span><span class="op" id="2764241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764244">31</span>&nbsp;<span class="op" id="2764247">+</span>&nbsp;<span class="num" id="2764249">28</span><span class="op" id="2764251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764254">31</span>&nbsp;<span class="op" id="2764257">+</span>&nbsp;<span class="num" id="2764259">28</span>&nbsp;<span class="op" id="2764262">+</span>&nbsp;<span class="num" id="2764264">31</span><span class="op" id="2764266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764269">31</span>&nbsp;<span class="op" id="2764272">+</span>&nbsp;<span class="num" id="2764274">28</span>&nbsp;<span class="op" id="2764277">+</span>&nbsp;<span class="num" id="2764279">31</span>&nbsp;<span class="op" id="2764282">+</span>&nbsp;<span class="num" id="2764284">30</span><span class="op" id="2764286">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764289">31</span>&nbsp;<span class="op" id="2764292">+</span>&nbsp;<span class="num" id="2764294">28</span>&nbsp;<span class="op" id="2764297">+</span>&nbsp;<span class="num" id="2764299">31</span>&nbsp;<span class="op" id="2764302">+</span>&nbsp;<span class="num" id="2764304">30</span>&nbsp;<span class="op" id="2764307">+</span>&nbsp;<span class="num" id="2764309">31</span><span class="op" id="2764311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764314">31</span>&nbsp;<span class="op" id="2764317">+</span>&nbsp;<span class="num" id="2764319">28</span>&nbsp;<span class="op" id="2764322">+</span>&nbsp;<span class="num" id="2764324">31</span>&nbsp;<span class="op" id="2764327">+</span>&nbsp;<span class="num" id="2764329">30</span>&nbsp;<span class="op" id="2764332">+</span>&nbsp;<span class="num" id="2764334">31</span>&nbsp;<span class="op" id="2764337">+</span>&nbsp;<span class="num" id="2764339">30</span><span class="op" id="2764341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764344">31</span>&nbsp;<span class="op" id="2764347">+</span>&nbsp;<span class="num" id="2764349">28</span>&nbsp;<span class="op" id="2764352">+</span>&nbsp;<span class="num" id="2764354">31</span>&nbsp;<span class="op" id="2764357">+</span>&nbsp;<span class="num" id="2764359">30</span>&nbsp;<span class="op" id="2764362">+</span>&nbsp;<span class="num" id="2764364">31</span>&nbsp;<span class="op" id="2764367">+</span>&nbsp;<span class="num" id="2764369">30</span>&nbsp;<span class="op" id="2764372">+</span>&nbsp;<span class="num" id="2764374">31</span><span class="op" id="2764376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764379">31</span>&nbsp;<span class="op" id="2764382">+</span>&nbsp;<span class="num" id="2764384">28</span>&nbsp;<span class="op" id="2764387">+</span>&nbsp;<span class="num" id="2764389">31</span>&nbsp;<span class="op" id="2764392">+</span>&nbsp;<span class="num" id="2764394">30</span>&nbsp;<span class="op" id="2764397">+</span>&nbsp;<span class="num" id="2764399">31</span>&nbsp;<span class="op" id="2764402">+</span>&nbsp;<span class="num" id="2764404">30</span>&nbsp;<span class="op" id="2764407">+</span>&nbsp;<span class="num" id="2764409">31</span>&nbsp;<span class="op" id="2764412">+</span>&nbsp;<span class="num" id="2764414">31</span><span class="op" id="2764416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764419">31</span>&nbsp;<span class="op" id="2764422">+</span>&nbsp;<span class="num" id="2764424">28</span>&nbsp;<span class="op" id="2764427">+</span>&nbsp;<span class="num" id="2764429">31</span>&nbsp;<span class="op" id="2764432">+</span>&nbsp;<span class="num" id="2764434">30</span>&nbsp;<span class="op" id="2764437">+</span>&nbsp;<span class="num" id="2764439">31</span>&nbsp;<span class="op" id="2764442">+</span>&nbsp;<span class="num" id="2764444">30</span>&nbsp;<span class="op" id="2764447">+</span>&nbsp;<span class="num" id="2764449">31</span>&nbsp;<span class="op" id="2764452">+</span>&nbsp;<span class="num" id="2764454">31</span>&nbsp;<span class="op" id="2764457">+</span>&nbsp;<span class="num" id="2764459">30</span><span class="op" id="2764461">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764464">31</span>&nbsp;<span class="op" id="2764467">+</span>&nbsp;<span class="num" id="2764469">28</span>&nbsp;<span class="op" id="2764472">+</span>&nbsp;<span class="num" id="2764474">31</span>&nbsp;<span class="op" id="2764477">+</span>&nbsp;<span class="num" id="2764479">30</span>&nbsp;<span class="op" id="2764482">+</span>&nbsp;<span class="num" id="2764484">31</span>&nbsp;<span class="op" id="2764487">+</span>&nbsp;<span class="num" id="2764489">30</span>&nbsp;<span class="op" id="2764492">+</span>&nbsp;<span class="num" id="2764494">31</span>&nbsp;<span class="op" id="2764497">+</span>&nbsp;<span class="num" id="2764499">31</span>&nbsp;<span class="op" id="2764502">+</span>&nbsp;<span class="num" id="2764504">30</span>&nbsp;<span class="op" id="2764507">+</span>&nbsp;<span class="num" id="2764509">31</span><span class="op" id="2764511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764514">31</span>&nbsp;<span class="op" id="2764517">+</span>&nbsp;<span class="num" id="2764519">28</span>&nbsp;<span class="op" id="2764522">+</span>&nbsp;<span class="num" id="2764524">31</span>&nbsp;<span class="op" id="2764527">+</span>&nbsp;<span class="num" id="2764529">30</span>&nbsp;<span class="op" id="2764532">+</span>&nbsp;<span class="num" id="2764534">31</span>&nbsp;<span class="op" id="2764537">+</span>&nbsp;<span class="num" id="2764539">30</span>&nbsp;<span class="op" id="2764542">+</span>&nbsp;<span class="num" id="2764544">31</span>&nbsp;<span class="op" id="2764547">+</span>&nbsp;<span class="num" id="2764549">31</span>&nbsp;<span class="op" id="2764552">+</span>&nbsp;<span class="num" id="2764554">30</span>&nbsp;<span class="op" id="2764557">+</span>&nbsp;<span class="num" id="2764559">31</span>&nbsp;<span class="op" id="2764562">+</span>&nbsp;<span class="num" id="2764564">30</span><span class="op" id="2764566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2764569">31</span>&nbsp;<span class="op" id="2764572">+</span>&nbsp;<span class="num" id="2764574">28</span>&nbsp;<span class="op" id="2764577">+</span>&nbsp;<span class="num" id="2764579">31</span>&nbsp;<span class="op" id="2764582">+</span>&nbsp;<span class="num" id="2764584">30</span>&nbsp;<span class="op" id="2764587">+</span>&nbsp;<span class="num" id="2764589">31</span>&nbsp;<span class="op" id="2764592">+</span>&nbsp;<span class="num" id="2764594">30</span>&nbsp;<span class="op" id="2764597">+</span>&nbsp;<span class="num" id="2764599">31</span>&nbsp;<span class="op" id="2764602">+</span>&nbsp;<span class="num" id="2764604">31</span>&nbsp;<span class="op" id="2764607">+</span>&nbsp;<span class="num" id="2764609">30</span>&nbsp;<span class="op" id="2764612">+</span>&nbsp;<span class="num" id="2764614">31</span>&nbsp;<span class="op" id="2764617">+</span>&nbsp;<span class="num" id="2764619">30</span>&nbsp;<span class="op" id="2764622">+</span>&nbsp;<span class="num" id="2764624">31</span><span class="op" id="2764626">,</span><br>
<span class="lineno"></span><span class="op" id="2764628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2764631">func</span>&nbsp;<span class="ident" id="2764636">daysIn</span><span class="op" id="2764642">(</span><span class="ident" id="2764643">m</span>&nbsp;<span class="ident" id="2764645">Month</span><span class="op" id="2764650">,</span>&nbsp;<span class="ident" id="2764652">year</span>&nbsp;<span class="builtintype" id="2764657">int</span><span class="op" id="2764660">)</span>&nbsp;<span class="builtintype" id="2764662">int</span>&nbsp;<span class="op" id="2764666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764669">if</span>&nbsp;<span class="ident" id="2764672">m</span>&nbsp;<span class="op" id="2764674">==</span>&nbsp;<span class="ident" id="2764677">February</span>&nbsp;<span class="op" id="2764686">&amp;&amp;</span>&nbsp;<span class="ident" id="2764689">isLeap</span><span class="op" id="2764695">(</span><span class="ident" id="2764696">year</span><span class="op" id="2764700">)</span>&nbsp;<span class="op" id="2764702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764706">return</span>&nbsp;<span class="num" id="2764713">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764720">return</span>&nbsp;<span class="builtintype" id="2764727">int</span><span class="op" id="2764730">(</span><span class="ident" id="2764731">daysBefore</span><span class="op" id="2764741">[</span><span class="ident" id="2764742">m</span><span class="op" id="2764743">]</span>&nbsp;<span class="op" id="2764745">-</span>&nbsp;<span class="ident" id="2764747">daysBefore</span><span class="op" id="2764757">[</span><span class="ident" id="2764758">m</span><span class="op" id="2764759">-</span><span class="num" id="2764760">1</span><span class="op" id="2764761">]</span><span class="op" id="2764762">)</span><br>
<span class="lineno">775</span><span class="op" id="2764764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764767">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2764799">func</span>&nbsp;<span class="ident" id="2764804">now</span><span class="op" id="2764807">(</span><span class="op" id="2764808">)</span>&nbsp;<span class="op" id="2764810">(</span><span class="ident" id="2764811">sec</span>&nbsp;<span class="ident" id="2764815">int64</span><span class="op" id="2764820">,</span>&nbsp;<span class="ident" id="2764822">nsec</span>&nbsp;<span class="builtintype" id="2764827">int32</span><span class="op" id="2764832">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2764835">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2764874">func</span>&nbsp;<span class="ident" id="2764879">Now</span><span class="op" id="2764882">(</span><span class="op" id="2764883">)</span>&nbsp;<span class="ident" id="2764885">Time</span>&nbsp;<span class="op" id="2764890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764893">sec</span><span class="op" id="2764896">,</span>&nbsp;<span class="ident" id="2764898">nsec</span>&nbsp;<span class="op" id="2764903">:=</span>&nbsp;<span class="ident" id="2764906">now</span><span class="op" id="2764909">(</span><span class="op" id="2764910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764913">return</span>&nbsp;<span class="ident" id="2764920">Time</span><span class="op" id="2764924">{</span><span class="ident" id="2764925">sec</span>&nbsp;<span class="op" id="2764929">+</span>&nbsp;<span class="ident" id="2764931">unixToInternal</span><span class="op" id="2764945">,</span>&nbsp;<span class="ident" id="2764947">nsec</span><span class="op" id="2764951">,</span>&nbsp;<span class="ident" id="2764953">Local</span><span class="op" id="2764958">}</span><br>
<span class="lineno"></span><span class="op" id="2764960">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2764963">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2765010">func</span>&nbsp;<span class="op" id="2765015">(</span><span class="ident" id="2765016">t</span>&nbsp;<span class="ident" id="2765018">Time</span><span class="op" id="2765022">)</span>&nbsp;<span class="ident" id="2765024">UTC</span><span class="op" id="2765027">(</span><span class="op" id="2765028">)</span>&nbsp;<span class="ident" id="2765030">Time</span>&nbsp;<span class="op" id="2765035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765038">t</span><span class="op" id="2765039">.</span><span class="ident" id="2765040">loc</span>&nbsp;<span class="op" id="2765044">=</span>&nbsp;<span class="ident" id="2765046">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765051">return</span>&nbsp;<span class="ident" id="2765058">t</span><br>
<span class="lineno">790</span><span class="op" id="2765060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765063">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2765119">func</span>&nbsp;<span class="op" id="2765124">(</span><span class="ident" id="2765125">t</span>&nbsp;<span class="ident" id="2765127">Time</span><span class="op" id="2765131">)</span>&nbsp;<span class="ident" id="2765133">Local</span><span class="op" id="2765138">(</span><span class="op" id="2765139">)</span>&nbsp;<span class="ident" id="2765141">Time</span>&nbsp;<span class="op" id="2765146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765149">t</span><span class="op" id="2765150">.</span><span class="ident" id="2765151">loc</span>&nbsp;<span class="op" id="2765155">=</span>&nbsp;<span class="ident" id="2765157">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765164">return</span>&nbsp;<span class="ident" id="2765171">t</span><br>
<span class="lineno"></span><span class="op" id="2765173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765176">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2765234">//</span><br>
<span class="lineno">800</span><span class="comment" id="2765237">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2765265">func</span>&nbsp;<span class="op" id="2765270">(</span><span class="ident" id="2765271">t</span>&nbsp;<span class="ident" id="2765273">Time</span><span class="op" id="2765277">)</span>&nbsp;<span class="ident" id="2765279">In</span><span class="op" id="2765281">(</span><span class="ident" id="2765282">loc</span>&nbsp;<span class="op" id="2765286">*</span><span class="ident" id="2765287">Location</span><span class="op" id="2765295">)</span>&nbsp;<span class="ident" id="2765297">Time</span>&nbsp;<span class="op" id="2765302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765305">if</span>&nbsp;<span class="ident" id="2765308">loc</span>&nbsp;<span class="op" id="2765312">==</span>&nbsp;<span class="ident" id="2765315">nil</span>&nbsp;<span class="op" id="2765319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765323">panic</span><span class="op" id="2765328">(</span><span class="string" id="2765329">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2765372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765375">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765378">t</span><span class="op" id="2765379">.</span><span class="ident" id="2765380">loc</span>&nbsp;<span class="op" id="2765384">=</span>&nbsp;<span class="ident" id="2765386">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765391">return</span>&nbsp;<span class="ident" id="2765398">t</span><br>
<span class="lineno"></span><span class="op" id="2765400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765403">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2765468">func</span>&nbsp;<span class="op" id="2765473">(</span><span class="ident" id="2765474">t</span>&nbsp;<span class="ident" id="2765476">Time</span><span class="op" id="2765480">)</span>&nbsp;<span class="ident" id="2765482">Location</span><span class="op" id="2765490">(</span><span class="op" id="2765491">)</span>&nbsp;<span class="op" id="2765493">*</span><span class="ident" id="2765494">Location</span>&nbsp;<span class="op" id="2765503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765506">l</span>&nbsp;<span class="op" id="2765508">:=</span>&nbsp;<span class="ident" id="2765511">t</span><span class="op" id="2765512">.</span><span class="ident" id="2765513">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765518">if</span>&nbsp;<span class="ident" id="2765521">l</span>&nbsp;<span class="op" id="2765523">==</span>&nbsp;<span class="ident" id="2765526">nil</span>&nbsp;<span class="op" id="2765530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765534">l</span>&nbsp;<span class="op" id="2765536">=</span>&nbsp;<span class="ident" id="2765538">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765543">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765546">return</span>&nbsp;<span class="ident" id="2765553">l</span><br>
<span class="lineno"></span><span class="op" id="2765555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765558">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2765636">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2765711">func</span>&nbsp;<span class="op" id="2765716">(</span><span class="ident" id="2765717">t</span>&nbsp;<span class="ident" id="2765719">Time</span><span class="op" id="2765723">)</span>&nbsp;<span class="ident" id="2765725">Zone</span><span class="op" id="2765729">(</span><span class="op" id="2765730">)</span>&nbsp;<span class="op" id="2765732">(</span><span class="ident" id="2765733">name</span>&nbsp;<span class="builtintype" id="2765738">string</span><span class="op" id="2765744">,</span>&nbsp;<span class="ident" id="2765746">offset</span>&nbsp;<span class="builtintype" id="2765753">int</span><span class="op" id="2765756">)</span>&nbsp;<span class="op" id="2765758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765761">name</span><span class="op" id="2765765">,</span>&nbsp;<span class="ident" id="2765767">offset</span><span class="op" id="2765773">,</span>&nbsp;<span class="ident" id="2765775">_</span><span class="op" id="2765776">,</span>&nbsp;<span class="ident" id="2765778">_</span><span class="op" id="2765779">,</span>&nbsp;<span class="ident" id="2765781">_</span>&nbsp;<span class="op" id="2765783">=</span>&nbsp;<span class="ident" id="2765785">t</span><span class="op" id="2765786">.</span><span class="ident" id="2765787">loc</span><span class="op" id="2765790">.</span><span class="ident" id="2765791">lookup</span><span class="op" id="2765797">(</span><span class="ident" id="2765798">t</span><span class="op" id="2765799">.</span><span class="ident" id="2765800">sec</span>&nbsp;<span class="op" id="2765804">+</span>&nbsp;<span class="ident" id="2765806">internalToUnix</span><span class="op" id="2765820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765823">return</span><br>
<span class="lineno"></span><span class="op" id="2765830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2765833">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2765897">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2765927">func</span>&nbsp;<span class="op" id="2765932">(</span><span class="ident" id="2765933">t</span>&nbsp;<span class="ident" id="2765935">Time</span><span class="op" id="2765939">)</span>&nbsp;<span class="ident" id="2765941">Unix</span><span class="op" id="2765945">(</span><span class="op" id="2765946">)</span>&nbsp;<span class="ident" id="2765948">int64</span>&nbsp;<span class="op" id="2765954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765957">return</span>&nbsp;<span class="ident" id="2765964">t</span><span class="op" id="2765965">.</span><span class="ident" id="2765966">sec</span>&nbsp;<span class="op" id="2765970">+</span>&nbsp;<span class="ident" id="2765972">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2765987">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2765990">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2766062">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2766133">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2766201">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2766272">func</span>&nbsp;<span class="op" id="2766277">(</span><span class="ident" id="2766278">t</span>&nbsp;<span class="ident" id="2766280">Time</span><span class="op" id="2766284">)</span>&nbsp;<span class="ident" id="2766286">UnixNano</span><span class="op" id="2766294">(</span><span class="op" id="2766295">)</span>&nbsp;<span class="ident" id="2766297">int64</span>&nbsp;<span class="op" id="2766303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766306">return</span>&nbsp;<span class="op" id="2766313">(</span><span class="ident" id="2766314">t</span><span class="op" id="2766315">.</span><span class="ident" id="2766316">sec</span><span class="op" id="2766319">+</span><span class="ident" id="2766320">internalToUnix</span><span class="op" id="2766334">)</span><span class="op" id="2766335">*</span><span class="num" id="2766336">1e9</span>&nbsp;<span class="op" id="2766340">+</span>&nbsp;<span class="ident" id="2766342">int64</span><span class="op" id="2766347">(</span><span class="ident" id="2766348">t</span><span class="op" id="2766349">.</span><span class="ident" id="2766350">nsec</span><span class="op" id="2766354">)</span><br>
<span class="lineno"></span><span class="op" id="2766356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2766359">const</span>&nbsp;<span class="ident" id="2766365">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2766383">byte</span>&nbsp;<span class="op" id="2766388">=</span>&nbsp;<span class="num" id="2766390">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2766393">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2766461">func</span>&nbsp;<span class="op" id="2766466">(</span><span class="ident" id="2766467">t</span>&nbsp;<span class="ident" id="2766469">Time</span><span class="op" id="2766473">)</span>&nbsp;<span class="ident" id="2766475">MarshalBinary</span><span class="op" id="2766488">(</span><span class="op" id="2766489">)</span>&nbsp;<span class="op" id="2766491">(</span><span class="op" id="2766492">[</span><span class="op" id="2766493">]</span><span class="builtintype" id="2766494">byte</span><span class="op" id="2766498">,</span>&nbsp;<span class="builtintype" id="2766500">error</span><span class="op" id="2766505">)</span>&nbsp;<span class="op" id="2766507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766510">var</span>&nbsp;<span class="ident" id="2766514">offsetMin</span>&nbsp;<span class="builtintype" id="2766524">int16</span>&nbsp;<span class="comment" id="2766530">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766567">if</span>&nbsp;<span class="ident" id="2766570">t</span><span class="op" id="2766571">.</span><span class="ident" id="2766572">Location</span><span class="op" id="2766580">(</span><span class="op" id="2766581">)</span>&nbsp;<span class="op" id="2766583">==</span>&nbsp;<span class="op" id="2766586">&amp;</span><span class="ident" id="2766587">utcLoc</span>&nbsp;<span class="op" id="2766594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766598">offsetMin</span>&nbsp;<span class="op" id="2766608">=</span>&nbsp;<span class="op" id="2766610">-</span><span class="num" id="2766611">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766614">}</span>&nbsp;<span class="keyword" id="2766616">else</span>&nbsp;<span class="op" id="2766621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766625">_</span><span class="op" id="2766626">,</span>&nbsp;<span class="ident" id="2766628">offset</span>&nbsp;<span class="op" id="2766635">:=</span>&nbsp;<span class="ident" id="2766638">t</span><span class="op" id="2766639">.</span><span class="ident" id="2766640">Zone</span><span class="op" id="2766644">(</span><span class="op" id="2766645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766649">if</span>&nbsp;<span class="ident" id="2766652">offset</span><span class="op" id="2766658">%</span><span class="num" id="2766659">60</span>&nbsp;<span class="op" id="2766662">!=</span>&nbsp;<span class="num" id="2766665">0</span>&nbsp;<span class="op" id="2766667">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766672">return</span>&nbsp;<span class="ident" id="2766679">nil</span><span class="op" id="2766682">,</span>&nbsp;<span class="ident" id="2766684">errors</span><span class="op" id="2766690">.</span><span class="ident" id="2766691">New</span><span class="op" id="2766694">(</span><span class="string" id="2766695">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2766750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766758">offset</span>&nbsp;<span class="op" id="2766765">/=</span>&nbsp;<span class="num" id="2766768">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766773">if</span>&nbsp;<span class="ident" id="2766776">offset</span>&nbsp;<span class="op" id="2766783">&lt;</span>&nbsp;<span class="op" id="2766785">-</span><span class="num" id="2766786">32768</span>&nbsp;<span class="op" id="2766792">||</span>&nbsp;<span class="ident" id="2766795">offset</span>&nbsp;<span class="op" id="2766802">==</span>&nbsp;<span class="op" id="2766805">-</span><span class="num" id="2766806">1</span>&nbsp;<span class="op" id="2766808">||</span>&nbsp;<span class="ident" id="2766811">offset</span>&nbsp;<span class="op" id="2766818">&gt;</span>&nbsp;<span class="num" id="2766820">32767</span>&nbsp;<span class="op" id="2766826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766831">return</span>&nbsp;<span class="ident" id="2766838">nil</span><span class="op" id="2766841">,</span>&nbsp;<span class="ident" id="2766843">errors</span><span class="op" id="2766849">.</span><span class="ident" id="2766850">New</span><span class="op" id="2766853">(</span><span class="string" id="2766854">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2766898">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766906">offsetMin</span>&nbsp;<span class="op" id="2766916">=</span>&nbsp;<span class="builtintype" id="2766918">int16</span><span class="op" id="2766923">(</span><span class="ident" id="2766924">offset</span><span class="op" id="2766930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766937">enc</span>&nbsp;<span class="op" id="2766941">:=</span>&nbsp;<span class="op" id="2766944">[</span><span class="op" id="2766945">]</span><span class="builtintype" id="2766946">byte</span><span class="op" id="2766950">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766954">timeBinaryVersion</span><span class="op" id="2766971">,</span>&nbsp;<span class="comment" id="2766973">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2766995">byte</span><span class="op" id="2766999">(</span><span class="ident" id="2767000">t</span><span class="op" id="2767001">.</span><span class="ident" id="2767002">sec</span>&nbsp;<span class="op" id="2767006">&gt;&gt;</span>&nbsp;<span class="num" id="2767009">56</span><span class="op" id="2767011">)</span><span class="op" id="2767012">,</span>&nbsp;<span class="comment" id="2767014">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767038">byte</span><span class="op" id="2767042">(</span><span class="ident" id="2767043">t</span><span class="op" id="2767044">.</span><span class="ident" id="2767045">sec</span>&nbsp;<span class="op" id="2767049">&gt;&gt;</span>&nbsp;<span class="num" id="2767052">48</span><span class="op" id="2767054">)</span><span class="op" id="2767055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767059">byte</span><span class="op" id="2767063">(</span><span class="ident" id="2767064">t</span><span class="op" id="2767065">.</span><span class="ident" id="2767066">sec</span>&nbsp;<span class="op" id="2767070">&gt;&gt;</span>&nbsp;<span class="num" id="2767073">40</span><span class="op" id="2767075">)</span><span class="op" id="2767076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767080">byte</span><span class="op" id="2767084">(</span><span class="ident" id="2767085">t</span><span class="op" id="2767086">.</span><span class="ident" id="2767087">sec</span>&nbsp;<span class="op" id="2767091">&gt;&gt;</span>&nbsp;<span class="num" id="2767094">32</span><span class="op" id="2767096">)</span><span class="op" id="2767097">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767101">byte</span><span class="op" id="2767105">(</span><span class="ident" id="2767106">t</span><span class="op" id="2767107">.</span><span class="ident" id="2767108">sec</span>&nbsp;<span class="op" id="2767112">&gt;&gt;</span>&nbsp;<span class="num" id="2767115">24</span><span class="op" id="2767117">)</span><span class="op" id="2767118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767122">byte</span><span class="op" id="2767126">(</span><span class="ident" id="2767127">t</span><span class="op" id="2767128">.</span><span class="ident" id="2767129">sec</span>&nbsp;<span class="op" id="2767133">&gt;&gt;</span>&nbsp;<span class="num" id="2767136">16</span><span class="op" id="2767138">)</span><span class="op" id="2767139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767143">byte</span><span class="op" id="2767147">(</span><span class="ident" id="2767148">t</span><span class="op" id="2767149">.</span><span class="ident" id="2767150">sec</span>&nbsp;<span class="op" id="2767154">&gt;&gt;</span>&nbsp;<span class="num" id="2767157">8</span><span class="op" id="2767158">)</span><span class="op" id="2767159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767163">byte</span><span class="op" id="2767167">(</span><span class="ident" id="2767168">t</span><span class="op" id="2767169">.</span><span class="ident" id="2767170">sec</span><span class="op" id="2767173">)</span><span class="op" id="2767174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767178">byte</span><span class="op" id="2767182">(</span><span class="ident" id="2767183">t</span><span class="op" id="2767184">.</span><span class="ident" id="2767185">nsec</span>&nbsp;<span class="op" id="2767190">&gt;&gt;</span>&nbsp;<span class="num" id="2767193">24</span><span class="op" id="2767195">)</span><span class="op" id="2767196">,</span>&nbsp;<span class="comment" id="2767198">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767227">byte</span><span class="op" id="2767231">(</span><span class="ident" id="2767232">t</span><span class="op" id="2767233">.</span><span class="ident" id="2767234">nsec</span>&nbsp;<span class="op" id="2767239">&gt;&gt;</span>&nbsp;<span class="num" id="2767242">16</span><span class="op" id="2767244">)</span><span class="op" id="2767245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767249">byte</span><span class="op" id="2767253">(</span><span class="ident" id="2767254">t</span><span class="op" id="2767255">.</span><span class="ident" id="2767256">nsec</span>&nbsp;<span class="op" id="2767261">&gt;&gt;</span>&nbsp;<span class="num" id="2767264">8</span><span class="op" id="2767265">)</span><span class="op" id="2767266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767270">byte</span><span class="op" id="2767274">(</span><span class="ident" id="2767275">t</span><span class="op" id="2767276">.</span><span class="ident" id="2767277">nsec</span><span class="op" id="2767281">)</span><span class="op" id="2767282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767286">byte</span><span class="op" id="2767290">(</span><span class="ident" id="2767291">offsetMin</span>&nbsp;<span class="op" id="2767301">&gt;&gt;</span>&nbsp;<span class="num" id="2767304">8</span><span class="op" id="2767305">)</span><span class="op" id="2767306">,</span>&nbsp;<span class="comment" id="2767308">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2767349">byte</span><span class="op" id="2767353">(</span><span class="ident" id="2767354">offsetMin</span><span class="op" id="2767363">)</span><span class="op" id="2767364">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767371">return</span>&nbsp;<span class="ident" id="2767378">enc</span><span class="op" id="2767381">,</span>&nbsp;<span class="ident" id="2767383">nil</span><br>
<span class="lineno"></span><span class="op" id="2767387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2767390">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2767462">func</span>&nbsp;<span class="op" id="2767467">(</span><span class="ident" id="2767468">t</span>&nbsp;<span class="op" id="2767470">*</span><span class="ident" id="2767471">Time</span><span class="op" id="2767475">)</span>&nbsp;<span class="ident" id="2767477">UnmarshalBinary</span><span class="op" id="2767492">(</span><span class="ident" id="2767493">data</span>&nbsp;<span class="op" id="2767498">[</span><span class="op" id="2767499">]</span><span class="builtintype" id="2767500">byte</span><span class="op" id="2767504">)</span>&nbsp;<span class="builtintype" id="2767506">error</span>&nbsp;<span class="op" id="2767512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767515">buf</span>&nbsp;<span class="op" id="2767519">:=</span>&nbsp;<span class="ident" id="2767522">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767528">if</span>&nbsp;<span class="builtinfunc" id="2767531">len</span><span class="op" id="2767534">(</span><span class="ident" id="2767535">buf</span><span class="op" id="2767538">)</span>&nbsp;<span class="op" id="2767540">==</span>&nbsp;<span class="num" id="2767543">0</span>&nbsp;<span class="op" id="2767545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767549">return</span>&nbsp;<span class="ident" id="2767556">errors</span><span class="op" id="2767562">.</span><span class="ident" id="2767563">New</span><span class="op" id="2767566">(</span><span class="string" id="2767567">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2767598">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767605">if</span>&nbsp;<span class="ident" id="2767608">buf</span><span class="op" id="2767611">[</span><span class="num" id="2767612">0</span><span class="op" id="2767613">]</span>&nbsp;<span class="op" id="2767615">!=</span>&nbsp;<span class="ident" id="2767618">timeBinaryVersion</span>&nbsp;<span class="op" id="2767636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767640">return</span>&nbsp;<span class="ident" id="2767647">errors</span><span class="op" id="2767653">.</span><span class="ident" id="2767654">New</span><span class="op" id="2767657">(</span><span class="string" id="2767658">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2767701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767704">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767708">if</span>&nbsp;<span class="builtinfunc" id="2767711">len</span><span class="op" id="2767714">(</span><span class="ident" id="2767715">buf</span><span class="op" id="2767718">)</span>&nbsp;<span class="op" id="2767720">!=</span>&nbsp;<span class="comment" id="2767723">/*version*/</span>&nbsp;<span class="num" id="2767735">1</span><span class="op" id="2767736">+</span>&nbsp;<span class="comment" id="2767738">/*sec*/</span>&nbsp;<span class="num" id="2767746">8</span><span class="op" id="2767747">+</span>&nbsp;<span class="comment" id="2767749">/*nsec*/</span>&nbsp;<span class="num" id="2767758">4</span><span class="op" id="2767759">+</span>&nbsp;<span class="comment" id="2767761">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2767777">2</span>&nbsp;<span class="op" id="2767779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767783">return</span>&nbsp;<span class="ident" id="2767790">errors</span><span class="op" id="2767796">.</span><span class="ident" id="2767797">New</span><span class="op" id="2767800">(</span><span class="string" id="2767801">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2767839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767846">buf</span>&nbsp;<span class="op" id="2767850">=</span>&nbsp;<span class="ident" id="2767852">buf</span><span class="op" id="2767855">[</span><span class="num" id="2767856">1</span><span class="op" id="2767857">:</span><span class="op" id="2767858">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767861">t</span><span class="op" id="2767862">.</span><span class="ident" id="2767863">sec</span>&nbsp;<span class="op" id="2767867">=</span>&nbsp;<span class="ident" id="2767869">int64</span><span class="op" id="2767874">(</span><span class="ident" id="2767875">buf</span><span class="op" id="2767878">[</span><span class="num" id="2767879">7</span><span class="op" id="2767880">]</span><span class="op" id="2767881">)</span>&nbsp;<span class="op" id="2767883">|</span>&nbsp;<span class="ident" id="2767885">int64</span><span class="op" id="2767890">(</span><span class="ident" id="2767891">buf</span><span class="op" id="2767894">[</span><span class="num" id="2767895">6</span><span class="op" id="2767896">]</span><span class="op" id="2767897">)</span><span class="op" id="2767898">&lt;&lt;</span><span class="num" id="2767900">8</span>&nbsp;<span class="op" id="2767902">|</span>&nbsp;<span class="ident" id="2767904">int64</span><span class="op" id="2767909">(</span><span class="ident" id="2767910">buf</span><span class="op" id="2767913">[</span><span class="num" id="2767914">5</span><span class="op" id="2767915">]</span><span class="op" id="2767916">)</span><span class="op" id="2767917">&lt;&lt;</span><span class="num" id="2767919">16</span>&nbsp;<span class="op" id="2767922">|</span>&nbsp;<span class="ident" id="2767924">int64</span><span class="op" id="2767929">(</span><span class="ident" id="2767930">buf</span><span class="op" id="2767933">[</span><span class="num" id="2767934">4</span><span class="op" id="2767935">]</span><span class="op" id="2767936">)</span><span class="op" id="2767937">&lt;&lt;</span><span class="num" id="2767939">24</span>&nbsp;<span class="op" id="2767942">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767946">int64</span><span class="op" id="2767951">(</span><span class="ident" id="2767952">buf</span><span class="op" id="2767955">[</span><span class="num" id="2767956">3</span><span class="op" id="2767957">]</span><span class="op" id="2767958">)</span><span class="op" id="2767959">&lt;&lt;</span><span class="num" id="2767961">32</span>&nbsp;<span class="op" id="2767964">|</span>&nbsp;<span class="ident" id="2767966">int64</span><span class="op" id="2767971">(</span><span class="ident" id="2767972">buf</span><span class="op" id="2767975">[</span><span class="num" id="2767976">2</span><span class="op" id="2767977">]</span><span class="op" id="2767978">)</span><span class="op" id="2767979">&lt;&lt;</span><span class="num" id="2767981">40</span>&nbsp;<span class="op" id="2767984">|</span>&nbsp;<span class="ident" id="2767986">int64</span><span class="op" id="2767991">(</span><span class="ident" id="2767992">buf</span><span class="op" id="2767995">[</span><span class="num" id="2767996">1</span><span class="op" id="2767997">]</span><span class="op" id="2767998">)</span><span class="op" id="2767999">&lt;&lt;</span><span class="num" id="2768001">48</span>&nbsp;<span class="op" id="2768004">|</span>&nbsp;<span class="ident" id="2768006">int64</span><span class="op" id="2768011">(</span><span class="ident" id="2768012">buf</span><span class="op" id="2768015">[</span><span class="num" id="2768016">0</span><span class="op" id="2768017">]</span><span class="op" id="2768018">)</span><span class="op" id="2768019">&lt;&lt;</span><span class="num" id="2768021">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768026">buf</span>&nbsp;<span class="op" id="2768030">=</span>&nbsp;<span class="ident" id="2768032">buf</span><span class="op" id="2768035">[</span><span class="num" id="2768036">8</span><span class="op" id="2768037">:</span><span class="op" id="2768038">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768041">t</span><span class="op" id="2768042">.</span><span class="ident" id="2768043">nsec</span>&nbsp;<span class="op" id="2768048">=</span>&nbsp;<span class="builtintype" id="2768050">int32</span><span class="op" id="2768055">(</span><span class="ident" id="2768056">buf</span><span class="op" id="2768059">[</span><span class="num" id="2768060">3</span><span class="op" id="2768061">]</span><span class="op" id="2768062">)</span>&nbsp;<span class="op" id="2768064">|</span>&nbsp;<span class="builtintype" id="2768066">int32</span><span class="op" id="2768071">(</span><span class="ident" id="2768072">buf</span><span class="op" id="2768075">[</span><span class="num" id="2768076">2</span><span class="op" id="2768077">]</span><span class="op" id="2768078">)</span><span class="op" id="2768079">&lt;&lt;</span><span class="num" id="2768081">8</span>&nbsp;<span class="op" id="2768083">|</span>&nbsp;<span class="builtintype" id="2768085">int32</span><span class="op" id="2768090">(</span><span class="ident" id="2768091">buf</span><span class="op" id="2768094">[</span><span class="num" id="2768095">1</span><span class="op" id="2768096">]</span><span class="op" id="2768097">)</span><span class="op" id="2768098">&lt;&lt;</span><span class="num" id="2768100">16</span>&nbsp;<span class="op" id="2768103">|</span>&nbsp;<span class="builtintype" id="2768105">int32</span><span class="op" id="2768110">(</span><span class="ident" id="2768111">buf</span><span class="op" id="2768114">[</span><span class="num" id="2768115">0</span><span class="op" id="2768116">]</span><span class="op" id="2768117">)</span><span class="op" id="2768118">&lt;&lt;</span><span class="num" id="2768120">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768125">buf</span>&nbsp;<span class="op" id="2768129">=</span>&nbsp;<span class="ident" id="2768131">buf</span><span class="op" id="2768134">[</span><span class="num" id="2768135">4</span><span class="op" id="2768136">:</span><span class="op" id="2768137">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768140">offset</span>&nbsp;<span class="op" id="2768147">:=</span>&nbsp;<span class="builtintype" id="2768150">int</span><span class="op" id="2768153">(</span><span class="builtintype" id="2768154">int16</span><span class="op" id="2768159">(</span><span class="ident" id="2768160">buf</span><span class="op" id="2768163">[</span><span class="num" id="2768164">1</span><span class="op" id="2768165">]</span><span class="op" id="2768166">)</span><span class="op" id="2768167">|</span><span class="builtintype" id="2768168">int16</span><span class="op" id="2768173">(</span><span class="ident" id="2768174">buf</span><span class="op" id="2768177">[</span><span class="num" id="2768178">0</span><span class="op" id="2768179">]</span><span class="op" id="2768180">)</span><span class="op" id="2768181">&lt;&lt;</span><span class="num" id="2768183">8</span><span class="op" id="2768184">)</span>&nbsp;<span class="op" id="2768186">*</span>&nbsp;<span class="num" id="2768188">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768193">if</span>&nbsp;<span class="ident" id="2768196">offset</span>&nbsp;<span class="op" id="2768203">==</span>&nbsp;<span class="op" id="2768206">-</span><span class="num" id="2768207">1</span><span class="op" id="2768208">*</span><span class="num" id="2768209">60</span>&nbsp;<span class="op" id="2768212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768216">t</span><span class="op" id="2768217">.</span><span class="ident" id="2768218">loc</span>&nbsp;<span class="op" id="2768222">=</span>&nbsp;<span class="op" id="2768224">&amp;</span><span class="ident" id="2768225">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768233">}</span>&nbsp;<span class="keyword" id="2768235">else</span>&nbsp;<span class="keyword" id="2768240">if</span>&nbsp;<span class="ident" id="2768243">_</span><span class="op" id="2768244">,</span>&nbsp;<span class="ident" id="2768246">localoff</span><span class="op" id="2768254">,</span>&nbsp;<span class="ident" id="2768256">_</span><span class="op" id="2768257">,</span>&nbsp;<span class="ident" id="2768259">_</span><span class="op" id="2768260">,</span>&nbsp;<span class="ident" id="2768262">_</span>&nbsp;<span class="op" id="2768264">:=</span>&nbsp;<span class="ident" id="2768267">Local</span><span class="op" id="2768272">.</span><span class="ident" id="2768273">lookup</span><span class="op" id="2768279">(</span><span class="ident" id="2768280">t</span><span class="op" id="2768281">.</span><span class="ident" id="2768282">sec</span>&nbsp;<span class="op" id="2768286">+</span>&nbsp;<span class="ident" id="2768288">internalToUnix</span><span class="op" id="2768302">)</span><span class="op" id="2768303">;</span>&nbsp;<span class="ident" id="2768305">offset</span>&nbsp;<span class="op" id="2768312">==</span>&nbsp;<span class="ident" id="2768315">localoff</span>&nbsp;<span class="op" id="2768324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768328">t</span><span class="op" id="2768329">.</span><span class="ident" id="2768330">loc</span>&nbsp;<span class="op" id="2768334">=</span>&nbsp;<span class="ident" id="2768336">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768343">}</span>&nbsp;<span class="keyword" id="2768345">else</span>&nbsp;<span class="op" id="2768350">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768354">t</span><span class="op" id="2768355">.</span><span class="ident" id="2768356">loc</span>&nbsp;<span class="op" id="2768360">=</span>&nbsp;<span class="ident" id="2768362">FixedZone</span><span class="op" id="2768371">(</span><span class="string" id="2768372">&#34;&#34;</span><span class="op" id="2768374">,</span>&nbsp;<span class="ident" id="2768376">offset</span><span class="op" id="2768382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768389">return</span>&nbsp;<span class="ident" id="2768396">nil</span><br>
<span class="lineno"></span><span class="op" id="2768400">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2768403">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2768484">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2768566">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2768602">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2768656">func</span>&nbsp;<span class="op" id="2768661">(</span><span class="ident" id="2768662">t</span>&nbsp;<span class="ident" id="2768664">Time</span><span class="op" id="2768668">)</span>&nbsp;<span class="ident" id="2768670">GobEncode</span><span class="op" id="2768679">(</span><span class="op" id="2768680">)</span>&nbsp;<span class="op" id="2768682">(</span><span class="op" id="2768683">[</span><span class="op" id="2768684">]</span><span class="builtintype" id="2768685">byte</span><span class="op" id="2768689">,</span>&nbsp;<span class="builtintype" id="2768691">error</span><span class="op" id="2768696">)</span>&nbsp;<span class="op" id="2768698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768701">return</span>&nbsp;<span class="ident" id="2768708">t</span><span class="op" id="2768709">.</span><span class="ident" id="2768710">MarshalBinary</span><span class="op" id="2768723">(</span><span class="op" id="2768724">)</span><br>
<span class="lineno"></span><span class="op" id="2768726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2768729">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2768783">func</span>&nbsp;<span class="op" id="2768788">(</span><span class="ident" id="2768789">t</span>&nbsp;<span class="op" id="2768791">*</span><span class="ident" id="2768792">Time</span><span class="op" id="2768796">)</span>&nbsp;<span class="ident" id="2768798">GobDecode</span><span class="op" id="2768807">(</span><span class="ident" id="2768808">data</span>&nbsp;<span class="op" id="2768813">[</span><span class="op" id="2768814">]</span><span class="builtintype" id="2768815">byte</span><span class="op" id="2768819">)</span>&nbsp;<span class="builtintype" id="2768821">error</span>&nbsp;<span class="op" id="2768827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768830">return</span>&nbsp;<span class="ident" id="2768837">t</span><span class="op" id="2768838">.</span><span class="ident" id="2768839">UnmarshalBinary</span><span class="op" id="2768854">(</span><span class="ident" id="2768855">data</span><span class="op" id="2768859">)</span><br>
<span class="lineno"></span><span class="op" id="2768861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2768864">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2768920">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2769015">func</span>&nbsp;<span class="op" id="2769020">(</span><span class="ident" id="2769021">t</span>&nbsp;<span class="ident" id="2769023">Time</span><span class="op" id="2769027">)</span>&nbsp;<span class="ident" id="2769029">MarshalJSON</span><span class="op" id="2769040">(</span><span class="op" id="2769041">)</span>&nbsp;<span class="op" id="2769043">(</span><span class="op" id="2769044">[</span><span class="op" id="2769045">]</span><span class="builtintype" id="2769046">byte</span><span class="op" id="2769050">,</span>&nbsp;<span class="builtintype" id="2769052">error</span><span class="op" id="2769057">)</span>&nbsp;<span class="op" id="2769059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769062">if</span>&nbsp;<span class="ident" id="2769065">y</span>&nbsp;<span class="op" id="2769067">:=</span>&nbsp;<span class="ident" id="2769070">t</span><span class="op" id="2769071">.</span><span class="ident" id="2769072">Year</span><span class="op" id="2769076">(</span><span class="op" id="2769077">)</span><span class="op" id="2769078">;</span>&nbsp;<span class="ident" id="2769080">y</span>&nbsp;<span class="op" id="2769082">&lt;</span>&nbsp;<span class="num" id="2769084">0</span>&nbsp;<span class="op" id="2769086">||</span>&nbsp;<span class="ident" id="2769089">y</span>&nbsp;<span class="op" id="2769091">&gt;=</span>&nbsp;<span class="num" id="2769094">10000</span>&nbsp;<span class="op" id="2769100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769104">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769160">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769216">return</span>&nbsp;<span class="ident" id="2769223">nil</span><span class="op" id="2769226">,</span>&nbsp;<span class="ident" id="2769228">errors</span><span class="op" id="2769234">.</span><span class="ident" id="2769235">New</span><span class="op" id="2769238">(</span><span class="string" id="2769239">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2769289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769295">return</span>&nbsp;<span class="op" id="2769302">[</span><span class="op" id="2769303">]</span><span class="builtintype" id="2769304">byte</span><span class="op" id="2769308">(</span><span class="ident" id="2769309">t</span><span class="op" id="2769310">.</span><span class="ident" id="2769311">Format</span><span class="op" id="2769317">(</span><span class="string" id="2769318">`&#34;`</span>&nbsp;<span class="op" id="2769322">+</span>&nbsp;<span class="ident" id="2769324">RFC3339Nano</span>&nbsp;<span class="op" id="2769336">+</span>&nbsp;<span class="string" id="2769338">`&#34;`</span><span class="op" id="2769341">)</span><span class="op" id="2769342">)</span><span class="op" id="2769343">,</span>&nbsp;<span class="ident" id="2769345">nil</span><br>
<span class="lineno"></span><span class="op" id="2769349">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2769352">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2769412">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2769478">func</span>&nbsp;<span class="op" id="2769483">(</span><span class="ident" id="2769484">t</span>&nbsp;<span class="op" id="2769486">*</span><span class="ident" id="2769487">Time</span><span class="op" id="2769491">)</span>&nbsp;<span class="ident" id="2769493">UnmarshalJSON</span><span class="op" id="2769506">(</span><span class="ident" id="2769507">data</span>&nbsp;<span class="op" id="2769512">[</span><span class="op" id="2769513">]</span><span class="builtintype" id="2769514">byte</span><span class="op" id="2769518">)</span>&nbsp;<span class="op" id="2769520">(</span><span class="ident" id="2769521">err</span>&nbsp;<span class="builtintype" id="2769525">error</span><span class="op" id="2769530">)</span>&nbsp;<span class="op" id="2769532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769535">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769591">*</span><span class="ident" id="2769592">t</span><span class="op" id="2769593">,</span>&nbsp;<span class="ident" id="2769595">err</span>&nbsp;<span class="op" id="2769599">=</span>&nbsp;<span class="ident" id="2769601">Parse</span><span class="op" id="2769606">(</span><span class="string" id="2769607">`&#34;`</span><span class="op" id="2769610">+</span><span class="ident" id="2769611">RFC3339</span><span class="op" id="2769618">+</span><span class="string" id="2769619">`&#34;`</span><span class="op" id="2769622">,</span>&nbsp;<span class="builtintype" id="2769624">string</span><span class="op" id="2769630">(</span><span class="ident" id="2769631">data</span><span class="op" id="2769635">)</span><span class="op" id="2769636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769639">return</span><br>
<span class="lineno"></span><span class="op" id="2769646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769649">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2769713">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2769802">func</span>&nbsp;<span class="op" id="2769807">(</span><span class="ident" id="2769808">t</span>&nbsp;<span class="ident" id="2769810">Time</span><span class="op" id="2769814">)</span>&nbsp;<span class="ident" id="2769816">MarshalText</span><span class="op" id="2769827">(</span><span class="op" id="2769828">)</span>&nbsp;<span class="op" id="2769830">(</span><span class="op" id="2769831">[</span><span class="op" id="2769832">]</span><span class="builtintype" id="2769833">byte</span><span class="op" id="2769837">,</span>&nbsp;<span class="builtintype" id="2769839">error</span><span class="op" id="2769844">)</span>&nbsp;<span class="op" id="2769846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769849">if</span>&nbsp;<span class="ident" id="2769852">y</span>&nbsp;<span class="op" id="2769854">:=</span>&nbsp;<span class="ident" id="2769857">t</span><span class="op" id="2769858">.</span><span class="ident" id="2769859">Year</span><span class="op" id="2769863">(</span><span class="op" id="2769864">)</span><span class="op" id="2769865">;</span>&nbsp;<span class="ident" id="2769867">y</span>&nbsp;<span class="op" id="2769869">&lt;</span>&nbsp;<span class="num" id="2769871">0</span>&nbsp;<span class="op" id="2769873">||</span>&nbsp;<span class="ident" id="2769876">y</span>&nbsp;<span class="op" id="2769878">&gt;=</span>&nbsp;<span class="num" id="2769881">10000</span>&nbsp;<span class="op" id="2769887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769891">return</span>&nbsp;<span class="ident" id="2769898">nil</span><span class="op" id="2769901">,</span>&nbsp;<span class="ident" id="2769903">errors</span><span class="op" id="2769909">.</span><span class="ident" id="2769910">New</span><span class="op" id="2769913">(</span><span class="string" id="2769914">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2769964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769967">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769970">return</span>&nbsp;<span class="op" id="2769977">[</span><span class="op" id="2769978">]</span><span class="builtintype" id="2769979">byte</span><span class="op" id="2769983">(</span><span class="ident" id="2769984">t</span><span class="op" id="2769985">.</span><span class="ident" id="2769986">Format</span><span class="op" id="2769992">(</span><span class="ident" id="2769993">RFC3339Nano</span><span class="op" id="2770004">)</span><span class="op" id="2770005">)</span><span class="op" id="2770006">,</span>&nbsp;<span class="ident" id="2770008">nil</span><br>
<span class="lineno"></span><span class="op" id="2770012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770015">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2770083">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2770133">func</span>&nbsp;<span class="op" id="2770138">(</span><span class="ident" id="2770139">t</span>&nbsp;<span class="op" id="2770141">*</span><span class="ident" id="2770142">Time</span><span class="op" id="2770146">)</span>&nbsp;<span class="ident" id="2770148">UnmarshalText</span><span class="op" id="2770161">(</span><span class="ident" id="2770162">data</span>&nbsp;<span class="op" id="2770167">[</span><span class="op" id="2770168">]</span><span class="builtintype" id="2770169">byte</span><span class="op" id="2770173">)</span>&nbsp;<span class="op" id="2770175">(</span><span class="ident" id="2770176">err</span>&nbsp;<span class="builtintype" id="2770180">error</span><span class="op" id="2770185">)</span>&nbsp;<span class="op" id="2770187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770190">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770246">*</span><span class="ident" id="2770247">t</span><span class="op" id="2770248">,</span>&nbsp;<span class="ident" id="2770250">err</span>&nbsp;<span class="op" id="2770254">=</span>&nbsp;<span class="ident" id="2770256">Parse</span><span class="op" id="2770261">(</span><span class="ident" id="2770262">RFC3339</span><span class="op" id="2770269">,</span>&nbsp;<span class="builtintype" id="2770271">string</span><span class="op" id="2770277">(</span><span class="ident" id="2770278">data</span><span class="op" id="2770282">)</span><span class="op" id="2770283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770286">return</span><br>
<span class="lineno"></span><span class="op" id="2770293">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2770296">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2770365">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2770428">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2770490">func</span>&nbsp;<span class="ident" id="2770495">Unix</span><span class="op" id="2770499">(</span><span class="ident" id="2770500">sec</span>&nbsp;<span class="ident" id="2770504">int64</span><span class="op" id="2770509">,</span>&nbsp;<span class="ident" id="2770511">nsec</span>&nbsp;<span class="ident" id="2770516">int64</span><span class="op" id="2770521">)</span>&nbsp;<span class="ident" id="2770523">Time</span>&nbsp;<span class="op" id="2770528">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770531">if</span>&nbsp;<span class="ident" id="2770534">nsec</span>&nbsp;<span class="op" id="2770539">&lt;</span>&nbsp;<span class="num" id="2770541">0</span>&nbsp;<span class="op" id="2770543">||</span>&nbsp;<span class="ident" id="2770546">nsec</span>&nbsp;<span class="op" id="2770551">&gt;=</span>&nbsp;<span class="num" id="2770554">1e9</span>&nbsp;<span class="op" id="2770558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770562">n</span>&nbsp;<span class="op" id="2770564">:=</span>&nbsp;<span class="ident" id="2770567">nsec</span>&nbsp;<span class="op" id="2770572">/</span>&nbsp;<span class="num" id="2770574">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770580">sec</span>&nbsp;<span class="op" id="2770584">+=</span>&nbsp;<span class="ident" id="2770587">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770591">nsec</span>&nbsp;<span class="op" id="2770596">-=</span>&nbsp;<span class="ident" id="2770599">n</span>&nbsp;<span class="op" id="2770601">*</span>&nbsp;<span class="num" id="2770603">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770609">if</span>&nbsp;<span class="ident" id="2770612">nsec</span>&nbsp;<span class="op" id="2770617">&lt;</span>&nbsp;<span class="num" id="2770619">0</span>&nbsp;<span class="op" id="2770621">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770626">nsec</span>&nbsp;<span class="op" id="2770631">+=</span>&nbsp;<span class="num" id="2770634">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770641">sec</span><span class="op" id="2770644">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770655">return</span>&nbsp;<span class="ident" id="2770662">Time</span><span class="op" id="2770666">{</span><span class="ident" id="2770667">sec</span>&nbsp;<span class="op" id="2770671">+</span>&nbsp;<span class="ident" id="2770673">unixToInternal</span><span class="op" id="2770687">,</span>&nbsp;<span class="builtintype" id="2770689">int32</span><span class="op" id="2770694">(</span><span class="ident" id="2770695">nsec</span><span class="op" id="2770699">)</span><span class="op" id="2770700">,</span>&nbsp;<span class="ident" id="2770702">Local</span><span class="op" id="2770707">}</span><br>
<span class="lineno">980</span><span class="op" id="2770709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2770712">func</span>&nbsp;<span class="ident" id="2770717">isLeap</span><span class="op" id="2770723">(</span><span class="ident" id="2770724">year</span>&nbsp;<span class="builtintype" id="2770729">int</span><span class="op" id="2770732">)</span>&nbsp;<span class="builtintype" id="2770734">bool</span>&nbsp;<span class="op" id="2770739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770742">return</span>&nbsp;<span class="ident" id="2770749">year</span><span class="op" id="2770753">%</span><span class="num" id="2770754">4</span>&nbsp;<span class="op" id="2770756">==</span>&nbsp;<span class="num" id="2770759">0</span>&nbsp;<span class="op" id="2770761">&amp;&amp;</span>&nbsp;<span class="op" id="2770764">(</span><span class="ident" id="2770765">year</span><span class="op" id="2770769">%</span><span class="num" id="2770770">100</span>&nbsp;<span class="op" id="2770774">!=</span>&nbsp;<span class="num" id="2770777">0</span>&nbsp;<span class="op" id="2770779">||</span>&nbsp;<span class="ident" id="2770782">year</span><span class="op" id="2770786">%</span><span class="num" id="2770787">400</span>&nbsp;<span class="op" id="2770791">==</span>&nbsp;<span class="num" id="2770794">0</span><span class="op" id="2770795">)</span><br>
<span class="lineno"></span><span class="op" id="2770797">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2770800">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2770835">//&nbsp;&nbsp;&nbsp;&nbsphi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2770873">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2770892">func</span>&nbsp;<span class="ident" id="2770897">norm</span><span class="op" id="2770901">(</span><span class="ident" id="2770902">hi</span><span class="op" id="2770904">,</span>&nbsp;<span class="ident" id="2770906">lo</span><span class="op" id="2770908">,</span>&nbsp;<span class="ident" id="2770910">base</span>&nbsp;<span class="builtintype" id="2770915">int</span><span class="op" id="2770918">)</span>&nbsp;<span class="op" id="2770920">(</span><span class="ident" id="2770921">nhi</span><span class="op" id="2770924">,</span>&nbsp;<span class="ident" id="2770926">nlo</span>&nbsp;<span class="builtintype" id="2770930">int</span><span class="op" id="2770933">)</span>&nbsp;<span class="op" id="2770935">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770938">if</span>&nbsp;<span class="ident" id="2770941">lo</span>&nbsp;<span class="op" id="2770944">&lt;</span>&nbsp;<span class="num" id="2770946">0</span>&nbsp;<span class="op" id="2770948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770952">n</span>&nbsp;<span class="op" id="2770954">:=</span>&nbsp;<span class="op" id="2770957">(</span><span class="op" id="2770958">-</span><span class="ident" id="2770959">lo</span><span class="op" id="2770961">-</span><span class="num" id="2770962">1</span><span class="op" id="2770963">)</span><span class="op" id="2770964">/</span><span class="ident" id="2770965">base</span>&nbsp;<span class="op" id="2770970">+</span>&nbsp;<span class="num" id="2770972">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770976">hi</span>&nbsp;<span class="op" id="2770979">-=</span>&nbsp;<span class="ident" id="2770982">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770986">lo</span>&nbsp;<span class="op" id="2770989">+=</span>&nbsp;<span class="ident" id="2770992">n</span>&nbsp;<span class="op" id="2770994">*</span>&nbsp;<span class="ident" id="2770996">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2771002">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771005">if</span>&nbsp;<span class="ident" id="2771008">lo</span>&nbsp;<span class="op" id="2771011">&gt;=</span>&nbsp;<span class="ident" id="2771014">base</span>&nbsp;<span class="op" id="2771019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771023">n</span>&nbsp;<span class="op" id="2771025">:=</span>&nbsp;<span class="ident" id="2771028">lo</span>&nbsp;<span class="op" id="2771031">/</span>&nbsp;<span class="ident" id="2771033">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771040">hi</span>&nbsp;<span class="op" id="2771043">+=</span>&nbsp;<span class="ident" id="2771046">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771050">lo</span>&nbsp;<span class="op" id="2771053">-=</span>&nbsp;<span class="ident" id="2771056">n</span>&nbsp;<span class="op" id="2771058">*</span>&nbsp;<span class="ident" id="2771060">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2771066">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771069">return</span>&nbsp;<span class="ident" id="2771076">hi</span><span class="op" id="2771078">,</span>&nbsp;<span class="ident" id="2771080">lo</span><br>
<span class="lineno"></span><span class="op" id="2771083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2771086">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2771128">//&nbsp;&nbsp;&nbsp;&nbspyyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2771170">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2771234">//</span><br>
<span class="lineno"></span><span class="comment" id="2771237">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2771303">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2771371">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2771422">//</span><br>
<span class="lineno"></span><span class="comment" id="2771425">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2771487">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2771563">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2771632">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2771701">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2771773">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2771828">//</span><br>
<span class="lineno"></span><span class="comment" id="2771831">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2771861">func</span>&nbsp;<span class="ident" id="2771866">Date</span><span class="op" id="2771870">(</span><span class="ident" id="2771871">year</span>&nbsp;<span class="builtintype" id="2771876">int</span><span class="op" id="2771879">,</span>&nbsp;<span class="ident" id="2771881">month</span>&nbsp;<span class="ident" id="2771887">Month</span><span class="op" id="2771892">,</span>&nbsp;<span class="ident" id="2771894">day</span><span class="op" id="2771897">,</span>&nbsp;<span class="ident" id="2771899">hour</span><span class="op" id="2771903">,</span>&nbsp;<span class="ident" id="2771905">min</span><span class="op" id="2771908">,</span>&nbsp;<span class="ident" id="2771910">sec</span><span class="op" id="2771913">,</span>&nbsp;<span class="ident" id="2771915">nsec</span>&nbsp;<span class="builtintype" id="2771920">int</span><span class="op" id="2771923">,</span>&nbsp;<span class="ident" id="2771925">loc</span>&nbsp;<span class="op" id="2771929">*</span><span class="ident" id="2771930">Location</span><span class="op" id="2771938">)</span>&nbsp;<span class="ident" id="2771940">Time</span>&nbsp;<span class="op" id="2771945">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771948">if</span>&nbsp;<span class="ident" id="2771951">loc</span>&nbsp;<span class="op" id="2771955">==</span>&nbsp;<span class="ident" id="2771958">nil</span>&nbsp;<span class="op" id="2771962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2771966">panic</span><span class="op" id="2771971">(</span><span class="string" id="2771972">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2772012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772019">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772063">m</span>&nbsp;<span class="op" id="2772065">:=</span>&nbsp;<span class="builtintype" id="2772068">int</span><span class="op" id="2772071">(</span><span class="ident" id="2772072">month</span><span class="op" id="2772077">)</span>&nbsp;<span class="op" id="2772079">-</span>&nbsp;<span class="num" id="2772081">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772084">year</span><span class="op" id="2772088">,</span>&nbsp;<span class="ident" id="2772090">m</span>&nbsp;<span class="op" id="2772092">=</span>&nbsp;<span class="ident" id="2772094">norm</span><span class="op" id="2772098">(</span><span class="ident" id="2772099">year</span><span class="op" id="2772103">,</span>&nbsp;<span class="ident" id="2772105">m</span><span class="op" id="2772106">,</span>&nbsp;<span class="num" id="2772108">12</span><span class="op" id="2772110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772113">month</span>&nbsp;<span class="op" id="2772119">=</span>&nbsp;<span class="ident" id="2772121">Month</span><span class="op" id="2772126">(</span><span class="ident" id="2772127">m</span><span class="op" id="2772128">)</span>&nbsp;<span class="op" id="2772130">+</span>&nbsp;<span class="num" id="2772132">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772136">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772194">sec</span><span class="op" id="2772197">,</span>&nbsp;<span class="ident" id="2772199">nsec</span>&nbsp;<span class="op" id="2772204">=</span>&nbsp;<span class="ident" id="2772206">norm</span><span class="op" id="2772210">(</span><span class="ident" id="2772211">sec</span><span class="op" id="2772214">,</span>&nbsp;<span class="ident" id="2772216">nsec</span><span class="op" id="2772220">,</span>&nbsp;<span class="num" id="2772222">1e9</span><span class="op" id="2772225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772228">min</span><span class="op" id="2772231">,</span>&nbsp;<span class="ident" id="2772233">sec</span>&nbsp;<span class="op" id="2772237">=</span>&nbsp;<span class="ident" id="2772239">norm</span><span class="op" id="2772243">(</span><span class="ident" id="2772244">min</span><span class="op" id="2772247">,</span>&nbsp;<span class="ident" id="2772249">sec</span><span class="op" id="2772252">,</span>&nbsp;<span class="num" id="2772254">60</span><span class="op" id="2772256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772259">hour</span><span class="op" id="2772263">,</span>&nbsp;<span class="ident" id="2772265">min</span>&nbsp;<span class="op" id="2772269">=</span>&nbsp;<span class="ident" id="2772271">norm</span><span class="op" id="2772275">(</span><span class="ident" id="2772276">hour</span><span class="op" id="2772280">,</span>&nbsp;<span class="ident" id="2772282">min</span><span class="op" id="2772285">,</span>&nbsp;<span class="num" id="2772287">60</span><span class="op" id="2772289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772292">day</span><span class="op" id="2772295">,</span>&nbsp;<span class="ident" id="2772297">hour</span>&nbsp;<span class="op" id="2772302">=</span>&nbsp;<span class="ident" id="2772304">norm</span><span class="op" id="2772308">(</span><span class="ident" id="2772309">day</span><span class="op" id="2772312">,</span>&nbsp;<span class="ident" id="2772314">hour</span><span class="op" id="2772318">,</span>&nbsp;<span class="num" id="2772320">24</span><span class="op" id="2772322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772326">y</span>&nbsp;<span class="op" id="2772328">:=</span>&nbsp;<span class="ident" id="2772331">uint64</span><span class="op" id="2772337">(</span><span class="ident" id="2772338">int64</span><span class="op" id="2772343">(</span><span class="ident" id="2772344">year</span><span class="op" id="2772348">)</span>&nbsp;<span class="op" id="2772350">-</span>&nbsp;<span class="ident" id="2772352">absoluteZeroYear</span><span class="op" id="2772368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772372">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772416">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772454">n</span>&nbsp;<span class="op" id="2772456">:=</span>&nbsp;<span class="ident" id="2772459">y</span>&nbsp;<span class="op" id="2772461">/</span>&nbsp;<span class="num" id="2772463">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772468">y</span>&nbsp;<span class="op" id="2772470">-=</span>&nbsp;<span class="num" id="2772473">400</span>&nbsp;<span class="op" id="2772477">*</span>&nbsp;<span class="ident" id="2772479">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772482">d</span>&nbsp;<span class="op" id="2772484">:=</span>&nbsp;<span class="ident" id="2772487">daysPer400Years</span>&nbsp;<span class="op" id="2772503">*</span>&nbsp;<span class="ident" id="2772505">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772509">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772537">n</span>&nbsp;<span class="op" id="2772539">=</span>&nbsp;<span class="ident" id="2772541">y</span>&nbsp;<span class="op" id="2772543">/</span>&nbsp;<span class="num" id="2772545">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772550">y</span>&nbsp;<span class="op" id="2772552">-=</span>&nbsp;<span class="num" id="2772555">100</span>&nbsp;<span class="op" id="2772559">*</span>&nbsp;<span class="ident" id="2772561">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772564">d</span>&nbsp;<span class="op" id="2772566">+=</span>&nbsp;<span class="ident" id="2772569">daysPer100Years</span>&nbsp;<span class="op" id="2772585">*</span>&nbsp;<span class="ident" id="2772587">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772591">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772617">n</span>&nbsp;<span class="op" id="2772619">=</span>&nbsp;<span class="ident" id="2772621">y</span>&nbsp;<span class="op" id="2772623">/</span>&nbsp;<span class="num" id="2772625">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772628">y</span>&nbsp;<span class="op" id="2772630">-=</span>&nbsp;<span class="num" id="2772633">4</span>&nbsp;<span class="op" id="2772635">*</span>&nbsp;<span class="ident" id="2772637">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772640">d</span>&nbsp;<span class="op" id="2772642">+=</span>&nbsp;<span class="ident" id="2772645">daysPer4Years</span>&nbsp;<span class="op" id="2772659">*</span>&nbsp;<span class="ident" id="2772661">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772665">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772692">n</span>&nbsp;<span class="op" id="2772694">=</span>&nbsp;<span class="ident" id="2772696">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772699">d</span>&nbsp;<span class="op" id="2772701">+=</span>&nbsp;<span class="num" id="2772704">365</span>&nbsp;<span class="op" id="2772708">*</span>&nbsp;<span class="ident" id="2772710">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772714">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772749">d</span>&nbsp;<span class="op" id="2772751">+=</span>&nbsp;<span class="ident" id="2772754">uint64</span><span class="op" id="2772760">(</span><span class="ident" id="2772761">daysBefore</span><span class="op" id="2772771">[</span><span class="ident" id="2772772">month</span><span class="op" id="2772777">-</span><span class="num" id="2772778">1</span><span class="op" id="2772779">]</span><span class="op" id="2772780">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772783">if</span>&nbsp;<span class="ident" id="2772786">isLeap</span><span class="op" id="2772792">(</span><span class="ident" id="2772793">year</span><span class="op" id="2772797">)</span>&nbsp;<span class="op" id="2772799">&amp;&amp;</span>&nbsp;<span class="ident" id="2772802">month</span>&nbsp;<span class="op" id="2772808">&gt;=</span>&nbsp;<span class="ident" id="2772811">March</span>&nbsp;<span class="op" id="2772817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772821">d</span><span class="op" id="2772822">++</span>&nbsp;<span class="comment" id="2772825">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772845">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772875">d</span>&nbsp;<span class="op" id="2772877">+=</span>&nbsp;<span class="ident" id="2772880">uint64</span><span class="op" id="2772886">(</span><span class="ident" id="2772887">day</span>&nbsp;<span class="op" id="2772891">-</span>&nbsp;<span class="num" id="2772893">1</span><span class="op" id="2772894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772898">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772929">abs</span>&nbsp;<span class="op" id="2772933">:=</span>&nbsp;<span class="ident" id="2772936">d</span>&nbsp;<span class="op" id="2772938">*</span>&nbsp;<span class="ident" id="2772940">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772955">abs</span>&nbsp;<span class="op" id="2772959">+=</span>&nbsp;<span class="ident" id="2772962">uint64</span><span class="op" id="2772968">(</span><span class="ident" id="2772969">hour</span><span class="op" id="2772973">*</span><span class="ident" id="2772974">secondsPerHour</span>&nbsp;<span class="op" id="2772989">+</span>&nbsp;<span class="ident" id="2772991">min</span><span class="op" id="2772994">*</span><span class="ident" id="2772995">secondsPerMinute</span>&nbsp;<span class="op" id="2773012">+</span>&nbsp;<span class="ident" id="2773014">sec</span><span class="op" id="2773017">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773021">unix</span>&nbsp;<span class="op" id="2773026">:=</span>&nbsp;<span class="ident" id="2773029">int64</span><span class="op" id="2773034">(</span><span class="ident" id="2773035">abs</span><span class="op" id="2773038">)</span>&nbsp;<span class="op" id="2773040">+</span>&nbsp;<span class="op" id="2773042">(</span><span class="ident" id="2773043">absoluteToInternal</span>&nbsp;<span class="op" id="2773062">+</span>&nbsp;<span class="ident" id="2773064">internalToUnix</span><span class="op" id="2773078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773082">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773139">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773196">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773257">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773287">_</span><span class="op" id="2773288">,</span>&nbsp;<span class="ident" id="2773290">offset</span><span class="op" id="2773296">,</span>&nbsp;<span class="ident" id="2773298">_</span><span class="op" id="2773299">,</span>&nbsp;<span class="ident" id="2773301">start</span><span class="op" id="2773306">,</span>&nbsp;<span class="ident" id="2773308">end</span>&nbsp;<span class="op" id="2773312">:=</span>&nbsp;<span class="ident" id="2773315">loc</span><span class="op" id="2773318">.</span><span class="ident" id="2773319">lookup</span><span class="op" id="2773325">(</span><span class="ident" id="2773326">unix</span><span class="op" id="2773330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773333">if</span>&nbsp;<span class="ident" id="2773336">offset</span>&nbsp;<span class="op" id="2773343">!=</span>&nbsp;<span class="num" id="2773346">0</span>&nbsp;<span class="op" id="2773348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773352">switch</span>&nbsp;<span class="ident" id="2773359">utc</span>&nbsp;<span class="op" id="2773363">:=</span>&nbsp;<span class="ident" id="2773366">unix</span>&nbsp;<span class="op" id="2773371">-</span>&nbsp;<span class="ident" id="2773373">int64</span><span class="op" id="2773378">(</span><span class="ident" id="2773379">offset</span><span class="op" id="2773385">)</span><span class="op" id="2773386">;</span>&nbsp;<span class="op" id="2773388">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773392">case</span>&nbsp;<span class="ident" id="2773397">utc</span>&nbsp;<span class="op" id="2773401">&lt;</span>&nbsp;<span class="ident" id="2773403">start</span><span class="op" id="2773408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773413">_</span><span class="op" id="2773414">,</span>&nbsp;<span class="ident" id="2773416">offset</span><span class="op" id="2773422">,</span>&nbsp;<span class="ident" id="2773424">_</span><span class="op" id="2773425">,</span>&nbsp;<span class="ident" id="2773427">_</span><span class="op" id="2773428">,</span>&nbsp;<span class="ident" id="2773430">_</span>&nbsp;<span class="op" id="2773432">=</span>&nbsp;<span class="ident" id="2773434">loc</span><span class="op" id="2773437">.</span><span class="ident" id="2773438">lookup</span><span class="op" id="2773444">(</span><span class="ident" id="2773445">start</span>&nbsp;<span class="op" id="2773451">-</span>&nbsp;<span class="num" id="2773453">1</span><span class="op" id="2773454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773458">case</span>&nbsp;<span class="ident" id="2773463">utc</span>&nbsp;<span class="op" id="2773467">&gt;=</span>&nbsp;<span class="ident" id="2773470">end</span><span class="op" id="2773473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773478">_</span><span class="op" id="2773479">,</span>&nbsp;<span class="ident" id="2773481">offset</span><span class="op" id="2773487">,</span>&nbsp;<span class="ident" id="2773489">_</span><span class="op" id="2773490">,</span>&nbsp;<span class="ident" id="2773492">_</span><span class="op" id="2773493">,</span>&nbsp;<span class="ident" id="2773495">_</span>&nbsp;<span class="op" id="2773497">=</span>&nbsp;<span class="ident" id="2773499">loc</span><span class="op" id="2773502">.</span><span class="ident" id="2773503">lookup</span><span class="op" id="2773509">(</span><span class="ident" id="2773510">end</span><span class="op" id="2773513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773517">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773521">unix</span>&nbsp;<span class="op" id="2773526">-=</span>&nbsp;<span class="ident" id="2773529">int64</span><span class="op" id="2773534">(</span><span class="ident" id="2773535">offset</span><span class="op" id="2773541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773548">return</span>&nbsp;<span class="ident" id="2773555">Time</span><span class="op" id="2773559">{</span><span class="ident" id="2773560">unix</span>&nbsp;<span class="op" id="2773565">+</span>&nbsp;<span class="ident" id="2773567">unixToInternal</span><span class="op" id="2773581">,</span>&nbsp;<span class="builtintype" id="2773583">int32</span><span class="op" id="2773588">(</span><span class="ident" id="2773589">nsec</span><span class="op" id="2773593">)</span><span class="op" id="2773594">,</span>&nbsp;<span class="ident" id="2773596">loc</span><span class="op" id="2773599">}</span><br>
<span class="lineno"></span><span class="op" id="2773601">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2773604">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2773696">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2773740">func</span>&nbsp;<span class="op" id="2773745">(</span><span class="ident" id="2773746">t</span>&nbsp;<span class="ident" id="2773748">Time</span><span class="op" id="2773752">)</span>&nbsp;<span class="ident" id="2773754">Truncate</span><span class="op" id="2773762">(</span><span class="ident" id="2773763">d</span>&nbsp;<span class="ident" id="2773765">Duration</span><span class="op" id="2773773">)</span>&nbsp;<span class="ident" id="2773775">Time</span>&nbsp;<span class="op" id="2773780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773783">if</span>&nbsp;<span class="ident" id="2773786">d</span>&nbsp;<span class="op" id="2773788">&lt;=</span>&nbsp;<span class="num" id="2773791">0</span>&nbsp;<span class="op" id="2773793">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773797">return</span>&nbsp;<span class="ident" id="2773804">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773810">_</span><span class="op" id="2773811">,</span>&nbsp;<span class="ident" id="2773813">r</span>&nbsp;<span class="op" id="2773815">:=</span>&nbsp;<span class="ident" id="2773818">div</span><span class="op" id="2773821">(</span><span class="ident" id="2773822">t</span><span class="op" id="2773823">,</span>&nbsp;<span class="ident" id="2773825">d</span><span class="op" id="2773826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773829">return</span>&nbsp;<span class="ident" id="2773836">t</span><span class="op" id="2773837">.</span><span class="ident" id="2773838">Add</span><span class="op" id="2773841">(</span><span class="op" id="2773842">-</span><span class="ident" id="2773843">r</span><span class="op" id="2773844">)</span><br>
<span class="lineno"></span><span class="op" id="2773846">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2773849">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2773943">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2774003">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2774044">func</span>&nbsp;<span class="op" id="2774049">(</span><span class="ident" id="2774050">t</span>&nbsp;<span class="ident" id="2774052">Time</span><span class="op" id="2774056">)</span>&nbsp;<span class="ident" id="2774058">Round</span><span class="op" id="2774063">(</span><span class="ident" id="2774064">d</span>&nbsp;<span class="ident" id="2774066">Duration</span><span class="op" id="2774074">)</span>&nbsp;<span class="ident" id="2774076">Time</span>&nbsp;<span class="op" id="2774081">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774084">if</span>&nbsp;<span class="ident" id="2774087">d</span>&nbsp;<span class="op" id="2774089">&lt;=</span>&nbsp;<span class="num" id="2774092">0</span>&nbsp;<span class="op" id="2774094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774098">return</span>&nbsp;<span class="ident" id="2774105">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774111">_</span><span class="op" id="2774112">,</span>&nbsp;<span class="ident" id="2774114">r</span>&nbsp;<span class="op" id="2774116">:=</span>&nbsp;<span class="ident" id="2774119">div</span><span class="op" id="2774122">(</span><span class="ident" id="2774123">t</span><span class="op" id="2774124">,</span>&nbsp;<span class="ident" id="2774126">d</span><span class="op" id="2774127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774130">if</span>&nbsp;<span class="ident" id="2774133">r</span><span class="op" id="2774134">+</span><span class="ident" id="2774135">r</span>&nbsp;<span class="op" id="2774137">&lt;</span>&nbsp;<span class="ident" id="2774139">d</span>&nbsp;<span class="op" id="2774141">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774145">return</span>&nbsp;<span class="ident" id="2774152">t</span><span class="op" id="2774153">.</span><span class="ident" id="2774154">Add</span><span class="op" id="2774157">(</span><span class="op" id="2774158">-</span><span class="ident" id="2774159">r</span><span class="op" id="2774160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774166">return</span>&nbsp;<span class="ident" id="2774173">t</span><span class="op" id="2774174">.</span><span class="ident" id="2774175">Add</span><span class="op" id="2774178">(</span><span class="ident" id="2774179">d</span>&nbsp;<span class="op" id="2774181">-</span>&nbsp;<span class="ident" id="2774183">r</span><span class="op" id="2774184">)</span><br>
<span class="lineno"></span><span class="op" id="2774186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2774189">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2774258">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2774343">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2774395">func</span>&nbsp;<span class="ident" id="2774400">div</span><span class="op" id="2774403">(</span><span class="ident" id="2774404">t</span>&nbsp;<span class="ident" id="2774406">Time</span><span class="op" id="2774410">,</span>&nbsp;<span class="ident" id="2774412">d</span>&nbsp;<span class="ident" id="2774414">Duration</span><span class="op" id="2774422">)</span>&nbsp;<span class="op" id="2774424">(</span><span class="ident" id="2774425">qmod2</span>&nbsp;<span class="builtintype" id="2774431">int</span><span class="op" id="2774434">,</span>&nbsp;<span class="ident" id="2774436">r</span>&nbsp;<span class="ident" id="2774438">Duration</span><span class="op" id="2774446">)</span>&nbsp;<span class="op" id="2774448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774451">neg</span>&nbsp;<span class="op" id="2774455">:=</span>&nbsp;<span class="builtintype" id="2774458">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774465">nsec</span>&nbsp;<span class="op" id="2774470">:=</span>&nbsp;<span class="builtintype" id="2774473">int32</span><span class="op" id="2774478">(</span><span class="ident" id="2774479">t</span><span class="op" id="2774480">.</span><span class="ident" id="2774481">nsec</span><span class="op" id="2774485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774488">if</span>&nbsp;<span class="ident" id="2774491">t</span><span class="op" id="2774492">.</span><span class="ident" id="2774493">sec</span>&nbsp;<span class="op" id="2774497">&lt;</span>&nbsp;<span class="num" id="2774499">0</span>&nbsp;<span class="op" id="2774501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2774505">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774537">neg</span>&nbsp;<span class="op" id="2774541">=</span>&nbsp;<span class="builtintype" id="2774543">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774550">t</span><span class="op" id="2774551">.</span><span class="ident" id="2774552">sec</span>&nbsp;<span class="op" id="2774556">=</span>&nbsp;<span class="op" id="2774558">-</span><span class="ident" id="2774559">t</span><span class="op" id="2774560">.</span><span class="ident" id="2774561">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774567">nsec</span>&nbsp;<span class="op" id="2774572">=</span>&nbsp;<span class="op" id="2774574">-</span><span class="ident" id="2774575">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774582">if</span>&nbsp;<span class="ident" id="2774585">nsec</span>&nbsp;<span class="op" id="2774590">&lt;</span>&nbsp;<span class="num" id="2774592">0</span>&nbsp;<span class="op" id="2774594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774599">nsec</span>&nbsp;<span class="op" id="2774604">+=</span>&nbsp;<span class="num" id="2774607">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774614">t</span><span class="op" id="2774615">.</span><span class="ident" id="2774616">sec</span><span class="op" id="2774619">--</span>&nbsp;<span class="comment" id="2774622">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774660">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774667">switch</span>&nbsp;<span class="op" id="2774674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2774677">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774716">case</span>&nbsp;<span class="ident" id="2774721">d</span>&nbsp;<span class="op" id="2774723">&lt;</span>&nbsp;<span class="ident" id="2774725">Second</span>&nbsp;<span class="op" id="2774732">&amp;&amp;</span>&nbsp;<span class="ident" id="2774735">Second</span><span class="op" id="2774741">%</span><span class="op" id="2774742">(</span><span class="ident" id="2774743">d</span><span class="op" id="2774744">+</span><span class="ident" id="2774745">d</span><span class="op" id="2774746">)</span>&nbsp;<span class="op" id="2774748">==</span>&nbsp;<span class="num" id="2774751">0</span><span class="op" id="2774752">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774756">qmod2</span>&nbsp;<span class="op" id="2774762">=</span>&nbsp;<span class="builtintype" id="2774764">int</span><span class="op" id="2774767">(</span><span class="ident" id="2774768">nsec</span><span class="op" id="2774772">/</span><span class="builtintype" id="2774773">int32</span><span class="op" id="2774778">(</span><span class="ident" id="2774779">d</span><span class="op" id="2774780">)</span><span class="op" id="2774781">)</span>&nbsp;<span class="op" id="2774783">&amp;</span>&nbsp;<span class="num" id="2774785">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774789">r</span>&nbsp;<span class="op" id="2774791">=</span>&nbsp;<span class="ident" id="2774793">Duration</span><span class="op" id="2774801">(</span><span class="ident" id="2774802">nsec</span>&nbsp;<span class="op" id="2774807">%</span>&nbsp;<span class="builtintype" id="2774809">int32</span><span class="op" id="2774814">(</span><span class="ident" id="2774815">d</span><span class="op" id="2774816">)</span><span class="op" id="2774817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2774821">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774868">case</span>&nbsp;<span class="ident" id="2774873">d</span><span class="op" id="2774874">%</span><span class="ident" id="2774875">Second</span>&nbsp;<span class="op" id="2774882">==</span>&nbsp;<span class="num" id="2774885">0</span><span class="op" id="2774886">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774890">d1</span>&nbsp;<span class="op" id="2774893">:=</span>&nbsp;<span class="ident" id="2774896">int64</span><span class="op" id="2774901">(</span><span class="ident" id="2774902">d</span>&nbsp;<span class="op" id="2774904">/</span>&nbsp;<span class="ident" id="2774906">Second</span><span class="op" id="2774912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774916">qmod2</span>&nbsp;<span class="op" id="2774922">=</span>&nbsp;<span class="builtintype" id="2774924">int</span><span class="op" id="2774927">(</span><span class="ident" id="2774928">t</span><span class="op" id="2774929">.</span><span class="ident" id="2774930">sec</span><span class="op" id="2774933">/</span><span class="ident" id="2774934">d1</span><span class="op" id="2774936">)</span>&nbsp;<span class="op" id="2774938">&amp;</span>&nbsp;<span class="num" id="2774940">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774944">r</span>&nbsp;<span class="op" id="2774946">=</span>&nbsp;<span class="ident" id="2774948">Duration</span><span class="op" id="2774956">(</span><span class="ident" id="2774957">t</span><span class="op" id="2774958">.</span><span class="ident" id="2774959">sec</span><span class="op" id="2774962">%</span><span class="ident" id="2774963">d1</span><span class="op" id="2774965">)</span><span class="op" id="2774966">*</span><span class="ident" id="2774967">Second</span>&nbsp;<span class="op" id="2774974">+</span>&nbsp;<span class="ident" id="2774976">Duration</span><span class="op" id="2774984">(</span><span class="ident" id="2774985">nsec</span><span class="op" id="2774989">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2774993">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775011">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775069">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775146">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775186">default</span><span class="op" id="2775193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775197">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775241">sec</span>&nbsp;<span class="op" id="2775245">:=</span>&nbsp;<span class="ident" id="2775248">uint64</span><span class="op" id="2775254">(</span><span class="ident" id="2775255">t</span><span class="op" id="2775256">.</span><span class="ident" id="2775257">sec</span><span class="op" id="2775260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775264">tmp</span>&nbsp;<span class="op" id="2775268">:=</span>&nbsp;<span class="op" id="2775271">(</span><span class="ident" id="2775272">sec</span>&nbsp;<span class="op" id="2775276">&gt;&gt;</span>&nbsp;<span class="num" id="2775279">32</span><span class="op" id="2775281">)</span>&nbsp;<span class="op" id="2775283">*</span>&nbsp;<span class="num" id="2775285">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775291">u1</span>&nbsp;<span class="op" id="2775294">:=</span>&nbsp;<span class="ident" id="2775297">tmp</span>&nbsp;<span class="op" id="2775301">&gt;&gt;</span>&nbsp;<span class="num" id="2775304">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775309">u0</span>&nbsp;<span class="op" id="2775312">:=</span>&nbsp;<span class="ident" id="2775315">tmp</span>&nbsp;<span class="op" id="2775319">&lt;&lt;</span>&nbsp;<span class="num" id="2775322">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775327">tmp</span>&nbsp;<span class="op" id="2775331">=</span>&nbsp;<span class="ident" id="2775333">uint64</span><span class="op" id="2775339">(</span><span class="ident" id="2775340">sec</span><span class="op" id="2775343">&amp;</span><span class="num" id="2775344">0xFFFFFFFF</span><span class="op" id="2775354">)</span>&nbsp;<span class="op" id="2775356">*</span>&nbsp;<span class="num" id="2775358">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775364">u0x</span><span class="op" id="2775367">,</span>&nbsp;<span class="ident" id="2775369">u0</span>&nbsp;<span class="op" id="2775372">:=</span>&nbsp;<span class="ident" id="2775375">u0</span><span class="op" id="2775377">,</span>&nbsp;<span class="ident" id="2775379">u0</span><span class="op" id="2775381">+</span><span class="ident" id="2775382">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775388">if</span>&nbsp;<span class="ident" id="2775391">u0</span>&nbsp;<span class="op" id="2775394">&lt;</span>&nbsp;<span class="ident" id="2775396">u0x</span>&nbsp;<span class="op" id="2775400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775405">u1</span><span class="op" id="2775407">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775416">u0x</span><span class="op" id="2775419">,</span>&nbsp;<span class="ident" id="2775421">u0</span>&nbsp;<span class="op" id="2775424">=</span>&nbsp;<span class="ident" id="2775426">u0</span><span class="op" id="2775428">,</span>&nbsp;<span class="ident" id="2775430">u0</span><span class="op" id="2775432">+</span><span class="ident" id="2775433">uint64</span><span class="op" id="2775439">(</span><span class="ident" id="2775440">nsec</span><span class="op" id="2775444">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775448">if</span>&nbsp;<span class="ident" id="2775451">u0</span>&nbsp;<span class="op" id="2775454">&lt;</span>&nbsp;<span class="ident" id="2775456">u0x</span>&nbsp;<span class="op" id="2775460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775465">u1</span><span class="op" id="2775467">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775477">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775538">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775597">d1</span>&nbsp;<span class="op" id="2775600">:=</span>&nbsp;<span class="ident" id="2775603">uint64</span><span class="op" id="2775609">(</span><span class="ident" id="2775610">d</span><span class="op" id="2775611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775615">for</span>&nbsp;<span class="ident" id="2775619">d1</span><span class="op" id="2775621">&gt;&gt;</span><span class="num" id="2775623">63</span>&nbsp;<span class="op" id="2775626">!=</span>&nbsp;<span class="num" id="2775629">1</span>&nbsp;<span class="op" id="2775631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775636">d1</span>&nbsp;<span class="op" id="2775639">&lt;&lt;=</span>&nbsp;<span class="num" id="2775643">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775647">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775651">d0</span>&nbsp;<span class="op" id="2775654">:=</span>&nbsp;<span class="ident" id="2775657">uint64</span><span class="op" id="2775663">(</span><span class="num" id="2775664">0</span><span class="op" id="2775665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775669">for</span>&nbsp;<span class="op" id="2775673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775678">qmod2</span>&nbsp;<span class="op" id="2775684">=</span>&nbsp;<span class="num" id="2775686">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775691">if</span>&nbsp;<span class="ident" id="2775694">u1</span>&nbsp;<span class="op" id="2775697">&gt;</span>&nbsp;<span class="ident" id="2775699">d1</span>&nbsp;<span class="op" id="2775702">||</span>&nbsp;<span class="ident" id="2775705">u1</span>&nbsp;<span class="op" id="2775708">==</span>&nbsp;<span class="ident" id="2775711">d1</span>&nbsp;<span class="op" id="2775714">&amp;&amp;</span>&nbsp;<span class="ident" id="2775717">u0</span>&nbsp;<span class="op" id="2775720">&gt;=</span>&nbsp;<span class="ident" id="2775723">d0</span>&nbsp;<span class="op" id="2775726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775732">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775748">qmod2</span>&nbsp;<span class="op" id="2775754">=</span>&nbsp;<span class="num" id="2775756">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775762">u0x</span><span class="op" id="2775765">,</span>&nbsp;<span class="ident" id="2775767">u0</span>&nbsp;<span class="op" id="2775770">=</span>&nbsp;<span class="ident" id="2775772">u0</span><span class="op" id="2775774">,</span>&nbsp;<span class="ident" id="2775776">u0</span><span class="op" id="2775778">-</span><span class="ident" id="2775779">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775786">if</span>&nbsp;<span class="ident" id="2775789">u0</span>&nbsp;<span class="op" id="2775792">&gt;</span>&nbsp;<span class="ident" id="2775794">u0x</span>&nbsp;<span class="op" id="2775798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775805">u1</span><span class="op" id="2775807">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775814">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775820">u1</span>&nbsp;<span class="op" id="2775823">-=</span>&nbsp;<span class="ident" id="2775826">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775837">if</span>&nbsp;<span class="ident" id="2775840">d1</span>&nbsp;<span class="op" id="2775843">==</span>&nbsp;<span class="num" id="2775846">0</span>&nbsp;<span class="op" id="2775848">&amp;&amp;</span>&nbsp;<span class="ident" id="2775851">d0</span>&nbsp;<span class="op" id="2775854">==</span>&nbsp;<span class="ident" id="2775857">uint64</span><span class="op" id="2775863">(</span><span class="ident" id="2775864">d</span><span class="op" id="2775865">)</span>&nbsp;<span class="op" id="2775867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775873">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775882">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775887">d0</span>&nbsp;<span class="op" id="2775890">&gt;&gt;=</span>&nbsp;<span class="num" id="2775894">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775899">d0</span>&nbsp;<span class="op" id="2775902">|=</span>&nbsp;<span class="op" id="2775905">(</span><span class="ident" id="2775906">d1</span>&nbsp;<span class="op" id="2775909">&amp;</span>&nbsp;<span class="num" id="2775911">1</span><span class="op" id="2775912">)</span>&nbsp;<span class="op" id="2775914">&lt;&lt;</span>&nbsp;<span class="num" id="2775917">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775923">d1</span>&nbsp;<span class="op" id="2775926">&gt;&gt;=</span>&nbsp;<span class="num" id="2775930">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775938">r</span>&nbsp;<span class="op" id="2775940">=</span>&nbsp;<span class="ident" id="2775942">Duration</span><span class="op" id="2775950">(</span><span class="ident" id="2775951">u0</span><span class="op" id="2775953">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775960">if</span>&nbsp;<span class="ident" id="2775963">neg</span>&nbsp;<span class="op" id="2775967">&amp;&amp;</span>&nbsp;<span class="ident" id="2775970">r</span>&nbsp;<span class="op" id="2775972">!=</span>&nbsp;<span class="num" id="2775975">0</span>&nbsp;<span class="op" id="2775977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775981">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2776067">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2776085">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2776138">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2776156">//&nbsp;&nbsp;&nbsp;&nbsp-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2776174">//&nbsp;&nbsp;&nbsp;&nbsp-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776202">qmod2</span>&nbsp;<span class="op" id="2776208">^=</span>&nbsp;<span class="num" id="2776211">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776215">r</span>&nbsp;<span class="op" id="2776217">=</span>&nbsp;<span class="ident" id="2776219">d</span>&nbsp;<span class="op" id="2776221">-</span>&nbsp;<span class="ident" id="2776223">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776229">return</span><br>
<span class="lineno"></span><span class="op" id="2776236">}</span>
</div>
</body>
</html>
