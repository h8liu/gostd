<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7981124">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7981179">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7981233">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7981284">package</span>&nbsp;<span class="ident" id="7981292">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7981297">import</span>&nbsp;<span class="op" id="7981304">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981307">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981314">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981325">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981336">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7981346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7981349">type</span>&nbsp;<span class="ident" id="7981354">URLTest</span>&nbsp;<span class="keyword" id="7981362">struct</span>&nbsp;<span class="op" id="7981369">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981372">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7981382">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981390">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7981400">*</span><span class="ident" id="7981401">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981406">roundtrip</span>&nbsp;<span class="builtintype" id="7981416">string</span>&nbsp;<span class="comment" id="7981423">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7981494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7981497">var</span>&nbsp;<span class="ident" id="7981501">urltests</span>&nbsp;<span class="op" id="7981510">=</span>&nbsp;<span class="op" id="7981512">[</span><span class="op" id="7981513">]</span><span class="ident" id="7981514">URLTest</span><span class="op" id="7981521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981524">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981540">&#34;http://www.google.com&#34;</span><span class="op" id="7981563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981567">&amp;</span><span class="ident" id="7981568">URL</span><span class="op" id="7981571">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981576">Scheme</span><span class="op" id="7981582">:</span>&nbsp;<span class="string" id="7981584">&#34;http&#34;</span><span class="op" id="7981590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981595">Host</span><span class="op" id="7981599">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981603">&#34;www.google.com&#34;</span><span class="op" id="7981619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981623">}</span><span class="op" id="7981624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981628">&#34;&#34;</span><span class="op" id="7981630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981633">}</span><span class="op" id="7981634">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981637">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981650">&#34;http://www.google.com/&#34;</span><span class="op" id="7981674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981678">&amp;</span><span class="ident" id="7981679">URL</span><span class="op" id="7981682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981687">Scheme</span><span class="op" id="7981693">:</span>&nbsp;<span class="string" id="7981695">&#34;http&#34;</span><span class="op" id="7981701">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981706">Host</span><span class="op" id="7981710">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981714">&#34;www.google.com&#34;</span><span class="op" id="7981730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981735">Path</span><span class="op" id="7981739">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981743">&#34;/&#34;</span><span class="op" id="7981746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981750">}</span><span class="op" id="7981751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981755">&#34;&#34;</span><span class="op" id="7981757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981760">}</span><span class="op" id="7981761">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981764">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981795">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7981835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981839">&amp;</span><span class="ident" id="7981840">URL</span><span class="op" id="7981843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981848">Scheme</span><span class="op" id="7981854">:</span>&nbsp;<span class="string" id="7981856">&#34;http&#34;</span><span class="op" id="7981862">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981867">Host</span><span class="op" id="7981871">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981875">&#34;www.google.com&#34;</span><span class="op" id="7981891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981896">Path</span><span class="op" id="7981900">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981904">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7981919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981923">}</span><span class="op" id="7981924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981928">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7981966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981969">}</span><span class="op" id="7981970">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981973">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7981986">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7982019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982023">&amp;</span><span class="ident" id="7982024">URL</span><span class="op" id="7982027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982032">Scheme</span><span class="op" id="7982038">:</span>&nbsp;<span class="string" id="7982040">&#34;ftp&#34;</span><span class="op" id="7982045">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982050">User</span><span class="op" id="7982054">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7982058">User</span><span class="op" id="7982062">(</span><span class="string" id="7982063">&#34;webmaster&#34;</span><span class="op" id="7982074">)</span><span class="op" id="7982075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982080">Host</span><span class="op" id="7982084">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982088">&#34;www.google.com&#34;</span><span class="op" id="7982104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982109">Path</span><span class="op" id="7982113">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982117">&#34;/&#34;</span><span class="op" id="7982120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982124">}</span><span class="op" id="7982125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982129">&#34;&#34;</span><span class="op" id="7982131">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982134">}</span><span class="op" id="7982135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982138">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982174">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7982208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982212">&amp;</span><span class="ident" id="7982213">URL</span><span class="op" id="7982216">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982221">Scheme</span><span class="op" id="7982227">:</span>&nbsp;<span class="string" id="7982229">&#34;ftp&#34;</span><span class="op" id="7982234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982239">User</span><span class="op" id="7982243">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7982247">User</span><span class="op" id="7982251">(</span><span class="string" id="7982252">&#34;john&nbsp;doe&#34;</span><span class="op" id="7982262">)</span><span class="op" id="7982263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982268">Host</span><span class="op" id="7982272">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982276">&#34;www.google.com&#34;</span><span class="op" id="7982292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982297">Path</span><span class="op" id="7982301">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982305">&#34;/&#34;</span><span class="op" id="7982308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982312">}</span><span class="op" id="7982313">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982317">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7982351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982354">}</span><span class="op" id="7982355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982358">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982372">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7982410">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982414">&amp;</span><span class="ident" id="7982415">URL</span><span class="op" id="7982418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982423">Scheme</span><span class="op" id="7982429">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982433">&#34;http&#34;</span><span class="op" id="7982439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982444">Host</span><span class="op" id="7982448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982454">&#34;www.google.com&#34;</span><span class="op" id="7982470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982475">Path</span><span class="op" id="7982479">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982485">&#34;/&#34;</span><span class="op" id="7982488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982493">RawQuery</span><span class="op" id="7982501">:</span>&nbsp;<span class="string" id="7982503">&#34;q=go+language&#34;</span><span class="op" id="7982518">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982522">}</span><span class="op" id="7982523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982527">&#34;&#34;</span><span class="op" id="7982529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982532">}</span><span class="op" id="7982533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982536">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982576">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982580">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7982620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982624">&amp;</span><span class="ident" id="7982625">URL</span><span class="op" id="7982628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982633">Scheme</span><span class="op" id="7982639">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982643">&#34;http&#34;</span><span class="op" id="7982649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982654">Host</span><span class="op" id="7982658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982664">&#34;www.google.com&#34;</span><span class="op" id="7982680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982685">Path</span><span class="op" id="7982689">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982695">&#34;/&#34;</span><span class="op" id="7982698">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982703">RawQuery</span><span class="op" id="7982711">:</span>&nbsp;<span class="string" id="7982713">&#34;q=go%20language&#34;</span><span class="op" id="7982730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982734">}</span><span class="op" id="7982735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982739">&#34;&#34;</span><span class="op" id="7982741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982744">}</span><span class="op" id="7982745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982748">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982774">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7982809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982813">&amp;</span><span class="ident" id="7982814">URL</span><span class="op" id="7982817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982822">Scheme</span><span class="op" id="7982828">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982832">&#34;http&#34;</span><span class="op" id="7982838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982843">Host</span><span class="op" id="7982847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982853">&#34;www.google.com&#34;</span><span class="op" id="7982869">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982874">Path</span><span class="op" id="7982878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982884">&#34;/a&nbsp;b&#34;</span><span class="op" id="7982890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982895">RawQuery</span><span class="op" id="7982903">:</span>&nbsp;<span class="string" id="7982905">&#34;q=c+d&#34;</span><span class="op" id="7982912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982916">}</span><span class="op" id="7982917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982921">&#34;&#34;</span><span class="op" id="7982923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982926">}</span><span class="op" id="7982927">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982930">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7982976">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7983012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983016">&amp;</span><span class="ident" id="7983017">URL</span><span class="op" id="7983020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983025">Scheme</span><span class="op" id="7983031">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983035">&#34;http&#34;</span><span class="op" id="7983041">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983046">Opaque</span><span class="op" id="7983052">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983056">&#34;www.google.com/&#34;</span><span class="op" id="7983073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983078">RawQuery</span><span class="op" id="7983086">:</span>&nbsp;<span class="string" id="7983088">&#34;q=go+language&#34;</span><span class="op" id="7983103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983107">}</span><span class="op" id="7983108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983112">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7983148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983151">}</span><span class="op" id="7983152">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7983155">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983201">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7983243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983247">&amp;</span><span class="ident" id="7983248">URL</span><span class="op" id="7983251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983256">Scheme</span><span class="op" id="7983262">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983266">&#34;http&#34;</span><span class="op" id="7983272">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983277">Opaque</span><span class="op" id="7983283">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983287">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7983310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983315">RawQuery</span><span class="op" id="7983323">:</span>&nbsp;<span class="string" id="7983325">&#34;q=go+language&#34;</span><span class="op" id="7983340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983344">}</span><span class="op" id="7983345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983349">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7983391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983394">}</span><span class="op" id="7983395">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7983398">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983430">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7983460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983464">&amp;</span><span class="ident" id="7983465">URL</span><span class="op" id="7983468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983473">Scheme</span><span class="op" id="7983479">:</span>&nbsp;<span class="string" id="7983481">&#34;mailto&#34;</span><span class="op" id="7983489">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983494">Path</span><span class="op" id="7983498">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983502">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7983525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983529">}</span><span class="op" id="7983530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983534">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7983566">,</span>&nbsp;<span class="comment" id="7983568">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983595">}</span><span class="op" id="7983596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7983599">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983621">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7983650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983654">&amp;</span><span class="ident" id="7983655">URL</span><span class="op" id="7983658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983663">Scheme</span><span class="op" id="7983669">:</span>&nbsp;<span class="string" id="7983671">&#34;mailto&#34;</span><span class="op" id="7983679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983684">Opaque</span><span class="op" id="7983690">:</span>&nbsp;<span class="string" id="7983692">&#34;webmaster@golang.org&#34;</span><span class="op" id="7983714">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983718">}</span><span class="op" id="7983719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983723">&#34;&#34;</span><span class="op" id="7983725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983728">}</span><span class="op" id="7983729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7983732">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983786">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983790">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7983813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983817">&amp;</span><span class="ident" id="7983818">URL</span><span class="op" id="7983821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983826">Path</span><span class="op" id="7983830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983836">&#34;/foo&#34;</span><span class="op" id="7983842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983847">RawQuery</span><span class="op" id="7983855">:</span>&nbsp;<span class="string" id="7983857">&#34;query=http://bad&#34;</span><span class="op" id="7983875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983879">}</span><span class="op" id="7983880">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983884">&#34;&#34;</span><span class="op" id="7983886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983889">}</span><span class="op" id="7983890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7983893">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983954">&#34;//foo&#34;</span><span class="op" id="7983961">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983965">&amp;</span><span class="ident" id="7983966">URL</span><span class="op" id="7983969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983974">Host</span><span class="op" id="7983978">:</span>&nbsp;<span class="string" id="7983980">&#34;foo&#34;</span><span class="op" id="7983985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983989">}</span><span class="op" id="7983990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7983994">&#34;&#34;</span><span class="op" id="7983996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983999">}</span><span class="op" id="7984000">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984003">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984069">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7984090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984094">&amp;</span><span class="ident" id="7984095">URL</span><span class="op" id="7984098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984103">User</span><span class="op" id="7984107">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7984113">User</span><span class="op" id="7984117">(</span><span class="string" id="7984118">&#34;user&#34;</span><span class="op" id="7984124">)</span><span class="op" id="7984125">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984130">Host</span><span class="op" id="7984134">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7984140">&#34;foo&#34;</span><span class="op" id="7984145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984150">Path</span><span class="op" id="7984154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7984160">&#34;/path&#34;</span><span class="op" id="7984167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984172">RawQuery</span><span class="op" id="7984180">:</span>&nbsp;<span class="string" id="7984182">&#34;a=b&#34;</span><span class="op" id="7984187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984191">}</span><span class="op" id="7984192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984196">&#34;&#34;</span><span class="op" id="7984198">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984201">}</span><span class="op" id="7984202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984205">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984280">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984341">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984400">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984460">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984483">&#34;///threeslashes&#34;</span><span class="op" id="7984500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984504">&amp;</span><span class="ident" id="7984505">URL</span><span class="op" id="7984508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984513">Path</span><span class="op" id="7984517">:</span>&nbsp;<span class="string" id="7984519">&#34;///threeslashes&#34;</span><span class="op" id="7984536">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984540">}</span><span class="op" id="7984541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984545">&#34;&#34;</span><span class="op" id="7984547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984550">}</span><span class="op" id="7984551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984558">&#34;http://user:password@google.com&#34;</span><span class="op" id="7984591">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984595">&amp;</span><span class="ident" id="7984596">URL</span><span class="op" id="7984599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984604">Scheme</span><span class="op" id="7984610">:</span>&nbsp;<span class="string" id="7984612">&#34;http&#34;</span><span class="op" id="7984618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984623">User</span><span class="op" id="7984627">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7984631">UserPassword</span><span class="op" id="7984643">(</span><span class="string" id="7984644">&#34;user&#34;</span><span class="op" id="7984650">,</span>&nbsp;<span class="string" id="7984652">&#34;password&#34;</span><span class="op" id="7984662">)</span><span class="op" id="7984663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984668">Host</span><span class="op" id="7984672">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7984676">&#34;google.com&#34;</span><span class="op" id="7984688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984692">}</span><span class="op" id="7984693">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984697">&#34;http://user:password@google.com&#34;</span><span class="op" id="7984730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984733">}</span><span class="op" id="7984734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984737">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984793">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7984826">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984830">&amp;</span><span class="ident" id="7984831">URL</span><span class="op" id="7984834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984839">Scheme</span><span class="op" id="7984845">:</span>&nbsp;<span class="string" id="7984847">&#34;http&#34;</span><span class="op" id="7984853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984858">User</span><span class="op" id="7984862">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7984866">UserPassword</span><span class="op" id="7984878">(</span><span class="string" id="7984879">&#34;j@ne&#34;</span><span class="op" id="7984885">,</span>&nbsp;<span class="string" id="7984887">&#34;password&#34;</span><span class="op" id="7984897">)</span><span class="op" id="7984898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984903">Host</span><span class="op" id="7984907">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7984911">&#34;google.com&#34;</span><span class="op" id="7984923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984927">}</span><span class="op" id="7984928">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7984932">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7984967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984970">}</span><span class="op" id="7984971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984974">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985030">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7985063">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985067">&amp;</span><span class="ident" id="7985068">URL</span><span class="op" id="7985071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985076">Scheme</span><span class="op" id="7985082">:</span>&nbsp;<span class="string" id="7985084">&#34;http&#34;</span><span class="op" id="7985090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985095">User</span><span class="op" id="7985099">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7985103">UserPassword</span><span class="op" id="7985115">(</span><span class="string" id="7985116">&#34;jane&#34;</span><span class="op" id="7985122">,</span>&nbsp;<span class="string" id="7985124">&#34;p@ssword&#34;</span><span class="op" id="7985134">)</span><span class="op" id="7985135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985140">Host</span><span class="op" id="7985144">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985148">&#34;google.com&#34;</span><span class="op" id="7985160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985164">}</span><span class="op" id="7985165">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985169">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7985204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985207">}</span><span class="op" id="7985208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985215">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7985259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985263">&amp;</span><span class="ident" id="7985264">URL</span><span class="op" id="7985267">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985272">Scheme</span><span class="op" id="7985278">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985282">&#34;http&#34;</span><span class="op" id="7985288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985293">User</span><span class="op" id="7985297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7985303">UserPassword</span><span class="op" id="7985315">(</span><span class="string" id="7985316">&#34;j@ne&#34;</span><span class="op" id="7985322">,</span>&nbsp;<span class="string" id="7985324">&#34;password&#34;</span><span class="op" id="7985334">)</span><span class="op" id="7985335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985340">Host</span><span class="op" id="7985344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985350">&#34;google.com&#34;</span><span class="op" id="7985362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985367">Path</span><span class="op" id="7985371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985377">&#34;/p@th&#34;</span><span class="op" id="7985384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985389">RawQuery</span><span class="op" id="7985397">:</span>&nbsp;<span class="string" id="7985399">&#34;q=@go&#34;</span><span class="op" id="7985406">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985410">}</span><span class="op" id="7985411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985415">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7985461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985464">}</span><span class="op" id="7985465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985472">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7985514">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985518">&amp;</span><span class="ident" id="7985519">URL</span><span class="op" id="7985522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985527">Scheme</span><span class="op" id="7985533">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985537">&#34;http&#34;</span><span class="op" id="7985543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985548">Host</span><span class="op" id="7985552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985558">&#34;www.google.com&#34;</span><span class="op" id="7985574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985579">Path</span><span class="op" id="7985583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985589">&#34;/&#34;</span><span class="op" id="7985592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985597">RawQuery</span><span class="op" id="7985605">:</span>&nbsp;<span class="string" id="7985607">&#34;q=go+language&#34;</span><span class="op" id="7985622">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985627">Fragment</span><span class="op" id="7985635">:</span>&nbsp;<span class="string" id="7985637">&#34;foo&#34;</span><span class="op" id="7985642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985646">}</span><span class="op" id="7985647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985651">&#34;&#34;</span><span class="op" id="7985653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985656">}</span><span class="op" id="7985657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985660">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985664">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7985712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985716">&amp;</span><span class="ident" id="7985717">URL</span><span class="op" id="7985720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985725">Scheme</span><span class="op" id="7985731">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985735">&#34;http&#34;</span><span class="op" id="7985741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985746">Host</span><span class="op" id="7985750">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985756">&#34;www.google.com&#34;</span><span class="op" id="7985772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985777">Path</span><span class="op" id="7985781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7985787">&#34;/&#34;</span><span class="op" id="7985790">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985795">RawQuery</span><span class="op" id="7985803">:</span>&nbsp;<span class="string" id="7985805">&#34;q=go+language&#34;</span><span class="op" id="7985820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985825">Fragment</span><span class="op" id="7985833">:</span>&nbsp;<span class="string" id="7985835">&#34;foo&amp;bar&#34;</span><span class="op" id="7985844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985848">}</span><span class="op" id="7985849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985853">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7985899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985902">}</span><span class="op" id="7985903">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7985910">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7985936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985940">&amp;</span><span class="ident" id="7985941">URL</span><span class="op" id="7985944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985949">Scheme</span><span class="op" id="7985955">:</span>&nbsp;<span class="string" id="7985957">&#34;file&#34;</span><span class="op" id="7985963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985968">Host</span><span class="op" id="7985972">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985976">&#34;&#34;</span><span class="op" id="7985978">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985983">Path</span><span class="op" id="7985987">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7985991">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7986010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986014">}</span><span class="op" id="7986015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986019">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7986045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986048">}</span><span class="op" id="7986049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986052">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986102">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986160">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7986187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986191">&amp;</span><span class="ident" id="7986192">URL</span><span class="op" id="7986195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986200">Scheme</span><span class="op" id="7986206">:</span>&nbsp;<span class="string" id="7986208">&#34;file&#34;</span><span class="op" id="7986214">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986219">Host</span><span class="op" id="7986223">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7986227">&#34;&#34;</span><span class="op" id="7986229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986234">Path</span><span class="op" id="7986238">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7986242">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7986262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986266">}</span><span class="op" id="7986267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986271">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7986298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986301">}</span><span class="op" id="7986302">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986305">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986337">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7986366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986370">&amp;</span><span class="ident" id="7986371">URL</span><span class="op" id="7986374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986379">Scheme</span><span class="op" id="7986385">:</span>&nbsp;<span class="string" id="7986387">&#34;mailto&#34;</span><span class="op" id="7986395">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986400">Opaque</span><span class="op" id="7986406">:</span>&nbsp;<span class="string" id="7986408">&#34;webmaster@golang.org&#34;</span><span class="op" id="7986430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986434">}</span><span class="op" id="7986435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986439">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7986468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986471">}</span><span class="op" id="7986472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986475">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986497">&#34;a/b/c&#34;</span><span class="op" id="7986504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986508">&amp;</span><span class="ident" id="7986509">URL</span><span class="op" id="7986512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986517">Path</span><span class="op" id="7986521">:</span>&nbsp;<span class="string" id="7986523">&#34;a/b/c&#34;</span><span class="op" id="7986530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986534">}</span><span class="op" id="7986535">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986539">&#34;a/b/c&#34;</span><span class="op" id="7986546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986549">}</span><span class="op" id="7986550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986553">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986598">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7986634">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986638">&amp;</span><span class="ident" id="7986639">URL</span><span class="op" id="7986642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986647">Scheme</span><span class="op" id="7986653">:</span>&nbsp;<span class="string" id="7986655">&#34;http&#34;</span><span class="op" id="7986661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986666">User</span><span class="op" id="7986670">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7986674">UserPassword</span><span class="op" id="7986686">(</span><span class="string" id="7986687">&#34;?am&#34;</span><span class="op" id="7986692">,</span>&nbsp;<span class="string" id="7986694">&#34;pa?sword&#34;</span><span class="op" id="7986704">)</span><span class="op" id="7986705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986710">Host</span><span class="op" id="7986714">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7986718">&#34;google.com&#34;</span><span class="op" id="7986730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986734">}</span><span class="op" id="7986735">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7986739">&#34;&#34;</span><span class="op" id="7986741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986744">}</span><span class="op" id="7986745">,</span><br>
<span class="lineno"></span><span class="op" id="7986747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7986750">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7986812">func</span>&nbsp;<span class="ident" id="7986817">ufmt</span><span class="op" id="7986821">(</span><span class="ident" id="7986822">u</span>&nbsp;<span class="op" id="7986824">*</span><span class="ident" id="7986825">URL</span><span class="op" id="7986828">)</span>&nbsp;<span class="builtintype" id="7986830">string</span>&nbsp;<span class="op" id="7986837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986840">var</span>&nbsp;<span class="ident" id="7986844">user</span><span class="op" id="7986848">,</span>&nbsp;<span class="ident" id="7986850">pass</span>&nbsp;<span class="keyword" id="7986855">interface</span><span class="op" id="7986864">{</span><span class="op" id="7986865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986868">if</span>&nbsp;<span class="ident" id="7986871">u</span><span class="op" id="7986872">.</span><span class="ident" id="7986873">User</span>&nbsp;<span class="op" id="7986878">!=</span>&nbsp;<span class="ident" id="7986881">nil</span>&nbsp;<span class="op" id="7986885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986889">user</span>&nbsp;<span class="op" id="7986894">=</span>&nbsp;<span class="ident" id="7986896">u</span><span class="op" id="7986897">.</span><span class="ident" id="7986898">User</span><span class="op" id="7986902">.</span><span class="ident" id="7986903">Username</span><span class="op" id="7986911">(</span><span class="op" id="7986912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986916">if</span>&nbsp;<span class="ident" id="7986919">p</span><span class="op" id="7986920">,</span>&nbsp;<span class="ident" id="7986922">ok</span>&nbsp;<span class="op" id="7986925">:=</span>&nbsp;<span class="ident" id="7986928">u</span><span class="op" id="7986929">.</span><span class="ident" id="7986930">User</span><span class="op" id="7986934">.</span><span class="ident" id="7986935">Password</span><span class="op" id="7986943">(</span><span class="op" id="7986944">)</span><span class="op" id="7986945">;</span>&nbsp;<span class="ident" id="7986947">ok</span>&nbsp;<span class="op" id="7986950">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986955">pass</span>&nbsp;<span class="op" id="7986960">=</span>&nbsp;<span class="ident" id="7986962">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986972">return</span>&nbsp;<span class="ident" id="7986979">fmt</span><span class="op" id="7986982">.</span><span class="ident" id="7986983">Sprintf</span><span class="op" id="7986990">(</span><span class="string" id="7986991">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7987069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987073">u</span><span class="op" id="7987074">.</span><span class="ident" id="7987075">Opaque</span><span class="op" id="7987081">,</span>&nbsp;<span class="ident" id="7987083">u</span><span class="op" id="7987084">.</span><span class="ident" id="7987085">Scheme</span><span class="op" id="7987091">,</span>&nbsp;<span class="ident" id="7987093">user</span><span class="op" id="7987097">,</span>&nbsp;<span class="ident" id="7987099">pass</span><span class="op" id="7987103">,</span>&nbsp;<span class="ident" id="7987105">u</span><span class="op" id="7987106">.</span><span class="ident" id="7987107">Host</span><span class="op" id="7987111">,</span>&nbsp;<span class="ident" id="7987113">u</span><span class="op" id="7987114">.</span><span class="ident" id="7987115">Path</span><span class="op" id="7987119">,</span>&nbsp;<span class="ident" id="7987121">u</span><span class="op" id="7987122">.</span><span class="ident" id="7987123">RawQuery</span><span class="op" id="7987131">,</span>&nbsp;<span class="ident" id="7987133">u</span><span class="op" id="7987134">.</span><span class="ident" id="7987135">Fragment</span><span class="op" id="7987143">)</span><br>
<span class="lineno">305</span><span class="op" id="7987145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7987148">func</span>&nbsp;<span class="ident" id="7987153">DoTest</span><span class="op" id="7987159">(</span><span class="ident" id="7987160">t</span>&nbsp;<span class="op" id="7987162">*</span><span class="ident" id="7987163">testing</span><span class="op" id="7987170">.</span><span class="ident" id="7987171">T</span><span class="op" id="7987172">,</span>&nbsp;<span class="ident" id="7987174">parse</span>&nbsp;<span class="keyword" id="7987180">func</span><span class="op" id="7987184">(</span><span class="builtintype" id="7987185">string</span><span class="op" id="7987191">)</span>&nbsp;<span class="op" id="7987193">(</span><span class="op" id="7987194">*</span><span class="ident" id="7987195">URL</span><span class="op" id="7987198">,</span>&nbsp;<span class="builtintype" id="7987200">error</span><span class="op" id="7987205">)</span><span class="op" id="7987206">,</span>&nbsp;<span class="ident" id="7987208">name</span>&nbsp;<span class="builtintype" id="7987213">string</span><span class="op" id="7987219">,</span>&nbsp;<span class="ident" id="7987221">tests</span>&nbsp;<span class="op" id="7987227">[</span><span class="op" id="7987228">]</span><span class="ident" id="7987229">URLTest</span><span class="op" id="7987236">)</span>&nbsp;<span class="op" id="7987238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987241">for</span>&nbsp;<span class="ident" id="7987245">_</span><span class="op" id="7987246">,</span>&nbsp;<span class="ident" id="7987248">tt</span>&nbsp;<span class="op" id="7987251">:=</span>&nbsp;<span class="keyword" id="7987254">range</span>&nbsp;<span class="ident" id="7987260">tests</span>&nbsp;<span class="op" id="7987266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987270">u</span><span class="op" id="7987271">,</span>&nbsp;<span class="ident" id="7987273">err</span>&nbsp;<span class="op" id="7987277">:=</span>&nbsp;<span class="ident" id="7987280">parse</span><span class="op" id="7987285">(</span><span class="ident" id="7987286">tt</span><span class="op" id="7987288">.</span><span class="ident" id="7987289">in</span><span class="op" id="7987291">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987295">if</span>&nbsp;<span class="ident" id="7987298">err</span>&nbsp;<span class="op" id="7987302">!=</span>&nbsp;<span class="ident" id="7987305">nil</span>&nbsp;<span class="op" id="7987309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987314">t</span><span class="op" id="7987315">.</span><span class="ident" id="7987316">Errorf</span><span class="op" id="7987322">(</span><span class="string" id="7987323">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7987349">,</span>&nbsp;<span class="ident" id="7987351">name</span><span class="op" id="7987355">,</span>&nbsp;<span class="ident" id="7987357">tt</span><span class="op" id="7987359">.</span><span class="ident" id="7987360">in</span><span class="op" id="7987362">,</span>&nbsp;<span class="ident" id="7987364">err</span><span class="op" id="7987367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987372">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987387">if</span>&nbsp;<span class="op" id="7987390">!</span><span class="ident" id="7987391">reflect</span><span class="op" id="7987398">.</span><span class="ident" id="7987399">DeepEqual</span><span class="op" id="7987408">(</span><span class="ident" id="7987409">u</span><span class="op" id="7987410">,</span>&nbsp;<span class="ident" id="7987412">tt</span><span class="op" id="7987414">.</span><span class="ident" id="7987415">out</span><span class="op" id="7987418">)</span>&nbsp;<span class="op" id="7987420">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987425">t</span><span class="op" id="7987426">.</span><span class="ident" id="7987427">Errorf</span><span class="op" id="7987433">(</span><span class="string" id="7987434">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7987467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987473">name</span><span class="op" id="7987477">,</span>&nbsp;<span class="ident" id="7987479">tt</span><span class="op" id="7987481">.</span><span class="ident" id="7987482">in</span><span class="op" id="7987484">,</span>&nbsp;<span class="ident" id="7987486">ufmt</span><span class="op" id="7987490">(</span><span class="ident" id="7987491">u</span><span class="op" id="7987492">)</span><span class="op" id="7987493">,</span>&nbsp;<span class="ident" id="7987495">ufmt</span><span class="op" id="7987499">(</span><span class="ident" id="7987500">tt</span><span class="op" id="7987502">.</span><span class="ident" id="7987503">out</span><span class="op" id="7987506">)</span><span class="op" id="7987507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987514">}</span><br>
<span class="lineno"></span><span class="op" id="7987516">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7987519">func</span>&nbsp;<span class="ident" id="7987524">BenchmarkString</span><span class="op" id="7987539">(</span><span class="ident" id="7987540">b</span>&nbsp;<span class="op" id="7987542">*</span><span class="ident" id="7987543">testing</span><span class="op" id="7987550">.</span><span class="ident" id="7987551">B</span><span class="op" id="7987552">)</span>&nbsp;<span class="op" id="7987554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987557">b</span><span class="op" id="7987558">.</span><span class="ident" id="7987559">StopTimer</span><span class="op" id="7987568">(</span><span class="op" id="7987569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987572">b</span><span class="op" id="7987573">.</span><span class="ident" id="7987574">ReportAllocs</span><span class="op" id="7987586">(</span><span class="op" id="7987587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987590">for</span>&nbsp;<span class="ident" id="7987594">_</span><span class="op" id="7987595">,</span>&nbsp;<span class="ident" id="7987597">tt</span>&nbsp;<span class="op" id="7987600">:=</span>&nbsp;<span class="keyword" id="7987603">range</span>&nbsp;<span class="ident" id="7987609">urltests</span>&nbsp;<span class="op" id="7987618">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987622">u</span><span class="op" id="7987623">,</span>&nbsp;<span class="ident" id="7987625">err</span>&nbsp;<span class="op" id="7987629">:=</span>&nbsp;<span class="ident" id="7987632">Parse</span><span class="op" id="7987637">(</span><span class="ident" id="7987638">tt</span><span class="op" id="7987640">.</span><span class="ident" id="7987641">in</span><span class="op" id="7987643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987647">if</span>&nbsp;<span class="ident" id="7987650">err</span>&nbsp;<span class="op" id="7987654">!=</span>&nbsp;<span class="ident" id="7987657">nil</span>&nbsp;<span class="op" id="7987661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987666">b</span><span class="op" id="7987667">.</span><span class="ident" id="7987668">Errorf</span><span class="op" id="7987674">(</span><span class="string" id="7987675">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7987704">,</span>&nbsp;<span class="ident" id="7987706">tt</span><span class="op" id="7987708">.</span><span class="ident" id="7987709">in</span><span class="op" id="7987711">,</span>&nbsp;<span class="ident" id="7987713">err</span><span class="op" id="7987716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987721">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987732">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987736">if</span>&nbsp;<span class="ident" id="7987739">tt</span><span class="op" id="7987741">.</span><span class="ident" id="7987742">roundtrip</span>&nbsp;<span class="op" id="7987752">==</span>&nbsp;<span class="string" id="7987755">&#34;&#34;</span>&nbsp;<span class="op" id="7987758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987763">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987778">b</span><span class="op" id="7987779">.</span><span class="ident" id="7987780">StartTimer</span><span class="op" id="7987790">(</span><span class="op" id="7987791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987795">var</span>&nbsp;<span class="ident" id="7987799">g</span>&nbsp;<span class="builtintype" id="7987801">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987810">for</span>&nbsp;<span class="ident" id="7987814">i</span>&nbsp;<span class="op" id="7987816">:=</span>&nbsp;<span class="num" id="7987819">0</span><span class="op" id="7987820">;</span>&nbsp;<span class="ident" id="7987822">i</span>&nbsp;<span class="op" id="7987824">&lt;</span>&nbsp;<span class="ident" id="7987826">b</span><span class="op" id="7987827">.</span><span class="ident" id="7987828">N</span><span class="op" id="7987829">;</span>&nbsp;<span class="ident" id="7987831">i</span><span class="op" id="7987832">++</span>&nbsp;<span class="op" id="7987835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987840">g</span>&nbsp;<span class="op" id="7987842">=</span>&nbsp;<span class="ident" id="7987844">u</span><span class="op" id="7987845">.</span><span class="ident" id="7987846">String</span><span class="op" id="7987852">(</span><span class="op" id="7987853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987861">b</span><span class="op" id="7987862">.</span><span class="ident" id="7987863">StopTimer</span><span class="op" id="7987872">(</span><span class="op" id="7987873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987877">if</span>&nbsp;<span class="ident" id="7987880">w</span>&nbsp;<span class="op" id="7987882">:=</span>&nbsp;<span class="ident" id="7987885">tt</span><span class="op" id="7987887">.</span><span class="ident" id="7987888">roundtrip</span><span class="op" id="7987897">;</span>&nbsp;<span class="ident" id="7987899">g</span>&nbsp;<span class="op" id="7987901">!=</span>&nbsp;<span class="ident" id="7987904">w</span>&nbsp;<span class="op" id="7987906">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987911">b</span><span class="op" id="7987912">.</span><span class="ident" id="7987913">Errorf</span><span class="op" id="7987919">(</span><span class="string" id="7987920">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7987955">,</span>&nbsp;<span class="ident" id="7987957">tt</span><span class="op" id="7987959">.</span><span class="ident" id="7987960">in</span><span class="op" id="7987962">,</span>&nbsp;<span class="ident" id="7987964">g</span><span class="op" id="7987965">,</span>&nbsp;<span class="ident" id="7987967">w</span><span class="op" id="7987968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987975">}</span><br>
<span class="lineno"></span><span class="op" id="7987977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7987980">func</span>&nbsp;<span class="ident" id="7987985">TestParse</span><span class="op" id="7987994">(</span><span class="ident" id="7987995">t</span>&nbsp;<span class="op" id="7987997">*</span><span class="ident" id="7987998">testing</span><span class="op" id="7988005">.</span><span class="ident" id="7988006">T</span><span class="op" id="7988007">)</span>&nbsp;<span class="op" id="7988009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988012">DoTest</span><span class="op" id="7988018">(</span><span class="ident" id="7988019">t</span><span class="op" id="7988020">,</span>&nbsp;<span class="ident" id="7988022">Parse</span><span class="op" id="7988027">,</span>&nbsp;<span class="string" id="7988029">&#34;Parse&#34;</span><span class="op" id="7988036">,</span>&nbsp;<span class="ident" id="7988038">urltests</span><span class="op" id="7988046">)</span><br>
<span class="lineno"></span><span class="op" id="7988048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7988051">const</span>&nbsp;<span class="ident" id="7988057">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7988085">=</span>&nbsp;<span class="string" id="7988087">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7988126">var</span>&nbsp;<span class="ident" id="7988130">parseRequestURLTests</span>&nbsp;<span class="op" id="7988151">=</span>&nbsp;<span class="op" id="7988153">[</span><span class="op" id="7988154">]</span><span class="keyword" id="7988155">struct</span>&nbsp;<span class="op" id="7988162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988165">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7988179">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988187">expectedValid</span>&nbsp;<span class="builtintype" id="7988201">bool</span><br>
<span class="lineno"></span><span class="op" id="7988206">}</span><span class="op" id="7988207">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988210">{</span><span class="string" id="7988211">&#34;http://foo.com&#34;</span><span class="op" id="7988227">,</span>&nbsp;<span class="builtintype" id="7988229">true</span><span class="op" id="7988233">}</span><span class="op" id="7988234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988237">{</span><span class="string" id="7988238">&#34;http://foo.com/&#34;</span><span class="op" id="7988255">,</span>&nbsp;<span class="builtintype" id="7988257">true</span><span class="op" id="7988261">}</span><span class="op" id="7988262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988265">{</span><span class="string" id="7988266">&#34;http://foo.com/path&#34;</span><span class="op" id="7988287">,</span>&nbsp;<span class="builtintype" id="7988289">true</span><span class="op" id="7988293">}</span><span class="op" id="7988294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988297">{</span><span class="string" id="7988298">&#34;/&#34;</span><span class="op" id="7988301">,</span>&nbsp;<span class="builtintype" id="7988303">true</span><span class="op" id="7988307">}</span><span class="op" id="7988308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988311">{</span><span class="ident" id="7988312">pathThatLooksSchemeRelative</span><span class="op" id="7988339">,</span>&nbsp;<span class="builtintype" id="7988341">true</span><span class="op" id="7988345">}</span><span class="op" id="7988346">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988349">{</span><span class="string" id="7988350">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7988395">,</span>&nbsp;<span class="builtintype" id="7988397">true</span><span class="op" id="7988401">}</span><span class="op" id="7988402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988405">{</span><span class="string" id="7988406">&#34;foo.html&#34;</span><span class="op" id="7988416">,</span>&nbsp;<span class="builtintype" id="7988418">false</span><span class="op" id="7988423">}</span><span class="op" id="7988424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988427">{</span><span class="string" id="7988428">&#34;../dir/&#34;</span><span class="op" id="7988437">,</span>&nbsp;<span class="builtintype" id="7988439">false</span><span class="op" id="7988444">}</span><span class="op" id="7988445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988448">{</span><span class="string" id="7988449">&#34;*&#34;</span><span class="op" id="7988452">,</span>&nbsp;<span class="builtintype" id="7988454">true</span><span class="op" id="7988458">}</span><span class="op" id="7988459">,</span><br>
<span class="lineno"></span><span class="op" id="7988461">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7988464">func</span>&nbsp;<span class="ident" id="7988469">TestParseRequestURI</span><span class="op" id="7988488">(</span><span class="ident" id="7988489">t</span>&nbsp;<span class="op" id="7988491">*</span><span class="ident" id="7988492">testing</span><span class="op" id="7988499">.</span><span class="ident" id="7988500">T</span><span class="op" id="7988501">)</span>&nbsp;<span class="op" id="7988503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7988506">for</span>&nbsp;<span class="ident" id="7988510">_</span><span class="op" id="7988511">,</span>&nbsp;<span class="ident" id="7988513">test</span>&nbsp;<span class="op" id="7988518">:=</span>&nbsp;<span class="keyword" id="7988521">range</span>&nbsp;<span class="ident" id="7988527">parseRequestURLTests</span>&nbsp;<span class="op" id="7988548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988552">_</span><span class="op" id="7988553">,</span>&nbsp;<span class="ident" id="7988555">err</span>&nbsp;<span class="op" id="7988559">:=</span>&nbsp;<span class="ident" id="7988562">ParseRequestURI</span><span class="op" id="7988577">(</span><span class="ident" id="7988578">test</span><span class="op" id="7988582">.</span><span class="ident" id="7988583">url</span><span class="op" id="7988586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988590">valid</span>&nbsp;<span class="op" id="7988596">:=</span>&nbsp;<span class="ident" id="7988599">err</span>&nbsp;<span class="op" id="7988603">==</span>&nbsp;<span class="ident" id="7988606">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7988612">if</span>&nbsp;<span class="ident" id="7988615">valid</span>&nbsp;<span class="op" id="7988621">!=</span>&nbsp;<span class="ident" id="7988624">test</span><span class="op" id="7988628">.</span><span class="ident" id="7988629">expectedValid</span>&nbsp;<span class="op" id="7988643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988648">t</span><span class="op" id="7988649">.</span><span class="ident" id="7988650">Errorf</span><span class="op" id="7988656">(</span><span class="string" id="7988657">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7988691">,</span>&nbsp;<span class="ident" id="7988693">test</span><span class="op" id="7988697">.</span><span class="ident" id="7988698">expectedValid</span><span class="op" id="7988711">,</span>&nbsp;<span class="ident" id="7988713">test</span><span class="op" id="7988717">.</span><span class="ident" id="7988718">url</span><span class="op" id="7988721">,</span>&nbsp;<span class="ident" id="7988723">valid</span><span class="op" id="7988728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988739">url</span><span class="op" id="7988742">,</span>&nbsp;<span class="ident" id="7988744">err</span>&nbsp;<span class="op" id="7988748">:=</span>&nbsp;<span class="ident" id="7988751">ParseRequestURI</span><span class="op" id="7988766">(</span><span class="ident" id="7988767">pathThatLooksSchemeRelative</span><span class="op" id="7988794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7988797">if</span>&nbsp;<span class="ident" id="7988800">err</span>&nbsp;<span class="op" id="7988804">!=</span>&nbsp;<span class="ident" id="7988807">nil</span>&nbsp;<span class="op" id="7988811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988815">t</span><span class="op" id="7988816">.</span><span class="ident" id="7988817">Fatalf</span><span class="op" id="7988823">(</span><span class="string" id="7988824">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7988845">,</span>&nbsp;<span class="ident" id="7988847">err</span><span class="op" id="7988850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7988856">if</span>&nbsp;<span class="ident" id="7988859">url</span><span class="op" id="7988862">.</span><span class="ident" id="7988863">Path</span>&nbsp;<span class="op" id="7988868">!=</span>&nbsp;<span class="ident" id="7988871">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7988899">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988903">t</span><span class="op" id="7988904">.</span><span class="ident" id="7988905">Errorf</span><span class="op" id="7988911">(</span><span class="string" id="7988912">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7988938">,</span>&nbsp;<span class="ident" id="7988940">pathThatLooksSchemeRelative</span><span class="op" id="7988967">,</span>&nbsp;<span class="ident" id="7988969">url</span><span class="op" id="7988972">.</span><span class="ident" id="7988973">Path</span><span class="op" id="7988977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988980">}</span><br>
<span class="lineno"></span><span class="op" id="7988982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7988985">func</span>&nbsp;<span class="ident" id="7988990">DoTestString</span><span class="op" id="7989002">(</span><span class="ident" id="7989003">t</span>&nbsp;<span class="op" id="7989005">*</span><span class="ident" id="7989006">testing</span><span class="op" id="7989013">.</span><span class="ident" id="7989014">T</span><span class="op" id="7989015">,</span>&nbsp;<span class="ident" id="7989017">parse</span>&nbsp;<span class="keyword" id="7989023">func</span><span class="op" id="7989027">(</span><span class="builtintype" id="7989028">string</span><span class="op" id="7989034">)</span>&nbsp;<span class="op" id="7989036">(</span><span class="op" id="7989037">*</span><span class="ident" id="7989038">URL</span><span class="op" id="7989041">,</span>&nbsp;<span class="builtintype" id="7989043">error</span><span class="op" id="7989048">)</span><span class="op" id="7989049">,</span>&nbsp;<span class="ident" id="7989051">name</span>&nbsp;<span class="builtintype" id="7989056">string</span><span class="op" id="7989062">,</span>&nbsp;<span class="ident" id="7989064">tests</span>&nbsp;<span class="op" id="7989070">[</span><span class="op" id="7989071">]</span><span class="ident" id="7989072">URLTest</span><span class="op" id="7989079">)</span>&nbsp;<span class="op" id="7989081">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989084">for</span>&nbsp;<span class="ident" id="7989088">_</span><span class="op" id="7989089">,</span>&nbsp;<span class="ident" id="7989091">tt</span>&nbsp;<span class="op" id="7989094">:=</span>&nbsp;<span class="keyword" id="7989097">range</span>&nbsp;<span class="ident" id="7989103">tests</span>&nbsp;<span class="op" id="7989109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989113">u</span><span class="op" id="7989114">,</span>&nbsp;<span class="ident" id="7989116">err</span>&nbsp;<span class="op" id="7989120">:=</span>&nbsp;<span class="ident" id="7989123">parse</span><span class="op" id="7989128">(</span><span class="ident" id="7989129">tt</span><span class="op" id="7989131">.</span><span class="ident" id="7989132">in</span><span class="op" id="7989134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989138">if</span>&nbsp;<span class="ident" id="7989141">err</span>&nbsp;<span class="op" id="7989145">!=</span>&nbsp;<span class="ident" id="7989148">nil</span>&nbsp;<span class="op" id="7989152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989157">t</span><span class="op" id="7989158">.</span><span class="ident" id="7989159">Errorf</span><span class="op" id="7989165">(</span><span class="string" id="7989166">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7989192">,</span>&nbsp;<span class="ident" id="7989194">name</span><span class="op" id="7989198">,</span>&nbsp;<span class="ident" id="7989200">tt</span><span class="op" id="7989202">.</span><span class="ident" id="7989203">in</span><span class="op" id="7989205">,</span>&nbsp;<span class="ident" id="7989207">err</span><span class="op" id="7989210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989215">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989230">expected</span>&nbsp;<span class="op" id="7989239">:=</span>&nbsp;<span class="ident" id="7989242">tt</span><span class="op" id="7989244">.</span><span class="ident" id="7989245">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989250">if</span>&nbsp;<span class="builtinfunc" id="7989253">len</span><span class="op" id="7989256">(</span><span class="ident" id="7989257">tt</span><span class="op" id="7989259">.</span><span class="ident" id="7989260">roundtrip</span><span class="op" id="7989269">)</span>&nbsp;<span class="op" id="7989271">&gt;</span>&nbsp;<span class="num" id="7989273">0</span>&nbsp;<span class="op" id="7989275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989280">expected</span>&nbsp;<span class="op" id="7989289">=</span>&nbsp;<span class="ident" id="7989291">tt</span><span class="op" id="7989293">.</span><span class="ident" id="7989294">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989306">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989310">s</span>&nbsp;<span class="op" id="7989312">:=</span>&nbsp;<span class="ident" id="7989315">u</span><span class="op" id="7989316">.</span><span class="ident" id="7989317">String</span><span class="op" id="7989323">(</span><span class="op" id="7989324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989328">if</span>&nbsp;<span class="ident" id="7989331">s</span>&nbsp;<span class="op" id="7989333">!=</span>&nbsp;<span class="ident" id="7989336">expected</span>&nbsp;<span class="op" id="7989345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989350">t</span><span class="op" id="7989351">.</span><span class="ident" id="7989352">Errorf</span><span class="op" id="7989358">(</span><span class="string" id="7989359">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7989396">,</span>&nbsp;<span class="ident" id="7989398">name</span><span class="op" id="7989402">,</span>&nbsp;<span class="ident" id="7989404">tt</span><span class="op" id="7989406">.</span><span class="ident" id="7989407">in</span><span class="op" id="7989409">,</span>&nbsp;<span class="ident" id="7989411">s</span><span class="op" id="7989412">,</span>&nbsp;<span class="ident" id="7989414">expected</span><span class="op" id="7989422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989429">}</span><br>
<span class="lineno">400</span><span class="op" id="7989431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7989434">func</span>&nbsp;<span class="ident" id="7989439">TestURLString</span><span class="op" id="7989452">(</span><span class="ident" id="7989453">t</span>&nbsp;<span class="op" id="7989455">*</span><span class="ident" id="7989456">testing</span><span class="op" id="7989463">.</span><span class="ident" id="7989464">T</span><span class="op" id="7989465">)</span>&nbsp;<span class="op" id="7989467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989470">DoTestString</span><span class="op" id="7989482">(</span><span class="ident" id="7989483">t</span><span class="op" id="7989484">,</span>&nbsp;<span class="ident" id="7989486">Parse</span><span class="op" id="7989491">,</span>&nbsp;<span class="string" id="7989493">&#34;Parse&#34;</span><span class="op" id="7989500">,</span>&nbsp;<span class="ident" id="7989502">urltests</span><span class="op" id="7989510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7989514">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7989558">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989585">noslash</span>&nbsp;<span class="op" id="7989593">:=</span>&nbsp;<span class="ident" id="7989596">URLTest</span><span class="op" id="7989603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989607">&#34;http://www.google.com/search&#34;</span><span class="op" id="7989637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989641">&amp;</span><span class="ident" id="7989642">URL</span><span class="op" id="7989645">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989650">Scheme</span><span class="op" id="7989656">:</span>&nbsp;<span class="string" id="7989658">&#34;http&#34;</span><span class="op" id="7989664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989669">Host</span><span class="op" id="7989673">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7989677">&#34;www.google.com&#34;</span><span class="op" id="7989693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989698">Path</span><span class="op" id="7989702">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7989706">&#34;search&#34;</span><span class="op" id="7989714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989718">}</span><span class="op" id="7989719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989723">&#34;&#34;</span><span class="op" id="7989725">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989731">s</span>&nbsp;<span class="op" id="7989733">:=</span>&nbsp;<span class="ident" id="7989736">noslash</span><span class="op" id="7989743">.</span><span class="ident" id="7989744">out</span><span class="op" id="7989747">.</span><span class="ident" id="7989748">String</span><span class="op" id="7989754">(</span><span class="op" id="7989755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989758">if</span>&nbsp;<span class="ident" id="7989761">s</span>&nbsp;<span class="op" id="7989763">!=</span>&nbsp;<span class="ident" id="7989766">noslash</span><span class="op" id="7989773">.</span><span class="ident" id="7989774">in</span>&nbsp;<span class="op" id="7989777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989781">t</span><span class="op" id="7989782">.</span><span class="ident" id="7989783">Errorf</span><span class="op" id="7989789">(</span><span class="string" id="7989790">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7989810">,</span>&nbsp;<span class="ident" id="7989812">noslash</span><span class="op" id="7989819">.</span><span class="ident" id="7989820">in</span><span class="op" id="7989822">,</span>&nbsp;<span class="ident" id="7989824">s</span><span class="op" id="7989825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989828">}</span><br>
<span class="lineno">420</span><span class="op" id="7989830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7989833">type</span>&nbsp;<span class="ident" id="7989838">EscapeTest</span>&nbsp;<span class="keyword" id="7989849">struct</span>&nbsp;<span class="op" id="7989856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989859">in</span>&nbsp;&nbsp;<span class="builtintype" id="7989863">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989871">out</span>&nbsp;<span class="builtintype" id="7989875">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989883">err</span>&nbsp;<span class="builtintype" id="7989887">error</span><br>
<span class="lineno"></span><span class="op" id="7989893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7989896">var</span>&nbsp;<span class="ident" id="7989900">unescapeTests</span>&nbsp;<span class="op" id="7989914">=</span>&nbsp;<span class="op" id="7989916">[</span><span class="op" id="7989917">]</span><span class="ident" id="7989918">EscapeTest</span><span class="op" id="7989928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989931">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989935">&#34;&#34;</span><span class="op" id="7989937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989941">&#34;&#34;</span><span class="op" id="7989943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989947">nil</span><span class="op" id="7989950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989953">}</span><span class="op" id="7989954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989957">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989961">&#34;abc&#34;</span><span class="op" id="7989966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989970">&#34;abc&#34;</span><span class="op" id="7989975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989979">nil</span><span class="op" id="7989982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989985">}</span><span class="op" id="7989986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989989">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7989993">&#34;1%41&#34;</span><span class="op" id="7989999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990003">&#34;1A&#34;</span><span class="op" id="7990007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990011">nil</span><span class="op" id="7990014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990017">}</span><span class="op" id="7990018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990021">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990025">&#34;1%41%42%43&#34;</span><span class="op" id="7990037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990041">&#34;1ABC&#34;</span><span class="op" id="7990047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990051">nil</span><span class="op" id="7990054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990057">}</span><span class="op" id="7990058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990061">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990065">&#34;%4a&#34;</span><span class="op" id="7990070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990074">&#34;J&#34;</span><span class="op" id="7990077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990081">nil</span><span class="op" id="7990084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990087">}</span><span class="op" id="7990088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990091">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990095">&#34;%6F&#34;</span><span class="op" id="7990100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990104">&#34;o&#34;</span><span class="op" id="7990107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990111">nil</span><span class="op" id="7990114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990117">}</span><span class="op" id="7990118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990121">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990125">&#34;%&#34;</span><span class="op" id="7990128">,</span>&nbsp;<span class="comment" id="7990130">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990165">&#34;&#34;</span><span class="op" id="7990167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990171">EscapeError</span><span class="op" id="7990182">(</span><span class="string" id="7990183">&#34;%&#34;</span><span class="op" id="7990186">)</span><span class="op" id="7990187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990190">}</span><span class="op" id="7990191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990194">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990198">&#34;%a&#34;</span><span class="op" id="7990202">,</span>&nbsp;<span class="comment" id="7990204">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990239">&#34;&#34;</span><span class="op" id="7990241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990245">EscapeError</span><span class="op" id="7990256">(</span><span class="string" id="7990257">&#34;%a&#34;</span><span class="op" id="7990261">)</span><span class="op" id="7990262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990265">}</span><span class="op" id="7990266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990269">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990273">&#34;%1&#34;</span><span class="op" id="7990277">,</span>&nbsp;<span class="comment" id="7990279">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990314">&#34;&#34;</span><span class="op" id="7990316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990320">EscapeError</span><span class="op" id="7990331">(</span><span class="string" id="7990332">&#34;%1&#34;</span><span class="op" id="7990336">)</span><span class="op" id="7990337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990340">}</span><span class="op" id="7990341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990344">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990348">&#34;123%45%6&#34;</span><span class="op" id="7990358">,</span>&nbsp;<span class="comment" id="7990360">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990395">&#34;&#34;</span><span class="op" id="7990397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990401">EscapeError</span><span class="op" id="7990412">(</span><span class="string" id="7990413">&#34;%6&#34;</span><span class="op" id="7990417">)</span><span class="op" id="7990418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990421">}</span><span class="op" id="7990422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990425">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990429">&#34;%zzzzz&#34;</span><span class="op" id="7990437">,</span>&nbsp;<span class="comment" id="7990439">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990463">&#34;&#34;</span><span class="op" id="7990465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990469">EscapeError</span><span class="op" id="7990480">(</span><span class="string" id="7990481">&#34;%zz&#34;</span><span class="op" id="7990486">)</span><span class="op" id="7990487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990490">}</span><span class="op" id="7990491">,</span><br>
<span class="lineno"></span><span class="op" id="7990493">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7990496">func</span>&nbsp;<span class="ident" id="7990501">TestUnescape</span><span class="op" id="7990513">(</span><span class="ident" id="7990514">t</span>&nbsp;<span class="op" id="7990516">*</span><span class="ident" id="7990517">testing</span><span class="op" id="7990524">.</span><span class="ident" id="7990525">T</span><span class="op" id="7990526">)</span>&nbsp;<span class="op" id="7990528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7990531">for</span>&nbsp;<span class="ident" id="7990535">_</span><span class="op" id="7990536">,</span>&nbsp;<span class="ident" id="7990538">tt</span>&nbsp;<span class="op" id="7990541">:=</span>&nbsp;<span class="keyword" id="7990544">range</span>&nbsp;<span class="ident" id="7990550">unescapeTests</span>&nbsp;<span class="op" id="7990564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990568">actual</span><span class="op" id="7990574">,</span>&nbsp;<span class="ident" id="7990576">err</span>&nbsp;<span class="op" id="7990580">:=</span>&nbsp;<span class="ident" id="7990583">QueryUnescape</span><span class="op" id="7990596">(</span><span class="ident" id="7990597">tt</span><span class="op" id="7990599">.</span><span class="ident" id="7990600">in</span><span class="op" id="7990602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7990606">if</span>&nbsp;<span class="ident" id="7990609">actual</span>&nbsp;<span class="op" id="7990616">!=</span>&nbsp;<span class="ident" id="7990619">tt</span><span class="op" id="7990621">.</span><span class="ident" id="7990622">out</span>&nbsp;<span class="op" id="7990626">||</span>&nbsp;<span class="op" id="7990629">(</span><span class="ident" id="7990630">err</span>&nbsp;<span class="op" id="7990634">!=</span>&nbsp;<span class="ident" id="7990637">nil</span><span class="op" id="7990640">)</span>&nbsp;<span class="op" id="7990642">!=</span>&nbsp;<span class="op" id="7990645">(</span><span class="ident" id="7990646">tt</span><span class="op" id="7990648">.</span><span class="ident" id="7990649">err</span>&nbsp;<span class="op" id="7990653">!=</span>&nbsp;<span class="ident" id="7990656">nil</span><span class="op" id="7990659">)</span>&nbsp;<span class="op" id="7990661">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990666">t</span><span class="op" id="7990667">.</span><span class="ident" id="7990668">Errorf</span><span class="op" id="7990674">(</span><span class="string" id="7990675">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7990716">,</span>&nbsp;<span class="ident" id="7990718">tt</span><span class="op" id="7990720">.</span><span class="ident" id="7990721">in</span><span class="op" id="7990723">,</span>&nbsp;<span class="ident" id="7990725">actual</span><span class="op" id="7990731">,</span>&nbsp;<span class="ident" id="7990733">err</span><span class="op" id="7990736">,</span>&nbsp;<span class="ident" id="7990738">tt</span><span class="op" id="7990740">.</span><span class="ident" id="7990741">out</span><span class="op" id="7990744">,</span>&nbsp;<span class="ident" id="7990746">tt</span><span class="op" id="7990748">.</span><span class="ident" id="7990749">err</span><span class="op" id="7990752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990759">}</span><br>
<span class="lineno"></span><span class="op" id="7990761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7990764">var</span>&nbsp;<span class="ident" id="7990768">escapeTests</span>&nbsp;<span class="op" id="7990780">=</span>&nbsp;<span class="op" id="7990782">[</span><span class="op" id="7990783">]</span><span class="ident" id="7990784">EscapeTest</span><span class="op" id="7990794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990801">&#34;&#34;</span><span class="op" id="7990803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990807">&#34;&#34;</span><span class="op" id="7990809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990813">nil</span><span class="op" id="7990816">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990819">}</span><span class="op" id="7990820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990827">&#34;abc&#34;</span><span class="op" id="7990832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990836">&#34;abc&#34;</span><span class="op" id="7990841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990845">nil</span><span class="op" id="7990848">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990851">}</span><span class="op" id="7990852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990859">&#34;one&nbsp;two&#34;</span><span class="op" id="7990868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990872">&#34;one+two&#34;</span><span class="op" id="7990881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990885">nil</span><span class="op" id="7990888">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990891">}</span><span class="op" id="7990892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990899">&#34;10%&#34;</span><span class="op" id="7990904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990908">&#34;10%25&#34;</span><span class="op" id="7990915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990919">nil</span><span class="op" id="7990922">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990925">}</span><span class="op" id="7990926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7990929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990933">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7990972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990976">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7991078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991082">nil</span><span class="op" id="7991085">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991088">}</span><span class="op" id="7991089">,</span><br>
<span class="lineno"></span><span class="op" id="7991091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991094">func</span>&nbsp;<span class="ident" id="7991099">TestEscape</span><span class="op" id="7991109">(</span><span class="ident" id="7991110">t</span>&nbsp;<span class="op" id="7991112">*</span><span class="ident" id="7991113">testing</span><span class="op" id="7991120">.</span><span class="ident" id="7991121">T</span><span class="op" id="7991122">)</span>&nbsp;<span class="op" id="7991124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991127">for</span>&nbsp;<span class="ident" id="7991131">_</span><span class="op" id="7991132">,</span>&nbsp;<span class="ident" id="7991134">tt</span>&nbsp;<span class="op" id="7991137">:=</span>&nbsp;<span class="keyword" id="7991140">range</span>&nbsp;<span class="ident" id="7991146">escapeTests</span>&nbsp;<span class="op" id="7991158">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991162">actual</span>&nbsp;<span class="op" id="7991169">:=</span>&nbsp;<span class="ident" id="7991172">QueryEscape</span><span class="op" id="7991183">(</span><span class="ident" id="7991184">tt</span><span class="op" id="7991186">.</span><span class="ident" id="7991187">in</span><span class="op" id="7991189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991193">if</span>&nbsp;<span class="ident" id="7991196">tt</span><span class="op" id="7991198">.</span><span class="ident" id="7991199">out</span>&nbsp;<span class="op" id="7991203">!=</span>&nbsp;<span class="ident" id="7991206">actual</span>&nbsp;<span class="op" id="7991213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991218">t</span><span class="op" id="7991219">.</span><span class="ident" id="7991220">Errorf</span><span class="op" id="7991226">(</span><span class="string" id="7991227">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7991258">,</span>&nbsp;<span class="ident" id="7991260">tt</span><span class="op" id="7991262">.</span><span class="ident" id="7991263">in</span><span class="op" id="7991265">,</span>&nbsp;<span class="ident" id="7991267">actual</span><span class="op" id="7991273">,</span>&nbsp;<span class="ident" id="7991275">tt</span><span class="op" id="7991277">.</span><span class="ident" id="7991278">out</span><span class="op" id="7991281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7991290">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991357">roundtrip</span><span class="op" id="7991366">,</span>&nbsp;<span class="ident" id="7991368">err</span>&nbsp;<span class="op" id="7991372">:=</span>&nbsp;<span class="ident" id="7991375">QueryUnescape</span><span class="op" id="7991388">(</span><span class="ident" id="7991389">actual</span><span class="op" id="7991395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991399">if</span>&nbsp;<span class="ident" id="7991402">roundtrip</span>&nbsp;<span class="op" id="7991412">!=</span>&nbsp;<span class="ident" id="7991415">tt</span><span class="op" id="7991417">.</span><span class="ident" id="7991418">in</span>&nbsp;<span class="op" id="7991421">||</span>&nbsp;<span class="ident" id="7991424">err</span>&nbsp;<span class="op" id="7991428">!=</span>&nbsp;<span class="ident" id="7991431">nil</span>&nbsp;<span class="op" id="7991435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991440">t</span><span class="op" id="7991441">.</span><span class="ident" id="7991442">Errorf</span><span class="op" id="7991448">(</span><span class="string" id="7991449">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7991490">,</span>&nbsp;<span class="ident" id="7991492">actual</span><span class="op" id="7991498">,</span>&nbsp;<span class="ident" id="7991500">roundtrip</span><span class="op" id="7991509">,</span>&nbsp;<span class="ident" id="7991511">err</span><span class="op" id="7991514">,</span>&nbsp;<span class="ident" id="7991516">tt</span><span class="op" id="7991518">.</span><span class="ident" id="7991519">in</span><span class="op" id="7991521">,</span>&nbsp;<span class="string" id="7991523">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7991535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991539">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991542">}</span><br>
<span class="lineno"></span><span class="op" id="7991544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7991547">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7991585">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7991627">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7991680">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7991763">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991768">type</span>&nbsp;<span class="ident" id="7991773">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7991789">struct</span>&nbsp;<span class="op" id="7991796">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991799">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7991808">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991816">expected</span>&nbsp;<span class="builtintype" id="7991825">string</span><br>
<span class="lineno"></span><span class="op" id="7991832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7991835">var</span>&nbsp;<span class="ident" id="7991839">encodeQueryTests</span>&nbsp;<span class="op" id="7991856">=</span>&nbsp;<span class="op" id="7991858">[</span><span class="op" id="7991859">]</span><span class="ident" id="7991860">EncodeQueryTest</span><span class="op" id="7991875">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991878">{</span><span class="ident" id="7991879">nil</span><span class="op" id="7991882">,</span>&nbsp;<span class="string" id="7991884">&#34;&#34;</span><span class="op" id="7991886">}</span><span class="op" id="7991887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991890">{</span><span class="ident" id="7991891">Values</span><span class="op" id="7991897">{</span><span class="string" id="7991898">&#34;q&#34;</span><span class="op" id="7991901">:</span>&nbsp;<span class="op" id="7991903">{</span><span class="string" id="7991904">&#34;puppies&#34;</span><span class="op" id="7991913">}</span><span class="op" id="7991914">,</span>&nbsp;<span class="string" id="7991916">&#34;oe&#34;</span><span class="op" id="7991920">:</span>&nbsp;<span class="op" id="7991922">{</span><span class="string" id="7991923">&#34;utf8&#34;</span><span class="op" id="7991929">}</span><span class="op" id="7991930">}</span><span class="op" id="7991931">,</span>&nbsp;<span class="string" id="7991933">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7991952">}</span><span class="op" id="7991953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991956">{</span><span class="ident" id="7991957">Values</span><span class="op" id="7991963">{</span><span class="string" id="7991964">&#34;q&#34;</span><span class="op" id="7991967">:</span>&nbsp;<span class="op" id="7991969">{</span><span class="string" id="7991970">&#34;dogs&#34;</span><span class="op" id="7991976">,</span>&nbsp;<span class="string" id="7991978">&#34;&amp;&#34;</span><span class="op" id="7991981">,</span>&nbsp;<span class="string" id="7991983">&#34;7&#34;</span><span class="op" id="7991986">}</span><span class="op" id="7991987">}</span><span class="op" id="7991988">,</span>&nbsp;<span class="string" id="7991990">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7992008">}</span><span class="op" id="7992009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992012">{</span><span class="ident" id="7992013">Values</span><span class="op" id="7992019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7992023">&#34;a&#34;</span><span class="op" id="7992026">:</span>&nbsp;<span class="op" id="7992028">{</span><span class="string" id="7992029">&#34;a1&#34;</span><span class="op" id="7992033">,</span>&nbsp;<span class="string" id="7992035">&#34;a2&#34;</span><span class="op" id="7992039">,</span>&nbsp;<span class="string" id="7992041">&#34;a3&#34;</span><span class="op" id="7992045">}</span><span class="op" id="7992046">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7992050">&#34;b&#34;</span><span class="op" id="7992053">:</span>&nbsp;<span class="op" id="7992055">{</span><span class="string" id="7992056">&#34;b1&#34;</span><span class="op" id="7992060">,</span>&nbsp;<span class="string" id="7992062">&#34;b2&#34;</span><span class="op" id="7992066">,</span>&nbsp;<span class="string" id="7992068">&#34;b3&#34;</span><span class="op" id="7992072">}</span><span class="op" id="7992073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7992077">&#34;c&#34;</span><span class="op" id="7992080">:</span>&nbsp;<span class="op" id="7992082">{</span><span class="string" id="7992083">&#34;c1&#34;</span><span class="op" id="7992087">,</span>&nbsp;<span class="string" id="7992089">&#34;c2&#34;</span><span class="op" id="7992093">,</span>&nbsp;<span class="string" id="7992095">&#34;c3&#34;</span><span class="op" id="7992099">}</span><span class="op" id="7992100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992103">}</span><span class="op" id="7992104">,</span>&nbsp;<span class="string" id="7992106">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7992152">}</span><span class="op" id="7992153">,</span><br>
<span class="lineno"></span><span class="op" id="7992155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7992158">func</span>&nbsp;<span class="ident" id="7992163">TestEncodeQuery</span><span class="op" id="7992178">(</span><span class="ident" id="7992179">t</span>&nbsp;<span class="op" id="7992181">*</span><span class="ident" id="7992182">testing</span><span class="op" id="7992189">.</span><span class="ident" id="7992190">T</span><span class="op" id="7992191">)</span>&nbsp;<span class="op" id="7992193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992196">for</span>&nbsp;<span class="ident" id="7992200">_</span><span class="op" id="7992201">,</span>&nbsp;<span class="ident" id="7992203">tt</span>&nbsp;<span class="op" id="7992206">:=</span>&nbsp;<span class="keyword" id="7992209">range</span>&nbsp;<span class="ident" id="7992215">encodeQueryTests</span>&nbsp;<span class="op" id="7992232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992236">if</span>&nbsp;<span class="ident" id="7992239">q</span>&nbsp;<span class="op" id="7992241">:=</span>&nbsp;<span class="ident" id="7992244">tt</span><span class="op" id="7992246">.</span><span class="ident" id="7992247">m</span><span class="op" id="7992248">.</span><span class="ident" id="7992249">Encode</span><span class="op" id="7992255">(</span><span class="op" id="7992256">)</span><span class="op" id="7992257">;</span>&nbsp;<span class="ident" id="7992259">q</span>&nbsp;<span class="op" id="7992261">!=</span>&nbsp;<span class="ident" id="7992264">tt</span><span class="op" id="7992266">.</span><span class="ident" id="7992267">expected</span>&nbsp;<span class="op" id="7992276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992281">t</span><span class="op" id="7992282">.</span><span class="ident" id="7992283">Errorf</span><span class="op" id="7992289">(</span><span class="string" id="7992290">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7992322">,</span>&nbsp;<span class="ident" id="7992324">tt</span><span class="op" id="7992326">.</span><span class="ident" id="7992327">m</span><span class="op" id="7992328">,</span>&nbsp;<span class="ident" id="7992330">q</span><span class="op" id="7992331">,</span>&nbsp;<span class="ident" id="7992333">tt</span><span class="op" id="7992335">.</span><span class="ident" id="7992336">expected</span><span class="op" id="7992344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992348">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992351">}</span><br>
<span class="lineno"></span><span class="op" id="7992353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992356">var</span>&nbsp;<span class="ident" id="7992360">resolvePathTests</span>&nbsp;<span class="op" id="7992377">=</span>&nbsp;<span class="op" id="7992379">[</span><span class="op" id="7992380">]</span><span class="keyword" id="7992381">struct</span>&nbsp;<span class="op" id="7992388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992391">base</span><span class="op" id="7992395">,</span>&nbsp;<span class="ident" id="7992397">ref</span><span class="op" id="7992400">,</span>&nbsp;<span class="ident" id="7992402">expected</span>&nbsp;<span class="builtintype" id="7992411">string</span><br>
<span class="lineno">570</span><span class="op" id="7992418">}</span><span class="op" id="7992419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992422">{</span><span class="string" id="7992423">&#34;a/b&#34;</span><span class="op" id="7992428">,</span>&nbsp;<span class="string" id="7992430">&#34;.&#34;</span><span class="op" id="7992433">,</span>&nbsp;<span class="string" id="7992435">&#34;/a/&#34;</span><span class="op" id="7992440">}</span><span class="op" id="7992441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992444">{</span><span class="string" id="7992445">&#34;a/b&#34;</span><span class="op" id="7992450">,</span>&nbsp;<span class="string" id="7992452">&#34;c&#34;</span><span class="op" id="7992455">,</span>&nbsp;<span class="string" id="7992457">&#34;/a/c&#34;</span><span class="op" id="7992463">}</span><span class="op" id="7992464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992467">{</span><span class="string" id="7992468">&#34;a/b&#34;</span><span class="op" id="7992473">,</span>&nbsp;<span class="string" id="7992475">&#34;..&#34;</span><span class="op" id="7992479">,</span>&nbsp;<span class="string" id="7992481">&#34;/&#34;</span><span class="op" id="7992484">}</span><span class="op" id="7992485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992488">{</span><span class="string" id="7992489">&#34;a/&#34;</span><span class="op" id="7992493">,</span>&nbsp;<span class="string" id="7992495">&#34;..&#34;</span><span class="op" id="7992499">,</span>&nbsp;<span class="string" id="7992501">&#34;/&#34;</span><span class="op" id="7992504">}</span><span class="op" id="7992505">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992508">{</span><span class="string" id="7992509">&#34;a/&#34;</span><span class="op" id="7992513">,</span>&nbsp;<span class="string" id="7992515">&#34;../..&#34;</span><span class="op" id="7992522">,</span>&nbsp;<span class="string" id="7992524">&#34;/&#34;</span><span class="op" id="7992527">}</span><span class="op" id="7992528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992531">{</span><span class="string" id="7992532">&#34;a/b/c&#34;</span><span class="op" id="7992539">,</span>&nbsp;<span class="string" id="7992541">&#34;..&#34;</span><span class="op" id="7992545">,</span>&nbsp;<span class="string" id="7992547">&#34;/a/&#34;</span><span class="op" id="7992552">}</span><span class="op" id="7992553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992556">{</span><span class="string" id="7992557">&#34;a/b/c&#34;</span><span class="op" id="7992564">,</span>&nbsp;<span class="string" id="7992566">&#34;../d&#34;</span><span class="op" id="7992572">,</span>&nbsp;<span class="string" id="7992574">&#34;/a/d&#34;</span><span class="op" id="7992580">}</span><span class="op" id="7992581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992584">{</span><span class="string" id="7992585">&#34;a/b/c&#34;</span><span class="op" id="7992592">,</span>&nbsp;<span class="string" id="7992594">&#34;.././d&#34;</span><span class="op" id="7992602">,</span>&nbsp;<span class="string" id="7992604">&#34;/a/d&#34;</span><span class="op" id="7992610">}</span><span class="op" id="7992611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992614">{</span><span class="string" id="7992615">&#34;a/b&#34;</span><span class="op" id="7992620">,</span>&nbsp;<span class="string" id="7992622">&#34;./..&#34;</span><span class="op" id="7992628">,</span>&nbsp;<span class="string" id="7992630">&#34;/&#34;</span><span class="op" id="7992633">}</span><span class="op" id="7992634">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992637">{</span><span class="string" id="7992638">&#34;a/./b&#34;</span><span class="op" id="7992645">,</span>&nbsp;<span class="string" id="7992647">&#34;.&#34;</span><span class="op" id="7992650">,</span>&nbsp;<span class="string" id="7992652">&#34;/a/&#34;</span><span class="op" id="7992657">}</span><span class="op" id="7992658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992661">{</span><span class="string" id="7992662">&#34;a/../&#34;</span><span class="op" id="7992669">,</span>&nbsp;<span class="string" id="7992671">&#34;.&#34;</span><span class="op" id="7992674">,</span>&nbsp;<span class="string" id="7992676">&#34;/&#34;</span><span class="op" id="7992679">}</span><span class="op" id="7992680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992683">{</span><span class="string" id="7992684">&#34;a/.././b&#34;</span><span class="op" id="7992694">,</span>&nbsp;<span class="string" id="7992696">&#34;c&#34;</span><span class="op" id="7992699">,</span>&nbsp;<span class="string" id="7992701">&#34;/c&#34;</span><span class="op" id="7992705">}</span><span class="op" id="7992706">,</span><br>
<span class="lineno"></span><span class="op" id="7992708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7992711">func</span>&nbsp;<span class="ident" id="7992716">TestResolvePath</span><span class="op" id="7992731">(</span><span class="ident" id="7992732">t</span>&nbsp;<span class="op" id="7992734">*</span><span class="ident" id="7992735">testing</span><span class="op" id="7992742">.</span><span class="ident" id="7992743">T</span><span class="op" id="7992744">)</span>&nbsp;<span class="op" id="7992746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992749">for</span>&nbsp;<span class="ident" id="7992753">_</span><span class="op" id="7992754">,</span>&nbsp;<span class="ident" id="7992756">test</span>&nbsp;<span class="op" id="7992761">:=</span>&nbsp;<span class="keyword" id="7992764">range</span>&nbsp;<span class="ident" id="7992770">resolvePathTests</span>&nbsp;<span class="op" id="7992787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992791">got</span>&nbsp;<span class="op" id="7992795">:=</span>&nbsp;<span class="ident" id="7992798">resolvePath</span><span class="op" id="7992809">(</span><span class="ident" id="7992810">test</span><span class="op" id="7992814">.</span><span class="ident" id="7992815">base</span><span class="op" id="7992819">,</span>&nbsp;<span class="ident" id="7992821">test</span><span class="op" id="7992825">.</span><span class="ident" id="7992826">ref</span><span class="op" id="7992829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7992833">if</span>&nbsp;<span class="ident" id="7992836">got</span>&nbsp;<span class="op" id="7992840">!=</span>&nbsp;<span class="ident" id="7992843">test</span><span class="op" id="7992847">.</span><span class="ident" id="7992848">expected</span>&nbsp;<span class="op" id="7992857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992862">t</span><span class="op" id="7992863">.</span><span class="ident" id="7992864">Errorf</span><span class="op" id="7992870">(</span><span class="string" id="7992871">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7992904">,</span>&nbsp;<span class="ident" id="7992906">test</span><span class="op" id="7992910">.</span><span class="ident" id="7992911">base</span><span class="op" id="7992915">,</span>&nbsp;<span class="ident" id="7992917">test</span><span class="op" id="7992921">.</span><span class="ident" id="7992922">ref</span><span class="op" id="7992925">,</span>&nbsp;<span class="ident" id="7992927">got</span><span class="op" id="7992930">,</span>&nbsp;<span class="ident" id="7992932">test</span><span class="op" id="7992936">.</span><span class="ident" id="7992937">expected</span><span class="op" id="7992945">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992952">}</span><br>
<span class="lineno"></span><span class="op" id="7992954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7992957">var</span>&nbsp;<span class="ident" id="7992961">resolveReferenceTests</span>&nbsp;<span class="op" id="7992983">=</span>&nbsp;<span class="op" id="7992985">[</span><span class="op" id="7992986">]</span><span class="keyword" id="7992987">struct</span>&nbsp;<span class="op" id="7992994">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7992997">base</span><span class="op" id="7993001">,</span>&nbsp;<span class="ident" id="7993003">rel</span><span class="op" id="7993006">,</span>&nbsp;<span class="ident" id="7993008">expected</span>&nbsp;<span class="builtintype" id="7993017">string</span><br>
<span class="lineno"></span><span class="op" id="7993024">}</span><span class="op" id="7993025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993028">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993056">{</span><span class="string" id="7993057">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7993077">,</span>&nbsp;<span class="string" id="7993079">&#34;https://bar.com/&#34;</span><span class="op" id="7993097">,</span>&nbsp;<span class="string" id="7993099">&#34;https://bar.com/&#34;</span><span class="op" id="7993117">}</span><span class="op" id="7993118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993121">{</span><span class="string" id="7993122">&#34;http://foo.com/&#34;</span><span class="op" id="7993139">,</span>&nbsp;<span class="string" id="7993141">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7993163">,</span>&nbsp;<span class="string" id="7993165">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7993187">}</span><span class="op" id="7993188">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993191">{</span><span class="string" id="7993192">&#34;http://foo.com/bar&#34;</span><span class="op" id="7993212">,</span>&nbsp;<span class="string" id="7993214">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7993238">,</span>&nbsp;<span class="string" id="7993240">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7993264">}</span><span class="op" id="7993265">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993269">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993298">{</span><span class="string" id="7993299">&#34;http://foo.com/bar&#34;</span><span class="op" id="7993319">,</span>&nbsp;<span class="string" id="7993321">&#34;/baz&#34;</span><span class="op" id="7993327">,</span>&nbsp;<span class="string" id="7993329">&#34;http://foo.com/baz&#34;</span><span class="op" id="7993349">}</span><span class="op" id="7993350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993353">{</span><span class="string" id="7993354">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7993380">,</span>&nbsp;<span class="string" id="7993382">&#34;/baz&#34;</span><span class="op" id="7993388">,</span>&nbsp;<span class="string" id="7993390">&#34;http://foo.com/baz&#34;</span><span class="op" id="7993410">}</span><span class="op" id="7993411">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993414">{</span><span class="string" id="7993415">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7993439">,</span>&nbsp;<span class="string" id="7993441">&#34;/baz?c=d&#34;</span><span class="op" id="7993451">,</span>&nbsp;<span class="string" id="7993453">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7993477">}</span><span class="op" id="7993478">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993482">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993502">{</span><span class="string" id="7993503">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7993528">,</span>&nbsp;<span class="string" id="7993530">&#34;//bar.com/quux&#34;</span><span class="op" id="7993546">,</span>&nbsp;<span class="string" id="7993548">&#34;https://bar.com/quux&#34;</span><span class="op" id="7993570">}</span><span class="op" id="7993571">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993575">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993606">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993632">{</span><span class="string" id="7993633">&#34;http://foo.com&#34;</span><span class="op" id="7993649">,</span>&nbsp;<span class="string" id="7993651">&#34;.&#34;</span><span class="op" id="7993654">,</span>&nbsp;<span class="string" id="7993656">&#34;http://foo.com/&#34;</span><span class="op" id="7993673">}</span><span class="op" id="7993674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993677">{</span><span class="string" id="7993678">&#34;http://foo.com/bar&#34;</span><span class="op" id="7993698">,</span>&nbsp;<span class="string" id="7993700">&#34;.&#34;</span><span class="op" id="7993703">,</span>&nbsp;<span class="string" id="7993705">&#34;http://foo.com/&#34;</span><span class="op" id="7993722">}</span><span class="op" id="7993723">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993726">{</span><span class="string" id="7993727">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7993748">,</span>&nbsp;<span class="string" id="7993750">&#34;.&#34;</span><span class="op" id="7993753">,</span>&nbsp;<span class="string" id="7993755">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7993776">}</span><span class="op" id="7993777">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993781">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993800">{</span><span class="string" id="7993801">&#34;http://foo.com&#34;</span><span class="op" id="7993817">,</span>&nbsp;<span class="string" id="7993819">&#34;bar&#34;</span><span class="op" id="7993824">,</span>&nbsp;<span class="string" id="7993826">&#34;http://foo.com/bar&#34;</span><span class="op" id="7993846">}</span><span class="op" id="7993847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993850">{</span><span class="string" id="7993851">&#34;http://foo.com/&#34;</span><span class="op" id="7993868">,</span>&nbsp;<span class="string" id="7993870">&#34;bar&#34;</span><span class="op" id="7993875">,</span>&nbsp;<span class="string" id="7993877">&#34;http://foo.com/bar&#34;</span><span class="op" id="7993897">}</span><span class="op" id="7993898">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993901">{</span><span class="string" id="7993902">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7993926">,</span>&nbsp;<span class="string" id="7993928">&#34;quux&#34;</span><span class="op" id="7993934">,</span>&nbsp;<span class="string" id="7993936">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7993961">}</span><span class="op" id="7993962">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7993966">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7993983">{</span><span class="string" id="7993984">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994008">,</span>&nbsp;<span class="string" id="7994010">&#34;../quux&#34;</span><span class="op" id="7994019">,</span>&nbsp;<span class="string" id="7994021">&#34;http://foo.com/quux&#34;</span><span class="op" id="7994042">}</span><span class="op" id="7994043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994046">{</span><span class="string" id="7994047">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994071">,</span>&nbsp;<span class="string" id="7994073">&#34;../../../../../quux&#34;</span><span class="op" id="7994094">,</span>&nbsp;<span class="string" id="7994096">&#34;http://foo.com/quux&#34;</span><span class="op" id="7994117">}</span><span class="op" id="7994118">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994121">{</span><span class="string" id="7994122">&#34;http://foo.com/bar&#34;</span><span class="op" id="7994142">,</span>&nbsp;<span class="string" id="7994144">&#34;..&#34;</span><span class="op" id="7994148">,</span>&nbsp;<span class="string" id="7994150">&#34;http://foo.com/&#34;</span><span class="op" id="7994167">}</span><span class="op" id="7994168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994171">{</span><span class="string" id="7994172">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994196">,</span>&nbsp;<span class="string" id="7994198">&#34;./..&#34;</span><span class="op" id="7994204">,</span>&nbsp;<span class="string" id="7994206">&#34;http://foo.com/&#34;</span><span class="op" id="7994223">}</span><span class="op" id="7994224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7994227">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994263">{</span><span class="string" id="7994264">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994288">,</span>&nbsp;<span class="string" id="7994290">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7994311">,</span>&nbsp;<span class="string" id="7994313">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994343">}</span><span class="op" id="7994344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994347">{</span><span class="string" id="7994348">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994372">,</span>&nbsp;<span class="string" id="7994374">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7994397">,</span>&nbsp;<span class="string" id="7994399">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994429">}</span><span class="op" id="7994430">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994433">{</span><span class="string" id="7994434">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994458">,</span>&nbsp;<span class="string" id="7994460">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7994485">,</span>&nbsp;<span class="string" id="7994487">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994517">}</span><span class="op" id="7994518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994521">{</span><span class="string" id="7994522">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994546">,</span>&nbsp;<span class="string" id="7994548">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7994573">,</span>&nbsp;<span class="string" id="7994575">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994605">}</span><span class="op" id="7994606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994609">{</span><span class="string" id="7994610">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994634">,</span>&nbsp;<span class="string" id="7994636">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7994673">,</span>&nbsp;<span class="string" id="7994675">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994705">}</span><span class="op" id="7994706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994709">{</span><span class="string" id="7994710">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994734">,</span>&nbsp;<span class="string" id="7994736">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7994773">,</span>&nbsp;<span class="string" id="7994775">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994805">}</span><span class="op" id="7994806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994809">{</span><span class="string" id="7994810">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994834">,</span>&nbsp;<span class="string" id="7994836">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7994887">,</span>&nbsp;<span class="string" id="7994889">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7994919">}</span><span class="op" id="7994920">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7994923">{</span><span class="string" id="7994924">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7994948">,</span>&nbsp;<span class="string" id="7994950">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7994992">,</span>&nbsp;<span class="string" id="7994994">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7995024">}</span><span class="op" id="7995025">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995029">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995090">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995143">{</span><span class="string" id="7995144">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7995184">,</span>&nbsp;<span class="string" id="7995186">&#34;../baz&#34;</span><span class="op" id="7995194">,</span>&nbsp;<span class="string" id="7995196">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7995220">}</span><span class="op" id="7995221">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995225">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995254">{</span><span class="string" id="7995255">&#34;http://foo.com/bar&#34;</span><span class="op" id="7995275">,</span>&nbsp;<span class="string" id="7995277">&#34;...&#34;</span><span class="op" id="7995282">,</span>&nbsp;<span class="string" id="7995284">&#34;http://foo.com/...&#34;</span><span class="op" id="7995304">}</span><span class="op" id="7995305">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995309">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995322">{</span><span class="string" id="7995323">&#34;http://foo.com/bar&#34;</span><span class="op" id="7995343">,</span>&nbsp;<span class="string" id="7995345">&#34;.#frag&#34;</span><span class="op" id="7995353">,</span>&nbsp;<span class="string" id="7995355">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7995377">}</span><span class="op" id="7995378">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995382">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7995412">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995465">{</span><span class="string" id="7995466">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995486">,</span>&nbsp;<span class="string" id="7995488">&#34;g:h&#34;</span><span class="op" id="7995493">,</span>&nbsp;<span class="string" id="7995495">&#34;g:h&#34;</span><span class="op" id="7995500">}</span><span class="op" id="7995501">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995504">{</span><span class="string" id="7995505">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995525">,</span>&nbsp;<span class="string" id="7995527">&#34;g&#34;</span><span class="op" id="7995530">,</span>&nbsp;<span class="string" id="7995532">&#34;http://a/b/c/g&#34;</span><span class="op" id="7995548">}</span><span class="op" id="7995549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995552">{</span><span class="string" id="7995553">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995573">,</span>&nbsp;<span class="string" id="7995575">&#34;./g&#34;</span><span class="op" id="7995580">,</span>&nbsp;<span class="string" id="7995582">&#34;http://a/b/c/g&#34;</span><span class="op" id="7995598">}</span><span class="op" id="7995599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995602">{</span><span class="string" id="7995603">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995623">,</span>&nbsp;<span class="string" id="7995625">&#34;g/&#34;</span><span class="op" id="7995629">,</span>&nbsp;<span class="string" id="7995631">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7995648">}</span><span class="op" id="7995649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995652">{</span><span class="string" id="7995653">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995673">,</span>&nbsp;<span class="string" id="7995675">&#34;/g&#34;</span><span class="op" id="7995679">,</span>&nbsp;<span class="string" id="7995681">&#34;http://a/g&#34;</span><span class="op" id="7995693">}</span><span class="op" id="7995694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995697">{</span><span class="string" id="7995698">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995718">,</span>&nbsp;<span class="string" id="7995720">&#34;//g&#34;</span><span class="op" id="7995725">,</span>&nbsp;<span class="string" id="7995727">&#34;http://g&#34;</span><span class="op" id="7995737">}</span><span class="op" id="7995738">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995741">{</span><span class="string" id="7995742">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995762">,</span>&nbsp;<span class="string" id="7995764">&#34;?y&#34;</span><span class="op" id="7995768">,</span>&nbsp;<span class="string" id="7995770">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7995790">}</span><span class="op" id="7995791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995794">{</span><span class="string" id="7995795">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995815">,</span>&nbsp;<span class="string" id="7995817">&#34;g?y&#34;</span><span class="op" id="7995822">,</span>&nbsp;<span class="string" id="7995824">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7995842">}</span><span class="op" id="7995843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995846">{</span><span class="string" id="7995847">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995867">,</span>&nbsp;<span class="string" id="7995869">&#34;#s&#34;</span><span class="op" id="7995873">,</span>&nbsp;<span class="string" id="7995875">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7995897">}</span><span class="op" id="7995898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995901">{</span><span class="string" id="7995902">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995922">,</span>&nbsp;<span class="string" id="7995924">&#34;g#s&#34;</span><span class="op" id="7995929">,</span>&nbsp;<span class="string" id="7995931">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7995949">}</span><span class="op" id="7995950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7995953">{</span><span class="string" id="7995954">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7995974">,</span>&nbsp;<span class="string" id="7995976">&#34;g?y#s&#34;</span><span class="op" id="7995983">,</span>&nbsp;<span class="string" id="7995985">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7996005">}</span><span class="op" id="7996006">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996009">{</span><span class="string" id="7996010">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996030">,</span>&nbsp;<span class="string" id="7996032">&#34;;x&#34;</span><span class="op" id="7996036">,</span>&nbsp;<span class="string" id="7996038">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7996055">}</span><span class="op" id="7996056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996059">{</span><span class="string" id="7996060">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996080">,</span>&nbsp;<span class="string" id="7996082">&#34;g;x&#34;</span><span class="op" id="7996087">,</span>&nbsp;<span class="string" id="7996089">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7996107">}</span><span class="op" id="7996108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996111">{</span><span class="string" id="7996112">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996132">,</span>&nbsp;<span class="string" id="7996134">&#34;g;x?y#s&#34;</span><span class="op" id="7996143">,</span>&nbsp;<span class="string" id="7996145">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7996167">}</span><span class="op" id="7996168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996171">{</span><span class="string" id="7996172">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996192">,</span>&nbsp;<span class="string" id="7996194">&#34;&#34;</span><span class="op" id="7996196">,</span>&nbsp;<span class="string" id="7996198">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996218">}</span><span class="op" id="7996219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996222">{</span><span class="string" id="7996223">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996243">,</span>&nbsp;<span class="string" id="7996245">&#34;.&#34;</span><span class="op" id="7996248">,</span>&nbsp;<span class="string" id="7996250">&#34;http://a/b/c/&#34;</span><span class="op" id="7996265">}</span><span class="op" id="7996266">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996269">{</span><span class="string" id="7996270">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996290">,</span>&nbsp;<span class="string" id="7996292">&#34;./&#34;</span><span class="op" id="7996296">,</span>&nbsp;<span class="string" id="7996298">&#34;http://a/b/c/&#34;</span><span class="op" id="7996313">}</span><span class="op" id="7996314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996317">{</span><span class="string" id="7996318">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996338">,</span>&nbsp;<span class="string" id="7996340">&#34;..&#34;</span><span class="op" id="7996344">,</span>&nbsp;<span class="string" id="7996346">&#34;http://a/b/&#34;</span><span class="op" id="7996359">}</span><span class="op" id="7996360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996363">{</span><span class="string" id="7996364">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996384">,</span>&nbsp;<span class="string" id="7996386">&#34;../&#34;</span><span class="op" id="7996391">,</span>&nbsp;<span class="string" id="7996393">&#34;http://a/b/&#34;</span><span class="op" id="7996406">}</span><span class="op" id="7996407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996410">{</span><span class="string" id="7996411">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996431">,</span>&nbsp;<span class="string" id="7996433">&#34;../g&#34;</span><span class="op" id="7996439">,</span>&nbsp;<span class="string" id="7996441">&#34;http://a/b/g&#34;</span><span class="op" id="7996455">}</span><span class="op" id="7996456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996459">{</span><span class="string" id="7996460">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996480">,</span>&nbsp;<span class="string" id="7996482">&#34;../..&#34;</span><span class="op" id="7996489">,</span>&nbsp;<span class="string" id="7996491">&#34;http://a/&#34;</span><span class="op" id="7996502">}</span><span class="op" id="7996503">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996506">{</span><span class="string" id="7996507">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996527">,</span>&nbsp;<span class="string" id="7996529">&#34;../../&#34;</span><span class="op" id="7996537">,</span>&nbsp;<span class="string" id="7996539">&#34;http://a/&#34;</span><span class="op" id="7996550">}</span><span class="op" id="7996551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996554">{</span><span class="string" id="7996555">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996575">,</span>&nbsp;<span class="string" id="7996577">&#34;../../g&#34;</span><span class="op" id="7996586">,</span>&nbsp;<span class="string" id="7996588">&#34;http://a/g&#34;</span><span class="op" id="7996600">}</span><span class="op" id="7996601">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7996605">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7996637">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996690">{</span><span class="string" id="7996691">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996711">,</span>&nbsp;<span class="string" id="7996713">&#34;../../../g&#34;</span><span class="op" id="7996725">,</span>&nbsp;<span class="string" id="7996727">&#34;http://a/g&#34;</span><span class="op" id="7996739">}</span><span class="op" id="7996740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996743">{</span><span class="string" id="7996744">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996764">,</span>&nbsp;<span class="string" id="7996766">&#34;../../../../g&#34;</span><span class="op" id="7996781">,</span>&nbsp;<span class="string" id="7996783">&#34;http://a/g&#34;</span><span class="op" id="7996795">}</span><span class="op" id="7996796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996799">{</span><span class="string" id="7996800">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996820">,</span>&nbsp;<span class="string" id="7996822">&#34;/./g&#34;</span><span class="op" id="7996828">,</span>&nbsp;<span class="string" id="7996830">&#34;http://a/g&#34;</span><span class="op" id="7996842">}</span><span class="op" id="7996843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996846">{</span><span class="string" id="7996847">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996867">,</span>&nbsp;<span class="string" id="7996869">&#34;/../g&#34;</span><span class="op" id="7996876">,</span>&nbsp;<span class="string" id="7996878">&#34;http://a/g&#34;</span><span class="op" id="7996890">}</span><span class="op" id="7996891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996894">{</span><span class="string" id="7996895">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996915">,</span>&nbsp;<span class="string" id="7996917">&#34;g.&#34;</span><span class="op" id="7996921">,</span>&nbsp;<span class="string" id="7996923">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7996940">}</span><span class="op" id="7996941">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996944">{</span><span class="string" id="7996945">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7996965">,</span>&nbsp;<span class="string" id="7996967">&#34;.g&#34;</span><span class="op" id="7996971">,</span>&nbsp;<span class="string" id="7996973">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7996990">}</span><span class="op" id="7996991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996994">{</span><span class="string" id="7996995">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997015">,</span>&nbsp;<span class="string" id="7997017">&#34;g..&#34;</span><span class="op" id="7997022">,</span>&nbsp;<span class="string" id="7997024">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7997042">}</span><span class="op" id="7997043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997046">{</span><span class="string" id="7997047">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997067">,</span>&nbsp;<span class="string" id="7997069">&#34;..g&#34;</span><span class="op" id="7997074">,</span>&nbsp;<span class="string" id="7997076">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7997094">}</span><span class="op" id="7997095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997098">{</span><span class="string" id="7997099">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997119">,</span>&nbsp;<span class="string" id="7997121">&#34;./../g&#34;</span><span class="op" id="7997129">,</span>&nbsp;<span class="string" id="7997131">&#34;http://a/b/g&#34;</span><span class="op" id="7997145">}</span><span class="op" id="7997146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997149">{</span><span class="string" id="7997150">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997170">,</span>&nbsp;<span class="string" id="7997172">&#34;./g/.&#34;</span><span class="op" id="7997179">,</span>&nbsp;<span class="string" id="7997181">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7997198">}</span><span class="op" id="7997199">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997202">{</span><span class="string" id="7997203">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997223">,</span>&nbsp;<span class="string" id="7997225">&#34;g/./h&#34;</span><span class="op" id="7997232">,</span>&nbsp;<span class="string" id="7997234">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7997252">}</span><span class="op" id="7997253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997256">{</span><span class="string" id="7997257">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997277">,</span>&nbsp;<span class="string" id="7997279">&#34;g/../h&#34;</span><span class="op" id="7997287">,</span>&nbsp;<span class="string" id="7997289">&#34;http://a/b/c/h&#34;</span><span class="op" id="7997305">}</span><span class="op" id="7997306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997309">{</span><span class="string" id="7997310">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997330">,</span>&nbsp;<span class="string" id="7997332">&#34;g;x=1/./y&#34;</span><span class="op" id="7997343">,</span>&nbsp;<span class="string" id="7997345">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7997367">}</span><span class="op" id="7997368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997371">{</span><span class="string" id="7997372">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997392">,</span>&nbsp;<span class="string" id="7997394">&#34;g;x=1/../y&#34;</span><span class="op" id="7997406">,</span>&nbsp;<span class="string" id="7997408">&#34;http://a/b/c/y&#34;</span><span class="op" id="7997424">}</span><span class="op" id="7997425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997428">{</span><span class="string" id="7997429">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997449">,</span>&nbsp;<span class="string" id="7997451">&#34;g?y/./x&#34;</span><span class="op" id="7997460">,</span>&nbsp;<span class="string" id="7997462">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7997484">}</span><span class="op" id="7997485">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997488">{</span><span class="string" id="7997489">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997509">,</span>&nbsp;<span class="string" id="7997511">&#34;g?y/../x&#34;</span><span class="op" id="7997521">,</span>&nbsp;<span class="string" id="7997523">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7997546">}</span><span class="op" id="7997547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997550">{</span><span class="string" id="7997551">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997571">,</span>&nbsp;<span class="string" id="7997573">&#34;g#s/./x&#34;</span><span class="op" id="7997582">,</span>&nbsp;<span class="string" id="7997584">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7997606">}</span><span class="op" id="7997607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997610">{</span><span class="string" id="7997611">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7997631">,</span>&nbsp;<span class="string" id="7997633">&#34;g#s/../x&#34;</span><span class="op" id="7997643">,</span>&nbsp;<span class="string" id="7997645">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7997668">}</span><span class="op" id="7997669">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7997673">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997685">{</span><span class="string" id="7997686">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7997707">,</span>&nbsp;<span class="string" id="7997709">&#34;//g?q&#34;</span><span class="op" id="7997716">,</span>&nbsp;<span class="string" id="7997718">&#34;https://g?q&#34;</span><span class="op" id="7997731">}</span><span class="op" id="7997732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997735">{</span><span class="string" id="7997736">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7997757">,</span>&nbsp;<span class="string" id="7997759">&#34;//g#s&#34;</span><span class="op" id="7997766">,</span>&nbsp;<span class="string" id="7997768">&#34;https://g#s&#34;</span><span class="op" id="7997781">}</span><span class="op" id="7997782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997785">{</span><span class="string" id="7997786">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7997807">,</span>&nbsp;<span class="string" id="7997809">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7997824">,</span>&nbsp;<span class="string" id="7997826">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7997847">}</span><span class="op" id="7997848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997851">{</span><span class="string" id="7997852">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7997873">,</span>&nbsp;<span class="string" id="7997875">&#34;?y&#34;</span><span class="op" id="7997879">,</span>&nbsp;<span class="string" id="7997881">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7997902">}</span><span class="op" id="7997903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997906">{</span><span class="string" id="7997907">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7997930">,</span>&nbsp;<span class="string" id="7997932">&#34;?y&#34;</span><span class="op" id="7997936">,</span>&nbsp;<span class="string" id="7997938">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7997959">}</span><span class="op" id="7997960">,</span><br>
<span class="lineno">700</span><span class="op" id="7997962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7997965">func</span>&nbsp;<span class="ident" id="7997970">TestResolveReference</span><span class="op" id="7997990">(</span><span class="ident" id="7997991">t</span>&nbsp;<span class="op" id="7997993">*</span><span class="ident" id="7997994">testing</span><span class="op" id="7998001">.</span><span class="ident" id="7998002">T</span><span class="op" id="7998003">)</span>&nbsp;<span class="op" id="7998005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998008">mustParse</span>&nbsp;<span class="op" id="7998018">:=</span>&nbsp;<span class="keyword" id="7998021">func</span><span class="op" id="7998025">(</span><span class="ident" id="7998026">url</span>&nbsp;<span class="builtintype" id="7998030">string</span><span class="op" id="7998036">)</span>&nbsp;<span class="op" id="7998038">*</span><span class="ident" id="7998039">URL</span>&nbsp;<span class="op" id="7998043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998047">u</span><span class="op" id="7998048">,</span>&nbsp;<span class="ident" id="7998050">err</span>&nbsp;<span class="op" id="7998054">:=</span>&nbsp;<span class="ident" id="7998057">Parse</span><span class="op" id="7998062">(</span><span class="ident" id="7998063">url</span><span class="op" id="7998066">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998070">if</span>&nbsp;<span class="ident" id="7998073">err</span>&nbsp;<span class="op" id="7998077">!=</span>&nbsp;<span class="ident" id="7998080">nil</span>&nbsp;<span class="op" id="7998084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998089">t</span><span class="op" id="7998090">.</span><span class="ident" id="7998091">Fatalf</span><span class="op" id="7998097">(</span><span class="string" id="7998098">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7998140">,</span>&nbsp;<span class="ident" id="7998142">url</span><span class="op" id="7998145">,</span>&nbsp;<span class="ident" id="7998147">err</span><span class="op" id="7998150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998158">return</span>&nbsp;<span class="ident" id="7998165">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998168">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998171">opaque</span>&nbsp;<span class="op" id="7998178">:=</span>&nbsp;<span class="op" id="7998181">&amp;</span><span class="ident" id="7998182">URL</span><span class="op" id="7998185">{</span><span class="ident" id="7998186">Scheme</span><span class="op" id="7998192">:</span>&nbsp;<span class="string" id="7998194">&#34;scheme&#34;</span><span class="op" id="7998202">,</span>&nbsp;<span class="ident" id="7998204">Opaque</span><span class="op" id="7998210">:</span>&nbsp;<span class="string" id="7998212">&#34;opaque&#34;</span><span class="op" id="7998220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998223">for</span>&nbsp;<span class="ident" id="7998227">_</span><span class="op" id="7998228">,</span>&nbsp;<span class="ident" id="7998230">test</span>&nbsp;<span class="op" id="7998235">:=</span>&nbsp;<span class="keyword" id="7998238">range</span>&nbsp;<span class="ident" id="7998244">resolveReferenceTests</span>&nbsp;<span class="op" id="7998266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998270">base</span>&nbsp;<span class="op" id="7998275">:=</span>&nbsp;<span class="ident" id="7998278">mustParse</span><span class="op" id="7998287">(</span><span class="ident" id="7998288">test</span><span class="op" id="7998292">.</span><span class="ident" id="7998293">base</span><span class="op" id="7998297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998301">rel</span>&nbsp;<span class="op" id="7998305">:=</span>&nbsp;<span class="ident" id="7998308">mustParse</span><span class="op" id="7998317">(</span><span class="ident" id="7998318">test</span><span class="op" id="7998322">.</span><span class="ident" id="7998323">rel</span><span class="op" id="7998326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998330">url</span>&nbsp;<span class="op" id="7998334">:=</span>&nbsp;<span class="ident" id="7998337">base</span><span class="op" id="7998341">.</span><span class="ident" id="7998342">ResolveReference</span><span class="op" id="7998358">(</span><span class="ident" id="7998359">rel</span><span class="op" id="7998362">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998366">if</span>&nbsp;<span class="ident" id="7998369">url</span><span class="op" id="7998372">.</span><span class="ident" id="7998373">String</span><span class="op" id="7998379">(</span><span class="op" id="7998380">)</span>&nbsp;<span class="op" id="7998382">!=</span>&nbsp;<span class="ident" id="7998385">test</span><span class="op" id="7998389">.</span><span class="ident" id="7998390">expected</span>&nbsp;<span class="op" id="7998399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998404">t</span><span class="op" id="7998405">.</span><span class="ident" id="7998406">Errorf</span><span class="op" id="7998412">(</span><span class="string" id="7998413">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7998457">,</span>&nbsp;<span class="ident" id="7998459">test</span><span class="op" id="7998463">.</span><span class="ident" id="7998464">base</span><span class="op" id="7998468">,</span>&nbsp;<span class="ident" id="7998470">test</span><span class="op" id="7998474">.</span><span class="ident" id="7998475">rel</span><span class="op" id="7998478">,</span>&nbsp;<span class="ident" id="7998480">test</span><span class="op" id="7998484">.</span><span class="ident" id="7998485">expected</span><span class="op" id="7998493">,</span>&nbsp;<span class="ident" id="7998495">url</span><span class="op" id="7998498">.</span><span class="ident" id="7998499">String</span><span class="op" id="7998505">(</span><span class="op" id="7998506">)</span><span class="op" id="7998507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998515">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998560">if</span>&nbsp;<span class="ident" id="7998563">base</span>&nbsp;<span class="op" id="7998568">==</span>&nbsp;<span class="ident" id="7998571">url</span>&nbsp;<span class="op" id="7998575">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998580">t</span><span class="op" id="7998581">.</span><span class="ident" id="7998582">Errorf</span><span class="op" id="7998588">(</span><span class="string" id="7998589">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7998648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998656">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998695">url</span><span class="op" id="7998698">,</span>&nbsp;<span class="ident" id="7998700">err</span>&nbsp;<span class="op" id="7998704">:=</span>&nbsp;<span class="ident" id="7998707">base</span><span class="op" id="7998711">.</span><span class="ident" id="7998712">Parse</span><span class="op" id="7998717">(</span><span class="ident" id="7998718">test</span><span class="op" id="7998722">.</span><span class="ident" id="7998723">rel</span><span class="op" id="7998726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998730">if</span>&nbsp;<span class="ident" id="7998733">err</span>&nbsp;<span class="op" id="7998737">!=</span>&nbsp;<span class="ident" id="7998740">nil</span>&nbsp;<span class="op" id="7998744">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998749">t</span><span class="op" id="7998750">.</span><span class="ident" id="7998751">Errorf</span><span class="op" id="7998757">(</span><span class="string" id="7998758">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7998788">,</span>&nbsp;<span class="ident" id="7998790">test</span><span class="op" id="7998794">.</span><span class="ident" id="7998795">base</span><span class="op" id="7998799">,</span>&nbsp;<span class="ident" id="7998801">test</span><span class="op" id="7998805">.</span><span class="ident" id="7998806">rel</span><span class="op" id="7998809">,</span>&nbsp;<span class="ident" id="7998811">err</span><span class="op" id="7998814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998818">}</span>&nbsp;<span class="keyword" id="7998820">else</span>&nbsp;<span class="keyword" id="7998825">if</span>&nbsp;<span class="ident" id="7998828">url</span><span class="op" id="7998831">.</span><span class="ident" id="7998832">String</span><span class="op" id="7998838">(</span><span class="op" id="7998839">)</span>&nbsp;<span class="op" id="7998841">!=</span>&nbsp;<span class="ident" id="7998844">test</span><span class="op" id="7998848">.</span><span class="ident" id="7998849">expected</span>&nbsp;<span class="op" id="7998858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998863">t</span><span class="op" id="7998864">.</span><span class="ident" id="7998865">Errorf</span><span class="op" id="7998871">(</span><span class="string" id="7998872">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7998905">,</span>&nbsp;<span class="ident" id="7998907">test</span><span class="op" id="7998911">.</span><span class="ident" id="7998912">base</span><span class="op" id="7998916">,</span>&nbsp;<span class="ident" id="7998918">test</span><span class="op" id="7998922">.</span><span class="ident" id="7998923">rel</span><span class="op" id="7998926">,</span>&nbsp;<span class="ident" id="7998928">test</span><span class="op" id="7998932">.</span><span class="ident" id="7998933">expected</span><span class="op" id="7998941">,</span>&nbsp;<span class="ident" id="7998943">url</span><span class="op" id="7998946">.</span><span class="ident" id="7998947">String</span><span class="op" id="7998953">(</span><span class="op" id="7998954">)</span><span class="op" id="7998955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998959">}</span>&nbsp;<span class="keyword" id="7998961">else</span>&nbsp;<span class="keyword" id="7998966">if</span>&nbsp;<span class="ident" id="7998969">base</span>&nbsp;<span class="op" id="7998974">==</span>&nbsp;<span class="ident" id="7998977">url</span>&nbsp;<span class="op" id="7998981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998986">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999052">t</span><span class="op" id="7999053">.</span><span class="ident" id="7999054">Errorf</span><span class="op" id="7999060">(</span><span class="string" id="7999061">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7999109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7999117">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999152">url</span>&nbsp;<span class="op" id="7999156">=</span>&nbsp;<span class="ident" id="7999158">base</span><span class="op" id="7999162">.</span><span class="ident" id="7999163">ResolveReference</span><span class="op" id="7999179">(</span><span class="ident" id="7999180">opaque</span><span class="op" id="7999186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999190">if</span>&nbsp;<span class="op" id="7999193">*</span><span class="ident" id="7999194">url</span>&nbsp;<span class="op" id="7999198">!=</span>&nbsp;<span class="op" id="7999201">*</span><span class="ident" id="7999202">opaque</span>&nbsp;<span class="op" id="7999209">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999214">t</span><span class="op" id="7999215">.</span><span class="ident" id="7999216">Errorf</span><span class="op" id="7999222">(</span><span class="string" id="7999223">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7999289">,</span>&nbsp;<span class="ident" id="7999291">url</span><span class="op" id="7999294">,</span>&nbsp;<span class="ident" id="7999296">opaque</span><span class="op" id="7999302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7999310">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999368">url</span><span class="op" id="7999371">,</span>&nbsp;<span class="ident" id="7999373">err</span>&nbsp;<span class="op" id="7999377">=</span>&nbsp;<span class="ident" id="7999379">base</span><span class="op" id="7999383">.</span><span class="ident" id="7999384">Parse</span><span class="op" id="7999389">(</span><span class="string" id="7999390">&#34;scheme:opaque&#34;</span><span class="op" id="7999405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999409">if</span>&nbsp;<span class="ident" id="7999412">err</span>&nbsp;<span class="op" id="7999416">!=</span>&nbsp;<span class="ident" id="7999419">nil</span>&nbsp;<span class="op" id="7999423">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999428">t</span><span class="op" id="7999429">.</span><span class="ident" id="7999430">Errorf</span><span class="op" id="7999436">(</span><span class="string" id="7999437">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7999480">,</span>&nbsp;<span class="ident" id="7999482">test</span><span class="op" id="7999486">.</span><span class="ident" id="7999487">base</span><span class="op" id="7999491">,</span>&nbsp;<span class="ident" id="7999493">err</span><span class="op" id="7999496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999500">}</span>&nbsp;<span class="keyword" id="7999502">else</span>&nbsp;<span class="keyword" id="7999507">if</span>&nbsp;<span class="op" id="7999510">*</span><span class="ident" id="7999511">url</span>&nbsp;<span class="op" id="7999515">!=</span>&nbsp;<span class="op" id="7999518">*</span><span class="ident" id="7999519">opaque</span>&nbsp;<span class="op" id="7999526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999531">t</span><span class="op" id="7999532">.</span><span class="ident" id="7999533">Errorf</span><span class="op" id="7999539">(</span><span class="string" id="7999540">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7999595">,</span>&nbsp;<span class="ident" id="7999597">url</span><span class="op" id="7999600">,</span>&nbsp;<span class="ident" id="7999602">opaque</span><span class="op" id="7999608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999612">}</span>&nbsp;<span class="keyword" id="7999614">else</span>&nbsp;<span class="keyword" id="7999619">if</span>&nbsp;<span class="ident" id="7999622">base</span>&nbsp;<span class="op" id="7999627">==</span>&nbsp;<span class="ident" id="7999630">url</span>&nbsp;<span class="op" id="7999634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7999639">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999692">t</span><span class="op" id="7999693">.</span><span class="ident" id="7999694">Errorf</span><span class="op" id="7999700">(</span><span class="string" id="7999701">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7999749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999756">}</span><br>
<span class="lineno"></span><span class="op" id="7999758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7999761">func</span>&nbsp;<span class="ident" id="7999766">TestQueryValues</span><span class="op" id="7999781">(</span><span class="ident" id="7999782">t</span>&nbsp;<span class="op" id="7999784">*</span><span class="ident" id="7999785">testing</span><span class="op" id="7999792">.</span><span class="ident" id="7999793">T</span><span class="op" id="7999794">)</span>&nbsp;<span class="op" id="7999796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999799">u</span><span class="op" id="7999800">,</span>&nbsp;<span class="ident" id="7999802">_</span>&nbsp;<span class="op" id="7999804">:=</span>&nbsp;<span class="ident" id="7999807">Parse</span><span class="op" id="7999812">(</span><span class="string" id="7999813">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7999847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999850">v</span>&nbsp;<span class="op" id="7999852">:=</span>&nbsp;<span class="ident" id="7999855">u</span><span class="op" id="7999856">.</span><span class="ident" id="7999857">Query</span><span class="op" id="7999862">(</span><span class="op" id="7999863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999866">if</span>&nbsp;<span class="builtinfunc" id="7999869">len</span><span class="op" id="7999872">(</span><span class="ident" id="7999873">v</span><span class="op" id="7999874">)</span>&nbsp;<span class="op" id="7999876">!=</span>&nbsp;<span class="num" id="7999879">2</span>&nbsp;<span class="op" id="7999881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999885">t</span><span class="op" id="7999886">.</span><span class="ident" id="7999887">Errorf</span><span class="op" id="7999893">(</span><span class="string" id="7999894">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7999931">,</span>&nbsp;<span class="builtinfunc" id="7999933">len</span><span class="op" id="7999936">(</span><span class="ident" id="7999937">v</span><span class="op" id="7999938">)</span><span class="op" id="7999939">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7999942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7999945">if</span>&nbsp;<span class="ident" id="7999948">g</span><span class="op" id="7999949">,</span>&nbsp;<span class="ident" id="7999951">e</span>&nbsp;<span class="op" id="7999953">:=</span>&nbsp;<span class="ident" id="7999956">v</span><span class="op" id="7999957">.</span><span class="ident" id="7999958">Get</span><span class="op" id="7999961">(</span><span class="string" id="7999962">&#34;foo&#34;</span><span class="op" id="7999967">)</span><span class="op" id="7999968">,</span>&nbsp;<span class="string" id="7999970">&#34;bar&#34;</span><span class="op" id="7999975">;</span>&nbsp;<span class="ident" id="7999977">g</span>&nbsp;<span class="op" id="7999979">!=</span>&nbsp;<span class="ident" id="7999982">e</span>&nbsp;<span class="op" id="7999984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7999988">t</span><span class="op" id="7999989">.</span><span class="ident" id="7999990">Errorf</span><span class="op" id="7999996">(</span><span class="string" id="7999997">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8000021">,</span>&nbsp;<span class="ident" id="8000023">g</span><span class="op" id="8000024">,</span>&nbsp;<span class="ident" id="8000026">e</span><span class="op" id="8000027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8000033">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000053">if</span>&nbsp;<span class="ident" id="8000056">g</span><span class="op" id="8000057">,</span>&nbsp;<span class="ident" id="8000059">e</span>&nbsp;<span class="op" id="8000061">:=</span>&nbsp;<span class="ident" id="8000064">v</span><span class="op" id="8000065">.</span><span class="ident" id="8000066">Get</span><span class="op" id="8000069">(</span><span class="string" id="8000070">&#34;Foo&#34;</span><span class="op" id="8000075">)</span><span class="op" id="8000076">,</span>&nbsp;<span class="string" id="8000078">&#34;&#34;</span><span class="op" id="8000080">;</span>&nbsp;<span class="ident" id="8000082">g</span>&nbsp;<span class="op" id="8000084">!=</span>&nbsp;<span class="ident" id="8000087">e</span>&nbsp;<span class="op" id="8000089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000093">t</span><span class="op" id="8000094">.</span><span class="ident" id="8000095">Errorf</span><span class="op" id="8000101">(</span><span class="string" id="8000102">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8000126">,</span>&nbsp;<span class="ident" id="8000128">g</span><span class="op" id="8000129">,</span>&nbsp;<span class="ident" id="8000131">e</span><span class="op" id="8000132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000138">if</span>&nbsp;<span class="ident" id="8000141">g</span><span class="op" id="8000142">,</span>&nbsp;<span class="ident" id="8000144">e</span>&nbsp;<span class="op" id="8000146">:=</span>&nbsp;<span class="ident" id="8000149">v</span><span class="op" id="8000150">.</span><span class="ident" id="8000151">Get</span><span class="op" id="8000154">(</span><span class="string" id="8000155">&#34;bar&#34;</span><span class="op" id="8000160">)</span><span class="op" id="8000161">,</span>&nbsp;<span class="string" id="8000163">&#34;1&#34;</span><span class="op" id="8000166">;</span>&nbsp;<span class="ident" id="8000168">g</span>&nbsp;<span class="op" id="8000170">!=</span>&nbsp;<span class="ident" id="8000173">e</span>&nbsp;<span class="op" id="8000175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000179">t</span><span class="op" id="8000180">.</span><span class="ident" id="8000181">Errorf</span><span class="op" id="8000187">(</span><span class="string" id="8000188">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8000212">,</span>&nbsp;<span class="ident" id="8000214">g</span><span class="op" id="8000215">,</span>&nbsp;<span class="ident" id="8000217">e</span><span class="op" id="8000218">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000224">if</span>&nbsp;<span class="ident" id="8000227">g</span><span class="op" id="8000228">,</span>&nbsp;<span class="ident" id="8000230">e</span>&nbsp;<span class="op" id="8000232">:=</span>&nbsp;<span class="ident" id="8000235">v</span><span class="op" id="8000236">.</span><span class="ident" id="8000237">Get</span><span class="op" id="8000240">(</span><span class="string" id="8000241">&#34;baz&#34;</span><span class="op" id="8000246">)</span><span class="op" id="8000247">,</span>&nbsp;<span class="string" id="8000249">&#34;&#34;</span><span class="op" id="8000251">;</span>&nbsp;<span class="ident" id="8000253">g</span>&nbsp;<span class="op" id="8000255">!=</span>&nbsp;<span class="ident" id="8000258">e</span>&nbsp;<span class="op" id="8000260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000264">t</span><span class="op" id="8000265">.</span><span class="ident" id="8000266">Errorf</span><span class="op" id="8000272">(</span><span class="string" id="8000273">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8000297">,</span>&nbsp;<span class="ident" id="8000299">g</span><span class="op" id="8000300">,</span>&nbsp;<span class="ident" id="8000302">e</span><span class="op" id="8000303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000309">v</span><span class="op" id="8000310">.</span><span class="ident" id="8000311">Del</span><span class="op" id="8000314">(</span><span class="string" id="8000315">&#34;bar&#34;</span><span class="op" id="8000320">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000323">if</span>&nbsp;<span class="ident" id="8000326">g</span><span class="op" id="8000327">,</span>&nbsp;<span class="ident" id="8000329">e</span>&nbsp;<span class="op" id="8000331">:=</span>&nbsp;<span class="ident" id="8000334">v</span><span class="op" id="8000335">.</span><span class="ident" id="8000336">Get</span><span class="op" id="8000339">(</span><span class="string" id="8000340">&#34;bar&#34;</span><span class="op" id="8000345">)</span><span class="op" id="8000346">,</span>&nbsp;<span class="string" id="8000348">&#34;&#34;</span><span class="op" id="8000350">;</span>&nbsp;<span class="ident" id="8000352">g</span>&nbsp;<span class="op" id="8000354">!=</span>&nbsp;<span class="ident" id="8000357">e</span>&nbsp;<span class="op" id="8000359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000363">t</span><span class="op" id="8000364">.</span><span class="ident" id="8000365">Errorf</span><span class="op" id="8000371">(</span><span class="string" id="8000372">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8000403">,</span>&nbsp;<span class="ident" id="8000405">g</span><span class="op" id="8000406">,</span>&nbsp;<span class="ident" id="8000408">e</span><span class="op" id="8000409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000412">}</span><br>
<span class="lineno"></span><span class="op" id="8000414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="8000417">type</span>&nbsp;<span class="ident" id="8000422">parseTest</span>&nbsp;<span class="keyword" id="8000432">struct</span>&nbsp;<span class="op" id="8000439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000442">query</span>&nbsp;<span class="builtintype" id="8000448">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000456">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000462">Values</span><br>
<span class="lineno"></span><span class="op" id="8000469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="8000472">var</span>&nbsp;<span class="ident" id="8000476">parseTests</span>&nbsp;<span class="op" id="8000487">=</span>&nbsp;<span class="op" id="8000489">[</span><span class="op" id="8000490">]</span><span class="ident" id="8000491">parseTest</span><span class="op" id="8000500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000507">query</span><span class="op" id="8000512">:</span>&nbsp;<span class="string" id="8000514">&#34;a=1&amp;b=2&#34;</span><span class="op" id="8000523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000527">out</span><span class="op" id="8000530">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000534">Values</span><span class="op" id="8000540">{</span><span class="string" id="8000541">&#34;a&#34;</span><span class="op" id="8000544">:</span>&nbsp;<span class="op" id="8000546">[</span><span class="op" id="8000547">]</span><span class="builtintype" id="8000548">string</span><span class="op" id="8000554">{</span><span class="string" id="8000555">&#34;1&#34;</span><span class="op" id="8000558">}</span><span class="op" id="8000559">,</span>&nbsp;<span class="string" id="8000561">&#34;b&#34;</span><span class="op" id="8000564">:</span>&nbsp;<span class="op" id="8000566">[</span><span class="op" id="8000567">]</span><span class="builtintype" id="8000568">string</span><span class="op" id="8000574">{</span><span class="string" id="8000575">&#34;2&#34;</span><span class="op" id="8000578">}</span><span class="op" id="8000579">}</span><span class="op" id="8000580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000583">}</span><span class="op" id="8000584">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000591">query</span><span class="op" id="8000596">:</span>&nbsp;<span class="string" id="8000598">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="8000616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000620">out</span><span class="op" id="8000623">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000627">Values</span><span class="op" id="8000633">{</span><span class="string" id="8000634">&#34;a&#34;</span><span class="op" id="8000637">:</span>&nbsp;<span class="op" id="8000639">[</span><span class="op" id="8000640">]</span><span class="builtintype" id="8000641">string</span><span class="op" id="8000647">{</span><span class="string" id="8000648">&#34;1&#34;</span><span class="op" id="8000651">,</span>&nbsp;<span class="string" id="8000653">&#34;2&#34;</span><span class="op" id="8000656">,</span>&nbsp;<span class="string" id="8000658">&#34;banana&#34;</span><span class="op" id="8000666">}</span><span class="op" id="8000667">}</span><span class="op" id="8000668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000671">}</span><span class="op" id="8000672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000675">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000679">query</span><span class="op" id="8000684">:</span>&nbsp;<span class="string" id="8000686">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="8000711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000715">out</span><span class="op" id="8000718">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000722">Values</span><span class="op" id="8000728">{</span><span class="string" id="8000729">&#34;ascii&#34;</span><span class="op" id="8000736">:</span>&nbsp;<span class="op" id="8000738">[</span><span class="op" id="8000739">]</span><span class="builtintype" id="8000740">string</span><span class="op" id="8000746">{</span><span class="string" id="8000747">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="8000760">}</span><span class="op" id="8000761">}</span><span class="op" id="8000762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000765">}</span><span class="op" id="8000766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000773">query</span><span class="op" id="8000778">:</span>&nbsp;<span class="string" id="8000780">&#34;a=1;b=2&#34;</span><span class="op" id="8000789">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000793">out</span><span class="op" id="8000796">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000800">Values</span><span class="op" id="8000806">{</span><span class="string" id="8000807">&#34;a&#34;</span><span class="op" id="8000810">:</span>&nbsp;<span class="op" id="8000812">[</span><span class="op" id="8000813">]</span><span class="builtintype" id="8000814">string</span><span class="op" id="8000820">{</span><span class="string" id="8000821">&#34;1&#34;</span><span class="op" id="8000824">}</span><span class="op" id="8000825">,</span>&nbsp;<span class="string" id="8000827">&#34;b&#34;</span><span class="op" id="8000830">:</span>&nbsp;<span class="op" id="8000832">[</span><span class="op" id="8000833">]</span><span class="builtintype" id="8000834">string</span><span class="op" id="8000840">{</span><span class="string" id="8000841">&#34;2&#34;</span><span class="op" id="8000844">}</span><span class="op" id="8000845">}</span><span class="op" id="8000846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000849">}</span><span class="op" id="8000850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000857">query</span><span class="op" id="8000862">:</span>&nbsp;<span class="string" id="8000864">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="8000882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000886">out</span><span class="op" id="8000889">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8000893">Values</span><span class="op" id="8000899">{</span><span class="string" id="8000900">&#34;a&#34;</span><span class="op" id="8000903">:</span>&nbsp;<span class="op" id="8000905">[</span><span class="op" id="8000906">]</span><span class="builtintype" id="8000907">string</span><span class="op" id="8000913">{</span><span class="string" id="8000914">&#34;1&#34;</span><span class="op" id="8000917">,</span>&nbsp;<span class="string" id="8000919">&#34;2&#34;</span><span class="op" id="8000922">,</span>&nbsp;<span class="string" id="8000924">&#34;banana&#34;</span><span class="op" id="8000932">}</span><span class="op" id="8000933">}</span><span class="op" id="8000934">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8000937">}</span><span class="op" id="8000938">,</span><br>
<span class="lineno"></span><span class="op" id="8000940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8000943">func</span>&nbsp;<span class="ident" id="8000948">TestParseQuery</span><span class="op" id="8000962">(</span><span class="ident" id="8000963">t</span>&nbsp;<span class="op" id="8000965">*</span><span class="ident" id="8000966">testing</span><span class="op" id="8000973">.</span><span class="ident" id="8000974">T</span><span class="op" id="8000975">)</span>&nbsp;<span class="op" id="8000977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000980">for</span>&nbsp;<span class="ident" id="8000984">i</span><span class="op" id="8000985">,</span>&nbsp;<span class="ident" id="8000987">test</span>&nbsp;<span class="op" id="8000992">:=</span>&nbsp;<span class="keyword" id="8000995">range</span>&nbsp;<span class="ident" id="8001001">parseTests</span>&nbsp;<span class="op" id="8001012">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001016">form</span><span class="op" id="8001020">,</span>&nbsp;<span class="ident" id="8001022">err</span>&nbsp;<span class="op" id="8001026">:=</span>&nbsp;<span class="ident" id="8001029">ParseQuery</span><span class="op" id="8001039">(</span><span class="ident" id="8001040">test</span><span class="op" id="8001044">.</span><span class="ident" id="8001045">query</span><span class="op" id="8001050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001054">if</span>&nbsp;<span class="ident" id="8001057">err</span>&nbsp;<span class="op" id="8001061">!=</span>&nbsp;<span class="ident" id="8001064">nil</span>&nbsp;<span class="op" id="8001068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001073">t</span><span class="op" id="8001074">.</span><span class="ident" id="8001075">Errorf</span><span class="op" id="8001081">(</span><span class="string" id="8001082">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8001113">,</span>&nbsp;<span class="ident" id="8001115">i</span><span class="op" id="8001116">,</span>&nbsp;<span class="ident" id="8001118">err</span><span class="op" id="8001121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001126">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001137">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001141">if</span>&nbsp;<span class="builtinfunc" id="8001144">len</span><span class="op" id="8001147">(</span><span class="ident" id="8001148">form</span><span class="op" id="8001152">)</span>&nbsp;<span class="op" id="8001154">!=</span>&nbsp;<span class="builtinfunc" id="8001157">len</span><span class="op" id="8001160">(</span><span class="ident" id="8001161">test</span><span class="op" id="8001165">.</span><span class="ident" id="8001166">out</span><span class="op" id="8001169">)</span>&nbsp;<span class="op" id="8001171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001176">t</span><span class="op" id="8001177">.</span><span class="ident" id="8001178">Errorf</span><span class="op" id="8001184">(</span><span class="string" id="8001185">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8001219">,</span>&nbsp;<span class="ident" id="8001221">i</span><span class="op" id="8001222">,</span>&nbsp;<span class="builtinfunc" id="8001224">len</span><span class="op" id="8001227">(</span><span class="ident" id="8001228">form</span><span class="op" id="8001232">)</span><span class="op" id="8001233">,</span>&nbsp;<span class="builtinfunc" id="8001235">len</span><span class="op" id="8001238">(</span><span class="ident" id="8001239">test</span><span class="op" id="8001243">.</span><span class="ident" id="8001244">out</span><span class="op" id="8001247">)</span><span class="op" id="8001248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001256">for</span>&nbsp;<span class="ident" id="8001260">k</span><span class="op" id="8001261">,</span>&nbsp;<span class="ident" id="8001263">evs</span>&nbsp;<span class="op" id="8001267">:=</span>&nbsp;<span class="keyword" id="8001270">range</span>&nbsp;<span class="ident" id="8001276">test</span><span class="op" id="8001280">.</span><span class="ident" id="8001281">out</span>&nbsp;<span class="op" id="8001285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001290">vs</span><span class="op" id="8001292">,</span>&nbsp;<span class="ident" id="8001294">ok</span>&nbsp;<span class="op" id="8001297">:=</span>&nbsp;<span class="ident" id="8001300">form</span><span class="op" id="8001304">[</span><span class="ident" id="8001305">k</span><span class="op" id="8001306">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001311">if</span>&nbsp;<span class="op" id="8001314">!</span><span class="ident" id="8001315">ok</span>&nbsp;<span class="op" id="8001318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001324">t</span><span class="op" id="8001325">.</span><span class="ident" id="8001326">Errorf</span><span class="op" id="8001332">(</span><span class="string" id="8001333">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="8001358">,</span>&nbsp;<span class="ident" id="8001360">i</span><span class="op" id="8001361">,</span>&nbsp;<span class="ident" id="8001363">k</span><span class="op" id="8001364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001370">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001387">if</span>&nbsp;<span class="builtinfunc" id="8001390">len</span><span class="op" id="8001393">(</span><span class="ident" id="8001394">vs</span><span class="op" id="8001396">)</span>&nbsp;<span class="op" id="8001398">!=</span>&nbsp;<span class="builtinfunc" id="8001401">len</span><span class="op" id="8001404">(</span><span class="ident" id="8001405">evs</span><span class="op" id="8001408">)</span>&nbsp;<span class="op" id="8001410">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001416">t</span><span class="op" id="8001417">.</span><span class="ident" id="8001418">Errorf</span><span class="op" id="8001424">(</span><span class="string" id="8001425">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8001463">,</span>&nbsp;<span class="ident" id="8001465">i</span><span class="op" id="8001466">,</span>&nbsp;<span class="ident" id="8001468">k</span><span class="op" id="8001469">,</span>&nbsp;<span class="builtinfunc" id="8001471">len</span><span class="op" id="8001474">(</span><span class="ident" id="8001475">vs</span><span class="op" id="8001477">)</span><span class="op" id="8001478">,</span>&nbsp;<span class="builtinfunc" id="8001480">len</span><span class="op" id="8001483">(</span><span class="ident" id="8001484">evs</span><span class="op" id="8001487">)</span><span class="op" id="8001488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001494">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001511">for</span>&nbsp;<span class="ident" id="8001515">j</span><span class="op" id="8001516">,</span>&nbsp;<span class="ident" id="8001518">ev</span>&nbsp;<span class="op" id="8001521">:=</span>&nbsp;<span class="keyword" id="8001524">range</span>&nbsp;<span class="ident" id="8001530">evs</span>&nbsp;<span class="op" id="8001534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001540">if</span>&nbsp;<span class="ident" id="8001543">v</span>&nbsp;<span class="op" id="8001545">:=</span>&nbsp;<span class="ident" id="8001548">vs</span><span class="op" id="8001550">[</span><span class="ident" id="8001551">j</span><span class="op" id="8001552">]</span><span class="op" id="8001553">;</span>&nbsp;<span class="ident" id="8001555">v</span>&nbsp;<span class="op" id="8001557">!=</span>&nbsp;<span class="ident" id="8001560">ev</span>&nbsp;<span class="op" id="8001563">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001570">t</span><span class="op" id="8001571">.</span><span class="ident" id="8001572">Errorf</span><span class="op" id="8001578">(</span><span class="string" id="8001579">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8001616">,</span>&nbsp;<span class="ident" id="8001618">i</span><span class="op" id="8001619">,</span>&nbsp;<span class="ident" id="8001621">k</span><span class="op" id="8001622">,</span>&nbsp;<span class="ident" id="8001624">j</span><span class="op" id="8001625">,</span>&nbsp;<span class="ident" id="8001627">v</span><span class="op" id="8001628">,</span>&nbsp;<span class="ident" id="8001630">ev</span><span class="op" id="8001632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001650">}</span><br>
<span class="lineno">830</span><span class="op" id="8001652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8001655">type</span>&nbsp;<span class="ident" id="8001660">RequestURITest</span>&nbsp;<span class="keyword" id="8001675">struct</span>&nbsp;<span class="op" id="8001682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001685">url</span>&nbsp;<span class="op" id="8001689">*</span><span class="ident" id="8001690">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001695">out</span>&nbsp;<span class="builtintype" id="8001699">string</span><br>
<span class="lineno">835</span><span class="op" id="8001706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8001709">var</span>&nbsp;<span class="ident" id="8001713">requritests</span>&nbsp;<span class="op" id="8001725">=</span>&nbsp;<span class="op" id="8001727">[</span><span class="op" id="8001728">]</span><span class="ident" id="8001729">RequestURITest</span><span class="op" id="8001743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001750">&amp;</span><span class="ident" id="8001751">URL</span><span class="op" id="8001754">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001759">Scheme</span><span class="op" id="8001765">:</span>&nbsp;<span class="string" id="8001767">&#34;http&#34;</span><span class="op" id="8001773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001778">Host</span><span class="op" id="8001782">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8001786">&#34;example.com&#34;</span><span class="op" id="8001799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001804">Path</span><span class="op" id="8001808">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8001812">&#34;&#34;</span><span class="op" id="8001814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001818">}</span><span class="op" id="8001819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001823">&#34;/&#34;</span><span class="op" id="8001826">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001829">}</span><span class="op" id="8001830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001837">&amp;</span><span class="ident" id="8001838">URL</span><span class="op" id="8001841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001846">Scheme</span><span class="op" id="8001852">:</span>&nbsp;<span class="string" id="8001854">&#34;http&#34;</span><span class="op" id="8001860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001865">Host</span><span class="op" id="8001869">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8001873">&#34;example.com&#34;</span><span class="op" id="8001886">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001891">Path</span><span class="op" id="8001895">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8001899">&#34;/a&nbsp;b&#34;</span><span class="op" id="8001905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001909">}</span><span class="op" id="8001910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8001914">&#34;/a%20b&#34;</span><span class="op" id="8001922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001925">}</span><span class="op" id="8001926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8001929">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001969">&amp;</span><span class="ident" id="8001970">URL</span><span class="op" id="8001973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001978">Scheme</span><span class="op" id="8001984">:</span>&nbsp;<span class="string" id="8001986">&#34;http&#34;</span><span class="op" id="8001992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001997">Host</span><span class="op" id="8002001">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8002005">&#34;example.com&#34;</span><span class="op" id="8002018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002023">Opaque</span><span class="op" id="8002029">:</span>&nbsp;<span class="string" id="8002031">&#34;/%2F/%2F/&#34;</span><span class="op" id="8002042">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002046">}</span><span class="op" id="8002047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002051">&#34;/%2F/%2F/&#34;</span><span class="op" id="8002062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002065">}</span><span class="op" id="8002066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8002069">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002105">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002109">&amp;</span><span class="ident" id="8002110">URL</span><span class="op" id="8002113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002118">Scheme</span><span class="op" id="8002124">:</span>&nbsp;<span class="string" id="8002126">&#34;http&#34;</span><span class="op" id="8002132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002137">Host</span><span class="op" id="8002141">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8002145">&#34;example.com&#34;</span><span class="op" id="8002158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002163">Opaque</span><span class="op" id="8002169">:</span>&nbsp;<span class="string" id="8002171">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="8002201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002205">}</span><span class="op" id="8002206">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002210">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="8002245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002248">}</span><span class="op" id="8002249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002256">&amp;</span><span class="ident" id="8002257">URL</span><span class="op" id="8002260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002265">Scheme</span><span class="op" id="8002271">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8002275">&#34;http&#34;</span><span class="op" id="8002281">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002286">Host</span><span class="op" id="8002290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002296">&#34;example.com&#34;</span><span class="op" id="8002309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002314">Path</span><span class="op" id="8002318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8002324">&#34;/a&nbsp;b&#34;</span><span class="op" id="8002330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002335">RawQuery</span><span class="op" id="8002343">:</span>&nbsp;<span class="string" id="8002345">&#34;q=go+language&#34;</span><span class="op" id="8002360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002364">}</span><span class="op" id="8002365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002369">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="8002391">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002394">}</span><span class="op" id="8002395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002402">&amp;</span><span class="ident" id="8002403">URL</span><span class="op" id="8002406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002411">Scheme</span><span class="op" id="8002417">:</span>&nbsp;<span class="string" id="8002419">&#34;myschema&#34;</span><span class="op" id="8002429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002434">Opaque</span><span class="op" id="8002440">:</span>&nbsp;<span class="string" id="8002442">&#34;opaque&#34;</span><span class="op" id="8002450">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002454">}</span><span class="op" id="8002455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002459">&#34;opaque&#34;</span><span class="op" id="8002467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002470">}</span><span class="op" id="8002471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002478">&amp;</span><span class="ident" id="8002479">URL</span><span class="op" id="8002482">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002487">Scheme</span><span class="op" id="8002493">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8002497">&#34;myschema&#34;</span><span class="op" id="8002507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002512">Opaque</span><span class="op" id="8002518">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8002522">&#34;opaque&#34;</span><span class="op" id="8002530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002535">RawQuery</span><span class="op" id="8002543">:</span>&nbsp;<span class="string" id="8002545">&#34;q=go+language&#34;</span><span class="op" id="8002560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002564">}</span><span class="op" id="8002565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8002569">&#34;opaque?q=go+language&#34;</span><span class="op" id="8002591">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002594">}</span><span class="op" id="8002595">,</span><br>
<span class="lineno"></span><span class="op" id="8002597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8002600">func</span>&nbsp;<span class="ident" id="8002605">TestRequestURI</span><span class="op" id="8002619">(</span><span class="ident" id="8002620">t</span>&nbsp;<span class="op" id="8002622">*</span><span class="ident" id="8002623">testing</span><span class="op" id="8002630">.</span><span class="ident" id="8002631">T</span><span class="op" id="8002632">)</span>&nbsp;<span class="op" id="8002634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002637">for</span>&nbsp;<span class="ident" id="8002641">_</span><span class="op" id="8002642">,</span>&nbsp;<span class="ident" id="8002644">tt</span>&nbsp;<span class="op" id="8002647">:=</span>&nbsp;<span class="keyword" id="8002650">range</span>&nbsp;<span class="ident" id="8002656">requritests</span>&nbsp;<span class="op" id="8002668">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002672">s</span>&nbsp;<span class="op" id="8002674">:=</span>&nbsp;<span class="ident" id="8002677">tt</span><span class="op" id="8002679">.</span><span class="ident" id="8002680">url</span><span class="op" id="8002683">.</span><span class="ident" id="8002684">RequestURI</span><span class="op" id="8002694">(</span><span class="op" id="8002695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002699">if</span>&nbsp;<span class="ident" id="8002702">s</span>&nbsp;<span class="op" id="8002704">!=</span>&nbsp;<span class="ident" id="8002707">tt</span><span class="op" id="8002709">.</span><span class="ident" id="8002710">out</span>&nbsp;<span class="op" id="8002714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002719">t</span><span class="op" id="8002720">.</span><span class="ident" id="8002721">Errorf</span><span class="op" id="8002727">(</span><span class="string" id="8002728">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="8002766">,</span>&nbsp;<span class="ident" id="8002768">tt</span><span class="op" id="8002770">.</span><span class="ident" id="8002771">url</span><span class="op" id="8002774">,</span>&nbsp;<span class="ident" id="8002776">s</span><span class="op" id="8002777">,</span>&nbsp;<span class="ident" id="8002779">tt</span><span class="op" id="8002781">.</span><span class="ident" id="8002782">out</span><span class="op" id="8002785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002792">}</span><br>
<span class="lineno">905</span><span class="op" id="8002794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8002797">func</span>&nbsp;<span class="ident" id="8002802">TestParseFailure</span><span class="op" id="8002818">(</span><span class="ident" id="8002819">t</span>&nbsp;<span class="op" id="8002821">*</span><span class="ident" id="8002822">testing</span><span class="op" id="8002829">.</span><span class="ident" id="8002830">T</span><span class="op" id="8002831">)</span>&nbsp;<span class="op" id="8002833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8002836">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002885">const</span>&nbsp;<span class="ident" id="8002891">url</span>&nbsp;<span class="op" id="8002895">=</span>&nbsp;<span class="string" id="8002897">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002908">_</span><span class="op" id="8002909">,</span>&nbsp;<span class="ident" id="8002911">err</span>&nbsp;<span class="op" id="8002915">:=</span>&nbsp;<span class="ident" id="8002918">ParseQuery</span><span class="op" id="8002928">(</span><span class="ident" id="8002929">url</span><span class="op" id="8002932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002935">errStr</span>&nbsp;<span class="op" id="8002942">:=</span>&nbsp;<span class="ident" id="8002945">fmt</span><span class="op" id="8002948">.</span><span class="ident" id="8002949">Sprint</span><span class="op" id="8002955">(</span><span class="ident" id="8002956">err</span><span class="op" id="8002959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002962">if</span>&nbsp;<span class="op" id="8002965">!</span><span class="ident" id="8002966">strings</span><span class="op" id="8002973">.</span><span class="ident" id="8002974">Contains</span><span class="op" id="8002982">(</span><span class="ident" id="8002983">errStr</span><span class="op" id="8002989">,</span>&nbsp;<span class="string" id="8002991">&#34;%gh&#34;</span><span class="op" id="8002996">)</span>&nbsp;<span class="op" id="8002998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003002">t</span><span class="op" id="8003003">.</span><span class="ident" id="8003004">Errorf</span><span class="op" id="8003010">(</span><span class="string" id="8003011">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="8003076">,</span>&nbsp;<span class="ident" id="8003078">url</span><span class="op" id="8003081">,</span>&nbsp;<span class="ident" id="8003083">errStr</span><span class="op" id="8003089">,</span>&nbsp;<span class="string" id="8003091">&#34;%gh&#34;</span><span class="op" id="8003096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003099">}</span><br>
<span class="lineno">915</span><span class="op" id="8003101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8003104">type</span>&nbsp;<span class="ident" id="8003109">shouldEscapeTest</span>&nbsp;<span class="keyword" id="8003126">struct</span>&nbsp;<span class="op" id="8003133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003136">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8003143">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003149">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8003156">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003166">escape</span>&nbsp;<span class="builtintype" id="8003173">bool</span><br>
<span class="lineno"></span><span class="op" id="8003178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8003181">var</span>&nbsp;<span class="ident" id="8003185">shouldEscapeTests</span>&nbsp;<span class="op" id="8003203">=</span>&nbsp;<span class="op" id="8003205">[</span><span class="op" id="8003206">]</span><span class="ident" id="8003207">shouldEscapeTest</span><span class="op" id="8003223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003226">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003260">{</span><span class="string" id="8003261">&#39;a&#39;</span><span class="op" id="8003264">,</span>&nbsp;<span class="ident" id="8003266">encodePath</span><span class="op" id="8003276">,</span>&nbsp;<span class="builtintype" id="8003278">false</span><span class="op" id="8003283">}</span><span class="op" id="8003284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003287">{</span><span class="string" id="8003288">&#39;a&#39;</span><span class="op" id="8003291">,</span>&nbsp;<span class="ident" id="8003293">encodeUserPassword</span><span class="op" id="8003311">,</span>&nbsp;<span class="builtintype" id="8003313">false</span><span class="op" id="8003318">}</span><span class="op" id="8003319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003322">{</span><span class="string" id="8003323">&#39;a&#39;</span><span class="op" id="8003326">,</span>&nbsp;<span class="ident" id="8003328">encodeQueryComponent</span><span class="op" id="8003348">,</span>&nbsp;<span class="builtintype" id="8003350">false</span><span class="op" id="8003355">}</span><span class="op" id="8003356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003359">{</span><span class="string" id="8003360">&#39;a&#39;</span><span class="op" id="8003363">,</span>&nbsp;<span class="ident" id="8003365">encodeFragment</span><span class="op" id="8003379">,</span>&nbsp;<span class="builtintype" id="8003381">false</span><span class="op" id="8003386">}</span><span class="op" id="8003387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003390">{</span><span class="string" id="8003391">&#39;z&#39;</span><span class="op" id="8003394">,</span>&nbsp;<span class="ident" id="8003396">encodePath</span><span class="op" id="8003406">,</span>&nbsp;<span class="builtintype" id="8003408">false</span><span class="op" id="8003413">}</span><span class="op" id="8003414">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003417">{</span><span class="string" id="8003418">&#39;A&#39;</span><span class="op" id="8003421">,</span>&nbsp;<span class="ident" id="8003423">encodePath</span><span class="op" id="8003433">,</span>&nbsp;<span class="builtintype" id="8003435">false</span><span class="op" id="8003440">}</span><span class="op" id="8003441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003444">{</span><span class="string" id="8003445">&#39;Z&#39;</span><span class="op" id="8003448">,</span>&nbsp;<span class="ident" id="8003450">encodePath</span><span class="op" id="8003460">,</span>&nbsp;<span class="builtintype" id="8003462">false</span><span class="op" id="8003467">}</span><span class="op" id="8003468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003471">{</span><span class="string" id="8003472">&#39;0&#39;</span><span class="op" id="8003475">,</span>&nbsp;<span class="ident" id="8003477">encodePath</span><span class="op" id="8003487">,</span>&nbsp;<span class="builtintype" id="8003489">false</span><span class="op" id="8003494">}</span><span class="op" id="8003495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003498">{</span><span class="string" id="8003499">&#39;9&#39;</span><span class="op" id="8003502">,</span>&nbsp;<span class="ident" id="8003504">encodePath</span><span class="op" id="8003514">,</span>&nbsp;<span class="builtintype" id="8003516">false</span><span class="op" id="8003521">}</span><span class="op" id="8003522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003525">{</span><span class="string" id="8003526">&#39;-&#39;</span><span class="op" id="8003529">,</span>&nbsp;<span class="ident" id="8003531">encodePath</span><span class="op" id="8003541">,</span>&nbsp;<span class="builtintype" id="8003543">false</span><span class="op" id="8003548">}</span><span class="op" id="8003549">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003552">{</span><span class="string" id="8003553">&#39;-&#39;</span><span class="op" id="8003556">,</span>&nbsp;<span class="ident" id="8003558">encodeUserPassword</span><span class="op" id="8003576">,</span>&nbsp;<span class="builtintype" id="8003578">false</span><span class="op" id="8003583">}</span><span class="op" id="8003584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003587">{</span><span class="string" id="8003588">&#39;-&#39;</span><span class="op" id="8003591">,</span>&nbsp;<span class="ident" id="8003593">encodeQueryComponent</span><span class="op" id="8003613">,</span>&nbsp;<span class="builtintype" id="8003615">false</span><span class="op" id="8003620">}</span><span class="op" id="8003621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003624">{</span><span class="string" id="8003625">&#39;-&#39;</span><span class="op" id="8003628">,</span>&nbsp;<span class="ident" id="8003630">encodeFragment</span><span class="op" id="8003644">,</span>&nbsp;<span class="builtintype" id="8003646">false</span><span class="op" id="8003651">}</span><span class="op" id="8003652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003655">{</span><span class="string" id="8003656">&#39;.&#39;</span><span class="op" id="8003659">,</span>&nbsp;<span class="ident" id="8003661">encodePath</span><span class="op" id="8003671">,</span>&nbsp;<span class="builtintype" id="8003673">false</span><span class="op" id="8003678">}</span><span class="op" id="8003679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003682">{</span><span class="string" id="8003683">&#39;_&#39;</span><span class="op" id="8003686">,</span>&nbsp;<span class="ident" id="8003688">encodePath</span><span class="op" id="8003698">,</span>&nbsp;<span class="builtintype" id="8003700">false</span><span class="op" id="8003705">}</span><span class="op" id="8003706">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003709">{</span><span class="string" id="8003710">&#39;~&#39;</span><span class="op" id="8003713">,</span>&nbsp;<span class="ident" id="8003715">encodePath</span><span class="op" id="8003725">,</span>&nbsp;<span class="builtintype" id="8003727">false</span><span class="op" id="8003732">}</span><span class="op" id="8003733">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8003737">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003768">{</span><span class="string" id="8003769">&#39;:&#39;</span><span class="op" id="8003772">,</span>&nbsp;<span class="ident" id="8003774">encodeUserPassword</span><span class="op" id="8003792">,</span>&nbsp;<span class="builtintype" id="8003794">true</span><span class="op" id="8003798">}</span><span class="op" id="8003799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003802">{</span><span class="string" id="8003803">&#39;/&#39;</span><span class="op" id="8003806">,</span>&nbsp;<span class="ident" id="8003808">encodeUserPassword</span><span class="op" id="8003826">,</span>&nbsp;<span class="builtintype" id="8003828">true</span><span class="op" id="8003832">}</span><span class="op" id="8003833">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003836">{</span><span class="string" id="8003837">&#39;?&#39;</span><span class="op" id="8003840">,</span>&nbsp;<span class="ident" id="8003842">encodeUserPassword</span><span class="op" id="8003860">,</span>&nbsp;<span class="builtintype" id="8003862">true</span><span class="op" id="8003866">}</span><span class="op" id="8003867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003870">{</span><span class="string" id="8003871">&#39;@&#39;</span><span class="op" id="8003874">,</span>&nbsp;<span class="ident" id="8003876">encodeUserPassword</span><span class="op" id="8003894">,</span>&nbsp;<span class="builtintype" id="8003896">true</span><span class="op" id="8003900">}</span><span class="op" id="8003901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003904">{</span><span class="string" id="8003905">&#39;$&#39;</span><span class="op" id="8003908">,</span>&nbsp;<span class="ident" id="8003910">encodeUserPassword</span><span class="op" id="8003928">,</span>&nbsp;<span class="builtintype" id="8003930">false</span><span class="op" id="8003935">}</span><span class="op" id="8003936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003939">{</span><span class="string" id="8003940">&#39;&amp;&#39;</span><span class="op" id="8003943">,</span>&nbsp;<span class="ident" id="8003945">encodeUserPassword</span><span class="op" id="8003963">,</span>&nbsp;<span class="builtintype" id="8003965">false</span><span class="op" id="8003970">}</span><span class="op" id="8003971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003974">{</span><span class="string" id="8003975">&#39;+&#39;</span><span class="op" id="8003978">,</span>&nbsp;<span class="ident" id="8003980">encodeUserPassword</span><span class="op" id="8003998">,</span>&nbsp;<span class="builtintype" id="8004000">false</span><span class="op" id="8004005">}</span><span class="op" id="8004006">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004009">{</span><span class="string" id="8004010">&#39;,&#39;</span><span class="op" id="8004013">,</span>&nbsp;<span class="ident" id="8004015">encodeUserPassword</span><span class="op" id="8004033">,</span>&nbsp;<span class="builtintype" id="8004035">false</span><span class="op" id="8004040">}</span><span class="op" id="8004041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004044">{</span><span class="string" id="8004045">&#39;;&#39;</span><span class="op" id="8004048">,</span>&nbsp;<span class="ident" id="8004050">encodeUserPassword</span><span class="op" id="8004068">,</span>&nbsp;<span class="builtintype" id="8004070">false</span><span class="op" id="8004075">}</span><span class="op" id="8004076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004079">{</span><span class="string" id="8004080">&#39;=&#39;</span><span class="op" id="8004083">,</span>&nbsp;<span class="ident" id="8004085">encodeUserPassword</span><span class="op" id="8004103">,</span>&nbsp;<span class="builtintype" id="8004105">false</span><span class="op" id="8004110">}</span><span class="op" id="8004111">,</span><br>
<span class="lineno"></span><span class="op" id="8004113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="8004116">func</span>&nbsp;<span class="ident" id="8004121">TestShouldEscape</span><span class="op" id="8004137">(</span><span class="ident" id="8004138">t</span>&nbsp;<span class="op" id="8004140">*</span><span class="ident" id="8004141">testing</span><span class="op" id="8004148">.</span><span class="ident" id="8004149">T</span><span class="op" id="8004150">)</span>&nbsp;<span class="op" id="8004152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004155">for</span>&nbsp;<span class="ident" id="8004159">_</span><span class="op" id="8004160">,</span>&nbsp;<span class="ident" id="8004162">tt</span>&nbsp;<span class="op" id="8004165">:=</span>&nbsp;<span class="keyword" id="8004168">range</span>&nbsp;<span class="ident" id="8004174">shouldEscapeTests</span>&nbsp;<span class="op" id="8004192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004196">if</span>&nbsp;<span class="ident" id="8004199">shouldEscape</span><span class="op" id="8004211">(</span><span class="ident" id="8004212">tt</span><span class="op" id="8004214">.</span><span class="ident" id="8004215">in</span><span class="op" id="8004217">,</span>&nbsp;<span class="ident" id="8004219">tt</span><span class="op" id="8004221">.</span><span class="ident" id="8004222">mode</span><span class="op" id="8004226">)</span>&nbsp;<span class="op" id="8004228">!=</span>&nbsp;<span class="ident" id="8004231">tt</span><span class="op" id="8004233">.</span><span class="ident" id="8004234">escape</span>&nbsp;<span class="op" id="8004241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004246">t</span><span class="op" id="8004247">.</span><span class="ident" id="8004248">Errorf</span><span class="op" id="8004254">(</span><span class="string" id="8004255">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8004302">,</span>&nbsp;<span class="ident" id="8004304">tt</span><span class="op" id="8004306">.</span><span class="ident" id="8004307">in</span><span class="op" id="8004309">,</span>&nbsp;<span class="ident" id="8004311">tt</span><span class="op" id="8004313">.</span><span class="ident" id="8004314">mode</span><span class="op" id="8004318">,</span>&nbsp;<span class="op" id="8004320">!</span><span class="ident" id="8004321">tt</span><span class="op" id="8004323">.</span><span class="ident" id="8004324">escape</span><span class="op" id="8004330">,</span>&nbsp;<span class="ident" id="8004332">tt</span><span class="op" id="8004334">.</span><span class="ident" id="8004335">escape</span><span class="op" id="8004341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004345">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004348">}</span><br>
<span class="lineno"></span><span class="op" id="8004350">}</span>
</div>
</body>
</html>
